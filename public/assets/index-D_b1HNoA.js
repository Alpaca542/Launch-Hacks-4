(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Dw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hm={exports:{}},vu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function sI(){if(Xv)return vu;Xv=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:e,type:r,key:c,ref:a!==void 0?a:null,props:l}}return vu.Fragment=t,vu.jsx=n,vu.jsxs=n,vu}var Qv;function aI(){return Qv||(Qv=1,hm.exports=sI()),hm.exports}var _t=aI(),fm={exports:{}},Ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function oI(){if(Zv)return Ut;Zv=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function T(x){return x===null||typeof x!="object"?null:(x=v&&x[v]||x["@@iterator"],typeof x=="function"?x:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,L={};function V(x,G,W){this.props=x,this.context=G,this.refs=L,this.updater=W||S}V.prototype.isReactComponent={},V.prototype.setState=function(x,G){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,G,"setState")},V.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function B(){}B.prototype=V.prototype;function q(x,G,W){this.props=x,this.context=G,this.refs=L,this.updater=W||S}var F=q.prototype=new B;F.constructor=q,P(F,V.prototype),F.isPureReactComponent=!0;var H=Array.isArray,et={H:null,A:null,T:null,S:null,V:null},nt=Object.prototype.hasOwnProperty;function D(x,G,W,rt,ct,mt){return W=mt.ref,{$$typeof:e,type:x,key:G,ref:W!==void 0?W:null,props:mt}}function R(x,G){return D(x.type,G,void 0,void 0,void 0,x.props)}function I(x){return typeof x=="object"&&x!==null&&x.$$typeof===e}function k(x){var G={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(W){return G[W]})}var N=/\/+/g;function U(x,G){return typeof x=="object"&&x!==null&&x.key!=null?k(""+x.key):G.toString(36)}function A(){}function M(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(A,A):(x.status="pending",x.then(function(G){x.status==="pending"&&(x.status="fulfilled",x.value=G)},function(G){x.status==="pending"&&(x.status="rejected",x.reason=G)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function tt(x,G,W,rt,ct){var mt=typeof x;(mt==="undefined"||mt==="boolean")&&(x=null);var pt=!1;if(x===null)pt=!0;else switch(mt){case"bigint":case"string":case"number":pt=!0;break;case"object":switch(x.$$typeof){case e:case t:pt=!0;break;case y:return pt=x._init,tt(pt(x._payload),G,W,rt,ct)}}if(pt)return ct=ct(x),pt=rt===""?"."+U(x,0):rt,H(ct)?(W="",pt!=null&&(W=pt.replace(N,"$&/")+"/"),tt(ct,G,W,"",function(kt){return kt})):ct!=null&&(I(ct)&&(ct=R(ct,W+(ct.key==null||x&&x.key===ct.key?"":(""+ct.key).replace(N,"$&/")+"/")+pt)),G.push(ct)),1;pt=0;var It=rt===""?".":rt+":";if(H(x))for(var At=0;At<x.length;At++)rt=x[At],mt=It+U(rt,At),pt+=tt(rt,G,W,mt,ct);else if(At=T(x),typeof At=="function")for(x=At.call(x),At=0;!(rt=x.next()).done;)rt=rt.value,mt=It+U(rt,At++),pt+=tt(rt,G,W,mt,ct);else if(mt==="object"){if(typeof x.then=="function")return tt(M(x),G,W,rt,ct);throw G=String(x),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return pt}function O(x,G,W){if(x==null)return x;var rt=[],ct=0;return tt(x,rt,"","",function(mt){return G.call(W,mt,ct++)}),rt}function $(x){if(x._status===-1){var G=x._result;G=G(),G.then(function(W){(x._status===0||x._status===-1)&&(x._status=1,x._result=W)},function(W){(x._status===0||x._status===-1)&&(x._status=2,x._result=W)}),x._status===-1&&(x._status=0,x._result=G)}if(x._status===1)return x._result.default;throw x._result}var at=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)};function Y(){}return Ut.Children={map:O,forEach:function(x,G,W){O(x,function(){G.apply(this,arguments)},W)},count:function(x){var G=0;return O(x,function(){G++}),G},toArray:function(x){return O(x,function(G){return G})||[]},only:function(x){if(!I(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Ut.Component=V,Ut.Fragment=n,Ut.Profiler=a,Ut.PureComponent=q,Ut.StrictMode=r,Ut.Suspense=g,Ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=et,Ut.__COMPILER_RUNTIME={__proto__:null,c:function(x){return et.H.useMemoCache(x)}},Ut.cache=function(x){return function(){return x.apply(null,arguments)}},Ut.cloneElement=function(x,G,W){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var rt=P({},x.props),ct=x.key,mt=void 0;if(G!=null)for(pt in G.ref!==void 0&&(mt=void 0),G.key!==void 0&&(ct=""+G.key),G)!nt.call(G,pt)||pt==="key"||pt==="__self"||pt==="__source"||pt==="ref"&&G.ref===void 0||(rt[pt]=G[pt]);var pt=arguments.length-2;if(pt===1)rt.children=W;else if(1<pt){for(var It=Array(pt),At=0;At<pt;At++)It[At]=arguments[At+2];rt.children=It}return D(x.type,ct,void 0,void 0,mt,rt)},Ut.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:l,_context:x},x},Ut.createElement=function(x,G,W){var rt,ct={},mt=null;if(G!=null)for(rt in G.key!==void 0&&(mt=""+G.key),G)nt.call(G,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(ct[rt]=G[rt]);var pt=arguments.length-2;if(pt===1)ct.children=W;else if(1<pt){for(var It=Array(pt),At=0;At<pt;At++)It[At]=arguments[At+2];ct.children=It}if(x&&x.defaultProps)for(rt in pt=x.defaultProps,pt)ct[rt]===void 0&&(ct[rt]=pt[rt]);return D(x,mt,void 0,void 0,null,ct)},Ut.createRef=function(){return{current:null}},Ut.forwardRef=function(x){return{$$typeof:d,render:x}},Ut.isValidElement=I,Ut.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:$}},Ut.memo=function(x,G){return{$$typeof:m,type:x,compare:G===void 0?null:G}},Ut.startTransition=function(x){var G=et.T,W={};et.T=W;try{var rt=x(),ct=et.S;ct!==null&&ct(W,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(Y,at)}catch(mt){at(mt)}finally{et.T=G}},Ut.unstable_useCacheRefresh=function(){return et.H.useCacheRefresh()},Ut.use=function(x){return et.H.use(x)},Ut.useActionState=function(x,G,W){return et.H.useActionState(x,G,W)},Ut.useCallback=function(x,G){return et.H.useCallback(x,G)},Ut.useContext=function(x){return et.H.useContext(x)},Ut.useDebugValue=function(){},Ut.useDeferredValue=function(x,G){return et.H.useDeferredValue(x,G)},Ut.useEffect=function(x,G,W){var rt=et.H;if(typeof W=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return rt.useEffect(x,G)},Ut.useId=function(){return et.H.useId()},Ut.useImperativeHandle=function(x,G,W){return et.H.useImperativeHandle(x,G,W)},Ut.useInsertionEffect=function(x,G){return et.H.useInsertionEffect(x,G)},Ut.useLayoutEffect=function(x,G){return et.H.useLayoutEffect(x,G)},Ut.useMemo=function(x,G){return et.H.useMemo(x,G)},Ut.useOptimistic=function(x,G){return et.H.useOptimistic(x,G)},Ut.useReducer=function(x,G,W){return et.H.useReducer(x,G,W)},Ut.useRef=function(x){return et.H.useRef(x)},Ut.useState=function(x){return et.H.useState(x)},Ut.useSyncExternalStore=function(x,G,W){return et.H.useSyncExternalStore(x,G,W)},Ut.useTransition=function(){return et.H.useTransition()},Ut.version="19.1.0",Ut}var Wv;function rc(){return Wv||(Wv=1,fm.exports=oI()),fm.exports}var X=rc();const lt=Dw(X);var dm={exports:{}},Eu={},gm={exports:{}},mm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function lI(){return Jv||(Jv=1,function(e){function t(O,$){var at=O.length;O.push($);t:for(;0<at;){var Y=at-1>>>1,x=O[Y];if(0<a(x,$))O[Y]=$,O[at]=x,at=Y;else break t}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var $=O[0],at=O.pop();if(at!==$){O[0]=at;t:for(var Y=0,x=O.length,G=x>>>1;Y<G;){var W=2*(Y+1)-1,rt=O[W],ct=W+1,mt=O[ct];if(0>a(rt,at))ct<x&&0>a(mt,rt)?(O[Y]=mt,O[ct]=at,Y=ct):(O[Y]=rt,O[W]=at,Y=W);else if(ct<x&&0>a(mt,at))O[Y]=mt,O[ct]=at,Y=ct;else break t}}return $}function a(O,$){var at=O.sortIndex-$.sortIndex;return at!==0?at:O.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var g=[],m=[],y=1,v=null,T=3,S=!1,P=!1,L=!1,V=!1,B=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function H(O){for(var $=n(m);$!==null;){if($.callback===null)r(m);else if($.startTime<=O)r(m),$.sortIndex=$.expirationTime,t(g,$);else break;$=n(m)}}function et(O){if(L=!1,H(O),!P)if(n(g)!==null)P=!0,nt||(nt=!0,U());else{var $=n(m);$!==null&&tt(et,$.startTime-O)}}var nt=!1,D=-1,R=5,I=-1;function k(){return V?!0:!(e.unstable_now()-I<R)}function N(){if(V=!1,nt){var O=e.unstable_now();I=O;var $=!0;try{t:{P=!1,L&&(L=!1,q(D),D=-1),S=!0;var at=T;try{e:{for(H(O),v=n(g);v!==null&&!(v.expirationTime>O&&k());){var Y=v.callback;if(typeof Y=="function"){v.callback=null,T=v.priorityLevel;var x=Y(v.expirationTime<=O);if(O=e.unstable_now(),typeof x=="function"){v.callback=x,H(O),$=!0;break e}v===n(g)&&r(g),H(O)}else r(g);v=n(g)}if(v!==null)$=!0;else{var G=n(m);G!==null&&tt(et,G.startTime-O),$=!1}}break t}finally{v=null,T=at,S=!1}$=void 0}}finally{$?U():nt=!1}}}var U;if(typeof F=="function")U=function(){F(N)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,M=A.port2;A.port1.onmessage=N,U=function(){M.postMessage(null)}}else U=function(){B(N,0)};function tt(O,$){D=B(function(){O(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_next=function(O){switch(T){case 1:case 2:case 3:var $=3;break;default:$=T}var at=T;T=$;try{return O()}finally{T=at}},e.unstable_requestPaint=function(){V=!0},e.unstable_runWithPriority=function(O,$){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var at=T;T=O;try{return $()}finally{T=at}},e.unstable_scheduleCallback=function(O,$,at){var Y=e.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?Y+at:Y):at=Y,O){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=at+x,O={id:y++,callback:$,priorityLevel:O,startTime:at,expirationTime:x,sortIndex:-1},at>Y?(O.sortIndex=at,t(m,O),n(g)===null&&O===n(m)&&(L?(q(D),D=-1):L=!0,tt(et,at-Y))):(O.sortIndex=x,t(g,O),P||S||(P=!0,nt||(nt=!0,U()))),O},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(O){var $=T;return function(){var at=T;T=$;try{return O.apply(this,arguments)}finally{T=at}}}}(mm)),mm}var tE;function uI(){return tE||(tE=1,gm.exports=lI()),gm.exports}var pm={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE;function cI(){if(eE)return yn;eE=1;var e=rc();function t(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,m,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:g,containerInfo:m,implementation:y}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,yn.createPortal=function(g,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return l(g,m,null,y)},yn.flushSync=function(g){var m=c.T,y=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=m,r.p=y,r.d.f()}},yn.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(g,m))},yn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},yn.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?r.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:S}):y==="script"&&r.d.X(g,{crossOrigin:v,integrity:T,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},yn.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=d(m.as,m.crossOrigin);r.d.M(g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(g)},yn.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin);r.d.L(g,y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},yn.preloadModule=function(g,m){if(typeof g=="string")if(m){var y=d(m.as,m.crossOrigin);r.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(g)},yn.requestFormReset=function(g){r.d.r(g)},yn.unstable_batchedUpdates=function(g,m){return g(m)},yn.useFormState=function(g,m,y){return c.H.useFormState(g,m,y)},yn.useFormStatus=function(){return c.H.useHostTransitionStatus()},yn.version="19.1.0",yn}var nE;function Ow(){if(nE)return pm.exports;nE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),pm.exports=cI(),pm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE;function hI(){if(iE)return Eu;iE=1;var e=uI(),t=rc(),n=Ow();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(r(188))}function g(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return d(f),i;if(p===u)return d(f),s;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=p;else{for(var w=!1,b=f.child;b;){if(b===o){w=!0,o=f,u=p;break}if(b===u){w=!0,u=f,o=p;break}b=b.sibling}if(!w){for(b=p.child;b;){if(b===o){w=!0,o=p,u=f;break}if(b===u){w=!0,u=p,o=f;break}b=b.sibling}if(!w)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function m(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=m(i),s!==null)return s;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),F=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),et=Symbol.for("react.suspense"),nt=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=N&&i[N]||i["@@iterator"],typeof i=="function"?i:null)}var A=Symbol.for("react.client.reference");function M(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===A?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case V:return"Profiler";case L:return"StrictMode";case et:return"Suspense";case nt:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case F:return(i.displayName||"Context")+".Provider";case q:return(i._context.displayName||"Context")+".Consumer";case H:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return s=i.displayName||null,s!==null?s:M(i.type)||"Memo";case R:s=i._payload,i=i._init;try{return M(i(s))}catch{}}return null}var tt=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at={pending:!1,data:null,method:null,action:null},Y=[],x=-1;function G(i){return{current:i}}function W(i){0>x||(i.current=Y[x],Y[x]=null,x--)}function rt(i,s){x++,Y[x]=i.current,i.current=s}var ct=G(null),mt=G(null),pt=G(null),It=G(null);function At(i,s){switch(rt(pt,s),rt(mt,i),rt(ct,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Sv(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Sv(s),i=bv(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}W(ct),rt(ct,i)}function kt(){W(ct),W(mt),W(pt)}function Pt(i){i.memoizedState!==null&&rt(It,i);var s=ct.current,o=bv(s,i.type);s!==o&&(rt(mt,i),rt(ct,o))}function ue(i){mt.current===i&&(W(ct),W(mt)),It.current===i&&(W(It),gu._currentValue=at)}var ce=Object.prototype.hasOwnProperty,ve=e.unstable_scheduleCallback,ye=e.unstable_cancelCallback,he=e.unstable_shouldYield,Ke=e.unstable_requestPaint,Lt=e.unstable_now,wt=e.unstable_getCurrentPriorityLevel,Ce=e.unstable_ImmediatePriority,mn=e.unstable_UserBlockingPriority,Pn=e.unstable_NormalPriority,ki=e.unstable_LowPriority,Ln=e.unstable_IdlePriority,wn=e.log,vi=e.unstable_setDisableYieldValue,te=null,Ft=null;function Me(i){if(typeof wn=="function"&&vi(i),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(te,i)}catch{}}var Ee=Math.clz32?Math.clz32:Xe,Pi=Math.log,Ve=Math.LN2;function Xe(i){return i>>>=0,i===0?32:31-(Pi(i)/Ve|0)|0}var Sn=256,bn=4194304;function Qe(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function sn(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,p=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var b=u&134217727;return b!==0?(u=b&~p,u!==0?f=Qe(u):(w&=b,w!==0?f=Qe(w):o||(o=b&~i,o!==0&&(f=Qe(o))))):(b=u&~p,b!==0?f=Qe(b):w!==0?f=Qe(w):o||(o=u&~i,o!==0&&(f=Qe(o)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:f}function An(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function hr(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fr(){var i=Sn;return Sn<<=1,(Sn&4194048)===0&&(Sn=256),i}function Ei(){var i=bn;return bn<<=1,(bn&62914560)===0&&(bn=4194304),i}function Un(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function Zn(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function zn(i,s,o,u,f,p){var w=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var b=i.entanglements,z=i.expirationTimes,J=i.hiddenUpdates;for(o=w&~o;0<o;){var ut=31-Ee(o),ft=1<<ut;b[ut]=0,z[ut]=-1;var it=J[ut];if(it!==null)for(J[ut]=null,ut=0;ut<it.length;ut++){var st=it[ut];st!==null&&(st.lane&=-536870913)}o&=~ft}u!==0&&Wn(i,u,0),p!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=p&~(w&~s))}function Wn(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-Ee(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&4194090}function Ys(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-Ee(o),f=1<<u;f&s|i[u]&s&&(i[u]|=s),o&=~f}}function Li(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Xr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ui(){var i=$.p;return i!==0?i:(i=window.event,i===void 0?32:Fv(i.type))}function Ga(i,s){var o=$.p;try{return $.p=i,s()}finally{$.p=o}}var de=Math.random().toString(36).slice(2),xe="__reactFiber$"+de,be="__reactProps$"+de,Nn="__reactContainer$"+de,Ks="__reactEvents$"+de,El="__reactListeners$"+de,zi="__reactHandles$"+de,$a="__reactResources$"+de,dr="__reactMarker$"+de;function Bi(i){delete i[xe],delete i[be],delete i[Ks],delete i[El],delete i[zi]}function Jn(i){var s=i[xe];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Nn]||o[xe]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=Cv(i);i!==null;){if(o=i[xe])return o;i=Cv(i)}return s}i=o,o=i.parentNode}return null}function ti(i){if(i=i[xe]||i[Nn]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function ei(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function an(i){var s=i[$a];return s||(s=i[$a]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Te(i){i[dr]=!0}var Xs=new Set,Qr={};function Bn(i,s){Ti(i,s),Ti(i+"Capture",s)}function Ti(i,s){for(Qr[i]=s,i=0;i<s.length;i++)Xs.add(s[i])}var Qs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ya={},gr={};function Ka(i){return ce.call(gr,i)?!0:ce.call(Ya,i)?!1:Qs.test(i)?gr[i]=!0:(Ya[i]=!0,!1)}function Hi(i,s,o){if(Ka(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function ni(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function Be(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}var qi,Xa;function wi(i){if(qi===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);qi=s&&s[1]||"",Xa=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qi+i+Xa}var Zr=!1;function Fi(i,s){if(!i||Zr)return"";Zr=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(st){var it=st}Reflect.construct(i,[],ft)}else{try{ft.call()}catch(st){it=st}i.call(ft.prototype)}}else{try{throw Error()}catch(st){it=st}(ft=i())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(st){if(st&&it&&typeof st.stack=="string")return[st.stack,it.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),w=p[0],b=p[1];if(w&&b){var z=w.split(`
`),J=b.split(`
`);for(f=u=0;u<z.length&&!z[u].includes("DetermineComponentFrameRoot");)u++;for(;f<J.length&&!J[f].includes("DetermineComponentFrameRoot");)f++;if(u===z.length||f===J.length)for(u=z.length-1,f=J.length-1;1<=u&&0<=f&&z[u]!==J[f];)f--;for(;1<=u&&0<=f;u--,f--)if(z[u]!==J[f]){if(u!==1||f!==1)do if(u--,f--,0>f||z[u]!==J[f]){var ut=`
`+z[u].replace(" at new "," at ");return i.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",i.displayName)),ut}while(1<=u&&0<=f);break}}}finally{Zr=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?wi(o):""}function Tl(i){switch(i.tag){case 26:case 27:case 5:return wi(i.type);case 16:return wi("Lazy");case 13:return wi("Suspense");case 19:return wi("SuspenseList");case 0:case 15:return Fi(i.type,!1);case 11:return Fi(i.type.render,!1);case 1:return Fi(i.type,!0);case 31:return wi("Activity");default:return""}}function Qa(i){try{var s="";do s+=Tl(i),i=i.return;while(i);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Rn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function wl(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function md(i){var s=wl(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),u=""+i[s];if(!i.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){u=""+w,p.call(this,w)}}),Object.defineProperty(i,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Za(i){i._valueTracker||(i._valueTracker=md(i))}function Sl(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=wl(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function Zs(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var pd=/[\n"\\]/g;function ke(i){return i.replace(pd,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Hn(i,s,o,u,f,p,w,b){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),s!=null?w==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Rn(s)):i.value!==""+Rn(s)&&(i.value=""+Rn(s)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),s!=null?Wr(i,w,Rn(s)):o!=null?Wr(i,w,Rn(o)):u!=null&&i.removeAttribute("value"),f==null&&p!=null&&(i.defaultChecked=!!p),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.name=""+Rn(b):i.removeAttribute("name")}function Ws(i,s,o,u,f,p,w,b){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+Rn(o):"",s=s!=null?""+Rn(s):o,b||s===i.value||(i.value=s),i.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=b?i.checked:!!u,i.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w)}function Wr(i,s,o){s==="number"&&Zs(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function mr(i,s,o,u){if(i=i.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=s.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+Rn(o),s=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function se(i,s,o){if(s!=null&&(s=""+Rn(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+Rn(o):""}function Js(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(tt(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Rn(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u)}function ii(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var ta=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vc(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||ta.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function bl(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&vc(i,f,u)}else for(var p in s)s.hasOwnProperty(p)&&vc(i,p,s[p])}function Al(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_d=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wa(i){return _d.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var pr=null;function ri(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yr=null,_r=null;function Rl(i){var s=ti(i);if(s&&(i=s.stateNode)){var o=i[be]||null;t:switch(i=s.stateNode,s.type){case"input":if(Hn(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+ke(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var f=u[be]||null;if(!f)throw Error(r(90));Hn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&Sl(u)}break t;case"textarea":se(i,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&mr(i,!!o.multiple,s,!1)}}}var ji=!1;function Ec(i,s,o){if(ji)return i(s,o);ji=!0;try{var u=i(s);return u}finally{if(ji=!1,(yr!==null||_r!==null)&&(dh(),yr&&(s=yr,i=_r,_r=yr=null,Rl(s),i)))for(s=0;s<i.length;s++)Rl(i[s])}}function ea(i,s){var o=i.stateNode;if(o===null)return null;var u=o[be]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),si=!1;if(Si)try{var na={};Object.defineProperty(na,"passive",{get:function(){si=!0}}),window.addEventListener("test",na,na),window.removeEventListener("test",na,na)}catch{si=!1}var Gi=null,Jr=null,vr=null;function Il(){if(vr)return vr;var i,s=Jr,o=s.length,u,f="value"in Gi?Gi.value:Gi.textContent,p=f.length;for(i=0;i<o&&s[i]===f[i];i++);var w=o-i;for(u=1;u<=w&&s[o-u]===f[p-u];u++);return vr=f.slice(i,1<u?1-u:void 0)}function $i(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Yi(){return!0}function Cl(){return!1}function Ze(i){function s(o,u,f,p,w){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(o=i[b],this[b]=o?o(p):p[b]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Yi:Cl,this.isPropagationStopped=Cl,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),s}var ee={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ja=Ze(ee),ia=y({},ee,{view:0,detail:0}),Tc=Ze(ia),to,eo,Ki,ra=y({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oa,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ki&&(Ki&&i.type==="mousemove"?(to=i.screenX-Ki.screenX,eo=i.screenY-Ki.screenY):eo=to=0,Ki=i),to)},movementY:function(i){return"movementY"in i?i.movementY:eo}}),ai=Ze(ra),wc=y({},ra,{dataTransfer:0}),vd=Ze(wc),sa=y({},ia,{relatedTarget:0}),no=Ze(sa),xl=y({},ee,{animationName:0,elapsedTime:0,pseudoElement:0}),io=Ze(xl),Sc=y({},ee,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ro=Ze(Sc),Ed=y({},ee,{data:0}),Nl=Ze(Ed),aa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ac={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dl(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Ac[i])?!!s[i]:!1}function oa(){return Dl}var Rc=y({},ia,{key:function(i){if(i.key){var s=aa[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=$i(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?bc[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oa,charCode:function(i){return i.type==="keypress"?$i(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?$i(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),so=Ze(Rc),Ic=y({},ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ol=Ze(Ic),Er=y({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oa}),Cc=Ze(Er),xc=y({},ee,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nc=Ze(xc),Dc=y({},ra,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ao=Ze(Dc),In=y({},ee,{newState:0,oldState:0}),Oc=Ze(In),Mc=[9,13,27,32],Xi=Si&&"CompositionEvent"in window,h=null;Si&&"documentMode"in document&&(h=document.documentMode);var _=Si&&"TextEvent"in window&&!h,E=Si&&(!Xi||h&&8<h&&11>=h),C=" ",Q=!1;function ot(i,s){switch(i){case"keyup":return Mc.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Kt=!1;function He(i,s){switch(i){case"compositionend":return yt(s);case"keypress":return s.which!==32?null:(Q=!0,C);case"textInput":return i=s.data,i===C&&Q?null:i;default:return null}}function Xt(i,s){if(Kt)return i==="compositionend"||!Xi&&ot(i,s)?(i=Il(),vr=Jr=Gi=null,Kt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var We={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qe(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!We[i.type]:s==="textarea"}function Tr(i,s,o,u){yr?_r?_r.push(u):_r=[u]:yr=u,s=vh(s,"onChange"),0<s.length&&(o=new Ja("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var on=null,Qi=null;function Ml(i){_v(i,0)}function Vc(i){var s=ei(i);if(Sl(s))return i}function zy(i,s){if(i==="change")return s}var By=!1;if(Si){var Td;if(Si){var wd="oninput"in document;if(!wd){var Hy=document.createElement("div");Hy.setAttribute("oninput","return;"),wd=typeof Hy.oninput=="function"}Td=wd}else Td=!1;By=Td&&(!document.documentMode||9<document.documentMode)}function qy(){on&&(on.detachEvent("onpropertychange",Fy),Qi=on=null)}function Fy(i){if(i.propertyName==="value"&&Vc(Qi)){var s=[];Tr(s,Qi,i,ri(i)),Ec(Ml,s)}}function kA(i,s,o){i==="focusin"?(qy(),on=s,Qi=o,on.attachEvent("onpropertychange",Fy)):i==="focusout"&&qy()}function PA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Vc(Qi)}function LA(i,s){if(i==="click")return Vc(s)}function UA(i,s){if(i==="input"||i==="change")return Vc(s)}function zA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var qn=typeof Object.is=="function"?Object.is:zA;function Vl(i,s){if(qn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!ce.call(s,f)||!qn(i[f],s[f]))return!1}return!0}function jy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Gy(i,s){var o=jy(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=jy(o)}}function $y(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?$y(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Yy(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Zs(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=Zs(i.document)}return s}function Sd(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var BA=Si&&"documentMode"in document&&11>=document.documentMode,oo=null,bd=null,kl=null,Ad=!1;function Ky(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ad||oo==null||oo!==Zs(u)||(u=oo,"selectionStart"in u&&Sd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),kl&&Vl(kl,u)||(kl=u,u=vh(bd,"onSelect"),0<u.length&&(s=new Ja("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=oo)))}function la(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var lo={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionrun:la("Transition","TransitionRun"),transitionstart:la("Transition","TransitionStart"),transitioncancel:la("Transition","TransitionCancel"),transitionend:la("Transition","TransitionEnd")},Rd={},Xy={};Si&&(Xy=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function ua(i){if(Rd[i])return Rd[i];if(!lo[i])return i;var s=lo[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in Xy)return Rd[i]=s[o];return i}var Qy=ua("animationend"),Zy=ua("animationiteration"),Wy=ua("animationstart"),HA=ua("transitionrun"),qA=ua("transitionstart"),FA=ua("transitioncancel"),Jy=ua("transitionend"),t_=new Map,Id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Id.push("scrollEnd");function bi(i,s){t_.set(i,s),Bn(s,[i])}var e_=new WeakMap;function oi(i,s){if(typeof i=="object"&&i!==null){var o=e_.get(i);return o!==void 0?o:(s={value:i,source:s,stack:Qa(s)},e_.set(i,s),s)}return{value:i,source:s,stack:Qa(s)}}var li=[],uo=0,Cd=0;function kc(){for(var i=uo,s=Cd=uo=0;s<i;){var o=li[s];li[s++]=null;var u=li[s];li[s++]=null;var f=li[s];li[s++]=null;var p=li[s];if(li[s++]=null,u!==null&&f!==null){var w=u.pending;w===null?f.next=f:(f.next=w.next,w.next=f),u.pending=f}p!==0&&n_(o,f,p)}}function Pc(i,s,o,u){li[uo++]=i,li[uo++]=s,li[uo++]=o,li[uo++]=u,Cd|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function xd(i,s,o,u){return Pc(i,s,o,u),Lc(i)}function co(i,s){return Pc(i,null,null,s),Lc(i)}function n_(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=i.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(f=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,f&&s!==null&&(f=31-Ee(o),i=p.hiddenUpdates,u=i[f],u===null?i[f]=[s]:u.push(s),s.lane=o|536870912),p):null}function Lc(i){if(50<au)throw au=0,kg=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var ho={};function jA(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(i,s,o,u){return new jA(i,s,o,u)}function Nd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function wr(i,s){var o=i.alternate;return o===null?(o=Fn(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function i_(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Uc(i,s,o,u,f,p){var w=0;if(u=i,typeof i=="function")Nd(i)&&(w=1);else if(typeof i=="string")w=$R(i,o,ct.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case I:return i=Fn(31,o,s,f),i.elementType=I,i.lanes=p,i;case P:return ca(o.children,f,p,s);case L:w=8,f|=24;break;case V:return i=Fn(12,o,s,f|2),i.elementType=V,i.lanes=p,i;case et:return i=Fn(13,o,s,f),i.elementType=et,i.lanes=p,i;case nt:return i=Fn(19,o,s,f),i.elementType=nt,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:case F:w=10;break t;case q:w=9;break t;case H:w=11;break t;case D:w=14;break t;case R:w=16,u=null;break t}w=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=Fn(w,o,s,f),s.elementType=i,s.type=u,s.lanes=p,s}function ca(i,s,o,u){return i=Fn(7,i,u,s),i.lanes=o,i}function Dd(i,s,o){return i=Fn(6,i,null,s),i.lanes=o,i}function Od(i,s,o){return s=Fn(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var fo=[],go=0,zc=null,Bc=0,ui=[],ci=0,ha=null,Sr=1,br="";function fa(i,s){fo[go++]=Bc,fo[go++]=zc,zc=i,Bc=s}function r_(i,s,o){ui[ci++]=Sr,ui[ci++]=br,ui[ci++]=ha,ha=i;var u=Sr;i=br;var f=32-Ee(u)-1;u&=~(1<<f),o+=1;var p=32-Ee(s)+f;if(30<p){var w=f-f%5;p=(u&(1<<w)-1).toString(32),u>>=w,f-=w,Sr=1<<32-Ee(s)+f|o<<f|u,br=p+i}else Sr=1<<p|o<<f|u,br=i}function Md(i){i.return!==null&&(fa(i,1),r_(i,1,0))}function Vd(i){for(;i===zc;)zc=fo[--go],fo[go]=null,Bc=fo[--go],fo[go]=null;for(;i===ha;)ha=ui[--ci],ui[ci]=null,br=ui[--ci],ui[ci]=null,Sr=ui[--ci],ui[ci]=null}var Cn=null,Ae=null,Jt=!1,da=null,Zi=!1,kd=Error(r(519));function ga(i){var s=Error(r(418,""));throw Ul(oi(s,i)),kd}function s_(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[xe]=i,s[be]=u,o){case"dialog":Gt("cancel",s),Gt("close",s);break;case"iframe":case"object":case"embed":Gt("load",s);break;case"video":case"audio":for(o=0;o<lu.length;o++)Gt(lu[o],s);break;case"source":Gt("error",s);break;case"img":case"image":case"link":Gt("error",s),Gt("load",s);break;case"details":Gt("toggle",s);break;case"input":Gt("invalid",s),Ws(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Za(s);break;case"select":Gt("invalid",s);break;case"textarea":Gt("invalid",s),Js(s,u.value,u.defaultValue,u.children),Za(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||wv(s.textContent,o)?(u.popover!=null&&(Gt("beforetoggle",s),Gt("toggle",s)),u.onScroll!=null&&Gt("scroll",s),u.onScrollEnd!=null&&Gt("scrollend",s),u.onClick!=null&&(s.onclick=Eh),s=!0):s=!1,s||ga(i)}function a_(i){for(Cn=i.return;Cn;)switch(Cn.tag){case 5:case 13:Zi=!1;return;case 27:case 3:Zi=!0;return;default:Cn=Cn.return}}function Pl(i){if(i!==Cn)return!1;if(!Jt)return a_(i),Jt=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||Zg(i.type,i.memoizedProps)),o=!o),o&&Ae&&ga(i),a_(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(s===0){Ae=Ri(i.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;i=i.nextSibling}Ae=null}}else s===27?(s=Ae,ms(i.type)?(i=em,em=null,Ae=i):Ae=s):Ae=Cn?Ri(i.stateNode.nextSibling):null;return!0}function Ll(){Ae=Cn=null,Jt=!1}function o_(){var i=da;return i!==null&&(Mn===null?Mn=i:Mn.push.apply(Mn,i),da=null),i}function Ul(i){da===null?da=[i]:da.push(i)}var Pd=G(null),ma=null,Ar=null;function ts(i,s,o){rt(Pd,s._currentValue),s._currentValue=o}function Rr(i){i._currentValue=Pd.current,W(Pd)}function Ld(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function Ud(i,s,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var p=f.dependencies;if(p!==null){var w=f.child;p=p.firstContext;t:for(;p!==null;){var b=p;p=f;for(var z=0;z<s.length;z++)if(b.context===s[z]){p.lanes|=o,b=p.alternate,b!==null&&(b.lanes|=o),Ld(p.return,o,i),u||(w=null);break t}p=b.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(r(341));w.lanes|=o,p=w.alternate,p!==null&&(p.lanes|=o),Ld(w,o,i),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===i){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function zl(i,s,o,u){i=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var b=f.type;qn(f.pendingProps.value,w.value)||(i!==null?i.push(b):i=[b])}}else if(f===It.current){if(w=f.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(gu):i=[gu])}f=f.return}i!==null&&Ud(s,i,o,u),s.flags|=262144}function Hc(i){for(i=i.firstContext;i!==null;){if(!qn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function pa(i){ma=i,Ar=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function pn(i){return l_(ma,i)}function qc(i,s){return ma===null&&pa(i),l_(i,s)}function l_(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Ar===null){if(i===null)throw Error(r(308));Ar=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Ar=Ar.next=s;return o}var GA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},$A=e.unstable_scheduleCallback,YA=e.unstable_NormalPriority,Fe={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zd(){return{controller:new GA,data:new Map,refCount:0}}function Bl(i){i.refCount--,i.refCount===0&&$A(YA,function(){i.controller.abort()})}var Hl=null,Bd=0,mo=0,po=null;function KA(i,s){if(Hl===null){var o=Hl=[];Bd=0,mo=qg(),po={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Bd++,s.then(u_,u_),s}function u_(){if(--Bd===0&&Hl!==null){po!==null&&(po.status="fulfilled");var i=Hl;Hl=null,mo=0,po=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function XA(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var c_=O.S;O.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&KA(i,s),c_!==null&&c_(i,s)};var ya=G(null);function Hd(){var i=ya.current;return i!==null?i:ge.pooledCache}function Fc(i,s){s===null?rt(ya,ya.current):rt(ya,s.pool)}function h_(){var i=Hd();return i===null?null:{parent:Fe._currentValue,pool:i}}var ql=Error(r(460)),f_=Error(r(474)),jc=Error(r(542)),qd={then:function(){}};function d_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Gc(){}function g_(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(Gc,Gc),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,p_(i),i;default:if(typeof s.status=="string")s.then(Gc,Gc);else{if(i=ge,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,p_(i),i}throw Fl=s,ql}}var Fl=null;function m_(){if(Fl===null)throw Error(r(459));var i=Fl;return Fl=null,i}function p_(i){if(i===ql||i===jc)throw Error(r(483))}var es=!1;function Fd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jd(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ns(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function is(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(ie&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Lc(i),n_(i,null,o),s}return Pc(i,u,s,o),Lc(i)}function jl(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Ys(i,o)}}function Gd(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=w:p=p.next=w,o=o.next}while(o!==null);p===null?f=p=s:p=p.next=s}else f=p=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var $d=!1;function Gl(){if($d){var i=po;if(i!==null)throw i}}function $l(i,s,o,u){$d=!1;var f=i.updateQueue;es=!1;var p=f.firstBaseUpdate,w=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var z=b,J=z.next;z.next=null,w===null?p=J:w.next=J,w=z;var ut=i.alternate;ut!==null&&(ut=ut.updateQueue,b=ut.lastBaseUpdate,b!==w&&(b===null?ut.firstBaseUpdate=J:b.next=J,ut.lastBaseUpdate=z))}if(p!==null){var ft=f.baseState;w=0,ut=J=z=null,b=p;do{var it=b.lane&-536870913,st=it!==b.lane;if(st?(Qt&it)===it:(u&it)===it){it!==0&&it===mo&&($d=!0),ut!==null&&(ut=ut.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var Ot=i,Ct=b;it=s;var le=o;switch(Ct.tag){case 1:if(Ot=Ct.payload,typeof Ot=="function"){ft=Ot.call(le,ft,it);break t}ft=Ot;break t;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Ct.payload,it=typeof Ot=="function"?Ot.call(le,ft,it):Ot,it==null)break t;ft=y({},ft,it);break t;case 2:es=!0}}it=b.callback,it!==null&&(i.flags|=64,st&&(i.flags|=8192),st=f.callbacks,st===null?f.callbacks=[it]:st.push(it))}else st={lane:it,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ut===null?(J=ut=st,z=ft):ut=ut.next=st,w|=it;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;st=b,b=st.next,st.next=null,f.lastBaseUpdate=st,f.shared.pending=null}}while(!0);ut===null&&(z=ft),f.baseState=z,f.firstBaseUpdate=J,f.lastBaseUpdate=ut,p===null&&(f.shared.lanes=0),hs|=w,i.lanes=w,i.memoizedState=ft}}function y_(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function __(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)y_(o[i],s)}var yo=G(null),$c=G(0);function v_(i,s){i=Mr,rt($c,i),rt(yo,s),Mr=i|s.baseLanes}function Yd(){rt($c,Mr),rt(yo,yo.current)}function Kd(){Mr=$c.current,W(yo),W($c)}var rs=0,zt=null,ae=null,Pe=null,Yc=!1,_o=!1,_a=!1,Kc=0,Yl=0,vo=null,QA=0;function Ne(){throw Error(r(321))}function Xd(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!qn(i[o],s[o]))return!1;return!0}function Qd(i,s,o,u,f,p){return rs=p,zt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,O.H=i===null||i.memoizedState===null?n0:i0,_a=!1,p=o(u,f),_a=!1,_o&&(p=T_(s,o,u,f)),E_(i),p}function E_(i){O.H=th;var s=ae!==null&&ae.next!==null;if(rs=0,Pe=ae=zt=null,Yc=!1,Yl=0,vo=null,s)throw Error(r(300));i===null||Je||(i=i.dependencies,i!==null&&Hc(i)&&(Je=!0))}function T_(i,s,o,u){zt=i;var f=0;do{if(_o&&(vo=null),Yl=0,_o=!1,25<=f)throw Error(r(301));if(f+=1,Pe=ae=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}O.H=iR,p=s(o,u)}while(_o);return p}function ZA(){var i=O.H,s=i.useState()[0];return s=typeof s.then=="function"?Kl(s):s,i=i.useState()[0],(ae!==null?ae.memoizedState:null)!==i&&(zt.flags|=1024),s}function Zd(){var i=Kc!==0;return Kc=0,i}function Wd(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function Jd(i){if(Yc){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Yc=!1}rs=0,Pe=ae=zt=null,_o=!1,Yl=Kc=0,vo=null}function Dn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?zt.memoizedState=Pe=i:Pe=Pe.next=i,Pe}function Le(){if(ae===null){var i=zt.alternate;i=i!==null?i.memoizedState:null}else i=ae.next;var s=Pe===null?zt.memoizedState:Pe.next;if(s!==null)Pe=s,ae=i;else{if(i===null)throw zt.alternate===null?Error(r(467)):Error(r(310));ae=i,i={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},Pe===null?zt.memoizedState=Pe=i:Pe=Pe.next=i}return Pe}function tg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(i){var s=Yl;return Yl+=1,vo===null&&(vo=[]),i=g_(vo,i,s),s=zt,(Pe===null?s.memoizedState:Pe.next)===null&&(s=s.alternate,O.H=s===null||s.memoizedState===null?n0:i0),i}function Xc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Kl(i);if(i.$$typeof===F)return pn(i)}throw Error(r(438,String(i)))}function eg(i){var s=null,o=zt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=zt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=tg(),zt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=k;return s.index++,o}function Ir(i,s){return typeof s=="function"?s(i):s}function Qc(i){var s=Le();return ng(s,ae,i)}function ng(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=i.baseQueue,p=u.pending;if(p!==null){if(f!==null){var w=f.next;f.next=p.next,p.next=w}s.baseQueue=f=p,u.pending=null}if(p=i.baseState,f===null)i.memoizedState=p;else{s=f.next;var b=w=null,z=null,J=s,ut=!1;do{var ft=J.lane&-536870913;if(ft!==J.lane?(Qt&ft)===ft:(rs&ft)===ft){var it=J.revertLane;if(it===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ft===mo&&(ut=!0);else if((rs&it)===it){J=J.next,it===mo&&(ut=!0);continue}else ft={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},z===null?(b=z=ft,w=p):z=z.next=ft,zt.lanes|=it,hs|=it;ft=J.action,_a&&o(p,ft),p=J.hasEagerState?J.eagerState:o(p,ft)}else it={lane:ft,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},z===null?(b=z=it,w=p):z=z.next=it,zt.lanes|=ft,hs|=ft;J=J.next}while(J!==null&&J!==s);if(z===null?w=p:z.next=b,!qn(p,i.memoizedState)&&(Je=!0,ut&&(o=po,o!==null)))throw o;i.memoizedState=p,i.baseState=w,i.baseQueue=z,u.lastRenderedState=p}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function ig(i){var s=Le(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,p=s.memoizedState;if(f!==null){o.pending=null;var w=f=f.next;do p=i(p,w.action),w=w.next;while(w!==f);qn(p,s.memoizedState)||(Je=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function w_(i,s,o){var u=zt,f=Le(),p=Jt;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var w=!qn((ae||f).memoizedState,o);w&&(f.memoizedState=o,Je=!0),f=f.queue;var b=A_.bind(null,u,f,i);if(Xl(2048,8,b,[i]),f.getSnapshot!==s||w||Pe!==null&&Pe.memoizedState.tag&1){if(u.flags|=2048,Eo(9,Zc(),b_.bind(null,u,f,o,s),null),ge===null)throw Error(r(349));p||(rs&124)!==0||S_(u,s,o)}return o}function S_(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=zt.updateQueue,s===null?(s=tg(),zt.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function b_(i,s,o,u){s.value=o,s.getSnapshot=u,R_(s)&&I_(i)}function A_(i,s,o){return o(function(){R_(s)&&I_(i)})}function R_(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!qn(i,o)}catch{return!0}}function I_(i){var s=co(i,2);s!==null&&Kn(s,i,2)}function rg(i){var s=Dn();if(typeof i=="function"){var o=i;if(i=o(),_a){Me(!0);try{o()}finally{Me(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:i},s}function C_(i,s,o,u){return i.baseState=o,ng(i,ae,typeof u=="function"?u:Ir)}function WA(i,s,o,u,f){if(Jc(i))throw Error(r(485));if(i=s.action,i!==null){var p={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};O.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,x_(s,p)):(p.next=o.next,s.pending=o.next=p)}}function x_(i,s){var o=s.action,u=s.payload,f=i.state;if(s.isTransition){var p=O.T,w={};O.T=w;try{var b=o(f,u),z=O.S;z!==null&&z(w,b),N_(i,s,b)}catch(J){sg(i,s,J)}finally{O.T=p}}else try{p=o(f,u),N_(i,s,p)}catch(J){sg(i,s,J)}}function N_(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){D_(i,s,u)},function(u){return sg(i,s,u)}):D_(i,s,o)}function D_(i,s,o){s.status="fulfilled",s.value=o,O_(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,x_(i,o)))}function sg(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,O_(s),s=s.next;while(s!==u)}i.action=null}function O_(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function M_(i,s){return s}function V_(i,s){if(Jt){var o=ge.formState;if(o!==null){t:{var u=zt;if(Jt){if(Ae){e:{for(var f=Ae,p=Zi;f.nodeType!==8;){if(!p){f=null;break e}if(f=Ri(f.nextSibling),f===null){f=null;break e}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Ae=Ri(f.nextSibling),u=f.data==="F!";break t}}ga(u)}u=!1}u&&(s=o[0])}}return o=Dn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:M_,lastRenderedState:s},o.queue=u,o=J_.bind(null,zt,u),u.dispatch=o,u=rg(!1),p=cg.bind(null,zt,!1,u.queue),u=Dn(),f={state:s,dispatch:null,action:i,pending:null},u.queue=f,o=WA.bind(null,zt,f,p,o),f.dispatch=o,u.memoizedState=i,[s,o,!1]}function k_(i){var s=Le();return P_(s,ae,i)}function P_(i,s,o){if(s=ng(i,s,M_)[0],i=Qc(Ir)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Kl(s)}catch(w){throw w===ql?jc:w}else u=s;s=Le();var f=s.queue,p=f.dispatch;return o!==s.memoizedState&&(zt.flags|=2048,Eo(9,Zc(),JA.bind(null,f,o),null)),[u,p,i]}function JA(i,s){i.action=s}function L_(i){var s=Le(),o=ae;if(o!==null)return P_(s,o,i);Le(),s=s.memoizedState,o=Le();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function Eo(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=zt.updateQueue,s===null&&(s=tg(),zt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function Zc(){return{destroy:void 0,resource:void 0}}function U_(){return Le().memoizedState}function Wc(i,s,o,u){var f=Dn();u=u===void 0?null:u,zt.flags|=i,f.memoizedState=Eo(1|s,Zc(),o,u)}function Xl(i,s,o,u){var f=Le();u=u===void 0?null:u;var p=f.memoizedState.inst;ae!==null&&u!==null&&Xd(u,ae.memoizedState.deps)?f.memoizedState=Eo(s,p,o,u):(zt.flags|=i,f.memoizedState=Eo(1|s,p,o,u))}function z_(i,s){Wc(8390656,8,i,s)}function B_(i,s){Xl(2048,8,i,s)}function H_(i,s){return Xl(4,2,i,s)}function q_(i,s){return Xl(4,4,i,s)}function F_(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function j_(i,s,o){o=o!=null?o.concat([i]):null,Xl(4,4,F_.bind(null,s,i),o)}function ag(){}function G_(i,s){var o=Le();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Xd(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function $_(i,s){var o=Le();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Xd(s,u[1]))return u[0];if(u=i(),_a){Me(!0);try{i()}finally{Me(!1)}}return o.memoizedState=[u,s],u}function og(i,s,o){return o===void 0||(rs&1073741824)!==0?i.memoizedState=s:(i.memoizedState=o,i=X0(),zt.lanes|=i,hs|=i,o)}function Y_(i,s,o,u){return qn(o,s)?o:yo.current!==null?(i=og(i,o,u),qn(i,s)||(Je=!0),i):(rs&42)===0?(Je=!0,i.memoizedState=o):(i=X0(),zt.lanes|=i,hs|=i,s)}function K_(i,s,o,u,f){var p=$.p;$.p=p!==0&&8>p?p:8;var w=O.T,b={};O.T=b,cg(i,!1,s,o);try{var z=f(),J=O.S;if(J!==null&&J(b,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ut=XA(z,u);Ql(i,s,ut,Yn(i))}else Ql(i,s,u,Yn(i))}catch(ft){Ql(i,s,{then:function(){},status:"rejected",reason:ft},Yn())}finally{$.p=p,O.T=w}}function tR(){}function lg(i,s,o,u){if(i.tag!==5)throw Error(r(476));var f=X_(i).queue;K_(i,f,s,at,o===null?tR:function(){return Q_(i),o(u)})}function X_(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:at,baseState:at,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:at},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Q_(i){var s=X_(i).next.queue;Ql(i,s,{},Yn())}function ug(){return pn(gu)}function Z_(){return Le().memoizedState}function W_(){return Le().memoizedState}function eR(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=Yn();i=ns(o);var u=is(s,i,o);u!==null&&(Kn(u,s,o),jl(u,s,o)),s={cache:zd()},i.payload=s;return}s=s.return}}function nR(i,s,o){var u=Yn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Jc(i)?t0(s,o):(o=xd(i,s,o,u),o!==null&&(Kn(o,i,u),e0(o,s,u)))}function J_(i,s,o){var u=Yn();Ql(i,s,o,u)}function Ql(i,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Jc(i))t0(s,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var w=s.lastRenderedState,b=p(w,o);if(f.hasEagerState=!0,f.eagerState=b,qn(b,w))return Pc(i,s,f,0),ge===null&&kc(),!1}catch{}finally{}if(o=xd(i,s,f,u),o!==null)return Kn(o,i,u),e0(o,s,u),!0}return!1}function cg(i,s,o,u){if(u={lane:2,revertLane:qg(),action:u,hasEagerState:!1,eagerState:null,next:null},Jc(i)){if(s)throw Error(r(479))}else s=xd(i,o,u,2),s!==null&&Kn(s,i,2)}function Jc(i){var s=i.alternate;return i===zt||s!==null&&s===zt}function t0(i,s){_o=Yc=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function e0(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Ys(i,o)}}var th={readContext:pn,use:Xc,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useLayoutEffect:Ne,useInsertionEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useSyncExternalStore:Ne,useId:Ne,useHostTransitionStatus:Ne,useFormState:Ne,useActionState:Ne,useOptimistic:Ne,useMemoCache:Ne,useCacheRefresh:Ne},n0={readContext:pn,use:Xc,useCallback:function(i,s){return Dn().memoizedState=[i,s===void 0?null:s],i},useContext:pn,useEffect:z_,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,Wc(4194308,4,F_.bind(null,s,i),o)},useLayoutEffect:function(i,s){return Wc(4194308,4,i,s)},useInsertionEffect:function(i,s){Wc(4,2,i,s)},useMemo:function(i,s){var o=Dn();s=s===void 0?null:s;var u=i();if(_a){Me(!0);try{i()}finally{Me(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=Dn();if(o!==void 0){var f=o(s);if(_a){Me(!0);try{o(s)}finally{Me(!1)}}}else f=s;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=nR.bind(null,zt,i),[u.memoizedState,i]},useRef:function(i){var s=Dn();return i={current:i},s.memoizedState=i},useState:function(i){i=rg(i);var s=i.queue,o=J_.bind(null,zt,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:ag,useDeferredValue:function(i,s){var o=Dn();return og(o,i,s)},useTransition:function(){var i=rg(!1);return i=K_.bind(null,zt,i.queue,!0,!1),Dn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=zt,f=Dn();if(Jt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),ge===null)throw Error(r(349));(Qt&124)!==0||S_(u,s,o)}f.memoizedState=o;var p={value:o,getSnapshot:s};return f.queue=p,z_(A_.bind(null,u,p,i),[i]),u.flags|=2048,Eo(9,Zc(),b_.bind(null,u,p,o,s),null),o},useId:function(){var i=Dn(),s=ge.identifierPrefix;if(Jt){var o=br,u=Sr;o=(u&~(1<<32-Ee(u)-1)).toString(32)+o,s=""+s+"R"+o,o=Kc++,0<o&&(s+="H"+o.toString(32)),s+=""}else o=QA++,s=""+s+"r"+o.toString(32)+"";return i.memoizedState=s},useHostTransitionStatus:ug,useFormState:V_,useActionState:V_,useOptimistic:function(i){var s=Dn();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=cg.bind(null,zt,!0,o),o.dispatch=s,[i,s]},useMemoCache:eg,useCacheRefresh:function(){return Dn().memoizedState=eR.bind(null,zt)}},i0={readContext:pn,use:Xc,useCallback:G_,useContext:pn,useEffect:B_,useImperativeHandle:j_,useInsertionEffect:H_,useLayoutEffect:q_,useMemo:$_,useReducer:Qc,useRef:U_,useState:function(){return Qc(Ir)},useDebugValue:ag,useDeferredValue:function(i,s){var o=Le();return Y_(o,ae.memoizedState,i,s)},useTransition:function(){var i=Qc(Ir)[0],s=Le().memoizedState;return[typeof i=="boolean"?i:Kl(i),s]},useSyncExternalStore:w_,useId:Z_,useHostTransitionStatus:ug,useFormState:k_,useActionState:k_,useOptimistic:function(i,s){var o=Le();return C_(o,ae,i,s)},useMemoCache:eg,useCacheRefresh:W_},iR={readContext:pn,use:Xc,useCallback:G_,useContext:pn,useEffect:B_,useImperativeHandle:j_,useInsertionEffect:H_,useLayoutEffect:q_,useMemo:$_,useReducer:ig,useRef:U_,useState:function(){return ig(Ir)},useDebugValue:ag,useDeferredValue:function(i,s){var o=Le();return ae===null?og(o,i,s):Y_(o,ae.memoizedState,i,s)},useTransition:function(){var i=ig(Ir)[0],s=Le().memoizedState;return[typeof i=="boolean"?i:Kl(i),s]},useSyncExternalStore:w_,useId:Z_,useHostTransitionStatus:ug,useFormState:L_,useActionState:L_,useOptimistic:function(i,s){var o=Le();return ae!==null?C_(o,ae,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:eg,useCacheRefresh:W_},To=null,Zl=0;function eh(i){var s=Zl;return Zl+=1,To===null&&(To=[]),g_(To,i,s)}function Wl(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function nh(i,s){throw s.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function r0(i){var s=i._init;return s(i._payload)}function s0(i){function s(K,j){if(i){var Z=K.deletions;Z===null?(K.deletions=[j],K.flags|=16):Z.push(j)}}function o(K,j){if(!i)return null;for(;j!==null;)s(K,j),j=j.sibling;return null}function u(K){for(var j=new Map;K!==null;)K.key!==null?j.set(K.key,K):j.set(K.index,K),K=K.sibling;return j}function f(K,j){return K=wr(K,j),K.index=0,K.sibling=null,K}function p(K,j,Z){return K.index=Z,i?(Z=K.alternate,Z!==null?(Z=Z.index,Z<j?(K.flags|=67108866,j):Z):(K.flags|=67108866,j)):(K.flags|=1048576,j)}function w(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function b(K,j,Z,ht){return j===null||j.tag!==6?(j=Dd(Z,K.mode,ht),j.return=K,j):(j=f(j,Z),j.return=K,j)}function z(K,j,Z,ht){var Tt=Z.type;return Tt===P?ut(K,j,Z.props.children,ht,Z.key):j!==null&&(j.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===R&&r0(Tt)===j.type)?(j=f(j,Z.props),Wl(j,Z),j.return=K,j):(j=Uc(Z.type,Z.key,Z.props,null,K.mode,ht),Wl(j,Z),j.return=K,j)}function J(K,j,Z,ht){return j===null||j.tag!==4||j.stateNode.containerInfo!==Z.containerInfo||j.stateNode.implementation!==Z.implementation?(j=Od(Z,K.mode,ht),j.return=K,j):(j=f(j,Z.children||[]),j.return=K,j)}function ut(K,j,Z,ht,Tt){return j===null||j.tag!==7?(j=ca(Z,K.mode,ht,Tt),j.return=K,j):(j=f(j,Z),j.return=K,j)}function ft(K,j,Z){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Dd(""+j,K.mode,Z),j.return=K,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case T:return Z=Uc(j.type,j.key,j.props,null,K.mode,Z),Wl(Z,j),Z.return=K,Z;case S:return j=Od(j,K.mode,Z),j.return=K,j;case R:var ht=j._init;return j=ht(j._payload),ft(K,j,Z)}if(tt(j)||U(j))return j=ca(j,K.mode,Z,null),j.return=K,j;if(typeof j.then=="function")return ft(K,eh(j),Z);if(j.$$typeof===F)return ft(K,qc(K,j),Z);nh(K,j)}return null}function it(K,j,Z,ht){var Tt=j!==null?j.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Tt!==null?null:b(K,j,""+Z,ht);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:return Z.key===Tt?z(K,j,Z,ht):null;case S:return Z.key===Tt?J(K,j,Z,ht):null;case R:return Tt=Z._init,Z=Tt(Z._payload),it(K,j,Z,ht)}if(tt(Z)||U(Z))return Tt!==null?null:ut(K,j,Z,ht,null);if(typeof Z.then=="function")return it(K,j,eh(Z),ht);if(Z.$$typeof===F)return it(K,j,qc(K,Z),ht);nh(K,Z)}return null}function st(K,j,Z,ht,Tt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return K=K.get(Z)||null,b(j,K,""+ht,Tt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case T:return K=K.get(ht.key===null?Z:ht.key)||null,z(j,K,ht,Tt);case S:return K=K.get(ht.key===null?Z:ht.key)||null,J(j,K,ht,Tt);case R:var Ht=ht._init;return ht=Ht(ht._payload),st(K,j,Z,ht,Tt)}if(tt(ht)||U(ht))return K=K.get(Z)||null,ut(j,K,ht,Tt,null);if(typeof ht.then=="function")return st(K,j,Z,eh(ht),Tt);if(ht.$$typeof===F)return st(K,j,Z,qc(j,ht),Tt);nh(j,ht)}return null}function Ot(K,j,Z,ht){for(var Tt=null,Ht=null,St=j,xt=j=0,en=null;St!==null&&xt<Z.length;xt++){St.index>xt?(en=St,St=null):en=St.sibling;var Wt=it(K,St,Z[xt],ht);if(Wt===null){St===null&&(St=en);break}i&&St&&Wt.alternate===null&&s(K,St),j=p(Wt,j,xt),Ht===null?Tt=Wt:Ht.sibling=Wt,Ht=Wt,St=en}if(xt===Z.length)return o(K,St),Jt&&fa(K,xt),Tt;if(St===null){for(;xt<Z.length;xt++)St=ft(K,Z[xt],ht),St!==null&&(j=p(St,j,xt),Ht===null?Tt=St:Ht.sibling=St,Ht=St);return Jt&&fa(K,xt),Tt}for(St=u(St);xt<Z.length;xt++)en=st(St,K,xt,Z[xt],ht),en!==null&&(i&&en.alternate!==null&&St.delete(en.key===null?xt:en.key),j=p(en,j,xt),Ht===null?Tt=en:Ht.sibling=en,Ht=en);return i&&St.forEach(function(Es){return s(K,Es)}),Jt&&fa(K,xt),Tt}function Ct(K,j,Z,ht){if(Z==null)throw Error(r(151));for(var Tt=null,Ht=null,St=j,xt=j=0,en=null,Wt=Z.next();St!==null&&!Wt.done;xt++,Wt=Z.next()){St.index>xt?(en=St,St=null):en=St.sibling;var Es=it(K,St,Wt.value,ht);if(Es===null){St===null&&(St=en);break}i&&St&&Es.alternate===null&&s(K,St),j=p(Es,j,xt),Ht===null?Tt=Es:Ht.sibling=Es,Ht=Es,St=en}if(Wt.done)return o(K,St),Jt&&fa(K,xt),Tt;if(St===null){for(;!Wt.done;xt++,Wt=Z.next())Wt=ft(K,Wt.value,ht),Wt!==null&&(j=p(Wt,j,xt),Ht===null?Tt=Wt:Ht.sibling=Wt,Ht=Wt);return Jt&&fa(K,xt),Tt}for(St=u(St);!Wt.done;xt++,Wt=Z.next())Wt=st(St,K,xt,Wt.value,ht),Wt!==null&&(i&&Wt.alternate!==null&&St.delete(Wt.key===null?xt:Wt.key),j=p(Wt,j,xt),Ht===null?Tt=Wt:Ht.sibling=Wt,Ht=Wt);return i&&St.forEach(function(rI){return s(K,rI)}),Jt&&fa(K,xt),Tt}function le(K,j,Z,ht){if(typeof Z=="object"&&Z!==null&&Z.type===P&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:t:{for(var Tt=Z.key;j!==null;){if(j.key===Tt){if(Tt=Z.type,Tt===P){if(j.tag===7){o(K,j.sibling),ht=f(j,Z.props.children),ht.return=K,K=ht;break t}}else if(j.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===R&&r0(Tt)===j.type){o(K,j.sibling),ht=f(j,Z.props),Wl(ht,Z),ht.return=K,K=ht;break t}o(K,j);break}else s(K,j);j=j.sibling}Z.type===P?(ht=ca(Z.props.children,K.mode,ht,Z.key),ht.return=K,K=ht):(ht=Uc(Z.type,Z.key,Z.props,null,K.mode,ht),Wl(ht,Z),ht.return=K,K=ht)}return w(K);case S:t:{for(Tt=Z.key;j!==null;){if(j.key===Tt)if(j.tag===4&&j.stateNode.containerInfo===Z.containerInfo&&j.stateNode.implementation===Z.implementation){o(K,j.sibling),ht=f(j,Z.children||[]),ht.return=K,K=ht;break t}else{o(K,j);break}else s(K,j);j=j.sibling}ht=Od(Z,K.mode,ht),ht.return=K,K=ht}return w(K);case R:return Tt=Z._init,Z=Tt(Z._payload),le(K,j,Z,ht)}if(tt(Z))return Ot(K,j,Z,ht);if(U(Z)){if(Tt=U(Z),typeof Tt!="function")throw Error(r(150));return Z=Tt.call(Z),Ct(K,j,Z,ht)}if(typeof Z.then=="function")return le(K,j,eh(Z),ht);if(Z.$$typeof===F)return le(K,j,qc(K,Z),ht);nh(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,j!==null&&j.tag===6?(o(K,j.sibling),ht=f(j,Z),ht.return=K,K=ht):(o(K,j),ht=Dd(Z,K.mode,ht),ht.return=K,K=ht),w(K)):o(K,j)}return function(K,j,Z,ht){try{Zl=0;var Tt=le(K,j,Z,ht);return To=null,Tt}catch(St){if(St===ql||St===jc)throw St;var Ht=Fn(29,St,null,K.mode);return Ht.lanes=ht,Ht.return=K,Ht}finally{}}}var wo=s0(!0),a0=s0(!1),hi=G(null),Wi=null;function ss(i){var s=i.alternate;rt(je,je.current&1),rt(hi,i),Wi===null&&(s===null||yo.current!==null||s.memoizedState!==null)&&(Wi=i)}function o0(i){if(i.tag===22){if(rt(je,je.current),rt(hi,i),Wi===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(Wi=i)}}else as()}function as(){rt(je,je.current),rt(hi,hi.current)}function Cr(i){W(hi),Wi===i&&(Wi=null),W(je)}var je=G(0);function ih(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||tm(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function hg(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var fg={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=Yn(),f=ns(u);f.payload=s,o!=null&&(f.callback=o),s=is(i,f,u),s!==null&&(Kn(s,i,u),jl(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=Yn(),f=ns(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=is(i,f,u),s!==null&&(Kn(s,i,u),jl(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=Yn(),u=ns(o);u.tag=2,s!=null&&(u.callback=s),s=is(i,u,o),s!==null&&(Kn(s,i,o),jl(s,i,o))}};function l0(i,s,o,u,f,p,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,p,w):s.prototype&&s.prototype.isPureReactComponent?!Vl(o,u)||!Vl(f,p):!0}function u0(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&fg.enqueueReplaceState(s,s.state,null)}function va(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=y({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}var rh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function c0(i){rh(i)}function h0(i){console.error(i)}function f0(i){rh(i)}function sh(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function d0(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function dg(i,s,o){return o=ns(o),o.tag=3,o.payload={element:null},o.callback=function(){sh(i,s)},o}function g0(i){return i=ns(i),i.tag=3,i}function m0(i,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;i.payload=function(){return f(p)},i.callback=function(){d0(s,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){d0(s,o,u),typeof f!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function rR(i,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&zl(s,o,f,!0),o=hi.current,o!==null){switch(o.tag){case 13:return Wi===null?Lg():o.alternate===null&&Re===0&&(Re=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===qd?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),zg(i,u,f)),!1;case 22:return o.flags|=65536,u===qd?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),zg(i,u,f)),!1}throw Error(r(435,o.tag))}return zg(i,u,f),Lg(),!1}if(Jt)return s=hi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==kd&&(i=Error(r(422),{cause:u}),Ul(oi(i,o)))):(u!==kd&&(s=Error(r(423),{cause:u}),Ul(oi(s,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=oi(u,o),f=dg(i.stateNode,u,f),Gd(i,f),Re!==4&&(Re=2)),!1;var p=Error(r(520),{cause:u});if(p=oi(p,o),su===null?su=[p]:su.push(p),Re!==4&&(Re=2),s===null)return!0;u=oi(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=dg(o.stateNode,u,i),Gd(o,i),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(fs===null||!fs.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=g0(f),m0(f,i,o,u),Gd(o,f),!1}o=o.return}while(o!==null);return!1}var p0=Error(r(461)),Je=!1;function ln(i,s,o,u){s.child=i===null?a0(s,null,o,u):wo(s,i.child,o,u)}function y0(i,s,o,u,f){o=o.render;var p=s.ref;if("ref"in u){var w={};for(var b in u)b!=="ref"&&(w[b]=u[b])}else w=u;return pa(s),u=Qd(i,s,o,w,p,f),b=Zd(),i!==null&&!Je?(Wd(i,s,f),xr(i,s,f)):(Jt&&b&&Md(s),s.flags|=1,ln(i,s,u,f),s.child)}function _0(i,s,o,u,f){if(i===null){var p=o.type;return typeof p=="function"&&!Nd(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,v0(i,s,p,u,f)):(i=Uc(o.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(p=i.child,!Tg(i,f)){var w=p.memoizedProps;if(o=o.compare,o=o!==null?o:Vl,o(w,u)&&i.ref===s.ref)return xr(i,s,f)}return s.flags|=1,i=wr(p,u),i.ref=s.ref,i.return=s,s.child=i}function v0(i,s,o,u,f){if(i!==null){var p=i.memoizedProps;if(Vl(p,u)&&i.ref===s.ref)if(Je=!1,s.pendingProps=u=p,Tg(i,f))(i.flags&131072)!==0&&(Je=!0);else return s.lanes=i.lanes,xr(i,s,f)}return gg(i,s,o,u,f)}function E0(i,s,o){var u=s.pendingProps,f=u.children,p=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,i!==null){for(f=s.child=i.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return T0(i,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Fc(s,p!==null?p.cachePool:null),p!==null?v_(s,p):Yd(),o0(s);else return s.lanes=s.childLanes=536870912,T0(i,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(Fc(s,p.cachePool),v_(s,p),as(),s.memoizedState=null):(i!==null&&Fc(s,null),Yd(),as());return ln(i,s,f,o),s.child}function T0(i,s,o,u){var f=Hd();return f=f===null?null:{parent:Fe._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},i!==null&&Fc(s,null),Yd(),o0(s),i!==null&&zl(i,s,u,!0),null}function ah(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function gg(i,s,o,u,f){return pa(s),o=Qd(i,s,o,u,void 0,f),u=Zd(),i!==null&&!Je?(Wd(i,s,f),xr(i,s,f)):(Jt&&u&&Md(s),s.flags|=1,ln(i,s,o,f),s.child)}function w0(i,s,o,u,f,p){return pa(s),s.updateQueue=null,o=T_(s,u,o,f),E_(i),u=Zd(),i!==null&&!Je?(Wd(i,s,p),xr(i,s,p)):(Jt&&u&&Md(s),s.flags|=1,ln(i,s,o,p),s.child)}function S0(i,s,o,u,f){if(pa(s),s.stateNode===null){var p=ho,w=o.contextType;typeof w=="object"&&w!==null&&(p=pn(w)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=fg,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},Fd(s),w=o.contextType,p.context=typeof w=="object"&&w!==null?pn(w):ho,p.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(hg(s,o,w,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&fg.enqueueReplaceState(p,p.state,null),$l(s,u,p,f),Gl(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){p=s.stateNode;var b=s.memoizedProps,z=va(o,b);p.props=z;var J=p.context,ut=o.contextType;w=ho,typeof ut=="object"&&ut!==null&&(w=pn(ut));var ft=o.getDerivedStateFromProps;ut=typeof ft=="function"||typeof p.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,ut||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b||J!==w)&&u0(s,p,u,w),es=!1;var it=s.memoizedState;p.state=it,$l(s,u,p,f),Gl(),J=s.memoizedState,b||it!==J||es?(typeof ft=="function"&&(hg(s,o,ft,u),J=s.memoizedState),(z=es||l0(s,o,z,u,it,J,w))?(ut||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=J),p.props=u,p.state=J,p.context=w,u=z):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,jd(i,s),w=s.memoizedProps,ut=va(o,w),p.props=ut,ft=s.pendingProps,it=p.context,J=o.contextType,z=ho,typeof J=="object"&&J!==null&&(z=pn(J)),b=o.getDerivedStateFromProps,(J=typeof b=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==ft||it!==z)&&u0(s,p,u,z),es=!1,it=s.memoizedState,p.state=it,$l(s,u,p,f),Gl();var st=s.memoizedState;w!==ft||it!==st||es||i!==null&&i.dependencies!==null&&Hc(i.dependencies)?(typeof b=="function"&&(hg(s,o,b,u),st=s.memoizedState),(ut=es||l0(s,o,ut,u,it,st,z)||i!==null&&i.dependencies!==null&&Hc(i.dependencies))?(J||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,st,z),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,st,z)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=st),p.props=u,p.state=st,p.context=z,u=ut):(typeof p.componentDidUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=1024),u=!1)}return p=u,ah(i,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,i!==null&&u?(s.child=wo(s,i.child,null,f),s.child=wo(s,null,o,f)):ln(i,s,o,f),s.memoizedState=p.state,i=s.child):i=xr(i,s,f),i}function b0(i,s,o,u){return Ll(),s.flags|=256,ln(i,s,o,u),s.child}var mg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pg(i){return{baseLanes:i,cachePool:h_()}}function yg(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=fi),i}function A0(i,s,o){var u=s.pendingProps,f=!1,p=(s.flags&128)!==0,w;if((w=p)||(w=i!==null&&i.memoizedState===null?!1:(je.current&2)!==0),w&&(f=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,i===null){if(Jt){if(f?ss(s):as(),Jt){var b=Ae,z;if(z=b){t:{for(z=b,b=Zi;z.nodeType!==8;){if(!b){b=null;break t}if(z=Ri(z.nextSibling),z===null){b=null;break t}}b=z}b!==null?(s.memoizedState={dehydrated:b,treeContext:ha!==null?{id:Sr,overflow:br}:null,retryLane:536870912,hydrationErrors:null},z=Fn(18,null,null,0),z.stateNode=b,z.return=s,s.child=z,Cn=s,Ae=null,z=!0):z=!1}z||ga(s)}if(b=s.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return tm(b)?s.lanes=32:s.lanes=536870912,null;Cr(s)}return b=u.children,u=u.fallback,f?(as(),f=s.mode,b=oh({mode:"hidden",children:b},f),u=ca(u,f,o,null),b.return=s,u.return=s,b.sibling=u,s.child=b,f=s.child,f.memoizedState=pg(o),f.childLanes=yg(i,w,o),s.memoizedState=mg,u):(ss(s),_g(s,b))}if(z=i.memoizedState,z!==null&&(b=z.dehydrated,b!==null)){if(p)s.flags&256?(ss(s),s.flags&=-257,s=vg(i,s,o)):s.memoizedState!==null?(as(),s.child=i.child,s.flags|=128,s=null):(as(),f=u.fallback,b=s.mode,u=oh({mode:"visible",children:u.children},b),f=ca(f,b,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,wo(s,i.child,null,o),u=s.child,u.memoizedState=pg(o),u.childLanes=yg(i,w,o),s.memoizedState=mg,s=f);else if(ss(s),tm(b)){if(w=b.nextSibling&&b.nextSibling.dataset,w)var J=w.dgst;w=J,u=Error(r(419)),u.stack="",u.digest=w,Ul({value:u,source:null,stack:null}),s=vg(i,s,o)}else if(Je||zl(i,s,o,!1),w=(o&i.childLanes)!==0,Je||w){if(w=ge,w!==null&&(u=o&-o,u=(u&42)!==0?1:Li(u),u=(u&(w.suspendedLanes|o))!==0?0:u,u!==0&&u!==z.retryLane))throw z.retryLane=u,co(i,u),Kn(w,i,u),p0;b.data==="$?"||Lg(),s=vg(i,s,o)}else b.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=z.treeContext,Ae=Ri(b.nextSibling),Cn=s,Jt=!0,da=null,Zi=!1,i!==null&&(ui[ci++]=Sr,ui[ci++]=br,ui[ci++]=ha,Sr=i.id,br=i.overflow,ha=s),s=_g(s,u.children),s.flags|=4096);return s}return f?(as(),f=u.fallback,b=s.mode,z=i.child,J=z.sibling,u=wr(z,{mode:"hidden",children:u.children}),u.subtreeFlags=z.subtreeFlags&65011712,J!==null?f=wr(J,f):(f=ca(f,b,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,b=i.child.memoizedState,b===null?b=pg(o):(z=b.cachePool,z!==null?(J=Fe._currentValue,z=z.parent!==J?{parent:J,pool:J}:z):z=h_(),b={baseLanes:b.baseLanes|o,cachePool:z}),f.memoizedState=b,f.childLanes=yg(i,w,o),s.memoizedState=mg,u):(ss(s),o=i.child,i=o.sibling,o=wr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(w=s.deletions,w===null?(s.deletions=[i],s.flags|=16):w.push(i)),s.child=o,s.memoizedState=null,o)}function _g(i,s){return s=oh({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function oh(i,s){return i=Fn(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function vg(i,s,o){return wo(s,i.child,null,o),i=_g(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function R0(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),Ld(i.return,s,o)}function Eg(i,s,o,u,f){var p=i.memoizedState;p===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=f)}function I0(i,s,o){var u=s.pendingProps,f=u.revealOrder,p=u.tail;if(ln(i,s,u.children,o),u=je.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&R0(i,o,s);else if(i.tag===19)R0(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(rt(je,u),f){case"forwards":for(o=s.child,f=null;o!==null;)i=o.alternate,i!==null&&ih(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Eg(s,!1,f,o,p);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&ih(i)===null){s.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}Eg(s,!0,o,null,p);break;case"together":Eg(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function xr(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),hs|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(zl(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=wr(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=wr(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function Tg(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Hc(i)))}function sR(i,s,o){switch(s.tag){case 3:At(s,s.stateNode.containerInfo),ts(s,Fe,i.memoizedState.cache),Ll();break;case 27:case 5:Pt(s);break;case 4:At(s,s.stateNode.containerInfo);break;case 10:ts(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(ss(s),s.flags|=128,null):(o&s.child.childLanes)!==0?A0(i,s,o):(ss(s),i=xr(i,s,o),i!==null?i.sibling:null);ss(s);break;case 19:var f=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(zl(i,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return I0(i,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),rt(je,je.current),u)break;return null;case 22:case 23:return s.lanes=0,E0(i,s,o);case 24:ts(s,Fe,i.memoizedState.cache)}return xr(i,s,o)}function C0(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)Je=!0;else{if(!Tg(i,o)&&(s.flags&128)===0)return Je=!1,sR(i,s,o);Je=(i.flags&131072)!==0}else Je=!1,Jt&&(s.flags&1048576)!==0&&r_(s,Bc,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")Nd(u)?(i=va(u,i),s.tag=1,s=S0(null,s,u,i,o)):(s.tag=0,s=gg(null,s,u,i,o));else{if(u!=null){if(f=u.$$typeof,f===H){s.tag=11,s=y0(null,s,u,i,o);break t}else if(f===D){s.tag=14,s=_0(null,s,u,i,o);break t}}throw s=M(u)||u,Error(r(306,s,""))}}return s;case 0:return gg(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=va(u,s.pendingProps),S0(i,s,u,f,o);case 3:t:{if(At(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;f=p.element,jd(i,s),$l(s,u,null,o);var w=s.memoizedState;if(u=w.cache,ts(s,Fe,u),u!==p.cache&&Ud(s,[Fe],o,!0),Gl(),u=w.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=b0(i,s,u,o);break t}else if(u!==f){f=oi(Error(r(424)),s),Ul(f),s=b0(i,s,u,o);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ae=Ri(i.firstChild),Cn=s,Jt=!0,da=null,Zi=!0,o=a0(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ll(),u===f){s=xr(i,s,o);break t}ln(i,s,u,o)}s=s.child}return s;case 26:return ah(i,s),i===null?(o=Ov(s.type,null,s.pendingProps,null))?s.memoizedState=o:Jt||(o=s.type,i=s.pendingProps,u=Th(pt.current).createElement(o),u[xe]=s,u[be]=i,cn(u,o,i),Te(u),s.stateNode=u):s.memoizedState=Ov(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Pt(s),i===null&&Jt&&(u=s.stateNode=xv(s.type,s.pendingProps,pt.current),Cn=s,Zi=!0,f=Ae,ms(s.type)?(em=f,Ae=Ri(u.firstChild)):Ae=f),ln(i,s,s.pendingProps.children,o),ah(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Jt&&((f=u=Ae)&&(u=MR(u,s.type,s.pendingProps,Zi),u!==null?(s.stateNode=u,Cn=s,Ae=Ri(u.firstChild),Zi=!1,f=!0):f=!1),f||ga(s)),Pt(s),f=s.type,p=s.pendingProps,w=i!==null?i.memoizedProps:null,u=p.children,Zg(f,p)?u=null:w!==null&&Zg(f,w)&&(s.flags|=32),s.memoizedState!==null&&(f=Qd(i,s,ZA,null,null,o),gu._currentValue=f),ah(i,s),ln(i,s,u,o),s.child;case 6:return i===null&&Jt&&((i=o=Ae)&&(o=VR(o,s.pendingProps,Zi),o!==null?(s.stateNode=o,Cn=s,Ae=null,i=!0):i=!1),i||ga(s)),null;case 13:return A0(i,s,o);case 4:return At(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=wo(s,null,u,o):ln(i,s,u,o),s.child;case 11:return y0(i,s,s.type,s.pendingProps,o);case 7:return ln(i,s,s.pendingProps,o),s.child;case 8:return ln(i,s,s.pendingProps.children,o),s.child;case 12:return ln(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,ts(s,s.type,u.value),ln(i,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,pa(s),f=pn(f),u=u(f),s.flags|=1,ln(i,s,u,o),s.child;case 14:return _0(i,s,s.type,s.pendingProps,o);case 15:return v0(i,s,s.type,s.pendingProps,o);case 19:return I0(i,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},i===null?(o=oh(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=wr(i.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return E0(i,s,o);case 24:return pa(s),u=pn(Fe),i===null?(f=Hd(),f===null&&(f=ge,p=zd(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),s.memoizedState={parent:u,cache:f},Fd(s),ts(s,Fe,f)):((i.lanes&o)!==0&&(jd(i,s),$l(s,null,null,o),Gl()),f=i.memoizedState,p=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),ts(s,Fe,u)):(u=p.cache,ts(s,Fe,u),u!==f.cache&&Ud(s,[Fe],o,!0))),ln(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Nr(i){i.flags|=4}function x0(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Lv(s)){if(s=hi.current,s!==null&&((Qt&4194048)===Qt?Wi!==null:(Qt&62914560)!==Qt&&(Qt&536870912)===0||s!==Wi))throw Fl=qd,f_;i.flags|=8192}}function lh(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Ei():536870912,i.lanes|=s,Ro|=s)}function Jl(i,s){if(!Jt)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function we(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function aR(i,s,o){var u=s.pendingProps;switch(Vd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(s),null;case 1:return we(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Rr(Fe),kt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Pl(s)?Nr(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,o_())),we(s),null;case 26:return o=s.memoizedState,i===null?(Nr(s),o!==null?(we(s),x0(s,o)):(we(s),s.flags&=-16777217)):o?o!==i.memoizedState?(Nr(s),we(s),x0(s,o)):(we(s),s.flags&=-16777217):(i.memoizedProps!==u&&Nr(s),we(s),s.flags&=-16777217),null;case 27:ue(s),o=pt.current;var f=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Nr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return we(s),null}i=ct.current,Pl(s)?s_(s):(i=xv(f,u,o),s.stateNode=i,Nr(s))}return we(s),null;case 5:if(ue(s),o=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Nr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return we(s),null}if(i=ct.current,Pl(s))s_(s);else{switch(f=Th(pt.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}i[xe]=s,i[be]=u;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=i;t:switch(cn(i,o,u),o){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Nr(s)}}return we(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Nr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=pt.current,Pl(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,f=Cn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[xe]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||wv(i.nodeValue,o)),i||ga(s)}else i=Th(i).createTextNode(u),i[xe]=s,s.stateNode=i}return we(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=Pl(s),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[xe]=s}else Ll(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;we(s),f=!1}else f=o_(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Cr(s),s):(Cr(s),null)}if(Cr(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,i=i!==null&&i.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return o!==i&&o&&(s.child.flags|=8192),lh(s,s.updateQueue),we(s),null;case 4:return kt(),i===null&&$g(s.stateNode.containerInfo),we(s),null;case 10:return Rr(s.type),we(s),null;case 19:if(W(je),f=s.memoizedState,f===null)return we(s),null;if(u=(s.flags&128)!==0,p=f.rendering,p===null)if(u)Jl(f,!1);else{if(Re!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(p=ih(i),p!==null){for(s.flags|=128,Jl(f,!1),i=p.updateQueue,s.updateQueue=i,lh(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)i_(o,i),o=o.sibling;return rt(je,je.current&1|2),s.child}i=i.sibling}f.tail!==null&&Lt()>hh&&(s.flags|=128,u=!0,Jl(f,!1),s.lanes=4194304)}else{if(!u)if(i=ih(p),i!==null){if(s.flags|=128,u=!0,i=i.updateQueue,s.updateQueue=i,lh(s,i),Jl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Jt)return we(s),null}else 2*Lt()-f.renderingStartTime>hh&&o!==536870912&&(s.flags|=128,u=!0,Jl(f,!1),s.lanes=4194304);f.isBackwards?(p.sibling=s.child,s.child=p):(i=f.last,i!==null?i.sibling=p:s.child=p,f.last=p)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Lt(),s.sibling=null,i=je.current,rt(je,u?i&1|2:i&1),s):(we(s),null);case 22:case 23:return Cr(s),Kd(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(we(s),s.subtreeFlags&6&&(s.flags|=8192)):we(s),o=s.updateQueue,o!==null&&lh(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&W(ya),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Rr(Fe),we(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function oR(i,s){switch(Vd(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Rr(Fe),kt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return ue(s),null;case 13:if(Cr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ll()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return W(je),null;case 4:return kt(),null;case 10:return Rr(s.type),null;case 22:case 23:return Cr(s),Kd(),i!==null&&W(ya),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Rr(Fe),null;case 25:return null;default:return null}}function N0(i,s){switch(Vd(s),s.tag){case 3:Rr(Fe),kt();break;case 26:case 27:case 5:ue(s);break;case 4:kt();break;case 13:Cr(s);break;case 19:W(je);break;case 10:Rr(s.type);break;case 22:case 23:Cr(s),Kd(),i!==null&&W(ya);break;case 24:Rr(Fe)}}function tu(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var p=o.create,w=o.inst;u=p(),w.destroy=u}o=o.next}while(o!==f)}}catch(b){fe(s,s.return,b)}}function os(i,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&i)===i){var w=u.inst,b=w.destroy;if(b!==void 0){w.destroy=void 0,f=s;var z=o,J=b;try{J()}catch(ut){fe(f,z,ut)}}}u=u.next}while(u!==p)}}catch(ut){fe(s,s.return,ut)}}function D0(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{__(s,o)}catch(u){fe(i,i.return,u)}}}function O0(i,s,o){o.props=va(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){fe(i,s,u)}}function eu(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){fe(i,s,f)}}function Ji(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){fe(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){fe(i,s,f)}else o.current=null}function M0(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){fe(i,i.return,f)}}function wg(i,s,o){try{var u=i.stateNode;CR(u,i.type,o,s),u[be]=s}catch(f){fe(i,i.return,f)}}function V0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ms(i.type)||i.tag===4}function Sg(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||V0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ms(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function bg(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Eh));else if(u!==4&&(u===27&&ms(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(bg(i,s,o),i=i.sibling;i!==null;)bg(i,s,o),i=i.sibling}function uh(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&ms(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(uh(i,s,o),i=i.sibling;i!==null;)uh(i,s,o),i=i.sibling}function k0(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);cn(s,u,o),s[xe]=i,s[be]=o}catch(p){fe(i,i.return,p)}}var Dr=!1,De=!1,Ag=!1,P0=typeof WeakSet=="function"?WeakSet:Set,tn=null;function lR(i,s){if(i=i.containerInfo,Xg=Ih,i=Yy(i),Sd(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break t}var w=0,b=-1,z=-1,J=0,ut=0,ft=i,it=null;e:for(;;){for(var st;ft!==o||f!==0&&ft.nodeType!==3||(b=w+f),ft!==p||u!==0&&ft.nodeType!==3||(z=w+u),ft.nodeType===3&&(w+=ft.nodeValue.length),(st=ft.firstChild)!==null;)it=ft,ft=st;for(;;){if(ft===i)break e;if(it===o&&++J===f&&(b=w),it===p&&++ut===u&&(z=w),(st=ft.nextSibling)!==null)break;ft=it,it=ft.parentNode}ft=st}o=b===-1||z===-1?null:{start:b,end:z}}else o=null}o=o||{start:0,end:0}}else o=null;for(Qg={focusedElem:i,selectionRange:o},Ih=!1,tn=s;tn!==null;)if(s=tn,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,tn=i;else for(;tn!==null;){switch(s=tn,p=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,o=s,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Ot=va(o.type,f,o.elementType===o.type);i=u.getSnapshotBeforeUpdate(Ot,p),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ct){fe(o,o.return,Ct)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)Jg(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Jg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,tn=i;break}tn=s.return}}function L0(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ls(i,o),u&4&&tu(5,o);break;case 1:if(ls(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(w){fe(o,o.return,w)}else{var f=va(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(w){fe(o,o.return,w)}}u&64&&D0(o),u&512&&eu(o,o.return);break;case 3:if(ls(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{__(i,s)}catch(w){fe(o,o.return,w)}}break;case 27:s===null&&u&4&&k0(o);case 26:case 5:ls(i,o),s===null&&u&4&&M0(o),u&512&&eu(o,o.return);break;case 12:ls(i,o);break;case 13:ls(i,o),u&4&&B0(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=yR.bind(null,o),kR(i,o))));break;case 22:if(u=o.memoizedState!==null||Dr,!u){s=s!==null&&s.memoizedState!==null||De,f=Dr;var p=De;Dr=u,(De=s)&&!p?us(i,o,(o.subtreeFlags&8772)!==0):ls(i,o),Dr=f,De=p}break;case 30:break;default:ls(i,o)}}function U0(i){var s=i.alternate;s!==null&&(i.alternate=null,U0(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Bi(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var _e=null,On=!1;function Or(i,s,o){for(o=o.child;o!==null;)z0(i,s,o),o=o.sibling}function z0(i,s,o){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(te,o)}catch{}switch(o.tag){case 26:De||Ji(o,s),Or(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:De||Ji(o,s);var u=_e,f=On;ms(o.type)&&(_e=o.stateNode,On=!1),Or(i,s,o),cu(o.stateNode),_e=u,On=f;break;case 5:De||Ji(o,s);case 6:if(u=_e,f=On,_e=null,Or(i,s,o),_e=u,On=f,_e!==null)if(On)try{(_e.nodeType===9?_e.body:_e.nodeName==="HTML"?_e.ownerDocument.body:_e).removeChild(o.stateNode)}catch(p){fe(o,s,p)}else try{_e.removeChild(o.stateNode)}catch(p){fe(o,s,p)}break;case 18:_e!==null&&(On?(i=_e,Iv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),_u(i)):Iv(_e,o.stateNode));break;case 4:u=_e,f=On,_e=o.stateNode.containerInfo,On=!0,Or(i,s,o),_e=u,On=f;break;case 0:case 11:case 14:case 15:De||os(2,o,s),De||os(4,o,s),Or(i,s,o);break;case 1:De||(Ji(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&O0(o,s,u)),Or(i,s,o);break;case 21:Or(i,s,o);break;case 22:De=(u=De)||o.memoizedState!==null,Or(i,s,o),De=u;break;default:Or(i,s,o)}}function B0(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{_u(i)}catch(o){fe(s,s.return,o)}}function uR(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new P0),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new P0),s;default:throw Error(r(435,i.tag))}}function Rg(i,s){var o=uR(i);s.forEach(function(u){var f=_R.bind(null,i,u);o.has(u)||(o.add(u),u.then(f,f))})}function jn(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=i,w=s,b=w;t:for(;b!==null;){switch(b.tag){case 27:if(ms(b.type)){_e=b.stateNode,On=!1;break t}break;case 5:_e=b.stateNode,On=!1;break t;case 3:case 4:_e=b.stateNode.containerInfo,On=!0;break t}b=b.return}if(_e===null)throw Error(r(160));z0(p,w,f),_e=null,On=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)H0(s,i),s=s.sibling}var Ai=null;function H0(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:jn(s,i),Gn(i),u&4&&(os(3,i,i.return),tu(3,i),os(5,i,i.return));break;case 1:jn(s,i),Gn(i),u&512&&(De||o===null||Ji(o,o.return)),u&64&&Dr&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Ai;if(jn(s,i),Gn(i),u&512&&(De||o===null||Ji(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){t:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[dr]||p[xe]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),cn(p,u,o),p[xe]=i,Te(p),u=p;break t;case"link":var w=kv("link","href",f).get(u+(o.href||""));if(w){for(var b=0;b<w.length;b++)if(p=w[b],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(b,1);break e}}p=f.createElement(u),cn(p,u,o),f.head.appendChild(p);break;case"meta":if(w=kv("meta","content",f).get(u+(o.content||""))){for(b=0;b<w.length;b++)if(p=w[b],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(b,1);break e}}p=f.createElement(u),cn(p,u,o),f.head.appendChild(p);break;default:throw Error(r(468,u))}p[xe]=i,Te(p),u=p}i.stateNode=u}else Pv(f,i.type,i.stateNode);else i.stateNode=Vv(f,u,i.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?Pv(f,i.type,i.stateNode):Vv(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&wg(i,i.memoizedProps,o.memoizedProps)}break;case 27:jn(s,i),Gn(i),u&512&&(De||o===null||Ji(o,o.return)),o!==null&&u&4&&wg(i,i.memoizedProps,o.memoizedProps);break;case 5:if(jn(s,i),Gn(i),u&512&&(De||o===null||Ji(o,o.return)),i.flags&32){f=i.stateNode;try{ii(f,"")}catch(st){fe(i,i.return,st)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,wg(i,f,o!==null?o.memoizedProps:f)),u&1024&&(Ag=!0);break;case 6:if(jn(s,i),Gn(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(st){fe(i,i.return,st)}}break;case 3:if(bh=null,f=Ai,Ai=wh(s.containerInfo),jn(s,i),Ai=f,Gn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{_u(s.containerInfo)}catch(st){fe(i,i.return,st)}Ag&&(Ag=!1,q0(i));break;case 4:u=Ai,Ai=wh(i.stateNode.containerInfo),jn(s,i),Gn(i),Ai=u;break;case 12:jn(s,i),Gn(i);break;case 13:jn(s,i),Gn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Og=Lt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Rg(i,u)));break;case 22:f=i.memoizedState!==null;var z=o!==null&&o.memoizedState!==null,J=Dr,ut=De;if(Dr=J||f,De=ut||z,jn(s,i),De=ut,Dr=J,Gn(i),u&8192)t:for(s=i.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||z||Dr||De||Ea(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){z=o=s;try{if(p=z.stateNode,f)w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{b=z.stateNode;var ft=z.memoizedProps.style,it=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;b.style.display=it==null||typeof it=="boolean"?"":(""+it).trim()}}catch(st){fe(z,z.return,st)}}}else if(s.tag===6){if(o===null){z=s;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(st){fe(z,z.return,st)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Rg(i,o))));break;case 19:jn(s,i),Gn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Rg(i,u)));break;case 30:break;case 21:break;default:jn(s,i),Gn(i)}}function Gn(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(V0(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,p=Sg(i);uh(i,p,f);break;case 5:var w=o.stateNode;o.flags&32&&(ii(w,""),o.flags&=-33);var b=Sg(i);uh(i,b,w);break;case 3:case 4:var z=o.stateNode.containerInfo,J=Sg(i);bg(i,J,z);break;default:throw Error(r(161))}}catch(ut){fe(i,i.return,ut)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function q0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;q0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function ls(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)L0(i,s.alternate,s),s=s.sibling}function Ea(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:os(4,s,s.return),Ea(s);break;case 1:Ji(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&O0(s,s.return,o),Ea(s);break;case 27:cu(s.stateNode);case 26:case 5:Ji(s,s.return),Ea(s);break;case 22:s.memoizedState===null&&Ea(s);break;case 30:Ea(s);break;default:Ea(s)}i=i.sibling}}function us(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=i,p=s,w=p.flags;switch(p.tag){case 0:case 11:case 15:us(f,p,o),tu(4,p);break;case 1:if(us(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(J){fe(u,u.return,J)}if(u=p,f=u.updateQueue,f!==null){var b=u.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)y_(z[f],b)}catch(J){fe(u,u.return,J)}}o&&w&64&&D0(p),eu(p,p.return);break;case 27:k0(p);case 26:case 5:us(f,p,o),o&&u===null&&w&4&&M0(p),eu(p,p.return);break;case 12:us(f,p,o);break;case 13:us(f,p,o),o&&w&4&&B0(f,p);break;case 22:p.memoizedState===null&&us(f,p,o),eu(p,p.return);break;case 30:break;default:us(f,p,o)}s=s.sibling}}function Ig(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Bl(o))}function Cg(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Bl(i))}function tr(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)F0(i,s,o,u),s=s.sibling}function F0(i,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:tr(i,s,o,u),f&2048&&tu(9,s);break;case 1:tr(i,s,o,u);break;case 3:tr(i,s,o,u),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Bl(i)));break;case 12:if(f&2048){tr(i,s,o,u),i=s.stateNode;try{var p=s.memoizedProps,w=p.id,b=p.onPostCommit;typeof b=="function"&&b(w,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(z){fe(s,s.return,z)}}else tr(i,s,o,u);break;case 13:tr(i,s,o,u);break;case 23:break;case 22:p=s.stateNode,w=s.alternate,s.memoizedState!==null?p._visibility&2?tr(i,s,o,u):nu(i,s):p._visibility&2?tr(i,s,o,u):(p._visibility|=2,So(i,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&Ig(w,s);break;case 24:tr(i,s,o,u),f&2048&&Cg(s.alternate,s);break;default:tr(i,s,o,u)}}function So(i,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=i,w=s,b=o,z=u,J=w.flags;switch(w.tag){case 0:case 11:case 15:So(p,w,b,z,f),tu(8,w);break;case 23:break;case 22:var ut=w.stateNode;w.memoizedState!==null?ut._visibility&2?So(p,w,b,z,f):nu(p,w):(ut._visibility|=2,So(p,w,b,z,f)),f&&J&2048&&Ig(w.alternate,w);break;case 24:So(p,w,b,z,f),f&&J&2048&&Cg(w.alternate,w);break;default:So(p,w,b,z,f)}s=s.sibling}}function nu(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,f=u.flags;switch(u.tag){case 22:nu(o,u),f&2048&&Ig(u.alternate,u);break;case 24:nu(o,u),f&2048&&Cg(u.alternate,u);break;default:nu(o,u)}s=s.sibling}}var iu=8192;function bo(i){if(i.subtreeFlags&iu)for(i=i.child;i!==null;)j0(i),i=i.sibling}function j0(i){switch(i.tag){case 26:bo(i),i.flags&iu&&i.memoizedState!==null&&KR(Ai,i.memoizedState,i.memoizedProps);break;case 5:bo(i);break;case 3:case 4:var s=Ai;Ai=wh(i.stateNode.containerInfo),bo(i),Ai=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=iu,iu=16777216,bo(i),iu=s):bo(i));break;default:bo(i)}}function G0(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function ru(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];tn=u,Y0(u,i)}G0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)$0(i),i=i.sibling}function $0(i){switch(i.tag){case 0:case 11:case 15:ru(i),i.flags&2048&&os(9,i,i.return);break;case 3:ru(i);break;case 12:ru(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,ch(i)):ru(i);break;default:ru(i)}}function ch(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];tn=u,Y0(u,i)}G0(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:os(8,s,s.return),ch(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,ch(s));break;default:ch(s)}i=i.sibling}}function Y0(i,s){for(;tn!==null;){var o=tn;switch(o.tag){case 0:case 11:case 15:os(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Bl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,tn=u;else t:for(o=i;tn!==null;){u=tn;var f=u.sibling,p=u.return;if(U0(u),u===o){tn=null;break t}if(f!==null){f.return=p,tn=f;break t}tn=p}}}var cR={getCacheForType:function(i){var s=pn(Fe),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o}},hR=typeof WeakMap=="function"?WeakMap:Map,ie=0,ge=null,jt=null,Qt=0,re=0,$n=null,cs=!1,Ao=!1,xg=!1,Mr=0,Re=0,hs=0,Ta=0,Ng=0,fi=0,Ro=0,su=null,Mn=null,Dg=!1,Og=0,hh=1/0,fh=null,fs=null,un=0,ds=null,Io=null,Co=0,Mg=0,Vg=null,K0=null,au=0,kg=null;function Yn(){if((ie&2)!==0&&Qt!==0)return Qt&-Qt;if(O.T!==null){var i=mo;return i!==0?i:qg()}return Ui()}function X0(){fi===0&&(fi=(Qt&536870912)===0||Jt?fr():536870912);var i=hi.current;return i!==null&&(i.flags|=32),fi}function Kn(i,s,o){(i===ge&&(re===2||re===9)||i.cancelPendingCommit!==null)&&(xo(i,0),gs(i,Qt,fi,!1)),Zn(i,o),((ie&2)===0||i!==ge)&&(i===ge&&((ie&2)===0&&(Ta|=o),Re===4&&gs(i,Qt,fi,!1)),er(i))}function Q0(i,s,o){if((ie&6)!==0)throw Error(r(327));var u=!o&&(s&124)===0&&(s&i.expiredLanes)===0||An(i,s),f=u?gR(i,s):Ug(i,s,!0),p=u;do{if(f===0){Ao&&!u&&gs(i,s,0,!1);break}else{if(o=i.current.alternate,p&&!fR(o)){f=Ug(i,s,!1),p=!1;continue}if(f===2){if(p=s,i.errorRecoveryDisabledLanes&p)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;t:{var b=i;f=su;var z=b.current.memoizedState.isDehydrated;if(z&&(xo(b,w).flags|=256),w=Ug(b,w,!1),w!==2){if(xg&&!z){b.errorRecoveryDisabledLanes|=p,Ta|=p,f=4;break t}p=Mn,Mn=f,p!==null&&(Mn===null?Mn=p:Mn.push.apply(Mn,p))}f=w}if(p=!1,f!==2)continue}}if(f===1){xo(i,0),gs(i,s,0,!0);break}t:{switch(u=i,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:gs(u,s,fi,!cs);break t;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Og+300-Lt(),10<f)){if(gs(u,s,fi,!cs),sn(u,0,!0)!==0)break t;u.timeoutHandle=Av(Z0.bind(null,u,o,Mn,fh,Dg,s,fi,Ta,Ro,cs,p,2,-0,0),f);break t}Z0(u,o,Mn,fh,Dg,s,fi,Ta,Ro,cs,p,0,-0,0)}}break}while(!0);er(i)}function Z0(i,s,o,u,f,p,w,b,z,J,ut,ft,it,st){if(i.timeoutHandle=-1,ft=s.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(du={stylesheets:null,count:0,unsuspend:YR},j0(s),ft=XR(),ft!==null)){i.cancelPendingCommit=ft(rv.bind(null,i,s,p,o,u,f,w,b,z,ut,1,it,st)),gs(i,p,w,!J);return}rv(i,s,p,o,u,f,w,b,z)}function fR(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!qn(p(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function gs(i,s,o,u){s&=~Ng,s&=~Ta,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var f=s;0<f;){var p=31-Ee(f),w=1<<p;u[p]=-1,f&=~w}o!==0&&Wn(i,o,s)}function dh(){return(ie&6)===0?(ou(0),!1):!0}function Pg(){if(jt!==null){if(re===0)var i=jt.return;else i=jt,Ar=ma=null,Jd(i),To=null,Zl=0,i=jt;for(;i!==null;)N0(i.alternate,i),i=i.return;jt=null}}function xo(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,NR(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Pg(),ge=i,jt=o=wr(i.current,null),Qt=s,re=0,$n=null,cs=!1,Ao=An(i,s),xg=!1,Ro=fi=Ng=Ta=hs=Re=0,Mn=su=null,Dg=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var f=31-Ee(u),p=1<<f;s|=i[f],u&=~p}return Mr=s,kc(),o}function W0(i,s){zt=null,O.H=th,s===ql||s===jc?(s=m_(),re=3):s===f_?(s=m_(),re=4):re=s===p0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,$n=s,jt===null&&(Re=1,sh(i,oi(s,i.current)))}function J0(){var i=O.H;return O.H=th,i===null?th:i}function tv(){var i=O.A;return O.A=cR,i}function Lg(){Re=4,cs||(Qt&4194048)!==Qt&&hi.current!==null||(Ao=!0),(hs&134217727)===0&&(Ta&134217727)===0||ge===null||gs(ge,Qt,fi,!1)}function Ug(i,s,o){var u=ie;ie|=2;var f=J0(),p=tv();(ge!==i||Qt!==s)&&(fh=null,xo(i,s)),s=!1;var w=Re;t:do try{if(re!==0&&jt!==null){var b=jt,z=$n;switch(re){case 8:Pg(),w=6;break t;case 3:case 2:case 9:case 6:hi.current===null&&(s=!0);var J=re;if(re=0,$n=null,No(i,b,z,J),o&&Ao){w=0;break t}break;default:J=re,re=0,$n=null,No(i,b,z,J)}}dR(),w=Re;break}catch(ut){W0(i,ut)}while(!0);return s&&i.shellSuspendCounter++,Ar=ma=null,ie=u,O.H=f,O.A=p,jt===null&&(ge=null,Qt=0,kc()),w}function dR(){for(;jt!==null;)ev(jt)}function gR(i,s){var o=ie;ie|=2;var u=J0(),f=tv();ge!==i||Qt!==s?(fh=null,hh=Lt()+500,xo(i,s)):Ao=An(i,s);t:do try{if(re!==0&&jt!==null){s=jt;var p=$n;e:switch(re){case 1:re=0,$n=null,No(i,s,p,1);break;case 2:case 9:if(d_(p)){re=0,$n=null,nv(s);break}s=function(){re!==2&&re!==9||ge!==i||(re=7),er(i)},p.then(s,s);break t;case 3:re=7;break t;case 4:re=5;break t;case 7:d_(p)?(re=0,$n=null,nv(s)):(re=0,$n=null,No(i,s,p,7));break;case 5:var w=null;switch(jt.tag){case 26:w=jt.memoizedState;case 5:case 27:var b=jt;if(!w||Lv(w)){re=0,$n=null;var z=b.sibling;if(z!==null)jt=z;else{var J=b.return;J!==null?(jt=J,gh(J)):jt=null}break e}}re=0,$n=null,No(i,s,p,5);break;case 6:re=0,$n=null,No(i,s,p,6);break;case 8:Pg(),Re=6;break t;default:throw Error(r(462))}}mR();break}catch(ut){W0(i,ut)}while(!0);return Ar=ma=null,O.H=u,O.A=f,ie=o,jt!==null?0:(ge=null,Qt=0,kc(),Re)}function mR(){for(;jt!==null&&!he();)ev(jt)}function ev(i){var s=C0(i.alternate,i,Mr);i.memoizedProps=i.pendingProps,s===null?gh(i):jt=s}function nv(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=w0(o,s,s.pendingProps,s.type,void 0,Qt);break;case 11:s=w0(o,s,s.pendingProps,s.type.render,s.ref,Qt);break;case 5:Jd(s);default:N0(o,s),s=jt=i_(s,Mr),s=C0(o,s,Mr)}i.memoizedProps=i.pendingProps,s===null?gh(i):jt=s}function No(i,s,o,u){Ar=ma=null,Jd(s),To=null,Zl=0;var f=s.return;try{if(rR(i,f,s,o,Qt)){Re=1,sh(i,oi(o,i.current)),jt=null;return}}catch(p){if(f!==null)throw jt=f,p;Re=1,sh(i,oi(o,i.current)),jt=null;return}s.flags&32768?(Jt||u===1?i=!0:Ao||(Qt&536870912)!==0?i=!1:(cs=i=!0,(u===2||u===9||u===3||u===6)&&(u=hi.current,u!==null&&u.tag===13&&(u.flags|=16384))),iv(s,i)):gh(s)}function gh(i){var s=i;do{if((s.flags&32768)!==0){iv(s,cs);return}i=s.return;var o=aR(s.alternate,s,Mr);if(o!==null){jt=o;return}if(s=s.sibling,s!==null){jt=s;return}jt=s=i}while(s!==null);Re===0&&(Re=5)}function iv(i,s){do{var o=oR(i.alternate,i);if(o!==null){o.flags&=32767,jt=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){jt=i;return}jt=i=o}while(i!==null);Re=6,jt=null}function rv(i,s,o,u,f,p,w,b,z){i.cancelPendingCommit=null;do mh();while(un!==0);if((ie&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=Cd,zn(i,o,p,w,b,z),i===ge&&(jt=ge=null,Qt=0),Io=s,ds=i,Co=o,Mg=p,Vg=f,K0=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,vR(Pn,function(){return uv(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=O.T,O.T=null,f=$.p,$.p=2,w=ie,ie|=4;try{lR(i,s,o)}finally{ie=w,$.p=f,O.T=u}}un=1,sv(),av(),ov()}}function sv(){if(un===1){un=0;var i=ds,s=Io,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=O.T,O.T=null;var u=$.p;$.p=2;var f=ie;ie|=4;try{H0(s,i);var p=Qg,w=Yy(i.containerInfo),b=p.focusedElem,z=p.selectionRange;if(w!==b&&b&&b.ownerDocument&&$y(b.ownerDocument.documentElement,b)){if(z!==null&&Sd(b)){var J=z.start,ut=z.end;if(ut===void 0&&(ut=J),"selectionStart"in b)b.selectionStart=J,b.selectionEnd=Math.min(ut,b.value.length);else{var ft=b.ownerDocument||document,it=ft&&ft.defaultView||window;if(it.getSelection){var st=it.getSelection(),Ot=b.textContent.length,Ct=Math.min(z.start,Ot),le=z.end===void 0?Ct:Math.min(z.end,Ot);!st.extend&&Ct>le&&(w=le,le=Ct,Ct=w);var K=Gy(b,Ct),j=Gy(b,le);if(K&&j&&(st.rangeCount!==1||st.anchorNode!==K.node||st.anchorOffset!==K.offset||st.focusNode!==j.node||st.focusOffset!==j.offset)){var Z=ft.createRange();Z.setStart(K.node,K.offset),st.removeAllRanges(),Ct>le?(st.addRange(Z),st.extend(j.node,j.offset)):(Z.setEnd(j.node,j.offset),st.addRange(Z))}}}}for(ft=[],st=b;st=st.parentNode;)st.nodeType===1&&ft.push({element:st,left:st.scrollLeft,top:st.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ft.length;b++){var ht=ft[b];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}Ih=!!Xg,Qg=Xg=null}finally{ie=f,$.p=u,O.T=o}}i.current=s,un=2}}function av(){if(un===2){un=0;var i=ds,s=Io,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=O.T,O.T=null;var u=$.p;$.p=2;var f=ie;ie|=4;try{L0(i,s.alternate,s)}finally{ie=f,$.p=u,O.T=o}}un=3}}function ov(){if(un===4||un===3){un=0,Ke();var i=ds,s=Io,o=Co,u=K0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?un=5:(un=0,Io=ds=null,lv(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(fs=null),Xr(o),s=s.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(te,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=O.T,f=$.p,$.p=2,O.T=null;try{for(var p=i.onRecoverableError,w=0;w<u.length;w++){var b=u[w];p(b.value,{componentStack:b.stack})}}finally{O.T=s,$.p=f}}(Co&3)!==0&&mh(),er(i),f=i.pendingLanes,(o&4194090)!==0&&(f&42)!==0?i===kg?au++:(au=0,kg=i):au=0,ou(0)}}function lv(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Bl(s)))}function mh(i){return sv(),av(),ov(),uv()}function uv(){if(un!==5)return!1;var i=ds,s=Mg;Mg=0;var o=Xr(Co),u=O.T,f=$.p;try{$.p=32>o?32:o,O.T=null,o=Vg,Vg=null;var p=ds,w=Co;if(un=0,Io=ds=null,Co=0,(ie&6)!==0)throw Error(r(331));var b=ie;if(ie|=4,$0(p.current),F0(p,p.current,w,o),ie=b,ou(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(te,p)}catch{}return!0}finally{$.p=f,O.T=u,lv(i,s)}}function cv(i,s,o){s=oi(o,s),s=dg(i.stateNode,s,2),i=is(i,s,2),i!==null&&(Zn(i,2),er(i))}function fe(i,s,o){if(i.tag===3)cv(i,i,o);else for(;s!==null;){if(s.tag===3){cv(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(fs===null||!fs.has(u))){i=oi(o,i),o=g0(2),u=is(s,o,2),u!==null&&(m0(o,u,s,i),Zn(u,2),er(u));break}}s=s.return}}function zg(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new hR;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(xg=!0,f.add(o),i=pR.bind(null,i,s,o),s.then(i,i))}function pR(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,ge===i&&(Qt&o)===o&&(Re===4||Re===3&&(Qt&62914560)===Qt&&300>Lt()-Og?(ie&2)===0&&xo(i,0):Ng|=o,Ro===Qt&&(Ro=0)),er(i)}function hv(i,s){s===0&&(s=Ei()),i=co(i,s),i!==null&&(Zn(i,s),er(i))}function yR(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),hv(i,o)}function _R(i,s){var o=0;switch(i.tag){case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),hv(i,o)}function vR(i,s){return ve(i,s)}var ph=null,Do=null,Bg=!1,yh=!1,Hg=!1,wa=0;function er(i){i!==Do&&i.next===null&&(Do===null?ph=Do=i:Do=Do.next=i),yh=!0,Bg||(Bg=!0,TR())}function ou(i,s){if(!Hg&&yh){Hg=!0;do for(var o=!1,u=ph;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var w=u.suspendedLanes,b=u.pingedLanes;p=(1<<31-Ee(42|i)+1)-1,p&=f&~(w&~b),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,mv(u,p))}else p=Qt,p=sn(u,u===ge?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||An(u,p)||(o=!0,mv(u,p));u=u.next}while(o);Hg=!1}}function ER(){fv()}function fv(){yh=Bg=!1;var i=0;wa!==0&&(xR()&&(i=wa),wa=0);for(var s=Lt(),o=null,u=ph;u!==null;){var f=u.next,p=dv(u,s);p===0?(u.next=null,o===null?ph=f:o.next=f,f===null&&(Do=o)):(o=u,(i!==0||(p&3)!==0)&&(yh=!0)),u=f}ou(i)}function dv(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var w=31-Ee(p),b=1<<w,z=f[w];z===-1?((b&o)===0||(b&u)!==0)&&(f[w]=hr(b,s)):z<=s&&(i.expiredLanes|=b),p&=~b}if(s=ge,o=Qt,o=sn(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(re===2||re===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&ye(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||An(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&ye(u),Xr(o)){case 2:case 8:o=mn;break;case 32:o=Pn;break;case 268435456:o=Ln;break;default:o=Pn}return u=gv.bind(null,i),o=ve(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&ye(u),i.callbackPriority=2,i.callbackNode=null,2}function gv(i,s){if(un!==0&&un!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(mh()&&i.callbackNode!==o)return null;var u=Qt;return u=sn(i,i===ge?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(Q0(i,u,s),dv(i,Lt()),i.callbackNode!=null&&i.callbackNode===o?gv.bind(null,i):null)}function mv(i,s){if(mh())return null;Q0(i,s,!0)}function TR(){DR(function(){(ie&6)!==0?ve(Ce,ER):fv()})}function qg(){return wa===0&&(wa=fr()),wa}function pv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Wa(""+i)}function yv(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function wR(i,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var p=pv((f[be]||null).action),w=u.submitter;w&&(s=(s=w[be]||null)?pv(s.formAction):w.getAttribute("formAction"),s!==null&&(p=s,w=null));var b=new Ja("action","action",null,u,f);i.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(wa!==0){var z=w?yv(f,w):new FormData(f);lg(o,{pending:!0,data:z,method:f.method,action:p},null,z)}}else typeof p=="function"&&(b.preventDefault(),z=w?yv(f,w):new FormData(f),lg(o,{pending:!0,data:z,method:f.method,action:p},p,z))},currentTarget:f}]})}}for(var Fg=0;Fg<Id.length;Fg++){var jg=Id[Fg],SR=jg.toLowerCase(),bR=jg[0].toUpperCase()+jg.slice(1);bi(SR,"on"+bR)}bi(Qy,"onAnimationEnd"),bi(Zy,"onAnimationIteration"),bi(Wy,"onAnimationStart"),bi("dblclick","onDoubleClick"),bi("focusin","onFocus"),bi("focusout","onBlur"),bi(HA,"onTransitionRun"),bi(qA,"onTransitionStart"),bi(FA,"onTransitionCancel"),bi(Jy,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lu));function _v(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;t:{var p=void 0;if(s)for(var w=u.length-1;0<=w;w--){var b=u[w],z=b.instance,J=b.currentTarget;if(b=b.listener,z!==p&&f.isPropagationStopped())break t;p=b,f.currentTarget=J;try{p(f)}catch(ut){rh(ut)}f.currentTarget=null,p=z}else for(w=0;w<u.length;w++){if(b=u[w],z=b.instance,J=b.currentTarget,b=b.listener,z!==p&&f.isPropagationStopped())break t;p=b,f.currentTarget=J;try{p(f)}catch(ut){rh(ut)}f.currentTarget=null,p=z}}}}function Gt(i,s){var o=s[Ks];o===void 0&&(o=s[Ks]=new Set);var u=i+"__bubble";o.has(u)||(vv(s,i,2,!1),o.add(u))}function Gg(i,s,o){var u=0;s&&(u|=4),vv(o,i,u,s)}var _h="_reactListening"+Math.random().toString(36).slice(2);function $g(i){if(!i[_h]){i[_h]=!0,Xs.forEach(function(o){o!=="selectionchange"&&(AR.has(o)||Gg(o,!1,i),Gg(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[_h]||(s[_h]=!0,Gg("selectionchange",!1,s))}}function vv(i,s,o,u){switch(Fv(s)){case 2:var f=WR;break;case 8:f=JR;break;default:f=am}o=f.bind(null,s,o,i),f=void 0,!si||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,o,{capture:!0,passive:f}):i.addEventListener(s,o,!0):f!==void 0?i.addEventListener(s,o,{passive:f}):i.addEventListener(s,o,!1)}function Yg(i,s,o,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var b=u.stateNode.containerInfo;if(b===f)break;if(w===4)for(w=u.return;w!==null;){var z=w.tag;if((z===3||z===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;b!==null;){if(w=Jn(b),w===null)return;if(z=w.tag,z===5||z===6||z===26||z===27){u=p=w;continue t}b=b.parentNode}}u=u.return}Ec(function(){var J=p,ut=ri(o),ft=[];t:{var it=t_.get(i);if(it!==void 0){var st=Ja,Ot=i;switch(i){case"keypress":if($i(o)===0)break t;case"keydown":case"keyup":st=so;break;case"focusin":Ot="focus",st=no;break;case"focusout":Ot="blur",st=no;break;case"beforeblur":case"afterblur":st=no;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=ai;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=vd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=Cc;break;case Qy:case Zy:case Wy:st=io;break;case Jy:st=Nc;break;case"scroll":case"scrollend":st=Tc;break;case"wheel":st=ao;break;case"copy":case"cut":case"paste":st=ro;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=Ol;break;case"toggle":case"beforetoggle":st=Oc}var Ct=(s&4)!==0,le=!Ct&&(i==="scroll"||i==="scrollend"),K=Ct?it!==null?it+"Capture":null:it;Ct=[];for(var j=J,Z;j!==null;){var ht=j;if(Z=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||Z===null||K===null||(ht=ea(j,K),ht!=null&&Ct.push(uu(j,ht,Z))),le)break;j=j.return}0<Ct.length&&(it=new st(it,Ot,null,o,ut),ft.push({event:it,listeners:Ct}))}}if((s&7)===0){t:{if(it=i==="mouseover"||i==="pointerover",st=i==="mouseout"||i==="pointerout",it&&o!==pr&&(Ot=o.relatedTarget||o.fromElement)&&(Jn(Ot)||Ot[Nn]))break t;if((st||it)&&(it=ut.window===ut?ut:(it=ut.ownerDocument)?it.defaultView||it.parentWindow:window,st?(Ot=o.relatedTarget||o.toElement,st=J,Ot=Ot?Jn(Ot):null,Ot!==null&&(le=l(Ot),Ct=Ot.tag,Ot!==le||Ct!==5&&Ct!==27&&Ct!==6)&&(Ot=null)):(st=null,Ot=J),st!==Ot)){if(Ct=ai,ht="onMouseLeave",K="onMouseEnter",j="mouse",(i==="pointerout"||i==="pointerover")&&(Ct=Ol,ht="onPointerLeave",K="onPointerEnter",j="pointer"),le=st==null?it:ei(st),Z=Ot==null?it:ei(Ot),it=new Ct(ht,j+"leave",st,o,ut),it.target=le,it.relatedTarget=Z,ht=null,Jn(ut)===J&&(Ct=new Ct(K,j+"enter",Ot,o,ut),Ct.target=Z,Ct.relatedTarget=le,ht=Ct),le=ht,st&&Ot)e:{for(Ct=st,K=Ot,j=0,Z=Ct;Z;Z=Oo(Z))j++;for(Z=0,ht=K;ht;ht=Oo(ht))Z++;for(;0<j-Z;)Ct=Oo(Ct),j--;for(;0<Z-j;)K=Oo(K),Z--;for(;j--;){if(Ct===K||K!==null&&Ct===K.alternate)break e;Ct=Oo(Ct),K=Oo(K)}Ct=null}else Ct=null;st!==null&&Ev(ft,it,st,Ct,!1),Ot!==null&&le!==null&&Ev(ft,le,Ot,Ct,!0)}}t:{if(it=J?ei(J):window,st=it.nodeName&&it.nodeName.toLowerCase(),st==="select"||st==="input"&&it.type==="file")var Tt=zy;else if(qe(it))if(By)Tt=UA;else{Tt=PA;var Ht=kA}else st=it.nodeName,!st||st.toLowerCase()!=="input"||it.type!=="checkbox"&&it.type!=="radio"?J&&Al(J.elementType)&&(Tt=zy):Tt=LA;if(Tt&&(Tt=Tt(i,J))){Tr(ft,Tt,o,ut);break t}Ht&&Ht(i,it,J),i==="focusout"&&J&&it.type==="number"&&J.memoizedProps.value!=null&&Wr(it,"number",it.value)}switch(Ht=J?ei(J):window,i){case"focusin":(qe(Ht)||Ht.contentEditable==="true")&&(oo=Ht,bd=J,kl=null);break;case"focusout":kl=bd=oo=null;break;case"mousedown":Ad=!0;break;case"contextmenu":case"mouseup":case"dragend":Ad=!1,Ky(ft,o,ut);break;case"selectionchange":if(BA)break;case"keydown":case"keyup":Ky(ft,o,ut)}var St;if(Xi)t:{switch(i){case"compositionstart":var xt="onCompositionStart";break t;case"compositionend":xt="onCompositionEnd";break t;case"compositionupdate":xt="onCompositionUpdate";break t}xt=void 0}else Kt?ot(i,o)&&(xt="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(xt="onCompositionStart");xt&&(E&&o.locale!=="ko"&&(Kt||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Kt&&(St=Il()):(Gi=ut,Jr="value"in Gi?Gi.value:Gi.textContent,Kt=!0)),Ht=vh(J,xt),0<Ht.length&&(xt=new Nl(xt,i,null,o,ut),ft.push({event:xt,listeners:Ht}),St?xt.data=St:(St=yt(o),St!==null&&(xt.data=St)))),(St=_?He(i,o):Xt(i,o))&&(xt=vh(J,"onBeforeInput"),0<xt.length&&(Ht=new Nl("onBeforeInput","beforeinput",null,o,ut),ft.push({event:Ht,listeners:xt}),Ht.data=St)),wR(ft,i,J,o,ut)}_v(ft,s)})}function uu(i,s,o){return{instance:i,listener:s,currentTarget:o}}function vh(i,s){for(var o=s+"Capture",u=[];i!==null;){var f=i,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=ea(i,o),f!=null&&u.unshift(uu(i,f,p)),f=ea(i,s),f!=null&&u.push(uu(i,f,p))),i.tag===3)return u;i=i.return}return[]}function Oo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Ev(i,s,o,u,f){for(var p=s._reactName,w=[];o!==null&&o!==u;){var b=o,z=b.alternate,J=b.stateNode;if(b=b.tag,z!==null&&z===u)break;b!==5&&b!==26&&b!==27||J===null||(z=J,f?(J=ea(o,p),J!=null&&w.unshift(uu(o,J,z))):f||(J=ea(o,p),J!=null&&w.push(uu(o,J,z)))),o=o.return}w.length!==0&&i.push({event:s,listeners:w})}var RR=/\r\n?/g,IR=/\u0000|\uFFFD/g;function Tv(i){return(typeof i=="string"?i:""+i).replace(RR,`
`).replace(IR,"")}function wv(i,s){return s=Tv(s),Tv(i)===s}function Eh(){}function oe(i,s,o,u,f,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||ii(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&ii(i,""+u);break;case"className":ni(i,"class",u);break;case"tabIndex":ni(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ni(i,o,u);break;case"style":bl(i,u,p);break;case"data":if(s!=="object"){ni(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Wa(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&oe(i,s,"name",f.name,f,null),oe(i,s,"formEncType",f.formEncType,f,null),oe(i,s,"formMethod",f.formMethod,f,null),oe(i,s,"formTarget",f.formTarget,f,null)):(oe(i,s,"encType",f.encType,f,null),oe(i,s,"method",f.method,f,null),oe(i,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Wa(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=Eh);break;case"onScroll":u!=null&&Gt("scroll",i);break;case"onScrollEnd":u!=null&&Gt("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Wa(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Gt("beforetoggle",i),Gt("toggle",i),Hi(i,"popover",u);break;case"xlinkActuate":Be(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Be(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Be(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Be(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Be(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Be(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Be(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Be(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Be(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Hi(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=yd.get(o)||o,Hi(i,o,u))}}function Kg(i,s,o,u,f,p){switch(o){case"style":bl(i,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?ii(i,u):(typeof u=="number"||typeof u=="bigint")&&ii(i,""+u);break;case"onScroll":u!=null&&Gt("scroll",i);break;case"onScrollEnd":u!=null&&Gt("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Eh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qr.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),p=i[be]||null,p=p!=null?p[o]:null,typeof p=="function"&&i.removeEventListener(s,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,f);break t}o in i?i[o]=u:u===!0?i.setAttribute(o,""):Hi(i,o,u)}}}function cn(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",i),Gt("load",i);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var w=o[p];if(w!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:oe(i,s,p,w,o,null)}}f&&oe(i,s,"srcSet",o.srcSet,o,null),u&&oe(i,s,"src",o.src,o,null);return;case"input":Gt("invalid",i);var b=p=w=f=null,z=null,J=null;for(u in o)if(o.hasOwnProperty(u)){var ut=o[u];if(ut!=null)switch(u){case"name":f=ut;break;case"type":w=ut;break;case"checked":z=ut;break;case"defaultChecked":J=ut;break;case"value":p=ut;break;case"defaultValue":b=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(r(137,s));break;default:oe(i,s,u,ut,o,null)}}Ws(i,p,b,z,J,w,f,!1),Za(i);return;case"select":Gt("invalid",i),u=w=p=null;for(f in o)if(o.hasOwnProperty(f)&&(b=o[f],b!=null))switch(f){case"value":p=b;break;case"defaultValue":w=b;break;case"multiple":u=b;default:oe(i,s,f,b,o,null)}s=p,o=w,i.multiple=!!u,s!=null?mr(i,!!u,s,!1):o!=null&&mr(i,!!u,o,!0);return;case"textarea":Gt("invalid",i),p=f=u=null;for(w in o)if(o.hasOwnProperty(w)&&(b=o[w],b!=null))switch(w){case"value":u=b;break;case"defaultValue":f=b;break;case"children":p=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:oe(i,s,w,b,o,null)}Js(i,u,f,p),Za(i);return;case"option":for(z in o)if(o.hasOwnProperty(z)&&(u=o[z],u!=null))switch(z){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:oe(i,s,z,u,o,null)}return;case"dialog":Gt("beforetoggle",i),Gt("toggle",i),Gt("cancel",i),Gt("close",i);break;case"iframe":case"object":Gt("load",i);break;case"video":case"audio":for(u=0;u<lu.length;u++)Gt(lu[u],i);break;case"image":Gt("error",i),Gt("load",i);break;case"details":Gt("toggle",i);break;case"embed":case"source":case"link":Gt("error",i),Gt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in o)if(o.hasOwnProperty(J)&&(u=o[J],u!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:oe(i,s,J,u,o,null)}return;default:if(Al(s)){for(ut in o)o.hasOwnProperty(ut)&&(u=o[ut],u!==void 0&&Kg(i,s,ut,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&oe(i,s,b,u,o,null))}function CR(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,w=null,b=null,z=null,J=null,ut=null;for(st in o){var ft=o[st];if(o.hasOwnProperty(st)&&ft!=null)switch(st){case"checked":break;case"value":break;case"defaultValue":z=ft;default:u.hasOwnProperty(st)||oe(i,s,st,null,u,ft)}}for(var it in u){var st=u[it];if(ft=o[it],u.hasOwnProperty(it)&&(st!=null||ft!=null))switch(it){case"type":p=st;break;case"name":f=st;break;case"checked":J=st;break;case"defaultChecked":ut=st;break;case"value":w=st;break;case"defaultValue":b=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(r(137,s));break;default:st!==ft&&oe(i,s,it,st,u,ft)}}Hn(i,w,b,z,J,ut,p,f);return;case"select":st=w=b=it=null;for(p in o)if(z=o[p],o.hasOwnProperty(p)&&z!=null)switch(p){case"value":break;case"multiple":st=z;default:u.hasOwnProperty(p)||oe(i,s,p,null,u,z)}for(f in u)if(p=u[f],z=o[f],u.hasOwnProperty(f)&&(p!=null||z!=null))switch(f){case"value":it=p;break;case"defaultValue":b=p;break;case"multiple":w=p;default:p!==z&&oe(i,s,f,p,u,z)}s=b,o=w,u=st,it!=null?mr(i,!!o,it,!1):!!u!=!!o&&(s!=null?mr(i,!!o,s,!0):mr(i,!!o,o?[]:"",!1));return;case"textarea":st=it=null;for(b in o)if(f=o[b],o.hasOwnProperty(b)&&f!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:oe(i,s,b,null,u,f)}for(w in u)if(f=u[w],p=o[w],u.hasOwnProperty(w)&&(f!=null||p!=null))switch(w){case"value":it=f;break;case"defaultValue":st=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&oe(i,s,w,f,u,p)}se(i,it,st);return;case"option":for(var Ot in o)if(it=o[Ot],o.hasOwnProperty(Ot)&&it!=null&&!u.hasOwnProperty(Ot))switch(Ot){case"selected":i.selected=!1;break;default:oe(i,s,Ot,null,u,it)}for(z in u)if(it=u[z],st=o[z],u.hasOwnProperty(z)&&it!==st&&(it!=null||st!=null))switch(z){case"selected":i.selected=it&&typeof it!="function"&&typeof it!="symbol";break;default:oe(i,s,z,it,u,st)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in o)it=o[Ct],o.hasOwnProperty(Ct)&&it!=null&&!u.hasOwnProperty(Ct)&&oe(i,s,Ct,null,u,it);for(J in u)if(it=u[J],st=o[J],u.hasOwnProperty(J)&&it!==st&&(it!=null||st!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(r(137,s));break;default:oe(i,s,J,it,u,st)}return;default:if(Al(s)){for(var le in o)it=o[le],o.hasOwnProperty(le)&&it!==void 0&&!u.hasOwnProperty(le)&&Kg(i,s,le,void 0,u,it);for(ut in u)it=u[ut],st=o[ut],!u.hasOwnProperty(ut)||it===st||it===void 0&&st===void 0||Kg(i,s,ut,it,u,st);return}}for(var K in o)it=o[K],o.hasOwnProperty(K)&&it!=null&&!u.hasOwnProperty(K)&&oe(i,s,K,null,u,it);for(ft in u)it=u[ft],st=o[ft],!u.hasOwnProperty(ft)||it===st||it==null&&st==null||oe(i,s,ft,it,u,st)}var Xg=null,Qg=null;function Th(i){return i.nodeType===9?i:i.ownerDocument}function Sv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bv(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Zg(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Wg=null;function xR(){var i=window.event;return i&&i.type==="popstate"?i===Wg?!1:(Wg=i,!0):(Wg=null,!1)}var Av=typeof setTimeout=="function"?setTimeout:void 0,NR=typeof clearTimeout=="function"?clearTimeout:void 0,Rv=typeof Promise=="function"?Promise:void 0,DR=typeof queueMicrotask=="function"?queueMicrotask:typeof Rv<"u"?function(i){return Rv.resolve(null).then(i).catch(OR)}:Av;function OR(i){setTimeout(function(){throw i})}function ms(i){return i==="head"}function Iv(i,s){var o=s,u=0,f=0;do{var p=o.nextSibling;if(i.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var w=i.ownerDocument;if(o&1&&cu(w.documentElement),o&2&&cu(w.body),o&4)for(o=w.head,cu(o),w=o.firstChild;w;){var b=w.nextSibling,z=w.nodeName;w[dr]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=b}}if(f===0){i.removeChild(p),_u(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);_u(s)}function Jg(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Jg(o),Bi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function MR(i,s,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[dr])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=Ri(i.nextSibling),i===null)break}return null}function VR(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Ri(i.nextSibling),i===null))return null;return i}function tm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function kR(i,s){var o=i.ownerDocument;if(i.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Ri(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var em=null;function Cv(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return i;s--}else o==="/$"&&s++}i=i.previousSibling}return null}function xv(i,s,o){switch(s=Th(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function cu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Bi(i)}var di=new Map,Nv=new Set;function wh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Vr=$.d;$.d={f:PR,r:LR,D:UR,C:zR,L:BR,m:HR,X:FR,S:qR,M:jR};function PR(){var i=Vr.f(),s=dh();return i||s}function LR(i){var s=ti(i);s!==null&&s.tag===5&&s.type==="form"?Q_(s):Vr.r(i)}var Mo=typeof document>"u"?null:document;function Dv(i,s,o){var u=Mo;if(u&&typeof s=="string"&&s){var f=ke(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Nv.has(f)||(Nv.add(f),i={rel:i,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),cn(s,"link",i),Te(s),u.head.appendChild(s)))}}function UR(i){Vr.D(i),Dv("dns-prefetch",i,null)}function zR(i,s){Vr.C(i,s),Dv("preconnect",i,s)}function BR(i,s,o){Vr.L(i,s,o);var u=Mo;if(u&&i&&s){var f='link[rel="preload"][as="'+ke(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+ke(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+ke(o.imageSizes)+'"]')):f+='[href="'+ke(i)+'"]';var p=f;switch(s){case"style":p=Vo(i);break;case"script":p=ko(i)}di.has(p)||(i=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),di.set(p,i),u.querySelector(f)!==null||s==="style"&&u.querySelector(hu(p))||s==="script"&&u.querySelector(fu(p))||(s=u.createElement("link"),cn(s,"link",i),Te(s),u.head.appendChild(s)))}}function HR(i,s){Vr.m(i,s);var o=Mo;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+ke(u)+'"][href="'+ke(i)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=ko(i)}if(!di.has(p)&&(i=y({rel:"modulepreload",href:i},s),di.set(p,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(fu(p)))return}u=o.createElement("link"),cn(u,"link",i),Te(u),o.head.appendChild(u)}}}function qR(i,s,o){Vr.S(i,s,o);var u=Mo;if(u&&i){var f=an(u).hoistableStyles,p=Vo(i);s=s||"default";var w=f.get(p);if(!w){var b={loading:0,preload:null};if(w=u.querySelector(hu(p)))b.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":s},o),(o=di.get(p))&&nm(i,o);var z=w=u.createElement("link");Te(z),cn(z,"link",i),z._p=new Promise(function(J,ut){z.onload=J,z.onerror=ut}),z.addEventListener("load",function(){b.loading|=1}),z.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Sh(w,s,u)}w={type:"stylesheet",instance:w,count:1,state:b},f.set(p,w)}}}function FR(i,s){Vr.X(i,s);var o=Mo;if(o&&i){var u=an(o).hoistableScripts,f=ko(i),p=u.get(f);p||(p=o.querySelector(fu(f)),p||(i=y({src:i,async:!0},s),(s=di.get(f))&&im(i,s),p=o.createElement("script"),Te(p),cn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function jR(i,s){Vr.M(i,s);var o=Mo;if(o&&i){var u=an(o).hoistableScripts,f=ko(i),p=u.get(f);p||(p=o.querySelector(fu(f)),p||(i=y({src:i,async:!0,type:"module"},s),(s=di.get(f))&&im(i,s),p=o.createElement("script"),Te(p),cn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function Ov(i,s,o,u){var f=(f=pt.current)?wh(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Vo(o.href),o=an(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Vo(o.href);var p=an(f).hoistableStyles,w=p.get(i);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,w),(p=f.querySelector(hu(i)))&&!p._p&&(w.instance=p,w.state.loading=5),di.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},di.set(i,o),p||GR(f,i,o,w.state))),s&&u===null)throw Error(r(528,""));return w}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ko(o),o=an(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Vo(i){return'href="'+ke(i)+'"'}function hu(i){return'link[rel="stylesheet"]['+i+"]"}function Mv(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function GR(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),cn(s,"link",o),Te(s),i.head.appendChild(s))}function ko(i){return'[src="'+ke(i)+'"]'}function fu(i){return"script[async]"+i}function Vv(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+ke(o.href)+'"]');if(u)return s.instance=u,Te(u),u;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Te(u),cn(u,"style",f),Sh(u,o.precedence,i),s.instance=u;case"stylesheet":f=Vo(o.href);var p=i.querySelector(hu(f));if(p)return s.state.loading|=4,s.instance=p,Te(p),p;u=Mv(o),(f=di.get(f))&&nm(u,f),p=(i.ownerDocument||i).createElement("link"),Te(p);var w=p;return w._p=new Promise(function(b,z){w.onload=b,w.onerror=z}),cn(p,"link",u),s.state.loading|=4,Sh(p,o.precedence,i),s.instance=p;case"script":return p=ko(o.src),(f=i.querySelector(fu(p)))?(s.instance=f,Te(f),f):(u=o,(f=di.get(p))&&(u=y({},o),im(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),Te(f),cn(f,"link",u),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Sh(u,o.precedence,i));return s.instance}function Sh(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,w=0;w<u.length;w++){var b=u[w];if(b.dataset.precedence===s)p=b;else if(p!==f)break}p?p.parentNode.insertBefore(i,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function nm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function im(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var bh=null;function kv(i,s,o){if(bh===null){var u=new Map,f=bh=new Map;f.set(o,u)}else f=bh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var p=o[f];if(!(p[dr]||p[xe]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(s)||"";w=i+w;var b=u.get(w);b?b.push(p):u.set(w,[p])}}return u}function Pv(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function $R(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Lv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var du=null;function YR(){}function KR(i,s,o){if(du===null)throw Error(r(475));var u=du;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Vo(o.href),p=i.querySelector(hu(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=Ah.bind(u),i.then(u,u)),s.state.loading|=4,s.instance=p,Te(p);return}p=i.ownerDocument||i,o=Mv(o),(f=di.get(f))&&nm(o,f),p=p.createElement("link"),Te(p);var w=p;w._p=new Promise(function(b,z){w.onload=b,w.onerror=z}),cn(p,"link",o),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=Ah.bind(u),i.addEventListener("load",s),i.addEventListener("error",s))}}function XR(){if(du===null)throw Error(r(475));var i=du;return i.stylesheets&&i.count===0&&rm(i,i.stylesheets),0<i.count?function(s){var o=setTimeout(function(){if(i.stylesheets&&rm(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(o)}}:null}function Ah(){if(this.count--,this.count===0){if(this.stylesheets)rm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Rh=null;function rm(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Rh=new Map,s.forEach(QR,i),Rh=null,Ah.call(i))}function QR(i,s){if(!(s.state.loading&4)){var o=Rh.get(i);if(o)var u=o.get(null);else{o=new Map,Rh.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var w=f[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}f=s.instance,w=f.getAttribute("data-precedence"),p=o.get(w)||u,p===u&&o.set(null,f),o.set(w,f),this.count++,u=Ah.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var gu={$$typeof:F,Provider:null,Consumer:null,_currentValue:at,_currentValue2:at,_threadCount:0};function ZR(i,s,o,u,f,p,w,b){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Un(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Un(0),this.hiddenUpdates=Un(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Uv(i,s,o,u,f,p,w,b,z,J,ut,ft){return i=new ZR(i,s,o,w,b,z,J,ft),s=1,p===!0&&(s|=24),p=Fn(3,null,null,s),i.current=p,p.stateNode=i,s=zd(),s.refCount++,i.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},Fd(p),i}function zv(i){return i?(i=ho,i):ho}function Bv(i,s,o,u,f,p){f=zv(f),u.context===null?u.context=f:u.pendingContext=f,u=ns(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=is(i,u,s),o!==null&&(Kn(o,i,s),jl(o,i,s))}function Hv(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function sm(i,s){Hv(i,s),(i=i.alternate)&&Hv(i,s)}function qv(i){if(i.tag===13){var s=co(i,67108864);s!==null&&Kn(s,i,67108864),sm(i,67108864)}}var Ih=!0;function WR(i,s,o,u){var f=O.T;O.T=null;var p=$.p;try{$.p=2,am(i,s,o,u)}finally{$.p=p,O.T=f}}function JR(i,s,o,u){var f=O.T;O.T=null;var p=$.p;try{$.p=8,am(i,s,o,u)}finally{$.p=p,O.T=f}}function am(i,s,o,u){if(Ih){var f=om(u);if(f===null)Yg(i,s,u,Ch,o),jv(i,u);else if(eI(f,i,s,o,u))u.stopPropagation();else if(jv(i,u),s&4&&-1<tI.indexOf(i)){for(;f!==null;){var p=ti(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=Qe(p.pendingLanes);if(w!==0){var b=p;for(b.pendingLanes|=2,b.entangledLanes|=2;w;){var z=1<<31-Ee(w);b.entanglements[1]|=z,w&=~z}er(p),(ie&6)===0&&(hh=Lt()+500,ou(0))}}break;case 13:b=co(p,2),b!==null&&Kn(b,p,2),dh(),sm(p,2)}if(p=om(u),p===null&&Yg(i,s,u,Ch,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else Yg(i,s,u,null,o)}}function om(i){return i=ri(i),lm(i)}var Ch=null;function lm(i){if(Ch=null,i=Jn(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Ch=i,null}function Fv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wt()){case Ce:return 2;case mn:return 8;case Pn:case ki:return 32;case Ln:return 268435456;default:return 32}default:return 32}}var um=!1,ps=null,ys=null,_s=null,mu=new Map,pu=new Map,vs=[],tI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jv(i,s){switch(i){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":_s=null;break;case"pointerover":case"pointerout":mu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":pu.delete(s.pointerId)}}function yu(i,s,o,u,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=ti(s),s!==null&&qv(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function eI(i,s,o,u,f){switch(s){case"focusin":return ps=yu(ps,i,s,o,u,f),!0;case"dragenter":return ys=yu(ys,i,s,o,u,f),!0;case"mouseover":return _s=yu(_s,i,s,o,u,f),!0;case"pointerover":var p=f.pointerId;return mu.set(p,yu(mu.get(p)||null,i,s,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,pu.set(p,yu(pu.get(p)||null,i,s,o,u,f)),!0}return!1}function Gv(i){var s=Jn(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,Ga(i.priority,function(){if(o.tag===13){var u=Yn();u=Li(u);var f=co(o,u);f!==null&&Kn(f,o,u),sm(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function xh(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=om(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);pr=u,o.target.dispatchEvent(u),pr=null}else return s=ti(o),s!==null&&qv(s),i.blockedOn=o,!1;s.shift()}return!0}function $v(i,s,o){xh(i)&&o.delete(s)}function nI(){um=!1,ps!==null&&xh(ps)&&(ps=null),ys!==null&&xh(ys)&&(ys=null),_s!==null&&xh(_s)&&(_s=null),mu.forEach($v),pu.forEach($v)}function Nh(i,s){i.blockedOn===s&&(i.blockedOn=null,um||(um=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,nI)))}var Dh=null;function Yv(i){Dh!==i&&(Dh=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Dh===i&&(Dh=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],f=i[s+2];if(typeof u!="function"){if(lm(u||o)===null)continue;break}var p=ti(o);p!==null&&(i.splice(s,3),s-=3,lg(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function _u(i){function s(z){return Nh(z,i)}ps!==null&&Nh(ps,i),ys!==null&&Nh(ys,i),_s!==null&&Nh(_s,i),mu.forEach(s),pu.forEach(s);for(var o=0;o<vs.length;o++){var u=vs[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<vs.length&&(o=vs[0],o.blockedOn===null);)Gv(o),o.blockedOn===null&&vs.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],w=f[be]||null;if(typeof p=="function")w||Yv(o);else if(w){var b=null;if(p&&p.hasAttribute("formAction")){if(f=p,w=p[be]||null)b=w.formAction;else if(lm(f)!==null)continue}else b=w.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),Yv(o)}}}function cm(i){this._internalRoot=i}Oh.prototype.render=cm.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Yn();Bv(o,u,i,s,null,null)},Oh.prototype.unmount=cm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Bv(i.current,2,null,i,null,null),dh(),s[Nn]=null}};function Oh(i){this._internalRoot=i}Oh.prototype.unstable_scheduleHydration=function(i){if(i){var s=Ui();i={blockedOn:null,target:i,priority:s};for(var o=0;o<vs.length&&s!==0&&s<vs[o].priority;o++);vs.splice(o,0,i),o===0&&Gv(i)}};var Kv=t.version;if(Kv!=="19.1.0")throw Error(r(527,Kv,"19.1.0"));$.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=g(s),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var iI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mh.isDisabled&&Mh.supportsFiber)try{te=Mh.inject(iI),Ft=Mh}catch{}}return Eu.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",f=c0,p=h0,w=f0,b=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(b=s.unstable_transitionCallbacks)),s=Uv(i,1,!1,null,null,o,u,f,p,w,b,null),i[Nn]=s.current,$g(i),new cm(s)},Eu.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,f="",p=c0,w=h0,b=f0,z=null,J=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(z=o.unstable_transitionCallbacks),o.formState!==void 0&&(J=o.formState)),s=Uv(i,1,!0,s,o??null,u,f,p,w,b,z,J),s.context=zv(null),o=s.current,u=Yn(),u=Li(u),f=ns(u),f.callback=null,is(o,f,u),o=u,s.current.lanes=o,Zn(s,o),er(s),i[Nn]=s.current,$g(i),new Oh(s)},Eu.version="19.1.0",Eu}var rE;function fI(){if(rE)return dm.exports;rE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),dm.exports=hI(),dm.exports}var dI=fI();function gn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=gn(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var ym={exports:{}},_m={},vm={exports:{}},Em={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE;function gI(){if(sE)return Em;sE=1;var e=rc();function t(v,T){return v===T&&(v!==0||1/v===1/T)||v!==v&&T!==T}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,a=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function d(v,T){var S=T(),P=r({inst:{value:S,getSnapshot:T}}),L=P[0].inst,V=P[1];return l(function(){L.value=S,L.getSnapshot=T,g(L)&&V({inst:L})},[v,S,T]),a(function(){return g(L)&&V({inst:L}),v(function(){g(L)&&V({inst:L})})},[v]),c(S),S}function g(v){var T=v.getSnapshot;v=v.value;try{var S=T();return!n(v,S)}catch{return!0}}function m(v,T){return T()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return Em.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:y,Em}var aE;function mI(){return aE||(aE=1,vm.exports=gI()),vm.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE;function pI(){if(oE)return _m;oE=1;var e=rc(),t=mI();function n(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var r=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,l=e.useRef,c=e.useEffect,d=e.useMemo,g=e.useDebugValue;return _m.useSyncExternalStoreWithSelector=function(m,y,v,T,S){var P=l(null);if(P.current===null){var L={hasValue:!1,value:null};P.current=L}else L=P.current;P=d(function(){function B(nt){if(!q){if(q=!0,F=nt,nt=T(nt),S!==void 0&&L.hasValue){var D=L.value;if(S(D,nt))return H=D}return H=nt}if(D=H,r(F,nt))return D;var R=T(nt);return S!==void 0&&S(D,R)?(F=nt,D):(F=nt,H=R)}var q=!1,F,H,et=v===void 0?null:v;return[function(){return B(y())},et===null?void 0:function(){return B(et())}]},[y,v,T,S]);var V=a(m,P[0],P[1]);return c(function(){L.hasValue=!0,L.value=V},[V]),g(V),V},_m}var lE;function yI(){return lE||(lE=1,ym.exports=pI()),ym.exports}var _I=yI();const vI=Dw(_I),EI={},uE=e=>{let t;const n=new Set,r=(y,v)=>{const T=typeof y=="function"?y(t):y;if(!Object.is(T,t)){const S=t;t=v??(typeof T!="object"||T===null)?T:Object.assign({},t,T),n.forEach(P=>P(t,S))}},a=()=>t,g={setState:r,getState:a,getInitialState:()=>m,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(EI?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},m=t=e(r,a,g);return g},TI=e=>e?uE(e):uE,{useDebugValue:wI}=lt,{useSyncExternalStoreWithSelector:SI}=vI,bI=e=>e;function Mw(e,t=bI,n){const r=SI(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return wI(r),r}const cE=(e,t)=>{const n=TI(e),r=(a,l=t)=>Mw(n,a,l);return Object.assign(r,n),r},AI=(e,t)=>e?cE(e,t):cE;function rn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,a]of e)if(!Object.is(a,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var RI={value:()=>{}};function qf(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Zh(n)}function Zh(e){this._=e}function II(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Zh.prototype=qf.prototype={constructor:Zh,on:function(e,t){var n=this._,r=II(e+"",n),a,l=-1,c=r.length;if(arguments.length<2){for(;++l<c;)if((a=(e=r[l]).type)&&(a=CI(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(a=(e=r[l]).type)n[a]=hE(n[a],e.name,t);else if(t==null)for(a in n)n[a]=hE(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Zh(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,l;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],r=0,a=l.length;r<a;++r)l[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,l=r.length;a<l;++a)r[a].value.apply(t,n)}};function CI(e,t){for(var n=0,r=e.length,a;n<r;++n)if((a=e[n]).name===t)return a.value}function hE(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=RI,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var qm="http://www.w3.org/1999/xhtml";const fE={svg:"http://www.w3.org/2000/svg",xhtml:qm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ff(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),fE.hasOwnProperty(t)?{space:fE[t],local:e}:e}function xI(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===qm&&t.documentElement.namespaceURI===qm?t.createElement(e):t.createElementNS(n,e)}}function NI(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Vw(e){var t=Ff(e);return(t.local?NI:xI)(t)}function DI(){}function Np(e){return e==null?DI:function(){return this.querySelector(e)}}function OI(e){typeof e!="function"&&(e=Np(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=new Array(c),g,m,y=0;y<c;++y)(g=l[y])&&(m=e.call(g,g.__data__,y,l))&&("__data__"in g&&(m.__data__=g.__data__),d[y]=m);return new Qn(r,this._parents)}function MI(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function VI(){return[]}function kw(e){return e==null?VI:function(){return this.querySelectorAll(e)}}function kI(e){return function(){return MI(e.apply(this,arguments))}}function PI(e){typeof e=="function"?e=kI(e):e=kw(e);for(var t=this._groups,n=t.length,r=[],a=[],l=0;l<n;++l)for(var c=t[l],d=c.length,g,m=0;m<d;++m)(g=c[m])&&(r.push(e.call(g,g.__data__,m,c)),a.push(g));return new Qn(r,a)}function Pw(e){return function(){return this.matches(e)}}function Lw(e){return function(t){return t.matches(e)}}var LI=Array.prototype.find;function UI(e){return function(){return LI.call(this.children,e)}}function zI(){return this.firstElementChild}function BI(e){return this.select(e==null?zI:UI(typeof e=="function"?e:Lw(e)))}var HI=Array.prototype.filter;function qI(){return Array.from(this.children)}function FI(e){return function(){return HI.call(this.children,e)}}function jI(e){return this.selectAll(e==null?qI:FI(typeof e=="function"?e:Lw(e)))}function GI(e){typeof e!="function"&&(e=Pw(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=[],g,m=0;m<c;++m)(g=l[m])&&e.call(g,g.__data__,m,l)&&d.push(g);return new Qn(r,this._parents)}function Uw(e){return new Array(e.length)}function $I(){return new Qn(this._enter||this._groups.map(Uw),this._parents)}function ff(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ff.prototype={constructor:ff,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function YI(e){return function(){return e}}function KI(e,t,n,r,a,l){for(var c=0,d,g=t.length,m=l.length;c<m;++c)(d=t[c])?(d.__data__=l[c],r[c]=d):n[c]=new ff(e,l[c]);for(;c<g;++c)(d=t[c])&&(a[c]=d)}function XI(e,t,n,r,a,l,c){var d,g,m=new Map,y=t.length,v=l.length,T=new Array(y),S;for(d=0;d<y;++d)(g=t[d])&&(T[d]=S=c.call(g,g.__data__,d,t)+"",m.has(S)?a[d]=g:m.set(S,g));for(d=0;d<v;++d)S=c.call(e,l[d],d,l)+"",(g=m.get(S))?(r[d]=g,g.__data__=l[d],m.delete(S)):n[d]=new ff(e,l[d]);for(d=0;d<y;++d)(g=t[d])&&m.get(T[d])===g&&(a[d]=g)}function QI(e){return e.__data__}function ZI(e,t){if(!arguments.length)return Array.from(this,QI);var n=t?XI:KI,r=this._parents,a=this._groups;typeof e!="function"&&(e=YI(e));for(var l=a.length,c=new Array(l),d=new Array(l),g=new Array(l),m=0;m<l;++m){var y=r[m],v=a[m],T=v.length,S=WI(e.call(y,y&&y.__data__,m,r)),P=S.length,L=d[m]=new Array(P),V=c[m]=new Array(P),B=g[m]=new Array(T);n(y,v,L,V,B,S,t);for(var q=0,F=0,H,et;q<P;++q)if(H=L[q]){for(q>=F&&(F=q+1);!(et=V[F])&&++F<P;);H._next=et||null}}return c=new Qn(c,r),c._enter=d,c._exit=g,c}function WI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function JI(){return new Qn(this._exit||this._groups.map(Uw),this._parents)}function tC(e,t,n){var r=this.enter(),a=this,l=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?l.remove():n(l),r&&a?r.merge(a).order():a}function eC(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,l=r.length,c=Math.min(a,l),d=new Array(a),g=0;g<c;++g)for(var m=n[g],y=r[g],v=m.length,T=d[g]=new Array(v),S,P=0;P<v;++P)(S=m[P]||y[P])&&(T[P]=S);for(;g<a;++g)d[g]=n[g];return new Qn(d,this._parents)}function nC(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],a=r.length-1,l=r[a],c;--a>=0;)(c=r[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function iC(e){e||(e=rC);function t(v,T){return v&&T?e(v.__data__,T.__data__):!v-!T}for(var n=this._groups,r=n.length,a=new Array(r),l=0;l<r;++l){for(var c=n[l],d=c.length,g=a[l]=new Array(d),m,y=0;y<d;++y)(m=c[y])&&(g[y]=m);g.sort(t)}return new Qn(a,this._parents).order()}function rC(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function sC(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function aC(){return Array.from(this)}function oC(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length;a<l;++a){var c=r[a];if(c)return c}return null}function lC(){let e=0;for(const t of this)++e;return e}function uC(){return!this.node()}function cC(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a=t[n],l=0,c=a.length,d;l<c;++l)(d=a[l])&&e.call(d,d.__data__,l,a);return this}function hC(e){return function(){this.removeAttribute(e)}}function fC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function dC(e,t){return function(){this.setAttribute(e,t)}}function gC(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function mC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function pC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function yC(e,t){var n=Ff(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?fC:hC:typeof t=="function"?n.local?pC:mC:n.local?gC:dC)(n,t))}function zw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _C(e){return function(){this.style.removeProperty(e)}}function vC(e,t,n){return function(){this.style.setProperty(e,t,n)}}function EC(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function TC(e,t,n){return arguments.length>1?this.each((t==null?_C:typeof t=="function"?EC:vC)(e,t,n??"")):Jo(this.node(),e)}function Jo(e,t){return e.style.getPropertyValue(t)||zw(e).getComputedStyle(e,null).getPropertyValue(t)}function wC(e){return function(){delete this[e]}}function SC(e,t){return function(){this[e]=t}}function bC(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function AC(e,t){return arguments.length>1?this.each((t==null?wC:typeof t=="function"?bC:SC)(e,t)):this.node()[e]}function Bw(e){return e.trim().split(/^|\s+/)}function Dp(e){return e.classList||new Hw(e)}function Hw(e){this._node=e,this._names=Bw(e.getAttribute("class")||"")}Hw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function qw(e,t){for(var n=Dp(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function Fw(e,t){for(var n=Dp(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function RC(e){return function(){qw(this,e)}}function IC(e){return function(){Fw(this,e)}}function CC(e,t){return function(){(t.apply(this,arguments)?qw:Fw)(this,e)}}function xC(e,t){var n=Bw(e+"");if(arguments.length<2){for(var r=Dp(this.node()),a=-1,l=n.length;++a<l;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?CC:t?RC:IC)(n,t))}function NC(){this.textContent=""}function DC(e){return function(){this.textContent=e}}function OC(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function MC(e){return arguments.length?this.each(e==null?NC:(typeof e=="function"?OC:DC)(e)):this.node().textContent}function VC(){this.innerHTML=""}function kC(e){return function(){this.innerHTML=e}}function PC(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function LC(e){return arguments.length?this.each(e==null?VC:(typeof e=="function"?PC:kC)(e)):this.node().innerHTML}function UC(){this.nextSibling&&this.parentNode.appendChild(this)}function zC(){return this.each(UC)}function BC(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function HC(){return this.each(BC)}function qC(e){var t=typeof e=="function"?e:Vw(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function FC(){return null}function jC(e,t){var n=typeof e=="function"?e:Vw(e),r=t==null?FC:typeof t=="function"?t:Np(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function GC(){var e=this.parentNode;e&&e.removeChild(this)}function $C(){return this.each(GC)}function YC(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function KC(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function XC(e){return this.select(e?KC:YC)}function QC(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ZC(e){return function(t){e.call(this,t,this.__data__)}}function WC(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function JC(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,a=t.length,l;n<a;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++r]=l;++r?t.length=r:delete this.__on}}}function t2(e,t,n){return function(){var r=this.__on,a,l=ZC(t);if(r){for(var c=0,d=r.length;c<d;++c)if((a=r[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=t;return}}this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,options:n},r?r.push(a):this.__on=[a]}}function e2(e,t,n){var r=WC(e+""),a,l=r.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var g=0,m=d.length,y;g<m;++g)for(a=0,y=d[g];a<l;++a)if((c=r[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=t?t2:JC,a=0;a<l;++a)this.each(d(r[a],t,n));return this}function jw(e,t,n){var r=zw(e),a=r.CustomEvent;typeof a=="function"?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function n2(e,t){return function(){return jw(this,e,t)}}function i2(e,t){return function(){return jw(this,e,t.apply(this,arguments))}}function r2(e,t){return this.each((typeof t=="function"?i2:n2)(e,t))}function*s2(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length,c;a<l;++a)(c=r[a])&&(yield c)}var Gw=[null];function Qn(e,t){this._groups=e,this._parents=t}function sc(){return new Qn([[document.documentElement]],Gw)}function a2(){return this}Qn.prototype=sc.prototype={constructor:Qn,select:OI,selectAll:PI,selectChild:BI,selectChildren:jI,filter:GI,data:ZI,enter:$I,exit:JI,join:tC,merge:eC,selection:a2,order:nC,sort:iC,call:sC,nodes:aC,node:oC,size:lC,empty:uC,each:cC,attr:yC,style:TC,property:AC,classed:xC,text:MC,html:LC,raise:zC,lower:HC,append:qC,insert:jC,remove:$C,clone:XC,datum:QC,on:e2,dispatch:r2,[Symbol.iterator]:s2};function mi(e){return typeof e=="string"?new Qn([[document.querySelector(e)]],[document.documentElement]):new Qn([[e]],Gw)}function o2(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ii(e,t){if(e=o2(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const l2={passive:!1},Bu={capture:!0,passive:!1};function Tm(e){e.stopImmediatePropagation()}function $o(e){e.preventDefault(),e.stopImmediatePropagation()}function $w(e){var t=e.document.documentElement,n=mi(e).on("dragstart.drag",$o,Bu);"onselectstart"in t?n.on("selectstart.drag",$o,Bu):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Yw(e,t){var n=e.document.documentElement,r=mi(e).on("dragstart.drag",null);t&&(r.on("click.drag",$o,Bu),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Vh=e=>()=>e;function Fm(e,{sourceEvent:t,subject:n,target:r,identifier:a,active:l,x:c,y:d,dx:g,dy:m,dispatch:y}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:y}})}Fm.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function u2(e){return!e.ctrlKey&&!e.button}function c2(){return this.parentNode}function h2(e,t){return t??{x:e.x,y:e.y}}function f2(){return navigator.maxTouchPoints||"ontouchstart"in this}function d2(){var e=u2,t=c2,n=h2,r=f2,a={},l=qf("start","drag","end"),c=0,d,g,m,y,v=0;function T(H){H.on("mousedown.drag",S).filter(r).on("touchstart.drag",V).on("touchmove.drag",B,l2).on("touchend.drag touchcancel.drag",q).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(H,et){if(!(y||!e.call(this,H,et))){var nt=F(this,t.call(this,H,et),H,et,"mouse");nt&&(mi(H.view).on("mousemove.drag",P,Bu).on("mouseup.drag",L,Bu),$w(H.view),Tm(H),m=!1,d=H.clientX,g=H.clientY,nt("start",H))}}function P(H){if($o(H),!m){var et=H.clientX-d,nt=H.clientY-g;m=et*et+nt*nt>v}a.mouse("drag",H)}function L(H){mi(H.view).on("mousemove.drag mouseup.drag",null),Yw(H.view,m),$o(H),a.mouse("end",H)}function V(H,et){if(e.call(this,H,et)){var nt=H.changedTouches,D=t.call(this,H,et),R=nt.length,I,k;for(I=0;I<R;++I)(k=F(this,D,H,et,nt[I].identifier,nt[I]))&&(Tm(H),k("start",H,nt[I]))}}function B(H){var et=H.changedTouches,nt=et.length,D,R;for(D=0;D<nt;++D)(R=a[et[D].identifier])&&($o(H),R("drag",H,et[D]))}function q(H){var et=H.changedTouches,nt=et.length,D,R;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),D=0;D<nt;++D)(R=a[et[D].identifier])&&(Tm(H),R("end",H,et[D]))}function F(H,et,nt,D,R,I){var k=l.copy(),N=Ii(I||nt,et),U,A,M;if((M=n.call(H,new Fm("beforestart",{sourceEvent:nt,target:T,identifier:R,active:c,x:N[0],y:N[1],dx:0,dy:0,dispatch:k}),D))!=null)return U=M.x-N[0]||0,A=M.y-N[1]||0,function tt(O,$,at){var Y=N,x;switch(O){case"start":a[R]=tt,x=c++;break;case"end":delete a[R],--c;case"drag":N=Ii(at||$,et),x=c;break}k.call(O,H,new Fm(O,{sourceEvent:$,subject:M,target:T,identifier:R,active:x,x:N[0]+U,y:N[1]+A,dx:N[0]-Y[0],dy:N[1]-Y[1],dispatch:k}),D)}}return T.filter=function(H){return arguments.length?(e=typeof H=="function"?H:Vh(!!H),T):e},T.container=function(H){return arguments.length?(t=typeof H=="function"?H:Vh(H),T):t},T.subject=function(H){return arguments.length?(n=typeof H=="function"?H:Vh(H),T):n},T.touchable=function(H){return arguments.length?(r=typeof H=="function"?H:Vh(!!H),T):r},T.on=function(){var H=l.on.apply(l,arguments);return H===l?T:H},T.clickDistance=function(H){return arguments.length?(v=(H=+H)*H,T):Math.sqrt(v)},T}function Op(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Kw(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ac(){}var Hu=.7,df=1/Hu,Yo="\\s*([+-]?\\d+)\\s*",qu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ir="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",g2=/^#([0-9a-f]{3,8})$/,m2=new RegExp(`^rgb\\(${Yo},${Yo},${Yo}\\)$`),p2=new RegExp(`^rgb\\(${ir},${ir},${ir}\\)$`),y2=new RegExp(`^rgba\\(${Yo},${Yo},${Yo},${qu}\\)$`),_2=new RegExp(`^rgba\\(${ir},${ir},${ir},${qu}\\)$`),v2=new RegExp(`^hsl\\(${qu},${ir},${ir}\\)$`),E2=new RegExp(`^hsla\\(${qu},${ir},${ir},${qu}\\)$`),dE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Op(ac,Fu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:gE,formatHex:gE,formatHex8:T2,formatHsl:w2,formatRgb:mE,toString:mE});function gE(){return this.rgb().formatHex()}function T2(){return this.rgb().formatHex8()}function w2(){return Xw(this).formatHsl()}function mE(){return this.rgb().formatRgb()}function Fu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=g2.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?pE(t):n===3?new kn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?kh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?kh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=m2.exec(e))?new kn(t[1],t[2],t[3],1):(t=p2.exec(e))?new kn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=y2.exec(e))?kh(t[1],t[2],t[3],t[4]):(t=_2.exec(e))?kh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=v2.exec(e))?vE(t[1],t[2]/100,t[3]/100,1):(t=E2.exec(e))?vE(t[1],t[2]/100,t[3]/100,t[4]):dE.hasOwnProperty(e)?pE(dE[e]):e==="transparent"?new kn(NaN,NaN,NaN,0):null}function pE(e){return new kn(e>>16&255,e>>8&255,e&255,1)}function kh(e,t,n,r){return r<=0&&(e=t=n=NaN),new kn(e,t,n,r)}function S2(e){return e instanceof ac||(e=Fu(e)),e?(e=e.rgb(),new kn(e.r,e.g,e.b,e.opacity)):new kn}function jm(e,t,n,r){return arguments.length===1?S2(e):new kn(e,t,n,r??1)}function kn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Op(kn,jm,Kw(ac,{brighter(e){return e=e==null?df:Math.pow(df,e),new kn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hu:Math.pow(Hu,e),new kn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new kn(xa(this.r),xa(this.g),xa(this.b),gf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yE,formatHex:yE,formatHex8:b2,formatRgb:_E,toString:_E}));function yE(){return`#${Ra(this.r)}${Ra(this.g)}${Ra(this.b)}`}function b2(){return`#${Ra(this.r)}${Ra(this.g)}${Ra(this.b)}${Ra((isNaN(this.opacity)?1:this.opacity)*255)}`}function _E(){const e=gf(this.opacity);return`${e===1?"rgb(":"rgba("}${xa(this.r)}, ${xa(this.g)}, ${xa(this.b)}${e===1?")":`, ${e})`}`}function gf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ra(e){return e=xa(e),(e<16?"0":"")+e.toString(16)}function vE(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ci(e,t,n,r)}function Xw(e){if(e instanceof Ci)return new Ci(e.h,e.s,e.l,e.opacity);if(e instanceof ac||(e=Fu(e)),!e)return new Ci;if(e instanceof Ci)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),l=Math.max(t,n,r),c=NaN,d=l-a,g=(l+a)/2;return d?(t===l?c=(n-r)/d+(n<r)*6:n===l?c=(r-t)/d+2:c=(t-n)/d+4,d/=g<.5?l+a:2-l-a,c*=60):d=g>0&&g<1?0:c,new Ci(c,d,g,e.opacity)}function A2(e,t,n,r){return arguments.length===1?Xw(e):new Ci(e,t,n,r??1)}function Ci(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Op(Ci,A2,Kw(ac,{brighter(e){return e=e==null?df:Math.pow(df,e),new Ci(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hu:Math.pow(Hu,e),new Ci(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new kn(wm(e>=240?e-240:e+120,a,r),wm(e,a,r),wm(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Ci(EE(this.h),Ph(this.s),Ph(this.l),gf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=gf(this.opacity);return`${e===1?"hsl(":"hsla("}${EE(this.h)}, ${Ph(this.s)*100}%, ${Ph(this.l)*100}%${e===1?")":`, ${e})`}`}}));function EE(e){return e=(e||0)%360,e<0?e+360:e}function Ph(e){return Math.max(0,Math.min(1,e||0))}function wm(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Qw=e=>()=>e;function R2(e,t){return function(n){return e+n*t}}function I2(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function C2(e){return(e=+e)==1?Zw:function(t,n){return n-t?I2(t,n,e):Qw(isNaN(t)?n:t)}}function Zw(e,t){var n=t-e;return n?R2(e,n):Qw(isNaN(e)?t:e)}const TE=function e(t){var n=C2(t);function r(a,l){var c=n((a=jm(a)).r,(l=jm(l)).r),d=n(a.g,l.g),g=n(a.b,l.b),m=Zw(a.opacity,l.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=g(y),a.opacity=m(y),a+""}}return r.gamma=e,r}(1);function Ss(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Gm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sm=new RegExp(Gm.source,"g");function x2(e){return function(){return e}}function N2(e){return function(t){return e(t)+""}}function D2(e,t){var n=Gm.lastIndex=Sm.lastIndex=0,r,a,l,c=-1,d=[],g=[];for(e=e+"",t=t+"";(r=Gm.exec(e))&&(a=Sm.exec(t));)(l=a.index)>n&&(l=t.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(r=r[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,g.push({i:c,x:Ss(r,a)})),n=Sm.lastIndex;return n<t.length&&(l=t.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?g[0]?N2(g[0].x):x2(t):(t=g.length,function(m){for(var y=0,v;y<t;++y)d[(v=g[y]).i]=v.x(m);return d.join("")})}var wE=180/Math.PI,$m={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ww(e,t,n,r,a,l){var c,d,g;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(g=e*n+t*r)&&(n-=e*g,r-=t*g),(d=Math.sqrt(n*n+r*r))&&(n/=d,r/=d,g/=d),e*r<t*n&&(e=-e,t=-t,g=-g,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(t,e)*wE,skewX:Math.atan(g)*wE,scaleX:c,scaleY:d}}var Lh;function O2(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?$m:Ww(t.a,t.b,t.c,t.d,t.e,t.f)}function M2(e){return e==null||(Lh||(Lh=document.createElementNS("http://www.w3.org/2000/svg","g")),Lh.setAttribute("transform",e),!(e=Lh.transform.baseVal.consolidate()))?$m:(e=e.matrix,Ww(e.a,e.b,e.c,e.d,e.e,e.f))}function Jw(e,t,n,r){function a(m){return m.length?m.pop()+" ":""}function l(m,y,v,T,S,P){if(m!==v||y!==T){var L=S.push("translate(",null,t,null,n);P.push({i:L-4,x:Ss(m,v)},{i:L-2,x:Ss(y,T)})}else(v||T)&&S.push("translate("+v+t+T+n)}function c(m,y,v,T){m!==y?(m-y>180?y+=360:y-m>180&&(m+=360),T.push({i:v.push(a(v)+"rotate(",null,r)-2,x:Ss(m,y)})):y&&v.push(a(v)+"rotate("+y+r)}function d(m,y,v,T){m!==y?T.push({i:v.push(a(v)+"skewX(",null,r)-2,x:Ss(m,y)}):y&&v.push(a(v)+"skewX("+y+r)}function g(m,y,v,T,S,P){if(m!==v||y!==T){var L=S.push(a(S)+"scale(",null,",",null,")");P.push({i:L-4,x:Ss(m,v)},{i:L-2,x:Ss(y,T)})}else(v!==1||T!==1)&&S.push(a(S)+"scale("+v+","+T+")")}return function(m,y){var v=[],T=[];return m=e(m),y=e(y),l(m.translateX,m.translateY,y.translateX,y.translateY,v,T),c(m.rotate,y.rotate,v,T),d(m.skewX,y.skewX,v,T),g(m.scaleX,m.scaleY,y.scaleX,y.scaleY,v,T),m=y=null,function(S){for(var P=-1,L=T.length,V;++P<L;)v[(V=T[P]).i]=V.x(S);return v.join("")}}}var V2=Jw(O2,"px, ","px)","deg)"),k2=Jw(M2,", ",")",")"),P2=1e-12;function SE(e){return((e=Math.exp(e))+1/e)/2}function L2(e){return((e=Math.exp(e))-1/e)/2}function U2(e){return((e=Math.exp(2*e))-1)/(e+1)}const z2=function e(t,n,r){function a(l,c){var d=l[0],g=l[1],m=l[2],y=c[0],v=c[1],T=c[2],S=y-d,P=v-g,L=S*S+P*P,V,B;if(L<P2)B=Math.log(T/m)/t,V=function(D){return[d+D*S,g+D*P,m*Math.exp(t*D*B)]};else{var q=Math.sqrt(L),F=(T*T-m*m+r*L)/(2*m*n*q),H=(T*T-m*m-r*L)/(2*T*n*q),et=Math.log(Math.sqrt(F*F+1)-F),nt=Math.log(Math.sqrt(H*H+1)-H);B=(nt-et)/t,V=function(D){var R=D*B,I=SE(et),k=m/(n*q)*(I*U2(t*R+et)-L2(et));return[d+k*S,g+k*P,m*I/SE(t*R+et)]}}return V.duration=B*1e3*t/Math.SQRT2,V}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,g=d*d;return e(c,d,g)},a}(Math.SQRT2,2,4);var tl=0,Ru=0,Tu=0,tS=1e3,mf,Iu,pf=0,Da=0,jf=0,ju=typeof performance=="object"&&performance.now?performance:Date,eS=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Mp(){return Da||(eS(B2),Da=ju.now()+jf)}function B2(){Da=0}function yf(){this._call=this._time=this._next=null}yf.prototype=nS.prototype={constructor:yf,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Mp():+n)+(t==null?0:+t),!this._next&&Iu!==this&&(Iu?Iu._next=this:mf=this,Iu=this),this._call=e,this._time=n,Ym()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ym())}};function nS(e,t,n){var r=new yf;return r.restart(e,t,n),r}function H2(){Mp(),++tl;for(var e=mf,t;e;)(t=Da-e._time)>=0&&e._call.call(void 0,t),e=e._next;--tl}function bE(){Da=(pf=ju.now())+jf,tl=Ru=0;try{H2()}finally{tl=0,F2(),Da=0}}function q2(){var e=ju.now(),t=e-pf;t>tS&&(jf-=t,pf=e)}function F2(){for(var e,t=mf,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:mf=n);Iu=e,Ym(r)}function Ym(e){if(!tl){Ru&&(Ru=clearTimeout(Ru));var t=e-Da;t>24?(e<1/0&&(Ru=setTimeout(bE,e-ju.now()-jf)),Tu&&(Tu=clearInterval(Tu))):(Tu||(pf=ju.now(),Tu=setInterval(q2,tS)),tl=1,eS(bE))}}function AE(e,t,n){var r=new yf;return t=t==null?0:+t,r.restart(a=>{r.stop(),e(a+t)},t,n),r}var j2=qf("start","end","cancel","interrupt"),G2=[],iS=0,RE=1,Km=2,Wh=3,IE=4,Xm=5,Jh=6;function Gf(e,t,n,r,a,l){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;$2(e,n,{name:t,index:r,group:a,on:j2,tween:G2,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:iS})}function Vp(e,t){var n=Vi(e,t);if(n.state>iS)throw new Error("too late; already scheduled");return n}function cr(e,t){var n=Vi(e,t);if(n.state>Wh)throw new Error("too late; already running");return n}function Vi(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function $2(e,t,n){var r=e.__transition,a;r[t]=n,n.timer=nS(l,0,n.time);function l(m){n.state=RE,n.timer.restart(c,n.delay,n.time),n.delay<=m&&c(m-n.delay)}function c(m){var y,v,T,S;if(n.state!==RE)return g();for(y in r)if(S=r[y],S.name===n.name){if(S.state===Wh)return AE(c);S.state===IE?(S.state=Jh,S.timer.stop(),S.on.call("interrupt",e,e.__data__,S.index,S.group),delete r[y]):+y<t&&(S.state=Jh,S.timer.stop(),S.on.call("cancel",e,e.__data__,S.index,S.group),delete r[y])}if(AE(function(){n.state===Wh&&(n.state=IE,n.timer.restart(d,n.delay,n.time),d(m))}),n.state=Km,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Km){for(n.state=Wh,a=new Array(T=n.tween.length),y=0,v=-1;y<T;++y)(S=n.tween[y].value.call(e,e.__data__,n.index,n.group))&&(a[++v]=S);a.length=v+1}}function d(m){for(var y=m<n.duration?n.ease.call(null,m/n.duration):(n.timer.restart(g),n.state=Xm,1),v=-1,T=a.length;++v<T;)a[v].call(e,y);n.state===Xm&&(n.on.call("end",e,e.__data__,n.index,n.group),g())}function g(){n.state=Jh,n.timer.stop(),delete r[t];for(var m in r)return;delete e.__transition}}function tf(e,t){var n=e.__transition,r,a,l=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((r=n[c]).name!==t){l=!1;continue}a=r.state>Km&&r.state<Xm,r.state=Jh,r.timer.stop(),r.on.call(a?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[c]}l&&delete e.__transition}}function Y2(e){return this.each(function(){tf(this,e)})}function K2(e,t){var n,r;return function(){var a=cr(this,e),l=a.tween;if(l!==n){r=n=l;for(var c=0,d=r.length;c<d;++c)if(r[c].name===t){r=r.slice(),r.splice(c,1);break}}a.tween=r}}function X2(e,t,n){var r,a;if(typeof n!="function")throw new Error;return function(){var l=cr(this,e),c=l.tween;if(c!==r){a=(r=c).slice();for(var d={name:t,value:n},g=0,m=a.length;g<m;++g)if(a[g].name===t){a[g]=d;break}g===m&&a.push(d)}l.tween=a}}function Q2(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Vi(this.node(),n).tween,a=0,l=r.length,c;a<l;++a)if((c=r[a]).name===e)return c.value;return null}return this.each((t==null?K2:X2)(n,e,t))}function kp(e,t,n){var r=e._id;return e.each(function(){var a=cr(this,r);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Vi(a,r).value[t]}}function rS(e,t){var n;return(typeof t=="number"?Ss:t instanceof Fu?TE:(n=Fu(t))?(t=n,TE):D2)(e,t)}function Z2(e){return function(){this.removeAttribute(e)}}function W2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function J2(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttribute(e);return c===a?null:c===r?l:l=t(r=c,n)}}function tx(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===r?l:l=t(r=c,n)}}function ex(e,t,n){var r,a,l;return function(){var c,d=n(this),g;return d==null?void this.removeAttribute(e):(c=this.getAttribute(e),g=d+"",c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d)))}}function nx(e,t,n){var r,a,l;return function(){var c,d=n(this),g;return d==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),g=d+"",c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d)))}}function ix(e,t){var n=Ff(e),r=n==="transform"?k2:rS;return this.attrTween(e,typeof t=="function"?(n.local?nx:ex)(n,r,kp(this,"attr."+e,t)):t==null?(n.local?W2:Z2)(n):(n.local?tx:J2)(n,r,t))}function rx(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function sx(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ax(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&sx(e,l)),n}return a._value=t,a}function ox(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&rx(e,l)),n}return a._value=t,a}function lx(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ff(e);return this.tween(n,(r.local?ax:ox)(r,t))}function ux(e,t){return function(){Vp(this,e).delay=+t.apply(this,arguments)}}function cx(e,t){return t=+t,function(){Vp(this,e).delay=t}}function hx(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ux:cx)(t,e)):Vi(this.node(),t).delay}function fx(e,t){return function(){cr(this,e).duration=+t.apply(this,arguments)}}function dx(e,t){return t=+t,function(){cr(this,e).duration=t}}function gx(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fx:dx)(t,e)):Vi(this.node(),t).duration}function mx(e,t){if(typeof t!="function")throw new Error;return function(){cr(this,e).ease=t}}function px(e){var t=this._id;return arguments.length?this.each(mx(t,e)):Vi(this.node(),t).ease}function yx(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;cr(this,e).ease=n}}function _x(e){if(typeof e!="function")throw new Error;return this.each(yx(this._id,e))}function vx(e){typeof e!="function"&&(e=Pw(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=[],g,m=0;m<c;++m)(g=l[m])&&e.call(g,g.__data__,m,l)&&d.push(g);return new Hr(r,this._parents,this._name,this._id)}function Ex(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,l=Math.min(r,a),c=new Array(r),d=0;d<l;++d)for(var g=t[d],m=n[d],y=g.length,v=c[d]=new Array(y),T,S=0;S<y;++S)(T=g[S]||m[S])&&(v[S]=T);for(;d<r;++d)c[d]=t[d];return new Hr(c,this._parents,this._name,this._id)}function Tx(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function wx(e,t,n){var r,a,l=Tx(t)?Vp:cr;return function(){var c=l(this,e),d=c.on;d!==r&&(a=(r=d).copy()).on(t,n),c.on=a}}function Sx(e,t){var n=this._id;return arguments.length<2?Vi(this.node(),n).on.on(e):this.each(wx(n,e,t))}function bx(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ax(){return this.on("end.remove",bx(this._id))}function Rx(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Np(e));for(var r=this._groups,a=r.length,l=new Array(a),c=0;c<a;++c)for(var d=r[c],g=d.length,m=l[c]=new Array(g),y,v,T=0;T<g;++T)(y=d[T])&&(v=e.call(y,y.__data__,T,d))&&("__data__"in y&&(v.__data__=y.__data__),m[T]=v,Gf(m[T],t,n,T,m,Vi(y,n)));return new Hr(l,this._parents,t,n)}function Ix(e){var t=this._name,n=this._id;typeof e!="function"&&(e=kw(e));for(var r=this._groups,a=r.length,l=[],c=[],d=0;d<a;++d)for(var g=r[d],m=g.length,y,v=0;v<m;++v)if(y=g[v]){for(var T=e.call(y,y.__data__,v,g),S,P=Vi(y,n),L=0,V=T.length;L<V;++L)(S=T[L])&&Gf(S,t,n,L,T,P);l.push(T),c.push(y)}return new Hr(l,c,t,n)}var Cx=sc.prototype.constructor;function xx(){return new Cx(this._groups,this._parents)}function Nx(e,t){var n,r,a;return function(){var l=Jo(this,e),c=(this.style.removeProperty(e),Jo(this,e));return l===c?null:l===n&&c===r?a:a=t(n=l,r=c)}}function sS(e){return function(){this.style.removeProperty(e)}}function Dx(e,t,n){var r,a=n+"",l;return function(){var c=Jo(this,e);return c===a?null:c===r?l:l=t(r=c,n)}}function Ox(e,t,n){var r,a,l;return function(){var c=Jo(this,e),d=n(this),g=d+"";return d==null&&(g=d=(this.style.removeProperty(e),Jo(this,e))),c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d))}}function Mx(e,t){var n,r,a,l="style."+t,c="end."+l,d;return function(){var g=cr(this,e),m=g.on,y=g.value[l]==null?d||(d=sS(t)):void 0;(m!==n||a!==y)&&(r=(n=m).copy()).on(c,a=y),g.on=r}}function Vx(e,t,n){var r=(e+="")=="transform"?V2:rS;return t==null?this.styleTween(e,Nx(e,r)).on("end.style."+e,sS(e)):typeof t=="function"?this.styleTween(e,Ox(e,r,kp(this,"style."+e,t))).each(Mx(this._id,e)):this.styleTween(e,Dx(e,r,t),n).on("end.style."+e,null)}function kx(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Px(e,t,n){var r,a;function l(){var c=t.apply(this,arguments);return c!==a&&(r=(a=c)&&kx(e,c,n)),r}return l._value=t,l}function Lx(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Px(e,t,n??""))}function Ux(e){return function(){this.textContent=e}}function zx(e){return function(){var t=e(this);this.textContent=t??""}}function Bx(e){return this.tween("text",typeof e=="function"?zx(kp(this,"text",e)):Ux(e==null?"":e+""))}function Hx(e){return function(t){this.textContent=e.call(this,t)}}function qx(e){var t,n;function r(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&Hx(a)),t}return r._value=e,r}function Fx(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,qx(e))}function jx(){for(var e=this._name,t=this._id,n=aS(),r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,g,m=0;m<d;++m)if(g=c[m]){var y=Vi(g,t);Gf(g,e,n,m,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new Hr(r,this._parents,e,n)}function Gx(){var e,t,n=this,r=n._id,a=n.size();return new Promise(function(l,c){var d={value:c},g={value:function(){--a===0&&l()}};n.each(function(){var m=cr(this,r),y=m.on;y!==e&&(t=(e=y).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(g)),m.on=t}),a===0&&l()})}var $x=0;function Hr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function aS(){return++$x}var kr=sc.prototype;Hr.prototype={constructor:Hr,select:Rx,selectAll:Ix,selectChild:kr.selectChild,selectChildren:kr.selectChildren,filter:vx,merge:Ex,selection:xx,transition:jx,call:kr.call,nodes:kr.nodes,node:kr.node,size:kr.size,empty:kr.empty,each:kr.each,on:Sx,attr:ix,attrTween:lx,style:Vx,styleTween:Lx,text:Bx,textTween:Fx,remove:Ax,tween:Q2,delay:hx,duration:gx,ease:px,easeVarying:_x,end:Gx,[Symbol.iterator]:kr[Symbol.iterator]};function Yx(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Kx={time:null,delay:0,duration:250,ease:Yx};function Xx(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Qx(e){var t,n;e instanceof Hr?(t=e._id,e=e._name):(t=aS(),(n=Kx).time=Mp(),e=e==null?null:e+"");for(var r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,g,m=0;m<d;++m)(g=c[m])&&Gf(g,e,t,m,c,n||Xx(g,t));return new Hr(r,this._parents,e,t)}sc.prototype.interrupt=Y2;sc.prototype.transition=Qx;const Uh=e=>()=>e;function Zx(e,{sourceEvent:t,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function Pr(e,t,n){this.k=e,this.x=t,this.y=n}Pr.prototype={constructor:Pr,scale:function(e){return e===1?this:new Pr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Pr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var zr=new Pr(1,0,0);Pr.prototype;function bm(e){e.stopImmediatePropagation()}function wu(e){e.preventDefault(),e.stopImmediatePropagation()}function Wx(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Jx(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function CE(){return this.__zoom||zr}function tN(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function eN(){return navigator.maxTouchPoints||"ontouchstart"in this}function nN(e,t,n){var r=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],l=e.invertY(t[0][1])-n[0][1],c=e.invertY(t[1][1])-n[1][1];return e.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function oS(){var e=Wx,t=Jx,n=nN,r=tN,a=eN,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,g=z2,m=qf("start","zoom","end"),y,v,T,S=500,P=150,L=0,V=10;function B(M){M.property("__zoom",CE).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",k).filter(a).on("touchstart.zoom",N).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}B.transform=function(M,tt,O,$){var at=M.selection?M.selection():M;at.property("__zoom",CE),M!==at?et(M,tt,O,$):at.interrupt().each(function(){nt(this,arguments).event($).start().zoom(null,typeof tt=="function"?tt.apply(this,arguments):tt).end()})},B.scaleBy=function(M,tt,O,$){B.scaleTo(M,function(){var at=this.__zoom.k,Y=typeof tt=="function"?tt.apply(this,arguments):tt;return at*Y},O,$)},B.scaleTo=function(M,tt,O,$){B.transform(M,function(){var at=t.apply(this,arguments),Y=this.__zoom,x=O==null?H(at):typeof O=="function"?O.apply(this,arguments):O,G=Y.invert(x),W=typeof tt=="function"?tt.apply(this,arguments):tt;return n(F(q(Y,W),x,G),at,c)},O,$)},B.translateBy=function(M,tt,O,$){B.transform(M,function(){return n(this.__zoom.translate(typeof tt=="function"?tt.apply(this,arguments):tt,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),c)},null,$)},B.translateTo=function(M,tt,O,$,at){B.transform(M,function(){var Y=t.apply(this,arguments),x=this.__zoom,G=$==null?H(Y):typeof $=="function"?$.apply(this,arguments):$;return n(zr.translate(G[0],G[1]).scale(x.k).translate(typeof tt=="function"?-tt.apply(this,arguments):-tt,typeof O=="function"?-O.apply(this,arguments):-O),Y,c)},$,at)};function q(M,tt){return tt=Math.max(l[0],Math.min(l[1],tt)),tt===M.k?M:new Pr(tt,M.x,M.y)}function F(M,tt,O){var $=tt[0]-O[0]*M.k,at=tt[1]-O[1]*M.k;return $===M.x&&at===M.y?M:new Pr(M.k,$,at)}function H(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function et(M,tt,O,$){M.on("start.zoom",function(){nt(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){nt(this,arguments).event($).end()}).tween("zoom",function(){var at=this,Y=arguments,x=nt(at,Y).event($),G=t.apply(at,Y),W=O==null?H(G):typeof O=="function"?O.apply(at,Y):O,rt=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),ct=at.__zoom,mt=typeof tt=="function"?tt.apply(at,Y):tt,pt=g(ct.invert(W).concat(rt/ct.k),mt.invert(W).concat(rt/mt.k));return function(It){if(It===1)It=mt;else{var At=pt(It),kt=rt/At[2];It=new Pr(kt,W[0]-At[0]*kt,W[1]-At[1]*kt)}x.zoom(null,It)}})}function nt(M,tt,O){return!O&&M.__zooming||new D(M,tt)}function D(M,tt){this.that=M,this.args=tt,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,tt),this.taps=0}D.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,tt){return this.mouse&&M!=="mouse"&&(this.mouse[1]=tt.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=tt.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=tt.invert(this.touch1[0])),this.that.__zoom=tt,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var tt=mi(this.that).datum();m.call(M,this.that,new Zx(M,{sourceEvent:this.sourceEvent,target:B,transform:this.that.__zoom,dispatch:m}),tt)}};function R(M,...tt){if(!e.apply(this,arguments))return;var O=nt(this,tt).event(M),$=this.__zoom,at=Math.max(l[0],Math.min(l[1],$.k*Math.pow(2,r.apply(this,arguments)))),Y=Ii(M);if(O.wheel)(O.mouse[0][0]!==Y[0]||O.mouse[0][1]!==Y[1])&&(O.mouse[1]=$.invert(O.mouse[0]=Y)),clearTimeout(O.wheel);else{if($.k===at)return;O.mouse=[Y,$.invert(Y)],tf(this),O.start()}wu(M),O.wheel=setTimeout(x,P),O.zoom("mouse",n(F(q($,at),O.mouse[0],O.mouse[1]),O.extent,c));function x(){O.wheel=null,O.end()}}function I(M,...tt){if(T||!e.apply(this,arguments))return;var O=M.currentTarget,$=nt(this,tt,!0).event(M),at=mi(M.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",rt,!0),Y=Ii(M,O),x=M.clientX,G=M.clientY;$w(M.view),bm(M),$.mouse=[Y,this.__zoom.invert(Y)],tf(this),$.start();function W(ct){if(wu(ct),!$.moved){var mt=ct.clientX-x,pt=ct.clientY-G;$.moved=mt*mt+pt*pt>L}$.event(ct).zoom("mouse",n(F($.that.__zoom,$.mouse[0]=Ii(ct,O),$.mouse[1]),$.extent,c))}function rt(ct){at.on("mousemove.zoom mouseup.zoom",null),Yw(ct.view,$.moved),wu(ct),$.event(ct).end()}}function k(M,...tt){if(e.apply(this,arguments)){var O=this.__zoom,$=Ii(M.changedTouches?M.changedTouches[0]:M,this),at=O.invert($),Y=O.k*(M.shiftKey?.5:2),x=n(F(q(O,Y),$,at),t.apply(this,tt),c);wu(M),d>0?mi(this).transition().duration(d).call(et,x,$,M):mi(this).call(B.transform,x,$,M)}}function N(M,...tt){if(e.apply(this,arguments)){var O=M.touches,$=O.length,at=nt(this,tt,M.changedTouches.length===$).event(M),Y,x,G,W;for(bm(M),x=0;x<$;++x)G=O[x],W=Ii(G,this),W=[W,this.__zoom.invert(W),G.identifier],at.touch0?!at.touch1&&at.touch0[2]!==W[2]&&(at.touch1=W,at.taps=0):(at.touch0=W,Y=!0,at.taps=1+!!y);y&&(y=clearTimeout(y)),Y&&(at.taps<2&&(v=W[0],y=setTimeout(function(){y=null},S)),tf(this),at.start())}}function U(M,...tt){if(this.__zooming){var O=nt(this,tt).event(M),$=M.changedTouches,at=$.length,Y,x,G,W;for(wu(M),Y=0;Y<at;++Y)x=$[Y],G=Ii(x,this),O.touch0&&O.touch0[2]===x.identifier?O.touch0[0]=G:O.touch1&&O.touch1[2]===x.identifier&&(O.touch1[0]=G);if(x=O.that.__zoom,O.touch1){var rt=O.touch0[0],ct=O.touch0[1],mt=O.touch1[0],pt=O.touch1[1],It=(It=mt[0]-rt[0])*It+(It=mt[1]-rt[1])*It,At=(At=pt[0]-ct[0])*At+(At=pt[1]-ct[1])*At;x=q(x,Math.sqrt(It/At)),G=[(rt[0]+mt[0])/2,(rt[1]+mt[1])/2],W=[(ct[0]+pt[0])/2,(ct[1]+pt[1])/2]}else if(O.touch0)G=O.touch0[0],W=O.touch0[1];else return;O.zoom("touch",n(F(x,G,W),O.extent,c))}}function A(M,...tt){if(this.__zooming){var O=nt(this,tt).event(M),$=M.changedTouches,at=$.length,Y,x;for(bm(M),T&&clearTimeout(T),T=setTimeout(function(){T=null},S),Y=0;Y<at;++Y)x=$[Y],O.touch0&&O.touch0[2]===x.identifier?delete O.touch0:O.touch1&&O.touch1[2]===x.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(x=Ii(x,this),Math.hypot(v[0]-x[0],v[1]-x[1])<V)){var G=mi(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return B.wheelDelta=function(M){return arguments.length?(r=typeof M=="function"?M:Uh(+M),B):r},B.filter=function(M){return arguments.length?(e=typeof M=="function"?M:Uh(!!M),B):e},B.touchable=function(M){return arguments.length?(a=typeof M=="function"?M:Uh(!!M),B):a},B.extent=function(M){return arguments.length?(t=typeof M=="function"?M:Uh([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),B):t},B.scaleExtent=function(M){return arguments.length?(l[0]=+M[0],l[1]=+M[1],B):[l[0],l[1]]},B.translateExtent=function(M){return arguments.length?(c[0][0]=+M[0][0],c[1][0]=+M[1][0],c[0][1]=+M[0][1],c[1][1]=+M[1][1],B):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},B.constrain=function(M){return arguments.length?(n=M,B):n},B.duration=function(M){return arguments.length?(d=+M,B):d},B.interpolate=function(M){return arguments.length?(g=M,B):g},B.on=function(){var M=m.on.apply(m,arguments);return M===m?B:M},B.clickDistance=function(M){return arguments.length?(L=(M=+M)*M,B):Math.sqrt(L)},B.tapDistance=function(M){return arguments.length?(V=+M,B):V},B}Ow();const $f=X.createContext(null),iN=$f.Provider,qr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},lS=qr.error001();function me(e,t){const n=X.useContext($f);if(n===null)throw new Error(lS);return Mw(n,e,t)}const Ye=()=>{const e=X.useContext($f);if(e===null)throw new Error(lS);return X.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},rN=e=>e.userSelectionActive?"none":"all";function Pp({position:e,children:t,className:n,style:r,...a}){const l=me(rN),c=`${e}`.split("-");return lt.createElement("div",{className:gn(["react-flow__panel",n,...c]),style:{...r,pointerEvents:l},...a},t)}function sN({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:lt.createElement(Pp,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},lt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const aN=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:a=!0,labelBgStyle:l={},labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:g,className:m,...y})=>{const v=X.useRef(null),[T,S]=X.useState({x:0,y:0,width:0,height:0}),P=gn(["react-flow__edge-textwrapper",m]);return X.useEffect(()=>{if(v.current){const L=v.current.getBBox();S({x:L.x,y:L.y,width:L.width,height:L.height})}},[n]),typeof n>"u"||!n?null:lt.createElement("g",{transform:`translate(${e-T.width/2} ${t-T.height/2})`,className:P,visibility:T.width?"visible":"hidden",...y},a&&lt.createElement("rect",{width:T.width+2*c[0],x:-c[0],y:-c[1],height:T.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),lt.createElement("text",{className:"react-flow__edge-text",y:T.height/2,dy:"0.3em",ref:v,style:r},n),g)};var oN=X.memo(aN);const Lp=e=>({width:e.offsetWidth,height:e.offsetHeight}),el=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Up=(e={x:0,y:0},t)=>({x:el(e.x,t[0][0],t[1][0]),y:el(e.y,t[0][1],t[1][1])}),xE=(e,t,n)=>e<t?el(Math.abs(e-t),1,50)/50:e>n?-el(Math.abs(e-n),1,50)/50:0,uS=(e,t)=>{const n=xE(e.x,35,t.width-35)*20,r=xE(e.y,35,t.height-35)*20;return[n,r]},cS=e=>e.getRootNode?.()||window?.document,hS=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Gu=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),fS=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),NE=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),lN=(e,t)=>fS(hS(Gu(e),Gu(t))),Qm=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},uN=e=>_i(e.width)&&_i(e.height)&&_i(e.x)&&_i(e.y),_i=e=>!isNaN(e)&&isFinite(e),Ie=Symbol.for("internals"),dS=["Enter"," ","Escape"],cN=(e,t)=>{},hN=e=>"nativeEvent"in e;function Zm(e){const n=(hN(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const gS=e=>"clientX"in e,Ds=(e,t)=>{const n=gS(e),r=n?e.clientX:e.touches?.[0].clientX,a=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:a-(t?.top??0)}},_f=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,oc=({id:e,path:t,labelX:n,labelY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:T,interactionWidth:S=20})=>lt.createElement(lt.Fragment,null,lt.createElement("path",{id:e,style:y,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:T}),S&&lt.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:S,className:"react-flow__edge-interaction"}),a&&_i(n)&&_i(r)?lt.createElement(oN,{x:n,y:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m}):null);oc.displayName="BaseEdge";function Su(e,t,n){return n===void 0?n:r=>{const a=t().edges.find(l=>l.id===e);a&&n(r,{...a})}}function mS({sourceX:e,sourceY:t,targetX:n,targetY:r}){const a=Math.abs(n-e)/2,l=n<e?n+a:n-a,c=Math.abs(r-t)/2,d=r<t?r+c:r-c;return[l,d,a,c]}function pS({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const g=e*.125+a*.375+c*.375+n*.125,m=t*.125+l*.375+d*.375+r*.125,y=Math.abs(g-e),v=Math.abs(m-t);return[g,m,y,v]}var Us;(function(e){e.Strict="strict",e.Loose="loose"})(Us||(Us={}));var Ia;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ia||(Ia={}));var $u;(function(e){e.Partial="partial",e.Full="full"})($u||($u={}));var As;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(As||(As={}));var vf;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(vf||(vf={}));var bt;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(bt||(bt={}));function DE({pos:e,x1:t,y1:n,x2:r,y2:a}){return e===bt.Left||e===bt.Right?[.5*(t+r),n]:[t,.5*(n+a)]}function yS({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:a,targetPosition:l=bt.Top}){const[c,d]=DE({pos:n,x1:e,y1:t,x2:r,y2:a}),[g,m]=DE({pos:l,x1:r,y1:a,x2:e,y2:t}),[y,v,T,S]=pS({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:g,targetControlY:m});return[`M${e},${t} C${c},${d} ${g},${m} ${r},${a}`,y,v,T,S]}const zp=X.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=bt.Bottom,targetPosition:l=bt.Top,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:T,markerEnd:S,markerStart:P,interactionWidth:L})=>{const[V,B,q]=yS({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:l});return lt.createElement(oc,{path:V,labelX:B,labelY:q,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:T,markerEnd:S,markerStart:P,interactionWidth:L})});zp.displayName="SimpleBezierEdge";const OE={[bt.Left]:{x:-1,y:0},[bt.Right]:{x:1,y:0},[bt.Top]:{x:0,y:-1},[bt.Bottom]:{x:0,y:1}},fN=({source:e,sourcePosition:t=bt.Bottom,target:n})=>t===bt.Left||t===bt.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},ME=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function dN({source:e,sourcePosition:t=bt.Bottom,target:n,targetPosition:r=bt.Top,center:a,offset:l}){const c=OE[t],d=OE[r],g={x:e.x+c.x*l,y:e.y+c.y*l},m={x:n.x+d.x*l,y:n.y+d.y*l},y=fN({source:g,sourcePosition:t,target:m}),v=y.x!==0?"x":"y",T=y[v];let S=[],P,L;const V={x:0,y:0},B={x:0,y:0},[q,F,H,et]=mS({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[v]*d[v]===-1){P=a.x??q,L=a.y??F;const D=[{x:P,y:g.y},{x:P,y:m.y}],R=[{x:g.x,y:L},{x:m.x,y:L}];c[v]===T?S=v==="x"?D:R:S=v==="x"?R:D}else{const D=[{x:g.x,y:m.y}],R=[{x:m.x,y:g.y}];if(v==="x"?S=c.x===T?R:D:S=c.y===T?D:R,t===r){const A=Math.abs(e[v]-n[v]);if(A<=l){const M=Math.min(l-1,l-A);c[v]===T?V[v]=(g[v]>e[v]?-1:1)*M:B[v]=(m[v]>n[v]?-1:1)*M}}if(t!==r){const A=v==="x"?"y":"x",M=c[v]===d[A],tt=g[A]>m[A],O=g[A]<m[A];(c[v]===1&&(!M&&tt||M&&O)||c[v]!==1&&(!M&&O||M&&tt))&&(S=v==="x"?D:R)}const I={x:g.x+V.x,y:g.y+V.y},k={x:m.x+B.x,y:m.y+B.y},N=Math.max(Math.abs(I.x-S[0].x),Math.abs(k.x-S[0].x)),U=Math.max(Math.abs(I.y-S[0].y),Math.abs(k.y-S[0].y));N>=U?(P=(I.x+k.x)/2,L=S[0].y):(P=S[0].x,L=(I.y+k.y)/2)}return[[e,{x:g.x+V.x,y:g.y+V.y},...S,{x:m.x+B.x,y:m.y+B.y},n],P,L,H,et]}function gN(e,t,n,r){const a=Math.min(ME(e,t)/2,ME(t,n)/2,r),{x:l,y:c}=t;if(e.x===l&&l===n.x||e.y===c&&c===n.y)return`L${l} ${c}`;if(e.y===c){const m=e.x<n.x?-1:1,y=e.y<n.y?1:-1;return`L ${l+a*m},${c}Q ${l},${c} ${l},${c+a*y}`}const d=e.x<n.x?1:-1,g=e.y<n.y?-1:1;return`L ${l},${c+a*g}Q ${l},${c} ${l+a*d},${c}`}function Wm({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:a,targetPosition:l=bt.Top,borderRadius:c=5,centerX:d,centerY:g,offset:m=20}){const[y,v,T,S,P]=dN({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:a},targetPosition:l,center:{x:d,y:g},offset:m});return[y.reduce((V,B,q)=>{let F="";return q>0&&q<y.length-1?F=gN(y[q-1],B,y[q+1],c):F=`${q===0?"M":"L"}${B.x} ${B.y}`,V+=F,V},""),v,T,S,P]}const Yf=X.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,sourcePosition:v=bt.Bottom,targetPosition:T=bt.Top,markerEnd:S,markerStart:P,pathOptions:L,interactionWidth:V})=>{const[B,q,F]=Wm({sourceX:e,sourceY:t,sourcePosition:v,targetX:n,targetY:r,targetPosition:T,borderRadius:L?.borderRadius,offset:L?.offset});return lt.createElement(oc,{path:B,labelX:q,labelY:F,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:S,markerStart:P,interactionWidth:V})});Yf.displayName="SmoothStepEdge";const Bp=X.memo(e=>lt.createElement(Yf,{...e,pathOptions:X.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));Bp.displayName="StepEdge";function mN({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[a,l,c,d]=mS({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,a,l,c,d]}const Hp=X.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:T,interactionWidth:S})=>{const[P,L,V]=mN({sourceX:e,sourceY:t,targetX:n,targetY:r});return lt.createElement(oc,{path:P,labelX:L,labelY:V,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:T,interactionWidth:S})});Hp.displayName="StraightEdge";function zh(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function VE({pos:e,x1:t,y1:n,x2:r,y2:a,c:l}){switch(e){case bt.Left:return[t-zh(t-r,l),n];case bt.Right:return[t+zh(r-t,l),n];case bt.Top:return[t,n-zh(n-a,l)];case bt.Bottom:return[t,n+zh(a-n,l)]}}function _S({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:a,targetPosition:l=bt.Top,curvature:c=.25}){const[d,g]=VE({pos:n,x1:e,y1:t,x2:r,y2:a,c}),[m,y]=VE({pos:l,x1:r,y1:a,x2:e,y2:t,c}),[v,T,S,P]=pS({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:d,sourceControlY:g,targetControlX:m,targetControlY:y});return[`M${e},${t} C${d},${g} ${m},${y} ${r},${a}`,v,T,S,P]}const Ef=X.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=bt.Bottom,targetPosition:l=bt.Top,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:T,markerEnd:S,markerStart:P,pathOptions:L,interactionWidth:V})=>{const[B,q,F]=_S({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:l,curvature:L?.curvature});return lt.createElement(oc,{path:B,labelX:q,labelY:F,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:T,markerEnd:S,markerStart:P,interactionWidth:V})});Ef.displayName="BezierEdge";const qp=X.createContext(null),pN=qp.Provider;qp.Consumer;const yN=()=>X.useContext(qp),_N=e=>"id"in e&&"source"in e&&"target"in e,vN=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Jm=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,EN=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),vS=(e,t)=>{if(!e.source||!e.target)return t;let n;return _N(e)?n={...e}:n={...e,id:vN(e)},EN(n,t)?t:t.concat(n)},tp=({x:e,y:t},[n,r,a],l,[c,d])=>{const g={x:(e-n)/a,y:(t-r)/a};return l?{x:c*Math.round(g.x/c),y:d*Math.round(g.y/d)}:g},ES=({x:e,y:t},[n,r,a])=>({x:e*a+n,y:t*a+r}),Na=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],a={x:e.position.x-n,y:e.position.y-r};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:a}},Kf=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,a)=>{const{x:l,y:c}=Na(a,t).positionAbsolute;return hS(r,Gu({x:l,y:c,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return fS(n)},TS=(e,t,[n,r,a]=[0,0,1],l=!1,c=!1,d=[0,0])=>{const g={x:(t.x-n)/a,y:(t.y-r)/a,width:t.width/a,height:t.height/a},m=[];return e.forEach(y=>{const{width:v,height:T,selectable:S=!0,hidden:P=!1}=y;if(c&&!S||P)return!1;const{positionAbsolute:L}=Na(y,d),V={x:L.x,y:L.y,width:v||0,height:T||0},B=Qm(g,V),q=typeof v>"u"||typeof T>"u"||v===null||T===null,F=l&&B>0,H=(v||0)*(T||0);(q||F||B>=H||y.dragging)&&m.push(y)}),m},wS=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},SS=(e,t,n,r,a,l=.1)=>{const c=t/(e.width*(1+l)),d=n/(e.height*(1+l)),g=Math.min(c,d),m=el(g,r,a),y=e.x+e.width/2,v=e.y+e.height/2,T=t/2-y*m,S=n/2-v*m;return{x:T,y:S,zoom:m}},Sa=(e,t=0)=>e.transition().duration(t);function kE(e,t,n,r){return(t[n]||[]).reduce((a,l)=>(`${e.id}-${l.id}-${n}`!==r&&a.push({id:l.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+l.x+l.width/2,y:(e.positionAbsolute?.y??0)+l.y+l.height/2}),a),[])}function TN(e,t,n,r,a,l){const{x:c,y:d}=Ds(e),m=t.elementsFromPoint(c,d).find(P=>P.classList.contains("react-flow__handle"));if(m){const P=m.getAttribute("data-nodeid");if(P){const L=Fp(void 0,m),V=m.getAttribute("data-handleid"),B=l({nodeId:P,id:V,type:L});if(B){const q=a.find(F=>F.nodeId===P&&F.type===L&&F.id===V);return{handle:{id:V,type:L,nodeId:P,x:q?.x||n.x,y:q?.y||n.y},validHandleResult:B}}}}let y=[],v=1/0;if(a.forEach(P=>{const L=Math.sqrt((P.x-n.x)**2+(P.y-n.y)**2);if(L<=r){const V=l(P);L<=v&&(L<v?y=[{handle:P,validHandleResult:V}]:L===v&&y.push({handle:P,validHandleResult:V}),v=L)}}),!y.length)return{handle:null,validHandleResult:bS()};if(y.length===1)return y[0];const T=y.some(({validHandleResult:P})=>P.isValid),S=y.some(({handle:P})=>P.type==="target");return y.find(({handle:P,validHandleResult:L})=>S?P.type==="target":T?L.isValid:!0)||y[0]}const wN={source:null,target:null,sourceHandle:null,targetHandle:null},bS=()=>({handleDomNode:null,isValid:!1,connection:wN,endHandle:null});function AS(e,t,n,r,a,l,c){const d=a==="target",g=c.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),m={...bS(),handleDomNode:g};if(g){const y=Fp(void 0,g),v=g.getAttribute("data-nodeid"),T=g.getAttribute("data-handleid"),S=g.classList.contains("connectable"),P=g.classList.contains("connectableend"),L={source:d?v:n,sourceHandle:d?T:r,target:d?n:v,targetHandle:d?r:T};m.connection=L,S&&P&&(t===Us.Strict?d&&y==="source"||!d&&y==="target":v!==n||T!==r)&&(m.endHandle={nodeId:v,handleId:T,type:y},m.isValid=l(L))}return m}function SN({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((a,l)=>{if(l[Ie]){const{handleBounds:c}=l[Ie];let d=[],g=[];c&&(d=kE(l,c,"source",`${t}-${n}-${r}`),g=kE(l,c,"target",`${t}-${n}-${r}`)),a.push(...d,...g)}return a},[])}function Fp(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Am(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function bN(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function RS({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:a,getState:l,setState:c,isValidConnection:d,edgeUpdaterType:g,onReconnectEnd:m}){const y=cS(e.target),{connectionMode:v,domNode:T,autoPanOnConnect:S,connectionRadius:P,onConnectStart:L,panBy:V,getNodes:B,cancelConnection:q}=l();let F=0,H;const{x:et,y:nt}=Ds(e),D=y?.elementFromPoint(et,nt),R=Fp(g,D),I=T?.getBoundingClientRect();if(!I||!R)return;let k,N=Ds(e,I),U=!1,A=null,M=!1,tt=null;const O=SN({nodes:B(),nodeId:n,handleId:t,handleType:R}),$=()=>{if(!S)return;const[x,G]=uS(N,I);V({x,y:G}),F=requestAnimationFrame($)};c({connectionPosition:N,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:R,connectionStartHandle:{nodeId:n,handleId:t,type:R},connectionEndHandle:null}),L?.(e,{nodeId:n,handleId:t,handleType:R});function at(x){const{transform:G}=l();N=Ds(x,I);const{handle:W,validHandleResult:rt}=TN(x,y,tp(N,G,!1,[1,1]),P,O,ct=>AS(ct,v,n,t,a?"target":"source",d,y));if(H=W,U||($(),U=!0),tt=rt.handleDomNode,A=rt.connection,M=rt.isValid,c({connectionPosition:H&&M?ES({x:H.x,y:H.y},G):N,connectionStatus:bN(!!H,M),connectionEndHandle:rt.endHandle}),!H&&!M&&!tt)return Am(k);A.source!==A.target&&tt&&(Am(k),k=tt,tt.classList.add("connecting","react-flow__handle-connecting"),tt.classList.toggle("valid",M),tt.classList.toggle("react-flow__handle-valid",M))}function Y(x){(H||tt)&&A&&M&&r?.(A),l().onConnectEnd?.(x),g&&m?.(x),Am(k),q(),cancelAnimationFrame(F),U=!1,M=!1,A=null,tt=null,y.removeEventListener("mousemove",at),y.removeEventListener("mouseup",Y),y.removeEventListener("touchmove",at),y.removeEventListener("touchend",Y)}y.addEventListener("mousemove",at),y.addEventListener("mouseup",Y),y.addEventListener("touchmove",at),y.addEventListener("touchend",Y)}const PE=()=>!0,AN=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),RN=(e,t,n)=>r=>{const{connectionStartHandle:a,connectionEndHandle:l,connectionClickStartHandle:c}=r;return{connecting:a?.nodeId===e&&a?.handleId===t&&a?.type===n||l?.nodeId===e&&l?.handleId===t&&l?.type===n,clickConnecting:c?.nodeId===e&&c?.handleId===t&&c?.type===n}},IS=X.forwardRef(({type:e="source",position:t=bt.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:g,className:m,onMouseDown:y,onTouchStart:v,...T},S)=>{const P=c||null,L=e==="target",V=Ye(),B=yN(),{connectOnClick:q,noPanClassName:F}=me(AN,rn),{connecting:H,clickConnecting:et}=me(RN(B,P,e),rn);B||V.getState().onError?.("010",qr.error010());const nt=I=>{const{defaultEdgeOptions:k,onConnect:N,hasDefaultEdges:U}=V.getState(),A={...k,...I};if(U){const{edges:M,setEdges:tt}=V.getState();tt(vS(A,M))}N?.(A),d?.(A)},D=I=>{if(!B)return;const k=gS(I);a&&(k&&I.button===0||!k)&&RS({event:I,handleId:P,nodeId:B,onConnect:nt,isTarget:L,getState:V.getState,setState:V.setState,isValidConnection:n||V.getState().isValidConnection||PE}),k?y?.(I):v?.(I)},R=I=>{const{onClickConnectStart:k,onClickConnectEnd:N,connectionClickStartHandle:U,connectionMode:A,isValidConnection:M}=V.getState();if(!B||!U&&!a)return;if(!U){k?.(I,{nodeId:B,handleId:P,handleType:e}),V.setState({connectionClickStartHandle:{nodeId:B,type:e,handleId:P}});return}const tt=cS(I.target),O=n||M||PE,{connection:$,isValid:at}=AS({nodeId:B,id:P,type:e},A,U.nodeId,U.handleId||null,U.type,O,tt);at&&nt($),N?.(I),V.setState({connectionClickStartHandle:null})};return lt.createElement("div",{"data-handleid":P,"data-nodeid":B,"data-handlepos":t,"data-id":`${B}-${P}-${e}`,className:gn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",F,m,{source:!L,target:L,connectable:r,connectablestart:a,connectableend:l,connecting:et,connectionindicator:r&&(a&&!H||l&&H)}]),onMouseDown:D,onTouchStart:D,onClick:q?R:void 0,ref:S,...T},g)});IS.displayName="Handle";var Oa=X.memo(IS);const CS=({data:e,isConnectable:t,targetPosition:n=bt.Top,sourcePosition:r=bt.Bottom})=>lt.createElement(lt.Fragment,null,lt.createElement(Oa,{type:"target",position:n,isConnectable:t}),e?.label,lt.createElement(Oa,{type:"source",position:r,isConnectable:t}));CS.displayName="DefaultNode";var ep=X.memo(CS);const xS=({data:e,isConnectable:t,sourcePosition:n=bt.Bottom})=>lt.createElement(lt.Fragment,null,e?.label,lt.createElement(Oa,{type:"source",position:n,isConnectable:t}));xS.displayName="InputNode";var NS=X.memo(xS);const DS=({data:e,isConnectable:t,targetPosition:n=bt.Top})=>lt.createElement(lt.Fragment,null,lt.createElement(Oa,{type:"target",position:n,isConnectable:t}),e?.label);DS.displayName="OutputNode";var OS=X.memo(DS);const jp=()=>null;jp.displayName="GroupNode";const IN=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Bh=e=>e.id;function CN(e,t){return rn(e.selectedNodes.map(Bh),t.selectedNodes.map(Bh))&&rn(e.selectedEdges.map(Bh),t.selectedEdges.map(Bh))}const MS=X.memo(({onSelectionChange:e})=>{const t=Ye(),{selectedNodes:n,selectedEdges:r}=me(IN,CN);return X.useEffect(()=>{const a={nodes:n,edges:r};e?.(a),t.getState().onSelectionChange.forEach(l=>l(a))},[n,r,e]),null});MS.displayName="SelectionListener";const xN=e=>!!e.onSelectionChange;function NN({onSelectionChange:e}){const t=me(xN);return e||t?lt.createElement(MS,{onSelectionChange:e}):null}const DN=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Po(e,t){X.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function qt(e,t,n){X.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const ON=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:a,onConnectStart:l,onConnectEnd:c,onClickConnectStart:d,onClickConnectEnd:g,nodesDraggable:m,nodesConnectable:y,nodesFocusable:v,edgesFocusable:T,edgesUpdatable:S,elevateNodesOnSelect:P,minZoom:L,maxZoom:V,nodeExtent:B,onNodesChange:q,onEdgesChange:F,elementsSelectable:H,connectionMode:et,snapGrid:nt,snapToGrid:D,translateExtent:R,connectOnClick:I,defaultEdgeOptions:k,fitView:N,fitViewOptions:U,onNodesDelete:A,onEdgesDelete:M,onNodeDrag:tt,onNodeDragStart:O,onNodeDragStop:$,onSelectionDrag:at,onSelectionDragStart:Y,onSelectionDragStop:x,noPanClassName:G,nodeOrigin:W,rfId:rt,autoPanOnConnect:ct,autoPanOnNodeDrag:mt,onError:pt,connectionRadius:It,isValidConnection:At,nodeDragThreshold:kt})=>{const{setNodes:Pt,setEdges:ue,setDefaultNodesAndEdges:ce,setMinZoom:ve,setMaxZoom:ye,setTranslateExtent:he,setNodeExtent:Ke,reset:Lt}=me(DN,rn),wt=Ye();return X.useEffect(()=>{const Ce=r?.map(mn=>({...mn,...k}));return ce(n,Ce),()=>{Lt()}},[]),qt("defaultEdgeOptions",k,wt.setState),qt("connectionMode",et,wt.setState),qt("onConnect",a,wt.setState),qt("onConnectStart",l,wt.setState),qt("onConnectEnd",c,wt.setState),qt("onClickConnectStart",d,wt.setState),qt("onClickConnectEnd",g,wt.setState),qt("nodesDraggable",m,wt.setState),qt("nodesConnectable",y,wt.setState),qt("nodesFocusable",v,wt.setState),qt("edgesFocusable",T,wt.setState),qt("edgesUpdatable",S,wt.setState),qt("elementsSelectable",H,wt.setState),qt("elevateNodesOnSelect",P,wt.setState),qt("snapToGrid",D,wt.setState),qt("snapGrid",nt,wt.setState),qt("onNodesChange",q,wt.setState),qt("onEdgesChange",F,wt.setState),qt("connectOnClick",I,wt.setState),qt("fitViewOnInit",N,wt.setState),qt("fitViewOnInitOptions",U,wt.setState),qt("onNodesDelete",A,wt.setState),qt("onEdgesDelete",M,wt.setState),qt("onNodeDrag",tt,wt.setState),qt("onNodeDragStart",O,wt.setState),qt("onNodeDragStop",$,wt.setState),qt("onSelectionDrag",at,wt.setState),qt("onSelectionDragStart",Y,wt.setState),qt("onSelectionDragStop",x,wt.setState),qt("noPanClassName",G,wt.setState),qt("nodeOrigin",W,wt.setState),qt("rfId",rt,wt.setState),qt("autoPanOnConnect",ct,wt.setState),qt("autoPanOnNodeDrag",mt,wt.setState),qt("onError",pt,wt.setState),qt("connectionRadius",It,wt.setState),qt("isValidConnection",At,wt.setState),qt("nodeDragThreshold",kt,wt.setState),Po(e,Pt),Po(t,ue),Po(L,ve),Po(V,ye),Po(R,he),Po(B,Ke),null},LE={display:"none"},MN={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},VS="react-flow__node-desc",kS="react-flow__edge-desc",VN="react-flow__aria-live",kN=e=>e.ariaLiveMessage;function PN({rfId:e}){const t=me(kN);return lt.createElement("div",{id:`${VN}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:MN},t)}function LN({rfId:e,disableKeyboardA11y:t}){return lt.createElement(lt.Fragment,null,lt.createElement("div",{id:`${VS}-${e}`,style:LE},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),lt.createElement("div",{id:`${kS}-${e}`,style:LE},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&lt.createElement(PN,{rfId:e}))}var Yu=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=X.useState(!1),a=X.useRef(!1),l=X.useRef(new Set([])),[c,d]=X.useMemo(()=>{if(e!==null){const m=(Array.isArray(e)?e:[e]).filter(v=>typeof v=="string").map(v=>v.split("+")),y=m.reduce((v,T)=>v.concat(...T),[]);return[m,y]}return[[],[]]},[e]);return X.useEffect(()=>{const g=typeof document<"u"?document:null,m=t?.target||g;if(e!==null){const y=S=>{if(a.current=S.ctrlKey||S.metaKey||S.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&Zm(S))return!1;const L=zE(S.code,d);l.current.add(S[L]),UE(c,l.current,!1)&&(S.preventDefault(),r(!0))},v=S=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&Zm(S))return!1;const L=zE(S.code,d);UE(c,l.current,!0)?(r(!1),l.current.clear()):l.current.delete(S[L]),S.key==="Meta"&&l.current.clear(),a.current=!1},T=()=>{l.current.clear(),r(!1)};return m?.addEventListener("keydown",y),m?.addEventListener("keyup",v),window.addEventListener("blur",T),()=>{m?.removeEventListener("keydown",y),m?.removeEventListener("keyup",v),window.removeEventListener("blur",T)}}},[e,r]),n};function UE(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(a=>t.has(a)))}function zE(e,t){return t.includes(e)?"code":"key"}function PS(e,t,n,r){const a=e.parentNode||e.parentId;if(!a)return n;const l=t.get(a),c=Na(l,r);return PS(l,t,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(l[Ie]?.z??0)>(n.z??0)?l[Ie]?.z??0:n.z??0},r)}function LS(e,t,n){e.forEach(r=>{const a=r.parentNode||r.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||n?.[r.id]){const{x:l,y:c,z:d}=PS(r,e,{...r.position,z:r[Ie]?.z??0},t);r.positionAbsolute={x:l,y:c},r[Ie].z=d,n?.[r.id]&&(r[Ie].isParent=!0)}})}function Rm(e,t,n,r){const a=new Map,l={},c=r?1e3:0;return e.forEach(d=>{const g=(_i(d.zIndex)?d.zIndex:0)+(d.selected?c:0),m=t.get(d.id),y={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},v=d.parentNode||d.parentId;v&&(l[v]=!0);const T=m?.type&&m?.type!==d.type;Object.defineProperty(y,Ie,{enumerable:!1,value:{handleBounds:T?void 0:m?.[Ie]?.handleBounds,z:g}}),a.set(d.id,y)}),LS(a,n,l),a}function US(e,t={}){const{getNodes:n,width:r,height:a,minZoom:l,maxZoom:c,d3Zoom:d,d3Selection:g,fitViewOnInitDone:m,fitViewOnInit:y,nodeOrigin:v}=e(),T=t.initial&&!m&&y;if(d&&g&&(T||!t.initial)){const P=n().filter(V=>{const B=t.includeHiddenNodes?V.width&&V.height:!V.hidden;return t.nodes?.length?B&&t.nodes.some(q=>q.id===V.id):B}),L=P.every(V=>V.width&&V.height);if(P.length>0&&L){const V=Kf(P,v),{x:B,y:q,zoom:F}=SS(V,r,a,t.minZoom??l,t.maxZoom??c,t.padding??.1),H=zr.translate(B,q).scale(F);return typeof t.duration=="number"&&t.duration>0?d.transform(Sa(g,t.duration),H):d.transform(g,H),!0}}return!1}function UN(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Ie]:r[Ie],selected:n.selected})}),new Map(t)}function zN(e,t){return t.map(n=>{const r=e.find(a=>a.id===n.id);return r&&(n.selected=r.selected),n})}function Hh({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:a,edges:l,onNodesChange:c,onEdgesChange:d,hasDefaultNodes:g,hasDefaultEdges:m}=n();e?.length&&(g&&r({nodeInternals:UN(e,a)}),c?.(e)),t?.length&&(m&&r({edges:zN(t,l)}),d?.(t))}const Lo=()=>{},BN={zoomIn:Lo,zoomOut:Lo,zoomTo:Lo,getZoom:()=>1,setViewport:Lo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Lo,fitBounds:Lo,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},HN=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),qN=()=>{const e=Ye(),{d3Zoom:t,d3Selection:n}=me(HN,rn);return X.useMemo(()=>n&&t?{zoomIn:a=>t.scaleBy(Sa(n,a?.duration),1.2),zoomOut:a=>t.scaleBy(Sa(n,a?.duration),1/1.2),zoomTo:(a,l)=>t.scaleTo(Sa(n,l?.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,l)=>{const[c,d,g]=e.getState().transform,m=zr.translate(a.x??c,a.y??d).scale(a.zoom??g);t.transform(Sa(n,l?.duration),m)},getViewport:()=>{const[a,l,c]=e.getState().transform;return{x:a,y:l,zoom:c}},fitView:a=>US(e.getState,a),setCenter:(a,l,c)=>{const{width:d,height:g,maxZoom:m}=e.getState(),y=typeof c?.zoom<"u"?c.zoom:m,v=d/2-a*y,T=g/2-l*y,S=zr.translate(v,T).scale(y);t.transform(Sa(n,c?.duration),S)},fitBounds:(a,l)=>{const{width:c,height:d,minZoom:g,maxZoom:m}=e.getState(),{x:y,y:v,zoom:T}=SS(a,c,d,g,m,l?.padding??.1),S=zr.translate(y,v).scale(T);t.transform(Sa(n,l?.duration),S)},project:a=>{const{transform:l,snapToGrid:c,snapGrid:d}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),tp(a,l,c,d)},screenToFlowPosition:a=>{const{transform:l,snapToGrid:c,snapGrid:d,domNode:g}=e.getState();if(!g)return a;const{x:m,y}=g.getBoundingClientRect(),v={x:a.x-m,y:a.y-y};return tp(v,l,c,d)},flowToScreenPosition:a=>{const{transform:l,domNode:c}=e.getState();if(!c)return a;const{x:d,y:g}=c.getBoundingClientRect(),m=ES(a,l);return{x:m.x+d,y:m.y+g}},viewportInitialized:!0}:BN,[t,n])};function Gp(){const e=qN(),t=Ye(),n=X.useCallback(()=>t.getState().getNodes().map(L=>({...L})),[]),r=X.useCallback(L=>t.getState().nodeInternals.get(L),[]),a=X.useCallback(()=>{const{edges:L=[]}=t.getState();return L.map(V=>({...V}))},[]),l=X.useCallback(L=>{const{edges:V=[]}=t.getState();return V.find(B=>B.id===L)},[]),c=X.useCallback(L=>{const{getNodes:V,setNodes:B,hasDefaultNodes:q,onNodesChange:F}=t.getState(),H=V(),et=typeof L=="function"?L(H):L;if(q)B(et);else if(F){const nt=et.length===0?H.map(D=>({type:"remove",id:D.id})):et.map(D=>({item:D,type:"reset"}));F(nt)}},[]),d=X.useCallback(L=>{const{edges:V=[],setEdges:B,hasDefaultEdges:q,onEdgesChange:F}=t.getState(),H=typeof L=="function"?L(V):L;if(q)B(H);else if(F){const et=H.length===0?V.map(nt=>({type:"remove",id:nt.id})):H.map(nt=>({item:nt,type:"reset"}));F(et)}},[]),g=X.useCallback(L=>{const V=Array.isArray(L)?L:[L],{getNodes:B,setNodes:q,hasDefaultNodes:F,onNodesChange:H}=t.getState();if(F){const nt=[...B(),...V];q(nt)}else if(H){const et=V.map(nt=>({item:nt,type:"add"}));H(et)}},[]),m=X.useCallback(L=>{const V=Array.isArray(L)?L:[L],{edges:B=[],setEdges:q,hasDefaultEdges:F,onEdgesChange:H}=t.getState();if(F)q([...B,...V]);else if(H){const et=V.map(nt=>({item:nt,type:"add"}));H(et)}},[]),y=X.useCallback(()=>{const{getNodes:L,edges:V=[],transform:B}=t.getState(),[q,F,H]=B;return{nodes:L().map(et=>({...et})),edges:V.map(et=>({...et})),viewport:{x:q,y:F,zoom:H}}},[]),v=X.useCallback(({nodes:L,edges:V})=>{const{nodeInternals:B,getNodes:q,edges:F,hasDefaultNodes:H,hasDefaultEdges:et,onNodesDelete:nt,onEdgesDelete:D,onNodesChange:R,onEdgesChange:I}=t.getState(),k=(L||[]).map(tt=>tt.id),N=(V||[]).map(tt=>tt.id),U=q().reduce((tt,O)=>{const $=O.parentNode||O.parentId,at=!k.includes(O.id)&&$&&tt.find(x=>x.id===$);return(typeof O.deletable=="boolean"?O.deletable:!0)&&(k.includes(O.id)||at)&&tt.push(O),tt},[]),A=F.filter(tt=>typeof tt.deletable=="boolean"?tt.deletable:!0),M=A.filter(tt=>N.includes(tt.id));if(U||M){const tt=wS(U,A),O=[...M,...tt],$=O.reduce((at,Y)=>(at.includes(Y.id)||at.push(Y.id),at),[]);if((et||H)&&(et&&t.setState({edges:F.filter(at=>!$.includes(at.id))}),H&&(U.forEach(at=>{B.delete(at.id)}),t.setState({nodeInternals:new Map(B)}))),$.length>0&&(D?.(O),I&&I($.map(at=>({id:at,type:"remove"})))),U.length>0&&(nt?.(U),R)){const at=U.map(Y=>({id:Y.id,type:"remove"}));R(at)}}},[]),T=X.useCallback(L=>{const V=uN(L),B=V?null:t.getState().nodeInternals.get(L.id);return!V&&!B?[null,null,V]:[V?L:NE(B),B,V]},[]),S=X.useCallback((L,V=!0,B)=>{const[q,F,H]=T(L);return q?(B||t.getState().getNodes()).filter(et=>{if(!H&&(et.id===F.id||!et.positionAbsolute))return!1;const nt=NE(et),D=Qm(nt,q);return V&&D>0||D>=q.width*q.height}):[]},[]),P=X.useCallback((L,V,B=!0)=>{const[q]=T(L);if(!q)return!1;const F=Qm(q,V);return B&&F>0||F>=q.width*q.height},[]);return X.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:a,getEdge:l,setNodes:c,setEdges:d,addNodes:g,addEdges:m,toObject:y,deleteElements:v,getIntersectingNodes:S,isNodeIntersecting:P}),[e,n,r,a,l,c,d,g,m,y,v,S,P])}const FN={actInsideInputWithModifier:!1};var jN=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Ye(),{deleteElements:r}=Gp(),a=Yu(e,FN),l=Yu(t);X.useEffect(()=>{if(a){const{edges:c,getNodes:d}=n.getState(),g=d().filter(y=>y.selected),m=c.filter(y=>y.selected);r({nodes:g,edges:m}),n.setState({nodesSelectionActive:!1})}},[a]),X.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])};function GN(e){const t=Ye();X.useEffect(()=>{let n;const r=()=>{if(!e.current)return;const a=Lp(e.current);(a.height===0||a.width===0)&&t.getState().onError?.("004",qr.error004()),t.setState({width:a.width||500,height:a.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const $p={position:"absolute",width:"100%",height:"100%",top:0,left:0},$N=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,qh=e=>({x:e.x,y:e.y,zoom:e.k}),Uo=(e,t)=>e.target.closest(`.${t}`),BE=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),HE=e=>{const t=e.ctrlKey&&_f()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},YN=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),KN=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:a=!0,zoomOnPinch:l=!0,panOnScroll:c=!1,panOnScrollSpeed:d=.5,panOnScrollMode:g=Ia.Free,zoomOnDoubleClick:m=!0,elementsSelectable:y,panOnDrag:v=!0,defaultViewport:T,translateExtent:S,minZoom:P,maxZoom:L,zoomActivationKeyCode:V,preventScrolling:B=!0,children:q,noWheelClassName:F,noPanClassName:H})=>{const et=X.useRef(),nt=Ye(),D=X.useRef(!1),R=X.useRef(!1),I=X.useRef(null),k=X.useRef({x:0,y:0,zoom:0}),{d3Zoom:N,d3Selection:U,d3ZoomHandler:A,userSelectionActive:M}=me(YN,rn),tt=Yu(V),O=X.useRef(0),$=X.useRef(!1),at=X.useRef();return GN(I),X.useEffect(()=>{if(I.current){const Y=I.current.getBoundingClientRect(),x=oS().scaleExtent([P,L]).translateExtent(S),G=mi(I.current).call(x),W=zr.translate(T.x,T.y).scale(el(T.zoom,P,L)),rt=[[0,0],[Y.width,Y.height]],ct=x.constrain()(W,rt,S);x.transform(G,ct),x.wheelDelta(HE),nt.setState({d3Zoom:x,d3Selection:G,d3ZoomHandler:G.on("wheel.zoom"),transform:[ct.x,ct.y,ct.k],domNode:I.current.closest(".react-flow")})}},[]),X.useEffect(()=>{U&&N&&(c&&!tt&&!M?U.on("wheel.zoom",Y=>{if(Uo(Y,F))return!1;Y.preventDefault(),Y.stopImmediatePropagation();const x=U.property("__zoom").k||1;if(Y.ctrlKey&&l){const At=Ii(Y),kt=HE(Y),Pt=x*Math.pow(2,kt);N.scaleTo(U,Pt,At,Y);return}const G=Y.deltaMode===1?20:1;let W=g===Ia.Vertical?0:Y.deltaX*G,rt=g===Ia.Horizontal?0:Y.deltaY*G;!_f()&&Y.shiftKey&&g!==Ia.Vertical&&(W=Y.deltaY*G,rt=0),N.translateBy(U,-(W/x)*d,-(rt/x)*d,{internal:!0});const ct=qh(U.property("__zoom")),{onViewportChangeStart:mt,onViewportChange:pt,onViewportChangeEnd:It}=nt.getState();clearTimeout(at.current),$.current||($.current=!0,t?.(Y,ct),mt?.(ct)),$.current&&(e?.(Y,ct),pt?.(ct),at.current=setTimeout(()=>{n?.(Y,ct),It?.(ct),$.current=!1},150))},{passive:!1}):typeof A<"u"&&U.on("wheel.zoom",function(Y,x){if(!B&&Y.type==="wheel"&&!Y.ctrlKey||Uo(Y,F))return null;Y.preventDefault(),A.call(this,Y,x)},{passive:!1}))},[M,c,g,U,N,A,tt,l,B,F,t,e,n]),X.useEffect(()=>{N&&N.on("start",Y=>{if(!Y.sourceEvent||Y.sourceEvent.internal)return null;O.current=Y.sourceEvent?.button;const{onViewportChangeStart:x}=nt.getState(),G=qh(Y.transform);D.current=!0,k.current=G,Y.sourceEvent?.type==="mousedown"&&nt.setState({paneDragging:!0}),x?.(G),t?.(Y.sourceEvent,G)})},[N,t]),X.useEffect(()=>{N&&(M&&!D.current?N.on("zoom",null):M||N.on("zoom",Y=>{const{onViewportChange:x}=nt.getState();if(nt.setState({transform:[Y.transform.x,Y.transform.y,Y.transform.k]}),R.current=!!(r&&BE(v,O.current??0)),(e||x)&&!Y.sourceEvent?.internal){const G=qh(Y.transform);x?.(G),e?.(Y.sourceEvent,G)}}))},[M,N,e,v,r]),X.useEffect(()=>{N&&N.on("end",Y=>{if(!Y.sourceEvent||Y.sourceEvent.internal)return null;const{onViewportChangeEnd:x}=nt.getState();if(D.current=!1,nt.setState({paneDragging:!1}),r&&BE(v,O.current??0)&&!R.current&&r(Y.sourceEvent),R.current=!1,(n||x)&&$N(k.current,Y.transform)){const G=qh(Y.transform);k.current=G,clearTimeout(et.current),et.current=setTimeout(()=>{x?.(G),n?.(Y.sourceEvent,G)},c?150:0)}})},[N,c,v,n,r]),X.useEffect(()=>{N&&N.filter(Y=>{const x=tt||a,G=l&&Y.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&Y.button===1&&Y.type==="mousedown"&&(Uo(Y,"react-flow__node")||Uo(Y,"react-flow__edge")))return!0;if(!v&&!x&&!c&&!m&&!l||M||!m&&Y.type==="dblclick"||Uo(Y,F)&&Y.type==="wheel"||Uo(Y,H)&&(Y.type!=="wheel"||c&&Y.type==="wheel"&&!tt)||!l&&Y.ctrlKey&&Y.type==="wheel"||!x&&!c&&!G&&Y.type==="wheel"||!v&&(Y.type==="mousedown"||Y.type==="touchstart")||Array.isArray(v)&&!v.includes(Y.button)&&Y.type==="mousedown")return!1;const W=Array.isArray(v)&&v.includes(Y.button)||!Y.button||Y.button<=1;return(!Y.ctrlKey||Y.type==="wheel")&&W})},[M,N,a,l,c,m,v,y,tt]),lt.createElement("div",{className:"react-flow__renderer",ref:I,style:$p},q)},XN=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function QN(){const{userSelectionActive:e,userSelectionRect:t}=me(XN,rn);return e&&t?lt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function qE(e,t){const n=t.parentNode||t.parentId,r=e.find(a=>a.id===n);if(r){const a=t.position.x+t.width-r.width,l=t.position.y+t.height-r.height;if(a>0||l>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,a>0&&(r.style.width+=a),l>0&&(r.style.height+=l),t.position.x<0){const c=Math.abs(t.position.x);r.position.x=r.position.x-c,r.style.width+=c,t.position.x=0}if(t.position.y<0){const c=Math.abs(t.position.y);r.position.y=r.position.y-c,r.style.height+=c,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function zS(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,a)=>{const l=e.filter(d=>d.id===a.id);if(l.length===0)return r.push(a),r;const c={...a};for(const d of l)if(d)switch(d.type){case"select":{c.selected=d.selected;break}case"position":{typeof d.position<"u"&&(c.position=d.position),typeof d.positionAbsolute<"u"&&(c.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(c.dragging=d.dragging),c.expandParent&&qE(r,c);break}case"dimensions":{typeof d.dimensions<"u"&&(c.width=d.dimensions.width,c.height=d.dimensions.height),typeof d.updateStyle<"u"&&(c.style={...c.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(c.resizing=d.resizing),c.expandParent&&qE(r,c);break}case"remove":return r}return r.push(c),r},n)}function BS(e,t){return zS(e,t)}function ZN(e,t){return zS(e,t)}const bs=(e,t)=>({id:e,type:"select",selected:t});function jo(e,t){return e.reduce((n,r)=>{const a=t.includes(r.id);return!r.selected&&a?(r.selected=!0,n.push(bs(r.id,!0))):r.selected&&!a&&(r.selected=!1,n.push(bs(r.id,!1))),n},[])}const Im=(e,t)=>n=>{n.target===t.current&&e?.(n)},WN=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),HS=X.memo(({isSelecting:e,selectionMode:t=$u.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:g,onPaneMouseMove:m,onPaneMouseLeave:y,children:v})=>{const T=X.useRef(null),S=Ye(),P=X.useRef(0),L=X.useRef(0),V=X.useRef(),{userSelectionActive:B,elementsSelectable:q,dragging:F}=me(WN,rn),H=()=>{S.setState({userSelectionActive:!1,userSelectionRect:null}),P.current=0,L.current=0},et=A=>{l?.(A),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1})},nt=A=>{if(Array.isArray(n)&&n?.includes(2)){A.preventDefault();return}c?.(A)},D=d?A=>d(A):void 0,R=A=>{const{resetSelectedElements:M,domNode:tt}=S.getState();if(V.current=tt?.getBoundingClientRect(),!q||!e||A.button!==0||A.target!==T.current||!V.current)return;const{x:O,y:$}=Ds(A,V.current);M(),S.setState({userSelectionRect:{width:0,height:0,startX:O,startY:$,x:O,y:$}}),r?.(A)},I=A=>{const{userSelectionRect:M,nodeInternals:tt,edges:O,transform:$,onNodesChange:at,onEdgesChange:Y,nodeOrigin:x,getNodes:G}=S.getState();if(!e||!V.current||!M)return;S.setState({userSelectionActive:!0,nodesSelectionActive:!1});const W=Ds(A,V.current),rt=M.startX??0,ct=M.startY??0,mt={...M,x:W.x<rt?W.x:rt,y:W.y<ct?W.y:ct,width:Math.abs(W.x-rt),height:Math.abs(W.y-ct)},pt=G(),It=TS(tt,mt,$,t===$u.Partial,!0,x),At=wS(It,O).map(Pt=>Pt.id),kt=It.map(Pt=>Pt.id);if(P.current!==kt.length){P.current=kt.length;const Pt=jo(pt,kt);Pt.length&&at?.(Pt)}if(L.current!==At.length){L.current=At.length;const Pt=jo(O,At);Pt.length&&Y?.(Pt)}S.setState({userSelectionRect:mt})},k=A=>{if(A.button!==0)return;const{userSelectionRect:M}=S.getState();!B&&M&&A.target===T.current&&et?.(A),S.setState({nodesSelectionActive:P.current>0}),H(),a?.(A)},N=A=>{B&&(S.setState({nodesSelectionActive:P.current>0}),a?.(A)),H()},U=q&&(e||B);return lt.createElement("div",{className:gn(["react-flow__pane",{dragging:F,selection:e}]),onClick:U?void 0:Im(et,T),onContextMenu:Im(nt,T),onWheel:Im(D,T),onMouseEnter:U?void 0:g,onMouseDown:U?R:void 0,onMouseMove:U?I:m,onMouseUp:U?k:void 0,onMouseLeave:U?N:y,ref:T,style:$p},v,lt.createElement(QN,null))});HS.displayName="Pane";function qS(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:qS(r,t):!1}function FE(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function JN(e,t,n,r){return Array.from(e.values()).filter(a=>(a.selected||a.id===r)&&(!a.parentNode||a.parentId||!qS(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(a.positionAbsolute?.x??0),y:n.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}))}function tD(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function FS(e,t,n,r,a=[0,0],l){const c=tD(e,e.extent||r);let d=c;const g=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(g&&e.width&&e.height){const v=n.get(g),{x:T,y:S}=Na(v,a).positionAbsolute;d=v&&_i(T)&&_i(S)&&_i(v.width)&&_i(v.height)?[[T+e.width*a[0],S+e.height*a[1]],[T+v.width-e.width+e.width*a[0],S+v.height-e.height+e.height*a[1]]]:d}else l?.("005",qr.error005()),d=c;else if(e.extent&&g&&e.extent!=="parent"){const v=n.get(g),{x:T,y:S}=Na(v,a).positionAbsolute;d=[[e.extent[0][0]+T,e.extent[0][1]+S],[e.extent[1][0]+T,e.extent[1][1]+S]]}let m={x:0,y:0};if(g){const v=n.get(g);m=Na(v,a).positionAbsolute}const y=d&&d!=="parent"?Up(t,d):t;return{position:{x:y.x-m.x,y:y.y-m.y},positionAbsolute:y}}function Cm({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?r.find(a=>a.id===e):r[0],r]}const jE=(e,t,n,r)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const l=Array.from(a),c=t.getBoundingClientRect(),d={x:c.width*r[0],y:c.height*r[1]};return l.map(g=>{const m=g.getBoundingClientRect();return{id:g.getAttribute("data-handleid"),position:g.getAttribute("data-handlepos"),x:(m.left-c.left-d.x)/n,y:(m.top-c.top-d.y)/n,...Lp(g)}})};function bu(e,t,n){return n===void 0?n:r=>{const a=t().nodeInternals.get(e);a&&n(r,{...a})}}function np({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeInternals:d,onError:g}=t.getState(),m=d.get(e);if(!m){g?.("012",qr.error012(e));return}t.setState({nodesSelectionActive:!1}),m.selected?(n||m.selected&&c)&&(l({nodes:[m],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):a([e])}function eD(){const e=Ye();return X.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:a,snapToGrid:l}=e.getState(),c=n.touches?n.touches[0].clientX:n.clientX,d=n.touches?n.touches[0].clientY:n.clientY,g={x:(c-r[0])/r[2],y:(d-r[1])/r[2]};return{xSnapped:l?a[0]*Math.round(g.x/a[0]):g.x,ySnapped:l?a[1]*Math.round(g.y/a[1]):g.y,...g}},[])}function xm(e){return(t,n,r)=>e?.(t,r)}function jS({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:a,isSelectable:l,selectNodesOnDrag:c}){const d=Ye(),[g,m]=X.useState(!1),y=X.useRef([]),v=X.useRef({x:null,y:null}),T=X.useRef(0),S=X.useRef(null),P=X.useRef({x:0,y:0}),L=X.useRef(null),V=X.useRef(!1),B=X.useRef(!1),q=X.useRef(!1),F=eD();return X.useEffect(()=>{if(e?.current){const H=mi(e.current),et=({x:R,y:I})=>{const{nodeInternals:k,onNodeDrag:N,onSelectionDrag:U,updateNodePositions:A,nodeExtent:M,snapGrid:tt,snapToGrid:O,nodeOrigin:$,onError:at}=d.getState();v.current={x:R,y:I};let Y=!1,x={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&M){const W=Kf(y.current,$);x=Gu(W)}if(y.current=y.current.map(W=>{const rt={x:R-W.distance.x,y:I-W.distance.y};O&&(rt.x=tt[0]*Math.round(rt.x/tt[0]),rt.y=tt[1]*Math.round(rt.y/tt[1]));const ct=[[M[0][0],M[0][1]],[M[1][0],M[1][1]]];y.current.length>1&&M&&!W.extent&&(ct[0][0]=W.positionAbsolute.x-x.x+M[0][0],ct[1][0]=W.positionAbsolute.x+(W.width??0)-x.x2+M[1][0],ct[0][1]=W.positionAbsolute.y-x.y+M[0][1],ct[1][1]=W.positionAbsolute.y+(W.height??0)-x.y2+M[1][1]);const mt=FS(W,rt,k,ct,$,at);return Y=Y||W.position.x!==mt.position.x||W.position.y!==mt.position.y,W.position=mt.position,W.positionAbsolute=mt.positionAbsolute,W}),!Y)return;A(y.current,!0,!0),m(!0);const G=a?N:xm(U);if(G&&L.current){const[W,rt]=Cm({nodeId:a,dragItems:y.current,nodeInternals:k});G(L.current,W,rt)}},nt=()=>{if(!S.current)return;const[R,I]=uS(P.current,S.current);if(R!==0||I!==0){const{transform:k,panBy:N}=d.getState();v.current.x=(v.current.x??0)-R/k[2],v.current.y=(v.current.y??0)-I/k[2],N({x:R,y:I})&&et(v.current)}T.current=requestAnimationFrame(nt)},D=R=>{const{nodeInternals:I,multiSelectionActive:k,nodesDraggable:N,unselectNodesAndEdges:U,onNodeDragStart:A,onSelectionDragStart:M}=d.getState();B.current=!0;const tt=a?A:xm(M);(!c||!l)&&!k&&a&&(I.get(a)?.selected||U()),a&&l&&c&&np({id:a,store:d,nodeRef:e});const O=F(R);if(v.current=O,y.current=JN(I,N,O,a),tt&&y.current){const[$,at]=Cm({nodeId:a,dragItems:y.current,nodeInternals:I});tt(R.sourceEvent,$,at)}};if(t)H.on(".drag",null);else{const R=d2().on("start",I=>{const{domNode:k,nodeDragThreshold:N}=d.getState();N===0&&D(I),q.current=!1;const U=F(I);v.current=U,S.current=k?.getBoundingClientRect()||null,P.current=Ds(I.sourceEvent,S.current)}).on("drag",I=>{const k=F(I),{autoPanOnNodeDrag:N,nodeDragThreshold:U}=d.getState();if(I.sourceEvent.type==="touchmove"&&I.sourceEvent.touches.length>1&&(q.current=!0),!q.current){if(!V.current&&B.current&&N&&(V.current=!0,nt()),!B.current){const A=k.xSnapped-(v?.current?.x??0),M=k.ySnapped-(v?.current?.y??0);Math.sqrt(A*A+M*M)>U&&D(I)}(v.current.x!==k.xSnapped||v.current.y!==k.ySnapped)&&y.current&&B.current&&(L.current=I.sourceEvent,P.current=Ds(I.sourceEvent,S.current),et(k))}}).on("end",I=>{if(!(!B.current||q.current)&&(m(!1),V.current=!1,B.current=!1,cancelAnimationFrame(T.current),y.current)){const{updateNodePositions:k,nodeInternals:N,onNodeDragStop:U,onSelectionDragStop:A}=d.getState(),M=a?U:xm(A);if(k(y.current,!1,!1),M){const[tt,O]=Cm({nodeId:a,dragItems:y.current,nodeInternals:N});M(I.sourceEvent,tt,O)}}}).filter(I=>{const k=I.target;return!I.button&&(!n||!FE(k,`.${n}`,e))&&(!r||FE(k,r,e))});return H.call(R),()=>{H.on(".drag",null)}}}},[e,t,n,r,l,d,a,c,F]),g}function GS(){const e=Ye();return X.useCallback(n=>{const{nodeInternals:r,nodeExtent:a,updateNodePositions:l,getNodes:c,snapToGrid:d,snapGrid:g,onError:m,nodesDraggable:y}=e.getState(),v=c().filter(q=>q.selected&&(q.draggable||y&&typeof q.draggable>"u")),T=d?g[0]:5,S=d?g[1]:5,P=n.isShiftPressed?4:1,L=n.x*T*P,V=n.y*S*P,B=v.map(q=>{if(q.positionAbsolute){const F={x:q.positionAbsolute.x+L,y:q.positionAbsolute.y+V};d&&(F.x=g[0]*Math.round(F.x/g[0]),F.y=g[1]*Math.round(F.y/g[1]));const{positionAbsolute:H,position:et}=FS(q,F,r,a,void 0,m);q.position=et,q.positionAbsolute=H}return q});l(B,!0,!1)},[])}const Ko={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Au=e=>{const t=({id:n,type:r,data:a,xPos:l,yPos:c,xPosOrigin:d,yPosOrigin:g,selected:m,onClick:y,onMouseEnter:v,onMouseMove:T,onMouseLeave:S,onContextMenu:P,onDoubleClick:L,style:V,className:B,isDraggable:q,isSelectable:F,isConnectable:H,isFocusable:et,selectNodesOnDrag:nt,sourcePosition:D,targetPosition:R,hidden:I,resizeObserver:k,dragHandle:N,zIndex:U,isParent:A,noDragClassName:M,noPanClassName:tt,initialized:O,disableKeyboardA11y:$,ariaLabel:at,rfId:Y,hasHandleBounds:x})=>{const G=Ye(),W=X.useRef(null),rt=X.useRef(null),ct=X.useRef(D),mt=X.useRef(R),pt=X.useRef(r),It=F||q||y||v||T||S,At=GS(),kt=bu(n,G.getState,v),Pt=bu(n,G.getState,T),ue=bu(n,G.getState,S),ce=bu(n,G.getState,P),ve=bu(n,G.getState,L),ye=Lt=>{const{nodeDragThreshold:wt}=G.getState();if(F&&(!nt||!q||wt>0)&&np({id:n,store:G,nodeRef:W}),y){const Ce=G.getState().nodeInternals.get(n);Ce&&y(Lt,{...Ce})}},he=Lt=>{if(!Zm(Lt)&&!$)if(dS.includes(Lt.key)&&F){const wt=Lt.key==="Escape";np({id:n,store:G,unselect:wt,nodeRef:W})}else q&&m&&Object.prototype.hasOwnProperty.call(Ko,Lt.key)&&(G.setState({ariaLiveMessage:`Moved selected node ${Lt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~c}`}),At({x:Ko[Lt.key].x,y:Ko[Lt.key].y,isShiftPressed:Lt.shiftKey}))};X.useEffect(()=>()=>{rt.current&&(k?.unobserve(rt.current),rt.current=null)},[]),X.useEffect(()=>{if(W.current&&!I){const Lt=W.current;(!O||!x||rt.current!==Lt)&&(rt.current&&k?.unobserve(rt.current),k?.observe(Lt),rt.current=Lt)}},[I,O,x]),X.useEffect(()=>{const Lt=pt.current!==r,wt=ct.current!==D,Ce=mt.current!==R;W.current&&(Lt||wt||Ce)&&(Lt&&(pt.current=r),wt&&(ct.current=D),Ce&&(mt.current=R),G.getState().updateNodeDimensions([{id:n,nodeElement:W.current,forceUpdate:!0}]))},[n,r,D,R]);const Ke=jS({nodeRef:W,disabled:I||!q,noDragClassName:M,handleSelector:N,nodeId:n,isSelectable:F,selectNodesOnDrag:nt});return I?null:lt.createElement("div",{className:gn(["react-flow__node",`react-flow__node-${r}`,{[tt]:q},B,{selected:m,selectable:F,parent:A,dragging:Ke}]),ref:W,style:{zIndex:U,transform:`translate(${d}px,${g}px)`,pointerEvents:It?"all":"none",visibility:O?"visible":"hidden",...V},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:kt,onMouseMove:Pt,onMouseLeave:ue,onContextMenu:ce,onClick:ye,onDoubleClick:ve,onKeyDown:et?he:void 0,tabIndex:et?0:void 0,role:et?"button":void 0,"aria-describedby":$?void 0:`${VS}-${Y}`,"aria-label":at},lt.createElement(pN,{value:n},lt.createElement(e,{id:n,data:a,type:r,xPos:l,yPos:c,selected:m,isConnectable:H,sourcePosition:D,targetPosition:R,dragging:Ke,dragHandle:N,zIndex:U})))};return t.displayName="NodeWrapper",X.memo(t)};const nD=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Kf(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function iD({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ye(),{width:a,height:l,x:c,y:d,transformString:g,userSelectionActive:m}=me(nD,rn),y=GS(),v=X.useRef(null);if(X.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),jS({nodeRef:v}),m||!a||!l)return null;const T=e?P=>{const L=r.getState().getNodes().filter(V=>V.selected);e(P,L)}:void 0,S=P=>{Object.prototype.hasOwnProperty.call(Ko,P.key)&&y({x:Ko[P.key].x,y:Ko[P.key].y,isShiftPressed:P.shiftKey})};return lt.createElement("div",{className:gn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:g}},lt.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:T,tabIndex:n?void 0:-1,onKeyDown:n?void 0:S,style:{width:a,height:l,top:d,left:c}}))}var rD=X.memo(iD);const sD=e=>e.nodesSelectionActive,$S=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,deleteKeyCode:d,onMove:g,onMoveStart:m,onMoveEnd:y,selectionKeyCode:v,selectionOnDrag:T,selectionMode:S,onSelectionStart:P,onSelectionEnd:L,multiSelectionKeyCode:V,panActivationKeyCode:B,zoomActivationKeyCode:q,elementsSelectable:F,zoomOnScroll:H,zoomOnPinch:et,panOnScroll:nt,panOnScrollSpeed:D,panOnScrollMode:R,zoomOnDoubleClick:I,panOnDrag:k,defaultViewport:N,translateExtent:U,minZoom:A,maxZoom:M,preventScrolling:tt,onSelectionContextMenu:O,noWheelClassName:$,noPanClassName:at,disableKeyboardA11y:Y})=>{const x=me(sD),G=Yu(v),W=Yu(B),rt=W||k,ct=W||nt,mt=G||T&&rt!==!0;return jN({deleteKeyCode:d,multiSelectionKeyCode:V}),lt.createElement(KN,{onMove:g,onMoveStart:m,onMoveEnd:y,onPaneContextMenu:l,elementsSelectable:F,zoomOnScroll:H,zoomOnPinch:et,panOnScroll:ct,panOnScrollSpeed:D,panOnScrollMode:R,zoomOnDoubleClick:I,panOnDrag:!G&&rt,defaultViewport:N,translateExtent:U,minZoom:A,maxZoom:M,zoomActivationKeyCode:q,preventScrolling:tt,noWheelClassName:$,noPanClassName:at},lt.createElement(HS,{onSelectionStart:P,onSelectionEnd:L,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:rt,isSelecting:!!mt,selectionMode:S},e,x&&lt.createElement(rD,{onSelectionContextMenu:O,noPanClassName:at,disableKeyboardA11y:Y})))};$S.displayName="FlowRenderer";var aD=X.memo($S);function oD(e){return me(X.useCallback(n=>e?TS(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function lD(e){const t={input:Au(e.input||NS),default:Au(e.default||ep),output:Au(e.output||OS),group:Au(e.group||jp)},n={},r=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,l)=>(a[l]=Au(e[l]||ep),a),n);return{...t,...r}}const uD=({x:e,y:t,width:n,height:r,origin:a})=>!n||!r?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-n*a[0],y:t-r*a[1]},cD=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),YS=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:a,updateNodeDimensions:l,onError:c}=me(cD,rn),d=oD(e.onlyRenderVisibleElements),g=X.useRef(),m=X.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(v=>{const T=v.map(S=>({id:S.target.getAttribute("data-id"),nodeElement:S.target,forceUpdate:!0}));l(T)});return g.current=y,y},[]);return X.useEffect(()=>()=>{g?.current?.disconnect()},[]),lt.createElement("div",{className:"react-flow__nodes",style:$p},d.map(y=>{let v=y.type||"default";e.nodeTypes[v]||(c?.("003",qr.error003(v)),v="default");const T=e.nodeTypes[v]||e.nodeTypes.default,S=!!(y.draggable||t&&typeof y.draggable>"u"),P=!!(y.selectable||a&&typeof y.selectable>"u"),L=!!(y.connectable||n&&typeof y.connectable>"u"),V=!!(y.focusable||r&&typeof y.focusable>"u"),B=e.nodeExtent?Up(y.positionAbsolute,e.nodeExtent):y.positionAbsolute,q=B?.x??0,F=B?.y??0,H=uD({x:q,y:F,width:y.width??0,height:y.height??0,origin:e.nodeOrigin});return lt.createElement(T,{key:y.id,id:y.id,className:y.className,style:y.style,type:v,data:y.data,sourcePosition:y.sourcePosition||bt.Bottom,targetPosition:y.targetPosition||bt.Top,hidden:y.hidden,xPos:q,yPos:F,xPosOrigin:H.x,yPosOrigin:H.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!y.selected,isDraggable:S,isSelectable:P,isConnectable:L,isFocusable:V,resizeObserver:m,dragHandle:y.dragHandle,zIndex:y[Ie]?.z??0,isParent:!!y[Ie]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!y.width&&!!y.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[Ie]?.handleBounds})}))};YS.displayName="NodeRenderer";var hD=X.memo(YS);const fD=(e,t,n)=>n===bt.Left?e-t:n===bt.Right?e+t:e,dD=(e,t,n)=>n===bt.Top?e-t:n===bt.Bottom?e+t:e,GE="react-flow__edgeupdater",$E=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d})=>lt.createElement("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:gn([GE,`${GE}-${d}`]),cx:fD(t,r,e),cy:dD(n,r,e),r,stroke:"transparent",fill:"transparent"}),gD=()=>!0;var zo=e=>{const t=({id:n,className:r,type:a,data:l,onClick:c,onEdgeDoubleClick:d,selected:g,animated:m,label:y,labelStyle:v,labelShowBg:T,labelBgStyle:S,labelBgPadding:P,labelBgBorderRadius:L,style:V,source:B,target:q,sourceX:F,sourceY:H,targetX:et,targetY:nt,sourcePosition:D,targetPosition:R,elementsSelectable:I,hidden:k,sourceHandleId:N,targetHandleId:U,onContextMenu:A,onMouseEnter:M,onMouseMove:tt,onMouseLeave:O,reconnectRadius:$,onReconnect:at,onReconnectStart:Y,onReconnectEnd:x,markerEnd:G,markerStart:W,rfId:rt,ariaLabel:ct,isFocusable:mt,isReconnectable:pt,pathOptions:It,interactionWidth:At,disableKeyboardA11y:kt})=>{const Pt=X.useRef(null),[ue,ce]=X.useState(!1),[ve,ye]=X.useState(!1),he=Ye(),Ke=X.useMemo(()=>`url('#${Jm(W,rt)}')`,[W,rt]),Lt=X.useMemo(()=>`url('#${Jm(G,rt)}')`,[G,rt]);if(k)return null;const wt=Ve=>{const{edges:Xe,addSelectedEdges:Sn,unselectNodesAndEdges:bn,multiSelectionActive:Qe}=he.getState(),sn=Xe.find(An=>An.id===n);sn&&(I&&(he.setState({nodesSelectionActive:!1}),sn.selected&&Qe?(bn({nodes:[],edges:[sn]}),Pt.current?.blur()):Sn([n])),c&&c(Ve,sn))},Ce=Su(n,he.getState,d),mn=Su(n,he.getState,A),Pn=Su(n,he.getState,M),ki=Su(n,he.getState,tt),Ln=Su(n,he.getState,O),wn=(Ve,Xe)=>{if(Ve.button!==0)return;const{edges:Sn,isValidConnection:bn}=he.getState(),Qe=Xe?q:B,sn=(Xe?U:N)||null,An=Xe?"target":"source",hr=bn||gD,fr=Xe,Ei=Sn.find(zn=>zn.id===n);ye(!0),Y?.(Ve,Ei,An);const Un=zn=>{ye(!1),x?.(zn,Ei,An)};RS({event:Ve,handleId:sn,nodeId:Qe,onConnect:zn=>at?.(Ei,zn),isTarget:fr,getState:he.getState,setState:he.setState,isValidConnection:hr,edgeUpdaterType:An,onReconnectEnd:Un})},vi=Ve=>wn(Ve,!0),te=Ve=>wn(Ve,!1),Ft=()=>ce(!0),Me=()=>ce(!1),Ee=!I&&!c,Pi=Ve=>{if(!kt&&dS.includes(Ve.key)&&I){const{unselectNodesAndEdges:Xe,addSelectedEdges:Sn,edges:bn}=he.getState();Ve.key==="Escape"?(Pt.current?.blur(),Xe({edges:[bn.find(sn=>sn.id===n)]})):Sn([n])}};return lt.createElement("g",{className:gn(["react-flow__edge",`react-flow__edge-${a}`,r,{selected:g,animated:m,inactive:Ee,updating:ue}]),onClick:wt,onDoubleClick:Ce,onContextMenu:mn,onMouseEnter:Pn,onMouseMove:ki,onMouseLeave:Ln,onKeyDown:mt?Pi:void 0,tabIndex:mt?0:void 0,role:mt?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ct===null?void 0:ct||`Edge from ${B} to ${q}`,"aria-describedby":mt?`${kS}-${rt}`:void 0,ref:Pt},!ve&&lt.createElement(e,{id:n,source:B,target:q,selected:g,animated:m,label:y,labelStyle:v,labelShowBg:T,labelBgStyle:S,labelBgPadding:P,labelBgBorderRadius:L,data:l,style:V,sourceX:F,sourceY:H,targetX:et,targetY:nt,sourcePosition:D,targetPosition:R,sourceHandleId:N,targetHandleId:U,markerStart:Ke,markerEnd:Lt,pathOptions:It,interactionWidth:At}),pt&&lt.createElement(lt.Fragment,null,(pt==="source"||pt===!0)&&lt.createElement($E,{position:D,centerX:F,centerY:H,radius:$,onMouseDown:vi,onMouseEnter:Ft,onMouseOut:Me,type:"source"}),(pt==="target"||pt===!0)&&lt.createElement($E,{position:R,centerX:et,centerY:nt,radius:$,onMouseDown:te,onMouseEnter:Ft,onMouseOut:Me,type:"target"})))};return t.displayName="EdgeWrapper",X.memo(t)};function mD(e){const t={default:zo(e.default||Ef),straight:zo(e.bezier||Hp),step:zo(e.step||Bp),smoothstep:zo(e.step||Yf),simplebezier:zo(e.simplebezier||zp)},n={},r=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,l)=>(a[l]=zo(e[l]||Ef),a),n);return{...t,...r}}function YE(e,t,n=null){const r=(n?.x||0)+t.x,a=(n?.y||0)+t.y,l=n?.width||t.width,c=n?.height||t.height;switch(e){case bt.Top:return{x:r+l/2,y:a};case bt.Right:return{x:r+l,y:a+c/2};case bt.Bottom:return{x:r+l/2,y:a+c};case bt.Left:return{x:r,y:a+c/2}}}function KE(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const pD=(e,t,n,r,a,l)=>{const c=YE(n,e,t),d=YE(l,r,a);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y}};function yD({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:a,targetHeight:l,width:c,height:d,transform:g}){const m={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+a),y2:Math.max(e.y+r,t.y+l)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const y=Gu({x:(0-g[0])/g[2],y:(0-g[1])/g[2],width:c/g[2],height:d/g[2]}),v=Math.max(0,Math.min(y.x2,m.x2)-Math.max(y.x,m.x)),T=Math.max(0,Math.min(y.y2,m.y2)-Math.max(y.y,m.y));return Math.ceil(v*T)>0}function XE(e){const t=e?.[Ie]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const _D=[{level:0,isMaxLevel:!0,edges:[]}];function vD(e,t,n=!1){let r=-1;const a=e.reduce((c,d)=>{const g=_i(d.zIndex);let m=g?d.zIndex:0;if(n){const y=t.get(d.target),v=t.get(d.source),T=d.selected||y?.selected||v?.selected,S=Math.max(v?.[Ie]?.z||0,y?.[Ie]?.z||0,1e3);m=(g?d.zIndex:0)+(T?S:0)}return c[m]?c[m].push(d):c[m]=[d],r=m>r?m:r,c},{}),l=Object.entries(a).map(([c,d])=>{const g=+c;return{edges:d,level:g,isMaxLevel:g===r}});return l.length===0?_D:l}function ED(e,t,n){const r=me(X.useCallback(a=>e?a.edges.filter(l=>{const c=t.get(l.source),d=t.get(l.target);return c?.width&&c?.height&&d?.width&&d?.height&&yD({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:d.width,targetHeight:d.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return vD(r,t,n)}const TD=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),wD=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),QE={[vf.Arrow]:TD,[vf.ArrowClosed]:wD};function SD(e){const t=Ye();return X.useMemo(()=>Object.prototype.hasOwnProperty.call(QE,e)?QE[e]:(t.getState().onError?.("009",qr.error009(e)),null),[e])}const bD=({id:e,type:t,color:n,width:r=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const g=SD(t);return g?lt.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0"},lt.createElement(g,{color:n,strokeWidth:c})):null},AD=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((a,l)=>([l.markerStart,l.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const d=Jm(c,t);r.includes(d)||(a.push({id:d,color:c.color||e,...c}),r.push(d))}}),a),[]).sort((a,l)=>a.id.localeCompare(l.id))},KS=({defaultColor:e,rfId:t})=>{const n=me(X.useCallback(AD({defaultColor:e,rfId:t}),[e,t]),(r,a)=>!(r.length!==a.length||r.some((l,c)=>l.id!==a[c].id)));return lt.createElement("defs",null,n.map(r=>lt.createElement(bD,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};KS.displayName="MarkerDefinitions";var RD=X.memo(KS);const ID=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),XS=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:a,noPanClassName:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:g,onEdgeMouseLeave:m,onEdgeClick:y,onEdgeDoubleClick:v,onReconnect:T,onReconnectStart:S,onReconnectEnd:P,reconnectRadius:L,children:V,disableKeyboardA11y:B})=>{const{edgesFocusable:q,edgesUpdatable:F,elementsSelectable:H,width:et,height:nt,connectionMode:D,nodeInternals:R,onError:I}=me(ID,rn),k=ED(t,R,n);return et?lt.createElement(lt.Fragment,null,k.map(({level:N,edges:U,isMaxLevel:A})=>lt.createElement("svg",{key:N,style:{zIndex:N},width:et,height:nt,className:"react-flow__edges react-flow__container"},A&&lt.createElement(RD,{defaultColor:e,rfId:r}),lt.createElement("g",null,U.map(M=>{const[tt,O,$]=XE(R.get(M.source)),[at,Y,x]=XE(R.get(M.target));if(!$||!x)return null;let G=M.type||"default";a[G]||(I?.("011",qr.error011(G)),G="default");const W=a[G]||a.default,rt=D===Us.Strict?Y.target:(Y.target??[]).concat(Y.source??[]),ct=KE(O.source,M.sourceHandle),mt=KE(rt,M.targetHandle),pt=ct?.position||bt.Bottom,It=mt?.position||bt.Top,At=!!(M.focusable||q&&typeof M.focusable>"u"),kt=M.reconnectable||M.updatable,Pt=typeof T<"u"&&(kt||F&&typeof kt>"u");if(!ct||!mt)return I?.("008",qr.error008(ct,M)),null;const{sourceX:ue,sourceY:ce,targetX:ve,targetY:ye}=pD(tt,ct,pt,at,mt,It);return lt.createElement(W,{key:M.id,id:M.id,className:gn([M.className,l]),type:G,data:M.data,selected:!!M.selected,animated:!!M.animated,hidden:!!M.hidden,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,style:M.style,source:M.source,target:M.target,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerEnd:M.markerEnd,markerStart:M.markerStart,sourceX:ue,sourceY:ce,targetX:ve,targetY:ye,sourcePosition:pt,targetPosition:It,elementsSelectable:H,onContextMenu:c,onMouseEnter:d,onMouseMove:g,onMouseLeave:m,onClick:y,onEdgeDoubleClick:v,onReconnect:T,onReconnectStart:S,onReconnectEnd:P,reconnectRadius:L,rfId:r,ariaLabel:M.ariaLabel,isFocusable:At,isReconnectable:Pt,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth,disableKeyboardA11y:B})})))),V):null};XS.displayName="EdgeRenderer";var CD=X.memo(XS);const xD=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function ND({children:e}){const t=me(xD);return lt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function DD(e){const t=Gp(),n=X.useRef(!1);X.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const OD={[bt.Left]:bt.Right,[bt.Right]:bt.Left,[bt.Top]:bt.Bottom,[bt.Bottom]:bt.Top},QS=({nodeId:e,handleType:t,style:n,type:r=As.Bezier,CustomComponent:a,connectionStatus:l})=>{const{fromNode:c,handleId:d,toX:g,toY:m,connectionMode:y}=me(X.useCallback(nt=>({fromNode:nt.nodeInternals.get(e),handleId:nt.connectionHandleId,toX:(nt.connectionPosition.x-nt.transform[0])/nt.transform[2],toY:(nt.connectionPosition.y-nt.transform[1])/nt.transform[2],connectionMode:nt.connectionMode}),[e]),rn),v=c?.[Ie]?.handleBounds;let T=v?.[t];if(y===Us.Loose&&(T=T||v?.[t==="source"?"target":"source"]),!c||!T)return null;const S=d?T.find(nt=>nt.id===d):T[0],P=S?S.x+S.width/2:(c.width??0)/2,L=S?S.y+S.height/2:c.height??0,V=(c.positionAbsolute?.x??0)+P,B=(c.positionAbsolute?.y??0)+L,q=S?.position,F=q?OD[q]:null;if(!q||!F)return null;if(a)return lt.createElement(a,{connectionLineType:r,connectionLineStyle:n,fromNode:c,fromHandle:S,fromX:V,fromY:B,toX:g,toY:m,fromPosition:q,toPosition:F,connectionStatus:l});let H="";const et={sourceX:V,sourceY:B,sourcePosition:q,targetX:g,targetY:m,targetPosition:F};return r===As.Bezier?[H]=_S(et):r===As.Step?[H]=Wm({...et,borderRadius:0}):r===As.SmoothStep?[H]=Wm(et):r===As.SimpleBezier?[H]=yS(et):H=`M${V},${B} ${g},${m}`,lt.createElement("path",{d:H,fill:"none",className:"react-flow__connection-path",style:n})};QS.displayName="ConnectionLine";const MD=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function VD({containerStyle:e,style:t,type:n,component:r}){const{nodeId:a,handleType:l,nodesConnectable:c,width:d,height:g,connectionStatus:m}=me(MD,rn);return!(a&&l&&d&&c)?null:lt.createElement("svg",{style:e,width:d,height:g,className:"react-flow__edges react-flow__connectionline react-flow__container"},lt.createElement("g",{className:gn(["react-flow__connection",m])},lt.createElement(QS,{nodeId:a,handleType:l,style:t,type:n,CustomComponent:r,connectionStatus:m})))}function ZE(e,t){return X.useRef(null),Ye(),X.useMemo(()=>t(e),[e])}const ZS=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:a,onInit:l,onNodeClick:c,onEdgeClick:d,onNodeDoubleClick:g,onEdgeDoubleClick:m,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:T,onNodeContextMenu:S,onSelectionContextMenu:P,onSelectionStart:L,onSelectionEnd:V,connectionLineType:B,connectionLineStyle:q,connectionLineComponent:F,connectionLineContainerStyle:H,selectionKeyCode:et,selectionOnDrag:nt,selectionMode:D,multiSelectionKeyCode:R,panActivationKeyCode:I,zoomActivationKeyCode:k,deleteKeyCode:N,onlyRenderVisibleElements:U,elementsSelectable:A,selectNodesOnDrag:M,defaultViewport:tt,translateExtent:O,minZoom:$,maxZoom:at,preventScrolling:Y,defaultMarkerColor:x,zoomOnScroll:G,zoomOnPinch:W,panOnScroll:rt,panOnScrollSpeed:ct,panOnScrollMode:mt,zoomOnDoubleClick:pt,panOnDrag:It,onPaneClick:At,onPaneMouseEnter:kt,onPaneMouseMove:Pt,onPaneMouseLeave:ue,onPaneScroll:ce,onPaneContextMenu:ve,onEdgeContextMenu:ye,onEdgeMouseEnter:he,onEdgeMouseMove:Ke,onEdgeMouseLeave:Lt,onReconnect:wt,onReconnectStart:Ce,onReconnectEnd:mn,reconnectRadius:Pn,noDragClassName:ki,noWheelClassName:Ln,noPanClassName:wn,elevateEdgesOnSelect:vi,disableKeyboardA11y:te,nodeOrigin:Ft,nodeExtent:Me,rfId:Ee})=>{const Pi=ZE(e,lD),Ve=ZE(t,mD);return DD(l),lt.createElement(aD,{onPaneClick:At,onPaneMouseEnter:kt,onPaneMouseMove:Pt,onPaneMouseLeave:ue,onPaneContextMenu:ve,onPaneScroll:ce,deleteKeyCode:N,selectionKeyCode:et,selectionOnDrag:nt,selectionMode:D,onSelectionStart:L,onSelectionEnd:V,multiSelectionKeyCode:R,panActivationKeyCode:I,zoomActivationKeyCode:k,elementsSelectable:A,onMove:n,onMoveStart:r,onMoveEnd:a,zoomOnScroll:G,zoomOnPinch:W,zoomOnDoubleClick:pt,panOnScroll:rt,panOnScrollSpeed:ct,panOnScrollMode:mt,panOnDrag:It,defaultViewport:tt,translateExtent:O,minZoom:$,maxZoom:at,onSelectionContextMenu:P,preventScrolling:Y,noDragClassName:ki,noWheelClassName:Ln,noPanClassName:wn,disableKeyboardA11y:te},lt.createElement(ND,null,lt.createElement(CD,{edgeTypes:Ve,onEdgeClick:d,onEdgeDoubleClick:m,onlyRenderVisibleElements:U,onEdgeContextMenu:ye,onEdgeMouseEnter:he,onEdgeMouseMove:Ke,onEdgeMouseLeave:Lt,onReconnect:wt,onReconnectStart:Ce,onReconnectEnd:mn,reconnectRadius:Pn,defaultMarkerColor:x,noPanClassName:wn,elevateEdgesOnSelect:!!vi,disableKeyboardA11y:te,rfId:Ee},lt.createElement(VD,{style:q,type:B,component:F,containerStyle:H})),lt.createElement("div",{className:"react-flow__edgelabel-renderer"}),lt.createElement(hD,{nodeTypes:Pi,onNodeClick:c,onNodeDoubleClick:g,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:T,onNodeContextMenu:S,selectNodesOnDrag:M,onlyRenderVisibleElements:U,noPanClassName:wn,noDragClassName:ki,disableKeyboardA11y:te,nodeOrigin:Ft,nodeExtent:Me,rfId:Ee})))};ZS.displayName="GraphView";var kD=X.memo(ZS);const ip=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ts={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:ip,nodeExtent:ip,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Us.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:cN,isValidConnection:void 0},PD=()=>AI((e,t)=>({...Ts,setNodes:n=>{const{nodeInternals:r,nodeOrigin:a,elevateNodesOnSelect:l}=t();e({nodeInternals:Rm(n,r,a,l)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(a=>({...r,...a}))})},setDefaultNodesAndEdges:(n,r)=>{const a=typeof n<"u",l=typeof r<"u",c=a?Rm(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:c,edges:l?r:[],hasDefaultNodes:a,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:a,fitViewOnInit:l,fitViewOnInitDone:c,fitViewOnInitOptions:d,domNode:g,nodeOrigin:m}=t(),y=g?.querySelector(".react-flow__viewport");if(!y)return;const v=window.getComputedStyle(y),{m22:T}=new window.DOMMatrixReadOnly(v.transform),S=n.reduce((L,V)=>{const B=a.get(V.id);if(B?.hidden)a.set(B.id,{...B,[Ie]:{...B[Ie],handleBounds:void 0}});else if(B){const q=Lp(V.nodeElement);!!(q.width&&q.height&&(B.width!==q.width||B.height!==q.height||V.forceUpdate))&&(a.set(B.id,{...B,[Ie]:{...B[Ie],handleBounds:{source:jE(".source",V.nodeElement,T,m),target:jE(".target",V.nodeElement,T,m)}},...q}),L.push({id:B.id,type:"dimensions",dimensions:q}))}return L},[]);LS(a,m);const P=c||l&&!c&&US(t,{initial:!0,...d});e({nodeInternals:new Map(a),fitViewOnInitDone:P}),S?.length>0&&r?.(S)},updateNodePositions:(n,r=!0,a=!1)=>{const{triggerNodeChanges:l}=t(),c=n.map(d=>{const g={id:d.id,type:"position",dragging:a};return r&&(g.positionAbsolute=d.positionAbsolute,g.position=d.position),g});l(c)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:a,hasDefaultNodes:l,nodeOrigin:c,getNodes:d,elevateNodesOnSelect:g}=t();if(n?.length){if(l){const m=BS(n,d()),y=Rm(m,a,c,g);e({nodeInternals:y})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:a,getNodes:l}=t();let c,d=null;r?c=n.map(g=>bs(g,!0)):(c=jo(l(),n),d=jo(a,[])),Hh({changedNodes:c,changedEdges:d,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:a,getNodes:l}=t();let c,d=null;r?c=n.map(g=>bs(g,!0)):(c=jo(a,n),d=jo(l(),[])),Hh({changedNodes:d,changedEdges:c,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:a,getNodes:l}=t(),c=n||l(),d=r||a,g=c.map(y=>(y.selected=!1,bs(y.id,!1))),m=d.map(y=>bs(y.id,!1));Hh({changedNodes:g,changedEdges:m,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:a}=t();r?.scaleExtent([n,a]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:a}=t();r?.scaleExtent([a,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),l=r().filter(d=>d.selected).map(d=>bs(d.id,!1)),c=n.filter(d=>d.selected).map(d=>bs(d.id,!1));Hh({changedNodes:l,changedEdges:c,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(a=>{a.positionAbsolute=Up(a.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:a,height:l,d3Zoom:c,d3Selection:d,translateExtent:g}=t();if(!c||!d||!n.x&&!n.y)return!1;const m=zr.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),y=[[0,0],[a,l]],v=c?.constrain()(m,y,g);return c.transform(d,v),r[0]!==v.x||r[1]!==v.y||r[2]!==v.k},cancelConnection:()=>e({connectionNodeId:Ts.connectionNodeId,connectionHandleId:Ts.connectionHandleId,connectionHandleType:Ts.connectionHandleType,connectionStatus:Ts.connectionStatus,connectionStartHandle:Ts.connectionStartHandle,connectionEndHandle:Ts.connectionEndHandle}),reset:()=>e({...Ts})}),Object.is),WS=({children:e})=>{const t=X.useRef(null);return t.current||(t.current=PD()),lt.createElement(iN,{value:t.current},e)};WS.displayName="ReactFlowProvider";const JS=({children:e})=>X.useContext($f)?lt.createElement(lt.Fragment,null,e):lt.createElement(WS,null,e);JS.displayName="ReactFlowWrapper";const LD={input:NS,default:ep,output:OS,group:jp},UD={default:Ef,straight:Hp,step:Bp,smoothstep:Yf,simplebezier:zp},zD=[0,0],BD=[15,15],HD={x:0,y:0,zoom:1},qD={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},t1=X.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:a,nodeTypes:l=LD,edgeTypes:c=UD,onNodeClick:d,onEdgeClick:g,onInit:m,onMove:y,onMoveStart:v,onMoveEnd:T,onConnect:S,onConnectStart:P,onConnectEnd:L,onClickConnectStart:V,onClickConnectEnd:B,onNodeMouseEnter:q,onNodeMouseMove:F,onNodeMouseLeave:H,onNodeContextMenu:et,onNodeDoubleClick:nt,onNodeDragStart:D,onNodeDrag:R,onNodeDragStop:I,onNodesDelete:k,onEdgesDelete:N,onSelectionChange:U,onSelectionDragStart:A,onSelectionDrag:M,onSelectionDragStop:tt,onSelectionContextMenu:O,onSelectionStart:$,onSelectionEnd:at,connectionMode:Y=Us.Strict,connectionLineType:x=As.Bezier,connectionLineStyle:G,connectionLineComponent:W,connectionLineContainerStyle:rt,deleteKeyCode:ct="Backspace",selectionKeyCode:mt="Shift",selectionOnDrag:pt=!1,selectionMode:It=$u.Full,panActivationKeyCode:At="Space",multiSelectionKeyCode:kt=_f()?"Meta":"Control",zoomActivationKeyCode:Pt=_f()?"Meta":"Control",snapToGrid:ue=!1,snapGrid:ce=BD,onlyRenderVisibleElements:ve=!1,selectNodesOnDrag:ye=!0,nodesDraggable:he,nodesConnectable:Ke,nodesFocusable:Lt,nodeOrigin:wt=zD,edgesFocusable:Ce,edgesUpdatable:mn,elementsSelectable:Pn,defaultViewport:ki=HD,minZoom:Ln=.5,maxZoom:wn=2,translateExtent:vi=ip,preventScrolling:te=!0,nodeExtent:Ft,defaultMarkerColor:Me="#b1b1b7",zoomOnScroll:Ee=!0,zoomOnPinch:Pi=!0,panOnScroll:Ve=!1,panOnScrollSpeed:Xe=.5,panOnScrollMode:Sn=Ia.Free,zoomOnDoubleClick:bn=!0,panOnDrag:Qe=!0,onPaneClick:sn,onPaneMouseEnter:An,onPaneMouseMove:hr,onPaneMouseLeave:fr,onPaneScroll:Ei,onPaneContextMenu:Un,children:Zn,onEdgeContextMenu:zn,onEdgeDoubleClick:Wn,onEdgeMouseEnter:Ys,onEdgeMouseMove:Li,onEdgeMouseLeave:Xr,onEdgeUpdate:Ui,onEdgeUpdateStart:Ga,onEdgeUpdateEnd:de,onReconnect:xe,onReconnectStart:be,onReconnectEnd:Nn,reconnectRadius:Ks=10,edgeUpdaterRadius:El=10,onNodesChange:zi,onEdgesChange:$a,noDragClassName:dr="nodrag",noWheelClassName:Bi="nowheel",noPanClassName:Jn="nopan",fitView:ti=!1,fitViewOptions:ei,connectOnClick:an=!0,attributionPosition:Te,proOptions:Xs,defaultEdgeOptions:Qr,elevateNodesOnSelect:Bn=!0,elevateEdgesOnSelect:Ti=!1,disableKeyboardA11y:Qs=!1,autoPanOnConnect:Ya=!0,autoPanOnNodeDrag:gr=!0,connectionRadius:Ka=20,isValidConnection:Hi,onError:ni,style:Be,id:qi,nodeDragThreshold:Xa,...wi},Zr)=>{const Fi=qi||"1";return lt.createElement("div",{...wi,style:{...Be,...qD},ref:Zr,className:gn(["react-flow",a]),"data-testid":"rf__wrapper",id:qi},lt.createElement(JS,null,lt.createElement(kD,{onInit:m,onMove:y,onMoveStart:v,onMoveEnd:T,onNodeClick:d,onEdgeClick:g,onNodeMouseEnter:q,onNodeMouseMove:F,onNodeMouseLeave:H,onNodeContextMenu:et,onNodeDoubleClick:nt,nodeTypes:l,edgeTypes:c,connectionLineType:x,connectionLineStyle:G,connectionLineComponent:W,connectionLineContainerStyle:rt,selectionKeyCode:mt,selectionOnDrag:pt,selectionMode:It,deleteKeyCode:ct,multiSelectionKeyCode:kt,panActivationKeyCode:At,zoomActivationKeyCode:Pt,onlyRenderVisibleElements:ve,selectNodesOnDrag:ye,defaultViewport:ki,translateExtent:vi,minZoom:Ln,maxZoom:wn,preventScrolling:te,zoomOnScroll:Ee,zoomOnPinch:Pi,zoomOnDoubleClick:bn,panOnScroll:Ve,panOnScrollSpeed:Xe,panOnScrollMode:Sn,panOnDrag:Qe,onPaneClick:sn,onPaneMouseEnter:An,onPaneMouseMove:hr,onPaneMouseLeave:fr,onPaneScroll:Ei,onPaneContextMenu:Un,onSelectionContextMenu:O,onSelectionStart:$,onSelectionEnd:at,onEdgeContextMenu:zn,onEdgeDoubleClick:Wn,onEdgeMouseEnter:Ys,onEdgeMouseMove:Li,onEdgeMouseLeave:Xr,onReconnect:xe??Ui,onReconnectStart:be??Ga,onReconnectEnd:Nn??de,reconnectRadius:Ks??El,defaultMarkerColor:Me,noDragClassName:dr,noWheelClassName:Bi,noPanClassName:Jn,elevateEdgesOnSelect:Ti,rfId:Fi,disableKeyboardA11y:Qs,nodeOrigin:wt,nodeExtent:Ft}),lt.createElement(ON,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:S,onConnectStart:P,onConnectEnd:L,onClickConnectStart:V,onClickConnectEnd:B,nodesDraggable:he,nodesConnectable:Ke,nodesFocusable:Lt,edgesFocusable:Ce,edgesUpdatable:mn,elementsSelectable:Pn,elevateNodesOnSelect:Bn,minZoom:Ln,maxZoom:wn,nodeExtent:Ft,onNodesChange:zi,onEdgesChange:$a,snapToGrid:ue,snapGrid:ce,connectionMode:Y,translateExtent:vi,connectOnClick:an,defaultEdgeOptions:Qr,fitView:ti,fitViewOptions:ei,onNodesDelete:k,onEdgesDelete:N,onNodeDragStart:D,onNodeDrag:R,onNodeDragStop:I,onSelectionDrag:M,onSelectionDragStart:A,onSelectionDragStop:tt,noPanClassName:Jn,nodeOrigin:wt,rfId:Fi,autoPanOnConnect:Ya,autoPanOnNodeDrag:gr,onError:ni,connectionRadius:Ka,isValidConnection:Hi,nodeDragThreshold:Xa}),lt.createElement(NN,{onSelectionChange:U}),Zn,lt.createElement(sN,{proOptions:Xs,position:Te}),lt.createElement(LN,{rfId:Fi,disableKeyboardA11y:Qs})))});t1.displayName="ReactFlow";function e1(e){return t=>{const[n,r]=X.useState(t),a=X.useCallback(l=>r(c=>e(l,c)),[]);return[n,r,a]}}const FD=e1(BS),jD=e1(ZN),n1=({id:e,x:t,y:n,width:r,height:a,style:l,color:c,strokeColor:d,strokeWidth:g,className:m,borderRadius:y,shapeRendering:v,onClick:T,selected:S})=>{const{background:P,backgroundColor:L}=l||{},V=c||P||L;return lt.createElement("rect",{className:gn(["react-flow__minimap-node",{selected:S},m]),x:t,y:n,rx:y,ry:y,width:r,height:a,fill:V,stroke:d,strokeWidth:g,shapeRendering:v,onClick:T?B=>T(B,e):void 0})};n1.displayName="MiniMapNode";var GD=X.memo(n1);const $D=e=>e.nodeOrigin,YD=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Nm=e=>e instanceof Function?e:()=>e;function KD({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:a=2,nodeComponent:l=GD,onClick:c}){const d=me(YD,rn),g=me($D),m=Nm(t),y=Nm(e),v=Nm(n),T=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return lt.createElement(lt.Fragment,null,d.map(S=>{const{x:P,y:L}=Na(S,g).positionAbsolute;return lt.createElement(l,{key:S.id,x:P,y:L,width:S.width,height:S.height,style:S.style,selected:S.selected,className:v(S),color:m(S),borderRadius:r,strokeColor:y(S),strokeWidth:a,shapeRendering:T,onClick:c,id:S.id})}))}var XD=X.memo(KD);const QD=200,ZD=150,WD=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?lN(Kf(t,e.nodeOrigin),n):n,rfId:e.rfId}},JD="react-flow__minimap-desc";function i1({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:a="",nodeBorderRadius:l=5,nodeStrokeWidth:c=2,nodeComponent:d,maskColor:g="rgb(240, 240, 240, 0.6)",maskStrokeColor:m="none",maskStrokeWidth:y=1,position:v="bottom-right",onClick:T,onNodeClick:S,pannable:P=!1,zoomable:L=!1,ariaLabel:V="React Flow mini map",inversePan:B=!1,zoomStep:q=10,offsetScale:F=5}){const H=Ye(),et=X.useRef(null),{boundingRect:nt,viewBB:D,rfId:R}=me(WD,rn),I=e?.width??QD,k=e?.height??ZD,N=nt.width/I,U=nt.height/k,A=Math.max(N,U),M=A*I,tt=A*k,O=F*A,$=nt.x-(M-nt.width)/2-O,at=nt.y-(tt-nt.height)/2-O,Y=M+O*2,x=tt+O*2,G=`${JD}-${R}`,W=X.useRef(0);W.current=A,X.useEffect(()=>{if(et.current){const mt=mi(et.current),pt=kt=>{const{transform:Pt,d3Selection:ue,d3Zoom:ce}=H.getState();if(kt.sourceEvent.type!=="wheel"||!ue||!ce)return;const ve=-kt.sourceEvent.deltaY*(kt.sourceEvent.deltaMode===1?.05:kt.sourceEvent.deltaMode?1:.002)*q,ye=Pt[2]*Math.pow(2,ve);ce.scaleTo(ue,ye)},It=kt=>{const{transform:Pt,d3Selection:ue,d3Zoom:ce,translateExtent:ve,width:ye,height:he}=H.getState();if(kt.sourceEvent.type!=="mousemove"||!ue||!ce)return;const Ke=W.current*Math.max(1,Pt[2])*(B?-1:1),Lt={x:Pt[0]-kt.sourceEvent.movementX*Ke,y:Pt[1]-kt.sourceEvent.movementY*Ke},wt=[[0,0],[ye,he]],Ce=zr.translate(Lt.x,Lt.y).scale(Pt[2]),mn=ce.constrain()(Ce,wt,ve);ce.transform(ue,mn)},At=oS().on("zoom",P?It:null).on("zoom.wheel",L?pt:null);return mt.call(At),()=>{mt.on("zoom",null)}}},[P,L,B,q]);const rt=T?mt=>{const pt=Ii(mt);T(mt,{x:pt[0],y:pt[1]})}:void 0,ct=S?(mt,pt)=>{const It=H.getState().nodeInternals.get(pt);S(mt,It)}:void 0;return lt.createElement(Pp,{position:v,style:e,className:gn(["react-flow__minimap",t]),"data-testid":"rf__minimap"},lt.createElement("svg",{width:I,height:k,viewBox:`${$} ${at} ${Y} ${x}`,role:"img","aria-labelledby":G,ref:et,onClick:rt},V&&lt.createElement("title",{id:G},V),lt.createElement(XD,{onClick:ct,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:l,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:d}),lt.createElement("path",{className:"react-flow__minimap-mask",d:`M${$-O},${at-O}h${Y+O*2}v${x+O*2}h${-Y-O*2}z
        M${D.x},${D.y}h${D.width}v${D.height}h${-D.width}z`,fill:g,fillRule:"evenodd",stroke:m,strokeWidth:y,pointerEvents:"none"})))}i1.displayName="MiniMap";var tO=X.memo(i1);function eO(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},lt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function nO(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},lt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function iO(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},lt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function rO(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function sO(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Cu=({children:e,className:t,...n})=>lt.createElement("button",{type:"button",className:gn(["react-flow__controls-button",t]),...n},e);Cu.displayName="ControlButton";const aO=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),r1=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:g,className:m,children:y,position:v="bottom-left"})=>{const T=Ye(),[S,P]=X.useState(!1),{isInteractive:L,minZoomReached:V,maxZoomReached:B}=me(aO,rn),{zoomIn:q,zoomOut:F,fitView:H}=Gp();if(X.useEffect(()=>{P(!0)},[]),!S)return null;const et=()=>{q(),l?.()},nt=()=>{F(),c?.()},D=()=>{H(a),d?.()},R=()=>{T.setState({nodesDraggable:!L,nodesConnectable:!L,elementsSelectable:!L}),g?.(!L)};return lt.createElement(Pp,{className:gn(["react-flow__controls",m]),position:v,style:e,"data-testid":"rf__controls"},t&&lt.createElement(lt.Fragment,null,lt.createElement(Cu,{onClick:et,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:B},lt.createElement(eO,null)),lt.createElement(Cu,{onClick:nt,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:V},lt.createElement(nO,null))),n&&lt.createElement(Cu,{className:"react-flow__controls-fitview",onClick:D,title:"fit view","aria-label":"fit view"},lt.createElement(iO,null)),r&&lt.createElement(Cu,{className:"react-flow__controls-interactive",onClick:R,title:"toggle interactivity","aria-label":"toggle interactivity"},L?lt.createElement(sO,null):lt.createElement(rO,null)),y)};r1.displayName="Controls";var oO=X.memo(r1),Di;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Di||(Di={}));function lO({color:e,dimensions:t,lineWidth:n}){return lt.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function uO({color:e,radius:t}){return lt.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const cO={[Di.Dots]:"#91919a",[Di.Lines]:"#eee",[Di.Cross]:"#e2e2e2"},hO={[Di.Dots]:1,[Di.Lines]:1,[Di.Cross]:6},fO=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function s1({id:e,variant:t=Di.Dots,gap:n=20,size:r,lineWidth:a=1,offset:l=2,color:c,style:d,className:g}){const m=X.useRef(null),{transform:y,patternId:v}=me(fO,rn),T=c||cO[t],S=r||hO[t],P=t===Di.Dots,L=t===Di.Cross,V=Array.isArray(n)?n:[n,n],B=[V[0]*y[2]||1,V[1]*y[2]||1],q=S*y[2],F=L?[q,q]:B,H=P?[q/l,q/l]:[F[0]/l,F[1]/l];return lt.createElement("svg",{className:gn(["react-flow__background",g]),style:{...d,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:m,"data-testid":"rf__background"},lt.createElement("pattern",{id:v+e,x:y[0]%B[0],y:y[1]%B[1],width:B[0],height:B[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${H[0]},-${H[1]})`},P?lt.createElement(uO,{color:T,radius:q/l}):lt.createElement(lO,{dimensions:F,color:T,lineWidth:a})),lt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+e})`}))}s1.displayName="Background";var dO=X.memo(s1);const gO=()=>{};var WE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=a&63|128):(a&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=a&63|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=a&63|128)}return t},mO=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=e[n++];t[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=e[n++],c=e[n++],d=e[n++],g=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const l=e[n++],c=e[n++];t[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},o1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<e.length;a+=3){const l=e[a],c=a+1<e.length,d=c?e[a+1]:0,g=a+2<e.length,m=g?e[a+2]:0,y=l>>2,v=(l&3)<<4|d>>4;let T=(d&15)<<2|m>>6,S=m&63;g||(S=64,c||(T=64)),r.push(n[y],n[v],n[T],n[S])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a1(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):mO(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<e.length;){const l=n[e.charAt(a++)],d=a<e.length?n[e.charAt(a)]:0;++a;const m=a<e.length?n[e.charAt(a)]:64;++a;const v=a<e.length?n[e.charAt(a)]:64;if(++a,l==null||d==null||m==null||v==null)throw new pO;const T=l<<2|d>>4;if(r.push(T),m!==64){const S=d<<4&240|m>>2;if(r.push(S),v!==64){const P=m<<6&192|v;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class pO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yO=function(e){const t=a1(e);return o1.encodeByteArray(t,!0)},Tf=function(e){return yO(e).replace(/\./g,"")},l1=function(e){try{return o1.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=()=>_O().__FIREBASE_DEFAULTS__,EO=()=>{if(typeof process>"u"||typeof WE>"u")return;const e=WE.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},TO=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&l1(e[1]);return t&&JSON.parse(t)},Xf=()=>{try{return gO()||vO()||EO()||TO()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},u1=e=>{var t,n;return(n=(t=Xf())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},wO=e=>{const t=u1(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},c1=()=>{var e;return(e=Xf())===null||e===void 0?void 0:e.config},h1=e=>{var t;return(t=Xf())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(e){return e.endsWith(".cloudworkstations.dev")}async function f1(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",a=e.iat||0,l=e.sub||e.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Tf(JSON.stringify(n)),Tf(JSON.stringify(c)),""].join(".")}const Vu={};function AO(){const e={prod:[],emulator:[]};for(const t of Object.keys(Vu))Vu[t]?e.emulator.push(t):e.prod.push(t);return e}function RO(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let JE=!1;function d1(e,t){if(typeof window>"u"||typeof document>"u"||!hl(window.location.host)||Vu[e]===t||Vu[e]||JE)return;Vu[e]=t;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",l=AO().prod.length>0;function c(){const T=document.getElementById(r);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,S){T.setAttribute("width","24"),T.setAttribute("id",S),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{JE=!0,c()},T}function y(T,S){T.setAttribute("id",S),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=RO(r),S=n("text"),P=document.getElementById(S)||document.createElement("span"),L=n("learnmore"),V=document.getElementById(L)||document.createElement("a"),B=n("preprendIcon"),q=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const F=T.element;d(F),y(V,L);const H=m();g(q,B),F.append(q,P,V,H),document.body.appendChild(F)}l?(P.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function CO(){var e;const t=(e=Xf())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NO(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function DO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OO(){const e=Tn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function MO(){return!CO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VO(){try{return typeof indexedDB=="object"}catch{return!1}}function kO(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;t(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO="FirebaseError";class Kr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=PO,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lc.prototype.create)}}class lc{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?LO(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Kr(a,d,r)}}function LO(e,t){return e.replace(UO,(n,r)=>{const a=t[r];return a!=null?String(a):`<${r}?>`})}const UO=/\{\$([^}]+)}/g;function zO(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ma(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const a of n){if(!r.includes(a))return!1;const l=e[a],c=t[a];if(tT(l)&&tT(c)){if(!Ma(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function tT(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(a=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function xu(e){const t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");t[decodeURIComponent(a)]=decodeURIComponent(l)}}),t}function Nu(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function BO(e,t){const n=new HO(e,t);return n.subscribe.bind(n)}class HO{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let a;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qO(t,["next","error","complete"])?a=t:a={next:t,error:n,complete:r},a.next===void 0&&(a.next=Dm),a.error===void 0&&(a.error=Dm),a.complete===void 0&&(a.complete=Dm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qO(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Dm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(e){return e&&e._delegate?e._delegate:e}class Va{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new SO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t?.identifier),a=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(GO(t))try{this.getOrInitializeService({instanceIdentifier:ba})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(t=ba){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ba){return this.instances.has(t)}getOptions(t=ba){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(t,n){var r;const a=this.normalizeInstanceIdentifier(n),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(t),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&t(c,a),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jO(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ba){return this.component?this.component.multipleInstances?t:ba:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jO(e){return e===ba?void 0:e}function GO(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new FO(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})($t||($t={}));const YO={debug:$t.DEBUG,verbose:$t.VERBOSE,info:$t.INFO,warn:$t.WARN,error:$t.ERROR,silent:$t.SILENT},KO=$t.INFO,XO={[$t.DEBUG]:"log",[$t.VERBOSE]:"log",[$t.INFO]:"info",[$t.WARN]:"warn",[$t.ERROR]:"error"},QO=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),a=XO[t];if(a)console[a](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Yp{constructor(t){this.name=t,this._logLevel=KO,this._logHandler=QO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in $t))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?YO[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,$t.DEBUG,...t),this._logHandler(this,$t.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,$t.VERBOSE,...t),this._logHandler(this,$t.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,$t.INFO,...t),this._logHandler(this,$t.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,$t.WARN,...t),this._logHandler(this,$t.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,$t.ERROR,...t),this._logHandler(this,$t.ERROR,...t)}}const ZO=(e,t)=>t.some(n=>e instanceof n);let eT,nT;function WO(){return eT||(eT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JO(){return nT||(nT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const g1=new WeakMap,rp=new WeakMap,m1=new WeakMap,Om=new WeakMap,Kp=new WeakMap;function tM(e){const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("success",l),e.removeEventListener("error",c)},l=()=>{n(Os(e.result)),a()},c=()=>{r(e.error),a()};e.addEventListener("success",l),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&g1.set(n,e)}).catch(()=>{}),Kp.set(t,e),t}function eM(e){if(rp.has(e))return;const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("complete",l),e.removeEventListener("error",c),e.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",l),e.addEventListener("error",c),e.addEventListener("abort",c)});rp.set(e,t)}let sp={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return rp.get(e);if(t==="objectStoreNames")return e.objectStoreNames||m1.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Os(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function nM(e){sp=e(sp)}function iM(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Mm(this),t,...n);return m1.set(r,t.sort?t.sort():[t]),Os(r)}:JO().includes(e)?function(...t){return e.apply(Mm(this),t),Os(g1.get(this))}:function(...t){return Os(e.apply(Mm(this),t))}}function rM(e){return typeof e=="function"?iM(e):(e instanceof IDBTransaction&&eM(e),ZO(e,WO())?new Proxy(e,sp):e)}function Os(e){if(e instanceof IDBRequest)return tM(e);if(Om.has(e))return Om.get(e);const t=rM(e);return t!==e&&(Om.set(e,t),Kp.set(t,e)),t}const Mm=e=>Kp.get(e);function sM(e,t,{blocked:n,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(e,t),d=Os(c);return r&&c.addEventListener("upgradeneeded",g=>{r(Os(c.result),g.oldVersion,g.newVersion,Os(c.transaction),g)}),n&&c.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const aM=["get","getKey","getAll","getAllKeys","count"],oM=["put","add","delete","clear"],Vm=new Map;function iT(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Vm.get(t))return Vm.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=oM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||aM.includes(n)))return;const l=async function(c,...d){const g=this.transaction(c,a?"readwrite":"readonly");let m=g.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),a&&g.done]))[0]};return Vm.set(t,l),l}nM(e=>({...e,get:(t,n,r)=>iT(t,n)||e.get(t,n,r),has:(t,n)=>!!iT(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function uM(e){const t=e.getComponent();return t?.type==="VERSION"}const ap="@firebase/app",rT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new Yp("@firebase/app"),cM="@firebase/app-compat",hM="@firebase/analytics-compat",fM="@firebase/analytics",dM="@firebase/app-check-compat",gM="@firebase/app-check",mM="@firebase/auth",pM="@firebase/auth-compat",yM="@firebase/database",_M="@firebase/data-connect",vM="@firebase/database-compat",EM="@firebase/functions",TM="@firebase/functions-compat",wM="@firebase/installations",SM="@firebase/installations-compat",bM="@firebase/messaging",AM="@firebase/messaging-compat",RM="@firebase/performance",IM="@firebase/performance-compat",CM="@firebase/remote-config",xM="@firebase/remote-config-compat",NM="@firebase/storage",DM="@firebase/storage-compat",OM="@firebase/firestore",MM="@firebase/ai",VM="@firebase/firestore-compat",kM="firebase",PM="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="[DEFAULT]",LM={[ap]:"fire-core",[cM]:"fire-core-compat",[fM]:"fire-analytics",[hM]:"fire-analytics-compat",[gM]:"fire-app-check",[dM]:"fire-app-check-compat",[mM]:"fire-auth",[pM]:"fire-auth-compat",[yM]:"fire-rtdb",[_M]:"fire-data-connect",[vM]:"fire-rtdb-compat",[EM]:"fire-fn",[TM]:"fire-fn-compat",[wM]:"fire-iid",[SM]:"fire-iid-compat",[bM]:"fire-fcm",[AM]:"fire-fcm-compat",[RM]:"fire-perf",[IM]:"fire-perf-compat",[CM]:"fire-rc",[xM]:"fire-rc-compat",[NM]:"fire-gcs",[DM]:"fire-gcs-compat",[OM]:"fire-fst",[VM]:"fire-fst-compat",[MM]:"fire-vertex","fire-js":"fire-js",[kM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=new Map,UM=new Map,lp=new Map;function sT(e,t){try{e.container.addComponent(t)}catch(n){Fr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function nl(e){const t=e.name;if(lp.has(t))return Fr.debug(`There were multiple attempts to register component ${t}.`),!1;lp.set(t,e);for(const n of wf.values())sT(n,e);for(const n of UM.values())sT(n,e);return!0}function Xp(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function pi(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ms=new lc("app","Firebase",zM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=PM;function p1(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:op,automaticDataCollectionEnabled:!0},t),a=r.name;if(typeof a!="string"||!a)throw Ms.create("bad-app-name",{appName:String(a)});if(n||(n=c1()),!n)throw Ms.create("no-options");const l=wf.get(a);if(l){if(Ma(n,l.options)&&Ma(r,l.config))return l;throw Ms.create("duplicate-app",{appName:a})}const c=new $O(a);for(const g of lp.values())c.addComponent(g);const d=new BM(n,r,c);return wf.set(a,d),d}function y1(e=op){const t=wf.get(e);if(!t&&e===op&&c1())return p1();if(!t)throw Ms.create("no-app",{appName:e});return t}function Vs(e,t,n){var r;let a=(r=LM[e])!==null&&r!==void 0?r:e;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${t}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Fr.warn(d.join(" "));return}nl(new Va(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM="firebase-heartbeat-database",qM=1,Ku="firebase-heartbeat-store";let km=null;function _1(){return km||(km=sM(HM,qM,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ku)}catch(n){console.warn(n)}}}}).catch(e=>{throw Ms.create("idb-open",{originalErrorMessage:e.message})})),km}async function FM(e){try{const n=(await _1()).transaction(Ku),r=await n.objectStore(Ku).get(v1(e));return await n.done,r}catch(t){if(t instanceof Kr)Fr.warn(t.message);else{const n=Ms.create("idb-get",{originalErrorMessage:t?.message});Fr.warn(n.message)}}}async function aT(e,t){try{const r=(await _1()).transaction(Ku,"readwrite");await r.objectStore(Ku).put(t,v1(e)),await r.done}catch(n){if(n instanceof Kr)Fr.warn(n.message);else{const r=Ms.create("idb-set",{originalErrorMessage:n?.message});Fr.warn(r.message)}}}function v1(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=1024,GM=30;class $M{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=oT();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>GM){const c=XM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Fr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=oT(),{heartbeatsToSend:r,unsentEntries:a}=YM(this._heartbeatsCache.heartbeats),l=Tf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Fr.warn(n),""}}}function oT(){return new Date().toISOString().substring(0,10)}function YM(e,t=jM){const n=[];let r=e.slice();for(const a of e){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),lT(n)>t){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),lT(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class KM{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VO()?kO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FM(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return aT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return aT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function lT(e){return Tf(JSON.stringify({version:2,heartbeats:e})).length}function XM(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(e){nl(new Va("platform-logger",t=>new lM(t),"PRIVATE")),nl(new Va("heartbeat",t=>new $M(t),"PRIVATE")),Vs(ap,rT,e),Vs(ap,rT,"esm2017"),Vs("fire-js","")}QM("");var ZM="firebase",WM="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vs(ZM,WM,"app");var uT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ks,E1;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,R){function I(){}I.prototype=R.prototype,D.D=R.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(k,N,U){for(var A=Array(arguments.length-2),M=2;M<arguments.length;M++)A[M-2]=arguments[M];return R.prototype[N].apply(k,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,R,I){I||(I=0);var k=Array(16);if(typeof R=="string")for(var N=0;16>N;++N)k[N]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(N=0;16>N;++N)k[N]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=D.g[0],I=D.g[1],N=D.g[2];var U=D.g[3],A=R+(U^I&(N^U))+k[0]+3614090360&4294967295;R=I+(A<<7&4294967295|A>>>25),A=U+(N^R&(I^N))+k[1]+3905402710&4294967295,U=R+(A<<12&4294967295|A>>>20),A=N+(I^U&(R^I))+k[2]+606105819&4294967295,N=U+(A<<17&4294967295|A>>>15),A=I+(R^N&(U^R))+k[3]+3250441966&4294967295,I=N+(A<<22&4294967295|A>>>10),A=R+(U^I&(N^U))+k[4]+4118548399&4294967295,R=I+(A<<7&4294967295|A>>>25),A=U+(N^R&(I^N))+k[5]+1200080426&4294967295,U=R+(A<<12&4294967295|A>>>20),A=N+(I^U&(R^I))+k[6]+2821735955&4294967295,N=U+(A<<17&4294967295|A>>>15),A=I+(R^N&(U^R))+k[7]+4249261313&4294967295,I=N+(A<<22&4294967295|A>>>10),A=R+(U^I&(N^U))+k[8]+1770035416&4294967295,R=I+(A<<7&4294967295|A>>>25),A=U+(N^R&(I^N))+k[9]+2336552879&4294967295,U=R+(A<<12&4294967295|A>>>20),A=N+(I^U&(R^I))+k[10]+4294925233&4294967295,N=U+(A<<17&4294967295|A>>>15),A=I+(R^N&(U^R))+k[11]+2304563134&4294967295,I=N+(A<<22&4294967295|A>>>10),A=R+(U^I&(N^U))+k[12]+1804603682&4294967295,R=I+(A<<7&4294967295|A>>>25),A=U+(N^R&(I^N))+k[13]+4254626195&4294967295,U=R+(A<<12&4294967295|A>>>20),A=N+(I^U&(R^I))+k[14]+2792965006&4294967295,N=U+(A<<17&4294967295|A>>>15),A=I+(R^N&(U^R))+k[15]+1236535329&4294967295,I=N+(A<<22&4294967295|A>>>10),A=R+(N^U&(I^N))+k[1]+4129170786&4294967295,R=I+(A<<5&4294967295|A>>>27),A=U+(I^N&(R^I))+k[6]+3225465664&4294967295,U=R+(A<<9&4294967295|A>>>23),A=N+(R^I&(U^R))+k[11]+643717713&4294967295,N=U+(A<<14&4294967295|A>>>18),A=I+(U^R&(N^U))+k[0]+3921069994&4294967295,I=N+(A<<20&4294967295|A>>>12),A=R+(N^U&(I^N))+k[5]+3593408605&4294967295,R=I+(A<<5&4294967295|A>>>27),A=U+(I^N&(R^I))+k[10]+38016083&4294967295,U=R+(A<<9&4294967295|A>>>23),A=N+(R^I&(U^R))+k[15]+3634488961&4294967295,N=U+(A<<14&4294967295|A>>>18),A=I+(U^R&(N^U))+k[4]+3889429448&4294967295,I=N+(A<<20&4294967295|A>>>12),A=R+(N^U&(I^N))+k[9]+568446438&4294967295,R=I+(A<<5&4294967295|A>>>27),A=U+(I^N&(R^I))+k[14]+3275163606&4294967295,U=R+(A<<9&4294967295|A>>>23),A=N+(R^I&(U^R))+k[3]+4107603335&4294967295,N=U+(A<<14&4294967295|A>>>18),A=I+(U^R&(N^U))+k[8]+1163531501&4294967295,I=N+(A<<20&4294967295|A>>>12),A=R+(N^U&(I^N))+k[13]+2850285829&4294967295,R=I+(A<<5&4294967295|A>>>27),A=U+(I^N&(R^I))+k[2]+4243563512&4294967295,U=R+(A<<9&4294967295|A>>>23),A=N+(R^I&(U^R))+k[7]+1735328473&4294967295,N=U+(A<<14&4294967295|A>>>18),A=I+(U^R&(N^U))+k[12]+2368359562&4294967295,I=N+(A<<20&4294967295|A>>>12),A=R+(I^N^U)+k[5]+4294588738&4294967295,R=I+(A<<4&4294967295|A>>>28),A=U+(R^I^N)+k[8]+2272392833&4294967295,U=R+(A<<11&4294967295|A>>>21),A=N+(U^R^I)+k[11]+1839030562&4294967295,N=U+(A<<16&4294967295|A>>>16),A=I+(N^U^R)+k[14]+4259657740&4294967295,I=N+(A<<23&4294967295|A>>>9),A=R+(I^N^U)+k[1]+2763975236&4294967295,R=I+(A<<4&4294967295|A>>>28),A=U+(R^I^N)+k[4]+1272893353&4294967295,U=R+(A<<11&4294967295|A>>>21),A=N+(U^R^I)+k[7]+4139469664&4294967295,N=U+(A<<16&4294967295|A>>>16),A=I+(N^U^R)+k[10]+3200236656&4294967295,I=N+(A<<23&4294967295|A>>>9),A=R+(I^N^U)+k[13]+681279174&4294967295,R=I+(A<<4&4294967295|A>>>28),A=U+(R^I^N)+k[0]+3936430074&4294967295,U=R+(A<<11&4294967295|A>>>21),A=N+(U^R^I)+k[3]+3572445317&4294967295,N=U+(A<<16&4294967295|A>>>16),A=I+(N^U^R)+k[6]+76029189&4294967295,I=N+(A<<23&4294967295|A>>>9),A=R+(I^N^U)+k[9]+3654602809&4294967295,R=I+(A<<4&4294967295|A>>>28),A=U+(R^I^N)+k[12]+3873151461&4294967295,U=R+(A<<11&4294967295|A>>>21),A=N+(U^R^I)+k[15]+530742520&4294967295,N=U+(A<<16&4294967295|A>>>16),A=I+(N^U^R)+k[2]+3299628645&4294967295,I=N+(A<<23&4294967295|A>>>9),A=R+(N^(I|~U))+k[0]+4096336452&4294967295,R=I+(A<<6&4294967295|A>>>26),A=U+(I^(R|~N))+k[7]+1126891415&4294967295,U=R+(A<<10&4294967295|A>>>22),A=N+(R^(U|~I))+k[14]+2878612391&4294967295,N=U+(A<<15&4294967295|A>>>17),A=I+(U^(N|~R))+k[5]+4237533241&4294967295,I=N+(A<<21&4294967295|A>>>11),A=R+(N^(I|~U))+k[12]+1700485571&4294967295,R=I+(A<<6&4294967295|A>>>26),A=U+(I^(R|~N))+k[3]+2399980690&4294967295,U=R+(A<<10&4294967295|A>>>22),A=N+(R^(U|~I))+k[10]+4293915773&4294967295,N=U+(A<<15&4294967295|A>>>17),A=I+(U^(N|~R))+k[1]+2240044497&4294967295,I=N+(A<<21&4294967295|A>>>11),A=R+(N^(I|~U))+k[8]+1873313359&4294967295,R=I+(A<<6&4294967295|A>>>26),A=U+(I^(R|~N))+k[15]+4264355552&4294967295,U=R+(A<<10&4294967295|A>>>22),A=N+(R^(U|~I))+k[6]+2734768916&4294967295,N=U+(A<<15&4294967295|A>>>17),A=I+(U^(N|~R))+k[13]+1309151649&4294967295,I=N+(A<<21&4294967295|A>>>11),A=R+(N^(I|~U))+k[4]+4149444226&4294967295,R=I+(A<<6&4294967295|A>>>26),A=U+(I^(R|~N))+k[11]+3174756917&4294967295,U=R+(A<<10&4294967295|A>>>22),A=N+(R^(U|~I))+k[2]+718787259&4294967295,N=U+(A<<15&4294967295|A>>>17),A=I+(U^(N|~R))+k[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(N+(A<<21&4294967295|A>>>11))&4294967295,D.g[2]=D.g[2]+N&4294967295,D.g[3]=D.g[3]+U&4294967295}r.prototype.u=function(D,R){R===void 0&&(R=D.length);for(var I=R-this.blockSize,k=this.B,N=this.h,U=0;U<R;){if(N==0)for(;U<=I;)a(this,D,U),U+=this.blockSize;if(typeof D=="string"){for(;U<R;)if(k[N++]=D.charCodeAt(U++),N==this.blockSize){a(this,k),N=0;break}}else for(;U<R;)if(k[N++]=D[U++],N==this.blockSize){a(this,k),N=0;break}}this.h=N,this.o+=R},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;var I=8*this.o;for(R=D.length-8;R<D.length;++R)D[R]=I&255,I/=256;for(this.u(D),D=Array(16),R=I=0;4>R;++R)for(var k=0;32>k;k+=8)D[I++]=this.g[R]>>>k&255;return D};function l(D,R){var I=d;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=R(D)}function c(D,R){this.h=R;for(var I=[],k=!0,N=D.length-1;0<=N;N--){var U=D[N]|0;k&&U==R||(I[N]=U,k=!1)}this.g=I}var d={};function g(D){return-128<=D&&128>D?l(D,function(R){return new c([R|0],0>R?-1:0)}):new c([D|0],0>D?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return v;if(0>D)return V(m(-D));for(var R=[],I=1,k=0;D>=I;k++)R[k]=D/I|0,I*=4294967296;return new c(R,0)}function y(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return V(y(D.substring(1),R));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=m(Math.pow(R,8)),k=v,N=0;N<D.length;N+=8){var U=Math.min(8,D.length-N),A=parseInt(D.substring(N,N+U),R);8>U?(U=m(Math.pow(R,U)),k=k.j(U).add(m(A))):(k=k.j(I),k=k.add(m(A)))}return k}var v=g(0),T=g(1),S=g(16777216);e=c.prototype,e.m=function(){if(L(this))return-V(this).m();for(var D=0,R=1,I=0;I<this.g.length;I++){var k=this.i(I);D+=(0<=k?k:4294967296+k)*R,R*=4294967296}return D},e.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(P(this))return"0";if(L(this))return"-"+V(this).toString(D);for(var R=m(Math.pow(D,6)),I=this,k="";;){var N=H(I,R).g;I=B(I,N.j(R));var U=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=N,P(I))return U+k;for(;6>U.length;)U="0"+U;k=U+k}},e.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function P(D){if(D.h!=0)return!1;for(var R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function L(D){return D.h==-1}e.l=function(D){return D=B(this,D),L(D)?-1:P(D)?0:1};function V(D){for(var R=D.g.length,I=[],k=0;k<R;k++)I[k]=~D.g[k];return new c(I,~D.h).add(T)}e.abs=function(){return L(this)?V(this):this},e.add=function(D){for(var R=Math.max(this.g.length,D.g.length),I=[],k=0,N=0;N<=R;N++){var U=k+(this.i(N)&65535)+(D.i(N)&65535),A=(U>>>16)+(this.i(N)>>>16)+(D.i(N)>>>16);k=A>>>16,U&=65535,A&=65535,I[N]=A<<16|U}return new c(I,I[I.length-1]&-2147483648?-1:0)};function B(D,R){return D.add(V(R))}e.j=function(D){if(P(this)||P(D))return v;if(L(this))return L(D)?V(this).j(V(D)):V(V(this).j(D));if(L(D))return V(this.j(V(D)));if(0>this.l(S)&&0>D.l(S))return m(this.m()*D.m());for(var R=this.g.length+D.g.length,I=[],k=0;k<2*R;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<D.g.length;N++){var U=this.i(k)>>>16,A=this.i(k)&65535,M=D.i(N)>>>16,tt=D.i(N)&65535;I[2*k+2*N]+=A*tt,q(I,2*k+2*N),I[2*k+2*N+1]+=U*tt,q(I,2*k+2*N+1),I[2*k+2*N+1]+=A*M,q(I,2*k+2*N+1),I[2*k+2*N+2]+=U*M,q(I,2*k+2*N+2)}for(k=0;k<R;k++)I[k]=I[2*k+1]<<16|I[2*k];for(k=R;k<2*R;k++)I[k]=0;return new c(I,0)};function q(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function F(D,R){this.g=D,this.h=R}function H(D,R){if(P(R))throw Error("division by zero");if(P(D))return new F(v,v);if(L(D))return R=H(V(D),R),new F(V(R.g),V(R.h));if(L(R))return R=H(D,V(R)),new F(V(R.g),R.h);if(30<D.g.length){if(L(D)||L(R))throw Error("slowDivide_ only works with positive integers.");for(var I=T,k=R;0>=k.l(D);)I=et(I),k=et(k);var N=nt(I,1),U=nt(k,1);for(k=nt(k,2),I=nt(I,2);!P(k);){var A=U.add(k);0>=A.l(D)&&(N=N.add(I),U=A),k=nt(k,1),I=nt(I,1)}return R=B(D,N.j(R)),new F(N,R)}for(N=v;0<=D.l(R);){for(I=Math.max(1,Math.floor(D.m()/R.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),U=m(I),A=U.j(R);L(A)||0<A.l(D);)I-=k,U=m(I),A=U.j(R);P(U)&&(U=T),N=N.add(U),D=B(D,A)}return new F(N,D)}e.A=function(D){return H(this,D).h},e.and=function(D){for(var R=Math.max(this.g.length,D.g.length),I=[],k=0;k<R;k++)I[k]=this.i(k)&D.i(k);return new c(I,this.h&D.h)},e.or=function(D){for(var R=Math.max(this.g.length,D.g.length),I=[],k=0;k<R;k++)I[k]=this.i(k)|D.i(k);return new c(I,this.h|D.h)},e.xor=function(D){for(var R=Math.max(this.g.length,D.g.length),I=[],k=0;k<R;k++)I[k]=this.i(k)^D.i(k);return new c(I,this.h^D.h)};function et(D){for(var R=D.g.length+1,I=[],k=0;k<R;k++)I[k]=D.i(k)<<1|D.i(k-1)>>>31;return new c(I,D.h)}function nt(D,R){var I=R>>5;R%=32;for(var k=D.g.length-I,N=[],U=0;U<k;U++)N[U]=0<R?D.i(U+I)>>>R|D.i(U+I+1)<<32-R:D.i(U+I);return new c(N,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,E1=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=y,ks=c}).apply(typeof uT<"u"?uT:typeof self<"u"?self:typeof window<"u"?window:{});var Fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var T1,Du,w1,ef,up,S1,b1,A1;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fh=="object"&&Fh];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function a(h,_){if(_)t:{var E=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var Q=h[C];if(!(Q in E))break t;E=E[Q]}h=h[h.length-1],C=E[h],_=_(C),_!=C&&_!=null&&t(E,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var E=0,C=!1,Q={next:function(){if(!C&&E<h.length){var ot=E++;return{value:_(ot,h[ot]),done:!1}}return C=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function m(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,E){return h.call.apply(h.bind,arguments)}function v(h,_,E){if(!h)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,C),h.apply(_,Q)}}return function(){return h.apply(_,arguments)}}function T(h,_,E){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,T.apply(null,arguments)}function S(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var C=E.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function P(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(C,Q,ot){for(var yt=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)yt[Kt-2]=arguments[Kt];return _.prototype[Q].apply(C,yt)}}function L(h){const _=h.length;if(0<_){const E=Array(_);for(let C=0;C<_;C++)E[C]=h[C];return E}return[]}function V(h,_){for(let E=1;E<arguments.length;E++){const C=arguments[E];if(g(C)){const Q=h.length||0,ot=C.length||0;h.length=Q+ot;for(let yt=0;yt<ot;yt++)h[Q+yt]=C[yt]}else h.push(C)}}class B{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function q(h){return/^[\s\xa0]*$/.test(h)}function F(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function H(h){return H[" "](h),h}H[" "]=function(){};var et=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function nt(h,_,E){for(const C in h)_.call(E,h[C],C,h)}function D(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function R(h){const _={};for(const E in h)_[E]=h[E];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(h,_){let E,C;for(let Q=1;Q<arguments.length;Q++){C=arguments[Q];for(E in C)h[E]=C[E];for(let ot=0;ot<I.length;ot++)E=I[ot],Object.prototype.hasOwnProperty.call(C,E)&&(h[E]=C[E])}}function N(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function U(h){d.setTimeout(()=>{throw h},0)}function A(){var h=Y;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class M{constructor(){this.h=this.g=null}add(_,E){const C=tt.get();C.set(_,E),this.h?this.h.next=C:this.g=C,this.h=C}}var tt=new B(()=>new O,h=>h.reset());class O{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let $,at=!1,Y=new M,x=()=>{const h=d.Promise.resolve(void 0);$=()=>{h.then(G)}};var G=()=>{for(var h;h=A();){try{h.h.call(h.g)}catch(E){U(E)}var _=tt;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}at=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var ct=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,_),d.removeEventListener("test",E,_)}catch{}return h}();function mt(h,_){if(rt.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(et){t:{try{H(_.nodeName);var Q=!0;break t}catch{}Q=!1}Q||(_=null)}}else E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement);this.relatedTarget=_,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:pt[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&mt.aa.h.call(this)}}P(mt,rt);var pt={2:"touch",3:"pen",4:"mouse"};mt.prototype.h=function(){mt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var It="closure_listenable_"+(1e6*Math.random()|0),At=0;function kt(h,_,E,C,Q){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!C,this.ha=Q,this.key=++At,this.da=this.fa=!1}function Pt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ue(h){this.src=h,this.g={},this.h=0}ue.prototype.add=function(h,_,E,C,Q){var ot=h.toString();h=this.g[ot],h||(h=this.g[ot]=[],this.h++);var yt=ve(h,_,C,Q);return-1<yt?(_=h[yt],E||(_.fa=!1)):(_=new kt(_,this.src,ot,!!C,Q),_.fa=E,h.push(_)),_};function ce(h,_){var E=_.type;if(E in h.g){var C=h.g[E],Q=Array.prototype.indexOf.call(C,_,void 0),ot;(ot=0<=Q)&&Array.prototype.splice.call(C,Q,1),ot&&(Pt(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function ve(h,_,E,C){for(var Q=0;Q<h.length;++Q){var ot=h[Q];if(!ot.da&&ot.listener==_&&ot.capture==!!E&&ot.ha==C)return Q}return-1}var ye="closure_lm_"+(1e6*Math.random()|0),he={};function Ke(h,_,E,C,Q){if(Array.isArray(_)){for(var ot=0;ot<_.length;ot++)Ke(h,_[ot],E,C,Q);return null}return E=vi(E),h&&h[It]?h.K(_,E,m(C)?!!C.capture:!1,Q):Lt(h,_,E,!1,C,Q)}function Lt(h,_,E,C,Q,ot){if(!_)throw Error("Invalid event type");var yt=m(Q)?!!Q.capture:!!Q,Kt=Ln(h);if(Kt||(h[ye]=Kt=new ue(h)),E=Kt.add(_,E,C,yt,ot),E.proxy)return E;if(C=wt(),E.proxy=C,C.src=h,C.listener=E,h.addEventListener)ct||(Q=yt),Q===void 0&&(Q=!1),h.addEventListener(_.toString(),C,Q);else if(h.attachEvent)h.attachEvent(Pn(_.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return E}function wt(){function h(E){return _.call(h.src,h.listener,E)}const _=ki;return h}function Ce(h,_,E,C,Q){if(Array.isArray(_))for(var ot=0;ot<_.length;ot++)Ce(h,_[ot],E,C,Q);else C=m(C)?!!C.capture:!!C,E=vi(E),h&&h[It]?(h=h.i,_=String(_).toString(),_ in h.g&&(ot=h.g[_],E=ve(ot,E,C,Q),-1<E&&(Pt(ot[E]),Array.prototype.splice.call(ot,E,1),ot.length==0&&(delete h.g[_],h.h--)))):h&&(h=Ln(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ve(_,E,C,Q)),(E=-1<h?_[h]:null)&&mn(E))}function mn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[It])ce(_.i,h);else{var E=h.type,C=h.proxy;_.removeEventListener?_.removeEventListener(E,C,h.capture):_.detachEvent?_.detachEvent(Pn(E),C):_.addListener&&_.removeListener&&_.removeListener(C),(E=Ln(_))?(ce(E,h),E.h==0&&(E.src=null,_[ye]=null)):Pt(h)}}}function Pn(h){return h in he?he[h]:he[h]="on"+h}function ki(h,_){if(h.da)h=!0;else{_=new mt(_,this);var E=h.listener,C=h.ha||h.src;h.fa&&mn(h),h=E.call(C,_)}return h}function Ln(h){return h=h[ye],h instanceof ue?h:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function vi(h){return typeof h=="function"?h:(h[wn]||(h[wn]=function(_){return h.handleEvent(_)}),h[wn])}function te(){W.call(this),this.i=new ue(this),this.M=this,this.F=null}P(te,W),te.prototype[It]=!0,te.prototype.removeEventListener=function(h,_,E,C){Ce(this,h,_,E,C)};function Ft(h,_){var E,C=h.F;if(C)for(E=[];C;C=C.F)E.push(C);if(h=h.M,C=_.type||_,typeof _=="string")_=new rt(_,h);else if(_ instanceof rt)_.target=_.target||h;else{var Q=_;_=new rt(C,h),k(_,Q)}if(Q=!0,E)for(var ot=E.length-1;0<=ot;ot--){var yt=_.g=E[ot];Q=Me(yt,C,!0,_)&&Q}if(yt=_.g=h,Q=Me(yt,C,!0,_)&&Q,Q=Me(yt,C,!1,_)&&Q,E)for(ot=0;ot<E.length;ot++)yt=_.g=E[ot],Q=Me(yt,C,!1,_)&&Q}te.prototype.N=function(){if(te.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var E=h.g[_],C=0;C<E.length;C++)Pt(E[C]);delete h.g[_],h.h--}}this.F=null},te.prototype.K=function(h,_,E,C){return this.i.add(String(h),_,!1,E,C)},te.prototype.L=function(h,_,E,C){return this.i.add(String(h),_,!0,E,C)};function Me(h,_,E,C){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var Q=!0,ot=0;ot<_.length;++ot){var yt=_[ot];if(yt&&!yt.da&&yt.capture==E){var Kt=yt.listener,He=yt.ha||yt.src;yt.fa&&ce(h.i,yt),Q=Kt.call(He,C)!==!1&&Q}}return Q&&!C.defaultPrevented}function Ee(h,_,E){if(typeof h=="function")E&&(h=T(h,E));else if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Pi(h){h.g=Ee(()=>{h.g=null,h.i&&(h.i=!1,Pi(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Ve extends W{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Pi(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xe(h){W.call(this),this.h=h,this.g={}}P(Xe,W);var Sn=[];function bn(h){nt(h.g,function(_,E){this.g.hasOwnProperty(E)&&mn(_)},h),h.g={}}Xe.prototype.N=function(){Xe.aa.N.call(this),bn(this)},Xe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qe=d.JSON.stringify,sn=d.JSON.parse,An=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function hr(){}hr.prototype.h=null;function fr(h){return h.h||(h.h=h.i())}function Ei(){}var Un={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zn(){rt.call(this,"d")}P(Zn,rt);function zn(){rt.call(this,"c")}P(zn,rt);var Wn={},Ys=null;function Li(){return Ys=Ys||new te}Wn.La="serverreachability";function Xr(h){rt.call(this,Wn.La,h)}P(Xr,rt);function Ui(h){const _=Li();Ft(_,new Xr(_))}Wn.STAT_EVENT="statevent";function Ga(h,_){rt.call(this,Wn.STAT_EVENT,h),this.stat=_}P(Ga,rt);function de(h){const _=Li();Ft(_,new Ga(_,h))}Wn.Ma="timingevent";function xe(h,_){rt.call(this,Wn.Ma,h),this.size=_}P(xe,rt);function be(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function Nn(){this.g=!0}Nn.prototype.xa=function(){this.g=!1};function Ks(h,_,E,C,Q,ot){h.info(function(){if(h.g)if(ot)for(var yt="",Kt=ot.split("&"),He=0;He<Kt.length;He++){var Xt=Kt[He].split("=");if(1<Xt.length){var We=Xt[0];Xt=Xt[1];var qe=We.split("_");yt=2<=qe.length&&qe[1]=="type"?yt+(We+"="+Xt+"&"):yt+(We+"=redacted&")}}else yt=null;else yt=ot;return"XMLHTTP REQ ("+C+") [attempt "+Q+"]: "+_+`
`+E+`
`+yt})}function El(h,_,E,C,Q,ot,yt){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+Q+"]: "+_+`
`+E+`
`+ot+" "+yt})}function zi(h,_,E,C){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+dr(h,E)+(C?" "+C:"")})}function $a(h,_){h.info(function(){return"TIMEOUT: "+_})}Nn.prototype.info=function(){};function dr(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var C=E[h];if(!(2>C.length)){var Q=C[1];if(Array.isArray(Q)&&!(1>Q.length)){var ot=Q[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var yt=1;yt<Q.length;yt++)Q[yt]=""}}}}return Qe(E)}catch{return _}}var Bi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ti;function ei(){}P(ei,hr),ei.prototype.g=function(){return new XMLHttpRequest},ei.prototype.i=function(){return{}},ti=new ei;function an(h,_,E,C){this.j=h,this.i=_,this.l=E,this.R=C||1,this.U=new Xe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Te}function Te(){this.i=null,this.g="",this.h=!1}var Xs={},Qr={};function Bn(h,_,E){h.L=1,h.v=Js(Hn(_)),h.m=E,h.P=!0,Ti(h,null)}function Ti(h,_){h.F=Date.now(),gr(h),h.A=Hn(h.v);var E=h.A,C=h.R;Array.isArray(C)||(C=[String(C)]),Rl(E.i,"t",C),h.C=0,E=h.j.J,h.h=new Te,h.g=Nc(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Ve(T(h.Y,h,h.g),h.O)),_=h.U,E=h.g,C=h.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(Sn[0]=Q.toString()),Q=Sn);for(var ot=0;ot<Q.length;ot++){var yt=Ke(E,Q[ot],C||_.handleEvent,!1,_.h||_);if(!yt)break;_.g[yt.key]=yt}_=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Ui(),Ks(h.i,h.u,h.A,h.l,h.R,h.m)}an.prototype.ca=function(h){h=h.target;const _=this.M;_&&ai(h)==3?_.j():this.Y(h)},an.prototype.Y=function(h){try{if(h==this.g)t:{const qe=ai(this.g);var _=this.g.Ba();const Tr=this.g.Z();if(!(3>qe)&&(qe!=3||this.g&&(this.h.h||this.g.oa()||wc(this.g)))){this.J||qe!=4||_==7||(_==8||0>=Tr?Ui(3):Ui(2)),Hi(this);var E=this.g.Z();this.X=E;e:if(Qs(this)){var C=wc(this.g);h="";var Q=C.length,ot=ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Be(this),ni(this);var yt="";break e}this.h.i=new d.TextDecoder}for(_=0;_<Q;_++)this.h.h=!0,h+=this.h.i.decode(C[_],{stream:!(ot&&_==Q-1)});C.length=0,this.h.g+=h,this.C=0,yt=this.h.g}else yt=this.g.oa();if(this.o=E==200,El(this.i,this.u,this.A,this.l,this.R,qe,E),this.o){if(this.T&&!this.K){e:{if(this.g){var Kt,He=this.g;if((Kt=He.g?He.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Kt)){var Xt=Kt;break e}}Xt=null}if(E=Xt)zi(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qi(this,E);else{this.o=!1,this.s=3,de(12),Be(this),ni(this);break t}}if(this.P){E=!0;let on;for(;!this.J&&this.C<yt.length;)if(on=Ya(this,yt),on==Qr){qe==4&&(this.s=4,de(14),E=!1),zi(this.i,this.l,null,"[Incomplete Response]");break}else if(on==Xs){this.s=4,de(15),zi(this.i,this.l,yt,"[Invalid Chunk]"),E=!1;break}else zi(this.i,this.l,on,null),qi(this,on);if(Qs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||yt.length!=0||this.h.h||(this.s=1,de(16),E=!1),this.o=this.o&&E,!E)zi(this.i,this.l,yt,"[Invalid Chunked Response]"),Be(this),ni(this);else if(0<yt.length&&!this.W){this.W=!0;var We=this.j;We.g==this&&We.ba&&!We.M&&(We.j.info("Great, no buffering proxy detected. Bytes received: "+yt.length),oa(We),We.M=!0,de(11))}}else zi(this.i,this.l,yt,null),qi(this,yt);qe==4&&Be(this),this.o&&!this.J&&(qe==4?Ic(this.j,this):(this.o=!1,gr(this)))}else vd(this.g),E==400&&0<yt.indexOf("Unknown SID")?(this.s=3,de(12)):(this.s=0,de(13)),Be(this),ni(this)}}}catch{}finally{}};function Qs(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Ya(h,_){var E=h.C,C=_.indexOf(`
`,E);return C==-1?Qr:(E=Number(_.substring(E,C)),isNaN(E)?Xs:(C+=1,C+E>_.length?Qr:(_=_.slice(C,C+E),h.C=C+E,_)))}an.prototype.cancel=function(){this.J=!0,Be(this)};function gr(h){h.S=Date.now()+h.I,Ka(h,h.I)}function Ka(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=be(T(h.ba,h),_)}function Hi(h){h.B&&(d.clearTimeout(h.B),h.B=null)}an.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?($a(this.i,this.A),this.L!=2&&(Ui(),de(17)),Be(this),this.s=2,ni(this)):Ka(this,this.S-h)};function ni(h){h.j.G==0||h.J||Ic(h.j,h)}function Be(h){Hi(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,bn(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function qi(h,_){try{var E=h.j;if(E.G!=0&&(E.g==h||Tl(E.h,h))){if(!h.K&&Tl(E.h,h)&&E.G==3){try{var C=E.Da.g.parse(_)}catch{C=null}if(Array.isArray(C)&&C.length==3){var Q=C;if(Q[0]==0){t:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)so(E),io(E);else break t;Dl(E),de(18)}}else E.za=Q[1],0<E.za-E.T&&37500>Q[2]&&E.F&&E.v==0&&!E.C&&(E.C=be(T(E.Za,E),6e3));if(1>=Fi(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Er(E,11)}else if((h.K||E.g==h)&&so(E),!q(_))for(Q=E.Da.g.parse(_),_=0;_<Q.length;_++){let Xt=Q[_];if(E.T=Xt[0],Xt=Xt[1],E.G==2)if(Xt[0]=="c"){E.K=Xt[1],E.ia=Xt[2];const We=Xt[3];We!=null&&(E.la=We,E.j.info("VER="+E.la));const qe=Xt[4];qe!=null&&(E.Aa=qe,E.j.info("SVER="+E.Aa));const Tr=Xt[5];Tr!=null&&typeof Tr=="number"&&0<Tr&&(C=1.5*Tr,E.L=C,E.j.info("backChannelRequestTimeoutMs_="+C)),C=E;const on=h.g;if(on){const Qi=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qi){var ot=C.h;ot.g||Qi.indexOf("spdy")==-1&&Qi.indexOf("quic")==-1&&Qi.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(Qa(ot,ot.h),ot.h=null))}if(C.D){const Ml=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;Ml&&(C.ya=Ml,se(C.I,C.D,Ml))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),C=E;var yt=h;if(C.qa=xc(C,C.J?C.ia:null,C.W),yt.K){Rn(C.h,yt);var Kt=yt,He=C.L;He&&(Kt.I=He),Kt.B&&(Hi(Kt),gr(Kt)),C.g=yt}else Ac(C);0<E.i.length&&ro(E)}else Xt[0]!="stop"&&Xt[0]!="close"||Er(E,7);else E.G==3&&(Xt[0]=="stop"||Xt[0]=="close"?Xt[0]=="stop"?Er(E,7):xl(E):Xt[0]!="noop"&&E.l&&E.l.ta(Xt),E.v=0)}}Ui(4)}catch{}}var Xa=class{constructor(h,_){this.g=h,this.map=_}};function wi(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Fi(h){return h.h?1:h.g?h.g.size:0}function Tl(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Qa(h,_){h.g?h.g.add(_):h.h=_}function Rn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}wi.prototype.cancel=function(){if(this.i=wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function wl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return L(h.i)}function md(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var _=[],E=h.length,C=0;C<E;C++)_.push(h[C]);return _}_=[],E=0;for(C in h)_[E++]=h[C];return _}function Za(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const C in h)_[E++]=C;return _}}}function Sl(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var E=Za(h),C=md(h),Q=C.length,ot=0;ot<Q;ot++)_.call(void 0,C[ot],E&&E[ot],h)}var Zs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pd(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var C=h[E].indexOf("="),Q=null;if(0<=C){var ot=h[E].substring(0,C);Q=h[E].substring(C+1)}else ot=h[E];_(ot,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function ke(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ke){this.h=h.h,Ws(this,h.j),this.o=h.o,this.g=h.g,Wr(this,h.s),this.l=h.l;var _=h.i,E=new pr;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),mr(this,E),this.m=h.m}else h&&(_=String(h).match(Zs))?(this.h=!1,Ws(this,_[1]||"",!0),this.o=ii(_[2]||""),this.g=ii(_[3]||"",!0),Wr(this,_[4]),this.l=ii(_[5]||"",!0),mr(this,_[6]||"",!0),this.m=ii(_[7]||"")):(this.h=!1,this.i=new pr(null,this.h))}ke.prototype.toString=function(){var h=[],_=this.j;_&&h.push(ta(_,bl,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ta(_,bl,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(ta(E,E.charAt(0)=="/"?yd:Al,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",ta(E,Wa)),h.join("")};function Hn(h){return new ke(h)}function Ws(h,_,E){h.j=E?ii(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Wr(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function mr(h,_,E){_ instanceof pr?(h.i=_,Ec(h.i,h.h)):(E||(_=ta(_,_d)),h.i=new pr(_,h.h))}function se(h,_,E){h.i.set(_,E)}function Js(h){return se(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ii(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ta(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,vc),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function vc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var bl=/[#\/\?@]/g,Al=/[#\?:]/g,yd=/[#\?]/g,_d=/[#\?@]/g,Wa=/#/g;function pr(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function ri(h){h.g||(h.g=new Map,h.h=0,h.i&&pd(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}e=pr.prototype,e.add=function(h,_){ri(this),this.i=null,h=ji(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function yr(h,_){ri(h),_=ji(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function _r(h,_){return ri(h),_=ji(h,_),h.g.has(_)}e.forEach=function(h,_){ri(this),this.g.forEach(function(E,C){E.forEach(function(Q){h.call(_,Q,C,this)},this)},this)},e.na=function(){ri(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let C=0;C<_.length;C++){const Q=h[C];for(let ot=0;ot<Q.length;ot++)E.push(_[C])}return E},e.V=function(h){ri(this);let _=[];if(typeof h=="string")_r(this,h)&&(_=_.concat(this.g.get(ji(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},e.set=function(h,_){return ri(this),this.i=null,h=ji(this,h),_r(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},e.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Rl(h,_,E){yr(h,_),0<E.length&&(h.i=null,h.g.set(ji(h,_),L(E)),h.h+=E.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var C=_[E];const ot=encodeURIComponent(String(C)),yt=this.V(C);for(C=0;C<yt.length;C++){var Q=ot;yt[C]!==""&&(Q+="="+encodeURIComponent(String(yt[C]))),h.push(Q)}}return this.i=h.join("&")};function ji(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Ec(h,_){_&&!h.j&&(ri(h),h.i=null,h.g.forEach(function(E,C){var Q=C.toLowerCase();C!=Q&&(yr(this,C),Rl(this,Q,E))},h)),h.j=_}function ea(h,_){const E=new Nn;if(d.Image){const C=new Image;C.onload=S(si,E,"TestLoadImage: loaded",!0,_,C),C.onerror=S(si,E,"TestLoadImage: error",!1,_,C),C.onabort=S(si,E,"TestLoadImage: abort",!1,_,C),C.ontimeout=S(si,E,"TestLoadImage: timeout",!1,_,C),d.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else _(!1)}function Si(h,_){const E=new Nn,C=new AbortController,Q=setTimeout(()=>{C.abort(),si(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:C.signal}).then(ot=>{clearTimeout(Q),ot.ok?si(E,"TestPingServer: ok",!0,_):si(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Q),si(E,"TestPingServer: error",!1,_)})}function si(h,_,E,C,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),C(E)}catch{}}function na(){this.g=new An}function Gi(h,_,E){const C=E||"";try{Sl(h,function(Q,ot){let yt=Q;m(Q)&&(yt=Qe(Q)),_.push(C+ot+"="+encodeURIComponent(yt))})}catch(Q){throw _.push(C+"type="+encodeURIComponent("_badmap")),Q}}function Jr(h){this.l=h.Ub||null,this.j=h.eb||!1}P(Jr,hr),Jr.prototype.g=function(){return new vr(this.l,this.j)},Jr.prototype.i=function(h){return function(){return h}}({});function vr(h,_){te.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(vr,te),e=vr.prototype,e.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Yi(this)},e.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$i(this)),this.readyState=0},e.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Il(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Il(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}e.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?$i(this):Yi(this),this.readyState==3&&Il(this)}},e.Ra=function(h){this.g&&(this.response=this.responseText=h,$i(this))},e.Qa=function(h){this.g&&(this.response=h,$i(this))},e.ga=function(){this.g&&$i(this)};function $i(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Yi(h)}e.setRequestHeader=function(h,_){this.u.append(h,_)},e.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function Yi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(vr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Cl(h){let _="";return nt(h,function(E,C){_+=C,_+=":",_+=E,_+=`\r
`}),_}function Ze(h,_,E){t:{for(C in E){var C=!1;break t}C=!0}C||(E=Cl(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):se(h,_,E))}function ee(h){te.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(ee,te);var Ja=/^https?$/i,ia=["POST","PUT"];e=ee.prototype,e.Ha=function(h){this.J=h},e.ea=function(h,_,E,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ti.g(),this.v=this.o?fr(this.o):fr(ti),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ot){Tc(this,ot);return}if(h=E||"",E=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var Q in C)E.set(Q,C[Q]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const ot of C.keys())E.set(ot,C.get(ot));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(E.keys()).find(ot=>ot.toLowerCase()=="content-type"),Q=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ia,_,void 0))||C||Q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,yt]of E)this.g.setRequestHeader(ot,yt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ra(this),this.u=!0,this.g.send(h),this.u=!1}catch(ot){Tc(this,ot)}};function Tc(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,to(h),Ki(h)}function to(h){h.A||(h.A=!0,Ft(h,"complete"),Ft(h,"error"))}e.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ft(this,"complete"),Ft(this,"abort"),Ki(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ki(this,!0)),ee.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?eo(this):this.bb())},e.bb=function(){eo(this)};function eo(h){if(h.h&&typeof c<"u"&&(!h.v[1]||ai(h)!=4||h.Z()!=2)){if(h.u&&ai(h)==4)Ee(h.Ea,0,h);else if(Ft(h,"readystatechange"),ai(h)==4){h.h=!1;try{const yt=h.Z();t:switch(yt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var E;if(!(E=_)){var C;if(C=yt===0){var Q=String(h.D).match(Zs)[1]||null;!Q&&d.self&&d.self.location&&(Q=d.self.location.protocol.slice(0,-1)),C=!Ja.test(Q?Q.toLowerCase():"")}E=C}if(E)Ft(h,"complete"),Ft(h,"success");else{h.m=6;try{var ot=2<ai(h)?h.g.statusText:""}catch{ot=""}h.l=ot+" ["+h.Z()+"]",to(h)}}finally{Ki(h)}}}}function Ki(h,_){if(h.g){ra(h);const E=h.g,C=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ft(h,"ready");try{E.onreadystatechange=C}catch{}}}function ra(h){h.I&&(d.clearTimeout(h.I),h.I=null)}e.isActive=function(){return!!this.g};function ai(h){return h.g?h.g.readyState:0}e.Z=function(){try{return 2<ai(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),sn(_)}};function wc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function vd(h){const _={};h=(h.g&&2<=ai(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(q(h[C]))continue;var E=N(h[C]);const Q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ot=_[Q]||[];_[Q]=ot,ot.push(E)}D(_,function(C){return C.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sa(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function no(h){this.Aa=0,this.i=[],this.j=new Nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sa("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sa("baseRetryDelayMs",5e3,h),this.cb=sa("retryDelaySeedMs",1e4,h),this.Wa=sa("forwardChannelMaxRetries",2,h),this.wa=sa("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new wi(h&&h.concurrentRequestLimit),this.Da=new na,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=no.prototype,e.la=8,e.G=1,e.connect=function(h,_,E,C){de(0),this.W=h,this.H=_||{},E&&C!==void 0&&(this.H.OSID=E,this.H.OAID=C),this.F=this.X,this.I=xc(this,null,this.W),ro(this)};function xl(h){if(Sc(h),h.G==3){var _=h.U++,E=Hn(h.I);if(se(E,"SID",h.K),se(E,"RID",_),se(E,"TYPE","terminate"),aa(h,E),_=new an(h,h.j,_),_.L=2,_.v=Js(Hn(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=_.v,E=!0),E||(_.g=Nc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),gr(_)}Cc(h)}function io(h){h.g&&(oa(h),h.g.cancel(),h.g=null)}function Sc(h){io(h),h.u&&(d.clearTimeout(h.u),h.u=null),so(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function ro(h){if(!Zr(h.h)&&!h.s){h.s=!0;var _=h.Ga;$||x(),at||($(),at=!0),Y.add(_,h),h.B=0}}function Ed(h,_){return Fi(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=be(T(h.Ga,h,_),Ol(h,h.B)),h.B++,!0)}e.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const Q=new an(this,this.j,h);let ot=this.o;if(this.S&&(ot?(ot=R(ot),k(ot,this.S)):ot=this.S),this.m!==null||this.O||(Q.H=ot,ot=null),this.P)t:{for(var _=0,E=0;E<this.i.length;E++){e:{var C=this.i[E];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break e}C=void 0}if(C===void 0)break;if(_+=C,4096<_){_=E;break t}if(_===4096||E===this.i.length-1){_=E+1;break t}}_=1e3}else _=1e3;_=bc(this,Q,_),E=Hn(this.I),se(E,"RID",h),se(E,"CVER",22),this.D&&se(E,"X-HTTP-Session-Id",this.D),aa(this,E),ot&&(this.O?_="headers="+encodeURIComponent(String(Cl(ot)))+"&"+_:this.m&&Ze(E,this.m,ot)),Qa(this.h,Q),this.Ua&&se(E,"TYPE","init"),this.P?(se(E,"$req",_),se(E,"SID","null"),Q.T=!0,Bn(Q,E,null)):Bn(Q,E,_),this.G=2}}else this.G==3&&(h?Nl(this,h):this.i.length==0||Zr(this.h)||Nl(this))};function Nl(h,_){var E;_?E=_.l:E=h.U++;const C=Hn(h.I);se(C,"SID",h.K),se(C,"RID",E),se(C,"AID",h.T),aa(h,C),h.m&&h.o&&Ze(C,h.m,h.o),E=new an(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=bc(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Qa(h.h,E),Bn(E,C,_)}function aa(h,_){h.H&&nt(h.H,function(E,C){se(_,C,E)}),h.l&&Sl({},function(E,C){se(_,C,E)})}function bc(h,_,E){E=Math.min(h.i.length,E);var C=h.l?T(h.l.Na,h.l,h):null;t:{var Q=h.i;let ot=-1;for(;;){const yt=["count="+E];ot==-1?0<E?(ot=Q[0].g,yt.push("ofs="+ot)):ot=0:yt.push("ofs="+ot);let Kt=!0;for(let He=0;He<E;He++){let Xt=Q[He].g;const We=Q[He].map;if(Xt-=ot,0>Xt)ot=Math.max(0,Q[He].g-100),Kt=!1;else try{Gi(We,yt,"req"+Xt+"_")}catch{C&&C(We)}}if(Kt){C=yt.join("&");break t}}}return h=h.i.splice(0,E),_.D=h,C}function Ac(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;$||x(),at||($(),at=!0),Y.add(_,h),h.v=0}}function Dl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=be(T(h.Fa,h),Ol(h,h.v)),h.v++,!0)}e.Fa=function(){if(this.u=null,Rc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=be(T(this.ab,this),h)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,de(10),io(this),Rc(this))};function oa(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Rc(h){h.g=new an(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Hn(h.qa);se(_,"RID","rpc"),se(_,"SID",h.K),se(_,"AID",h.T),se(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&se(_,"TO",h.ja),se(_,"TYPE","xmlhttp"),aa(h,_),h.m&&h.o&&Ze(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Js(Hn(_)),E.m=null,E.P=!0,Ti(E,h)}e.Za=function(){this.C!=null&&(this.C=null,io(this),Dl(this),de(19))};function so(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Ic(h,_){var E=null;if(h.g==_){so(h),oa(h),h.g=null;var C=2}else if(Tl(h.h,_))E=_.D,Rn(h.h,_),C=1;else return;if(h.G!=0){if(_.o)if(C==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var Q=h.B;C=Li(),Ft(C,new xe(C,E)),ro(h)}else Ac(h);else if(Q=_.s,Q==3||Q==0&&0<_.X||!(C==1&&Ed(h,_)||C==2&&Dl(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),Q){case 1:Er(h,5);break;case 4:Er(h,10);break;case 3:Er(h,6);break;default:Er(h,2)}}}function Ol(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function Er(h,_){if(h.j.info("Error code "+_),_==2){var E=T(h.fb,h),C=h.Xa;const Q=!C;C=new ke(C||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ws(C,"https"),Js(C),Q?ea(C.toString(),E):Si(C.toString(),E)}else de(2);h.G=0,h.l&&h.l.sa(_),Cc(h),Sc(h)}e.fb=function(h){h?(this.j.info("Successfully pinged google.com"),de(2)):(this.j.info("Failed to ping google.com"),de(1))};function Cc(h){if(h.G=0,h.ka=[],h.l){const _=wl(h.h);(_.length!=0||h.i.length!=0)&&(V(h.ka,_),V(h.ka,h.i),h.h.i.length=0,L(h.i),h.i.length=0),h.l.ra()}}function xc(h,_,E){var C=E instanceof ke?Hn(E):new ke(E);if(C.g!="")_&&(C.g=_+"."+C.g),Wr(C,C.s);else{var Q=d.location;C=Q.protocol,_=_?_+"."+Q.hostname:Q.hostname,Q=+Q.port;var ot=new ke(null);C&&Ws(ot,C),_&&(ot.g=_),Q&&Wr(ot,Q),E&&(ot.l=E),C=ot}return E=h.D,_=h.ya,E&&_&&se(C,E,_),se(C,"VER",h.la),aa(h,C),C}function Nc(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new ee(new Jr({eb:E})):new ee(h.pa),_.Ha(h.J),_}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dc(){}e=Dc.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ao(){}ao.prototype.g=function(h,_){return new In(h,_)};function In(h,_){te.call(this),this.g=new no(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!q(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!q(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Xi(this)}P(In,te),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){xl(this.g)},In.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=Qe(h),h=E);_.i.push(new Xa(_.Ya++,h)),_.G==3&&ro(_)},In.prototype.N=function(){this.g.l=null,delete this.j,xl(this.g),delete this.g,In.aa.N.call(this)};function Oc(h){Zn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){t:{for(const E in _){h=E;break t}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}P(Oc,Zn);function Mc(){zn.call(this),this.status=1}P(Mc,zn);function Xi(h){this.g=h}P(Xi,Dc),Xi.prototype.ua=function(){Ft(this.g,"a")},Xi.prototype.ta=function(h){Ft(this.g,new Oc(h))},Xi.prototype.sa=function(h){Ft(this.g,new Mc)},Xi.prototype.ra=function(){Ft(this.g,"b")},ao.prototype.createWebChannel=ao.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,A1=function(){return new ao},b1=function(){return Li()},S1=Wn,up={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bi.NO_ERROR=0,Bi.TIMEOUT=8,Bi.HTTP_ERROR=6,ef=Bi,Jn.COMPLETE="complete",w1=Jn,Ei.EventType=Un,Un.OPEN="a",Un.CLOSE="b",Un.ERROR="c",Un.MESSAGE="d",te.prototype.listen=te.prototype.K,Du=Ei,ee.prototype.listenOnce=ee.prototype.L,ee.prototype.getLastError=ee.prototype.Ka,ee.prototype.getLastErrorCode=ee.prototype.Ba,ee.prototype.getStatus=ee.prototype.Z,ee.prototype.getResponseJson=ee.prototype.Oa,ee.prototype.getResponseText=ee.prototype.oa,ee.prototype.send=ee.prototype.ea,ee.prototype.setWithCredentials=ee.prototype.Ha,T1=ee}).apply(typeof Fh<"u"?Fh:typeof self<"u"?self:typeof window<"u"?window:{});const cT="@firebase/firestore",hT="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dl="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=new Yp("@firebase/firestore");function Bo(){return ka.logLevel}function vt(e,...t){if(ka.logLevel<=$t.DEBUG){const n=t.map(Qp);ka.debug(`Firestore (${dl}): ${e}`,...n)}}function jr(e,...t){if(ka.logLevel<=$t.ERROR){const n=t.map(Qp);ka.error(`Firestore (${dl}): ${e}`,...n)}}function il(e,...t){if(ka.logLevel<=$t.WARN){const n=t.map(Qp);ka.warn(`Firestore (${dl}): ${e}`,...n)}}function Qp(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,R1(e,r,n)}function R1(e,t,n){let r=`FIRESTORE (${dl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw jr(r),new Error(r)}function ne(e,t,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,e||R1(t,a,r)}function Vt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends Kr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class JM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(vn.UNAUTHENTICATED))}shutdown(){}}class t4{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class e4{constructor(t){this.t=t,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ne(this.o===void 0,42304);let r=this.i;const a=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let l=new Ps;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ps,t.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const g=l;t.enqueueRetryable(async()=>{await g.promise,await a(this.currentUser)})},d=g=>{vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(g=>d(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ps)}},0),c()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne(typeof r.accessToken=="string",31837,{l:r}),new I1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ne(t===null||typeof t=="string",2055,{h:t}),new vn(t)}}class n4{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class i4{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new n4(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r4{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pi(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ne(this.o===void 0,3512);const r=l=>{l.error!=null&&vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,vt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>r(l))};const a=l=>{vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=s4(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<n&&(r+=t.charAt(a[l]%62))}return r}}function Bt(e,t){return e<t?-1:e>t?1:0}function cp(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),a=t.codePointAt(n);if(r!==a){if(r<128&&a<128)return Bt(r,a);{const l=C1(),c=a4(l.encode(dT(e,n)),l.encode(dT(t,n)));return c!==0?c:Bt(r,a)}}n+=r>65535?2:1}return Bt(e.length,t.length)}function dT(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function a4(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Bt(e[n],t[n]);return Bt(e.length,t.length)}function rl(e,t,n){return e.length===t.length&&e.every((r,a)=>n(r,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=-62135596800,mT=1e6;class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(t){return Ge.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*mT);return new Ge(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Et(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Et(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<gT)throw new Et(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Et(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mT}_compareTo(t){return this.seconds===t.seconds?Bt(this.nanoseconds,t.nanoseconds):Bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-gT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{static fromTimestamp(t){return new Mt(t)}static min(){return new Mt(new Ge(0,0))}static max(){return new Mt(new Ge(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="__name__";class nr{constructor(t,n,r){n===void 0?n=0:n>t.length&&Dt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&Dt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return nr.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof nr?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let a=0;a<r;a++){const l=nr.compareSegments(t.get(a),n.get(a));if(l!==0)return l}return Bt(t.length,n.length)}static compareSegments(t,n){const r=nr.isNumericId(t),a=nr.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?nr.extractNumericId(t).compare(nr.extractNumericId(n)):cp(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ks.fromString(t.substring(4,t.length-2))}}class pe extends nr{construct(t,n,r){return new pe(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Et(gt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(a=>a.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const o4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends nr{construct(t,n,r){return new fn(t,n,r)}static isValidIdentifier(t){return o4.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pT}static keyField(){return new fn([pT])}static fromServerFormat(t){const n=[];let r="",a=0;const l=()=>{if(r.length===0)throw new Et(gt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;a<t.length;){const d=t[a];if(d==="\\"){if(a+1===t.length)throw new Et(gt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Et(gt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new Et(gt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new fn(n)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t){this.path=t}static fromPath(t){return new Rt(pe.fromString(t))}static fromName(t){return new Rt(pe.fromString(t).popFirst(5))}static empty(){return new Rt(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&pe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return pe.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Rt(new pe(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=-1;function l4(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=Mt.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new zs(a,Rt.empty(),t)}function u4(e){return new zs(e.readTime,e.key,Xu)}class zs{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new zs(Mt.min(),Rt.empty(),Xu)}static max(){return new zs(Mt.max(),Rt.empty(),Xu)}}function c4(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Rt.comparator(e.documentKey,t.documentKey),n!==0?n:Bt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class f4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gl(e){if(e.code!==gt.FAILED_PRECONDITION||e.message!==h4)throw e;vt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new dt((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,a)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof dt?n:dt.resolve(n)}catch(n){return dt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.reject(n)}static resolve(t){return new dt((n,r)=>{n(t)})}static reject(t){return new dt((n,r)=>{r(t)})}static waitFor(t){return new dt((n,r)=>{let a=0,l=0,c=!1;t.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&n()},g=>r(g))}),c=!0,l===a&&n()})}static or(t){let n=dt.resolve(!1);for(const r of t)n=n.next(a=>a?dt.resolve(a):r());return n}static forEach(t,n){const r=[];return t.forEach((a,l)=>{r.push(n.call(this,a,l))}),this.waitFor(r)}static mapArray(t,n){return new dt((r,a)=>{const l=t.length,c=new Array(l);let d=0;for(let g=0;g<l;g++){const m=g;n(t[m]).next(y=>{c[m]=y,++d,d===l&&r(c)},y=>a(y))}})}static doWhile(t,n){return new dt((r,a)=>{const l=()=>{t()===!0?n().next(()=>{l()},a):r()};l()})}}function d4(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ml(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Qf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp=-1;function Zf(e){return e==null}function Sf(e){return e===0&&1/e==-1/0}function g4(e){return typeof e=="number"&&Number.isInteger(e)&&!Sf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="";function m4(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=yT(t)),t=p4(e.get(n),t);return yT(t)}function p4(e,t){let n=t;const r=e.length;for(let a=0;a<r;a++){const l=e.charAt(a);switch(l){case"\0":n+="";break;case N1:n+="";break;default:n+=l}}return n}function yT(e){return e+N1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function za(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function D1(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(t,n){this.comparator=t,this.root=n||hn.EMPTY}insert(t,n){return new Se(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(t){return new Se(this.comparator,this.root.remove(t,this.comparator).copy(null,null,hn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new jh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new jh(this.root,t,this.comparator,!1)}getReverseIterator(){return new jh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new jh(this.root,t,this.comparator,!0)}}class jh{constructor(t,n,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=n?r(t.key,n):1,n&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class hn{constructor(t,n,r,a,l){this.key=t,this.value=n,this.color=r??hn.RED,this.left=a??hn.EMPTY,this.right=l??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,a,l){return new hn(t??this.key,n??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let a=this;const l=r(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,n,r),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(t,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,a=this;if(n(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(t,a.key)===0){if(a.right.isEmpty())return hn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Dt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Dt(27949);return t+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt(57766)}get value(){throw Dt(16141)}get color(){throw Dt(16727)}get left(){throw Dt(29726)}get right(){throw Dt(36894)}copy(t,n,r,a,l){return this}insert(t,n,r){return new hn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.comparator=t,this.data=new Se(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,t[1])>=0)return;n(a.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new vT(this.data.getIterator())}getIteratorFrom(t){return new vT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof $e)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new $e(this.comparator);return n.data=t,n}}class vT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(t){this.fields=t,t.sort(fn.comparator)}static empty(){return new xi([])}unionWith(t){let n=new $e(fn.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new xi(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return rl(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new O1("Invalid base64 string: "+l):l}}(t);return new dn(n)}static fromUint8Array(t){const n=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(t);return new dn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const y4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(e){if(ne(!!e,39018),typeof e=="string"){let t=0;const n=y4.exec(e);if(ne(!!n,46558,{timestamp:e}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),t=Number(a)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Oe(e.seconds),nanos:Oe(e.nanos)}}function Oe(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Hs(e){return typeof e=="string"?dn.fromBase64String(e):dn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="server_timestamp",V1="__type__",k1="__previous_value__",P1="__local_write_time__";function Wp(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[V1])===null||n===void 0?void 0:n.stringValue)===M1}function Wf(e){const t=e.mapValue.fields[k1];return Wp(t)?Wf(t):t}function Qu(e){const t=Bs(e.mapValue.fields[P1].timestampValue);return new Ge(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(t,n,r,a,l,c,d,g,m,y){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=m,this.isUsingEmulator=y}}const bf="(default)";class Zu{constructor(t,n){this.projectId=t,this.database=n||bf}static empty(){return new Zu("","")}get isDefaultDatabase(){return this.database===bf}isEqual(t){return t instanceof Zu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="__type__",v4="__max__",Gh={mapValue:{}},U1="__vector__",Af="value";function qs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Wp(e)?4:T4(e)?9007199254740991:E4(e)?10:11:Dt(28295,{value:e})}function ur(e,t){if(e===t)return!0;const n=qs(e);if(n!==qs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Qu(e).isEqual(Qu(t));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Bs(a.timestampValue),d=Bs(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,l){return Hs(a.bytesValue).isEqual(Hs(l.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,l){return Oe(a.geoPointValue.latitude)===Oe(l.geoPointValue.latitude)&&Oe(a.geoPointValue.longitude)===Oe(l.geoPointValue.longitude)}(e,t);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Oe(a.integerValue)===Oe(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Oe(a.doubleValue),d=Oe(l.doubleValue);return c===d?Sf(c)===Sf(d):isNaN(c)&&isNaN(d)}return!1}(e,t);case 9:return rl(e.arrayValue.values||[],t.arrayValue.values||[],ur);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(_T(c)!==_T(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(d[g]===void 0||!ur(c[g],d[g])))return!1;return!0}(e,t);default:return Dt(52216,{left:e})}}function Wu(e,t){return(e.values||[]).find(n=>ur(n,t))!==void 0}function sl(e,t){if(e===t)return 0;const n=qs(e),r=qs(t);if(n!==r)return Bt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Bt(e.booleanValue,t.booleanValue);case 2:return function(l,c){const d=Oe(l.integerValue||l.doubleValue),g=Oe(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(e,t);case 3:return ET(e.timestampValue,t.timestampValue);case 4:return ET(Qu(e),Qu(t));case 5:return cp(e.stringValue,t.stringValue);case 6:return function(l,c){const d=Hs(l),g=Hs(c);return d.compareTo(g)}(e.bytesValue,t.bytesValue);case 7:return function(l,c){const d=l.split("/"),g=c.split("/");for(let m=0;m<d.length&&m<g.length;m++){const y=Bt(d[m],g[m]);if(y!==0)return y}return Bt(d.length,g.length)}(e.referenceValue,t.referenceValue);case 8:return function(l,c){const d=Bt(Oe(l.latitude),Oe(c.latitude));return d!==0?d:Bt(Oe(l.longitude),Oe(c.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return TT(e.arrayValue,t.arrayValue);case 10:return function(l,c){var d,g,m,y;const v=l.fields||{},T=c.fields||{},S=(d=v[Af])===null||d===void 0?void 0:d.arrayValue,P=(g=T[Af])===null||g===void 0?void 0:g.arrayValue,L=Bt(((m=S?.values)===null||m===void 0?void 0:m.length)||0,((y=P?.values)===null||y===void 0?void 0:y.length)||0);return L!==0?L:TT(S,P)}(e.mapValue,t.mapValue);case 11:return function(l,c){if(l===Gh.mapValue&&c===Gh.mapValue)return 0;if(l===Gh.mapValue)return 1;if(c===Gh.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),m=c.fields||{},y=Object.keys(m);g.sort(),y.sort();for(let v=0;v<g.length&&v<y.length;++v){const T=cp(g[v],y[v]);if(T!==0)return T;const S=sl(d[g[v]],m[y[v]]);if(S!==0)return S}return Bt(g.length,y.length)}(e.mapValue,t.mapValue);default:throw Dt(23264,{Pe:n})}}function ET(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Bt(e,t);const n=Bs(e),r=Bs(t),a=Bt(n.seconds,r.seconds);return a!==0?a:Bt(n.nanos,r.nanos)}function TT(e,t){const n=e.values||[],r=t.values||[];for(let a=0;a<n.length&&a<r.length;++a){const l=sl(n[a],r[a]);if(l)return l}return Bt(n.length,r.length)}function al(e){return hp(e)}function hp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Bs(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Hs(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Rt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",a=!0;for(const l of n.values||[])a?a=!1:r+=",",r+=hp(l);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${hp(n.fields[c])}`;return a+"}"}(e.mapValue):Dt(61005,{value:e})}function nf(e){switch(qs(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Wf(e);return t?16+nf(t):16;case 5:return 2*e.stringValue.length;case 6:return Hs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+nf(l),0)}(e.arrayValue);case 10:case 11:return function(r){let a=0;return za(r.fields,(l,c)=>{a+=l.length+nf(c)}),a}(e.mapValue);default:throw Dt(13486,{value:e})}}function wT(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function fp(e){return!!e&&"integerValue"in e}function Jp(e){return!!e&&"arrayValue"in e}function ST(e){return!!e&&"nullValue"in e}function bT(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function rf(e){return!!e&&"mapValue"in e}function E4(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[L1])===null||n===void 0?void 0:n.stringValue)===U1}function ku(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return za(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=ku(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ku(e.arrayValue.values[n]);return t}return Object.assign({},e)}function T4(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===v4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(t){this.value=t}static empty(){return new yi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!rf(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ku(n)}setAll(t){let n=fn.emptyPath(),r={},a=[];t.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const g=this.getFieldsMap(n);this.applyChanges(g,r,a),r={},a=[],n=d.popLast()}c?r[d.lastSegment()]=ku(c):a.push(d.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,r,a)}delete(t){const n=this.field(t.popLast());rf(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ur(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let a=n.mapValue.fields[t.get(r)];rf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(t,n,r){za(n,(a,l)=>t[a]=l);for(const a of r)delete t[a]}clone(){return new yi(ku(this.value))}}function z1(e){const t=[];return za(e.fields,(n,r)=>{const a=new fn([n]);if(rf(r)){const l=z1(r.mapValue).fields;if(l.length===0)t.push(a);else for(const c of l)t.push(a.child(c))}else t.push(a)}),new xi(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t,n,r,a,l,c,d){this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(t){return new En(t,0,Mt.min(),Mt.min(),Mt.min(),yi.empty(),0)}static newFoundDocument(t,n,r,a){return new En(t,1,n,Mt.min(),r,a,0)}static newNoDocument(t,n){return new En(t,2,n,Mt.min(),Mt.min(),yi.empty(),0)}static newUnknownDocument(t,n){return new En(t,3,n,Mt.min(),Mt.min(),yi.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Mt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=yi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof En&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(t,n){this.position=t,this.inclusive=n}}function AT(e,t,n){let r=0;for(let a=0;a<e.position.length;a++){const l=t[a],c=e.position[a];if(l.field.isKeyField()?r=Rt.comparator(Rt.fromName(c.referenceValue),n.key):r=sl(c,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function RT(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ur(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(t,n="asc"){this.field=t,this.dir=n}}function w4(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{}class ze extends B1{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new b4(t,n,r):n==="array-contains"?new I4(t,r):n==="in"?new C4(t,r):n==="not-in"?new x4(t,r):n==="array-contains-any"?new N4(t,r):new ze(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new A4(t,r):new R4(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(sl(n,this.value)):n!==null&&qs(this.value)===qs(n)&&this.matchesComparison(sl(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oi extends B1{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new Oi(t,n)}matches(t){return H1(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function H1(e){return e.op==="and"}function q1(e){return S4(e)&&H1(e)}function S4(e){for(const t of e.filters)if(t instanceof Oi)return!1;return!0}function dp(e){if(e instanceof ze)return e.field.canonicalString()+e.op.toString()+al(e.value);if(q1(e))return e.filters.map(t=>dp(t)).join(",");{const t=e.filters.map(n=>dp(n)).join(",");return`${e.op}(${t})`}}function F1(e,t){return e instanceof ze?function(r,a){return a instanceof ze&&r.op===a.op&&r.field.isEqual(a.field)&&ur(r.value,a.value)}(e,t):e instanceof Oi?function(r,a){return a instanceof Oi&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&F1(c,a.filters[d]),!0):!1}(e,t):void Dt(19439)}function j1(e){return e instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${al(n.value)}`}(e):e instanceof Oi?function(n){return n.op.toString()+" {"+n.getFilters().map(j1).join(" ,")+"}"}(e):"Filter"}class b4 extends ze{constructor(t,n,r){super(t,n,r),this.key=Rt.fromName(r.referenceValue)}matches(t){const n=Rt.comparator(t.key,this.key);return this.matchesComparison(n)}}class A4 extends ze{constructor(t,n){super(t,"in",n),this.keys=G1("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class R4 extends ze{constructor(t,n){super(t,"not-in",n),this.keys=G1("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function G1(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Rt.fromName(r.referenceValue))}class I4 extends ze{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Jp(n)&&Wu(n.arrayValue,this.value)}}class C4 extends ze{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Wu(this.value.arrayValue,n)}}class x4 extends ze{constructor(t,n){super(t,"not-in",n)}matches(t){if(Wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Wu(this.value.arrayValue,n)}}class N4 extends ze{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Jp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Wu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(t,n=null,r=[],a=[],l=null,c=null,d=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function IT(e,t=null,n=[],r=[],a=null,l=null,c=null){return new D4(e,t,n,r,a,l,c)}function ty(e){const t=Vt(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>dp(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),Zf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>al(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>al(r)).join(",")),t.Ie=n}return t.Ie}function ey(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!w4(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!F1(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!RT(e.startAt,t.startAt)&&RT(e.endAt,t.endAt)}function gp(e){return Rt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(t,n=null,r=[],a=[],l=null,c="F",d=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function O4(e,t,n,r,a,l,c,d){return new pl(e,t,n,r,a,l,c,d)}function $1(e){return new pl(e)}function CT(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Y1(e){return e.collectionGroup!==null}function Pu(e){const t=Vt(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const l of t.explicitOrderBy)t.Ee.push(l),n.add(l.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new $e(fn.comparator);return c.filters.forEach(g=>{g.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(t).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||t.Ee.push(new Ju(l,r))}),n.has(fn.keyField().canonicalString())||t.Ee.push(new Ju(fn.keyField(),r))}return t.Ee}function rr(e){const t=Vt(e);return t.de||(t.de=M4(t,Pu(e))),t.de}function M4(e,t){if(e.limitType==="F")return IT(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Ju(a.field,l)});const n=e.endAt?new Rf(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Rf(e.startAt.position,e.startAt.inclusive):null;return IT(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function mp(e,t){const n=e.filters.concat([t]);return new pl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function pp(e,t,n){return new pl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Jf(e,t){return ey(rr(e),rr(t))&&e.limitType===t.limitType}function K1(e){return`${ty(rr(e))}|lt:${e.limitType}`}function Ho(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(a=>j1(a)).join(", ")}]`),Zf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(a=>al(a)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(a=>al(a)).join(",")),`Target(${r})`}(rr(e))}; limitType=${e.limitType})`}function td(e,t){return t.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Rt.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(e,t)&&function(r,a){for(const l of Pu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(e,t)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(e,t)&&function(r,a){return!(r.startAt&&!function(c,d,g){const m=AT(c,d,g);return c.inclusive?m<=0:m<0}(r.startAt,Pu(r),a)||r.endAt&&!function(c,d,g){const m=AT(c,d,g);return c.inclusive?m>=0:m>0}(r.endAt,Pu(r),a))}(e,t)}function V4(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function X1(e){return(t,n)=>{let r=!1;for(const a of Pu(e)){const l=k4(a,t,n);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function k4(e,t,n){const r=e.field.isKeyField()?Rt.comparator(t.key,n.key):function(l,c,d){const g=c.data.field(l),m=d.data.field(l);return g!==null&&m!==null?sl(g,m):Dt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Dt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,n]);a.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(t){za(this.inner,(n,r)=>{for(const[a,l]of r)t(a,l)})}isEmpty(){return D1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=new Se(Rt.comparator);function Gr(){return P4}const Q1=new Se(Rt.comparator);function Ou(...e){let t=Q1;for(const n of e)t=t.insert(n.key,n);return t}function Z1(e){let t=Q1;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Ca(){return Lu()}function W1(){return Lu()}function Lu(){return new Ba(e=>e.toString(),(e,t)=>e.isEqual(t))}const L4=new Se(Rt.comparator),U4=new $e(Rt.comparator);function Yt(...e){let t=U4;for(const n of e)t=t.add(n);return t}const z4=new $e(Bt);function B4(){return z4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sf(t)?"-0":t}}function J1(e){return{integerValue:""+e}}function H4(e,t){return g4(t)?J1(t):ny(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this._=void 0}}function q4(e,t,n){return e instanceof If?function(a,l){const c={fields:{[V1]:{stringValue:M1},[P1]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Wp(l)&&(l=Wf(l)),l&&(c.fields[k1]=l),{mapValue:c}}(n,t):e instanceof tc?eb(e,t):e instanceof ec?nb(e,t):function(a,l){const c=tb(a,l),d=xT(c)+xT(a.Re);return fp(c)&&fp(a.Re)?J1(d):ny(a.serializer,d)}(e,t)}function F4(e,t,n){return e instanceof tc?eb(e,t):e instanceof ec?nb(e,t):n}function tb(e,t){return e instanceof Cf?function(r){return fp(r)||function(l){return!!l&&"doubleValue"in l}(r)}(t)?t:{integerValue:0}:null}class If extends ed{}class tc extends ed{constructor(t){super(),this.elements=t}}function eb(e,t){const n=ib(t);for(const r of e.elements)n.some(a=>ur(a,r))||n.push(r);return{arrayValue:{values:n}}}class ec extends ed{constructor(t){super(),this.elements=t}}function nb(e,t){let n=ib(t);for(const r of e.elements)n=n.filter(a=>!ur(a,r));return{arrayValue:{values:n}}}class Cf extends ed{constructor(t,n){super(),this.serializer=t,this.Re=n}}function xT(e){return Oe(e.integerValue||e.doubleValue)}function ib(e){return Jp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function j4(e,t){return e.field.isEqual(t.field)&&function(r,a){return r instanceof tc&&a instanceof tc||r instanceof ec&&a instanceof ec?rl(r.elements,a.elements,ur):r instanceof Cf&&a instanceof Cf?ur(r.Re,a.Re):r instanceof If&&a instanceof If}(e.transform,t.transform)}class G4{constructor(t,n){this.version=t,this.transformResults=n}}class sr{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new sr}static exists(t){return new sr(void 0,t)}static updateTime(t){return new sr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function sf(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class nd{}function rb(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new iy(e.key,sr.none()):new cc(e.key,e.data,sr.none());{const n=e.data,r=yi.empty();let a=new $e(fn.comparator);for(let l of t.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Ha(e.key,r,new xi(a.toArray()),sr.none())}}function $4(e,t,n){e instanceof cc?function(a,l,c){const d=a.value.clone(),g=DT(a.fieldTransforms,l,c.transformResults);d.setAll(g),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(e,t,n):e instanceof Ha?function(a,l,c){if(!sf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=DT(a.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(sb(a)),g.setAll(d),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(e,t,n):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,n)}function Uu(e,t,n,r){return e instanceof cc?function(l,c,d,g){if(!sf(l.precondition,c))return d;const m=l.value.clone(),y=OT(l.fieldTransforms,g,c);return m.setAll(y),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ha?function(l,c,d,g){if(!sf(l.precondition,c))return d;const m=OT(l.fieldTransforms,g,c),y=c.data;return y.setAll(sb(l)),y.setAll(m),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(e,t,n,r):function(l,c,d){return sf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(e,t,n)}function Y4(e,t){let n=null;for(const r of e.fieldTransforms){const a=t.data.field(r.field),l=tb(r.transform,a||null);l!=null&&(n===null&&(n=yi.empty()),n.set(r.field,l))}return n||null}function NT(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&rl(r,a,(l,c)=>j4(l,c))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class cc extends nd{constructor(t,n,r,a=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ha extends nd{constructor(t,n,r,a,l=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function sb(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function DT(e,t,n){const r=new Map;ne(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let a=0;a<n.length;a++){const l=e[a],c=l.transform,d=t.data.field(l.field);r.set(l.field,F4(c,d,n[a]))}return r}function OT(e,t,n){const r=new Map;for(const a of e){const l=a.transform,c=n.data.field(a.field);r.set(a.field,q4(l,c,t))}return r}class iy extends nd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class K4 extends nd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(t,n,r,a){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&$4(l,t,r[a])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Uu(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Uu(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=W1();return this.mutations.forEach(a=>{const l=t.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=n.has(a.key)?null:d;const g=rb(c,d);g!==null&&r.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Yt())}isEqual(t){return this.batchId===t.batchId&&rl(this.mutations,t.mutations,(n,r)=>NT(n,r))&&rl(this.baseMutations,t.baseMutations,(n,r)=>NT(n,r))}}class ry{constructor(t,n,r,a){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(t,n,r){ne(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let a=function(){return L4}();const l=t.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new ry(t,n,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,Zt;function W4(e){switch(e){case gt.OK:return Dt(64938);case gt.CANCELLED:case gt.UNKNOWN:case gt.DEADLINE_EXCEEDED:case gt.RESOURCE_EXHAUSTED:case gt.INTERNAL:case gt.UNAVAILABLE:case gt.UNAUTHENTICATED:return!1;case gt.INVALID_ARGUMENT:case gt.NOT_FOUND:case gt.ALREADY_EXISTS:case gt.PERMISSION_DENIED:case gt.FAILED_PRECONDITION:case gt.ABORTED:case gt.OUT_OF_RANGE:case gt.UNIMPLEMENTED:case gt.DATA_LOSS:return!0;default:return Dt(15467,{code:e})}}function ab(e){if(e===void 0)return jr("GRPC error has no .code"),gt.UNKNOWN;switch(e){case Ue.OK:return gt.OK;case Ue.CANCELLED:return gt.CANCELLED;case Ue.UNKNOWN:return gt.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return gt.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return gt.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return gt.INTERNAL;case Ue.UNAVAILABLE:return gt.UNAVAILABLE;case Ue.UNAUTHENTICATED:return gt.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return gt.INVALID_ARGUMENT;case Ue.NOT_FOUND:return gt.NOT_FOUND;case Ue.ALREADY_EXISTS:return gt.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return gt.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return gt.FAILED_PRECONDITION;case Ue.ABORTED:return gt.ABORTED;case Ue.OUT_OF_RANGE:return gt.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return gt.UNIMPLEMENTED;case Ue.DATA_LOSS:return gt.DATA_LOSS;default:return Dt(39323,{code:e})}}(Zt=Ue||(Ue={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=new ks([4294967295,4294967295],0);function MT(e){const t=C1().encode(e),n=new E1;return n.update(t),new Uint8Array(n.digest())}function VT(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new ks([n,r],0),new ks([a,l],0)]}class sy{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Mu(`Invalid padding: ${n}`);if(r<0)throw new Mu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Mu(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Mu(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=ks.fromNumber(this.pe)}we(t,n,r){let a=t.add(n.multiply(ks.fromNumber(r)));return a.compare(J4)===1&&(a=new ks([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=MT(t),[r,a]=VT(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);if(!this.be(c))return!1}return!0}static create(t,n,r){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new sy(l,a,n);return r.forEach(d=>c.insert(d)),c}insert(t){if(this.pe===0)return;const n=MT(t),[r,a]=VT(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);this.Se(c)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(t,n,r,a,l){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const a=new Map;return a.set(t,hc.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new id(Mt.min(),a,new Se(Bt),Gr(),Yt())}}class hc{constructor(t,n,r,a,l){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new hc(r,n,Yt(),Yt(),Yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(t,n,r,a){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=a}}class ob{constructor(t,n){this.targetId=t,this.Ce=n}}class lb{constructor(t,n,r=dn.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a}}class kT{constructor(){this.Fe=0,this.Me=PT(),this.xe=dn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Yt(),n=Yt(),r=Yt();return this.Me.forEach((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:Dt(38017,{changeType:l})}}),new hc(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=PT()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,ne(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class tV{constructor(t){this.ze=t,this.je=new Map,this.He=Gr(),this.Je=$h(),this.Ye=$h(),this.Ze=new Se(Bt)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:Dt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,a)=>{this.it(a)&&n(a)})}ot(t){const n=t.targetId,r=t.Ce.count,a=this._t(n);if(a){const l=a.target;if(gp(l))if(r===0){const c=new Rt(l.path);this.tt(n,c,En.newNoDocument(c,Mt.min()))}else ne(r===1,20013,{expectedCount:r});else{const c=this.ut(n);if(c!==r){const d=this.ct(t),g=d?this.lt(d,t,c):1;if(g!==0){this.st(n);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,m)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=n;let c,d;try{c=Hs(r).toUint8Array()}catch(g){if(g instanceof O1)return il("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new sy(c,a,l)}catch(g){return il(g instanceof Mu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.pe===0?null:d}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let a=0;return r.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(d)||(this.tt(n,l,null),a++)}),a}It(t){const n=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&gp(d.target)){const g=new Rt(d.target.path);this.Et(g).has(c)||this.dt(c,g)||this.tt(c,g,En.newNoDocument(g,t))}l.Le&&(n.set(c,l.qe()),l.Qe())}});let r=Yt();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(g=>{const m=this._t(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.He.forEach((l,c)=>c.setReadTime(t));const a=new id(t,n,this.Ze,this.He,r);return this.He=Gr(),this.Je=$h(),this.Ye=$h(),this.Ze=new Se(Bt),a}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const a=this.rt(t);this.dt(t,n)?a.$e(n,1):a.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new kT,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new $e(Bt),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new $e(Bt),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||vt("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new kT),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function $h(){return new Se(Rt.comparator)}function PT(){return new Se(Rt.comparator)}const eV={asc:"ASCENDING",desc:"DESCENDING"},nV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iV={and:"AND",or:"OR"};class rV{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function yp(e,t){return e.useProto3Json||Zf(t)?t:{value:t}}function xf(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ub(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function sV(e,t){return xf(e,t.toTimestamp())}function ar(e){return ne(!!e,49232),Mt.fromTimestamp(function(n){const r=Bs(n);return new Ge(r.seconds,r.nanos)}(e))}function ay(e,t){return _p(e,t).canonicalString()}function _p(e,t){const n=function(a){return new pe(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?n:n.child(t)}function cb(e){const t=pe.fromString(e);return ne(mb(t),10190,{key:t.toString()}),t}function vp(e,t){return ay(e.databaseId,t.path)}function Pm(e,t){const n=cb(t);if(n.get(1)!==e.databaseId.projectId)throw new Et(gt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Et(gt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Rt(fb(n))}function hb(e,t){return ay(e.databaseId,t)}function aV(e){const t=cb(e);return t.length===4?pe.emptyPath():fb(t)}function Ep(e){return new pe(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function fb(e){return ne(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function LT(e,t,n){return{name:vp(e,t),fields:n.value.mapValue.fields}}function oV(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Dt(39313,{state:m})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=function(m,y){return m.useProto3Json?(ne(y===void 0||typeof y=="string",58123),dn.fromBase64String(y||"")):(ne(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),dn.fromUint8Array(y||new Uint8Array))}(e,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(m){const y=m.code===void 0?gt.UNKNOWN:ab(m.code);return new Et(y,m.message||"")}(c);n=new lb(r,a,l,d||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const a=Pm(e,r.document.name),l=ar(r.document.updateTime),c=r.document.createTime?ar(r.document.createTime):Mt.min(),d=new yi({mapValue:{fields:r.document.fields}}),g=En.newFoundDocument(a,l,c,d),m=r.targetIds||[],y=r.removedTargetIds||[];n=new af(m,y,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const a=Pm(e,r.document),l=r.readTime?ar(r.readTime):Mt.min(),c=En.newNoDocument(a,l),d=r.removedTargetIds||[];n=new af([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const a=Pm(e,r.document),l=r.removedTargetIds||[];n=new af([],l,a,null)}else{if(!("filter"in t))return Dt(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new Z4(a,l),d=r.targetId;n=new ob(d,c)}}return n}function lV(e,t){let n;if(t instanceof cc)n={update:LT(e,t.key,t.value)};else if(t instanceof iy)n={delete:vp(e,t.key)};else if(t instanceof Ha)n={update:LT(e,t.key,t.data),updateMask:yV(t.fieldMask)};else{if(!(t instanceof K4))return Dt(16599,{ft:t.type});n={verify:vp(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof If)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof tc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ec)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Cf)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Dt(20930,{transform:c.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:sV(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Dt(27497)}(e,t.precondition)),n}function uV(e,t){return e&&e.length>0?(ne(t!==void 0,14353),e.map(n=>function(a,l){let c=a.updateTime?ar(a.updateTime):ar(l);return c.isEqual(Mt.min())&&(c=ar(l)),new G4(c,a.transformResults||[])}(n,t))):[]}function cV(e,t){return{documents:[hb(e,t.path)]}}function hV(e,t){const n={structuredQuery:{}},r=t.path;let a;t.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hb(e,a);const l=function(m){if(m.length!==0)return gb(Oi.create(m,"and"))}(t.filters);l&&(n.structuredQuery.where=l);const c=function(m){if(m.length!==0)return m.map(y=>function(T){return{field:qo(T.field),direction:gV(T.dir)}}(y))}(t.orderBy);c&&(n.structuredQuery.orderBy=c);const d=yp(e,t.limit);return d!==null&&(n.structuredQuery.limit=d),t.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(t.endAt)),{gt:n,parent:a}}function fV(e){let t=aV(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){ne(r===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:t=t.child(y.collectionId)}let l=[];n.where&&(l=function(v){const T=db(v);return T instanceof Oi&&q1(T)?T.getFilters():[T]}(n.where));let c=[];n.orderBy&&(c=function(v){return v.map(T=>function(P){return new Ju(Fo(P.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(T))}(n.orderBy));let d=null;n.limit&&(d=function(v){let T;return T=typeof v=="object"?v.value:v,Zf(T)?null:T}(n.limit));let g=null;n.startAt&&(g=function(v){const T=!!v.before,S=v.values||[];return new Rf(S,T)}(n.startAt));let m=null;return n.endAt&&(m=function(v){const T=!v.before,S=v.values||[];return new Rf(S,T)}(n.endAt)),O4(t,a,c,l,d,"F",g,m)}function dV(e,t){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt(28987,{purpose:a})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function db(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fo(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Fo(n.unaryFilter.field);return ze.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Fo(n.unaryFilter.field);return ze.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Fo(n.unaryFilter.field);return ze.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Dt(61313);default:return Dt(60726)}}(e):e.fieldFilter!==void 0?function(n){return ze.create(Fo(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Dt(58110);default:return Dt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Oi.create(n.compositeFilter.filters.map(r=>db(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Dt(1026)}}(n.compositeFilter.op))}(e):Dt(30097,{filter:e})}function gV(e){return eV[e]}function mV(e){return nV[e]}function pV(e){return iV[e]}function qo(e){return{fieldPath:e.canonicalString()}}function Fo(e){return fn.fromServerFormat(e.fieldPath)}function gb(e){return e instanceof ze?function(n){if(n.op==="=="){if(bT(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NAN"}};if(ST(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bT(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NAN"}};if(ST(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qo(n.field),op:mV(n.op),value:n.value}}}(e):e instanceof Oi?function(n){const r=n.getFilters().map(a=>gb(a));return r.length===1?r[0]:{compositeFilter:{op:pV(n.op),filters:r}}}(e):Dt(54877,{filter:e})}function yV(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function mb(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(t,n,r,a,l=Mt.min(),c=Mt.min(),d=dn.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(t){return new Ns(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(t){this.wt=t}}function vV(e){const t=fV({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?pp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(){this.Cn=new TV}addToCollectionParentIndex(t,n){return this.Cn.add(n),dt.resolve()}getCollectionParents(t,n){return dt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return dt.resolve()}deleteFieldIndex(t,n){return dt.resolve()}deleteAllFieldIndexes(t){return dt.resolve()}createTargetIndexes(t,n){return dt.resolve()}getDocumentsMatchingTarget(t,n){return dt.resolve(null)}getIndexType(t,n){return dt.resolve(0)}getFieldIndexes(t,n){return dt.resolve([])}getNextCollectionGroupToUpdate(t){return dt.resolve(null)}getMinOffset(t,n){return dt.resolve(zs.min())}getMinOffsetFromCollectionGroup(t,n){return dt.resolve(zs.min())}updateCollectionGroup(t,n,r){return dt.resolve()}updateIndexEntries(t,n){return dt.resolve()}}class TV{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n]||new $e(pe.comparator),l=!a.has(r);return this.index[n]=a.add(r),l}has(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(t){return(this.index[t]||new $e(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pb=41943040;class Vn{static withCacheSize(t){return new Vn(t,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(pb,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new ol(0)}static lr(){return new ol(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="LruGarbageCollector",wV=1048576;function BT([e,t],[n,r]){const a=Bt(e,n);return a===0?Bt(t,r):a}class SV{constructor(t){this.Er=t,this.buffer=new $e(BT),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();BT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bV{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){vt(zT,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ml(n)?vt(zT,"Ignoring IndexedDB error during garbage collection: ",n):await gl(n)}await this.mr(3e5)})}}class AV{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return dt.resolve(Qf.le);const r=new SV(n);return this.gr.forEachTarget(t,a=>r.Rr(a.sequenceNumber)).next(()=>this.gr.yr(t,a=>r.Rr(a))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.gr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(vt("LruGarbageCollector","Garbage collection skipped; disabled"),dt.resolve(UT)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(vt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UT):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let r,a,l,c,d,g,m;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(vt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(t,a))).next(v=>(r=v,d=Date.now(),this.removeTargets(t,r,n))).next(v=>(l=v,g=Date.now(),this.removeOrphanedDocuments(t,r))).next(v=>(m=Date.now(),Bo()<=$t.DEBUG&&vt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${v} documents in `+(m-g)+`ms
Total Duration: ${m-y}ms`),dt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v})))}}function RV(e,t){return new AV(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(){this.changes=new Ba(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,En.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?dt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(t,n,r,a){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(a=>(r=a,this.remoteDocumentCache.getEntry(t,n))).next(a=>(r!==null&&Uu(r.mutation,a,xi.empty(),Ge.now()),a))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Yt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Yt()){const a=Ca();return this.populateOverlays(t,a,n).next(()=>this.computeViews(t,n,a,r).next(l=>{let c=Ou();return l.forEach((d,g)=>{c=c.insert(d,g.overlayedDocument)}),c}))}getOverlayedDocuments(t,n){const r=Ca();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Yt()))}populateOverlays(t,n,r){const a=[];return r.forEach(l=>{n.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(t,a).next(l=>{l.forEach((c,d)=>{n.set(c,d)})})}computeViews(t,n,r,a){let l=Gr();const c=Lu(),d=function(){return Lu()}();return n.forEach((g,m)=>{const y=r.get(m.key);a.has(m.key)&&(y===void 0||y.mutation instanceof Ha)?l=l.insert(m.key,m):y!==void 0?(c.set(m.key,y.mutation.getFieldMask()),Uu(y.mutation,m,y.mutation.getFieldMask(),Ge.now())):c.set(m.key,xi.empty())}),this.recalculateAndSaveOverlays(t,l).next(g=>(g.forEach((m,y)=>c.set(m,y)),n.forEach((m,y)=>{var v;return d.set(m,new CV(y,(v=c.get(m))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(t,n){const r=Lu();let a=new Se((c,d)=>c-d),l=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(c=>{for(const d of c)d.keys().forEach(g=>{const m=n.get(g);if(m===null)return;let y=r.get(g)||xi.empty();y=d.applyToLocalView(m,y),r.set(g,y);const v=(a.get(d.batchId)||Yt()).add(g);a=a.insert(d.batchId,v)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),m=g.key,y=g.value,v=W1();y.forEach(T=>{if(!l.has(T)){const S=rb(n.get(T),r.get(T));S!==null&&v.set(T,S),l=l.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(t,m,v))}return dt.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,a){return function(c){return Rt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Y1(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,a):this.getDocumentsMatchingCollectionQuery(t,n,r,a)}getNextDocuments(t,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,a-l.size):dt.resolve(Ca());let d=Xu,g=l;return c.next(m=>dt.forEach(m,(y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(y)?dt.resolve():this.remoteDocumentCache.getEntry(t,y).next(T=>{g=g.insert(y,T)}))).next(()=>this.populateOverlays(t,m,l)).next(()=>this.computeViews(t,g,m,Yt())).next(y=>({batchId:d,changes:Z1(y)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Rt(n)).next(r=>{let a=Ou();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(t,n,r,a){const l=n.collectionGroup;let c=Ou();return this.indexManager.getCollectionParents(t,l).next(d=>dt.forEach(d,g=>{const m=function(v,T){return new pl(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,g.child(l));return this.getDocumentsMatchingCollectionQuery(t,m,r,a).next(y=>{y.forEach((v,T)=>{c=c.insert(v,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,n,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,l,a))).next(c=>{l.forEach((g,m)=>{const y=m.getKey();c.get(y)===null&&(c=c.insert(y,En.newInvalidDocument(y)))});let d=Ou();return c.forEach((g,m)=>{const y=l.get(g);y!==void 0&&Uu(y.mutation,m,xi.empty(),Ge.now()),td(n,m)&&(d=d.insert(g,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return dt.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:ar(a.createTime)}}(n)),dt.resolve()}getNamedQuery(t,n){return dt.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(a){return{name:a.name,query:vV(a.bundledQuery),readTime:ar(a.readTime)}}(n)),dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(){this.overlays=new Se(Rt.comparator),this.Qr=new Map}getOverlay(t,n){return dt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Ca();return dt.forEach(n,a=>this.getOverlay(t,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((a,l)=>{this.St(t,n,l)}),dt.resolve()}removeOverlaysForBatchId(t,n,r){const a=this.Qr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(r)),dt.resolve()}getOverlaysForCollection(t,n,r){const a=Ca(),l=n.length+1,c=new Rt(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const g=d.getNext().value,m=g.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===l&&g.largestBatchId>r&&a.set(g.getKey(),g)}return dt.resolve(a)}getOverlaysForCollectionGroup(t,n,r,a){let l=new Se((m,y)=>m-y);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let y=l.get(m.largestBatchId);y===null&&(y=Ca(),l=l.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=Ca(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((m,y)=>d.set(m,y)),!(d.size()>=a)););return dt.resolve(d)}St(t,n,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Qr.get(a.largestBatchId).delete(r.key);this.Qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Q4(n,r));let l=this.Qr.get(n);l===void 0&&(l=Yt(),this.Qr.set(n,l)),this.Qr.set(n,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(t){return dt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,dt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this.$r=new $e(nn.Ur),this.Kr=new $e(nn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const r=new nn(t,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.zr(new nn(t,n))}jr(t,n){t.forEach(r=>this.removeReference(r,n))}Hr(t){const n=new Rt(new pe([])),r=new nn(n,t),a=new nn(n,t+1),l=[];return this.Kr.forEachInRange([r,a],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new Rt(new pe([])),r=new nn(n,t),a=new nn(n,t+1);let l=Yt();return this.Kr.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(t){const n=new nn(t,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class nn{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return Rt.comparator(t.key,n.key)||Bt(t.Zr,n.Zr)}static Wr(t,n){return Bt(t.Zr,n.Zr)||Rt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new $e(nn.Ur)}checkEmpty(t){return dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new X4(l,n,r,a);this.mutationQueue.push(c);for(const d of a)this.Xr=this.Xr.add(new nn(d.key,l)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return dt.resolve(c)}lookupMutationBatch(t,n){return dt.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,a=this.ti(r),l=a<0?0:a;return dt.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return dt.resolve(this.mutationQueue.length===0?Zp:this.nr-1)}getAllMutationBatches(t){return dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new nn(n,0),a=new nn(n,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([r,a],c=>{const d=this.ei(c.Zr);l.push(d)}),dt.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new $e(Bt);return n.forEach(a=>{const l=new nn(a,0),c=new nn(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],d=>{r=r.add(d.Zr)})}),dt.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,a=r.length+1;let l=r;Rt.isDocumentKey(l)||(l=l.child(""));const c=new nn(new Rt(l),0);let d=new $e(Bt);return this.Xr.forEachWhile(g=>{const m=g.key.path;return!!r.isPrefixOf(m)&&(m.length===a&&(d=d.add(g.Zr)),!0)},c),dt.resolve(this.ni(d))}ni(t){const n=[];return t.forEach(r=>{const a=this.ei(r);a!==null&&n.push(a)}),n}removeMutationBatch(t,n){ne(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return dt.forEach(n.mutations,a=>{const l=new nn(a.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,n){const r=new nn(n,0),a=this.Xr.firstAfterOrEqual(r);return dt.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,dt.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(t){this.ii=t,this.docs=function(){return new Se(Rt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,a=this.docs.get(r),l=a?a.size:0,c=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return dt.resolve(r?r.document.mutableCopy():En.newInvalidDocument(n))}getEntries(t,n){let r=Gr();return n.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():En.newInvalidDocument(a))}),dt.resolve(r)}getDocumentsMatchingQuery(t,n,r,a){let l=Gr();const c=n.path,d=new Rt(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:m,value:{document:y}}=g.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||c4(u4(y),r)<=0||(a.has(y.key)||td(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return dt.resolve(l)}getAllFromCollectionGroup(t,n,r,a){Dt(9500)}si(t,n){return dt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new kV(this)}getSize(t){return dt.resolve(this.size)}}class kV extends IV{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?n.push(this.Br.addEntry(t,a)):this.Br.removeEntry(r)}),dt.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(t){this.persistence=t,this.oi=new Ba(n=>ty(n),ey),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this._i=0,this.ai=new oy,this.targetCount=0,this.ui=ol.cr()}forEachTarget(t,n){return this.oi.forEach((r,a)=>n(a)),dt.resolve()}getLastRemoteSnapshotVersion(t){return dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return dt.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),dt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),dt.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new ol(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,dt.resolve()}updateTargetData(t,n){return this.Tr(n),dt.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,dt.resolve()}removeTargets(t,n,r){let a=0;const l=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(t,d.targetId)),a++)}),dt.waitFor(l).next(()=>a)}getTargetCount(t){return dt.resolve(this.targetCount)}getTargetData(t,n){const r=this.oi.get(n)||null;return dt.resolve(r)}addMatchingKeys(t,n,r){return this.ai.Gr(n,r),dt.resolve()}removeMatchingKeys(t,n,r){this.ai.jr(n,r);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach(c=>{l.push(a.markPotentiallyOrphaned(t,c))}),dt.waitFor(l)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),dt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ai.Yr(n);return dt.resolve(r)}containsKey(t,n){return dt.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(t,n){this.ci={},this.overlays={},this.li=new Qf(0),this.hi=!1,this.hi=!0,this.Pi=new OV,this.referenceDelegate=t(this),this.Ti=new PV(this),this.indexManager=new EV,this.remoteDocumentCache=function(a){return new VV(a)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new _V(n),this.Ei=new NV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new DV,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ci[t.toKey()];return r||(r=new MV(n,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,r){vt("MemoryPersistence","Starting transaction:",t);const a=new LV(this.li.next());return this.referenceDelegate.di(),r(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(t,n){return dt.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,n)))}}class LV extends f4{constructor(t){super(),this.currentSequenceNumber=t}}class ly{constructor(t){this.persistence=t,this.Vi=new oy,this.mi=null}static fi(t){return new ly(t)}get gi(){if(this.mi)return this.mi;throw Dt(60996)}addReference(t,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),dt.resolve()}removeReference(t,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),dt.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),dt.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(a=>this.gi.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>r.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dt.forEach(this.gi,r=>{const a=Rt.fromPath(r);return this.pi(t,a).next(l=>{l||n.removeEntry(a,Mt.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return dt.or([()=>dt.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class Nf{constructor(t,n){this.persistence=t,this.yi=new Ba(r=>m4(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=RV(this,n)}static fi(t,n){return new Nf(t,n)}di(){}Ai(t){return dt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(a=>r+a))}br(t){let n=0;return this.yr(t,r=>{n++}).next(()=>n)}yr(t,n){return dt.forEach(this.yi,(r,a)=>this.Dr(t,r,a).next(l=>l?dt.resolve():n(a)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(t,c=>this.Dr(t,c,n).next(d=>{d||(r++,l.removeEntry(c,Mt.min()))})).next(()=>l.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),dt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),dt.resolve()}removeReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),dt.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),dt.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=nf(t.data.value)),n}Dr(t,n,r){return dt.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const a=this.yi.get(n);return dt.resolve(a!==void 0&&a>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(t,n,r,a){this.targetId=t,this.fromCache=n,this.ds=r,this.As=a}static Rs(t,n){let r=Yt(),a=Yt();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new uy(t,n.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return MO()?8:d4(Tn())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,r,a){const l={result:null};return this.ws(t,n).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(t,n,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new UV;return this.Ss(t,n,c).next(d=>{if(l.result=d,this.fs)return this.Ds(t,n,c,d.size)})}).next(()=>l.result)}Ds(t,n,r,a){return r.documentReadCount<this.gs?(Bo()<=$t.DEBUG&&vt("QueryEngine","SDK will not create cache indexes for query:",Ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),dt.resolve()):(Bo()<=$t.DEBUG&&vt("QueryEngine","Query:",Ho(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ps*a?(Bo()<=$t.DEBUG&&vt("QueryEngine","The SDK decides to create cache indexes for query:",Ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,rr(n))):dt.resolve())}ws(t,n){if(CT(n))return dt.resolve(null);let r=rr(n);return this.indexManager.getIndexType(t,r).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=pp(n,null,"F"),r=rr(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(l=>{const c=Yt(...l);return this.ys.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,r).next(g=>{const m=this.vs(n,d);return this.Cs(n,m,c,g.readTime)?this.ws(t,pp(n,null,"F")):this.Fs(t,m,n,g)}))})))}bs(t,n,r,a){return CT(n)||a.isEqual(Mt.min())?dt.resolve(null):this.ys.getDocuments(t,r).next(l=>{const c=this.vs(n,l);return this.Cs(n,c,r,a)?dt.resolve(null):(Bo()<=$t.DEBUG&&vt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ho(n)),this.Fs(t,c,n,l4(a,Xu)).next(d=>d))})}vs(t,n){let r=new $e(X1(t));return n.forEach((a,l)=>{td(t,l)&&(r=r.add(l))}),r}Cs(t,n,r,a){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const l=t.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(t,n,r){return Bo()<=$t.DEBUG&&vt("QueryEngine","Using full collection scan to execute query:",Ho(n)),this.ys.getDocumentsMatchingQuery(t,n,zs.min(),r)}Fs(t,n,r,a){return this.ys.getDocumentsMatchingQuery(t,r,a).next(l=>(n.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="LocalStore",BV=3e8;class HV{constructor(t,n,r,a){this.persistence=t,this.Ms=n,this.serializer=a,this.xs=new Se(Bt),this.Os=new Ba(l=>ty(l),ey),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new xV(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function qV(e,t,n,r){return new HV(e,t,n,r)}async function _b(e,t){const n=Vt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,n.Ls(t),n.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let g=Yt();for(const m of a){c.push(m.batchId);for(const y of m.mutations)g=g.add(y.key)}for(const m of l){d.push(m.batchId);for(const y of m.mutations)g=g.add(y.key)}return n.localDocuments.getDocuments(r,g).next(m=>({ks:m,removedBatchIds:c,addedBatchIds:d}))})})}function FV(e,t){const n=Vt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=t.batch.keys(),l=n.Bs.newChangeBuffer({trackRemovals:!0});return function(d,g,m,y){const v=m.batch,T=v.keys();let S=dt.resolve();return T.forEach(P=>{S=S.next(()=>y.getEntry(g,P)).next(L=>{const V=m.docVersions.get(P);ne(V!==null,48541),L.version.compareTo(V)<0&&(v.applyToRemoteDocument(L,m),L.isValidDocument()&&(L.setReadTime(m.commitVersion),y.addEntry(L)))})}),S.next(()=>d.mutationQueue.removeMutationBatch(g,v))}(n,r,t,l).next(()=>l.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=Yt();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(g=g.add(d.batch.mutations[m].key));return g}(t))).next(()=>n.localDocuments.getDocuments(r,a))})}function vb(e){const t=Vt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function jV(e,t){const n=Vt(e),r=t.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const d=[];t.targetChanges.forEach((y,v)=>{const T=a.get(v);if(!T)return;d.push(n.Ti.removeMatchingKeys(l,y.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(l,y.addedDocuments,v)));let S=T.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(v)!==null?S=S.withResumeToken(dn.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,r)),a=a.insert(v,S),function(L,V,B){return L.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=BV?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(T,S,y)&&d.push(n.Ti.updateTargetData(l,S))});let g=Gr(),m=Yt();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(GV(l,c,t.documentUpdates).next(y=>{g=y.qs,m=y.Qs})),!r.isEqual(Mt.min())){const y=n.Ti.getLastRemoteSnapshotVersion(l).next(v=>n.Ti.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(y)}return dt.waitFor(d).next(()=>c.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,g,m)).next(()=>g)}).then(l=>(n.xs=a,l))}function GV(e,t,n){let r=Yt(),a=Yt();return n.forEach(l=>r=r.add(l)),t.getEntries(e,r).next(l=>{let c=Gr();return n.forEach((d,g)=>{const m=l.get(d);g.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(d)),g.isNoDocument()&&g.version.isEqual(Mt.min())?(t.removeEntry(d,g.readTime),c=c.insert(d,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(g),c=c.insert(d,g)):vt(cy,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",g.version)}),{qs:c,Qs:a}})}function $V(e,t){const n=Vt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=Zp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function YV(e,t){const n=Vt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return n.Ti.getTargetData(r,t).next(l=>l?(a=l,dt.resolve(a)):n.Ti.allocateTargetId(r).next(c=>(a=new Ns(t,c,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=n.xs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(t,r.targetId)),r})}async function Tp(e,t,n){const r=Vt(e),a=r.xs.get(t),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!ml(c))throw c;vt(cy,`Failed to update sequence numbers for target ${t}: ${c}`)}r.xs=r.xs.remove(t),r.Os.delete(a.target)}function HT(e,t,n){const r=Vt(e);let a=Mt.min(),l=Yt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(g,m,y){const v=Vt(g),T=v.Os.get(y);return T!==void 0?dt.resolve(v.xs.get(T)):v.Ti.getTargetData(m,y)}(r,c,rr(t)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,d.targetId).next(g=>{l=g})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,t,n?a:Mt.min(),n?l:Yt())).next(d=>(KV(r,V4(t),d),{documents:d,$s:l})))}function KV(e,t,n){let r=e.Ns.get(t)||Mt.min();n.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),e.Ns.set(t,r)}class qT{constructor(){this.activeTargetIds=B4()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class XV{constructor(){this.xo=new qT,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,r){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new qT,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="ConnectivityMonitor";class jT{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){vt(FT,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){vt(FT,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yh=null;function wp(){return Yh===null?Yh=function(){return 268435456+Math.round(2147483648*Math.random())}():Yh++,"0x"+Yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="RestConnection",ZV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WV{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${r}/databases/${a}`,this.Go=this.databaseId.database===bf?`project_id=${r}`:`project_id=${r}&database_id=${a}`}zo(t,n,r,a,l){const c=wp(),d=this.jo(t,n.toUriEncodedString());vt(Lm,`Sending RPC '${t}' ${c}:`,d,r);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,a,l);const{host:m}=new URL(d),y=hl(m);return this.Jo(t,d,g,r,y).then(v=>(vt(Lm,`Received RPC '${t}' ${c}: `,v),v),v=>{throw il(Lm,`RPC '${t}' ${c} failed with error: `,v,"url: ",d,"request:",r),v})}Yo(t,n,r,a,l,c){return this.zo(t,n,r,a,l)}Ho(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,l)=>t[l]=a),r&&r.headers.forEach((a,l)=>t[l]=a)}jo(t,n){const r=ZV[t];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class t3 extends WV{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,a,l){const c=wp();return new Promise((d,g)=>{const m=new T1;m.setWithCredentials(!0),m.listenOnce(w1.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case ef.NO_ERROR:const v=m.getResponseJson();vt(_n,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(v)),d(v);break;case ef.TIMEOUT:vt(_n,`RPC '${t}' ${c} timed out`),g(new Et(gt.DEADLINE_EXCEEDED,"Request time out"));break;case ef.HTTP_ERROR:const T=m.getStatus();if(vt(_n,`RPC '${t}' ${c} failed with status:`,T,"response text:",m.getResponseText()),T>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const P=S?.error;if(P&&P.status&&P.message){const L=function(B){const q=B.toLowerCase().replace(/_/g,"-");return Object.values(gt).indexOf(q)>=0?q:gt.UNKNOWN}(P.status);g(new Et(L,P.message))}else g(new Et(gt.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new Et(gt.UNAVAILABLE,"Connection failed."));break;default:Dt(9055,{h_:t,streamId:c,P_:m.getLastErrorCode(),T_:m.getLastError()})}}finally{vt(_n,`RPC '${t}' ${c} completed.`)}});const y=JSON.stringify(a);vt(_n,`RPC '${t}' ${c} sending request:`,a),m.send(n,"POST",y,r,15)})}I_(t,n,r){const a=wp(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=A1(),d=b1(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(g.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const y=l.join("");vt(_n,`Creating RPC '${t}' stream ${a}: ${y}`,g);const v=c.createWebChannel(y,g);this.E_(v);let T=!1,S=!1;const P=new JV({Zo:V=>{S?vt(_n,`Not sending because RPC '${t}' stream ${a} is closed:`,V):(T||(vt(_n,`Opening RPC '${t}' stream ${a} transport.`),v.open(),T=!0),vt(_n,`RPC '${t}' stream ${a} sending:`,V),v.send(V))},Xo:()=>v.close()}),L=(V,B,q)=>{V.listen(B,F=>{try{q(F)}catch(H){setTimeout(()=>{throw H},0)}})};return L(v,Du.EventType.OPEN,()=>{S||(vt(_n,`RPC '${t}' stream ${a} transport opened.`),P.__())}),L(v,Du.EventType.CLOSE,()=>{S||(S=!0,vt(_n,`RPC '${t}' stream ${a} transport closed`),P.u_(),this.d_(v))}),L(v,Du.EventType.ERROR,V=>{S||(S=!0,il(_n,`RPC '${t}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),P.u_(new Et(gt.UNAVAILABLE,"The operation could not be completed")))}),L(v,Du.EventType.MESSAGE,V=>{var B;if(!S){const q=V.data[0];ne(!!q,16349);const F=q,H=F?.error||((B=F[0])===null||B===void 0?void 0:B.error);if(H){vt(_n,`RPC '${t}' stream ${a} received error:`,H);const et=H.status;let nt=function(I){const k=Ue[I];if(k!==void 0)return ab(k)}(et),D=H.message;nt===void 0&&(nt=gt.INTERNAL,D="Unknown error status: "+et+" with message "+H.message),S=!0,P.u_(new Et(nt,D)),v.close()}else vt(_n,`RPC '${t}' stream ${a} received:`,q),P.c_(q)}}),L(d,S1.STAT_EVENT,V=>{V.stat===up.PROXY?vt(_n,`RPC '${t}' stream ${a} detected buffering proxy`):V.stat===up.NOPROXY&&vt(_n,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{P.a_()},0),P}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function Um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(e){return new rV(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(t,n,r=1e3,a=1.5,l=6e4){this.xi=t,this.timerId=n,this.A_=r,this.R_=a,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),a=Math.max(0,n-r);a>0&&vt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="PersistentStream";class Tb{constructor(t,n,r,a,l,c,d,g){this.xi=t,this.S_=r,this.D_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Eb(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===gt.RESOURCE_EXHAUSTED?(jr(n.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===gt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.v_===n&&this.z_(r,a)},r=>{t(()=>{const a=new Et(gt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(a)})})}z_(t,n){const r=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{r(()=>this.j_(a))}),this.stream.onMessage(a=>{r(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return vt(GT,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(vt(GT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class e3 extends Tb{constructor(t,n,r,a,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=oV(this.serializer,t),r=function(l){if(!("targetChange"in l))return Mt.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Mt.min():c.readTime?ar(c.readTime):Mt.min()}(t);return this.listener.Y_(n,r)}Z_(t){const n={};n.database=Ep(this.serializer),n.addTarget=function(l,c){let d;const g=c.target;if(d=gp(g)?{documents:cV(l,g)}:{query:hV(l,g).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=ub(l,c.resumeToken);const m=yp(l,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(Mt.min())>0){d.readTime=xf(l,c.snapshotVersion.toTimestamp());const m=yp(l,c.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,t);const r=dV(this.serializer,t);r&&(n.labels=r),this.Q_(n)}X_(t){const n={};n.database=Ep(this.serializer),n.removeTarget=t,this.Q_(n)}}class n3 extends Tb{constructor(t,n,r,a,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,n){return this.connection.I_("Write",t,n)}J_(t){return ne(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ne(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){ne(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const n=uV(t.writeResults,t.commitTime),r=ar(t.commitTime);return this.listener.ra(r,n)}ia(){const t={};t.database=Ep(this.serializer),this.Q_(t)}ta(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>lV(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{}class r3 extends i3{constructor(t,n,r,a){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new Et(gt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,r,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(t,_p(n,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Et(gt.UNKNOWN,l.toString())})}Yo(t,n,r,a,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(t,_p(n,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Et(gt.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class s3{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(jr(n),this.ua=!1):vt("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="RemoteStore";class a3{constructor(t,n,r,a,l){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{r.enqueueAndForget(async()=>{qa(this)&&(vt(Pa,"Restarting streams for network reachability change."),await async function(g){const m=Vt(g);m.da.add(4),await fc(m),m.Va.set("Unknown"),m.da.delete(4),await sd(m)}(this))})}),this.Va=new s3(r,a)}}async function sd(e){if(qa(e))for(const t of e.Aa)await t(!0)}async function fc(e){for(const t of e.Aa)await t(!1)}function wb(e,t){const n=Vt(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),gy(n)?dy(n):yl(n).N_()&&fy(n,t))}function hy(e,t){const n=Vt(e),r=yl(n);n.Ea.delete(t),r.N_()&&Sb(n,t),n.Ea.size===0&&(r.N_()?r.k_():qa(n)&&n.Va.set("Unknown"))}function fy(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Mt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}yl(e).Z_(t)}function Sb(e,t){e.ma.Ke(t),yl(e).X_(t)}function dy(e){e.ma=new tV({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),yl(e).start(),e.Va.ca()}function gy(e){return qa(e)&&!yl(e).O_()&&e.Ea.size>0}function qa(e){return Vt(e).da.size===0}function bb(e){e.ma=void 0}async function o3(e){e.Va.set("Online")}async function l3(e){e.Ea.forEach((t,n)=>{fy(e,t)})}async function u3(e,t){bb(e),gy(e)?(e.Va.Pa(t),dy(e)):e.Va.set("Unknown")}async function c3(e,t,n){if(e.Va.set("Online"),t instanceof lb&&t.state===2&&t.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ea.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ea.delete(d),a.ma.removeTarget(d))}(e,t)}catch(r){vt(Pa,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Df(e,r)}else if(t instanceof af?e.ma.Xe(t):t instanceof ob?e.ma.ot(t):e.ma.nt(t),!n.isEqual(Mt.min()))try{const r=await vb(e.localStore);n.compareTo(r)>=0&&await function(l,c){const d=l.ma.It(c);return d.targetChanges.forEach((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const y=l.Ea.get(m);y&&l.Ea.set(m,y.withResumeToken(g.resumeToken,c))}}),d.targetMismatches.forEach((g,m)=>{const y=l.Ea.get(g);if(!y)return;l.Ea.set(g,y.withResumeToken(dn.EMPTY_BYTE_STRING,y.snapshotVersion)),Sb(l,g);const v=new Ns(y.target,g,m,y.sequenceNumber);fy(l,v)}),l.remoteSyncer.applyRemoteEvent(d)}(e,n)}catch(r){vt(Pa,"Failed to raise snapshot:",r),await Df(e,r)}}async function Df(e,t,n){if(!ml(t))throw t;e.da.add(1),await fc(e),e.Va.set("Offline"),n||(n=()=>vb(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{vt(Pa,"Retrying IndexedDB access"),await n(),e.da.delete(1),await sd(e)})}function Ab(e,t){return t().catch(n=>Df(e,n,t))}async function ad(e){const t=Vt(e),n=Fs(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:Zp;for(;h3(t);)try{const a=await $V(t.localStore,r);if(a===null){t.Ia.length===0&&n.k_();break}r=a.batchId,f3(t,a)}catch(a){await Df(t,a)}Rb(t)&&Ib(t)}function h3(e){return qa(e)&&e.Ia.length<10}function f3(e,t){e.Ia.push(t);const n=Fs(e);n.N_()&&n.ea&&n.ta(t.mutations)}function Rb(e){return qa(e)&&!Fs(e).O_()&&e.Ia.length>0}function Ib(e){Fs(e).start()}async function d3(e){Fs(e).ia()}async function g3(e){const t=Fs(e);for(const n of e.Ia)t.ta(n.mutations)}async function m3(e,t,n){const r=e.Ia.shift(),a=ry.from(r,t,n);await Ab(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await ad(e)}async function p3(e,t){t&&Fs(e).ea&&await async function(r,a){if(function(c){return W4(c)&&c!==gt.ABORTED}(a.code)){const l=r.Ia.shift();Fs(r).L_(),await Ab(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await ad(r)}}(e,t),Rb(e)&&Ib(e)}async function $T(e,t){const n=Vt(e);n.asyncQueue.verifyOperationInProgress(),vt(Pa,"RemoteStore received new credentials");const r=qa(n);n.da.add(3),await fc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await sd(n)}async function y3(e,t){const n=Vt(e);t?(n.da.delete(2),await sd(n)):t||(n.da.add(2),await fc(n),n.Va.set("Unknown"))}function yl(e){return e.fa||(e.fa=function(n,r,a){const l=Vt(n);return l.oa(),new e3(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(e.datastore,e.asyncQueue,{e_:o3.bind(null,e),n_:l3.bind(null,e),i_:u3.bind(null,e),Y_:c3.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),gy(e)?dy(e):e.Va.set("Unknown")):(await e.fa.stop(),bb(e))})),e.fa}function Fs(e){return e.ga||(e.ga=function(n,r,a){const l=Vt(n);return l.oa(),new n3(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:d3.bind(null,e),i_:p3.bind(null,e),na:g3.bind(null,e),ra:m3.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await ad(e)):(await e.ga.stop(),e.Ia.length>0&&(vt(Pa,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(t,n,r,a,l){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,a,l){const c=Date.now()+r,d=new my(t,n,c,a,l);return d.start(r),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Et(gt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function py(e,t){if(jr("AsyncQueue",`${t}: ${e}`),ml(e))return new Et(gt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{static emptySet(t){return new Xo(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Rt.comparator(n.key,r.key):(n,r)=>Rt.comparator(n.key,r.key),this.keyedMap=Ou(),this.sortedSet=new Se(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Xo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Xo;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(){this.pa=new Se(Rt.comparator)}track(t){const n=t.doc.key,r=this.pa.get(n);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(n,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(n):t.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):Dt(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,r)=>{t.push(r)}),t}}class ll{constructor(t,n,r,a,l,c,d,g,m){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(t,n,r,a,l){const c=[];return n.forEach(d=>{c.push({type:0,doc:d})}),new ll(t,n,Xo.emptySet(n),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Jf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class v3{constructor(){this.queries=KT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const a=Vt(n),l=a.queries;a.queries=KT(),l.forEach((c,d)=>{for(const g of d.Sa)g.onError(r)})})(this,new Et(gt.ABORTED,"Firestore shutting down"))}}function KT(){return new Ba(e=>K1(e),Jf)}async function E3(e,t){const n=Vt(e);let r=3;const a=t.query;let l=n.queries.get(a);l?!l.Da()&&t.va()&&(r=2):(l=new _3,r=t.va()?0:1);try{switch(r){case 0:l.ba=await n.onListen(a,!0);break;case 1:l.ba=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=py(c,`Initialization of query '${Ho(t.query)}' failed`);return void t.onError(d)}n.queries.set(a,l),l.Sa.push(t),t.Fa(n.onlineState),l.ba&&t.Ma(l.ba)&&yy(n)}async function T3(e,t){const n=Vt(e),r=t.query;let a=3;const l=n.queries.get(r);if(l){const c=l.Sa.indexOf(t);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=t.va()?0:1:!l.Da()&&t.va()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function w3(e,t){const n=Vt(e);let r=!1;for(const a of t){const l=a.query,c=n.queries.get(l);if(c){for(const d of c.Sa)d.Ma(a)&&(r=!0);c.ba=a}}r&&yy(n)}function S3(e,t,n){const r=Vt(e),a=r.queries.get(t);if(a)for(const l of a.Sa)l.onError(n);r.queries.delete(t)}function yy(e){e.Ca.forEach(t=>{t.next()})}var Sp,XT;(XT=Sp||(Sp={})).xa="default",XT.Cache="cache";class b3{constructor(t,n,r){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const a of t.docChanges)a.type!==3&&r.push(a);t=new ll(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=ll.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==Sp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(t){this.key=t}}class xb{constructor(t){this.key=t}}class A3{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Yt(),this.mutatedKeys=Yt(),this.Za=X1(t),this.Xa=new Xo(this.Za)}get eu(){return this.Ha}tu(t,n){const r=n?n.nu:new YT,a=n?n.Xa:this.Xa;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((y,v)=>{const T=a.get(y),S=td(this.query,v)?v:null,P=!!T&&this.mutatedKeys.has(T.key),L=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let V=!1;T&&S?T.data.isEqual(S.data)?P!==L&&(r.track({type:3,doc:S}),V=!0):this.ru(T,S)||(r.track({type:2,doc:S}),V=!0,(g&&this.Za(S,g)>0||m&&this.Za(S,m)<0)&&(d=!0)):!T&&S?(r.track({type:0,doc:S}),V=!0):T&&!S&&(r.track({type:1,doc:T}),V=!0,(g||m)&&(d=!0)),V&&(S?(c=c.add(S),l=L?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{Xa:c,nu:r,Cs:d,mutatedKeys:l}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,a){const l=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const c=t.nu.wa();c.sort((y,v)=>function(S,P){const L=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt(20277,{Vt:V})}};return L(S)-L(P)}(y.type,v.type)||this.Za(y.doc,v.doc)),this.iu(r),a=a!=null&&a;const d=n&&!a?this.su():[],g=this.Ya.size===0&&this.current&&!a?1:0,m=g!==this.Ja;return this.Ja=g,c.length!==0||m?{snapshot:new ll(this.query,t.Xa,l,c,t.mutatedKeys,g===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new YT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Yt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return t.forEach(r=>{this.Ya.has(r)||n.push(new xb(r))}),this.Ya.forEach(r=>{t.has(r)||n.push(new Cb(r))}),n}au(t){this.Ha=t.$s,this.Ya=Yt();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return ll.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const _y="SyncEngine";class R3{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class I3{constructor(t){this.key=t,this.cu=!1}}class C3{constructor(t,n,r,a,l,c){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new Ba(d=>K1(d),Jf),this.Pu=new Map,this.Tu=new Set,this.Iu=new Se(Rt.comparator),this.Eu=new Map,this.du=new oy,this.Au={},this.Ru=new Map,this.Vu=ol.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function x3(e,t,n=!0){const r=kb(e);let a;const l=r.hu.get(t);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.uu()):a=await Nb(r,t,n,!0),a}async function N3(e,t){const n=kb(e);await Nb(n,t,!0,!1)}async function Nb(e,t,n,r){const a=await YV(e.localStore,rr(t)),l=a.targetId,c=e.sharedClientState.addLocalQueryTarget(l,n);let d;return r&&(d=await D3(e,t,l,c==="current",a.resumeToken)),e.isPrimaryClient&&n&&wb(e.remoteStore,a),d}async function D3(e,t,n,r,a){e.fu=(v,T,S)=>async function(L,V,B,q){let F=V.view.tu(B);F.Cs&&(F=await HT(L.localStore,V.query,!1).then(({documents:D})=>V.view.tu(D,F)));const H=q&&q.targetChanges.get(V.targetId),et=q&&q.targetMismatches.get(V.targetId)!=null,nt=V.view.applyChanges(F,L.isPrimaryClient,H,et);return ZT(L,V.targetId,nt.ou),nt.snapshot}(e,v,T,S);const l=await HT(e.localStore,t,!0),c=new A3(t,l.$s),d=c.tu(l.documents),g=hc.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",a),m=c.applyChanges(d,e.isPrimaryClient,g);ZT(e,n,m.ou);const y=new R3(t,n,c);return e.hu.set(t,y),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),m.snapshot}async function O3(e,t,n){const r=Vt(e),a=r.hu.get(t),l=r.Pu.get(a.targetId);if(l.length>1)return r.Pu.set(a.targetId,l.filter(c=>!Jf(c,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Tp(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),n&&hy(r.remoteStore,a.targetId),bp(r,a.targetId)}).catch(gl)):(bp(r,a.targetId),await Tp(r.localStore,a.targetId,!0))}async function M3(e,t){const n=Vt(e),r=n.hu.get(t),a=n.Pu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hy(n.remoteStore,r.targetId))}async function V3(e,t,n){const r=H3(e);try{const a=await function(c,d){const g=Vt(c),m=Ge.now(),y=d.reduce((S,P)=>S.add(P.key),Yt());let v,T;return g.persistence.runTransaction("Locally write mutations","readwrite",S=>{let P=Gr(),L=Yt();return g.Bs.getEntries(S,y).next(V=>{P=V,P.forEach((B,q)=>{q.isValidDocument()||(L=L.add(B))})}).next(()=>g.localDocuments.getOverlayedDocuments(S,P)).next(V=>{v=V;const B=[];for(const q of d){const F=Y4(q,v.get(q.key).overlayedDocument);F!=null&&B.push(new Ha(q.key,F,z1(F.value.mapValue),sr.exists(!0)))}return g.mutationQueue.addMutationBatch(S,m,B,d)}).next(V=>{T=V;const B=V.applyToLocalDocumentSet(v,L);return g.documentOverlayCache.saveOverlays(S,V.batchId,B)})}).then(()=>({batchId:T.batchId,changes:Z1(v)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,g){let m=c.Au[c.currentUser.toKey()];m||(m=new Se(Bt)),m=m.insert(d,g),c.Au[c.currentUser.toKey()]=m}(r,a.batchId,n),await dc(r,a.changes),await ad(r.remoteStore)}catch(a){const l=py(a,"Failed to persist write");n.reject(l)}}async function Db(e,t){const n=Vt(e);try{const r=await jV(n.localStore,t);t.targetChanges.forEach((a,l)=>{const c=n.Eu.get(l);c&&(ne(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.cu=!0:a.modifiedDocuments.size>0?ne(c.cu,14607):a.removedDocuments.size>0&&(ne(c.cu,42227),c.cu=!1))}),await dc(n,r,t)}catch(r){await gl(r)}}function QT(e,t,n){const r=Vt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.hu.forEach((l,c)=>{const d=c.view.Fa(t);d.snapshot&&a.push(d.snapshot)}),function(c,d){const g=Vt(c);g.onlineState=d;let m=!1;g.queries.forEach((y,v)=>{for(const T of v.Sa)T.Fa(d)&&(m=!0)}),m&&yy(g)}(r.eventManager,t),a.length&&r.lu.Y_(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function k3(e,t,n){const r=Vt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const a=r.Eu.get(t),l=a&&a.key;if(l){let c=new Se(Rt.comparator);c=c.insert(l,En.newNoDocument(l,Mt.min()));const d=Yt().add(l),g=new id(Mt.min(),new Map,new Se(Bt),c,d);await Db(r,g),r.Iu=r.Iu.remove(l),r.Eu.delete(t),vy(r)}else await Tp(r.localStore,t,!1).then(()=>bp(r,t,n)).catch(gl)}async function P3(e,t){const n=Vt(e),r=t.batch.batchId;try{const a=await FV(n.localStore,t);Mb(n,r,null),Ob(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await dc(n,a)}catch(a){await gl(a)}}async function L3(e,t,n){const r=Vt(e);try{const a=await function(c,d){const g=Vt(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return g.mutationQueue.lookupMutationBatch(m,d).next(v=>(ne(v!==null,37113),y=v.keys(),g.mutationQueue.removeMutationBatch(m,v))).next(()=>g.mutationQueue.performConsistencyCheck(m)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(m,y,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>g.localDocuments.getDocuments(m,y))})}(r.localStore,t);Mb(r,t,n),Ob(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await dc(r,a)}catch(a){await gl(a)}}function Ob(e,t){(e.Ru.get(t)||[]).forEach(n=>{n.resolve()}),e.Ru.delete(t)}function Mb(e,t,n){const r=Vt(e);let a=r.Au[r.currentUser.toKey()];if(a){const l=a.get(t);l&&(n?l.reject(n):l.resolve(),a=a.remove(t)),r.Au[r.currentUser.toKey()]=a}}function bp(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(r=>{e.du.containsKey(r)||Vb(e,r)})}function Vb(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);n!==null&&(hy(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),vy(e))}function ZT(e,t,n){for(const r of n)r instanceof Cb?(e.du.addReference(r.key,t),U3(e,r)):r instanceof xb?(vt(_y,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||Vb(e,r.key)):Dt(19791,{pu:r})}function U3(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(vt(_y,"New document in limbo: "+n),e.Tu.add(r),vy(e))}function vy(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new Rt(pe.fromString(t)),r=e.Vu.next();e.Eu.set(r,new I3(n)),e.Iu=e.Iu.insert(n,r),wb(e.remoteStore,new Ns(rr($1(n.path)),r,"TargetPurposeLimboResolution",Qf.le))}}async function dc(e,t,n){const r=Vt(e),a=[],l=[],c=[];r.hu.isEmpty()||(r.hu.forEach((d,g)=>{c.push(r.fu(g,t,n).then(m=>{var y;if((m||n)&&r.isPrimaryClient){const v=m?!m.fromCache:(y=n?.targetChanges.get(g.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(m){a.push(m);const v=uy.Rs(g.targetId,m);l.push(v)}}))}),await Promise.all(c),r.lu.Y_(a),await async function(g,m){const y=Vt(g);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>dt.forEach(m,T=>dt.forEach(T.ds,S=>y.persistence.referenceDelegate.addReference(v,T.targetId,S)).next(()=>dt.forEach(T.As,S=>y.persistence.referenceDelegate.removeReference(v,T.targetId,S)))))}catch(v){if(!ml(v))throw v;vt(cy,"Failed to update sequence numbers: "+v)}for(const v of m){const T=v.targetId;if(!v.fromCache){const S=y.xs.get(T),P=S.snapshotVersion,L=S.withLastLimboFreeSnapshotVersion(P);y.xs=y.xs.insert(T,L)}}}(r.localStore,l))}async function z3(e,t){const n=Vt(e);if(!n.currentUser.isEqual(t)){vt(_y,"User change. New user:",t.toKey());const r=await _b(n.localStore,t);n.currentUser=t,function(l,c){l.Ru.forEach(d=>{d.forEach(g=>{g.reject(new Et(gt.CANCELLED,c))})}),l.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await dc(n,r.ks)}}function B3(e,t){const n=Vt(e),r=n.Eu.get(t);if(r&&r.cu)return Yt().add(r.key);{let a=Yt();const l=n.Pu.get(t);if(!l)return a;for(const c of l){const d=n.hu.get(c);a=a.unionWith(d.view.eu)}return a}}function kb(e){const t=Vt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Db.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=B3.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=k3.bind(null,t),t.lu.Y_=w3.bind(null,t.eventManager),t.lu.gu=S3.bind(null,t.eventManager),t}function H3(e){const t=Vt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=P3.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=L3.bind(null,t),t}class Of{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=rd(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return qV(this.persistence,new zV,t.initialUser,this.serializer)}Su(t){return new yb(ly.fi,this.serializer)}bu(t){return new XV}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Of.provider={build:()=>new Of};class q3 extends Of{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){ne(this.persistence.referenceDelegate instanceof Nf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new bV(r,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new yb(r=>Nf.fi(r,n),this.serializer)}}class Ap{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>QT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=z3.bind(null,this.syncEngine),await y3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new v3}()}createDatastore(t){const n=rd(t.databaseInfo.databaseId),r=function(l){return new t3(l)}(t.databaseInfo);return function(l,c,d,g){return new r3(l,c,d,g)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,a,l,c,d){return new a3(r,a,l,c,d)}(this.localStore,this.datastore,t.asyncQueue,n=>QT(this.syncEngine,n,0),function(){return jT.C()?new jT:new QV}())}createSyncEngine(t,n){return function(a,l,c,d,g,m,y){const v=new C3(a,l,c,d,g,m);return y&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(a){const l=Vt(a);vt(Pa,"RemoteStore shutting down."),l.da.add(5),await fc(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ap.provider={build:()=>new Ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):jr("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="FirestoreClient";class j3{constructor(t,n,r,a,l){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=vn.UNAUTHENTICATED,this.clientId=x1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{vt(js,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(vt(js,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=py(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function zm(e,t){e.asyncQueue.verifyOperationInProgress(),vt(js,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async a=>{r.isEqual(a)||(await _b(t.localStore,a),r=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function WT(e,t){e.asyncQueue.verifyOperationInProgress();const n=await G3(e);vt(js,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>$T(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,a)=>$T(t.remoteStore,a)),e._onlineComponents=t}async function G3(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){vt(js,"Using user provided OfflineComponentProvider");try{await zm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(a){return a.name==="FirebaseError"?a.code===gt.FAILED_PRECONDITION||a.code===gt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;il("Error using user provided cache. Falling back to memory cache: "+n),await zm(e,new Of)}}else vt(js,"Using default OfflineComponentProvider"),await zm(e,new q3(void 0));return e._offlineComponents}async function Pb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(vt(js,"Using user provided OnlineComponentProvider"),await WT(e,e._uninitializedComponentsProvider._online)):(vt(js,"Using default OnlineComponentProvider"),await WT(e,new Ap))),e._onlineComponents}function $3(e){return Pb(e).then(t=>t.syncEngine)}async function Y3(e){const t=await Pb(e),n=t.eventManager;return n.onListen=x3.bind(null,t.syncEngine),n.onUnlisten=O3.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=N3.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=M3.bind(null,t.syncEngine),n}function K3(e,t,n={}){const r=new Ps;return e.asyncQueue.enqueueAndForget(async()=>function(l,c,d,g,m){const y=new F3({next:T=>{y.xu(),c.enqueueAndForget(()=>T3(l,v)),T.fromCache&&g.source==="server"?m.reject(new Et(gt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),v=new b3(d,y,{includeMetadataChanges:!0,Qa:!0});return E3(l,v)}(await Y3(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(e,t,n){if(!n)throw new Et(gt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function X3(e,t,n,r){if(t===!0&&r===!0)throw new Et(gt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function tw(e){if(!Rt.isDocumentKey(e))throw new Et(gt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ew(e){if(Rt.isDocumentKey(e))throw new Et(gt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function od(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Dt(12329,{type:typeof e})}function ul(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Et(gt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=od(e);throw new Et(gt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="firestore.googleapis.com",nw=!0;class iw{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Et(gt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zb,this.ssl=nw}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:nw;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=pb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<wV)throw new Et(gt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}X3("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lb((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Et(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Et(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Et(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ld{constructor(t,n,r,a){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Et(gt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Et(gt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iw(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new JM;switch(r.type){case"firstParty":return new i4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Et(gt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=JT.get(n);r&&(vt("ComponentProvider","Removing Datastore"),JT.delete(n),r.terminate())}(this),Promise.resolve()}}function Q3(e,t,n,r={}){var a;e=ul(e,ld);const l=hl(t),c=e._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:e._getEmulatorOptions()}),g=`${t}:${n}`;l&&(f1(`https://${g}`),d1("Firestore",!0)),c.host!==zb&&c.host!==g&&il("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:g,ssl:l,emulatorOptions:r});if(!Ma(m,d)&&(e._setSettings(m),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=vn.MOCK_USER;else{y=bO(r.mockUserToken,(a=e._app)===null||a===void 0?void 0:a.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new Et(gt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new vn(T)}e._authCredentials=new t4(new I1(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Fa(this.firestore,t,this._query)}}class Xn{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Xn(this.firestore,t,this._key)}}class Ls extends Fa{constructor(t,n,r){super(t,n,$1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Xn(this.firestore,null,new Rt(t))}withConverter(t){return new Ls(this.firestore,t,this._path)}}function Ey(e,t,...n){if(e=xn(e),Ub("collection","path",t),e instanceof ld){const r=pe.fromString(t,...n);return ew(r),new Ls(e,null,r)}{if(!(e instanceof Xn||e instanceof Ls))throw new Et(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(pe.fromString(t,...n));return ew(r),new Ls(e.firestore,null,r)}}function _l(e,t,...n){if(e=xn(e),arguments.length===1&&(t=x1.newId()),Ub("doc","path",t),e instanceof ld){const r=pe.fromString(t,...n);return tw(r),new Xn(e,null,new Rt(r))}{if(!(e instanceof Xn||e instanceof Ls))throw new Et(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(pe.fromString(t,...n));return tw(r),new Xn(e.firestore,e instanceof Ls?e.converter:null,new Rt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="AsyncQueue";class sw{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Eb(this,"async_queue_retry"),this.rc=()=>{const r=Um();r&&vt(rw,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const n=Um();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=Um();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Ps;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!ml(t))throw t;vt(rw,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,jr("INTERNAL UNHANDLED ERROR: ",aw(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(t,n,r){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const a=my.createAndSchedule(this,t,n,r,l=>this.uc(l));return this.Zu.push(a),a}oc(){this.Xu&&Dt(47125,{cc:aw(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function aw(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class ud extends ld{constructor(t,n,r,a){super(t,n,r,a),this.type="firestore",this._queue=new sw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new sw(t),this._firestoreClient=void 0,await t}}}function Z3(e,t){const n=typeof e=="object"?e:y1(),r=typeof e=="string"?e:bf,a=Xp(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=wO("firestore");l&&Q3(a,...l)}return a}function Bb(e){if(e._terminated)throw new Et(gt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||W3(e),e._firestoreClient}function W3(e){var t,n,r;const a=e._freezeSettings(),l=function(d,g,m,y){return new _4(d,g,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,Lb(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,a);e._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),e._firestoreClient=new j3(e._authCredentials,e._appCheckCredentials,e._queue,l,e._componentsProvider&&function(d){const g=d?._online.build();return{_offline:d?._offline.build(g),_online:g}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new cl(dn.fromBase64String(t))}catch(n){throw new Et(gt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new cl(dn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Et(gt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Et(gt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Et(gt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Bt(this._lat,t._lat)||Bt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3=/^__.*__$/;class tk{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Ha(t,this.data,this.fieldMask,n,this.fieldTransforms):new cc(t,this.data,n,this.fieldTransforms)}}function qb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt(40011,{Ic:e})}}class by{constructor(t,n,r,a,l,c){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new by(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.dc({path:r,Rc:!1});return a.Vc(t),a}mc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.dc({path:r,Rc:!1});return a.Ec(),a}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return Mf(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(qb(this.Ic)&&J3.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class ek{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||rd(t)}bc(t,n,r,a=!1){return new by({Ic:t,methodName:n,wc:r,path:fn.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fb(e){const t=e._freezeSettings(),n=rd(e._databaseId);return new ek(e._databaseId,!!t.ignoreUndefinedProperties,n)}function nk(e,t,n,r,a,l={}){const c=e.bc(l.merge||l.mergeFields?2:0,t,n,a);$b("Data must be an object, but it was:",c,r);const d=jb(r,c);let g,m;if(l.merge)g=new xi(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const T=rk(t,v,n);if(!c.contains(T))throw new Et(gt.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);ak(y,T)||y.push(T)}g=new xi(y),m=c.fieldTransforms.filter(v=>g.covers(v.field))}else g=null,m=c.fieldTransforms;return new tk(new yi(d),g,m)}function ik(e,t,n,r=!1){return Ay(n,e.bc(r?4:3,t))}function Ay(e,t){if(Gb(e=xn(e)))return $b("Unsupported field value:",t,e),jb(e,t);if(e instanceof Hb)return function(r,a){if(!qb(a.Ic))throw a.gc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let g=Ay(d,a.fc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}}(e,t)}return function(r,a){if((r=xn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return H4(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Ge.fromDate(r);return{timestampValue:xf(a.serializer,l)}}if(r instanceof Ge){const l=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xf(a.serializer,l)}}if(r instanceof wy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof cl)return{bytesValue:ub(a.serializer,r._byteString)};if(r instanceof Xn){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ay(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Sy)return function(c,d){return{mapValue:{fields:{[L1]:{stringValue:U1},[Af]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw d.gc("VectorValues must only contain numeric values.");return ny(d.serializer,m)})}}}}}}(r,a);throw a.gc(`Unsupported field value: ${od(r)}`)}(e,t)}function jb(e,t){const n={};return D1(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):za(e,(r,a)=>{const l=Ay(a,t.Ac(r));l!=null&&(n[r]=l)}),{mapValue:{fields:n}}}function Gb(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ge||e instanceof wy||e instanceof cl||e instanceof Xn||e instanceof Hb||e instanceof Sy)}function $b(e,t,n){if(!Gb(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const r=od(n);throw r==="an object"?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function rk(e,t,n){if((t=xn(t))instanceof Ty)return t._internalPath;if(typeof t=="string")return Yb(e,t);throw Mf("Field path arguments must be of type string or ",e,!1,void 0,n)}const sk=new RegExp("[~\\*/\\[\\]]");function Yb(e,t,n){if(t.search(sk)>=0)throw Mf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ty(...t.split("."))._internalPath}catch{throw Mf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Mf(e,t,n,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${t}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${r}`),c&&(g+=` in document ${a}`),g+=")"),new Et(gt.INVALID_ARGUMENT,d+e+g)}function ak(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(t,n,r,a,l){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new ok(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(cd("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ok extends Kb{data(){return super.data()}}function cd(e,t){return typeof t=="string"?Yb(e,t):t instanceof Ty?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Et(gt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ry{}class Xb extends Ry{}function uk(e,t,...n){let r=[];t instanceof Ry&&r.push(t),r=r.concat(n),function(l){const c=l.filter(g=>g instanceof Iy).length,d=l.filter(g=>g instanceof hd).length;if(c>1||c>0&&d>0)throw new Et(gt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)e=a._apply(e);return e}class hd extends Xb{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new hd(t,n,r)}_apply(t){const n=this._parse(t);return Qb(t._query,n),new Fa(t.firestore,t.converter,mp(t._query,n))}_parse(t){const n=Fb(t.firestore);return function(l,c,d,g,m,y,v){let T;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Et(gt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){lw(v,y);const P=[];for(const L of v)P.push(ow(g,l,L));T={arrayValue:{values:P}}}else T=ow(g,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||lw(v,y),T=ik(d,c,v,y==="in"||y==="not-in");return ze.create(m,y,T)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function ck(e,t,n){const r=t,a=cd("where",e);return hd._create(a,r,n)}class Iy extends Ry{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Iy(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Oi.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const g of d)Qb(c,g),c=mp(c,g)}(t._query,n),new Fa(t.firestore,t.converter,mp(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cy extends Xb{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Cy(t,n)}_apply(t){const n=function(a,l,c){if(a.startAt!==null)throw new Et(gt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Et(gt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ju(l,c)}(t._query,this._field,this._direction);return new Fa(t.firestore,t.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new pl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,n))}}function hk(e,t="asc"){const n=t,r=cd("orderBy",e);return Cy._create(r,n)}function ow(e,t,n){if(typeof(n=xn(n))=="string"){if(n==="")throw new Et(gt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y1(t)&&n.indexOf("/")!==-1)throw new Et(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(pe.fromString(n));if(!Rt.isDocumentKey(r))throw new Et(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wT(e,new Rt(r))}if(n instanceof Xn)return wT(e,n._key);throw new Et(gt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${od(n)}.`)}function lw(e,t){if(!Array.isArray(e)||e.length===0)throw new Et(gt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Qb(e,t){const n=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Et(gt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Et(gt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class fk{convertValue(t,n="none"){switch(qs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Oe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Hs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Dt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return za(t,(a,l)=>{r[a]=this.convertValue(l,n)}),r}convertVectorValue(t){var n,r,a;const l=(a=(r=(n=t.fields)===null||n===void 0?void 0:n[Af].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>Oe(c.doubleValue));return new Sy(l)}convertGeoPoint(t){return new wy(Oe(t.latitude),Oe(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Wf(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qu(t));default:return null}}convertTimestamp(t){const n=Bs(t);return new Ge(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=pe.fromString(t);ne(mb(r),9688,{name:t});const a=new Zu(r.get(1),r.get(3)),l=new Rt(r.popFirst(5));return a.isEqual(n)||jr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class gk extends Kb{constructor(t,n,r,a,l,c){super(t,n,r,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(cd("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class of extends gk{data(t={}){return super.data(t)}}class mk{constructor(t,n,r,a){this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new Kh(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new of(this._firestore,this._userDataWriter,r.key,r,new Kh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Et(gt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const g=new of(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Kh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const g=new of(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Kh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,y=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:pk(d.type),doc:g,oldIndex:m,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function pk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt(61501,{type:e})}}class yk extends fk{constructor(t){super(),this.firestore=t}convertBytes(t){return new cl(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Xn(this.firestore,null,n)}}function xy(e){e=ul(e,Fa);const t=ul(e.firestore,ud),n=Bb(t),r=new yk(t);return lk(e._query),K3(n,e._query).then(a=>new mk(t,r,e,a))}function gc(e,t,n){e=ul(e,Xn);const r=ul(e.firestore,ud),a=dk(e.converter,t,n);return Zb(r,[nk(Fb(r),"setDoc",e._key,a,e.converter!==null,n).toMutation(e._key,sr.none())])}function _k(e){return Zb(ul(e.firestore,ud),[new iy(e._key,sr.none())])}function Zb(e,t){return function(r,a){const l=new Ps;return r.asyncQueue.enqueueAndForget(async()=>V3(await $3(r),a,l)),l.promise}(Bb(e),t)}(function(t,n=!0){(function(a){dl=a})(fl),nl(new Va("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new ud(new e4(r.getProvider("auth-internal")),new r4(c,r.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Et(gt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zu(m.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),Vs(cT,hT,t),Vs(cT,hT,"esm2017")})();function Ny(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function Wb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vk=Wb,Jb=new lc("auth","Firebase",Wb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=new Yp("@firebase/auth");function Ek(e,...t){Vf.logLevel<=$t.WARN&&Vf.warn(`Auth (${fl}): ${e}`,...t)}function lf(e,...t){Vf.logLevel<=$t.ERROR&&Vf.error(`Auth (${fl}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(e,...t){throw Dy(e,...t)}function or(e,...t){return Dy(e,...t)}function tA(e,t,n){const r=Object.assign(Object.assign({},vk()),{[t]:n});return new lc("auth","Firebase",r).create(t,{appName:e.name})}function Br(e){return tA(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dy(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Jb.create(e,...t)}function Nt(e,t,...n){if(!e)throw Dy(t,...n)}function Lr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw lf(t),new Error(t)}function $r(e,t){e||Lr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Tk(){return uw()==="http:"||uw()==="https:"}function uw(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Tk()||NO()||"connection"in navigator)?navigator.onLine:!0}function Sk(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(t,n){this.shortDelay=t,this.longDelay=n,$r(n>t,"Short delay should be less than long delay!"),this.isMobile=IO()||DO()}get(){return wk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(e,t){$r(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Rk=new mc(3e4,6e4);function Gs(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function $s(e,t,n,r,a={}){return nA(e,a,async()=>{let l={},c={};r&&(t==="GET"?c=r:l={body:JSON.stringify(r)});const d=uc(Object.assign({key:e.config.apiKey},c)).slice(1),g=await e._getAdditionalHeaders();g["Content-Type"]="application/json",e.languageCode&&(g["X-Firebase-Locale"]=e.languageCode);const m=Object.assign({method:t,headers:g},l);return xO()||(m.referrerPolicy="no-referrer"),e.emulatorConfig&&hl(e.emulatorConfig.host)&&(m.credentials="include"),eA.fetch()(await iA(e,e.config.apiHost,n,d),m)})}async function nA(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},bk),t);try{const a=new Ck(e),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Xh(e,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[g,m]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xh(e,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Xh(e,"email-already-in-use",c);if(g==="USER_DISABLED")throw Xh(e,"user-disabled",c);const y=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw tA(e,y,m);Mi(e,y)}}catch(a){if(a instanceof Kr)throw a;Mi(e,"network-request-failed",{message:String(a)})}}async function pc(e,t,n,r,a={}){const l=await $s(e,t,n,r,a);return"mfaPendingCredential"in l&&Mi(e,"multi-factor-auth-required",{_serverResponse:l}),l}async function iA(e,t,n,r){const a=`${t}${n}?${r}`,l=e,c=l.config.emulator?Oy(e.config,a):`${e.config.apiScheme}://${a}`;return Ak.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function Ik(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ck{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(or(this.auth,"network-request-failed")),Rk.get())})}}function Xh(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=or(e,t,r);return a.customData._tokenResponse=n,a}function cw(e){return e!==void 0&&e.enterprise!==void 0}class xk{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return Ik(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Nk(e,t){return $s(e,"GET","/v2/recaptchaConfig",Gs(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dk(e,t){return $s(e,"POST","/v1/accounts:delete",t)}async function kf(e,t){return $s(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Ok(e,t=!1){const n=xn(e),r=await n.getIdToken(t),a=My(r);Nt(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:zu(Bm(a.auth_time)),issuedAtTime:zu(Bm(a.iat)),expirationTime:zu(Bm(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Bm(e){return Number(e)*1e3}function My(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return lf("JWT malformed, contained fewer than 3 sections"),null;try{const a=l1(n);return a?JSON.parse(a):(lf("Failed to decode base64 JWT payload"),null)}catch(a){return lf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function hw(e){const t=My(e);return Nt(t,"internal-error"),Nt(typeof t.exp<"u","internal-error"),Nt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Kr&&Mk(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function Mk({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zu(this.lastLoginAt),this.creationTime=zu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pf(e){var t;const n=e.auth,r=await e.getIdToken(),a=await nc(e,kf(n,{idToken:r}));Nt(a?.users.length,n,"internal-error");const l=a.users[0];e._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?rA(l.providerUserInfo):[],d=Pk(e.providerData,c),g=e.isAnonymous,m=!(e.email&&l.passwordHash)&&!d?.length,y=g?m:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Ip(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(e,v)}async function kk(e){const t=xn(e);await Pf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Pk(e,t){return[...e.filter(r=>!t.some(a=>a.providerId===r.providerId)),...t]}function rA(e){return e.map(t=>{var{providerId:n}=t,r=Ny(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lk(e,t){const n=await nA(e,{},async()=>{const r=uc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=e.config,c=await iA(e,a,"/v1/token",`key=${l}`),d=await e._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:d,body:r};return e.emulatorConfig&&hl(e.emulatorConfig.host)&&(g.credentials="include"),eA.fetch()(c,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Uk(e,t){return $s(e,"POST","/v2/accounts:revokeToken",Gs(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Nt(t.idToken,"internal-error"),Nt(typeof t.idToken<"u","internal-error"),Nt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):hw(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Nt(t.length!==0,"internal-error");const n=hw(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Nt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:a,expiresIn:l}=await Lk(t,n);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:a,expirationTime:l}=n,c=new Qo;return r&&(Nt(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),a&&(Nt(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),l&&(Nt(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Qo,this.toJSON())}_performRefresh(){return Lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(e,t){Nt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Ni{constructor(t){var{uid:n,auth:r,stsTokenManager:a}=t,l=Ny(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ip(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await nc(this,this.stsTokenManager.getToken(this.auth,t));return Nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Ok(this,t)}reload(){return kk(this)}_assign(t){this!==t&&(Nt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Ni(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await Pf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pi(this.auth.app))return Promise.reject(Br(this.auth));const t=await this.getIdToken();return await nc(this,Dk(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,a,l,c,d,g,m,y;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,T=(a=n.email)!==null&&a!==void 0?a:void 0,S=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,P=(c=n.photoURL)!==null&&c!==void 0?c:void 0,L=(d=n.tenantId)!==null&&d!==void 0?d:void 0,V=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,B=(m=n.createdAt)!==null&&m!==void 0?m:void 0,q=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:F,emailVerified:H,isAnonymous:et,providerData:nt,stsTokenManager:D}=n;Nt(F&&D,t,"internal-error");const R=Qo.fromJSON(this.name,D);Nt(typeof F=="string",t,"internal-error"),ws(v,t.name),ws(T,t.name),Nt(typeof H=="boolean",t,"internal-error"),Nt(typeof et=="boolean",t,"internal-error"),ws(S,t.name),ws(P,t.name),ws(L,t.name),ws(V,t.name),ws(B,t.name),ws(q,t.name);const I=new Ni({uid:F,auth:t,email:T,emailVerified:H,displayName:v,isAnonymous:et,photoURL:P,phoneNumber:S,tenantId:L,stsTokenManager:R,createdAt:B,lastLoginAt:q});return nt&&Array.isArray(nt)&&(I.providerData=nt.map(k=>Object.assign({},k))),V&&(I._redirectEventId=V),I}static async _fromIdTokenResponse(t,n,r=!1){const a=new Qo;a.updateFromServerResponse(n);const l=new Ni({uid:n.localId,auth:t,stsTokenManager:a,isAnonymous:r});return await Pf(l),l}static async _fromGetAccountInfoResponse(t,n,r){const a=n.users[0];Nt(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?rA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Qo;d.updateFromIdToken(r);const g=new Ni({uid:a.localId,auth:t,stsTokenManager:d,isAnonymous:c}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Ip(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(g,m),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=new Map;function Ur(e){$r(e instanceof Function,"Expected a class definition");let t=fw.get(e);return t?($r(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,fw.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}sA.type="NONE";const dw=sA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(e,t,n){return`firebase:${e}:${t}:${n}`}class Zo{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=uf(this.userKey,a.apiKey,l),this.fullPersistenceKey=uf("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await kf(this.auth,{idToken:t}).catch(()=>{});return n?Ni._fromGetAccountInfoResponse(this.auth,n,t):null}return Ni._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Zo(Ur(dw),t,r);const a=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=a[0]||Ur(dw);const c=uf(r,t.config.apiKey,t.name);let d=null;for(const m of n)try{const y=await m._get(c);if(y){let v;if(typeof y=="string"){const T=await kf(t,{idToken:y}).catch(()=>{});if(!T)break;v=await Ni._fromGetAccountInfoResponse(t,T,y)}else v=Ni._fromJSON(t,y);m!==l&&(d=v),l=m;break}}catch{}const g=a.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Zo(l,t,r):(l=g[0],d&&await l._set(c,d.toJSON()),await Promise.all(n.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new Zo(l,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(uA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(aA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(hA(t))return"Blackberry";if(fA(t))return"Webos";if(oA(t))return"Safari";if((t.includes("chrome/")||lA(t))&&!t.includes("edge/"))return"Chrome";if(cA(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function aA(e=Tn()){return/firefox\//i.test(e)}function oA(e=Tn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function lA(e=Tn()){return/crios\//i.test(e)}function uA(e=Tn()){return/iemobile/i.test(e)}function cA(e=Tn()){return/android/i.test(e)}function hA(e=Tn()){return/blackberry/i.test(e)}function fA(e=Tn()){return/webos/i.test(e)}function Vy(e=Tn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function zk(e=Tn()){var t;return Vy(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Bk(){return OO()&&document.documentMode===10}function dA(e=Tn()){return Vy(e)||cA(e)||fA(e)||hA(e)||/windows phone/i.test(e)||uA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(e,t=[]){let n;switch(e){case"Browser":n=gw(Tn());break;case"Worker":n=`${gw(Tn())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${fl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=l=>new Promise((c,d)=>{try{const g=t(l);c(g)}catch(g){d(g)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qk(e,t={}){return $s(e,"GET","/v2/passwordPolicy",Gs(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=6;class jk{constructor(t){var n,r,a,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:Fk,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,a,l,c,d;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,g),this.validatePasswordCharacterOptions(t,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(a=g.containsLowercaseLetter)!==null&&a!==void 0?a:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(c=g.containsNumericCharacter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),g}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),a&&(n.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<t.length;a++)r=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(t,n,r,a){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mw(this),this.idTokenSubscription=new mw(this),this.beforeStateQueue=new Hk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Ur(n)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await Zo.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await kf(this,{idToken:t}),r=await Ni._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(pi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=a?._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===d)&&g?.user&&(a=g.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Pf(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Sk()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(pi(this.app))return Promise.reject(Br(this));const n=t?xn(t):null;return n&&Nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Nt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return pi(this.app)?Promise.reject(Br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return pi(this.app)?Promise.reject(Br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ur(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await qk(this),n=new jk(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new lc("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Uk(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Ur(t)||this._popupRedirectResolver;Nt(n,this,"argument-error"),this.redirectPersistenceManager=await Zo.create(this,[Ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Nt(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,r,a);return()=>{c=!0,g()}}else{const g=t.addObserver(n);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=gA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var t;if(pi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n?.error&&Ek(`Error while retrieving App Check token: ${n.error}`),n?.token}}function ja(e){return xn(e)}class mw{constructor(t){this.auth=t,this.observer=null,this.addObserver=BO(n=>this.observer=n)}get next(){return Nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $k(e){fd=e}function mA(e){return fd.loadJS(e)}function Yk(){return fd.recaptchaEnterpriseScript}function Kk(){return fd.gapiScript}function Xk(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class Qk{constructor(){this.enterprise=new Zk}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class Zk{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const Wk="recaptcha-enterprise",pA="NO_RECAPTCHA";class Jk{constructor(t){this.type=Wk,this.auth=ja(t)}async verify(t="verify",n=!1){async function r(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{Nk(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new xk(g);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(g=>{d(g)})})}function a(l,c,d){const g=window.grecaptcha;cw(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:t}).then(m=>{c(m)}).catch(()=>{c(pA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Qk().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(d=>{if(!n&&cw(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=Yk();g.length!==0&&(g+=d),mA(g).then(()=>{a(d,l,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function pw(e,t,n,r=!1,a=!1){const l=new Jk(e);let c;if(a)c=pA;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const d=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const g=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const g=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Cp(e,t,n,r,a){var l;if(!((l=e._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await pw(e,t,n,n==="getOobCode");return r(e,c)}else return r(e,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await pw(e,t,n,n==="getOobCode");return r(e,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(e,t){const n=Xp(e,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(Ma(l,t??{}))return a;Mi(a,"already-initialized")}return n.initialize({options:t})}function eP(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ur);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function nP(e,t,n){const r=ja(e);Nt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const a=!1,l=yA(t),{host:c,port:d}=iP(t),g=d===null?"":`:${d}`,m={url:`${l}//${c}${g}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Nt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Nt(Ma(m,r.config.emulator)&&Ma(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,hl(c)?(f1(`${l}//${c}${g}`),d1("Auth",!0)):rP()}function yA(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function iP(e){const t=yA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:yw(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:yw(c)}}}function yw(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function rP(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Lr("not implemented")}_getIdTokenResponse(t){return Lr("not implemented")}_linkToIdToken(t,n){return Lr("not implemented")}_getReauthenticationResolver(t){return Lr("not implemented")}}async function sP(e,t){return $s(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aP(e,t){return pc(e,"POST","/v1/accounts:signInWithPassword",Gs(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oP(e,t){return pc(e,"POST","/v1/accounts:signInWithEmailLink",Gs(e,t))}async function lP(e,t){return pc(e,"POST","/v1/accounts:signInWithEmailLink",Gs(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends ky{constructor(t,n,r,a=null){super("password",r),this._email=t,this._password=n,this._tenantId=a}static _fromEmailAndPassword(t,n){return new ic(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new ic(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cp(t,n,"signInWithPassword",aP);case"emailLink":return oP(t,{email:this._email,oobCode:this._password});default:Mi(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cp(t,r,"signUpPassword",sP);case"emailLink":return lP(t,{idToken:n,email:this._email,oobCode:this._password});default:Mi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(e,t){return pc(e,"POST","/v1/accounts:signInWithIdp",Gs(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="http://localhost";class La extends ky{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new La(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Mi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:a}=n,l=Ny(n,["providerId","signInMethod"]);if(!r||!a)return null;const c=new La(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const n=this.buildRequest();return Wo(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Wo(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Wo(t,n)}buildRequest(){const t={requestUri:uP,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=uc(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hP(e){const t=xu(Nu(e)).link,n=t?xu(Nu(t)).deep_link_id:null,r=xu(Nu(e)).deep_link_id;return(r?xu(Nu(r)).link:null)||r||n||t||e}class Py{constructor(t){var n,r,a,l,c,d;const g=xu(Nu(t)),m=(n=g.apiKey)!==null&&n!==void 0?n:null,y=(r=g.oobCode)!==null&&r!==void 0?r:null,v=cP((a=g.mode)!==null&&a!==void 0?a:null);Nt(m&&y&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=y,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=g.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=g.tenantId)!==null&&d!==void 0?d:null}static parseLink(t){const n=hP(t);try{return new Py(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.providerId=vl.PROVIDER_ID}static credential(t,n){return ic._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=Py.parseLink(n);return Nt(r,"argument-error"),ic._fromEmailAndCode(t,r.code,r.tenantId)}}vl.PROVIDER_ID="password";vl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends _A{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends yc{constructor(){super("facebook.com")}static credential(t){return La._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Rs.credentialFromTaggedObject(t)}static credentialFromError(t){return Rs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Rs.credential(t.oauthAccessToken)}catch{return null}}}Rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends yc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return La._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Is.credentialFromTaggedObject(t)}static credentialFromError(t){return Is.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Is.credential(n,r)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends yc{constructor(){super("github.com")}static credential(t){return La._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Cs.credentialFromTaggedObject(t)}static credentialFromError(t){return Cs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Cs.credential(t.oauthAccessToken)}catch{return null}}}Cs.GITHUB_SIGN_IN_METHOD="github.com";Cs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends yc{constructor(){super("twitter.com")}static credential(t,n){return La._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return xs.credentialFromTaggedObject(t)}static credentialFromError(t){return xs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return xs.credential(n,r)}catch{return null}}}xs.TWITTER_SIGN_IN_METHOD="twitter.com";xs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fP(e,t){return pc(e,"POST","/v1/accounts:signUp",Gs(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,a=!1){const l=await Ni._fromIdTokenResponse(t,r,a),c=_w(r);return new Ua({user:l,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const a=_w(r);return new Ua({user:t,providerId:a,_tokenResponse:r,operationType:n})}}function _w(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf extends Kr{constructor(t,n,r,a){var l;super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Lf.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,a){return new Lf(t,n,r,a)}}function vA(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Lf._fromErrorAndOperation(e,l,t,r):l})}async function dP(e,t,n=!1){const r=await nc(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ua._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP(e,t,n=!1){const{auth:r}=e;if(pi(r.app))return Promise.reject(Br(r));const a="reauthenticate";try{const l=await nc(e,vA(r,a,t,e),n);Nt(l.idToken,r,"internal-error");const c=My(l.idToken);Nt(c,r,"internal-error");const{sub:d}=c;return Nt(e.uid===d,r,"user-mismatch"),Ua._forOperation(e,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Mi(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EA(e,t,n=!1){if(pi(e.app))return Promise.reject(Br(e));const r="signIn",a=await vA(e,r,t),l=await Ua._fromIdTokenResponse(e,r,a);return n||await e._updateCurrentUser(l.user),l}async function mP(e,t){return EA(ja(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(e){const t=ja(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function pP(e,t,n){if(pi(e.app))return Promise.reject(Br(e));const r=ja(e),c=await Cp(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fP).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&TA(e),g}),d=await Ua._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function yP(e,t,n){return pi(e.app)?Promise.reject(Br(e)):mP(xn(e),vl.credential(t,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&TA(e),r})}function _P(e,t,n,r){return xn(e).onIdTokenChanged(t,n,r)}function vP(e,t,n){return xn(e).beforeAuthStateChanged(t,n)}function wA(e,t,n,r){return xn(e).onAuthStateChanged(t,n,r)}function SA(e){return xn(e).signOut()}const Uf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uf,"1"),this.storage.removeItem(Uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=1e3,TP=10;class AA extends bA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&t(n,a,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((c,d,g)=>{this.notifyListeners(c,g)});return}const r=t.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);Bk()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,TP):a()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},EP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}AA.type="LOCAL";const wP=AA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA extends bA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}RA.type="SESSION";const IA=RA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(a=>a.isListeningto(t));if(n)return n;const r=new dd(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async m=>m(n.origin,l)),g=await SP(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,g)=>{const m=Ly("",20);a.port1.start();const y=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(v){const T=v;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(T.data.response);break;default:clearTimeout(y),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:m,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(){return window}function AP(e){lr().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(){return typeof lr().WorkerGlobalScope<"u"&&typeof lr().importScripts=="function"}async function RP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IP(){var e;return((e=navigator?.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function CP(){return CA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="firebaseLocalStorageDb",xP=1,zf="firebaseLocalStorage",NA="fbase_key";class _c{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gd(e,t){return e.transaction([zf],t?"readwrite":"readonly").objectStore(zf)}function NP(){const e=indexedDB.deleteDatabase(xA);return new _c(e).toPromise()}function xp(){const e=indexedDB.open(xA,xP);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(zf,{keyPath:NA})}catch(a){n(a)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(zf)?t(r):(r.close(),await NP(),t(await xp()))})})}async function vw(e,t,n){const r=gd(e,!0).put({[NA]:t,value:n});return new _c(r).toPromise()}async function DP(e,t){const n=gd(e,!1).get(t),r=await new _c(n).toPromise();return r===void 0?null:r.value}function Ew(e,t){const n=gd(e,!0).delete(t);return new _c(n).toPromise()}const OP=800,MP=3;class DA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xp(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>MP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dd._getInstance(CP()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await RP(),!this.activeServiceWorker)return;this.sender=new bP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||IP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await xp();return await vw(t,Uf,"1"),await Ew(t,Uf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>vw(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>DP(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ew(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=gd(a,!1).getAll();return new _c(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DA.type="LOCAL";const VP=DA;new mc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(e,t){return t?Ur(t):(Nt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy extends ky{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Wo(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Wo(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Wo(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function PP(e){return EA(e.auth,new Uy(e),e.bypassAuthState)}function LP(e){const{auth:t,user:n}=e;return Nt(n,t,"internal-error"),gP(n,new Uy(e),e.bypassAuthState)}async function UP(e){const{auth:t,user:n}=e;return Nt(n,t,"internal-error"),dP(n,new Uy(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(t,n,r,a,l=!1){this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(m){this.reject(m)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return PP;case"linkViaPopup":case"linkViaRedirect":return UP;case"reauthViaPopup":case"reauthViaRedirect":return LP;default:Mi(this.auth,"internal-error")}}resolve(t){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=new mc(2e3,1e4);class Go extends OA{constructor(t,n,r,a,l){super(t,n,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Go.currentPopupAction&&Go.currentPopupAction.cancel(),Go.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Nt(t,this.auth,"internal-error"),t}async onExecution(){$r(this.filter.length===1,"Popup operations only handle one event");const t=Ly();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Go.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,zP.get())};t()}}Go.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP="pendingRedirect",cf=new Map;class HP extends OA{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=cf.get(this.auth._key());if(!t){try{const r=await qP(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}cf.set(this.auth._key(),t)}return this.bypassAuthState||cf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qP(e,t){const n=GP(t),r=jP(e);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function FP(e,t){cf.set(e._key(),t)}function jP(e){return Ur(e._redirectPersistence)}function GP(e){return uf(BP,e.config.apiKey,e.name)}async function $P(e,t,n=!1){if(pi(e.app))return Promise.reject(Br(e));const r=ja(e),a=kP(r,t),c=await new HP(r,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=10*60*1e3;class KP{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!XP(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!MA(t)){const a=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(or(this.auth,a))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=YP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tw(t))}saveEventToCache(t){this.cachedEventUids.add(Tw(t)),this.lastProcessedEventTime=Date.now()}}function Tw(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function MA({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function XP(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MA(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QP(e,t={}){return $s(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WP=/^https?/;async function JP(e){if(e.config.emulator)return;const{authorizedDomains:t}=await QP(e);for(const n of t)try{if(t6(n))return}catch{}Mi(e,"unauthorized-domain")}function t6(e){const t=Rp(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const c=new URL(e);return c.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!WP.test(n))return!1;if(ZP.test(e))return r===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=new mc(3e4,6e4);function ww(){const e=lr().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function n6(e){return new Promise((t,n)=>{var r,a,l;function c(){ww(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ww(),n(or(e,"network-request-failed"))},timeout:e6.get()})}if(!((a=(r=lr().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)t(gapi.iframes.getContext());else if(!((l=lr().gapi)===null||l===void 0)&&l.load)c();else{const d=Xk("iframefcb");return lr()[d]=()=>{gapi.load?c():n(or(e,"network-request-failed"))},mA(`${Kk()}?onload=${d}`).catch(g=>n(g))}}).catch(t=>{throw hf=null,t})}let hf=null;function i6(e){return hf=hf||n6(e),hf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=new mc(5e3,15e3),s6="__/auth/iframe",a6="emulator/auth/iframe",o6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function u6(e){const t=e.config;Nt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Oy(t,a6):`https://${e.config.authDomain}/${s6}`,r={apiKey:t.apiKey,appName:e.name,v:fl},a=l6.get(e.config.apiHost);a&&(r.eid=a);const l=e._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${uc(r).slice(1)}`}async function c6(e){const t=await i6(e),n=lr().gapi;return Nt(n,e,"internal-error"),t.open({where:document.body,url:u6(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o6,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=or(e,"network-request-failed"),d=lr().setTimeout(()=>{l(c)},r6.get());function g(){lr().clearTimeout(d),a(r)}r.ping(g).then(g,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f6=500,d6=600,g6="_blank",m6="http://localhost";class Sw{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function p6(e,t,n,r=f6,a=d6){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const g=Object.assign(Object.assign({},h6),{width:r.toString(),height:a.toString(),top:l,left:c}),m=Tn().toLowerCase();n&&(d=lA(m)?g6:n),aA(m)&&(t=t||m6,g.scrollbars="yes");const y=Object.entries(g).reduce((T,[S,P])=>`${T}${S}=${P},`,"");if(zk(m)&&d!=="_self")return y6(t||"",d),new Sw(null);const v=window.open(t||"",d,y);Nt(v,e,"popup-blocked");try{v.focus()}catch{}return new Sw(v)}function y6(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6="__/auth/handler",v6="emulator/auth/handler",E6=encodeURIComponent("fac");async function bw(e,t,n,r,a,l){Nt(e.config.authDomain,e,"auth-domain-config-required"),Nt(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:fl,eventId:a};if(t instanceof _A){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",zO(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(t instanceof yc){const y=t.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}e.tenantId&&(c.tid=e.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const g=await e._getAppCheckToken(),m=g?`#${E6}=${encodeURIComponent(g)}`:"";return`${T6(e)}?${uc(d).slice(1)}${m}`}function T6({config:e}){return e.emulator?Oy(e,v6):`https://${e.authDomain}/${_6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="webStorageSupport";class w6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IA,this._completeRedirectFn=$P,this._overrideRedirectResult=FP}async _openPopup(t,n,r,a){var l;$r((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await bw(t,n,r,Rp(),a);return p6(t,c,Ly())}async _openRedirect(t,n,r,a){await this._originValidation(t);const l=await bw(t,n,r,Rp(),a);return AP(l),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):($r(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await c6(t),r=new KP(t);return n.register("authEvent",a=>(Nt(a?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Hm,{type:Hm},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[Hm];c!==void 0&&n(!!c),Mi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=JP(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return dA()||oA()||Vy()}}const S6=w6;var Aw="@firebase/auth",Rw="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R6(e){nl(new Va("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Nt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:d,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gA(e)},m=new Gk(r,a,l,g);return eP(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),nl(new Va("auth-internal",t=>{const n=ja(t.getProvider("auth").getImmediate());return(r=>new b6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vs(Aw,Rw,A6(e)),Vs(Aw,Rw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=5*60,C6=h1("authIdTokenMaxAge")||I6;let Iw=null;const x6=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>C6)return;const a=n?.token;Iw!==a&&(Iw=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function N6(e=y1()){const t=Xp(e,"auth");if(t.isInitialized())return t.getImmediate();const n=tP(e,{popupRedirectResolver:S6,persistence:[VP,wP,IA]}),r=h1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=x6(l.toString());vP(n,c,()=>c(n.currentUser)),_P(n,d=>c(d))}}const a=u1("auth");return a&&nP(n,`http://${a}`),n}function D6(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}$k({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=a=>{const l=or("internal-error");l.customData=a,n(l)},r.type="text/javascript",r.charset="UTF-8",D6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R6("Browser");const O6={apiKey:"AIzaSyByTZ08eCsc2wv0VIWUHNtHSdmAA_JI5hM",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},VA=p1(O6),Yr=Z3(VA),Aa=N6(VA),Cw={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},gi={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function M6({onAuthed:e}){const[t,n]=X.useState(!1),[r,a]=X.useState(null),[l,c]=X.useState(""),[d,g]=X.useState(""),[m,y]=X.useState(!1),[v,T]=X.useState(!1),[S,P]=X.useState("");X.useEffect(()=>{const q=wA(Aa,F=>{F?(n(!0),e(Aa.currentUser),a(F)):(n(!1),a(null))});return()=>q()},[e]);const L=async q=>{q.preventDefault(),T(!0),P("");try{if(!l||!d)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l))throw new Error(gi.INVALID_EMAIL);if(d.length<6)throw new Error(gi.WEAK_PASSWORD);const H=await pP(Aa,l,d);e(H.user)}catch(F){console.error("Sign up error:",F);let H="Failed to create account";F.code==="auth/email-already-in-use"?H=gi.EMAIL_IN_USE:F.code==="auth/invalid-email"?H=gi.INVALID_EMAIL:F.code==="auth/weak-password"?H=gi.WEAK_PASSWORD:F.code==="auth/operation-not-allowed"?H="Email/password accounts are not enabled. Please contact support.":F.message&&(H=F.message),P(H)}finally{T(!1)}},V=async q=>{q.preventDefault(),T(!0),P("");try{if(!l||!d)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l))throw new Error(gi.INVALID_EMAIL);const H=await yP(Aa,l,d);e(H.user)}catch(F){console.error("Sign in error:",F);let H="Failed to sign in";F.code==="auth/user-not-found"?H=gi.USER_NOT_FOUND:F.code==="auth/wrong-password"?H=gi.WRONG_PASSWORD:F.code==="auth/invalid-email"?H=gi.INVALID_EMAIL:F.code==="auth/user-disabled"?H="This account has been disabled. Please contact support.":F.code==="auth/too-many-requests"?H=gi.TOO_MANY_REQUESTS:F.message&&(H=F.message),P(H)}finally{T(!1)}},B=async()=>{try{await SA(Aa)}catch(q){P(q.message)}};return t?_t.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",fontFamily:"Arial, sans-serif"},children:_t.jsxs("div",{style:{padding:"2rem",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"#f9f9f9",textAlign:"center"},children:[_t.jsxs("p",{style:{marginBottom:"1rem"},children:["Welcome, ",r?.email,"!"]}),_t.jsx("button",{onClick:B,style:{padding:"0.5rem 1rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Sign Out"})]})}):_t.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",fontFamily:"Arial, sans-serif",backgroundColor:"#f5f5f5"},children:_t.jsxs("div",{style:{padding:"2rem",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"white",minWidth:"300px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[_t.jsx("h2",{style:{textAlign:"center",marginBottom:"1.5rem"},children:m?"Sign Up":"Sign In"}),_t.jsxs("form",{onSubmit:m?L:V,children:[_t.jsx("input",{type:"email",placeholder:"Email",value:l,onChange:q=>c(q.target.value),required:!0,style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",border:"1px solid #ccc",borderRadius:"4px",fontSize:"1rem",boxSizing:"border-box"}}),_t.jsx("input",{type:"password",placeholder:"Password",value:d,onChange:q=>g(q.target.value),required:!0,style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",border:"1px solid #ccc",borderRadius:"4px",fontSize:"1rem",boxSizing:"border-box"}}),_t.jsx("button",{type:"submit",disabled:v,style:{width:"100%",padding:"0.75rem",backgroundColor:v?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"4px",fontSize:"1rem",cursor:v?"not-allowed":"pointer",marginBottom:"1rem"},children:v?"Loading...":m?"Sign Up":"Sign In"}),S&&_t.jsx("p",{style:{color:"red",textAlign:"center",marginBottom:"1rem",fontSize:"0.9rem"},children:S})]}),_t.jsxs("p",{style:{textAlign:"center",margin:0},children:[m?"Already have an account?":"Don't have an account?",_t.jsx("button",{type:"button",onClick:()=>y(!m),style:{background:"none",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",marginLeft:"0.5rem",fontSize:"1rem"},children:m?"Sign In":"Sign Up"})]})]})})}function V6({allBoards:e,currentBoard:t,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:a,onSignOut:l,isLoading:c}){const d=(g,m)=>{g.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&a(m)};return _t.jsx(_t.Fragment,{children:_t.jsxs("div",{className:"sidebar",children:[_t.jsxs("div",{className:"sidebar-header",children:[_t.jsx("h2",{children:"Launch Hacks"}),_t.jsx("button",{onClick:r,disabled:c,children:"+ New Board"})]}),_t.jsxs("div",{className:"sidebar-content",children:[c&&_t.jsx("div",{className:"loading-indicator",children:"Switching boards..."}),_t.jsx("ul",{children:e?.map(g=>_t.jsxs("li",{onClick:()=>!c&&n(g.id),className:t?.id===g.id?"active":"",children:[_t.jsx("span",{className:"board-name",children:g.name}),_t.jsxs("div",{className:"board-actions",children:[g.isOpen&&_t.jsx("span",{className:"open-indicator",children:""}),e.length>1&&_t.jsx("button",{className:"delete-btn",onClick:m=>d(m,g.id),title:"Delete board",children:""})]})]},g.id))})]}),_t.jsx("div",{className:"sidebar-footer",children:_t.jsx("button",{onClick:l,children:"Sign Out"})})]})})}function k6({name:e,onSetName:t,user:n,isSaving:r}){const[a,l]=X.useState(!1),[c,d]=X.useState(e||"");X.useEffect(()=>{d(e||"")},[e]);const g=y=>{y.key==="Enter"&&(t(c),l(!1))},m=()=>{l(!0),d(e||"")};return _t.jsx(_t.Fragment,{children:_t.jsxs("div",{className:"name",children:[_t.jsx("div",{className:"app-container",children:_t.jsxs("header",{className:"app-header",children:[_t.jsx("h1",{children:"Tink Flow Editor"}),_t.jsxs("div",{className:"user-info",children:[_t.jsxs("p",{children:["Welcome,"," ",n?.isAnonymous?"Anonymous User":n?.email||"User"]}),r&&_t.jsx("span",{className:"save-indicator",children:" Saving..."})]})]})}),_t.jsxs("div",{className:"board-title-section",children:[a?_t.jsx("input",{type:"text",value:c,onChange:y=>d(y.target.value),onKeyDown:g,onBlur:()=>{t(c),l(!1)},autoFocus:!0}):_t.jsx("h6",{onClick:m,style:{cursor:"pointer"},children:e||"Untitled Board"}),_t.jsx("div",{className:"keyboard-shortcuts",children:_t.jsx("small",{children:" Tips: Ctrl+N for new board, Ctrl+1-9 to switch boards"})})]})]})})}const P6=({notification:e,onRemove:t})=>{const n=r=>{switch(r){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";default:return""}};return _t.jsxs("div",{className:`notification notification-${e.type}`,children:[_t.jsxs("div",{className:"notification-content",children:[_t.jsx("span",{className:"notification-icon",children:n(e.type)}),_t.jsx("span",{className:"notification-message",children:e.message})]}),_t.jsx("button",{className:"notification-close",onClick:()=>t(e.id),children:""})]})},L6=({notifications:e,onRemove:t})=>e.length===0?null:_t.jsx("div",{className:"notifications-container",children:e.map(n=>_t.jsx(P6,{notification:n,onRemove:t},n.id))}),U6=async()=>{try{await SA(Aa),console.log("User signed out successfully")}catch(e){throw console.error("Error signing out:",e),e}},z6=()=>{const[e,t]=X.useState(null);return X.useEffect(()=>{const a=wA(Aa,l=>{l?(t(l),console.log("User signed in:",l.uid)):(t(null),console.log("No user signed in"))});return()=>a()},[]),{user:e,signOut:async()=>{try{await U6(),t(null)}catch(a){console.error("Error in sign out:",a)}},onAuthed:a=>{t(a)}}},B6=e=>e&&e.uid,Bf=[{id:"1",type:"draggableEditable",data:{label:"Node A"},position:{x:250,y:25}},{id:"2",type:"draggableEditable",data:{label:"Node B"},position:{x:100,y:125}},{id:"3",type:"draggableEditable",data:{label:"Node C"},position:{x:400,y:125}},{id:"4",type:"staticEditable",data:{label:"Node D"},position:{x:250,y:200},draggable:!1}],Hf=[{id:"e1-2",source:"1",target:"2"},{id:"e1-3",source:"1",target:"3"},{id:"e2-4",source:"2",target:"4"},{id:"e3-4",source:"3",target:"4"}],H6=async e=>{if(!B6({uid:e}))throw new Error(gi.AUTH_REQUIRED);try{const t=Ey(Yr,Cw.BOARDS),n=uk(t,ck("userId","==",e),hk("createdAt","desc")),r=await xy(n);if(r.empty){const l={id:`board_${Date.now()}`,userId:e,name:"Default Board",createdAt:new Date,isOpen:!0};return await gc(_l(Yr,Cw.BOARDS,l.id),l),console.log("Created default board:",l),[l]}const a=r.docs.map(l=>({id:l.id,...l.data()}));return console.log("Fetched all boards:",a),a}catch(t){if(console.error("Fetch all boards error:",t),t.code==="failed-precondition"||t.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:e,name:"Fallback Board (Create Index)",createdAt:new Date,isOpen:!0,isFallback:!0}]}throw new Error(gi.LOAD_FAILED)}},xw=async e=>{try{const t=Ey(Yr,"boards",e,"nodes"),n=await xy(t);if(n.empty)return console.log("No nodes found for board, using initial nodes"),Bf;const r=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched nodes from board:",r),r}catch(t){return console.error("Fetch nodes error:",t),Bf}},Nw=async e=>{try{const t=Ey(Yr,"boards",e,"edges"),n=await xy(t);if(n.empty)return console.log("No edges found for board, using initial edges"),Hf;const r=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched edges from board:",r),r}catch(t){return console.error("Fetch edges error:",t),Hf}},q6=async(e,t)=>{try{const n=t.map(r=>gc(_l(Yr,"boards",e,"nodes",r.id),{type:r.type,data:r.data,position:r.position,draggable:r.draggable}));await Promise.all(n),console.log("Nodes saved to board")}catch(n){console.error("Save nodes error:",n)}},F6=async(e,t)=>{try{const n=t.map(r=>gc(_l(Yr,"boards",e,"edges",r.id),{source:r.source,target:r.target,sourceHandle:r.sourceHandle,targetHandle:r.targetHandle}));await Promise.all(n),console.log("Edges saved to board")}catch(n){console.error("Save edges error:",n)}},j6=async(e,t,n)=>{try{const r={id:`board_${Date.now()}`,userId:e,name:t||`Board ${n.length+1}`,createdAt:new Date,isOpen:!1};return await gc(_l(Yr,"boards",r.id),r),console.log("Created new board:",r),r}catch(r){return console.error("Error creating new board:",r),null}},G6=async e=>{try{await _k(_l(Yr,"boards",e)),console.log("Board deleted successfully")}catch(t){throw console.error("Error deleting board:",t),t}},Qh=async(e,t)=>{try{await gc(_l(Yr,"boards",e),t,{merge:!0}),console.log("Board status updated:",t)}catch(n){throw console.error("Error updating board status:",n),n}},$6=(e,t={})=>{const[n,r,a]=FD([]),[l,c,d]=jD([]),[g,m]=X.useState(!0),[y,v]=X.useState(!1),[T,S]=X.useState(!1),[P,L]=X.useState([]),[V,B]=X.useState(null),{showSuccess:q,showError:F,showInfo:H}=t,et=N=>{const U=N.find(A=>A.isOpen===!0);if(U)return U;if(N.length>0){const A={...N[0],isOpen:!0};return Qh(A.id,A),A}return null};X.useEffect(()=>{(async()=>{if(e)try{m(!0);const U=await H6(e.uid);L(U);const A=U.some($=>$.isFallback);A&&F&&F("Database index missing. Please create the required Firestore index. Check console for details.");const M=et(U);if(!M){console.error("No board found for user"),F&&F("No boards found. Creating a default board..."),r(Bf),c(Hf);return}B(M);const[tt,O]=await Promise.all([xw(M.id),Nw(M.id)]);r(tt),c(O),H&&!A&&H("Board loaded successfully!")}catch(U){console.error("Error loading initial data:",U),F&&F("Failed to load board data. Using default board."),r(Bf),c(Hf)}finally{m(!1)}})()},[e,r,c]),X.useEffect(()=>{if(!g&&V&&n.length>0){S(!0);const N=setTimeout(()=>{q6(V.id,n).finally(()=>{S(!1)})},1e3);return()=>clearTimeout(N)}},[n,g,V]),X.useEffect(()=>{if(!g&&V&&l.length>0){S(!0);const N=setTimeout(()=>{F6(V.id,l).finally(()=>{S(!1)})},1e3);return()=>clearTimeout(N)}},[l,g,V]);const nt=X.useCallback(async N=>{try{if(V?.id===N)return;if(v(!0),V){const A={...V,isOpen:!1};await Qh(V.id,A),L(M=>M.map(tt=>tt.id===V.id?A:tt))}const U=P.find(A=>A.id===N);if(U){const A={...U,isOpen:!0};await Qh(N,A),B(A),L(O=>O.map($=>$.id===N?A:$));const[M,tt]=await Promise.all([xw(N),Nw(N)]);r(M),c(tt)}else console.error("Board not found:",N)}catch(U){console.error("Error switching board:",U)}finally{v(!1)}},[V,P,r,c]),D=X.useCallback(async()=>{try{if(!e)return null;const N=await j6(e.uid,null,P);return N&&L(U=>[N,...U]),N}catch(N){return console.error("Error creating new board:",N),null}},[e,P]),R=X.useCallback(async N=>{try{if(P.length<=1){alert("Cannot delete the last board!");return}if(!P.find(A=>A.id===N)){console.error("Board not found for deletion");return}if(V?.id===N){const A=P.find(M=>M.id!==N);A&&await nt(A.id)}await G6(N),L(A=>A.filter(M=>M.id!==N))}catch(U){console.error("Error deleting board:",U)}},[P,V,nt]),I=X.useCallback(async N=>{if(V&&V.name!==N){const U={...V,name:N};B(U),L(A=>A.map(M=>M.id===V.id?U:M));try{await Qh(V.id,U),console.log("Board name updated successfully")}catch(A){console.error("Error updating board name:",A)}}},[V]),k=X.useCallback(()=>{L([]),B(null),r([]),c([]),m(!0),v(!1),S(!1)},[r,c]);return{nodes:n,edges:l,allBoards:P,currentBoard:V,isLoading:g,isSwitchingBoard:y,isSaving:T,onNodesChange:a,onEdgesChange:d,switchToBoard:nt,createNewBoard:D,deleteBoard:R,updateBoardName:I,clearBoardState:k}},Y6=(e,t,n,r)=>{X.useEffect(()=>{const a=l=>{if((l.ctrlKey||l.metaKey)&&l.key==="n"&&(l.preventDefault(),n()),(l.ctrlKey||l.metaKey)&&l.key>="1"&&l.key<="9"){l.preventDefault();const c=parseInt(l.key)-1;e[c]&&e[c].id!==t?.id&&r(e[c].id)}};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e,t,n,r])},K6=()=>{const[e,t]=X.useState([]),n=X.useCallback(m=>{const y=Date.now().toString(),v={id:y,timestamp:new Date,...m};return t(T=>[...T,v]),m.autoRemove!==!1&&setTimeout(()=>{r(y)},m.duration||5e3),y},[]),r=X.useCallback(m=>{t(y=>y.filter(v=>v.id!==m))},[]),a=X.useCallback(()=>{t([])},[]),l=X.useCallback((m,y={})=>n({type:"success",message:m,...y}),[n]),c=X.useCallback((m,y={})=>n({type:"error",message:m,duration:7e3,...y}),[n]),d=X.useCallback((m,y={})=>n({type:"info",message:m,...y}),[n]),g=X.useCallback((m,y={})=>n({type:"warning",message:m,duration:6e3,...y}),[n]);return{notifications:e,addNotification:n,removeNotification:r,clearAllNotifications:a,showSuccess:l,showError:c,showInfo:d,showWarning:g}};function X6({data:e,id:t}){const[n,r]=X.useState(!1),[a,l]=X.useState(e.label||"Static Node"),[c,d]=X.useState(!1),g=T=>{T.stopPropagation(),r(!0)},m=()=>{r(!1),console.log("Static node text changed to:",a)},y=T=>{T.stopPropagation()},v=T=>{T.stopPropagation(),T.key==="Enter"&&m(),T.key==="Escape"&&(l(e.label||"Static Node"),r(!1))};return _t.jsxs("div",{className:"static-editable-node nodrag",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[_t.jsx(Oa,{type:"target",position:bt.Bottom,id:"bottom"}),c&&_t.jsx("div",{className:"node-tooltip",children:_t.jsxs("div",{className:"tooltip-content",children:[_t.jsx("span",{children:" Static Node"}),_t.jsx("span",{children:"Click to edit text"})]})}),n?_t.jsx("input",{type:"text",value:a,onChange:T=>l(T.target.value),onBlur:m,onKeyDown:v,onClick:y,className:"node-input nodrag",autoFocus:!0}):_t.jsx("div",{className:"node-text",onClick:g,children:a}),_t.jsx(Oa,{type:"source",position:bt.Bottom,id:"bottom-source"})]})}function Q6({data:e,id:t}){const[n,r]=X.useState(!1),[a,l]=X.useState(e.label||"Draggable Node"),[c,d]=X.useState(!1),g=T=>{T.stopPropagation(),r(!0)},m=()=>{r(!1),console.log("Draggable node text changed to:",a)},y=T=>{T.stopPropagation()},v=T=>{T.stopPropagation(),T.key==="Enter"&&m(),T.key==="Escape"&&(l(e.label||"Draggable Node"),r(!1))};return _t.jsxs("div",{className:"draggable-editable-node",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[c&&_t.jsx("div",{className:"node-tooltip",children:_t.jsxs("div",{className:"tooltip-content",children:[_t.jsx("span",{children:" Draggable Node"}),_t.jsx("span",{children:"Drag me around!"}),_t.jsx("span",{children:"Click to edit text"})]})}),_t.jsx("div",{className:"node-content",onClick:g,children:n?_t.jsx("input",{type:"text",value:a,onChange:T=>l(T.target.value),onBlur:m,onKeyDown:v,onClick:y,className:"node-input nodrag",autoFocus:!0}):_t.jsx("div",{className:"node-text",children:a})}),_t.jsx(Oa,{type:"source",position:bt.Bottom,id:"bottom-source"})]})}const Z6={staticEditable:X6,draggableEditable:Q6};function W6(){const{user:e,signOut:t,onAuthed:n}=z6(),{notifications:r,removeNotification:a,showSuccess:l,showError:c,showInfo:d}=K6(),{nodes:g,edges:m,allBoards:y,currentBoard:v,isSwitchingBoard:T,isSaving:S,onNodesChange:P,onEdgesChange:L,switchToBoard:V,createNewBoard:B,deleteBoard:q,updateBoardName:F,clearBoardState:H}=$6(e,{showSuccess:l,showError:c,showInfo:d});Y6(y,v,B,V);const et=async()=>{await t(),H()},nt=X.useCallback(D=>{L([{type:"add",item:vS(D,m)}])},[L,m]);return e?_t.jsxs(_t.Fragment,{children:[_t.jsx(V6,{allBoards:y,currentBoard:v,onSwitchBoard:V,onCreateBoard:B,onDeleteBoard:q,onSignOut:et,isLoading:T}),_t.jsx(k6,{name:v?.name||"Loading...",onSetName:F,user:e,isSaving:S}),_t.jsx(L6,{notifications:r,onRemove:a}),_t.jsx("div",{style:{width:"100vw",height:"100vh"},children:_t.jsxs(t1,{nodes:g,edges:m,onNodesChange:P,onEdgesChange:L,onConnect:nt,nodeTypes:Z6,connectionMode:Us.Loose,fitView:!0,children:[_t.jsx(oO,{}),_t.jsx(tO,{}),_t.jsx(dO,{variant:"dots",gap:12,size:1})]})})]}):_t.jsx(M6,{onAuthed:n})}dI.createRoot(document.getElementById("root")).render(_t.jsx(X.StrictMode,{children:_t.jsx(W6,{})}));
