(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function Fw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ym={exports:{}},Su={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE;function vC(){if(aE)return Su;aE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:e,type:r,key:c,ref:o!==void 0?o:null,props:l}}return Su.Fragment=t,Su.jsx=n,Su.jsxs=n,Su}var lE;function EC(){return lE||(lE=1,ym.exports=vC()),ym.exports}var mt=EC(),_m={exports:{}},Ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uE;function TC(){if(uE)return Ut;uE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function E(N){return N===null||typeof N!="object"?null:(N=v&&N[v]||N["@@iterator"],typeof N=="function"?N:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,V={};function M(N,Y,et){this.props=N,this.context=Y,this.refs=V,this.updater=et||S}M.prototype.isReactComponent={},M.prototype.setState=function(N,Y){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,Y,"setState")},M.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function B(){}B.prototype=M.prototype;function F(N,Y,et){this.props=N,this.context=Y,this.refs=V,this.updater=et||S}var X=F.prototype=new B;X.constructor=F,D(X,M.prototype),X.isPureReactComponent=!0;var z=Array.isArray,q={H:null,A:null,T:null,S:null,V:null},Z=Object.prototype.hasOwnProperty;function x(N,Y,et,st,ct,pt){return et=pt.ref,{$$typeof:e,type:N,key:Y,ref:et!==void 0?et:null,props:pt}}function b(N,Y){return x(N.type,Y,void 0,void 0,void 0,N.props)}function C(N){return typeof N=="object"&&N!==null&&N.$$typeof===e}function P(N){var Y={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(et){return Y[et]})}var L=/\/+/g;function U(N,Y){return typeof N=="object"&&N!==null&&N.key!=null?P(""+N.key):Y.toString(36)}function R(){}function k(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(R,R):(N.status="pending",N.then(function(Y){N.status==="pending"&&(N.status="fulfilled",N.value=Y)},function(Y){N.status==="pending"&&(N.status="rejected",N.reason=Y)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function K(N,Y,et,st,ct){var pt=typeof N;(pt==="undefined"||pt==="boolean")&&(N=null);var yt=!1;if(N===null)yt=!0;else switch(pt){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(N.$$typeof){case e:case t:yt=!0;break;case y:return yt=N._init,K(yt(N._payload),Y,et,st,ct)}}if(yt)return ct=ct(N),yt=st===""?"."+U(N,0):st,z(ct)?(et="",yt!=null&&(et=yt.replace(L,"$&/")+"/"),K(ct,Y,et,"",function(Vt){return Vt})):ct!=null&&(C(ct)&&(ct=b(ct,et+(ct.key==null||N&&N.key===ct.key?"":(""+ct.key).replace(L,"$&/")+"/")+yt)),Y.push(ct)),1;yt=0;var Ct=st===""?".":st+":";if(z(N))for(var At=0;At<N.length;At++)st=N[At],pt=Ct+U(st,At),yt+=K(st,Y,et,pt,ct);else if(At=E(N),typeof At=="function")for(N=At.call(N),At=0;!(st=N.next()).done;)st=st.value,pt=Ct+U(st,At++),yt+=K(st,Y,et,pt,ct);else if(pt==="object"){if(typeof N.then=="function")return K(k(N),Y,et,st,ct);throw Y=String(N),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return yt}function O(N,Y,et){if(N==null)return N;var st=[],ct=0;return K(N,st,"","",function(pt){return Y.call(et,pt,ct++)}),st}function $(N){if(N._status===-1){var Y=N._result;Y=Y(),Y.then(function(et){(N._status===0||N._status===-1)&&(N._status=1,N._result=et)},function(et){(N._status===0||N._status===-1)&&(N._status=2,N._result=et)}),N._status===-1&&(N._status=0,N._result=Y)}if(N._status===1)return N._result.default;throw N._result}var rt=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Q(){}return Ut.Children={map:O,forEach:function(N,Y,et){O(N,function(){Y.apply(this,arguments)},et)},count:function(N){var Y=0;return O(N,function(){Y++}),Y},toArray:function(N){return O(N,function(Y){return Y})||[]},only:function(N){if(!C(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ut.Component=M,Ut.Fragment=n,Ut.Profiler=o,Ut.PureComponent=F,Ut.StrictMode=r,Ut.Suspense=g,Ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,Ut.__COMPILER_RUNTIME={__proto__:null,c:function(N){return q.H.useMemoCache(N)}},Ut.cache=function(N){return function(){return N.apply(null,arguments)}},Ut.cloneElement=function(N,Y,et){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var st=D({},N.props),ct=N.key,pt=void 0;if(Y!=null)for(yt in Y.ref!==void 0&&(pt=void 0),Y.key!==void 0&&(ct=""+Y.key),Y)!Z.call(Y,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&Y.ref===void 0||(st[yt]=Y[yt]);var yt=arguments.length-2;if(yt===1)st.children=et;else if(1<yt){for(var Ct=Array(yt),At=0;At<yt;At++)Ct[At]=arguments[At+2];st.children=Ct}return x(N.type,ct,void 0,void 0,pt,st)},Ut.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:l,_context:N},N},Ut.createElement=function(N,Y,et){var st,ct={},pt=null;if(Y!=null)for(st in Y.key!==void 0&&(pt=""+Y.key),Y)Z.call(Y,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(ct[st]=Y[st]);var yt=arguments.length-2;if(yt===1)ct.children=et;else if(1<yt){for(var Ct=Array(yt),At=0;At<yt;At++)Ct[At]=arguments[At+2];ct.children=Ct}if(N&&N.defaultProps)for(st in yt=N.defaultProps,yt)ct[st]===void 0&&(ct[st]=yt[st]);return x(N,pt,void 0,void 0,null,ct)},Ut.createRef=function(){return{current:null}},Ut.forwardRef=function(N){return{$$typeof:d,render:N}},Ut.isValidElement=C,Ut.lazy=function(N){return{$$typeof:y,_payload:{_status:-1,_result:N},_init:$}},Ut.memo=function(N,Y){return{$$typeof:m,type:N,compare:Y===void 0?null:Y}},Ut.startTransition=function(N){var Y=q.T,et={};q.T=et;try{var st=N(),ct=q.S;ct!==null&&ct(et,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(Q,rt)}catch(pt){rt(pt)}finally{q.T=Y}},Ut.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},Ut.use=function(N){return q.H.use(N)},Ut.useActionState=function(N,Y,et){return q.H.useActionState(N,Y,et)},Ut.useCallback=function(N,Y){return q.H.useCallback(N,Y)},Ut.useContext=function(N){return q.H.useContext(N)},Ut.useDebugValue=function(){},Ut.useDeferredValue=function(N,Y){return q.H.useDeferredValue(N,Y)},Ut.useEffect=function(N,Y,et){var st=q.H;if(typeof et=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(N,Y)},Ut.useId=function(){return q.H.useId()},Ut.useImperativeHandle=function(N,Y,et){return q.H.useImperativeHandle(N,Y,et)},Ut.useInsertionEffect=function(N,Y){return q.H.useInsertionEffect(N,Y)},Ut.useLayoutEffect=function(N,Y){return q.H.useLayoutEffect(N,Y)},Ut.useMemo=function(N,Y){return q.H.useMemo(N,Y)},Ut.useOptimistic=function(N,Y){return q.H.useOptimistic(N,Y)},Ut.useReducer=function(N,Y,et){return q.H.useReducer(N,Y,et)},Ut.useRef=function(N){return q.H.useRef(N)},Ut.useState=function(N){return q.H.useState(N)},Ut.useSyncExternalStore=function(N,Y,et){return q.H.useSyncExternalStore(N,Y,et)},Ut.useTransition=function(){return q.H.useTransition()},Ut.version="19.1.0",Ut}var cE;function uc(){return cE||(cE=1,_m.exports=TC()),_m.exports}var j=uc();const lt=Fw(j);var vm={exports:{}},bu={},Em={exports:{}},Tm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hE;function wC(){return hE||(hE=1,function(e){function t(O,$){var rt=O.length;O.push($);t:for(;0<rt;){var Q=rt-1>>>1,N=O[Q];if(0<o(N,$))O[Q]=$,O[rt]=N,rt=Q;else break t}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var $=O[0],rt=O.pop();if(rt!==$){O[0]=rt;t:for(var Q=0,N=O.length,Y=N>>>1;Q<Y;){var et=2*(Q+1)-1,st=O[et],ct=et+1,pt=O[ct];if(0>o(st,rt))ct<N&&0>o(pt,st)?(O[Q]=pt,O[ct]=rt,Q=ct):(O[Q]=st,O[et]=rt,Q=et);else if(ct<N&&0>o(pt,rt))O[Q]=pt,O[ct]=rt,Q=ct;else break t}}return $}function o(O,$){var rt=O.sortIndex-$.sortIndex;return rt!==0?rt:O.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var g=[],m=[],y=1,v=null,E=3,S=!1,D=!1,V=!1,M=!1,B=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function z(O){for(var $=n(m);$!==null;){if($.callback===null)r(m);else if($.startTime<=O)r(m),$.sortIndex=$.expirationTime,t(g,$);else break;$=n(m)}}function q(O){if(V=!1,z(O),!D)if(n(g)!==null)D=!0,Z||(Z=!0,U());else{var $=n(m);$!==null&&K(q,$.startTime-O)}}var Z=!1,x=-1,b=5,C=-1;function P(){return M?!0:!(e.unstable_now()-C<b)}function L(){if(M=!1,Z){var O=e.unstable_now();C=O;var $=!0;try{t:{D=!1,V&&(V=!1,F(x),x=-1),S=!0;var rt=E;try{e:{for(z(O),v=n(g);v!==null&&!(v.expirationTime>O&&P());){var Q=v.callback;if(typeof Q=="function"){v.callback=null,E=v.priorityLevel;var N=Q(v.expirationTime<=O);if(O=e.unstable_now(),typeof N=="function"){v.callback=N,z(O),$=!0;break e}v===n(g)&&r(g),z(O)}else r(g);v=n(g)}if(v!==null)$=!0;else{var Y=n(m);Y!==null&&K(q,Y.startTime-O),$=!1}}break t}finally{v=null,E=rt,S=!1}$=void 0}}finally{$?U():Z=!1}}}var U;if(typeof X=="function")U=function(){X(L)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,k=R.port2;R.port1.onmessage=L,U=function(){k.postMessage(null)}}else U=function(){B(L,0)};function K(O,$){x=B(function(){O(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_next=function(O){switch(E){case 1:case 2:case 3:var $=3;break;default:$=E}var rt=E;E=$;try{return O()}finally{E=rt}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(O,$){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var rt=E;E=O;try{return $()}finally{E=rt}},e.unstable_scheduleCallback=function(O,$,rt){var Q=e.unstable_now();switch(typeof rt=="object"&&rt!==null?(rt=rt.delay,rt=typeof rt=="number"&&0<rt?Q+rt:Q):rt=Q,O){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=rt+N,O={id:y++,callback:$,priorityLevel:O,startTime:rt,expirationTime:N,sortIndex:-1},rt>Q?(O.sortIndex=rt,t(m,O),n(g)===null&&O===n(m)&&(V?(F(x),x=-1):V=!0,K(q,rt-Q))):(O.sortIndex=N,t(g,O),D||S||(D=!0,Z||(Z=!0,U()))),O},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(O){var $=E;return function(){var rt=E;E=$;try{return O.apply(this,arguments)}finally{E=rt}}}}(Tm)),Tm}var fE;function SC(){return fE||(fE=1,Em.exports=wC()),Em.exports}var wm={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dE;function bC(){if(dE)return _n;dE=1;var e=uc();function t(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(g,m,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:g,containerInfo:m,implementation:y}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_n.createPortal=function(g,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return l(g,m,null,y)},_n.flushSync=function(g){var m=c.T,y=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=m,r.p=y,r.d.f()}},_n.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(g,m))},_n.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},_n.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin),E=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?r.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:S}):y==="script"&&r.d.X(g,{crossOrigin:v,integrity:E,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},_n.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=d(m.as,m.crossOrigin);r.d.M(g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(g)},_n.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin);r.d.L(g,y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},_n.preloadModule=function(g,m){if(typeof g=="string")if(m){var y=d(m.as,m.crossOrigin);r.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(g)},_n.requestFormReset=function(g){r.d.r(g)},_n.unstable_batchedUpdates=function(g,m){return g(m)},_n.useFormState=function(g,m,y){return c.H.useFormState(g,m,y)},_n.useFormStatus=function(){return c.H.useHostTransitionStatus()},_n.version="19.1.0",_n}var gE;function jw(){if(gE)return wm.exports;gE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),wm.exports=bC(),wm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mE;function AC(){if(mE)return bu;mE=1;var e=SC(),t=uc(),n=jw();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(r(188))}function g(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var a=i,u=s;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){a=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return d(f),i;if(p===u)return d(f),s;p=p.sibling}throw Error(r(188))}if(a.return!==u.return)a=f,u=p;else{for(var w=!1,A=f.child;A;){if(A===a){w=!0,a=f,u=p;break}if(A===u){w=!0,u=f,a=p;break}A=A.sibling}if(!w){for(A=p.child;A;){if(A===a){w=!0,a=p,u=f;break}if(A===u){w=!0,u=p,a=f;break}A=A.sibling}if(!w)throw Error(r(189))}}if(a.alternate!==u)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?i:s}function m(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=m(i),s!==null)return s;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),X=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=L&&i[L]||i["@@iterator"],typeof i=="function"?i:null)}var R=Symbol.for("react.client.reference");function k(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===R?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case M:return"Profiler";case V:return"StrictMode";case q:return"Suspense";case Z:return"SuspenseList";case C:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case X:return(i.displayName||"Context")+".Provider";case F:return(i._context.displayName||"Context")+".Consumer";case z:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case x:return s=i.displayName||null,s!==null?s:k(i.type)||"Memo";case b:s=i._payload,i=i._init;try{return k(i(s))}catch{}}return null}var K=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rt={pending:!1,data:null,method:null,action:null},Q=[],N=-1;function Y(i){return{current:i}}function et(i){0>N||(i.current=Q[N],Q[N]=null,N--)}function st(i,s){N++,Q[N]=i.current,i.current=s}var ct=Y(null),pt=Y(null),yt=Y(null),Ct=Y(null);function At(i,s){switch(st(yt,s),st(pt,i),st(ct,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Vv(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Vv(s),i=Pv(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}et(ct),st(ct,i)}function Vt(){et(ct),et(pt),et(yt)}function Pt(i){i.memoizedState!==null&&st(Ct,i);var s=ct.current,a=Pv(s,i.type);s!==a&&(st(pt,i),st(ct,a))}function ue(i){pt.current===i&&(et(ct),et(pt)),Ct.current===i&&(et(Ct),_u._currentValue=rt)}var ce=Object.prototype.hasOwnProperty,Ee=e.unstable_scheduleCallback,_e=e.unstable_cancelCallback,he=e.unstable_shouldYield,Xe=e.unstable_requestPaint,Lt=e.unstable_now,wt=e.unstable_getCurrentPriorityLevel,xe=e.unstable_ImmediatePriority,pn=e.unstable_UserBlockingPriority,Un=e.unstable_NormalPriority,Ui=e.unstable_LowPriority,zn=e.unstable_IdlePriority,Sn=e.log,Si=e.unstable_setDisableYieldValue,te=null,Ft=null;function ke(i){if(typeof Sn=="function"&&Si(i),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(te,i)}catch{}}var Te=Math.clz32?Math.clz32:Qe,zi=Math.log,Ve=Math.LN2;function Qe(i){return i>>>=0,i===0?32:31-(zi(i)/Ve|0)|0}var bn=256,An=4194304;function Ze(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function on(i,s,a){var u=i.pendingLanes;if(u===0)return 0;var f=0,p=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var A=u&134217727;return A!==0?(u=A&~p,u!==0?f=Ze(u):(w&=A,w!==0?f=Ze(w):a||(a=A&~i,a!==0&&(f=Ze(a))))):(A=u&~p,A!==0?f=Ze(A):w!==0?f=Ze(w):a||(a=u&~i,a!==0&&(f=Ze(a)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,a=s&-s,p>=a||p===32&&(a&4194048)!==0)?s:f}function Rn(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function dr(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gr(){var i=bn;return bn<<=1,(bn&4194048)===0&&(bn=256),i}function bi(){var i=An;return An<<=1,(An&62914560)===0&&(An=4194304),i}function Bn(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function ni(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Hn(i,s,a,u,f,p){var w=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var A=i.entanglements,H=i.expirationTimes,nt=i.hiddenUpdates;for(a=w&~a;0<a;){var ut=31-Te(a),ft=1<<ut;A[ut]=0,H[ut]=-1;var it=nt[ut];if(it!==null)for(nt[ut]=null,ut=0;ut<it.length;ut++){var ot=it[ut];ot!==null&&(ot.lane&=-536870913)}a&=~ft}u!==0&&ii(i,u,0),p!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=p&~(w&~s))}function ii(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-Te(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|a&4194090}function Qs(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var u=31-Te(a),f=1<<u;f&s|i[u]&s&&(i[u]|=s),a&=~f}}function Bi(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Qr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Hi(){var i=$.p;return i!==0?i:(i=window.event,i===void 0?32:eE(i.type))}function Yo(i,s){var a=$.p;try{return $.p=i,s()}finally{$.p=a}}var de=Math.random().toString(36).slice(2),Ne="__reactFiber$"+de,Ae="__reactProps$"+de,Dn="__reactContainer$"+de,Zs="__reactEvents$"+de,bl="__reactListeners$"+de,qi="__reactHandles$"+de,Ko="__reactResources$"+de,mr="__reactMarker$"+de;function Fi(i){delete i[Ne],delete i[Ae],delete i[Zs],delete i[bl],delete i[qi]}function ri(i){var s=i[Ne];if(s)return s;for(var a=i.parentNode;a;){if(s=a[Dn]||a[Ne]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=Bv(i);i!==null;){if(a=i[Ne])return a;i=Bv(i)}return s}i=a,a=i.parentNode}return null}function si(i){if(i=i[Ne]||i[Dn]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function oi(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function an(i){var s=i[Ko];return s||(s=i[Ko]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function we(i){i[mr]=!0}var Ws=new Set,Zr={};function qn(i,s){Ai(i,s),Ai(i+"Capture",s)}function Ai(i,s){for(Zr[i]=s,i=0;i<s.length;i++)Ws.add(s[i])}var Js=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xo={},pr={};function Qo(i){return ce.call(pr,i)?!0:ce.call(Xo,i)?!1:Js.test(i)?pr[i]=!0:(Xo[i]=!0,!1)}function ji(i,s,a){if(Qo(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function ai(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function He(i,s,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+u)}}var Gi,Zo;function Ri(i){if(Gi===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Gi=s&&s[1]||"",Zo=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gi+i+Zo}var Wr=!1;function $i(i,s){if(!i||Wr)return"";Wr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(ot){var it=ot}Reflect.construct(i,[],ft)}else{try{ft.call()}catch(ot){it=ot}i.call(ft.prototype)}}else{try{throw Error()}catch(ot){it=ot}(ft=i())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(ot){if(ot&&it&&typeof ot.stack=="string")return[ot.stack,it.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),w=p[0],A=p[1];if(w&&A){var H=w.split(`
`),nt=A.split(`
`);for(f=u=0;u<H.length&&!H[u].includes("DetermineComponentFrameRoot");)u++;for(;f<nt.length&&!nt[f].includes("DetermineComponentFrameRoot");)f++;if(u===H.length||f===nt.length)for(u=H.length-1,f=nt.length-1;1<=u&&0<=f&&H[u]!==nt[f];)f--;for(;1<=u&&0<=f;u--,f--)if(H[u]!==nt[f]){if(u!==1||f!==1)do if(u--,f--,0>f||H[u]!==nt[f]){var ut=`
`+H[u].replace(" at new "," at ");return i.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",i.displayName)),ut}while(1<=u&&0<=f);break}}}finally{Wr=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Ri(a):""}function Al(i){switch(i.tag){case 26:case 27:case 5:return Ri(i.type);case 16:return Ri("Lazy");case 13:return Ri("Suspense");case 19:return Ri("SuspenseList");case 0:case 15:return $i(i.type,!1);case 11:return $i(i.type.render,!1);case 1:return $i(i.type,!0);case 31:return Ri("Activity");default:return""}}function Wo(i){try{var s="";do s+=Al(i),i=i.return;while(i);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Cn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Rl(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Td(i){var s=Rl(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),u=""+i[s];if(!i.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,p=a.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){u=""+w,p.call(this,w)}}),Object.defineProperty(i,s,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Jo(i){i._valueTracker||(i._valueTracker=Td(i))}function Cl(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return i&&(u=Rl(i)?i.checked?"true":"false":i.value),i=u,i!==a?(s.setValue(i),!0):!1}function to(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var wd=/[\n"\\]/g;function Pe(i){return i.replace(wd,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Fn(i,s,a,u,f,p,w,A){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),s!=null?w==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Cn(s)):i.value!==""+Cn(s)&&(i.value=""+Cn(s)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),s!=null?Jr(i,w,Cn(s)):a!=null?Jr(i,w,Cn(a)):u!=null&&i.removeAttribute("value"),f==null&&p!=null&&(i.defaultChecked=!!p),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+Cn(A):i.removeAttribute("name")}function eo(i,s,a,u,f,p,w,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),s!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;a=a!=null?""+Cn(a):"",s=s!=null?""+Cn(s):a,A||s===i.value||(i.value=s),i.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=A?i.checked:!!u,i.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w)}function Jr(i,s,a){s==="number"&&to(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function yr(i,s,a,u){if(i=i.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<i.length;a++)f=s.hasOwnProperty("$"+i[a].value),i[a].selected!==f&&(i[a].selected=f),f&&u&&(i[a].defaultSelected=!0)}else{for(a=""+Cn(a),s=null,f=0;f<i.length;f++){if(i[f].value===a){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function se(i,s,a){if(s!=null&&(s=""+Cn(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+Cn(a):""}function no(i,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(r(92));if(K(u)){if(1<u.length)throw Error(r(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=Cn(s),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u)}function li(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var io=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rc(i,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,a):typeof a!="number"||a===0||io.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function Il(i,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&a[f]!==u&&Rc(i,f,u)}else for(var p in s)s.hasOwnProperty(p)&&Rc(i,p,s[p])}function xl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ta(i){return bd.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var _r=null;function ui(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var vr=null,Er=null;function Nl(i){var s=si(i);if(s&&(i=s.stateNode)){var a=i[Ae]||null;t:switch(i=s.stateNode,s.type){case"input":if(Fn(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Pe(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==i&&u.form===i.form){var f=u[Ae]||null;if(!f)throw Error(r(90));Fn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===i.form&&Cl(u)}break t;case"textarea":se(i,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&yr(i,!!a.multiple,s,!1)}}}var Yi=!1;function Cc(i,s,a){if(Yi)return i(s,a);Yi=!0;try{var u=i(s);return u}finally{if(Yi=!1,(vr!==null||Er!==null)&&(Eh(),vr&&(s=vr,i=Er,Er=vr=null,Nl(s),i)))for(s=0;s<i.length;s++)Nl(i[s])}}function ro(i,s){var a=i.stateNode;if(a===null)return null;var u=a[Ae]||null;if(u===null)return null;a=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ci=!1;if(Ci)try{var so={};Object.defineProperty(so,"passive",{get:function(){ci=!0}}),window.addEventListener("test",so,so),window.removeEventListener("test",so,so)}catch{ci=!1}var Ki=null,ts=null,Tr=null;function Dl(){if(Tr)return Tr;var i,s=ts,a=s.length,u,f="value"in Ki?Ki.value:Ki.textContent,p=f.length;for(i=0;i<a&&s[i]===f[i];i++);var w=a-i;for(u=1;u<=w&&s[a-u]===f[p-u];u++);return Tr=f.slice(i,1<u?1-u:void 0)}function Xi(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Qi(){return!0}function Ml(){return!1}function We(i){function s(a,u,f,p,w){this._reactName=a,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(a=i[A],this[A]=a?a(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Qi:Ml,this.isPropagationStopped=Ml,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Qi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Qi)},persist:function(){},isPersistent:Qi}),s}var ee={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ea=We(ee),oo=y({},ee,{view:0,detail:0}),Ic=We(oo),na,ia,Zi,ao=y({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:co,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Zi&&(Zi&&i.type==="mousemove"?(na=i.screenX-Zi.screenX,ia=i.screenY-Zi.screenY):ia=na=0,Zi=i),na)},movementY:function(i){return"movementY"in i?i.movementY:ia}}),hi=We(ao),xc=y({},ao,{dataTransfer:0}),Ad=We(xc),lo=y({},oo,{relatedTarget:0}),ra=We(lo),Ol=y({},ee,{animationName:0,elapsedTime:0,pseudoElement:0}),sa=We(Ol),Nc=y({},ee,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),oa=We(Nc),Rd=y({},ee,{data:0}),kl=We(Rd),uo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vl(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Mc[i])?!!s[i]:!1}function co(){return Vl}var Oc=y({},oo,{key:function(i){if(i.key){var s=uo[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Xi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Dc[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:co,charCode:function(i){return i.type==="keypress"?Xi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Xi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),aa=We(Oc),kc=y({},ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pl=We(kc),wr=y({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:co}),Vc=We(wr),Pc=y({},ee,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lc=We(Pc),Uc=y({},ao,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),la=We(Uc),In=y({},ee,{newState:0,oldState:0}),zc=We(In),Bc=[9,13,27,32],Wi=Ci&&"CompositionEvent"in window,h=null;Ci&&"documentMode"in document&&(h=document.documentMode);var _=Ci&&"TextEvent"in window&&!h,T=Ci&&(!Wi||h&&8<h&&11>=h),I=" ",J=!1;function at(i,s){switch(i){case"keyup":return Bc.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _t(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Kt=!1;function qe(i,s){switch(i){case"compositionend":return _t(s);case"keypress":return s.which!==32?null:(J=!0,I);case"textInput":return i=s.data,i===I&&J?null:i;default:return null}}function Xt(i,s){if(Kt)return i==="compositionend"||!Wi&&at(i,s)?(i=Dl(),Tr=ts=Ki=null,Kt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return T&&s.locale!=="ko"?null:s.data;default:return null}}var Je={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fe(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Je[i.type]:s==="textarea"}function Sr(i,s,a,u){vr?Er?Er.push(u):Er=[u]:vr=u,s=Rh(s,"onChange"),0<s.length&&(a=new ea("onChange","change",null,a,u),i.push({event:a,listeners:s}))}var ln=null,Ji=null;function Ll(i){Nv(i,0)}function Hc(i){var s=oi(i);if(Cl(s))return i}function Zy(i,s){if(i==="change")return s}var Wy=!1;if(Ci){var Cd;if(Ci){var Id="oninput"in document;if(!Id){var Jy=document.createElement("div");Jy.setAttribute("oninput","return;"),Id=typeof Jy.oninput=="function"}Cd=Id}else Cd=!1;Wy=Cd&&(!document.documentMode||9<document.documentMode)}function t_(){ln&&(ln.detachEvent("onpropertychange",e_),Ji=ln=null)}function e_(i){if(i.propertyName==="value"&&Hc(Ji)){var s=[];Sr(s,Ji,i,ui(i)),Cc(Ll,s)}}function XA(i,s,a){i==="focusin"?(t_(),ln=s,Ji=a,ln.attachEvent("onpropertychange",e_)):i==="focusout"&&t_()}function QA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Hc(Ji)}function ZA(i,s){if(i==="click")return Hc(s)}function WA(i,s){if(i==="input"||i==="change")return Hc(s)}function JA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var jn=typeof Object.is=="function"?Object.is:JA;function Ul(i,s){if(jn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var f=a[u];if(!ce.call(s,f)||!jn(i[f],s[f]))return!1}return!0}function n_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function i_(i,s){var a=n_(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=s&&u>=s)return{node:a,offset:s-i};i=u}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=n_(a)}}function r_(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?r_(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function s_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=to(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=to(i.document)}return s}function xd(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var tR=Ci&&"documentMode"in document&&11>=document.documentMode,ua=null,Nd=null,zl=null,Dd=!1;function o_(i,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Dd||ua==null||ua!==to(u)||(u=ua,"selectionStart"in u&&xd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),zl&&Ul(zl,u)||(zl=u,u=Rh(Nd,"onSelect"),0<u.length&&(s=new ea("onSelect","select",null,s,a),i.push({event:s,listeners:u}),s.target=ua)))}function ho(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var ca={animationend:ho("Animation","AnimationEnd"),animationiteration:ho("Animation","AnimationIteration"),animationstart:ho("Animation","AnimationStart"),transitionrun:ho("Transition","TransitionRun"),transitionstart:ho("Transition","TransitionStart"),transitioncancel:ho("Transition","TransitionCancel"),transitionend:ho("Transition","TransitionEnd")},Md={},a_={};Ci&&(a_=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function fo(i){if(Md[i])return Md[i];if(!ca[i])return i;var s=ca[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in a_)return Md[i]=s[a];return i}var l_=fo("animationend"),u_=fo("animationiteration"),c_=fo("animationstart"),eR=fo("transitionrun"),nR=fo("transitionstart"),iR=fo("transitioncancel"),h_=fo("transitionend"),f_=new Map,Od="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Od.push("scrollEnd");function Ii(i,s){f_.set(i,s),qn(s,[i])}var d_=new WeakMap;function fi(i,s){if(typeof i=="object"&&i!==null){var a=d_.get(i);return a!==void 0?a:(s={value:i,source:s,stack:Wo(s)},d_.set(i,s),s)}return{value:i,source:s,stack:Wo(s)}}var di=[],ha=0,kd=0;function qc(){for(var i=ha,s=kd=ha=0;s<i;){var a=di[s];di[s++]=null;var u=di[s];di[s++]=null;var f=di[s];di[s++]=null;var p=di[s];if(di[s++]=null,u!==null&&f!==null){var w=u.pending;w===null?f.next=f:(f.next=w.next,w.next=f),u.pending=f}p!==0&&g_(a,f,p)}}function Fc(i,s,a,u){di[ha++]=i,di[ha++]=s,di[ha++]=a,di[ha++]=u,kd|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Vd(i,s,a,u){return Fc(i,s,a,u),jc(i)}function fa(i,s){return Fc(i,null,null,s),jc(i)}function g_(i,s,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var f=!1,p=i.return;p!==null;)p.childLanes|=a,u=p.alternate,u!==null&&(u.childLanes|=a),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(f=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,f&&s!==null&&(f=31-Te(a),i=p.hiddenUpdates,u=i[f],u===null?i[f]=[s]:u.push(s),s.lane=a|536870912),p):null}function jc(i){if(50<cu)throw cu=0,Hg=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var da={};function rR(i,s,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(i,s,a,u){return new rR(i,s,a,u)}function Pd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function br(i,s){var a=i.alternate;return a===null?(a=Gn(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function m_(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Gc(i,s,a,u,f,p){var w=0;if(u=i,typeof i=="function")Pd(i)&&(w=1);else if(typeof i=="string")w=oC(i,a,ct.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case C:return i=Gn(31,a,s,f),i.elementType=C,i.lanes=p,i;case D:return go(a.children,f,p,s);case V:w=8,f|=24;break;case M:return i=Gn(12,a,s,f|2),i.elementType=M,i.lanes=p,i;case q:return i=Gn(13,a,s,f),i.elementType=q,i.lanes=p,i;case Z:return i=Gn(19,a,s,f),i.elementType=Z,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:case X:w=10;break t;case F:w=9;break t;case z:w=11;break t;case x:w=14;break t;case b:w=16,u=null;break t}w=29,a=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=Gn(w,a,s,f),s.elementType=i,s.type=u,s.lanes=p,s}function go(i,s,a,u){return i=Gn(7,i,u,s),i.lanes=a,i}function Ld(i,s,a){return i=Gn(6,i,null,s),i.lanes=a,i}function Ud(i,s,a){return s=Gn(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var ga=[],ma=0,$c=null,Yc=0,gi=[],mi=0,mo=null,Ar=1,Rr="";function po(i,s){ga[ma++]=Yc,ga[ma++]=$c,$c=i,Yc=s}function p_(i,s,a){gi[mi++]=Ar,gi[mi++]=Rr,gi[mi++]=mo,mo=i;var u=Ar;i=Rr;var f=32-Te(u)-1;u&=~(1<<f),a+=1;var p=32-Te(s)+f;if(30<p){var w=f-f%5;p=(u&(1<<w)-1).toString(32),u>>=w,f-=w,Ar=1<<32-Te(s)+f|a<<f|u,Rr=p+i}else Ar=1<<p|a<<f|u,Rr=i}function zd(i){i.return!==null&&(po(i,1),p_(i,1,0))}function Bd(i){for(;i===$c;)$c=ga[--ma],ga[ma]=null,Yc=ga[--ma],ga[ma]=null;for(;i===mo;)mo=gi[--mi],gi[mi]=null,Rr=gi[--mi],gi[mi]=null,Ar=gi[--mi],gi[mi]=null}var xn=null,Re=null,Jt=!1,yo=null,tr=!1,Hd=Error(r(519));function _o(i){var s=Error(r(418,""));throw ql(fi(s,i)),Hd}function y_(i){var s=i.stateNode,a=i.type,u=i.memoizedProps;switch(s[Ne]=i,s[Ae]=u,a){case"dialog":Gt("cancel",s),Gt("close",s);break;case"iframe":case"object":case"embed":Gt("load",s);break;case"video":case"audio":for(a=0;a<fu.length;a++)Gt(fu[a],s);break;case"source":Gt("error",s);break;case"img":case"image":case"link":Gt("error",s),Gt("load",s);break;case"details":Gt("toggle",s);break;case"input":Gt("invalid",s),eo(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Jo(s);break;case"select":Gt("invalid",s);break;case"textarea":Gt("invalid",s),no(s,u.value,u.defaultValue,u.children),Jo(s)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||kv(s.textContent,a)?(u.popover!=null&&(Gt("beforetoggle",s),Gt("toggle",s)),u.onScroll!=null&&Gt("scroll",s),u.onScrollEnd!=null&&Gt("scrollend",s),u.onClick!=null&&(s.onclick=Ch),s=!0):s=!1,s||_o(i)}function __(i){for(xn=i.return;xn;)switch(xn.tag){case 5:case 13:tr=!1;return;case 27:case 3:tr=!0;return;default:xn=xn.return}}function Bl(i){if(i!==xn)return!1;if(!Jt)return __(i),Jt=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||im(i.type,i.memoizedProps)),a=!a),a&&Re&&_o(i),__(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(a=i.data,a==="/$"){if(s===0){Re=Ni(i.nextSibling);break t}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;i=i.nextSibling}Re=null}}else s===27?(s=Re,ps(i.type)?(i=am,am=null,Re=i):Re=s):Re=xn?Ni(i.stateNode.nextSibling):null;return!0}function Hl(){Re=xn=null,Jt=!1}function v_(){var i=yo;return i!==null&&(kn===null?kn=i:kn.push.apply(kn,i),yo=null),i}function ql(i){yo===null?yo=[i]:yo.push(i)}var qd=Y(null),vo=null,Cr=null;function es(i,s,a){st(qd,s._currentValue),s._currentValue=a}function Ir(i){i._currentValue=qd.current,et(qd)}function Fd(i,s,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===a)break;i=i.return}}function jd(i,s,a,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var p=f.dependencies;if(p!==null){var w=f.child;p=p.firstContext;t:for(;p!==null;){var A=p;p=f;for(var H=0;H<s.length;H++)if(A.context===s[H]){p.lanes|=a,A=p.alternate,A!==null&&(A.lanes|=a),Fd(p.return,a,i),u||(w=null);break t}p=A.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(r(341));w.lanes|=a,p=w.alternate,p!==null&&(p.lanes|=a),Fd(w,a,i),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===i){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function Fl(i,s,a,u){i=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var A=f.type;jn(f.pendingProps.value,w.value)||(i!==null?i.push(A):i=[A])}}else if(f===Ct.current){if(w=f.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(_u):i=[_u])}f=f.return}i!==null&&jd(s,i,a,u),s.flags|=262144}function Kc(i){for(i=i.firstContext;i!==null;){if(!jn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Eo(i){vo=i,Cr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function yn(i){return E_(vo,i)}function Xc(i,s){return vo===null&&Eo(i),E_(i,s)}function E_(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Cr===null){if(i===null)throw Error(r(308));Cr=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Cr=Cr.next=s;return a}var sR=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},oR=e.unstable_scheduleCallback,aR=e.unstable_NormalPriority,je={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gd(){return{controller:new sR,data:new Map,refCount:0}}function jl(i){i.refCount--,i.refCount===0&&oR(aR,function(){i.controller.abort()})}var Gl=null,$d=0,pa=0,ya=null;function lR(i,s){if(Gl===null){var a=Gl=[];$d=0,pa=Kg(),ya={status:"pending",value:void 0,then:function(u){a.push(u)}}}return $d++,s.then(T_,T_),s}function T_(){if(--$d===0&&Gl!==null){ya!==null&&(ya.status="fulfilled");var i=Gl;Gl=null,pa=0,ya=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function uR(i,s){var a=[],u={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),u}var w_=O.S;O.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&lR(i,s),w_!==null&&w_(i,s)};var To=Y(null);function Yd(){var i=To.current;return i!==null?i:ge.pooledCache}function Qc(i,s){s===null?st(To,To.current):st(To,s.pool)}function S_(){var i=Yd();return i===null?null:{parent:je._currentValue,pool:i}}var $l=Error(r(460)),b_=Error(r(474)),Zc=Error(r(542)),Kd={then:function(){}};function A_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Wc(){}function R_(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(Wc,Wc),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,I_(i),i;default:if(typeof s.status=="string")s.then(Wc,Wc);else{if(i=ge,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,I_(i),i}throw Yl=s,$l}}var Yl=null;function C_(){if(Yl===null)throw Error(r(459));var i=Yl;return Yl=null,i}function I_(i){if(i===$l||i===Zc)throw Error(r(483))}var ns=!1;function Xd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qd(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function is(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function rs(i,s,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(ie&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=jc(i),g_(i,null,a),s}return Fc(i,u,s,a),jc(i)}function Kl(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,Qs(i,a)}}function Zd(i,s){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?f=p=s:p=p.next=s}else f=p=s;a={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var Wd=!1;function Xl(){if(Wd){var i=ya;if(i!==null)throw i}}function Ql(i,s,a,u){Wd=!1;var f=i.updateQueue;ns=!1;var p=f.firstBaseUpdate,w=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var H=A,nt=H.next;H.next=null,w===null?p=nt:w.next=nt,w=H;var ut=i.alternate;ut!==null&&(ut=ut.updateQueue,A=ut.lastBaseUpdate,A!==w&&(A===null?ut.firstBaseUpdate=nt:A.next=nt,ut.lastBaseUpdate=H))}if(p!==null){var ft=f.baseState;w=0,ut=nt=H=null,A=p;do{var it=A.lane&-536870913,ot=it!==A.lane;if(ot?(Qt&it)===it:(u&it)===it){it!==0&&it===pa&&(Wd=!0),ut!==null&&(ut=ut.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var Mt=i,It=A;it=s;var le=a;switch(It.tag){case 1:if(Mt=It.payload,typeof Mt=="function"){ft=Mt.call(le,ft,it);break t}ft=Mt;break t;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=It.payload,it=typeof Mt=="function"?Mt.call(le,ft,it):Mt,it==null)break t;ft=y({},ft,it);break t;case 2:ns=!0}}it=A.callback,it!==null&&(i.flags|=64,ot&&(i.flags|=8192),ot=f.callbacks,ot===null?f.callbacks=[it]:ot.push(it))}else ot={lane:it,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ut===null?(nt=ut=ot,H=ft):ut=ut.next=ot,w|=it;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;ot=A,A=ot.next,ot.next=null,f.lastBaseUpdate=ot,f.shared.pending=null}}while(!0);ut===null&&(H=ft),f.baseState=H,f.firstBaseUpdate=nt,f.lastBaseUpdate=ut,p===null&&(f.shared.lanes=0),fs|=w,i.lanes=w,i.memoizedState=ft}}function x_(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function N_(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)x_(a[i],s)}var _a=Y(null),Jc=Y(0);function D_(i,s){i=Vr,st(Jc,i),st(_a,s),Vr=i|s.baseLanes}function Jd(){st(Jc,Vr),st(_a,_a.current)}function tg(){Vr=Jc.current,et(_a),et(Jc)}var ss=0,zt=null,oe=null,Le=null,th=!1,va=!1,wo=!1,eh=0,Zl=0,Ea=null,cR=0;function De(){throw Error(r(321))}function eg(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!jn(i[a],s[a]))return!1;return!0}function ng(i,s,a,u,f,p){return ss=p,zt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,O.H=i===null||i.memoizedState===null?g0:m0,wo=!1,p=a(u,f),wo=!1,va&&(p=O_(s,a,u,f)),M_(i),p}function M_(i){O.H=ah;var s=oe!==null&&oe.next!==null;if(ss=0,Le=oe=zt=null,th=!1,Zl=0,Ea=null,s)throw Error(r(300));i===null||tn||(i=i.dependencies,i!==null&&Kc(i)&&(tn=!0))}function O_(i,s,a,u){zt=i;var f=0;do{if(va&&(Ea=null),Zl=0,va=!1,25<=f)throw Error(r(301));if(f+=1,Le=oe=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}O.H=yR,p=s(a,u)}while(va);return p}function hR(){var i=O.H,s=i.useState()[0];return s=typeof s.then=="function"?Wl(s):s,i=i.useState()[0],(oe!==null?oe.memoizedState:null)!==i&&(zt.flags|=1024),s}function ig(){var i=eh!==0;return eh=0,i}function rg(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function sg(i){if(th){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}th=!1}ss=0,Le=oe=zt=null,va=!1,Zl=eh=0,Ea=null}function Mn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?zt.memoizedState=Le=i:Le=Le.next=i,Le}function Ue(){if(oe===null){var i=zt.alternate;i=i!==null?i.memoizedState:null}else i=oe.next;var s=Le===null?zt.memoizedState:Le.next;if(s!==null)Le=s,oe=i;else{if(i===null)throw zt.alternate===null?Error(r(467)):Error(r(310));oe=i,i={memoizedState:oe.memoizedState,baseState:oe.baseState,baseQueue:oe.baseQueue,queue:oe.queue,next:null},Le===null?zt.memoizedState=Le=i:Le=Le.next=i}return Le}function og(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wl(i){var s=Zl;return Zl+=1,Ea===null&&(Ea=[]),i=R_(Ea,i,s),s=zt,(Le===null?s.memoizedState:Le.next)===null&&(s=s.alternate,O.H=s===null||s.memoizedState===null?g0:m0),i}function nh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Wl(i);if(i.$$typeof===X)return yn(i)}throw Error(r(438,String(i)))}function ag(i){var s=null,a=zt.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=zt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=og(),zt.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),u=0;u<i;u++)a[u]=P;return s.index++,a}function xr(i,s){return typeof s=="function"?s(i):s}function ih(i){var s=Ue();return lg(s,oe,i)}function lg(i,s,a){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=a;var f=i.baseQueue,p=u.pending;if(p!==null){if(f!==null){var w=f.next;f.next=p.next,p.next=w}s.baseQueue=f=p,u.pending=null}if(p=i.baseState,f===null)i.memoizedState=p;else{s=f.next;var A=w=null,H=null,nt=s,ut=!1;do{var ft=nt.lane&-536870913;if(ft!==nt.lane?(Qt&ft)===ft:(ss&ft)===ft){var it=nt.revertLane;if(it===0)H!==null&&(H=H.next={lane:0,revertLane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),ft===pa&&(ut=!0);else if((ss&it)===it){nt=nt.next,it===pa&&(ut=!0);continue}else ft={lane:0,revertLane:nt.revertLane,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},H===null?(A=H=ft,w=p):H=H.next=ft,zt.lanes|=it,fs|=it;ft=nt.action,wo&&a(p,ft),p=nt.hasEagerState?nt.eagerState:a(p,ft)}else it={lane:ft,revertLane:nt.revertLane,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},H===null?(A=H=it,w=p):H=H.next=it,zt.lanes|=ft,fs|=ft;nt=nt.next}while(nt!==null&&nt!==s);if(H===null?w=p:H.next=A,!jn(p,i.memoizedState)&&(tn=!0,ut&&(a=ya,a!==null)))throw a;i.memoizedState=p,i.baseState=w,i.baseQueue=H,u.lastRenderedState=p}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function ug(i){var s=Ue(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=i;var u=a.dispatch,f=a.pending,p=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do p=i(p,w.action),w=w.next;while(w!==f);jn(p,s.memoizedState)||(tn=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,u]}function k_(i,s,a){var u=zt,f=Ue(),p=Jt;if(p){if(a===void 0)throw Error(r(407));a=a()}else a=s();var w=!jn((oe||f).memoizedState,a);w&&(f.memoizedState=a,tn=!0),f=f.queue;var A=L_.bind(null,u,f,i);if(Jl(2048,8,A,[i]),f.getSnapshot!==s||w||Le!==null&&Le.memoizedState.tag&1){if(u.flags|=2048,Ta(9,rh(),P_.bind(null,u,f,a,s),null),ge===null)throw Error(r(349));p||(ss&124)!==0||V_(u,s,a)}return a}function V_(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=zt.updateQueue,s===null?(s=og(),zt.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function P_(i,s,a,u){s.value=a,s.getSnapshot=u,U_(s)&&z_(i)}function L_(i,s,a){return a(function(){U_(s)&&z_(i)})}function U_(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!jn(i,a)}catch{return!0}}function z_(i){var s=fa(i,2);s!==null&&Qn(s,i,2)}function cg(i){var s=Mn();if(typeof i=="function"){var a=i;if(i=a(),wo){ke(!0);try{a()}finally{ke(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:i},s}function B_(i,s,a,u){return i.baseState=a,lg(i,oe,typeof u=="function"?u:xr)}function fR(i,s,a,u,f){if(oh(i))throw Error(r(485));if(i=s.action,i!==null){var p={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};O.T!==null?a(!0):p.isTransition=!1,u(p),a=s.pending,a===null?(p.next=s.pending=p,H_(s,p)):(p.next=a.next,s.pending=a.next=p)}}function H_(i,s){var a=s.action,u=s.payload,f=i.state;if(s.isTransition){var p=O.T,w={};O.T=w;try{var A=a(f,u),H=O.S;H!==null&&H(w,A),q_(i,s,A)}catch(nt){hg(i,s,nt)}finally{O.T=p}}else try{p=a(f,u),q_(i,s,p)}catch(nt){hg(i,s,nt)}}function q_(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){F_(i,s,u)},function(u){return hg(i,s,u)}):F_(i,s,a)}function F_(i,s,a){s.status="fulfilled",s.value=a,j_(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,H_(i,a)))}function hg(i,s,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,j_(s),s=s.next;while(s!==u)}i.action=null}function j_(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function G_(i,s){return s}function $_(i,s){if(Jt){var a=ge.formState;if(a!==null){t:{var u=zt;if(Jt){if(Re){e:{for(var f=Re,p=tr;f.nodeType!==8;){if(!p){f=null;break e}if(f=Ni(f.nextSibling),f===null){f=null;break e}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Re=Ni(f.nextSibling),u=f.data==="F!";break t}}_o(u)}u=!1}u&&(s=a[0])}}return a=Mn(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:G_,lastRenderedState:s},a.queue=u,a=h0.bind(null,zt,u),u.dispatch=a,u=cg(!1),p=pg.bind(null,zt,!1,u.queue),u=Mn(),f={state:s,dispatch:null,action:i,pending:null},u.queue=f,a=fR.bind(null,zt,f,p,a),f.dispatch=a,u.memoizedState=i,[s,a,!1]}function Y_(i){var s=Ue();return K_(s,oe,i)}function K_(i,s,a){if(s=lg(i,s,G_)[0],i=ih(xr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Wl(s)}catch(w){throw w===$l?Zc:w}else u=s;s=Ue();var f=s.queue,p=f.dispatch;return a!==s.memoizedState&&(zt.flags|=2048,Ta(9,rh(),dR.bind(null,f,a),null)),[u,p,i]}function dR(i,s){i.action=s}function X_(i){var s=Ue(),a=oe;if(a!==null)return K_(s,a,i);Ue(),s=s.memoizedState,a=Ue();var u=a.queue.dispatch;return a.memoizedState=i,[s,u,!1]}function Ta(i,s,a,u){return i={tag:i,create:a,deps:u,inst:s,next:null},s=zt.updateQueue,s===null&&(s=og(),zt.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,s.lastEffect=i),i}function rh(){return{destroy:void 0,resource:void 0}}function Q_(){return Ue().memoizedState}function sh(i,s,a,u){var f=Mn();u=u===void 0?null:u,zt.flags|=i,f.memoizedState=Ta(1|s,rh(),a,u)}function Jl(i,s,a,u){var f=Ue();u=u===void 0?null:u;var p=f.memoizedState.inst;oe!==null&&u!==null&&eg(u,oe.memoizedState.deps)?f.memoizedState=Ta(s,p,a,u):(zt.flags|=i,f.memoizedState=Ta(1|s,p,a,u))}function Z_(i,s){sh(8390656,8,i,s)}function W_(i,s){Jl(2048,8,i,s)}function J_(i,s){return Jl(4,2,i,s)}function t0(i,s){return Jl(4,4,i,s)}function e0(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function n0(i,s,a){a=a!=null?a.concat([i]):null,Jl(4,4,e0.bind(null,s,i),a)}function fg(){}function i0(i,s){var a=Ue();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&eg(s,u[1])?u[0]:(a.memoizedState=[i,s],i)}function r0(i,s){var a=Ue();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&eg(s,u[1]))return u[0];if(u=i(),wo){ke(!0);try{i()}finally{ke(!1)}}return a.memoizedState=[u,s],u}function dg(i,s,a){return a===void 0||(ss&1073741824)!==0?i.memoizedState=s:(i.memoizedState=a,i=av(),zt.lanes|=i,fs|=i,a)}function s0(i,s,a,u){return jn(a,s)?a:_a.current!==null?(i=dg(i,a,u),jn(i,s)||(tn=!0),i):(ss&42)===0?(tn=!0,i.memoizedState=a):(i=av(),zt.lanes|=i,fs|=i,s)}function o0(i,s,a,u,f){var p=$.p;$.p=p!==0&&8>p?p:8;var w=O.T,A={};O.T=A,pg(i,!1,s,a);try{var H=f(),nt=O.S;if(nt!==null&&nt(A,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var ut=uR(H,u);tu(i,s,ut,Xn(i))}else tu(i,s,u,Xn(i))}catch(ft){tu(i,s,{then:function(){},status:"rejected",reason:ft},Xn())}finally{$.p=p,O.T=w}}function gR(){}function gg(i,s,a,u){if(i.tag!==5)throw Error(r(476));var f=a0(i).queue;o0(i,f,s,rt,a===null?gR:function(){return l0(i),a(u)})}function a0(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:rt,baseState:rt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:rt},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function l0(i){var s=a0(i).next.queue;tu(i,s,{},Xn())}function mg(){return yn(_u)}function u0(){return Ue().memoizedState}function c0(){return Ue().memoizedState}function mR(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=Xn();i=is(a);var u=rs(s,i,a);u!==null&&(Qn(u,s,a),Kl(u,s,a)),s={cache:Gd()},i.payload=s;return}s=s.return}}function pR(i,s,a){var u=Xn();a={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},oh(i)?f0(s,a):(a=Vd(i,s,a,u),a!==null&&(Qn(a,i,u),d0(a,s,u)))}function h0(i,s,a){var u=Xn();tu(i,s,a,u)}function tu(i,s,a,u){var f={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(oh(i))f0(s,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var w=s.lastRenderedState,A=p(w,a);if(f.hasEagerState=!0,f.eagerState=A,jn(A,w))return Fc(i,s,f,0),ge===null&&qc(),!1}catch{}finally{}if(a=Vd(i,s,f,u),a!==null)return Qn(a,i,u),d0(a,s,u),!0}return!1}function pg(i,s,a,u){if(u={lane:2,revertLane:Kg(),action:u,hasEagerState:!1,eagerState:null,next:null},oh(i)){if(s)throw Error(r(479))}else s=Vd(i,a,u,2),s!==null&&Qn(s,i,2)}function oh(i){var s=i.alternate;return i===zt||s!==null&&s===zt}function f0(i,s){va=th=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function d0(i,s,a){if((a&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,Qs(i,a)}}var ah={readContext:yn,use:nh,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useLayoutEffect:De,useInsertionEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useSyncExternalStore:De,useId:De,useHostTransitionStatus:De,useFormState:De,useActionState:De,useOptimistic:De,useMemoCache:De,useCacheRefresh:De},g0={readContext:yn,use:nh,useCallback:function(i,s){return Mn().memoizedState=[i,s===void 0?null:s],i},useContext:yn,useEffect:Z_,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,sh(4194308,4,e0.bind(null,s,i),a)},useLayoutEffect:function(i,s){return sh(4194308,4,i,s)},useInsertionEffect:function(i,s){sh(4,2,i,s)},useMemo:function(i,s){var a=Mn();s=s===void 0?null:s;var u=i();if(wo){ke(!0);try{i()}finally{ke(!1)}}return a.memoizedState=[u,s],u},useReducer:function(i,s,a){var u=Mn();if(a!==void 0){var f=a(s);if(wo){ke(!0);try{a(s)}finally{ke(!1)}}}else f=s;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=pR.bind(null,zt,i),[u.memoizedState,i]},useRef:function(i){var s=Mn();return i={current:i},s.memoizedState=i},useState:function(i){i=cg(i);var s=i.queue,a=h0.bind(null,zt,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:fg,useDeferredValue:function(i,s){var a=Mn();return dg(a,i,s)},useTransition:function(){var i=cg(!1);return i=o0.bind(null,zt,i.queue,!0,!1),Mn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var u=zt,f=Mn();if(Jt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),ge===null)throw Error(r(349));(Qt&124)!==0||V_(u,s,a)}f.memoizedState=a;var p={value:a,getSnapshot:s};return f.queue=p,Z_(L_.bind(null,u,p,i),[i]),u.flags|=2048,Ta(9,rh(),P_.bind(null,u,p,a,s),null),a},useId:function(){var i=Mn(),s=ge.identifierPrefix;if(Jt){var a=Rr,u=Ar;a=(u&~(1<<32-Te(u)-1)).toString(32)+a,s="«"+s+"R"+a,a=eh++,0<a&&(s+="H"+a.toString(32)),s+="»"}else a=cR++,s="«"+s+"r"+a.toString(32)+"»";return i.memoizedState=s},useHostTransitionStatus:mg,useFormState:$_,useActionState:$_,useOptimistic:function(i){var s=Mn();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=pg.bind(null,zt,!0,a),a.dispatch=s,[i,s]},useMemoCache:ag,useCacheRefresh:function(){return Mn().memoizedState=mR.bind(null,zt)}},m0={readContext:yn,use:nh,useCallback:i0,useContext:yn,useEffect:W_,useImperativeHandle:n0,useInsertionEffect:J_,useLayoutEffect:t0,useMemo:r0,useReducer:ih,useRef:Q_,useState:function(){return ih(xr)},useDebugValue:fg,useDeferredValue:function(i,s){var a=Ue();return s0(a,oe.memoizedState,i,s)},useTransition:function(){var i=ih(xr)[0],s=Ue().memoizedState;return[typeof i=="boolean"?i:Wl(i),s]},useSyncExternalStore:k_,useId:u0,useHostTransitionStatus:mg,useFormState:Y_,useActionState:Y_,useOptimistic:function(i,s){var a=Ue();return B_(a,oe,i,s)},useMemoCache:ag,useCacheRefresh:c0},yR={readContext:yn,use:nh,useCallback:i0,useContext:yn,useEffect:W_,useImperativeHandle:n0,useInsertionEffect:J_,useLayoutEffect:t0,useMemo:r0,useReducer:ug,useRef:Q_,useState:function(){return ug(xr)},useDebugValue:fg,useDeferredValue:function(i,s){var a=Ue();return oe===null?dg(a,i,s):s0(a,oe.memoizedState,i,s)},useTransition:function(){var i=ug(xr)[0],s=Ue().memoizedState;return[typeof i=="boolean"?i:Wl(i),s]},useSyncExternalStore:k_,useId:u0,useHostTransitionStatus:mg,useFormState:X_,useActionState:X_,useOptimistic:function(i,s){var a=Ue();return oe!==null?B_(a,oe,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:ag,useCacheRefresh:c0},wa=null,eu=0;function lh(i){var s=eu;return eu+=1,wa===null&&(wa=[]),R_(wa,i,s)}function nu(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function uh(i,s){throw s.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function p0(i){var s=i._init;return s(i._payload)}function y0(i){function s(W,G){if(i){var tt=W.deletions;tt===null?(W.deletions=[G],W.flags|=16):tt.push(G)}}function a(W,G){if(!i)return null;for(;G!==null;)s(W,G),G=G.sibling;return null}function u(W){for(var G=new Map;W!==null;)W.key!==null?G.set(W.key,W):G.set(W.index,W),W=W.sibling;return G}function f(W,G){return W=br(W,G),W.index=0,W.sibling=null,W}function p(W,G,tt){return W.index=tt,i?(tt=W.alternate,tt!==null?(tt=tt.index,tt<G?(W.flags|=67108866,G):tt):(W.flags|=67108866,G)):(W.flags|=1048576,G)}function w(W){return i&&W.alternate===null&&(W.flags|=67108866),W}function A(W,G,tt,ht){return G===null||G.tag!==6?(G=Ld(tt,W.mode,ht),G.return=W,G):(G=f(G,tt),G.return=W,G)}function H(W,G,tt,ht){var Tt=tt.type;return Tt===D?ut(W,G,tt.props.children,ht,tt.key):G!==null&&(G.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===b&&p0(Tt)===G.type)?(G=f(G,tt.props),nu(G,tt),G.return=W,G):(G=Gc(tt.type,tt.key,tt.props,null,W.mode,ht),nu(G,tt),G.return=W,G)}function nt(W,G,tt,ht){return G===null||G.tag!==4||G.stateNode.containerInfo!==tt.containerInfo||G.stateNode.implementation!==tt.implementation?(G=Ud(tt,W.mode,ht),G.return=W,G):(G=f(G,tt.children||[]),G.return=W,G)}function ut(W,G,tt,ht,Tt){return G===null||G.tag!==7?(G=go(tt,W.mode,ht,Tt),G.return=W,G):(G=f(G,tt),G.return=W,G)}function ft(W,G,tt){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Ld(""+G,W.mode,tt),G.return=W,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case E:return tt=Gc(G.type,G.key,G.props,null,W.mode,tt),nu(tt,G),tt.return=W,tt;case S:return G=Ud(G,W.mode,tt),G.return=W,G;case b:var ht=G._init;return G=ht(G._payload),ft(W,G,tt)}if(K(G)||U(G))return G=go(G,W.mode,tt,null),G.return=W,G;if(typeof G.then=="function")return ft(W,lh(G),tt);if(G.$$typeof===X)return ft(W,Xc(W,G),tt);uh(W,G)}return null}function it(W,G,tt,ht){var Tt=G!==null?G.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return Tt!==null?null:A(W,G,""+tt,ht);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case E:return tt.key===Tt?H(W,G,tt,ht):null;case S:return tt.key===Tt?nt(W,G,tt,ht):null;case b:return Tt=tt._init,tt=Tt(tt._payload),it(W,G,tt,ht)}if(K(tt)||U(tt))return Tt!==null?null:ut(W,G,tt,ht,null);if(typeof tt.then=="function")return it(W,G,lh(tt),ht);if(tt.$$typeof===X)return it(W,G,Xc(W,tt),ht);uh(W,tt)}return null}function ot(W,G,tt,ht,Tt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return W=W.get(tt)||null,A(G,W,""+ht,Tt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case E:return W=W.get(ht.key===null?tt:ht.key)||null,H(G,W,ht,Tt);case S:return W=W.get(ht.key===null?tt:ht.key)||null,nt(G,W,ht,Tt);case b:var Ht=ht._init;return ht=Ht(ht._payload),ot(W,G,tt,ht,Tt)}if(K(ht)||U(ht))return W=W.get(tt)||null,ut(G,W,ht,Tt,null);if(typeof ht.then=="function")return ot(W,G,tt,lh(ht),Tt);if(ht.$$typeof===X)return ot(W,G,tt,Xc(G,ht),Tt);uh(G,ht)}return null}function Mt(W,G,tt,ht){for(var Tt=null,Ht=null,St=G,xt=G=0,nn=null;St!==null&&xt<tt.length;xt++){St.index>xt?(nn=St,St=null):nn=St.sibling;var Wt=it(W,St,tt[xt],ht);if(Wt===null){St===null&&(St=nn);break}i&&St&&Wt.alternate===null&&s(W,St),G=p(Wt,G,xt),Ht===null?Tt=Wt:Ht.sibling=Wt,Ht=Wt,St=nn}if(xt===tt.length)return a(W,St),Jt&&po(W,xt),Tt;if(St===null){for(;xt<tt.length;xt++)St=ft(W,tt[xt],ht),St!==null&&(G=p(St,G,xt),Ht===null?Tt=St:Ht.sibling=St,Ht=St);return Jt&&po(W,xt),Tt}for(St=u(St);xt<tt.length;xt++)nn=ot(St,W,xt,tt[xt],ht),nn!==null&&(i&&nn.alternate!==null&&St.delete(nn.key===null?xt:nn.key),G=p(nn,G,xt),Ht===null?Tt=nn:Ht.sibling=nn,Ht=nn);return i&&St.forEach(function(Ts){return s(W,Ts)}),Jt&&po(W,xt),Tt}function It(W,G,tt,ht){if(tt==null)throw Error(r(151));for(var Tt=null,Ht=null,St=G,xt=G=0,nn=null,Wt=tt.next();St!==null&&!Wt.done;xt++,Wt=tt.next()){St.index>xt?(nn=St,St=null):nn=St.sibling;var Ts=it(W,St,Wt.value,ht);if(Ts===null){St===null&&(St=nn);break}i&&St&&Ts.alternate===null&&s(W,St),G=p(Ts,G,xt),Ht===null?Tt=Ts:Ht.sibling=Ts,Ht=Ts,St=nn}if(Wt.done)return a(W,St),Jt&&po(W,xt),Tt;if(St===null){for(;!Wt.done;xt++,Wt=tt.next())Wt=ft(W,Wt.value,ht),Wt!==null&&(G=p(Wt,G,xt),Ht===null?Tt=Wt:Ht.sibling=Wt,Ht=Wt);return Jt&&po(W,xt),Tt}for(St=u(St);!Wt.done;xt++,Wt=tt.next())Wt=ot(St,W,xt,Wt.value,ht),Wt!==null&&(i&&Wt.alternate!==null&&St.delete(Wt.key===null?xt:Wt.key),G=p(Wt,G,xt),Ht===null?Tt=Wt:Ht.sibling=Wt,Ht=Wt);return i&&St.forEach(function(_C){return s(W,_C)}),Jt&&po(W,xt),Tt}function le(W,G,tt,ht){if(typeof tt=="object"&&tt!==null&&tt.type===D&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case E:t:{for(var Tt=tt.key;G!==null;){if(G.key===Tt){if(Tt=tt.type,Tt===D){if(G.tag===7){a(W,G.sibling),ht=f(G,tt.props.children),ht.return=W,W=ht;break t}}else if(G.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===b&&p0(Tt)===G.type){a(W,G.sibling),ht=f(G,tt.props),nu(ht,tt),ht.return=W,W=ht;break t}a(W,G);break}else s(W,G);G=G.sibling}tt.type===D?(ht=go(tt.props.children,W.mode,ht,tt.key),ht.return=W,W=ht):(ht=Gc(tt.type,tt.key,tt.props,null,W.mode,ht),nu(ht,tt),ht.return=W,W=ht)}return w(W);case S:t:{for(Tt=tt.key;G!==null;){if(G.key===Tt)if(G.tag===4&&G.stateNode.containerInfo===tt.containerInfo&&G.stateNode.implementation===tt.implementation){a(W,G.sibling),ht=f(G,tt.children||[]),ht.return=W,W=ht;break t}else{a(W,G);break}else s(W,G);G=G.sibling}ht=Ud(tt,W.mode,ht),ht.return=W,W=ht}return w(W);case b:return Tt=tt._init,tt=Tt(tt._payload),le(W,G,tt,ht)}if(K(tt))return Mt(W,G,tt,ht);if(U(tt)){if(Tt=U(tt),typeof Tt!="function")throw Error(r(150));return tt=Tt.call(tt),It(W,G,tt,ht)}if(typeof tt.then=="function")return le(W,G,lh(tt),ht);if(tt.$$typeof===X)return le(W,G,Xc(W,tt),ht);uh(W,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint"?(tt=""+tt,G!==null&&G.tag===6?(a(W,G.sibling),ht=f(G,tt),ht.return=W,W=ht):(a(W,G),ht=Ld(tt,W.mode,ht),ht.return=W,W=ht),w(W)):a(W,G)}return function(W,G,tt,ht){try{eu=0;var Tt=le(W,G,tt,ht);return wa=null,Tt}catch(St){if(St===$l||St===Zc)throw St;var Ht=Gn(29,St,null,W.mode);return Ht.lanes=ht,Ht.return=W,Ht}finally{}}}var Sa=y0(!0),_0=y0(!1),pi=Y(null),er=null;function os(i){var s=i.alternate;st(Ge,Ge.current&1),st(pi,i),er===null&&(s===null||_a.current!==null||s.memoizedState!==null)&&(er=i)}function v0(i){if(i.tag===22){if(st(Ge,Ge.current),st(pi,i),er===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(er=i)}}else as()}function as(){st(Ge,Ge.current),st(pi,pi.current)}function Nr(i){et(pi),er===i&&(er=null),et(Ge)}var Ge=Y(0);function ch(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||om(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function yg(i,s,a,u){s=i.memoizedState,a=a(u,s),a=a==null?s:y({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var _g={enqueueSetState:function(i,s,a){i=i._reactInternals;var u=Xn(),f=is(u);f.payload=s,a!=null&&(f.callback=a),s=rs(i,f,u),s!==null&&(Qn(s,i,u),Kl(s,i,u))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var u=Xn(),f=is(u);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=rs(i,f,u),s!==null&&(Qn(s,i,u),Kl(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=Xn(),u=is(a);u.tag=2,s!=null&&(u.callback=s),s=rs(i,u,a),s!==null&&(Qn(s,i,a),Kl(s,i,a))}};function E0(i,s,a,u,f,p,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,p,w):s.prototype&&s.prototype.isPureReactComponent?!Ul(a,u)||!Ul(f,p):!0}function T0(i,s,a,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==i&&_g.enqueueReplaceState(s,s.state,null)}function So(i,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(i=i.defaultProps){a===s&&(a=y({},a));for(var f in i)a[f]===void 0&&(a[f]=i[f])}return a}var hh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function w0(i){hh(i)}function S0(i){console.error(i)}function b0(i){hh(i)}function fh(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function A0(i,s,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function vg(i,s,a){return a=is(a),a.tag=3,a.payload={element:null},a.callback=function(){fh(i,s)},a}function R0(i){return i=is(i),i.tag=3,i}function C0(i,s,a,u){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;i.payload=function(){return f(p)},i.callback=function(){A0(s,a,u)}}var w=a.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){A0(s,a,u),typeof f!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function _R(i,s,a,u,f){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&Fl(s,a,f,!0),a=pi.current,a!==null){switch(a.tag){case 13:return er===null?Fg():a.alternate===null&&Ce===0&&(Ce=3),a.flags&=-257,a.flags|=65536,a.lanes=f,u===Kd?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),Gg(i,u,f)),!1;case 22:return a.flags|=65536,u===Kd?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),Gg(i,u,f)),!1}throw Error(r(435,a.tag))}return Gg(i,u,f),Fg(),!1}if(Jt)return s=pi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==Hd&&(i=Error(r(422),{cause:u}),ql(fi(i,a)))):(u!==Hd&&(s=Error(r(423),{cause:u}),ql(fi(s,a))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=fi(u,a),f=vg(i.stateNode,u,f),Zd(i,f),Ce!==4&&(Ce=2)),!1;var p=Error(r(520),{cause:u});if(p=fi(p,a),uu===null?uu=[p]:uu.push(p),Ce!==4&&(Ce=2),s===null)return!0;u=fi(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=f&-f,a.lanes|=i,i=vg(a.stateNode,u,i),Zd(a,i),!1;case 1:if(s=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ds===null||!ds.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=R0(f),C0(f,i,a,u),Zd(a,f),!1}a=a.return}while(a!==null);return!1}var I0=Error(r(461)),tn=!1;function un(i,s,a,u){s.child=i===null?_0(s,null,a,u):Sa(s,i.child,a,u)}function x0(i,s,a,u,f){a=a.render;var p=s.ref;if("ref"in u){var w={};for(var A in u)A!=="ref"&&(w[A]=u[A])}else w=u;return Eo(s),u=ng(i,s,a,w,p,f),A=ig(),i!==null&&!tn?(rg(i,s,f),Dr(i,s,f)):(Jt&&A&&zd(s),s.flags|=1,un(i,s,u,f),s.child)}function N0(i,s,a,u,f){if(i===null){var p=a.type;return typeof p=="function"&&!Pd(p)&&p.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=p,D0(i,s,p,u,f)):(i=Gc(a.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(p=i.child,!Cg(i,f)){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:Ul,a(w,u)&&i.ref===s.ref)return Dr(i,s,f)}return s.flags|=1,i=br(p,u),i.ref=s.ref,i.return=s,s.child=i}function D0(i,s,a,u,f){if(i!==null){var p=i.memoizedProps;if(Ul(p,u)&&i.ref===s.ref)if(tn=!1,s.pendingProps=u=p,Cg(i,f))(i.flags&131072)!==0&&(tn=!0);else return s.lanes=i.lanes,Dr(i,s,f)}return Eg(i,s,a,u,f)}function M0(i,s,a){var u=s.pendingProps,f=u.children,p=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|a:a,i!==null){for(f=s.child=i.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return O0(i,s,u,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Qc(s,p!==null?p.cachePool:null),p!==null?D_(s,p):Jd(),v0(s);else return s.lanes=s.childLanes=536870912,O0(i,s,p!==null?p.baseLanes|a:a,a)}else p!==null?(Qc(s,p.cachePool),D_(s,p),as(),s.memoizedState=null):(i!==null&&Qc(s,null),Jd(),as());return un(i,s,f,a),s.child}function O0(i,s,a,u){var f=Yd();return f=f===null?null:{parent:je._currentValue,pool:f},s.memoizedState={baseLanes:a,cachePool:f},i!==null&&Qc(s,null),Jd(),v0(s),i!==null&&Fl(i,s,u,!0),null}function dh(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function Eg(i,s,a,u,f){return Eo(s),a=ng(i,s,a,u,void 0,f),u=ig(),i!==null&&!tn?(rg(i,s,f),Dr(i,s,f)):(Jt&&u&&zd(s),s.flags|=1,un(i,s,a,f),s.child)}function k0(i,s,a,u,f,p){return Eo(s),s.updateQueue=null,a=O_(s,u,a,f),M_(i),u=ig(),i!==null&&!tn?(rg(i,s,p),Dr(i,s,p)):(Jt&&u&&zd(s),s.flags|=1,un(i,s,a,p),s.child)}function V0(i,s,a,u,f){if(Eo(s),s.stateNode===null){var p=da,w=a.contextType;typeof w=="object"&&w!==null&&(p=yn(w)),p=new a(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=_g,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},Xd(s),w=a.contextType,p.context=typeof w=="object"&&w!==null?yn(w):da,p.state=s.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(yg(s,a,w,u),p.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&_g.enqueueReplaceState(p,p.state,null),Ql(s,u,p,f),Xl(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){p=s.stateNode;var A=s.memoizedProps,H=So(a,A);p.props=H;var nt=p.context,ut=a.contextType;w=da,typeof ut=="object"&&ut!==null&&(w=yn(ut));var ft=a.getDerivedStateFromProps;ut=typeof ft=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,ut||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||nt!==w)&&T0(s,p,u,w),ns=!1;var it=s.memoizedState;p.state=it,Ql(s,u,p,f),Xl(),nt=s.memoizedState,A||it!==nt||ns?(typeof ft=="function"&&(yg(s,a,ft,u),nt=s.memoizedState),(H=ns||E0(s,a,H,u,it,nt,w))?(ut||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=nt),p.props=u,p.state=nt,p.context=w,u=H):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,Qd(i,s),w=s.memoizedProps,ut=So(a,w),p.props=ut,ft=s.pendingProps,it=p.context,nt=a.contextType,H=da,typeof nt=="object"&&nt!==null&&(H=yn(nt)),A=a.getDerivedStateFromProps,(nt=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==ft||it!==H)&&T0(s,p,u,H),ns=!1,it=s.memoizedState,p.state=it,Ql(s,u,p,f),Xl();var ot=s.memoizedState;w!==ft||it!==ot||ns||i!==null&&i.dependencies!==null&&Kc(i.dependencies)?(typeof A=="function"&&(yg(s,a,A,u),ot=s.memoizedState),(ut=ns||E0(s,a,ut,u,it,ot,H)||i!==null&&i.dependencies!==null&&Kc(i.dependencies))?(nt||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,ot,H),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,ot,H)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=ot),p.props=u,p.state=ot,p.context=H,u=ut):(typeof p.componentDidUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=1024),u=!1)}return p=u,dh(i,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,i!==null&&u?(s.child=Sa(s,i.child,null,f),s.child=Sa(s,null,a,f)):un(i,s,a,f),s.memoizedState=p.state,i=s.child):i=Dr(i,s,f),i}function P0(i,s,a,u){return Hl(),s.flags|=256,un(i,s,a,u),s.child}var Tg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wg(i){return{baseLanes:i,cachePool:S_()}}function Sg(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=yi),i}function L0(i,s,a){var u=s.pendingProps,f=!1,p=(s.flags&128)!==0,w;if((w=p)||(w=i!==null&&i.memoizedState===null?!1:(Ge.current&2)!==0),w&&(f=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,i===null){if(Jt){if(f?os(s):as(),Jt){var A=Re,H;if(H=A){t:{for(H=A,A=tr;H.nodeType!==8;){if(!A){A=null;break t}if(H=Ni(H.nextSibling),H===null){A=null;break t}}A=H}A!==null?(s.memoizedState={dehydrated:A,treeContext:mo!==null?{id:Ar,overflow:Rr}:null,retryLane:536870912,hydrationErrors:null},H=Gn(18,null,null,0),H.stateNode=A,H.return=s,s.child=H,xn=s,Re=null,H=!0):H=!1}H||_o(s)}if(A=s.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return om(A)?s.lanes=32:s.lanes=536870912,null;Nr(s)}return A=u.children,u=u.fallback,f?(as(),f=s.mode,A=gh({mode:"hidden",children:A},f),u=go(u,f,a,null),A.return=s,u.return=s,A.sibling=u,s.child=A,f=s.child,f.memoizedState=wg(a),f.childLanes=Sg(i,w,a),s.memoizedState=Tg,u):(os(s),bg(s,A))}if(H=i.memoizedState,H!==null&&(A=H.dehydrated,A!==null)){if(p)s.flags&256?(os(s),s.flags&=-257,s=Ag(i,s,a)):s.memoizedState!==null?(as(),s.child=i.child,s.flags|=128,s=null):(as(),f=u.fallback,A=s.mode,u=gh({mode:"visible",children:u.children},A),f=go(f,A,a,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,Sa(s,i.child,null,a),u=s.child,u.memoizedState=wg(a),u.childLanes=Sg(i,w,a),s.memoizedState=Tg,s=f);else if(os(s),om(A)){if(w=A.nextSibling&&A.nextSibling.dataset,w)var nt=w.dgst;w=nt,u=Error(r(419)),u.stack="",u.digest=w,ql({value:u,source:null,stack:null}),s=Ag(i,s,a)}else if(tn||Fl(i,s,a,!1),w=(a&i.childLanes)!==0,tn||w){if(w=ge,w!==null&&(u=a&-a,u=(u&42)!==0?1:Bi(u),u=(u&(w.suspendedLanes|a))!==0?0:u,u!==0&&u!==H.retryLane))throw H.retryLane=u,fa(i,u),Qn(w,i,u),I0;A.data==="$?"||Fg(),s=Ag(i,s,a)}else A.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=H.treeContext,Re=Ni(A.nextSibling),xn=s,Jt=!0,yo=null,tr=!1,i!==null&&(gi[mi++]=Ar,gi[mi++]=Rr,gi[mi++]=mo,Ar=i.id,Rr=i.overflow,mo=s),s=bg(s,u.children),s.flags|=4096);return s}return f?(as(),f=u.fallback,A=s.mode,H=i.child,nt=H.sibling,u=br(H,{mode:"hidden",children:u.children}),u.subtreeFlags=H.subtreeFlags&65011712,nt!==null?f=br(nt,f):(f=go(f,A,a,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,A=i.child.memoizedState,A===null?A=wg(a):(H=A.cachePool,H!==null?(nt=je._currentValue,H=H.parent!==nt?{parent:nt,pool:nt}:H):H=S_(),A={baseLanes:A.baseLanes|a,cachePool:H}),f.memoizedState=A,f.childLanes=Sg(i,w,a),s.memoizedState=Tg,u):(os(s),a=i.child,i=a.sibling,a=br(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,i!==null&&(w=s.deletions,w===null?(s.deletions=[i],s.flags|=16):w.push(i)),s.child=a,s.memoizedState=null,a)}function bg(i,s){return s=gh({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function gh(i,s){return i=Gn(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Ag(i,s,a){return Sa(s,i.child,null,a),i=bg(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function U0(i,s,a){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),Fd(i.return,s,a)}function Rg(i,s,a,u,f){var p=i.memoizedState;p===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:f}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=a,p.tailMode=f)}function z0(i,s,a){var u=s.pendingProps,f=u.revealOrder,p=u.tail;if(un(i,s,u.children,a),u=Ge.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&U0(i,a,s);else if(i.tag===19)U0(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(st(Ge,u),f){case"forwards":for(a=s.child,f=null;a!==null;)i=a.alternate,i!==null&&ch(i)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Rg(s,!1,f,a,p);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&ch(i)===null){s.child=f;break}i=f.sibling,f.sibling=a,a=f,f=i}Rg(s,!0,a,null,p);break;case"together":Rg(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Dr(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),fs|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(Fl(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,a=br(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=br(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function Cg(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Kc(i)))}function vR(i,s,a){switch(s.tag){case 3:At(s,s.stateNode.containerInfo),es(s,je,i.memoizedState.cache),Hl();break;case 27:case 5:Pt(s);break;case 4:At(s,s.stateNode.containerInfo);break;case 10:es(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(os(s),s.flags|=128,null):(a&s.child.childLanes)!==0?L0(i,s,a):(os(s),i=Dr(i,s,a),i!==null?i.sibling:null);os(s);break;case 19:var f=(i.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(Fl(i,s,a,!1),u=(a&s.childLanes)!==0),f){if(u)return z0(i,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),st(Ge,Ge.current),u)break;return null;case 22:case 23:return s.lanes=0,M0(i,s,a);case 24:es(s,je,i.memoizedState.cache)}return Dr(i,s,a)}function B0(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)tn=!0;else{if(!Cg(i,a)&&(s.flags&128)===0)return tn=!1,vR(i,s,a);tn=(i.flags&131072)!==0}else tn=!1,Jt&&(s.flags&1048576)!==0&&p_(s,Yc,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")Pd(u)?(i=So(u,i),s.tag=1,s=V0(null,s,u,i,a)):(s.tag=0,s=Eg(null,s,u,i,a));else{if(u!=null){if(f=u.$$typeof,f===z){s.tag=11,s=x0(null,s,u,i,a);break t}else if(f===x){s.tag=14,s=N0(null,s,u,i,a);break t}}throw s=k(u)||u,Error(r(306,s,""))}}return s;case 0:return Eg(i,s,s.type,s.pendingProps,a);case 1:return u=s.type,f=So(u,s.pendingProps),V0(i,s,u,f,a);case 3:t:{if(At(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;f=p.element,Qd(i,s),Ql(s,u,null,a);var w=s.memoizedState;if(u=w.cache,es(s,je,u),u!==p.cache&&jd(s,[je],a,!0),Xl(),u=w.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=P0(i,s,u,a);break t}else if(u!==f){f=fi(Error(r(424)),s),ql(f),s=P0(i,s,u,a);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Re=Ni(i.firstChild),xn=s,Jt=!0,yo=null,tr=!0,a=_0(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Hl(),u===f){s=Dr(i,s,a);break t}un(i,s,u,a)}s=s.child}return s;case 26:return dh(i,s),i===null?(a=jv(s.type,null,s.pendingProps,null))?s.memoizedState=a:Jt||(a=s.type,i=s.pendingProps,u=Ih(yt.current).createElement(a),u[Ne]=s,u[Ae]=i,hn(u,a,i),we(u),s.stateNode=u):s.memoizedState=jv(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Pt(s),i===null&&Jt&&(u=s.stateNode=Hv(s.type,s.pendingProps,yt.current),xn=s,tr=!0,f=Re,ps(s.type)?(am=f,Re=Ni(u.firstChild)):Re=f),un(i,s,s.pendingProps.children,a),dh(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Jt&&((f=u=Re)&&(u=YR(u,s.type,s.pendingProps,tr),u!==null?(s.stateNode=u,xn=s,Re=Ni(u.firstChild),tr=!1,f=!0):f=!1),f||_o(s)),Pt(s),f=s.type,p=s.pendingProps,w=i!==null?i.memoizedProps:null,u=p.children,im(f,p)?u=null:w!==null&&im(f,w)&&(s.flags|=32),s.memoizedState!==null&&(f=ng(i,s,hR,null,null,a),_u._currentValue=f),dh(i,s),un(i,s,u,a),s.child;case 6:return i===null&&Jt&&((i=a=Re)&&(a=KR(a,s.pendingProps,tr),a!==null?(s.stateNode=a,xn=s,Re=null,i=!0):i=!1),i||_o(s)),null;case 13:return L0(i,s,a);case 4:return At(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Sa(s,null,u,a):un(i,s,u,a),s.child;case 11:return x0(i,s,s.type,s.pendingProps,a);case 7:return un(i,s,s.pendingProps,a),s.child;case 8:return un(i,s,s.pendingProps.children,a),s.child;case 12:return un(i,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,es(s,s.type,u.value),un(i,s,u.children,a),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,Eo(s),f=yn(f),u=u(f),s.flags|=1,un(i,s,u,a),s.child;case 14:return N0(i,s,s.type,s.pendingProps,a);case 15:return D0(i,s,s.type,s.pendingProps,a);case 19:return z0(i,s,a);case 31:return u=s.pendingProps,a=s.mode,u={mode:u.mode,children:u.children},i===null?(a=gh(u,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=br(i.child,u),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return M0(i,s,a);case 24:return Eo(s),u=yn(je),i===null?(f=Yd(),f===null&&(f=ge,p=Gd(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),s.memoizedState={parent:u,cache:f},Xd(s),es(s,je,f)):((i.lanes&a)!==0&&(Qd(i,s),Ql(s,null,null,a),Xl()),f=i.memoizedState,p=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),es(s,je,u)):(u=p.cache,es(s,je,u),u!==f.cache&&jd(s,[je],a,!0))),un(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Mr(i){i.flags|=4}function H0(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Xv(s)){if(s=pi.current,s!==null&&((Qt&4194048)===Qt?er!==null:(Qt&62914560)!==Qt&&(Qt&536870912)===0||s!==er))throw Yl=Kd,b_;i.flags|=8192}}function mh(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?bi():536870912,i.lanes|=s,Ca|=s)}function iu(i,s){if(!Jt)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Se(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(s)for(var f=i.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=a,s}function ER(i,s,a){var u=s.pendingProps;switch(Bd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Se(s),null;case 1:return Se(s),null;case 3:return a=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ir(je),Vt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Bl(s)?Mr(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,v_())),Se(s),null;case 26:return a=s.memoizedState,i===null?(Mr(s),a!==null?(Se(s),H0(s,a)):(Se(s),s.flags&=-16777217)):a?a!==i.memoizedState?(Mr(s),Se(s),H0(s,a)):(Se(s),s.flags&=-16777217):(i.memoizedProps!==u&&Mr(s),Se(s),s.flags&=-16777217),null;case 27:ue(s),a=yt.current;var f=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Mr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return Se(s),null}i=ct.current,Bl(s)?y_(s):(i=Hv(f,u,a),s.stateNode=i,Mr(s))}return Se(s),null;case 5:if(ue(s),a=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Mr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return Se(s),null}if(i=ct.current,Bl(s))y_(s);else{switch(f=Ih(yt.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?f.createElement(a,{is:u.is}):f.createElement(a)}}i[Ne]=s,i[Ae]=u;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=i;t:switch(hn(i,a,u),a){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Mr(s)}}return Se(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Mr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=yt.current,Bl(s)){if(i=s.stateNode,a=s.memoizedProps,u=null,f=xn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[Ne]=s,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||kv(i.nodeValue,a)),i||_o(s)}else i=Ih(i).createTextNode(u),i[Ne]=s,s.stateNode=i}return Se(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=Bl(s),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ne]=s}else Hl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Se(s),f=!1}else f=v_(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Nr(s),s):(Nr(s),null)}if(Nr(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=u!==null,i=i!==null&&i.memoizedState!==null,a){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return a!==i&&a&&(s.child.flags|=8192),mh(s,s.updateQueue),Se(s),null;case 4:return Vt(),i===null&&Wg(s.stateNode.containerInfo),Se(s),null;case 10:return Ir(s.type),Se(s),null;case 19:if(et(Ge),f=s.memoizedState,f===null)return Se(s),null;if(u=(s.flags&128)!==0,p=f.rendering,p===null)if(u)iu(f,!1);else{if(Ce!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(p=ch(i),p!==null){for(s.flags|=128,iu(f,!1),i=p.updateQueue,s.updateQueue=i,mh(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)m_(a,i),a=a.sibling;return st(Ge,Ge.current&1|2),s.child}i=i.sibling}f.tail!==null&&Lt()>_h&&(s.flags|=128,u=!0,iu(f,!1),s.lanes=4194304)}else{if(!u)if(i=ch(p),i!==null){if(s.flags|=128,u=!0,i=i.updateQueue,s.updateQueue=i,mh(s,i),iu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Jt)return Se(s),null}else 2*Lt()-f.renderingStartTime>_h&&a!==536870912&&(s.flags|=128,u=!0,iu(f,!1),s.lanes=4194304);f.isBackwards?(p.sibling=s.child,s.child=p):(i=f.last,i!==null?i.sibling=p:s.child=p,f.last=p)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Lt(),s.sibling=null,i=Ge.current,st(Ge,u?i&1|2:i&1),s):(Se(s),null);case 22:case 23:return Nr(s),tg(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(Se(s),s.subtreeFlags&6&&(s.flags|=8192)):Se(s),a=s.updateQueue,a!==null&&mh(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),i!==null&&et(To),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Ir(je),Se(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function TR(i,s){switch(Bd(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Ir(je),Vt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return ue(s),null;case 13:if(Nr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Hl()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return et(Ge),null;case 4:return Vt(),null;case 10:return Ir(s.type),null;case 22:case 23:return Nr(s),tg(),i!==null&&et(To),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Ir(je),null;case 25:return null;default:return null}}function q0(i,s){switch(Bd(s),s.tag){case 3:Ir(je),Vt();break;case 26:case 27:case 5:ue(s);break;case 4:Vt();break;case 13:Nr(s);break;case 19:et(Ge);break;case 10:Ir(s.type);break;case 22:case 23:Nr(s),tg(),i!==null&&et(To);break;case 24:Ir(je)}}function ru(i,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var f=u.next;a=f;do{if((a.tag&i)===i){u=void 0;var p=a.create,w=a.inst;u=p(),w.destroy=u}a=a.next}while(a!==f)}}catch(A){fe(s,s.return,A)}}function ls(i,s,a){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&i)===i){var w=u.inst,A=w.destroy;if(A!==void 0){w.destroy=void 0,f=s;var H=a,nt=A;try{nt()}catch(ut){fe(f,H,ut)}}}u=u.next}while(u!==p)}}catch(ut){fe(s,s.return,ut)}}function F0(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{N_(s,a)}catch(u){fe(i,i.return,u)}}}function j0(i,s,a){a.props=So(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){fe(i,s,u)}}function su(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(f){fe(i,s,f)}}function nr(i,s){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(f){fe(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){fe(i,s,f)}else a.current=null}function G0(i){var s=i.type,a=i.memoizedProps,u=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break t;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(f){fe(i,i.return,f)}}function Ig(i,s,a){try{var u=i.stateNode;qR(u,i.type,a,s),u[Ae]=s}catch(f){fe(i,i.return,f)}}function $0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ps(i.type)||i.tag===4}function xg(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||$0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ps(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ng(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Ch));else if(u!==4&&(u===27&&ps(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(Ng(i,s,a),i=i.sibling;i!==null;)Ng(i,s,a),i=i.sibling}function ph(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(u!==4&&(u===27&&ps(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(ph(i,s,a),i=i.sibling;i!==null;)ph(i,s,a),i=i.sibling}function Y0(i){var s=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);hn(s,u,a),s[Ne]=i,s[Ae]=a}catch(p){fe(i,i.return,p)}}var Or=!1,Me=!1,Dg=!1,K0=typeof WeakSet=="function"?WeakSet:Set,en=null;function wR(i,s){if(i=i.containerInfo,em=kh,i=s_(i),xd(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else t:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break t}var w=0,A=-1,H=-1,nt=0,ut=0,ft=i,it=null;e:for(;;){for(var ot;ft!==a||f!==0&&ft.nodeType!==3||(A=w+f),ft!==p||u!==0&&ft.nodeType!==3||(H=w+u),ft.nodeType===3&&(w+=ft.nodeValue.length),(ot=ft.firstChild)!==null;)it=ft,ft=ot;for(;;){if(ft===i)break e;if(it===a&&++nt===f&&(A=w),it===p&&++ut===u&&(H=w),(ot=ft.nextSibling)!==null)break;ft=it,it=ft.parentNode}ft=ot}a=A===-1||H===-1?null:{start:A,end:H}}else a=null}a=a||{start:0,end:0}}else a=null;for(nm={focusedElem:i,selectionRange:a},kh=!1,en=s;en!==null;)if(s=en,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,en=i;else for(;en!==null;){switch(s=en,p=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,a=s,f=p.memoizedProps,p=p.memoizedState,u=a.stateNode;try{var Mt=So(a.type,f,a.elementType===a.type);i=u.getSnapshotBeforeUpdate(Mt,p),u.__reactInternalSnapshotBeforeUpdate=i}catch(It){fe(a,a.return,It)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)sm(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":sm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,en=i;break}en=s.return}}function X0(i,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:us(i,a),u&4&&ru(5,a);break;case 1:if(us(i,a),u&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(w){fe(a,a.return,w)}else{var f=So(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(w){fe(a,a.return,w)}}u&64&&F0(a),u&512&&su(a,a.return);break;case 3:if(us(i,a),u&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{N_(i,s)}catch(w){fe(a,a.return,w)}}break;case 27:s===null&&u&4&&Y0(a);case 26:case 5:us(i,a),s===null&&u&4&&G0(a),u&512&&su(a,a.return);break;case 12:us(i,a);break;case 13:us(i,a),u&4&&W0(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=DR.bind(null,a),XR(i,a))));break;case 22:if(u=a.memoizedState!==null||Or,!u){s=s!==null&&s.memoizedState!==null||Me,f=Or;var p=Me;Or=u,(Me=s)&&!p?cs(i,a,(a.subtreeFlags&8772)!==0):us(i,a),Or=f,Me=p}break;case 30:break;default:us(i,a)}}function Q0(i){var s=i.alternate;s!==null&&(i.alternate=null,Q0(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Fi(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ve=null,On=!1;function kr(i,s,a){for(a=a.child;a!==null;)Z0(i,s,a),a=a.sibling}function Z0(i,s,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(te,a)}catch{}switch(a.tag){case 26:Me||nr(a,s),kr(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Me||nr(a,s);var u=ve,f=On;ps(a.type)&&(ve=a.stateNode,On=!1),kr(i,s,a),gu(a.stateNode),ve=u,On=f;break;case 5:Me||nr(a,s);case 6:if(u=ve,f=On,ve=null,kr(i,s,a),ve=u,On=f,ve!==null)if(On)try{(ve.nodeType===9?ve.body:ve.nodeName==="HTML"?ve.ownerDocument.body:ve).removeChild(a.stateNode)}catch(p){fe(a,s,p)}else try{ve.removeChild(a.stateNode)}catch(p){fe(a,s,p)}break;case 18:ve!==null&&(On?(i=ve,zv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),wu(i)):zv(ve,a.stateNode));break;case 4:u=ve,f=On,ve=a.stateNode.containerInfo,On=!0,kr(i,s,a),ve=u,On=f;break;case 0:case 11:case 14:case 15:Me||ls(2,a,s),Me||ls(4,a,s),kr(i,s,a);break;case 1:Me||(nr(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&j0(a,s,u)),kr(i,s,a);break;case 21:kr(i,s,a);break;case 22:Me=(u=Me)||a.memoizedState!==null,kr(i,s,a),Me=u;break;default:kr(i,s,a)}}function W0(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{wu(i)}catch(a){fe(s,s.return,a)}}function SR(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new K0),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new K0),s;default:throw Error(r(435,i.tag))}}function Mg(i,s){var a=SR(i);s.forEach(function(u){var f=MR.bind(null,i,u);a.has(u)||(a.add(u),u.then(f,f))})}function $n(i,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var f=a[u],p=i,w=s,A=w;t:for(;A!==null;){switch(A.tag){case 27:if(ps(A.type)){ve=A.stateNode,On=!1;break t}break;case 5:ve=A.stateNode,On=!1;break t;case 3:case 4:ve=A.stateNode.containerInfo,On=!0;break t}A=A.return}if(ve===null)throw Error(r(160));Z0(p,w,f),ve=null,On=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)J0(s,i),s=s.sibling}var xi=null;function J0(i,s){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:$n(s,i),Yn(i),u&4&&(ls(3,i,i.return),ru(3,i),ls(5,i,i.return));break;case 1:$n(s,i),Yn(i),u&512&&(Me||a===null||nr(a,a.return)),u&64&&Or&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var f=xi;if($n(s,i),Yn(i),u&512&&(Me||a===null||nr(a,a.return)),u&4){var p=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){t:{u=i.type,a=i.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[mr]||p[Ne]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),hn(p,u,a),p[Ne]=i,we(p),u=p;break t;case"link":var w=Yv("link","href",f).get(u+(a.href||""));if(w){for(var A=0;A<w.length;A++)if(p=w[A],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){w.splice(A,1);break e}}p=f.createElement(u),hn(p,u,a),f.head.appendChild(p);break;case"meta":if(w=Yv("meta","content",f).get(u+(a.content||""))){for(A=0;A<w.length;A++)if(p=w[A],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){w.splice(A,1);break e}}p=f.createElement(u),hn(p,u,a),f.head.appendChild(p);break;default:throw Error(r(468,u))}p[Ne]=i,we(p),u=p}i.stateNode=u}else Kv(f,i.type,i.stateNode);else i.stateNode=$v(f,u,i.memoizedProps);else p!==u?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,u===null?Kv(f,i.type,i.stateNode):$v(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Ig(i,i.memoizedProps,a.memoizedProps)}break;case 27:$n(s,i),Yn(i),u&512&&(Me||a===null||nr(a,a.return)),a!==null&&u&4&&Ig(i,i.memoizedProps,a.memoizedProps);break;case 5:if($n(s,i),Yn(i),u&512&&(Me||a===null||nr(a,a.return)),i.flags&32){f=i.stateNode;try{li(f,"")}catch(ot){fe(i,i.return,ot)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,Ig(i,f,a!==null?a.memoizedProps:f)),u&1024&&(Dg=!0);break;case 6:if($n(s,i),Yn(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(ot){fe(i,i.return,ot)}}break;case 3:if(Dh=null,f=xi,xi=xh(s.containerInfo),$n(s,i),xi=f,Yn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{wu(s.containerInfo)}catch(ot){fe(i,i.return,ot)}Dg&&(Dg=!1,tv(i));break;case 4:u=xi,xi=xh(i.stateNode.containerInfo),$n(s,i),Yn(i),xi=u;break;case 12:$n(s,i),Yn(i);break;case 13:$n(s,i),Yn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ug=Lt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Mg(i,u)));break;case 22:f=i.memoizedState!==null;var H=a!==null&&a.memoizedState!==null,nt=Or,ut=Me;if(Or=nt||f,Me=ut||H,$n(s,i),Me=ut,Or=nt,Yn(i),u&8192)t:for(s=i.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||H||Or||Me||bo(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){H=a=s;try{if(p=H.stateNode,f)w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{A=H.stateNode;var ft=H.memoizedProps.style,it=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;A.style.display=it==null||typeof it=="boolean"?"":(""+it).trim()}}catch(ot){fe(H,H.return,ot)}}}else if(s.tag===6){if(a===null){H=s;try{H.stateNode.nodeValue=f?"":H.memoizedProps}catch(ot){fe(H,H.return,ot)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Mg(i,a))));break;case 19:$n(s,i),Yn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Mg(i,u)));break;case 30:break;case 21:break;default:$n(s,i),Yn(i)}}function Yn(i){var s=i.flags;if(s&2){try{for(var a,u=i.return;u!==null;){if($0(u)){a=u;break}u=u.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,p=xg(i);ph(i,p,f);break;case 5:var w=a.stateNode;a.flags&32&&(li(w,""),a.flags&=-33);var A=xg(i);ph(i,A,w);break;case 3:case 4:var H=a.stateNode.containerInfo,nt=xg(i);Ng(i,nt,H);break;default:throw Error(r(161))}}catch(ut){fe(i,i.return,ut)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function tv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;tv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function us(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)X0(i,s.alternate,s),s=s.sibling}function bo(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:ls(4,s,s.return),bo(s);break;case 1:nr(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&j0(s,s.return,a),bo(s);break;case 27:gu(s.stateNode);case 26:case 5:nr(s,s.return),bo(s);break;case 22:s.memoizedState===null&&bo(s);break;case 30:bo(s);break;default:bo(s)}i=i.sibling}}function cs(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=i,p=s,w=p.flags;switch(p.tag){case 0:case 11:case 15:cs(f,p,a),ru(4,p);break;case 1:if(cs(f,p,a),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(nt){fe(u,u.return,nt)}if(u=p,f=u.updateQueue,f!==null){var A=u.stateNode;try{var H=f.shared.hiddenCallbacks;if(H!==null)for(f.shared.hiddenCallbacks=null,f=0;f<H.length;f++)x_(H[f],A)}catch(nt){fe(u,u.return,nt)}}a&&w&64&&F0(p),su(p,p.return);break;case 27:Y0(p);case 26:case 5:cs(f,p,a),a&&u===null&&w&4&&G0(p),su(p,p.return);break;case 12:cs(f,p,a);break;case 13:cs(f,p,a),a&&w&4&&W0(f,p);break;case 22:p.memoizedState===null&&cs(f,p,a),su(p,p.return);break;case 30:break;default:cs(f,p,a)}s=s.sibling}}function Og(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&jl(a))}function kg(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&jl(i))}function ir(i,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ev(i,s,a,u),s=s.sibling}function ev(i,s,a,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:ir(i,s,a,u),f&2048&&ru(9,s);break;case 1:ir(i,s,a,u);break;case 3:ir(i,s,a,u),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&jl(i)));break;case 12:if(f&2048){ir(i,s,a,u),i=s.stateNode;try{var p=s.memoizedProps,w=p.id,A=p.onPostCommit;typeof A=="function"&&A(w,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(H){fe(s,s.return,H)}}else ir(i,s,a,u);break;case 13:ir(i,s,a,u);break;case 23:break;case 22:p=s.stateNode,w=s.alternate,s.memoizedState!==null?p._visibility&2?ir(i,s,a,u):ou(i,s):p._visibility&2?ir(i,s,a,u):(p._visibility|=2,ba(i,s,a,u,(s.subtreeFlags&10256)!==0)),f&2048&&Og(w,s);break;case 24:ir(i,s,a,u),f&2048&&kg(s.alternate,s);break;default:ir(i,s,a,u)}}function ba(i,s,a,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=i,w=s,A=a,H=u,nt=w.flags;switch(w.tag){case 0:case 11:case 15:ba(p,w,A,H,f),ru(8,w);break;case 23:break;case 22:var ut=w.stateNode;w.memoizedState!==null?ut._visibility&2?ba(p,w,A,H,f):ou(p,w):(ut._visibility|=2,ba(p,w,A,H,f)),f&&nt&2048&&Og(w.alternate,w);break;case 24:ba(p,w,A,H,f),f&&nt&2048&&kg(w.alternate,w);break;default:ba(p,w,A,H,f)}s=s.sibling}}function ou(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,u=s,f=u.flags;switch(u.tag){case 22:ou(a,u),f&2048&&Og(u.alternate,u);break;case 24:ou(a,u),f&2048&&kg(u.alternate,u);break;default:ou(a,u)}s=s.sibling}}var au=8192;function Aa(i){if(i.subtreeFlags&au)for(i=i.child;i!==null;)nv(i),i=i.sibling}function nv(i){switch(i.tag){case 26:Aa(i),i.flags&au&&i.memoizedState!==null&&lC(xi,i.memoizedState,i.memoizedProps);break;case 5:Aa(i);break;case 3:case 4:var s=xi;xi=xh(i.stateNode.containerInfo),Aa(i),xi=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=au,au=16777216,Aa(i),au=s):Aa(i));break;default:Aa(i)}}function iv(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function lu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];en=u,sv(u,i)}iv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)rv(i),i=i.sibling}function rv(i){switch(i.tag){case 0:case 11:case 15:lu(i),i.flags&2048&&ls(9,i,i.return);break;case 3:lu(i);break;case 12:lu(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,yh(i)):lu(i);break;default:lu(i)}}function yh(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];en=u,sv(u,i)}iv(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:ls(8,s,s.return),yh(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,yh(s));break;default:yh(s)}i=i.sibling}}function sv(i,s){for(;en!==null;){var a=en;switch(a.tag){case 0:case 11:case 15:ls(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:jl(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,en=u;else t:for(a=i;en!==null;){u=en;var f=u.sibling,p=u.return;if(Q0(u),u===a){en=null;break t}if(f!==null){f.return=p,en=f;break t}en=p}}}var bR={getCacheForType:function(i){var s=yn(je),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a}},AR=typeof WeakMap=="function"?WeakMap:Map,ie=0,ge=null,jt=null,Qt=0,re=0,Kn=null,hs=!1,Ra=!1,Vg=!1,Vr=0,Ce=0,fs=0,Ao=0,Pg=0,yi=0,Ca=0,uu=null,kn=null,Lg=!1,Ug=0,_h=1/0,vh=null,ds=null,cn=0,gs=null,Ia=null,xa=0,zg=0,Bg=null,ov=null,cu=0,Hg=null;function Xn(){if((ie&2)!==0&&Qt!==0)return Qt&-Qt;if(O.T!==null){var i=pa;return i!==0?i:Kg()}return Hi()}function av(){yi===0&&(yi=(Qt&536870912)===0||Jt?gr():536870912);var i=pi.current;return i!==null&&(i.flags|=32),yi}function Qn(i,s,a){(i===ge&&(re===2||re===9)||i.cancelPendingCommit!==null)&&(Na(i,0),ms(i,Qt,yi,!1)),ni(i,a),((ie&2)===0||i!==ge)&&(i===ge&&((ie&2)===0&&(Ao|=a),Ce===4&&ms(i,Qt,yi,!1)),rr(i))}function lv(i,s,a){if((ie&6)!==0)throw Error(r(327));var u=!a&&(s&124)===0&&(s&i.expiredLanes)===0||Rn(i,s),f=u?IR(i,s):jg(i,s,!0),p=u;do{if(f===0){Ra&&!u&&ms(i,s,0,!1);break}else{if(a=i.current.alternate,p&&!RR(a)){f=jg(i,s,!1),p=!1;continue}if(f===2){if(p=s,i.errorRecoveryDisabledLanes&p)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;t:{var A=i;f=uu;var H=A.current.memoizedState.isDehydrated;if(H&&(Na(A,w).flags|=256),w=jg(A,w,!1),w!==2){if(Vg&&!H){A.errorRecoveryDisabledLanes|=p,Ao|=p,f=4;break t}p=kn,kn=f,p!==null&&(kn===null?kn=p:kn.push.apply(kn,p))}f=w}if(p=!1,f!==2)continue}}if(f===1){Na(i,0),ms(i,s,0,!0);break}t:{switch(u=i,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:ms(u,s,yi,!hs);break t;case 2:kn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Ug+300-Lt(),10<f)){if(ms(u,s,yi,!hs),on(u,0,!0)!==0)break t;u.timeoutHandle=Lv(uv.bind(null,u,a,kn,vh,Lg,s,yi,Ao,Ca,hs,p,2,-0,0),f);break t}uv(u,a,kn,vh,Lg,s,yi,Ao,Ca,hs,p,0,-0,0)}}break}while(!0);rr(i)}function uv(i,s,a,u,f,p,w,A,H,nt,ut,ft,it,ot){if(i.timeoutHandle=-1,ft=s.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(yu={stylesheets:null,count:0,unsuspend:aC},nv(s),ft=uC(),ft!==null)){i.cancelPendingCommit=ft(pv.bind(null,i,s,p,a,u,f,w,A,H,ut,1,it,ot)),ms(i,p,w,!nt);return}pv(i,s,p,a,u,f,w,A,H)}function RR(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var f=a[u],p=f.getSnapshot;f=f.value;try{if(!jn(p(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ms(i,s,a,u){s&=~Pg,s&=~Ao,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var f=s;0<f;){var p=31-Te(f),w=1<<p;u[p]=-1,f&=~w}a!==0&&ii(i,a,s)}function Eh(){return(ie&6)===0?(hu(0),!1):!0}function qg(){if(jt!==null){if(re===0)var i=jt.return;else i=jt,Cr=vo=null,sg(i),wa=null,eu=0,i=jt;for(;i!==null;)q0(i.alternate,i),i=i.return;jt=null}}function Na(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,jR(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),qg(),ge=i,jt=a=br(i.current,null),Qt=s,re=0,Kn=null,hs=!1,Ra=Rn(i,s),Vg=!1,Ca=yi=Pg=Ao=fs=Ce=0,kn=uu=null,Lg=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var f=31-Te(u),p=1<<f;s|=i[f],u&=~p}return Vr=s,qc(),a}function cv(i,s){zt=null,O.H=ah,s===$l||s===Zc?(s=C_(),re=3):s===b_?(s=C_(),re=4):re=s===I0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Kn=s,jt===null&&(Ce=1,fh(i,fi(s,i.current)))}function hv(){var i=O.H;return O.H=ah,i===null?ah:i}function fv(){var i=O.A;return O.A=bR,i}function Fg(){Ce=4,hs||(Qt&4194048)!==Qt&&pi.current!==null||(Ra=!0),(fs&134217727)===0&&(Ao&134217727)===0||ge===null||ms(ge,Qt,yi,!1)}function jg(i,s,a){var u=ie;ie|=2;var f=hv(),p=fv();(ge!==i||Qt!==s)&&(vh=null,Na(i,s)),s=!1;var w=Ce;t:do try{if(re!==0&&jt!==null){var A=jt,H=Kn;switch(re){case 8:qg(),w=6;break t;case 3:case 2:case 9:case 6:pi.current===null&&(s=!0);var nt=re;if(re=0,Kn=null,Da(i,A,H,nt),a&&Ra){w=0;break t}break;default:nt=re,re=0,Kn=null,Da(i,A,H,nt)}}CR(),w=Ce;break}catch(ut){cv(i,ut)}while(!0);return s&&i.shellSuspendCounter++,Cr=vo=null,ie=u,O.H=f,O.A=p,jt===null&&(ge=null,Qt=0,qc()),w}function CR(){for(;jt!==null;)dv(jt)}function IR(i,s){var a=ie;ie|=2;var u=hv(),f=fv();ge!==i||Qt!==s?(vh=null,_h=Lt()+500,Na(i,s)):Ra=Rn(i,s);t:do try{if(re!==0&&jt!==null){s=jt;var p=Kn;e:switch(re){case 1:re=0,Kn=null,Da(i,s,p,1);break;case 2:case 9:if(A_(p)){re=0,Kn=null,gv(s);break}s=function(){re!==2&&re!==9||ge!==i||(re=7),rr(i)},p.then(s,s);break t;case 3:re=7;break t;case 4:re=5;break t;case 7:A_(p)?(re=0,Kn=null,gv(s)):(re=0,Kn=null,Da(i,s,p,7));break;case 5:var w=null;switch(jt.tag){case 26:w=jt.memoizedState;case 5:case 27:var A=jt;if(!w||Xv(w)){re=0,Kn=null;var H=A.sibling;if(H!==null)jt=H;else{var nt=A.return;nt!==null?(jt=nt,Th(nt)):jt=null}break e}}re=0,Kn=null,Da(i,s,p,5);break;case 6:re=0,Kn=null,Da(i,s,p,6);break;case 8:qg(),Ce=6;break t;default:throw Error(r(462))}}xR();break}catch(ut){cv(i,ut)}while(!0);return Cr=vo=null,O.H=u,O.A=f,ie=a,jt!==null?0:(ge=null,Qt=0,qc(),Ce)}function xR(){for(;jt!==null&&!he();)dv(jt)}function dv(i){var s=B0(i.alternate,i,Vr);i.memoizedProps=i.pendingProps,s===null?Th(i):jt=s}function gv(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=k0(a,s,s.pendingProps,s.type,void 0,Qt);break;case 11:s=k0(a,s,s.pendingProps,s.type.render,s.ref,Qt);break;case 5:sg(s);default:q0(a,s),s=jt=m_(s,Vr),s=B0(a,s,Vr)}i.memoizedProps=i.pendingProps,s===null?Th(i):jt=s}function Da(i,s,a,u){Cr=vo=null,sg(s),wa=null,eu=0;var f=s.return;try{if(_R(i,f,s,a,Qt)){Ce=1,fh(i,fi(a,i.current)),jt=null;return}}catch(p){if(f!==null)throw jt=f,p;Ce=1,fh(i,fi(a,i.current)),jt=null;return}s.flags&32768?(Jt||u===1?i=!0:Ra||(Qt&536870912)!==0?i=!1:(hs=i=!0,(u===2||u===9||u===3||u===6)&&(u=pi.current,u!==null&&u.tag===13&&(u.flags|=16384))),mv(s,i)):Th(s)}function Th(i){var s=i;do{if((s.flags&32768)!==0){mv(s,hs);return}i=s.return;var a=ER(s.alternate,s,Vr);if(a!==null){jt=a;return}if(s=s.sibling,s!==null){jt=s;return}jt=s=i}while(s!==null);Ce===0&&(Ce=5)}function mv(i,s){do{var a=TR(i.alternate,i);if(a!==null){a.flags&=32767,jt=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){jt=i;return}jt=i=a}while(i!==null);Ce=6,jt=null}function pv(i,s,a,u,f,p,w,A,H){i.cancelPendingCommit=null;do wh();while(cn!==0);if((ie&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=kd,Hn(i,a,p,w,A,H),i===ge&&(jt=ge=null,Qt=0),Ia=s,gs=i,xa=a,zg=p,Bg=f,ov=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,OR(Un,function(){return Tv(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=O.T,O.T=null,f=$.p,$.p=2,w=ie,ie|=4;try{wR(i,s,a)}finally{ie=w,$.p=f,O.T=u}}cn=1,yv(),_v(),vv()}}function yv(){if(cn===1){cn=0;var i=gs,s=Ia,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=O.T,O.T=null;var u=$.p;$.p=2;var f=ie;ie|=4;try{J0(s,i);var p=nm,w=s_(i.containerInfo),A=p.focusedElem,H=p.selectionRange;if(w!==A&&A&&A.ownerDocument&&r_(A.ownerDocument.documentElement,A)){if(H!==null&&xd(A)){var nt=H.start,ut=H.end;if(ut===void 0&&(ut=nt),"selectionStart"in A)A.selectionStart=nt,A.selectionEnd=Math.min(ut,A.value.length);else{var ft=A.ownerDocument||document,it=ft&&ft.defaultView||window;if(it.getSelection){var ot=it.getSelection(),Mt=A.textContent.length,It=Math.min(H.start,Mt),le=H.end===void 0?It:Math.min(H.end,Mt);!ot.extend&&It>le&&(w=le,le=It,It=w);var W=i_(A,It),G=i_(A,le);if(W&&G&&(ot.rangeCount!==1||ot.anchorNode!==W.node||ot.anchorOffset!==W.offset||ot.focusNode!==G.node||ot.focusOffset!==G.offset)){var tt=ft.createRange();tt.setStart(W.node,W.offset),ot.removeAllRanges(),It>le?(ot.addRange(tt),ot.extend(G.node,G.offset)):(tt.setEnd(G.node,G.offset),ot.addRange(tt))}}}}for(ft=[],ot=A;ot=ot.parentNode;)ot.nodeType===1&&ft.push({element:ot,left:ot.scrollLeft,top:ot.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ft.length;A++){var ht=ft[A];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}kh=!!em,nm=em=null}finally{ie=f,$.p=u,O.T=a}}i.current=s,cn=2}}function _v(){if(cn===2){cn=0;var i=gs,s=Ia,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=O.T,O.T=null;var u=$.p;$.p=2;var f=ie;ie|=4;try{X0(i,s.alternate,s)}finally{ie=f,$.p=u,O.T=a}}cn=3}}function vv(){if(cn===4||cn===3){cn=0,Xe();var i=gs,s=Ia,a=xa,u=ov;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?cn=5:(cn=0,Ia=gs=null,Ev(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(ds=null),Qr(a),s=s.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(te,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=O.T,f=$.p,$.p=2,O.T=null;try{for(var p=i.onRecoverableError,w=0;w<u.length;w++){var A=u[w];p(A.value,{componentStack:A.stack})}}finally{O.T=s,$.p=f}}(xa&3)!==0&&wh(),rr(i),f=i.pendingLanes,(a&4194090)!==0&&(f&42)!==0?i===Hg?cu++:(cu=0,Hg=i):cu=0,hu(0)}}function Ev(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,jl(s)))}function wh(i){return yv(),_v(),vv(),Tv()}function Tv(){if(cn!==5)return!1;var i=gs,s=zg;zg=0;var a=Qr(xa),u=O.T,f=$.p;try{$.p=32>a?32:a,O.T=null,a=Bg,Bg=null;var p=gs,w=xa;if(cn=0,Ia=gs=null,xa=0,(ie&6)!==0)throw Error(r(331));var A=ie;if(ie|=4,rv(p.current),ev(p,p.current,w,a),ie=A,hu(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(te,p)}catch{}return!0}finally{$.p=f,O.T=u,Ev(i,s)}}function wv(i,s,a){s=fi(a,s),s=vg(i.stateNode,s,2),i=rs(i,s,2),i!==null&&(ni(i,2),rr(i))}function fe(i,s,a){if(i.tag===3)wv(i,i,a);else for(;s!==null;){if(s.tag===3){wv(s,i,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ds===null||!ds.has(u))){i=fi(a,i),a=R0(2),u=rs(s,a,2),u!==null&&(C0(a,u,s,i),ni(u,2),rr(u));break}}s=s.return}}function Gg(i,s,a){var u=i.pingCache;if(u===null){u=i.pingCache=new AR;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(a)||(Vg=!0,f.add(a),i=NR.bind(null,i,s,a),s.then(i,i))}function NR(i,s,a){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,ge===i&&(Qt&a)===a&&(Ce===4||Ce===3&&(Qt&62914560)===Qt&&300>Lt()-Ug?(ie&2)===0&&Na(i,0):Pg|=a,Ca===Qt&&(Ca=0)),rr(i)}function Sv(i,s){s===0&&(s=bi()),i=fa(i,s),i!==null&&(ni(i,s),rr(i))}function DR(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),Sv(i,a)}function MR(i,s){var a=0;switch(i.tag){case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(a=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),Sv(i,a)}function OR(i,s){return Ee(i,s)}var Sh=null,Ma=null,$g=!1,bh=!1,Yg=!1,Ro=0;function rr(i){i!==Ma&&i.next===null&&(Ma===null?Sh=Ma=i:Ma=Ma.next=i),bh=!0,$g||($g=!0,VR())}function hu(i,s){if(!Yg&&bh){Yg=!0;do for(var a=!1,u=Sh;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var w=u.suspendedLanes,A=u.pingedLanes;p=(1<<31-Te(42|i)+1)-1,p&=f&~(w&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,Cv(u,p))}else p=Qt,p=on(u,u===ge?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Rn(u,p)||(a=!0,Cv(u,p));u=u.next}while(a);Yg=!1}}function kR(){bv()}function bv(){bh=$g=!1;var i=0;Ro!==0&&(FR()&&(i=Ro),Ro=0);for(var s=Lt(),a=null,u=Sh;u!==null;){var f=u.next,p=Av(u,s);p===0?(u.next=null,a===null?Sh=f:a.next=f,f===null&&(Ma=a)):(a=u,(i!==0||(p&3)!==0)&&(bh=!0)),u=f}hu(i)}function Av(i,s){for(var a=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var w=31-Te(p),A=1<<w,H=f[w];H===-1?((A&a)===0||(A&u)!==0)&&(f[w]=dr(A,s)):H<=s&&(i.expiredLanes|=A),p&=~A}if(s=ge,a=Qt,a=on(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===s&&(re===2||re===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&_e(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Rn(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(u!==null&&_e(u),Qr(a)){case 2:case 8:a=pn;break;case 32:a=Un;break;case 268435456:a=zn;break;default:a=Un}return u=Rv.bind(null,i),a=Ee(a,u),i.callbackPriority=s,i.callbackNode=a,s}return u!==null&&u!==null&&_e(u),i.callbackPriority=2,i.callbackNode=null,2}function Rv(i,s){if(cn!==0&&cn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(wh()&&i.callbackNode!==a)return null;var u=Qt;return u=on(i,i===ge?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(lv(i,u,s),Av(i,Lt()),i.callbackNode!=null&&i.callbackNode===a?Rv.bind(null,i):null)}function Cv(i,s){if(wh())return null;lv(i,s,!0)}function VR(){GR(function(){(ie&6)!==0?Ee(xe,kR):bv()})}function Kg(){return Ro===0&&(Ro=gr()),Ro}function Iv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ta(""+i)}function xv(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function PR(i,s,a,u,f){if(s==="submit"&&a&&a.stateNode===f){var p=Iv((f[Ae]||null).action),w=u.submitter;w&&(s=(s=w[Ae]||null)?Iv(s.formAction):w.getAttribute("formAction"),s!==null&&(p=s,w=null));var A=new ea("action","action",null,u,f);i.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ro!==0){var H=w?xv(f,w):new FormData(f);gg(a,{pending:!0,data:H,method:f.method,action:p},null,H)}}else typeof p=="function"&&(A.preventDefault(),H=w?xv(f,w):new FormData(f),gg(a,{pending:!0,data:H,method:f.method,action:p},p,H))},currentTarget:f}]})}}for(var Xg=0;Xg<Od.length;Xg++){var Qg=Od[Xg],LR=Qg.toLowerCase(),UR=Qg[0].toUpperCase()+Qg.slice(1);Ii(LR,"on"+UR)}Ii(l_,"onAnimationEnd"),Ii(u_,"onAnimationIteration"),Ii(c_,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(eR,"onTransitionRun"),Ii(nR,"onTransitionStart"),Ii(iR,"onTransitionCancel"),Ii(h_,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fu));function Nv(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],f=u.event;u=u.listeners;t:{var p=void 0;if(s)for(var w=u.length-1;0<=w;w--){var A=u[w],H=A.instance,nt=A.currentTarget;if(A=A.listener,H!==p&&f.isPropagationStopped())break t;p=A,f.currentTarget=nt;try{p(f)}catch(ut){hh(ut)}f.currentTarget=null,p=H}else for(w=0;w<u.length;w++){if(A=u[w],H=A.instance,nt=A.currentTarget,A=A.listener,H!==p&&f.isPropagationStopped())break t;p=A,f.currentTarget=nt;try{p(f)}catch(ut){hh(ut)}f.currentTarget=null,p=H}}}}function Gt(i,s){var a=s[Zs];a===void 0&&(a=s[Zs]=new Set);var u=i+"__bubble";a.has(u)||(Dv(s,i,2,!1),a.add(u))}function Zg(i,s,a){var u=0;s&&(u|=4),Dv(a,i,u,s)}var Ah="_reactListening"+Math.random().toString(36).slice(2);function Wg(i){if(!i[Ah]){i[Ah]=!0,Ws.forEach(function(a){a!=="selectionchange"&&(zR.has(a)||Zg(a,!1,i),Zg(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Ah]||(s[Ah]=!0,Zg("selectionchange",!1,s))}}function Dv(i,s,a,u){switch(eE(s)){case 2:var f=fC;break;case 8:f=dC;break;default:f=fm}a=f.bind(null,s,a,i),f=void 0,!ci||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,a,{capture:!0,passive:f}):i.addEventListener(s,a,!0):f!==void 0?i.addEventListener(s,a,{passive:f}):i.addEventListener(s,a,!1)}function Jg(i,s,a,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var A=u.stateNode.containerInfo;if(A===f)break;if(w===4)for(w=u.return;w!==null;){var H=w.tag;if((H===3||H===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;A!==null;){if(w=ri(A),w===null)return;if(H=w.tag,H===5||H===6||H===26||H===27){u=p=w;continue t}A=A.parentNode}}u=u.return}Cc(function(){var nt=p,ut=ui(a),ft=[];t:{var it=f_.get(i);if(it!==void 0){var ot=ea,Mt=i;switch(i){case"keypress":if(Xi(a)===0)break t;case"keydown":case"keyup":ot=aa;break;case"focusin":Mt="focus",ot=ra;break;case"focusout":Mt="blur",ot=ra;break;case"beforeblur":case"afterblur":ot=ra;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=hi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=Ad;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=Vc;break;case l_:case u_:case c_:ot=sa;break;case h_:ot=Lc;break;case"scroll":case"scrollend":ot=Ic;break;case"wheel":ot=la;break;case"copy":case"cut":case"paste":ot=oa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=Pl;break;case"toggle":case"beforetoggle":ot=zc}var It=(s&4)!==0,le=!It&&(i==="scroll"||i==="scrollend"),W=It?it!==null?it+"Capture":null:it;It=[];for(var G=nt,tt;G!==null;){var ht=G;if(tt=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||tt===null||W===null||(ht=ro(G,W),ht!=null&&It.push(du(G,ht,tt))),le)break;G=G.return}0<It.length&&(it=new ot(it,Mt,null,a,ut),ft.push({event:it,listeners:It}))}}if((s&7)===0){t:{if(it=i==="mouseover"||i==="pointerover",ot=i==="mouseout"||i==="pointerout",it&&a!==_r&&(Mt=a.relatedTarget||a.fromElement)&&(ri(Mt)||Mt[Dn]))break t;if((ot||it)&&(it=ut.window===ut?ut:(it=ut.ownerDocument)?it.defaultView||it.parentWindow:window,ot?(Mt=a.relatedTarget||a.toElement,ot=nt,Mt=Mt?ri(Mt):null,Mt!==null&&(le=l(Mt),It=Mt.tag,Mt!==le||It!==5&&It!==27&&It!==6)&&(Mt=null)):(ot=null,Mt=nt),ot!==Mt)){if(It=hi,ht="onMouseLeave",W="onMouseEnter",G="mouse",(i==="pointerout"||i==="pointerover")&&(It=Pl,ht="onPointerLeave",W="onPointerEnter",G="pointer"),le=ot==null?it:oi(ot),tt=Mt==null?it:oi(Mt),it=new It(ht,G+"leave",ot,a,ut),it.target=le,it.relatedTarget=tt,ht=null,ri(ut)===nt&&(It=new It(W,G+"enter",Mt,a,ut),It.target=tt,It.relatedTarget=le,ht=It),le=ht,ot&&Mt)e:{for(It=ot,W=Mt,G=0,tt=It;tt;tt=Oa(tt))G++;for(tt=0,ht=W;ht;ht=Oa(ht))tt++;for(;0<G-tt;)It=Oa(It),G--;for(;0<tt-G;)W=Oa(W),tt--;for(;G--;){if(It===W||W!==null&&It===W.alternate)break e;It=Oa(It),W=Oa(W)}It=null}else It=null;ot!==null&&Mv(ft,it,ot,It,!1),Mt!==null&&le!==null&&Mv(ft,le,Mt,It,!0)}}t:{if(it=nt?oi(nt):window,ot=it.nodeName&&it.nodeName.toLowerCase(),ot==="select"||ot==="input"&&it.type==="file")var Tt=Zy;else if(Fe(it))if(Wy)Tt=WA;else{Tt=QA;var Ht=XA}else ot=it.nodeName,!ot||ot.toLowerCase()!=="input"||it.type!=="checkbox"&&it.type!=="radio"?nt&&xl(nt.elementType)&&(Tt=Zy):Tt=ZA;if(Tt&&(Tt=Tt(i,nt))){Sr(ft,Tt,a,ut);break t}Ht&&Ht(i,it,nt),i==="focusout"&&nt&&it.type==="number"&&nt.memoizedProps.value!=null&&Jr(it,"number",it.value)}switch(Ht=nt?oi(nt):window,i){case"focusin":(Fe(Ht)||Ht.contentEditable==="true")&&(ua=Ht,Nd=nt,zl=null);break;case"focusout":zl=Nd=ua=null;break;case"mousedown":Dd=!0;break;case"contextmenu":case"mouseup":case"dragend":Dd=!1,o_(ft,a,ut);break;case"selectionchange":if(tR)break;case"keydown":case"keyup":o_(ft,a,ut)}var St;if(Wi)t:{switch(i){case"compositionstart":var xt="onCompositionStart";break t;case"compositionend":xt="onCompositionEnd";break t;case"compositionupdate":xt="onCompositionUpdate";break t}xt=void 0}else Kt?at(i,a)&&(xt="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(xt="onCompositionStart");xt&&(T&&a.locale!=="ko"&&(Kt||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Kt&&(St=Dl()):(Ki=ut,ts="value"in Ki?Ki.value:Ki.textContent,Kt=!0)),Ht=Rh(nt,xt),0<Ht.length&&(xt=new kl(xt,i,null,a,ut),ft.push({event:xt,listeners:Ht}),St?xt.data=St:(St=_t(a),St!==null&&(xt.data=St)))),(St=_?qe(i,a):Xt(i,a))&&(xt=Rh(nt,"onBeforeInput"),0<xt.length&&(Ht=new kl("onBeforeInput","beforeinput",null,a,ut),ft.push({event:Ht,listeners:xt}),Ht.data=St)),PR(ft,i,nt,a,ut)}Nv(ft,s)})}function du(i,s,a){return{instance:i,listener:s,currentTarget:a}}function Rh(i,s){for(var a=s+"Capture",u=[];i!==null;){var f=i,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=ro(i,a),f!=null&&u.unshift(du(i,f,p)),f=ro(i,s),f!=null&&u.push(du(i,f,p))),i.tag===3)return u;i=i.return}return[]}function Oa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Mv(i,s,a,u,f){for(var p=s._reactName,w=[];a!==null&&a!==u;){var A=a,H=A.alternate,nt=A.stateNode;if(A=A.tag,H!==null&&H===u)break;A!==5&&A!==26&&A!==27||nt===null||(H=nt,f?(nt=ro(a,p),nt!=null&&w.unshift(du(a,nt,H))):f||(nt=ro(a,p),nt!=null&&w.push(du(a,nt,H)))),a=a.return}w.length!==0&&i.push({event:s,listeners:w})}var BR=/\r\n?/g,HR=/\u0000|\uFFFD/g;function Ov(i){return(typeof i=="string"?i:""+i).replace(BR,`
`).replace(HR,"")}function kv(i,s){return s=Ov(s),Ov(i)===s}function Ch(){}function ae(i,s,a,u,f,p){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||li(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&li(i,""+u);break;case"className":ai(i,"class",u);break;case"tabIndex":ai(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ai(i,a,u);break;case"style":Il(i,u,p);break;case"data":if(s!=="object"){ai(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=ta(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(s!=="input"&&ae(i,s,"name",f.name,f,null),ae(i,s,"formEncType",f.formEncType,f,null),ae(i,s,"formMethod",f.formMethod,f,null),ae(i,s,"formTarget",f.formTarget,f,null)):(ae(i,s,"encType",f.encType,f,null),ae(i,s,"method",f.method,f,null),ae(i,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=ta(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=Ch);break;case"onScroll":u!=null&&Gt("scroll",i);break;case"onScrollEnd":u!=null&&Gt("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=ta(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":Gt("beforetoggle",i),Gt("toggle",i),ji(i,"popover",u);break;case"xlinkActuate":He(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":He(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":He(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":He(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":He(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":He(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":He(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":He(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":He(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ji(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Sd.get(a)||a,ji(i,a,u))}}function tm(i,s,a,u,f,p){switch(a){case"style":Il(i,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=a}}break;case"children":typeof u=="string"?li(i,u):(typeof u=="number"||typeof u=="bigint")&&li(i,""+u);break;case"onScroll":u!=null&&Gt("scroll",i);break;case"onScrollEnd":u!=null&&Gt("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Ch);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zr.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),p=i[Ae]||null,p=p!=null?p[a]:null,typeof p=="function"&&i.removeEventListener(s,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,u,f);break t}a in i?i[a]=u:u===!0?i.setAttribute(a,""):ji(i,a,u)}}}function hn(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",i),Gt("load",i);var u=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var w=a[p];if(w!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ae(i,s,p,w,a,null)}}f&&ae(i,s,"srcSet",a.srcSet,a,null),u&&ae(i,s,"src",a.src,a,null);return;case"input":Gt("invalid",i);var A=p=w=f=null,H=null,nt=null;for(u in a)if(a.hasOwnProperty(u)){var ut=a[u];if(ut!=null)switch(u){case"name":f=ut;break;case"type":w=ut;break;case"checked":H=ut;break;case"defaultChecked":nt=ut;break;case"value":p=ut;break;case"defaultValue":A=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(r(137,s));break;default:ae(i,s,u,ut,a,null)}}eo(i,p,A,H,nt,w,f,!1),Jo(i);return;case"select":Gt("invalid",i),u=w=p=null;for(f in a)if(a.hasOwnProperty(f)&&(A=a[f],A!=null))switch(f){case"value":p=A;break;case"defaultValue":w=A;break;case"multiple":u=A;default:ae(i,s,f,A,a,null)}s=p,a=w,i.multiple=!!u,s!=null?yr(i,!!u,s,!1):a!=null&&yr(i,!!u,a,!0);return;case"textarea":Gt("invalid",i),p=f=u=null;for(w in a)if(a.hasOwnProperty(w)&&(A=a[w],A!=null))switch(w){case"value":u=A;break;case"defaultValue":f=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:ae(i,s,w,A,a,null)}no(i,u,f,p),Jo(i);return;case"option":for(H in a)if(a.hasOwnProperty(H)&&(u=a[H],u!=null))switch(H){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ae(i,s,H,u,a,null)}return;case"dialog":Gt("beforetoggle",i),Gt("toggle",i),Gt("cancel",i),Gt("close",i);break;case"iframe":case"object":Gt("load",i);break;case"video":case"audio":for(u=0;u<fu.length;u++)Gt(fu[u],i);break;case"image":Gt("error",i),Gt("load",i);break;case"details":Gt("toggle",i);break;case"embed":case"source":case"link":Gt("error",i),Gt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(nt in a)if(a.hasOwnProperty(nt)&&(u=a[nt],u!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ae(i,s,nt,u,a,null)}return;default:if(xl(s)){for(ut in a)a.hasOwnProperty(ut)&&(u=a[ut],u!==void 0&&tm(i,s,ut,u,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(u=a[A],u!=null&&ae(i,s,A,u,a,null))}function qR(i,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,w=null,A=null,H=null,nt=null,ut=null;for(ot in a){var ft=a[ot];if(a.hasOwnProperty(ot)&&ft!=null)switch(ot){case"checked":break;case"value":break;case"defaultValue":H=ft;default:u.hasOwnProperty(ot)||ae(i,s,ot,null,u,ft)}}for(var it in u){var ot=u[it];if(ft=a[it],u.hasOwnProperty(it)&&(ot!=null||ft!=null))switch(it){case"type":p=ot;break;case"name":f=ot;break;case"checked":nt=ot;break;case"defaultChecked":ut=ot;break;case"value":w=ot;break;case"defaultValue":A=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(r(137,s));break;default:ot!==ft&&ae(i,s,it,ot,u,ft)}}Fn(i,w,A,H,nt,ut,p,f);return;case"select":ot=w=A=it=null;for(p in a)if(H=a[p],a.hasOwnProperty(p)&&H!=null)switch(p){case"value":break;case"multiple":ot=H;default:u.hasOwnProperty(p)||ae(i,s,p,null,u,H)}for(f in u)if(p=u[f],H=a[f],u.hasOwnProperty(f)&&(p!=null||H!=null))switch(f){case"value":it=p;break;case"defaultValue":A=p;break;case"multiple":w=p;default:p!==H&&ae(i,s,f,p,u,H)}s=A,a=w,u=ot,it!=null?yr(i,!!a,it,!1):!!u!=!!a&&(s!=null?yr(i,!!a,s,!0):yr(i,!!a,a?[]:"",!1));return;case"textarea":ot=it=null;for(A in a)if(f=a[A],a.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ae(i,s,A,null,u,f)}for(w in u)if(f=u[w],p=a[w],u.hasOwnProperty(w)&&(f!=null||p!=null))switch(w){case"value":it=f;break;case"defaultValue":ot=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&ae(i,s,w,f,u,p)}se(i,it,ot);return;case"option":for(var Mt in a)if(it=a[Mt],a.hasOwnProperty(Mt)&&it!=null&&!u.hasOwnProperty(Mt))switch(Mt){case"selected":i.selected=!1;break;default:ae(i,s,Mt,null,u,it)}for(H in u)if(it=u[H],ot=a[H],u.hasOwnProperty(H)&&it!==ot&&(it!=null||ot!=null))switch(H){case"selected":i.selected=it&&typeof it!="function"&&typeof it!="symbol";break;default:ae(i,s,H,it,u,ot)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var It in a)it=a[It],a.hasOwnProperty(It)&&it!=null&&!u.hasOwnProperty(It)&&ae(i,s,It,null,u,it);for(nt in u)if(it=u[nt],ot=a[nt],u.hasOwnProperty(nt)&&it!==ot&&(it!=null||ot!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(r(137,s));break;default:ae(i,s,nt,it,u,ot)}return;default:if(xl(s)){for(var le in a)it=a[le],a.hasOwnProperty(le)&&it!==void 0&&!u.hasOwnProperty(le)&&tm(i,s,le,void 0,u,it);for(ut in u)it=u[ut],ot=a[ut],!u.hasOwnProperty(ut)||it===ot||it===void 0&&ot===void 0||tm(i,s,ut,it,u,ot);return}}for(var W in a)it=a[W],a.hasOwnProperty(W)&&it!=null&&!u.hasOwnProperty(W)&&ae(i,s,W,null,u,it);for(ft in u)it=u[ft],ot=a[ft],!u.hasOwnProperty(ft)||it===ot||it==null&&ot==null||ae(i,s,ft,it,u,ot)}var em=null,nm=null;function Ih(i){return i.nodeType===9?i:i.ownerDocument}function Vv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pv(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function im(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var rm=null;function FR(){var i=window.event;return i&&i.type==="popstate"?i===rm?!1:(rm=i,!0):(rm=null,!1)}var Lv=typeof setTimeout=="function"?setTimeout:void 0,jR=typeof clearTimeout=="function"?clearTimeout:void 0,Uv=typeof Promise=="function"?Promise:void 0,GR=typeof queueMicrotask=="function"?queueMicrotask:typeof Uv<"u"?function(i){return Uv.resolve(null).then(i).catch($R)}:Lv;function $R(i){setTimeout(function(){throw i})}function ps(i){return i==="head"}function zv(i,s){var a=s,u=0,f=0;do{var p=a.nextSibling;if(i.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(0<u&&8>u){a=u;var w=i.ownerDocument;if(a&1&&gu(w.documentElement),a&2&&gu(w.body),a&4)for(a=w.head,gu(a),w=a.firstChild;w;){var A=w.nextSibling,H=w.nodeName;w[mr]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&w.rel.toLowerCase()==="stylesheet"||a.removeChild(w),w=A}}if(f===0){i.removeChild(p),wu(s);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:u=a.charCodeAt(0)-48;else u=0;a=p}while(a);wu(s)}function sm(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":sm(a),Fi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function YR(i,s,a,u){for(;i.nodeType===1;){var f=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[mr])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=Ni(i.nextSibling),i===null)break}return null}function KR(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Ni(i.nextSibling),i===null))return null;return i}function om(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function XR(i,s){var a=i.ownerDocument;if(i.data!=="$?"||a.readyState==="complete")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Ni(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var am=null;function Bv(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return i;s--}else a==="/$"&&s++}i=i.previousSibling}return null}function Hv(i,s,a){switch(s=Ih(a),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function gu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Fi(i)}var _i=new Map,qv=new Set;function xh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Pr=$.d;$.d={f:QR,r:ZR,D:WR,C:JR,L:tC,m:eC,X:iC,S:nC,M:rC};function QR(){var i=Pr.f(),s=Eh();return i||s}function ZR(i){var s=si(i);s!==null&&s.tag===5&&s.type==="form"?l0(s):Pr.r(i)}var ka=typeof document>"u"?null:document;function Fv(i,s,a){var u=ka;if(u&&typeof s=="string"&&s){var f=Pe(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),qv.has(f)||(qv.add(f),i={rel:i,crossOrigin:a,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),hn(s,"link",i),we(s),u.head.appendChild(s)))}}function WR(i){Pr.D(i),Fv("dns-prefetch",i,null)}function JR(i,s){Pr.C(i,s),Fv("preconnect",i,s)}function tC(i,s,a){Pr.L(i,s,a);var u=ka;if(u&&i&&s){var f='link[rel="preload"][as="'+Pe(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Pe(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Pe(a.imageSizes)+'"]')):f+='[href="'+Pe(i)+'"]';var p=f;switch(s){case"style":p=Va(i);break;case"script":p=Pa(i)}_i.has(p)||(i=y({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),_i.set(p,i),u.querySelector(f)!==null||s==="style"&&u.querySelector(mu(p))||s==="script"&&u.querySelector(pu(p))||(s=u.createElement("link"),hn(s,"link",i),we(s),u.head.appendChild(s)))}}function eC(i,s){Pr.m(i,s);var a=ka;if(a&&i){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Pe(u)+'"][href="'+Pe(i)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Pa(i)}if(!_i.has(p)&&(i=y({rel:"modulepreload",href:i},s),_i.set(p,i),a.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(pu(p)))return}u=a.createElement("link"),hn(u,"link",i),we(u),a.head.appendChild(u)}}}function nC(i,s,a){Pr.S(i,s,a);var u=ka;if(u&&i){var f=an(u).hoistableStyles,p=Va(i);s=s||"default";var w=f.get(p);if(!w){var A={loading:0,preload:null};if(w=u.querySelector(mu(p)))A.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":s},a),(a=_i.get(p))&&lm(i,a);var H=w=u.createElement("link");we(H),hn(H,"link",i),H._p=new Promise(function(nt,ut){H.onload=nt,H.onerror=ut}),H.addEventListener("load",function(){A.loading|=1}),H.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Nh(w,s,u)}w={type:"stylesheet",instance:w,count:1,state:A},f.set(p,w)}}}function iC(i,s){Pr.X(i,s);var a=ka;if(a&&i){var u=an(a).hoistableScripts,f=Pa(i),p=u.get(f);p||(p=a.querySelector(pu(f)),p||(i=y({src:i,async:!0},s),(s=_i.get(f))&&um(i,s),p=a.createElement("script"),we(p),hn(p,"link",i),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function rC(i,s){Pr.M(i,s);var a=ka;if(a&&i){var u=an(a).hoistableScripts,f=Pa(i),p=u.get(f);p||(p=a.querySelector(pu(f)),p||(i=y({src:i,async:!0,type:"module"},s),(s=_i.get(f))&&um(i,s),p=a.createElement("script"),we(p),hn(p,"link",i),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function jv(i,s,a,u){var f=(f=yt.current)?xh(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Va(a.href),a=an(f).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Va(a.href);var p=an(f).hoistableStyles,w=p.get(i);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,w),(p=f.querySelector(mu(i)))&&!p._p&&(w.instance=p,w.state.loading=5),_i.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},_i.set(i,a),p||sC(f,i,a,w.state))),s&&u===null)throw Error(r(528,""));return w}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Pa(a),a=an(f).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Va(i){return'href="'+Pe(i)+'"'}function mu(i){return'link[rel="stylesheet"]['+i+"]"}function Gv(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function sC(i,s,a,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),hn(s,"link",a),we(s),i.head.appendChild(s))}function Pa(i){return'[src="'+Pe(i)+'"]'}function pu(i){return"script[async]"+i}function $v(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+Pe(a.href)+'"]');if(u)return s.instance=u,we(u),u;var f=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),we(u),hn(u,"style",f),Nh(u,a.precedence,i),s.instance=u;case"stylesheet":f=Va(a.href);var p=i.querySelector(mu(f));if(p)return s.state.loading|=4,s.instance=p,we(p),p;u=Gv(a),(f=_i.get(f))&&lm(u,f),p=(i.ownerDocument||i).createElement("link"),we(p);var w=p;return w._p=new Promise(function(A,H){w.onload=A,w.onerror=H}),hn(p,"link",u),s.state.loading|=4,Nh(p,a.precedence,i),s.instance=p;case"script":return p=Pa(a.src),(f=i.querySelector(pu(p)))?(s.instance=f,we(f),f):(u=a,(f=_i.get(p))&&(u=y({},a),um(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),we(f),hn(f,"link",u),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Nh(u,a.precedence,i));return s.instance}function Nh(i,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,w=0;w<u.length;w++){var A=u[w];if(A.dataset.precedence===s)p=A;else if(p!==f)break}p?p.parentNode.insertBefore(i,p.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function lm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function um(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Dh=null;function Yv(i,s,a){if(Dh===null){var u=new Map,f=Dh=new Map;f.set(a,u)}else f=Dh,u=f.get(a),u||(u=new Map,f.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),f=0;f<a.length;f++){var p=a[f];if(!(p[mr]||p[Ne]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(s)||"";w=i+w;var A=u.get(w);A?A.push(p):u.set(w,[p])}}return u}function Kv(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function oC(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Xv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var yu=null;function aC(){}function lC(i,s,a){if(yu===null)throw Error(r(475));var u=yu;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Va(a.href),p=i.querySelector(mu(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=Mh.bind(u),i.then(u,u)),s.state.loading|=4,s.instance=p,we(p);return}p=i.ownerDocument||i,a=Gv(a),(f=_i.get(f))&&lm(a,f),p=p.createElement("link"),we(p);var w=p;w._p=new Promise(function(A,H){w.onload=A,w.onerror=H}),hn(p,"link",a),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=Mh.bind(u),i.addEventListener("load",s),i.addEventListener("error",s))}}function uC(){if(yu===null)throw Error(r(475));var i=yu;return i.stylesheets&&i.count===0&&cm(i,i.stylesheets),0<i.count?function(s){var a=setTimeout(function(){if(i.stylesheets&&cm(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(a)}}:null}function Mh(){if(this.count--,this.count===0){if(this.stylesheets)cm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Oh=null;function cm(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Oh=new Map,s.forEach(cC,i),Oh=null,Mh.call(i))}function cC(i,s){if(!(s.state.loading&4)){var a=Oh.get(i);if(a)var u=a.get(null);else{a=new Map,Oh.set(i,a);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var w=f[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(a.set(w.dataset.precedence,w),u=w)}u&&a.set(null,u)}f=s.instance,w=f.getAttribute("data-precedence"),p=a.get(w)||u,p===u&&a.set(null,f),a.set(w,f),this.count++,u=Mh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var _u={$$typeof:X,Provider:null,Consumer:null,_currentValue:rt,_currentValue2:rt,_threadCount:0};function hC(i,s,a,u,f,p,w,A){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bn(0),this.hiddenUpdates=Bn(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Qv(i,s,a,u,f,p,w,A,H,nt,ut,ft){return i=new hC(i,s,a,w,A,H,nt,ft),s=1,p===!0&&(s|=24),p=Gn(3,null,null,s),i.current=p,p.stateNode=i,s=Gd(),s.refCount++,i.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:a,cache:s},Xd(p),i}function Zv(i){return i?(i=da,i):da}function Wv(i,s,a,u,f,p){f=Zv(f),u.context===null?u.context=f:u.pendingContext=f,u=is(s),u.payload={element:a},p=p===void 0?null:p,p!==null&&(u.callback=p),a=rs(i,u,s),a!==null&&(Qn(a,i,s),Kl(a,i,s))}function Jv(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function hm(i,s){Jv(i,s),(i=i.alternate)&&Jv(i,s)}function tE(i){if(i.tag===13){var s=fa(i,67108864);s!==null&&Qn(s,i,67108864),hm(i,67108864)}}var kh=!0;function fC(i,s,a,u){var f=O.T;O.T=null;var p=$.p;try{$.p=2,fm(i,s,a,u)}finally{$.p=p,O.T=f}}function dC(i,s,a,u){var f=O.T;O.T=null;var p=$.p;try{$.p=8,fm(i,s,a,u)}finally{$.p=p,O.T=f}}function fm(i,s,a,u){if(kh){var f=dm(u);if(f===null)Jg(i,s,u,Vh,a),nE(i,u);else if(mC(f,i,s,a,u))u.stopPropagation();else if(nE(i,u),s&4&&-1<gC.indexOf(i)){for(;f!==null;){var p=si(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=Ze(p.pendingLanes);if(w!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;w;){var H=1<<31-Te(w);A.entanglements[1]|=H,w&=~H}rr(p),(ie&6)===0&&(_h=Lt()+500,hu(0))}}break;case 13:A=fa(p,2),A!==null&&Qn(A,p,2),Eh(),hm(p,2)}if(p=dm(u),p===null&&Jg(i,s,u,Vh,a),p===f)break;f=p}f!==null&&u.stopPropagation()}else Jg(i,s,u,null,a)}}function dm(i){return i=ui(i),gm(i)}var Vh=null;function gm(i){if(Vh=null,i=ri(i),i!==null){var s=l(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=c(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Vh=i,null}function eE(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wt()){case xe:return 2;case pn:return 8;case Un:case Ui:return 32;case zn:return 268435456;default:return 32}default:return 32}}var mm=!1,ys=null,_s=null,vs=null,vu=new Map,Eu=new Map,Es=[],gC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nE(i,s){switch(i){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":vu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eu.delete(s.pointerId)}}function Tu(i,s,a,u,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=si(s),s!==null&&tE(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function mC(i,s,a,u,f){switch(s){case"focusin":return ys=Tu(ys,i,s,a,u,f),!0;case"dragenter":return _s=Tu(_s,i,s,a,u,f),!0;case"mouseover":return vs=Tu(vs,i,s,a,u,f),!0;case"pointerover":var p=f.pointerId;return vu.set(p,Tu(vu.get(p)||null,i,s,a,u,f)),!0;case"gotpointercapture":return p=f.pointerId,Eu.set(p,Tu(Eu.get(p)||null,i,s,a,u,f)),!0}return!1}function iE(i){var s=ri(i.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){i.blockedOn=s,Yo(i.priority,function(){if(a.tag===13){var u=Xn();u=Bi(u);var f=fa(a,u);f!==null&&Qn(f,a,u),hm(a,u)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ph(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=dm(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);_r=u,a.target.dispatchEvent(u),_r=null}else return s=si(a),s!==null&&tE(s),i.blockedOn=a,!1;s.shift()}return!0}function rE(i,s,a){Ph(i)&&a.delete(s)}function pC(){mm=!1,ys!==null&&Ph(ys)&&(ys=null),_s!==null&&Ph(_s)&&(_s=null),vs!==null&&Ph(vs)&&(vs=null),vu.forEach(rE),Eu.forEach(rE)}function Lh(i,s){i.blockedOn===s&&(i.blockedOn=null,mm||(mm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,pC)))}var Uh=null;function sE(i){Uh!==i&&(Uh=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Uh===i&&(Uh=null);for(var s=0;s<i.length;s+=3){var a=i[s],u=i[s+1],f=i[s+2];if(typeof u!="function"){if(gm(u||a)===null)continue;break}var p=si(a);p!==null&&(i.splice(s,3),s-=3,gg(p,{pending:!0,data:f,method:a.method,action:u},u,f))}}))}function wu(i){function s(H){return Lh(H,i)}ys!==null&&Lh(ys,i),_s!==null&&Lh(_s,i),vs!==null&&Lh(vs,i),vu.forEach(s),Eu.forEach(s);for(var a=0;a<Es.length;a++){var u=Es[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Es.length&&(a=Es[0],a.blockedOn===null);)iE(a),a.blockedOn===null&&Es.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var f=a[u],p=a[u+1],w=f[Ae]||null;if(typeof p=="function")w||sE(a);else if(w){var A=null;if(p&&p.hasAttribute("formAction")){if(f=p,w=p[Ae]||null)A=w.formAction;else if(gm(f)!==null)continue}else A=w.action;typeof A=="function"?a[u+1]=A:(a.splice(u,3),u-=3),sE(a)}}}function pm(i){this._internalRoot=i}zh.prototype.render=pm.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,u=Xn();Wv(a,u,i,s,null,null)},zh.prototype.unmount=pm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Wv(i.current,2,null,i,null,null),Eh(),s[Dn]=null}};function zh(i){this._internalRoot=i}zh.prototype.unstable_scheduleHydration=function(i){if(i){var s=Hi();i={blockedOn:null,target:i,priority:s};for(var a=0;a<Es.length&&s!==0&&s<Es[a].priority;a++);Es.splice(a,0,i),a===0&&iE(i)}};var oE=t.version;if(oE!=="19.1.0")throw Error(r(527,oE,"19.1.0"));$.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=g(s),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var yC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bh.isDisabled&&Bh.supportsFiber)try{te=Bh.inject(yC),Ft=Bh}catch{}}return bu.createRoot=function(i,s){if(!o(i))throw Error(r(299));var a=!1,u="",f=w0,p=S0,w=b0,A=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(A=s.unstable_transitionCallbacks)),s=Qv(i,1,!1,null,null,a,u,f,p,w,A,null),i[Dn]=s.current,Wg(i),new pm(s)},bu.hydrateRoot=function(i,s,a){if(!o(i))throw Error(r(299));var u=!1,f="",p=w0,w=S0,A=b0,H=null,nt=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(w=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(H=a.unstable_transitionCallbacks),a.formState!==void 0&&(nt=a.formState)),s=Qv(i,1,!0,s,a??null,u,f,p,w,A,H,nt),s.context=Zv(null),a=s.current,u=Xn(),u=Bi(u),f=is(u),f.callback=null,rs(a,f,u),a=u,s.current.lanes=a,ni(s,a),rr(s),i[Dn]=s.current,Wg(i),new zh(s)},bu.version="19.1.0",bu}var pE;function RC(){if(pE)return vm.exports;pE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),vm.exports=AC(),vm.exports}var CC=RC();function mn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=mn(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Sm={exports:{}},bm={},Am={exports:{}},Rm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE;function IC(){if(yE)return Rm;yE=1;var e=uc();function t(v,E){return v===E&&(v!==0||1/v===1/E)||v!==v&&E!==E}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function d(v,E){var S=E(),D=r({inst:{value:S,getSnapshot:E}}),V=D[0].inst,M=D[1];return l(function(){V.value=S,V.getSnapshot=E,g(V)&&M({inst:V})},[v,S,E]),o(function(){return g(V)&&M({inst:V}),v(function(){g(V)&&M({inst:V})})},[v]),c(S),S}function g(v){var E=v.getSnapshot;v=v.value;try{var S=E();return!n(v,S)}catch{return!0}}function m(v,E){return E()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return Rm.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:y,Rm}var _E;function xC(){return _E||(_E=1,Am.exports=IC()),Am.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vE;function NC(){if(vE)return bm;vE=1;var e=uc(),t=xC();function n(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var r=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,l=e.useRef,c=e.useEffect,d=e.useMemo,g=e.useDebugValue;return bm.useSyncExternalStoreWithSelector=function(m,y,v,E,S){var D=l(null);if(D.current===null){var V={hasValue:!1,value:null};D.current=V}else V=D.current;D=d(function(){function B(Z){if(!F){if(F=!0,X=Z,Z=E(Z),S!==void 0&&V.hasValue){var x=V.value;if(S(x,Z))return z=x}return z=Z}if(x=z,r(X,Z))return x;var b=E(Z);return S!==void 0&&S(x,b)?(X=Z,x):(X=Z,z=b)}var F=!1,X,z,q=v===void 0?null:v;return[function(){return B(y())},q===null?void 0:function(){return B(q())}]},[y,v,E,S]);var M=o(m,D[0],D[1]);return c(function(){V.hasValue=!0,V.value=M},[M]),g(M),M},bm}var EE;function DC(){return EE||(EE=1,Sm.exports=NC()),Sm.exports}var MC=DC();const OC=Fw(MC),kC={},TE=e=>{let t;const n=new Set,r=(y,v)=>{const E=typeof y=="function"?y(t):y;if(!Object.is(E,t)){const S=t;t=v??(typeof E!="object"||E===null)?E:Object.assign({},t,E),n.forEach(D=>D(t,S))}},o=()=>t,g={setState:r,getState:o,getInitialState:()=>m,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(kC?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},m=t=e(r,o,g);return g},VC=e=>e?TE(e):TE,{useDebugValue:PC}=lt,{useSyncExternalStoreWithSelector:LC}=OC,UC=e=>e;function Gw(e,t=UC,n){const r=LC(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return PC(r),r}const wE=(e,t)=>{const n=VC(e),r=(o,l=t)=>Gw(n,o,l);return Object.assign(r,n),r},zC=(e,t)=>e?wE(e,t):wE;function sn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var BC={value:()=>{}};function $f(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new rf(n)}function rf(e){this._=e}function HC(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}rf.prototype=$f.prototype={constructor:rf,on:function(e,t){var n=this._,r=HC(e+"",n),o,l=-1,c=r.length;if(arguments.length<2){for(;++l<c;)if((o=(e=r[l]).type)&&(o=qC(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(o=(e=r[l]).type)n[o]=SE(n[o],e.name,t);else if(t==null)for(o in n)n[o]=SE(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new rf(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,l;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],r=0,o=l.length;r<o;++r)l[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,l=r.length;o<l;++o)r[o].value.apply(t,n)}};function qC(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function SE(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=BC,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Xm="http://www.w3.org/1999/xhtml";const bE={svg:"http://www.w3.org/2000/svg",xhtml:Xm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yf(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),bE.hasOwnProperty(t)?{space:bE[t],local:e}:e}function FC(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Xm&&t.documentElement.namespaceURI===Xm?t.createElement(e):t.createElementNS(n,e)}}function jC(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function $w(e){var t=Yf(e);return(t.local?jC:FC)(t)}function GC(){}function Up(e){return e==null?GC:function(){return this.querySelector(e)}}function $C(e){typeof e!="function"&&(e=Up(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var l=t[o],c=l.length,d=r[o]=new Array(c),g,m,y=0;y<c;++y)(g=l[y])&&(m=e.call(g,g.__data__,y,l))&&("__data__"in g&&(m.__data__=g.__data__),d[y]=m);return new ti(r,this._parents)}function YC(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function KC(){return[]}function Yw(e){return e==null?KC:function(){return this.querySelectorAll(e)}}function XC(e){return function(){return YC(e.apply(this,arguments))}}function QC(e){typeof e=="function"?e=XC(e):e=Yw(e);for(var t=this._groups,n=t.length,r=[],o=[],l=0;l<n;++l)for(var c=t[l],d=c.length,g,m=0;m<d;++m)(g=c[m])&&(r.push(e.call(g,g.__data__,m,c)),o.push(g));return new ti(r,o)}function Kw(e){return function(){return this.matches(e)}}function Xw(e){return function(t){return t.matches(e)}}var ZC=Array.prototype.find;function WC(e){return function(){return ZC.call(this.children,e)}}function JC(){return this.firstElementChild}function tI(e){return this.select(e==null?JC:WC(typeof e=="function"?e:Xw(e)))}var eI=Array.prototype.filter;function nI(){return Array.from(this.children)}function iI(e){return function(){return eI.call(this.children,e)}}function rI(e){return this.selectAll(e==null?nI:iI(typeof e=="function"?e:Xw(e)))}function sI(e){typeof e!="function"&&(e=Kw(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var l=t[o],c=l.length,d=r[o]=[],g,m=0;m<c;++m)(g=l[m])&&e.call(g,g.__data__,m,l)&&d.push(g);return new ti(r,this._parents)}function Qw(e){return new Array(e.length)}function oI(){return new ti(this._enter||this._groups.map(Qw),this._parents)}function _f(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}_f.prototype={constructor:_f,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function aI(e){return function(){return e}}function lI(e,t,n,r,o,l){for(var c=0,d,g=t.length,m=l.length;c<m;++c)(d=t[c])?(d.__data__=l[c],r[c]=d):n[c]=new _f(e,l[c]);for(;c<g;++c)(d=t[c])&&(o[c]=d)}function uI(e,t,n,r,o,l,c){var d,g,m=new Map,y=t.length,v=l.length,E=new Array(y),S;for(d=0;d<y;++d)(g=t[d])&&(E[d]=S=c.call(g,g.__data__,d,t)+"",m.has(S)?o[d]=g:m.set(S,g));for(d=0;d<v;++d)S=c.call(e,l[d],d,l)+"",(g=m.get(S))?(r[d]=g,g.__data__=l[d],m.delete(S)):n[d]=new _f(e,l[d]);for(d=0;d<y;++d)(g=t[d])&&m.get(E[d])===g&&(o[d]=g)}function cI(e){return e.__data__}function hI(e,t){if(!arguments.length)return Array.from(this,cI);var n=t?uI:lI,r=this._parents,o=this._groups;typeof e!="function"&&(e=aI(e));for(var l=o.length,c=new Array(l),d=new Array(l),g=new Array(l),m=0;m<l;++m){var y=r[m],v=o[m],E=v.length,S=fI(e.call(y,y&&y.__data__,m,r)),D=S.length,V=d[m]=new Array(D),M=c[m]=new Array(D),B=g[m]=new Array(E);n(y,v,V,M,B,S,t);for(var F=0,X=0,z,q;F<D;++F)if(z=V[F]){for(F>=X&&(X=F+1);!(q=M[X])&&++X<D;);z._next=q||null}}return c=new ti(c,r),c._enter=d,c._exit=g,c}function fI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dI(){return new ti(this._exit||this._groups.map(Qw),this._parents)}function gI(e,t,n){var r=this.enter(),o=this,l=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?l.remove():n(l),r&&o?r.merge(o).order():o}function mI(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,l=r.length,c=Math.min(o,l),d=new Array(o),g=0;g<c;++g)for(var m=n[g],y=r[g],v=m.length,E=d[g]=new Array(v),S,D=0;D<v;++D)(S=m[D]||y[D])&&(E[D]=S);for(;g<o;++g)d[g]=n[g];return new ti(d,this._parents)}function pI(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,l=r[o],c;--o>=0;)(c=r[o])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function yI(e){e||(e=_I);function t(v,E){return v&&E?e(v.__data__,E.__data__):!v-!E}for(var n=this._groups,r=n.length,o=new Array(r),l=0;l<r;++l){for(var c=n[l],d=c.length,g=o[l]=new Array(d),m,y=0;y<d;++y)(m=c[y])&&(g[y]=m);g.sort(t)}return new ti(o,this._parents).order()}function _I(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vI(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function EI(){return Array.from(this)}function TI(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,l=r.length;o<l;++o){var c=r[o];if(c)return c}return null}function wI(){let e=0;for(const t of this)++e;return e}function SI(){return!this.node()}function bI(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],l=0,c=o.length,d;l<c;++l)(d=o[l])&&e.call(d,d.__data__,l,o);return this}function AI(e){return function(){this.removeAttribute(e)}}function RI(e){return function(){this.removeAttributeNS(e.space,e.local)}}function CI(e,t){return function(){this.setAttribute(e,t)}}function II(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function xI(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function NI(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function DI(e,t){var n=Yf(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?RI:AI:typeof t=="function"?n.local?NI:xI:n.local?II:CI)(n,t))}function Zw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function MI(e){return function(){this.style.removeProperty(e)}}function OI(e,t,n){return function(){this.style.setProperty(e,t,n)}}function kI(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function VI(e,t,n){return arguments.length>1?this.each((t==null?MI:typeof t=="function"?kI:OI)(e,t,n??"")):rl(this.node(),e)}function rl(e,t){return e.style.getPropertyValue(t)||Zw(e).getComputedStyle(e,null).getPropertyValue(t)}function PI(e){return function(){delete this[e]}}function LI(e,t){return function(){this[e]=t}}function UI(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function zI(e,t){return arguments.length>1?this.each((t==null?PI:typeof t=="function"?UI:LI)(e,t)):this.node()[e]}function Ww(e){return e.trim().split(/^|\s+/)}function zp(e){return e.classList||new Jw(e)}function Jw(e){this._node=e,this._names=Ww(e.getAttribute("class")||"")}Jw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function tS(e,t){for(var n=zp(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function eS(e,t){for(var n=zp(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function BI(e){return function(){tS(this,e)}}function HI(e){return function(){eS(this,e)}}function qI(e,t){return function(){(t.apply(this,arguments)?tS:eS)(this,e)}}function FI(e,t){var n=Ww(e+"");if(arguments.length<2){for(var r=zp(this.node()),o=-1,l=n.length;++o<l;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?qI:t?BI:HI)(n,t))}function jI(){this.textContent=""}function GI(e){return function(){this.textContent=e}}function $I(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function YI(e){return arguments.length?this.each(e==null?jI:(typeof e=="function"?$I:GI)(e)):this.node().textContent}function KI(){this.innerHTML=""}function XI(e){return function(){this.innerHTML=e}}function QI(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ZI(e){return arguments.length?this.each(e==null?KI:(typeof e=="function"?QI:XI)(e)):this.node().innerHTML}function WI(){this.nextSibling&&this.parentNode.appendChild(this)}function JI(){return this.each(WI)}function t2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function e2(){return this.each(t2)}function n2(e){var t=typeof e=="function"?e:$w(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function i2(){return null}function r2(e,t){var n=typeof e=="function"?e:$w(e),r=t==null?i2:typeof t=="function"?t:Up(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function s2(){var e=this.parentNode;e&&e.removeChild(this)}function o2(){return this.each(s2)}function a2(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function l2(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function u2(e){return this.select(e?l2:a2)}function c2(e){return arguments.length?this.property("__data__",e):this.node().__data__}function h2(e){return function(t){e.call(this,t,this.__data__)}}function f2(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function d2(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,l;n<o;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++r]=l;++r?t.length=r:delete this.__on}}}function g2(e,t,n){return function(){var r=this.__on,o,l=h2(t);if(r){for(var c=0,d=r.length;c<d;++c)if((o=r[c]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=l,o.options=n),o.value=t;return}}this.addEventListener(e.type,l,n),o={type:e.type,name:e.name,value:t,listener:l,options:n},r?r.push(o):this.__on=[o]}}function m2(e,t,n){var r=f2(e+""),o,l=r.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var g=0,m=d.length,y;g<m;++g)for(o=0,y=d[g];o<l;++o)if((c=r[o]).type===y.type&&c.name===y.name)return y.value}return}for(d=t?g2:d2,o=0;o<l;++o)this.each(d(r[o],t,n));return this}function nS(e,t,n){var r=Zw(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function p2(e,t){return function(){return nS(this,e,t)}}function y2(e,t){return function(){return nS(this,e,t.apply(this,arguments))}}function _2(e,t){return this.each((typeof t=="function"?y2:p2)(e,t))}function*v2(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,l=r.length,c;o<l;++o)(c=r[o])&&(yield c)}var iS=[null];function ti(e,t){this._groups=e,this._parents=t}function cc(){return new ti([[document.documentElement]],iS)}function E2(){return this}ti.prototype=cc.prototype={constructor:ti,select:$C,selectAll:QC,selectChild:tI,selectChildren:rI,filter:sI,data:hI,enter:oI,exit:dI,join:gI,merge:mI,selection:E2,order:pI,sort:yI,call:vI,nodes:EI,node:TI,size:wI,empty:SI,each:bI,attr:DI,style:VI,property:zI,classed:FI,text:YI,html:ZI,raise:JI,lower:e2,append:n2,insert:r2,remove:o2,clone:u2,datum:c2,on:m2,dispatch:_2,[Symbol.iterator]:v2};function vi(e){return typeof e=="string"?new ti([[document.querySelector(e)]],[document.documentElement]):new ti([[e]],iS)}function T2(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Di(e,t){if(e=T2(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const w2={passive:!1},ju={capture:!0,passive:!1};function Cm(e){e.stopImmediatePropagation()}function Ka(e){e.preventDefault(),e.stopImmediatePropagation()}function rS(e){var t=e.document.documentElement,n=vi(e).on("dragstart.drag",Ka,ju);"onselectstart"in t?n.on("selectstart.drag",Ka,ju):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function sS(e,t){var n=e.document.documentElement,r=vi(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ka,ju),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Hh=e=>()=>e;function Qm(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:l,x:c,y:d,dx:g,dy:m,dispatch:y}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:y}})}Qm.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function S2(e){return!e.ctrlKey&&!e.button}function b2(){return this.parentNode}function A2(e,t){return t??{x:e.x,y:e.y}}function R2(){return navigator.maxTouchPoints||"ontouchstart"in this}function C2(){var e=S2,t=b2,n=A2,r=R2,o={},l=$f("start","drag","end"),c=0,d,g,m,y,v=0;function E(z){z.on("mousedown.drag",S).filter(r).on("touchstart.drag",M).on("touchmove.drag",B,w2).on("touchend.drag touchcancel.drag",F).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(z,q){if(!(y||!e.call(this,z,q))){var Z=X(this,t.call(this,z,q),z,q,"mouse");Z&&(vi(z.view).on("mousemove.drag",D,ju).on("mouseup.drag",V,ju),rS(z.view),Cm(z),m=!1,d=z.clientX,g=z.clientY,Z("start",z))}}function D(z){if(Ka(z),!m){var q=z.clientX-d,Z=z.clientY-g;m=q*q+Z*Z>v}o.mouse("drag",z)}function V(z){vi(z.view).on("mousemove.drag mouseup.drag",null),sS(z.view,m),Ka(z),o.mouse("end",z)}function M(z,q){if(e.call(this,z,q)){var Z=z.changedTouches,x=t.call(this,z,q),b=Z.length,C,P;for(C=0;C<b;++C)(P=X(this,x,z,q,Z[C].identifier,Z[C]))&&(Cm(z),P("start",z,Z[C]))}}function B(z){var q=z.changedTouches,Z=q.length,x,b;for(x=0;x<Z;++x)(b=o[q[x].identifier])&&(Ka(z),b("drag",z,q[x]))}function F(z){var q=z.changedTouches,Z=q.length,x,b;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),x=0;x<Z;++x)(b=o[q[x].identifier])&&(Cm(z),b("end",z,q[x]))}function X(z,q,Z,x,b,C){var P=l.copy(),L=Di(C||Z,q),U,R,k;if((k=n.call(z,new Qm("beforestart",{sourceEvent:Z,target:E,identifier:b,active:c,x:L[0],y:L[1],dx:0,dy:0,dispatch:P}),x))!=null)return U=k.x-L[0]||0,R=k.y-L[1]||0,function K(O,$,rt){var Q=L,N;switch(O){case"start":o[b]=K,N=c++;break;case"end":delete o[b],--c;case"drag":L=Di(rt||$,q),N=c;break}P.call(O,z,new Qm(O,{sourceEvent:$,subject:k,target:E,identifier:b,active:N,x:L[0]+U,y:L[1]+R,dx:L[0]-Q[0],dy:L[1]-Q[1],dispatch:P}),x)}}return E.filter=function(z){return arguments.length?(e=typeof z=="function"?z:Hh(!!z),E):e},E.container=function(z){return arguments.length?(t=typeof z=="function"?z:Hh(z),E):t},E.subject=function(z){return arguments.length?(n=typeof z=="function"?z:Hh(z),E):n},E.touchable=function(z){return arguments.length?(r=typeof z=="function"?z:Hh(!!z),E):r},E.on=function(){var z=l.on.apply(l,arguments);return z===l?E:z},E.clickDistance=function(z){return arguments.length?(v=(z=+z)*z,E):Math.sqrt(v)},E}function Bp(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function oS(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function hc(){}var Gu=.7,vf=1/Gu,Xa="\\s*([+-]?\\d+)\\s*",$u="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",or="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",I2=/^#([0-9a-f]{3,8})$/,x2=new RegExp(`^rgb\\(${Xa},${Xa},${Xa}\\)$`),N2=new RegExp(`^rgb\\(${or},${or},${or}\\)$`),D2=new RegExp(`^rgba\\(${Xa},${Xa},${Xa},${$u}\\)$`),M2=new RegExp(`^rgba\\(${or},${or},${or},${$u}\\)$`),O2=new RegExp(`^hsl\\(${$u},${or},${or}\\)$`),k2=new RegExp(`^hsla\\(${$u},${or},${or},${$u}\\)$`),AE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bp(hc,Yu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:RE,formatHex:RE,formatHex8:V2,formatHsl:P2,formatRgb:CE,toString:CE});function RE(){return this.rgb().formatHex()}function V2(){return this.rgb().formatHex8()}function P2(){return aS(this).formatHsl()}function CE(){return this.rgb().formatRgb()}function Yu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=I2.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?IE(t):n===3?new Ln(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?qh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?qh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=x2.exec(e))?new Ln(t[1],t[2],t[3],1):(t=N2.exec(e))?new Ln(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=D2.exec(e))?qh(t[1],t[2],t[3],t[4]):(t=M2.exec(e))?qh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=O2.exec(e))?DE(t[1],t[2]/100,t[3]/100,1):(t=k2.exec(e))?DE(t[1],t[2]/100,t[3]/100,t[4]):AE.hasOwnProperty(e)?IE(AE[e]):e==="transparent"?new Ln(NaN,NaN,NaN,0):null}function IE(e){return new Ln(e>>16&255,e>>8&255,e&255,1)}function qh(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ln(e,t,n,r)}function L2(e){return e instanceof hc||(e=Yu(e)),e?(e=e.rgb(),new Ln(e.r,e.g,e.b,e.opacity)):new Ln}function Zm(e,t,n,r){return arguments.length===1?L2(e):new Ln(e,t,n,r??1)}function Ln(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Bp(Ln,Zm,oS(hc,{brighter(e){return e=e==null?vf:Math.pow(vf,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Gu:Math.pow(Gu,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ln(Mo(this.r),Mo(this.g),Mo(this.b),Ef(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xE,formatHex:xE,formatHex8:U2,formatRgb:NE,toString:NE}));function xE(){return`#${xo(this.r)}${xo(this.g)}${xo(this.b)}`}function U2(){return`#${xo(this.r)}${xo(this.g)}${xo(this.b)}${xo((isNaN(this.opacity)?1:this.opacity)*255)}`}function NE(){const e=Ef(this.opacity);return`${e===1?"rgb(":"rgba("}${Mo(this.r)}, ${Mo(this.g)}, ${Mo(this.b)}${e===1?")":`, ${e})`}`}function Ef(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Mo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xo(e){return e=Mo(e),(e<16?"0":"")+e.toString(16)}function DE(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Mi(e,t,n,r)}function aS(e){if(e instanceof Mi)return new Mi(e.h,e.s,e.l,e.opacity);if(e instanceof hc||(e=Yu(e)),!e)return new Mi;if(e instanceof Mi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),l=Math.max(t,n,r),c=NaN,d=l-o,g=(l+o)/2;return d?(t===l?c=(n-r)/d+(n<r)*6:n===l?c=(r-t)/d+2:c=(t-n)/d+4,d/=g<.5?l+o:2-l-o,c*=60):d=g>0&&g<1?0:c,new Mi(c,d,g,e.opacity)}function z2(e,t,n,r){return arguments.length===1?aS(e):new Mi(e,t,n,r??1)}function Mi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Bp(Mi,z2,oS(hc,{brighter(e){return e=e==null?vf:Math.pow(vf,e),new Mi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gu:Math.pow(Gu,e),new Mi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Ln(Im(e>=240?e-240:e+120,o,r),Im(e,o,r),Im(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Mi(ME(this.h),Fh(this.s),Fh(this.l),Ef(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ef(this.opacity);return`${e===1?"hsl(":"hsla("}${ME(this.h)}, ${Fh(this.s)*100}%, ${Fh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ME(e){return e=(e||0)%360,e<0?e+360:e}function Fh(e){return Math.max(0,Math.min(1,e||0))}function Im(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const lS=e=>()=>e;function B2(e,t){return function(n){return e+n*t}}function H2(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function q2(e){return(e=+e)==1?uS:function(t,n){return n-t?H2(t,n,e):lS(isNaN(t)?n:t)}}function uS(e,t){var n=t-e;return n?B2(e,n):lS(isNaN(e)?t:e)}const OE=function e(t){var n=q2(t);function r(o,l){var c=n((o=Zm(o)).r,(l=Zm(l)).r),d=n(o.g,l.g),g=n(o.b,l.b),m=uS(o.opacity,l.opacity);return function(y){return o.r=c(y),o.g=d(y),o.b=g(y),o.opacity=m(y),o+""}}return r.gamma=e,r}(1);function bs(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Wm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xm=new RegExp(Wm.source,"g");function F2(e){return function(){return e}}function j2(e){return function(t){return e(t)+""}}function G2(e,t){var n=Wm.lastIndex=xm.lastIndex=0,r,o,l,c=-1,d=[],g=[];for(e=e+"",t=t+"";(r=Wm.exec(e))&&(o=xm.exec(t));)(l=o.index)>n&&(l=t.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(r=r[0])===(o=o[0])?d[c]?d[c]+=o:d[++c]=o:(d[++c]=null,g.push({i:c,x:bs(r,o)})),n=xm.lastIndex;return n<t.length&&(l=t.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?g[0]?j2(g[0].x):F2(t):(t=g.length,function(m){for(var y=0,v;y<t;++y)d[(v=g[y]).i]=v.x(m);return d.join("")})}var kE=180/Math.PI,Jm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cS(e,t,n,r,o,l){var c,d,g;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(g=e*n+t*r)&&(n-=e*g,r-=t*g),(d=Math.sqrt(n*n+r*r))&&(n/=d,r/=d,g/=d),e*r<t*n&&(e=-e,t=-t,g=-g,c=-c),{translateX:o,translateY:l,rotate:Math.atan2(t,e)*kE,skewX:Math.atan(g)*kE,scaleX:c,scaleY:d}}var jh;function $2(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Jm:cS(t.a,t.b,t.c,t.d,t.e,t.f)}function Y2(e){return e==null||(jh||(jh=document.createElementNS("http://www.w3.org/2000/svg","g")),jh.setAttribute("transform",e),!(e=jh.transform.baseVal.consolidate()))?Jm:(e=e.matrix,cS(e.a,e.b,e.c,e.d,e.e,e.f))}function hS(e,t,n,r){function o(m){return m.length?m.pop()+" ":""}function l(m,y,v,E,S,D){if(m!==v||y!==E){var V=S.push("translate(",null,t,null,n);D.push({i:V-4,x:bs(m,v)},{i:V-2,x:bs(y,E)})}else(v||E)&&S.push("translate("+v+t+E+n)}function c(m,y,v,E){m!==y?(m-y>180?y+=360:y-m>180&&(m+=360),E.push({i:v.push(o(v)+"rotate(",null,r)-2,x:bs(m,y)})):y&&v.push(o(v)+"rotate("+y+r)}function d(m,y,v,E){m!==y?E.push({i:v.push(o(v)+"skewX(",null,r)-2,x:bs(m,y)}):y&&v.push(o(v)+"skewX("+y+r)}function g(m,y,v,E,S,D){if(m!==v||y!==E){var V=S.push(o(S)+"scale(",null,",",null,")");D.push({i:V-4,x:bs(m,v)},{i:V-2,x:bs(y,E)})}else(v!==1||E!==1)&&S.push(o(S)+"scale("+v+","+E+")")}return function(m,y){var v=[],E=[];return m=e(m),y=e(y),l(m.translateX,m.translateY,y.translateX,y.translateY,v,E),c(m.rotate,y.rotate,v,E),d(m.skewX,y.skewX,v,E),g(m.scaleX,m.scaleY,y.scaleX,y.scaleY,v,E),m=y=null,function(S){for(var D=-1,V=E.length,M;++D<V;)v[(M=E[D]).i]=M.x(S);return v.join("")}}}var K2=hS($2,"px, ","px)","deg)"),X2=hS(Y2,", ",")",")"),Q2=1e-12;function VE(e){return((e=Math.exp(e))+1/e)/2}function Z2(e){return((e=Math.exp(e))-1/e)/2}function W2(e){return((e=Math.exp(2*e))-1)/(e+1)}const J2=function e(t,n,r){function o(l,c){var d=l[0],g=l[1],m=l[2],y=c[0],v=c[1],E=c[2],S=y-d,D=v-g,V=S*S+D*D,M,B;if(V<Q2)B=Math.log(E/m)/t,M=function(x){return[d+x*S,g+x*D,m*Math.exp(t*x*B)]};else{var F=Math.sqrt(V),X=(E*E-m*m+r*V)/(2*m*n*F),z=(E*E-m*m-r*V)/(2*E*n*F),q=Math.log(Math.sqrt(X*X+1)-X),Z=Math.log(Math.sqrt(z*z+1)-z);B=(Z-q)/t,M=function(x){var b=x*B,C=VE(q),P=m/(n*F)*(C*W2(t*b+q)-Z2(q));return[d+P*S,g+P*D,m*C/VE(t*b+q)]}}return M.duration=B*1e3*t/Math.SQRT2,M}return o.rho=function(l){var c=Math.max(.001,+l),d=c*c,g=d*d;return e(c,d,g)},o}(Math.SQRT2,2,4);var sl=0,Nu=0,Au=0,fS=1e3,Tf,Du,wf=0,ko=0,Kf=0,Ku=typeof performance=="object"&&performance.now?performance:Date,dS=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Hp(){return ko||(dS(tx),ko=Ku.now()+Kf)}function tx(){ko=0}function Sf(){this._call=this._time=this._next=null}Sf.prototype=gS.prototype={constructor:Sf,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Hp():+n)+(t==null?0:+t),!this._next&&Du!==this&&(Du?Du._next=this:Tf=this,Du=this),this._call=e,this._time=n,tp()},stop:function(){this._call&&(this._call=null,this._time=1/0,tp())}};function gS(e,t,n){var r=new Sf;return r.restart(e,t,n),r}function ex(){Hp(),++sl;for(var e=Tf,t;e;)(t=ko-e._time)>=0&&e._call.call(void 0,t),e=e._next;--sl}function PE(){ko=(wf=Ku.now())+Kf,sl=Nu=0;try{ex()}finally{sl=0,ix(),ko=0}}function nx(){var e=Ku.now(),t=e-wf;t>fS&&(Kf-=t,wf=e)}function ix(){for(var e,t=Tf,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Tf=n);Du=e,tp(r)}function tp(e){if(!sl){Nu&&(Nu=clearTimeout(Nu));var t=e-ko;t>24?(e<1/0&&(Nu=setTimeout(PE,e-Ku.now()-Kf)),Au&&(Au=clearInterval(Au))):(Au||(wf=Ku.now(),Au=setInterval(nx,fS)),sl=1,dS(PE))}}function LE(e,t,n){var r=new Sf;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var rx=$f("start","end","cancel","interrupt"),sx=[],mS=0,UE=1,ep=2,sf=3,zE=4,np=5,of=6;function Xf(e,t,n,r,o,l){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;ox(e,n,{name:t,index:r,group:o,on:rx,tween:sx,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:mS})}function qp(e,t){var n=Li(e,t);if(n.state>mS)throw new Error("too late; already scheduled");return n}function fr(e,t){var n=Li(e,t);if(n.state>sf)throw new Error("too late; already running");return n}function Li(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ox(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=gS(l,0,n.time);function l(m){n.state=UE,n.timer.restart(c,n.delay,n.time),n.delay<=m&&c(m-n.delay)}function c(m){var y,v,E,S;if(n.state!==UE)return g();for(y in r)if(S=r[y],S.name===n.name){if(S.state===sf)return LE(c);S.state===zE?(S.state=of,S.timer.stop(),S.on.call("interrupt",e,e.__data__,S.index,S.group),delete r[y]):+y<t&&(S.state=of,S.timer.stop(),S.on.call("cancel",e,e.__data__,S.index,S.group),delete r[y])}if(LE(function(){n.state===sf&&(n.state=zE,n.timer.restart(d,n.delay,n.time),d(m))}),n.state=ep,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ep){for(n.state=sf,o=new Array(E=n.tween.length),y=0,v=-1;y<E;++y)(S=n.tween[y].value.call(e,e.__data__,n.index,n.group))&&(o[++v]=S);o.length=v+1}}function d(m){for(var y=m<n.duration?n.ease.call(null,m/n.duration):(n.timer.restart(g),n.state=np,1),v=-1,E=o.length;++v<E;)o[v].call(e,y);n.state===np&&(n.on.call("end",e,e.__data__,n.index,n.group),g())}function g(){n.state=of,n.timer.stop(),delete r[t];for(var m in r)return;delete e.__transition}}function af(e,t){var n=e.__transition,r,o,l=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((r=n[c]).name!==t){l=!1;continue}o=r.state>ep&&r.state<np,r.state=of,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[c]}l&&delete e.__transition}}function ax(e){return this.each(function(){af(this,e)})}function lx(e,t){var n,r;return function(){var o=fr(this,e),l=o.tween;if(l!==n){r=n=l;for(var c=0,d=r.length;c<d;++c)if(r[c].name===t){r=r.slice(),r.splice(c,1);break}}o.tween=r}}function ux(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var l=fr(this,e),c=l.tween;if(c!==r){o=(r=c).slice();for(var d={name:t,value:n},g=0,m=o.length;g<m;++g)if(o[g].name===t){o[g]=d;break}g===m&&o.push(d)}l.tween=o}}function cx(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Li(this.node(),n).tween,o=0,l=r.length,c;o<l;++o)if((c=r[o]).name===e)return c.value;return null}return this.each((t==null?lx:ux)(n,e,t))}function Fp(e,t,n){var r=e._id;return e.each(function(){var o=fr(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Li(o,r).value[t]}}function pS(e,t){var n;return(typeof t=="number"?bs:t instanceof Yu?OE:(n=Yu(t))?(t=n,OE):G2)(e,t)}function hx(e){return function(){this.removeAttribute(e)}}function fx(e){return function(){this.removeAttributeNS(e.space,e.local)}}function dx(e,t,n){var r,o=n+"",l;return function(){var c=this.getAttribute(e);return c===o?null:c===r?l:l=t(r=c,n)}}function gx(e,t,n){var r,o=n+"",l;return function(){var c=this.getAttributeNS(e.space,e.local);return c===o?null:c===r?l:l=t(r=c,n)}}function mx(e,t,n){var r,o,l;return function(){var c,d=n(this),g;return d==null?void this.removeAttribute(e):(c=this.getAttribute(e),g=d+"",c===g?null:c===r&&g===o?l:(o=g,l=t(r=c,d)))}}function px(e,t,n){var r,o,l;return function(){var c,d=n(this),g;return d==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),g=d+"",c===g?null:c===r&&g===o?l:(o=g,l=t(r=c,d)))}}function yx(e,t){var n=Yf(e),r=n==="transform"?X2:pS;return this.attrTween(e,typeof t=="function"?(n.local?px:mx)(n,r,Fp(this,"attr."+e,t)):t==null?(n.local?fx:hx)(n):(n.local?gx:dx)(n,r,t))}function _x(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function vx(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ex(e,t){var n,r;function o(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&vx(e,l)),n}return o._value=t,o}function Tx(e,t){var n,r;function o(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&_x(e,l)),n}return o._value=t,o}function wx(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Yf(e);return this.tween(n,(r.local?Ex:Tx)(r,t))}function Sx(e,t){return function(){qp(this,e).delay=+t.apply(this,arguments)}}function bx(e,t){return t=+t,function(){qp(this,e).delay=t}}function Ax(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Sx:bx)(t,e)):Li(this.node(),t).delay}function Rx(e,t){return function(){fr(this,e).duration=+t.apply(this,arguments)}}function Cx(e,t){return t=+t,function(){fr(this,e).duration=t}}function Ix(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rx:Cx)(t,e)):Li(this.node(),t).duration}function xx(e,t){if(typeof t!="function")throw new Error;return function(){fr(this,e).ease=t}}function Nx(e){var t=this._id;return arguments.length?this.each(xx(t,e)):Li(this.node(),t).ease}function Dx(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;fr(this,e).ease=n}}function Mx(e){if(typeof e!="function")throw new Error;return this.each(Dx(this._id,e))}function Ox(e){typeof e!="function"&&(e=Kw(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var l=t[o],c=l.length,d=r[o]=[],g,m=0;m<c;++m)(g=l[m])&&e.call(g,g.__data__,m,l)&&d.push(g);return new Fr(r,this._parents,this._name,this._id)}function kx(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,l=Math.min(r,o),c=new Array(r),d=0;d<l;++d)for(var g=t[d],m=n[d],y=g.length,v=c[d]=new Array(y),E,S=0;S<y;++S)(E=g[S]||m[S])&&(v[S]=E);for(;d<r;++d)c[d]=t[d];return new Fr(c,this._parents,this._name,this._id)}function Vx(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Px(e,t,n){var r,o,l=Vx(t)?qp:fr;return function(){var c=l(this,e),d=c.on;d!==r&&(o=(r=d).copy()).on(t,n),c.on=o}}function Lx(e,t){var n=this._id;return arguments.length<2?Li(this.node(),n).on.on(e):this.each(Px(n,e,t))}function Ux(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function zx(){return this.on("end.remove",Ux(this._id))}function Bx(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Up(e));for(var r=this._groups,o=r.length,l=new Array(o),c=0;c<o;++c)for(var d=r[c],g=d.length,m=l[c]=new Array(g),y,v,E=0;E<g;++E)(y=d[E])&&(v=e.call(y,y.__data__,E,d))&&("__data__"in y&&(v.__data__=y.__data__),m[E]=v,Xf(m[E],t,n,E,m,Li(y,n)));return new Fr(l,this._parents,t,n)}function Hx(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Yw(e));for(var r=this._groups,o=r.length,l=[],c=[],d=0;d<o;++d)for(var g=r[d],m=g.length,y,v=0;v<m;++v)if(y=g[v]){for(var E=e.call(y,y.__data__,v,g),S,D=Li(y,n),V=0,M=E.length;V<M;++V)(S=E[V])&&Xf(S,t,n,V,E,D);l.push(E),c.push(y)}return new Fr(l,c,t,n)}var qx=cc.prototype.constructor;function Fx(){return new qx(this._groups,this._parents)}function jx(e,t){var n,r,o;return function(){var l=rl(this,e),c=(this.style.removeProperty(e),rl(this,e));return l===c?null:l===n&&c===r?o:o=t(n=l,r=c)}}function yS(e){return function(){this.style.removeProperty(e)}}function Gx(e,t,n){var r,o=n+"",l;return function(){var c=rl(this,e);return c===o?null:c===r?l:l=t(r=c,n)}}function $x(e,t,n){var r,o,l;return function(){var c=rl(this,e),d=n(this),g=d+"";return d==null&&(g=d=(this.style.removeProperty(e),rl(this,e))),c===g?null:c===r&&g===o?l:(o=g,l=t(r=c,d))}}function Yx(e,t){var n,r,o,l="style."+t,c="end."+l,d;return function(){var g=fr(this,e),m=g.on,y=g.value[l]==null?d||(d=yS(t)):void 0;(m!==n||o!==y)&&(r=(n=m).copy()).on(c,o=y),g.on=r}}function Kx(e,t,n){var r=(e+="")=="transform"?K2:pS;return t==null?this.styleTween(e,jx(e,r)).on("end.style."+e,yS(e)):typeof t=="function"?this.styleTween(e,$x(e,r,Fp(this,"style."+e,t))).each(Yx(this._id,e)):this.styleTween(e,Gx(e,r,t),n).on("end.style."+e,null)}function Xx(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Qx(e,t,n){var r,o;function l(){var c=t.apply(this,arguments);return c!==o&&(r=(o=c)&&Xx(e,c,n)),r}return l._value=t,l}function Zx(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Qx(e,t,n??""))}function Wx(e){return function(){this.textContent=e}}function Jx(e){return function(){var t=e(this);this.textContent=t??""}}function tN(e){return this.tween("text",typeof e=="function"?Jx(Fp(this,"text",e)):Wx(e==null?"":e+""))}function eN(e){return function(t){this.textContent=e.call(this,t)}}function nN(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&eN(o)),t}return r._value=e,r}function iN(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,nN(e))}function rN(){for(var e=this._name,t=this._id,n=_S(),r=this._groups,o=r.length,l=0;l<o;++l)for(var c=r[l],d=c.length,g,m=0;m<d;++m)if(g=c[m]){var y=Li(g,t);Xf(g,e,n,m,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new Fr(r,this._parents,e,n)}function sN(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(l,c){var d={value:c},g={value:function(){--o===0&&l()}};n.each(function(){var m=fr(this,r),y=m.on;y!==e&&(t=(e=y).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(g)),m.on=t}),o===0&&l()})}var oN=0;function Fr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function _S(){return++oN}var Lr=cc.prototype;Fr.prototype={constructor:Fr,select:Bx,selectAll:Hx,selectChild:Lr.selectChild,selectChildren:Lr.selectChildren,filter:Ox,merge:kx,selection:Fx,transition:rN,call:Lr.call,nodes:Lr.nodes,node:Lr.node,size:Lr.size,empty:Lr.empty,each:Lr.each,on:Lx,attr:yx,attrTween:wx,style:Kx,styleTween:Zx,text:tN,textTween:iN,remove:zx,tween:cx,delay:Ax,duration:Ix,ease:Nx,easeVarying:Mx,end:sN,[Symbol.iterator]:Lr[Symbol.iterator]};function aN(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var lN={time:null,delay:0,duration:250,ease:aN};function uN(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function cN(e){var t,n;e instanceof Fr?(t=e._id,e=e._name):(t=_S(),(n=lN).time=Hp(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,l=0;l<o;++l)for(var c=r[l],d=c.length,g,m=0;m<d;++m)(g=c[m])&&Xf(g,e,t,m,c,n||uN(g,t));return new Fr(r,this._parents,e,t)}cc.prototype.interrupt=ax;cc.prototype.transition=cN;const Gh=e=>()=>e;function hN(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Ur(e,t,n){this.k=e,this.x=t,this.y=n}Ur.prototype={constructor:Ur,scale:function(e){return e===1?this:new Ur(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ur(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Hr=new Ur(1,0,0);Ur.prototype;function Nm(e){e.stopImmediatePropagation()}function Ru(e){e.preventDefault(),e.stopImmediatePropagation()}function fN(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function dN(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function BE(){return this.__zoom||Hr}function gN(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function mN(){return navigator.maxTouchPoints||"ontouchstart"in this}function pN(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],l=e.invertY(t[0][1])-n[0][1],c=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function vS(){var e=fN,t=dN,n=pN,r=gN,o=mN,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,g=J2,m=$f("start","zoom","end"),y,v,E,S=500,D=150,V=0,M=10;function B(k){k.property("__zoom",BE).on("wheel.zoom",b,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",P).filter(o).on("touchstart.zoom",L).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}B.transform=function(k,K,O,$){var rt=k.selection?k.selection():k;rt.property("__zoom",BE),k!==rt?q(k,K,O,$):rt.interrupt().each(function(){Z(this,arguments).event($).start().zoom(null,typeof K=="function"?K.apply(this,arguments):K).end()})},B.scaleBy=function(k,K,O,$){B.scaleTo(k,function(){var rt=this.__zoom.k,Q=typeof K=="function"?K.apply(this,arguments):K;return rt*Q},O,$)},B.scaleTo=function(k,K,O,$){B.transform(k,function(){var rt=t.apply(this,arguments),Q=this.__zoom,N=O==null?z(rt):typeof O=="function"?O.apply(this,arguments):O,Y=Q.invert(N),et=typeof K=="function"?K.apply(this,arguments):K;return n(X(F(Q,et),N,Y),rt,c)},O,$)},B.translateBy=function(k,K,O,$){B.transform(k,function(){return n(this.__zoom.translate(typeof K=="function"?K.apply(this,arguments):K,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),c)},null,$)},B.translateTo=function(k,K,O,$,rt){B.transform(k,function(){var Q=t.apply(this,arguments),N=this.__zoom,Y=$==null?z(Q):typeof $=="function"?$.apply(this,arguments):$;return n(Hr.translate(Y[0],Y[1]).scale(N.k).translate(typeof K=="function"?-K.apply(this,arguments):-K,typeof O=="function"?-O.apply(this,arguments):-O),Q,c)},$,rt)};function F(k,K){return K=Math.max(l[0],Math.min(l[1],K)),K===k.k?k:new Ur(K,k.x,k.y)}function X(k,K,O){var $=K[0]-O[0]*k.k,rt=K[1]-O[1]*k.k;return $===k.x&&rt===k.y?k:new Ur(k.k,$,rt)}function z(k){return[(+k[0][0]+ +k[1][0])/2,(+k[0][1]+ +k[1][1])/2]}function q(k,K,O,$){k.on("start.zoom",function(){Z(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){Z(this,arguments).event($).end()}).tween("zoom",function(){var rt=this,Q=arguments,N=Z(rt,Q).event($),Y=t.apply(rt,Q),et=O==null?z(Y):typeof O=="function"?O.apply(rt,Q):O,st=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),ct=rt.__zoom,pt=typeof K=="function"?K.apply(rt,Q):K,yt=g(ct.invert(et).concat(st/ct.k),pt.invert(et).concat(st/pt.k));return function(Ct){if(Ct===1)Ct=pt;else{var At=yt(Ct),Vt=st/At[2];Ct=new Ur(Vt,et[0]-At[0]*Vt,et[1]-At[1]*Vt)}N.zoom(null,Ct)}})}function Z(k,K,O){return!O&&k.__zooming||new x(k,K)}function x(k,K){this.that=k,this.args=K,this.active=0,this.sourceEvent=null,this.extent=t.apply(k,K),this.taps=0}x.prototype={event:function(k){return k&&(this.sourceEvent=k),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(k,K){return this.mouse&&k!=="mouse"&&(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&&k!=="touch"&&(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&&k!=="touch"&&(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(k){var K=vi(this.that).datum();m.call(k,this.that,new hN(k,{sourceEvent:this.sourceEvent,target:B,transform:this.that.__zoom,dispatch:m}),K)}};function b(k,...K){if(!e.apply(this,arguments))return;var O=Z(this,K).event(k),$=this.__zoom,rt=Math.max(l[0],Math.min(l[1],$.k*Math.pow(2,r.apply(this,arguments)))),Q=Di(k);if(O.wheel)(O.mouse[0][0]!==Q[0]||O.mouse[0][1]!==Q[1])&&(O.mouse[1]=$.invert(O.mouse[0]=Q)),clearTimeout(O.wheel);else{if($.k===rt)return;O.mouse=[Q,$.invert(Q)],af(this),O.start()}Ru(k),O.wheel=setTimeout(N,D),O.zoom("mouse",n(X(F($,rt),O.mouse[0],O.mouse[1]),O.extent,c));function N(){O.wheel=null,O.end()}}function C(k,...K){if(E||!e.apply(this,arguments))return;var O=k.currentTarget,$=Z(this,K,!0).event(k),rt=vi(k.view).on("mousemove.zoom",et,!0).on("mouseup.zoom",st,!0),Q=Di(k,O),N=k.clientX,Y=k.clientY;rS(k.view),Nm(k),$.mouse=[Q,this.__zoom.invert(Q)],af(this),$.start();function et(ct){if(Ru(ct),!$.moved){var pt=ct.clientX-N,yt=ct.clientY-Y;$.moved=pt*pt+yt*yt>V}$.event(ct).zoom("mouse",n(X($.that.__zoom,$.mouse[0]=Di(ct,O),$.mouse[1]),$.extent,c))}function st(ct){rt.on("mousemove.zoom mouseup.zoom",null),sS(ct.view,$.moved),Ru(ct),$.event(ct).end()}}function P(k,...K){if(e.apply(this,arguments)){var O=this.__zoom,$=Di(k.changedTouches?k.changedTouches[0]:k,this),rt=O.invert($),Q=O.k*(k.shiftKey?.5:2),N=n(X(F(O,Q),$,rt),t.apply(this,K),c);Ru(k),d>0?vi(this).transition().duration(d).call(q,N,$,k):vi(this).call(B.transform,N,$,k)}}function L(k,...K){if(e.apply(this,arguments)){var O=k.touches,$=O.length,rt=Z(this,K,k.changedTouches.length===$).event(k),Q,N,Y,et;for(Nm(k),N=0;N<$;++N)Y=O[N],et=Di(Y,this),et=[et,this.__zoom.invert(et),Y.identifier],rt.touch0?!rt.touch1&&rt.touch0[2]!==et[2]&&(rt.touch1=et,rt.taps=0):(rt.touch0=et,Q=!0,rt.taps=1+!!y);y&&(y=clearTimeout(y)),Q&&(rt.taps<2&&(v=et[0],y=setTimeout(function(){y=null},S)),af(this),rt.start())}}function U(k,...K){if(this.__zooming){var O=Z(this,K).event(k),$=k.changedTouches,rt=$.length,Q,N,Y,et;for(Ru(k),Q=0;Q<rt;++Q)N=$[Q],Y=Di(N,this),O.touch0&&O.touch0[2]===N.identifier?O.touch0[0]=Y:O.touch1&&O.touch1[2]===N.identifier&&(O.touch1[0]=Y);if(N=O.that.__zoom,O.touch1){var st=O.touch0[0],ct=O.touch0[1],pt=O.touch1[0],yt=O.touch1[1],Ct=(Ct=pt[0]-st[0])*Ct+(Ct=pt[1]-st[1])*Ct,At=(At=yt[0]-ct[0])*At+(At=yt[1]-ct[1])*At;N=F(N,Math.sqrt(Ct/At)),Y=[(st[0]+pt[0])/2,(st[1]+pt[1])/2],et=[(ct[0]+yt[0])/2,(ct[1]+yt[1])/2]}else if(O.touch0)Y=O.touch0[0],et=O.touch0[1];else return;O.zoom("touch",n(X(N,Y,et),O.extent,c))}}function R(k,...K){if(this.__zooming){var O=Z(this,K).event(k),$=k.changedTouches,rt=$.length,Q,N;for(Nm(k),E&&clearTimeout(E),E=setTimeout(function(){E=null},S),Q=0;Q<rt;++Q)N=$[Q],O.touch0&&O.touch0[2]===N.identifier?delete O.touch0:O.touch1&&O.touch1[2]===N.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(N=Di(N,this),Math.hypot(v[0]-N[0],v[1]-N[1])<M)){var Y=vi(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return B.wheelDelta=function(k){return arguments.length?(r=typeof k=="function"?k:Gh(+k),B):r},B.filter=function(k){return arguments.length?(e=typeof k=="function"?k:Gh(!!k),B):e},B.touchable=function(k){return arguments.length?(o=typeof k=="function"?k:Gh(!!k),B):o},B.extent=function(k){return arguments.length?(t=typeof k=="function"?k:Gh([[+k[0][0],+k[0][1]],[+k[1][0],+k[1][1]]]),B):t},B.scaleExtent=function(k){return arguments.length?(l[0]=+k[0],l[1]=+k[1],B):[l[0],l[1]]},B.translateExtent=function(k){return arguments.length?(c[0][0]=+k[0][0],c[1][0]=+k[1][0],c[0][1]=+k[0][1],c[1][1]=+k[1][1],B):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},B.constrain=function(k){return arguments.length?(n=k,B):n},B.duration=function(k){return arguments.length?(d=+k,B):d},B.interpolate=function(k){return arguments.length?(g=k,B):g},B.on=function(){var k=m.on.apply(m,arguments);return k===m?B:k},B.clickDistance=function(k){return arguments.length?(V=(k=+k)*k,B):Math.sqrt(V)},B.tapDistance=function(k){return arguments.length?(M=+k,B):M},B}jw();const Qf=j.createContext(null),yN=Qf.Provider,jr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},ES=jr.error001();function me(e,t){const n=j.useContext(Qf);if(n===null)throw new Error(ES);return Gw(n,e,t)}const Ke=()=>{const e=j.useContext(Qf);if(e===null)throw new Error(ES);return j.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},_N=e=>e.userSelectionActive?"none":"all";function jp({position:e,children:t,className:n,style:r,...o}){const l=me(_N),c=`${e}`.split("-");return lt.createElement("div",{className:mn(["react-flow__panel",n,...c]),style:{...r,pointerEvents:l},...o},t)}function vN({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:lt.createElement(jp,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},lt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const EN=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:l={},labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:g,className:m,...y})=>{const v=j.useRef(null),[E,S]=j.useState({x:0,y:0,width:0,height:0}),D=mn(["react-flow__edge-textwrapper",m]);return j.useEffect(()=>{if(v.current){const V=v.current.getBBox();S({x:V.x,y:V.y,width:V.width,height:V.height})}},[n]),typeof n>"u"||!n?null:lt.createElement("g",{transform:`translate(${e-E.width/2} ${t-E.height/2})`,className:D,visibility:E.width?"visible":"hidden",...y},o&&lt.createElement("rect",{width:E.width+2*c[0],x:-c[0],y:-c[1],height:E.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),lt.createElement("text",{className:"react-flow__edge-text",y:E.height/2,dy:"0.3em",ref:v,style:r},n),g)};var TN=j.memo(EN);const Gp=e=>({width:e.offsetWidth,height:e.offsetHeight}),ol=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),$p=(e={x:0,y:0},t)=>({x:ol(e.x,t[0][0],t[1][0]),y:ol(e.y,t[0][1],t[1][1])}),HE=(e,t,n)=>e<t?ol(Math.abs(e-t),1,50)/50:e>n?-ol(Math.abs(e-n),1,50)/50:0,TS=(e,t)=>{const n=HE(e.x,35,t.width-35)*20,r=HE(e.y,35,t.height-35)*20;return[n,r]},wS=e=>e.getRootNode?.()||window?.document,SS=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Xu=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),bS=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),qE=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),wN=(e,t)=>bS(SS(Xu(e),Xu(t))),ip=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},SN=e=>Ti(e.width)&&Ti(e.height)&&Ti(e.x)&&Ti(e.y),Ti=e=>!isNaN(e)&&isFinite(e),Ie=Symbol.for("internals"),AS=["Enter"," ","Escape"],bN=(e,t)=>{},AN=e=>"nativeEvent"in e;function rp(e){const n=(AN(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const RS=e=>"clientX"in e,Ms=(e,t)=>{const n=RS(e),r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},bf=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,fc=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:E,interactionWidth:S=20})=>lt.createElement(lt.Fragment,null,lt.createElement("path",{id:e,style:y,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:E}),S&&lt.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:S,className:"react-flow__edge-interaction"}),o&&Ti(n)&&Ti(r)?lt.createElement(TN,{x:n,y:r,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m}):null);fc.displayName="BaseEdge";function Cu(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(l=>l.id===e);o&&n(r,{...o})}}function CS({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,l=n<e?n+o:n-o,c=Math.abs(r-t)/2,d=r<t?r+c:r-c;return[l,d,o,c]}function IS({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:d}){const g=e*.125+o*.375+c*.375+n*.125,m=t*.125+l*.375+d*.375+r*.125,y=Math.abs(g-e),v=Math.abs(m-t);return[g,m,y,v]}var zs;(function(e){e.Strict="strict",e.Loose="loose"})(zs||(zs={}));var No;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(No||(No={}));var Qu;(function(e){e.Partial="partial",e.Full="full"})(Qu||(Qu={}));var Rs;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Rs||(Rs={}));var Zu;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Zu||(Zu={}));var bt;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(bt||(bt={}));function FE({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===bt.Left||e===bt.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function xS({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:o,targetPosition:l=bt.Top}){const[c,d]=FE({pos:n,x1:e,y1:t,x2:r,y2:o}),[g,m]=FE({pos:l,x1:r,y1:o,x2:e,y2:t}),[y,v,E,S]=IS({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:c,sourceControlY:d,targetControlX:g,targetControlY:m});return[`M${e},${t} C${c},${d} ${g},${m} ${r},${o}`,y,v,E,S]}const Yp=j.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=bt.Bottom,targetPosition:l=bt.Top,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:S,markerStart:D,interactionWidth:V})=>{const[M,B,F]=xS({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:l});return lt.createElement(fc,{path:M,labelX:B,labelY:F,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:S,markerStart:D,interactionWidth:V})});Yp.displayName="SimpleBezierEdge";const jE={[bt.Left]:{x:-1,y:0},[bt.Right]:{x:1,y:0},[bt.Top]:{x:0,y:-1},[bt.Bottom]:{x:0,y:1}},RN=({source:e,sourcePosition:t=bt.Bottom,target:n})=>t===bt.Left||t===bt.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},GE=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function CN({source:e,sourcePosition:t=bt.Bottom,target:n,targetPosition:r=bt.Top,center:o,offset:l}){const c=jE[t],d=jE[r],g={x:e.x+c.x*l,y:e.y+c.y*l},m={x:n.x+d.x*l,y:n.y+d.y*l},y=RN({source:g,sourcePosition:t,target:m}),v=y.x!==0?"x":"y",E=y[v];let S=[],D,V;const M={x:0,y:0},B={x:0,y:0},[F,X,z,q]=CS({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[v]*d[v]===-1){D=o.x??F,V=o.y??X;const x=[{x:D,y:g.y},{x:D,y:m.y}],b=[{x:g.x,y:V},{x:m.x,y:V}];c[v]===E?S=v==="x"?x:b:S=v==="x"?b:x}else{const x=[{x:g.x,y:m.y}],b=[{x:m.x,y:g.y}];if(v==="x"?S=c.x===E?b:x:S=c.y===E?x:b,t===r){const R=Math.abs(e[v]-n[v]);if(R<=l){const k=Math.min(l-1,l-R);c[v]===E?M[v]=(g[v]>e[v]?-1:1)*k:B[v]=(m[v]>n[v]?-1:1)*k}}if(t!==r){const R=v==="x"?"y":"x",k=c[v]===d[R],K=g[R]>m[R],O=g[R]<m[R];(c[v]===1&&(!k&&K||k&&O)||c[v]!==1&&(!k&&O||k&&K))&&(S=v==="x"?x:b)}const C={x:g.x+M.x,y:g.y+M.y},P={x:m.x+B.x,y:m.y+B.y},L=Math.max(Math.abs(C.x-S[0].x),Math.abs(P.x-S[0].x)),U=Math.max(Math.abs(C.y-S[0].y),Math.abs(P.y-S[0].y));L>=U?(D=(C.x+P.x)/2,V=S[0].y):(D=S[0].x,V=(C.y+P.y)/2)}return[[e,{x:g.x+M.x,y:g.y+M.y},...S,{x:m.x+B.x,y:m.y+B.y},n],D,V,z,q]}function IN(e,t,n,r){const o=Math.min(GE(e,t)/2,GE(t,n)/2,r),{x:l,y:c}=t;if(e.x===l&&l===n.x||e.y===c&&c===n.y)return`L${l} ${c}`;if(e.y===c){const m=e.x<n.x?-1:1,y=e.y<n.y?1:-1;return`L ${l+o*m},${c}Q ${l},${c} ${l},${c+o*y}`}const d=e.x<n.x?1:-1,g=e.y<n.y?-1:1;return`L ${l},${c+o*g}Q ${l},${c} ${l+o*d},${c}`}function sp({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:o,targetPosition:l=bt.Top,borderRadius:c=5,centerX:d,centerY:g,offset:m=20}){const[y,v,E,S,D]=CN({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:l,center:{x:d,y:g},offset:m});return[y.reduce((M,B,F)=>{let X="";return F>0&&F<y.length-1?X=IN(y[F-1],B,y[F+1],c):X=`${F===0?"M":"L"}${B.x} ${B.y}`,M+=X,M},""),v,E,S,D]}const Zf=j.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,sourcePosition:v=bt.Bottom,targetPosition:E=bt.Top,markerEnd:S,markerStart:D,pathOptions:V,interactionWidth:M})=>{const[B,F,X]=sp({sourceX:e,sourceY:t,sourcePosition:v,targetX:n,targetY:r,targetPosition:E,borderRadius:V?.borderRadius,offset:V?.offset});return lt.createElement(fc,{path:B,labelX:F,labelY:X,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:S,markerStart:D,interactionWidth:M})});Zf.displayName="SmoothStepEdge";const Kp=j.memo(e=>lt.createElement(Zf,{...e,pathOptions:j.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));Kp.displayName="StepEdge";function xN({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,l,c,d]=CS({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,l,c,d]}const Xp=j.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:E,interactionWidth:S})=>{const[D,V,M]=xN({sourceX:e,sourceY:t,targetX:n,targetY:r});return lt.createElement(fc,{path:D,labelX:V,labelY:M,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:E,interactionWidth:S})});Xp.displayName="StraightEdge";function $h(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function $E({pos:e,x1:t,y1:n,x2:r,y2:o,c:l}){switch(e){case bt.Left:return[t-$h(t-r,l),n];case bt.Right:return[t+$h(r-t,l),n];case bt.Top:return[t,n-$h(n-o,l)];case bt.Bottom:return[t,n+$h(o-n,l)]}}function NS({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:o,targetPosition:l=bt.Top,curvature:c=.25}){const[d,g]=$E({pos:n,x1:e,y1:t,x2:r,y2:o,c}),[m,y]=$E({pos:l,x1:r,y1:o,x2:e,y2:t,c}),[v,E,S,D]=IS({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:d,sourceControlY:g,targetControlX:m,targetControlY:y});return[`M${e},${t} C${d},${g} ${m},${y} ${r},${o}`,v,E,S,D]}const Af=j.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=bt.Bottom,targetPosition:l=bt.Top,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:S,markerStart:D,pathOptions:V,interactionWidth:M})=>{const[B,F,X]=NS({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:l,curvature:V?.curvature});return lt.createElement(fc,{path:B,labelX:F,labelY:X,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:S,markerStart:D,interactionWidth:M})});Af.displayName="BezierEdge";const Qp=j.createContext(null),NN=Qp.Provider;Qp.Consumer;const DN=()=>j.useContext(Qp),MN=e=>"id"in e&&"source"in e&&"target"in e,ON=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,op=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,kN=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),VN=(e,t)=>{if(!e.source||!e.target)return t;let n;return MN(e)?n={...e}:n={...e,id:ON(e)},kN(n,t)?t:t.concat(n)},ap=({x:e,y:t},[n,r,o],l,[c,d])=>{const g={x:(e-n)/o,y:(t-r)/o};return l?{x:c*Math.round(g.x/c),y:d*Math.round(g.y/d)}:g},DS=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),Oo=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},Wf=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const{x:l,y:c}=Oo(o,t).positionAbsolute;return SS(r,Xu({x:l,y:c,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return bS(n)},MS=(e,t,[n,r,o]=[0,0,1],l=!1,c=!1,d=[0,0])=>{const g={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},m=[];return e.forEach(y=>{const{width:v,height:E,selectable:S=!0,hidden:D=!1}=y;if(c&&!S||D)return!1;const{positionAbsolute:V}=Oo(y,d),M={x:V.x,y:V.y,width:v||0,height:E||0},B=ip(g,M),F=typeof v>"u"||typeof E>"u"||v===null||E===null,X=l&&B>0,z=(v||0)*(E||0);(F||X||B>=z||y.dragging)&&m.push(y)}),m},OS=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},kS=(e,t,n,r,o,l=.1)=>{const c=t/(e.width*(1+l)),d=n/(e.height*(1+l)),g=Math.min(c,d),m=ol(g,r,o),y=e.x+e.width/2,v=e.y+e.height/2,E=t/2-y*m,S=n/2-v*m;return{x:E,y:S,zoom:m}},Co=(e,t=0)=>e.transition().duration(t);function YE(e,t,n,r){return(t[n]||[]).reduce((o,l)=>(`${e.id}-${l.id}-${n}`!==r&&o.push({id:l.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+l.x+l.width/2,y:(e.positionAbsolute?.y??0)+l.y+l.height/2}),o),[])}function PN(e,t,n,r,o,l){const{x:c,y:d}=Ms(e),m=t.elementsFromPoint(c,d).find(D=>D.classList.contains("react-flow__handle"));if(m){const D=m.getAttribute("data-nodeid");if(D){const V=Zp(void 0,m),M=m.getAttribute("data-handleid"),B=l({nodeId:D,id:M,type:V});if(B){const F=o.find(X=>X.nodeId===D&&X.type===V&&X.id===M);return{handle:{id:M,type:V,nodeId:D,x:F?.x||n.x,y:F?.y||n.y},validHandleResult:B}}}}let y=[],v=1/0;if(o.forEach(D=>{const V=Math.sqrt((D.x-n.x)**2+(D.y-n.y)**2);if(V<=r){const M=l(D);V<=v&&(V<v?y=[{handle:D,validHandleResult:M}]:V===v&&y.push({handle:D,validHandleResult:M}),v=V)}}),!y.length)return{handle:null,validHandleResult:VS()};if(y.length===1)return y[0];const E=y.some(({validHandleResult:D})=>D.isValid),S=y.some(({handle:D})=>D.type==="target");return y.find(({handle:D,validHandleResult:V})=>S?D.type==="target":E?V.isValid:!0)||y[0]}const LN={source:null,target:null,sourceHandle:null,targetHandle:null},VS=()=>({handleDomNode:null,isValid:!1,connection:LN,endHandle:null});function PS(e,t,n,r,o,l,c){const d=o==="target",g=c.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),m={...VS(),handleDomNode:g};if(g){const y=Zp(void 0,g),v=g.getAttribute("data-nodeid"),E=g.getAttribute("data-handleid"),S=g.classList.contains("connectable"),D=g.classList.contains("connectableend"),V={source:d?v:n,sourceHandle:d?E:r,target:d?n:v,targetHandle:d?r:E};m.connection=V,S&&D&&(t===zs.Strict?d&&y==="source"||!d&&y==="target":v!==n||E!==r)&&(m.endHandle={nodeId:v,handleId:E,type:y},m.isValid=l(V))}return m}function UN({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((o,l)=>{if(l[Ie]){const{handleBounds:c}=l[Ie];let d=[],g=[];c&&(d=YE(l,c,"source",`${t}-${n}-${r}`),g=YE(l,c,"target",`${t}-${n}-${r}`)),o.push(...d,...g)}return o},[])}function Zp(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Dm(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function zN(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function LS({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:l,setState:c,isValidConnection:d,edgeUpdaterType:g,onReconnectEnd:m}){const y=wS(e.target),{connectionMode:v,domNode:E,autoPanOnConnect:S,connectionRadius:D,onConnectStart:V,panBy:M,getNodes:B,cancelConnection:F}=l();let X=0,z;const{x:q,y:Z}=Ms(e),x=y?.elementFromPoint(q,Z),b=Zp(g,x),C=E?.getBoundingClientRect();if(!C||!b)return;let P,L=Ms(e,C),U=!1,R=null,k=!1,K=null;const O=UN({nodes:B(),nodeId:n,handleId:t,handleType:b}),$=()=>{if(!S)return;const[N,Y]=TS(L,C);M({x:N,y:Y}),X=requestAnimationFrame($)};c({connectionPosition:L,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:b,connectionStartHandle:{nodeId:n,handleId:t,type:b},connectionEndHandle:null}),V?.(e,{nodeId:n,handleId:t,handleType:b});function rt(N){const{transform:Y}=l();L=Ms(N,C);const{handle:et,validHandleResult:st}=PN(N,y,ap(L,Y,!1,[1,1]),D,O,ct=>PS(ct,v,n,t,o?"target":"source",d,y));if(z=et,U||($(),U=!0),K=st.handleDomNode,R=st.connection,k=st.isValid,c({connectionPosition:z&&k?DS({x:z.x,y:z.y},Y):L,connectionStatus:zN(!!z,k),connectionEndHandle:st.endHandle}),!z&&!k&&!K)return Dm(P);R.source!==R.target&&K&&(Dm(P),P=K,K.classList.add("connecting","react-flow__handle-connecting"),K.classList.toggle("valid",k),K.classList.toggle("react-flow__handle-valid",k))}function Q(N){(z||K)&&R&&k&&r?.(R),l().onConnectEnd?.(N),g&&m?.(N),Dm(P),F(),cancelAnimationFrame(X),U=!1,k=!1,R=null,K=null,y.removeEventListener("mousemove",rt),y.removeEventListener("mouseup",Q),y.removeEventListener("touchmove",rt),y.removeEventListener("touchend",Q)}y.addEventListener("mousemove",rt),y.addEventListener("mouseup",Q),y.addEventListener("touchmove",rt),y.addEventListener("touchend",Q)}const KE=()=>!0,BN=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),HN=(e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:l,connectionClickStartHandle:c}=r;return{connecting:o?.nodeId===e&&o?.handleId===t&&o?.type===n||l?.nodeId===e&&l?.handleId===t&&l?.type===n,clickConnecting:c?.nodeId===e&&c?.handleId===t&&c?.type===n}},US=j.forwardRef(({type:e="source",position:t=bt.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:g,className:m,onMouseDown:y,onTouchStart:v,...E},S)=>{const D=c||null,V=e==="target",M=Ke(),B=DN(),{connectOnClick:F,noPanClassName:X}=me(BN,sn),{connecting:z,clickConnecting:q}=me(HN(B,D,e),sn);B||M.getState().onError?.("010",jr.error010());const Z=C=>{const{defaultEdgeOptions:P,onConnect:L,hasDefaultEdges:U}=M.getState(),R={...P,...C};if(U){const{edges:k,setEdges:K}=M.getState();K(VN(R,k))}L?.(R),d?.(R)},x=C=>{if(!B)return;const P=RS(C);o&&(P&&C.button===0||!P)&&LS({event:C,handleId:D,nodeId:B,onConnect:Z,isTarget:V,getState:M.getState,setState:M.setState,isValidConnection:n||M.getState().isValidConnection||KE}),P?y?.(C):v?.(C)},b=C=>{const{onClickConnectStart:P,onClickConnectEnd:L,connectionClickStartHandle:U,connectionMode:R,isValidConnection:k}=M.getState();if(!B||!U&&!o)return;if(!U){P?.(C,{nodeId:B,handleId:D,handleType:e}),M.setState({connectionClickStartHandle:{nodeId:B,type:e,handleId:D}});return}const K=wS(C.target),O=n||k||KE,{connection:$,isValid:rt}=PS({nodeId:B,id:D,type:e},R,U.nodeId,U.handleId||null,U.type,O,K);rt&&Z($),L?.(C),M.setState({connectionClickStartHandle:null})};return lt.createElement("div",{"data-handleid":D,"data-nodeid":B,"data-handlepos":t,"data-id":`${B}-${D}-${e}`,className:mn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",X,m,{source:!V,target:V,connectable:r,connectablestart:o,connectableend:l,connecting:q,connectionindicator:r&&(o&&!z||l&&z)}]),onMouseDown:x,onTouchStart:x,onClick:F?b:void 0,ref:S,...E},g)});US.displayName="Handle";var Vo=j.memo(US);const zS=({data:e,isConnectable:t,targetPosition:n=bt.Top,sourcePosition:r=bt.Bottom})=>lt.createElement(lt.Fragment,null,lt.createElement(Vo,{type:"target",position:n,isConnectable:t}),e?.label,lt.createElement(Vo,{type:"source",position:r,isConnectable:t}));zS.displayName="DefaultNode";var lp=j.memo(zS);const BS=({data:e,isConnectable:t,sourcePosition:n=bt.Bottom})=>lt.createElement(lt.Fragment,null,e?.label,lt.createElement(Vo,{type:"source",position:n,isConnectable:t}));BS.displayName="InputNode";var HS=j.memo(BS);const qS=({data:e,isConnectable:t,targetPosition:n=bt.Top})=>lt.createElement(lt.Fragment,null,lt.createElement(Vo,{type:"target",position:n,isConnectable:t}),e?.label);qS.displayName="OutputNode";var FS=j.memo(qS);const Wp=()=>null;Wp.displayName="GroupNode";const qN=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Yh=e=>e.id;function FN(e,t){return sn(e.selectedNodes.map(Yh),t.selectedNodes.map(Yh))&&sn(e.selectedEdges.map(Yh),t.selectedEdges.map(Yh))}const jS=j.memo(({onSelectionChange:e})=>{const t=Ke(),{selectedNodes:n,selectedEdges:r}=me(qN,FN);return j.useEffect(()=>{const o={nodes:n,edges:r};e?.(o),t.getState().onSelectionChange.forEach(l=>l(o))},[n,r,e]),null});jS.displayName="SelectionListener";const jN=e=>!!e.onSelectionChange;function GN({onSelectionChange:e}){const t=me(jN);return e||t?lt.createElement(jS,{onSelectionChange:e}):null}const $N=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function La(e,t){j.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function qt(e,t,n){j.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const YN=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:l,onConnectEnd:c,onClickConnectStart:d,onClickConnectEnd:g,nodesDraggable:m,nodesConnectable:y,nodesFocusable:v,edgesFocusable:E,edgesUpdatable:S,elevateNodesOnSelect:D,minZoom:V,maxZoom:M,nodeExtent:B,onNodesChange:F,onEdgesChange:X,elementsSelectable:z,connectionMode:q,snapGrid:Z,snapToGrid:x,translateExtent:b,connectOnClick:C,defaultEdgeOptions:P,fitView:L,fitViewOptions:U,onNodesDelete:R,onEdgesDelete:k,onNodeDrag:K,onNodeDragStart:O,onNodeDragStop:$,onSelectionDrag:rt,onSelectionDragStart:Q,onSelectionDragStop:N,noPanClassName:Y,nodeOrigin:et,rfId:st,autoPanOnConnect:ct,autoPanOnNodeDrag:pt,onError:yt,connectionRadius:Ct,isValidConnection:At,nodeDragThreshold:Vt})=>{const{setNodes:Pt,setEdges:ue,setDefaultNodesAndEdges:ce,setMinZoom:Ee,setMaxZoom:_e,setTranslateExtent:he,setNodeExtent:Xe,reset:Lt}=me($N,sn),wt=Ke();return j.useEffect(()=>{const xe=r?.map(pn=>({...pn,...P}));return ce(n,xe),()=>{Lt()}},[]),qt("defaultEdgeOptions",P,wt.setState),qt("connectionMode",q,wt.setState),qt("onConnect",o,wt.setState),qt("onConnectStart",l,wt.setState),qt("onConnectEnd",c,wt.setState),qt("onClickConnectStart",d,wt.setState),qt("onClickConnectEnd",g,wt.setState),qt("nodesDraggable",m,wt.setState),qt("nodesConnectable",y,wt.setState),qt("nodesFocusable",v,wt.setState),qt("edgesFocusable",E,wt.setState),qt("edgesUpdatable",S,wt.setState),qt("elementsSelectable",z,wt.setState),qt("elevateNodesOnSelect",D,wt.setState),qt("snapToGrid",x,wt.setState),qt("snapGrid",Z,wt.setState),qt("onNodesChange",F,wt.setState),qt("onEdgesChange",X,wt.setState),qt("connectOnClick",C,wt.setState),qt("fitViewOnInit",L,wt.setState),qt("fitViewOnInitOptions",U,wt.setState),qt("onNodesDelete",R,wt.setState),qt("onEdgesDelete",k,wt.setState),qt("onNodeDrag",K,wt.setState),qt("onNodeDragStart",O,wt.setState),qt("onNodeDragStop",$,wt.setState),qt("onSelectionDrag",rt,wt.setState),qt("onSelectionDragStart",Q,wt.setState),qt("onSelectionDragStop",N,wt.setState),qt("noPanClassName",Y,wt.setState),qt("nodeOrigin",et,wt.setState),qt("rfId",st,wt.setState),qt("autoPanOnConnect",ct,wt.setState),qt("autoPanOnNodeDrag",pt,wt.setState),qt("onError",yt,wt.setState),qt("connectionRadius",Ct,wt.setState),qt("isValidConnection",At,wt.setState),qt("nodeDragThreshold",Vt,wt.setState),La(e,Pt),La(t,ue),La(V,Ee),La(M,_e),La(b,he),La(B,Xe),null},XE={display:"none"},KN={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},GS="react-flow__node-desc",$S="react-flow__edge-desc",XN="react-flow__aria-live",QN=e=>e.ariaLiveMessage;function ZN({rfId:e}){const t=me(QN);return lt.createElement("div",{id:`${XN}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:KN},t)}function WN({rfId:e,disableKeyboardA11y:t}){return lt.createElement(lt.Fragment,null,lt.createElement("div",{id:`${GS}-${e}`,style:XE},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),lt.createElement("div",{id:`${$S}-${e}`,style:XE},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&lt.createElement(ZN,{rfId:e}))}var Wu=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=j.useState(!1),o=j.useRef(!1),l=j.useRef(new Set([])),[c,d]=j.useMemo(()=>{if(e!==null){const m=(Array.isArray(e)?e:[e]).filter(v=>typeof v=="string").map(v=>v.split("+")),y=m.reduce((v,E)=>v.concat(...E),[]);return[m,y]}return[[],[]]},[e]);return j.useEffect(()=>{const g=typeof document<"u"?document:null,m=t?.target||g;if(e!==null){const y=S=>{if(o.current=S.ctrlKey||S.metaKey||S.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&rp(S))return!1;const V=ZE(S.code,d);l.current.add(S[V]),QE(c,l.current,!1)&&(S.preventDefault(),r(!0))},v=S=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&rp(S))return!1;const V=ZE(S.code,d);QE(c,l.current,!0)?(r(!1),l.current.clear()):l.current.delete(S[V]),S.key==="Meta"&&l.current.clear(),o.current=!1},E=()=>{l.current.clear(),r(!1)};return m?.addEventListener("keydown",y),m?.addEventListener("keyup",v),window.addEventListener("blur",E),()=>{m?.removeEventListener("keydown",y),m?.removeEventListener("keyup",v),window.removeEventListener("blur",E)}}},[e,r]),n};function QE(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function ZE(e,t){return t.includes(e)?"code":"key"}function YS(e,t,n,r){const o=e.parentNode||e.parentId;if(!o)return n;const l=t.get(o),c=Oo(l,r);return YS(l,t,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(l[Ie]?.z??0)>(n.z??0)?l[Ie]?.z??0:n.z??0},r)}function KS(e,t,n){e.forEach(r=>{const o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n?.[r.id]){const{x:l,y:c,z:d}=YS(r,e,{...r.position,z:r[Ie]?.z??0},t);r.positionAbsolute={x:l,y:c},r[Ie].z=d,n?.[r.id]&&(r[Ie].isParent=!0)}})}function Mm(e,t,n,r){const o=new Map,l={},c=r?1e3:0;return e.forEach(d=>{const g=(Ti(d.zIndex)?d.zIndex:0)+(d.selected?c:0),m=t.get(d.id),y={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},v=d.parentNode||d.parentId;v&&(l[v]=!0);const E=m?.type&&m?.type!==d.type;Object.defineProperty(y,Ie,{enumerable:!1,value:{handleBounds:E?void 0:m?.[Ie]?.handleBounds,z:g}}),o.set(d.id,y)}),KS(o,n,l),o}function XS(e,t={}){const{getNodes:n,width:r,height:o,minZoom:l,maxZoom:c,d3Zoom:d,d3Selection:g,fitViewOnInitDone:m,fitViewOnInit:y,nodeOrigin:v}=e(),E=t.initial&&!m&&y;if(d&&g&&(E||!t.initial)){const D=n().filter(M=>{const B=t.includeHiddenNodes?M.width&&M.height:!M.hidden;return t.nodes?.length?B&&t.nodes.some(F=>F.id===M.id):B}),V=D.every(M=>M.width&&M.height);if(D.length>0&&V){const M=Wf(D,v),{x:B,y:F,zoom:X}=kS(M,r,o,t.minZoom??l,t.maxZoom??c,t.padding??.1),z=Hr.translate(B,F).scale(X);return typeof t.duration=="number"&&t.duration>0?d.transform(Co(g,t.duration),z):d.transform(g,z),!0}}return!1}function JN(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Ie]:r[Ie],selected:n.selected})}),new Map(t)}function tD(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function Kh({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:l,onNodesChange:c,onEdgesChange:d,hasDefaultNodes:g,hasDefaultEdges:m}=n();e?.length&&(g&&r({nodeInternals:JN(e,o)}),c?.(e)),t?.length&&(m&&r({edges:tD(t,l)}),d?.(t))}const Ua=()=>{},eD={zoomIn:Ua,zoomOut:Ua,zoomTo:Ua,getZoom:()=>1,setViewport:Ua,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ua,fitBounds:Ua,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},nD=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),iD=()=>{const e=Ke(),{d3Zoom:t,d3Selection:n}=me(nD,sn);return j.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(Co(n,o?.duration),1.2),zoomOut:o=>t.scaleBy(Co(n,o?.duration),1/1.2),zoomTo:(o,l)=>t.scaleTo(Co(n,l?.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,l)=>{const[c,d,g]=e.getState().transform,m=Hr.translate(o.x??c,o.y??d).scale(o.zoom??g);t.transform(Co(n,l?.duration),m)},getViewport:()=>{const[o,l,c]=e.getState().transform;return{x:o,y:l,zoom:c}},fitView:o=>XS(e.getState,o),setCenter:(o,l,c)=>{const{width:d,height:g,maxZoom:m}=e.getState(),y=typeof c?.zoom<"u"?c.zoom:m,v=d/2-o*y,E=g/2-l*y,S=Hr.translate(v,E).scale(y);t.transform(Co(n,c?.duration),S)},fitBounds:(o,l)=>{const{width:c,height:d,minZoom:g,maxZoom:m}=e.getState(),{x:y,y:v,zoom:E}=kS(o,c,d,g,m,l?.padding??.1),S=Hr.translate(y,v).scale(E);t.transform(Co(n,l?.duration),S)},project:o=>{const{transform:l,snapToGrid:c,snapGrid:d}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ap(o,l,c,d)},screenToFlowPosition:o=>{const{transform:l,snapToGrid:c,snapGrid:d,domNode:g}=e.getState();if(!g)return o;const{x:m,y}=g.getBoundingClientRect(),v={x:o.x-m,y:o.y-y};return ap(v,l,c,d)},flowToScreenPosition:o=>{const{transform:l,domNode:c}=e.getState();if(!c)return o;const{x:d,y:g}=c.getBoundingClientRect(),m=DS(o,l);return{x:m.x+d,y:m.y+g}},viewportInitialized:!0}:eD,[t,n])};function dc(){const e=iD(),t=Ke(),n=j.useCallback(()=>t.getState().getNodes().map(V=>({...V})),[]),r=j.useCallback(V=>t.getState().nodeInternals.get(V),[]),o=j.useCallback(()=>{const{edges:V=[]}=t.getState();return V.map(M=>({...M}))},[]),l=j.useCallback(V=>{const{edges:M=[]}=t.getState();return M.find(B=>B.id===V)},[]),c=j.useCallback(V=>{const{getNodes:M,setNodes:B,hasDefaultNodes:F,onNodesChange:X}=t.getState(),z=M(),q=typeof V=="function"?V(z):V;if(F)B(q);else if(X){const Z=q.length===0?z.map(x=>({type:"remove",id:x.id})):q.map(x=>({item:x,type:"reset"}));X(Z)}},[]),d=j.useCallback(V=>{const{edges:M=[],setEdges:B,hasDefaultEdges:F,onEdgesChange:X}=t.getState(),z=typeof V=="function"?V(M):V;if(F)B(z);else if(X){const q=z.length===0?M.map(Z=>({type:"remove",id:Z.id})):z.map(Z=>({item:Z,type:"reset"}));X(q)}},[]),g=j.useCallback(V=>{const M=Array.isArray(V)?V:[V],{getNodes:B,setNodes:F,hasDefaultNodes:X,onNodesChange:z}=t.getState();if(X){const Z=[...B(),...M];F(Z)}else if(z){const q=M.map(Z=>({item:Z,type:"add"}));z(q)}},[]),m=j.useCallback(V=>{const M=Array.isArray(V)?V:[V],{edges:B=[],setEdges:F,hasDefaultEdges:X,onEdgesChange:z}=t.getState();if(X)F([...B,...M]);else if(z){const q=M.map(Z=>({item:Z,type:"add"}));z(q)}},[]),y=j.useCallback(()=>{const{getNodes:V,edges:M=[],transform:B}=t.getState(),[F,X,z]=B;return{nodes:V().map(q=>({...q})),edges:M.map(q=>({...q})),viewport:{x:F,y:X,zoom:z}}},[]),v=j.useCallback(({nodes:V,edges:M})=>{const{nodeInternals:B,getNodes:F,edges:X,hasDefaultNodes:z,hasDefaultEdges:q,onNodesDelete:Z,onEdgesDelete:x,onNodesChange:b,onEdgesChange:C}=t.getState(),P=(V||[]).map(K=>K.id),L=(M||[]).map(K=>K.id),U=F().reduce((K,O)=>{const $=O.parentNode||O.parentId,rt=!P.includes(O.id)&&$&&K.find(N=>N.id===$);return(typeof O.deletable=="boolean"?O.deletable:!0)&&(P.includes(O.id)||rt)&&K.push(O),K},[]),R=X.filter(K=>typeof K.deletable=="boolean"?K.deletable:!0),k=R.filter(K=>L.includes(K.id));if(U||k){const K=OS(U,R),O=[...k,...K],$=O.reduce((rt,Q)=>(rt.includes(Q.id)||rt.push(Q.id),rt),[]);if((q||z)&&(q&&t.setState({edges:X.filter(rt=>!$.includes(rt.id))}),z&&(U.forEach(rt=>{B.delete(rt.id)}),t.setState({nodeInternals:new Map(B)}))),$.length>0&&(x?.(O),C&&C($.map(rt=>({id:rt,type:"remove"})))),U.length>0&&(Z?.(U),b)){const rt=U.map(Q=>({id:Q.id,type:"remove"}));b(rt)}}},[]),E=j.useCallback(V=>{const M=SN(V),B=M?null:t.getState().nodeInternals.get(V.id);return!M&&!B?[null,null,M]:[M?V:qE(B),B,M]},[]),S=j.useCallback((V,M=!0,B)=>{const[F,X,z]=E(V);return F?(B||t.getState().getNodes()).filter(q=>{if(!z&&(q.id===X.id||!q.positionAbsolute))return!1;const Z=qE(q),x=ip(Z,F);return M&&x>0||x>=F.width*F.height}):[]},[]),D=j.useCallback((V,M,B=!0)=>{const[F]=E(V);if(!F)return!1;const X=ip(F,M);return B&&X>0||X>=F.width*F.height},[]);return j.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:l,setNodes:c,setEdges:d,addNodes:g,addEdges:m,toObject:y,deleteElements:v,getIntersectingNodes:S,isNodeIntersecting:D}),[e,n,r,o,l,c,d,g,m,y,v,S,D])}const rD={actInsideInputWithModifier:!1};var sD=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Ke(),{deleteElements:r}=dc(),o=Wu(e,rD),l=Wu(t);j.useEffect(()=>{if(o){const{edges:c,getNodes:d}=n.getState(),g=d().filter(y=>y.selected),m=c.filter(y=>y.selected);r({nodes:g,edges:m}),n.setState({nodesSelectionActive:!1})}},[o]),j.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])};function oD(e){const t=Ke();j.useEffect(()=>{let n;const r=()=>{if(!e.current)return;const o=Gp(e.current);(o.height===0||o.width===0)&&t.getState().onError?.("004",jr.error004()),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Jp={position:"absolute",width:"100%",height:"100%",top:0,left:0},aD=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Xh=e=>({x:e.x,y:e.y,zoom:e.k}),za=(e,t)=>e.target.closest(`.${t}`),WE=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),JE=e=>{const t=e.ctrlKey&&bf()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},lD=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),uD=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:l=!0,panOnScroll:c=!1,panOnScrollSpeed:d=.5,panOnScrollMode:g=No.Free,zoomOnDoubleClick:m=!0,elementsSelectable:y,panOnDrag:v=!0,defaultViewport:E,translateExtent:S,minZoom:D,maxZoom:V,zoomActivationKeyCode:M,preventScrolling:B=!0,children:F,noWheelClassName:X,noPanClassName:z})=>{const q=j.useRef(),Z=Ke(),x=j.useRef(!1),b=j.useRef(!1),C=j.useRef(null),P=j.useRef({x:0,y:0,zoom:0}),{d3Zoom:L,d3Selection:U,d3ZoomHandler:R,userSelectionActive:k}=me(lD,sn),K=Wu(M),O=j.useRef(0),$=j.useRef(!1),rt=j.useRef();return oD(C),j.useEffect(()=>{if(C.current){const Q=C.current.getBoundingClientRect(),N=vS().scaleExtent([D,V]).translateExtent(S),Y=vi(C.current).call(N),et=Hr.translate(E.x,E.y).scale(ol(E.zoom,D,V)),st=[[0,0],[Q.width,Q.height]],ct=N.constrain()(et,st,S);N.transform(Y,ct),N.wheelDelta(JE),Z.setState({d3Zoom:N,d3Selection:Y,d3ZoomHandler:Y.on("wheel.zoom"),transform:[ct.x,ct.y,ct.k],domNode:C.current.closest(".react-flow")})}},[]),j.useEffect(()=>{U&&L&&(c&&!K&&!k?U.on("wheel.zoom",Q=>{if(za(Q,X))return!1;Q.preventDefault(),Q.stopImmediatePropagation();const N=U.property("__zoom").k||1;if(Q.ctrlKey&&l){const At=Di(Q),Vt=JE(Q),Pt=N*Math.pow(2,Vt);L.scaleTo(U,Pt,At,Q);return}const Y=Q.deltaMode===1?20:1;let et=g===No.Vertical?0:Q.deltaX*Y,st=g===No.Horizontal?0:Q.deltaY*Y;!bf()&&Q.shiftKey&&g!==No.Vertical&&(et=Q.deltaY*Y,st=0),L.translateBy(U,-(et/N)*d,-(st/N)*d,{internal:!0});const ct=Xh(U.property("__zoom")),{onViewportChangeStart:pt,onViewportChange:yt,onViewportChangeEnd:Ct}=Z.getState();clearTimeout(rt.current),$.current||($.current=!0,t?.(Q,ct),pt?.(ct)),$.current&&(e?.(Q,ct),yt?.(ct),rt.current=setTimeout(()=>{n?.(Q,ct),Ct?.(ct),$.current=!1},150))},{passive:!1}):typeof R<"u"&&U.on("wheel.zoom",function(Q,N){if(!B&&Q.type==="wheel"&&!Q.ctrlKey||za(Q,X))return null;Q.preventDefault(),R.call(this,Q,N)},{passive:!1}))},[k,c,g,U,L,R,K,l,B,X,t,e,n]),j.useEffect(()=>{L&&L.on("start",Q=>{if(!Q.sourceEvent||Q.sourceEvent.internal)return null;O.current=Q.sourceEvent?.button;const{onViewportChangeStart:N}=Z.getState(),Y=Xh(Q.transform);x.current=!0,P.current=Y,Q.sourceEvent?.type==="mousedown"&&Z.setState({paneDragging:!0}),N?.(Y),t?.(Q.sourceEvent,Y)})},[L,t]),j.useEffect(()=>{L&&(k&&!x.current?L.on("zoom",null):k||L.on("zoom",Q=>{const{onViewportChange:N}=Z.getState();if(Z.setState({transform:[Q.transform.x,Q.transform.y,Q.transform.k]}),b.current=!!(r&&WE(v,O.current??0)),(e||N)&&!Q.sourceEvent?.internal){const Y=Xh(Q.transform);N?.(Y),e?.(Q.sourceEvent,Y)}}))},[k,L,e,v,r]),j.useEffect(()=>{L&&L.on("end",Q=>{if(!Q.sourceEvent||Q.sourceEvent.internal)return null;const{onViewportChangeEnd:N}=Z.getState();if(x.current=!1,Z.setState({paneDragging:!1}),r&&WE(v,O.current??0)&&!b.current&&r(Q.sourceEvent),b.current=!1,(n||N)&&aD(P.current,Q.transform)){const Y=Xh(Q.transform);P.current=Y,clearTimeout(q.current),q.current=setTimeout(()=>{N?.(Y),n?.(Q.sourceEvent,Y)},c?150:0)}})},[L,c,v,n,r]),j.useEffect(()=>{L&&L.filter(Q=>{const N=K||o,Y=l&&Q.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&Q.button===1&&Q.type==="mousedown"&&(za(Q,"react-flow__node")||za(Q,"react-flow__edge")))return!0;if(!v&&!N&&!c&&!m&&!l||k||!m&&Q.type==="dblclick"||za(Q,X)&&Q.type==="wheel"||za(Q,z)&&(Q.type!=="wheel"||c&&Q.type==="wheel"&&!K)||!l&&Q.ctrlKey&&Q.type==="wheel"||!N&&!c&&!Y&&Q.type==="wheel"||!v&&(Q.type==="mousedown"||Q.type==="touchstart")||Array.isArray(v)&&!v.includes(Q.button)&&Q.type==="mousedown")return!1;const et=Array.isArray(v)&&v.includes(Q.button)||!Q.button||Q.button<=1;return(!Q.ctrlKey||Q.type==="wheel")&&et})},[k,L,o,l,c,m,v,y,K]),lt.createElement("div",{className:"react-flow__renderer",ref:C,style:Jp},F)},cD=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function hD(){const{userSelectionActive:e,userSelectionRect:t}=me(cD,sn);return e&&t?lt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function tT(e,t){const n=t.parentNode||t.parentId,r=e.find(o=>o.id===n);if(r){const o=t.position.x+t.width-r.width,l=t.position.y+t.height-r.height;if(o>0||l>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),l>0&&(r.style.height+=l),t.position.x<0){const c=Math.abs(t.position.x);r.position.x=r.position.x-c,r.style.width+=c,t.position.x=0}if(t.position.y<0){const c=Math.abs(t.position.y);r.position.y=r.position.y-c,r.style.height+=c,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function QS(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const l=e.filter(d=>d.id===o.id);if(l.length===0)return r.push(o),r;const c={...o};for(const d of l)if(d)switch(d.type){case"select":{c.selected=d.selected;break}case"position":{typeof d.position<"u"&&(c.position=d.position),typeof d.positionAbsolute<"u"&&(c.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(c.dragging=d.dragging),c.expandParent&&tT(r,c);break}case"dimensions":{typeof d.dimensions<"u"&&(c.width=d.dimensions.width,c.height=d.dimensions.height),typeof d.updateStyle<"u"&&(c.style={...c.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(c.resizing=d.resizing),c.expandParent&&tT(r,c);break}case"remove":return r}return r.push(c),r},n)}function ZS(e,t){return QS(e,t)}function fD(e,t){return QS(e,t)}const As=(e,t)=>({id:e,type:"select",selected:t});function $a(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(As(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(As(r.id,!1))),n},[])}const Om=(e,t)=>n=>{n.target===t.current&&e?.(n)},dD=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),WS=j.memo(({isSelecting:e,selectionMode:t=Qu.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:g,onPaneMouseMove:m,onPaneMouseLeave:y,children:v})=>{const E=j.useRef(null),S=Ke(),D=j.useRef(0),V=j.useRef(0),M=j.useRef(),{userSelectionActive:B,elementsSelectable:F,dragging:X}=me(dD,sn),z=()=>{S.setState({userSelectionActive:!1,userSelectionRect:null}),D.current=0,V.current=0},q=R=>{l?.(R),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1})},Z=R=>{if(Array.isArray(n)&&n?.includes(2)){R.preventDefault();return}c?.(R)},x=d?R=>d(R):void 0,b=R=>{const{resetSelectedElements:k,domNode:K}=S.getState();if(M.current=K?.getBoundingClientRect(),!F||!e||R.button!==0||R.target!==E.current||!M.current)return;const{x:O,y:$}=Ms(R,M.current);k(),S.setState({userSelectionRect:{width:0,height:0,startX:O,startY:$,x:O,y:$}}),r?.(R)},C=R=>{const{userSelectionRect:k,nodeInternals:K,edges:O,transform:$,onNodesChange:rt,onEdgesChange:Q,nodeOrigin:N,getNodes:Y}=S.getState();if(!e||!M.current||!k)return;S.setState({userSelectionActive:!0,nodesSelectionActive:!1});const et=Ms(R,M.current),st=k.startX??0,ct=k.startY??0,pt={...k,x:et.x<st?et.x:st,y:et.y<ct?et.y:ct,width:Math.abs(et.x-st),height:Math.abs(et.y-ct)},yt=Y(),Ct=MS(K,pt,$,t===Qu.Partial,!0,N),At=OS(Ct,O).map(Pt=>Pt.id),Vt=Ct.map(Pt=>Pt.id);if(D.current!==Vt.length){D.current=Vt.length;const Pt=$a(yt,Vt);Pt.length&&rt?.(Pt)}if(V.current!==At.length){V.current=At.length;const Pt=$a(O,At);Pt.length&&Q?.(Pt)}S.setState({userSelectionRect:pt})},P=R=>{if(R.button!==0)return;const{userSelectionRect:k}=S.getState();!B&&k&&R.target===E.current&&q?.(R),S.setState({nodesSelectionActive:D.current>0}),z(),o?.(R)},L=R=>{B&&(S.setState({nodesSelectionActive:D.current>0}),o?.(R)),z()},U=F&&(e||B);return lt.createElement("div",{className:mn(["react-flow__pane",{dragging:X,selection:e}]),onClick:U?void 0:Om(q,E),onContextMenu:Om(Z,E),onWheel:Om(x,E),onMouseEnter:U?void 0:g,onMouseDown:U?b:void 0,onMouseMove:U?C:m,onMouseUp:U?P:void 0,onMouseLeave:U?L:y,ref:E,style:Jp},v,lt.createElement(hD,null))});WS.displayName="Pane";function JS(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:JS(r,t):!1}function eT(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function gD(e,t,n,r){return Array.from(e.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!JS(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>({id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(o.positionAbsolute?.x??0),y:n.y-(o.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}))}function mD(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function tb(e,t,n,r,o=[0,0],l){const c=mD(e,e.extent||r);let d=c;const g=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(g&&e.width&&e.height){const v=n.get(g),{x:E,y:S}=Oo(v,o).positionAbsolute;d=v&&Ti(E)&&Ti(S)&&Ti(v.width)&&Ti(v.height)?[[E+e.width*o[0],S+e.height*o[1]],[E+v.width-e.width+e.width*o[0],S+v.height-e.height+e.height*o[1]]]:d}else l?.("005",jr.error005()),d=c;else if(e.extent&&g&&e.extent!=="parent"){const v=n.get(g),{x:E,y:S}=Oo(v,o).positionAbsolute;d=[[e.extent[0][0]+E,e.extent[0][1]+S],[e.extent[1][0]+E,e.extent[1][1]+S]]}let m={x:0,y:0};if(g){const v=n.get(g);m=Oo(v,o).positionAbsolute}const y=d&&d!=="parent"?$p(t,d):t;return{position:{x:y.x-m.x,y:y.y-m.y},positionAbsolute:y}}function km({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const nT=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const l=Array.from(o),c=t.getBoundingClientRect(),d={x:c.width*r[0],y:c.height*r[1]};return l.map(g=>{const m=g.getBoundingClientRect();return{id:g.getAttribute("data-handleid"),position:g.getAttribute("data-handlepos"),x:(m.left-c.left-d.x)/n,y:(m.top-c.top-d.y)/n,...Gp(g)}})};function Iu(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function up({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:l,multiSelectionActive:c,nodeInternals:d,onError:g}=t.getState(),m=d.get(e);if(!m){g?.("012",jr.error012(e));return}t.setState({nodesSelectionActive:!1}),m.selected?(n||m.selected&&c)&&(l({nodes:[m],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):o([e])}function pD(){const e=Ke();return j.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:l}=e.getState(),c=n.touches?n.touches[0].clientX:n.clientX,d=n.touches?n.touches[0].clientY:n.clientY,g={x:(c-r[0])/r[2],y:(d-r[1])/r[2]};return{xSnapped:l?o[0]*Math.round(g.x/o[0]):g.x,ySnapped:l?o[1]*Math.round(g.y/o[1]):g.y,...g}},[])}function Vm(e){return(t,n,r)=>e?.(t,r)}function eb({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:l,selectNodesOnDrag:c}){const d=Ke(),[g,m]=j.useState(!1),y=j.useRef([]),v=j.useRef({x:null,y:null}),E=j.useRef(0),S=j.useRef(null),D=j.useRef({x:0,y:0}),V=j.useRef(null),M=j.useRef(!1),B=j.useRef(!1),F=j.useRef(!1),X=pD();return j.useEffect(()=>{if(e?.current){const z=vi(e.current),q=({x:b,y:C})=>{const{nodeInternals:P,onNodeDrag:L,onSelectionDrag:U,updateNodePositions:R,nodeExtent:k,snapGrid:K,snapToGrid:O,nodeOrigin:$,onError:rt}=d.getState();v.current={x:b,y:C};let Q=!1,N={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&k){const et=Wf(y.current,$);N=Xu(et)}if(y.current=y.current.map(et=>{const st={x:b-et.distance.x,y:C-et.distance.y};O&&(st.x=K[0]*Math.round(st.x/K[0]),st.y=K[1]*Math.round(st.y/K[1]));const ct=[[k[0][0],k[0][1]],[k[1][0],k[1][1]]];y.current.length>1&&k&&!et.extent&&(ct[0][0]=et.positionAbsolute.x-N.x+k[0][0],ct[1][0]=et.positionAbsolute.x+(et.width??0)-N.x2+k[1][0],ct[0][1]=et.positionAbsolute.y-N.y+k[0][1],ct[1][1]=et.positionAbsolute.y+(et.height??0)-N.y2+k[1][1]);const pt=tb(et,st,P,ct,$,rt);return Q=Q||et.position.x!==pt.position.x||et.position.y!==pt.position.y,et.position=pt.position,et.positionAbsolute=pt.positionAbsolute,et}),!Q)return;R(y.current,!0,!0),m(!0);const Y=o?L:Vm(U);if(Y&&V.current){const[et,st]=km({nodeId:o,dragItems:y.current,nodeInternals:P});Y(V.current,et,st)}},Z=()=>{if(!S.current)return;const[b,C]=TS(D.current,S.current);if(b!==0||C!==0){const{transform:P,panBy:L}=d.getState();v.current.x=(v.current.x??0)-b/P[2],v.current.y=(v.current.y??0)-C/P[2],L({x:b,y:C})&&q(v.current)}E.current=requestAnimationFrame(Z)},x=b=>{const{nodeInternals:C,multiSelectionActive:P,nodesDraggable:L,unselectNodesAndEdges:U,onNodeDragStart:R,onSelectionDragStart:k}=d.getState();B.current=!0;const K=o?R:Vm(k);(!c||!l)&&!P&&o&&(C.get(o)?.selected||U()),o&&l&&c&&up({id:o,store:d,nodeRef:e});const O=X(b);if(v.current=O,y.current=gD(C,L,O,o),K&&y.current){const[$,rt]=km({nodeId:o,dragItems:y.current,nodeInternals:C});K(b.sourceEvent,$,rt)}};if(t)z.on(".drag",null);else{const b=C2().on("start",C=>{const{domNode:P,nodeDragThreshold:L}=d.getState();L===0&&x(C),F.current=!1;const U=X(C);v.current=U,S.current=P?.getBoundingClientRect()||null,D.current=Ms(C.sourceEvent,S.current)}).on("drag",C=>{const P=X(C),{autoPanOnNodeDrag:L,nodeDragThreshold:U}=d.getState();if(C.sourceEvent.type==="touchmove"&&C.sourceEvent.touches.length>1&&(F.current=!0),!F.current){if(!M.current&&B.current&&L&&(M.current=!0,Z()),!B.current){const R=P.xSnapped-(v?.current?.x??0),k=P.ySnapped-(v?.current?.y??0);Math.sqrt(R*R+k*k)>U&&x(C)}(v.current.x!==P.xSnapped||v.current.y!==P.ySnapped)&&y.current&&B.current&&(V.current=C.sourceEvent,D.current=Ms(C.sourceEvent,S.current),q(P))}}).on("end",C=>{if(!(!B.current||F.current)&&(m(!1),M.current=!1,B.current=!1,cancelAnimationFrame(E.current),y.current)){const{updateNodePositions:P,nodeInternals:L,onNodeDragStop:U,onSelectionDragStop:R}=d.getState(),k=o?U:Vm(R);if(P(y.current,!1,!1),k){const[K,O]=km({nodeId:o,dragItems:y.current,nodeInternals:L});k(C.sourceEvent,K,O)}}}).filter(C=>{const P=C.target;return!C.button&&(!n||!eT(P,`.${n}`,e))&&(!r||eT(P,r,e))});return z.call(b),()=>{z.on(".drag",null)}}}},[e,t,n,r,l,d,o,c,X]),g}function nb(){const e=Ke();return j.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:l,getNodes:c,snapToGrid:d,snapGrid:g,onError:m,nodesDraggable:y}=e.getState(),v=c().filter(F=>F.selected&&(F.draggable||y&&typeof F.draggable>"u")),E=d?g[0]:5,S=d?g[1]:5,D=n.isShiftPressed?4:1,V=n.x*E*D,M=n.y*S*D,B=v.map(F=>{if(F.positionAbsolute){const X={x:F.positionAbsolute.x+V,y:F.positionAbsolute.y+M};d&&(X.x=g[0]*Math.round(X.x/g[0]),X.y=g[1]*Math.round(X.y/g[1]));const{positionAbsolute:z,position:q}=tb(F,X,r,o,void 0,m);F.position=q,F.positionAbsolute=z}return F});l(B,!0,!1)},[])}const Qa={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var xu=e=>{const t=({id:n,type:r,data:o,xPos:l,yPos:c,xPosOrigin:d,yPosOrigin:g,selected:m,onClick:y,onMouseEnter:v,onMouseMove:E,onMouseLeave:S,onContextMenu:D,onDoubleClick:V,style:M,className:B,isDraggable:F,isSelectable:X,isConnectable:z,isFocusable:q,selectNodesOnDrag:Z,sourcePosition:x,targetPosition:b,hidden:C,resizeObserver:P,dragHandle:L,zIndex:U,isParent:R,noDragClassName:k,noPanClassName:K,initialized:O,disableKeyboardA11y:$,ariaLabel:rt,rfId:Q,hasHandleBounds:N})=>{const Y=Ke(),et=j.useRef(null),st=j.useRef(null),ct=j.useRef(x),pt=j.useRef(b),yt=j.useRef(r),Ct=X||F||y||v||E||S,At=nb(),Vt=Iu(n,Y.getState,v),Pt=Iu(n,Y.getState,E),ue=Iu(n,Y.getState,S),ce=Iu(n,Y.getState,D),Ee=Iu(n,Y.getState,V),_e=Lt=>{const{nodeDragThreshold:wt}=Y.getState();if(X&&(!Z||!F||wt>0)&&up({id:n,store:Y,nodeRef:et}),y){const xe=Y.getState().nodeInternals.get(n);xe&&y(Lt,{...xe})}},he=Lt=>{if(!rp(Lt)&&!$)if(AS.includes(Lt.key)&&X){const wt=Lt.key==="Escape";up({id:n,store:Y,unselect:wt,nodeRef:et})}else F&&m&&Object.prototype.hasOwnProperty.call(Qa,Lt.key)&&(Y.setState({ariaLiveMessage:`Moved selected node ${Lt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~c}`}),At({x:Qa[Lt.key].x,y:Qa[Lt.key].y,isShiftPressed:Lt.shiftKey}))};j.useEffect(()=>()=>{st.current&&(P?.unobserve(st.current),st.current=null)},[]),j.useEffect(()=>{if(et.current&&!C){const Lt=et.current;(!O||!N||st.current!==Lt)&&(st.current&&P?.unobserve(st.current),P?.observe(Lt),st.current=Lt)}},[C,O,N]),j.useEffect(()=>{const Lt=yt.current!==r,wt=ct.current!==x,xe=pt.current!==b;et.current&&(Lt||wt||xe)&&(Lt&&(yt.current=r),wt&&(ct.current=x),xe&&(pt.current=b),Y.getState().updateNodeDimensions([{id:n,nodeElement:et.current,forceUpdate:!0}]))},[n,r,x,b]);const Xe=eb({nodeRef:et,disabled:C||!F,noDragClassName:k,handleSelector:L,nodeId:n,isSelectable:X,selectNodesOnDrag:Z});return C?null:lt.createElement("div",{className:mn(["react-flow__node",`react-flow__node-${r}`,{[K]:F},B,{selected:m,selectable:X,parent:R,dragging:Xe}]),ref:et,style:{zIndex:U,transform:`translate(${d}px,${g}px)`,pointerEvents:Ct?"all":"none",visibility:O?"visible":"hidden",...M},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Vt,onMouseMove:Pt,onMouseLeave:ue,onContextMenu:ce,onClick:_e,onDoubleClick:Ee,onKeyDown:q?he:void 0,tabIndex:q?0:void 0,role:q?"button":void 0,"aria-describedby":$?void 0:`${GS}-${Q}`,"aria-label":rt},lt.createElement(NN,{value:n},lt.createElement(e,{id:n,data:o,type:r,xPos:l,yPos:c,selected:m,isConnectable:z,sourcePosition:x,targetPosition:b,dragging:Xe,dragHandle:L,zIndex:U})))};return t.displayName="NodeWrapper",j.memo(t)};const yD=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Wf(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function _D({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ke(),{width:o,height:l,x:c,y:d,transformString:g,userSelectionActive:m}=me(yD,sn),y=nb(),v=j.useRef(null);if(j.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),eb({nodeRef:v}),m||!o||!l)return null;const E=e?D=>{const V=r.getState().getNodes().filter(M=>M.selected);e(D,V)}:void 0,S=D=>{Object.prototype.hasOwnProperty.call(Qa,D.key)&&y({x:Qa[D.key].x,y:Qa[D.key].y,isShiftPressed:D.shiftKey})};return lt.createElement("div",{className:mn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:g}},lt.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:E,tabIndex:n?void 0:-1,onKeyDown:n?void 0:S,style:{width:o,height:l,top:d,left:c}}))}var vD=j.memo(_D);const ED=e=>e.nodesSelectionActive,ib=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:l,onPaneScroll:c,deleteKeyCode:d,onMove:g,onMoveStart:m,onMoveEnd:y,selectionKeyCode:v,selectionOnDrag:E,selectionMode:S,onSelectionStart:D,onSelectionEnd:V,multiSelectionKeyCode:M,panActivationKeyCode:B,zoomActivationKeyCode:F,elementsSelectable:X,zoomOnScroll:z,zoomOnPinch:q,panOnScroll:Z,panOnScrollSpeed:x,panOnScrollMode:b,zoomOnDoubleClick:C,panOnDrag:P,defaultViewport:L,translateExtent:U,minZoom:R,maxZoom:k,preventScrolling:K,onSelectionContextMenu:O,noWheelClassName:$,noPanClassName:rt,disableKeyboardA11y:Q})=>{const N=me(ED),Y=Wu(v),et=Wu(B),st=et||P,ct=et||Z,pt=Y||E&&st!==!0;return sD({deleteKeyCode:d,multiSelectionKeyCode:M}),lt.createElement(uD,{onMove:g,onMoveStart:m,onMoveEnd:y,onPaneContextMenu:l,elementsSelectable:X,zoomOnScroll:z,zoomOnPinch:q,panOnScroll:ct,panOnScrollSpeed:x,panOnScrollMode:b,zoomOnDoubleClick:C,panOnDrag:!Y&&st,defaultViewport:L,translateExtent:U,minZoom:R,maxZoom:k,zoomActivationKeyCode:F,preventScrolling:K,noWheelClassName:$,noPanClassName:rt},lt.createElement(WS,{onSelectionStart:D,onSelectionEnd:V,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:st,isSelecting:!!pt,selectionMode:S},e,N&&lt.createElement(vD,{onSelectionContextMenu:O,noPanClassName:rt,disableKeyboardA11y:Q})))};ib.displayName="FlowRenderer";var TD=j.memo(ib);function wD(e){return me(j.useCallback(n=>e?MS(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function SD(e){const t={input:xu(e.input||HS),default:xu(e.default||lp),output:xu(e.output||FS),group:xu(e.group||Wp)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,l)=>(o[l]=xu(e[l]||lp),o),n);return{...t,...r}}const bD=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},AD=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),rb=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:l,onError:c}=me(AD,sn),d=wD(e.onlyRenderVisibleElements),g=j.useRef(),m=j.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(v=>{const E=v.map(S=>({id:S.target.getAttribute("data-id"),nodeElement:S.target,forceUpdate:!0}));l(E)});return g.current=y,y},[]);return j.useEffect(()=>()=>{g?.current?.disconnect()},[]),lt.createElement("div",{className:"react-flow__nodes",style:Jp},d.map(y=>{let v=y.type||"default";e.nodeTypes[v]||(c?.("003",jr.error003(v)),v="default");const E=e.nodeTypes[v]||e.nodeTypes.default,S=!!(y.draggable||t&&typeof y.draggable>"u"),D=!!(y.selectable||o&&typeof y.selectable>"u"),V=!!(y.connectable||n&&typeof y.connectable>"u"),M=!!(y.focusable||r&&typeof y.focusable>"u"),B=e.nodeExtent?$p(y.positionAbsolute,e.nodeExtent):y.positionAbsolute,F=B?.x??0,X=B?.y??0,z=bD({x:F,y:X,width:y.width??0,height:y.height??0,origin:e.nodeOrigin});return lt.createElement(E,{key:y.id,id:y.id,className:y.className,style:y.style,type:v,data:y.data,sourcePosition:y.sourcePosition||bt.Bottom,targetPosition:y.targetPosition||bt.Top,hidden:y.hidden,xPos:F,yPos:X,xPosOrigin:z.x,yPosOrigin:z.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!y.selected,isDraggable:S,isSelectable:D,isConnectable:V,isFocusable:M,resizeObserver:m,dragHandle:y.dragHandle,zIndex:y[Ie]?.z??0,isParent:!!y[Ie]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!y.width&&!!y.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[Ie]?.handleBounds})}))};rb.displayName="NodeRenderer";var RD=j.memo(rb);const CD=(e,t,n)=>n===bt.Left?e-t:n===bt.Right?e+t:e,ID=(e,t,n)=>n===bt.Top?e-t:n===bt.Bottom?e+t:e,iT="react-flow__edgeupdater",rT=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:l,onMouseOut:c,type:d})=>lt.createElement("circle",{onMouseDown:o,onMouseEnter:l,onMouseOut:c,className:mn([iT,`${iT}-${d}`]),cx:CD(t,r,e),cy:ID(n,r,e),r,stroke:"transparent",fill:"transparent"}),xD=()=>!0;var Ba=e=>{const t=({id:n,className:r,type:o,data:l,onClick:c,onEdgeDoubleClick:d,selected:g,animated:m,label:y,labelStyle:v,labelShowBg:E,labelBgStyle:S,labelBgPadding:D,labelBgBorderRadius:V,style:M,source:B,target:F,sourceX:X,sourceY:z,targetX:q,targetY:Z,sourcePosition:x,targetPosition:b,elementsSelectable:C,hidden:P,sourceHandleId:L,targetHandleId:U,onContextMenu:R,onMouseEnter:k,onMouseMove:K,onMouseLeave:O,reconnectRadius:$,onReconnect:rt,onReconnectStart:Q,onReconnectEnd:N,markerEnd:Y,markerStart:et,rfId:st,ariaLabel:ct,isFocusable:pt,isReconnectable:yt,pathOptions:Ct,interactionWidth:At,disableKeyboardA11y:Vt})=>{const Pt=j.useRef(null),[ue,ce]=j.useState(!1),[Ee,_e]=j.useState(!1),he=Ke(),Xe=j.useMemo(()=>`url('#${op(et,st)}')`,[et,st]),Lt=j.useMemo(()=>`url('#${op(Y,st)}')`,[Y,st]);if(P)return null;const wt=Ve=>{const{edges:Qe,addSelectedEdges:bn,unselectNodesAndEdges:An,multiSelectionActive:Ze}=he.getState(),on=Qe.find(Rn=>Rn.id===n);on&&(C&&(he.setState({nodesSelectionActive:!1}),on.selected&&Ze?(An({nodes:[],edges:[on]}),Pt.current?.blur()):bn([n])),c&&c(Ve,on))},xe=Cu(n,he.getState,d),pn=Cu(n,he.getState,R),Un=Cu(n,he.getState,k),Ui=Cu(n,he.getState,K),zn=Cu(n,he.getState,O),Sn=(Ve,Qe)=>{if(Ve.button!==0)return;const{edges:bn,isValidConnection:An}=he.getState(),Ze=Qe?F:B,on=(Qe?U:L)||null,Rn=Qe?"target":"source",dr=An||xD,gr=Qe,bi=bn.find(Hn=>Hn.id===n);_e(!0),Q?.(Ve,bi,Rn);const Bn=Hn=>{_e(!1),N?.(Hn,bi,Rn)};LS({event:Ve,handleId:on,nodeId:Ze,onConnect:Hn=>rt?.(bi,Hn),isTarget:gr,getState:he.getState,setState:he.setState,isValidConnection:dr,edgeUpdaterType:Rn,onReconnectEnd:Bn})},Si=Ve=>Sn(Ve,!0),te=Ve=>Sn(Ve,!1),Ft=()=>ce(!0),ke=()=>ce(!1),Te=!C&&!c,zi=Ve=>{if(!Vt&&AS.includes(Ve.key)&&C){const{unselectNodesAndEdges:Qe,addSelectedEdges:bn,edges:An}=he.getState();Ve.key==="Escape"?(Pt.current?.blur(),Qe({edges:[An.find(on=>on.id===n)]})):bn([n])}};return lt.createElement("g",{className:mn(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:g,animated:m,inactive:Te,updating:ue}]),onClick:wt,onDoubleClick:xe,onContextMenu:pn,onMouseEnter:Un,onMouseMove:Ui,onMouseLeave:zn,onKeyDown:pt?zi:void 0,tabIndex:pt?0:void 0,role:pt?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ct===null?void 0:ct||`Edge from ${B} to ${F}`,"aria-describedby":pt?`${$S}-${st}`:void 0,ref:Pt},!Ee&&lt.createElement(e,{id:n,source:B,target:F,selected:g,animated:m,label:y,labelStyle:v,labelShowBg:E,labelBgStyle:S,labelBgPadding:D,labelBgBorderRadius:V,data:l,style:M,sourceX:X,sourceY:z,targetX:q,targetY:Z,sourcePosition:x,targetPosition:b,sourceHandleId:L,targetHandleId:U,markerStart:Xe,markerEnd:Lt,pathOptions:Ct,interactionWidth:At}),yt&&lt.createElement(lt.Fragment,null,(yt==="source"||yt===!0)&&lt.createElement(rT,{position:x,centerX:X,centerY:z,radius:$,onMouseDown:Si,onMouseEnter:Ft,onMouseOut:ke,type:"source"}),(yt==="target"||yt===!0)&&lt.createElement(rT,{position:b,centerX:q,centerY:Z,radius:$,onMouseDown:te,onMouseEnter:Ft,onMouseOut:ke,type:"target"})))};return t.displayName="EdgeWrapper",j.memo(t)};function ND(e){const t={default:Ba(e.default||Af),straight:Ba(e.bezier||Xp),step:Ba(e.step||Kp),smoothstep:Ba(e.step||Zf),simplebezier:Ba(e.simplebezier||Yp)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,l)=>(o[l]=Ba(e[l]||Af),o),n);return{...t,...r}}function sT(e,t,n=null){const r=(n?.x||0)+t.x,o=(n?.y||0)+t.y,l=n?.width||t.width,c=n?.height||t.height;switch(e){case bt.Top:return{x:r+l/2,y:o};case bt.Right:return{x:r+l,y:o+c/2};case bt.Bottom:return{x:r+l/2,y:o+c};case bt.Left:return{x:r,y:o+c/2}}}function oT(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const DD=(e,t,n,r,o,l)=>{const c=sT(n,e,t),d=sT(l,r,o);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y}};function MD({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:l,width:c,height:d,transform:g}){const m={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+l)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const y=Xu({x:(0-g[0])/g[2],y:(0-g[1])/g[2],width:c/g[2],height:d/g[2]}),v=Math.max(0,Math.min(y.x2,m.x2)-Math.max(y.x,m.x)),E=Math.max(0,Math.min(y.y2,m.y2)-Math.max(y.y,m.y));return Math.ceil(v*E)>0}function aT(e){const t=e?.[Ie]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const OD=[{level:0,isMaxLevel:!0,edges:[]}];function kD(e,t,n=!1){let r=-1;const o=e.reduce((c,d)=>{const g=Ti(d.zIndex);let m=g?d.zIndex:0;if(n){const y=t.get(d.target),v=t.get(d.source),E=d.selected||y?.selected||v?.selected,S=Math.max(v?.[Ie]?.z||0,y?.[Ie]?.z||0,1e3);m=(g?d.zIndex:0)+(E?S:0)}return c[m]?c[m].push(d):c[m]=[d],r=m>r?m:r,c},{}),l=Object.entries(o).map(([c,d])=>{const g=+c;return{edges:d,level:g,isMaxLevel:g===r}});return l.length===0?OD:l}function VD(e,t,n){const r=me(j.useCallback(o=>e?o.edges.filter(l=>{const c=t.get(l.source),d=t.get(l.target);return c?.width&&c?.height&&d?.width&&d?.height&&MD({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:d.width,targetHeight:d.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return kD(r,t,n)}const PD=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),LD=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),lT={[Zu.Arrow]:PD,[Zu.ArrowClosed]:LD};function UD(e){const t=Ke();return j.useMemo(()=>Object.prototype.hasOwnProperty.call(lT,e)?lT[e]:(t.getState().onError?.("009",jr.error009(e)),null),[e])}const zD=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const g=UD(t);return g?lt.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0"},lt.createElement(g,{color:n,strokeWidth:c})):null},BD=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,l)=>([l.markerStart,l.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const d=op(c,t);r.includes(d)||(o.push({id:d,color:c.color||e,...c}),r.push(d))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))},sb=({defaultColor:e,rfId:t})=>{const n=me(j.useCallback(BD({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((l,c)=>l.id!==o[c].id)));return lt.createElement("defs",null,n.map(r=>lt.createElement(zD,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};sb.displayName="MarkerDefinitions";var HD=j.memo(sb);const qD=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),ob=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:g,onEdgeMouseLeave:m,onEdgeClick:y,onEdgeDoubleClick:v,onReconnect:E,onReconnectStart:S,onReconnectEnd:D,reconnectRadius:V,children:M,disableKeyboardA11y:B})=>{const{edgesFocusable:F,edgesUpdatable:X,elementsSelectable:z,width:q,height:Z,connectionMode:x,nodeInternals:b,onError:C}=me(qD,sn),P=VD(t,b,n);return q?lt.createElement(lt.Fragment,null,P.map(({level:L,edges:U,isMaxLevel:R})=>lt.createElement("svg",{key:L,style:{zIndex:L},width:q,height:Z,className:"react-flow__edges react-flow__container"},R&&lt.createElement(HD,{defaultColor:e,rfId:r}),lt.createElement("g",null,U.map(k=>{const[K,O,$]=aT(b.get(k.source)),[rt,Q,N]=aT(b.get(k.target));if(!$||!N)return null;let Y=k.type||"default";o[Y]||(C?.("011",jr.error011(Y)),Y="default");const et=o[Y]||o.default,st=x===zs.Strict?Q.target:(Q.target??[]).concat(Q.source??[]),ct=oT(O.source,k.sourceHandle),pt=oT(st,k.targetHandle),yt=ct?.position||bt.Bottom,Ct=pt?.position||bt.Top,At=!!(k.focusable||F&&typeof k.focusable>"u"),Vt=k.reconnectable||k.updatable,Pt=typeof E<"u"&&(Vt||X&&typeof Vt>"u");if(!ct||!pt)return C?.("008",jr.error008(ct,k)),null;const{sourceX:ue,sourceY:ce,targetX:Ee,targetY:_e}=DD(K,ct,yt,rt,pt,Ct);return lt.createElement(et,{key:k.id,id:k.id,className:mn([k.className,l]),type:Y,data:k.data,selected:!!k.selected,animated:!!k.animated,hidden:!!k.hidden,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,style:k.style,source:k.source,target:k.target,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerEnd:k.markerEnd,markerStart:k.markerStart,sourceX:ue,sourceY:ce,targetX:Ee,targetY:_e,sourcePosition:yt,targetPosition:Ct,elementsSelectable:z,onContextMenu:c,onMouseEnter:d,onMouseMove:g,onMouseLeave:m,onClick:y,onEdgeDoubleClick:v,onReconnect:E,onReconnectStart:S,onReconnectEnd:D,reconnectRadius:V,rfId:r,ariaLabel:k.ariaLabel,isFocusable:At,isReconnectable:Pt,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth,disableKeyboardA11y:B})})))),M):null};ob.displayName="EdgeRenderer";var FD=j.memo(ob);const jD=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function GD({children:e}){const t=me(jD);return lt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function $D(e){const t=dc(),n=j.useRef(!1);j.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const YD={[bt.Left]:bt.Right,[bt.Right]:bt.Left,[bt.Top]:bt.Bottom,[bt.Bottom]:bt.Top},ab=({nodeId:e,handleType:t,style:n,type:r=Rs.Bezier,CustomComponent:o,connectionStatus:l})=>{const{fromNode:c,handleId:d,toX:g,toY:m,connectionMode:y}=me(j.useCallback(Z=>({fromNode:Z.nodeInternals.get(e),handleId:Z.connectionHandleId,toX:(Z.connectionPosition.x-Z.transform[0])/Z.transform[2],toY:(Z.connectionPosition.y-Z.transform[1])/Z.transform[2],connectionMode:Z.connectionMode}),[e]),sn),v=c?.[Ie]?.handleBounds;let E=v?.[t];if(y===zs.Loose&&(E=E||v?.[t==="source"?"target":"source"]),!c||!E)return null;const S=d?E.find(Z=>Z.id===d):E[0],D=S?S.x+S.width/2:(c.width??0)/2,V=S?S.y+S.height/2:c.height??0,M=(c.positionAbsolute?.x??0)+D,B=(c.positionAbsolute?.y??0)+V,F=S?.position,X=F?YD[F]:null;if(!F||!X)return null;if(o)return lt.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:c,fromHandle:S,fromX:M,fromY:B,toX:g,toY:m,fromPosition:F,toPosition:X,connectionStatus:l});let z="";const q={sourceX:M,sourceY:B,sourcePosition:F,targetX:g,targetY:m,targetPosition:X};return r===Rs.Bezier?[z]=NS(q):r===Rs.Step?[z]=sp({...q,borderRadius:0}):r===Rs.SmoothStep?[z]=sp(q):r===Rs.SimpleBezier?[z]=xS(q):z=`M${M},${B} ${g},${m}`,lt.createElement("path",{d:z,fill:"none",className:"react-flow__connection-path",style:n})};ab.displayName="ConnectionLine";const KD=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function XD({containerStyle:e,style:t,type:n,component:r}){const{nodeId:o,handleType:l,nodesConnectable:c,width:d,height:g,connectionStatus:m}=me(KD,sn);return!(o&&l&&d&&c)?null:lt.createElement("svg",{style:e,width:d,height:g,className:"react-flow__edges react-flow__connectionline react-flow__container"},lt.createElement("g",{className:mn(["react-flow__connection",m])},lt.createElement(ab,{nodeId:o,handleType:l,style:t,type:n,CustomComponent:r,connectionStatus:m})))}function uT(e,t){return j.useRef(null),Ke(),j.useMemo(()=>t(e),[e])}const lb=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:l,onNodeClick:c,onEdgeClick:d,onNodeDoubleClick:g,onEdgeDoubleClick:m,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:E,onNodeContextMenu:S,onSelectionContextMenu:D,onSelectionStart:V,onSelectionEnd:M,connectionLineType:B,connectionLineStyle:F,connectionLineComponent:X,connectionLineContainerStyle:z,selectionKeyCode:q,selectionOnDrag:Z,selectionMode:x,multiSelectionKeyCode:b,panActivationKeyCode:C,zoomActivationKeyCode:P,deleteKeyCode:L,onlyRenderVisibleElements:U,elementsSelectable:R,selectNodesOnDrag:k,defaultViewport:K,translateExtent:O,minZoom:$,maxZoom:rt,preventScrolling:Q,defaultMarkerColor:N,zoomOnScroll:Y,zoomOnPinch:et,panOnScroll:st,panOnScrollSpeed:ct,panOnScrollMode:pt,zoomOnDoubleClick:yt,panOnDrag:Ct,onPaneClick:At,onPaneMouseEnter:Vt,onPaneMouseMove:Pt,onPaneMouseLeave:ue,onPaneScroll:ce,onPaneContextMenu:Ee,onEdgeContextMenu:_e,onEdgeMouseEnter:he,onEdgeMouseMove:Xe,onEdgeMouseLeave:Lt,onReconnect:wt,onReconnectStart:xe,onReconnectEnd:pn,reconnectRadius:Un,noDragClassName:Ui,noWheelClassName:zn,noPanClassName:Sn,elevateEdgesOnSelect:Si,disableKeyboardA11y:te,nodeOrigin:Ft,nodeExtent:ke,rfId:Te})=>{const zi=uT(e,SD),Ve=uT(t,ND);return $D(l),lt.createElement(TD,{onPaneClick:At,onPaneMouseEnter:Vt,onPaneMouseMove:Pt,onPaneMouseLeave:ue,onPaneContextMenu:Ee,onPaneScroll:ce,deleteKeyCode:L,selectionKeyCode:q,selectionOnDrag:Z,selectionMode:x,onSelectionStart:V,onSelectionEnd:M,multiSelectionKeyCode:b,panActivationKeyCode:C,zoomActivationKeyCode:P,elementsSelectable:R,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:Y,zoomOnPinch:et,zoomOnDoubleClick:yt,panOnScroll:st,panOnScrollSpeed:ct,panOnScrollMode:pt,panOnDrag:Ct,defaultViewport:K,translateExtent:O,minZoom:$,maxZoom:rt,onSelectionContextMenu:D,preventScrolling:Q,noDragClassName:Ui,noWheelClassName:zn,noPanClassName:Sn,disableKeyboardA11y:te},lt.createElement(GD,null,lt.createElement(FD,{edgeTypes:Ve,onEdgeClick:d,onEdgeDoubleClick:m,onlyRenderVisibleElements:U,onEdgeContextMenu:_e,onEdgeMouseEnter:he,onEdgeMouseMove:Xe,onEdgeMouseLeave:Lt,onReconnect:wt,onReconnectStart:xe,onReconnectEnd:pn,reconnectRadius:Un,defaultMarkerColor:N,noPanClassName:Sn,elevateEdgesOnSelect:!!Si,disableKeyboardA11y:te,rfId:Te},lt.createElement(XD,{style:F,type:B,component:X,containerStyle:z})),lt.createElement("div",{className:"react-flow__edgelabel-renderer"}),lt.createElement(RD,{nodeTypes:zi,onNodeClick:c,onNodeDoubleClick:g,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:E,onNodeContextMenu:S,selectNodesOnDrag:k,onlyRenderVisibleElements:U,noPanClassName:Sn,noDragClassName:Ui,disableKeyboardA11y:te,nodeOrigin:Ft,nodeExtent:ke,rfId:Te})))};lb.displayName="GraphView";var QD=j.memo(lb);const cp=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ws={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:cp,nodeExtent:cp,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:zs.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:bN,isValidConnection:void 0},ZD=()=>zC((e,t)=>({...ws,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:l}=t();e({nodeInternals:Mm(n,r,o,l)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",l=typeof r<"u",c=o?Mm(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:c,edges:l?r:[],hasDefaultNodes:o,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:l,fitViewOnInitDone:c,fitViewOnInitOptions:d,domNode:g,nodeOrigin:m}=t(),y=g?.querySelector(".react-flow__viewport");if(!y)return;const v=window.getComputedStyle(y),{m22:E}=new window.DOMMatrixReadOnly(v.transform),S=n.reduce((V,M)=>{const B=o.get(M.id);if(B?.hidden)o.set(B.id,{...B,[Ie]:{...B[Ie],handleBounds:void 0}});else if(B){const F=Gp(M.nodeElement);!!(F.width&&F.height&&(B.width!==F.width||B.height!==F.height||M.forceUpdate))&&(o.set(B.id,{...B,[Ie]:{...B[Ie],handleBounds:{source:nT(".source",M.nodeElement,E,m),target:nT(".target",M.nodeElement,E,m)}},...F}),V.push({id:B.id,type:"dimensions",dimensions:F}))}return V},[]);KS(o,m);const D=c||l&&!c&&XS(t,{initial:!0,...d});e({nodeInternals:new Map(o),fitViewOnInitDone:D}),S?.length>0&&r?.(S)},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:l}=t(),c=n.map(d=>{const g={id:d.id,type:"position",dragging:o};return r&&(g.positionAbsolute=d.positionAbsolute,g.position=d.position),g});l(c)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:l,nodeOrigin:c,getNodes:d,elevateNodesOnSelect:g}=t();if(n?.length){if(l){const m=ZS(n,d()),y=Mm(m,o,c,g);e({nodeInternals:y})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:l}=t();let c,d=null;r?c=n.map(g=>As(g,!0)):(c=$a(l(),n),d=$a(o,[])),Kh({changedNodes:c,changedEdges:d,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:l}=t();let c,d=null;r?c=n.map(g=>As(g,!0)):(c=$a(o,n),d=$a(l(),[])),Kh({changedNodes:d,changedEdges:c,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:l}=t(),c=n||l(),d=r||o,g=c.map(y=>(y.selected=!1,As(y.id,!1))),m=d.map(y=>As(y.id,!1));Kh({changedNodes:g,changedEdges:m,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r?.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r?.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),l=r().filter(d=>d.selected).map(d=>As(d.id,!1)),c=n.filter(d=>d.selected).map(d=>As(d.id,!1));Kh({changedNodes:l,changedEdges:c,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=$p(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:l,d3Zoom:c,d3Selection:d,translateExtent:g}=t();if(!c||!d||!n.x&&!n.y)return!1;const m=Hr.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),y=[[0,0],[o,l]],v=c?.constrain()(m,y,g);return c.transform(d,v),r[0]!==v.x||r[1]!==v.y||r[2]!==v.k},cancelConnection:()=>e({connectionNodeId:ws.connectionNodeId,connectionHandleId:ws.connectionHandleId,connectionHandleType:ws.connectionHandleType,connectionStatus:ws.connectionStatus,connectionStartHandle:ws.connectionStartHandle,connectionEndHandle:ws.connectionEndHandle}),reset:()=>e({...ws})}),Object.is),ub=({children:e})=>{const t=j.useRef(null);return t.current||(t.current=ZD()),lt.createElement(yN,{value:t.current},e)};ub.displayName="ReactFlowProvider";const cb=({children:e})=>j.useContext(Qf)?lt.createElement(lt.Fragment,null,e):lt.createElement(ub,null,e);cb.displayName="ReactFlowWrapper";const WD={input:HS,default:lp,output:FS,group:Wp},JD={default:Af,straight:Xp,step:Kp,smoothstep:Zf,simplebezier:Yp},tM=[0,0],eM=[15,15],nM={x:0,y:0,zoom:1},iM={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},hb=j.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:l=WD,edgeTypes:c=JD,onNodeClick:d,onEdgeClick:g,onInit:m,onMove:y,onMoveStart:v,onMoveEnd:E,onConnect:S,onConnectStart:D,onConnectEnd:V,onClickConnectStart:M,onClickConnectEnd:B,onNodeMouseEnter:F,onNodeMouseMove:X,onNodeMouseLeave:z,onNodeContextMenu:q,onNodeDoubleClick:Z,onNodeDragStart:x,onNodeDrag:b,onNodeDragStop:C,onNodesDelete:P,onEdgesDelete:L,onSelectionChange:U,onSelectionDragStart:R,onSelectionDrag:k,onSelectionDragStop:K,onSelectionContextMenu:O,onSelectionStart:$,onSelectionEnd:rt,connectionMode:Q=zs.Strict,connectionLineType:N=Rs.Bezier,connectionLineStyle:Y,connectionLineComponent:et,connectionLineContainerStyle:st,deleteKeyCode:ct="Backspace",selectionKeyCode:pt="Shift",selectionOnDrag:yt=!1,selectionMode:Ct=Qu.Full,panActivationKeyCode:At="Space",multiSelectionKeyCode:Vt=bf()?"Meta":"Control",zoomActivationKeyCode:Pt=bf()?"Meta":"Control",snapToGrid:ue=!1,snapGrid:ce=eM,onlyRenderVisibleElements:Ee=!1,selectNodesOnDrag:_e=!0,nodesDraggable:he,nodesConnectable:Xe,nodesFocusable:Lt,nodeOrigin:wt=tM,edgesFocusable:xe,edgesUpdatable:pn,elementsSelectable:Un,defaultViewport:Ui=nM,minZoom:zn=.5,maxZoom:Sn=2,translateExtent:Si=cp,preventScrolling:te=!0,nodeExtent:Ft,defaultMarkerColor:ke="#b1b1b7",zoomOnScroll:Te=!0,zoomOnPinch:zi=!0,panOnScroll:Ve=!1,panOnScrollSpeed:Qe=.5,panOnScrollMode:bn=No.Free,zoomOnDoubleClick:An=!0,panOnDrag:Ze=!0,onPaneClick:on,onPaneMouseEnter:Rn,onPaneMouseMove:dr,onPaneMouseLeave:gr,onPaneScroll:bi,onPaneContextMenu:Bn,children:ni,onEdgeContextMenu:Hn,onEdgeDoubleClick:ii,onEdgeMouseEnter:Qs,onEdgeMouseMove:Bi,onEdgeMouseLeave:Qr,onEdgeUpdate:Hi,onEdgeUpdateStart:Yo,onEdgeUpdateEnd:de,onReconnect:Ne,onReconnectStart:Ae,onReconnectEnd:Dn,reconnectRadius:Zs=10,edgeUpdaterRadius:bl=10,onNodesChange:qi,onEdgesChange:Ko,noDragClassName:mr="nodrag",noWheelClassName:Fi="nowheel",noPanClassName:ri="nopan",fitView:si=!1,fitViewOptions:oi,connectOnClick:an=!0,attributionPosition:we,proOptions:Ws,defaultEdgeOptions:Zr,elevateNodesOnSelect:qn=!0,elevateEdgesOnSelect:Ai=!1,disableKeyboardA11y:Js=!1,autoPanOnConnect:Xo=!0,autoPanOnNodeDrag:pr=!0,connectionRadius:Qo=20,isValidConnection:ji,onError:ai,style:He,id:Gi,nodeDragThreshold:Zo,...Ri},Wr)=>{const $i=Gi||"1";return lt.createElement("div",{...Ri,style:{...He,...iM},ref:Wr,className:mn(["react-flow",o]),"data-testid":"rf__wrapper",id:Gi},lt.createElement(cb,null,lt.createElement(QD,{onInit:m,onMove:y,onMoveStart:v,onMoveEnd:E,onNodeClick:d,onEdgeClick:g,onNodeMouseEnter:F,onNodeMouseMove:X,onNodeMouseLeave:z,onNodeContextMenu:q,onNodeDoubleClick:Z,nodeTypes:l,edgeTypes:c,connectionLineType:N,connectionLineStyle:Y,connectionLineComponent:et,connectionLineContainerStyle:st,selectionKeyCode:pt,selectionOnDrag:yt,selectionMode:Ct,deleteKeyCode:ct,multiSelectionKeyCode:Vt,panActivationKeyCode:At,zoomActivationKeyCode:Pt,onlyRenderVisibleElements:Ee,selectNodesOnDrag:_e,defaultViewport:Ui,translateExtent:Si,minZoom:zn,maxZoom:Sn,preventScrolling:te,zoomOnScroll:Te,zoomOnPinch:zi,zoomOnDoubleClick:An,panOnScroll:Ve,panOnScrollSpeed:Qe,panOnScrollMode:bn,panOnDrag:Ze,onPaneClick:on,onPaneMouseEnter:Rn,onPaneMouseMove:dr,onPaneMouseLeave:gr,onPaneScroll:bi,onPaneContextMenu:Bn,onSelectionContextMenu:O,onSelectionStart:$,onSelectionEnd:rt,onEdgeContextMenu:Hn,onEdgeDoubleClick:ii,onEdgeMouseEnter:Qs,onEdgeMouseMove:Bi,onEdgeMouseLeave:Qr,onReconnect:Ne??Hi,onReconnectStart:Ae??Yo,onReconnectEnd:Dn??de,reconnectRadius:Zs??bl,defaultMarkerColor:ke,noDragClassName:mr,noWheelClassName:Fi,noPanClassName:ri,elevateEdgesOnSelect:Ai,rfId:$i,disableKeyboardA11y:Js,nodeOrigin:wt,nodeExtent:Ft}),lt.createElement(YN,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:S,onConnectStart:D,onConnectEnd:V,onClickConnectStart:M,onClickConnectEnd:B,nodesDraggable:he,nodesConnectable:Xe,nodesFocusable:Lt,edgesFocusable:xe,edgesUpdatable:pn,elementsSelectable:Un,elevateNodesOnSelect:qn,minZoom:zn,maxZoom:Sn,nodeExtent:Ft,onNodesChange:qi,onEdgesChange:Ko,snapToGrid:ue,snapGrid:ce,connectionMode:Q,translateExtent:Si,connectOnClick:an,defaultEdgeOptions:Zr,fitView:si,fitViewOptions:oi,onNodesDelete:P,onEdgesDelete:L,onNodeDragStart:x,onNodeDrag:b,onNodeDragStop:C,onSelectionDrag:k,onSelectionDragStart:R,onSelectionDragStop:K,noPanClassName:ri,nodeOrigin:wt,rfId:$i,autoPanOnConnect:Xo,autoPanOnNodeDrag:pr,onError:ai,connectionRadius:Qo,isValidConnection:ji,nodeDragThreshold:Zo}),lt.createElement(GN,{onSelectionChange:U}),ni,lt.createElement(vN,{proOptions:Ws,position:we}),lt.createElement(WN,{rfId:$i,disableKeyboardA11y:Js})))});hb.displayName="ReactFlow";function fb(e){return t=>{const[n,r]=j.useState(t),o=j.useCallback(l=>r(c=>e(l,c)),[]);return[n,r,o]}}const rM=fb(ZS),sM=fb(fD),db=({id:e,x:t,y:n,width:r,height:o,style:l,color:c,strokeColor:d,strokeWidth:g,className:m,borderRadius:y,shapeRendering:v,onClick:E,selected:S})=>{const{background:D,backgroundColor:V}=l||{},M=c||D||V;return lt.createElement("rect",{className:mn(["react-flow__minimap-node",{selected:S},m]),x:t,y:n,rx:y,ry:y,width:r,height:o,fill:M,stroke:d,strokeWidth:g,shapeRendering:v,onClick:E?B=>E(B,e):void 0})};db.displayName="MiniMapNode";var oM=j.memo(db);const aM=e=>e.nodeOrigin,lM=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Pm=e=>e instanceof Function?e:()=>e;function uM({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o=2,nodeComponent:l=oM,onClick:c}){const d=me(lM,sn),g=me(aM),m=Pm(t),y=Pm(e),v=Pm(n),E=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return lt.createElement(lt.Fragment,null,d.map(S=>{const{x:D,y:V}=Oo(S,g).positionAbsolute;return lt.createElement(l,{key:S.id,x:D,y:V,width:S.width,height:S.height,style:S.style,selected:S.selected,className:v(S),color:m(S),borderRadius:r,strokeColor:y(S),strokeWidth:o,shapeRendering:E,onClick:c,id:S.id})}))}var cM=j.memo(uM);const hM=200,fM=150,dM=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?wN(Wf(t,e.nodeOrigin),n):n,rfId:e.rfId}},gM="react-flow__minimap-desc";function gb({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:o="",nodeBorderRadius:l=5,nodeStrokeWidth:c=2,nodeComponent:d,maskColor:g="rgb(240, 240, 240, 0.6)",maskStrokeColor:m="none",maskStrokeWidth:y=1,position:v="bottom-right",onClick:E,onNodeClick:S,pannable:D=!1,zoomable:V=!1,ariaLabel:M="React Flow mini map",inversePan:B=!1,zoomStep:F=10,offsetScale:X=5}){const z=Ke(),q=j.useRef(null),{boundingRect:Z,viewBB:x,rfId:b}=me(dM,sn),C=e?.width??hM,P=e?.height??fM,L=Z.width/C,U=Z.height/P,R=Math.max(L,U),k=R*C,K=R*P,O=X*R,$=Z.x-(k-Z.width)/2-O,rt=Z.y-(K-Z.height)/2-O,Q=k+O*2,N=K+O*2,Y=`${gM}-${b}`,et=j.useRef(0);et.current=R,j.useEffect(()=>{if(q.current){const pt=vi(q.current),yt=Vt=>{const{transform:Pt,d3Selection:ue,d3Zoom:ce}=z.getState();if(Vt.sourceEvent.type!=="wheel"||!ue||!ce)return;const Ee=-Vt.sourceEvent.deltaY*(Vt.sourceEvent.deltaMode===1?.05:Vt.sourceEvent.deltaMode?1:.002)*F,_e=Pt[2]*Math.pow(2,Ee);ce.scaleTo(ue,_e)},Ct=Vt=>{const{transform:Pt,d3Selection:ue,d3Zoom:ce,translateExtent:Ee,width:_e,height:he}=z.getState();if(Vt.sourceEvent.type!=="mousemove"||!ue||!ce)return;const Xe=et.current*Math.max(1,Pt[2])*(B?-1:1),Lt={x:Pt[0]-Vt.sourceEvent.movementX*Xe,y:Pt[1]-Vt.sourceEvent.movementY*Xe},wt=[[0,0],[_e,he]],xe=Hr.translate(Lt.x,Lt.y).scale(Pt[2]),pn=ce.constrain()(xe,wt,Ee);ce.transform(ue,pn)},At=vS().on("zoom",D?Ct:null).on("zoom.wheel",V?yt:null);return pt.call(At),()=>{pt.on("zoom",null)}}},[D,V,B,F]);const st=E?pt=>{const yt=Di(pt);E(pt,{x:yt[0],y:yt[1]})}:void 0,ct=S?(pt,yt)=>{const Ct=z.getState().nodeInternals.get(yt);S(pt,Ct)}:void 0;return lt.createElement(jp,{position:v,style:e,className:mn(["react-flow__minimap",t]),"data-testid":"rf__minimap"},lt.createElement("svg",{width:C,height:P,viewBox:`${$} ${rt} ${Q} ${N}`,role:"img","aria-labelledby":Y,ref:q,onClick:st},M&&lt.createElement("title",{id:Y},M),lt.createElement(cM,{onClick:ct,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:l,nodeClassName:o,nodeStrokeWidth:c,nodeComponent:d}),lt.createElement("path",{className:"react-flow__minimap-mask",d:`M${$-O},${rt-O}h${Q+O*2}v${N+O*2}h${-Q-O*2}z
        M${x.x},${x.y}h${x.width}v${x.height}h${-x.width}z`,fill:g,fillRule:"evenodd",stroke:m,strokeWidth:y,pointerEvents:"none"})))}gb.displayName="MiniMap";var mM=j.memo(gb);function pM(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},lt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function yM(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},lt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function _M(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},lt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function vM(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function EM(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Mu=({children:e,className:t,...n})=>lt.createElement("button",{type:"button",className:mn(["react-flow__controls-button",t]),...n},e);Mu.displayName="ControlButton";const TM=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),mb=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:g,className:m,children:y,position:v="bottom-left"})=>{const E=Ke(),[S,D]=j.useState(!1),{isInteractive:V,minZoomReached:M,maxZoomReached:B}=me(TM,sn),{zoomIn:F,zoomOut:X,fitView:z}=dc();if(j.useEffect(()=>{D(!0)},[]),!S)return null;const q=()=>{F(),l?.()},Z=()=>{X(),c?.()},x=()=>{z(o),d?.()},b=()=>{E.setState({nodesDraggable:!V,nodesConnectable:!V,elementsSelectable:!V}),g?.(!V)};return lt.createElement(jp,{className:mn(["react-flow__controls",m]),position:v,style:e,"data-testid":"rf__controls"},t&&lt.createElement(lt.Fragment,null,lt.createElement(Mu,{onClick:q,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:B},lt.createElement(pM,null)),lt.createElement(Mu,{onClick:Z,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:M},lt.createElement(yM,null))),n&&lt.createElement(Mu,{className:"react-flow__controls-fitview",onClick:x,title:"fit view","aria-label":"fit view"},lt.createElement(_M,null)),r&&lt.createElement(Mu,{className:"react-flow__controls-interactive",onClick:b,title:"toggle interactivity","aria-label":"toggle interactivity"},V?lt.createElement(EM,null):lt.createElement(vM,null)),y)};mb.displayName="Controls";var wM=j.memo(mb),wi;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(wi||(wi={}));function SM({color:e,dimensions:t,lineWidth:n}){return lt.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function bM({color:e,radius:t}){return lt.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const AM={[wi.Dots]:"#91919a",[wi.Lines]:"#eee",[wi.Cross]:"#e2e2e2"},RM={[wi.Dots]:1,[wi.Lines]:1,[wi.Cross]:6},CM=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function pb({id:e,variant:t=wi.Dots,gap:n=20,size:r,lineWidth:o=1,offset:l=2,color:c,style:d,className:g}){const m=j.useRef(null),{transform:y,patternId:v}=me(CM,sn),E=c||AM[t],S=r||RM[t],D=t===wi.Dots,V=t===wi.Cross,M=Array.isArray(n)?n:[n,n],B=[M[0]*y[2]||1,M[1]*y[2]||1],F=S*y[2],X=V?[F,F]:B,z=D?[F/l,F/l]:[X[0]/l,X[1]/l];return lt.createElement("svg",{className:mn(["react-flow__background",g]),style:{...d,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:m,"data-testid":"rf__background"},lt.createElement("pattern",{id:v+e,x:y[0]%B[0],y:y[1]%B[1],width:B[0],height:B[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${z[0]},-${z[1]})`},D?lt.createElement(bM,{color:E,radius:F/l}):lt.createElement(SM,{dimensions:X,color:E,lineWidth:o})),lt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+e})`}))}pb.displayName="Background";var IM=j.memo(pb);const xM=()=>{};var cT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},NM=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const l=e[n++];t[r++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=e[n++],c=e[n++],d=e[n++],g=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const l=e[n++],c=e[n++];t[r++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return t.join("")},_b={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<e.length;o+=3){const l=e[o],c=o+1<e.length,d=c?e[o+1]:0,g=o+2<e.length,m=g?e[o+2]:0,y=l>>2,v=(l&3)<<4|d>>4;let E=(d&15)<<2|m>>6,S=m&63;g||(S=64,c||(E=64)),r.push(n[y],n[v],n[E],n[S])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(yb(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):NM(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<e.length;){const l=n[e.charAt(o++)],d=o<e.length?n[e.charAt(o)]:0;++o;const m=o<e.length?n[e.charAt(o)]:64;++o;const v=o<e.length?n[e.charAt(o)]:64;if(++o,l==null||d==null||m==null||v==null)throw new DM;const E=l<<2|d>>4;if(r.push(E),m!==64){const S=d<<4&240|m>>2;if(r.push(S),v!==64){const D=m<<6&192|v;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class DM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MM=function(e){const t=yb(e);return _b.encodeByteArray(t,!0)},Rf=function(e){return MM(e).replace(/\./g,"")},vb=function(e){try{return _b.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=()=>OM().__FIREBASE_DEFAULTS__,VM=()=>{if(typeof process>"u"||typeof cT>"u")return;const e=cT.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},PM=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&vb(e[1]);return t&&JSON.parse(t)},Jf=()=>{try{return xM()||kM()||VM()||PM()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Eb=e=>{var t,n;return(n=(t=Jf())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},LM=e=>{const t=Eb(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Tb=()=>{var e;return(e=Jf())===null||e===void 0?void 0:e.config},wb=e=>{var t;return(t=Jf())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(e){return e.endsWith(".cloudworkstations.dev")}async function Sb(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",o=e.iat||0,l=e.sub||e.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Rf(JSON.stringify(n)),Rf(JSON.stringify(c)),""].join(".")}const Uu={};function BM(){const e={prod:[],emulator:[]};for(const t of Object.keys(Uu))Uu[t]?e.emulator.push(t):e.prod.push(t);return e}function HM(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let hT=!1;function bb(e,t){if(typeof window>"u"||typeof document>"u"||!ml(window.location.host)||Uu[e]===t||Uu[e]||hT)return;Uu[e]=t;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",l=BM().prod.length>0;function c(){const E=document.getElementById(r);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{hT=!0,c()},E}function y(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=HM(r),S=n("text"),D=document.getElementById(S)||document.createElement("span"),V=n("learnmore"),M=document.getElementById(V)||document.createElement("a"),B=n("preprendIcon"),F=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const X=E.element;d(X),y(M,V);const z=m();g(F,B),X.append(F,D,M,z),document.body.appendChild(X)}l?(D.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function FM(){var e;const t=(e=Jf())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GM(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function $M(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YM(){const e=wn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function KM(){return!FM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XM(){try{return typeof indexedDB=="object"}catch{return!1}}function QM(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;t(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM="FirebaseError";class Xr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=ZM,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gc.prototype.create)}}class gc{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},o=`${this.service}/${t}`,l=this.errors[t],c=l?WM(l,r):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new Xr(o,d,r)}}function WM(e,t){return e.replace(JM,(n,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const JM=/\{\$([^}]+)}/g;function tO(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Po(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const l=e[o],c=t[o];if(fT(l)&&fT(c)){if(!Po(l,c))return!1}else if(l!==c)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function fT(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(o=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Ou(e){const t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,l]=r.split("=");t[decodeURIComponent(o)]=decodeURIComponent(l)}}),t}function ku(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function eO(e,t){const n=new nO(e,t);return n.subscribe.bind(n)}class nO{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let o;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");iO(t,["next","error","complete"])?o=t:o={next:t,error:n,complete:r},o.next===void 0&&(o.next=Lm),o.error===void 0&&(o.error=Lm),o.complete===void 0&&(o.complete=Lm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iO(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Lm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(e){return e&&e._delegate?e._delegate:e}class Lo{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new UM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t?.identifier),o=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(oO(t))try{this.getOrInitializeService({instanceIdentifier:Io})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});r.resolve(l)}catch{}}}}clearInstance(t=Io){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Io){return this.instances.has(t)}getOptions(t=Io){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(o)}return o}onInit(t,n){var r;const o=this.normalizeInstanceIdentifier(n),l=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;l.add(t),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&t(c,o),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sO(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Io){return this.component?this.component.multipleInstances?t:Io:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sO(e){return e===Io?void 0:e}function oO(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new rO(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})($t||($t={}));const lO={debug:$t.DEBUG,verbose:$t.VERBOSE,info:$t.INFO,warn:$t.WARN,error:$t.ERROR,silent:$t.SILENT},uO=$t.INFO,cO={[$t.DEBUG]:"log",[$t.VERBOSE]:"log",[$t.INFO]:"info",[$t.WARN]:"warn",[$t.ERROR]:"error"},hO=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),o=cO[t];if(o)console[o](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ty{constructor(t){this.name=t,this._logLevel=uO,this._logHandler=hO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in $t))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?lO[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,$t.DEBUG,...t),this._logHandler(this,$t.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,$t.VERBOSE,...t),this._logHandler(this,$t.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,$t.INFO,...t),this._logHandler(this,$t.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,$t.WARN,...t),this._logHandler(this,$t.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,$t.ERROR,...t),this._logHandler(this,$t.ERROR,...t)}}const fO=(e,t)=>t.some(n=>e instanceof n);let dT,gT;function dO(){return dT||(dT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gO(){return gT||(gT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ab=new WeakMap,hp=new WeakMap,Rb=new WeakMap,Um=new WeakMap,ey=new WeakMap;function mO(e){const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("success",l),e.removeEventListener("error",c)},l=()=>{n(Os(e.result)),o()},c=()=>{r(e.error),o()};e.addEventListener("success",l),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&Ab.set(n,e)}).catch(()=>{}),ey.set(t,e),t}function pO(e){if(hp.has(e))return;const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("complete",l),e.removeEventListener("error",c),e.removeEventListener("abort",c)},l=()=>{n(),o()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",l),e.addEventListener("error",c),e.addEventListener("abort",c)});hp.set(e,t)}let fp={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return hp.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Rb.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Os(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function yO(e){fp=e(fp)}function _O(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(zm(this),t,...n);return Rb.set(r,t.sort?t.sort():[t]),Os(r)}:gO().includes(e)?function(...t){return e.apply(zm(this),t),Os(Ab.get(this))}:function(...t){return Os(e.apply(zm(this),t))}}function vO(e){return typeof e=="function"?_O(e):(e instanceof IDBTransaction&&pO(e),fO(e,dO())?new Proxy(e,fp):e)}function Os(e){if(e instanceof IDBRequest)return mO(e);if(Um.has(e))return Um.get(e);const t=vO(e);return t!==e&&(Um.set(e,t),ey.set(t,e)),t}const zm=e=>ey.get(e);function EO(e,t,{blocked:n,upgrade:r,blocking:o,terminated:l}={}){const c=indexedDB.open(e,t),d=Os(c);return r&&c.addEventListener("upgradeneeded",g=>{r(Os(c.result),g.oldVersion,g.newVersion,Os(c.transaction),g)}),n&&c.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const TO=["get","getKey","getAll","getAllKeys","count"],wO=["put","add","delete","clear"],Bm=new Map;function mT(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Bm.get(t))return Bm.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=wO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||TO.includes(n)))return;const l=async function(c,...d){const g=this.transaction(c,o?"readwrite":"readonly");let m=g.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),o&&g.done]))[0]};return Bm.set(t,l),l}yO(e=>({...e,get:(t,n,r)=>mT(t,n)||e.get(t,n,r),has:(t,n)=>!!mT(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bO(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function bO(e){const t=e.getComponent();return t?.type==="VERSION"}const dp="@firebase/app",pT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new ty("@firebase/app"),AO="@firebase/app-compat",RO="@firebase/analytics-compat",CO="@firebase/analytics",IO="@firebase/app-check-compat",xO="@firebase/app-check",NO="@firebase/auth",DO="@firebase/auth-compat",MO="@firebase/database",OO="@firebase/data-connect",kO="@firebase/database-compat",VO="@firebase/functions",PO="@firebase/functions-compat",LO="@firebase/installations",UO="@firebase/installations-compat",zO="@firebase/messaging",BO="@firebase/messaging-compat",HO="@firebase/performance",qO="@firebase/performance-compat",FO="@firebase/remote-config",jO="@firebase/remote-config-compat",GO="@firebase/storage",$O="@firebase/storage-compat",YO="@firebase/firestore",KO="@firebase/ai",XO="@firebase/firestore-compat",QO="firebase",ZO="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="[DEFAULT]",WO={[dp]:"fire-core",[AO]:"fire-core-compat",[CO]:"fire-analytics",[RO]:"fire-analytics-compat",[xO]:"fire-app-check",[IO]:"fire-app-check-compat",[NO]:"fire-auth",[DO]:"fire-auth-compat",[MO]:"fire-rtdb",[OO]:"fire-data-connect",[kO]:"fire-rtdb-compat",[VO]:"fire-fn",[PO]:"fire-fn-compat",[LO]:"fire-iid",[UO]:"fire-iid-compat",[zO]:"fire-fcm",[BO]:"fire-fcm-compat",[HO]:"fire-perf",[qO]:"fire-perf-compat",[FO]:"fire-rc",[jO]:"fire-rc-compat",[GO]:"fire-gcs",[$O]:"fire-gcs-compat",[YO]:"fire-fst",[XO]:"fire-fst-compat",[KO]:"fire-vertex","fire-js":"fire-js",[QO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf=new Map,JO=new Map,mp=new Map;function yT(e,t){try{e.container.addComponent(t)}catch(n){Gr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function al(e){const t=e.name;if(mp.has(t))return Gr.debug(`There were multiple attempts to register component ${t}.`),!1;mp.set(t,e);for(const n of Cf.values())yT(n,e);for(const n of JO.values())yT(n,e);return!0}function ny(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ei(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ks=new gc("app","Firebase",t4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=ZO;function Cb(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:gp,automaticDataCollectionEnabled:!0},t),o=r.name;if(typeof o!="string"||!o)throw ks.create("bad-app-name",{appName:String(o)});if(n||(n=Tb()),!n)throw ks.create("no-options");const l=Cf.get(o);if(l){if(Po(n,l.options)&&Po(r,l.config))return l;throw ks.create("duplicate-app",{appName:o})}const c=new aO(o);for(const g of mp.values())c.addComponent(g);const d=new e4(n,r,c);return Cf.set(o,d),d}function Ib(e=gp){const t=Cf.get(e);if(!t&&e===gp&&Tb())return Cb();if(!t)throw ks.create("no-app",{appName:e});return t}function Vs(e,t,n){var r;let o=(r=WO[e])!==null&&r!==void 0?r:e;n&&(o+=`-${n}`);const l=o.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${o}" with version "${t}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Gr.warn(d.join(" "));return}al(new Lo(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="firebase-heartbeat-database",i4=1,Ju="firebase-heartbeat-store";let Hm=null;function xb(){return Hm||(Hm=EO(n4,i4,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ju)}catch(n){console.warn(n)}}}}).catch(e=>{throw ks.create("idb-open",{originalErrorMessage:e.message})})),Hm}async function r4(e){try{const n=(await xb()).transaction(Ju),r=await n.objectStore(Ju).get(Nb(e));return await n.done,r}catch(t){if(t instanceof Xr)Gr.warn(t.message);else{const n=ks.create("idb-get",{originalErrorMessage:t?.message});Gr.warn(n.message)}}}async function _T(e,t){try{const r=(await xb()).transaction(Ju,"readwrite");await r.objectStore(Ju).put(t,Nb(e)),await r.done}catch(n){if(n instanceof Xr)Gr.warn(n.message);else{const r=ks.create("idb-set",{originalErrorMessage:n?.message});Gr.warn(r.message)}}}function Nb(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=1024,o4=30;class a4{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new u4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=vT();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>o4){const c=c4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Gr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vT(),{heartbeatsToSend:r,unsentEntries:o}=l4(this._heartbeatsCache.heartbeats),l=Rf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Gr.warn(n),""}}}function vT(){return new Date().toISOString().substring(0,10)}function l4(e,t=s4){const n=[];let r=e.slice();for(const o of e){const l=n.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),ET(n)>t){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),ET(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class u4{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XM()?QM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await r4(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return _T(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return _T(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function ET(e){return Rf(JSON.stringify({version:2,heartbeats:e})).length}function c4(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(e){al(new Lo("platform-logger",t=>new SO(t),"PRIVATE")),al(new Lo("heartbeat",t=>new a4(t),"PRIVATE")),Vs(dp,pT,e),Vs(dp,pT,"esm2017"),Vs("fire-js","")}h4("");var f4="firebase",d4="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vs(f4,d4,"app");var TT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ps,Db;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(x,b){function C(){}C.prototype=b.prototype,x.D=b.prototype,x.prototype=new C,x.prototype.constructor=x,x.C=function(P,L,U){for(var R=Array(arguments.length-2),k=2;k<arguments.length;k++)R[k-2]=arguments[k];return b.prototype[L].apply(P,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,b,C){C||(C=0);var P=Array(16);if(typeof b=="string")for(var L=0;16>L;++L)P[L]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(L=0;16>L;++L)P[L]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;b=x.g[0],C=x.g[1],L=x.g[2];var U=x.g[3],R=b+(U^C&(L^U))+P[0]+3614090360&4294967295;b=C+(R<<7&4294967295|R>>>25),R=U+(L^b&(C^L))+P[1]+3905402710&4294967295,U=b+(R<<12&4294967295|R>>>20),R=L+(C^U&(b^C))+P[2]+606105819&4294967295,L=U+(R<<17&4294967295|R>>>15),R=C+(b^L&(U^b))+P[3]+3250441966&4294967295,C=L+(R<<22&4294967295|R>>>10),R=b+(U^C&(L^U))+P[4]+4118548399&4294967295,b=C+(R<<7&4294967295|R>>>25),R=U+(L^b&(C^L))+P[5]+1200080426&4294967295,U=b+(R<<12&4294967295|R>>>20),R=L+(C^U&(b^C))+P[6]+2821735955&4294967295,L=U+(R<<17&4294967295|R>>>15),R=C+(b^L&(U^b))+P[7]+4249261313&4294967295,C=L+(R<<22&4294967295|R>>>10),R=b+(U^C&(L^U))+P[8]+1770035416&4294967295,b=C+(R<<7&4294967295|R>>>25),R=U+(L^b&(C^L))+P[9]+2336552879&4294967295,U=b+(R<<12&4294967295|R>>>20),R=L+(C^U&(b^C))+P[10]+4294925233&4294967295,L=U+(R<<17&4294967295|R>>>15),R=C+(b^L&(U^b))+P[11]+2304563134&4294967295,C=L+(R<<22&4294967295|R>>>10),R=b+(U^C&(L^U))+P[12]+1804603682&4294967295,b=C+(R<<7&4294967295|R>>>25),R=U+(L^b&(C^L))+P[13]+4254626195&4294967295,U=b+(R<<12&4294967295|R>>>20),R=L+(C^U&(b^C))+P[14]+2792965006&4294967295,L=U+(R<<17&4294967295|R>>>15),R=C+(b^L&(U^b))+P[15]+1236535329&4294967295,C=L+(R<<22&4294967295|R>>>10),R=b+(L^U&(C^L))+P[1]+4129170786&4294967295,b=C+(R<<5&4294967295|R>>>27),R=U+(C^L&(b^C))+P[6]+3225465664&4294967295,U=b+(R<<9&4294967295|R>>>23),R=L+(b^C&(U^b))+P[11]+643717713&4294967295,L=U+(R<<14&4294967295|R>>>18),R=C+(U^b&(L^U))+P[0]+3921069994&4294967295,C=L+(R<<20&4294967295|R>>>12),R=b+(L^U&(C^L))+P[5]+3593408605&4294967295,b=C+(R<<5&4294967295|R>>>27),R=U+(C^L&(b^C))+P[10]+38016083&4294967295,U=b+(R<<9&4294967295|R>>>23),R=L+(b^C&(U^b))+P[15]+3634488961&4294967295,L=U+(R<<14&4294967295|R>>>18),R=C+(U^b&(L^U))+P[4]+3889429448&4294967295,C=L+(R<<20&4294967295|R>>>12),R=b+(L^U&(C^L))+P[9]+568446438&4294967295,b=C+(R<<5&4294967295|R>>>27),R=U+(C^L&(b^C))+P[14]+3275163606&4294967295,U=b+(R<<9&4294967295|R>>>23),R=L+(b^C&(U^b))+P[3]+4107603335&4294967295,L=U+(R<<14&4294967295|R>>>18),R=C+(U^b&(L^U))+P[8]+1163531501&4294967295,C=L+(R<<20&4294967295|R>>>12),R=b+(L^U&(C^L))+P[13]+2850285829&4294967295,b=C+(R<<5&4294967295|R>>>27),R=U+(C^L&(b^C))+P[2]+4243563512&4294967295,U=b+(R<<9&4294967295|R>>>23),R=L+(b^C&(U^b))+P[7]+1735328473&4294967295,L=U+(R<<14&4294967295|R>>>18),R=C+(U^b&(L^U))+P[12]+2368359562&4294967295,C=L+(R<<20&4294967295|R>>>12),R=b+(C^L^U)+P[5]+4294588738&4294967295,b=C+(R<<4&4294967295|R>>>28),R=U+(b^C^L)+P[8]+2272392833&4294967295,U=b+(R<<11&4294967295|R>>>21),R=L+(U^b^C)+P[11]+1839030562&4294967295,L=U+(R<<16&4294967295|R>>>16),R=C+(L^U^b)+P[14]+4259657740&4294967295,C=L+(R<<23&4294967295|R>>>9),R=b+(C^L^U)+P[1]+2763975236&4294967295,b=C+(R<<4&4294967295|R>>>28),R=U+(b^C^L)+P[4]+1272893353&4294967295,U=b+(R<<11&4294967295|R>>>21),R=L+(U^b^C)+P[7]+4139469664&4294967295,L=U+(R<<16&4294967295|R>>>16),R=C+(L^U^b)+P[10]+3200236656&4294967295,C=L+(R<<23&4294967295|R>>>9),R=b+(C^L^U)+P[13]+681279174&4294967295,b=C+(R<<4&4294967295|R>>>28),R=U+(b^C^L)+P[0]+3936430074&4294967295,U=b+(R<<11&4294967295|R>>>21),R=L+(U^b^C)+P[3]+3572445317&4294967295,L=U+(R<<16&4294967295|R>>>16),R=C+(L^U^b)+P[6]+76029189&4294967295,C=L+(R<<23&4294967295|R>>>9),R=b+(C^L^U)+P[9]+3654602809&4294967295,b=C+(R<<4&4294967295|R>>>28),R=U+(b^C^L)+P[12]+3873151461&4294967295,U=b+(R<<11&4294967295|R>>>21),R=L+(U^b^C)+P[15]+530742520&4294967295,L=U+(R<<16&4294967295|R>>>16),R=C+(L^U^b)+P[2]+3299628645&4294967295,C=L+(R<<23&4294967295|R>>>9),R=b+(L^(C|~U))+P[0]+4096336452&4294967295,b=C+(R<<6&4294967295|R>>>26),R=U+(C^(b|~L))+P[7]+1126891415&4294967295,U=b+(R<<10&4294967295|R>>>22),R=L+(b^(U|~C))+P[14]+2878612391&4294967295,L=U+(R<<15&4294967295|R>>>17),R=C+(U^(L|~b))+P[5]+4237533241&4294967295,C=L+(R<<21&4294967295|R>>>11),R=b+(L^(C|~U))+P[12]+1700485571&4294967295,b=C+(R<<6&4294967295|R>>>26),R=U+(C^(b|~L))+P[3]+2399980690&4294967295,U=b+(R<<10&4294967295|R>>>22),R=L+(b^(U|~C))+P[10]+4293915773&4294967295,L=U+(R<<15&4294967295|R>>>17),R=C+(U^(L|~b))+P[1]+2240044497&4294967295,C=L+(R<<21&4294967295|R>>>11),R=b+(L^(C|~U))+P[8]+1873313359&4294967295,b=C+(R<<6&4294967295|R>>>26),R=U+(C^(b|~L))+P[15]+4264355552&4294967295,U=b+(R<<10&4294967295|R>>>22),R=L+(b^(U|~C))+P[6]+2734768916&4294967295,L=U+(R<<15&4294967295|R>>>17),R=C+(U^(L|~b))+P[13]+1309151649&4294967295,C=L+(R<<21&4294967295|R>>>11),R=b+(L^(C|~U))+P[4]+4149444226&4294967295,b=C+(R<<6&4294967295|R>>>26),R=U+(C^(b|~L))+P[11]+3174756917&4294967295,U=b+(R<<10&4294967295|R>>>22),R=L+(b^(U|~C))+P[2]+718787259&4294967295,L=U+(R<<15&4294967295|R>>>17),R=C+(U^(L|~b))+P[9]+3951481745&4294967295,x.g[0]=x.g[0]+b&4294967295,x.g[1]=x.g[1]+(L+(R<<21&4294967295|R>>>11))&4294967295,x.g[2]=x.g[2]+L&4294967295,x.g[3]=x.g[3]+U&4294967295}r.prototype.u=function(x,b){b===void 0&&(b=x.length);for(var C=b-this.blockSize,P=this.B,L=this.h,U=0;U<b;){if(L==0)for(;U<=C;)o(this,x,U),U+=this.blockSize;if(typeof x=="string"){for(;U<b;)if(P[L++]=x.charCodeAt(U++),L==this.blockSize){o(this,P),L=0;break}}else for(;U<b;)if(P[L++]=x[U++],L==this.blockSize){o(this,P),L=0;break}}this.h=L,this.o+=b},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var b=1;b<x.length-8;++b)x[b]=0;var C=8*this.o;for(b=x.length-8;b<x.length;++b)x[b]=C&255,C/=256;for(this.u(x),x=Array(16),b=C=0;4>b;++b)for(var P=0;32>P;P+=8)x[C++]=this.g[b]>>>P&255;return x};function l(x,b){var C=d;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=b(x)}function c(x,b){this.h=b;for(var C=[],P=!0,L=x.length-1;0<=L;L--){var U=x[L]|0;P&&U==b||(C[L]=U,P=!1)}this.g=C}var d={};function g(x){return-128<=x&&128>x?l(x,function(b){return new c([b|0],0>b?-1:0)}):new c([x|0],0>x?-1:0)}function m(x){if(isNaN(x)||!isFinite(x))return v;if(0>x)return M(m(-x));for(var b=[],C=1,P=0;x>=C;P++)b[P]=x/C|0,C*=4294967296;return new c(b,0)}function y(x,b){if(x.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(x.charAt(0)=="-")return M(y(x.substring(1),b));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=m(Math.pow(b,8)),P=v,L=0;L<x.length;L+=8){var U=Math.min(8,x.length-L),R=parseInt(x.substring(L,L+U),b);8>U?(U=m(Math.pow(b,U)),P=P.j(U).add(m(R))):(P=P.j(C),P=P.add(m(R)))}return P}var v=g(0),E=g(1),S=g(16777216);e=c.prototype,e.m=function(){if(V(this))return-M(this).m();for(var x=0,b=1,C=0;C<this.g.length;C++){var P=this.i(C);x+=(0<=P?P:4294967296+P)*b,b*=4294967296}return x},e.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(D(this))return"0";if(V(this))return"-"+M(this).toString(x);for(var b=m(Math.pow(x,6)),C=this,P="";;){var L=z(C,b).g;C=B(C,L.j(b));var U=((0<C.g.length?C.g[0]:C.h)>>>0).toString(x);if(C=L,D(C))return U+P;for(;6>U.length;)U="0"+U;P=U+P}},e.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function D(x){if(x.h!=0)return!1;for(var b=0;b<x.g.length;b++)if(x.g[b]!=0)return!1;return!0}function V(x){return x.h==-1}e.l=function(x){return x=B(this,x),V(x)?-1:D(x)?0:1};function M(x){for(var b=x.g.length,C=[],P=0;P<b;P++)C[P]=~x.g[P];return new c(C,~x.h).add(E)}e.abs=function(){return V(this)?M(this):this},e.add=function(x){for(var b=Math.max(this.g.length,x.g.length),C=[],P=0,L=0;L<=b;L++){var U=P+(this.i(L)&65535)+(x.i(L)&65535),R=(U>>>16)+(this.i(L)>>>16)+(x.i(L)>>>16);P=R>>>16,U&=65535,R&=65535,C[L]=R<<16|U}return new c(C,C[C.length-1]&-2147483648?-1:0)};function B(x,b){return x.add(M(b))}e.j=function(x){if(D(this)||D(x))return v;if(V(this))return V(x)?M(this).j(M(x)):M(M(this).j(x));if(V(x))return M(this.j(M(x)));if(0>this.l(S)&&0>x.l(S))return m(this.m()*x.m());for(var b=this.g.length+x.g.length,C=[],P=0;P<2*b;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(var L=0;L<x.g.length;L++){var U=this.i(P)>>>16,R=this.i(P)&65535,k=x.i(L)>>>16,K=x.i(L)&65535;C[2*P+2*L]+=R*K,F(C,2*P+2*L),C[2*P+2*L+1]+=U*K,F(C,2*P+2*L+1),C[2*P+2*L+1]+=R*k,F(C,2*P+2*L+1),C[2*P+2*L+2]+=U*k,F(C,2*P+2*L+2)}for(P=0;P<b;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=b;P<2*b;P++)C[P]=0;return new c(C,0)};function F(x,b){for(;(x[b]&65535)!=x[b];)x[b+1]+=x[b]>>>16,x[b]&=65535,b++}function X(x,b){this.g=x,this.h=b}function z(x,b){if(D(b))throw Error("division by zero");if(D(x))return new X(v,v);if(V(x))return b=z(M(x),b),new X(M(b.g),M(b.h));if(V(b))return b=z(x,M(b)),new X(M(b.g),b.h);if(30<x.g.length){if(V(x)||V(b))throw Error("slowDivide_ only works with positive integers.");for(var C=E,P=b;0>=P.l(x);)C=q(C),P=q(P);var L=Z(C,1),U=Z(P,1);for(P=Z(P,2),C=Z(C,2);!D(P);){var R=U.add(P);0>=R.l(x)&&(L=L.add(C),U=R),P=Z(P,1),C=Z(C,1)}return b=B(x,L.j(b)),new X(L,b)}for(L=v;0<=x.l(b);){for(C=Math.max(1,Math.floor(x.m()/b.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),U=m(C),R=U.j(b);V(R)||0<R.l(x);)C-=P,U=m(C),R=U.j(b);D(U)&&(U=E),L=L.add(U),x=B(x,R)}return new X(L,x)}e.A=function(x){return z(this,x).h},e.and=function(x){for(var b=Math.max(this.g.length,x.g.length),C=[],P=0;P<b;P++)C[P]=this.i(P)&x.i(P);return new c(C,this.h&x.h)},e.or=function(x){for(var b=Math.max(this.g.length,x.g.length),C=[],P=0;P<b;P++)C[P]=this.i(P)|x.i(P);return new c(C,this.h|x.h)},e.xor=function(x){for(var b=Math.max(this.g.length,x.g.length),C=[],P=0;P<b;P++)C[P]=this.i(P)^x.i(P);return new c(C,this.h^x.h)};function q(x){for(var b=x.g.length+1,C=[],P=0;P<b;P++)C[P]=x.i(P)<<1|x.i(P-1)>>>31;return new c(C,x.h)}function Z(x,b){var C=b>>5;b%=32;for(var P=x.g.length-C,L=[],U=0;U<P;U++)L[U]=0<b?x.i(U+C)>>>b|x.i(U+C+1)<<32-b:x.i(U+C);return new c(L,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Db=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=y,Ps=c}).apply(typeof TT<"u"?TT:typeof self<"u"?self:typeof window<"u"?window:{});var Qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mb,Vu,Ob,lf,pp,kb,Vb,Pb;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,T){return h==Array.prototype||h==Object.prototype||(h[_]=T.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qh=="object"&&Qh];for(var _=0;_<h.length;++_){var T=h[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function o(h,_){if(_)t:{var T=r;h=h.split(".");for(var I=0;I<h.length-1;I++){var J=h[I];if(!(J in T))break t;T=T[J]}h=h[h.length-1],I=T[h],_=_(I),_!=I&&_!=null&&t(T,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var T=0,I=!1,J={next:function(){if(!I&&T<h.length){var at=T++;return{value:_(at,h[at]),done:!1}}return I=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}o("Array.prototype.values",function(h){return h||function(){return l(this,function(_,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function m(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,T){return h.call.apply(h.bind,arguments)}function v(h,_,T){if(!h)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,I),h.apply(_,J)}}return function(){return h.apply(_,arguments)}}function E(h,_,T){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,E.apply(null,arguments)}function S(h,_){var T=Array.prototype.slice.call(arguments,1);return function(){var I=T.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function D(h,_){function T(){}T.prototype=_.prototype,h.aa=_.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(I,J,at){for(var _t=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)_t[Kt-2]=arguments[Kt];return _.prototype[J].apply(I,_t)}}function V(h){const _=h.length;if(0<_){const T=Array(_);for(let I=0;I<_;I++)T[I]=h[I];return T}return[]}function M(h,_){for(let T=1;T<arguments.length;T++){const I=arguments[T];if(g(I)){const J=h.length||0,at=I.length||0;h.length=J+at;for(let _t=0;_t<at;_t++)h[J+_t]=I[_t]}else h.push(I)}}class B{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function F(h){return/^[\s\xa0]*$/.test(h)}function X(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function z(h){return z[" "](h),h}z[" "]=function(){};var q=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function Z(h,_,T){for(const I in h)_.call(T,h[I],I,h)}function x(h,_){for(const T in h)_.call(void 0,h[T],T,h)}function b(h){const _={};for(const T in h)_[T]=h[T];return _}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,_){let T,I;for(let J=1;J<arguments.length;J++){I=arguments[J];for(T in I)h[T]=I[T];for(let at=0;at<C.length;at++)T=C[at],Object.prototype.hasOwnProperty.call(I,T)&&(h[T]=I[T])}}function L(h){var _=1;h=h.split(":");const T=[];for(;0<_&&h.length;)T.push(h.shift()),_--;return h.length&&T.push(h.join(":")),T}function U(h){d.setTimeout(()=>{throw h},0)}function R(){var h=Q;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class k{constructor(){this.h=this.g=null}add(_,T){const I=K.get();I.set(_,T),this.h?this.h.next=I:this.g=I,this.h=I}}var K=new B(()=>new O,h=>h.reset());class O{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let $,rt=!1,Q=new k,N=()=>{const h=d.Promise.resolve(void 0);$=()=>{h.then(Y)}};var Y=()=>{for(var h;h=R();){try{h.h.call(h.g)}catch(T){U(T)}var _=K;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}rt=!1};function et(){this.s=this.s,this.C=this.C}et.prototype.s=!1,et.prototype.ma=function(){this.s||(this.s=!0,this.N())},et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var ct=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};d.addEventListener("test",T,_),d.removeEventListener("test",T,_)}catch{}return h}();function pt(h,_){if(st.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(q){t:{try{z(_.nodeName);var J=!0;break t}catch{}J=!1}J||(_=null)}}else T=="mouseover"?_=h.fromElement:T=="mouseout"&&(_=h.toElement);this.relatedTarget=_,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:yt[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&pt.aa.h.call(this)}}D(pt,st);var yt={2:"touch",3:"pen",4:"mouse"};pt.prototype.h=function(){pt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ct="closure_listenable_"+(1e6*Math.random()|0),At=0;function Vt(h,_,T,I,J){this.listener=h,this.proxy=null,this.src=_,this.type=T,this.capture=!!I,this.ha=J,this.key=++At,this.da=this.fa=!1}function Pt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ue(h){this.src=h,this.g={},this.h=0}ue.prototype.add=function(h,_,T,I,J){var at=h.toString();h=this.g[at],h||(h=this.g[at]=[],this.h++);var _t=Ee(h,_,I,J);return-1<_t?(_=h[_t],T||(_.fa=!1)):(_=new Vt(_,this.src,at,!!I,J),_.fa=T,h.push(_)),_};function ce(h,_){var T=_.type;if(T in h.g){var I=h.g[T],J=Array.prototype.indexOf.call(I,_,void 0),at;(at=0<=J)&&Array.prototype.splice.call(I,J,1),at&&(Pt(_),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Ee(h,_,T,I){for(var J=0;J<h.length;++J){var at=h[J];if(!at.da&&at.listener==_&&at.capture==!!T&&at.ha==I)return J}return-1}var _e="closure_lm_"+(1e6*Math.random()|0),he={};function Xe(h,_,T,I,J){if(Array.isArray(_)){for(var at=0;at<_.length;at++)Xe(h,_[at],T,I,J);return null}return T=Si(T),h&&h[Ct]?h.K(_,T,m(I)?!!I.capture:!1,J):Lt(h,_,T,!1,I,J)}function Lt(h,_,T,I,J,at){if(!_)throw Error("Invalid event type");var _t=m(J)?!!J.capture:!!J,Kt=zn(h);if(Kt||(h[_e]=Kt=new ue(h)),T=Kt.add(_,T,I,_t,at),T.proxy)return T;if(I=wt(),T.proxy=I,I.src=h,I.listener=T,h.addEventListener)ct||(J=_t),J===void 0&&(J=!1),h.addEventListener(_.toString(),I,J);else if(h.attachEvent)h.attachEvent(Un(_.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return T}function wt(){function h(T){return _.call(h.src,h.listener,T)}const _=Ui;return h}function xe(h,_,T,I,J){if(Array.isArray(_))for(var at=0;at<_.length;at++)xe(h,_[at],T,I,J);else I=m(I)?!!I.capture:!!I,T=Si(T),h&&h[Ct]?(h=h.i,_=String(_).toString(),_ in h.g&&(at=h.g[_],T=Ee(at,T,I,J),-1<T&&(Pt(at[T]),Array.prototype.splice.call(at,T,1),at.length==0&&(delete h.g[_],h.h--)))):h&&(h=zn(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Ee(_,T,I,J)),(T=-1<h?_[h]:null)&&pn(T))}function pn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Ct])ce(_.i,h);else{var T=h.type,I=h.proxy;_.removeEventListener?_.removeEventListener(T,I,h.capture):_.detachEvent?_.detachEvent(Un(T),I):_.addListener&&_.removeListener&&_.removeListener(I),(T=zn(_))?(ce(T,h),T.h==0&&(T.src=null,_[_e]=null)):Pt(h)}}}function Un(h){return h in he?he[h]:he[h]="on"+h}function Ui(h,_){if(h.da)h=!0;else{_=new pt(_,this);var T=h.listener,I=h.ha||h.src;h.fa&&pn(h),h=T.call(I,_)}return h}function zn(h){return h=h[_e],h instanceof ue?h:null}var Sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Si(h){return typeof h=="function"?h:(h[Sn]||(h[Sn]=function(_){return h.handleEvent(_)}),h[Sn])}function te(){et.call(this),this.i=new ue(this),this.M=this,this.F=null}D(te,et),te.prototype[Ct]=!0,te.prototype.removeEventListener=function(h,_,T,I){xe(this,h,_,T,I)};function Ft(h,_){var T,I=h.F;if(I)for(T=[];I;I=I.F)T.push(I);if(h=h.M,I=_.type||_,typeof _=="string")_=new st(_,h);else if(_ instanceof st)_.target=_.target||h;else{var J=_;_=new st(I,h),P(_,J)}if(J=!0,T)for(var at=T.length-1;0<=at;at--){var _t=_.g=T[at];J=ke(_t,I,!0,_)&&J}if(_t=_.g=h,J=ke(_t,I,!0,_)&&J,J=ke(_t,I,!1,_)&&J,T)for(at=0;at<T.length;at++)_t=_.g=T[at],J=ke(_t,I,!1,_)&&J}te.prototype.N=function(){if(te.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var T=h.g[_],I=0;I<T.length;I++)Pt(T[I]);delete h.g[_],h.h--}}this.F=null},te.prototype.K=function(h,_,T,I){return this.i.add(String(h),_,!1,T,I)},te.prototype.L=function(h,_,T,I){return this.i.add(String(h),_,!0,T,I)};function ke(h,_,T,I){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var J=!0,at=0;at<_.length;++at){var _t=_[at];if(_t&&!_t.da&&_t.capture==T){var Kt=_t.listener,qe=_t.ha||_t.src;_t.fa&&ce(h.i,_t),J=Kt.call(qe,I)!==!1&&J}}return J&&!I.defaultPrevented}function Te(h,_,T){if(typeof h=="function")T&&(h=E(h,T));else if(h&&typeof h.handleEvent=="function")h=E(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function zi(h){h.g=Te(()=>{h.g=null,h.i&&(h.i=!1,zi(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Ve extends et{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:zi(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qe(h){et.call(this),this.h=h,this.g={}}D(Qe,et);var bn=[];function An(h){Z(h.g,function(_,T){this.g.hasOwnProperty(T)&&pn(_)},h),h.g={}}Qe.prototype.N=function(){Qe.aa.N.call(this),An(this)},Qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ze=d.JSON.stringify,on=d.JSON.parse,Rn=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function dr(){}dr.prototype.h=null;function gr(h){return h.h||(h.h=h.i())}function bi(){}var Bn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ni(){st.call(this,"d")}D(ni,st);function Hn(){st.call(this,"c")}D(Hn,st);var ii={},Qs=null;function Bi(){return Qs=Qs||new te}ii.La="serverreachability";function Qr(h){st.call(this,ii.La,h)}D(Qr,st);function Hi(h){const _=Bi();Ft(_,new Qr(_))}ii.STAT_EVENT="statevent";function Yo(h,_){st.call(this,ii.STAT_EVENT,h),this.stat=_}D(Yo,st);function de(h){const _=Bi();Ft(_,new Yo(_,h))}ii.Ma="timingevent";function Ne(h,_){st.call(this,ii.Ma,h),this.size=_}D(Ne,st);function Ae(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function Dn(){this.g=!0}Dn.prototype.xa=function(){this.g=!1};function Zs(h,_,T,I,J,at){h.info(function(){if(h.g)if(at)for(var _t="",Kt=at.split("&"),qe=0;qe<Kt.length;qe++){var Xt=Kt[qe].split("=");if(1<Xt.length){var Je=Xt[0];Xt=Xt[1];var Fe=Je.split("_");_t=2<=Fe.length&&Fe[1]=="type"?_t+(Je+"="+Xt+"&"):_t+(Je+"=redacted&")}}else _t=null;else _t=at;return"XMLHTTP REQ ("+I+") [attempt "+J+"]: "+_+`
`+T+`
`+_t})}function bl(h,_,T,I,J,at,_t){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+J+"]: "+_+`
`+T+`
`+at+" "+_t})}function qi(h,_,T,I){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+mr(h,T)+(I?" "+I:"")})}function Ko(h,_){h.info(function(){return"TIMEOUT: "+_})}Dn.prototype.info=function(){};function mr(h,_){if(!h.g)return _;if(!_)return null;try{var T=JSON.parse(_);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var I=T[h];if(!(2>I.length)){var J=I[1];if(Array.isArray(J)&&!(1>J.length)){var at=J[0];if(at!="noop"&&at!="stop"&&at!="close")for(var _t=1;_t<J.length;_t++)J[_t]=""}}}}return Ze(T)}catch{return _}}var Fi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ri={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},si;function oi(){}D(oi,dr),oi.prototype.g=function(){return new XMLHttpRequest},oi.prototype.i=function(){return{}},si=new oi;function an(h,_,T,I){this.j=h,this.i=_,this.l=T,this.R=I||1,this.U=new Qe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new we}function we(){this.i=null,this.g="",this.h=!1}var Ws={},Zr={};function qn(h,_,T){h.L=1,h.v=no(Fn(_)),h.m=T,h.P=!0,Ai(h,null)}function Ai(h,_){h.F=Date.now(),pr(h),h.A=Fn(h.v);var T=h.A,I=h.R;Array.isArray(I)||(I=[String(I)]),Nl(T.i,"t",I),h.C=0,T=h.j.J,h.h=new we,h.g=Lc(h.j,T?_:null,!h.m),0<h.O&&(h.M=new Ve(E(h.Y,h,h.g),h.O)),_=h.U,T=h.g,I=h.ca;var J="readystatechange";Array.isArray(J)||(J&&(bn[0]=J.toString()),J=bn);for(var at=0;at<J.length;at++){var _t=Xe(T,J[at],I||_.handleEvent,!1,_.h||_);if(!_t)break;_.g[_t.key]=_t}_=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Hi(),Zs(h.i,h.u,h.A,h.l,h.R,h.m)}an.prototype.ca=function(h){h=h.target;const _=this.M;_&&hi(h)==3?_.j():this.Y(h)},an.prototype.Y=function(h){try{if(h==this.g)t:{const Fe=hi(this.g);var _=this.g.Ba();const Sr=this.g.Z();if(!(3>Fe)&&(Fe!=3||this.g&&(this.h.h||this.g.oa()||xc(this.g)))){this.J||Fe!=4||_==7||(_==8||0>=Sr?Hi(3):Hi(2)),ji(this);var T=this.g.Z();this.X=T;e:if(Js(this)){var I=xc(this.g);h="";var J=I.length,at=hi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){He(this),ai(this);var _t="";break e}this.h.i=new d.TextDecoder}for(_=0;_<J;_++)this.h.h=!0,h+=this.h.i.decode(I[_],{stream:!(at&&_==J-1)});I.length=0,this.h.g+=h,this.C=0,_t=this.h.g}else _t=this.g.oa();if(this.o=T==200,bl(this.i,this.u,this.A,this.l,this.R,Fe,T),this.o){if(this.T&&!this.K){e:{if(this.g){var Kt,qe=this.g;if((Kt=qe.g?qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Kt)){var Xt=Kt;break e}}Xt=null}if(T=Xt)qi(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gi(this,T);else{this.o=!1,this.s=3,de(12),He(this),ai(this);break t}}if(this.P){T=!0;let ln;for(;!this.J&&this.C<_t.length;)if(ln=Xo(this,_t),ln==Zr){Fe==4&&(this.s=4,de(14),T=!1),qi(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==Ws){this.s=4,de(15),qi(this.i,this.l,_t,"[Invalid Chunk]"),T=!1;break}else qi(this.i,this.l,ln,null),Gi(this,ln);if(Js(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||_t.length!=0||this.h.h||(this.s=1,de(16),T=!1),this.o=this.o&&T,!T)qi(this.i,this.l,_t,"[Invalid Chunked Response]"),He(this),ai(this);else if(0<_t.length&&!this.W){this.W=!0;var Je=this.j;Je.g==this&&Je.ba&&!Je.M&&(Je.j.info("Great, no buffering proxy detected. Bytes received: "+_t.length),co(Je),Je.M=!0,de(11))}}else qi(this.i,this.l,_t,null),Gi(this,_t);Fe==4&&He(this),this.o&&!this.J&&(Fe==4?kc(this.j,this):(this.o=!1,pr(this)))}else Ad(this.g),T==400&&0<_t.indexOf("Unknown SID")?(this.s=3,de(12)):(this.s=0,de(13)),He(this),ai(this)}}}catch{}finally{}};function Js(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Xo(h,_){var T=h.C,I=_.indexOf(`
`,T);return I==-1?Zr:(T=Number(_.substring(T,I)),isNaN(T)?Ws:(I+=1,I+T>_.length?Zr:(_=_.slice(I,I+T),h.C=I+T,_)))}an.prototype.cancel=function(){this.J=!0,He(this)};function pr(h){h.S=Date.now()+h.I,Qo(h,h.I)}function Qo(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ae(E(h.ba,h),_)}function ji(h){h.B&&(d.clearTimeout(h.B),h.B=null)}an.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Ko(this.i,this.A),this.L!=2&&(Hi(),de(17)),He(this),this.s=2,ai(this)):Qo(this,this.S-h)};function ai(h){h.j.G==0||h.J||kc(h.j,h)}function He(h){ji(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,An(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Gi(h,_){try{var T=h.j;if(T.G!=0&&(T.g==h||Al(T.h,h))){if(!h.K&&Al(T.h,h)&&T.G==3){try{var I=T.Da.g.parse(_)}catch{I=null}if(Array.isArray(I)&&I.length==3){var J=I;if(J[0]==0){t:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)aa(T),sa(T);else break t;Vl(T),de(18)}}else T.za=J[1],0<T.za-T.T&&37500>J[2]&&T.F&&T.v==0&&!T.C&&(T.C=Ae(E(T.Za,T),6e3));if(1>=$i(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else wr(T,11)}else if((h.K||T.g==h)&&aa(T),!F(_))for(J=T.Da.g.parse(_),_=0;_<J.length;_++){let Xt=J[_];if(T.T=Xt[0],Xt=Xt[1],T.G==2)if(Xt[0]=="c"){T.K=Xt[1],T.ia=Xt[2];const Je=Xt[3];Je!=null&&(T.la=Je,T.j.info("VER="+T.la));const Fe=Xt[4];Fe!=null&&(T.Aa=Fe,T.j.info("SVER="+T.Aa));const Sr=Xt[5];Sr!=null&&typeof Sr=="number"&&0<Sr&&(I=1.5*Sr,T.L=I,T.j.info("backChannelRequestTimeoutMs_="+I)),I=T;const ln=h.g;if(ln){const Ji=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ji){var at=I.h;at.g||Ji.indexOf("spdy")==-1&&Ji.indexOf("quic")==-1&&Ji.indexOf("h2")==-1||(at.j=at.l,at.g=new Set,at.h&&(Wo(at,at.h),at.h=null))}if(I.D){const Ll=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Ll&&(I.ya=Ll,se(I.I,I.D,Ll))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),I=T;var _t=h;if(I.qa=Pc(I,I.J?I.ia:null,I.W),_t.K){Cn(I.h,_t);var Kt=_t,qe=I.L;qe&&(Kt.I=qe),Kt.B&&(ji(Kt),pr(Kt)),I.g=_t}else Mc(I);0<T.i.length&&oa(T)}else Xt[0]!="stop"&&Xt[0]!="close"||wr(T,7);else T.G==3&&(Xt[0]=="stop"||Xt[0]=="close"?Xt[0]=="stop"?wr(T,7):Ol(T):Xt[0]!="noop"&&T.l&&T.l.ta(Xt),T.v=0)}}Hi(4)}catch{}}var Zo=class{constructor(h,_){this.g=h,this.map=_}};function Ri(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function $i(h){return h.h?1:h.g?h.g.size:0}function Al(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Wo(h,_){h.g?h.g.add(_):h.h=_}function Cn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Ri.prototype.cancel=function(){if(this.i=Rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Rl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const T of h.g.values())_=_.concat(T.D);return _}return V(h.i)}function Td(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var _=[],T=h.length,I=0;I<T;I++)_.push(h[I]);return _}_=[],T=0;for(I in h)_[T++]=h[I];return _}function Jo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var _=[];h=h.length;for(var T=0;T<h;T++)_.push(T);return _}_=[],T=0;for(const I in h)_[T++]=I;return _}}}function Cl(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var T=Jo(h),I=Td(h),J=I.length,at=0;at<J;at++)_.call(void 0,I[at],T&&T[at],h)}var to=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wd(h,_){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var I=h[T].indexOf("="),J=null;if(0<=I){var at=h[T].substring(0,I);J=h[T].substring(I+1)}else at=h[T];_(at,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Pe(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Pe){this.h=h.h,eo(this,h.j),this.o=h.o,this.g=h.g,Jr(this,h.s),this.l=h.l;var _=h.i,T=new _r;T.i=_.i,_.g&&(T.g=new Map(_.g),T.h=_.h),yr(this,T),this.m=h.m}else h&&(_=String(h).match(to))?(this.h=!1,eo(this,_[1]||"",!0),this.o=li(_[2]||""),this.g=li(_[3]||"",!0),Jr(this,_[4]),this.l=li(_[5]||"",!0),yr(this,_[6]||"",!0),this.m=li(_[7]||"")):(this.h=!1,this.i=new _r(null,this.h))}Pe.prototype.toString=function(){var h=[],_=this.j;_&&h.push(io(_,Il,!0),":");var T=this.g;return(T||_=="file")&&(h.push("//"),(_=this.o)&&h.push(io(_,Il,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(io(T,T.charAt(0)=="/"?Sd:xl,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",io(T,ta)),h.join("")};function Fn(h){return new Pe(h)}function eo(h,_,T){h.j=T?li(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Jr(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function yr(h,_,T){_ instanceof _r?(h.i=_,Cc(h.i,h.h)):(T||(_=io(_,bd)),h.i=new _r(_,h.h))}function se(h,_,T){h.i.set(_,T)}function no(h){return se(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function li(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function io(h,_,T){return typeof h=="string"?(h=encodeURI(h).replace(_,Rc),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Rc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Il=/[#\/\?@]/g,xl=/[#\?:]/g,Sd=/[#\?]/g,bd=/[#\?@]/g,ta=/#/g;function _r(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function ui(h){h.g||(h.g=new Map,h.h=0,h.i&&wd(h.i,function(_,T){h.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}e=_r.prototype,e.add=function(h,_){ui(this),this.i=null,h=Yi(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(_),this.h+=1,this};function vr(h,_){ui(h),_=Yi(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Er(h,_){return ui(h),_=Yi(h,_),h.g.has(_)}e.forEach=function(h,_){ui(this),this.g.forEach(function(T,I){T.forEach(function(J){h.call(_,J,I,this)},this)},this)},e.na=function(){ui(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),T=[];for(let I=0;I<_.length;I++){const J=h[I];for(let at=0;at<J.length;at++)T.push(_[I])}return T},e.V=function(h){ui(this);let _=[];if(typeof h=="string")Er(this,h)&&(_=_.concat(this.g.get(Yi(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)_=_.concat(h[T])}return _},e.set=function(h,_){return ui(this),this.i=null,h=Yi(this,h),Er(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},e.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Nl(h,_,T){vr(h,_),0<T.length&&(h.i=null,h.g.set(Yi(h,_),V(T)),h.h+=T.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var T=0;T<_.length;T++){var I=_[T];const at=encodeURIComponent(String(I)),_t=this.V(I);for(I=0;I<_t.length;I++){var J=at;_t[I]!==""&&(J+="="+encodeURIComponent(String(_t[I]))),h.push(J)}}return this.i=h.join("&")};function Yi(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Cc(h,_){_&&!h.j&&(ui(h),h.i=null,h.g.forEach(function(T,I){var J=I.toLowerCase();I!=J&&(vr(this,I),Nl(this,J,T))},h)),h.j=_}function ro(h,_){const T=new Dn;if(d.Image){const I=new Image;I.onload=S(ci,T,"TestLoadImage: loaded",!0,_,I),I.onerror=S(ci,T,"TestLoadImage: error",!1,_,I),I.onabort=S(ci,T,"TestLoadImage: abort",!1,_,I),I.ontimeout=S(ci,T,"TestLoadImage: timeout",!1,_,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else _(!1)}function Ci(h,_){const T=new Dn,I=new AbortController,J=setTimeout(()=>{I.abort(),ci(T,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:I.signal}).then(at=>{clearTimeout(J),at.ok?ci(T,"TestPingServer: ok",!0,_):ci(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(J),ci(T,"TestPingServer: error",!1,_)})}function ci(h,_,T,I,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),I(T)}catch{}}function so(){this.g=new Rn}function Ki(h,_,T){const I=T||"";try{Cl(h,function(J,at){let _t=J;m(J)&&(_t=Ze(J)),_.push(I+at+"="+encodeURIComponent(_t))})}catch(J){throw _.push(I+"type="+encodeURIComponent("_badmap")),J}}function ts(h){this.l=h.Ub||null,this.j=h.eb||!1}D(ts,dr),ts.prototype.g=function(){return new Tr(this.l,this.j)},ts.prototype.i=function(h){return function(){return h}}({});function Tr(h,_){te.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Tr,te),e=Tr.prototype,e.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Qi(this)},e.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xi(this)),this.readyState=0},e.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Qi(this)),this.g&&(this.readyState=3,Qi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}e.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Xi(this):Qi(this),this.readyState==3&&Dl(this)}},e.Ra=function(h){this.g&&(this.response=this.responseText=h,Xi(this))},e.Qa=function(h){this.g&&(this.response=h,Xi(this))},e.ga=function(){this.g&&Xi(this)};function Xi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Qi(h)}e.setRequestHeader=function(h,_){this.u.append(h,_)},e.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=_.next();return h.join(`\r
`)};function Qi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ml(h){let _="";return Z(h,function(T,I){_+=I,_+=":",_+=T,_+=`\r
`}),_}function We(h,_,T){t:{for(I in T){var I=!1;break t}I=!0}I||(T=Ml(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):se(h,_,T))}function ee(h){te.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(ee,te);var ea=/^https?$/i,oo=["POST","PUT"];e=ee.prototype,e.Ha=function(h){this.J=h},e.ea=function(h,_,T,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():si.g(),this.v=this.o?gr(this.o):gr(si),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(at){Ic(this,at);return}if(h=T||"",T=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var J in I)T.set(J,I[J]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const at of I.keys())T.set(at,I.get(at));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(T.keys()).find(at=>at.toLowerCase()=="content-type"),J=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(oo,_,void 0))||I||J||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[at,_t]of T)this.g.setRequestHeader(at,_t);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ao(this),this.u=!0,this.g.send(h),this.u=!1}catch(at){Ic(this,at)}};function Ic(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,na(h),Zi(h)}function na(h){h.A||(h.A=!0,Ft(h,"complete"),Ft(h,"error"))}e.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ft(this,"complete"),Ft(this,"abort"),Zi(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zi(this,!0)),ee.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?ia(this):this.bb())},e.bb=function(){ia(this)};function ia(h){if(h.h&&typeof c<"u"&&(!h.v[1]||hi(h)!=4||h.Z()!=2)){if(h.u&&hi(h)==4)Te(h.Ea,0,h);else if(Ft(h,"readystatechange"),hi(h)==4){h.h=!1;try{const _t=h.Z();t:switch(_t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var T;if(!(T=_)){var I;if(I=_t===0){var J=String(h.D).match(to)[1]||null;!J&&d.self&&d.self.location&&(J=d.self.location.protocol.slice(0,-1)),I=!ea.test(J?J.toLowerCase():"")}T=I}if(T)Ft(h,"complete"),Ft(h,"success");else{h.m=6;try{var at=2<hi(h)?h.g.statusText:""}catch{at=""}h.l=at+" ["+h.Z()+"]",na(h)}}finally{Zi(h)}}}}function Zi(h,_){if(h.g){ao(h);const T=h.g,I=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ft(h,"ready");try{T.onreadystatechange=I}catch{}}}function ao(h){h.I&&(d.clearTimeout(h.I),h.I=null)}e.isActive=function(){return!!this.g};function hi(h){return h.g?h.g.readyState:0}e.Z=function(){try{return 2<hi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),on(_)}};function xc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ad(h){const _={};h=(h.g&&2<=hi(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(F(h[I]))continue;var T=L(h[I]);const J=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const at=_[J]||[];_[J]=at,at.push(T)}x(_,function(I){return I.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lo(h,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||_}function ra(h){this.Aa=0,this.i=[],this.j=new Dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lo("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lo("baseRetryDelayMs",5e3,h),this.cb=lo("retryDelaySeedMs",1e4,h),this.Wa=lo("forwardChannelMaxRetries",2,h),this.wa=lo("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ri(h&&h.concurrentRequestLimit),this.Da=new so,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=ra.prototype,e.la=8,e.G=1,e.connect=function(h,_,T,I){de(0),this.W=h,this.H=_||{},T&&I!==void 0&&(this.H.OSID=T,this.H.OAID=I),this.F=this.X,this.I=Pc(this,null,this.W),oa(this)};function Ol(h){if(Nc(h),h.G==3){var _=h.U++,T=Fn(h.I);if(se(T,"SID",h.K),se(T,"RID",_),se(T,"TYPE","terminate"),uo(h,T),_=new an(h,h.j,_),_.L=2,_.v=no(Fn(T)),T=!1,d.navigator&&d.navigator.sendBeacon)try{T=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!T&&d.Image&&(new Image().src=_.v,T=!0),T||(_.g=Lc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),pr(_)}Vc(h)}function sa(h){h.g&&(co(h),h.g.cancel(),h.g=null)}function Nc(h){sa(h),h.u&&(d.clearTimeout(h.u),h.u=null),aa(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function oa(h){if(!Wr(h.h)&&!h.s){h.s=!0;var _=h.Ga;$||N(),rt||($(),rt=!0),Q.add(_,h),h.B=0}}function Rd(h,_){return $i(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ae(E(h.Ga,h,_),Pl(h,h.B)),h.B++,!0)}e.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const J=new an(this,this.j,h);let at=this.o;if(this.S&&(at?(at=b(at),P(at,this.S)):at=this.S),this.m!==null||this.O||(J.H=at,at=null),this.P)t:{for(var _=0,T=0;T<this.i.length;T++){e:{var I=this.i[T];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break e}I=void 0}if(I===void 0)break;if(_+=I,4096<_){_=T;break t}if(_===4096||T===this.i.length-1){_=T+1;break t}}_=1e3}else _=1e3;_=Dc(this,J,_),T=Fn(this.I),se(T,"RID",h),se(T,"CVER",22),this.D&&se(T,"X-HTTP-Session-Id",this.D),uo(this,T),at&&(this.O?_="headers="+encodeURIComponent(String(Ml(at)))+"&"+_:this.m&&We(T,this.m,at)),Wo(this.h,J),this.Ua&&se(T,"TYPE","init"),this.P?(se(T,"$req",_),se(T,"SID","null"),J.T=!0,qn(J,T,null)):qn(J,T,_),this.G=2}}else this.G==3&&(h?kl(this,h):this.i.length==0||Wr(this.h)||kl(this))};function kl(h,_){var T;_?T=_.l:T=h.U++;const I=Fn(h.I);se(I,"SID",h.K),se(I,"RID",T),se(I,"AID",h.T),uo(h,I),h.m&&h.o&&We(I,h.m,h.o),T=new an(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Dc(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Wo(h.h,T),qn(T,I,_)}function uo(h,_){h.H&&Z(h.H,function(T,I){se(_,I,T)}),h.l&&Cl({},function(T,I){se(_,I,T)})}function Dc(h,_,T){T=Math.min(h.i.length,T);var I=h.l?E(h.l.Na,h.l,h):null;t:{var J=h.i;let at=-1;for(;;){const _t=["count="+T];at==-1?0<T?(at=J[0].g,_t.push("ofs="+at)):at=0:_t.push("ofs="+at);let Kt=!0;for(let qe=0;qe<T;qe++){let Xt=J[qe].g;const Je=J[qe].map;if(Xt-=at,0>Xt)at=Math.max(0,J[qe].g-100),Kt=!1;else try{Ki(Je,_t,"req"+Xt+"_")}catch{I&&I(Je)}}if(Kt){I=_t.join("&");break t}}}return h=h.i.splice(0,T),_.D=h,I}function Mc(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;$||N(),rt||($(),rt=!0),Q.add(_,h),h.v=0}}function Vl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ae(E(h.Fa,h),Pl(h,h.v)),h.v++,!0)}e.Fa=function(){if(this.u=null,Oc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ae(E(this.ab,this),h)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,de(10),sa(this),Oc(this))};function co(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Oc(h){h.g=new an(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Fn(h.qa);se(_,"RID","rpc"),se(_,"SID",h.K),se(_,"AID",h.T),se(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&se(_,"TO",h.ja),se(_,"TYPE","xmlhttp"),uo(h,_),h.m&&h.o&&We(_,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=no(Fn(_)),T.m=null,T.P=!0,Ai(T,h)}e.Za=function(){this.C!=null&&(this.C=null,sa(this),Vl(this),de(19))};function aa(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function kc(h,_){var T=null;if(h.g==_){aa(h),co(h),h.g=null;var I=2}else if(Al(h.h,_))T=_.D,Cn(h.h,_),I=1;else return;if(h.G!=0){if(_.o)if(I==1){T=_.m?_.m.length:0,_=Date.now()-_.F;var J=h.B;I=Bi(),Ft(I,new Ne(I,T)),oa(h)}else Mc(h);else if(J=_.s,J==3||J==0&&0<_.X||!(I==1&&Rd(h,_)||I==2&&Vl(h)))switch(T&&0<T.length&&(_=h.h,_.i=_.i.concat(T)),J){case 1:wr(h,5);break;case 4:wr(h,10);break;case 3:wr(h,6);break;default:wr(h,2)}}}function Pl(h,_){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*_}function wr(h,_){if(h.j.info("Error code "+_),_==2){var T=E(h.fb,h),I=h.Xa;const J=!I;I=new Pe(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||eo(I,"https"),no(I),J?ro(I.toString(),T):Ci(I.toString(),T)}else de(2);h.G=0,h.l&&h.l.sa(_),Vc(h),Nc(h)}e.fb=function(h){h?(this.j.info("Successfully pinged google.com"),de(2)):(this.j.info("Failed to ping google.com"),de(1))};function Vc(h){if(h.G=0,h.ka=[],h.l){const _=Rl(h.h);(_.length!=0||h.i.length!=0)&&(M(h.ka,_),M(h.ka,h.i),h.h.i.length=0,V(h.i),h.i.length=0),h.l.ra()}}function Pc(h,_,T){var I=T instanceof Pe?Fn(T):new Pe(T);if(I.g!="")_&&(I.g=_+"."+I.g),Jr(I,I.s);else{var J=d.location;I=J.protocol,_=_?_+"."+J.hostname:J.hostname,J=+J.port;var at=new Pe(null);I&&eo(at,I),_&&(at.g=_),J&&Jr(at,J),T&&(at.l=T),I=at}return T=h.D,_=h.ya,T&&_&&se(I,T,_),se(I,"VER",h.la),uo(h,I),I}function Lc(h,_,T){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new ee(new ts({eb:T})):new ee(h.pa),_.Ha(h.J),_}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uc(){}e=Uc.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function la(){}la.prototype.g=function(h,_){return new In(h,_)};function In(h,_){te.call(this),this.g=new ra(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!F(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!F(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Wi(this)}D(In,te),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){Ol(this.g)},In.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=Ze(h),h=T);_.i.push(new Zo(_.Ya++,h)),_.G==3&&oa(_)},In.prototype.N=function(){this.g.l=null,delete this.j,Ol(this.g),delete this.g,In.aa.N.call(this)};function zc(h){ni.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){t:{for(const T in _){h=T;break t}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}D(zc,ni);function Bc(){Hn.call(this),this.status=1}D(Bc,Hn);function Wi(h){this.g=h}D(Wi,Uc),Wi.prototype.ua=function(){Ft(this.g,"a")},Wi.prototype.ta=function(h){Ft(this.g,new zc(h))},Wi.prototype.sa=function(h){Ft(this.g,new Bc)},Wi.prototype.ra=function(){Ft(this.g,"b")},la.prototype.createWebChannel=la.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,Pb=function(){return new la},Vb=function(){return Bi()},kb=ii,pp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fi.NO_ERROR=0,Fi.TIMEOUT=8,Fi.HTTP_ERROR=6,lf=Fi,ri.COMPLETE="complete",Ob=ri,bi.EventType=Bn,Bn.OPEN="a",Bn.CLOSE="b",Bn.ERROR="c",Bn.MESSAGE="d",te.prototype.listen=te.prototype.K,Vu=bi,ee.prototype.listenOnce=ee.prototype.L,ee.prototype.getLastError=ee.prototype.Ka,ee.prototype.getLastErrorCode=ee.prototype.Ba,ee.prototype.getStatus=ee.prototype.Z,ee.prototype.getResponseJson=ee.prototype.Oa,ee.prototype.getResponseText=ee.prototype.oa,ee.prototype.send=ee.prototype.ea,ee.prototype.setWithCredentials=ee.prototype.Ha,Mb=ee}).apply(typeof Qh<"u"?Qh:typeof self<"u"?self:typeof window<"u"?window:{});const wT="@firebase/firestore",ST="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=new ty("@firebase/firestore");function qa(){return Uo.logLevel}function vt(e,...t){if(Uo.logLevel<=$t.DEBUG){const n=t.map(iy);Uo.debug(`Firestore (${yl}): ${e}`,...n)}}function $r(e,...t){if(Uo.logLevel<=$t.ERROR){const n=t.map(iy);Uo.error(`Firestore (${yl}): ${e}`,...n)}}function ll(e,...t){if(Uo.logLevel<=$t.WARN){const n=t.map(iy);Uo.warn(`Firestore (${yl}): ${e}`,...n)}}function iy(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,Lb(e,r,n)}function Lb(e,t,n){let r=`FIRESTORE (${yl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw $r(r),new Error(r)}function ne(e,t,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,e||Lb(t,o,r)}function kt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends Xr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class g4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(En.UNAUTHENTICATED))}shutdown(){}}class m4{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class p4{constructor(t){this.t=t,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ne(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let l=new Ls;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ls,t.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const g=l;t.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},d=g=>{vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(g=>d(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ls)}},0),c()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne(typeof r.accessToken=="string",31837,{l:r}),new Ub(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ne(t===null||typeof t=="string",2055,{h:t}),new En(t)}}class y4{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _4{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new y4(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class v4{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ei(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ne(this.o===void 0,3512);const r=l=>{l.error!=null&&vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,vt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>r(l))};const o=l=>{vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new bT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new bT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=E4(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<n&&(r+=t.charAt(o[l]%62))}return r}}function Bt(e,t){return e<t?-1:e>t?1:0}function yp(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),o=t.codePointAt(n);if(r!==o){if(r<128&&o<128)return Bt(r,o);{const l=zb(),c=T4(l.encode(AT(e,n)),l.encode(AT(t,n)));return c!==0?c:Bt(r,o)}}n+=r>65535?2:1}return Bt(e.length,t.length)}function AT(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function T4(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Bt(e[n],t[n]);return Bt(e.length,t.length)}function ul(e,t,n){return e.length===t.length&&e.every((r,o)=>n(r,t[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=-62135596800,CT=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(t){return ye.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*CT);return new ye(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Et(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Et(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<RT)throw new Et(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Et(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CT}_compareTo(t){return this.seconds===t.seconds?Bt(this.nanoseconds,t.nanoseconds):Bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-RT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{static fromTimestamp(t){return new Ot(t)}static min(){return new Ot(new ye(0,0))}static max(){return new Ot(new ye(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="__name__";class sr{constructor(t,n,r){n===void 0?n=0:n>t.length&&Dt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&Dt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return sr.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof sr?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let o=0;o<r;o++){const l=sr.compareSegments(t.get(o),n.get(o));if(l!==0)return l}return Bt(t.length,n.length)}static compareSegments(t,n){const r=sr.isNumericId(t),o=sr.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?sr.extractNumericId(t).compare(sr.extractNumericId(n)):yp(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ps.fromString(t.substring(4,t.length-2))}}class pe extends sr{construct(t,n,r){return new pe(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Et(dt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const w4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends sr{construct(t,n,r){return new dn(t,n,r)}static isValidIdentifier(t){return w4.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===IT}static keyField(){return new dn([IT])}static fromServerFormat(t){const n=[];let r="",o=0;const l=()=>{if(r.length===0)throw new Et(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;o<t.length;){const d=t[o];if(d==="\\"){if(o+1===t.length)throw new Et(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Et(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(r+=d,o++):(l(),o++)}if(l(),c)throw new Et(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new dn(n)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t){this.path=t}static fromPath(t){return new Rt(pe.fromString(t))}static fromName(t){return new Rt(pe.fromString(t).popFirst(5))}static empty(){return new Rt(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&pe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return pe.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Rt(new pe(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=-1;function S4(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,o=Ot.fromTimestamp(r===1e9?new ye(n+1,0):new ye(n,r));return new Bs(o,Rt.empty(),t)}function b4(e){return new Bs(e.readTime,e.key,tc)}class Bs{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Bs(Ot.min(),Rt.empty(),tc)}static max(){return new Bs(Ot.max(),Rt.empty(),tc)}}function A4(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Rt.comparator(e.documentKey,t.documentKey),n!==0?n:Bt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class C4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(e){if(e.code!==dt.FAILED_PRECONDITION||e.message!==R4)throw e;vt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new gt((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,o)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof gt?n:gt.resolve(n)}catch(n){return gt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):gt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):gt.reject(n)}static resolve(t){return new gt((n,r)=>{n(t)})}static reject(t){return new gt((n,r)=>{r(t)})}static waitFor(t){return new gt((n,r)=>{let o=0,l=0,c=!1;t.forEach(d=>{++o,d.next(()=>{++l,c&&l===o&&n()},g=>r(g))}),c=!0,l===o&&n()})}static or(t){let n=gt.resolve(!1);for(const r of t)n=n.next(o=>o?gt.resolve(o):r());return n}static forEach(t,n){const r=[];return t.forEach((o,l)=>{r.push(n.call(this,o,l))}),this.waitFor(r)}static mapArray(t,n){return new gt((r,o)=>{const l=t.length,c=new Array(l);let d=0;for(let g=0;g<l;g++){const m=g;n(t[m]).next(y=>{c[m]=y,++d,d===l&&r(c)},y=>o(y))}})}static doWhile(t,n){return new gt((r,o)=>{const l=()=>{t()===!0?n().next(()=>{l()},o):r()};l()})}}function I4(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vl(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}td.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=-1;function ed(e){return e==null}function If(e){return e===0&&1/e==-1/0}function x4(e){return typeof e=="number"&&Number.isInteger(e)&&!If(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="";function N4(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=xT(t)),t=D4(e.get(n),t);return xT(t)}function D4(e,t){let n=t;const r=e.length;for(let o=0;o<r;o++){const l=e.charAt(o);switch(l){case"\0":n+="";break;case Hb:n+="";break;default:n+=l}}return n}function xT(e){return e+Hb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $s(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function qb(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t,n){this.comparator=t,this.root=n||fn.EMPTY}insert(t,n){return new be(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(t){return new be(this.comparator,this.root.remove(t,this.comparator).copy(null,null,fn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Zh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Zh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Zh(this.root,t,this.comparator,!0)}}class Zh{constructor(t,n,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=n?r(t.key,n):1,n&&o&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class fn{constructor(t,n,r,o,l){this.key=t,this.value=n,this.color=r??fn.RED,this.left=o??fn.EMPTY,this.right=l??fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,o,l){return new fn(t??this.key,n??this.value,r??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let o=this;const l=r(t,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(t,n,r),null):l===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return fn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Dt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Dt(27949);return t+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt(57766)}get value(){throw Dt(16141)}get color(){throw Dt(16727)}get left(){throw Dt(29726)}get right(){throw Dt(36894)}copy(t,n,r,o,l){return this}insert(t,n,r){return new fn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.comparator=t,this.data=new be(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new DT(this.data.getIterator())}getIteratorFrom(t){return new DT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof $e)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=r.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new $e(this.comparator);return n.data=t,n}}class DT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(t){this.fields=t,t.sort(dn.comparator)}static empty(){return new Zn([])}unionWith(t){let n=new $e(dn.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Zn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ul(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Fb("Invalid base64 string: "+l):l}}(t);return new gn(n)}static fromUint8Array(t){const n=function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l}(t);return new gn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const M4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hs(e){if(ne(!!e,39018),typeof e=="string"){let t=0;const n=M4.exec(e);if(ne(!!n,46558,{timestamp:e}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Oe(e.seconds),nanos:Oe(e.nanos)}}function Oe(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function qs(e){return typeof e=="string"?gn.fromBase64String(e):gn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="server_timestamp",Gb="__type__",$b="__previous_value__",Yb="__local_write_time__";function sy(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[Gb])===null||n===void 0?void 0:n.stringValue)===jb}function nd(e){const t=e.mapValue.fields[$b];return sy(t)?nd(t):t}function ec(e){const t=Hs(e.mapValue.fields[Yb].timestampValue);return new ye(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(t,n,r,o,l,c,d,g,m,y){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=m,this.isUsingEmulator=y}}const xf="(default)";class nc{constructor(t,n){this.projectId=t,this.database=n||xf}static empty(){return new nc("","")}get isDefaultDatabase(){return this.database===xf}isEqual(t){return t instanceof nc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="__type__",k4="__max__",Wh={mapValue:{}},Xb="__vector__",Nf="value";function Fs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?sy(e)?4:P4(e)?9007199254740991:V4(e)?10:11:Dt(28295,{value:e})}function hr(e,t){if(e===t)return!0;const n=Fs(e);if(n!==Fs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ec(e).isEqual(ec(t));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Hs(o.timestampValue),d=Hs(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(o,l){return qs(o.bytesValue).isEqual(qs(l.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(o,l){return Oe(o.geoPointValue.latitude)===Oe(l.geoPointValue.latitude)&&Oe(o.geoPointValue.longitude)===Oe(l.geoPointValue.longitude)}(e,t);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return Oe(o.integerValue)===Oe(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Oe(o.doubleValue),d=Oe(l.doubleValue);return c===d?If(c)===If(d):isNaN(c)&&isNaN(d)}return!1}(e,t);case 9:return ul(e.arrayValue.values||[],t.arrayValue.values||[],hr);case 10:case 11:return function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(NT(c)!==NT(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(d[g]===void 0||!hr(c[g],d[g])))return!1;return!0}(e,t);default:return Dt(52216,{left:e})}}function ic(e,t){return(e.values||[]).find(n=>hr(n,t))!==void 0}function cl(e,t){if(e===t)return 0;const n=Fs(e),r=Fs(t);if(n!==r)return Bt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Bt(e.booleanValue,t.booleanValue);case 2:return function(l,c){const d=Oe(l.integerValue||l.doubleValue),g=Oe(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(e,t);case 3:return MT(e.timestampValue,t.timestampValue);case 4:return MT(ec(e),ec(t));case 5:return yp(e.stringValue,t.stringValue);case 6:return function(l,c){const d=qs(l),g=qs(c);return d.compareTo(g)}(e.bytesValue,t.bytesValue);case 7:return function(l,c){const d=l.split("/"),g=c.split("/");for(let m=0;m<d.length&&m<g.length;m++){const y=Bt(d[m],g[m]);if(y!==0)return y}return Bt(d.length,g.length)}(e.referenceValue,t.referenceValue);case 8:return function(l,c){const d=Bt(Oe(l.latitude),Oe(c.latitude));return d!==0?d:Bt(Oe(l.longitude),Oe(c.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return OT(e.arrayValue,t.arrayValue);case 10:return function(l,c){var d,g,m,y;const v=l.fields||{},E=c.fields||{},S=(d=v[Nf])===null||d===void 0?void 0:d.arrayValue,D=(g=E[Nf])===null||g===void 0?void 0:g.arrayValue,V=Bt(((m=S?.values)===null||m===void 0?void 0:m.length)||0,((y=D?.values)===null||y===void 0?void 0:y.length)||0);return V!==0?V:OT(S,D)}(e.mapValue,t.mapValue);case 11:return function(l,c){if(l===Wh.mapValue&&c===Wh.mapValue)return 0;if(l===Wh.mapValue)return 1;if(c===Wh.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),m=c.fields||{},y=Object.keys(m);g.sort(),y.sort();for(let v=0;v<g.length&&v<y.length;++v){const E=yp(g[v],y[v]);if(E!==0)return E;const S=cl(d[g[v]],m[y[v]]);if(S!==0)return S}return Bt(g.length,y.length)}(e.mapValue,t.mapValue);default:throw Dt(23264,{Pe:n})}}function MT(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Bt(e,t);const n=Hs(e),r=Hs(t),o=Bt(n.seconds,r.seconds);return o!==0?o:Bt(n.nanos,r.nanos)}function OT(e,t){const n=e.values||[],r=t.values||[];for(let o=0;o<n.length&&o<r.length;++o){const l=cl(n[o],r[o]);if(l)return l}return Bt(n.length,r.length)}function hl(e){return _p(e)}function _p(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Hs(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return qs(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Rt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",o=!0;for(const l of n.values||[])o?o=!1:r+=",",r+=_p(l);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let o="{",l=!0;for(const c of r)l?l=!1:o+=",",o+=`${c}:${_p(n.fields[c])}`;return o+"}"}(e.mapValue):Dt(61005,{value:e})}function uf(e){switch(Fs(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=nd(e);return t?16+uf(t):16;case 5:return 2*e.stringValue.length;case 6:return qs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,l)=>o+uf(l),0)}(e.arrayValue);case 10:case 11:return function(r){let o=0;return $s(r.fields,(l,c)=>{o+=l.length+uf(c)}),o}(e.mapValue);default:throw Dt(13486,{value:e})}}function kT(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function vp(e){return!!e&&"integerValue"in e}function oy(e){return!!e&&"arrayValue"in e}function VT(e){return!!e&&"nullValue"in e}function PT(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function cf(e){return!!e&&"mapValue"in e}function V4(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[Kb])===null||n===void 0?void 0:n.stringValue)===Xb}function zu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return $s(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=zu(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=zu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function P4(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===k4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this.value=t}static empty(){return new Pn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!cf(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=zu(n)}setAll(t){let n=dn.emptyPath(),r={},o=[];t.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=d.popLast()}c?r[d.lastSegment()]=zu(c):o.push(d.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,r,o)}delete(t){const n=this.field(t.popLast());cf(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return hr(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=n.mapValue.fields[t.get(r)];cf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,r){$s(n,(o,l)=>t[o]=l);for(const o of r)delete t[o]}clone(){return new Pn(zu(this.value))}}function Qb(e){const t=[];return $s(e.fields,(n,r)=>{const o=new dn([n]);if(cf(r)){const l=Qb(r.mapValue).fields;if(l.length===0)t.push(o);else for(const c of l)t.push(o.child(c))}else t.push(o)}),new Zn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t,n,r,o,l,c,d){this.key=t,this.documentType=n,this.version=r,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(t){return new Tn(t,0,Ot.min(),Ot.min(),Ot.min(),Pn.empty(),0)}static newFoundDocument(t,n,r,o){return new Tn(t,1,n,Ot.min(),r,o,0)}static newNoDocument(t,n){return new Tn(t,2,n,Ot.min(),Ot.min(),Pn.empty(),0)}static newUnknownDocument(t,n){return new Tn(t,3,n,Ot.min(),Ot.min(),Pn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Tn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(t,n){this.position=t,this.inclusive=n}}function LT(e,t,n){let r=0;for(let o=0;o<e.position.length;o++){const l=t[o],c=e.position[o];if(l.field.isKeyField()?r=Rt.comparator(Rt.fromName(c.referenceValue),n.key):r=cl(c,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function UT(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!hr(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(t,n="asc"){this.field=t,this.dir=n}}function L4(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{}class Be extends Zb{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new z4(t,n,r):n==="array-contains"?new q4(t,r):n==="in"?new F4(t,r):n==="not-in"?new j4(t,r):n==="array-contains-any"?new G4(t,r):new Be(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new B4(t,r):new H4(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(cl(n,this.value)):n!==null&&Fs(this.value)===Fs(n)&&this.matchesComparison(cl(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ki extends Zb{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new ki(t,n)}matches(t){return Wb(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Wb(e){return e.op==="and"}function Jb(e){return U4(e)&&Wb(e)}function U4(e){for(const t of e.filters)if(t instanceof ki)return!1;return!0}function Ep(e){if(e instanceof Be)return e.field.canonicalString()+e.op.toString()+hl(e.value);if(Jb(e))return e.filters.map(t=>Ep(t)).join(",");{const t=e.filters.map(n=>Ep(n)).join(",");return`${e.op}(${t})`}}function t1(e,t){return e instanceof Be?function(r,o){return o instanceof Be&&r.op===o.op&&r.field.isEqual(o.field)&&hr(r.value,o.value)}(e,t):e instanceof ki?function(r,o){return o instanceof ki&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((l,c,d)=>l&&t1(c,o.filters[d]),!0):!1}(e,t):void Dt(19439)}function e1(e){return e instanceof Be?function(n){return`${n.field.canonicalString()} ${n.op} ${hl(n.value)}`}(e):e instanceof ki?function(n){return n.op.toString()+" {"+n.getFilters().map(e1).join(" ,")+"}"}(e):"Filter"}class z4 extends Be{constructor(t,n,r){super(t,n,r),this.key=Rt.fromName(r.referenceValue)}matches(t){const n=Rt.comparator(t.key,this.key);return this.matchesComparison(n)}}class B4 extends Be{constructor(t,n){super(t,"in",n),this.keys=n1("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class H4 extends Be{constructor(t,n){super(t,"not-in",n),this.keys=n1("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function n1(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Rt.fromName(r.referenceValue))}class q4 extends Be{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return oy(n)&&ic(n.arrayValue,this.value)}}class F4 extends Be{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ic(this.value.arrayValue,n)}}class j4 extends Be{constructor(t,n){super(t,"not-in",n)}matches(t){if(ic(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ic(this.value.arrayValue,n)}}class G4 extends Be{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!oy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ic(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(t,n=null,r=[],o=[],l=null,c=null,d=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function zT(e,t=null,n=[],r=[],o=null,l=null,c=null){return new $4(e,t,n,r,o,l,c)}function ay(e){const t=kt(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Ep(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),ed(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>hl(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>hl(r)).join(",")),t.Ie=n}return t.Ie}function ly(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!L4(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!t1(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!UT(e.startAt,t.startAt)&&UT(e.endAt,t.endAt)}function Tp(e){return Rt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(t,n=null,r=[],o=[],l=null,c="F",d=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Y4(e,t,n,r,o,l,c,d){return new El(e,t,n,r,o,l,c,d)}function i1(e){return new El(e)}function BT(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function r1(e){return e.collectionGroup!==null}function Bu(e){const t=kt(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const l of t.explicitOrderBy)t.Ee.push(l),n.add(l.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new $e(dn.comparator);return c.filters.forEach(g=>{g.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(t).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||t.Ee.push(new rc(l,r))}),n.has(dn.keyField().canonicalString())||t.Ee.push(new rc(dn.keyField(),r))}return t.Ee}function ar(e){const t=kt(e);return t.de||(t.de=K4(t,Bu(e))),t.de}function K4(e,t){if(e.limitType==="F")return zT(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new rc(o.field,l)});const n=e.endAt?new Df(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Df(e.startAt.position,e.startAt.inclusive):null;return zT(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function wp(e,t){const n=e.filters.concat([t]);return new El(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Sp(e,t,n){return new El(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function id(e,t){return ly(ar(e),ar(t))&&e.limitType===t.limitType}function s1(e){return`${ay(ar(e))}|lt:${e.limitType}`}function Fa(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>e1(o)).join(", ")}]`),ed(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>hl(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>hl(o)).join(",")),`Target(${r})`}(ar(e))}; limitType=${e.limitType})`}function rd(e,t){return t.isFoundDocument()&&function(r,o){const l=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Rt.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(e,t)&&function(r,o){for(const l of Bu(r))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(e,t)&&function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0}(e,t)&&function(r,o){return!(r.startAt&&!function(c,d,g){const m=LT(c,d,g);return c.inclusive?m<=0:m<0}(r.startAt,Bu(r),o)||r.endAt&&!function(c,d,g){const m=LT(c,d,g);return c.inclusive?m>=0:m>0}(r.endAt,Bu(r),o))}(e,t)}function X4(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function o1(e){return(t,n)=>{let r=!1;for(const o of Bu(e)){const l=Q4(o,t,n);if(l!==0)return l;r=r||o.field.isKeyField()}return 0}}function Q4(e,t,n){const r=e.field.isKeyField()?Rt.comparator(t.key,n.key):function(l,c,d){const g=c.data.field(l),m=d.data.field(l);return g!==null&&m!==null?cl(g,m):Dt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Dt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[o,l]of r)if(this.equalsFn(o,t))return l}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],t))return void(o[l]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){$s(this.inner,(n,r)=>{for(const[o,l]of r)t(o,l)})}isEmpty(){return qb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=new be(Rt.comparator);function Yr(){return Z4}const a1=new be(Rt.comparator);function Pu(...e){let t=a1;for(const n of e)t=t.insert(n.key,n);return t}function l1(e){let t=a1;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Do(){return Hu()}function u1(){return Hu()}function Hu(){return new Fo(e=>e.toString(),(e,t)=>e.isEqual(t))}const W4=new be(Rt.comparator),J4=new $e(Rt.comparator);function Yt(...e){let t=J4;for(const n of e)t=t.add(n);return t}const tk=new $e(Bt);function ek(){return tk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:If(t)?"-0":t}}function c1(e){return{integerValue:""+e}}function nk(e,t){return x4(t)?c1(t):uy(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(){this._=void 0}}function ik(e,t,n){return e instanceof Mf?function(o,l){const c={fields:{[Gb]:{stringValue:jb},[Yb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&sy(l)&&(l=nd(l)),l&&(c.fields[$b]=l),{mapValue:c}}(n,t):e instanceof sc?f1(e,t):e instanceof oc?d1(e,t):function(o,l){const c=h1(o,l),d=HT(c)+HT(o.Re);return vp(c)&&vp(o.Re)?c1(d):uy(o.serializer,d)}(e,t)}function rk(e,t,n){return e instanceof sc?f1(e,t):e instanceof oc?d1(e,t):n}function h1(e,t){return e instanceof Of?function(r){return vp(r)||function(l){return!!l&&"doubleValue"in l}(r)}(t)?t:{integerValue:0}:null}class Mf extends sd{}class sc extends sd{constructor(t){super(),this.elements=t}}function f1(e,t){const n=g1(t);for(const r of e.elements)n.some(o=>hr(o,r))||n.push(r);return{arrayValue:{values:n}}}class oc extends sd{constructor(t){super(),this.elements=t}}function d1(e,t){let n=g1(t);for(const r of e.elements)n=n.filter(o=>!hr(o,r));return{arrayValue:{values:n}}}class Of extends sd{constructor(t,n){super(),this.serializer=t,this.Re=n}}function HT(e){return Oe(e.integerValue||e.doubleValue)}function g1(e){return oy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function sk(e,t){return e.field.isEqual(t.field)&&function(r,o){return r instanceof sc&&o instanceof sc||r instanceof oc&&o instanceof oc?ul(r.elements,o.elements,hr):r instanceof Of&&o instanceof Of?hr(r.Re,o.Re):r instanceof Mf&&o instanceof Mf}(e.transform,t.transform)}class ok{constructor(t,n){this.version=t,this.transformResults=n}}class Wn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Wn}static exists(t){return new Wn(void 0,t)}static updateTime(t){return new Wn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function hf(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class od{}function m1(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new ad(e.key,Wn.none()):new pc(e.key,e.data,Wn.none());{const n=e.data,r=Pn.empty();let o=new $e(dn.comparator);for(let l of t.fields)if(!o.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?r.delete(l):r.set(l,c),o=o.add(l)}return new Ys(e.key,r,new Zn(o.toArray()),Wn.none())}}function ak(e,t,n){e instanceof pc?function(o,l,c){const d=o.value.clone(),g=FT(o.fieldTransforms,l,c.transformResults);d.setAll(g),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(e,t,n):e instanceof Ys?function(o,l,c){if(!hf(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=FT(o.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(p1(o)),g.setAll(d),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(e,t,n):function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,n)}function qu(e,t,n,r){return e instanceof pc?function(l,c,d,g){if(!hf(l.precondition,c))return d;const m=l.value.clone(),y=jT(l.fieldTransforms,g,c);return m.setAll(y),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ys?function(l,c,d,g){if(!hf(l.precondition,c))return d;const m=jT(l.fieldTransforms,g,c),y=c.data;return y.setAll(p1(l)),y.setAll(m),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(e,t,n,r):function(l,c,d){return hf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(e,t,n)}function lk(e,t){let n=null;for(const r of e.fieldTransforms){const o=t.data.field(r.field),l=h1(r.transform,o||null);l!=null&&(n===null&&(n=Pn.empty()),n.set(r.field,l))}return n||null}function qT(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&ul(r,o,(l,c)=>sk(l,c))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class pc extends od{constructor(t,n,r,o=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ys extends od{constructor(t,n,r,o,l=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function p1(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function FT(e,t,n){const r=new Map;ne(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let o=0;o<n.length;o++){const l=e[o],c=l.transform,d=t.data.field(l.field);r.set(l.field,rk(c,d,n[o]))}return r}function jT(e,t,n){const r=new Map;for(const o of e){const l=o.transform,c=n.data.field(o.field);r.set(o.field,ik(l,c,t))}return r}class ad extends od{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uk extends od{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(t,n,r,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(t.key)&&ak(l,t,r[o])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=qu(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=qu(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=u1();return this.mutations.forEach(o=>{const l=t.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=n.has(o.key)?null:d;const g=m1(c,d);g!==null&&r.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(Ot.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Yt())}isEqual(t){return this.batchId===t.batchId&&ul(this.mutations,t.mutations,(n,r)=>qT(n,r))&&ul(this.baseMutations,t.baseMutations,(n,r)=>qT(n,r))}}class cy{constructor(t,n,r,o){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(t,n,r){ne(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let o=function(){return W4}();const l=t.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,r[c].version);return new cy(t,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,Zt;function dk(e){switch(e){case dt.OK:return Dt(64938);case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0;default:return Dt(15467,{code:e})}}function y1(e){if(e===void 0)return $r("GRPC error has no .code"),dt.UNKNOWN;switch(e){case ze.OK:return dt.OK;case ze.CANCELLED:return dt.CANCELLED;case ze.UNKNOWN:return dt.UNKNOWN;case ze.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case ze.INTERNAL:return dt.INTERNAL;case ze.UNAVAILABLE:return dt.UNAVAILABLE;case ze.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case ze.NOT_FOUND:return dt.NOT_FOUND;case ze.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case ze.ABORTED:return dt.ABORTED;case ze.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case ze.DATA_LOSS:return dt.DATA_LOSS;default:return Dt(39323,{code:e})}}(Zt=ze||(ze={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=new Ps([4294967295,4294967295],0);function GT(e){const t=zb().encode(e),n=new Db;return n.update(t),new Uint8Array(n.digest())}function $T(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Ps([n,r],0),new Ps([o,l],0)]}class hy{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Lu(`Invalid padding: ${n}`);if(r<0)throw new Lu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Lu(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Lu(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=Ps.fromNumber(this.pe)}we(t,n,r){let o=t.add(n.multiply(Ps.fromNumber(r)));return o.compare(gk)===1&&(o=new Ps([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=GT(t),[r,o]=$T(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,o,l);if(!this.be(c))return!1}return!0}static create(t,n,r){const o=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new hy(l,o,n);return r.forEach(d=>c.insert(d)),c}insert(t){if(this.pe===0)return;const n=GT(t),[r,o]=$T(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,o,l);this.Se(c)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(t,n,r,o,l){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const o=new Map;return o.set(t,yc.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new ld(Ot.min(),o,new be(Bt),Yr(),Yt())}}class yc{constructor(t,n,r,o,l){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new yc(r,n,Yt(),Yt(),Yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(t,n,r,o){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=o}}class _1{constructor(t,n){this.targetId=t,this.Ce=n}}class v1{constructor(t,n,r=gn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=o}}class YT{constructor(){this.Fe=0,this.Me=KT(),this.xe=gn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Yt(),n=Yt(),r=Yt();return this.Me.forEach((o,l)=>{switch(l){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Dt(38017,{changeType:l})}}),new yc(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=KT()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,ne(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class mk{constructor(t){this.ze=t,this.je=new Map,this.He=Yr(),this.Je=Jh(),this.Ye=Jh(),this.Ze=new be(Bt)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:Dt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,o)=>{this.it(o)&&n(o)})}ot(t){const n=t.targetId,r=t.Ce.count,o=this._t(n);if(o){const l=o.target;if(Tp(l))if(r===0){const c=new Rt(l.path);this.tt(n,c,Tn.newNoDocument(c,Ot.min()))}else ne(r===1,20013,{expectedCount:r});else{const c=this.ut(n);if(c!==r){const d=this.ct(t),g=d?this.lt(d,t,c):1;if(g!==0){this.st(n);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,m)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:l=0}=n;let c,d;try{c=qs(r).toUint8Array()}catch(g){if(g instanceof Fb)return ll("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new hy(c,o,l)}catch(g){return ll(g instanceof Lu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.pe===0?null:d}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let o=0;return r.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(d)||(this.tt(n,l,null),o++)}),o}It(t){const n=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&Tp(d.target)){const g=new Rt(d.target.path);this.Et(g).has(c)||this.dt(c,g)||this.tt(c,g,Tn.newNoDocument(g,t))}l.Le&&(n.set(c,l.qe()),l.Qe())}});let r=Yt();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(g=>{const m=this._t(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.He.forEach((l,c)=>c.setReadTime(t));const o=new ld(t,n,this.Ze,this.He,r);return this.He=Yr(),this.Je=Jh(),this.Ye=Jh(),this.Ze=new be(Bt),o}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const o=this.rt(t);this.dt(t,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new YT,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new $e(Bt),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new $e(Bt),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||vt("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new YT),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function Jh(){return new be(Rt.comparator)}function KT(){return new be(Rt.comparator)}const pk={asc:"ASCENDING",desc:"DESCENDING"},yk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_k={and:"AND",or:"OR"};class vk{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function bp(e,t){return e.useProto3Json||ed(t)?t:{value:t}}function kf(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function E1(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ek(e,t){return kf(e,t.toTimestamp())}function lr(e){return ne(!!e,49232),Ot.fromTimestamp(function(n){const r=Hs(n);return new ye(r.seconds,r.nanos)}(e))}function fy(e,t){return Ap(e,t).canonicalString()}function Ap(e,t){const n=function(o){return new pe(["projects",o.projectId,"databases",o.database])}(e).child("documents");return t===void 0?n:n.child(t)}function T1(e){const t=pe.fromString(e);return ne(R1(t),10190,{key:t.toString()}),t}function Rp(e,t){return fy(e.databaseId,t.path)}function qm(e,t){const n=T1(t);if(n.get(1)!==e.databaseId.projectId)throw new Et(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Et(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Rt(S1(n))}function w1(e,t){return fy(e.databaseId,t)}function Tk(e){const t=T1(e);return t.length===4?pe.emptyPath():S1(t)}function Cp(e){return new pe(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function S1(e){return ne(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function XT(e,t,n){return{name:Rp(e,t),fields:n.value.mapValue.fields}}function wk(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Dt(39313,{state:m})}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],l=function(m,y){return m.useProto3Json?(ne(y===void 0||typeof y=="string",58123),gn.fromBase64String(y||"")):(ne(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),gn.fromUint8Array(y||new Uint8Array))}(e,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(m){const y=m.code===void 0?dt.UNKNOWN:y1(m.code);return new Et(y,m.message||"")}(c);n=new v1(r,o,l,d||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=qm(e,r.document.name),l=lr(r.document.updateTime),c=r.document.createTime?lr(r.document.createTime):Ot.min(),d=new Pn({mapValue:{fields:r.document.fields}}),g=Tn.newFoundDocument(o,l,c,d),m=r.targetIds||[],y=r.removedTargetIds||[];n=new ff(m,y,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=qm(e,r.document),l=r.readTime?lr(r.readTime):Ot.min(),c=Tn.newNoDocument(o,l),d=r.removedTargetIds||[];n=new ff([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=qm(e,r.document),l=r.removedTargetIds||[];n=new ff([],l,o,null)}else{if(!("filter"in t))return Dt(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:l}=r,c=new fk(o,l),d=r.targetId;n=new _1(d,c)}}return n}function Sk(e,t){let n;if(t instanceof pc)n={update:XT(e,t.key,t.value)};else if(t instanceof ad)n={delete:Rp(e,t.key)};else if(t instanceof Ys)n={update:XT(e,t.key,t.data),updateMask:Mk(t.fieldMask)};else{if(!(t instanceof uk))return Dt(16599,{ft:t.type});n={verify:Rp(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof Mf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof sc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof oc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Of)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Dt(20930,{transform:c.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:Ek(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Dt(27497)}(e,t.precondition)),n}function bk(e,t){return e&&e.length>0?(ne(t!==void 0,14353),e.map(n=>function(o,l){let c=o.updateTime?lr(o.updateTime):lr(l);return c.isEqual(Ot.min())&&(c=lr(l)),new ok(c,o.transformResults||[])}(n,t))):[]}function Ak(e,t){return{documents:[w1(e,t.path)]}}function Rk(e,t){const n={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=w1(e,o);const l=function(m){if(m.length!==0)return A1(ki.create(m,"and"))}(t.filters);l&&(n.structuredQuery.where=l);const c=function(m){if(m.length!==0)return m.map(y=>function(E){return{field:ja(E.field),direction:xk(E.dir)}}(y))}(t.orderBy);c&&(n.structuredQuery.orderBy=c);const d=bp(e,t.limit);return d!==null&&(n.structuredQuery.limit=d),t.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(t.endAt)),{gt:n,parent:o}}function Ck(e){let t=Tk(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){ne(r===1,65062);const y=n.from[0];y.allDescendants?o=y.collectionId:t=t.child(y.collectionId)}let l=[];n.where&&(l=function(v){const E=b1(v);return E instanceof ki&&Jb(E)?E.getFilters():[E]}(n.where));let c=[];n.orderBy&&(c=function(v){return v.map(E=>function(D){return new rc(Ga(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(E))}(n.orderBy));let d=null;n.limit&&(d=function(v){let E;return E=typeof v=="object"?v.value:v,ed(E)?null:E}(n.limit));let g=null;n.startAt&&(g=function(v){const E=!!v.before,S=v.values||[];return new Df(S,E)}(n.startAt));let m=null;return n.endAt&&(m=function(v){const E=!v.before,S=v.values||[];return new Df(S,E)}(n.endAt)),Y4(t,o,c,l,d,"F",g,m)}function Ik(e,t){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt(28987,{purpose:o})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function b1(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ga(n.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Ga(n.unaryFilter.field);return Be.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ga(n.unaryFilter.field);return Be.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ga(n.unaryFilter.field);return Be.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Dt(61313);default:return Dt(60726)}}(e):e.fieldFilter!==void 0?function(n){return Be.create(Ga(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Dt(58110);default:return Dt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return ki.create(n.compositeFilter.filters.map(r=>b1(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Dt(1026)}}(n.compositeFilter.op))}(e):Dt(30097,{filter:e})}function xk(e){return pk[e]}function Nk(e){return yk[e]}function Dk(e){return _k[e]}function ja(e){return{fieldPath:e.canonicalString()}}function Ga(e){return dn.fromServerFormat(e.fieldPath)}function A1(e){return e instanceof Be?function(n){if(n.op==="=="){if(PT(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NAN"}};if(VT(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(PT(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NOT_NAN"}};if(VT(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ja(n.field),op:Nk(n.op),value:n.value}}}(e):e instanceof ki?function(n){const r=n.getFilters().map(o=>A1(o));return r.length===1?r[0]:{compositeFilter:{op:Dk(n.op),filters:r}}}(e):Dt(54877,{filter:e})}function Mk(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function R1(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(t,n,r,o,l=Ot.min(),c=Ot.min(),d=gn.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(t){return new Ds(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(t){this.wt=t}}function kk(e){const t=Ck({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Sp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this.Cn=new Pk}addToCollectionParentIndex(t,n){return this.Cn.add(n),gt.resolve()}getCollectionParents(t,n){return gt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return gt.resolve()}deleteFieldIndex(t,n){return gt.resolve()}deleteAllFieldIndexes(t){return gt.resolve()}createTargetIndexes(t,n){return gt.resolve()}getDocumentsMatchingTarget(t,n){return gt.resolve(null)}getIndexType(t,n){return gt.resolve(0)}getFieldIndexes(t,n){return gt.resolve([])}getNextCollectionGroupToUpdate(t){return gt.resolve(null)}getMinOffset(t,n){return gt.resolve(Bs.min())}getMinOffsetFromCollectionGroup(t,n){return gt.resolve(Bs.min())}updateCollectionGroup(t,n,r){return gt.resolve()}updateIndexEntries(t,n){return gt.resolve()}}class Pk{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),o=this.index[n]||new $e(pe.comparator),l=!o.has(r);return this.index[n]=o.add(r),l}has(t){const n=t.lastSegment(),r=t.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(t){return(this.index[t]||new $e(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},C1=41943040;class Vn{static withCacheSize(t){return new Vn(t,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(C1,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new fl(0)}static lr(){return new fl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="LruGarbageCollector",Lk=1048576;function WT([e,t],[n,r]){const o=Bt(e,n);return o===0?Bt(t,r):o}class Uk{constructor(t){this.Er=t,this.buffer=new $e(WT),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();WT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zk{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){vt(ZT,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vl(n)?vt(ZT,"Ignoring IndexedDB error during garbage collection: ",n):await _l(n)}await this.mr(3e5)})}}class Bk{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return gt.resolve(td.le);const r=new Uk(n);return this.gr.forEachTarget(t,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(t,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.gr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(vt("LruGarbageCollector","Garbage collection skipped; disabled"),gt.resolve(QT)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(vt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QT):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let r,o,l,c,d,g,m;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(vt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),o=this.params.maximumSequenceNumbersToCollect):o=v,c=Date.now(),this.nthSequenceNumber(t,o))).next(v=>(r=v,d=Date.now(),this.removeTargets(t,r,n))).next(v=>(l=v,g=Date.now(),this.removeOrphanedDocuments(t,r))).next(v=>(m=Date.now(),qa()<=$t.DEBUG&&vt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${v} documents in `+(m-g)+`ms
Total Duration: ${m-y}ms`),gt.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:v})))}}function Hk(e,t){return new Bk(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.changes=new Fo(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Tn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?gt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(t,n,r,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(t,n))).next(o=>(r!==null&&qu(r.mutation,o,Zn.empty(),ye.now()),o))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Yt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Yt()){const o=Do();return this.populateOverlays(t,o,n).next(()=>this.computeViews(t,n,o,r).next(l=>{let c=Pu();return l.forEach((d,g)=>{c=c.insert(d,g.overlayedDocument)}),c}))}getOverlayedDocuments(t,n){const r=Do();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Yt()))}populateOverlays(t,n,r){const o=[];return r.forEach(l=>{n.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(t,o).next(l=>{l.forEach((c,d)=>{n.set(c,d)})})}computeViews(t,n,r,o){let l=Yr();const c=Hu(),d=function(){return Hu()}();return n.forEach((g,m)=>{const y=r.get(m.key);o.has(m.key)&&(y===void 0||y.mutation instanceof Ys)?l=l.insert(m.key,m):y!==void 0?(c.set(m.key,y.mutation.getFieldMask()),qu(y.mutation,m,y.mutation.getFieldMask(),ye.now())):c.set(m.key,Zn.empty())}),this.recalculateAndSaveOverlays(t,l).next(g=>(g.forEach((m,y)=>c.set(m,y)),n.forEach((m,y)=>{var v;return d.set(m,new Fk(y,(v=c.get(m))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(t,n){const r=Hu();let o=new be((c,d)=>c-d),l=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(c=>{for(const d of c)d.keys().forEach(g=>{const m=n.get(g);if(m===null)return;let y=r.get(g)||Zn.empty();y=d.applyToLocalView(m,y),r.set(g,y);const v=(o.get(d.batchId)||Yt()).add(g);o=o.insert(d.batchId,v)})}).next(()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),m=g.key,y=g.value,v=u1();y.forEach(E=>{if(!l.has(E)){const S=m1(n.get(E),r.get(E));S!==null&&v.set(E,S),l=l.add(E)}}),c.push(this.documentOverlayCache.saveOverlays(t,m,v))}return gt.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,o){return function(c){return Rt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):r1(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,o):this.getDocumentsMatchingCollectionQuery(t,n,r,o)}getNextDocuments(t,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,o).next(l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,o-l.size):gt.resolve(Do());let d=tc,g=l;return c.next(m=>gt.forEach(m,(y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(y)?gt.resolve():this.remoteDocumentCache.getEntry(t,y).next(E=>{g=g.insert(y,E)}))).next(()=>this.populateOverlays(t,m,l)).next(()=>this.computeViews(t,g,m,Yt())).next(y=>({batchId:d,changes:l1(y)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Rt(n)).next(r=>{let o=Pu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(t,n,r,o){const l=n.collectionGroup;let c=Pu();return this.indexManager.getCollectionParents(t,l).next(d=>gt.forEach(d,g=>{const m=function(v,E){return new El(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,g.child(l));return this.getDocumentsMatchingCollectionQuery(t,m,r,o).next(y=>{y.forEach((v,E)=>{c=c.insert(v,E)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,n,r,o){let l;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,l,o))).next(c=>{l.forEach((g,m)=>{const y=m.getKey();c.get(y)===null&&(c=c.insert(y,Tn.newInvalidDocument(y)))});let d=Pu();return c.forEach((g,m)=>{const y=l.get(g);y!==void 0&&qu(y.mutation,m,Zn.empty(),ye.now()),rd(n,m)&&(d=d.insert(g,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return gt.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:lr(o.createTime)}}(n)),gt.resolve()}getNamedQuery(t,n){return gt.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(o){return{name:o.name,query:kk(o.bundledQuery),readTime:lr(o.readTime)}}(n)),gt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this.overlays=new be(Rt.comparator),this.Qr=new Map}getOverlay(t,n){return gt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Do();return gt.forEach(n,o=>this.getOverlay(t,o).next(l=>{l!==null&&r.set(o,l)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((o,l)=>{this.St(t,n,l)}),gt.resolve()}removeOverlaysForBatchId(t,n,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(r)),gt.resolve()}getOverlaysForCollection(t,n,r){const o=Do(),l=n.length+1,c=new Rt(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const g=d.getNext().value,m=g.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===l&&g.largestBatchId>r&&o.set(g.getKey(),g)}return gt.resolve(o)}getOverlaysForCollectionGroup(t,n,r,o){let l=new be((m,y)=>m-y);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let y=l.get(m.largestBatchId);y===null&&(y=Do(),l=l.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=Do(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((m,y)=>d.set(m,y)),!(d.size()>=o)););return gt.resolve(d)}St(t,n,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new hk(n,r));let l=this.Qr.get(n);l===void 0&&(l=Yt(),this.Qr.set(n,l)),this.Qr.set(n,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(t){return gt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,gt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this.$r=new $e(rn.Ur),this.Kr=new $e(rn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const r=new rn(t,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.zr(new rn(t,n))}jr(t,n){t.forEach(r=>this.removeReference(r,n))}Hr(t){const n=new Rt(new pe([])),r=new rn(n,t),o=new rn(n,t+1),l=[];return this.Kr.forEachInRange([r,o],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new Rt(new pe([])),r=new rn(n,t),o=new rn(n,t+1);let l=Yt();return this.Kr.forEachInRange([r,o],c=>{l=l.add(c.key)}),l}containsKey(t){const n=new rn(t,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class rn{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return Rt.comparator(t.key,n.key)||Bt(t.Zr,n.Zr)}static Wr(t,n){return Bt(t.Zr,n.Zr)||Rt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new $e(rn.Ur)}checkEmpty(t){return gt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,o){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new ck(l,n,r,o);this.mutationQueue.push(c);for(const d of o)this.Xr=this.Xr.add(new rn(d.key,l)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return gt.resolve(c)}lookupMutationBatch(t,n){return gt.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,o=this.ti(r),l=o<0?0:o;return gt.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return gt.resolve(this.mutationQueue.length===0?ry:this.nr-1)}getAllMutationBatches(t){return gt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new rn(n,0),o=new rn(n,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([r,o],c=>{const d=this.ei(c.Zr);l.push(d)}),gt.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new $e(Bt);return n.forEach(o=>{const l=new rn(o,0),c=new rn(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],d=>{r=r.add(d.Zr)})}),gt.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,o=r.length+1;let l=r;Rt.isDocumentKey(l)||(l=l.child(""));const c=new rn(new Rt(l),0);let d=new $e(Bt);return this.Xr.forEachWhile(g=>{const m=g.key.path;return!!r.isPrefixOf(m)&&(m.length===o&&(d=d.add(g.Zr)),!0)},c),gt.resolve(this.ni(d))}ni(t){const n=[];return t.forEach(r=>{const o=this.ei(r);o!==null&&n.push(o)}),n}removeMutationBatch(t,n){ne(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return gt.forEach(n.mutations,o=>{const l=new rn(o.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,n){const r=new rn(n,0),o=this.Xr.firstAfterOrEqual(r);return gt.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,gt.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(t){this.ii=t,this.docs=function(){return new be(Rt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,o=this.docs.get(r),l=o?o.size:0,c=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return gt.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(n))}getEntries(t,n){let r=Yr();return n.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():Tn.newInvalidDocument(o))}),gt.resolve(r)}getDocumentsMatchingQuery(t,n,r,o){let l=Yr();const c=n.path,d=new Rt(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:m,value:{document:y}}=g.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||A4(b4(y),r)<=0||(o.has(y.key)||rd(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return gt.resolve(l)}getAllFromCollectionGroup(t,n,r,o){Dt(9500)}si(t,n){return gt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Qk(this)}getSize(t){return gt.resolve(this.size)}}class Qk extends qk{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(t,o)):this.Br.removeEntry(r)}),gt.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(t){this.persistence=t,this.oi=new Fo(n=>ay(n),ly),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this._i=0,this.ai=new dy,this.targetCount=0,this.ui=fl.cr()}forEachTarget(t,n){return this.oi.forEach((r,o)=>n(o)),gt.resolve()}getLastRemoteSnapshotVersion(t){return gt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return gt.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),gt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),gt.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new fl(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,gt.resolve()}updateTargetData(t,n){return this.Tr(n),gt.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,gt.resolve()}removeTargets(t,n,r){let o=0;const l=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(t,d.targetId)),o++)}),gt.waitFor(l).next(()=>o)}getTargetCount(t){return gt.resolve(this.targetCount)}getTargetData(t,n){const r=this.oi.get(n)||null;return gt.resolve(r)}addMatchingKeys(t,n,r){return this.ai.Gr(n,r),gt.resolve()}removeMatchingKeys(t,n,r){this.ai.jr(n,r);const o=this.persistence.referenceDelegate,l=[];return o&&n.forEach(c=>{l.push(o.markPotentiallyOrphaned(t,c))}),gt.waitFor(l)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),gt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ai.Yr(n);return gt.resolve(r)}containsKey(t,n){return gt.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(t,n){this.ci={},this.overlays={},this.li=new td(0),this.hi=!1,this.hi=!0,this.Pi=new Yk,this.referenceDelegate=t(this),this.Ti=new Zk(this),this.indexManager=new Vk,this.remoteDocumentCache=function(o){return new Xk(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Ok(n),this.Ei=new Gk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new $k,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ci[t.toKey()];return r||(r=new Kk(n,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,r){vt("MemoryPersistence","Starting transaction:",t);const o=new Wk(this.li.next());return this.referenceDelegate.di(),r(o).next(l=>this.referenceDelegate.Ai(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ri(t,n){return gt.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,n)))}}class Wk extends C4{constructor(t){super(),this.currentSequenceNumber=t}}class gy{constructor(t){this.persistence=t,this.Vi=new dy,this.mi=null}static fi(t){return new gy(t)}get gi(){if(this.mi)return this.mi;throw Dt(60996)}addReference(t,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),gt.resolve()}removeReference(t,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),gt.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),gt.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(o=>{o.forEach(l=>this.gi.add(l.toString()))}).next(()=>r.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gt.forEach(this.gi,r=>{const o=Rt.fromPath(r);return this.pi(t,o).next(l=>{l||n.removeEntry(o,Ot.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return gt.or([()=>gt.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class Vf{constructor(t,n){this.persistence=t,this.yi=new Fo(r=>N4(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=Hk(this,n)}static fi(t,n){return new Vf(t,n)}di(){}Ai(t){return gt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(o=>r+o))}br(t){let n=0;return this.yr(t,r=>{n++}).next(()=>n)}yr(t,n){return gt.forEach(this.yi,(r,o)=>this.Dr(t,r,o).next(l=>l?gt.resolve():n(o)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.si(t,c=>this.Dr(t,c,n).next(d=>{d||(r++,l.removeEntry(c,Ot.min()))})).next(()=>l.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),gt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),gt.resolve()}removeReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),gt.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),gt.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=uf(t.data.value)),n}Dr(t,n,r){return gt.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.yi.get(n);return gt.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(t,n,r,o){this.targetId=t,this.fromCache=n,this.ds=r,this.As=o}static Rs(t,n){let r=Yt(),o=Yt();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new my(t,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return KM()?8:I4(wn())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,r,o){const l={result:null};return this.ws(t,n).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(t,n,o,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new Jk;return this.Ss(t,n,c).next(d=>{if(l.result=d,this.fs)return this.Ds(t,n,c,d.size)})}).next(()=>l.result)}Ds(t,n,r,o){return r.documentReadCount<this.gs?(qa()<=$t.DEBUG&&vt("QueryEngine","SDK will not create cache indexes for query:",Fa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),gt.resolve()):(qa()<=$t.DEBUG&&vt("QueryEngine","Query:",Fa(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(qa()<=$t.DEBUG&&vt("QueryEngine","The SDK decides to create cache indexes for query:",Fa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ar(n))):gt.resolve())}ws(t,n){if(BT(n))return gt.resolve(null);let r=ar(n);return this.indexManager.getIndexType(t,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Sp(n,null,"F"),r=ar(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(l=>{const c=Yt(...l);return this.ys.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,r).next(g=>{const m=this.vs(n,d);return this.Cs(n,m,c,g.readTime)?this.ws(t,Sp(n,null,"F")):this.Fs(t,m,n,g)}))})))}bs(t,n,r,o){return BT(n)||o.isEqual(Ot.min())?gt.resolve(null):this.ys.getDocuments(t,r).next(l=>{const c=this.vs(n,l);return this.Cs(n,c,r,o)?gt.resolve(null):(qa()<=$t.DEBUG&&vt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Fa(n)),this.Fs(t,c,n,S4(o,tc)).next(d=>d))})}vs(t,n){let r=new $e(o1(t));return n.forEach((o,l)=>{rd(t,l)&&(r=r.add(l))}),r}Cs(t,n,r,o){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const l=t.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(t,n,r){return qa()<=$t.DEBUG&&vt("QueryEngine","Using full collection scan to execute query:",Fa(n)),this.ys.getDocumentsMatchingQuery(t,n,Bs.min(),r)}Fs(t,n,r,o){return this.ys.getDocumentsMatchingQuery(t,r,o).next(l=>(n.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="LocalStore",eV=3e8;class nV{constructor(t,n,r,o){this.persistence=t,this.Ms=n,this.serializer=o,this.xs=new be(Bt),this.Os=new Fo(l=>ay(l),ly),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new jk(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function iV(e,t,n,r){return new nV(e,t,n,r)}async function x1(e,t){const n=kt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(l=>(o=l,n.Ls(t),n.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let g=Yt();for(const m of o){c.push(m.batchId);for(const y of m.mutations)g=g.add(y.key)}for(const m of l){d.push(m.batchId);for(const y of m.mutations)g=g.add(y.key)}return n.localDocuments.getDocuments(r,g).next(m=>({ks:m,removedBatchIds:c,addedBatchIds:d}))})})}function rV(e,t){const n=kt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=t.batch.keys(),l=n.Bs.newChangeBuffer({trackRemovals:!0});return function(d,g,m,y){const v=m.batch,E=v.keys();let S=gt.resolve();return E.forEach(D=>{S=S.next(()=>y.getEntry(g,D)).next(V=>{const M=m.docVersions.get(D);ne(M!==null,48541),V.version.compareTo(M)<0&&(v.applyToRemoteDocument(V,m),V.isValidDocument()&&(V.setReadTime(m.commitVersion),y.addEntry(V)))})}),S.next(()=>d.mutationQueue.removeMutationBatch(g,v))}(n,r,t,l).next(()=>l.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=Yt();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(g=g.add(d.batch.mutations[m].key));return g}(t))).next(()=>n.localDocuments.getDocuments(r,o))})}function N1(e){const t=kt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function sV(e,t){const n=kt(e),r=t.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const d=[];t.targetChanges.forEach((y,v)=>{const E=o.get(v);if(!E)return;d.push(n.Ti.removeMatchingKeys(l,y.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(l,y.addedDocuments,v)));let S=E.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(v)!==null?S=S.withResumeToken(gn.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,r)),o=o.insert(v,S),function(V,M,B){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=eV?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(E,S,y)&&d.push(n.Ti.updateTargetData(l,S))});let g=Yr(),m=Yt();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(oV(l,c,t.documentUpdates).next(y=>{g=y.qs,m=y.Qs})),!r.isEqual(Ot.min())){const y=n.Ti.getLastRemoteSnapshotVersion(l).next(v=>n.Ti.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(y)}return gt.waitFor(d).next(()=>c.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,g,m)).next(()=>g)}).then(l=>(n.xs=o,l))}function oV(e,t,n){let r=Yt(),o=Yt();return n.forEach(l=>r=r.add(l)),t.getEntries(e,r).next(l=>{let c=Yr();return n.forEach((d,g)=>{const m=l.get(d);g.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),g.isNoDocument()&&g.version.isEqual(Ot.min())?(t.removeEntry(d,g.readTime),c=c.insert(d,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(g),c=c.insert(d,g)):vt(py,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",g.version)}),{qs:c,Qs:o}})}function aV(e,t){const n=kt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=ry),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function lV(e,t){const n=kt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.Ti.getTargetData(r,t).next(l=>l?(o=l,gt.resolve(o)):n.Ti.allocateTargetId(r).next(c=>(o=new Ds(t,c,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(t,r.targetId)),r})}async function Ip(e,t,n){const r=kt(e),o=r.xs.get(t),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!vl(c))throw c;vt(py,`Failed to update sequence numbers for target ${t}: ${c}`)}r.xs=r.xs.remove(t),r.Os.delete(o.target)}function JT(e,t,n){const r=kt(e);let o=Ot.min(),l=Yt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(g,m,y){const v=kt(g),E=v.Os.get(y);return E!==void 0?gt.resolve(v.xs.get(E)):v.Ti.getTargetData(m,y)}(r,c,ar(t)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,d.targetId).next(g=>{l=g})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,t,n?o:Ot.min(),n?l:Yt())).next(d=>(uV(r,X4(t),d),{documents:d,$s:l})))}function uV(e,t,n){let r=e.Ns.get(t)||Ot.min();n.forEach((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),e.Ns.set(t,r)}class tw{constructor(){this.activeTargetIds=ek()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class cV{constructor(){this.xo=new tw,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,r){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new tw,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="ConnectivityMonitor";class nw{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){vt(ew,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){vt(ew,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tf=null;function xp(){return tf===null?tf=function(){return 268435456+Math.round(2147483648*Math.random())}():tf++,"0x"+tf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="RestConnection",fV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dV{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===xf?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(t,n,r,o,l){const c=xp(),d=this.jo(t,n.toUriEncodedString());vt(Fm,`Sending RPC '${t}' ${c}:`,d,r);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,o,l);const{host:m}=new URL(d),y=ml(m);return this.Jo(t,d,g,r,y).then(v=>(vt(Fm,`Received RPC '${t}' ${c}: `,v),v),v=>{throw ll(Fm,`RPC '${t}' ${c} failed with error: `,v,"url: ",d,"request:",r),v})}Yo(t,n,r,o,l,c){return this.zo(t,n,r,o,l)}Ho(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,l)=>t[l]=o),r&&r.headers.forEach((o,l)=>t[l]=o)}jo(t,n){const r=fV[t];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class mV extends dV{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,o,l){const c=xp();return new Promise((d,g)=>{const m=new Mb;m.setWithCredentials(!0),m.listenOnce(Ob.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case lf.NO_ERROR:const v=m.getResponseJson();vt(vn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(v)),d(v);break;case lf.TIMEOUT:vt(vn,`RPC '${t}' ${c} timed out`),g(new Et(dt.DEADLINE_EXCEEDED,"Request time out"));break;case lf.HTTP_ERROR:const E=m.getStatus();if(vt(vn,`RPC '${t}' ${c} failed with status:`,E,"response text:",m.getResponseText()),E>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const D=S?.error;if(D&&D.status&&D.message){const V=function(B){const F=B.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(F)>=0?F:dt.UNKNOWN}(D.status);g(new Et(V,D.message))}else g(new Et(dt.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new Et(dt.UNAVAILABLE,"Connection failed."));break;default:Dt(9055,{h_:t,streamId:c,P_:m.getLastErrorCode(),T_:m.getLastError()})}}finally{vt(vn,`RPC '${t}' ${c} completed.`)}});const y=JSON.stringify(o);vt(vn,`RPC '${t}' ${c} sending request:`,o),m.send(n,"POST",y,r,15)})}I_(t,n,r){const o=xp(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=Pb(),d=Vb(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(g.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const y=l.join("");vt(vn,`Creating RPC '${t}' stream ${o}: ${y}`,g);const v=c.createWebChannel(y,g);this.E_(v);let E=!1,S=!1;const D=new gV({Zo:M=>{S?vt(vn,`Not sending because RPC '${t}' stream ${o} is closed:`,M):(E||(vt(vn,`Opening RPC '${t}' stream ${o} transport.`),v.open(),E=!0),vt(vn,`RPC '${t}' stream ${o} sending:`,M),v.send(M))},Xo:()=>v.close()}),V=(M,B,F)=>{M.listen(B,X=>{try{F(X)}catch(z){setTimeout(()=>{throw z},0)}})};return V(v,Vu.EventType.OPEN,()=>{S||(vt(vn,`RPC '${t}' stream ${o} transport opened.`),D.__())}),V(v,Vu.EventType.CLOSE,()=>{S||(S=!0,vt(vn,`RPC '${t}' stream ${o} transport closed`),D.u_(),this.d_(v))}),V(v,Vu.EventType.ERROR,M=>{S||(S=!0,ll(vn,`RPC '${t}' stream ${o} transport errored. Name:`,M.name,"Message:",M.message),D.u_(new Et(dt.UNAVAILABLE,"The operation could not be completed")))}),V(v,Vu.EventType.MESSAGE,M=>{var B;if(!S){const F=M.data[0];ne(!!F,16349);const X=F,z=X?.error||((B=X[0])===null||B===void 0?void 0:B.error);if(z){vt(vn,`RPC '${t}' stream ${o} received error:`,z);const q=z.status;let Z=function(C){const P=ze[C];if(P!==void 0)return y1(P)}(q),x=z.message;Z===void 0&&(Z=dt.INTERNAL,x="Unknown error status: "+q+" with message "+z.message),S=!0,D.u_(new Et(Z,x)),v.close()}else vt(vn,`RPC '${t}' stream ${o} received:`,F),D.c_(F)}}),V(d,kb.STAT_EVENT,M=>{M.stat===pp.PROXY?vt(vn,`RPC '${t}' stream ${o} detected buffering proxy`):M.stat===pp.NOPROXY&&vt(vn,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{D.a_()},0),D}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function jm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(e){return new vk(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(t,n,r=1e3,o=1.5,l=6e4){this.xi=t,this.timerId=n,this.A_=r,this.R_=o,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,n-r);o>0&&vt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="PersistentStream";class M1{constructor(t,n,r,o,l,c,d,g){this.xi=t,this.S_=r,this.D_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new D1(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===dt.RESOURCE_EXHAUSTED?($r(n.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===n&&this.z_(r,o)},r=>{t(()=>{const o=new Et(dt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(t,n){const r=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return vt(iw,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(vt(iw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pV extends M1{constructor(t,n,r,o,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,c),this.serializer=l}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=wk(this.serializer,t),r=function(l){if(!("targetChange"in l))return Ot.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ot.min():c.readTime?lr(c.readTime):Ot.min()}(t);return this.listener.Y_(n,r)}Z_(t){const n={};n.database=Cp(this.serializer),n.addTarget=function(l,c){let d;const g=c.target;if(d=Tp(g)?{documents:Ak(l,g)}:{query:Rk(l,g).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=E1(l,c.resumeToken);const m=bp(l,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(Ot.min())>0){d.readTime=kf(l,c.snapshotVersion.toTimestamp());const m=bp(l,c.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,t);const r=Ik(this.serializer,t);r&&(n.labels=r),this.Q_(n)}X_(t){const n={};n.database=Cp(this.serializer),n.removeTarget=t,this.Q_(n)}}class yV extends M1{constructor(t,n,r,o,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,n){return this.connection.I_("Write",t,n)}J_(t){return ne(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ne(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){ne(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const n=bk(t.writeResults,t.commitTime),r=lr(t.commitTime);return this.listener.ra(r,n)}ia(){const t={};t.database=Cp(this.serializer),this.Q_(t)}ta(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>Sk(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{}class vV extends _V{constructor(t,n,r,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new Et(dt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(t,Ap(n,r),o,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Et(dt.UNKNOWN,l.toString())})}Yo(t,n,r,o,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(t,Ap(n,r),o,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Et(dt.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class EV{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?($r(n),this.ua=!1):vt("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="RemoteStore";class TV{constructor(t,n,r,o,l){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{r.enqueueAndForget(async()=>{jo(this)&&(vt(zo,"Restarting streams for network reachability change."),await async function(g){const m=kt(g);m.da.add(4),await _c(m),m.Va.set("Unknown"),m.da.delete(4),await cd(m)}(this))})}),this.Va=new EV(r,o)}}async function cd(e){if(jo(e))for(const t of e.Aa)await t(!0)}async function _c(e){for(const t of e.Aa)await t(!1)}function O1(e,t){const n=kt(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),Ey(n)?vy(n):Tl(n).N_()&&_y(n,t))}function yy(e,t){const n=kt(e),r=Tl(n);n.Ea.delete(t),r.N_()&&k1(n,t),n.Ea.size===0&&(r.N_()?r.k_():jo(n)&&n.Va.set("Unknown"))}function _y(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ot.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Tl(e).Z_(t)}function k1(e,t){e.ma.Ke(t),Tl(e).X_(t)}function vy(e){e.ma=new mk({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Tl(e).start(),e.Va.ca()}function Ey(e){return jo(e)&&!Tl(e).O_()&&e.Ea.size>0}function jo(e){return kt(e).da.size===0}function V1(e){e.ma=void 0}async function wV(e){e.Va.set("Online")}async function SV(e){e.Ea.forEach((t,n)=>{_y(e,t)})}async function bV(e,t){V1(e),Ey(e)?(e.Va.Pa(t),vy(e)):e.Va.set("Unknown")}async function AV(e,t,n){if(e.Va.set("Online"),t instanceof v1&&t.state===2&&t.cause)try{await async function(o,l){const c=l.cause;for(const d of l.targetIds)o.Ea.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ea.delete(d),o.ma.removeTarget(d))}(e,t)}catch(r){vt(zo,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Pf(e,r)}else if(t instanceof ff?e.ma.Xe(t):t instanceof _1?e.ma.ot(t):e.ma.nt(t),!n.isEqual(Ot.min()))try{const r=await N1(e.localStore);n.compareTo(r)>=0&&await function(l,c){const d=l.ma.It(c);return d.targetChanges.forEach((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const y=l.Ea.get(m);y&&l.Ea.set(m,y.withResumeToken(g.resumeToken,c))}}),d.targetMismatches.forEach((g,m)=>{const y=l.Ea.get(g);if(!y)return;l.Ea.set(g,y.withResumeToken(gn.EMPTY_BYTE_STRING,y.snapshotVersion)),k1(l,g);const v=new Ds(y.target,g,m,y.sequenceNumber);_y(l,v)}),l.remoteSyncer.applyRemoteEvent(d)}(e,n)}catch(r){vt(zo,"Failed to raise snapshot:",r),await Pf(e,r)}}async function Pf(e,t,n){if(!vl(t))throw t;e.da.add(1),await _c(e),e.Va.set("Offline"),n||(n=()=>N1(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{vt(zo,"Retrying IndexedDB access"),await n(),e.da.delete(1),await cd(e)})}function P1(e,t){return t().catch(n=>Pf(e,n,t))}async function hd(e){const t=kt(e),n=js(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:ry;for(;RV(t);)try{const o=await aV(t.localStore,r);if(o===null){t.Ia.length===0&&n.k_();break}r=o.batchId,CV(t,o)}catch(o){await Pf(t,o)}L1(t)&&U1(t)}function RV(e){return jo(e)&&e.Ia.length<10}function CV(e,t){e.Ia.push(t);const n=js(e);n.N_()&&n.ea&&n.ta(t.mutations)}function L1(e){return jo(e)&&!js(e).O_()&&e.Ia.length>0}function U1(e){js(e).start()}async function IV(e){js(e).ia()}async function xV(e){const t=js(e);for(const n of e.Ia)t.ta(n.mutations)}async function NV(e,t,n){const r=e.Ia.shift(),o=cy.from(r,t,n);await P1(e,()=>e.remoteSyncer.applySuccessfulWrite(o)),await hd(e)}async function DV(e,t){t&&js(e).ea&&await async function(r,o){if(function(c){return dk(c)&&c!==dt.ABORTED}(o.code)){const l=r.Ia.shift();js(r).L_(),await P1(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),await hd(r)}}(e,t),L1(e)&&U1(e)}async function rw(e,t){const n=kt(e);n.asyncQueue.verifyOperationInProgress(),vt(zo,"RemoteStore received new credentials");const r=jo(n);n.da.add(3),await _c(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await cd(n)}async function MV(e,t){const n=kt(e);t?(n.da.delete(2),await cd(n)):t||(n.da.add(2),await _c(n),n.Va.set("Unknown"))}function Tl(e){return e.fa||(e.fa=function(n,r,o){const l=kt(n);return l.oa(),new pV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(e.datastore,e.asyncQueue,{e_:wV.bind(null,e),n_:SV.bind(null,e),i_:bV.bind(null,e),Y_:AV.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),Ey(e)?vy(e):e.Va.set("Unknown")):(await e.fa.stop(),V1(e))})),e.fa}function js(e){return e.ga||(e.ga=function(n,r,o){const l=kt(n);return l.oa(),new yV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:IV.bind(null,e),i_:DV.bind(null,e),na:xV.bind(null,e),ra:NV.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await hd(e)):(await e.ga.stop(),e.Ia.length>0&&(vt(zo,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(t,n,r,o,l){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,o,l){const c=Date.now()+r,d=new Ty(t,n,c,o,l);return d.start(r),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Et(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wy(e,t){if($r("AsyncQueue",`${t}: ${e}`),vl(e))return new Et(dt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{static emptySet(t){return new Za(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Rt.comparator(n.key,r.key):(n,r)=>Rt.comparator(n.key,r.key),this.keyedMap=Pu(),this.sortedSet=new be(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Za)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Za;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(){this.pa=new be(Rt.comparator)}track(t){const n=t.doc.key,r=this.pa.get(n);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(n,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(n):t.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):Dt(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,r)=>{t.push(r)}),t}}class dl{constructor(t,n,r,o,l,c,d,g,m){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(t,n,r,o,l){const c=[];return n.forEach(d=>{c.push({type:0,doc:d})}),new dl(t,n,Za.emptySet(n),c,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&id(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class kV{constructor(){this.queries=ow(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=kt(n),l=o.queries;o.queries=ow(),l.forEach((c,d)=>{for(const g of d.Sa)g.onError(r)})})(this,new Et(dt.ABORTED,"Firestore shutting down"))}}function ow(){return new Fo(e=>s1(e),id)}async function VV(e,t){const n=kt(e);let r=3;const o=t.query;let l=n.queries.get(o);l?!l.Da()&&t.va()&&(r=2):(l=new OV,r=t.va()?0:1);try{switch(r){case 0:l.ba=await n.onListen(o,!0);break;case 1:l.ba=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(c){const d=wy(c,`Initialization of query '${Fa(t.query)}' failed`);return void t.onError(d)}n.queries.set(o,l),l.Sa.push(t),t.Fa(n.onlineState),l.ba&&t.Ma(l.ba)&&Sy(n)}async function PV(e,t){const n=kt(e),r=t.query;let o=3;const l=n.queries.get(r);if(l){const c=l.Sa.indexOf(t);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=t.va()?0:1:!l.Da()&&t.va()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function LV(e,t){const n=kt(e);let r=!1;for(const o of t){const l=o.query,c=n.queries.get(l);if(c){for(const d of c.Sa)d.Ma(o)&&(r=!0);c.ba=o}}r&&Sy(n)}function UV(e,t,n){const r=kt(e),o=r.queries.get(t);if(o)for(const l of o.Sa)l.onError(n);r.queries.delete(t)}function Sy(e){e.Ca.forEach(t=>{t.next()})}var Np,aw;(aw=Np||(Np={})).xa="default",aw.Cache="cache";class zV{constructor(t,n,r){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new dl(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=dl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==Np.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(t){this.key=t}}class B1{constructor(t){this.key=t}}class BV{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Yt(),this.mutatedKeys=Yt(),this.Za=o1(t),this.Xa=new Za(this.Za)}get eu(){return this.Ha}tu(t,n){const r=n?n.nu:new sw,o=n?n.Xa:this.Xa;let l=n?n.mutatedKeys:this.mutatedKeys,c=o,d=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((y,v)=>{const E=o.get(y),S=rd(this.query,v)?v:null,D=!!E&&this.mutatedKeys.has(E.key),V=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let M=!1;E&&S?E.data.isEqual(S.data)?D!==V&&(r.track({type:3,doc:S}),M=!0):this.ru(E,S)||(r.track({type:2,doc:S}),M=!0,(g&&this.Za(S,g)>0||m&&this.Za(S,m)<0)&&(d=!0)):!E&&S?(r.track({type:0,doc:S}),M=!0):E&&!S&&(r.track({type:1,doc:E}),M=!0,(g||m)&&(d=!0)),M&&(S?(c=c.add(S),l=V?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{Xa:c,nu:r,Cs:d,mutatedKeys:l}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,o){const l=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const c=t.nu.wa();c.sort((y,v)=>function(S,D){const V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt(20277,{Vt:M})}};return V(S)-V(D)}(y.type,v.type)||this.Za(y.doc,v.doc)),this.iu(r),o=o!=null&&o;const d=n&&!o?this.su():[],g=this.Ya.size===0&&this.current&&!o?1:0,m=g!==this.Ja;return this.Ja=g,c.length!==0||m?{snapshot:new dl(this.query,t.Xa,l,c,t.mutatedKeys,g===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new sw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Yt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return t.forEach(r=>{this.Ya.has(r)||n.push(new B1(r))}),this.Ya.forEach(r=>{t.has(r)||n.push(new z1(r))}),n}au(t){this.Ha=t.$s,this.Ya=Yt();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return dl.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const by="SyncEngine";class HV{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class qV{constructor(t){this.key=t,this.cu=!1}}class FV{constructor(t,n,r,o,l,c){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new Fo(d=>s1(d),id),this.Pu=new Map,this.Tu=new Set,this.Iu=new be(Rt.comparator),this.Eu=new Map,this.du=new dy,this.Au={},this.Ru=new Map,this.Vu=fl.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function jV(e,t,n=!0){const r=$1(e);let o;const l=r.hu.get(t);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.uu()):o=await H1(r,t,n,!0),o}async function GV(e,t){const n=$1(e);await H1(n,t,!0,!1)}async function H1(e,t,n,r){const o=await lV(e.localStore,ar(t)),l=o.targetId,c=e.sharedClientState.addLocalQueryTarget(l,n);let d;return r&&(d=await $V(e,t,l,c==="current",o.resumeToken)),e.isPrimaryClient&&n&&O1(e.remoteStore,o),d}async function $V(e,t,n,r,o){e.fu=(v,E,S)=>async function(V,M,B,F){let X=M.view.tu(B);X.Cs&&(X=await JT(V.localStore,M.query,!1).then(({documents:x})=>M.view.tu(x,X)));const z=F&&F.targetChanges.get(M.targetId),q=F&&F.targetMismatches.get(M.targetId)!=null,Z=M.view.applyChanges(X,V.isPrimaryClient,z,q);return uw(V,M.targetId,Z.ou),Z.snapshot}(e,v,E,S);const l=await JT(e.localStore,t,!0),c=new BV(t,l.$s),d=c.tu(l.documents),g=yc.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",o),m=c.applyChanges(d,e.isPrimaryClient,g);uw(e,n,m.ou);const y=new HV(t,n,c);return e.hu.set(t,y),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),m.snapshot}async function YV(e,t,n){const r=kt(e),o=r.hu.get(t),l=r.Pu.get(o.targetId);if(l.length>1)return r.Pu.set(o.targetId,l.filter(c=>!id(c,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Ip(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&yy(r.remoteStore,o.targetId),Dp(r,o.targetId)}).catch(_l)):(Dp(r,o.targetId),await Ip(r.localStore,o.targetId,!0))}async function KV(e,t){const n=kt(e),r=n.hu.get(t),o=n.Pu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yy(n.remoteStore,r.targetId))}async function XV(e,t,n){const r=n3(e);try{const o=await function(c,d){const g=kt(c),m=ye.now(),y=d.reduce((S,D)=>S.add(D.key),Yt());let v,E;return g.persistence.runTransaction("Locally write mutations","readwrite",S=>{let D=Yr(),V=Yt();return g.Bs.getEntries(S,y).next(M=>{D=M,D.forEach((B,F)=>{F.isValidDocument()||(V=V.add(B))})}).next(()=>g.localDocuments.getOverlayedDocuments(S,D)).next(M=>{v=M;const B=[];for(const F of d){const X=lk(F,v.get(F.key).overlayedDocument);X!=null&&B.push(new Ys(F.key,X,Qb(X.value.mapValue),Wn.exists(!0)))}return g.mutationQueue.addMutationBatch(S,m,B,d)}).next(M=>{E=M;const B=M.applyToLocalDocumentSet(v,V);return g.documentOverlayCache.saveOverlays(S,M.batchId,B)})}).then(()=>({batchId:E.batchId,changes:l1(v)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),function(c,d,g){let m=c.Au[c.currentUser.toKey()];m||(m=new be(Bt)),m=m.insert(d,g),c.Au[c.currentUser.toKey()]=m}(r,o.batchId,n),await vc(r,o.changes),await hd(r.remoteStore)}catch(o){const l=wy(o,"Failed to persist write");n.reject(l)}}async function q1(e,t){const n=kt(e);try{const r=await sV(n.localStore,t);t.targetChanges.forEach((o,l)=>{const c=n.Eu.get(l);c&&(ne(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.cu=!0:o.modifiedDocuments.size>0?ne(c.cu,14607):o.removedDocuments.size>0&&(ne(c.cu,42227),c.cu=!1))}),await vc(n,r,t)}catch(r){await _l(r)}}function lw(e,t,n){const r=kt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.hu.forEach((l,c)=>{const d=c.view.Fa(t);d.snapshot&&o.push(d.snapshot)}),function(c,d){const g=kt(c);g.onlineState=d;let m=!1;g.queries.forEach((y,v)=>{for(const E of v.Sa)E.Fa(d)&&(m=!0)}),m&&Sy(g)}(r.eventManager,t),o.length&&r.lu.Y_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function QV(e,t,n){const r=kt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const o=r.Eu.get(t),l=o&&o.key;if(l){let c=new be(Rt.comparator);c=c.insert(l,Tn.newNoDocument(l,Ot.min()));const d=Yt().add(l),g=new ld(Ot.min(),new Map,new be(Bt),c,d);await q1(r,g),r.Iu=r.Iu.remove(l),r.Eu.delete(t),Ay(r)}else await Ip(r.localStore,t,!1).then(()=>Dp(r,t,n)).catch(_l)}async function ZV(e,t){const n=kt(e),r=t.batch.batchId;try{const o=await rV(n.localStore,t);j1(n,r,null),F1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vc(n,o)}catch(o){await _l(o)}}async function WV(e,t,n){const r=kt(e);try{const o=await function(c,d){const g=kt(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return g.mutationQueue.lookupMutationBatch(m,d).next(v=>(ne(v!==null,37113),y=v.keys(),g.mutationQueue.removeMutationBatch(m,v))).next(()=>g.mutationQueue.performConsistencyCheck(m)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(m,y,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>g.localDocuments.getDocuments(m,y))})}(r.localStore,t);j1(r,t,n),F1(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await vc(r,o)}catch(o){await _l(o)}}function F1(e,t){(e.Ru.get(t)||[]).forEach(n=>{n.resolve()}),e.Ru.delete(t)}function j1(e,t,n){const r=kt(e);let o=r.Au[r.currentUser.toKey()];if(o){const l=o.get(t);l&&(n?l.reject(n):l.resolve(),o=o.remove(t)),r.Au[r.currentUser.toKey()]=o}}function Dp(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(r=>{e.du.containsKey(r)||G1(e,r)})}function G1(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);n!==null&&(yy(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),Ay(e))}function uw(e,t,n){for(const r of n)r instanceof z1?(e.du.addReference(r.key,t),JV(e,r)):r instanceof B1?(vt(by,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||G1(e,r.key)):Dt(19791,{pu:r})}function JV(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(vt(by,"New document in limbo: "+n),e.Tu.add(r),Ay(e))}function Ay(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new Rt(pe.fromString(t)),r=e.Vu.next();e.Eu.set(r,new qV(n)),e.Iu=e.Iu.insert(n,r),O1(e.remoteStore,new Ds(ar(i1(n.path)),r,"TargetPurposeLimboResolution",td.le))}}async function vc(e,t,n){const r=kt(e),o=[],l=[],c=[];r.hu.isEmpty()||(r.hu.forEach((d,g)=>{c.push(r.fu(g,t,n).then(m=>{var y;if((m||n)&&r.isPrimaryClient){const v=m?!m.fromCache:(y=n?.targetChanges.get(g.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(m){o.push(m);const v=my.Rs(g.targetId,m);l.push(v)}}))}),await Promise.all(c),r.lu.Y_(o),await async function(g,m){const y=kt(g);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>gt.forEach(m,E=>gt.forEach(E.ds,S=>y.persistence.referenceDelegate.addReference(v,E.targetId,S)).next(()=>gt.forEach(E.As,S=>y.persistence.referenceDelegate.removeReference(v,E.targetId,S)))))}catch(v){if(!vl(v))throw v;vt(py,"Failed to update sequence numbers: "+v)}for(const v of m){const E=v.targetId;if(!v.fromCache){const S=y.xs.get(E),D=S.snapshotVersion,V=S.withLastLimboFreeSnapshotVersion(D);y.xs=y.xs.insert(E,V)}}}(r.localStore,l))}async function t3(e,t){const n=kt(e);if(!n.currentUser.isEqual(t)){vt(by,"User change. New user:",t.toKey());const r=await x1(n.localStore,t);n.currentUser=t,function(l,c){l.Ru.forEach(d=>{d.forEach(g=>{g.reject(new Et(dt.CANCELLED,c))})}),l.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await vc(n,r.ks)}}function e3(e,t){const n=kt(e),r=n.Eu.get(t);if(r&&r.cu)return Yt().add(r.key);{let o=Yt();const l=n.Pu.get(t);if(!l)return o;for(const c of l){const d=n.hu.get(c);o=o.unionWith(d.view.eu)}return o}}function $1(e){const t=kt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=q1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=e3.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=QV.bind(null,t),t.lu.Y_=LV.bind(null,t.eventManager),t.lu.gu=UV.bind(null,t.eventManager),t}function n3(e){const t=kt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ZV.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=WV.bind(null,t),t}class Lf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ud(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return iV(this.persistence,new tV,t.initialUser,this.serializer)}Su(t){return new I1(gy.fi,this.serializer)}bu(t){return new cV}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lf.provider={build:()=>new Lf};class i3 extends Lf{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){ne(this.persistence.referenceDelegate instanceof Vf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new zk(r,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new I1(r=>Vf.fi(r,n),this.serializer)}}class Mp{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=t3.bind(null,this.syncEngine),await MV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new kV}()}createDatastore(t){const n=ud(t.databaseInfo.databaseId),r=function(l){return new mV(l)}(t.databaseInfo);return function(l,c,d,g){return new vV(l,c,d,g)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,o,l,c,d){return new TV(r,o,l,c,d)}(this.localStore,this.datastore,t.asyncQueue,n=>lw(this.syncEngine,n,0),function(){return nw.C()?new nw:new hV}())}createSyncEngine(t,n){return function(o,l,c,d,g,m,y){const v=new FV(o,l,c,d,g,m);return y&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(o){const l=kt(o);vt(zo,"RemoteStore shutting down."),l.da.add(5),await _c(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Mp.provider={build:()=>new Mp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):$r("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="FirestoreClient";class s3{constructor(t,n,r,o,l){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=En.UNAUTHENTICATED,this.clientId=Bb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{vt(Gs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(vt(Gs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=wy(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Gm(e,t){e.asyncQueue.verifyOperationInProgress(),vt(Gs,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async o=>{r.isEqual(o)||(await x1(t.localStore,o),r=o)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function cw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await o3(e);vt(Gs,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>rw(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,o)=>rw(t.remoteStore,o)),e._onlineComponents=t}async function o3(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){vt(Gs,"Using user provided OfflineComponentProvider");try{await Gm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(o){return o.name==="FirebaseError"?o.code===dt.FAILED_PRECONDITION||o.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;ll("Error using user provided cache. Falling back to memory cache: "+n),await Gm(e,new Lf)}}else vt(Gs,"Using default OfflineComponentProvider"),await Gm(e,new i3(void 0));return e._offlineComponents}async function Y1(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(vt(Gs,"Using user provided OnlineComponentProvider"),await cw(e,e._uninitializedComponentsProvider._online)):(vt(Gs,"Using default OnlineComponentProvider"),await cw(e,new Mp))),e._onlineComponents}function a3(e){return Y1(e).then(t=>t.syncEngine)}async function l3(e){const t=await Y1(e),n=t.eventManager;return n.onListen=jV.bind(null,t.syncEngine),n.onUnlisten=YV.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=GV.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=KV.bind(null,t.syncEngine),n}function u3(e,t,n={}){const r=new Ls;return e.asyncQueue.enqueueAndForget(async()=>function(l,c,d,g,m){const y=new r3({next:E=>{y.xu(),c.enqueueAndForget(()=>PV(l,v)),E.fromCache&&g.source==="server"?m.reject(new Et(dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(E)},error:E=>m.reject(E)}),v=new zV(d,y,{includeMetadataChanges:!0,Qa:!0});return VV(l,v)}(await l3(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(e,t,n){if(!n)throw new Et(dt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function c3(e,t,n,r){if(t===!0&&r===!0)throw new Et(dt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function fw(e){if(!Rt.isDocumentKey(e))throw new Et(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function dw(e){if(Rt.isDocumentKey(e))throw new Et(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function fd(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Dt(12329,{type:typeof e})}function Bo(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Et(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fd(e);throw new Et(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="firestore.googleapis.com",gw=!0;class mw{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Et(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Q1,this.ssl=gw}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:gw;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=C1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Lk)throw new Et(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}c3("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=K1((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Et(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Et(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Et(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class dd{constructor(t,n,r,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Et(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Et(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mw(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new g4;switch(r.type){case"firstParty":return new _4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Et(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=hw.get(n);r&&(vt("ComponentProvider","Removing Datastore"),hw.delete(n),r.terminate())}(this),Promise.resolve()}}function h3(e,t,n,r={}){var o;e=Bo(e,dd);const l=ml(t),c=e._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:e._getEmulatorOptions()}),g=`${t}:${n}`;l&&(Sb(`https://${g}`),bb("Firestore",!0)),c.host!==Q1&&c.host!==g&&ll("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:g,ssl:l,emulatorOptions:r});if(!Po(m,d)&&(e._setSettings(m),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=En.MOCK_USER;else{y=zM(r.mockUserToken,(o=e._app)===null||o===void 0?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Et(dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new En(E)}e._authCredentials=new m4(new Ub(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Go(this.firestore,t,this._query)}}class Jn{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Us(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Jn(this.firestore,t,this._key)}}class Us extends Go{constructor(t,n,r){super(t,n,i1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Jn(this.firestore,null,new Rt(t))}withConverter(t){return new Us(this.firestore,t,this._path)}}function Ry(e,t,...n){if(e=Ye(e),X1("collection","path",t),e instanceof dd){const r=pe.fromString(t,...n);return dw(r),new Us(e,null,r)}{if(!(e instanceof Jn||e instanceof Us))throw new Et(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(pe.fromString(t,...n));return dw(r),new Us(e.firestore,null,r)}}function wl(e,t,...n){if(e=Ye(e),arguments.length===1&&(t=Bb.newId()),X1("doc","path",t),e instanceof dd){const r=pe.fromString(t,...n);return fw(r),new Jn(e,null,new Rt(r))}{if(!(e instanceof Jn||e instanceof Us))throw new Et(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(pe.fromString(t,...n));return fw(r),new Jn(e.firestore,e instanceof Us?e.converter:null,new Rt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="AsyncQueue";class yw{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new D1(this,"async_queue_retry"),this.rc=()=>{const r=jm();r&&vt(pw,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const n=jm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=jm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Ls;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!vl(t))throw t;vt(pw,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,$r("INTERNAL UNHANDLED ERROR: ",_w(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(t,n,r){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const o=Ty.createAndSchedule(this,t,n,r,l=>this.uc(l));return this.Zu.push(o),o}oc(){this.Xu&&Dt(47125,{cc:_w(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function _w(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Ec extends dd{constructor(t,n,r,o){super(t,n,r,o),this.type="firestore",this._queue=new yw,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new yw(t),this._firestoreClient=void 0,await t}}}function f3(e,t){const n=typeof e=="object"?e:Ib(),r=typeof e=="string"?e:xf,o=ny(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const l=LM("firestore");l&&h3(o,...l)}return o}function Cy(e){if(e._terminated)throw new Et(dt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||d3(e),e._firestoreClient}function d3(e){var t,n,r;const o=e._freezeSettings(),l=function(d,g,m,y){return new O4(d,g,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,K1(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,o);e._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),e._firestoreClient=new s3(e._authCredentials,e._appCheckCredentials,e._queue,l,e._componentsProvider&&function(d){const g=d?._online.build();return{_offline:d?._offline.build(g),_online:g}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new gl(gn.fromBase64String(t))}catch(n){throw new Et(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new gl(gn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Et(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Et(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Et(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Bt(this._lat,t._lat)||Bt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,o){if(r.length!==o.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==o[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=/^__.*__$/;class m3{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Ys(t,this.data,this.fieldMask,n,this.fieldTransforms):new pc(t,this.data,n,this.fieldTransforms)}}class Z1{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Ys(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function W1(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt(40011,{Ic:e})}}class Dy{constructor(t,n,r,o,l,c){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new Dy(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.dc({path:r,Rc:!1});return o.Vc(t),o}mc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return Uf(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(W1(this.Ic)&&g3.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class p3{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||ud(t)}bc(t,n,r,o=!1){return new Dy({Ic:t,methodName:n,wc:r,path:dn.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function My(e){const t=e._freezeSettings(),n=ud(e._databaseId);return new p3(e._databaseId,!!t.ignoreUndefinedProperties,n)}function J1(e,t,n,r,o,l={}){const c=e.bc(l.merge||l.mergeFields?2:0,t,n,o);Oy("Data must be an object, but it was:",c,r);const d=tA(r,c);let g,m;if(l.merge)g=new Zn(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const E=Op(t,v,n);if(!c.contains(E))throw new Et(dt.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);nA(y,E)||y.push(E)}g=new Zn(y),m=c.fieldTransforms.filter(v=>g.covers(v.field))}else g=null,m=c.fieldTransforms;return new m3(new Pn(d),g,m)}class md extends Iy{_toFieldTransform(t){if(t.Ic!==2)throw t.Ic===1?t.gc(`${this._methodName}() can only appear at the top level of your update data`):t.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof md}}function y3(e,t,n,r){const o=e.bc(1,t,n);Oy("Data must be an object, but it was:",o,r);const l=[],c=Pn.empty();$s(r,(g,m)=>{const y=ky(t,g,n);m=Ye(m);const v=o.mc(y);if(m instanceof md)l.push(y);else{const E=Tc(m,v);E!=null&&(l.push(y),c.set(y,E))}});const d=new Zn(l);return new Z1(c,d,o.fieldTransforms)}function _3(e,t,n,r,o,l){const c=e.bc(1,t,n),d=[Op(t,r,n)],g=[o];if(l.length%2!=0)throw new Et(dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)d.push(Op(t,l[E])),g.push(l[E+1]);const m=[],y=Pn.empty();for(let E=d.length-1;E>=0;--E)if(!nA(m,d[E])){const S=d[E];let D=g[E];D=Ye(D);const V=c.mc(S);if(D instanceof md)m.push(S);else{const M=Tc(D,V);M!=null&&(m.push(S),y.set(S,M))}}const v=new Zn(m);return new Z1(y,v,c.fieldTransforms)}function v3(e,t,n,r=!1){return Tc(n,e.bc(r?4:3,t))}function Tc(e,t){if(eA(e=Ye(e)))return Oy("Unsupported field value:",t,e),tA(e,t);if(e instanceof Iy)return function(r,o){if(!W1(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(r,o){const l=[];let c=0;for(const d of r){let g=Tc(d,o.fc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}}(e,t)}return function(r,o){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nk(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=ye.fromDate(r);return{timestampValue:kf(o.serializer,l)}}if(r instanceof ye){const l=new ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kf(o.serializer,l)}}if(r instanceof xy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gl)return{bytesValue:E1(o.serializer,r._byteString)};if(r instanceof Jn){const l=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw o.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:fy(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ny)return function(c,d){return{mapValue:{fields:{[Kb]:{stringValue:Xb},[Nf]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw d.gc("VectorValues must only contain numeric values.");return uy(d.serializer,m)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${fd(r)}`)}(e,t)}function tA(e,t){const n={};return qb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$s(e,(r,o)=>{const l=Tc(o,t.Ac(r));l!=null&&(n[r]=l)}),{mapValue:{fields:n}}}function eA(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ye||e instanceof xy||e instanceof gl||e instanceof Jn||e instanceof Iy||e instanceof Ny)}function Oy(e,t,n){if(!eA(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const r=fd(n);throw r==="an object"?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function Op(e,t,n){if((t=Ye(t))instanceof gd)return t._internalPath;if(typeof t=="string")return ky(e,t);throw Uf("Field path arguments must be of type string or ",e,!1,void 0,n)}const E3=new RegExp("[~\\*/\\[\\]]");function ky(e,t,n){if(t.search(E3)>=0)throw Uf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new gd(...t.split("."))._internalPath}catch{throw Uf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Uf(e,t,n,r,o){const l=r&&!r.isEmpty(),c=o!==void 0;let d=`Function ${t}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${r}`),c&&(g+=` in document ${o}`),g+=")"),new Et(dt.INVALID_ARGUMENT,d+e+g)}function nA(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(t,n,r,o,l){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new T3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(pd("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class T3 extends iA{data(){return super.data()}}function pd(e,t){return typeof t=="string"?ky(e,t):t instanceof gd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Et(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vy{}class rA extends Vy{}function S3(e,t,...n){let r=[];t instanceof Vy&&r.push(t),r=r.concat(n),function(l){const c=l.filter(g=>g instanceof Py).length,d=l.filter(g=>g instanceof yd).length;if(c>1||c>0&&d>0)throw new Et(dt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)e=o._apply(e);return e}class yd extends rA{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new yd(t,n,r)}_apply(t){const n=this._parse(t);return sA(t._query,n),new Go(t.firestore,t.converter,wp(t._query,n))}_parse(t){const n=My(t.firestore);return function(l,c,d,g,m,y,v){let E;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Et(dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Ew(v,y);const D=[];for(const V of v)D.push(vw(g,l,V));E={arrayValue:{values:D}}}else E=vw(g,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Ew(v,y),E=v3(d,c,v,y==="in"||y==="not-in");return Be.create(m,y,E)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function b3(e,t,n){const r=t,o=pd("where",e);return yd._create(o,r,n)}class Py extends Vy{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Py(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ki.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(o,l){let c=o;const d=l.getFlattenedFilters();for(const g of d)sA(c,g),c=wp(c,g)}(t._query,n),new Go(t.firestore,t.converter,wp(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ly extends rA{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Ly(t,n)}_apply(t){const n=function(o,l,c){if(o.startAt!==null)throw new Et(dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Et(dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rc(l,c)}(t._query,this._field,this._direction);return new Go(t.firestore,t.converter,function(o,l){const c=o.explicitOrderBy.concat([l]);return new El(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(t._query,n))}}function A3(e,t="asc"){const n=t,r=pd("orderBy",e);return Ly._create(r,n)}function vw(e,t,n){if(typeof(n=Ye(n))=="string"){if(n==="")throw new Et(dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!r1(t)&&n.indexOf("/")!==-1)throw new Et(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(pe.fromString(n));if(!Rt.isDocumentKey(r))throw new Et(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kT(e,new Rt(r))}if(n instanceof Jn)return kT(e,n._key);throw new Et(dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fd(n)}.`)}function Ew(e,t){if(!Array.isArray(e)||e.length===0)throw new Et(dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function sA(e,t){const n=function(o,l){for(const c of o)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(e.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Et(dt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Et(dt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class R3{convertValue(t,n="none"){switch(Fs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Oe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(qs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Dt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return $s(t,(o,l)=>{r[o]=this.convertValue(l,n)}),r}convertVectorValue(t){var n,r,o;const l=(o=(r=(n=t.fields)===null||n===void 0?void 0:n[Nf].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(c=>Oe(c.doubleValue));return new Ny(l)}convertGeoPoint(t){return new xy(Oe(t.latitude),Oe(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=nd(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ec(t));default:return null}}convertTimestamp(t){const n=Hs(t);return new ye(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=pe.fromString(t);ne(R1(r),9688,{name:t});const o=new nc(r.get(1),r.get(3)),l=new Rt(r.popFirst(5));return o.isEqual(n)||$r(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class C3 extends iA{constructor(t,n,r,o,l,c){super(t,n,r,o,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new df(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(pd("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class df extends C3{data(t={}){return super.data(t)}}class I3{constructor(t,n,r,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new ef(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new df(this._firestore,this._userDataWriter,r.key,r,new ef(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Et(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(d=>{const g=new df(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ef(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const g=new df(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ef(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,y=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:x3(d.type),doc:g,oldIndex:m,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function x3(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt(61501,{type:e})}}class N3 extends R3{constructor(t){super(),this.firestore=t}convertBytes(t){return new gl(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Jn(this.firestore,null,n)}}function Uy(e){e=Bo(e,Go);const t=Bo(e.firestore,Ec),n=Cy(t),r=new N3(t);return w3(e._query),u3(n,e._query).then(o=>new I3(t,r,e,o))}function zy(e,t,n){e=Bo(e,Jn);const r=Bo(e.firestore,Ec),o=oA(e.converter,t,n);return By(r,[J1(My(r),"setDoc",e._key,o,e.converter!==null,n).toMutation(e._key,Wn.none())])}function D3(e){return By(Bo(e.firestore,Ec),[new ad(e._key,Wn.none())])}function By(e,t){return function(r,o){const l=new Ls;return r.asyncQueue.enqueueAndForget(async()=>XV(await a3(r),o,l)),l.promise}(Cy(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=My(t)}set(t,n,r){this._verifyNotCommitted();const o=$m(t,this._firestore),l=oA(o.converter,n,r),c=J1(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,r);return this._mutations.push(c.toMutation(o._key,Wn.none())),this}update(t,n,r,...o){this._verifyNotCommitted();const l=$m(t,this._firestore);let c;return c=typeof(n=Ye(n))=="string"||n instanceof gd?_3(this._dataReader,"WriteBatch.update",l._key,n,r,o):y3(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(c.toMutation(l._key,Wn.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=$m(t,this._firestore);return this._mutations=this._mutations.concat(new ad(n._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Et(dt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $m(e,t){if((e=Ye(e)).firestore!==t)throw new Et(dt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(e){return Cy(e=Bo(e,Ec)),new M3(e,t=>By(e,t))}(function(t,n=!0){(function(o){yl=o})(pl),al(new Lo("firestore",(r,{instanceIdentifier:o,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Ec(new p4(r.getProvider("auth-internal")),new v4(c,r.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Et(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nc(m.options.projectId,y)}(c,o),c);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),Vs(wT,ST,t),Vs(wT,ST,"esm2017")})();function Hy(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function lA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const O3=lA,uA=new gc("auth","Firebase",lA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf=new ty("@firebase/auth");function k3(e,...t){zf.logLevel<=$t.WARN&&zf.warn(`Auth (${pl}): ${e}`,...t)}function gf(e,...t){zf.logLevel<=$t.ERROR&&zf.error(`Auth (${pl}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(e,...t){throw qy(e,...t)}function ur(e,...t){return qy(e,...t)}function cA(e,t,n){const r=Object.assign(Object.assign({},O3()),{[t]:n});return new gc("auth","Firebase",r).create(t,{appName:e.name})}function qr(e){return cA(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qy(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return uA.create(e,...t)}function Nt(e,t,...n){if(!e)throw qy(t,...n)}function zr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw gf(t),new Error(t)}function Kr(e,t){e||zr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function V3(){return Tw()==="http:"||Tw()==="https:"}function Tw(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(V3()||GM()||"connection"in navigator)?navigator.onLine:!0}function L3(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(t,n){this.shortDelay=t,this.longDelay=n,Kr(n>t,"Short delay should be less than long delay!"),this.isMobile=qM()||$M()}get(){return P3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(e,t){Kr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],B3=new wc(3e4,6e4);function Ks(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Xs(e,t,n,r,o={}){return fA(e,o,async()=>{let l={},c={};r&&(t==="GET"?c=r:l={body:JSON.stringify(r)});const d=mc(Object.assign({key:e.config.apiKey},c)).slice(1),g=await e._getAdditionalHeaders();g["Content-Type"]="application/json",e.languageCode&&(g["X-Firebase-Locale"]=e.languageCode);const m=Object.assign({method:t,headers:g},l);return jM()||(m.referrerPolicy="no-referrer"),e.emulatorConfig&&ml(e.emulatorConfig.host)&&(m.credentials="include"),hA.fetch()(await dA(e,e.config.apiHost,n,d),m)})}async function fA(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},U3),t);try{const o=new q3(e),l=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw nf(e,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[g,m]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw nf(e,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw nf(e,"email-already-in-use",c);if(g==="USER_DISABLED")throw nf(e,"user-disabled",c);const y=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw cA(e,y,m);Vi(e,y)}}catch(o){if(o instanceof Xr)throw o;Vi(e,"network-request-failed",{message:String(o)})}}async function Sc(e,t,n,r,o={}){const l=await Xs(e,t,n,r,o);return"mfaPendingCredential"in l&&Vi(e,"multi-factor-auth-required",{_serverResponse:l}),l}async function dA(e,t,n,r){const o=`${t}${n}?${r}`,l=e,c=l.config.emulator?Fy(e.config,o):`${e.config.apiScheme}://${o}`;return z3.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function H3(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class q3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ur(this.auth,"network-request-failed")),B3.get())})}}function nf(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=ur(e,t,r);return o.customData._tokenResponse=n,o}function ww(e){return e!==void 0&&e.enterprise!==void 0}class F3{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return H3(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function j3(e,t){return Xs(e,"GET","/v2/recaptchaConfig",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G3(e,t){return Xs(e,"POST","/v1/accounts:delete",t)}async function Bf(e,t){return Xs(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function $3(e,t=!1){const n=Ye(e),r=await n.getIdToken(t),o=jy(r);Nt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l?.sign_in_provider;return{claims:o,token:r,authTime:Fu(Ym(o.auth_time)),issuedAtTime:Fu(Ym(o.iat)),expirationTime:Fu(Ym(o.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Ym(e){return Number(e)*1e3}function jy(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return gf("JWT malformed, contained fewer than 3 sections"),null;try{const o=vb(n);return o?JSON.parse(o):(gf("Failed to decode base64 JWT payload"),null)}catch(o){return gf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Sw(e){const t=jy(e);return Nt(t,"internal-error"),Nt(typeof t.exp<"u","internal-error"),Nt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Xr&&Y3(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function Y3({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fu(this.lastLoginAt),this.creationTime=Fu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hf(e){var t;const n=e.auth,r=await e.getIdToken(),o=await ac(e,Bf(n,{idToken:r}));Nt(o?.users.length,n,"internal-error");const l=o.users[0];e._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?gA(l.providerUserInfo):[],d=Q3(e.providerData,c),g=e.isAnonymous,m=!(e.email&&l.passwordHash)&&!d?.length,y=g?m:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Vp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(e,v)}async function X3(e){const t=Ye(e);await Hf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Q3(e,t){return[...e.filter(r=>!t.some(o=>o.providerId===r.providerId)),...t]}function gA(e){return e.map(t=>{var{providerId:n}=t,r=Hy(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(e,t){const n=await fA(e,{},async()=>{const r=mc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:l}=e.config,c=await dA(e,o,"/v1/token",`key=${l}`),d=await e._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:d,body:r};return e.emulatorConfig&&ml(e.emulatorConfig.host)&&(g.credentials="include"),hA.fetch()(c,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function W3(e,t){return Xs(e,"POST","/v2/accounts:revokeToken",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Nt(t.idToken,"internal-error"),Nt(typeof t.idToken<"u","internal-error"),Nt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Sw(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Nt(t.length!==0,"internal-error");const n=Sw(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Nt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:o,expiresIn:l}=await Z3(t,n);this.updateTokensAndExpiration(r,o,Number(l))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:o,expirationTime:l}=n,c=new Wa;return r&&(Nt(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),o&&(Nt(typeof o=="string","internal-error",{appName:t}),c.accessToken=o),l&&(Nt(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Wa,this.toJSON())}_performRefresh(){return zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(e,t){Nt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Oi{constructor(t){var{uid:n,auth:r,stsTokenManager:o}=t,l=Hy(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new K3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Vp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await ac(this,this.stsTokenManager.getToken(this.auth,t));return Nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return $3(this,t)}reload(){return X3(this)}_assign(t){this!==t&&(Nt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Oi(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await Hf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ei(this.auth.app))return Promise.reject(qr(this.auth));const t=await this.getIdToken();return await ac(this,G3(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,o,l,c,d,g,m,y;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,E=(o=n.email)!==null&&o!==void 0?o:void 0,S=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,D=(c=n.photoURL)!==null&&c!==void 0?c:void 0,V=(d=n.tenantId)!==null&&d!==void 0?d:void 0,M=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,B=(m=n.createdAt)!==null&&m!==void 0?m:void 0,F=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:X,emailVerified:z,isAnonymous:q,providerData:Z,stsTokenManager:x}=n;Nt(X&&x,t,"internal-error");const b=Wa.fromJSON(this.name,x);Nt(typeof X=="string",t,"internal-error"),Ss(v,t.name),Ss(E,t.name),Nt(typeof z=="boolean",t,"internal-error"),Nt(typeof q=="boolean",t,"internal-error"),Ss(S,t.name),Ss(D,t.name),Ss(V,t.name),Ss(M,t.name),Ss(B,t.name),Ss(F,t.name);const C=new Oi({uid:X,auth:t,email:E,emailVerified:z,displayName:v,isAnonymous:q,photoURL:D,phoneNumber:S,tenantId:V,stsTokenManager:b,createdAt:B,lastLoginAt:F});return Z&&Array.isArray(Z)&&(C.providerData=Z.map(P=>Object.assign({},P))),M&&(C._redirectEventId=M),C}static async _fromIdTokenResponse(t,n,r=!1){const o=new Wa;o.updateFromServerResponse(n);const l=new Oi({uid:n.localId,auth:t,stsTokenManager:o,isAnonymous:r});return await Hf(l),l}static async _fromGetAccountInfoResponse(t,n,r){const o=n.users[0];Nt(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?gA(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!l?.length,d=new Wa;d.updateFromIdToken(r);const g=new Oi({uid:o.localId,auth:t,stsTokenManager:d,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Vp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,m),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=new Map;function Br(e){Kr(e instanceof Function,"Expected a class definition");let t=bw.get(e);return t?(Kr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,bw.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}mA.type="NONE";const Aw=mA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(e,t,n){return`firebase:${e}:${t}:${n}`}class Ja{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:o,name:l}=this.auth;this.fullUserKey=mf(this.userKey,o.apiKey,l),this.fullPersistenceKey=mf("persistence",o.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Bf(this.auth,{idToken:t}).catch(()=>{});return n?Oi._fromGetAccountInfoResponse(this.auth,n,t):null}return Oi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Ja(Br(Aw),t,r);const o=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||Br(Aw);const c=mf(r,t.config.apiKey,t.name);let d=null;for(const m of n)try{const y=await m._get(c);if(y){let v;if(typeof y=="string"){const E=await Bf(t,{idToken:y}).catch(()=>{});if(!E)break;v=await Oi._fromGetAccountInfoResponse(t,E,y)}else v=Oi._fromJSON(t,y);m!==l&&(d=v),l=m;break}}catch{}const g=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Ja(l,t,r):(l=g[0],d&&await l._set(c,d.toJSON()),await Promise.all(n.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new Ja(l,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(vA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(pA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(TA(t))return"Blackberry";if(wA(t))return"Webos";if(yA(t))return"Safari";if((t.includes("chrome/")||_A(t))&&!t.includes("edge/"))return"Chrome";if(EA(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function pA(e=wn()){return/firefox\//i.test(e)}function yA(e=wn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _A(e=wn()){return/crios\//i.test(e)}function vA(e=wn()){return/iemobile/i.test(e)}function EA(e=wn()){return/android/i.test(e)}function TA(e=wn()){return/blackberry/i.test(e)}function wA(e=wn()){return/webos/i.test(e)}function Gy(e=wn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function J3(e=wn()){var t;return Gy(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function tP(){return YM()&&document.documentMode===10}function SA(e=wn()){return Gy(e)||EA(e)||wA(e)||TA(e)||/windows phone/i.test(e)||vA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(e,t=[]){let n;switch(e){case"Browser":n=Rw(wn());break;case"Worker":n=`${Rw(wn())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${pl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=l=>new Promise((c,d)=>{try{const g=t(l);c(g)}catch(g){d(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nP(e,t={}){return Xs(e,"GET","/v2/passwordPolicy",Ks(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=6;class rP{constructor(t){var n,r,o,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:iP,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,o,l,c,d;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,g),this.validatePasswordCharacterOptions(t,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(c=g.containsNumericCharacter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),g}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),o&&(n.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<t.length;o++)r=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,o,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(t,n,r,o){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cw(this),this.idTokenSubscription=new Cw(this),this.beforeStateQueue=new eP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Br(n)),this._initializationPromise=this.queue(async()=>{var r,o,l;if(!this._deleted&&(this.persistenceManager=await Ja.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Bf(this,{idToken:t}),r=await Oi._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Ei(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=o?._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===d)&&g?.user&&(o=g.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Hf(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=L3()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ei(this.app))return Promise.reject(qr(this));const n=t?Ye(t):null;return n&&Nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Nt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ei(this.app)?Promise.reject(qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ei(this.app)?Promise.reject(qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Br(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await nP(this),n=new rP(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new gc("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await W3(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Br(t)||this._popupRedirectResolver;Nt(n,this,"argument-error"),this.redirectPersistenceManager=await Ja.create(this,[Br(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,o){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Nt(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,r,o);return()=>{c=!0,g()}}else{const g=t.addObserver(n);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=bA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var t;if(Ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n?.error&&k3(`Error while retrieving App Check token: ${n.error}`),n?.token}}function $o(e){return Ye(e)}class Cw{constructor(t){this.auth=t,this.observer=null,this.addObserver=eO(n=>this.observer=n)}get next(){return Nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _d={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oP(e){_d=e}function AA(e){return _d.loadJS(e)}function aP(){return _d.recaptchaEnterpriseScript}function lP(){return _d.gapiScript}function uP(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class cP{constructor(){this.enterprise=new hP}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class hP{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const fP="recaptcha-enterprise",RA="NO_RECAPTCHA";class dP{constructor(t){this.type=fP,this.auth=$o(t)}async verify(t="verify",n=!1){async function r(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{j3(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new F3(g);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(g=>{d(g)})})}function o(l,c,d){const g=window.grecaptcha;ww(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:t}).then(m=>{c(m)}).catch(()=>{c(RA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cP().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(d=>{if(!n&&ww(window.grecaptcha))o(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=aP();g.length!==0&&(g+=d),AA(g).then(()=>{o(d,l,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function Iw(e,t,n,r=!1,o=!1){const l=new dP(e);let c;if(o)c=RA;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const d=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const g=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const g=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Pp(e,t,n,r,o){var l;if(!((l=e._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Iw(e,t,n,n==="getOobCode");return r(e,c)}else return r(e,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Iw(e,t,n,n==="getOobCode");return r(e,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(e,t){const n=ny(e,"auth");if(n.isInitialized()){const o=n.getImmediate(),l=n.getOptions();if(Po(l,t??{}))return o;Vi(o,"already-initialized")}return n.initialize({options:t})}function mP(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Br);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function pP(e,t,n){const r=$o(e);Nt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!1,l=CA(t),{host:c,port:d}=yP(t),g=d===null?"":`:${d}`,m={url:`${l}//${c}${g}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Nt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Nt(Po(m,r.config.emulator)&&Po(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,ml(c)?(Sb(`${l}//${c}${g}`),bb("Auth",!0)):_P()}function CA(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function yP(e){const t=CA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const l=o[1];return{host:l,port:xw(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:xw(c)}}}function xw(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function _P(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return zr("not implemented")}_getIdTokenResponse(t){return zr("not implemented")}_linkToIdToken(t,n){return zr("not implemented")}_getReauthenticationResolver(t){return zr("not implemented")}}async function vP(e,t){return Xs(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EP(e,t){return Sc(e,"POST","/v1/accounts:signInWithPassword",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TP(e,t){return Sc(e,"POST","/v1/accounts:signInWithEmailLink",Ks(e,t))}async function wP(e,t){return Sc(e,"POST","/v1/accounts:signInWithEmailLink",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends $y{constructor(t,n,r,o=null){super("password",r),this._email=t,this._password=n,this._tenantId=o}static _fromEmailAndPassword(t,n){return new lc(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new lc(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pp(t,n,"signInWithPassword",EP);case"emailLink":return TP(t,{email:this._email,oobCode:this._password});default:Vi(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pp(t,r,"signUpPassword",vP);case"emailLink":return wP(t,{idToken:n,email:this._email,oobCode:this._password});default:Vi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(e,t){return Sc(e,"POST","/v1/accounts:signInWithIdp",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP="http://localhost";class Ho extends $y{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ho(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Vi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:o}=n,l=Hy(n,["providerId","signInMethod"]);if(!r||!o)return null;const c=new Ho(r,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const n=this.buildRequest();return tl(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,tl(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,tl(t,n)}buildRequest(){const t={requestUri:SP,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=mc(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AP(e){const t=Ou(ku(e)).link,n=t?Ou(ku(t)).deep_link_id:null,r=Ou(ku(e)).deep_link_id;return(r?Ou(ku(r)).link:null)||r||n||t||e}class Yy{constructor(t){var n,r,o,l,c,d;const g=Ou(ku(t)),m=(n=g.apiKey)!==null&&n!==void 0?n:null,y=(r=g.oobCode)!==null&&r!==void 0?r:null,v=bP((o=g.mode)!==null&&o!==void 0?o:null);Nt(m&&y&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=y,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=g.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=g.tenantId)!==null&&d!==void 0?d:null}static parseLink(t){const n=AP(t);try{return new Yy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.providerId=Sl.PROVIDER_ID}static credential(t,n){return lc._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=Yy.parseLink(n);return Nt(r,"argument-error"),lc._fromEmailAndCode(t,r.code,r.tenantId)}}Sl.PROVIDER_ID="password";Sl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Sl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends IA{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends bc{constructor(){super("facebook.com")}static credential(t){return Ho._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Cs.credentialFromTaggedObject(t)}static credentialFromError(t){return Cs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Cs.credential(t.oauthAccessToken)}catch{return null}}}Cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends bc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ho._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Is.credentialFromTaggedObject(t)}static credentialFromError(t){return Is.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Is.credential(n,r)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends bc{constructor(){super("github.com")}static credential(t){return Ho._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return xs.credentialFromTaggedObject(t)}static credentialFromError(t){return xs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return xs.credential(t.oauthAccessToken)}catch{return null}}}xs.GITHUB_SIGN_IN_METHOD="github.com";xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends bc{constructor(){super("twitter.com")}static credential(t,n){return Ho._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ns.credentialFromTaggedObject(t)}static credentialFromError(t){return Ns.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ns.credential(n,r)}catch{return null}}}Ns.TWITTER_SIGN_IN_METHOD="twitter.com";Ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RP(e,t){return Sc(e,"POST","/v1/accounts:signUp",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,o=!1){const l=await Oi._fromIdTokenResponse(t,r,o),c=Nw(r);return new qo({user:l,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const o=Nw(r);return new qo({user:t,providerId:o,_tokenResponse:r,operationType:n})}}function Nw(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf extends Xr{constructor(t,n,r,o){var l;super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,qf.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,o){return new qf(t,n,r,o)}}function xA(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?qf._fromErrorAndOperation(e,l,t,r):l})}async function CP(e,t,n=!1){const r=await ac(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return qo._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IP(e,t,n=!1){const{auth:r}=e;if(Ei(r.app))return Promise.reject(qr(r));const o="reauthenticate";try{const l=await ac(e,xA(r,o,t,e),n);Nt(l.idToken,r,"internal-error");const c=jy(l.idToken);Nt(c,r,"internal-error");const{sub:d}=c;return Nt(e.uid===d,r,"user-mismatch"),qo._forOperation(e,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Vi(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NA(e,t,n=!1){if(Ei(e.app))return Promise.reject(qr(e));const r="signIn",o=await xA(e,r,t),l=await qo._fromIdTokenResponse(e,r,o);return n||await e._updateCurrentUser(l.user),l}async function xP(e,t){return NA($o(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(e){const t=$o(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function NP(e,t,n){if(Ei(e.app))return Promise.reject(qr(e));const r=$o(e),c=await Pp(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RP).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&DA(e),g}),d=await qo._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function DP(e,t,n){return Ei(e.app)?Promise.reject(qr(e)):xP(Ye(e),Sl.credential(t,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&DA(e),r})}function MP(e,t,n,r){return Ye(e).onIdTokenChanged(t,n,r)}function OP(e,t,n){return Ye(e).beforeAuthStateChanged(t,n)}function kP(e,t,n,r){return Ye(e).onAuthStateChanged(t,n,r)}function VP(e){return Ye(e).signOut()}const Ff="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ff,"1"),this.storage.removeItem(Ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=1e3,LP=10;class OA extends MA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&t(n,o,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((c,d,g)=>{this.notifyListeners(c,g)});return}const r=t.key;n?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);tP()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,LP):o()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},PP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}OA.type="LOCAL";const UP=OA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA extends MA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}kA.type="SESSION";const VA=kA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(o=>o.isListeningto(t));if(n)return n;const r=new vd(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:o,data:l}=n.data,c=this.handlersMap[o];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const d=Array.from(c).map(async m=>m(n.origin,l)),g=await zP(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((d,g)=>{const m=Ky("",20);o.port1.start();const y=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(v){const E=v;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(E.data.response);break;default:clearTimeout(y),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:m,data:n},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return window}function HP(e){cr().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(){return typeof cr().WorkerGlobalScope<"u"&&typeof cr().importScripts=="function"}async function qP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FP(){var e;return((e=navigator?.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function jP(){return PA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="firebaseLocalStorageDb",GP=1,jf="firebaseLocalStorage",UA="fbase_key";class Ac{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ed(e,t){return e.transaction([jf],t?"readwrite":"readonly").objectStore(jf)}function $P(){const e=indexedDB.deleteDatabase(LA);return new Ac(e).toPromise()}function Lp(){const e=indexedDB.open(LA,GP);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(jf,{keyPath:UA})}catch(o){n(o)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(jf)?t(r):(r.close(),await $P(),t(await Lp()))})})}async function Dw(e,t,n){const r=Ed(e,!0).put({[UA]:t,value:n});return new Ac(r).toPromise()}async function YP(e,t){const n=Ed(e,!1).get(t),r=await new Ac(n).toPromise();return r===void 0?null:r.value}function Mw(e,t){const n=Ed(e,!0).delete(t);return new Ac(n).toPromise()}const KP=800,XP=3;class zA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lp(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>XP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vd._getInstance(jP()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await qP(),!this.activeServiceWorker)return;this.sender=new BP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||FP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Lp();return await Dw(t,Ff,"1"),await Mw(t,Ff),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Dw(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>YP(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Mw(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const l=Ed(o,!1).getAll();return new Ac(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:o,value:l}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zA.type="LOCAL";const QP=zA;new wc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(e,t){return t?Br(t):(Nt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy extends $y{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return tl(t,this._buildIdpRequest())}_linkToIdToken(t,n){return tl(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return tl(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function WP(e){return NA(e.auth,new Xy(e),e.bypassAuthState)}function JP(e){const{auth:t,user:n}=e;return Nt(n,t,"internal-error"),IP(n,new Xy(e),e.bypassAuthState)}async function t6(e){const{auth:t,user:n}=e;return Nt(n,t,"internal-error"),CP(n,new Xy(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(t,n,r,o,l=!1){this.auth=t,this.resolver=r,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:o,tenantId:l,error:c,type:d}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(m){this.reject(m)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return WP;case"linkViaPopup":case"linkViaRedirect":return t6;case"reauthViaPopup":case"reauthViaRedirect":return JP;default:Vi(this.auth,"internal-error")}}resolve(t){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=new wc(2e3,1e4);class Ya extends BA{constructor(t,n,r,o,l){super(t,n,o,l),this.provider=r,this.authWindow=null,this.pollId=null,Ya.currentPopupAction&&Ya.currentPopupAction.cancel(),Ya.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Nt(t,this.auth,"internal-error"),t}async onExecution(){Kr(this.filter.length===1,"Popup operations only handle one event");const t=Ky();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ya.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,e6.get())};t()}}Ya.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6="pendingRedirect",pf=new Map;class i6 extends BA{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=pf.get(this.auth._key());if(!t){try{const r=await r6(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}pf.set(this.auth._key(),t)}return this.bypassAuthState||pf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function r6(e,t){const n=a6(t),r=o6(e);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function s6(e,t){pf.set(e._key(),t)}function o6(e){return Br(e._redirectPersistence)}function a6(e){return mf(n6,e.config.apiKey,e.name)}async function l6(e,t,n=!1){if(Ei(e.app))return Promise.reject(qr(e));const r=$o(e),o=ZP(r,t),c=await new i6(r,o,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=10*60*1e3;class c6{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!h6(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!HA(t)){const o=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ur(this.auth,o))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=u6&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ow(t))}saveEventToCache(t){this.cachedEventUids.add(Ow(t)),this.lastProcessedEventTime=Date.now()}}function Ow(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function HA({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function h6(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HA(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f6(e,t={}){return Xs(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,g6=/^https?/;async function m6(e){if(e.config.emulator)return;const{authorizedDomains:t}=await f6(e);for(const n of t)try{if(p6(n))return}catch{}Vi(e,"unauthorized-domain")}function p6(e){const t=kp(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const c=new URL(e);return c.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!g6.test(n))return!1;if(d6.test(e))return r===e;const o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=new wc(3e4,6e4);function kw(){const e=cr().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function _6(e){return new Promise((t,n)=>{var r,o,l;function c(){kw(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{kw(),n(ur(e,"network-request-failed"))},timeout:y6.get()})}if(!((o=(r=cr().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)t(gapi.iframes.getContext());else if(!((l=cr().gapi)===null||l===void 0)&&l.load)c();else{const d=uP("iframefcb");return cr()[d]=()=>{gapi.load?c():n(ur(e,"network-request-failed"))},AA(`${lP()}?onload=${d}`).catch(g=>n(g))}}).catch(t=>{throw yf=null,t})}let yf=null;function v6(e){return yf=yf||_6(e),yf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6=new wc(5e3,15e3),T6="__/auth/iframe",w6="emulator/auth/iframe",S6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},b6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function A6(e){const t=e.config;Nt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Fy(t,w6):`https://${e.config.authDomain}/${T6}`,r={apiKey:t.apiKey,appName:e.name,v:pl},o=b6.get(e.config.apiHost);o&&(r.eid=o);const l=e._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${mc(r).slice(1)}`}async function R6(e){const t=await v6(e),n=cr().gapi;return Nt(n,e,"internal-error"),t.open({where:document.body,url:A6(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:S6,dontclear:!0},r=>new Promise(async(o,l)=>{await r.restyle({setHideOnLeave:!1});const c=ur(e,"network-request-failed"),d=cr().setTimeout(()=>{l(c)},E6.get());function g(){cr().clearTimeout(d),o(r)}r.ping(g).then(g,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I6=500,x6=600,N6="_blank",D6="http://localhost";class Vw{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function M6(e,t,n,r=I6,o=x6){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const g=Object.assign(Object.assign({},C6),{width:r.toString(),height:o.toString(),top:l,left:c}),m=wn().toLowerCase();n&&(d=_A(m)?N6:n),pA(m)&&(t=t||D6,g.scrollbars="yes");const y=Object.entries(g).reduce((E,[S,D])=>`${E}${S}=${D},`,"");if(J3(m)&&d!=="_self")return O6(t||"",d),new Vw(null);const v=window.open(t||"",d,y);Nt(v,e,"popup-blocked");try{v.focus()}catch{}return new Vw(v)}function O6(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6="__/auth/handler",V6="emulator/auth/handler",P6=encodeURIComponent("fac");async function Pw(e,t,n,r,o,l){Nt(e.config.authDomain,e,"auth-domain-config-required"),Nt(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:pl,eventId:o};if(t instanceof IA){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",tO(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(t instanceof bc){const y=t.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}e.tenantId&&(c.tid=e.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const g=await e._getAppCheckToken(),m=g?`#${P6}=${encodeURIComponent(g)}`:"";return`${L6(e)}?${mc(d).slice(1)}${m}`}function L6({config:e}){return e.emulator?Fy(e,V6):`https://${e.authDomain}/${k6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="webStorageSupport";class U6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VA,this._completeRedirectFn=l6,this._overrideRedirectResult=s6}async _openPopup(t,n,r,o){var l;Kr((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await Pw(t,n,r,kp(),o);return M6(t,c,Ky())}async _openRedirect(t,n,r,o){await this._originValidation(t);const l=await Pw(t,n,r,kp(),o);return HP(l),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:o,promise:l}=this.eventManagers[n];return o?Promise.resolve(o):(Kr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await R6(t),r=new c6(t);return n.register("authEvent",o=>(Nt(o?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Km,{type:Km},o=>{var l;const c=(l=o?.[0])===null||l===void 0?void 0:l[Km];c!==void 0&&n(!!c),Vi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=m6(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return SA()||yA()||Gy()}}const z6=U6;var Lw="@firebase/auth",Uw="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function q6(e){al(new Lo("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Nt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:d,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bA(e)},m=new sP(r,o,l,g);return mP(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),al(new Lo("auth-internal",t=>{const n=$o(t.getProvider("auth").getImmediate());return(r=>new B6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vs(Lw,Uw,H6(e)),Vs(Lw,Uw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=5*60,j6=wb("authIdTokenMaxAge")||F6;let zw=null;const G6=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>j6)return;const o=n?.token;zw!==o&&(zw=o,await fetch(e,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function $6(e=Ib()){const t=ny(e,"auth");if(t.isInitialized())return t.getImmediate();const n=gP(e,{popupRedirectResolver:z6,persistence:[QP,UP,VA]}),r=wb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=G6(l.toString());OP(n,c,()=>c(n.currentUser)),MP(n,d=>c(d))}}const o=Eb("auth");return o&&pP(n,`http://${o}`),n}function Y6(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}oP({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=o=>{const l=ur("internal-error");l.customData=o,n(l)},r.type="text/javascript",r.charset="UTF-8",Y6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});q6("Browser");const K6={apiKey:"AIzaSyByTZ08eCsc2wv0VIWUHNtHSdmAA_JI5hM",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},qA=Cb(K6),Pi=f3(qA),Gf=$6(qA),ei={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},Nn={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function X6(){const[e,t]=j.useState(""),[n,r]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(!1),[g,m]=j.useState(""),y=async E=>{E.preventDefault(),d(!0),m("");try{if(!e||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))throw new Error(Nn.INVALID_EMAIL);if(n.length<6)throw new Error(Nn.WEAK_PASSWORD);const D=await NP(Gf,e,n);console.log("User created successfully:",D.user.uid)}catch(S){console.error("Sign up error:",S);let D="Failed to create account";S.code==="auth/email-already-in-use"?D=Nn.EMAIL_IN_USE:S.code==="auth/invalid-email"?D=Nn.INVALID_EMAIL:S.code==="auth/weak-password"?D=Nn.WEAK_PASSWORD:S.code==="auth/operation-not-allowed"?D="Email/password accounts are not enabled. Please contact support.":S.message&&(D=S.message),m(D)}finally{d(!1)}},v=async E=>{E.preventDefault(),d(!0),m("");try{if(!e||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))throw new Error(Nn.INVALID_EMAIL);const D=await DP(Gf,e,n);console.log("User signed in successfully:",D.user.uid)}catch(S){console.error("Sign in error:",S);let D="Failed to sign in";S.code==="auth/user-not-found"?D=Nn.USER_NOT_FOUND:S.code==="auth/wrong-password"?D=Nn.WRONG_PASSWORD:S.code==="auth/invalid-email"?D=Nn.INVALID_EMAIL:S.code==="auth/user-disabled"?D="This account has been disabled. Please contact support.":S.code==="auth/too-many-requests"?D=Nn.TOO_MANY_REQUESTS:S.message&&(D=S.message),m(D)}finally{d(!1)}};return mt.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",fontFamily:"Arial, sans-serif",backgroundColor:"#f5f5f5"},children:mt.jsxs("div",{style:{padding:"2rem",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"white",minWidth:"300px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[mt.jsx("h2",{style:{textAlign:"center",marginBottom:"1.5rem"},children:o?"Sign Up":"Sign In"}),mt.jsxs("form",{onSubmit:o?y:v,children:[mt.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:E=>t(E.target.value),required:!0,style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",border:"1px solid #ccc",borderRadius:"4px",fontSize:"1rem",boxSizing:"border-box"}}),mt.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:E=>r(E.target.value),required:!0,style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",border:"1px solid #ccc",borderRadius:"4px",fontSize:"1rem",boxSizing:"border-box"}}),mt.jsx("button",{type:"submit",disabled:c,style:{width:"100%",padding:"0.75rem",backgroundColor:c?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"4px",fontSize:"1rem",cursor:c?"not-allowed":"pointer",marginBottom:"1rem"},children:c?"Loading...":o?"Sign Up":"Sign In"}),g&&mt.jsx("p",{style:{color:"red",textAlign:"center",marginBottom:"1rem",fontSize:"0.9rem"},children:g})]}),mt.jsxs("p",{style:{textAlign:"center",margin:0},children:[o?"Already have an account?":"Don't have an account?",mt.jsx("button",{type:"button",onClick:()=>l(!o),style:{background:"none",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",marginLeft:"0.5rem",fontSize:"1rem"},children:o?"Sign In":"Sign Up"})]})]})})}function Q6({allBoards:e,currentBoard:t,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:o,onSignOut:l,isLoading:c}){const[d,g]=j.useState(!1),m=async()=>{try{g(!0),await r()}catch(v){console.error("Error in sidebar create board:",v)}finally{g(!1)}},y=(v,E)=>{v.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&o(E)};return mt.jsx(mt.Fragment,{children:mt.jsxs("div",{className:"sidebar",children:[mt.jsxs("div",{className:"sidebar-header",children:[mt.jsx("h2",{children:"Launch Hacks"}),mt.jsx("button",{onClick:m,disabled:c||d,style:{opacity:c||d?.6:1,cursor:c||d?"not-allowed":"pointer"},children:d?"Creating...":"+ New Board"})]}),mt.jsxs("div",{className:"sidebar-content",children:[c&&mt.jsx("div",{className:"loading-indicator",children:"Switching boards..."}),mt.jsxs("div",{style:{padding:"10px",fontSize:"12px",color:"#666"},children:["Boards: ",e?.length||0]}),mt.jsx("ul",{children:e?.map(v=>(console.log("Rendering board:",v),mt.jsxs("li",{onClick:()=>!c&&n(v.id),className:t?.id===v.id?"active":"",children:[mt.jsx("span",{className:"board-name",children:v.name}),mt.jsxs("div",{className:"board-actions",children:[v.isOpen&&mt.jsx("span",{className:"open-indicator",children:"●"}),e.length>1&&mt.jsx("button",{className:"delete-btn",onClick:E=>y(E,v.id),title:"Delete board",children:"×"})]})]},v.id)))})]}),mt.jsx("div",{className:"sidebar-footer",children:mt.jsx("button",{onClick:l,children:"Sign Out"})})]})})}function Z6({name:e,onSetName:t,user:n,isSaving:r,isConceptMode:o,onToggleMode:l}){const[c,d]=j.useState(!1),[g,m]=j.useState(e||"");j.useEffect(()=>{m(e||"")},[e]);const y=E=>{E.key==="Enter"&&(t(g),d(!1))},v=()=>{d(!0),m(e||"")};return mt.jsx(mt.Fragment,{children:mt.jsxs("div",{className:"name",children:[mt.jsx("div",{className:"app-container",children:mt.jsxs("header",{className:"app-header",children:[mt.jsx("h1",{children:"Tink Flow Editor"}),mt.jsxs("div",{className:"user-info",children:[mt.jsxs("p",{children:["Welcome,"," ",n?.isAnonymous?"Anonymous User":n?.email||"User"]}),r&&mt.jsx("span",{className:"save-indicator",children:"💾 Saving..."}),mt.jsx("button",{className:"mode-toggle-btn",onClick:l,title:`Switch to ${o?"Word":"Concept"} Mode`,children:o?"📝 Word Mode":"🧠 Concept Mode"})]})]})}),mt.jsxs("div",{className:"board-title-section",children:[c?mt.jsx("input",{type:"text",value:g,onChange:E=>m(E.target.value),onKeyDown:y,onBlur:()=>{t(g),d(!1)},autoFocus:!0}):mt.jsx("h6",{onClick:v,style:{cursor:"pointer"},children:e||"Untitled Board"}),mt.jsx("div",{className:"keyboard-shortcuts",children:mt.jsx("small",{children:"💡 Tips: Ctrl+N for new board, Ctrl+1-9 to switch boards"})})]})]})})}const W6=({notification:e,onRemove:t})=>{const n=r=>{switch(r){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"📄"}};return mt.jsxs("div",{className:`notification notification-${e.type}`,children:[mt.jsxs("div",{className:"notification-content",children:[mt.jsx("span",{className:"notification-icon",children:n(e.type)}),mt.jsx("span",{className:"notification-message",children:e.message})]}),mt.jsx("button",{className:"notification-close",onClick:()=>t(e.id),children:"×"})]})},J6=({notifications:e,onRemove:t})=>e.length===0?null:mt.jsx("div",{className:"notifications-container",children:e.map(n=>mt.jsx(W6,{notification:n,onRemove:t},n.id))}),t9=async()=>{try{await VP(Gf),console.log("User signed out successfully")}catch(e){throw console.error("Error signing out:",e),e}},e9=()=>{const[e,t]=j.useState(null);return j.useEffect(()=>{const r=kP(Gf,o=>{t(o),o?console.log("User signed in:",o.uid):console.log("No user signed in")});return()=>r()},[]),{user:e,signOut:async()=>{try{await t9(),t(null)}catch(r){console.error("Error in sign out:",r)}}}},FA=e=>!!(e&&e.uid),el=[{id:"1",type:"draggableEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively"},position:{x:250,y:25}},{id:"2",type:"draggableEditable",data:{label:"This is a simple sentence with multiple words to demonstrate word mode functionality"},position:{x:100,y:125}},{id:"3",type:"draggableEditable",data:{label:"_Machine learning_ algorithms can _predict outcomes_ with high accuracy"},position:{x:400,y:125}},{id:"4",type:"staticEditable",data:{label:"Static node with _key concepts_ highlighted"},position:{x:250,y:200},draggable:!1}],nl=[{id:"e1-2",source:"1",target:"2"},{id:"e1-3",source:"1",target:"3"},{id:"e2-4",source:"2",target:"4"},{id:"e3-4",source:"3",target:"4"}],n9=async e=>{if(!FA({uid:e}))throw new Error(Nn.AUTH_REQUIRED);try{const t=Ry(Pi,ei.BOARDS),n=S3(t,b3("userId","==",e),A3("createdAt","desc")),r=await Uy(n);if(r.empty){const l={id:`board_${Date.now()}`,userId:e,name:"Default Board",createdAt:ye.now(),isOpen:!0};return await zy(wl(Pi,ei.BOARDS,l.id),l),console.log("Created default board:",l),[l]}const o=r.docs.map(l=>({id:l.id,...l.data()}));return console.log("Fetched all boards:",o),o}catch(t){if(console.error("Fetch all boards error:",t),t.code==="failed-precondition"||t.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:e,name:"Fallback Board (Create Index)",createdAt:ye.now(),isOpen:!0,isFallback:!0}]}throw new Error(Nn.LOAD_FAILED)}},Bw=async e=>{if(!e)return console.warn("No board ID provided for fetching nodes"),el;try{const t=Ry(Pi,ei.BOARDS,e,ei.NODES),n=await Uy(t);if(n.empty)return console.log("No nodes found for board, using initial nodes"),el;const r=n.docs.map(o=>({id:o.id,...o.data()}));return console.log("Fetched nodes from board:",r),r}catch(t){return console.error("Fetch nodes error:",t),el}},Hw=async e=>{if(!e)return console.warn("No board ID provided for fetching edges"),nl;try{const t=Ry(Pi,ei.BOARDS,e,ei.EDGES),n=await Uy(t);if(n.empty)return console.log("No edges found for board, using initial edges"),nl;const r=n.docs.map(o=>({id:o.id,...o.data()}));return console.log("Fetched edges from board:",r),r}catch(t){return console.error("Fetch edges error:",t),nl}},i9=async(e,t)=>{if(!e||!t?.length){console.warn("Invalid parameters for saving nodes:",{boardId:e,nodesCount:t?.length});return}try{const n=aA(Pi);t.forEach(r=>{const o=wl(Pi,ei.BOARDS,e,ei.NODES,r.id),l={type:r.type,data:r.data,position:r.position,updatedAt:ye.now()};r.draggable!==void 0&&(l.draggable=r.draggable),r.style!==void 0&&(l.style=r.style),n.set(o,l)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(Nn.SAVE_FAILED)}},r9=async(e,t)=>{if(!e||!t?.length){console.warn("Invalid parameters for saving edges:",{boardId:e,edgesCount:t?.length});return}try{const n=aA(Pi);t.forEach(r=>{const o=wl(Pi,ei.BOARDS,e,ei.EDGES,r.id),l={source:r.source,target:r.target,updatedAt:ye.now()};r.sourceHandle!==void 0&&(l.sourceHandle=r.sourceHandle),r.targetHandle!==void 0&&(l.targetHandle=r.targetHandle),r.style!==void 0&&(l.style=r.style),r.markerEnd!==void 0&&(l.markerEnd=r.markerEnd),n.set(o,l)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(Nn.SAVE_FAILED)}},s9=async(e,t,n)=>{if(!FA({uid:e}))throw new Error(Nn.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:e,name:t||`Board ${n.length+1}`,createdAt:ye.now(),isOpen:!1};return console.log("Creating board:",r),await zy(wl(Pi,ei.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},o9=async e=>{if(!e)throw new Error("Board ID is required for deletion");try{await D3(wl(Pi,ei.BOARDS,e)),console.log("Board deleted successfully")}catch(t){throw console.error("Error deleting board:",t),t.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):t}},Ha=async(e,t)=>{if(!e||!t)throw new Error("Board ID and updates are required");try{const n={...t,updatedAt:ye.now()};await zy(wl(Pi,ei.BOARDS,e),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},a9=(e,t={})=>{const[n,r,o]=rM([]),[l,c,d]=sM([]),[g,m]=j.useState(!0),[y,v]=j.useState(!1),[E,S]=j.useState(!1),[D,V]=j.useState([]),[M,B]=j.useState(null),F=j.useRef(null),{showSuccess:X,showError:z,showInfo:q}=t,Z=R=>{const k=R.find(K=>K.isOpen===!0);if(k)return k;if(R.length>0){const K={...R[0],isOpen:!0};return Ha(K.id,K).catch(console.error),K}return null};j.useEffect(()=>{(async()=>{if(e)try{m(!0);const k=await n9(e.uid);V(k);const K=k.some(Q=>Q.isFallback);K&&z&&z("Database index missing. Please create the required Firestore index. Check console for details.");const O=Z(k);if(!O){console.error("No board found for user"),z&&z("No boards found. Creating a default board..."),r(el),c(nl);return}B(O);const[$,rt]=await Promise.all([Bw(O.id),Hw(O.id)]);r($),c(rt),q&&!K&&q("Board loaded successfully!")}catch(k){console.error("Error loading initial data:",k),z&&z("Failed to load board data. Using default board."),r(el),c(nl)}finally{m(!1)}})()},[e,r,c]);const x=j.useCallback(async(R,k,K)=>{F.current&&clearTimeout(F.current);const O=setTimeout(async()=>{try{S(!0);const $=[];k&&k.length>0&&$.push(i9(R,k)),K&&K.length>0&&$.push(r9(R,K)),$.length>0&&(await Promise.all($),console.log("Auto-save completed successfully"))}catch($){console.error("Auto-save failed:",$),z&&z("Failed to save changes automatically")}finally{S(!1),F.current=null}},1e3);F.current=O},[z]);j.useEffect(()=>(!g&&M&&!y&&!M.isFallback&&x(M.id,n,l),()=>{F.current&&clearTimeout(F.current)}),[n,l,g,M,y]);const b=j.useCallback(async R=>{try{if(M?.id===R)return;if(M?.isFallback||D.find(K=>K.id===R)?.isFallback){z&&z("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(v(!0),M&&!M.isFallback){const K={...M,isOpen:!1};await Ha(M.id,K),V(O=>O.map($=>$.id===M.id?K:$))}const k=D.find(K=>K.id===R);if(k){const K={...k,isOpen:!0};await Ha(R,K),B(K),V(rt=>rt.map(Q=>Q.id===R?K:Q));const[O,$]=await Promise.all([Bw(R),Hw(R)]);r(O),c($),X&&X(`Switched to "${K.name}"`)}else console.error("Board not found:",R),z&&z("Board not found")}catch(k){console.error("Error switching board:",k),z&&z("Failed to switch board. Please try again.")}finally{v(!1)}},[M,D,r,c,X,z]),C=j.useCallback(async()=>{try{if(!e)return z&&z("You must be logged in to create a board"),null;q&&q("Creating new board..."),console.log("Creating new board for user:",e.uid),console.log("Current boards count:",D.length);const R=await s9(e.uid,null,D);if(R){if(console.log("Board created successfully:",R),M&&!M.isFallback){const K={...M,isOpen:!1};Ha(M.id,K).catch(console.error)}const k={...R,isOpen:!0};return V(K=>{const O=K.map($=>$.id===M?.id?{...$,isOpen:!1}:$);return[k,...O]}),B(k),Ha(R.id,k).catch(console.error),r(el),c(nl),X&&X("New board created and opened!"),k}else return z&&z("Failed to create board. Please try again."),null}catch(R){return console.error("Error creating new board:",R),z&&z(`Failed to create board: ${R.message}`),null}},[e,D,M,X,z,q,r,c]),P=j.useCallback(async R=>{try{if(D.length<=1){z&&z("Cannot delete the last board!");return}if(!D.find(K=>K.id===R)){console.error("Board not found for deletion"),z&&z("Board not found");return}if(q&&q("Deleting board..."),M?.id===R){const K=D.find(O=>O.id!==R);K&&await b(K.id)}await o9(R),V(K=>K.filter(O=>O.id!==R)),X&&X("Board deleted successfully!")}catch(k){console.error("Error deleting board:",k),z&&z("Failed to delete board. Please try again.")}},[D,M,b,X,z,q]),L=j.useCallback(async R=>{if(M&&M.name!==R){const k={...M,name:R};B(k),V(K=>K.map(O=>O.id===M.id?k:O));try{await Ha(M.id,k),console.log("Board name updated successfully")}catch(K){console.error("Error updating board name:",K)}}},[M]),U=j.useCallback(()=>{F.current&&(clearTimeout(F.current),F.current=null),V([]),B(null),r([]),c([]),m(!0),v(!1),S(!1)},[r,c,F]);return{nodes:n,edges:l,allBoards:D,currentBoard:M,isLoading:g,isSwitchingBoard:y,isSaving:E,onNodesChange:o,onEdgesChange:d,switchToBoard:b,createNewBoard:C,deleteBoard:P,updateBoardName:L,clearBoardState:U}},l9=({allBoards:e,currentBoard:t,createNewBoard:n,switchToBoard:r})=>{j.useEffect(()=>{const o=l=>{if((l.ctrlKey||l.metaKey)&&l.key==="n"&&(l.preventDefault(),n()),(l.ctrlKey||l.metaKey)&&l.key>="1"&&l.key<="9"){l.preventDefault();const c=parseInt(l.key)-1;e[c]&&e[c].id!==t?.id&&r(e[c].id)}};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[e,t,n,r])},u9=()=>{const[e,t]=j.useState([]),n=j.useCallback(m=>{const y=Date.now().toString(),v={id:y,timestamp:new Date,...m};return t(E=>[...E,v]),m.autoRemove!==!1&&setTimeout(()=>{r(y)},m.duration||5e3),y},[]),r=j.useCallback(m=>{t(y=>y.filter(v=>v.id!==m))},[]),o=j.useCallback(()=>{t([])},[]),l=j.useCallback((m,y={})=>n({type:"success",message:m,...y}),[n]),c=j.useCallback((m,y={})=>n({type:"error",message:m,duration:7e3,...y}),[n]),d=j.useCallback((m,y={})=>n({type:"info",message:m,...y}),[n]),g=j.useCallback((m,y={})=>n({type:"warning",message:m,duration:6e3,...y}),[n]);return{notifications:e,addNotification:n,removeNotification:r,clearAllNotifications:o,showSuccess:l,showError:c,showInfo:d,showWarning:g}},jA=j.createContext(void 0),c9=({children:e})=>{const[t,n]=j.useState("word"),r=j.useCallback(()=>{n(c=>c==="word"?"concept":"word")},[]),o=j.useCallback(c=>{n(c)},[]),l=j.useMemo(()=>({mode:t,toggleMode:r,setMode:o}),[t,r,o]);return mt.jsx(jA.Provider,{value:l,children:e})},Qy=()=>{const e=j.useContext(jA);if(e===void 0)throw new Error("useMode must be used within a ModeProvider");return e},qw=()=>{const e=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return e[Math.floor(Math.random()*e.length)]},h9=e=>{const t=e.replace("#",""),n=parseInt(t.substr(0,2),16),r=parseInt(t.substr(2,2),16),o=parseInt(t.substr(4,2),16),l=30,c=Math.min(255,Math.max(0,n+(Math.random()-.5)*l*2)),d=Math.min(255,Math.max(0,r+(Math.random()-.5)*l*2)),g=Math.min(255,Math.max(0,o+(Math.random()-.5)*l*2));return`#${Math.round(c).toString(16).padStart(2,"0")}${Math.round(d).toString(16).padStart(2,"0")}${Math.round(g).toString(16).padStart(2,"0")}`},f9=(e,t)=>{const o=[0,45,90,135,180,225,270,315];for(const c of o){const d=c*Math.PI/180,g=e.x+Math.cos(d)*200,m=e.y+Math.sin(d)*200;if(!t.some(v=>Math.sqrt(Math.pow(v.position.x-g,2)+Math.pow(v.position.y-m,2))<150))return{x:g,y:m}}const l=Math.random()*2*Math.PI;return{x:e.x+Math.cos(l)*(200+Math.random()*100),y:e.y+Math.sin(l)*(200+Math.random()*100)}},d9=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,g9=(e,t)=>`edge_${e}_${t}`,m9=(e,t,n,r)=>({id:d9(),type:"draggableEditable",position:e,data:{label:t,myColor:n,tokenColors:{}}}),p9=(e,t,n)=>({id:g9(e,t),source:e,target:t,style:{stroke:n,strokeWidth:3},markerEnd:{type:Zu.ArrowClosed,color:n}}),il=e=>{const t=e.replace("#",""),n=parseInt(t.substr(0,2),16),r=parseInt(t.substr(2,2),16),o=parseInt(t.substr(4,2),16);return(.299*n+.587*r+.114*o)/255>.5?"#000000":"#FFFFFF"},GA=(e,t)=>{const n=e.replace("#",""),r=parseInt(n.substr(0,2),16),o=parseInt(n.substr(2,2),16),l=parseInt(n.substr(4,2),16),c=Math.max(0,Math.floor(r*(1-t/100))),d=Math.max(0,Math.floor(o*(1-t/100))),g=Math.max(0,Math.floor(l*(1-t/100)));return`#${c.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}${g.toString(16).padStart(2,"0")}`},$A=j.createContext(null),y9=({children:e,nodes:t,onNodesChange:n,onEdgesChange:r})=>{const o=j.useCallback((l,c,d,g,m)=>{const y=t.find(M=>M.id===c);if(y?.data.tokenColors?.[l]||y?.data.tokenColors?.[`_${l}_`]||y?.data.tokenColors?.[l.replace(/_/g,"")]){console.log("Token already colored, ignoring click");return}let v;g==="staticEditable"?v=qw():v=m?h9(m):qw();const E=f9(d,t),S=m9(E,l,v),D=p9(c,S.id,v);n([{type:"add",item:S}]),r([{type:"add",item:D}]),console.log("Coloring token:",l,"with color:",v);const V=t.find(M=>M.id===c);if(V){const M={...V,data:{...V.data,tokenColors:{...V.data.tokenColors,[l]:v,[`_${l}_`]:v,[l.replace(/_/g,"")]:v}}};n([{type:"replace",id:c,item:M}])}},[t,n,r]);return mt.jsx($A.Provider,{value:{handleTokenClick:o},children:e})},YA=()=>{const e=j.useContext($A);if(!e)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return e};function _9({data:e,id:t}){const[n,r]=j.useState(!1),[o,l]=j.useState(e.label||"Static Node"),[c,d]=j.useState(!1),[g,m]=j.useState(!1),{mode:y}=Qy(),{getNodes:v}=dc(),{handleTokenClick:E}=YA(),S=j.useCallback(q=>e.tokenColors?.[q]||e.tokenColors?.[`_${q}_`]||e.tokenColors?.[q.replace(/_/g,"")],[e.tokenColors]),D=j.useCallback((q,Z)=>{Z.stopPropagation(),console.log("Static Token clicked:",q);const b=v().find(C=>C.id===t);if(!b){console.error("Current node not found");return}E(q,t,b.position,b.type||"staticEditable",e.myColor)},[t,v,E,e.myColor]),V=j.useCallback(q=>{q.stopPropagation(),r(!0)},[]),M=j.useCallback(()=>{r(!1),console.log("Static node text changed to:",o)},[o]),B=j.useCallback(q=>{q.stopPropagation()},[]),F=j.useCallback(q=>{q.stopPropagation(),q.key==="Enter"&&M(),q.key==="Escape"&&(l(e.label||"Static Node"),r(!1))},[M,e.label]),X=j.useCallback(q=>{q.stopPropagation(),m(!g)},[g]),z=j.useMemo(()=>{if(n)return mt.jsx("input",{type:"text",value:o,onChange:q=>l(q.target.value),onBlur:M,onKeyDown:F,onClick:B,className:"node-input nodrag",autoFocus:!0});if(y==="word"){const q=o.split(" ").filter(x=>x.trim()!==""),Z=g?q:q.slice(0,3);return mt.jsxs("div",{className:"node-content-word",children:[mt.jsxs("div",{onClick:V,children:[Z.map((x,b)=>mt.jsxs("span",{className:"word-token",style:{backgroundColor:S(x),color:S(x)?il(S(x)):void 0,cursor:"pointer",padding:S(x)?"2px 4px":void 0,borderRadius:S(x)?"4px":void 0,margin:"1px",display:"inline-block"},onClick:C=>D(x,C),children:[x,b<Z.length-1?" ":""]},b)),q.length>3&&!g&&mt.jsx("span",{children:"..."})]}),q.length>3&&mt.jsx("button",{className:"node-expand-btn",onClick:X,title:g?"Show less":"Show more",children:g?"−":"+"})]})}else{const q=o.split("_");return mt.jsx("div",{className:"node-content-concept",onClick:V,children:q.map((Z,x)=>x%2===1?mt.jsx("span",{className:"concept-token",style:{backgroundColor:S(Z),color:S(Z)?il(S(Z)):void 0,cursor:"pointer",padding:S(Z)?"3px 6px":void 0,borderRadius:S(Z)?"6px":void 0,margin:"2px",fontWeight:"bold",display:"inline-block"},onClick:b=>D(Z,b),children:Z},x):mt.jsx("span",{children:Z},x))})}},[n,o,y,g,V,M,F,B,X,D,S]);return mt.jsxs("div",{className:"static-editable-node nodrag",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),style:{backgroundColor:e.myColor,color:e.myColor?il(e.myColor):void 0,border:e.myColor?`2px solid ${GA(e.myColor,20)}`:void 0},children:[mt.jsx(Vo,{type:"target",position:bt.Bottom,id:"bottom"}),c&&mt.jsx("div",{className:"node-tooltip",children:mt.jsxs("div",{className:"tooltip-content",children:[mt.jsx("span",{children:"📍 Static Node"}),mt.jsxs("span",{children:["Mode: ",y==="word"?"📝 Word":"🧠 Concept"]}),mt.jsx("span",{children:"Click to edit text"})]})}),z,mt.jsx(Vo,{type:"source",position:bt.Bottom,id:"bottom-source"})]})}function v9({data:e,id:t}){const[n,r]=j.useState(!1),[o,l]=j.useState(e.label||"Draggable Node"),[c,d]=j.useState(!1),[g,m]=j.useState(!1),{mode:y}=Qy(),{getNodes:v}=dc(),{handleTokenClick:E}=YA(),S=j.useCallback(q=>e.tokenColors?.[q]||e.tokenColors?.[`_${q}_`]||e.tokenColors?.[q.replace(/_/g,"")],[e.tokenColors]),D=j.useCallback((q,Z)=>{Z.stopPropagation(),console.log("Token clicked:",q);const b=v().find(C=>C.id===t);if(!b){console.error("Current node not found");return}E(q,t,b.position,b.type||"draggableEditable",e.myColor)},[t,v,E,e.myColor]),V=j.useCallback(q=>{q.stopPropagation(),r(!0)},[]),M=j.useCallback(()=>{r(!1),console.log("Draggable node text changed to:",o)},[o]),B=j.useCallback(q=>{q.stopPropagation()},[]),F=j.useCallback(q=>{q.stopPropagation(),q.key==="Enter"&&M(),q.key==="Escape"&&(l(e.label||"Draggable Node"),r(!1))},[M,e.label]),X=j.useCallback(q=>{q.stopPropagation(),m(!g)},[g]),z=j.useMemo(()=>{if(n)return mt.jsx("input",{type:"text",value:o,onChange:q=>l(q.target.value),onBlur:M,onKeyDown:F,onClick:B,className:"node-input nodrag",autoFocus:!0});if(y==="word"){const q=o.split(" ").filter(x=>x.trim()!==""),Z=g?q:q.slice(0,3);return mt.jsxs("div",{className:"node-content-word",children:[mt.jsxs("div",{onClick:V,children:[Z.map((x,b)=>mt.jsxs("span",{className:"word-token",style:{backgroundColor:S(x),color:S(x)?il(S(x)):void 0,cursor:"pointer",padding:S(x)?"2px 4px":void 0,borderRadius:S(x)?"4px":void 0,margin:"1px",display:"inline-block"},onClick:C=>D(x,C),children:[x,b<Z.length-1?" ":""]},b)),q.length>3&&!g&&mt.jsx("span",{children:"..."})]}),q.length>3&&mt.jsx("button",{className:"node-expand-btn",onClick:X,title:g?"Show less":"Show more",children:g?"−":"+"})]})}else{const q=o.split("_");return mt.jsx("div",{className:"node-content-concept",onClick:V,children:q.map((Z,x)=>x%2===1?mt.jsx("span",{className:"concept-token",style:{backgroundColor:S(Z),color:S(Z)?il(S(Z)):void 0,cursor:"pointer",padding:S(Z)?"3px 6px":void 0,borderRadius:S(Z)?"6px":void 0,margin:"2px",fontWeight:"bold",display:"inline-block"},onClick:b=>D(Z,b),children:Z},x):mt.jsx("span",{children:Z},x))})}},[n,o,y,g,V,M,F,B,X,D,S]);return mt.jsxs("div",{className:"draggable-editable-node",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),style:{background:e.myColor,color:e.myColor?il(e.myColor):void 0,border:e.myColor?`2px solid ${GA(e.myColor,20)}`:void 0},children:[c&&mt.jsx("div",{className:"node-tooltip",children:mt.jsxs("div",{className:"tooltip-content",children:[mt.jsx("span",{children:"🎯 Draggable Node"}),mt.jsxs("span",{children:["Mode: ",y==="word"?"📝 Word":"🧠 Concept"]}),mt.jsx("span",{children:"Drag me around!"}),mt.jsx("span",{children:"Click to edit text"})]})}),mt.jsx("div",{className:"node-content",children:z}),mt.jsx(Vo,{type:"source",position:bt.Bottom,id:"bottom-source"})]})}const E9={staticEditable:_9,draggableEditable:v9};function T9(){const{user:e,signOut:t}=e9(),{mode:n,toggleMode:r}=Qy();console.log("Current mode:",n);const{notifications:o,removeNotification:l,showSuccess:c,showError:d,showInfo:g}=u9(),{nodes:m,edges:y,allBoards:v,currentBoard:E,isSwitchingBoard:S,isSaving:D,onNodesChange:V,onEdgesChange:M,switchToBoard:B,createNewBoard:F,deleteBoard:X,updateBoardName:z,clearBoardState:q}=a9(e,{showSuccess:c,showError:d,showInfo:g});l9({allBoards:v,currentBoard:E,createNewBoard:F,switchToBoard:B});const Z=async()=>{await t(),q()},x=j.useCallback(b=>{const C={id:`e${b.source}-${b.target}`,source:b.source,target:b.target,sourceHandle:b.sourceHandle,targetHandle:b.targetHandle};M([{type:"add",item:C}])},[M]);return e?mt.jsxs(mt.Fragment,{children:[mt.jsx(Q6,{allBoards:v,currentBoard:E,onSwitchBoard:B,onCreateBoard:()=>(F(),Promise.resolve()),onDeleteBoard:X,onSignOut:Z,isLoading:S}),mt.jsx(Z6,{name:E?.name||"Loading...",onSetName:z,user:e,isSaving:D,isConceptMode:n==="concept",onToggleMode:r}),mt.jsx(J6,{notifications:o,onRemove:l}),mt.jsx("div",{style:{width:"100vw",height:"100vh"},children:mt.jsx(y9,{nodes:m,onNodesChange:V,onEdgesChange:M,children:mt.jsxs(hb,{nodes:m,edges:y,onNodesChange:V,onEdgesChange:M,onConnect:x,nodeTypes:E9,connectionMode:zs.Loose,fitView:!0,children:[mt.jsx(wM,{}),mt.jsx(mM,{}),mt.jsx(IM,{variant:wi.Cross,gap:12,size:1})]})})})]}):mt.jsx(X6,{})}function w9(){return mt.jsx(c9,{children:mt.jsx(T9,{})})}const KA=document.getElementById("root");if(!KA)throw new Error("Failed to find the root element");CC.createRoot(KA).render(mt.jsx(j.StrictMode,{children:mt.jsx(w9,{})}));
