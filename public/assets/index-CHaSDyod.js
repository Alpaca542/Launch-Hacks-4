(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function o0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ug={exports:{}},Xc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function a6(){if(zv)return Xc;zv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:t,type:r,key:u,ref:s!==void 0?s:null,props:o}}return Xc.Fragment=e,Xc.jsx=n,Xc.jsxs=n,Xc}var jv;function o6(){return jv||(jv=1,Ug.exports=a6()),Ug.exports}var Y=o6(),Vg={exports:{}},at={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function u6(){if(qv)return at;qv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function T(S){return S===null||typeof S!="object"?null:(S=y&&S[y]||S["@@iterator"],typeof S=="function"?S:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,N={};function k(S,J,ae){this.props=S,this.context=J,this.refs=N,this.updater=ae||b}k.prototype.isReactComponent={},k.prototype.setState=function(S,J){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,J,"setState")},k.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function D(){}D.prototype=k.prototype;function F(S,J,ae){this.props=S,this.context=J,this.refs=N,this.updater=ae||b}var q=F.prototype=new D;q.constructor=F,w(q,k.prototype),q.isPureReactComponent=!0;var j=Array.isArray,ee={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function R(S,J,ae,P,ge,Ne){return ae=Ne.ref,{$$typeof:t,type:S,key:J,ref:ae!==void 0?ae:null,props:Ne}}function C(S,J){return R(S.type,J,void 0,void 0,void 0,S.props)}function O(S){return typeof S=="object"&&S!==null&&S.$$typeof===t}function M(S){var J={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(ae){return J[ae]})}var B=/\/+/g;function U(S,J){return typeof S=="object"&&S!==null&&S.key!=null?M(""+S.key):J.toString(36)}function I(){}function L(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(I,I):(S.status="pending",S.then(function(J){S.status==="pending"&&(S.status="fulfilled",S.value=J)},function(J){S.status==="pending"&&(S.status="rejected",S.reason=J)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function K(S,J,ae,P,ge){var Ne=typeof S;(Ne==="undefined"||Ne==="boolean")&&(S=null);var Ie=!1;if(S===null)Ie=!0;else switch(Ne){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(S.$$typeof){case t:case e:Ie=!0;break;case p:return Ie=S._init,K(Ie(S._payload),J,ae,P,ge)}}if(Ie)return ge=ge(S),Ie=P===""?"."+U(S,0):P,j(ge)?(ae="",Ie!=null&&(ae=Ie.replace(B,"$&/")+"/"),K(ge,J,ae,"",function(Me){return Me})):ge!=null&&(O(ge)&&(ge=C(ge,ae+(ge.key==null||S&&S.key===ge.key?"":(""+ge.key).replace(B,"$&/")+"/")+Ie)),J.push(ge)),1;Ie=0;var je=P===""?".":P+":";if(j(S))for(var xe=0;xe<S.length;xe++)P=S[xe],Ne=je+U(P,xe),Ie+=K(P,J,ae,Ne,ge);else if(xe=T(S),typeof xe=="function")for(S=xe.call(S),xe=0;!(P=S.next()).done;)P=P.value,Ne=je+U(P,xe++),Ie+=K(P,J,ae,Ne,ge);else if(Ne==="object"){if(typeof S.then=="function")return K(L(S),J,ae,P,ge);throw J=String(S),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function H(S,J,ae){if(S==null)return S;var P=[],ge=0;return K(S,P,"","",function(Ne){return J.call(ae,Ne,ge++)}),P}function Q(S){if(S._status===-1){var J=S._result;J=J(),J.then(function(ae){(S._status===0||S._status===-1)&&(S._status=1,S._result=ae)},function(ae){(S._status===0||S._status===-1)&&(S._status=2,S._result=ae)}),S._status===-1&&(S._status=0,S._result=J)}if(S._status===1)return S._result.default;throw S._result}var se=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)};function te(){}return at.Children={map:H,forEach:function(S,J,ae){H(S,function(){J.apply(this,arguments)},ae)},count:function(S){var J=0;return H(S,function(){J++}),J},toArray:function(S){return H(S,function(J){return J})||[]},only:function(S){if(!O(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},at.Component=k,at.Fragment=n,at.Profiler=s,at.PureComponent=F,at.StrictMode=r,at.Suspense=f,at.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,at.__COMPILER_RUNTIME={__proto__:null,c:function(S){return ee.H.useMemoCache(S)}},at.cache=function(S){return function(){return S.apply(null,arguments)}},at.cloneElement=function(S,J,ae){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var P=w({},S.props),ge=S.key,Ne=void 0;if(J!=null)for(Ie in J.ref!==void 0&&(Ne=void 0),J.key!==void 0&&(ge=""+J.key),J)!$.call(J,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&J.ref===void 0||(P[Ie]=J[Ie]);var Ie=arguments.length-2;if(Ie===1)P.children=ae;else if(1<Ie){for(var je=Array(Ie),xe=0;xe<Ie;xe++)je[xe]=arguments[xe+2];P.children=je}return R(S.type,ge,void 0,void 0,Ne,P)},at.createContext=function(S){return S={$$typeof:u,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:o,_context:S},S},at.createElement=function(S,J,ae){var P,ge={},Ne=null;if(J!=null)for(P in J.key!==void 0&&(Ne=""+J.key),J)$.call(J,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(ge[P]=J[P]);var Ie=arguments.length-2;if(Ie===1)ge.children=ae;else if(1<Ie){for(var je=Array(Ie),xe=0;xe<Ie;xe++)je[xe]=arguments[xe+2];ge.children=je}if(S&&S.defaultProps)for(P in Ie=S.defaultProps,Ie)ge[P]===void 0&&(ge[P]=Ie[P]);return R(S,Ne,void 0,void 0,null,ge)},at.createRef=function(){return{current:null}},at.forwardRef=function(S){return{$$typeof:c,render:S}},at.isValidElement=O,at.lazy=function(S){return{$$typeof:p,_payload:{_status:-1,_result:S},_init:Q}},at.memo=function(S,J){return{$$typeof:d,type:S,compare:J===void 0?null:J}},at.startTransition=function(S){var J=ee.T,ae={};ee.T=ae;try{var P=S(),ge=ee.S;ge!==null&&ge(ae,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(te,se)}catch(Ne){se(Ne)}finally{ee.T=J}},at.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},at.use=function(S){return ee.H.use(S)},at.useActionState=function(S,J,ae){return ee.H.useActionState(S,J,ae)},at.useCallback=function(S,J){return ee.H.useCallback(S,J)},at.useContext=function(S){return ee.H.useContext(S)},at.useDebugValue=function(){},at.useDeferredValue=function(S,J){return ee.H.useDeferredValue(S,J)},at.useEffect=function(S,J,ae){var P=ee.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return P.useEffect(S,J)},at.useId=function(){return ee.H.useId()},at.useImperativeHandle=function(S,J,ae){return ee.H.useImperativeHandle(S,J,ae)},at.useInsertionEffect=function(S,J){return ee.H.useInsertionEffect(S,J)},at.useLayoutEffect=function(S,J){return ee.H.useLayoutEffect(S,J)},at.useMemo=function(S,J){return ee.H.useMemo(S,J)},at.useOptimistic=function(S,J){return ee.H.useOptimistic(S,J)},at.useReducer=function(S,J,ae){return ee.H.useReducer(S,J,ae)},at.useRef=function(S){return ee.H.useRef(S)},at.useState=function(S){return ee.H.useState(S)},at.useSyncExternalStore=function(S,J,ae){return ee.H.useSyncExternalStore(S,J,ae)},at.useTransition=function(){return ee.H.useTransition()},at.version="19.1.0",at}var Yv;function tf(){return Yv||(Yv=1,Vg.exports=u6()),Vg.exports}var re=tf();const _e=o0(re);var Hg={exports:{}},Qc={},Fg={exports:{}},zg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function l6(){return Gv||(Gv=1,function(t){function e(H,Q){var se=H.length;H.push(Q);e:for(;0<se;){var te=se-1>>>1,S=H[te];if(0<s(S,Q))H[te]=Q,H[se]=S,se=te;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Q=H[0],se=H.pop();if(se!==Q){H[0]=se;e:for(var te=0,S=H.length,J=S>>>1;te<J;){var ae=2*(te+1)-1,P=H[ae],ge=ae+1,Ne=H[ge];if(0>s(P,se))ge<S&&0>s(Ne,P)?(H[te]=Ne,H[ge]=se,te=ge):(H[te]=P,H[ae]=se,te=ae);else if(ge<S&&0>s(Ne,se))H[te]=Ne,H[ge]=se,te=ge;else break e}}return Q}function s(H,Q){var se=H.sortIndex-Q.sortIndex;return se!==0?se:H.id-Q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var f=[],d=[],p=1,y=null,T=3,b=!1,w=!1,N=!1,k=!1,D=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function j(H){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=H)r(d),Q.sortIndex=Q.expirationTime,e(f,Q);else break;Q=n(d)}}function ee(H){if(N=!1,j(H),!w)if(n(f)!==null)w=!0,$||($=!0,U());else{var Q=n(d);Q!==null&&K(ee,Q.startTime-H)}}var $=!1,R=-1,C=5,O=-1;function M(){return k?!0:!(t.unstable_now()-O<C)}function B(){if(k=!1,$){var H=t.unstable_now();O=H;var Q=!0;try{e:{w=!1,N&&(N=!1,F(R),R=-1),b=!0;var se=T;try{t:{for(j(H),y=n(f);y!==null&&!(y.expirationTime>H&&M());){var te=y.callback;if(typeof te=="function"){y.callback=null,T=y.priorityLevel;var S=te(y.expirationTime<=H);if(H=t.unstable_now(),typeof S=="function"){y.callback=S,j(H),Q=!0;break t}y===n(f)&&r(f),j(H)}else r(f);y=n(f)}if(y!==null)Q=!0;else{var J=n(d);J!==null&&K(ee,J.startTime-H),Q=!1}}break e}finally{y=null,T=se,b=!1}Q=void 0}}finally{Q?U():$=!1}}}var U;if(typeof q=="function")U=function(){q(B)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,L=I.port2;I.port1.onmessage=B,U=function(){L.postMessage(null)}}else U=function(){D(B,0)};function K(H,Q){R=D(function(){H(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(H){switch(T){case 1:case 2:case 3:var Q=3;break;default:Q=T}var se=T;T=Q;try{return H()}finally{T=se}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(H,Q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var se=T;T=H;try{return Q()}finally{T=se}},t.unstable_scheduleCallback=function(H,Q,se){var te=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?te+se:te):se=te,H){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=se+S,H={id:p++,callback:Q,priorityLevel:H,startTime:se,expirationTime:S,sortIndex:-1},se>te?(H.sortIndex=se,e(d,H),n(f)===null&&H===n(d)&&(N?(F(R),R=-1):N=!0,K(ee,se-te))):(H.sortIndex=S,e(f,H),w||b||(w=!0,$||($=!0,U()))),H},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(H){var Q=T;return function(){var se=T;T=Q;try{return H.apply(this,arguments)}finally{T=se}}}}(zg)),zg}var $v;function c6(){return $v||($v=1,Fg.exports=l6()),Fg.exports}var jg={exports:{}},vr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv;function h6(){if(Kv)return vr;Kv=1;var t=tf();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,d,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:f,containerInfo:d,implementation:p}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return vr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vr.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(f,d,null,p)},vr.flushSync=function(f){var d=u.T,p=r.p;try{if(u.T=null,r.p=2,f)return f()}finally{u.T=d,r.p=p,r.d.f()}},vr.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},vr.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},vr.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,y=c(p,d.crossOrigin),T=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:T,fetchPriority:b}):p==="script"&&r.d.X(f,{crossOrigin:y,integrity:T,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},vr.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},vr.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,y=c(p,d.crossOrigin);r.d.L(f,p,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},vr.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=c(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},vr.requestFormReset=function(f){r.d.r(f)},vr.unstable_batchedUpdates=function(f,d){return f(d)},vr.useFormState=function(f,d,p){return u.H.useFormState(f,d,p)},vr.useFormStatus=function(){return u.H.useHostTransitionStatus()},vr.version="19.1.0",vr}var Xv;function Zw(){if(Xv)return jg.exports;Xv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),jg.exports=h6(),jg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function f6(){if(Qv)return Qc;Qv=1;var t=c6(),e=tf(),n=Zw();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function u(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function c(i){if(o(i)!==i)throw Error(r(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,h=a;;){var g=l.return;if(g===null)break;var E=g.alternate;if(E===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===E.child){for(E=g.child;E;){if(E===l)return c(g),i;if(E===h)return c(g),a;E=E.sibling}throw Error(r(188))}if(l.return!==h.return)l=g,h=E;else{for(var x=!1,V=g.child;V;){if(V===l){x=!0,l=g,h=E;break}if(V===h){x=!0,h=g,l=E;break}V=V.sibling}if(!x){for(V=E.child;V;){if(V===l){x=!0,l=E,h=g;break}if(V===h){x=!0,h=E,l=g;break}V=V.sibling}if(!x)throw Error(r(189))}}if(l.alternate!==h)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function d(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=d(i),a!==null)return a;i=i.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),q=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var I=Symbol.for("react.client.reference");function L(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===I?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case k:return"Profiler";case N:return"StrictMode";case ee:return"Suspense";case $:return"SuspenseList";case O:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case q:return(i.displayName||"Context")+".Provider";case F:return(i._context.displayName||"Context")+".Consumer";case j:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return a=i.displayName||null,a!==null?a:L(i.type)||"Memo";case C:a=i._payload,i=i._init;try{return L(i(a))}catch{}}return null}var K=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},te=[],S=-1;function J(i){return{current:i}}function ae(i){0>S||(i.current=te[S],te[S]=null,S--)}function P(i,a){S++,te[S]=i.current,i.current=a}var ge=J(null),Ne=J(null),Ie=J(null),je=J(null);function xe(i,a){switch(P(Ie,a),P(Ne,i),P(ge,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?gv(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=gv(a),i=yv(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ae(ge),P(ge,i)}function Me(){ae(ge),ae(Ne),ae(Ie)}function He(i){i.memoizedState!==null&&P(je,i);var a=ge.current,l=yv(a,i.type);a!==l&&(P(Ne,i),P(ge,l))}function Je(i){Ne.current===i&&(ae(ge),ae(Ne)),je.current===i&&(ae(je),qc._currentValue=se)}var an=Object.prototype.hasOwnProperty,Jt=t.unstable_scheduleCallback,on=t.unstable_cancelCallback,Dt=t.unstable_shouldYield,Rn=t.unstable_requestPaint,Qe=t.unstable_now,qe=t.unstable_getCurrentPriorityLevel,cn=t.unstable_ImmediatePriority,Un=t.unstable_UserBlockingPriority,Vn=t.unstable_NormalPriority,Kn=t.unstable_LowPriority,Hn=t.unstable_IdlePriority,An=t.log,or=t.unstable_setDisableYieldValue,fe=null,be=null;function Ve(i){if(typeof An=="function"&&or(i),be&&typeof be.setStrictMode=="function")try{be.setStrictMode(fe,i)}catch{}}var Ye=Math.clz32?Math.clz32:Ht,ut=Math.log,bt=Math.LN2;function Ht(i){return i>>>=0,i===0?32:31-(ut(i)/bt|0)|0}var Ft=256,zt=4194304;function vt(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function lt(i,a,l){var h=i.pendingLanes;if(h===0)return 0;var g=0,E=i.suspendedLanes,x=i.pingedLanes;i=i.warmLanes;var V=h&134217727;return V!==0?(h=V&~E,h!==0?g=vt(h):(x&=V,x!==0?g=vt(x):l||(l=V&~i,l!==0&&(g=vt(l))))):(V=h&~E,V!==0?g=vt(V):x!==0?g=vt(x):l||(l=h&~i,l!==0&&(g=vt(l)))),g===0?0:a!==0&&a!==g&&(a&E)===0&&(E=g&-g,l=a&-a,E>=l||E===32&&(l&4194048)!==0)?a:g}function Wt(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Gt(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yi(){var i=Ft;return Ft<<=1,(Ft&4194048)===0&&(Ft=256),i}function _r(){var i=zt;return zt<<=1,(zt&62914560)===0&&(zt=4194304),i}function Fn(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Rr(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Tr(i,a,l,h,g,E){var x=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var V=i.entanglements,Z=i.expirationTimes,he=i.hiddenUpdates;for(l=x&~l;0<l;){var Te=31-Ye(l),Se=1<<Te;V[Te]=0,Z[Te]=-1;var de=he[Te];if(de!==null)for(he[Te]=null,Te=0;Te<de.length;Te++){var me=de[Te];me!==null&&(me.lane&=-536870913)}l&=~Se}h!==0&&jr(i,h,0),E!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=E&~(x&~a))}function jr(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var h=31-Ye(a);i.entangledLanes|=a,i.entanglements[h]=i.entanglements[h]|1073741824|l&4194090}function Us(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var h=31-Ye(l),g=1<<h;g&a|i[h]&a&&(i[h]|=a),l&=~g}}function ri(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Gi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Dr(){var i=Q.p;return i!==0?i:(i=window.event,i===void 0?32:Pv(i.type))}function ii(i,a){var l=Q.p;try{return Q.p=i,a()}finally{Q.p=l}}var $t=Math.random().toString(36).slice(2),Lt="__reactFiber$"+$t,hn="__reactProps$"+$t,En="__reactContainer$"+$t,os="__reactEvents$"+$t,So="__reactListeners$"+$t,Or="__reactHandles$"+$t,us="__reactResources$"+$t,Si="__reactMarker$"+$t;function si(i){delete i[Lt],delete i[hn],delete i[os],delete i[So],delete i[Or]}function kr(i){var a=i[Lt];if(a)return a;for(var l=i.parentNode;l;){if(a=l[En]||l[Lt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=bv(i);i!==null;){if(l=i[Lt])return l;i=bv(i)}return a}i=l,l=i.parentNode}return null}function Xn(i){if(i=i[Lt]||i[En]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Lr(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function zn(i){var a=i[us];return a||(a=i[us]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ne(i){i[Si]=!0}var pe=new Set,De={};function Pe(i,a){pt(i,a),pt(i+"Capture",a)}function pt(i,a){for(De[i]=a,i=0;i<a.length;i++)pe.add(a[i])}var rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jt={},Mt={};function Qn(i){return an.call(Mt,i)?!0:an.call(jt,i)?!1:rt.test(i)?Mt[i]=!0:(jt[i]=!0,!1)}function Pt(i,a,l){if(Qn(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Nt(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function Bt(i,a,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+h)}}var Dn,_n;function wn(i){if(Dn===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Dn=a&&a[1]||"",_n=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Dn+i+_n}var Mr=!1;function Pr(i,a){if(!i||Mr)return"";Mr=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(me){var de=me}Reflect.construct(i,[],Se)}else{try{Se.call()}catch(me){de=me}i.call(Se.prototype)}}else{try{throw Error()}catch(me){de=me}(Se=i())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(me){if(me&&de&&typeof me.stack=="string")return[me.stack,de.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=h.DetermineComponentFrameRoot(),x=E[0],V=E[1];if(x&&V){var Z=x.split(`
`),he=V.split(`
`);for(g=h=0;h<Z.length&&!Z[h].includes("DetermineComponentFrameRoot");)h++;for(;g<he.length&&!he[g].includes("DetermineComponentFrameRoot");)g++;if(h===Z.length||g===he.length)for(h=Z.length-1,g=he.length-1;1<=h&&0<=g&&Z[h]!==he[g];)g--;for(;1<=h&&0<=g;h--,g--)if(Z[h]!==he[g]){if(h!==1||g!==1)do if(h--,g--,0>g||Z[h]!==he[g]){var Te=`
`+Z[h].replace(" at new "," at ");return i.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",i.displayName)),Te}while(1<=h&&0<=g);break}}}finally{Mr=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?wn(l):""}function Ai(i){switch(i.tag){case 26:case 27:case 5:return wn(i.type);case 16:return wn("Lazy");case 13:return wn("Suspense");case 19:return wn("SuspenseList");case 0:case 15:return Pr(i.type,!1);case 11:return Pr(i.type.render,!1);case 1:return Pr(i.type,!0);case 31:return wn("Activity");default:return""}}function wi(i){try{var a="";do a+=Ai(i),i=i.return;while(i);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Wn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ao(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function tc(i){var a=Ao(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),h=""+i[a];if(!i.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,E=l.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(x){h=""+x,E.call(this,x)}}),Object.defineProperty(i,a,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(x){h=""+x},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function St(i){i._valueTracker||(i._valueTracker=tc(i))}function Tt(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return i&&(h=Ao(i)?i.checked?"true":"false":i.value),i=h,i!==l?(a.setValue(i),!0):!1}function xi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ii=/[\n"\\]/g;function fn(i){return i.replace(Ii,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function en(i,a,l,h,g,E,x,V){i.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.type=x:i.removeAttribute("type"),a!=null?x==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Wn(a)):i.value!==""+Wn(a)&&(i.value=""+Wn(a)):x!=="submit"&&x!=="reset"||i.removeAttribute("value"),a!=null?lr(i,x,Wn(a)):l!=null?lr(i,x,Wn(l)):h!=null&&i.removeAttribute("value"),g==null&&E!=null&&(i.defaultChecked=!!E),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?i.name=""+Wn(V):i.removeAttribute("name")}function ur(i,a,l,h,g,E,x,V){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.type=E),a!=null||l!=null){if(!(E!=="submit"&&E!=="reset"||a!=null))return;l=l!=null?""+Wn(l):"",a=a!=null?""+Wn(a):l,V||a===i.value||(i.value=a),i.defaultValue=a}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=V?i.checked:!!h,i.defaultChecked=!!h,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.name=x)}function lr(i,a,l){a==="number"&&xi(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Br(i,a,l,h){if(i=i.options,a){a={};for(var g=0;g<l.length;g++)a["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=a.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&h&&(i[l].defaultSelected=!0)}else{for(l=""+Wn(l),a=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,h&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function Ct(i,a,l){if(a!=null&&(a=""+Wn(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+Wn(l):""}function $i(i,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(r(92));if(K(h)){if(1<h.length)throw Error(r(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=Wn(a),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h)}function cr(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Ur=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wo(i,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":h?i.setProperty(a,l):typeof l!="number"||l===0||Ur.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function ls(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var g in a)h=a[g],a.hasOwnProperty(g)&&l[g]!==h&&wo(i,g,h)}else for(var E in a)a.hasOwnProperty(E)&&wo(i,E,a[E])}function Vs(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ya=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ea=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hs(i){return Ea.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var qr=null;function hr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Fs=null,zs=null;function nc(i){var a=Xn(i);if(a&&(i=a.stateNode)){var l=i[hn]||null;e:switch(i=a.stateNode,a.type){case"input":if(en(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+fn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==i&&h.form===i.form){var g=h[hn]||null;if(!g)throw Error(r(90));en(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===i.form&&Tt(h)}break e;case"textarea":Ct(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Br(i,!!l.multiple,a,!1)}}}var cs=!1;function wf(i,a,l){if(cs)return i(a,l);cs=!0;try{var h=i(a);return h}finally{if(cs=!1,(Fs!==null||zs!==null)&&(Ed(),Fs&&(a=Fs,i=zs,zs=Fs=null,nc(a),i)))for(a=0;a<i.length;a++)nc(i[a])}}function xo(i,a){var l=i.stateNode;if(l===null)return null;var h=l[hn]||null;if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var Ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ci=!1;if(Ki)try{var Io={};Object.defineProperty(Io,"passive",{get:function(){Ci=!0}}),window.addEventListener("test",Io,Io),window.removeEventListener("test",Io,Io)}catch{Ci=!1}var hs=null,_a=null,js=null;function rc(){if(js)return js;var i,a=_a,l=a.length,h,g="value"in hs?hs.value:hs.textContent,E=g.length;for(i=0;i<l&&a[i]===g[i];i++);var x=l-i;for(h=1;h<=x&&a[l-h]===g[E-h];h++);return js=g.slice(i,1<h?1-h:void 0)}function fs(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function ds(){return!0}function ic(){return!1}function Zn(i){function a(l,h,g,E,x){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=E,this.target=x,this.currentTarget=null;for(var V in i)i.hasOwnProperty(V)&&(l=i[V],this[V]=l?l(E):E[V]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?ds:ic,this.isPropagationStopped=ic,this}return p(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),a}var Ut={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eu=Zn(Ut),Co=p({},Ut,{view:0,detail:0}),xf=Zn(Co),_u,Tu,ms,No=p({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ms&&(ms&&i.type==="mousemove"?(_u=i.screenX-ms.screenX,Tu=i.screenY-ms.screenY):Tu=_u=0,ms=i),_u)},movementY:function(i){return"movementY"in i?i.movementY:Tu}}),Ni=Zn(No),If=p({},No,{dataTransfer:0}),G0=Zn(If),Ro=p({},Co,{relatedTarget:0}),bu=Zn(Ro),sc=p({},Ut,{animationName:0,elapsedTime:0,pseudoElement:0}),vu=Zn(sc),Cf=p({},Ut,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Su=Zn(Cf),$0=p({},Ut,{data:0}),ac=Zn($0),Do={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oc(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Rf[i])?!!a[i]:!1}function Oo(){return oc}var Df=p({},Co,{key:function(i){if(i.key){var a=Do[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=fs(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nf[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oo,charCode:function(i){return i.type==="keypress"?fs(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?fs(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Au=Zn(Df),Of=p({},No,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uc=Zn(Of),qs=p({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oo}),kf=Zn(qs),Lf=p({},Ut,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mf=Zn(Lf),Pf=p({},No,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),wu=Zn(Pf),Vr=p({},Ut,{newState:0,oldState:0}),Bf=Zn(Vr),Uf=[9,13,27,32],ps=Ki&&"CompositionEvent"in window,m=null;Ki&&"documentMode"in document&&(m=document.documentMode);var v=Ki&&"TextEvent"in window&&!m,A=Ki&&(!ps||m&&8<m&&11>=m),z=" ",ue=!1;function ye(i,a){switch(i){case"keyup":return Uf.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Le(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var At=!1;function jn(i,a){switch(i){case"compositionend":return Le(a);case"keypress":return a.which!==32?null:(ue=!0,z);case"textInput":return i=a.data,i===z&&ue?null:i;default:return null}}function wt(i,a){if(At)return i==="compositionend"||!ps&&ye(i,a)?(i=rc(),js=_a=hs=null,At=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return A&&a.locale!=="ko"?null:a.data;default:return null}}var Jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Jn[i.type]:a==="textarea"}function Ys(i,a,l,h){Fs?zs?zs.push(h):zs=[h]:Fs=h,a=Ad(a,"onChange"),0<a.length&&(l=new Eu("onChange","change",null,l,h),i.push({event:l,listeners:a}))}var fr=null,gs=null;function lc(i){hv(i,0)}function Vf(i){var a=Lr(i);if(Tt(a))return i}function O1(i,a){if(i==="change")return a}var k1=!1;if(Ki){var K0;if(Ki){var X0="oninput"in document;if(!X0){var L1=document.createElement("div");L1.setAttribute("oninput","return;"),X0=typeof L1.oninput=="function"}K0=X0}else K0=!1;k1=K0&&(!document.documentMode||9<document.documentMode)}function M1(){fr&&(fr.detachEvent("onpropertychange",P1),gs=fr=null)}function P1(i){if(i.propertyName==="value"&&Vf(gs)){var a=[];Ys(a,gs,i,hr(i)),wf(lc,a)}}function P3(i,a,l){i==="focusin"?(M1(),fr=a,gs=l,fr.attachEvent("onpropertychange",P1)):i==="focusout"&&M1()}function B3(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Vf(gs)}function U3(i,a){if(i==="click")return Vf(a)}function V3(i,a){if(i==="input"||i==="change")return Vf(a)}function H3(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var ai=typeof Object.is=="function"?Object.is:H3;function cc(i,a){if(ai(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!an.call(a,g)||!ai(i[g],a[g]))return!1}return!0}function B1(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function U1(i,a){var l=B1(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=a&&h>=a)return{node:l,offset:a-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=B1(l)}}function V1(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?V1(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function H1(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=xi(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=xi(i.document)}return a}function Q0(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var F3=Ki&&"documentMode"in document&&11>=document.documentMode,xu=null,W0=null,hc=null,Z0=!1;function F1(i,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Z0||xu==null||xu!==xi(h)||(h=xu,"selectionStart"in h&&Q0(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),hc&&cc(hc,h)||(hc=h,h=Ad(W0,"onSelect"),0<h.length&&(a=new Eu("onSelect","select",null,a,l),i.push({event:a,listeners:h}),a.target=xu)))}function ko(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var Iu={animationend:ko("Animation","AnimationEnd"),animationiteration:ko("Animation","AnimationIteration"),animationstart:ko("Animation","AnimationStart"),transitionrun:ko("Transition","TransitionRun"),transitionstart:ko("Transition","TransitionStart"),transitioncancel:ko("Transition","TransitionCancel"),transitionend:ko("Transition","TransitionEnd")},J0={},z1={};Ki&&(z1=document.createElement("div").style,"AnimationEvent"in window||(delete Iu.animationend.animation,delete Iu.animationiteration.animation,delete Iu.animationstart.animation),"TransitionEvent"in window||delete Iu.transitionend.transition);function Lo(i){if(J0[i])return J0[i];if(!Iu[i])return i;var a=Iu[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in z1)return J0[i]=a[l];return i}var j1=Lo("animationend"),q1=Lo("animationiteration"),Y1=Lo("animationstart"),z3=Lo("transitionrun"),j3=Lo("transitionstart"),q3=Lo("transitioncancel"),G1=Lo("transitionend"),$1=new Map,ep="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ep.push("scrollEnd");function Xi(i,a){$1.set(i,a),Pe(a,[i])}var K1=new WeakMap;function Ri(i,a){if(typeof i=="object"&&i!==null){var l=K1.get(i);return l!==void 0?l:(a={value:i,source:a,stack:wi(a)},K1.set(i,a),a)}return{value:i,source:a,stack:wi(a)}}var Di=[],Cu=0,tp=0;function Hf(){for(var i=Cu,a=tp=Cu=0;a<i;){var l=Di[a];Di[a++]=null;var h=Di[a];Di[a++]=null;var g=Di[a];Di[a++]=null;var E=Di[a];if(Di[a++]=null,h!==null&&g!==null){var x=h.pending;x===null?g.next=g:(g.next=x.next,x.next=g),h.pending=g}E!==0&&X1(l,g,E)}}function Ff(i,a,l,h){Di[Cu++]=i,Di[Cu++]=a,Di[Cu++]=l,Di[Cu++]=h,tp|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function np(i,a,l,h){return Ff(i,a,l,h),zf(i)}function Nu(i,a){return Ff(i,null,null,a),zf(i)}function X1(i,a,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var g=!1,E=i.return;E!==null;)E.childLanes|=l,h=E.alternate,h!==null&&(h.childLanes|=l),E.tag===22&&(i=E.stateNode,i===null||i._visibility&1||(g=!0)),i=E,E=E.return;return i.tag===3?(E=i.stateNode,g&&a!==null&&(g=31-Ye(l),i=E.hiddenUpdates,h=i[g],h===null?i[g]=[a]:h.push(a),a.lane=l|536870912),E):null}function zf(i){if(50<Pc)throw Pc=0,ug=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Ru={};function Y3(i,a,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(i,a,l,h){return new Y3(i,a,l,h)}function rp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Gs(i,a){var l=i.alternate;return l===null?(l=oi(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function Q1(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function jf(i,a,l,h,g,E){var x=0;if(h=i,typeof i=="function")rp(i)&&(x=1);else if(typeof i=="string")x=$D(i,l,ge.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case O:return i=oi(31,l,a,g),i.elementType=O,i.lanes=E,i;case w:return Mo(l.children,g,E,a);case N:x=8,g|=24;break;case k:return i=oi(12,l,a,g|2),i.elementType=k,i.lanes=E,i;case ee:return i=oi(13,l,a,g),i.elementType=ee,i.lanes=E,i;case $:return i=oi(19,l,a,g),i.elementType=$,i.lanes=E,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case D:case q:x=10;break e;case F:x=9;break e;case j:x=11;break e;case R:x=14;break e;case C:x=16,h=null;break e}x=29,l=Error(r(130,i===null?"null":typeof i,"")),h=null}return a=oi(x,l,a,g),a.elementType=i,a.type=h,a.lanes=E,a}function Mo(i,a,l,h){return i=oi(7,i,h,a),i.lanes=l,i}function ip(i,a,l){return i=oi(6,i,null,a),i.lanes=l,i}function sp(i,a,l){return a=oi(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Du=[],Ou=0,qf=null,Yf=0,Oi=[],ki=0,Po=null,$s=1,Ks="";function Bo(i,a){Du[Ou++]=Yf,Du[Ou++]=qf,qf=i,Yf=a}function W1(i,a,l){Oi[ki++]=$s,Oi[ki++]=Ks,Oi[ki++]=Po,Po=i;var h=$s;i=Ks;var g=32-Ye(h)-1;h&=~(1<<g),l+=1;var E=32-Ye(a)+g;if(30<E){var x=g-g%5;E=(h&(1<<x)-1).toString(32),h>>=x,g-=x,$s=1<<32-Ye(a)+g|l<<g|h,Ks=E+i}else $s=1<<E|l<<g|h,Ks=i}function ap(i){i.return!==null&&(Bo(i,1),W1(i,1,0))}function op(i){for(;i===qf;)qf=Du[--Ou],Du[Ou]=null,Yf=Du[--Ou],Du[Ou]=null;for(;i===Po;)Po=Oi[--ki],Oi[ki]=null,Ks=Oi[--ki],Oi[ki]=null,$s=Oi[--ki],Oi[ki]=null}var Hr=null,Tn=null,Ot=!1,Uo=null,ys=!1,up=Error(r(519));function Vo(i){var a=Error(r(418,""));throw mc(Ri(a,i)),up}function Z1(i){var a=i.stateNode,l=i.type,h=i.memoizedProps;switch(a[Lt]=i,a[hn]=h,l){case"dialog":yt("cancel",a),yt("close",a);break;case"iframe":case"object":case"embed":yt("load",a);break;case"video":case"audio":for(l=0;l<Uc.length;l++)yt(Uc[l],a);break;case"source":yt("error",a);break;case"img":case"image":case"link":yt("error",a),yt("load",a);break;case"details":yt("toggle",a);break;case"input":yt("invalid",a),ur(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),St(a);break;case"select":yt("invalid",a);break;case"textarea":yt("invalid",a),$i(a,h.value,h.defaultValue,h.children),St(a)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||pv(a.textContent,l)?(h.popover!=null&&(yt("beforetoggle",a),yt("toggle",a)),h.onScroll!=null&&yt("scroll",a),h.onScrollEnd!=null&&yt("scrollend",a),h.onClick!=null&&(a.onclick=wd),a=!0):a=!1,a||Vo(i)}function J1(i){for(Hr=i.return;Hr;)switch(Hr.tag){case 5:case 13:ys=!1;return;case 27:case 3:ys=!0;return;default:Hr=Hr.return}}function fc(i){if(i!==Hr)return!1;if(!Ot)return J1(i),Ot=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Ag(i.type,i.memoizedProps)),l=!l),l&&Tn&&Vo(i),J1(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(a===0){Tn=Wi(i.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;i=i.nextSibling}Tn=null}}else a===27?(a=Tn,Ma(i.type)?(i=Cg,Cg=null,Tn=i):Tn=a):Tn=Hr?Wi(i.stateNode.nextSibling):null;return!0}function dc(){Tn=Hr=null,Ot=!1}function eT(){var i=Uo;return i!==null&&($r===null?$r=i:$r.push.apply($r,i),Uo=null),i}function mc(i){Uo===null?Uo=[i]:Uo.push(i)}var lp=J(null),Ho=null,Xs=null;function Ta(i,a,l){P(lp,a._currentValue),a._currentValue=l}function Qs(i){i._currentValue=lp.current,ae(lp)}function cp(i,a,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),i===l)break;i=i.return}}function hp(i,a,l,h){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var E=g.dependencies;if(E!==null){var x=g.child;E=E.firstContext;e:for(;E!==null;){var V=E;E=g;for(var Z=0;Z<a.length;Z++)if(V.context===a[Z]){E.lanes|=l,V=E.alternate,V!==null&&(V.lanes|=l),cp(E.return,l,i),h||(x=null);break e}E=V.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(r(341));x.lanes|=l,E=x.alternate,E!==null&&(E.lanes|=l),cp(x,l,i),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===i){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function pc(i,a,l,h){i=null;for(var g=a,E=!1;g!==null;){if(!E){if((g.flags&524288)!==0)E=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var V=g.type;ai(g.pendingProps.value,x.value)||(i!==null?i.push(V):i=[V])}}else if(g===je.current){if(x=g.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(qc):i=[qc])}g=g.return}i!==null&&hp(a,i,l,h),a.flags|=262144}function Gf(i){for(i=i.firstContext;i!==null;){if(!ai(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Fo(i){Ho=i,Xs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function br(i){return tT(Ho,i)}function $f(i,a){return Ho===null&&Fo(i),tT(i,a)}function tT(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Xs===null){if(i===null)throw Error(r(308));Xs=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Xs=Xs.next=a;return l}var G3=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},$3=t.unstable_scheduleCallback,K3=t.unstable_NormalPriority,Yn={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fp(){return{controller:new G3,data:new Map,refCount:0}}function gc(i){i.refCount--,i.refCount===0&&$3(K3,function(){i.controller.abort()})}var yc=null,dp=0,ku=0,Lu=null;function X3(i,a){if(yc===null){var l=yc=[];dp=0,ku=pg(),Lu={status:"pending",value:void 0,then:function(h){l.push(h)}}}return dp++,a.then(nT,nT),a}function nT(){if(--dp===0&&yc!==null){Lu!==null&&(Lu.status="fulfilled");var i=yc;yc=null,ku=0,Lu=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function Q3(i,a){var l=[],h={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){h.status="fulfilled",h.value=a;for(var g=0;g<l.length;g++)(0,l[g])(a)},function(g){for(h.status="rejected",h.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),h}var rT=H.S;H.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&X3(i,a),rT!==null&&rT(i,a)};var zo=J(null);function mp(){var i=zo.current;return i!==null?i:tn.pooledCache}function Kf(i,a){a===null?P(zo,zo.current):P(zo,a.pool)}function iT(){var i=mp();return i===null?null:{parent:Yn._currentValue,pool:i}}var Ec=Error(r(460)),sT=Error(r(474)),Xf=Error(r(542)),pp={then:function(){}};function aT(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Qf(){}function oT(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Qf,Qf),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,lT(i),i;default:if(typeof a.status=="string")a.then(Qf,Qf);else{if(i=tn,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(h){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=h}},function(h){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,lT(i),i}throw _c=a,Ec}}var _c=null;function uT(){if(_c===null)throw Error(r(459));var i=_c;return _c=null,i}function lT(i){if(i===Ec||i===Xf)throw Error(r(483))}var ba=!1;function gp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yp(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function va(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Sa(i,a,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(qt&2)!==0){var g=h.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),h.pending=a,a=zf(i),X1(i,null,l),a}return Ff(i,h,a,l),zf(i)}function Tc(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Us(i,l)}}function Ep(i,a){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,E=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};E===null?g=E=x:E=E.next=x,l=l.next}while(l!==null);E===null?g=E=a:E=E.next=a}else g=E=a;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:E,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var _p=!1;function bc(){if(_p){var i=Lu;if(i!==null)throw i}}function vc(i,a,l,h){_p=!1;var g=i.updateQueue;ba=!1;var E=g.firstBaseUpdate,x=g.lastBaseUpdate,V=g.shared.pending;if(V!==null){g.shared.pending=null;var Z=V,he=Z.next;Z.next=null,x===null?E=he:x.next=he,x=Z;var Te=i.alternate;Te!==null&&(Te=Te.updateQueue,V=Te.lastBaseUpdate,V!==x&&(V===null?Te.firstBaseUpdate=he:V.next=he,Te.lastBaseUpdate=Z))}if(E!==null){var Se=g.baseState;x=0,Te=he=Z=null,V=E;do{var de=V.lane&-536870913,me=de!==V.lane;if(me?(xt&de)===de:(h&de)===de){de!==0&&de===ku&&(_p=!0),Te!==null&&(Te=Te.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var et=i,Ke=V;de=a;var Qt=l;switch(Ke.tag){case 1:if(et=Ke.payload,typeof et=="function"){Se=et.call(Qt,Se,de);break e}Se=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=Ke.payload,de=typeof et=="function"?et.call(Qt,Se,de):et,de==null)break e;Se=p({},Se,de);break e;case 2:ba=!0}}de=V.callback,de!==null&&(i.flags|=64,me&&(i.flags|=8192),me=g.callbacks,me===null?g.callbacks=[de]:me.push(de))}else me={lane:de,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Te===null?(he=Te=me,Z=Se):Te=Te.next=me,x|=de;if(V=V.next,V===null){if(V=g.shared.pending,V===null)break;me=V,V=me.next,me.next=null,g.lastBaseUpdate=me,g.shared.pending=null}}while(!0);Te===null&&(Z=Se),g.baseState=Z,g.firstBaseUpdate=he,g.lastBaseUpdate=Te,E===null&&(g.shared.lanes=0),Da|=x,i.lanes=x,i.memoizedState=Se}}function cT(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function hT(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)cT(l[i],a)}var Mu=J(null),Wf=J(0);function fT(i,a){i=ra,P(Wf,i),P(Mu,a),ra=i|a.baseLanes}function Tp(){P(Wf,ra),P(Mu,Mu.current)}function bp(){ra=Wf.current,ae(Mu),ae(Wf)}var Aa=0,ct=null,Kt=null,On=null,Zf=!1,Pu=!1,jo=!1,Jf=0,Sc=0,Bu=null,W3=0;function xn(){throw Error(r(321))}function vp(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!ai(i[l],a[l]))return!1;return!0}function Sp(i,a,l,h,g,E){return Aa=E,ct=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,H.H=i===null||i.memoizedState===null?XT:QT,jo=!1,E=l(h,g),jo=!1,Pu&&(E=mT(a,l,h,g)),dT(i),E}function dT(i){H.H=sd;var a=Kt!==null&&Kt.next!==null;if(Aa=0,On=Kt=ct=null,Zf=!1,Sc=0,Bu=null,a)throw Error(r(300));i===null||er||(i=i.dependencies,i!==null&&Gf(i)&&(er=!0))}function mT(i,a,l,h){ct=i;var g=0;do{if(Pu&&(Bu=null),Sc=0,Pu=!1,25<=g)throw Error(r(301));if(g+=1,On=Kt=null,i.updateQueue!=null){var E=i.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}H.H=iD,E=a(l,h)}while(Pu);return E}function Z3(){var i=H.H,a=i.useState()[0];return a=typeof a.then=="function"?Ac(a):a,i=i.useState()[0],(Kt!==null?Kt.memoizedState:null)!==i&&(ct.flags|=1024),a}function Ap(){var i=Jf!==0;return Jf=0,i}function wp(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function xp(i){if(Zf){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Zf=!1}Aa=0,On=Kt=ct=null,Pu=!1,Sc=Jf=0,Bu=null}function Yr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?ct.memoizedState=On=i:On=On.next=i,On}function kn(){if(Kt===null){var i=ct.alternate;i=i!==null?i.memoizedState:null}else i=Kt.next;var a=On===null?ct.memoizedState:On.next;if(a!==null)On=a,Kt=i;else{if(i===null)throw ct.alternate===null?Error(r(467)):Error(r(310));Kt=i,i={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},On===null?ct.memoizedState=On=i:On=On.next=i}return On}function Ip(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ac(i){var a=Sc;return Sc+=1,Bu===null&&(Bu=[]),i=oT(Bu,i,a),a=ct,(On===null?a.memoizedState:On.next)===null&&(a=a.alternate,H.H=a===null||a.memoizedState===null?XT:QT),i}function ed(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ac(i);if(i.$$typeof===q)return br(i)}throw Error(r(438,String(i)))}function Cp(i){var a=null,l=ct.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=ct.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Ip(),ct.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),h=0;h<i;h++)l[h]=M;return a.index++,l}function Ws(i,a){return typeof a=="function"?a(i):a}function td(i){var a=kn();return Np(a,Kt,i)}function Np(i,a,l){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var g=i.baseQueue,E=h.pending;if(E!==null){if(g!==null){var x=g.next;g.next=E.next,E.next=x}a.baseQueue=g=E,h.pending=null}if(E=i.baseState,g===null)i.memoizedState=E;else{a=g.next;var V=x=null,Z=null,he=a,Te=!1;do{var Se=he.lane&-536870913;if(Se!==he.lane?(xt&Se)===Se:(Aa&Se)===Se){var de=he.revertLane;if(de===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Se===ku&&(Te=!0);else if((Aa&de)===de){he=he.next,de===ku&&(Te=!0);continue}else Se={lane:0,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Z===null?(V=Z=Se,x=E):Z=Z.next=Se,ct.lanes|=de,Da|=de;Se=he.action,jo&&l(E,Se),E=he.hasEagerState?he.eagerState:l(E,Se)}else de={lane:Se,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Z===null?(V=Z=de,x=E):Z=Z.next=de,ct.lanes|=Se,Da|=Se;he=he.next}while(he!==null&&he!==a);if(Z===null?x=E:Z.next=V,!ai(E,i.memoizedState)&&(er=!0,Te&&(l=Lu,l!==null)))throw l;i.memoizedState=E,i.baseState=x,i.baseQueue=Z,h.lastRenderedState=E}return g===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function Rp(i){var a=kn(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var h=l.dispatch,g=l.pending,E=a.memoizedState;if(g!==null){l.pending=null;var x=g=g.next;do E=i(E,x.action),x=x.next;while(x!==g);ai(E,a.memoizedState)||(er=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),l.lastRenderedState=E}return[E,h]}function pT(i,a,l){var h=ct,g=kn(),E=Ot;if(E){if(l===void 0)throw Error(r(407));l=l()}else l=a();var x=!ai((Kt||g).memoizedState,l);x&&(g.memoizedState=l,er=!0),g=g.queue;var V=ET.bind(null,h,g,i);if(wc(2048,8,V,[i]),g.getSnapshot!==a||x||On!==null&&On.memoizedState.tag&1){if(h.flags|=2048,Uu(9,nd(),yT.bind(null,h,g,l,a),null),tn===null)throw Error(r(349));E||(Aa&124)!==0||gT(h,a,l)}return l}function gT(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=ct.updateQueue,a===null?(a=Ip(),ct.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function yT(i,a,l,h){a.value=l,a.getSnapshot=h,_T(a)&&TT(i)}function ET(i,a,l){return l(function(){_T(a)&&TT(i)})}function _T(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!ai(i,l)}catch{return!0}}function TT(i){var a=Nu(i,2);a!==null&&fi(a,i,2)}function Dp(i){var a=Yr();if(typeof i=="function"){var l=i;if(i=l(),jo){Ve(!0);try{l()}finally{Ve(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:i},a}function bT(i,a,l,h){return i.baseState=l,Np(i,Kt,typeof h=="function"?h:Ws)}function J3(i,a,l,h,g){if(id(i))throw Error(r(485));if(i=a.action,i!==null){var E={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){E.listeners.push(x)}};H.T!==null?l(!0):E.isTransition=!1,h(E),l=a.pending,l===null?(E.next=a.pending=E,vT(a,E)):(E.next=l.next,a.pending=l.next=E)}}function vT(i,a){var l=a.action,h=a.payload,g=i.state;if(a.isTransition){var E=H.T,x={};H.T=x;try{var V=l(g,h),Z=H.S;Z!==null&&Z(x,V),ST(i,a,V)}catch(he){Op(i,a,he)}finally{H.T=E}}else try{E=l(g,h),ST(i,a,E)}catch(he){Op(i,a,he)}}function ST(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){AT(i,a,h)},function(h){return Op(i,a,h)}):AT(i,a,l)}function AT(i,a,l){a.status="fulfilled",a.value=l,wT(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,vT(i,l)))}function Op(i,a,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,wT(a),a=a.next;while(a!==h)}i.action=null}function wT(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function xT(i,a){return a}function IT(i,a){if(Ot){var l=tn.formState;if(l!==null){e:{var h=ct;if(Ot){if(Tn){t:{for(var g=Tn,E=ys;g.nodeType!==8;){if(!E){g=null;break t}if(g=Wi(g.nextSibling),g===null){g=null;break t}}E=g.data,g=E==="F!"||E==="F"?g:null}if(g){Tn=Wi(g.nextSibling),h=g.data==="F!";break e}}Vo(h)}h=!1}h&&(a=l[0])}}return l=Yr(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xT,lastRenderedState:a},l.queue=h,l=GT.bind(null,ct,h),h.dispatch=l,h=Dp(!1),E=Bp.bind(null,ct,!1,h.queue),h=Yr(),g={state:a,dispatch:null,action:i,pending:null},h.queue=g,l=J3.bind(null,ct,g,E,l),g.dispatch=l,h.memoizedState=i,[a,l,!1]}function CT(i){var a=kn();return NT(a,Kt,i)}function NT(i,a,l){if(a=Np(i,a,xT)[0],i=td(Ws)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=Ac(a)}catch(x){throw x===Ec?Xf:x}else h=a;a=kn();var g=a.queue,E=g.dispatch;return l!==a.memoizedState&&(ct.flags|=2048,Uu(9,nd(),eD.bind(null,g,l),null)),[h,E,i]}function eD(i,a){i.action=a}function RT(i){var a=kn(),l=Kt;if(l!==null)return NT(a,l,i);kn(),a=a.memoizedState,l=kn();var h=l.queue.dispatch;return l.memoizedState=i,[a,h,!1]}function Uu(i,a,l,h){return i={tag:i,create:l,deps:h,inst:a,next:null},a=ct.updateQueue,a===null&&(a=Ip(),ct.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,a.lastEffect=i),i}function nd(){return{destroy:void 0,resource:void 0}}function DT(){return kn().memoizedState}function rd(i,a,l,h){var g=Yr();h=h===void 0?null:h,ct.flags|=i,g.memoizedState=Uu(1|a,nd(),l,h)}function wc(i,a,l,h){var g=kn();h=h===void 0?null:h;var E=g.memoizedState.inst;Kt!==null&&h!==null&&vp(h,Kt.memoizedState.deps)?g.memoizedState=Uu(a,E,l,h):(ct.flags|=i,g.memoizedState=Uu(1|a,E,l,h))}function OT(i,a){rd(8390656,8,i,a)}function kT(i,a){wc(2048,8,i,a)}function LT(i,a){return wc(4,2,i,a)}function MT(i,a){return wc(4,4,i,a)}function PT(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function BT(i,a,l){l=l!=null?l.concat([i]):null,wc(4,4,PT.bind(null,a,i),l)}function kp(){}function UT(i,a){var l=kn();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&vp(a,h[1])?h[0]:(l.memoizedState=[i,a],i)}function VT(i,a){var l=kn();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&vp(a,h[1]))return h[0];if(h=i(),jo){Ve(!0);try{i()}finally{Ve(!1)}}return l.memoizedState=[h,a],h}function Lp(i,a,l){return l===void 0||(Aa&1073741824)!==0?i.memoizedState=a:(i.memoizedState=l,i=zb(),ct.lanes|=i,Da|=i,l)}function HT(i,a,l,h){return ai(l,a)?l:Mu.current!==null?(i=Lp(i,l,h),ai(i,a)||(er=!0),i):(Aa&42)===0?(er=!0,i.memoizedState=l):(i=zb(),ct.lanes|=i,Da|=i,a)}function FT(i,a,l,h,g){var E=Q.p;Q.p=E!==0&&8>E?E:8;var x=H.T,V={};H.T=V,Bp(i,!1,a,l);try{var Z=g(),he=H.S;if(he!==null&&he(V,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var Te=Q3(Z,h);xc(i,a,Te,hi(i))}else xc(i,a,h,hi(i))}catch(Se){xc(i,a,{then:function(){},status:"rejected",reason:Se},hi())}finally{Q.p=E,H.T=x}}function tD(){}function Mp(i,a,l,h){if(i.tag!==5)throw Error(r(476));var g=zT(i).queue;FT(i,g,a,se,l===null?tD:function(){return jT(i),l(h)})}function zT(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:se},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function jT(i){var a=zT(i).next.queue;xc(i,a,{},hi())}function Pp(){return br(qc)}function qT(){return kn().memoizedState}function YT(){return kn().memoizedState}function nD(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=hi();i=va(l);var h=Sa(a,i,l);h!==null&&(fi(h,a,l),Tc(h,a,l)),a={cache:fp()},i.payload=a;return}a=a.return}}function rD(i,a,l){var h=hi();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},id(i)?$T(a,l):(l=np(i,a,l,h),l!==null&&(fi(l,i,h),KT(l,a,h)))}function GT(i,a,l){var h=hi();xc(i,a,l,h)}function xc(i,a,l,h){var g={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(id(i))$T(a,g);else{var E=i.alternate;if(i.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var x=a.lastRenderedState,V=E(x,l);if(g.hasEagerState=!0,g.eagerState=V,ai(V,x))return Ff(i,a,g,0),tn===null&&Hf(),!1}catch{}finally{}if(l=np(i,a,g,h),l!==null)return fi(l,i,h),KT(l,a,h),!0}return!1}function Bp(i,a,l,h){if(h={lane:2,revertLane:pg(),action:h,hasEagerState:!1,eagerState:null,next:null},id(i)){if(a)throw Error(r(479))}else a=np(i,l,h,2),a!==null&&fi(a,i,2)}function id(i){var a=i.alternate;return i===ct||a!==null&&a===ct}function $T(i,a){Pu=Zf=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function KT(i,a,l){if((l&4194048)!==0){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Us(i,l)}}var sd={readContext:br,use:ed,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useLayoutEffect:xn,useInsertionEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useSyncExternalStore:xn,useId:xn,useHostTransitionStatus:xn,useFormState:xn,useActionState:xn,useOptimistic:xn,useMemoCache:xn,useCacheRefresh:xn},XT={readContext:br,use:ed,useCallback:function(i,a){return Yr().memoizedState=[i,a===void 0?null:a],i},useContext:br,useEffect:OT,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,rd(4194308,4,PT.bind(null,a,i),l)},useLayoutEffect:function(i,a){return rd(4194308,4,i,a)},useInsertionEffect:function(i,a){rd(4,2,i,a)},useMemo:function(i,a){var l=Yr();a=a===void 0?null:a;var h=i();if(jo){Ve(!0);try{i()}finally{Ve(!1)}}return l.memoizedState=[h,a],h},useReducer:function(i,a,l){var h=Yr();if(l!==void 0){var g=l(a);if(jo){Ve(!0);try{l(a)}finally{Ve(!1)}}}else g=a;return h.memoizedState=h.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},h.queue=i,i=i.dispatch=rD.bind(null,ct,i),[h.memoizedState,i]},useRef:function(i){var a=Yr();return i={current:i},a.memoizedState=i},useState:function(i){i=Dp(i);var a=i.queue,l=GT.bind(null,ct,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:kp,useDeferredValue:function(i,a){var l=Yr();return Lp(l,i,a)},useTransition:function(){var i=Dp(!1);return i=FT.bind(null,ct,i.queue,!0,!1),Yr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var h=ct,g=Yr();if(Ot){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),tn===null)throw Error(r(349));(xt&124)!==0||gT(h,a,l)}g.memoizedState=l;var E={value:l,getSnapshot:a};return g.queue=E,OT(ET.bind(null,h,E,i),[i]),h.flags|=2048,Uu(9,nd(),yT.bind(null,h,E,l,a),null),l},useId:function(){var i=Yr(),a=tn.identifierPrefix;if(Ot){var l=Ks,h=$s;l=(h&~(1<<32-Ye(h)-1)).toString(32)+l,a=""+a+"R"+l,l=Jf++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=W3++,a=""+a+"r"+l.toString(32)+"";return i.memoizedState=a},useHostTransitionStatus:Pp,useFormState:IT,useActionState:IT,useOptimistic:function(i){var a=Yr();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Bp.bind(null,ct,!0,l),l.dispatch=a,[i,a]},useMemoCache:Cp,useCacheRefresh:function(){return Yr().memoizedState=nD.bind(null,ct)}},QT={readContext:br,use:ed,useCallback:UT,useContext:br,useEffect:kT,useImperativeHandle:BT,useInsertionEffect:LT,useLayoutEffect:MT,useMemo:VT,useReducer:td,useRef:DT,useState:function(){return td(Ws)},useDebugValue:kp,useDeferredValue:function(i,a){var l=kn();return HT(l,Kt.memoizedState,i,a)},useTransition:function(){var i=td(Ws)[0],a=kn().memoizedState;return[typeof i=="boolean"?i:Ac(i),a]},useSyncExternalStore:pT,useId:qT,useHostTransitionStatus:Pp,useFormState:CT,useActionState:CT,useOptimistic:function(i,a){var l=kn();return bT(l,Kt,i,a)},useMemoCache:Cp,useCacheRefresh:YT},iD={readContext:br,use:ed,useCallback:UT,useContext:br,useEffect:kT,useImperativeHandle:BT,useInsertionEffect:LT,useLayoutEffect:MT,useMemo:VT,useReducer:Rp,useRef:DT,useState:function(){return Rp(Ws)},useDebugValue:kp,useDeferredValue:function(i,a){var l=kn();return Kt===null?Lp(l,i,a):HT(l,Kt.memoizedState,i,a)},useTransition:function(){var i=Rp(Ws)[0],a=kn().memoizedState;return[typeof i=="boolean"?i:Ac(i),a]},useSyncExternalStore:pT,useId:qT,useHostTransitionStatus:Pp,useFormState:RT,useActionState:RT,useOptimistic:function(i,a){var l=kn();return Kt!==null?bT(l,Kt,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Cp,useCacheRefresh:YT},Vu=null,Ic=0;function ad(i){var a=Ic;return Ic+=1,Vu===null&&(Vu=[]),oT(Vu,i,a)}function Cc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function od(i,a){throw a.$$typeof===y?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function WT(i){var a=i._init;return a(i._payload)}function ZT(i){function a(oe,ie){if(i){var le=oe.deletions;le===null?(oe.deletions=[ie],oe.flags|=16):le.push(ie)}}function l(oe,ie){if(!i)return null;for(;ie!==null;)a(oe,ie),ie=ie.sibling;return null}function h(oe){for(var ie=new Map;oe!==null;)oe.key!==null?ie.set(oe.key,oe):ie.set(oe.index,oe),oe=oe.sibling;return ie}function g(oe,ie){return oe=Gs(oe,ie),oe.index=0,oe.sibling=null,oe}function E(oe,ie,le){return oe.index=le,i?(le=oe.alternate,le!==null?(le=le.index,le<ie?(oe.flags|=67108866,ie):le):(oe.flags|=67108866,ie)):(oe.flags|=1048576,ie)}function x(oe){return i&&oe.alternate===null&&(oe.flags|=67108866),oe}function V(oe,ie,le,ve){return ie===null||ie.tag!==6?(ie=ip(le,oe.mode,ve),ie.return=oe,ie):(ie=g(ie,le),ie.return=oe,ie)}function Z(oe,ie,le,ve){var Fe=le.type;return Fe===w?Te(oe,ie,le.props.children,ve,le.key):ie!==null&&(ie.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===C&&WT(Fe)===ie.type)?(ie=g(ie,le.props),Cc(ie,le),ie.return=oe,ie):(ie=jf(le.type,le.key,le.props,null,oe.mode,ve),Cc(ie,le),ie.return=oe,ie)}function he(oe,ie,le,ve){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==le.containerInfo||ie.stateNode.implementation!==le.implementation?(ie=sp(le,oe.mode,ve),ie.return=oe,ie):(ie=g(ie,le.children||[]),ie.return=oe,ie)}function Te(oe,ie,le,ve,Fe){return ie===null||ie.tag!==7?(ie=Mo(le,oe.mode,ve,Fe),ie.return=oe,ie):(ie=g(ie,le),ie.return=oe,ie)}function Se(oe,ie,le){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=ip(""+ie,oe.mode,le),ie.return=oe,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case T:return le=jf(ie.type,ie.key,ie.props,null,oe.mode,le),Cc(le,ie),le.return=oe,le;case b:return ie=sp(ie,oe.mode,le),ie.return=oe,ie;case C:var ve=ie._init;return ie=ve(ie._payload),Se(oe,ie,le)}if(K(ie)||U(ie))return ie=Mo(ie,oe.mode,le,null),ie.return=oe,ie;if(typeof ie.then=="function")return Se(oe,ad(ie),le);if(ie.$$typeof===q)return Se(oe,$f(oe,ie),le);od(oe,ie)}return null}function de(oe,ie,le,ve){var Fe=ie!==null?ie.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Fe!==null?null:V(oe,ie,""+le,ve);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case T:return le.key===Fe?Z(oe,ie,le,ve):null;case b:return le.key===Fe?he(oe,ie,le,ve):null;case C:return Fe=le._init,le=Fe(le._payload),de(oe,ie,le,ve)}if(K(le)||U(le))return Fe!==null?null:Te(oe,ie,le,ve,null);if(typeof le.then=="function")return de(oe,ie,ad(le),ve);if(le.$$typeof===q)return de(oe,ie,$f(oe,le),ve);od(oe,le)}return null}function me(oe,ie,le,ve,Fe){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return oe=oe.get(le)||null,V(ie,oe,""+ve,Fe);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case T:return oe=oe.get(ve.key===null?le:ve.key)||null,Z(ie,oe,ve,Fe);case b:return oe=oe.get(ve.key===null?le:ve.key)||null,he(ie,oe,ve,Fe);case C:var ft=ve._init;return ve=ft(ve._payload),me(oe,ie,le,ve,Fe)}if(K(ve)||U(ve))return oe=oe.get(le)||null,Te(ie,oe,ve,Fe,null);if(typeof ve.then=="function")return me(oe,ie,le,ad(ve),Fe);if(ve.$$typeof===q)return me(oe,ie,le,$f(ie,ve),Fe);od(ie,ve)}return null}function et(oe,ie,le,ve){for(var Fe=null,ft=null,Ge=ie,Xe=ie=0,nr=null;Ge!==null&&Xe<le.length;Xe++){Ge.index>Xe?(nr=Ge,Ge=null):nr=Ge.sibling;var Rt=de(oe,Ge,le[Xe],ve);if(Rt===null){Ge===null&&(Ge=nr);break}i&&Ge&&Rt.alternate===null&&a(oe,Ge),ie=E(Rt,ie,Xe),ft===null?Fe=Rt:ft.sibling=Rt,ft=Rt,Ge=nr}if(Xe===le.length)return l(oe,Ge),Ot&&Bo(oe,Xe),Fe;if(Ge===null){for(;Xe<le.length;Xe++)Ge=Se(oe,le[Xe],ve),Ge!==null&&(ie=E(Ge,ie,Xe),ft===null?Fe=Ge:ft.sibling=Ge,ft=Ge);return Ot&&Bo(oe,Xe),Fe}for(Ge=h(Ge);Xe<le.length;Xe++)nr=me(Ge,oe,Xe,le[Xe],ve),nr!==null&&(i&&nr.alternate!==null&&Ge.delete(nr.key===null?Xe:nr.key),ie=E(nr,ie,Xe),ft===null?Fe=nr:ft.sibling=nr,ft=nr);return i&&Ge.forEach(function(Ha){return a(oe,Ha)}),Ot&&Bo(oe,Xe),Fe}function Ke(oe,ie,le,ve){if(le==null)throw Error(r(151));for(var Fe=null,ft=null,Ge=ie,Xe=ie=0,nr=null,Rt=le.next();Ge!==null&&!Rt.done;Xe++,Rt=le.next()){Ge.index>Xe?(nr=Ge,Ge=null):nr=Ge.sibling;var Ha=de(oe,Ge,Rt.value,ve);if(Ha===null){Ge===null&&(Ge=nr);break}i&&Ge&&Ha.alternate===null&&a(oe,Ge),ie=E(Ha,ie,Xe),ft===null?Fe=Ha:ft.sibling=Ha,ft=Ha,Ge=nr}if(Rt.done)return l(oe,Ge),Ot&&Bo(oe,Xe),Fe;if(Ge===null){for(;!Rt.done;Xe++,Rt=le.next())Rt=Se(oe,Rt.value,ve),Rt!==null&&(ie=E(Rt,ie,Xe),ft===null?Fe=Rt:ft.sibling=Rt,ft=Rt);return Ot&&Bo(oe,Xe),Fe}for(Ge=h(Ge);!Rt.done;Xe++,Rt=le.next())Rt=me(Ge,oe,Xe,Rt.value,ve),Rt!==null&&(i&&Rt.alternate!==null&&Ge.delete(Rt.key===null?Xe:Rt.key),ie=E(Rt,ie,Xe),ft===null?Fe=Rt:ft.sibling=Rt,ft=Rt);return i&&Ge.forEach(function(s6){return a(oe,s6)}),Ot&&Bo(oe,Xe),Fe}function Qt(oe,ie,le,ve){if(typeof le=="object"&&le!==null&&le.type===w&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case T:e:{for(var Fe=le.key;ie!==null;){if(ie.key===Fe){if(Fe=le.type,Fe===w){if(ie.tag===7){l(oe,ie.sibling),ve=g(ie,le.props.children),ve.return=oe,oe=ve;break e}}else if(ie.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===C&&WT(Fe)===ie.type){l(oe,ie.sibling),ve=g(ie,le.props),Cc(ve,le),ve.return=oe,oe=ve;break e}l(oe,ie);break}else a(oe,ie);ie=ie.sibling}le.type===w?(ve=Mo(le.props.children,oe.mode,ve,le.key),ve.return=oe,oe=ve):(ve=jf(le.type,le.key,le.props,null,oe.mode,ve),Cc(ve,le),ve.return=oe,oe=ve)}return x(oe);case b:e:{for(Fe=le.key;ie!==null;){if(ie.key===Fe)if(ie.tag===4&&ie.stateNode.containerInfo===le.containerInfo&&ie.stateNode.implementation===le.implementation){l(oe,ie.sibling),ve=g(ie,le.children||[]),ve.return=oe,oe=ve;break e}else{l(oe,ie);break}else a(oe,ie);ie=ie.sibling}ve=sp(le,oe.mode,ve),ve.return=oe,oe=ve}return x(oe);case C:return Fe=le._init,le=Fe(le._payload),Qt(oe,ie,le,ve)}if(K(le))return et(oe,ie,le,ve);if(U(le)){if(Fe=U(le),typeof Fe!="function")throw Error(r(150));return le=Fe.call(le),Ke(oe,ie,le,ve)}if(typeof le.then=="function")return Qt(oe,ie,ad(le),ve);if(le.$$typeof===q)return Qt(oe,ie,$f(oe,le),ve);od(oe,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,ie!==null&&ie.tag===6?(l(oe,ie.sibling),ve=g(ie,le),ve.return=oe,oe=ve):(l(oe,ie),ve=ip(le,oe.mode,ve),ve.return=oe,oe=ve),x(oe)):l(oe,ie)}return function(oe,ie,le,ve){try{Ic=0;var Fe=Qt(oe,ie,le,ve);return Vu=null,Fe}catch(Ge){if(Ge===Ec||Ge===Xf)throw Ge;var ft=oi(29,Ge,null,oe.mode);return ft.lanes=ve,ft.return=oe,ft}finally{}}}var Hu=ZT(!0),JT=ZT(!1),Li=J(null),Es=null;function wa(i){var a=i.alternate;P(Gn,Gn.current&1),P(Li,i),Es===null&&(a===null||Mu.current!==null||a.memoizedState!==null)&&(Es=i)}function eb(i){if(i.tag===22){if(P(Gn,Gn.current),P(Li,i),Es===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(Es=i)}}else xa()}function xa(){P(Gn,Gn.current),P(Li,Li.current)}function Zs(i){ae(Li),Es===i&&(Es=null),ae(Gn)}var Gn=J(0);function ud(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Ig(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Up(i,a,l,h){a=i.memoizedState,l=l(h,a),l=l==null?a:p({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Vp={enqueueSetState:function(i,a,l){i=i._reactInternals;var h=hi(),g=va(h);g.payload=a,l!=null&&(g.callback=l),a=Sa(i,g,h),a!==null&&(fi(a,i,h),Tc(a,i,h))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var h=hi(),g=va(h);g.tag=1,g.payload=a,l!=null&&(g.callback=l),a=Sa(i,g,h),a!==null&&(fi(a,i,h),Tc(a,i,h))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=hi(),h=va(l);h.tag=2,a!=null&&(h.callback=a),a=Sa(i,h,l),a!==null&&(fi(a,i,l),Tc(a,i,l))}};function tb(i,a,l,h,g,E,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,E,x):a.prototype&&a.prototype.isPureReactComponent?!cc(l,h)||!cc(g,E):!0}function nb(i,a,l,h){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==i&&Vp.enqueueReplaceState(a,a.state,null)}function qo(i,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(i=i.defaultProps){l===a&&(l=p({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}var ld=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function rb(i){ld(i)}function ib(i){console.error(i)}function sb(i){ld(i)}function cd(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function ab(i,a,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Hp(i,a,l){return l=va(l),l.tag=3,l.payload={element:null},l.callback=function(){cd(i,a)},l}function ob(i){return i=va(i),i.tag=3,i}function ub(i,a,l,h){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var E=h.value;i.payload=function(){return g(E)},i.callback=function(){ab(a,l,h)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(i.callback=function(){ab(a,l,h),typeof g!="function"&&(Oa===null?Oa=new Set([this]):Oa.add(this));var V=h.stack;this.componentDidCatch(h.value,{componentStack:V!==null?V:""})})}function sD(i,a,l,h,g){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&pc(a,l,g,!0),l=Li.current,l!==null){switch(l.tag){case 13:return Es===null?cg():l.alternate===null&&bn===0&&(bn=3),l.flags&=-257,l.flags|=65536,l.lanes=g,h===pp?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),fg(i,h,g)),!1;case 22:return l.flags|=65536,h===pp?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),fg(i,h,g)),!1}throw Error(r(435,l.tag))}return fg(i,h,g),cg(),!1}if(Ot)return a=Li.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,h!==up&&(i=Error(r(422),{cause:h}),mc(Ri(i,l)))):(h!==up&&(a=Error(r(423),{cause:h}),mc(Ri(a,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,h=Ri(h,l),g=Hp(i.stateNode,h,g),Ep(i,g),bn!==4&&(bn=2)),!1;var E=Error(r(520),{cause:h});if(E=Ri(E,l),Mc===null?Mc=[E]:Mc.push(E),bn!==4&&(bn=2),a===null)return!0;h=Ri(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=Hp(l.stateNode,h,i),Ep(l,i),!1;case 1:if(a=l.type,E=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Oa===null||!Oa.has(E))))return l.flags|=65536,g&=-g,l.lanes|=g,g=ob(g),ub(g,i,l,h),Ep(l,g),!1}l=l.return}while(l!==null);return!1}var lb=Error(r(461)),er=!1;function dr(i,a,l,h){a.child=i===null?JT(a,null,l,h):Hu(a,i.child,l,h)}function cb(i,a,l,h,g){l=l.render;var E=a.ref;if("ref"in h){var x={};for(var V in h)V!=="ref"&&(x[V]=h[V])}else x=h;return Fo(a),h=Sp(i,a,l,x,E,g),V=Ap(),i!==null&&!er?(wp(i,a,g),Js(i,a,g)):(Ot&&V&&ap(a),a.flags|=1,dr(i,a,h,g),a.child)}function hb(i,a,l,h,g){if(i===null){var E=l.type;return typeof E=="function"&&!rp(E)&&E.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=E,fb(i,a,E,h,g)):(i=jf(l.type,null,h,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(E=i.child,!Kp(i,g)){var x=E.memoizedProps;if(l=l.compare,l=l!==null?l:cc,l(x,h)&&i.ref===a.ref)return Js(i,a,g)}return a.flags|=1,i=Gs(E,h),i.ref=a.ref,i.return=a,a.child=i}function fb(i,a,l,h,g){if(i!==null){var E=i.memoizedProps;if(cc(E,h)&&i.ref===a.ref)if(er=!1,a.pendingProps=h=E,Kp(i,g))(i.flags&131072)!==0&&(er=!0);else return a.lanes=i.lanes,Js(i,a,g)}return Fp(i,a,l,h,g)}function db(i,a,l){var h=a.pendingProps,g=h.children,E=i!==null?i.memoizedState:null;if(h.mode==="hidden"){if((a.flags&128)!==0){if(h=E!==null?E.baseLanes|l:l,i!==null){for(g=a.child=i.child,E=0;g!==null;)E=E|g.lanes|g.childLanes,g=g.sibling;a.childLanes=E&~h}else a.childLanes=0,a.child=null;return mb(i,a,h,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Kf(a,E!==null?E.cachePool:null),E!==null?fT(a,E):Tp(),eb(a);else return a.lanes=a.childLanes=536870912,mb(i,a,E!==null?E.baseLanes|l:l,l)}else E!==null?(Kf(a,E.cachePool),fT(a,E),xa(),a.memoizedState=null):(i!==null&&Kf(a,null),Tp(),xa());return dr(i,a,g,l),a.child}function mb(i,a,l,h){var g=mp();return g=g===null?null:{parent:Yn._currentValue,pool:g},a.memoizedState={baseLanes:l,cachePool:g},i!==null&&Kf(a,null),Tp(),eb(a),i!==null&&pc(i,a,h,!0),null}function hd(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function Fp(i,a,l,h,g){return Fo(a),l=Sp(i,a,l,h,void 0,g),h=Ap(),i!==null&&!er?(wp(i,a,g),Js(i,a,g)):(Ot&&h&&ap(a),a.flags|=1,dr(i,a,l,g),a.child)}function pb(i,a,l,h,g,E){return Fo(a),a.updateQueue=null,l=mT(a,h,l,g),dT(i),h=Ap(),i!==null&&!er?(wp(i,a,E),Js(i,a,E)):(Ot&&h&&ap(a),a.flags|=1,dr(i,a,l,E),a.child)}function gb(i,a,l,h,g){if(Fo(a),a.stateNode===null){var E=Ru,x=l.contextType;typeof x=="object"&&x!==null&&(E=br(x)),E=new l(h,E),a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Vp,a.stateNode=E,E._reactInternals=a,E=a.stateNode,E.props=h,E.state=a.memoizedState,E.refs={},gp(a),x=l.contextType,E.context=typeof x=="object"&&x!==null?br(x):Ru,E.state=a.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(Up(a,l,x,h),E.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(x=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),x!==E.state&&Vp.enqueueReplaceState(E,E.state,null),vc(a,h,E,g),bc(),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(i===null){E=a.stateNode;var V=a.memoizedProps,Z=qo(l,V);E.props=Z;var he=E.context,Te=l.contextType;x=Ru,typeof Te=="object"&&Te!==null&&(x=br(Te));var Se=l.getDerivedStateFromProps;Te=typeof Se=="function"||typeof E.getSnapshotBeforeUpdate=="function",V=a.pendingProps!==V,Te||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(V||he!==x)&&nb(a,E,h,x),ba=!1;var de=a.memoizedState;E.state=de,vc(a,h,E,g),bc(),he=a.memoizedState,V||de!==he||ba?(typeof Se=="function"&&(Up(a,l,Se,h),he=a.memoizedState),(Z=ba||tb(a,l,Z,h,de,he,x))?(Te||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4194308)):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=he),E.props=h,E.state=he,E.context=x,h=Z):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{E=a.stateNode,yp(i,a),x=a.memoizedProps,Te=qo(l,x),E.props=Te,Se=a.pendingProps,de=E.context,he=l.contextType,Z=Ru,typeof he=="object"&&he!==null&&(Z=br(he)),V=l.getDerivedStateFromProps,(he=typeof V=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(x!==Se||de!==Z)&&nb(a,E,h,Z),ba=!1,de=a.memoizedState,E.state=de,vc(a,h,E,g),bc();var me=a.memoizedState;x!==Se||de!==me||ba||i!==null&&i.dependencies!==null&&Gf(i.dependencies)?(typeof V=="function"&&(Up(a,l,V,h),me=a.memoizedState),(Te=ba||tb(a,l,Te,h,de,me,Z)||i!==null&&i.dependencies!==null&&Gf(i.dependencies))?(he||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,me,Z),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,me,Z)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof E.componentDidUpdate!="function"||x===i.memoizedProps&&de===i.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&de===i.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=me),E.props=h,E.state=me,E.context=Z,h=Te):(typeof E.componentDidUpdate!="function"||x===i.memoizedProps&&de===i.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&de===i.memoizedState||(a.flags|=1024),h=!1)}return E=h,hd(i,a),h=(a.flags&128)!==0,E||h?(E=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:E.render(),a.flags|=1,i!==null&&h?(a.child=Hu(a,i.child,null,g),a.child=Hu(a,null,l,g)):dr(i,a,l,g),a.memoizedState=E.state,i=a.child):i=Js(i,a,g),i}function yb(i,a,l,h){return dc(),a.flags|=256,dr(i,a,l,h),a.child}var zp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jp(i){return{baseLanes:i,cachePool:iT()}}function qp(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=Mi),i}function Eb(i,a,l){var h=a.pendingProps,g=!1,E=(a.flags&128)!==0,x;if((x=E)||(x=i!==null&&i.memoizedState===null?!1:(Gn.current&2)!==0),x&&(g=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,i===null){if(Ot){if(g?wa(a):xa(),Ot){var V=Tn,Z;if(Z=V){e:{for(Z=V,V=ys;Z.nodeType!==8;){if(!V){V=null;break e}if(Z=Wi(Z.nextSibling),Z===null){V=null;break e}}V=Z}V!==null?(a.memoizedState={dehydrated:V,treeContext:Po!==null?{id:$s,overflow:Ks}:null,retryLane:536870912,hydrationErrors:null},Z=oi(18,null,null,0),Z.stateNode=V,Z.return=a,a.child=Z,Hr=a,Tn=null,Z=!0):Z=!1}Z||Vo(a)}if(V=a.memoizedState,V!==null&&(V=V.dehydrated,V!==null))return Ig(V)?a.lanes=32:a.lanes=536870912,null;Zs(a)}return V=h.children,h=h.fallback,g?(xa(),g=a.mode,V=fd({mode:"hidden",children:V},g),h=Mo(h,g,l,null),V.return=a,h.return=a,V.sibling=h,a.child=V,g=a.child,g.memoizedState=jp(l),g.childLanes=qp(i,x,l),a.memoizedState=zp,h):(wa(a),Yp(a,V))}if(Z=i.memoizedState,Z!==null&&(V=Z.dehydrated,V!==null)){if(E)a.flags&256?(wa(a),a.flags&=-257,a=Gp(i,a,l)):a.memoizedState!==null?(xa(),a.child=i.child,a.flags|=128,a=null):(xa(),g=h.fallback,V=a.mode,h=fd({mode:"visible",children:h.children},V),g=Mo(g,V,l,null),g.flags|=2,h.return=a,g.return=a,h.sibling=g,a.child=h,Hu(a,i.child,null,l),h=a.child,h.memoizedState=jp(l),h.childLanes=qp(i,x,l),a.memoizedState=zp,a=g);else if(wa(a),Ig(V)){if(x=V.nextSibling&&V.nextSibling.dataset,x)var he=x.dgst;x=he,h=Error(r(419)),h.stack="",h.digest=x,mc({value:h,source:null,stack:null}),a=Gp(i,a,l)}else if(er||pc(i,a,l,!1),x=(l&i.childLanes)!==0,er||x){if(x=tn,x!==null&&(h=l&-l,h=(h&42)!==0?1:ri(h),h=(h&(x.suspendedLanes|l))!==0?0:h,h!==0&&h!==Z.retryLane))throw Z.retryLane=h,Nu(i,h),fi(x,i,h),lb;V.data==="$?"||cg(),a=Gp(i,a,l)}else V.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=Z.treeContext,Tn=Wi(V.nextSibling),Hr=a,Ot=!0,Uo=null,ys=!1,i!==null&&(Oi[ki++]=$s,Oi[ki++]=Ks,Oi[ki++]=Po,$s=i.id,Ks=i.overflow,Po=a),a=Yp(a,h.children),a.flags|=4096);return a}return g?(xa(),g=h.fallback,V=a.mode,Z=i.child,he=Z.sibling,h=Gs(Z,{mode:"hidden",children:h.children}),h.subtreeFlags=Z.subtreeFlags&65011712,he!==null?g=Gs(he,g):(g=Mo(g,V,l,null),g.flags|=2),g.return=a,h.return=a,h.sibling=g,a.child=h,h=g,g=a.child,V=i.child.memoizedState,V===null?V=jp(l):(Z=V.cachePool,Z!==null?(he=Yn._currentValue,Z=Z.parent!==he?{parent:he,pool:he}:Z):Z=iT(),V={baseLanes:V.baseLanes|l,cachePool:Z}),g.memoizedState=V,g.childLanes=qp(i,x,l),a.memoizedState=zp,h):(wa(a),l=i.child,i=l.sibling,l=Gs(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,i!==null&&(x=a.deletions,x===null?(a.deletions=[i],a.flags|=16):x.push(i)),a.child=l,a.memoizedState=null,l)}function Yp(i,a){return a=fd({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function fd(i,a){return i=oi(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Gp(i,a,l){return Hu(a,i.child,null,l),i=Yp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function _b(i,a,l){i.lanes|=a;var h=i.alternate;h!==null&&(h.lanes|=a),cp(i.return,a,l)}function $p(i,a,l,h,g){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=l,E.tailMode=g)}function Tb(i,a,l){var h=a.pendingProps,g=h.revealOrder,E=h.tail;if(dr(i,a,h.children,l),h=Gn.current,(h&2)!==0)h=h&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&_b(i,l,a);else if(i.tag===19)_b(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}switch(P(Gn,h),g){case"forwards":for(l=a.child,g=null;l!==null;)i=l.alternate,i!==null&&ud(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=a.child,a.child=null):(g=l.sibling,l.sibling=null),$p(a,!1,g,l,E);break;case"backwards":for(l=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&ud(i)===null){a.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}$p(a,!0,l,null,E);break;case"together":$p(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Js(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),Da|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(pc(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=Gs(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Gs(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function Kp(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Gf(i)))}function aD(i,a,l){switch(a.tag){case 3:xe(a,a.stateNode.containerInfo),Ta(a,Yn,i.memoizedState.cache),dc();break;case 27:case 5:He(a);break;case 4:xe(a,a.stateNode.containerInfo);break;case 10:Ta(a,a.type,a.memoizedProps.value);break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(wa(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Eb(i,a,l):(wa(a),i=Js(i,a,l),i!==null?i.sibling:null);wa(a);break;case 19:var g=(i.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(pc(i,a,l,!1),h=(l&a.childLanes)!==0),g){if(h)return Tb(i,a,l);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),P(Gn,Gn.current),h)break;return null;case 22:case 23:return a.lanes=0,db(i,a,l);case 24:Ta(a,Yn,i.memoizedState.cache)}return Js(i,a,l)}function bb(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)er=!0;else{if(!Kp(i,l)&&(a.flags&128)===0)return er=!1,aD(i,a,l);er=(i.flags&131072)!==0}else er=!1,Ot&&(a.flags&1048576)!==0&&W1(a,Yf,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var h=a.elementType,g=h._init;if(h=g(h._payload),a.type=h,typeof h=="function")rp(h)?(i=qo(h,i),a.tag=1,a=gb(null,a,h,i,l)):(a.tag=0,a=Fp(null,a,h,i,l));else{if(h!=null){if(g=h.$$typeof,g===j){a.tag=11,a=cb(null,a,h,i,l);break e}else if(g===R){a.tag=14,a=hb(null,a,h,i,l);break e}}throw a=L(h)||h,Error(r(306,a,""))}}return a;case 0:return Fp(i,a,a.type,a.pendingProps,l);case 1:return h=a.type,g=qo(h,a.pendingProps),gb(i,a,h,g,l);case 3:e:{if(xe(a,a.stateNode.containerInfo),i===null)throw Error(r(387));h=a.pendingProps;var E=a.memoizedState;g=E.element,yp(i,a),vc(a,h,null,l);var x=a.memoizedState;if(h=x.cache,Ta(a,Yn,h),h!==E.cache&&hp(a,[Yn],l,!0),bc(),h=x.element,E.isDehydrated)if(E={element:h,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){a=yb(i,a,h,l);break e}else if(h!==g){g=Ri(Error(r(424)),a),mc(g),a=yb(i,a,h,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Tn=Wi(i.firstChild),Hr=a,Ot=!0,Uo=null,ys=!0,l=JT(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(dc(),h===g){a=Js(i,a,l);break e}dr(i,a,h,l)}a=a.child}return a;case 26:return hd(i,a),i===null?(l=wv(a.type,null,a.pendingProps,null))?a.memoizedState=l:Ot||(l=a.type,i=a.pendingProps,h=xd(Ie.current).createElement(l),h[Lt]=a,h[hn]=i,pr(h,l,i),ne(h),a.stateNode=h):a.memoizedState=wv(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return He(a),i===null&&Ot&&(h=a.stateNode=vv(a.type,a.pendingProps,Ie.current),Hr=a,ys=!0,g=Tn,Ma(a.type)?(Cg=g,Tn=Wi(h.firstChild)):Tn=g),dr(i,a,a.pendingProps.children,l),hd(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Ot&&((g=h=Tn)&&(h=LD(h,a.type,a.pendingProps,ys),h!==null?(a.stateNode=h,Hr=a,Tn=Wi(h.firstChild),ys=!1,g=!0):g=!1),g||Vo(a)),He(a),g=a.type,E=a.pendingProps,x=i!==null?i.memoizedProps:null,h=E.children,Ag(g,E)?h=null:x!==null&&Ag(g,x)&&(a.flags|=32),a.memoizedState!==null&&(g=Sp(i,a,Z3,null,null,l),qc._currentValue=g),hd(i,a),dr(i,a,h,l),a.child;case 6:return i===null&&Ot&&((i=l=Tn)&&(l=MD(l,a.pendingProps,ys),l!==null?(a.stateNode=l,Hr=a,Tn=null,i=!0):i=!1),i||Vo(a)),null;case 13:return Eb(i,a,l);case 4:return xe(a,a.stateNode.containerInfo),h=a.pendingProps,i===null?a.child=Hu(a,null,h,l):dr(i,a,h,l),a.child;case 11:return cb(i,a,a.type,a.pendingProps,l);case 7:return dr(i,a,a.pendingProps,l),a.child;case 8:return dr(i,a,a.pendingProps.children,l),a.child;case 12:return dr(i,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,Ta(a,a.type,h.value),dr(i,a,h.children,l),a.child;case 9:return g=a.type._context,h=a.pendingProps.children,Fo(a),g=br(g),h=h(g),a.flags|=1,dr(i,a,h,l),a.child;case 14:return hb(i,a,a.type,a.pendingProps,l);case 15:return fb(i,a,a.type,a.pendingProps,l);case 19:return Tb(i,a,l);case 31:return h=a.pendingProps,l=a.mode,h={mode:h.mode,children:h.children},i===null?(l=fd(h,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=Gs(i.child,h),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return db(i,a,l);case 24:return Fo(a),h=br(Yn),i===null?(g=mp(),g===null&&(g=tn,E=fp(),g.pooledCache=E,E.refCount++,E!==null&&(g.pooledCacheLanes|=l),g=E),a.memoizedState={parent:h,cache:g},gp(a),Ta(a,Yn,g)):((i.lanes&l)!==0&&(yp(i,a),vc(a,null,null,l),bc()),g=i.memoizedState,E=a.memoizedState,g.parent!==h?(g={parent:h,cache:h},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Ta(a,Yn,h)):(h=E.cache,Ta(a,Yn,h),h!==g.cache&&hp(a,[Yn],l,!0))),dr(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function ea(i){i.flags|=4}function vb(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Rv(a)){if(a=Li.current,a!==null&&((xt&4194048)===xt?Es!==null:(xt&62914560)!==xt&&(xt&536870912)===0||a!==Es))throw _c=pp,sT;i.flags|=8192}}function dd(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?_r():536870912,i.lanes|=a,qu|=a)}function Nc(i,a){if(!Ot)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function pn(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(a)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=h,i.childLanes=l,a}function oD(i,a,l){var h=a.pendingProps;switch(op(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(a),null;case 1:return pn(a),null;case 3:return l=a.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Qs(Yn),Me(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(fc(a)?ea(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,eT())),pn(a),null;case 26:return l=a.memoizedState,i===null?(ea(a),l!==null?(pn(a),vb(a,l)):(pn(a),a.flags&=-16777217)):l?l!==i.memoizedState?(ea(a),pn(a),vb(a,l)):(pn(a),a.flags&=-16777217):(i.memoizedProps!==h&&ea(a),pn(a),a.flags&=-16777217),null;case 27:Je(a),l=Ie.current;var g=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ea(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return pn(a),null}i=ge.current,fc(a)?Z1(a):(i=vv(g,h,l),a.stateNode=i,ea(a))}return pn(a),null;case 5:if(Je(a),l=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ea(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return pn(a),null}if(i=ge.current,fc(a))Z1(a);else{switch(g=xd(Ie.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?i.multiple=!0:h.size&&(i.size=h.size);break;default:i=typeof h.is=="string"?g.createElement(l,{is:h.is}):g.createElement(l)}}i[Lt]=a,i[hn]=h;e:for(g=a.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===a)break e;for(;g.sibling===null;){if(g.return===null||g.return===a)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}a.stateNode=i;e:switch(pr(i,l,h),l){case"button":case"input":case"select":case"textarea":i=!!h.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&ea(a)}}return pn(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==h&&ea(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(r(166));if(i=Ie.current,fc(a)){if(i=a.stateNode,l=a.memoizedProps,h=null,g=Hr,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}i[Lt]=a,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||pv(i.nodeValue,l)),i||Vo(a)}else i=xd(i).createTextNode(h),i[Lt]=a,a.stateNode=i}return pn(a),null;case 13:if(h=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=fc(a),h!==null&&h.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Lt]=a}else dc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;pn(a),g=!1}else g=eT(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Zs(a),a):(Zs(a),null)}if(Zs(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=h!==null,i=i!==null&&i.memoizedState!==null,l){h=a.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var E=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==g&&(h.flags|=2048)}return l!==i&&l&&(a.child.flags|=8192),dd(a,a.updateQueue),pn(a),null;case 4:return Me(),i===null&&_g(a.stateNode.containerInfo),pn(a),null;case 10:return Qs(a.type),pn(a),null;case 19:if(ae(Gn),g=a.memoizedState,g===null)return pn(a),null;if(h=(a.flags&128)!==0,E=g.rendering,E===null)if(h)Nc(g,!1);else{if(bn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(E=ud(i),E!==null){for(a.flags|=128,Nc(g,!1),i=E.updateQueue,a.updateQueue=i,dd(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)Q1(l,i),l=l.sibling;return P(Gn,Gn.current&1|2),a.child}i=i.sibling}g.tail!==null&&Qe()>gd&&(a.flags|=128,h=!0,Nc(g,!1),a.lanes=4194304)}else{if(!h)if(i=ud(E),i!==null){if(a.flags|=128,h=!0,i=i.updateQueue,a.updateQueue=i,dd(a,i),Nc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!Ot)return pn(a),null}else 2*Qe()-g.renderingStartTime>gd&&l!==536870912&&(a.flags|=128,h=!0,Nc(g,!1),a.lanes=4194304);g.isBackwards?(E.sibling=a.child,a.child=E):(i=g.last,i!==null?i.sibling=E:a.child=E,g.last=E)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=Qe(),a.sibling=null,i=Gn.current,P(Gn,h?i&1|2:i&1),a):(pn(a),null);case 22:case 23:return Zs(a),bp(),h=a.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(pn(a),a.subtreeFlags&6&&(a.flags|=8192)):pn(a),l=a.updateQueue,l!==null&&dd(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),i!==null&&ae(zo),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Qs(Yn),pn(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function uD(i,a){switch(op(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Qs(Yn),Me(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Je(a),null;case 13:if(Zs(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));dc()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ae(Gn),null;case 4:return Me(),null;case 10:return Qs(a.type),null;case 22:case 23:return Zs(a),bp(),i!==null&&ae(zo),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Qs(Yn),null;case 25:return null;default:return null}}function Sb(i,a){switch(op(a),a.tag){case 3:Qs(Yn),Me();break;case 26:case 27:case 5:Je(a);break;case 4:Me();break;case 13:Zs(a);break;case 19:ae(Gn);break;case 10:Qs(a.type);break;case 22:case 23:Zs(a),bp(),i!==null&&ae(zo);break;case 24:Qs(Yn)}}function Rc(i,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var g=h.next;l=g;do{if((l.tag&i)===i){h=void 0;var E=l.create,x=l.inst;h=E(),x.destroy=h}l=l.next}while(l!==g)}}catch(V){Zt(a,a.return,V)}}function Ia(i,a,l){try{var h=a.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var E=g.next;h=E;do{if((h.tag&i)===i){var x=h.inst,V=x.destroy;if(V!==void 0){x.destroy=void 0,g=a;var Z=l,he=V;try{he()}catch(Te){Zt(g,Z,Te)}}}h=h.next}while(h!==E)}}catch(Te){Zt(a,a.return,Te)}}function Ab(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{hT(a,l)}catch(h){Zt(i,i.return,h)}}}function wb(i,a,l){l.props=qo(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){Zt(i,a,h)}}function Dc(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(g){Zt(i,a,g)}}function _s(i,a){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(g){Zt(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Zt(i,a,g)}else l.current=null}function xb(i){var a=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(g){Zt(i,i.return,g)}}function Xp(i,a,l){try{var h=i.stateNode;ND(h,i.type,l,a),h[hn]=a}catch(g){Zt(i,i.return,g)}}function Ib(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ma(i.type)||i.tag===4}function Qp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Ib(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ma(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wp(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=wd));else if(h!==4&&(h===27&&Ma(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(Wp(i,a,l),i=i.sibling;i!==null;)Wp(i,a,l),i=i.sibling}function md(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(h!==4&&(h===27&&Ma(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(md(i,a,l),i=i.sibling;i!==null;)md(i,a,l),i=i.sibling}function Cb(i){var a=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);pr(a,h,l),a[Lt]=i,a[hn]=l}catch(E){Zt(i,i.return,E)}}var ta=!1,In=!1,Zp=!1,Nb=typeof WeakSet=="function"?WeakSet:Set,tr=null;function lD(i,a){if(i=i.containerInfo,vg=Od,i=H1(i),Q0(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{l.nodeType,E.nodeType}catch{l=null;break e}var x=0,V=-1,Z=-1,he=0,Te=0,Se=i,de=null;t:for(;;){for(var me;Se!==l||g!==0&&Se.nodeType!==3||(V=x+g),Se!==E||h!==0&&Se.nodeType!==3||(Z=x+h),Se.nodeType===3&&(x+=Se.nodeValue.length),(me=Se.firstChild)!==null;)de=Se,Se=me;for(;;){if(Se===i)break t;if(de===l&&++he===g&&(V=x),de===E&&++Te===h&&(Z=x),(me=Se.nextSibling)!==null)break;Se=de,de=Se.parentNode}Se=me}l=V===-1||Z===-1?null:{start:V,end:Z}}else l=null}l=l||{start:0,end:0}}else l=null;for(Sg={focusedElem:i,selectionRange:l},Od=!1,tr=a;tr!==null;)if(a=tr,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,tr=i;else for(;tr!==null;){switch(a=tr,E=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&E!==null){i=void 0,l=a,g=E.memoizedProps,E=E.memoizedState,h=l.stateNode;try{var et=qo(l.type,g,l.elementType===l.type);i=h.getSnapshotBeforeUpdate(et,E),h.__reactInternalSnapshotBeforeUpdate=i}catch(Ke){Zt(l,l.return,Ke)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)xg(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":xg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,tr=i;break}tr=a.return}}function Rb(i,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:Ca(i,l),h&4&&Rc(5,l);break;case 1:if(Ca(i,l),h&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(x){Zt(l,l.return,x)}else{var g=qo(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(x){Zt(l,l.return,x)}}h&64&&Ab(l),h&512&&Dc(l,l.return);break;case 3:if(Ca(i,l),h&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{hT(i,a)}catch(x){Zt(l,l.return,x)}}break;case 27:a===null&&h&4&&Cb(l);case 26:case 5:Ca(i,l),a===null&&h&4&&xb(l),h&512&&Dc(l,l.return);break;case 12:Ca(i,l);break;case 13:Ca(i,l),h&4&&kb(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=ED.bind(null,l),PD(i,l))));break;case 22:if(h=l.memoizedState!==null||ta,!h){a=a!==null&&a.memoizedState!==null||In,g=ta;var E=In;ta=h,(In=a)&&!E?Na(i,l,(l.subtreeFlags&8772)!==0):Ca(i,l),ta=g,In=E}break;case 30:break;default:Ca(i,l)}}function Db(i){var a=i.alternate;a!==null&&(i.alternate=null,Db(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&si(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var dn=null,Gr=!1;function na(i,a,l){for(l=l.child;l!==null;)Ob(i,a,l),l=l.sibling}function Ob(i,a,l){if(be&&typeof be.onCommitFiberUnmount=="function")try{be.onCommitFiberUnmount(fe,l)}catch{}switch(l.tag){case 26:In||_s(l,a),na(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:In||_s(l,a);var h=dn,g=Gr;Ma(l.type)&&(dn=l.stateNode,Gr=!1),na(i,a,l),Hc(l.stateNode),dn=h,Gr=g;break;case 5:In||_s(l,a);case 6:if(h=dn,g=Gr,dn=null,na(i,a,l),dn=h,Gr=g,dn!==null)if(Gr)try{(dn.nodeType===9?dn.body:dn.nodeName==="HTML"?dn.ownerDocument.body:dn).removeChild(l.stateNode)}catch(E){Zt(l,a,E)}else try{dn.removeChild(l.stateNode)}catch(E){Zt(l,a,E)}break;case 18:dn!==null&&(Gr?(i=dn,Tv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Kc(i)):Tv(dn,l.stateNode));break;case 4:h=dn,g=Gr,dn=l.stateNode.containerInfo,Gr=!0,na(i,a,l),dn=h,Gr=g;break;case 0:case 11:case 14:case 15:In||Ia(2,l,a),In||Ia(4,l,a),na(i,a,l);break;case 1:In||(_s(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&wb(l,a,h)),na(i,a,l);break;case 21:na(i,a,l);break;case 22:In=(h=In)||l.memoizedState!==null,na(i,a,l),In=h;break;default:na(i,a,l)}}function kb(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Kc(i)}catch(l){Zt(a,a.return,l)}}function cD(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Nb),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Nb),a;default:throw Error(r(435,i.tag))}}function Jp(i,a){var l=cD(i);a.forEach(function(h){var g=_D.bind(null,i,h);l.has(h)||(l.add(h),h.then(g,g))})}function ui(i,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h],E=i,x=a,V=x;e:for(;V!==null;){switch(V.tag){case 27:if(Ma(V.type)){dn=V.stateNode,Gr=!1;break e}break;case 5:dn=V.stateNode,Gr=!1;break e;case 3:case 4:dn=V.stateNode.containerInfo,Gr=!0;break e}V=V.return}if(dn===null)throw Error(r(160));Ob(E,x,g),dn=null,Gr=!1,E=g.alternate,E!==null&&(E.return=null),g.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Lb(a,i),a=a.sibling}var Qi=null;function Lb(i,a){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ui(a,i),li(i),h&4&&(Ia(3,i,i.return),Rc(3,i),Ia(5,i,i.return));break;case 1:ui(a,i),li(i),h&512&&(In||l===null||_s(l,l.return)),h&64&&ta&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var g=Qi;if(ui(a,i),li(i),h&512&&(In||l===null||_s(l,l.return)),h&4){var E=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":E=g.getElementsByTagName("title")[0],(!E||E[Si]||E[Lt]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=g.createElement(h),g.head.insertBefore(E,g.querySelector("head > title"))),pr(E,h,l),E[Lt]=i,ne(E),h=E;break e;case"link":var x=Cv("link","href",g).get(h+(l.href||""));if(x){for(var V=0;V<x.length;V++)if(E=x[V],E.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&E.getAttribute("rel")===(l.rel==null?null:l.rel)&&E.getAttribute("title")===(l.title==null?null:l.title)&&E.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(V,1);break t}}E=g.createElement(h),pr(E,h,l),g.head.appendChild(E);break;case"meta":if(x=Cv("meta","content",g).get(h+(l.content||""))){for(V=0;V<x.length;V++)if(E=x[V],E.getAttribute("content")===(l.content==null?null:""+l.content)&&E.getAttribute("name")===(l.name==null?null:l.name)&&E.getAttribute("property")===(l.property==null?null:l.property)&&E.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&E.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(V,1);break t}}E=g.createElement(h),pr(E,h,l),g.head.appendChild(E);break;default:throw Error(r(468,h))}E[Lt]=i,ne(E),h=E}i.stateNode=h}else Nv(g,i.type,i.stateNode);else i.stateNode=Iv(g,h,i.memoizedProps);else E!==h?(E===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):E.count--,h===null?Nv(g,i.type,i.stateNode):Iv(g,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Xp(i,i.memoizedProps,l.memoizedProps)}break;case 27:ui(a,i),li(i),h&512&&(In||l===null||_s(l,l.return)),l!==null&&h&4&&Xp(i,i.memoizedProps,l.memoizedProps);break;case 5:if(ui(a,i),li(i),h&512&&(In||l===null||_s(l,l.return)),i.flags&32){g=i.stateNode;try{cr(g,"")}catch(me){Zt(i,i.return,me)}}h&4&&i.stateNode!=null&&(g=i.memoizedProps,Xp(i,g,l!==null?l.memoizedProps:g)),h&1024&&(Zp=!0);break;case 6:if(ui(a,i),li(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(me){Zt(i,i.return,me)}}break;case 3:if(Nd=null,g=Qi,Qi=Id(a.containerInfo),ui(a,i),Qi=g,li(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Kc(a.containerInfo)}catch(me){Zt(i,i.return,me)}Zp&&(Zp=!1,Mb(i));break;case 4:h=Qi,Qi=Id(i.stateNode.containerInfo),ui(a,i),li(i),Qi=h;break;case 12:ui(a,i),li(i);break;case 13:ui(a,i),li(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(sg=Qe()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Jp(i,h)));break;case 22:g=i.memoizedState!==null;var Z=l!==null&&l.memoizedState!==null,he=ta,Te=In;if(ta=he||g,In=Te||Z,ui(a,i),In=Te,ta=he,li(i),h&8192)e:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(l===null||Z||ta||In||Yo(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){Z=l=a;try{if(E=Z.stateNode,g)x=E.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{V=Z.stateNode;var Se=Z.memoizedProps.style,de=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;V.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(me){Zt(Z,Z.return,me)}}}else if(a.tag===6){if(l===null){Z=a;try{Z.stateNode.nodeValue=g?"":Z.memoizedProps}catch(me){Zt(Z,Z.return,me)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,Jp(i,l))));break;case 19:ui(a,i),li(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Jp(i,h)));break;case 30:break;case 21:break;default:ui(a,i),li(i)}}function li(i){var a=i.flags;if(a&2){try{for(var l,h=i.return;h!==null;){if(Ib(h)){l=h;break}h=h.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var g=l.stateNode,E=Qp(i);md(i,E,g);break;case 5:var x=l.stateNode;l.flags&32&&(cr(x,""),l.flags&=-33);var V=Qp(i);md(i,V,x);break;case 3:case 4:var Z=l.stateNode.containerInfo,he=Qp(i);Wp(i,he,Z);break;default:throw Error(r(161))}}catch(Te){Zt(i,i.return,Te)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Mb(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;Mb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Ca(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Rb(i,a.alternate,a),a=a.sibling}function Yo(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Ia(4,a,a.return),Yo(a);break;case 1:_s(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&wb(a,a.return,l),Yo(a);break;case 27:Hc(a.stateNode);case 26:case 5:_s(a,a.return),Yo(a);break;case 22:a.memoizedState===null&&Yo(a);break;case 30:Yo(a);break;default:Yo(a)}i=i.sibling}}function Na(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,g=i,E=a,x=E.flags;switch(E.tag){case 0:case 11:case 15:Na(g,E,l),Rc(4,E);break;case 1:if(Na(g,E,l),h=E,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(he){Zt(h,h.return,he)}if(h=E,g=h.updateQueue,g!==null){var V=h.stateNode;try{var Z=g.shared.hiddenCallbacks;if(Z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<Z.length;g++)cT(Z[g],V)}catch(he){Zt(h,h.return,he)}}l&&x&64&&Ab(E),Dc(E,E.return);break;case 27:Cb(E);case 26:case 5:Na(g,E,l),l&&h===null&&x&4&&xb(E),Dc(E,E.return);break;case 12:Na(g,E,l);break;case 13:Na(g,E,l),l&&x&4&&kb(g,E);break;case 22:E.memoizedState===null&&Na(g,E,l),Dc(E,E.return);break;case 30:break;default:Na(g,E,l)}a=a.sibling}}function eg(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&gc(l))}function tg(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&gc(i))}function Ts(i,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Pb(i,a,l,h),a=a.sibling}function Pb(i,a,l,h){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Ts(i,a,l,h),g&2048&&Rc(9,a);break;case 1:Ts(i,a,l,h);break;case 3:Ts(i,a,l,h),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&gc(i)));break;case 12:if(g&2048){Ts(i,a,l,h),i=a.stateNode;try{var E=a.memoizedProps,x=E.id,V=E.onPostCommit;typeof V=="function"&&V(x,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Z){Zt(a,a.return,Z)}}else Ts(i,a,l,h);break;case 13:Ts(i,a,l,h);break;case 23:break;case 22:E=a.stateNode,x=a.alternate,a.memoizedState!==null?E._visibility&2?Ts(i,a,l,h):Oc(i,a):E._visibility&2?Ts(i,a,l,h):(E._visibility|=2,Fu(i,a,l,h,(a.subtreeFlags&10256)!==0)),g&2048&&eg(x,a);break;case 24:Ts(i,a,l,h),g&2048&&tg(a.alternate,a);break;default:Ts(i,a,l,h)}}function Fu(i,a,l,h,g){for(g=g&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var E=i,x=a,V=l,Z=h,he=x.flags;switch(x.tag){case 0:case 11:case 15:Fu(E,x,V,Z,g),Rc(8,x);break;case 23:break;case 22:var Te=x.stateNode;x.memoizedState!==null?Te._visibility&2?Fu(E,x,V,Z,g):Oc(E,x):(Te._visibility|=2,Fu(E,x,V,Z,g)),g&&he&2048&&eg(x.alternate,x);break;case 24:Fu(E,x,V,Z,g),g&&he&2048&&tg(x.alternate,x);break;default:Fu(E,x,V,Z,g)}a=a.sibling}}function Oc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,h=a,g=h.flags;switch(h.tag){case 22:Oc(l,h),g&2048&&eg(h.alternate,h);break;case 24:Oc(l,h),g&2048&&tg(h.alternate,h);break;default:Oc(l,h)}a=a.sibling}}var kc=8192;function zu(i){if(i.subtreeFlags&kc)for(i=i.child;i!==null;)Bb(i),i=i.sibling}function Bb(i){switch(i.tag){case 26:zu(i),i.flags&kc&&i.memoizedState!==null&&XD(Qi,i.memoizedState,i.memoizedProps);break;case 5:zu(i);break;case 3:case 4:var a=Qi;Qi=Id(i.stateNode.containerInfo),zu(i),Qi=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=kc,kc=16777216,zu(i),kc=a):zu(i));break;default:zu(i)}}function Ub(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Lc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];tr=h,Hb(h,i)}Ub(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Vb(i),i=i.sibling}function Vb(i){switch(i.tag){case 0:case 11:case 15:Lc(i),i.flags&2048&&Ia(9,i,i.return);break;case 3:Lc(i);break;case 12:Lc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,pd(i)):Lc(i);break;default:Lc(i)}}function pd(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];tr=h,Hb(h,i)}Ub(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Ia(8,a,a.return),pd(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,pd(a));break;default:pd(a)}i=i.sibling}}function Hb(i,a){for(;tr!==null;){var l=tr;switch(l.tag){case 0:case 11:case 15:Ia(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:gc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,tr=h;else e:for(l=i;tr!==null;){h=tr;var g=h.sibling,E=h.return;if(Db(h),h===l){tr=null;break e}if(g!==null){g.return=E,tr=g;break e}tr=E}}}var hD={getCacheForType:function(i){var a=br(Yn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l}},fD=typeof WeakMap=="function"?WeakMap:Map,qt=0,tn=null,gt=null,xt=0,Yt=0,ci=null,Ra=!1,ju=!1,ng=!1,ra=0,bn=0,Da=0,Go=0,rg=0,Mi=0,qu=0,Mc=null,$r=null,ig=!1,sg=0,gd=1/0,yd=null,Oa=null,mr=0,ka=null,Yu=null,Gu=0,ag=0,og=null,Fb=null,Pc=0,ug=null;function hi(){if((qt&2)!==0&&xt!==0)return xt&-xt;if(H.T!==null){var i=ku;return i!==0?i:pg()}return Dr()}function zb(){Mi===0&&(Mi=(xt&536870912)===0||Ot?Yi():536870912);var i=Li.current;return i!==null&&(i.flags|=32),Mi}function fi(i,a,l){(i===tn&&(Yt===2||Yt===9)||i.cancelPendingCommit!==null)&&($u(i,0),La(i,xt,Mi,!1)),Rr(i,l),((qt&2)===0||i!==tn)&&(i===tn&&((qt&2)===0&&(Go|=l),bn===4&&La(i,xt,Mi,!1)),bs(i))}function jb(i,a,l){if((qt&6)!==0)throw Error(r(327));var h=!l&&(a&124)===0&&(a&i.expiredLanes)===0||Wt(i,a),g=h?pD(i,a):hg(i,a,!0),E=h;do{if(g===0){ju&&!h&&La(i,a,0,!1);break}else{if(l=i.current.alternate,E&&!dD(l)){g=hg(i,a,!1),E=!1;continue}if(g===2){if(E=a,i.errorRecoveryDisabledLanes&E)var x=0;else x=i.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var V=i;g=Mc;var Z=V.current.memoizedState.isDehydrated;if(Z&&($u(V,x).flags|=256),x=hg(V,x,!1),x!==2){if(ng&&!Z){V.errorRecoveryDisabledLanes|=E,Go|=E,g=4;break e}E=$r,$r=g,E!==null&&($r===null?$r=E:$r.push.apply($r,E))}g=x}if(E=!1,g!==2)continue}}if(g===1){$u(i,0),La(i,a,0,!0);break}e:{switch(h=i,E=g,E){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:La(h,a,Mi,!Ra);break e;case 2:$r=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=sg+300-Qe(),10<g)){if(La(h,a,Mi,!Ra),lt(h,0,!0)!==0)break e;h.timeoutHandle=Ev(qb.bind(null,h,l,$r,yd,ig,a,Mi,Go,qu,Ra,E,2,-0,0),g);break e}qb(h,l,$r,yd,ig,a,Mi,Go,qu,Ra,E,0,-0,0)}}break}while(!0);bs(i)}function qb(i,a,l,h,g,E,x,V,Z,he,Te,Se,de,me){if(i.timeoutHandle=-1,Se=a.subtreeFlags,(Se&8192||(Se&16785408)===16785408)&&(jc={stylesheets:null,count:0,unsuspend:KD},Bb(a),Se=QD(),Se!==null)){i.cancelPendingCommit=Se(Wb.bind(null,i,a,E,l,h,g,x,V,Z,Te,1,de,me)),La(i,E,x,!he);return}Wb(i,a,E,l,h,g,x,V,Z)}function dD(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var g=l[h],E=g.getSnapshot;g=g.value;try{if(!ai(E(),g))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function La(i,a,l,h){a&=~rg,a&=~Go,i.suspendedLanes|=a,i.pingedLanes&=~a,h&&(i.warmLanes|=a),h=i.expirationTimes;for(var g=a;0<g;){var E=31-Ye(g),x=1<<E;h[E]=-1,g&=~x}l!==0&&jr(i,l,a)}function Ed(){return(qt&6)===0?(Bc(0),!1):!0}function lg(){if(gt!==null){if(Yt===0)var i=gt.return;else i=gt,Xs=Ho=null,xp(i),Vu=null,Ic=0,i=gt;for(;i!==null;)Sb(i.alternate,i),i=i.return;gt=null}}function $u(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,DD(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),lg(),tn=i,gt=l=Gs(i.current,null),xt=a,Yt=0,ci=null,Ra=!1,ju=Wt(i,a),ng=!1,qu=Mi=rg=Go=Da=bn=0,$r=Mc=null,ig=!1,(a&8)!==0&&(a|=a&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=a;0<h;){var g=31-Ye(h),E=1<<g;a|=i[g],h&=~E}return ra=a,Hf(),l}function Yb(i,a){ct=null,H.H=sd,a===Ec||a===Xf?(a=uT(),Yt=3):a===sT?(a=uT(),Yt=4):Yt=a===lb?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ci=a,gt===null&&(bn=1,cd(i,Ri(a,i.current)))}function Gb(){var i=H.H;return H.H=sd,i===null?sd:i}function $b(){var i=H.A;return H.A=hD,i}function cg(){bn=4,Ra||(xt&4194048)!==xt&&Li.current!==null||(ju=!0),(Da&134217727)===0&&(Go&134217727)===0||tn===null||La(tn,xt,Mi,!1)}function hg(i,a,l){var h=qt;qt|=2;var g=Gb(),E=$b();(tn!==i||xt!==a)&&(yd=null,$u(i,a)),a=!1;var x=bn;e:do try{if(Yt!==0&&gt!==null){var V=gt,Z=ci;switch(Yt){case 8:lg(),x=6;break e;case 3:case 2:case 9:case 6:Li.current===null&&(a=!0);var he=Yt;if(Yt=0,ci=null,Ku(i,V,Z,he),l&&ju){x=0;break e}break;default:he=Yt,Yt=0,ci=null,Ku(i,V,Z,he)}}mD(),x=bn;break}catch(Te){Yb(i,Te)}while(!0);return a&&i.shellSuspendCounter++,Xs=Ho=null,qt=h,H.H=g,H.A=E,gt===null&&(tn=null,xt=0,Hf()),x}function mD(){for(;gt!==null;)Kb(gt)}function pD(i,a){var l=qt;qt|=2;var h=Gb(),g=$b();tn!==i||xt!==a?(yd=null,gd=Qe()+500,$u(i,a)):ju=Wt(i,a);e:do try{if(Yt!==0&&gt!==null){a=gt;var E=ci;t:switch(Yt){case 1:Yt=0,ci=null,Ku(i,a,E,1);break;case 2:case 9:if(aT(E)){Yt=0,ci=null,Xb(a);break}a=function(){Yt!==2&&Yt!==9||tn!==i||(Yt=7),bs(i)},E.then(a,a);break e;case 3:Yt=7;break e;case 4:Yt=5;break e;case 7:aT(E)?(Yt=0,ci=null,Xb(a)):(Yt=0,ci=null,Ku(i,a,E,7));break;case 5:var x=null;switch(gt.tag){case 26:x=gt.memoizedState;case 5:case 27:var V=gt;if(!x||Rv(x)){Yt=0,ci=null;var Z=V.sibling;if(Z!==null)gt=Z;else{var he=V.return;he!==null?(gt=he,_d(he)):gt=null}break t}}Yt=0,ci=null,Ku(i,a,E,5);break;case 6:Yt=0,ci=null,Ku(i,a,E,6);break;case 8:lg(),bn=6;break e;default:throw Error(r(462))}}gD();break}catch(Te){Yb(i,Te)}while(!0);return Xs=Ho=null,H.H=h,H.A=g,qt=l,gt!==null?0:(tn=null,xt=0,Hf(),bn)}function gD(){for(;gt!==null&&!Dt();)Kb(gt)}function Kb(i){var a=bb(i.alternate,i,ra);i.memoizedProps=i.pendingProps,a===null?_d(i):gt=a}function Xb(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=pb(l,a,a.pendingProps,a.type,void 0,xt);break;case 11:a=pb(l,a,a.pendingProps,a.type.render,a.ref,xt);break;case 5:xp(a);default:Sb(l,a),a=gt=Q1(a,ra),a=bb(l,a,ra)}i.memoizedProps=i.pendingProps,a===null?_d(i):gt=a}function Ku(i,a,l,h){Xs=Ho=null,xp(a),Vu=null,Ic=0;var g=a.return;try{if(sD(i,g,a,l,xt)){bn=1,cd(i,Ri(l,i.current)),gt=null;return}}catch(E){if(g!==null)throw gt=g,E;bn=1,cd(i,Ri(l,i.current)),gt=null;return}a.flags&32768?(Ot||h===1?i=!0:ju||(xt&536870912)!==0?i=!1:(Ra=i=!0,(h===2||h===9||h===3||h===6)&&(h=Li.current,h!==null&&h.tag===13&&(h.flags|=16384))),Qb(a,i)):_d(a)}function _d(i){var a=i;do{if((a.flags&32768)!==0){Qb(a,Ra);return}i=a.return;var l=oD(a.alternate,a,ra);if(l!==null){gt=l;return}if(a=a.sibling,a!==null){gt=a;return}gt=a=i}while(a!==null);bn===0&&(bn=5)}function Qb(i,a){do{var l=uD(i.alternate,i);if(l!==null){l.flags&=32767,gt=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){gt=i;return}gt=i=l}while(i!==null);bn=6,gt=null}function Wb(i,a,l,h,g,E,x,V,Z){i.cancelPendingCommit=null;do Td();while(mr!==0);if((qt&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(E=a.lanes|a.childLanes,E|=tp,Tr(i,l,E,x,V,Z),i===tn&&(gt=tn=null,xt=0),Yu=a,ka=i,Gu=l,ag=E,og=g,Fb=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,TD(Vn,function(){return nv(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=H.T,H.T=null,g=Q.p,Q.p=2,x=qt,qt|=4;try{lD(i,a,l)}finally{qt=x,Q.p=g,H.T=h}}mr=1,Zb(),Jb(),ev()}}function Zb(){if(mr===1){mr=0;var i=ka,a=Yu,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=H.T,H.T=null;var h=Q.p;Q.p=2;var g=qt;qt|=4;try{Lb(a,i);var E=Sg,x=H1(i.containerInfo),V=E.focusedElem,Z=E.selectionRange;if(x!==V&&V&&V.ownerDocument&&V1(V.ownerDocument.documentElement,V)){if(Z!==null&&Q0(V)){var he=Z.start,Te=Z.end;if(Te===void 0&&(Te=he),"selectionStart"in V)V.selectionStart=he,V.selectionEnd=Math.min(Te,V.value.length);else{var Se=V.ownerDocument||document,de=Se&&Se.defaultView||window;if(de.getSelection){var me=de.getSelection(),et=V.textContent.length,Ke=Math.min(Z.start,et),Qt=Z.end===void 0?Ke:Math.min(Z.end,et);!me.extend&&Ke>Qt&&(x=Qt,Qt=Ke,Ke=x);var oe=U1(V,Ke),ie=U1(V,Qt);if(oe&&ie&&(me.rangeCount!==1||me.anchorNode!==oe.node||me.anchorOffset!==oe.offset||me.focusNode!==ie.node||me.focusOffset!==ie.offset)){var le=Se.createRange();le.setStart(oe.node,oe.offset),me.removeAllRanges(),Ke>Qt?(me.addRange(le),me.extend(ie.node,ie.offset)):(le.setEnd(ie.node,ie.offset),me.addRange(le))}}}}for(Se=[],me=V;me=me.parentNode;)me.nodeType===1&&Se.push({element:me,left:me.scrollLeft,top:me.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<Se.length;V++){var ve=Se[V];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}Od=!!vg,Sg=vg=null}finally{qt=g,Q.p=h,H.T=l}}i.current=a,mr=2}}function Jb(){if(mr===2){mr=0;var i=ka,a=Yu,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=H.T,H.T=null;var h=Q.p;Q.p=2;var g=qt;qt|=4;try{Rb(i,a.alternate,a)}finally{qt=g,Q.p=h,H.T=l}}mr=3}}function ev(){if(mr===4||mr===3){mr=0,Rn();var i=ka,a=Yu,l=Gu,h=Fb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?mr=5:(mr=0,Yu=ka=null,tv(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Oa=null),Gi(l),a=a.stateNode,be&&typeof be.onCommitFiberRoot=="function")try{be.onCommitFiberRoot(fe,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=H.T,g=Q.p,Q.p=2,H.T=null;try{for(var E=i.onRecoverableError,x=0;x<h.length;x++){var V=h[x];E(V.value,{componentStack:V.stack})}}finally{H.T=a,Q.p=g}}(Gu&3)!==0&&Td(),bs(i),g=i.pendingLanes,(l&4194090)!==0&&(g&42)!==0?i===ug?Pc++:(Pc=0,ug=i):Pc=0,Bc(0)}}function tv(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,gc(a)))}function Td(i){return Zb(),Jb(),ev(),nv()}function nv(){if(mr!==5)return!1;var i=ka,a=ag;ag=0;var l=Gi(Gu),h=H.T,g=Q.p;try{Q.p=32>l?32:l,H.T=null,l=og,og=null;var E=ka,x=Gu;if(mr=0,Yu=ka=null,Gu=0,(qt&6)!==0)throw Error(r(331));var V=qt;if(qt|=4,Vb(E.current),Pb(E,E.current,x,l),qt=V,Bc(0,!1),be&&typeof be.onPostCommitFiberRoot=="function")try{be.onPostCommitFiberRoot(fe,E)}catch{}return!0}finally{Q.p=g,H.T=h,tv(i,a)}}function rv(i,a,l){a=Ri(l,a),a=Hp(i.stateNode,a,2),i=Sa(i,a,2),i!==null&&(Rr(i,2),bs(i))}function Zt(i,a,l){if(i.tag===3)rv(i,i,l);else for(;a!==null;){if(a.tag===3){rv(a,i,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Oa===null||!Oa.has(h))){i=Ri(l,i),l=ob(2),h=Sa(a,l,2),h!==null&&(ub(l,h,a,i),Rr(h,2),bs(h));break}}a=a.return}}function fg(i,a,l){var h=i.pingCache;if(h===null){h=i.pingCache=new fD;var g=new Set;h.set(a,g)}else g=h.get(a),g===void 0&&(g=new Set,h.set(a,g));g.has(l)||(ng=!0,g.add(l),i=yD.bind(null,i,a,l),a.then(i,i))}function yD(i,a,l){var h=i.pingCache;h!==null&&h.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,tn===i&&(xt&l)===l&&(bn===4||bn===3&&(xt&62914560)===xt&&300>Qe()-sg?(qt&2)===0&&$u(i,0):rg|=l,qu===xt&&(qu=0)),bs(i)}function iv(i,a){a===0&&(a=_r()),i=Nu(i,a),i!==null&&(Rr(i,a),bs(i))}function ED(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),iv(i,l)}function _D(i,a){var l=0;switch(i.tag){case 13:var h=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(a),iv(i,l)}function TD(i,a){return Jt(i,a)}var bd=null,Xu=null,dg=!1,vd=!1,mg=!1,$o=0;function bs(i){i!==Xu&&i.next===null&&(Xu===null?bd=Xu=i:Xu=Xu.next=i),vd=!0,dg||(dg=!0,vD())}function Bc(i,a){if(!mg&&vd){mg=!0;do for(var l=!1,h=bd;h!==null;){if(i!==0){var g=h.pendingLanes;if(g===0)var E=0;else{var x=h.suspendedLanes,V=h.pingedLanes;E=(1<<31-Ye(42|i)+1)-1,E&=g&~(x&~V),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(l=!0,uv(h,E))}else E=xt,E=lt(h,h===tn?E:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(E&3)===0||Wt(h,E)||(l=!0,uv(h,E));h=h.next}while(l);mg=!1}}function bD(){sv()}function sv(){vd=dg=!1;var i=0;$o!==0&&(RD()&&(i=$o),$o=0);for(var a=Qe(),l=null,h=bd;h!==null;){var g=h.next,E=av(h,a);E===0?(h.next=null,l===null?bd=g:l.next=g,g===null&&(Xu=l)):(l=h,(i!==0||(E&3)!==0)&&(vd=!0)),h=g}Bc(i)}function av(i,a){for(var l=i.suspendedLanes,h=i.pingedLanes,g=i.expirationTimes,E=i.pendingLanes&-62914561;0<E;){var x=31-Ye(E),V=1<<x,Z=g[x];Z===-1?((V&l)===0||(V&h)!==0)&&(g[x]=Gt(V,a)):Z<=a&&(i.expiredLanes|=V),E&=~V}if(a=tn,l=xt,l=lt(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===a&&(Yt===2||Yt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&on(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Wt(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(h!==null&&on(h),Gi(l)){case 2:case 8:l=Un;break;case 32:l=Vn;break;case 268435456:l=Hn;break;default:l=Vn}return h=ov.bind(null,i),l=Jt(l,h),i.callbackPriority=a,i.callbackNode=l,a}return h!==null&&h!==null&&on(h),i.callbackPriority=2,i.callbackNode=null,2}function ov(i,a){if(mr!==0&&mr!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Td()&&i.callbackNode!==l)return null;var h=xt;return h=lt(i,i===tn?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(jb(i,h,a),av(i,Qe()),i.callbackNode!=null&&i.callbackNode===l?ov.bind(null,i):null)}function uv(i,a){if(Td())return null;jb(i,a,!0)}function vD(){OD(function(){(qt&6)!==0?Jt(cn,bD):sv()})}function pg(){return $o===0&&($o=Yi()),$o}function lv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Hs(""+i)}function cv(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function SD(i,a,l,h,g){if(a==="submit"&&l&&l.stateNode===g){var E=lv((g[hn]||null).action),x=h.submitter;x&&(a=(a=x[hn]||null)?lv(a.formAction):x.getAttribute("formAction"),a!==null&&(E=a,x=null));var V=new Eu("action","action",null,h,g);i.push({event:V,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if($o!==0){var Z=x?cv(g,x):new FormData(g);Mp(l,{pending:!0,data:Z,method:g.method,action:E},null,Z)}}else typeof E=="function"&&(V.preventDefault(),Z=x?cv(g,x):new FormData(g),Mp(l,{pending:!0,data:Z,method:g.method,action:E},E,Z))},currentTarget:g}]})}}for(var gg=0;gg<ep.length;gg++){var yg=ep[gg],AD=yg.toLowerCase(),wD=yg[0].toUpperCase()+yg.slice(1);Xi(AD,"on"+wD)}Xi(j1,"onAnimationEnd"),Xi(q1,"onAnimationIteration"),Xi(Y1,"onAnimationStart"),Xi("dblclick","onDoubleClick"),Xi("focusin","onFocus"),Xi("focusout","onBlur"),Xi(z3,"onTransitionRun"),Xi(j3,"onTransitionStart"),Xi(q3,"onTransitionCancel"),Xi(G1,"onTransitionEnd"),pt("onMouseEnter",["mouseout","mouseover"]),pt("onMouseLeave",["mouseout","mouseover"]),pt("onPointerEnter",["pointerout","pointerover"]),pt("onPointerLeave",["pointerout","pointerover"]),Pe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uc));function hv(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],g=h.event;h=h.listeners;e:{var E=void 0;if(a)for(var x=h.length-1;0<=x;x--){var V=h[x],Z=V.instance,he=V.currentTarget;if(V=V.listener,Z!==E&&g.isPropagationStopped())break e;E=V,g.currentTarget=he;try{E(g)}catch(Te){ld(Te)}g.currentTarget=null,E=Z}else for(x=0;x<h.length;x++){if(V=h[x],Z=V.instance,he=V.currentTarget,V=V.listener,Z!==E&&g.isPropagationStopped())break e;E=V,g.currentTarget=he;try{E(g)}catch(Te){ld(Te)}g.currentTarget=null,E=Z}}}}function yt(i,a){var l=a[os];l===void 0&&(l=a[os]=new Set);var h=i+"__bubble";l.has(h)||(fv(a,i,2,!1),l.add(h))}function Eg(i,a,l){var h=0;a&&(h|=4),fv(l,i,h,a)}var Sd="_reactListening"+Math.random().toString(36).slice(2);function _g(i){if(!i[Sd]){i[Sd]=!0,pe.forEach(function(l){l!=="selectionchange"&&(xD.has(l)||Eg(l,!1,i),Eg(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Sd]||(a[Sd]=!0,Eg("selectionchange",!1,a))}}function fv(i,a,l,h){switch(Pv(a)){case 2:var g=JD;break;case 8:g=e6;break;default:g=kg}l=g.bind(null,a,l,i),g=void 0,!Ci||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),h?g!==void 0?i.addEventListener(a,l,{capture:!0,passive:g}):i.addEventListener(a,l,!0):g!==void 0?i.addEventListener(a,l,{passive:g}):i.addEventListener(a,l,!1)}function Tg(i,a,l,h,g){var E=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var x=h.tag;if(x===3||x===4){var V=h.stateNode.containerInfo;if(V===g)break;if(x===4)for(x=h.return;x!==null;){var Z=x.tag;if((Z===3||Z===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;V!==null;){if(x=kr(V),x===null)return;if(Z=x.tag,Z===5||Z===6||Z===26||Z===27){h=E=x;continue e}V=V.parentNode}}h=h.return}wf(function(){var he=E,Te=hr(l),Se=[];e:{var de=$1.get(i);if(de!==void 0){var me=Eu,et=i;switch(i){case"keypress":if(fs(l)===0)break e;case"keydown":case"keyup":me=Au;break;case"focusin":et="focus",me=bu;break;case"focusout":et="blur",me=bu;break;case"beforeblur":case"afterblur":me=bu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=Ni;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=G0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=kf;break;case j1:case q1:case Y1:me=vu;break;case G1:me=Mf;break;case"scroll":case"scrollend":me=xf;break;case"wheel":me=wu;break;case"copy":case"cut":case"paste":me=Su;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=uc;break;case"toggle":case"beforetoggle":me=Bf}var Ke=(a&4)!==0,Qt=!Ke&&(i==="scroll"||i==="scrollend"),oe=Ke?de!==null?de+"Capture":null:de;Ke=[];for(var ie=he,le;ie!==null;){var ve=ie;if(le=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||le===null||oe===null||(ve=xo(ie,oe),ve!=null&&Ke.push(Vc(ie,ve,le))),Qt)break;ie=ie.return}0<Ke.length&&(de=new me(de,et,null,l,Te),Se.push({event:de,listeners:Ke}))}}if((a&7)===0){e:{if(de=i==="mouseover"||i==="pointerover",me=i==="mouseout"||i==="pointerout",de&&l!==qr&&(et=l.relatedTarget||l.fromElement)&&(kr(et)||et[En]))break e;if((me||de)&&(de=Te.window===Te?Te:(de=Te.ownerDocument)?de.defaultView||de.parentWindow:window,me?(et=l.relatedTarget||l.toElement,me=he,et=et?kr(et):null,et!==null&&(Qt=o(et),Ke=et.tag,et!==Qt||Ke!==5&&Ke!==27&&Ke!==6)&&(et=null)):(me=null,et=he),me!==et)){if(Ke=Ni,ve="onMouseLeave",oe="onMouseEnter",ie="mouse",(i==="pointerout"||i==="pointerover")&&(Ke=uc,ve="onPointerLeave",oe="onPointerEnter",ie="pointer"),Qt=me==null?de:Lr(me),le=et==null?de:Lr(et),de=new Ke(ve,ie+"leave",me,l,Te),de.target=Qt,de.relatedTarget=le,ve=null,kr(Te)===he&&(Ke=new Ke(oe,ie+"enter",et,l,Te),Ke.target=le,Ke.relatedTarget=Qt,ve=Ke),Qt=ve,me&&et)t:{for(Ke=me,oe=et,ie=0,le=Ke;le;le=Qu(le))ie++;for(le=0,ve=oe;ve;ve=Qu(ve))le++;for(;0<ie-le;)Ke=Qu(Ke),ie--;for(;0<le-ie;)oe=Qu(oe),le--;for(;ie--;){if(Ke===oe||oe!==null&&Ke===oe.alternate)break t;Ke=Qu(Ke),oe=Qu(oe)}Ke=null}else Ke=null;me!==null&&dv(Se,de,me,Ke,!1),et!==null&&Qt!==null&&dv(Se,Qt,et,Ke,!0)}}e:{if(de=he?Lr(he):window,me=de.nodeName&&de.nodeName.toLowerCase(),me==="select"||me==="input"&&de.type==="file")var Fe=O1;else if(qn(de))if(k1)Fe=V3;else{Fe=B3;var ft=P3}else me=de.nodeName,!me||me.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?he&&Vs(he.elementType)&&(Fe=O1):Fe=U3;if(Fe&&(Fe=Fe(i,he))){Ys(Se,Fe,l,Te);break e}ft&&ft(i,de,he),i==="focusout"&&he&&de.type==="number"&&he.memoizedProps.value!=null&&lr(de,"number",de.value)}switch(ft=he?Lr(he):window,i){case"focusin":(qn(ft)||ft.contentEditable==="true")&&(xu=ft,W0=he,hc=null);break;case"focusout":hc=W0=xu=null;break;case"mousedown":Z0=!0;break;case"contextmenu":case"mouseup":case"dragend":Z0=!1,F1(Se,l,Te);break;case"selectionchange":if(F3)break;case"keydown":case"keyup":F1(Se,l,Te)}var Ge;if(ps)e:{switch(i){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else At?ye(i,l)&&(Xe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Xe="onCompositionStart");Xe&&(A&&l.locale!=="ko"&&(At||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&At&&(Ge=rc()):(hs=Te,_a="value"in hs?hs.value:hs.textContent,At=!0)),ft=Ad(he,Xe),0<ft.length&&(Xe=new ac(Xe,i,null,l,Te),Se.push({event:Xe,listeners:ft}),Ge?Xe.data=Ge:(Ge=Le(l),Ge!==null&&(Xe.data=Ge)))),(Ge=v?jn(i,l):wt(i,l))&&(Xe=Ad(he,"onBeforeInput"),0<Xe.length&&(ft=new ac("onBeforeInput","beforeinput",null,l,Te),Se.push({event:ft,listeners:Xe}),ft.data=Ge)),SD(Se,i,he,l,Te)}hv(Se,a)})}function Vc(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Ad(i,a){for(var l=a+"Capture",h=[];i!==null;){var g=i,E=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||E===null||(g=xo(i,l),g!=null&&h.unshift(Vc(i,g,E)),g=xo(i,a),g!=null&&h.push(Vc(i,g,E))),i.tag===3)return h;i=i.return}return[]}function Qu(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function dv(i,a,l,h,g){for(var E=a._reactName,x=[];l!==null&&l!==h;){var V=l,Z=V.alternate,he=V.stateNode;if(V=V.tag,Z!==null&&Z===h)break;V!==5&&V!==26&&V!==27||he===null||(Z=he,g?(he=xo(l,E),he!=null&&x.unshift(Vc(l,he,Z))):g||(he=xo(l,E),he!=null&&x.push(Vc(l,he,Z)))),l=l.return}x.length!==0&&i.push({event:a,listeners:x})}var ID=/\r\n?/g,CD=/\u0000|\uFFFD/g;function mv(i){return(typeof i=="string"?i:""+i).replace(ID,`
`).replace(CD,"")}function pv(i,a){return a=mv(a),mv(i)===a}function wd(){}function Xt(i,a,l,h,g,E){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||cr(i,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&cr(i,""+h);break;case"className":Nt(i,"class",h);break;case"tabIndex":Nt(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Nt(i,l,h);break;case"style":ls(i,h,E);break;case"data":if(a!=="object"){Nt(i,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Hs(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(l==="formAction"?(a!=="input"&&Xt(i,a,"name",g.name,g,null),Xt(i,a,"formEncType",g.formEncType,g,null),Xt(i,a,"formMethod",g.formMethod,g,null),Xt(i,a,"formTarget",g.formTarget,g,null)):(Xt(i,a,"encType",g.encType,g,null),Xt(i,a,"method",g.method,g,null),Xt(i,a,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Hs(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=wd);break;case"onScroll":h!=null&&yt("scroll",i);break;case"onScrollEnd":h!=null&&yt("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=Hs(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":yt("beforetoggle",i),yt("toggle",i),Pt(i,"popover",h);break;case"xlinkActuate":Bt(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Bt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Bt(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Bt(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Bt(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Bt(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Bt(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Bt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Bt(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Pt(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=ya.get(l)||l,Pt(i,l,h))}}function bg(i,a,l,h,g,E){switch(l){case"style":ls(i,h,E);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof h=="string"?cr(i,h):(typeof h=="number"||typeof h=="bigint")&&cr(i,""+h);break;case"onScroll":h!=null&&yt("scroll",i);break;case"onScrollEnd":h!=null&&yt("scrollend",i);break;case"onClick":h!=null&&(i.onclick=wd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!De.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),a=l.slice(2,g?l.length-7:void 0),E=i[hn]||null,E=E!=null?E[l]:null,typeof E=="function"&&i.removeEventListener(a,E,g),typeof h=="function")){typeof E!="function"&&E!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,h,g);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):Pt(i,l,h)}}}function pr(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",i),yt("load",i);var h=!1,g=!1,E;for(E in l)if(l.hasOwnProperty(E)){var x=l[E];if(x!=null)switch(E){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Xt(i,a,E,x,l,null)}}g&&Xt(i,a,"srcSet",l.srcSet,l,null),h&&Xt(i,a,"src",l.src,l,null);return;case"input":yt("invalid",i);var V=E=x=g=null,Z=null,he=null;for(h in l)if(l.hasOwnProperty(h)){var Te=l[h];if(Te!=null)switch(h){case"name":g=Te;break;case"type":x=Te;break;case"checked":Z=Te;break;case"defaultChecked":he=Te;break;case"value":E=Te;break;case"defaultValue":V=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(r(137,a));break;default:Xt(i,a,h,Te,l,null)}}ur(i,E,V,Z,he,x,g,!1),St(i);return;case"select":yt("invalid",i),h=x=E=null;for(g in l)if(l.hasOwnProperty(g)&&(V=l[g],V!=null))switch(g){case"value":E=V;break;case"defaultValue":x=V;break;case"multiple":h=V;default:Xt(i,a,g,V,l,null)}a=E,l=x,i.multiple=!!h,a!=null?Br(i,!!h,a,!1):l!=null&&Br(i,!!h,l,!0);return;case"textarea":yt("invalid",i),E=g=h=null;for(x in l)if(l.hasOwnProperty(x)&&(V=l[x],V!=null))switch(x){case"value":h=V;break;case"defaultValue":g=V;break;case"children":E=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(91));break;default:Xt(i,a,x,V,l,null)}$i(i,h,g,E),St(i);return;case"option":for(Z in l)if(l.hasOwnProperty(Z)&&(h=l[Z],h!=null))switch(Z){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Xt(i,a,Z,h,l,null)}return;case"dialog":yt("beforetoggle",i),yt("toggle",i),yt("cancel",i),yt("close",i);break;case"iframe":case"object":yt("load",i);break;case"video":case"audio":for(h=0;h<Uc.length;h++)yt(Uc[h],i);break;case"image":yt("error",i),yt("load",i);break;case"details":yt("toggle",i);break;case"embed":case"source":case"link":yt("error",i),yt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in l)if(l.hasOwnProperty(he)&&(h=l[he],h!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Xt(i,a,he,h,l,null)}return;default:if(Vs(a)){for(Te in l)l.hasOwnProperty(Te)&&(h=l[Te],h!==void 0&&bg(i,a,Te,h,l,void 0));return}}for(V in l)l.hasOwnProperty(V)&&(h=l[V],h!=null&&Xt(i,a,V,h,l,null))}function ND(i,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,E=null,x=null,V=null,Z=null,he=null,Te=null;for(me in l){var Se=l[me];if(l.hasOwnProperty(me)&&Se!=null)switch(me){case"checked":break;case"value":break;case"defaultValue":Z=Se;default:h.hasOwnProperty(me)||Xt(i,a,me,null,h,Se)}}for(var de in h){var me=h[de];if(Se=l[de],h.hasOwnProperty(de)&&(me!=null||Se!=null))switch(de){case"type":E=me;break;case"name":g=me;break;case"checked":he=me;break;case"defaultChecked":Te=me;break;case"value":x=me;break;case"defaultValue":V=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(137,a));break;default:me!==Se&&Xt(i,a,de,me,h,Se)}}en(i,x,V,Z,he,Te,E,g);return;case"select":me=x=V=de=null;for(E in l)if(Z=l[E],l.hasOwnProperty(E)&&Z!=null)switch(E){case"value":break;case"multiple":me=Z;default:h.hasOwnProperty(E)||Xt(i,a,E,null,h,Z)}for(g in h)if(E=h[g],Z=l[g],h.hasOwnProperty(g)&&(E!=null||Z!=null))switch(g){case"value":de=E;break;case"defaultValue":V=E;break;case"multiple":x=E;default:E!==Z&&Xt(i,a,g,E,h,Z)}a=V,l=x,h=me,de!=null?Br(i,!!l,de,!1):!!h!=!!l&&(a!=null?Br(i,!!l,a,!0):Br(i,!!l,l?[]:"",!1));return;case"textarea":me=de=null;for(V in l)if(g=l[V],l.hasOwnProperty(V)&&g!=null&&!h.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:Xt(i,a,V,null,h,g)}for(x in h)if(g=h[x],E=l[x],h.hasOwnProperty(x)&&(g!=null||E!=null))switch(x){case"value":de=g;break;case"defaultValue":me=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==E&&Xt(i,a,x,g,h,E)}Ct(i,de,me);return;case"option":for(var et in l)if(de=l[et],l.hasOwnProperty(et)&&de!=null&&!h.hasOwnProperty(et))switch(et){case"selected":i.selected=!1;break;default:Xt(i,a,et,null,h,de)}for(Z in h)if(de=h[Z],me=l[Z],h.hasOwnProperty(Z)&&de!==me&&(de!=null||me!=null))switch(Z){case"selected":i.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:Xt(i,a,Z,de,h,me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in l)de=l[Ke],l.hasOwnProperty(Ke)&&de!=null&&!h.hasOwnProperty(Ke)&&Xt(i,a,Ke,null,h,de);for(he in h)if(de=h[he],me=l[he],h.hasOwnProperty(he)&&de!==me&&(de!=null||me!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,a));break;default:Xt(i,a,he,de,h,me)}return;default:if(Vs(a)){for(var Qt in l)de=l[Qt],l.hasOwnProperty(Qt)&&de!==void 0&&!h.hasOwnProperty(Qt)&&bg(i,a,Qt,void 0,h,de);for(Te in h)de=h[Te],me=l[Te],!h.hasOwnProperty(Te)||de===me||de===void 0&&me===void 0||bg(i,a,Te,de,h,me);return}}for(var oe in l)de=l[oe],l.hasOwnProperty(oe)&&de!=null&&!h.hasOwnProperty(oe)&&Xt(i,a,oe,null,h,de);for(Se in h)de=h[Se],me=l[Se],!h.hasOwnProperty(Se)||de===me||de==null&&me==null||Xt(i,a,Se,de,h,me)}var vg=null,Sg=null;function xd(i){return i.nodeType===9?i:i.ownerDocument}function gv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yv(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Ag(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var wg=null;function RD(){var i=window.event;return i&&i.type==="popstate"?i===wg?!1:(wg=i,!0):(wg=null,!1)}var Ev=typeof setTimeout=="function"?setTimeout:void 0,DD=typeof clearTimeout=="function"?clearTimeout:void 0,_v=typeof Promise=="function"?Promise:void 0,OD=typeof queueMicrotask=="function"?queueMicrotask:typeof _v<"u"?function(i){return _v.resolve(null).then(i).catch(kD)}:Ev;function kD(i){setTimeout(function(){throw i})}function Ma(i){return i==="head"}function Tv(i,a){var l=a,h=0,g=0;do{var E=l.nextSibling;if(i.removeChild(l),E&&E.nodeType===8)if(l=E.data,l==="/$"){if(0<h&&8>h){l=h;var x=i.ownerDocument;if(l&1&&Hc(x.documentElement),l&2&&Hc(x.body),l&4)for(l=x.head,Hc(l),x=l.firstChild;x;){var V=x.nextSibling,Z=x.nodeName;x[Si]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&x.rel.toLowerCase()==="stylesheet"||l.removeChild(x),x=V}}if(g===0){i.removeChild(E),Kc(a);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:h=l.charCodeAt(0)-48;else h=0;l=E}while(l);Kc(a)}function xg(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":xg(l),si(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function LD(i,a,l,h){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Si])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(E=i.getAttribute("rel"),E==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(E!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(E=i.getAttribute("src"),(E!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&E&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var E=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===E)return i}else return i;if(i=Wi(i.nextSibling),i===null)break}return null}function MD(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Wi(i.nextSibling),i===null))return null;return i}function Ig(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function PD(i,a){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Wi(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var Cg=null;function bv(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return i;a--}else l==="/$"&&a++}i=i.previousSibling}return null}function vv(i,a,l){switch(a=xd(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Hc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);si(i)}var Pi=new Map,Sv=new Set;function Id(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ia=Q.d;Q.d={f:BD,r:UD,D:VD,C:HD,L:FD,m:zD,X:qD,S:jD,M:YD};function BD(){var i=ia.f(),a=Ed();return i||a}function UD(i){var a=Xn(i);a!==null&&a.tag===5&&a.type==="form"?jT(a):ia.r(i)}var Wu=typeof document>"u"?null:document;function Av(i,a,l){var h=Wu;if(h&&typeof a=="string"&&a){var g=fn(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),Sv.has(g)||(Sv.add(g),i={rel:i,crossOrigin:l,href:a},h.querySelector(g)===null&&(a=h.createElement("link"),pr(a,"link",i),ne(a),h.head.appendChild(a)))}}function VD(i){ia.D(i),Av("dns-prefetch",i,null)}function HD(i,a){ia.C(i,a),Av("preconnect",i,a)}function FD(i,a,l){ia.L(i,a,l);var h=Wu;if(h&&i&&a){var g='link[rel="preload"][as="'+fn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+fn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+fn(l.imageSizes)+'"]')):g+='[href="'+fn(i)+'"]';var E=g;switch(a){case"style":E=Zu(i);break;case"script":E=Ju(i)}Pi.has(E)||(i=p({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Pi.set(E,i),h.querySelector(g)!==null||a==="style"&&h.querySelector(Fc(E))||a==="script"&&h.querySelector(zc(E))||(a=h.createElement("link"),pr(a,"link",i),ne(a),h.head.appendChild(a)))}}function zD(i,a){ia.m(i,a);var l=Wu;if(l&&i){var h=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+fn(h)+'"][href="'+fn(i)+'"]',E=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Ju(i)}if(!Pi.has(E)&&(i=p({rel:"modulepreload",href:i},a),Pi.set(E,i),l.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(zc(E)))return}h=l.createElement("link"),pr(h,"link",i),ne(h),l.head.appendChild(h)}}}function jD(i,a,l){ia.S(i,a,l);var h=Wu;if(h&&i){var g=zn(h).hoistableStyles,E=Zu(i);a=a||"default";var x=g.get(E);if(!x){var V={loading:0,preload:null};if(x=h.querySelector(Fc(E)))V.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Pi.get(E))&&Ng(i,l);var Z=x=h.createElement("link");ne(Z),pr(Z,"link",i),Z._p=new Promise(function(he,Te){Z.onload=he,Z.onerror=Te}),Z.addEventListener("load",function(){V.loading|=1}),Z.addEventListener("error",function(){V.loading|=2}),V.loading|=4,Cd(x,a,h)}x={type:"stylesheet",instance:x,count:1,state:V},g.set(E,x)}}}function qD(i,a){ia.X(i,a);var l=Wu;if(l&&i){var h=zn(l).hoistableScripts,g=Ju(i),E=h.get(g);E||(E=l.querySelector(zc(g)),E||(i=p({src:i,async:!0},a),(a=Pi.get(g))&&Rg(i,a),E=l.createElement("script"),ne(E),pr(E,"link",i),l.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(g,E))}}function YD(i,a){ia.M(i,a);var l=Wu;if(l&&i){var h=zn(l).hoistableScripts,g=Ju(i),E=h.get(g);E||(E=l.querySelector(zc(g)),E||(i=p({src:i,async:!0,type:"module"},a),(a=Pi.get(g))&&Rg(i,a),E=l.createElement("script"),ne(E),pr(E,"link",i),l.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(g,E))}}function wv(i,a,l,h){var g=(g=Ie.current)?Id(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Zu(l.href),l=zn(g).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Zu(l.href);var E=zn(g).hoistableStyles,x=E.get(i);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(i,x),(E=g.querySelector(Fc(i)))&&!E._p&&(x.instance=E,x.state.loading=5),Pi.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Pi.set(i,l),E||GD(g,i,l,x.state))),a&&h===null)throw Error(r(528,""));return x}if(a&&h!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ju(l),l=zn(g).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Zu(i){return'href="'+fn(i)+'"'}function Fc(i){return'link[rel="stylesheet"]['+i+"]"}function xv(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function GD(i,a,l,h){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=i.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),pr(a,"link",l),ne(a),i.head.appendChild(a))}function Ju(i){return'[src="'+fn(i)+'"]'}function zc(i){return"script[async]"+i}function Iv(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=i.querySelector('style[data-href~="'+fn(l.href)+'"]');if(h)return a.instance=h,ne(h),h;var g=p({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),ne(h),pr(h,"style",g),Cd(h,l.precedence,i),a.instance=h;case"stylesheet":g=Zu(l.href);var E=i.querySelector(Fc(g));if(E)return a.state.loading|=4,a.instance=E,ne(E),E;h=xv(l),(g=Pi.get(g))&&Ng(h,g),E=(i.ownerDocument||i).createElement("link"),ne(E);var x=E;return x._p=new Promise(function(V,Z){x.onload=V,x.onerror=Z}),pr(E,"link",h),a.state.loading|=4,Cd(E,l.precedence,i),a.instance=E;case"script":return E=Ju(l.src),(g=i.querySelector(zc(E)))?(a.instance=g,ne(g),g):(h=l,(g=Pi.get(E))&&(h=p({},l),Rg(h,g)),i=i.ownerDocument||i,g=i.createElement("script"),ne(g),pr(g,"link",h),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Cd(h,l.precedence,i));return a.instance}function Cd(i,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,E=g,x=0;x<h.length;x++){var V=h[x];if(V.dataset.precedence===a)E=V;else if(E!==g)break}E?E.parentNode.insertBefore(i,E.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function Ng(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Rg(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Nd=null;function Cv(i,a,l){if(Nd===null){var h=new Map,g=Nd=new Map;g.set(l,h)}else g=Nd,h=g.get(l),h||(h=new Map,g.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var E=l[g];if(!(E[Si]||E[Lt]||i==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var x=E.getAttribute(a)||"";x=i+x;var V=h.get(x);V?V.push(E):h.set(x,[E])}}return h}function Nv(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function $D(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Rv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var jc=null;function KD(){}function XD(i,a,l){if(jc===null)throw Error(r(475));var h=jc;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Zu(l.href),E=i.querySelector(Fc(g));if(E){i=E._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(h.count++,h=Rd.bind(h),i.then(h,h)),a.state.loading|=4,a.instance=E,ne(E);return}E=i.ownerDocument||i,l=xv(l),(g=Pi.get(g))&&Ng(l,g),E=E.createElement("link"),ne(E);var x=E;x._p=new Promise(function(V,Z){x.onload=V,x.onerror=Z}),pr(E,"link",l),a.instance=E}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(h.count++,a=Rd.bind(h),i.addEventListener("load",a),i.addEventListener("error",a))}}function QD(){if(jc===null)throw Error(r(475));var i=jc;return i.stylesheets&&i.count===0&&Dg(i,i.stylesheets),0<i.count?function(a){var l=setTimeout(function(){if(i.stylesheets&&Dg(i,i.stylesheets),i.unsuspend){var h=i.unsuspend;i.unsuspend=null,h()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(l)}}:null}function Rd(){if(this.count--,this.count===0){if(this.stylesheets)Dg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Dd=null;function Dg(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Dd=new Map,a.forEach(WD,i),Dd=null,Rd.call(i))}function WD(i,a){if(!(a.state.loading&4)){var l=Dd.get(i);if(l)var h=l.get(null);else{l=new Map,Dd.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<g.length;E++){var x=g[E];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),h=x)}h&&l.set(null,h)}g=a.instance,x=g.getAttribute("data-precedence"),E=l.get(x)||h,E===h&&l.set(null,g),l.set(x,g),this.count++,h=Rd.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),E?E.parentNode.insertBefore(g,E.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var qc={$$typeof:q,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function ZD(i,a,l,h,g,E,x,V){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fn(0),this.hiddenUpdates=Fn(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=E,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Dv(i,a,l,h,g,E,x,V,Z,he,Te,Se){return i=new ZD(i,a,l,x,V,Z,he,Se),a=1,E===!0&&(a|=24),E=oi(3,null,null,a),i.current=E,E.stateNode=i,a=fp(),a.refCount++,i.pooledCache=a,a.refCount++,E.memoizedState={element:h,isDehydrated:l,cache:a},gp(E),i}function Ov(i){return i?(i=Ru,i):Ru}function kv(i,a,l,h,g,E){g=Ov(g),h.context===null?h.context=g:h.pendingContext=g,h=va(a),h.payload={element:l},E=E===void 0?null:E,E!==null&&(h.callback=E),l=Sa(i,h,a),l!==null&&(fi(l,i,a),Tc(l,i,a))}function Lv(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function Og(i,a){Lv(i,a),(i=i.alternate)&&Lv(i,a)}function Mv(i){if(i.tag===13){var a=Nu(i,67108864);a!==null&&fi(a,i,67108864),Og(i,67108864)}}var Od=!0;function JD(i,a,l,h){var g=H.T;H.T=null;var E=Q.p;try{Q.p=2,kg(i,a,l,h)}finally{Q.p=E,H.T=g}}function e6(i,a,l,h){var g=H.T;H.T=null;var E=Q.p;try{Q.p=8,kg(i,a,l,h)}finally{Q.p=E,H.T=g}}function kg(i,a,l,h){if(Od){var g=Lg(h);if(g===null)Tg(i,a,h,kd,l),Bv(i,h);else if(n6(g,i,a,l,h))h.stopPropagation();else if(Bv(i,h),a&4&&-1<t6.indexOf(i)){for(;g!==null;){var E=Xn(g);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var x=vt(E.pendingLanes);if(x!==0){var V=E;for(V.pendingLanes|=2,V.entangledLanes|=2;x;){var Z=1<<31-Ye(x);V.entanglements[1]|=Z,x&=~Z}bs(E),(qt&6)===0&&(gd=Qe()+500,Bc(0))}}break;case 13:V=Nu(E,2),V!==null&&fi(V,E,2),Ed(),Og(E,2)}if(E=Lg(h),E===null&&Tg(i,a,h,kd,l),E===g)break;g=E}g!==null&&h.stopPropagation()}else Tg(i,a,h,null,l)}}function Lg(i){return i=hr(i),Mg(i)}var kd=null;function Mg(i){if(kd=null,i=kr(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=u(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return kd=i,null}function Pv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case cn:return 2;case Un:return 8;case Vn:case Kn:return 32;case Hn:return 268435456;default:return 32}default:return 32}}var Pg=!1,Pa=null,Ba=null,Ua=null,Yc=new Map,Gc=new Map,Va=[],t6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bv(i,a){switch(i){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":Ua=null;break;case"pointerover":case"pointerout":Yc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gc.delete(a.pointerId)}}function $c(i,a,l,h,g,E){return i===null||i.nativeEvent!==E?(i={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:E,targetContainers:[g]},a!==null&&(a=Xn(a),a!==null&&Mv(a)),i):(i.eventSystemFlags|=h,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function n6(i,a,l,h,g){switch(a){case"focusin":return Pa=$c(Pa,i,a,l,h,g),!0;case"dragenter":return Ba=$c(Ba,i,a,l,h,g),!0;case"mouseover":return Ua=$c(Ua,i,a,l,h,g),!0;case"pointerover":var E=g.pointerId;return Yc.set(E,$c(Yc.get(E)||null,i,a,l,h,g)),!0;case"gotpointercapture":return E=g.pointerId,Gc.set(E,$c(Gc.get(E)||null,i,a,l,h,g)),!0}return!1}function Uv(i){var a=kr(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){i.blockedOn=a,ii(i.priority,function(){if(l.tag===13){var h=hi();h=ri(h);var g=Nu(l,h);g!==null&&fi(g,l,h),Og(l,h)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ld(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=Lg(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);qr=h,l.target.dispatchEvent(h),qr=null}else return a=Xn(l),a!==null&&Mv(a),i.blockedOn=l,!1;a.shift()}return!0}function Vv(i,a,l){Ld(i)&&l.delete(a)}function r6(){Pg=!1,Pa!==null&&Ld(Pa)&&(Pa=null),Ba!==null&&Ld(Ba)&&(Ba=null),Ua!==null&&Ld(Ua)&&(Ua=null),Yc.forEach(Vv),Gc.forEach(Vv)}function Md(i,a){i.blockedOn===a&&(i.blockedOn=null,Pg||(Pg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,r6)))}var Pd=null;function Hv(i){Pd!==i&&(Pd=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Pd===i&&(Pd=null);for(var a=0;a<i.length;a+=3){var l=i[a],h=i[a+1],g=i[a+2];if(typeof h!="function"){if(Mg(h||l)===null)continue;break}var E=Xn(l);E!==null&&(i.splice(a,3),a-=3,Mp(E,{pending:!0,data:g,method:l.method,action:h},h,g))}}))}function Kc(i){function a(Z){return Md(Z,i)}Pa!==null&&Md(Pa,i),Ba!==null&&Md(Ba,i),Ua!==null&&Md(Ua,i),Yc.forEach(a),Gc.forEach(a);for(var l=0;l<Va.length;l++){var h=Va[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<Va.length&&(l=Va[0],l.blockedOn===null);)Uv(l),l.blockedOn===null&&Va.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var g=l[h],E=l[h+1],x=g[hn]||null;if(typeof E=="function")x||Hv(l);else if(x){var V=null;if(E&&E.hasAttribute("formAction")){if(g=E,x=E[hn]||null)V=x.formAction;else if(Mg(g)!==null)continue}else V=x.action;typeof V=="function"?l[h+1]=V:(l.splice(h,3),h-=3),Hv(l)}}}function Bg(i){this._internalRoot=i}Bd.prototype.render=Bg.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,h=hi();kv(l,h,i,a,null,null)},Bd.prototype.unmount=Bg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;kv(i.current,2,null,i,null,null),Ed(),a[En]=null}};function Bd(i){this._internalRoot=i}Bd.prototype.unstable_scheduleHydration=function(i){if(i){var a=Dr();i={blockedOn:null,target:i,priority:a};for(var l=0;l<Va.length&&a!==0&&a<Va[l].priority;l++);Va.splice(l,0,i),l===0&&Uv(i)}};var Fv=e.version;if(Fv!=="19.1.0")throw Error(r(527,Fv,"19.1.0"));Q.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=f(a),i=i!==null?d(i):null,i=i===null?null:i.stateNode,i};var i6={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ud.isDisabled&&Ud.supportsFiber)try{fe=Ud.inject(i6),be=Ud}catch{}}return Qc.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,h="",g=rb,E=ib,x=sb,V=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(V=a.unstable_transitionCallbacks)),a=Dv(i,1,!1,null,null,l,h,g,E,x,V,null),i[En]=a.current,_g(i),new Bg(a)},Qc.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var h=!1,g="",E=rb,x=ib,V=sb,Z=null,he=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(E=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(V=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Z=l.unstable_transitionCallbacks),l.formState!==void 0&&(he=l.formState)),a=Dv(i,1,!0,a,l??null,h,g,E,x,V,Z,he),a.context=Ov(null),l=a.current,h=hi(),h=ri(h),g=va(h),g.callback=null,Sa(l,g,h),l=h,a.current.lanes=l,Rr(a,l),bs(a),i[En]=a.current,_g(i),new Bd(a)},Qc.version="19.1.0",Qc}var Wv;function d6(){if(Wv)return Hg.exports;Wv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hg.exports=f6(),Hg.exports}var m6=d6();function zr(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=zr(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var qg={exports:{}},Yg={},Gg={exports:{}},$g={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function p6(){if(Zv)return $g;Zv=1;var t=tf();function e(y,T){return y===T&&(y!==0||1/y===1/T)||y!==y&&T!==T}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,o=t.useLayoutEffect,u=t.useDebugValue;function c(y,T){var b=T(),w=r({inst:{value:b,getSnapshot:T}}),N=w[0].inst,k=w[1];return o(function(){N.value=b,N.getSnapshot=T,f(N)&&k({inst:N})},[y,b,T]),s(function(){return f(N)&&k({inst:N}),y(function(){f(N)&&k({inst:N})})},[y]),u(b),b}function f(y){var T=y.getSnapshot;y=y.value;try{var b=T();return!n(y,b)}catch{return!0}}function d(y,T){return T()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return $g.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,$g}var Jv;function g6(){return Jv||(Jv=1,Gg.exports=p6()),Gg.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eS;function y6(){if(eS)return Yg;eS=1;var t=tf(),e=g6();function n(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,o=t.useRef,u=t.useEffect,c=t.useMemo,f=t.useDebugValue;return Yg.useSyncExternalStoreWithSelector=function(d,p,y,T,b){var w=o(null);if(w.current===null){var N={hasValue:!1,value:null};w.current=N}else N=w.current;w=c(function(){function D($){if(!F){if(F=!0,q=$,$=T($),b!==void 0&&N.hasValue){var R=N.value;if(b(R,$))return j=R}return j=$}if(R=j,r(q,$))return R;var C=T($);return b!==void 0&&b(R,C)?(q=$,R):(q=$,j=C)}var F=!1,q,j,ee=y===void 0?null:y;return[function(){return D(p())},ee===null?void 0:function(){return D(ee())}]},[p,y,T,b]);var k=s(d,w[0],w[1]);return u(function(){N.hasValue=!0,N.value=k},[k]),f(k),k},Yg}var tS;function E6(){return tS||(tS=1,qg.exports=y6()),qg.exports}var _6=E6();const T6=o0(_6),b6={},nS=t=>{let e;const n=new Set,r=(p,y)=>{const T=typeof p=="function"?p(e):p;if(!Object.is(T,e)){const b=e;e=y??(typeof T!="object"||T===null)?T:Object.assign({},e,T),n.forEach(w=>w(e,b))}},s=()=>e,f={setState:r,getState:s,getInitialState:()=>d,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(b6?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=e=t(r,s,f);return f},v6=t=>t?nS(t):nS,{useDebugValue:S6}=_e,{useSyncExternalStoreWithSelector:A6}=T6,w6=t=>t;function Jw(t,e=w6,n){const r=A6(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return S6(r),r}const rS=(t,e)=>{const n=v6(t),r=(s,o=e)=>Jw(n,s,o);return Object.assign(r,n),r},x6=(t,e)=>t?rS(t,e):rS;function xr(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var I6={value:()=>{}};function u0(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new om(n)}function om(t){this._=t}function C6(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}om.prototype=u0.prototype={constructor:om,on:function(t,e){var n=this._,r=C6(t+"",n),s,o=-1,u=r.length;if(arguments.length<2){for(;++o<u;)if((s=(t=r[o]).type)&&(s=N6(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<u;)if(s=(t=r[o]).type)n[s]=iS(n[s],t.name,e);else if(e==null)for(s in n)n[s]=iS(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new om(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,o;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,s=o.length;r<s;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,o=r.length;s<o;++s)r[s].value.apply(e,n)}};function N6(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function iS(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=I6,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Uy="http://www.w3.org/1999/xhtml";const sS={svg:"http://www.w3.org/2000/svg",xhtml:Uy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function l0(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),sS.hasOwnProperty(e)?{space:sS[e],local:t}:t}function R6(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Uy&&e.documentElement.namespaceURI===Uy?e.createElement(t):e.createElementNS(n,t)}}function D6(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ex(t){var e=l0(t);return(e.local?D6:R6)(e)}function O6(){}function YE(t){return t==null?O6:function(){return this.querySelector(t)}}function k6(t){typeof t!="function"&&(t=YE(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],u=o.length,c=r[s]=new Array(u),f,d,p=0;p<u;++p)(f=o[p])&&(d=t.call(f,f.__data__,p,o))&&("__data__"in f&&(d.__data__=f.__data__),c[p]=d);return new bi(r,this._parents)}function L6(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function M6(){return[]}function tx(t){return t==null?M6:function(){return this.querySelectorAll(t)}}function P6(t){return function(){return L6(t.apply(this,arguments))}}function B6(t){typeof t=="function"?t=P6(t):t=tx(t);for(var e=this._groups,n=e.length,r=[],s=[],o=0;o<n;++o)for(var u=e[o],c=u.length,f,d=0;d<c;++d)(f=u[d])&&(r.push(t.call(f,f.__data__,d,u)),s.push(f));return new bi(r,s)}function nx(t){return function(){return this.matches(t)}}function rx(t){return function(e){return e.matches(t)}}var U6=Array.prototype.find;function V6(t){return function(){return U6.call(this.children,t)}}function H6(){return this.firstElementChild}function F6(t){return this.select(t==null?H6:V6(typeof t=="function"?t:rx(t)))}var z6=Array.prototype.filter;function j6(){return Array.from(this.children)}function q6(t){return function(){return z6.call(this.children,t)}}function Y6(t){return this.selectAll(t==null?j6:q6(typeof t=="function"?t:rx(t)))}function G6(t){typeof t!="function"&&(t=nx(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],u=o.length,c=r[s]=[],f,d=0;d<u;++d)(f=o[d])&&t.call(f,f.__data__,d,o)&&c.push(f);return new bi(r,this._parents)}function ix(t){return new Array(t.length)}function $6(){return new bi(this._enter||this._groups.map(ix),this._parents)}function xm(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}xm.prototype={constructor:xm,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function K6(t){return function(){return t}}function X6(t,e,n,r,s,o){for(var u=0,c,f=e.length,d=o.length;u<d;++u)(c=e[u])?(c.__data__=o[u],r[u]=c):n[u]=new xm(t,o[u]);for(;u<f;++u)(c=e[u])&&(s[u]=c)}function Q6(t,e,n,r,s,o,u){var c,f,d=new Map,p=e.length,y=o.length,T=new Array(p),b;for(c=0;c<p;++c)(f=e[c])&&(T[c]=b=u.call(f,f.__data__,c,e)+"",d.has(b)?s[c]=f:d.set(b,f));for(c=0;c<y;++c)b=u.call(t,o[c],c,o)+"",(f=d.get(b))?(r[c]=f,f.__data__=o[c],d.delete(b)):n[c]=new xm(t,o[c]);for(c=0;c<p;++c)(f=e[c])&&d.get(T[c])===f&&(s[c]=f)}function W6(t){return t.__data__}function Z6(t,e){if(!arguments.length)return Array.from(this,W6);var n=e?Q6:X6,r=this._parents,s=this._groups;typeof t!="function"&&(t=K6(t));for(var o=s.length,u=new Array(o),c=new Array(o),f=new Array(o),d=0;d<o;++d){var p=r[d],y=s[d],T=y.length,b=J6(t.call(p,p&&p.__data__,d,r)),w=b.length,N=c[d]=new Array(w),k=u[d]=new Array(w),D=f[d]=new Array(T);n(p,y,N,k,D,b,e);for(var F=0,q=0,j,ee;F<w;++F)if(j=N[F]){for(F>=q&&(q=F+1);!(ee=k[q])&&++q<w;);j._next=ee||null}}return u=new bi(u,r),u._enter=c,u._exit=f,u}function J6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function eO(){return new bi(this._exit||this._groups.map(ix),this._parents)}function tO(t,e,n){var r=this.enter(),s=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?o.remove():n(o),r&&s?r.merge(s).order():s}function nO(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,o=r.length,u=Math.min(s,o),c=new Array(s),f=0;f<u;++f)for(var d=n[f],p=r[f],y=d.length,T=c[f]=new Array(y),b,w=0;w<y;++w)(b=d[w]||p[w])&&(T[w]=b);for(;f<s;++f)c[f]=n[f];return new bi(c,this._parents)}function rO(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,o=r[s],u;--s>=0;)(u=r[s])&&(o&&u.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(u,o),o=u);return this}function iO(t){t||(t=sO);function e(y,T){return y&&T?t(y.__data__,T.__data__):!y-!T}for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o){for(var u=n[o],c=u.length,f=s[o]=new Array(c),d,p=0;p<c;++p)(d=u[p])&&(f[p]=d);f.sort(e)}return new bi(s,this._parents).order()}function sO(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function aO(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function oO(){return Array.from(this)}function uO(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length;s<o;++s){var u=r[s];if(u)return u}return null}function lO(){let t=0;for(const e of this)++t;return t}function cO(){return!this.node()}function hO(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],o=0,u=s.length,c;o<u;++o)(c=s[o])&&t.call(c,c.__data__,o,s);return this}function fO(t){return function(){this.removeAttribute(t)}}function dO(t){return function(){this.removeAttributeNS(t.space,t.local)}}function mO(t,e){return function(){this.setAttribute(t,e)}}function pO(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function gO(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function yO(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function EO(t,e){var n=l0(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?dO:fO:typeof e=="function"?n.local?yO:gO:n.local?pO:mO)(n,e))}function sx(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _O(t){return function(){this.style.removeProperty(t)}}function TO(t,e,n){return function(){this.style.setProperty(t,e,n)}}function bO(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function vO(t,e,n){return arguments.length>1?this.each((e==null?_O:typeof e=="function"?bO:TO)(t,e,n??"")):Il(this.node(),t)}function Il(t,e){return t.style.getPropertyValue(e)||sx(t).getComputedStyle(t,null).getPropertyValue(e)}function SO(t){return function(){delete this[t]}}function AO(t,e){return function(){this[t]=e}}function wO(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function xO(t,e){return arguments.length>1?this.each((e==null?SO:typeof e=="function"?wO:AO)(t,e)):this.node()[t]}function ax(t){return t.trim().split(/^|\s+/)}function GE(t){return t.classList||new ox(t)}function ox(t){this._node=t,this._names=ax(t.getAttribute("class")||"")}ox.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ux(t,e){for(var n=GE(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function lx(t,e){for(var n=GE(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function IO(t){return function(){ux(this,t)}}function CO(t){return function(){lx(this,t)}}function NO(t,e){return function(){(e.apply(this,arguments)?ux:lx)(this,t)}}function RO(t,e){var n=ax(t+"");if(arguments.length<2){for(var r=GE(this.node()),s=-1,o=n.length;++s<o;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?NO:e?IO:CO)(n,e))}function DO(){this.textContent=""}function OO(t){return function(){this.textContent=t}}function kO(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function LO(t){return arguments.length?this.each(t==null?DO:(typeof t=="function"?kO:OO)(t)):this.node().textContent}function MO(){this.innerHTML=""}function PO(t){return function(){this.innerHTML=t}}function BO(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function UO(t){return arguments.length?this.each(t==null?MO:(typeof t=="function"?BO:PO)(t)):this.node().innerHTML}function VO(){this.nextSibling&&this.parentNode.appendChild(this)}function HO(){return this.each(VO)}function FO(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zO(){return this.each(FO)}function jO(t){var e=typeof t=="function"?t:ex(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function qO(){return null}function YO(t,e){var n=typeof t=="function"?t:ex(t),r=e==null?qO:typeof e=="function"?e:YE(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function GO(){var t=this.parentNode;t&&t.removeChild(this)}function $O(){return this.each(GO)}function KO(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function XO(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function QO(t){return this.select(t?XO:KO)}function WO(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ZO(t){return function(e){t.call(this,e,this.__data__)}}function JO(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function e4(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,o;n<s;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function t4(t,e,n){return function(){var r=this.__on,s,o=ZO(e);if(r){for(var u=0,c=r.length;u<c;++u)if((s=r[u]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=n),s.value=e;return}}this.addEventListener(t.type,o,n),s={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(s):this.__on=[s]}}function n4(t,e,n){var r=JO(t+""),s,o=r.length,u;if(arguments.length<2){var c=this.node().__on;if(c){for(var f=0,d=c.length,p;f<d;++f)for(s=0,p=c[f];s<o;++s)if((u=r[s]).type===p.type&&u.name===p.name)return p.value}return}for(c=e?t4:e4,s=0;s<o;++s)this.each(c(r[s],e,n));return this}function cx(t,e,n){var r=sx(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function r4(t,e){return function(){return cx(this,t,e)}}function i4(t,e){return function(){return cx(this,t,e.apply(this,arguments))}}function s4(t,e){return this.each((typeof e=="function"?i4:r4)(t,e))}function*a4(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length,u;s<o;++s)(u=r[s])&&(yield u)}var hx=[null];function bi(t,e){this._groups=t,this._parents=e}function nf(){return new bi([[document.documentElement]],hx)}function o4(){return this}bi.prototype=nf.prototype={constructor:bi,select:k6,selectAll:B6,selectChild:F6,selectChildren:Y6,filter:G6,data:Z6,enter:$6,exit:eO,join:tO,merge:nO,selection:o4,order:rO,sort:iO,call:aO,nodes:oO,node:uO,size:lO,empty:cO,each:hO,attr:EO,style:vO,property:xO,classed:RO,text:LO,html:UO,raise:HO,lower:zO,append:jO,insert:YO,remove:$O,clone:QO,datum:WO,on:n4,dispatch:s4,[Symbol.iterator]:a4};function Ji(t){return typeof t=="string"?new bi([[document.querySelector(t)]],[document.documentElement]):new bi([[t]],hx)}function u4(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ss(t,e){if(t=u4(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const l4={passive:!1},Lh={capture:!0,passive:!1};function Kg(t){t.stopImmediatePropagation()}function pl(t){t.preventDefault(),t.stopImmediatePropagation()}function fx(t){var e=t.document.documentElement,n=Ji(t).on("dragstart.drag",pl,Lh);"onselectstart"in e?n.on("selectstart.drag",pl,Lh):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function dx(t,e){var n=t.document.documentElement,r=Ji(t).on("dragstart.drag",null);e&&(r.on("click.drag",pl,Lh),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Vd=t=>()=>t;function Vy(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:o,x:u,y:c,dx:f,dy:d,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:p}})}Vy.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function c4(t){return!t.ctrlKey&&!t.button}function h4(){return this.parentNode}function f4(t,e){return e??{x:t.x,y:t.y}}function d4(){return navigator.maxTouchPoints||"ontouchstart"in this}function m4(){var t=c4,e=h4,n=f4,r=d4,s={},o=u0("start","drag","end"),u=0,c,f,d,p,y=0;function T(j){j.on("mousedown.drag",b).filter(r).on("touchstart.drag",k).on("touchmove.drag",D,l4).on("touchend.drag touchcancel.drag",F).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(j,ee){if(!(p||!t.call(this,j,ee))){var $=q(this,e.call(this,j,ee),j,ee,"mouse");$&&(Ji(j.view).on("mousemove.drag",w,Lh).on("mouseup.drag",N,Lh),fx(j.view),Kg(j),d=!1,c=j.clientX,f=j.clientY,$("start",j))}}function w(j){if(pl(j),!d){var ee=j.clientX-c,$=j.clientY-f;d=ee*ee+$*$>y}s.mouse("drag",j)}function N(j){Ji(j.view).on("mousemove.drag mouseup.drag",null),dx(j.view,d),pl(j),s.mouse("end",j)}function k(j,ee){if(t.call(this,j,ee)){var $=j.changedTouches,R=e.call(this,j,ee),C=$.length,O,M;for(O=0;O<C;++O)(M=q(this,R,j,ee,$[O].identifier,$[O]))&&(Kg(j),M("start",j,$[O]))}}function D(j){var ee=j.changedTouches,$=ee.length,R,C;for(R=0;R<$;++R)(C=s[ee[R].identifier])&&(pl(j),C("drag",j,ee[R]))}function F(j){var ee=j.changedTouches,$=ee.length,R,C;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),R=0;R<$;++R)(C=s[ee[R].identifier])&&(Kg(j),C("end",j,ee[R]))}function q(j,ee,$,R,C,O){var M=o.copy(),B=Ss(O||$,ee),U,I,L;if((L=n.call(j,new Vy("beforestart",{sourceEvent:$,target:T,identifier:C,active:u,x:B[0],y:B[1],dx:0,dy:0,dispatch:M}),R))!=null)return U=L.x-B[0]||0,I=L.y-B[1]||0,function K(H,Q,se){var te=B,S;switch(H){case"start":s[C]=K,S=u++;break;case"end":delete s[C],--u;case"drag":B=Ss(se||Q,ee),S=u;break}M.call(H,j,new Vy(H,{sourceEvent:Q,subject:L,target:T,identifier:C,active:S,x:B[0]+U,y:B[1]+I,dx:B[0]-te[0],dy:B[1]-te[1],dispatch:M}),R)}}return T.filter=function(j){return arguments.length?(t=typeof j=="function"?j:Vd(!!j),T):t},T.container=function(j){return arguments.length?(e=typeof j=="function"?j:Vd(j),T):e},T.subject=function(j){return arguments.length?(n=typeof j=="function"?j:Vd(j),T):n},T.touchable=function(j){return arguments.length?(r=typeof j=="function"?j:Vd(!!j),T):r},T.on=function(){var j=o.on.apply(o,arguments);return j===o?T:j},T.clickDistance=function(j){return arguments.length?(y=(j=+j)*j,T):Math.sqrt(y)},T}function $E(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function mx(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function rf(){}var Mh=.7,Im=1/Mh,gl="\\s*([+-]?\\d+)\\s*",Ph="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Is="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",p4=/^#([0-9a-f]{3,8})$/,g4=new RegExp(`^rgb\\(${gl},${gl},${gl}\\)$`),y4=new RegExp(`^rgb\\(${Is},${Is},${Is}\\)$`),E4=new RegExp(`^rgba\\(${gl},${gl},${gl},${Ph}\\)$`),_4=new RegExp(`^rgba\\(${Is},${Is},${Is},${Ph}\\)$`),T4=new RegExp(`^hsl\\(${Ph},${Is},${Is}\\)$`),b4=new RegExp(`^hsla\\(${Ph},${Is},${Is},${Ph}\\)$`),aS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$E(rf,Bh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:oS,formatHex:oS,formatHex8:v4,formatHsl:S4,formatRgb:uS,toString:uS});function oS(){return this.rgb().formatHex()}function v4(){return this.rgb().formatHex8()}function S4(){return px(this).formatHsl()}function uS(){return this.rgb().formatRgb()}function Bh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=p4.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?lS(e):n===3?new Jr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Hd(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Hd(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=g4.exec(t))?new Jr(e[1],e[2],e[3],1):(e=y4.exec(t))?new Jr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=E4.exec(t))?Hd(e[1],e[2],e[3],e[4]):(e=_4.exec(t))?Hd(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=T4.exec(t))?fS(e[1],e[2]/100,e[3]/100,1):(e=b4.exec(t))?fS(e[1],e[2]/100,e[3]/100,e[4]):aS.hasOwnProperty(t)?lS(aS[t]):t==="transparent"?new Jr(NaN,NaN,NaN,0):null}function lS(t){return new Jr(t>>16&255,t>>8&255,t&255,1)}function Hd(t,e,n,r){return r<=0&&(t=e=n=NaN),new Jr(t,e,n,r)}function A4(t){return t instanceof rf||(t=Bh(t)),t?(t=t.rgb(),new Jr(t.r,t.g,t.b,t.opacity)):new Jr}function Hy(t,e,n,r){return arguments.length===1?A4(t):new Jr(t,e,n,r??1)}function Jr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}$E(Jr,Hy,mx(rf,{brighter(t){return t=t==null?Im:Math.pow(Im,t),new Jr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Mh:Math.pow(Mh,t),new Jr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Jr(eu(this.r),eu(this.g),eu(this.b),Cm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cS,formatHex:cS,formatHex8:w4,formatRgb:hS,toString:hS}));function cS(){return`#${Qo(this.r)}${Qo(this.g)}${Qo(this.b)}`}function w4(){return`#${Qo(this.r)}${Qo(this.g)}${Qo(this.b)}${Qo((isNaN(this.opacity)?1:this.opacity)*255)}`}function hS(){const t=Cm(this.opacity);return`${t===1?"rgb(":"rgba("}${eu(this.r)}, ${eu(this.g)}, ${eu(this.b)}${t===1?")":`, ${t})`}`}function Cm(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function eu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Qo(t){return t=eu(t),(t<16?"0":"")+t.toString(16)}function fS(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new es(t,e,n,r)}function px(t){if(t instanceof es)return new es(t.h,t.s,t.l,t.opacity);if(t instanceof rf||(t=Bh(t)),!t)return new es;if(t instanceof es)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),o=Math.max(e,n,r),u=NaN,c=o-s,f=(o+s)/2;return c?(e===o?u=(n-r)/c+(n<r)*6:n===o?u=(r-e)/c+2:u=(e-n)/c+4,c/=f<.5?o+s:2-o-s,u*=60):c=f>0&&f<1?0:u,new es(u,c,f,t.opacity)}function x4(t,e,n,r){return arguments.length===1?px(t):new es(t,e,n,r??1)}function es(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}$E(es,x4,mx(rf,{brighter(t){return t=t==null?Im:Math.pow(Im,t),new es(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Mh:Math.pow(Mh,t),new es(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Jr(Xg(t>=240?t-240:t+120,s,r),Xg(t,s,r),Xg(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new es(dS(this.h),Fd(this.s),Fd(this.l),Cm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Cm(this.opacity);return`${t===1?"hsl(":"hsla("}${dS(this.h)}, ${Fd(this.s)*100}%, ${Fd(this.l)*100}%${t===1?")":`, ${t})`}`}}));function dS(t){return t=(t||0)%360,t<0?t+360:t}function Fd(t){return Math.max(0,Math.min(1,t||0))}function Xg(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const gx=t=>()=>t;function I4(t,e){return function(n){return t+n*e}}function C4(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function N4(t){return(t=+t)==1?yx:function(e,n){return n-e?C4(e,n,t):gx(isNaN(e)?n:e)}}function yx(t,e){var n=e-t;return n?I4(t,n):gx(isNaN(t)?e:t)}const mS=function t(e){var n=N4(e);function r(s,o){var u=n((s=Hy(s)).r,(o=Hy(o)).r),c=n(s.g,o.g),f=n(s.b,o.b),d=yx(s.opacity,o.opacity);return function(p){return s.r=u(p),s.g=c(p),s.b=f(p),s.opacity=d(p),s+""}}return r.gamma=t,r}(1);function Ga(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Fy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qg=new RegExp(Fy.source,"g");function R4(t){return function(){return t}}function D4(t){return function(e){return t(e)+""}}function O4(t,e){var n=Fy.lastIndex=Qg.lastIndex=0,r,s,o,u=-1,c=[],f=[];for(t=t+"",e=e+"";(r=Fy.exec(t))&&(s=Qg.exec(e));)(o=s.index)>n&&(o=e.slice(n,o),c[u]?c[u]+=o:c[++u]=o),(r=r[0])===(s=s[0])?c[u]?c[u]+=s:c[++u]=s:(c[++u]=null,f.push({i:u,x:Ga(r,s)})),n=Qg.lastIndex;return n<e.length&&(o=e.slice(n),c[u]?c[u]+=o:c[++u]=o),c.length<2?f[0]?D4(f[0].x):R4(e):(e=f.length,function(d){for(var p=0,y;p<e;++p)c[(y=f[p]).i]=y.x(d);return c.join("")})}var pS=180/Math.PI,zy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ex(t,e,n,r,s,o){var u,c,f;return(u=Math.sqrt(t*t+e*e))&&(t/=u,e/=u),(f=t*n+e*r)&&(n-=t*f,r-=e*f),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,f/=c),t*r<e*n&&(t=-t,e=-e,f=-f,u=-u),{translateX:s,translateY:o,rotate:Math.atan2(e,t)*pS,skewX:Math.atan(f)*pS,scaleX:u,scaleY:c}}var zd;function k4(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?zy:Ex(e.a,e.b,e.c,e.d,e.e,e.f)}function L4(t){return t==null||(zd||(zd=document.createElementNS("http://www.w3.org/2000/svg","g")),zd.setAttribute("transform",t),!(t=zd.transform.baseVal.consolidate()))?zy:(t=t.matrix,Ex(t.a,t.b,t.c,t.d,t.e,t.f))}function _x(t,e,n,r){function s(d){return d.length?d.pop()+" ":""}function o(d,p,y,T,b,w){if(d!==y||p!==T){var N=b.push("translate(",null,e,null,n);w.push({i:N-4,x:Ga(d,y)},{i:N-2,x:Ga(p,T)})}else(y||T)&&b.push("translate("+y+e+T+n)}function u(d,p,y,T){d!==p?(d-p>180?p+=360:p-d>180&&(d+=360),T.push({i:y.push(s(y)+"rotate(",null,r)-2,x:Ga(d,p)})):p&&y.push(s(y)+"rotate("+p+r)}function c(d,p,y,T){d!==p?T.push({i:y.push(s(y)+"skewX(",null,r)-2,x:Ga(d,p)}):p&&y.push(s(y)+"skewX("+p+r)}function f(d,p,y,T,b,w){if(d!==y||p!==T){var N=b.push(s(b)+"scale(",null,",",null,")");w.push({i:N-4,x:Ga(d,y)},{i:N-2,x:Ga(p,T)})}else(y!==1||T!==1)&&b.push(s(b)+"scale("+y+","+T+")")}return function(d,p){var y=[],T=[];return d=t(d),p=t(p),o(d.translateX,d.translateY,p.translateX,p.translateY,y,T),u(d.rotate,p.rotate,y,T),c(d.skewX,p.skewX,y,T),f(d.scaleX,d.scaleY,p.scaleX,p.scaleY,y,T),d=p=null,function(b){for(var w=-1,N=T.length,k;++w<N;)y[(k=T[w]).i]=k.x(b);return y.join("")}}}var M4=_x(k4,"px, ","px)","deg)"),P4=_x(L4,", ",")",")"),B4=1e-12;function gS(t){return((t=Math.exp(t))+1/t)/2}function U4(t){return((t=Math.exp(t))-1/t)/2}function V4(t){return((t=Math.exp(2*t))-1)/(t+1)}const H4=function t(e,n,r){function s(o,u){var c=o[0],f=o[1],d=o[2],p=u[0],y=u[1],T=u[2],b=p-c,w=y-f,N=b*b+w*w,k,D;if(N<B4)D=Math.log(T/d)/e,k=function(R){return[c+R*b,f+R*w,d*Math.exp(e*R*D)]};else{var F=Math.sqrt(N),q=(T*T-d*d+r*N)/(2*d*n*F),j=(T*T-d*d-r*N)/(2*T*n*F),ee=Math.log(Math.sqrt(q*q+1)-q),$=Math.log(Math.sqrt(j*j+1)-j);D=($-ee)/e,k=function(R){var C=R*D,O=gS(ee),M=d/(n*F)*(O*V4(e*C+ee)-U4(ee));return[c+M*b,f+M*w,d*O/gS(e*C+ee)]}}return k.duration=D*1e3*e/Math.SQRT2,k}return s.rho=function(o){var u=Math.max(.001,+o),c=u*u,f=c*c;return t(u,c,f)},s}(Math.SQRT2,2,4);var Cl=0,lh=0,Wc=0,Tx=1e3,Nm,ch,Rm=0,nu=0,c0=0,Uh=typeof performance=="object"&&performance.now?performance:Date,bx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function KE(){return nu||(bx(F4),nu=Uh.now()+c0)}function F4(){nu=0}function Dm(){this._call=this._time=this._next=null}Dm.prototype=vx.prototype={constructor:Dm,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?KE():+n)+(e==null?0:+e),!this._next&&ch!==this&&(ch?ch._next=this:Nm=this,ch=this),this._call=t,this._time=n,jy()},stop:function(){this._call&&(this._call=null,this._time=1/0,jy())}};function vx(t,e,n){var r=new Dm;return r.restart(t,e,n),r}function z4(){KE(),++Cl;for(var t=Nm,e;t;)(e=nu-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Cl}function yS(){nu=(Rm=Uh.now())+c0,Cl=lh=0;try{z4()}finally{Cl=0,q4(),nu=0}}function j4(){var t=Uh.now(),e=t-Rm;e>Tx&&(c0-=e,Rm=t)}function q4(){for(var t,e=Nm,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Nm=n);ch=t,jy(r)}function jy(t){if(!Cl){lh&&(lh=clearTimeout(lh));var e=t-nu;e>24?(t<1/0&&(lh=setTimeout(yS,t-Uh.now()-c0)),Wc&&(Wc=clearInterval(Wc))):(Wc||(Rm=Uh.now(),Wc=setInterval(j4,Tx)),Cl=1,bx(yS))}}function ES(t,e,n){var r=new Dm;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var Y4=u0("start","end","cancel","interrupt"),G4=[],Sx=0,_S=1,qy=2,um=3,TS=4,Yy=5,lm=6;function h0(t,e,n,r,s,o){var u=t.__transition;if(!u)t.__transition={};else if(n in u)return;$4(t,n,{name:e,index:r,group:s,on:Y4,tween:G4,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Sx})}function XE(t,e){var n=ss(t,e);if(n.state>Sx)throw new Error("too late; already scheduled");return n}function Ms(t,e){var n=ss(t,e);if(n.state>um)throw new Error("too late; already running");return n}function ss(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function $4(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=vx(o,0,n.time);function o(d){n.state=_S,n.timer.restart(u,n.delay,n.time),n.delay<=d&&u(d-n.delay)}function u(d){var p,y,T,b;if(n.state!==_S)return f();for(p in r)if(b=r[p],b.name===n.name){if(b.state===um)return ES(u);b.state===TS?(b.state=lm,b.timer.stop(),b.on.call("interrupt",t,t.__data__,b.index,b.group),delete r[p]):+p<e&&(b.state=lm,b.timer.stop(),b.on.call("cancel",t,t.__data__,b.index,b.group),delete r[p])}if(ES(function(){n.state===um&&(n.state=TS,n.timer.restart(c,n.delay,n.time),c(d))}),n.state=qy,n.on.call("start",t,t.__data__,n.index,n.group),n.state===qy){for(n.state=um,s=new Array(T=n.tween.length),p=0,y=-1;p<T;++p)(b=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(s[++y]=b);s.length=y+1}}function c(d){for(var p=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(f),n.state=Yy,1),y=-1,T=s.length;++y<T;)s[y].call(t,p);n.state===Yy&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=lm,n.timer.stop(),delete r[e];for(var d in r)return;delete t.__transition}}function cm(t,e){var n=t.__transition,r,s,o=!0,u;if(n){e=e==null?null:e+"";for(u in n){if((r=n[u]).name!==e){o=!1;continue}s=r.state>qy&&r.state<Yy,r.state=lm,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[u]}o&&delete t.__transition}}function K4(t){return this.each(function(){cm(this,t)})}function X4(t,e){var n,r;return function(){var s=Ms(this,t),o=s.tween;if(o!==n){r=n=o;for(var u=0,c=r.length;u<c;++u)if(r[u].name===e){r=r.slice(),r.splice(u,1);break}}s.tween=r}}function Q4(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var o=Ms(this,t),u=o.tween;if(u!==r){s=(r=u).slice();for(var c={name:e,value:n},f=0,d=s.length;f<d;++f)if(s[f].name===e){s[f]=c;break}f===d&&s.push(c)}o.tween=s}}function W4(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=ss(this.node(),n).tween,s=0,o=r.length,u;s<o;++s)if((u=r[s]).name===t)return u.value;return null}return this.each((e==null?X4:Q4)(n,t,e))}function QE(t,e,n){var r=t._id;return t.each(function(){var s=Ms(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return ss(s,r).value[e]}}function Ax(t,e){var n;return(typeof e=="number"?Ga:e instanceof Bh?mS:(n=Bh(e))?(e=n,mS):O4)(t,e)}function Z4(t){return function(){this.removeAttribute(t)}}function J4(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ek(t,e,n){var r,s=n+"",o;return function(){var u=this.getAttribute(t);return u===s?null:u===r?o:o=e(r=u,n)}}function tk(t,e,n){var r,s=n+"",o;return function(){var u=this.getAttributeNS(t.space,t.local);return u===s?null:u===r?o:o=e(r=u,n)}}function nk(t,e,n){var r,s,o;return function(){var u,c=n(this),f;return c==null?void this.removeAttribute(t):(u=this.getAttribute(t),f=c+"",u===f?null:u===r&&f===s?o:(s=f,o=e(r=u,c)))}}function rk(t,e,n){var r,s,o;return function(){var u,c=n(this),f;return c==null?void this.removeAttributeNS(t.space,t.local):(u=this.getAttributeNS(t.space,t.local),f=c+"",u===f?null:u===r&&f===s?o:(s=f,o=e(r=u,c)))}}function ik(t,e){var n=l0(t),r=n==="transform"?P4:Ax;return this.attrTween(t,typeof e=="function"?(n.local?rk:nk)(n,r,QE(this,"attr."+t,e)):e==null?(n.local?J4:Z4)(n):(n.local?tk:ek)(n,r,e))}function sk(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ak(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ok(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&ak(t,o)),n}return s._value=e,s}function uk(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&sk(t,o)),n}return s._value=e,s}function lk(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=l0(t);return this.tween(n,(r.local?ok:uk)(r,e))}function ck(t,e){return function(){XE(this,t).delay=+e.apply(this,arguments)}}function hk(t,e){return e=+e,function(){XE(this,t).delay=e}}function fk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ck:hk)(e,t)):ss(this.node(),e).delay}function dk(t,e){return function(){Ms(this,t).duration=+e.apply(this,arguments)}}function mk(t,e){return e=+e,function(){Ms(this,t).duration=e}}function pk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?dk:mk)(e,t)):ss(this.node(),e).duration}function gk(t,e){if(typeof e!="function")throw new Error;return function(){Ms(this,t).ease=e}}function yk(t){var e=this._id;return arguments.length?this.each(gk(e,t)):ss(this.node(),e).ease}function Ek(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ms(this,t).ease=n}}function _k(t){if(typeof t!="function")throw new Error;return this.each(Ek(this._id,t))}function Tk(t){typeof t!="function"&&(t=nx(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],u=o.length,c=r[s]=[],f,d=0;d<u;++d)(f=o[d])&&t.call(f,f.__data__,d,o)&&c.push(f);return new ha(r,this._parents,this._name,this._id)}function bk(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,o=Math.min(r,s),u=new Array(r),c=0;c<o;++c)for(var f=e[c],d=n[c],p=f.length,y=u[c]=new Array(p),T,b=0;b<p;++b)(T=f[b]||d[b])&&(y[b]=T);for(;c<r;++c)u[c]=e[c];return new ha(u,this._parents,this._name,this._id)}function vk(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Sk(t,e,n){var r,s,o=vk(e)?XE:Ms;return function(){var u=o(this,t),c=u.on;c!==r&&(s=(r=c).copy()).on(e,n),u.on=s}}function Ak(t,e){var n=this._id;return arguments.length<2?ss(this.node(),n).on.on(t):this.each(Sk(n,t,e))}function wk(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function xk(){return this.on("end.remove",wk(this._id))}function Ik(t){var e=this._name,n=this._id;typeof t!="function"&&(t=YE(t));for(var r=this._groups,s=r.length,o=new Array(s),u=0;u<s;++u)for(var c=r[u],f=c.length,d=o[u]=new Array(f),p,y,T=0;T<f;++T)(p=c[T])&&(y=t.call(p,p.__data__,T,c))&&("__data__"in p&&(y.__data__=p.__data__),d[T]=y,h0(d[T],e,n,T,d,ss(p,n)));return new ha(o,this._parents,e,n)}function Ck(t){var e=this._name,n=this._id;typeof t!="function"&&(t=tx(t));for(var r=this._groups,s=r.length,o=[],u=[],c=0;c<s;++c)for(var f=r[c],d=f.length,p,y=0;y<d;++y)if(p=f[y]){for(var T=t.call(p,p.__data__,y,f),b,w=ss(p,n),N=0,k=T.length;N<k;++N)(b=T[N])&&h0(b,e,n,N,T,w);o.push(T),u.push(p)}return new ha(o,u,e,n)}var Nk=nf.prototype.constructor;function Rk(){return new Nk(this._groups,this._parents)}function Dk(t,e){var n,r,s;return function(){var o=Il(this,t),u=(this.style.removeProperty(t),Il(this,t));return o===u?null:o===n&&u===r?s:s=e(n=o,r=u)}}function wx(t){return function(){this.style.removeProperty(t)}}function Ok(t,e,n){var r,s=n+"",o;return function(){var u=Il(this,t);return u===s?null:u===r?o:o=e(r=u,n)}}function kk(t,e,n){var r,s,o;return function(){var u=Il(this,t),c=n(this),f=c+"";return c==null&&(f=c=(this.style.removeProperty(t),Il(this,t))),u===f?null:u===r&&f===s?o:(s=f,o=e(r=u,c))}}function Lk(t,e){var n,r,s,o="style."+e,u="end."+o,c;return function(){var f=Ms(this,t),d=f.on,p=f.value[o]==null?c||(c=wx(e)):void 0;(d!==n||s!==p)&&(r=(n=d).copy()).on(u,s=p),f.on=r}}function Mk(t,e,n){var r=(t+="")=="transform"?M4:Ax;return e==null?this.styleTween(t,Dk(t,r)).on("end.style."+t,wx(t)):typeof e=="function"?this.styleTween(t,kk(t,r,QE(this,"style."+t,e))).each(Lk(this._id,t)):this.styleTween(t,Ok(t,r,e),n).on("end.style."+t,null)}function Pk(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Bk(t,e,n){var r,s;function o(){var u=e.apply(this,arguments);return u!==s&&(r=(s=u)&&Pk(t,u,n)),r}return o._value=e,o}function Uk(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Bk(t,e,n??""))}function Vk(t){return function(){this.textContent=t}}function Hk(t){return function(){var e=t(this);this.textContent=e??""}}function Fk(t){return this.tween("text",typeof t=="function"?Hk(QE(this,"text",t)):Vk(t==null?"":t+""))}function zk(t){return function(e){this.textContent=t.call(this,e)}}function jk(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&zk(s)),e}return r._value=t,r}function qk(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,jk(t))}function Yk(){for(var t=this._name,e=this._id,n=xx(),r=this._groups,s=r.length,o=0;o<s;++o)for(var u=r[o],c=u.length,f,d=0;d<c;++d)if(f=u[d]){var p=ss(f,e);h0(f,t,n,d,u,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new ha(r,this._parents,t,n)}function Gk(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(o,u){var c={value:u},f={value:function(){--s===0&&o()}};n.each(function(){var d=Ms(this,r),p=d.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(f)),d.on=e}),s===0&&o()})}var $k=0;function ha(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function xx(){return++$k}var sa=nf.prototype;ha.prototype={constructor:ha,select:Ik,selectAll:Ck,selectChild:sa.selectChild,selectChildren:sa.selectChildren,filter:Tk,merge:bk,selection:Rk,transition:Yk,call:sa.call,nodes:sa.nodes,node:sa.node,size:sa.size,empty:sa.empty,each:sa.each,on:Ak,attr:ik,attrTween:lk,style:Mk,styleTween:Uk,text:Fk,textTween:qk,remove:xk,tween:W4,delay:fk,duration:pk,ease:yk,easeVarying:_k,end:Gk,[Symbol.iterator]:sa[Symbol.iterator]};function Kk(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Xk={time:null,delay:0,duration:250,ease:Kk};function Qk(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Wk(t){var e,n;t instanceof ha?(e=t._id,t=t._name):(e=xx(),(n=Xk).time=KE(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,o=0;o<s;++o)for(var u=r[o],c=u.length,f,d=0;d<c;++d)(f=u[d])&&h0(f,t,e,d,u,n||Qk(f,e));return new ha(r,this._parents,t,e)}nf.prototype.interrupt=K4;nf.prototype.transition=Wk;const jd=t=>()=>t;function Zk(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function oa(t,e,n){this.k=t,this.x=e,this.y=n}oa.prototype={constructor:oa,scale:function(t){return t===1?this:new oa(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new oa(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var no=new oa(1,0,0);oa.prototype;function Wg(t){t.stopImmediatePropagation()}function Zc(t){t.preventDefault(),t.stopImmediatePropagation()}function Jk(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function eL(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function bS(){return this.__zoom||no}function tL(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function nL(){return navigator.maxTouchPoints||"ontouchstart"in this}function rL(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],u=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),u>o?(o+u)/2:Math.min(0,o)||Math.max(0,u))}function iL(){var t=Jk,e=eL,n=rL,r=tL,s=nL,o=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,f=H4,d=u0("start","zoom","end"),p,y,T,b=500,w=150,N=0,k=10;function D(L){L.property("__zoom",bS).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",M).filter(s).on("touchstart.zoom",B).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}D.transform=function(L,K,H,Q){var se=L.selection?L.selection():L;se.property("__zoom",bS),L!==se?ee(L,K,H,Q):se.interrupt().each(function(){$(this,arguments).event(Q).start().zoom(null,typeof K=="function"?K.apply(this,arguments):K).end()})},D.scaleBy=function(L,K,H,Q){D.scaleTo(L,function(){var se=this.__zoom.k,te=typeof K=="function"?K.apply(this,arguments):K;return se*te},H,Q)},D.scaleTo=function(L,K,H,Q){D.transform(L,function(){var se=e.apply(this,arguments),te=this.__zoom,S=H==null?j(se):typeof H=="function"?H.apply(this,arguments):H,J=te.invert(S),ae=typeof K=="function"?K.apply(this,arguments):K;return n(q(F(te,ae),S,J),se,u)},H,Q)},D.translateBy=function(L,K,H,Q){D.transform(L,function(){return n(this.__zoom.translate(typeof K=="function"?K.apply(this,arguments):K,typeof H=="function"?H.apply(this,arguments):H),e.apply(this,arguments),u)},null,Q)},D.translateTo=function(L,K,H,Q,se){D.transform(L,function(){var te=e.apply(this,arguments),S=this.__zoom,J=Q==null?j(te):typeof Q=="function"?Q.apply(this,arguments):Q;return n(no.translate(J[0],J[1]).scale(S.k).translate(typeof K=="function"?-K.apply(this,arguments):-K,typeof H=="function"?-H.apply(this,arguments):-H),te,u)},Q,se)};function F(L,K){return K=Math.max(o[0],Math.min(o[1],K)),K===L.k?L:new oa(K,L.x,L.y)}function q(L,K,H){var Q=K[0]-H[0]*L.k,se=K[1]-H[1]*L.k;return Q===L.x&&se===L.y?L:new oa(L.k,Q,se)}function j(L){return[(+L[0][0]+ +L[1][0])/2,(+L[0][1]+ +L[1][1])/2]}function ee(L,K,H,Q){L.on("start.zoom",function(){$(this,arguments).event(Q).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(Q).end()}).tween("zoom",function(){var se=this,te=arguments,S=$(se,te).event(Q),J=e.apply(se,te),ae=H==null?j(J):typeof H=="function"?H.apply(se,te):H,P=Math.max(J[1][0]-J[0][0],J[1][1]-J[0][1]),ge=se.__zoom,Ne=typeof K=="function"?K.apply(se,te):K,Ie=f(ge.invert(ae).concat(P/ge.k),Ne.invert(ae).concat(P/Ne.k));return function(je){if(je===1)je=Ne;else{var xe=Ie(je),Me=P/xe[2];je=new oa(Me,ae[0]-xe[0]*Me,ae[1]-xe[1]*Me)}S.zoom(null,je)}})}function $(L,K,H){return!H&&L.__zooming||new R(L,K)}function R(L,K){this.that=L,this.args=K,this.active=0,this.sourceEvent=null,this.extent=e.apply(L,K),this.taps=0}R.prototype={event:function(L){return L&&(this.sourceEvent=L),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(L,K){return this.mouse&&L!=="mouse"&&(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&&L!=="touch"&&(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&&L!=="touch"&&(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(L){var K=Ji(this.that).datum();d.call(L,this.that,new Zk(L,{sourceEvent:this.sourceEvent,target:D,transform:this.that.__zoom,dispatch:d}),K)}};function C(L,...K){if(!t.apply(this,arguments))return;var H=$(this,K).event(L),Q=this.__zoom,se=Math.max(o[0],Math.min(o[1],Q.k*Math.pow(2,r.apply(this,arguments)))),te=Ss(L);if(H.wheel)(H.mouse[0][0]!==te[0]||H.mouse[0][1]!==te[1])&&(H.mouse[1]=Q.invert(H.mouse[0]=te)),clearTimeout(H.wheel);else{if(Q.k===se)return;H.mouse=[te,Q.invert(te)],cm(this),H.start()}Zc(L),H.wheel=setTimeout(S,w),H.zoom("mouse",n(q(F(Q,se),H.mouse[0],H.mouse[1]),H.extent,u));function S(){H.wheel=null,H.end()}}function O(L,...K){if(T||!t.apply(this,arguments))return;var H=L.currentTarget,Q=$(this,K,!0).event(L),se=Ji(L.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",P,!0),te=Ss(L,H),S=L.clientX,J=L.clientY;fx(L.view),Wg(L),Q.mouse=[te,this.__zoom.invert(te)],cm(this),Q.start();function ae(ge){if(Zc(ge),!Q.moved){var Ne=ge.clientX-S,Ie=ge.clientY-J;Q.moved=Ne*Ne+Ie*Ie>N}Q.event(ge).zoom("mouse",n(q(Q.that.__zoom,Q.mouse[0]=Ss(ge,H),Q.mouse[1]),Q.extent,u))}function P(ge){se.on("mousemove.zoom mouseup.zoom",null),dx(ge.view,Q.moved),Zc(ge),Q.event(ge).end()}}function M(L,...K){if(t.apply(this,arguments)){var H=this.__zoom,Q=Ss(L.changedTouches?L.changedTouches[0]:L,this),se=H.invert(Q),te=H.k*(L.shiftKey?.5:2),S=n(q(F(H,te),Q,se),e.apply(this,K),u);Zc(L),c>0?Ji(this).transition().duration(c).call(ee,S,Q,L):Ji(this).call(D.transform,S,Q,L)}}function B(L,...K){if(t.apply(this,arguments)){var H=L.touches,Q=H.length,se=$(this,K,L.changedTouches.length===Q).event(L),te,S,J,ae;for(Wg(L),S=0;S<Q;++S)J=H[S],ae=Ss(J,this),ae=[ae,this.__zoom.invert(ae),J.identifier],se.touch0?!se.touch1&&se.touch0[2]!==ae[2]&&(se.touch1=ae,se.taps=0):(se.touch0=ae,te=!0,se.taps=1+!!p);p&&(p=clearTimeout(p)),te&&(se.taps<2&&(y=ae[0],p=setTimeout(function(){p=null},b)),cm(this),se.start())}}function U(L,...K){if(this.__zooming){var H=$(this,K).event(L),Q=L.changedTouches,se=Q.length,te,S,J,ae;for(Zc(L),te=0;te<se;++te)S=Q[te],J=Ss(S,this),H.touch0&&H.touch0[2]===S.identifier?H.touch0[0]=J:H.touch1&&H.touch1[2]===S.identifier&&(H.touch1[0]=J);if(S=H.that.__zoom,H.touch1){var P=H.touch0[0],ge=H.touch0[1],Ne=H.touch1[0],Ie=H.touch1[1],je=(je=Ne[0]-P[0])*je+(je=Ne[1]-P[1])*je,xe=(xe=Ie[0]-ge[0])*xe+(xe=Ie[1]-ge[1])*xe;S=F(S,Math.sqrt(je/xe)),J=[(P[0]+Ne[0])/2,(P[1]+Ne[1])/2],ae=[(ge[0]+Ie[0])/2,(ge[1]+Ie[1])/2]}else if(H.touch0)J=H.touch0[0],ae=H.touch0[1];else return;H.zoom("touch",n(q(S,J,ae),H.extent,u))}}function I(L,...K){if(this.__zooming){var H=$(this,K).event(L),Q=L.changedTouches,se=Q.length,te,S;for(Wg(L),T&&clearTimeout(T),T=setTimeout(function(){T=null},b),te=0;te<se;++te)S=Q[te],H.touch0&&H.touch0[2]===S.identifier?delete H.touch0:H.touch1&&H.touch1[2]===S.identifier&&delete H.touch1;if(H.touch1&&!H.touch0&&(H.touch0=H.touch1,delete H.touch1),H.touch0)H.touch0[1]=this.__zoom.invert(H.touch0[0]);else if(H.end(),H.taps===2&&(S=Ss(S,this),Math.hypot(y[0]-S[0],y[1]-S[1])<k)){var J=Ji(this).on("dblclick.zoom");J&&J.apply(this,arguments)}}}return D.wheelDelta=function(L){return arguments.length?(r=typeof L=="function"?L:jd(+L),D):r},D.filter=function(L){return arguments.length?(t=typeof L=="function"?L:jd(!!L),D):t},D.touchable=function(L){return arguments.length?(s=typeof L=="function"?L:jd(!!L),D):s},D.extent=function(L){return arguments.length?(e=typeof L=="function"?L:jd([[+L[0][0],+L[0][1]],[+L[1][0],+L[1][1]]]),D):e},D.scaleExtent=function(L){return arguments.length?(o[0]=+L[0],o[1]=+L[1],D):[o[0],o[1]]},D.translateExtent=function(L){return arguments.length?(u[0][0]=+L[0][0],u[1][0]=+L[1][0],u[0][1]=+L[0][1],u[1][1]=+L[1][1],D):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},D.constrain=function(L){return arguments.length?(n=L,D):n},D.duration=function(L){return arguments.length?(c=+L,D):c},D.interpolate=function(L){return arguments.length?(f=L,D):f},D.on=function(){var L=d.on.apply(d,arguments);return L===d?D:L},D.clickDistance=function(L){return arguments.length?(N=(L=+L)*L,D):Math.sqrt(N)},D.tapDistance=function(L){return arguments.length?(k=+L,D):k},D}Zw();const f0=re.createContext(null),sL=f0.Provider,fa={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Ix=fa.error001();function gn(t,e){const n=re.useContext(f0);if(n===null)throw new Error(Ix);return Jw(n,t,e)}const ar=()=>{const t=re.useContext(f0);if(t===null)throw new Error(Ix);return re.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},aL=t=>t.userSelectionActive?"none":"all";function Cx({position:t,children:e,className:n,style:r,...s}){const o=gn(aL),u=`${t}`.split("-");return _e.createElement("div",{className:zr(["react-flow__panel",n,...u]),style:{...r,pointerEvents:o},...s},e)}function oL({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:_e.createElement(Cx,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},_e.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const uL=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:o={},labelBgPadding:u=[2,4],labelBgBorderRadius:c=2,children:f,className:d,...p})=>{const y=re.useRef(null),[T,b]=re.useState({x:0,y:0,width:0,height:0}),w=zr(["react-flow__edge-textwrapper",d]);return re.useEffect(()=>{if(y.current){const N=y.current.getBBox();b({x:N.x,y:N.y,width:N.width,height:N.height})}},[n]),typeof n>"u"||!n?null:_e.createElement("g",{transform:`translate(${t-T.width/2} ${e-T.height/2})`,className:w,visibility:T.width?"visible":"hidden",...p},s&&_e.createElement("rect",{width:T.width+2*u[0],x:-u[0],y:-u[1],height:T.height+2*u[1],className:"react-flow__edge-textbg",style:o,rx:c,ry:c}),_e.createElement("text",{className:"react-flow__edge-text",y:T.height/2,dy:"0.3em",ref:y,style:r},n),f)};var lL=re.memo(uL);const WE=t=>({width:t.offsetWidth,height:t.offsetHeight}),Nl=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),ZE=(t={x:0,y:0},e)=>({x:Nl(t.x,e[0][0],e[1][0]),y:Nl(t.y,e[0][1],e[1][1])}),vS=(t,e,n)=>t<e?Nl(Math.abs(t-e),1,50)/50:t>n?-Nl(Math.abs(t-n),1,50)/50:0,Nx=(t,e)=>{const n=vS(t.x,35,e.width-35)*20,r=vS(t.y,35,e.height-35)*20;return[n,r]},Rx=t=>t.getRootNode?.()||window?.document,cL=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),JE=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),hL=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),SS=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Gy=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},fL=t=>zi(t.width)&&zi(t.height)&&zi(t.x)&&zi(t.y),zi=t=>!isNaN(t)&&isFinite(t),vn=Symbol.for("internals"),Dx=["Enter"," ","Escape"],dL=(t,e)=>{},mL=t=>"nativeEvent"in t;function $y(t){const n=(mL(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const Ox=t=>"clientX"in t,ro=(t,e)=>{const n=Ox(t),r=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:s-(e?.top??0)}},Om=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,sf=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:p,markerEnd:y,markerStart:T,interactionWidth:b=20})=>_e.createElement(_e.Fragment,null,_e.createElement("path",{id:t,style:p,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:T}),b&&_e.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:b,className:"react-flow__edge-interaction"}),s&&zi(n)&&zi(r)?_e.createElement(lL,{x:n,y:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d}):null);sf.displayName="BaseEdge";function Jc(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(o=>o.id===t);s&&n(r,{...s})}}function kx({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,o=n<t?n+s:n-s,u=Math.abs(r-e)/2,c=r<e?r+u:r-u;return[o,c,s,u]}function Lx({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:o,targetControlX:u,targetControlY:c}){const f=t*.125+s*.375+u*.375+n*.125,d=e*.125+o*.375+c*.375+r*.125,p=Math.abs(f-t),y=Math.abs(d-e);return[f,d,p,y]}var lo;(function(t){t.Strict="strict",t.Loose="loose"})(lo||(lo={}));var Wo;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Wo||(Wo={}));var Vh;(function(t){t.Partial="partial",t.Full="full"})(Vh||(Vh={}));var Ka;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ka||(Ka={}));var Hh;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Hh||(Hh={}));var ze;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ze||(ze={}));function AS({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===ze.Left||t===ze.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function Mx({sourceX:t,sourceY:e,sourcePosition:n=ze.Bottom,targetX:r,targetY:s,targetPosition:o=ze.Top}){const[u,c]=AS({pos:n,x1:t,y1:e,x2:r,y2:s}),[f,d]=AS({pos:o,x1:r,y1:s,x2:t,y2:e}),[p,y,T,b]=Lx({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:u,sourceControlY:c,targetControlX:f,targetControlY:d});return[`M${t},${e} C${u},${c} ${f},${d} ${r},${s}`,p,y,T,b]}const e_=re.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=ze.Bottom,targetPosition:o=ze.Top,label:u,labelStyle:c,labelShowBg:f,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:y,style:T,markerEnd:b,markerStart:w,interactionWidth:N})=>{const[k,D,F]=Mx({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o});return _e.createElement(sf,{path:k,labelX:D,labelY:F,label:u,labelStyle:c,labelShowBg:f,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:y,style:T,markerEnd:b,markerStart:w,interactionWidth:N})});e_.displayName="SimpleBezierEdge";const wS={[ze.Left]:{x:-1,y:0},[ze.Right]:{x:1,y:0},[ze.Top]:{x:0,y:-1},[ze.Bottom]:{x:0,y:1}},pL=({source:t,sourcePosition:e=ze.Bottom,target:n})=>e===ze.Left||e===ze.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},xS=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function gL({source:t,sourcePosition:e=ze.Bottom,target:n,targetPosition:r=ze.Top,center:s,offset:o}){const u=wS[e],c=wS[r],f={x:t.x+u.x*o,y:t.y+u.y*o},d={x:n.x+c.x*o,y:n.y+c.y*o},p=pL({source:f,sourcePosition:e,target:d}),y=p.x!==0?"x":"y",T=p[y];let b=[],w,N;const k={x:0,y:0},D={x:0,y:0},[F,q,j,ee]=kx({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(u[y]*c[y]===-1){w=s.x??F,N=s.y??q;const R=[{x:w,y:f.y},{x:w,y:d.y}],C=[{x:f.x,y:N},{x:d.x,y:N}];u[y]===T?b=y==="x"?R:C:b=y==="x"?C:R}else{const R=[{x:f.x,y:d.y}],C=[{x:d.x,y:f.y}];if(y==="x"?b=u.x===T?C:R:b=u.y===T?R:C,e===r){const I=Math.abs(t[y]-n[y]);if(I<=o){const L=Math.min(o-1,o-I);u[y]===T?k[y]=(f[y]>t[y]?-1:1)*L:D[y]=(d[y]>n[y]?-1:1)*L}}if(e!==r){const I=y==="x"?"y":"x",L=u[y]===c[I],K=f[I]>d[I],H=f[I]<d[I];(u[y]===1&&(!L&&K||L&&H)||u[y]!==1&&(!L&&H||L&&K))&&(b=y==="x"?R:C)}const O={x:f.x+k.x,y:f.y+k.y},M={x:d.x+D.x,y:d.y+D.y},B=Math.max(Math.abs(O.x-b[0].x),Math.abs(M.x-b[0].x)),U=Math.max(Math.abs(O.y-b[0].y),Math.abs(M.y-b[0].y));B>=U?(w=(O.x+M.x)/2,N=b[0].y):(w=b[0].x,N=(O.y+M.y)/2)}return[[t,{x:f.x+k.x,y:f.y+k.y},...b,{x:d.x+D.x,y:d.y+D.y},n],w,N,j,ee]}function yL(t,e,n,r){const s=Math.min(xS(t,e)/2,xS(e,n)/2,r),{x:o,y:u}=e;if(t.x===o&&o===n.x||t.y===u&&u===n.y)return`L${o} ${u}`;if(t.y===u){const d=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${o+s*d},${u}Q ${o},${u} ${o},${u+s*p}`}const c=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${o},${u+s*f}Q ${o},${u} ${o+s*c},${u}`}function Ky({sourceX:t,sourceY:e,sourcePosition:n=ze.Bottom,targetX:r,targetY:s,targetPosition:o=ze.Top,borderRadius:u=5,centerX:c,centerY:f,offset:d=20}){const[p,y,T,b,w]=gL({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:o,center:{x:c,y:f},offset:d});return[p.reduce((k,D,F)=>{let q="";return F>0&&F<p.length-1?q=yL(p[F-1],D,p[F+1],u):q=`${F===0?"M":"L"}${D.x} ${D.y}`,k+=q,k},""),y,T,b,w]}const d0=re.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:p,sourcePosition:y=ze.Bottom,targetPosition:T=ze.Top,markerEnd:b,markerStart:w,pathOptions:N,interactionWidth:k})=>{const[D,F,q]=Ky({sourceX:t,sourceY:e,sourcePosition:y,targetX:n,targetY:r,targetPosition:T,borderRadius:N?.borderRadius,offset:N?.offset});return _e.createElement(sf,{path:D,labelX:F,labelY:q,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:p,markerEnd:b,markerStart:w,interactionWidth:k})});d0.displayName="SmoothStepEdge";const t_=re.memo(t=>_e.createElement(d0,{...t,pathOptions:re.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));t_.displayName="StepEdge";function EL({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,o,u,c]=kx({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,o,u,c]}const n_=re.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:p,markerEnd:y,markerStart:T,interactionWidth:b})=>{const[w,N,k]=EL({sourceX:t,sourceY:e,targetX:n,targetY:r});return _e.createElement(sf,{path:w,labelX:N,labelY:k,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:d,style:p,markerEnd:y,markerStart:T,interactionWidth:b})});n_.displayName="StraightEdge";function qd(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function IS({pos:t,x1:e,y1:n,x2:r,y2:s,c:o}){switch(t){case ze.Left:return[e-qd(e-r,o),n];case ze.Right:return[e+qd(r-e,o),n];case ze.Top:return[e,n-qd(n-s,o)];case ze.Bottom:return[e,n+qd(s-n,o)]}}function Px({sourceX:t,sourceY:e,sourcePosition:n=ze.Bottom,targetX:r,targetY:s,targetPosition:o=ze.Top,curvature:u=.25}){const[c,f]=IS({pos:n,x1:t,y1:e,x2:r,y2:s,c:u}),[d,p]=IS({pos:o,x1:r,y1:s,x2:t,y2:e,c:u}),[y,T,b,w]=Lx({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:c,sourceControlY:f,targetControlX:d,targetControlY:p});return[`M${t},${e} C${c},${f} ${d},${p} ${r},${s}`,y,T,b,w]}const km=re.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=ze.Bottom,targetPosition:o=ze.Top,label:u,labelStyle:c,labelShowBg:f,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:y,style:T,markerEnd:b,markerStart:w,pathOptions:N,interactionWidth:k})=>{const[D,F,q]=Px({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o,curvature:N?.curvature});return _e.createElement(sf,{path:D,labelX:F,labelY:q,label:u,labelStyle:c,labelShowBg:f,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:y,style:T,markerEnd:b,markerStart:w,interactionWidth:k})});km.displayName="BezierEdge";const r_=re.createContext(null),_L=r_.Provider;r_.Consumer;const TL=()=>re.useContext(r_),bL=t=>"id"in t&&"source"in t&&"target"in t,vL=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,Xy=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,SL=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),AL=(t,e)=>{if(!t.source||!t.target)return e;let n;return bL(t)?n={...t}:n={...t,id:vL(t)},SL(n,e)?e:e.concat(n)},Qy=({x:t,y:e},[n,r,s],o,[u,c])=>{const f={x:(t-n)/s,y:(e-r)/s};return o?{x:u*Math.round(f.x/u),y:c*Math.round(f.y/c)}:f},Bx=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),yl=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},i_=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:o,y:u}=yl(s,e).positionAbsolute;return cL(r,JE({x:o,y:u,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return hL(n)},Ux=(t,e,[n,r,s]=[0,0,1],o=!1,u=!1,c=[0,0])=>{const f={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},d=[];return t.forEach(p=>{const{width:y,height:T,selectable:b=!0,hidden:w=!1}=p;if(u&&!b||w)return!1;const{positionAbsolute:N}=yl(p,c),k={x:N.x,y:N.y,width:y||0,height:T||0},D=Gy(f,k),F=typeof y>"u"||typeof T>"u"||y===null||T===null,q=o&&D>0,j=(y||0)*(T||0);(F||q||D>=j||p.dragging)&&d.push(p)}),d},Vx=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},Hx=(t,e,n,r,s,o=.1)=>{const u=e/(t.width*(1+o)),c=n/(t.height*(1+o)),f=Math.min(u,c),d=Nl(f,r,s),p=t.x+t.width/2,y=t.y+t.height/2,T=e/2-p*d,b=n/2-y*d;return{x:T,y:b,zoom:d}},Ko=(t,e=0)=>t.transition().duration(e);function CS(t,e,n,r){return(e[n]||[]).reduce((s,o)=>(`${t.id}-${o.id}-${n}`!==r&&s.push({id:o.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+o.x+o.width/2,y:(t.positionAbsolute?.y??0)+o.y+o.height/2}),s),[])}function wL(t,e,n,r,s,o){const{x:u,y:c}=ro(t),d=e.elementsFromPoint(u,c).find(w=>w.classList.contains("react-flow__handle"));if(d){const w=d.getAttribute("data-nodeid");if(w){const N=s_(void 0,d),k=d.getAttribute("data-handleid"),D=o({nodeId:w,id:k,type:N});if(D){const F=s.find(q=>q.nodeId===w&&q.type===N&&q.id===k);return{handle:{id:k,type:N,nodeId:w,x:F?.x||n.x,y:F?.y||n.y},validHandleResult:D}}}}let p=[],y=1/0;if(s.forEach(w=>{const N=Math.sqrt((w.x-n.x)**2+(w.y-n.y)**2);if(N<=r){const k=o(w);N<=y&&(N<y?p=[{handle:w,validHandleResult:k}]:N===y&&p.push({handle:w,validHandleResult:k}),y=N)}}),!p.length)return{handle:null,validHandleResult:Fx()};if(p.length===1)return p[0];const T=p.some(({validHandleResult:w})=>w.isValid),b=p.some(({handle:w})=>w.type==="target");return p.find(({handle:w,validHandleResult:N})=>b?w.type==="target":T?N.isValid:!0)||p[0]}const xL={source:null,target:null,sourceHandle:null,targetHandle:null},Fx=()=>({handleDomNode:null,isValid:!1,connection:xL,endHandle:null});function zx(t,e,n,r,s,o,u){const c=s==="target",f=u.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),d={...Fx(),handleDomNode:f};if(f){const p=s_(void 0,f),y=f.getAttribute("data-nodeid"),T=f.getAttribute("data-handleid"),b=f.classList.contains("connectable"),w=f.classList.contains("connectableend"),N={source:c?y:n,sourceHandle:c?T:r,target:c?n:y,targetHandle:c?r:T};d.connection=N,b&&w&&(e===lo.Strict?c&&p==="source"||!c&&p==="target":y!==n||T!==r)&&(d.endHandle={nodeId:y,handleId:T,type:p},d.isValid=o(N))}return d}function IL({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,o)=>{if(o[vn]){const{handleBounds:u}=o[vn];let c=[],f=[];u&&(c=CS(o,u,"source",`${e}-${n}-${r}`),f=CS(o,u,"target",`${e}-${n}-${r}`)),s.push(...c,...f)}return s},[])}function s_(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function Zg(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function CL(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function jx({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:o,setState:u,isValidConnection:c,edgeUpdaterType:f,onReconnectEnd:d}){const p=Rx(t.target),{connectionMode:y,domNode:T,autoPanOnConnect:b,connectionRadius:w,onConnectStart:N,panBy:k,getNodes:D,cancelConnection:F}=o();let q=0,j;const{x:ee,y:$}=ro(t),R=p?.elementFromPoint(ee,$),C=s_(f,R),O=T?.getBoundingClientRect();if(!O||!C)return;let M,B=ro(t,O),U=!1,I=null,L=!1,K=null;const H=IL({nodes:D(),nodeId:n,handleId:e,handleType:C}),Q=()=>{if(!b)return;const[S,J]=Nx(B,O);k({x:S,y:J}),q=requestAnimationFrame(Q)};u({connectionPosition:B,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:C,connectionStartHandle:{nodeId:n,handleId:e,type:C},connectionEndHandle:null}),N?.(t,{nodeId:n,handleId:e,handleType:C});function se(S){const{transform:J}=o();B=ro(S,O);const{handle:ae,validHandleResult:P}=wL(S,p,Qy(B,J,!1,[1,1]),w,H,ge=>zx(ge,y,n,e,s?"target":"source",c,p));if(j=ae,U||(Q(),U=!0),K=P.handleDomNode,I=P.connection,L=P.isValid,u({connectionPosition:j&&L?Bx({x:j.x,y:j.y},J):B,connectionStatus:CL(!!j,L),connectionEndHandle:P.endHandle}),!j&&!L&&!K)return Zg(M);I.source!==I.target&&K&&(Zg(M),M=K,K.classList.add("connecting","react-flow__handle-connecting"),K.classList.toggle("valid",L),K.classList.toggle("react-flow__handle-valid",L))}function te(S){(j||K)&&I&&L&&r?.(I),o().onConnectEnd?.(S),f&&d?.(S),Zg(M),F(),cancelAnimationFrame(q),U=!1,L=!1,I=null,K=null,p.removeEventListener("mousemove",se),p.removeEventListener("mouseup",te),p.removeEventListener("touchmove",se),p.removeEventListener("touchend",te)}p.addEventListener("mousemove",se),p.addEventListener("mouseup",te),p.addEventListener("touchmove",se),p.addEventListener("touchend",te)}const NS=()=>!0,NL=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),RL=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:o,connectionClickStartHandle:u}=r;return{connecting:s?.nodeId===t&&s?.handleId===e&&s?.type===n||o?.nodeId===t&&o?.handleId===e&&o?.type===n,clickConnecting:u?.nodeId===t&&u?.handleId===e&&u?.type===n}},qx=re.forwardRef(({type:t="source",position:e=ze.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:u,onConnect:c,children:f,className:d,onMouseDown:p,onTouchStart:y,...T},b)=>{const w=u||null,N=t==="target",k=ar(),D=TL(),{connectOnClick:F,noPanClassName:q}=gn(NL,xr),{connecting:j,clickConnecting:ee}=gn(RL(D,w,t),xr);D||k.getState().onError?.("010",fa.error010());const $=O=>{const{defaultEdgeOptions:M,onConnect:B,hasDefaultEdges:U}=k.getState(),I={...M,...O};if(U){const{edges:L,setEdges:K}=k.getState();K(AL(I,L))}B?.(I),c?.(I)},R=O=>{if(!D)return;const M=Ox(O);s&&(M&&O.button===0||!M)&&jx({event:O,handleId:w,nodeId:D,onConnect:$,isTarget:N,getState:k.getState,setState:k.setState,isValidConnection:n||k.getState().isValidConnection||NS}),M?p?.(O):y?.(O)},C=O=>{const{onClickConnectStart:M,onClickConnectEnd:B,connectionClickStartHandle:U,connectionMode:I,isValidConnection:L}=k.getState();if(!D||!U&&!s)return;if(!U){M?.(O,{nodeId:D,handleId:w,handleType:t}),k.setState({connectionClickStartHandle:{nodeId:D,type:t,handleId:w}});return}const K=Rx(O.target),H=n||L||NS,{connection:Q,isValid:se}=zx({nodeId:D,id:w,type:t},I,U.nodeId,U.handleId||null,U.type,H,K);se&&$(Q),B?.(O),k.setState({connectionClickStartHandle:null})};return _e.createElement("div",{"data-handleid":w,"data-nodeid":D,"data-handlepos":e,"data-id":`${D}-${w}-${t}`,className:zr(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",q,d,{source:!N,target:N,connectable:r,connectablestart:s,connectableend:o,connecting:ee,connectionindicator:r&&(s&&!j||o&&j)}]),onMouseDown:R,onTouchStart:R,onClick:F?C:void 0,ref:b,...T},f)});qx.displayName="Handle";var Wr=re.memo(qx);const Yx=({data:t,isConnectable:e,targetPosition:n=ze.Top,sourcePosition:r=ze.Bottom})=>_e.createElement(_e.Fragment,null,_e.createElement(Wr,{type:"target",position:n,isConnectable:e}),t?.label,_e.createElement(Wr,{type:"source",position:r,isConnectable:e}));Yx.displayName="DefaultNode";var Wy=re.memo(Yx);const Gx=({data:t,isConnectable:e,sourcePosition:n=ze.Bottom})=>_e.createElement(_e.Fragment,null,t?.label,_e.createElement(Wr,{type:"source",position:n,isConnectable:e}));Gx.displayName="InputNode";var $x=re.memo(Gx);const Kx=({data:t,isConnectable:e,targetPosition:n=ze.Top})=>_e.createElement(_e.Fragment,null,_e.createElement(Wr,{type:"target",position:n,isConnectable:e}),t?.label);Kx.displayName="OutputNode";var Xx=re.memo(Kx);const a_=()=>null;a_.displayName="GroupNode";const DL=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Yd=t=>t.id;function OL(t,e){return xr(t.selectedNodes.map(Yd),e.selectedNodes.map(Yd))&&xr(t.selectedEdges.map(Yd),e.selectedEdges.map(Yd))}const Qx=re.memo(({onSelectionChange:t})=>{const e=ar(),{selectedNodes:n,selectedEdges:r}=gn(DL,OL);return re.useEffect(()=>{const s={nodes:n,edges:r};t?.(s),e.getState().onSelectionChange.forEach(o=>o(s))},[n,r,t]),null});Qx.displayName="SelectionListener";const kL=t=>!!t.onSelectionChange;function LL({onSelectionChange:t}){const e=gn(kL);return t||e?_e.createElement(Qx,{onSelectionChange:t}):null}const ML=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function el(t,e){re.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function dt(t,e,n){re.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const PL=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:o,onConnectEnd:u,onClickConnectStart:c,onClickConnectEnd:f,nodesDraggable:d,nodesConnectable:p,nodesFocusable:y,edgesFocusable:T,edgesUpdatable:b,elevateNodesOnSelect:w,minZoom:N,maxZoom:k,nodeExtent:D,onNodesChange:F,onEdgesChange:q,elementsSelectable:j,connectionMode:ee,snapGrid:$,snapToGrid:R,translateExtent:C,connectOnClick:O,defaultEdgeOptions:M,fitView:B,fitViewOptions:U,onNodesDelete:I,onEdgesDelete:L,onNodeDrag:K,onNodeDragStart:H,onNodeDragStop:Q,onSelectionDrag:se,onSelectionDragStart:te,onSelectionDragStop:S,noPanClassName:J,nodeOrigin:ae,rfId:P,autoPanOnConnect:ge,autoPanOnNodeDrag:Ne,onError:Ie,connectionRadius:je,isValidConnection:xe,nodeDragThreshold:Me})=>{const{setNodes:He,setEdges:Je,setDefaultNodesAndEdges:an,setMinZoom:Jt,setMaxZoom:on,setTranslateExtent:Dt,setNodeExtent:Rn,reset:Qe}=gn(ML,xr),qe=ar();return re.useEffect(()=>{const cn=r?.map(Un=>({...Un,...M}));return an(n,cn),()=>{Qe()}},[]),dt("defaultEdgeOptions",M,qe.setState),dt("connectionMode",ee,qe.setState),dt("onConnect",s,qe.setState),dt("onConnectStart",o,qe.setState),dt("onConnectEnd",u,qe.setState),dt("onClickConnectStart",c,qe.setState),dt("onClickConnectEnd",f,qe.setState),dt("nodesDraggable",d,qe.setState),dt("nodesConnectable",p,qe.setState),dt("nodesFocusable",y,qe.setState),dt("edgesFocusable",T,qe.setState),dt("edgesUpdatable",b,qe.setState),dt("elementsSelectable",j,qe.setState),dt("elevateNodesOnSelect",w,qe.setState),dt("snapToGrid",R,qe.setState),dt("snapGrid",$,qe.setState),dt("onNodesChange",F,qe.setState),dt("onEdgesChange",q,qe.setState),dt("connectOnClick",O,qe.setState),dt("fitViewOnInit",B,qe.setState),dt("fitViewOnInitOptions",U,qe.setState),dt("onNodesDelete",I,qe.setState),dt("onEdgesDelete",L,qe.setState),dt("onNodeDrag",K,qe.setState),dt("onNodeDragStart",H,qe.setState),dt("onNodeDragStop",Q,qe.setState),dt("onSelectionDrag",se,qe.setState),dt("onSelectionDragStart",te,qe.setState),dt("onSelectionDragStop",S,qe.setState),dt("noPanClassName",J,qe.setState),dt("nodeOrigin",ae,qe.setState),dt("rfId",P,qe.setState),dt("autoPanOnConnect",ge,qe.setState),dt("autoPanOnNodeDrag",Ne,qe.setState),dt("onError",Ie,qe.setState),dt("connectionRadius",je,qe.setState),dt("isValidConnection",xe,qe.setState),dt("nodeDragThreshold",Me,qe.setState),el(t,He),el(e,Je),el(N,Jt),el(k,on),el(C,Dt),el(D,Rn),null},RS={display:"none"},BL={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Wx="react-flow__node-desc",Zx="react-flow__edge-desc",UL="react-flow__aria-live",VL=t=>t.ariaLiveMessage;function HL({rfId:t}){const e=gn(VL);return _e.createElement("div",{id:`${UL}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:BL},e)}function FL({rfId:t,disableKeyboardA11y:e}){return _e.createElement(_e.Fragment,null,_e.createElement("div",{id:`${Wx}-${t}`,style:RS},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),_e.createElement("div",{id:`${Zx}-${t}`,style:RS},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&_e.createElement(HL,{rfId:t}))}var Fh=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=re.useState(!1),s=re.useRef(!1),o=re.useRef(new Set([])),[u,c]=re.useMemo(()=>{if(t!==null){const d=(Array.isArray(t)?t:[t]).filter(y=>typeof y=="string").map(y=>y.split("+")),p=d.reduce((y,T)=>y.concat(...T),[]);return[d,p]}return[[],[]]},[t]);return re.useEffect(()=>{const f=typeof document<"u"?document:null,d=e?.target||f;if(t!==null){const p=b=>{if(s.current=b.ctrlKey||b.metaKey||b.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&$y(b))return!1;const N=OS(b.code,c);o.current.add(b[N]),DS(u,o.current,!1)&&(b.preventDefault(),r(!0))},y=b=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&$y(b))return!1;const N=OS(b.code,c);DS(u,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(b[N]),b.key==="Meta"&&o.current.clear(),s.current=!1},T=()=>{o.current.clear(),r(!1)};return d?.addEventListener("keydown",p),d?.addEventListener("keyup",y),window.addEventListener("blur",T),()=>{d?.removeEventListener("keydown",p),d?.removeEventListener("keyup",y),window.removeEventListener("blur",T)}}},[t,r]),n};function DS(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function OS(t,e){return e.includes(t)?"code":"key"}function Jx(t,e,n,r){const s=t.parentNode||t.parentId;if(!s)return n;const o=e.get(s),u=yl(o,r);return Jx(o,e,{x:(n.x??0)+u.x,y:(n.y??0)+u.y,z:(o[vn]?.z??0)>(n.z??0)?o[vn]?.z??0:n.z??0},r)}function eI(t,e,n){t.forEach(r=>{const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[r.id]){const{x:o,y:u,z:c}=Jx(r,t,{...r.position,z:r[vn]?.z??0},e);r.positionAbsolute={x:o,y:u},r[vn].z=c,n?.[r.id]&&(r[vn].isParent=!0)}})}function Jg(t,e,n,r){const s=new Map,o={},u=r?1e3:0;return t.forEach(c=>{const f=(zi(c.zIndex)?c.zIndex:0)+(c.selected?u:0),d=e.get(c.id),p={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},y=c.parentNode||c.parentId;y&&(o[y]=!0);const T=d?.type&&d?.type!==c.type;Object.defineProperty(p,vn,{enumerable:!1,value:{handleBounds:T?void 0:d?.[vn]?.handleBounds,z:f}}),s.set(c.id,p)}),eI(s,n,o),s}function tI(t,e={}){const{getNodes:n,width:r,height:s,minZoom:o,maxZoom:u,d3Zoom:c,d3Selection:f,fitViewOnInitDone:d,fitViewOnInit:p,nodeOrigin:y}=t(),T=e.initial&&!d&&p;if(c&&f&&(T||!e.initial)){const w=n().filter(k=>{const D=e.includeHiddenNodes?k.width&&k.height:!k.hidden;return e.nodes?.length?D&&e.nodes.some(F=>F.id===k.id):D}),N=w.every(k=>k.width&&k.height);if(w.length>0&&N){const k=i_(w,y),{x:D,y:F,zoom:q}=Hx(k,r,s,e.minZoom??o,e.maxZoom??u,e.padding??.1),j=no.translate(D,F).scale(q);return typeof e.duration=="number"&&e.duration>0?c.transform(Ko(f,e.duration),j):c.transform(f,j),!0}}return!1}function zL(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[vn]:r[vn],selected:n.selected})}),new Map(e)}function jL(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function Gd({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:o,onNodesChange:u,onEdgesChange:c,hasDefaultNodes:f,hasDefaultEdges:d}=n();t?.length&&(f&&r({nodeInternals:zL(t,s)}),u?.(t)),e?.length&&(d&&r({edges:jL(e,o)}),c?.(e))}const tl=()=>{},qL={zoomIn:tl,zoomOut:tl,zoomTo:tl,getZoom:()=>1,setViewport:tl,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:tl,fitBounds:tl,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},YL=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),GL=()=>{const t=ar(),{d3Zoom:e,d3Selection:n}=gn(YL,xr);return re.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(Ko(n,s?.duration),1.2),zoomOut:s=>e.scaleBy(Ko(n,s?.duration),1/1.2),zoomTo:(s,o)=>e.scaleTo(Ko(n,o?.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,o)=>{const[u,c,f]=t.getState().transform,d=no.translate(s.x??u,s.y??c).scale(s.zoom??f);e.transform(Ko(n,o?.duration),d)},getViewport:()=>{const[s,o,u]=t.getState().transform;return{x:s,y:o,zoom:u}},fitView:s=>tI(t.getState,s),setCenter:(s,o,u)=>{const{width:c,height:f,maxZoom:d}=t.getState(),p=typeof u?.zoom<"u"?u.zoom:d,y=c/2-s*p,T=f/2-o*p,b=no.translate(y,T).scale(p);e.transform(Ko(n,u?.duration),b)},fitBounds:(s,o)=>{const{width:u,height:c,minZoom:f,maxZoom:d}=t.getState(),{x:p,y,zoom:T}=Hx(s,u,c,f,d,o?.padding??.1),b=no.translate(p,y).scale(T);e.transform(Ko(n,o?.duration),b)},project:s=>{const{transform:o,snapToGrid:u,snapGrid:c}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Qy(s,o,u,c)},screenToFlowPosition:s=>{const{transform:o,snapToGrid:u,snapGrid:c,domNode:f}=t.getState();if(!f)return s;const{x:d,y:p}=f.getBoundingClientRect(),y={x:s.x-d,y:s.y-p};return Qy(y,o,u,c)},flowToScreenPosition:s=>{const{transform:o,domNode:u}=t.getState();if(!u)return s;const{x:c,y:f}=u.getBoundingClientRect(),d=Bx(s,o);return{x:d.x+c,y:d.y+f}},viewportInitialized:!0}:qL,[e,n])};function af(){const t=GL(),e=ar(),n=re.useCallback(()=>e.getState().getNodes().map(N=>({...N})),[]),r=re.useCallback(N=>e.getState().nodeInternals.get(N),[]),s=re.useCallback(()=>{const{edges:N=[]}=e.getState();return N.map(k=>({...k}))},[]),o=re.useCallback(N=>{const{edges:k=[]}=e.getState();return k.find(D=>D.id===N)},[]),u=re.useCallback(N=>{const{getNodes:k,setNodes:D,hasDefaultNodes:F,onNodesChange:q}=e.getState(),j=k(),ee=typeof N=="function"?N(j):N;if(F)D(ee);else if(q){const $=ee.length===0?j.map(R=>({type:"remove",id:R.id})):ee.map(R=>({item:R,type:"reset"}));q($)}},[]),c=re.useCallback(N=>{const{edges:k=[],setEdges:D,hasDefaultEdges:F,onEdgesChange:q}=e.getState(),j=typeof N=="function"?N(k):N;if(F)D(j);else if(q){const ee=j.length===0?k.map($=>({type:"remove",id:$.id})):j.map($=>({item:$,type:"reset"}));q(ee)}},[]),f=re.useCallback(N=>{const k=Array.isArray(N)?N:[N],{getNodes:D,setNodes:F,hasDefaultNodes:q,onNodesChange:j}=e.getState();if(q){const $=[...D(),...k];F($)}else if(j){const ee=k.map($=>({item:$,type:"add"}));j(ee)}},[]),d=re.useCallback(N=>{const k=Array.isArray(N)?N:[N],{edges:D=[],setEdges:F,hasDefaultEdges:q,onEdgesChange:j}=e.getState();if(q)F([...D,...k]);else if(j){const ee=k.map($=>({item:$,type:"add"}));j(ee)}},[]),p=re.useCallback(()=>{const{getNodes:N,edges:k=[],transform:D}=e.getState(),[F,q,j]=D;return{nodes:N().map(ee=>({...ee})),edges:k.map(ee=>({...ee})),viewport:{x:F,y:q,zoom:j}}},[]),y=re.useCallback(({nodes:N,edges:k})=>{const{nodeInternals:D,getNodes:F,edges:q,hasDefaultNodes:j,hasDefaultEdges:ee,onNodesDelete:$,onEdgesDelete:R,onNodesChange:C,onEdgesChange:O}=e.getState(),M=(N||[]).map(K=>K.id),B=(k||[]).map(K=>K.id),U=F().reduce((K,H)=>{const Q=H.parentNode||H.parentId,se=!M.includes(H.id)&&Q&&K.find(S=>S.id===Q);return(typeof H.deletable=="boolean"?H.deletable:!0)&&(M.includes(H.id)||se)&&K.push(H),K},[]),I=q.filter(K=>typeof K.deletable=="boolean"?K.deletable:!0),L=I.filter(K=>B.includes(K.id));if(U||L){const K=Vx(U,I),H=[...L,...K],Q=H.reduce((se,te)=>(se.includes(te.id)||se.push(te.id),se),[]);if((ee||j)&&(ee&&e.setState({edges:q.filter(se=>!Q.includes(se.id))}),j&&(U.forEach(se=>{D.delete(se.id)}),e.setState({nodeInternals:new Map(D)}))),Q.length>0&&(R?.(H),O&&O(Q.map(se=>({id:se,type:"remove"})))),U.length>0&&($?.(U),C)){const se=U.map(te=>({id:te.id,type:"remove"}));C(se)}}},[]),T=re.useCallback(N=>{const k=fL(N),D=k?null:e.getState().nodeInternals.get(N.id);return!k&&!D?[null,null,k]:[k?N:SS(D),D,k]},[]),b=re.useCallback((N,k=!0,D)=>{const[F,q,j]=T(N);return F?(D||e.getState().getNodes()).filter(ee=>{if(!j&&(ee.id===q.id||!ee.positionAbsolute))return!1;const $=SS(ee),R=Gy($,F);return k&&R>0||R>=F.width*F.height}):[]},[]),w=re.useCallback((N,k,D=!0)=>{const[F]=T(N);if(!F)return!1;const q=Gy(F,k);return D&&q>0||q>=F.width*F.height},[]);return re.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:o,setNodes:u,setEdges:c,addNodes:f,addEdges:d,toObject:p,deleteElements:y,getIntersectingNodes:b,isNodeIntersecting:w}),[t,n,r,s,o,u,c,f,d,p,y,b,w])}const $L={actInsideInputWithModifier:!1};var KL=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=ar(),{deleteElements:r}=af(),s=Fh(t,$L),o=Fh(e);re.useEffect(()=>{if(s){const{edges:u,getNodes:c}=n.getState(),f=c().filter(p=>p.selected),d=u.filter(p=>p.selected);r({nodes:f,edges:d}),n.setState({nodesSelectionActive:!1})}},[s]),re.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function XL(t){const e=ar();re.useEffect(()=>{let n;const r=()=>{if(!t.current)return;const s=WE(t.current);(s.height===0||s.width===0)&&e.getState().onError?.("004",fa.error004()),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const o_={position:"absolute",width:"100%",height:"100%",top:0,left:0},QL=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,$d=t=>({x:t.x,y:t.y,zoom:t.k}),nl=(t,e)=>t.target.closest(`.${e}`),kS=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),LS=t=>{const e=t.ctrlKey&&Om()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},WL=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),ZL=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:o=!0,panOnScroll:u=!1,panOnScrollSpeed:c=.5,panOnScrollMode:f=Wo.Free,zoomOnDoubleClick:d=!0,elementsSelectable:p,panOnDrag:y=!0,defaultViewport:T,translateExtent:b,minZoom:w,maxZoom:N,zoomActivationKeyCode:k,preventScrolling:D=!0,children:F,noWheelClassName:q,noPanClassName:j})=>{const ee=re.useRef(),$=ar(),R=re.useRef(!1),C=re.useRef(!1),O=re.useRef(null),M=re.useRef({x:0,y:0,zoom:0}),{d3Zoom:B,d3Selection:U,d3ZoomHandler:I,userSelectionActive:L}=gn(WL,xr),K=Fh(k),H=re.useRef(0),Q=re.useRef(!1),se=re.useRef();return XL(O),re.useEffect(()=>{if(O.current){const te=O.current.getBoundingClientRect(),S=iL().scaleExtent([w,N]).translateExtent(b),J=Ji(O.current).call(S),ae=no.translate(T.x,T.y).scale(Nl(T.zoom,w,N)),P=[[0,0],[te.width,te.height]],ge=S.constrain()(ae,P,b);S.transform(J,ge),S.wheelDelta(LS),$.setState({d3Zoom:S,d3Selection:J,d3ZoomHandler:J.on("wheel.zoom"),transform:[ge.x,ge.y,ge.k],domNode:O.current.closest(".react-flow")})}},[]),re.useEffect(()=>{U&&B&&(u&&!K&&!L?U.on("wheel.zoom",te=>{if(nl(te,q))return!1;te.preventDefault(),te.stopImmediatePropagation();const S=U.property("__zoom").k||1;if(te.ctrlKey&&o){const xe=Ss(te),Me=LS(te),He=S*Math.pow(2,Me);B.scaleTo(U,He,xe,te);return}const J=te.deltaMode===1?20:1;let ae=f===Wo.Vertical?0:te.deltaX*J,P=f===Wo.Horizontal?0:te.deltaY*J;!Om()&&te.shiftKey&&f!==Wo.Vertical&&(ae=te.deltaY*J,P=0),B.translateBy(U,-(ae/S)*c,-(P/S)*c,{internal:!0});const ge=$d(U.property("__zoom")),{onViewportChangeStart:Ne,onViewportChange:Ie,onViewportChangeEnd:je}=$.getState();clearTimeout(se.current),Q.current||(Q.current=!0,e?.(te,ge),Ne?.(ge)),Q.current&&(t?.(te,ge),Ie?.(ge),se.current=setTimeout(()=>{n?.(te,ge),je?.(ge),Q.current=!1},150))},{passive:!1}):typeof I<"u"&&U.on("wheel.zoom",function(te,S){if(!D&&te.type==="wheel"&&!te.ctrlKey||nl(te,q))return null;te.preventDefault(),I.call(this,te,S)},{passive:!1}))},[L,u,f,U,B,I,K,o,D,q,e,t,n]),re.useEffect(()=>{B&&B.on("start",te=>{if(!te.sourceEvent||te.sourceEvent.internal)return null;H.current=te.sourceEvent?.button;const{onViewportChangeStart:S}=$.getState(),J=$d(te.transform);R.current=!0,M.current=J,te.sourceEvent?.type==="mousedown"&&$.setState({paneDragging:!0}),S?.(J),e?.(te.sourceEvent,J)})},[B,e]),re.useEffect(()=>{B&&(L&&!R.current?B.on("zoom",null):L||B.on("zoom",te=>{const{onViewportChange:S}=$.getState();if($.setState({transform:[te.transform.x,te.transform.y,te.transform.k]}),C.current=!!(r&&kS(y,H.current??0)),(t||S)&&!te.sourceEvent?.internal){const J=$d(te.transform);S?.(J),t?.(te.sourceEvent,J)}}))},[L,B,t,y,r]),re.useEffect(()=>{B&&B.on("end",te=>{if(!te.sourceEvent||te.sourceEvent.internal)return null;const{onViewportChangeEnd:S}=$.getState();if(R.current=!1,$.setState({paneDragging:!1}),r&&kS(y,H.current??0)&&!C.current&&r(te.sourceEvent),C.current=!1,(n||S)&&QL(M.current,te.transform)){const J=$d(te.transform);M.current=J,clearTimeout(ee.current),ee.current=setTimeout(()=>{S?.(J),n?.(te.sourceEvent,J)},u?150:0)}})},[B,u,y,n,r]),re.useEffect(()=>{B&&B.filter(te=>{const S=K||s,J=o&&te.ctrlKey;if((y===!0||Array.isArray(y)&&y.includes(1))&&te.button===1&&te.type==="mousedown"&&(nl(te,"react-flow__node")||nl(te,"react-flow__edge")))return!0;if(!y&&!S&&!u&&!d&&!o||L||!d&&te.type==="dblclick"||nl(te,q)&&te.type==="wheel"||nl(te,j)&&(te.type!=="wheel"||u&&te.type==="wheel"&&!K)||!o&&te.ctrlKey&&te.type==="wheel"||!S&&!u&&!J&&te.type==="wheel"||!y&&(te.type==="mousedown"||te.type==="touchstart")||Array.isArray(y)&&!y.includes(te.button)&&te.type==="mousedown")return!1;const ae=Array.isArray(y)&&y.includes(te.button)||!te.button||te.button<=1;return(!te.ctrlKey||te.type==="wheel")&&ae})},[L,B,s,o,u,d,y,p,K]),_e.createElement("div",{className:"react-flow__renderer",ref:O,style:o_},F)},JL=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function eM(){const{userSelectionActive:t,userSelectionRect:e}=gn(JL,xr);return t&&e?_e.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function MS(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,o=e.position.y+e.height-r.height;if(s>0||o>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),o>0&&(r.style.height+=o),e.position.x<0){const u=Math.abs(e.position.x);r.position.x=r.position.x-u,r.style.width+=u,e.position.x=0}if(e.position.y<0){const u=Math.abs(e.position.y);r.position.y=r.position.y-u,r.style.height+=u,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function nI(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const o=t.filter(c=>c.id===s.id);if(o.length===0)return r.push(s),r;const u={...s};for(const c of o)if(c)switch(c.type){case"select":{u.selected=c.selected;break}case"position":{typeof c.position<"u"&&(u.position=c.position),typeof c.positionAbsolute<"u"&&(u.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(u.dragging=c.dragging),u.expandParent&&MS(r,u);break}case"dimensions":{typeof c.dimensions<"u"&&(u.width=c.dimensions.width,u.height=c.dimensions.height),typeof c.updateStyle<"u"&&(u.style={...u.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(u.resizing=c.resizing),u.expandParent&&MS(r,u);break}case"remove":return r}return r.push(u),r},n)}function rI(t,e){return nI(t,e)}function tM(t,e){return nI(t,e)}const $a=(t,e)=>({id:t,type:"select",selected:e});function fl(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push($a(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push($a(r.id,!1))),n},[])}const ey=(t,e)=>n=>{n.target===e.current&&t?.(n)},nM=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),iI=re.memo(({isSelecting:t,selectionMode:e=Vh.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:o,onPaneContextMenu:u,onPaneScroll:c,onPaneMouseEnter:f,onPaneMouseMove:d,onPaneMouseLeave:p,children:y})=>{const T=re.useRef(null),b=ar(),w=re.useRef(0),N=re.useRef(0),k=re.useRef(),{userSelectionActive:D,elementsSelectable:F,dragging:q}=gn(nM,xr),j=()=>{b.setState({userSelectionActive:!1,userSelectionRect:null}),w.current=0,N.current=0},ee=I=>{o?.(I),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},$=I=>{if(Array.isArray(n)&&n?.includes(2)){I.preventDefault();return}u?.(I)},R=c?I=>c(I):void 0,C=I=>{const{resetSelectedElements:L,domNode:K}=b.getState();if(k.current=K?.getBoundingClientRect(),!F||!t||I.button!==0||I.target!==T.current||!k.current)return;const{x:H,y:Q}=ro(I,k.current);L(),b.setState({userSelectionRect:{width:0,height:0,startX:H,startY:Q,x:H,y:Q}}),r?.(I)},O=I=>{const{userSelectionRect:L,nodeInternals:K,edges:H,transform:Q,onNodesChange:se,onEdgesChange:te,nodeOrigin:S,getNodes:J}=b.getState();if(!t||!k.current||!L)return;b.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ae=ro(I,k.current),P=L.startX??0,ge=L.startY??0,Ne={...L,x:ae.x<P?ae.x:P,y:ae.y<ge?ae.y:ge,width:Math.abs(ae.x-P),height:Math.abs(ae.y-ge)},Ie=J(),je=Ux(K,Ne,Q,e===Vh.Partial,!0,S),xe=Vx(je,H).map(He=>He.id),Me=je.map(He=>He.id);if(w.current!==Me.length){w.current=Me.length;const He=fl(Ie,Me);He.length&&se?.(He)}if(N.current!==xe.length){N.current=xe.length;const He=fl(H,xe);He.length&&te?.(He)}b.setState({userSelectionRect:Ne})},M=I=>{if(I.button!==0)return;const{userSelectionRect:L}=b.getState();!D&&L&&I.target===T.current&&ee?.(I),b.setState({nodesSelectionActive:w.current>0}),j(),s?.(I)},B=I=>{D&&(b.setState({nodesSelectionActive:w.current>0}),s?.(I)),j()},U=F&&(t||D);return _e.createElement("div",{className:zr(["react-flow__pane",{dragging:q,selection:t}]),onClick:U?void 0:ey(ee,T),onContextMenu:ey($,T),onWheel:ey(R,T),onMouseEnter:U?void 0:f,onMouseDown:U?C:void 0,onMouseMove:U?O:d,onMouseUp:U?M:void 0,onMouseLeave:U?B:p,ref:T,style:o_},y,_e.createElement(eM,null))});iI.displayName="Pane";function sI(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:sI(r,e):!1}function PS(t,e,n){let r=t;do{if(r?.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function rM(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!sI(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function iM(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function aI(t,e,n,r,s=[0,0],o){const u=iM(t,t.extent||r);let c=u;const f=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(f&&t.width&&t.height){const y=n.get(f),{x:T,y:b}=yl(y,s).positionAbsolute;c=y&&zi(T)&&zi(b)&&zi(y.width)&&zi(y.height)?[[T+t.width*s[0],b+t.height*s[1]],[T+y.width-t.width+t.width*s[0],b+y.height-t.height+t.height*s[1]]]:c}else o?.("005",fa.error005()),c=u;else if(t.extent&&f&&t.extent!=="parent"){const y=n.get(f),{x:T,y:b}=yl(y,s).positionAbsolute;c=[[t.extent[0][0]+T,t.extent[0][1]+b],[t.extent[1][0]+T,t.extent[1][1]+b]]}let d={x:0,y:0};if(f){const y=n.get(f);d=yl(y,s).positionAbsolute}const p=c&&c!=="parent"?ZE(e,c):e;return{position:{x:p.x-d.x,y:p.y-d.y},positionAbsolute:p}}function ty({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const BS=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const o=Array.from(s),u=e.getBoundingClientRect(),c={x:u.width*r[0],y:u.height*r[1]};return o.map(f=>{const d=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),position:f.getAttribute("data-handlepos"),x:(d.left-u.left-c.x)/n,y:(d.top-u.top-c.y)/n,...WE(f)}})};function eh(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function Zy({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:u,nodeInternals:c,onError:f}=e.getState(),d=c.get(t);if(!d){f?.("012",fa.error012(t));return}e.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&u)&&(o({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):s([t])}function sM(){const t=ar();return re.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:o}=t.getState(),u=n.touches?n.touches[0].clientX:n.clientX,c=n.touches?n.touches[0].clientY:n.clientY,f={x:(u-r[0])/r[2],y:(c-r[1])/r[2]};return{xSnapped:o?s[0]*Math.round(f.x/s[0]):f.x,ySnapped:o?s[1]*Math.round(f.y/s[1]):f.y,...f}},[])}function ny(t){return(e,n,r)=>t?.(e,r)}function oI({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:o,selectNodesOnDrag:u}){const c=ar(),[f,d]=re.useState(!1),p=re.useRef([]),y=re.useRef({x:null,y:null}),T=re.useRef(0),b=re.useRef(null),w=re.useRef({x:0,y:0}),N=re.useRef(null),k=re.useRef(!1),D=re.useRef(!1),F=re.useRef(!1),q=sM();return re.useEffect(()=>{if(t?.current){const j=Ji(t.current),ee=({x:C,y:O})=>{const{nodeInternals:M,onNodeDrag:B,onSelectionDrag:U,updateNodePositions:I,nodeExtent:L,snapGrid:K,snapToGrid:H,nodeOrigin:Q,onError:se}=c.getState();y.current={x:C,y:O};let te=!1,S={x:0,y:0,x2:0,y2:0};if(p.current.length>1&&L){const ae=i_(p.current,Q);S=JE(ae)}if(p.current=p.current.map(ae=>{const P={x:C-ae.distance.x,y:O-ae.distance.y};H&&(P.x=K[0]*Math.round(P.x/K[0]),P.y=K[1]*Math.round(P.y/K[1]));const ge=[[L[0][0],L[0][1]],[L[1][0],L[1][1]]];p.current.length>1&&L&&!ae.extent&&(ge[0][0]=ae.positionAbsolute.x-S.x+L[0][0],ge[1][0]=ae.positionAbsolute.x+(ae.width??0)-S.x2+L[1][0],ge[0][1]=ae.positionAbsolute.y-S.y+L[0][1],ge[1][1]=ae.positionAbsolute.y+(ae.height??0)-S.y2+L[1][1]);const Ne=aI(ae,P,M,ge,Q,se);return te=te||ae.position.x!==Ne.position.x||ae.position.y!==Ne.position.y,ae.position=Ne.position,ae.positionAbsolute=Ne.positionAbsolute,ae}),!te)return;I(p.current,!0,!0),d(!0);const J=s?B:ny(U);if(J&&N.current){const[ae,P]=ty({nodeId:s,dragItems:p.current,nodeInternals:M});J(N.current,ae,P)}},$=()=>{if(!b.current)return;const[C,O]=Nx(w.current,b.current);if(C!==0||O!==0){const{transform:M,panBy:B}=c.getState();y.current.x=(y.current.x??0)-C/M[2],y.current.y=(y.current.y??0)-O/M[2],B({x:C,y:O})&&ee(y.current)}T.current=requestAnimationFrame($)},R=C=>{const{nodeInternals:O,multiSelectionActive:M,nodesDraggable:B,unselectNodesAndEdges:U,onNodeDragStart:I,onSelectionDragStart:L}=c.getState();D.current=!0;const K=s?I:ny(L);(!u||!o)&&!M&&s&&(O.get(s)?.selected||U()),s&&o&&u&&Zy({id:s,store:c,nodeRef:t});const H=q(C);if(y.current=H,p.current=rM(O,B,H,s),K&&p.current){const[Q,se]=ty({nodeId:s,dragItems:p.current,nodeInternals:O});K(C.sourceEvent,Q,se)}};if(e)j.on(".drag",null);else{const C=m4().on("start",O=>{const{domNode:M,nodeDragThreshold:B}=c.getState();B===0&&R(O),F.current=!1;const U=q(O);y.current=U,b.current=M?.getBoundingClientRect()||null,w.current=ro(O.sourceEvent,b.current)}).on("drag",O=>{const M=q(O),{autoPanOnNodeDrag:B,nodeDragThreshold:U}=c.getState();if(O.sourceEvent.type==="touchmove"&&O.sourceEvent.touches.length>1&&(F.current=!0),!F.current){if(!k.current&&D.current&&B&&(k.current=!0,$()),!D.current){const I=M.xSnapped-(y?.current?.x??0),L=M.ySnapped-(y?.current?.y??0);Math.sqrt(I*I+L*L)>U&&R(O)}(y.current.x!==M.xSnapped||y.current.y!==M.ySnapped)&&p.current&&D.current&&(N.current=O.sourceEvent,w.current=ro(O.sourceEvent,b.current),ee(M))}}).on("end",O=>{if(!(!D.current||F.current)&&(d(!1),k.current=!1,D.current=!1,cancelAnimationFrame(T.current),p.current)){const{updateNodePositions:M,nodeInternals:B,onNodeDragStop:U,onSelectionDragStop:I}=c.getState(),L=s?U:ny(I);if(M(p.current,!1,!1),L){const[K,H]=ty({nodeId:s,dragItems:p.current,nodeInternals:B});L(O.sourceEvent,K,H)}}}).filter(O=>{const M=O.target;return!O.button&&(!n||!PS(M,`.${n}`,t))&&(!r||PS(M,r,t))});return j.call(C),()=>{j.on(".drag",null)}}}},[t,e,n,r,o,c,s,u,q]),f}function uI(){const t=ar();return re.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:o,getNodes:u,snapToGrid:c,snapGrid:f,onError:d,nodesDraggable:p}=t.getState(),y=u().filter(F=>F.selected&&(F.draggable||p&&typeof F.draggable>"u")),T=c?f[0]:5,b=c?f[1]:5,w=n.isShiftPressed?4:1,N=n.x*T*w,k=n.y*b*w,D=y.map(F=>{if(F.positionAbsolute){const q={x:F.positionAbsolute.x+N,y:F.positionAbsolute.y+k};c&&(q.x=f[0]*Math.round(q.x/f[0]),q.y=f[1]*Math.round(q.y/f[1]));const{positionAbsolute:j,position:ee}=aI(F,q,r,s,void 0,d);F.position=ee,F.positionAbsolute=j}return F});o(D,!0,!1)},[])}const El={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var th=t=>{const e=({id:n,type:r,data:s,xPos:o,yPos:u,xPosOrigin:c,yPosOrigin:f,selected:d,onClick:p,onMouseEnter:y,onMouseMove:T,onMouseLeave:b,onContextMenu:w,onDoubleClick:N,style:k,className:D,isDraggable:F,isSelectable:q,isConnectable:j,isFocusable:ee,selectNodesOnDrag:$,sourcePosition:R,targetPosition:C,hidden:O,resizeObserver:M,dragHandle:B,zIndex:U,isParent:I,noDragClassName:L,noPanClassName:K,initialized:H,disableKeyboardA11y:Q,ariaLabel:se,rfId:te,hasHandleBounds:S})=>{const J=ar(),ae=re.useRef(null),P=re.useRef(null),ge=re.useRef(R),Ne=re.useRef(C),Ie=re.useRef(r),je=q||F||p||y||T||b,xe=uI(),Me=eh(n,J.getState,y),He=eh(n,J.getState,T),Je=eh(n,J.getState,b),an=eh(n,J.getState,w),Jt=eh(n,J.getState,N),on=Qe=>{const{nodeDragThreshold:qe}=J.getState();if(q&&(!$||!F||qe>0)&&Zy({id:n,store:J,nodeRef:ae}),p){const cn=J.getState().nodeInternals.get(n);cn&&p(Qe,{...cn})}},Dt=Qe=>{if(!$y(Qe)&&!Q)if(Dx.includes(Qe.key)&&q){const qe=Qe.key==="Escape";Zy({id:n,store:J,unselect:qe,nodeRef:ae})}else F&&d&&Object.prototype.hasOwnProperty.call(El,Qe.key)&&(J.setState({ariaLiveMessage:`Moved selected node ${Qe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~u}`}),xe({x:El[Qe.key].x,y:El[Qe.key].y,isShiftPressed:Qe.shiftKey}))};re.useEffect(()=>()=>{P.current&&(M?.unobserve(P.current),P.current=null)},[]),re.useEffect(()=>{if(ae.current&&!O){const Qe=ae.current;(!H||!S||P.current!==Qe)&&(P.current&&M?.unobserve(P.current),M?.observe(Qe),P.current=Qe)}},[O,H,S]),re.useEffect(()=>{const Qe=Ie.current!==r,qe=ge.current!==R,cn=Ne.current!==C;ae.current&&(Qe||qe||cn)&&(Qe&&(Ie.current=r),qe&&(ge.current=R),cn&&(Ne.current=C),J.getState().updateNodeDimensions([{id:n,nodeElement:ae.current,forceUpdate:!0}]))},[n,r,R,C]);const Rn=oI({nodeRef:ae,disabled:O||!F,noDragClassName:L,handleSelector:B,nodeId:n,isSelectable:q,selectNodesOnDrag:$});return O?null:_e.createElement("div",{className:zr(["react-flow__node",`react-flow__node-${r}`,{[K]:F},D,{selected:d,selectable:q,parent:I,dragging:Rn}]),ref:ae,style:{zIndex:U,transform:`translate(${c}px,${f}px)`,pointerEvents:je?"all":"none",visibility:H?"visible":"hidden",...k},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Me,onMouseMove:He,onMouseLeave:Je,onContextMenu:an,onClick:on,onDoubleClick:Jt,onKeyDown:ee?Dt:void 0,tabIndex:ee?0:void 0,role:ee?"button":void 0,"aria-describedby":Q?void 0:`${Wx}-${te}`,"aria-label":se},_e.createElement(_L,{value:n},_e.createElement(t,{id:n,data:s,type:r,xPos:o,yPos:u,selected:d,isConnectable:j,sourcePosition:R,targetPosition:C,dragging:Rn,dragHandle:B,zIndex:U})))};return e.displayName="NodeWrapper",re.memo(e)};const aM=t=>{const e=t.getNodes().filter(n=>n.selected);return{...i_(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function oM({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=ar(),{width:s,height:o,x:u,y:c,transformString:f,userSelectionActive:d}=gn(aM,xr),p=uI(),y=re.useRef(null);if(re.useEffect(()=>{n||y.current?.focus({preventScroll:!0})},[n]),oI({nodeRef:y}),d||!s||!o)return null;const T=t?w=>{const N=r.getState().getNodes().filter(k=>k.selected);t(w,N)}:void 0,b=w=>{Object.prototype.hasOwnProperty.call(El,w.key)&&p({x:El[w.key].x,y:El[w.key].y,isShiftPressed:w.shiftKey})};return _e.createElement("div",{className:zr(["react-flow__nodesselection","react-flow__container",e]),style:{transform:f}},_e.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:T,tabIndex:n?void 0:-1,onKeyDown:n?void 0:b,style:{width:s,height:o,top:c,left:u}}))}var uM=re.memo(oM);const lM=t=>t.nodesSelectionActive,lI=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:u,deleteKeyCode:c,onMove:f,onMoveStart:d,onMoveEnd:p,selectionKeyCode:y,selectionOnDrag:T,selectionMode:b,onSelectionStart:w,onSelectionEnd:N,multiSelectionKeyCode:k,panActivationKeyCode:D,zoomActivationKeyCode:F,elementsSelectable:q,zoomOnScroll:j,zoomOnPinch:ee,panOnScroll:$,panOnScrollSpeed:R,panOnScrollMode:C,zoomOnDoubleClick:O,panOnDrag:M,defaultViewport:B,translateExtent:U,minZoom:I,maxZoom:L,preventScrolling:K,onSelectionContextMenu:H,noWheelClassName:Q,noPanClassName:se,disableKeyboardA11y:te})=>{const S=gn(lM),J=Fh(y),ae=Fh(D),P=ae||M,ge=ae||$,Ne=J||T&&P!==!0;return KL({deleteKeyCode:c,multiSelectionKeyCode:k}),_e.createElement(ZL,{onMove:f,onMoveStart:d,onMoveEnd:p,onPaneContextMenu:o,elementsSelectable:q,zoomOnScroll:j,zoomOnPinch:ee,panOnScroll:ge,panOnScrollSpeed:R,panOnScrollMode:C,zoomOnDoubleClick:O,panOnDrag:!J&&P,defaultViewport:B,translateExtent:U,minZoom:I,maxZoom:L,zoomActivationKeyCode:F,preventScrolling:K,noWheelClassName:Q,noPanClassName:se},_e.createElement(iI,{onSelectionStart:w,onSelectionEnd:N,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:u,panOnDrag:P,isSelecting:!!Ne,selectionMode:b},t,S&&_e.createElement(uM,{onSelectionContextMenu:H,noPanClassName:se,disableKeyboardA11y:te})))};lI.displayName="FlowRenderer";var cM=re.memo(lI);function hM(t){return gn(re.useCallback(n=>t?Ux(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function fM(t){const e={input:th(t.input||$x),default:th(t.default||Wy),output:th(t.output||Xx),group:th(t.group||a_)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,o)=>(s[o]=th(t[o]||Wy),s),n);return{...e,...r}}const dM=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},mM=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),cI=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:o,onError:u}=gn(mM,xr),c=hM(t.onlyRenderVisibleElements),f=re.useRef(),d=re.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const p=new ResizeObserver(y=>{const T=y.map(b=>({id:b.target.getAttribute("data-id"),nodeElement:b.target,forceUpdate:!0}));o(T)});return f.current=p,p},[]);return re.useEffect(()=>()=>{f?.current?.disconnect()},[]),_e.createElement("div",{className:"react-flow__nodes",style:o_},c.map(p=>{let y=p.type||"default";t.nodeTypes[y]||(u?.("003",fa.error003(y)),y="default");const T=t.nodeTypes[y]||t.nodeTypes.default,b=!!(p.draggable||e&&typeof p.draggable>"u"),w=!!(p.selectable||s&&typeof p.selectable>"u"),N=!!(p.connectable||n&&typeof p.connectable>"u"),k=!!(p.focusable||r&&typeof p.focusable>"u"),D=t.nodeExtent?ZE(p.positionAbsolute,t.nodeExtent):p.positionAbsolute,F=D?.x??0,q=D?.y??0,j=dM({x:F,y:q,width:p.width??0,height:p.height??0,origin:t.nodeOrigin});return _e.createElement(T,{key:p.id,id:p.id,className:p.className,style:p.style,type:y,data:p.data,sourcePosition:p.sourcePosition||ze.Bottom,targetPosition:p.targetPosition||ze.Top,hidden:p.hidden,xPos:F,yPos:q,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!p.selected,isDraggable:b,isSelectable:w,isConnectable:N,isFocusable:k,resizeObserver:d,dragHandle:p.dragHandle,zIndex:p[vn]?.z??0,isParent:!!p[vn]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!p.width&&!!p.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:p.ariaLabel,hasHandleBounds:!!p[vn]?.handleBounds})}))};cI.displayName="NodeRenderer";var pM=re.memo(cI);const gM=(t,e,n)=>n===ze.Left?t-e:n===ze.Right?t+e:t,yM=(t,e,n)=>n===ze.Top?t-e:n===ze.Bottom?t+e:t,US="react-flow__edgeupdater",VS=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:o,onMouseOut:u,type:c})=>_e.createElement("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:u,className:zr([US,`${US}-${c}`]),cx:gM(e,r,t),cy:yM(n,r,t),r,stroke:"transparent",fill:"transparent"}),EM=()=>!0;var rl=t=>{const e=({id:n,className:r,type:s,data:o,onClick:u,onEdgeDoubleClick:c,selected:f,animated:d,label:p,labelStyle:y,labelShowBg:T,labelBgStyle:b,labelBgPadding:w,labelBgBorderRadius:N,style:k,source:D,target:F,sourceX:q,sourceY:j,targetX:ee,targetY:$,sourcePosition:R,targetPosition:C,elementsSelectable:O,hidden:M,sourceHandleId:B,targetHandleId:U,onContextMenu:I,onMouseEnter:L,onMouseMove:K,onMouseLeave:H,reconnectRadius:Q,onReconnect:se,onReconnectStart:te,onReconnectEnd:S,markerEnd:J,markerStart:ae,rfId:P,ariaLabel:ge,isFocusable:Ne,isReconnectable:Ie,pathOptions:je,interactionWidth:xe,disableKeyboardA11y:Me})=>{const He=re.useRef(null),[Je,an]=re.useState(!1),[Jt,on]=re.useState(!1),Dt=ar(),Rn=re.useMemo(()=>`url('#${Xy(ae,P)}')`,[ae,P]),Qe=re.useMemo(()=>`url('#${Xy(J,P)}')`,[J,P]);if(M)return null;const qe=bt=>{const{edges:Ht,addSelectedEdges:Ft,unselectNodesAndEdges:zt,multiSelectionActive:vt}=Dt.getState(),lt=Ht.find(Wt=>Wt.id===n);lt&&(O&&(Dt.setState({nodesSelectionActive:!1}),lt.selected&&vt?(zt({nodes:[],edges:[lt]}),He.current?.blur()):Ft([n])),u&&u(bt,lt))},cn=Jc(n,Dt.getState,c),Un=Jc(n,Dt.getState,I),Vn=Jc(n,Dt.getState,L),Kn=Jc(n,Dt.getState,K),Hn=Jc(n,Dt.getState,H),An=(bt,Ht)=>{if(bt.button!==0)return;const{edges:Ft,isValidConnection:zt}=Dt.getState(),vt=Ht?F:D,lt=(Ht?U:B)||null,Wt=Ht?"target":"source",Gt=zt||EM,Yi=Ht,_r=Ft.find(Tr=>Tr.id===n);on(!0),te?.(bt,_r,Wt);const Fn=Tr=>{on(!1),S?.(Tr,_r,Wt)};jx({event:bt,handleId:lt,nodeId:vt,onConnect:Tr=>se?.(_r,Tr),isTarget:Yi,getState:Dt.getState,setState:Dt.setState,isValidConnection:Gt,edgeUpdaterType:Wt,onReconnectEnd:Fn})},or=bt=>An(bt,!0),fe=bt=>An(bt,!1),be=()=>an(!0),Ve=()=>an(!1),Ye=!O&&!u,ut=bt=>{if(!Me&&Dx.includes(bt.key)&&O){const{unselectNodesAndEdges:Ht,addSelectedEdges:Ft,edges:zt}=Dt.getState();bt.key==="Escape"?(He.current?.blur(),Ht({edges:[zt.find(lt=>lt.id===n)]})):Ft([n])}};return _e.createElement("g",{className:zr(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:f,animated:d,inactive:Ye,updating:Je}]),onClick:qe,onDoubleClick:cn,onContextMenu:Un,onMouseEnter:Vn,onMouseMove:Kn,onMouseLeave:Hn,onKeyDown:Ne?ut:void 0,tabIndex:Ne?0:void 0,role:Ne?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ge===null?void 0:ge||`Edge from ${D} to ${F}`,"aria-describedby":Ne?`${Zx}-${P}`:void 0,ref:He},!Jt&&_e.createElement(t,{id:n,source:D,target:F,selected:f,animated:d,label:p,labelStyle:y,labelShowBg:T,labelBgStyle:b,labelBgPadding:w,labelBgBorderRadius:N,data:o,style:k,sourceX:q,sourceY:j,targetX:ee,targetY:$,sourcePosition:R,targetPosition:C,sourceHandleId:B,targetHandleId:U,markerStart:Rn,markerEnd:Qe,pathOptions:je,interactionWidth:xe}),Ie&&_e.createElement(_e.Fragment,null,(Ie==="source"||Ie===!0)&&_e.createElement(VS,{position:R,centerX:q,centerY:j,radius:Q,onMouseDown:or,onMouseEnter:be,onMouseOut:Ve,type:"source"}),(Ie==="target"||Ie===!0)&&_e.createElement(VS,{position:C,centerX:ee,centerY:$,radius:Q,onMouseDown:fe,onMouseEnter:be,onMouseOut:Ve,type:"target"})))};return e.displayName="EdgeWrapper",re.memo(e)};function _M(t){const e={default:rl(t.default||km),straight:rl(t.bezier||n_),step:rl(t.step||t_),smoothstep:rl(t.step||d0),simplebezier:rl(t.simplebezier||e_)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,o)=>(s[o]=rl(t[o]||km),s),n);return{...e,...r}}function HS(t,e,n=null){const r=(n?.x||0)+e.x,s=(n?.y||0)+e.y,o=n?.width||e.width,u=n?.height||e.height;switch(t){case ze.Top:return{x:r+o/2,y:s};case ze.Right:return{x:r+o,y:s+u/2};case ze.Bottom:return{x:r+o/2,y:s+u};case ze.Left:return{x:r,y:s+u/2}}}function FS(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const TM=(t,e,n,r,s,o)=>{const u=HS(n,t,e),c=HS(o,r,s);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y}};function bM({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:o,width:u,height:c,transform:f}){const d={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+o)};d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const p=JE({x:(0-f[0])/f[2],y:(0-f[1])/f[2],width:u/f[2],height:c/f[2]}),y=Math.max(0,Math.min(p.x2,d.x2)-Math.max(p.x,d.x)),T=Math.max(0,Math.min(p.y2,d.y2)-Math.max(p.y,d.y));return Math.ceil(y*T)>0}function zS(t){const e=t?.[vn]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const vM=[{level:0,isMaxLevel:!0,edges:[]}];function SM(t,e,n=!1){let r=-1;const s=t.reduce((u,c)=>{const f=zi(c.zIndex);let d=f?c.zIndex:0;if(n){const p=e.get(c.target),y=e.get(c.source),T=c.selected||p?.selected||y?.selected,b=Math.max(y?.[vn]?.z||0,p?.[vn]?.z||0,1e3);d=(f?c.zIndex:0)+(T?b:0)}return u[d]?u[d].push(c):u[d]=[c],r=d>r?d:r,u},{}),o=Object.entries(s).map(([u,c])=>{const f=+u;return{edges:c,level:f,isMaxLevel:f===r}});return o.length===0?vM:o}function AM(t,e,n){const r=gn(re.useCallback(s=>t?s.edges.filter(o=>{const u=e.get(o.source),c=e.get(o.target);return u?.width&&u?.height&&c?.width&&c?.height&&bM({sourcePos:u.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:u.width,sourceHeight:u.height,targetWidth:c.width,targetHeight:c.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return SM(r,e,n)}const wM=({color:t="none",strokeWidth:e=1})=>_e.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),xM=({color:t="none",strokeWidth:e=1})=>_e.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),jS={[Hh.Arrow]:wM,[Hh.ArrowClosed]:xM};function IM(t){const e=ar();return re.useMemo(()=>Object.prototype.hasOwnProperty.call(jS,t)?jS[t]:(e.getState().onError?.("009",fa.error009(t)),null),[t])}const CM=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:u,orient:c="auto-start-reverse"})=>{const f=IM(e);return f?_e.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:c,refX:"0",refY:"0"},_e.createElement(f,{color:n,strokeWidth:u})):null},NM=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,o)=>([o.markerStart,o.markerEnd].forEach(u=>{if(u&&typeof u=="object"){const c=Xy(u,e);r.includes(c)||(s.push({id:c,color:u.color||t,...u}),r.push(c))}}),s),[]).sort((s,o)=>s.id.localeCompare(o.id))},hI=({defaultColor:t,rfId:e})=>{const n=gn(re.useCallback(NM({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((o,u)=>o.id!==s[u].id)));return _e.createElement("defs",null,n.map(r=>_e.createElement(CM,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};hI.displayName="MarkerDefinitions";var RM=re.memo(hI);const DM=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),fI=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:o,onEdgeContextMenu:u,onEdgeMouseEnter:c,onEdgeMouseMove:f,onEdgeMouseLeave:d,onEdgeClick:p,onEdgeDoubleClick:y,onReconnect:T,onReconnectStart:b,onReconnectEnd:w,reconnectRadius:N,children:k,disableKeyboardA11y:D})=>{const{edgesFocusable:F,edgesUpdatable:q,elementsSelectable:j,width:ee,height:$,connectionMode:R,nodeInternals:C,onError:O}=gn(DM,xr),M=AM(e,C,n);return ee?_e.createElement(_e.Fragment,null,M.map(({level:B,edges:U,isMaxLevel:I})=>_e.createElement("svg",{key:B,style:{zIndex:B},width:ee,height:$,className:"react-flow__edges react-flow__container"},I&&_e.createElement(RM,{defaultColor:t,rfId:r}),_e.createElement("g",null,U.map(L=>{const[K,H,Q]=zS(C.get(L.source)),[se,te,S]=zS(C.get(L.target));if(!Q||!S)return null;let J=L.type||"default";s[J]||(O?.("011",fa.error011(J)),J="default");const ae=s[J]||s.default,P=R===lo.Strict?te.target:(te.target??[]).concat(te.source??[]),ge=FS(H.source,L.sourceHandle),Ne=FS(P,L.targetHandle),Ie=ge?.position||ze.Bottom,je=Ne?.position||ze.Top,xe=!!(L.focusable||F&&typeof L.focusable>"u"),Me=L.reconnectable||L.updatable,He=typeof T<"u"&&(Me||q&&typeof Me>"u");if(!ge||!Ne)return O?.("008",fa.error008(ge,L)),null;const{sourceX:Je,sourceY:an,targetX:Jt,targetY:on}=TM(K,ge,Ie,se,Ne,je);return _e.createElement(ae,{key:L.id,id:L.id,className:zr([L.className,o]),type:J,data:L.data,selected:!!L.selected,animated:!!L.animated,hidden:!!L.hidden,label:L.label,labelStyle:L.labelStyle,labelShowBg:L.labelShowBg,labelBgStyle:L.labelBgStyle,labelBgPadding:L.labelBgPadding,labelBgBorderRadius:L.labelBgBorderRadius,style:L.style,source:L.source,target:L.target,sourceHandleId:L.sourceHandle,targetHandleId:L.targetHandle,markerEnd:L.markerEnd,markerStart:L.markerStart,sourceX:Je,sourceY:an,targetX:Jt,targetY:on,sourcePosition:Ie,targetPosition:je,elementsSelectable:j,onContextMenu:u,onMouseEnter:c,onMouseMove:f,onMouseLeave:d,onClick:p,onEdgeDoubleClick:y,onReconnect:T,onReconnectStart:b,onReconnectEnd:w,reconnectRadius:N,rfId:r,ariaLabel:L.ariaLabel,isFocusable:xe,isReconnectable:He,pathOptions:"pathOptions"in L?L.pathOptions:void 0,interactionWidth:L.interactionWidth,disableKeyboardA11y:D})})))),k):null};fI.displayName="EdgeRenderer";var OM=re.memo(fI);const kM=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function LM({children:t}){const e=gn(kM);return _e.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function MM(t){const e=af(),n=re.useRef(!1);re.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const PM={[ze.Left]:ze.Right,[ze.Right]:ze.Left,[ze.Top]:ze.Bottom,[ze.Bottom]:ze.Top},dI=({nodeId:t,handleType:e,style:n,type:r=Ka.Bezier,CustomComponent:s,connectionStatus:o})=>{const{fromNode:u,handleId:c,toX:f,toY:d,connectionMode:p}=gn(re.useCallback($=>({fromNode:$.nodeInternals.get(t),handleId:$.connectionHandleId,toX:($.connectionPosition.x-$.transform[0])/$.transform[2],toY:($.connectionPosition.y-$.transform[1])/$.transform[2],connectionMode:$.connectionMode}),[t]),xr),y=u?.[vn]?.handleBounds;let T=y?.[e];if(p===lo.Loose&&(T=T||y?.[e==="source"?"target":"source"]),!u||!T)return null;const b=c?T.find($=>$.id===c):T[0],w=b?b.x+b.width/2:(u.width??0)/2,N=b?b.y+b.height/2:u.height??0,k=(u.positionAbsolute?.x??0)+w,D=(u.positionAbsolute?.y??0)+N,F=b?.position,q=F?PM[F]:null;if(!F||!q)return null;if(s)return _e.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:u,fromHandle:b,fromX:k,fromY:D,toX:f,toY:d,fromPosition:F,toPosition:q,connectionStatus:o});let j="";const ee={sourceX:k,sourceY:D,sourcePosition:F,targetX:f,targetY:d,targetPosition:q};return r===Ka.Bezier?[j]=Px(ee):r===Ka.Step?[j]=Ky({...ee,borderRadius:0}):r===Ka.SmoothStep?[j]=Ky(ee):r===Ka.SimpleBezier?[j]=Mx(ee):j=`M${k},${D} ${f},${d}`,_e.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:n})};dI.displayName="ConnectionLine";const BM=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function UM({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:o,nodesConnectable:u,width:c,height:f,connectionStatus:d}=gn(BM,xr);return!(s&&o&&c&&u)?null:_e.createElement("svg",{style:t,width:c,height:f,className:"react-flow__edges react-flow__connectionline react-flow__container"},_e.createElement("g",{className:zr(["react-flow__connection",d])},_e.createElement(dI,{nodeId:s,handleType:o,style:e,type:n,CustomComponent:r,connectionStatus:d})))}function qS(t,e){return re.useRef(null),ar(),re.useMemo(()=>e(t),[t])}const mI=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:o,onNodeClick:u,onEdgeClick:c,onNodeDoubleClick:f,onEdgeDoubleClick:d,onNodeMouseEnter:p,onNodeMouseMove:y,onNodeMouseLeave:T,onNodeContextMenu:b,onSelectionContextMenu:w,onSelectionStart:N,onSelectionEnd:k,connectionLineType:D,connectionLineStyle:F,connectionLineComponent:q,connectionLineContainerStyle:j,selectionKeyCode:ee,selectionOnDrag:$,selectionMode:R,multiSelectionKeyCode:C,panActivationKeyCode:O,zoomActivationKeyCode:M,deleteKeyCode:B,onlyRenderVisibleElements:U,elementsSelectable:I,selectNodesOnDrag:L,defaultViewport:K,translateExtent:H,minZoom:Q,maxZoom:se,preventScrolling:te,defaultMarkerColor:S,zoomOnScroll:J,zoomOnPinch:ae,panOnScroll:P,panOnScrollSpeed:ge,panOnScrollMode:Ne,zoomOnDoubleClick:Ie,panOnDrag:je,onPaneClick:xe,onPaneMouseEnter:Me,onPaneMouseMove:He,onPaneMouseLeave:Je,onPaneScroll:an,onPaneContextMenu:Jt,onEdgeContextMenu:on,onEdgeMouseEnter:Dt,onEdgeMouseMove:Rn,onEdgeMouseLeave:Qe,onReconnect:qe,onReconnectStart:cn,onReconnectEnd:Un,reconnectRadius:Vn,noDragClassName:Kn,noWheelClassName:Hn,noPanClassName:An,elevateEdgesOnSelect:or,disableKeyboardA11y:fe,nodeOrigin:be,nodeExtent:Ve,rfId:Ye})=>{const ut=qS(t,fM),bt=qS(e,_M);return MM(o),_e.createElement(cM,{onPaneClick:xe,onPaneMouseEnter:Me,onPaneMouseMove:He,onPaneMouseLeave:Je,onPaneContextMenu:Jt,onPaneScroll:an,deleteKeyCode:B,selectionKeyCode:ee,selectionOnDrag:$,selectionMode:R,onSelectionStart:N,onSelectionEnd:k,multiSelectionKeyCode:C,panActivationKeyCode:O,zoomActivationKeyCode:M,elementsSelectable:I,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:J,zoomOnPinch:ae,zoomOnDoubleClick:Ie,panOnScroll:P,panOnScrollSpeed:ge,panOnScrollMode:Ne,panOnDrag:je,defaultViewport:K,translateExtent:H,minZoom:Q,maxZoom:se,onSelectionContextMenu:w,preventScrolling:te,noDragClassName:Kn,noWheelClassName:Hn,noPanClassName:An,disableKeyboardA11y:fe},_e.createElement(LM,null,_e.createElement(OM,{edgeTypes:bt,onEdgeClick:c,onEdgeDoubleClick:d,onlyRenderVisibleElements:U,onEdgeContextMenu:on,onEdgeMouseEnter:Dt,onEdgeMouseMove:Rn,onEdgeMouseLeave:Qe,onReconnect:qe,onReconnectStart:cn,onReconnectEnd:Un,reconnectRadius:Vn,defaultMarkerColor:S,noPanClassName:An,elevateEdgesOnSelect:!!or,disableKeyboardA11y:fe,rfId:Ye},_e.createElement(UM,{style:F,type:D,component:q,containerStyle:j})),_e.createElement("div",{className:"react-flow__edgelabel-renderer"}),_e.createElement(pM,{nodeTypes:ut,onNodeClick:u,onNodeDoubleClick:f,onNodeMouseEnter:p,onNodeMouseMove:y,onNodeMouseLeave:T,onNodeContextMenu:b,selectNodesOnDrag:L,onlyRenderVisibleElements:U,noPanClassName:An,noDragClassName:Kn,disableKeyboardA11y:fe,nodeOrigin:be,nodeExtent:Ve,rfId:Ye})))};mI.displayName="GraphView";var VM=re.memo(mI);const Jy=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Fa={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Jy,nodeExtent:Jy,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:lo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:dL,isValidConnection:void 0},HM=()=>x6((t,e)=>({...Fa,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:o}=e();t({nodeInternals:Jg(n,r,s,o)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",o=typeof r<"u",u=s?Jg(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:u,edges:o?r:[],hasDefaultNodes:s,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:o,fitViewOnInitDone:u,fitViewOnInitOptions:c,domNode:f,nodeOrigin:d}=e(),p=f?.querySelector(".react-flow__viewport");if(!p)return;const y=window.getComputedStyle(p),{m22:T}=new window.DOMMatrixReadOnly(y.transform),b=n.reduce((N,k)=>{const D=s.get(k.id);if(D?.hidden)s.set(D.id,{...D,[vn]:{...D[vn],handleBounds:void 0}});else if(D){const F=WE(k.nodeElement);!!(F.width&&F.height&&(D.width!==F.width||D.height!==F.height||k.forceUpdate))&&(s.set(D.id,{...D,[vn]:{...D[vn],handleBounds:{source:BS(".source",k.nodeElement,T,d),target:BS(".target",k.nodeElement,T,d)}},...F}),N.push({id:D.id,type:"dimensions",dimensions:F}))}return N},[]);eI(s,d);const w=u||o&&!u&&tI(e,{initial:!0,...c});t({nodeInternals:new Map(s),fitViewOnInitDone:w}),b?.length>0&&r?.(b)},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:o}=e(),u=n.map(c=>{const f={id:c.id,type:"position",dragging:s};return r&&(f.positionAbsolute=c.positionAbsolute,f.position=c.position),f});o(u)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:o,nodeOrigin:u,getNodes:c,elevateNodesOnSelect:f}=e();if(n?.length){if(o){const d=rI(n,c()),p=Jg(d,s,u,f);t({nodeInternals:p})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let u,c=null;r?u=n.map(f=>$a(f,!0)):(u=fl(o(),n),c=fl(s,[])),Gd({changedNodes:u,changedEdges:c,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let u,c=null;r?u=n.map(f=>$a(f,!0)):(u=fl(s,n),c=fl(o(),[])),Gd({changedNodes:c,changedEdges:u,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:o}=e(),u=n||o(),c=r||s,f=u.map(p=>(p.selected=!1,$a(p.id,!1))),d=c.map(p=>$a(p.id,!1));Gd({changedNodes:f,changedEdges:d,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r?.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r?.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),o=r().filter(c=>c.selected).map(c=>$a(c.id,!1)),u=n.filter(c=>c.selected).map(c=>$a(c.id,!1));Gd({changedNodes:o,changedEdges:u,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=ZE(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:o,d3Zoom:u,d3Selection:c,translateExtent:f}=e();if(!u||!c||!n.x&&!n.y)return!1;const d=no.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),p=[[0,0],[s,o]],y=u?.constrain()(d,p,f);return u.transform(c,y),r[0]!==y.x||r[1]!==y.y||r[2]!==y.k},cancelConnection:()=>t({connectionNodeId:Fa.connectionNodeId,connectionHandleId:Fa.connectionHandleId,connectionHandleType:Fa.connectionHandleType,connectionStatus:Fa.connectionStatus,connectionStartHandle:Fa.connectionStartHandle,connectionEndHandle:Fa.connectionEndHandle}),reset:()=>t({...Fa})}),Object.is),pI=({children:t})=>{const e=re.useRef(null);return e.current||(e.current=HM()),_e.createElement(sL,{value:e.current},t)};pI.displayName="ReactFlowProvider";const gI=({children:t})=>re.useContext(f0)?_e.createElement(_e.Fragment,null,t):_e.createElement(pI,null,t);gI.displayName="ReactFlowWrapper";const FM={input:$x,default:Wy,output:Xx,group:a_},zM={default:km,straight:n_,step:t_,smoothstep:d0,simplebezier:e_},jM=[0,0],qM=[15,15],YM={x:0,y:0,zoom:1},GM={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},yI=re.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:o=FM,edgeTypes:u=zM,onNodeClick:c,onEdgeClick:f,onInit:d,onMove:p,onMoveStart:y,onMoveEnd:T,onConnect:b,onConnectStart:w,onConnectEnd:N,onClickConnectStart:k,onClickConnectEnd:D,onNodeMouseEnter:F,onNodeMouseMove:q,onNodeMouseLeave:j,onNodeContextMenu:ee,onNodeDoubleClick:$,onNodeDragStart:R,onNodeDrag:C,onNodeDragStop:O,onNodesDelete:M,onEdgesDelete:B,onSelectionChange:U,onSelectionDragStart:I,onSelectionDrag:L,onSelectionDragStop:K,onSelectionContextMenu:H,onSelectionStart:Q,onSelectionEnd:se,connectionMode:te=lo.Strict,connectionLineType:S=Ka.Bezier,connectionLineStyle:J,connectionLineComponent:ae,connectionLineContainerStyle:P,deleteKeyCode:ge="Backspace",selectionKeyCode:Ne="Shift",selectionOnDrag:Ie=!1,selectionMode:je=Vh.Full,panActivationKeyCode:xe="Space",multiSelectionKeyCode:Me=Om()?"Meta":"Control",zoomActivationKeyCode:He=Om()?"Meta":"Control",snapToGrid:Je=!1,snapGrid:an=qM,onlyRenderVisibleElements:Jt=!1,selectNodesOnDrag:on=!0,nodesDraggable:Dt,nodesConnectable:Rn,nodesFocusable:Qe,nodeOrigin:qe=jM,edgesFocusable:cn,edgesUpdatable:Un,elementsSelectable:Vn,defaultViewport:Kn=YM,minZoom:Hn=.5,maxZoom:An=2,translateExtent:or=Jy,preventScrolling:fe=!0,nodeExtent:be,defaultMarkerColor:Ve="#b1b1b7",zoomOnScroll:Ye=!0,zoomOnPinch:ut=!0,panOnScroll:bt=!1,panOnScrollSpeed:Ht=.5,panOnScrollMode:Ft=Wo.Free,zoomOnDoubleClick:zt=!0,panOnDrag:vt=!0,onPaneClick:lt,onPaneMouseEnter:Wt,onPaneMouseMove:Gt,onPaneMouseLeave:Yi,onPaneScroll:_r,onPaneContextMenu:Fn,children:Rr,onEdgeContextMenu:Tr,onEdgeDoubleClick:jr,onEdgeMouseEnter:Us,onEdgeMouseMove:ri,onEdgeMouseLeave:Gi,onEdgeUpdate:Dr,onEdgeUpdateStart:ii,onEdgeUpdateEnd:$t,onReconnect:Lt,onReconnectStart:hn,onReconnectEnd:En,reconnectRadius:os=10,edgeUpdaterRadius:So=10,onNodesChange:Or,onEdgesChange:us,noDragClassName:Si="nodrag",noWheelClassName:si="nowheel",noPanClassName:kr="nopan",fitView:Xn=!1,fitViewOptions:Lr,connectOnClick:zn=!0,attributionPosition:ne,proOptions:pe,defaultEdgeOptions:De,elevateNodesOnSelect:Pe=!0,elevateEdgesOnSelect:pt=!1,disableKeyboardA11y:rt=!1,autoPanOnConnect:jt=!0,autoPanOnNodeDrag:Mt=!0,connectionRadius:Qn=20,isValidConnection:Pt,onError:Nt,style:Bt,id:Dn,nodeDragThreshold:_n,...wn},Mr)=>{const Pr=Dn||"1";return _e.createElement("div",{...wn,style:{...Bt,...GM},ref:Mr,className:zr(["react-flow",s]),"data-testid":"rf__wrapper",id:Dn},_e.createElement(gI,null,_e.createElement(VM,{onInit:d,onMove:p,onMoveStart:y,onMoveEnd:T,onNodeClick:c,onEdgeClick:f,onNodeMouseEnter:F,onNodeMouseMove:q,onNodeMouseLeave:j,onNodeContextMenu:ee,onNodeDoubleClick:$,nodeTypes:o,edgeTypes:u,connectionLineType:S,connectionLineStyle:J,connectionLineComponent:ae,connectionLineContainerStyle:P,selectionKeyCode:Ne,selectionOnDrag:Ie,selectionMode:je,deleteKeyCode:ge,multiSelectionKeyCode:Me,panActivationKeyCode:xe,zoomActivationKeyCode:He,onlyRenderVisibleElements:Jt,selectNodesOnDrag:on,defaultViewport:Kn,translateExtent:or,minZoom:Hn,maxZoom:An,preventScrolling:fe,zoomOnScroll:Ye,zoomOnPinch:ut,zoomOnDoubleClick:zt,panOnScroll:bt,panOnScrollSpeed:Ht,panOnScrollMode:Ft,panOnDrag:vt,onPaneClick:lt,onPaneMouseEnter:Wt,onPaneMouseMove:Gt,onPaneMouseLeave:Yi,onPaneScroll:_r,onPaneContextMenu:Fn,onSelectionContextMenu:H,onSelectionStart:Q,onSelectionEnd:se,onEdgeContextMenu:Tr,onEdgeDoubleClick:jr,onEdgeMouseEnter:Us,onEdgeMouseMove:ri,onEdgeMouseLeave:Gi,onReconnect:Lt??Dr,onReconnectStart:hn??ii,onReconnectEnd:En??$t,reconnectRadius:os??So,defaultMarkerColor:Ve,noDragClassName:Si,noWheelClassName:si,noPanClassName:kr,elevateEdgesOnSelect:pt,rfId:Pr,disableKeyboardA11y:rt,nodeOrigin:qe,nodeExtent:be}),_e.createElement(PL,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:b,onConnectStart:w,onConnectEnd:N,onClickConnectStart:k,onClickConnectEnd:D,nodesDraggable:Dt,nodesConnectable:Rn,nodesFocusable:Qe,edgesFocusable:cn,edgesUpdatable:Un,elementsSelectable:Vn,elevateNodesOnSelect:Pe,minZoom:Hn,maxZoom:An,nodeExtent:be,onNodesChange:Or,onEdgesChange:us,snapToGrid:Je,snapGrid:an,connectionMode:te,translateExtent:or,connectOnClick:zn,defaultEdgeOptions:De,fitView:Xn,fitViewOptions:Lr,onNodesDelete:M,onEdgesDelete:B,onNodeDragStart:R,onNodeDrag:C,onNodeDragStop:O,onSelectionDrag:L,onSelectionDragStart:I,onSelectionDragStop:K,noPanClassName:kr,nodeOrigin:qe,rfId:Pr,autoPanOnConnect:jt,autoPanOnNodeDrag:Mt,onError:Nt,connectionRadius:Qn,isValidConnection:Pt,nodeDragThreshold:_n}),_e.createElement(LL,{onSelectionChange:U}),Rr,_e.createElement(oL,{proOptions:pe,position:ne}),_e.createElement(FL,{rfId:Pr,disableKeyboardA11y:rt})))});yI.displayName="ReactFlow";function EI(t){return e=>{const[n,r]=re.useState(e),s=re.useCallback(o=>r(u=>t(o,u)),[]);return[n,r,s]}}const $M=EI(rI),KM=EI(tM);function XM(){return _e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},_e.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function QM(){return _e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},_e.createElement("path",{d:"M0 0h32v4.2H0z"}))}function WM(){return _e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},_e.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function ZM(){return _e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},_e.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function JM(){return _e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},_e.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const hh=({children:t,className:e,...n})=>_e.createElement("button",{type:"button",className:zr(["react-flow__controls-button",e]),...n},t);hh.displayName="ControlButton";const eP=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),_I=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:u,onFitView:c,onInteractiveChange:f,className:d,children:p,position:y="bottom-left"})=>{const T=ar(),[b,w]=re.useState(!1),{isInteractive:N,minZoomReached:k,maxZoomReached:D}=gn(eP,xr),{zoomIn:F,zoomOut:q,fitView:j}=af();if(re.useEffect(()=>{w(!0)},[]),!b)return null;const ee=()=>{F(),o?.()},$=()=>{q(),u?.()},R=()=>{j(s),c?.()},C=()=>{T.setState({nodesDraggable:!N,nodesConnectable:!N,elementsSelectable:!N}),f?.(!N)};return _e.createElement(Cx,{className:zr(["react-flow__controls",d]),position:y,style:t,"data-testid":"rf__controls"},e&&_e.createElement(_e.Fragment,null,_e.createElement(hh,{onClick:ee,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:D},_e.createElement(XM,null)),_e.createElement(hh,{onClick:$,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:k},_e.createElement(QM,null))),n&&_e.createElement(hh,{className:"react-flow__controls-fitview",onClick:R,title:"fit view","aria-label":"fit view"},_e.createElement(WM,null)),r&&_e.createElement(hh,{className:"react-flow__controls-interactive",onClick:C,title:"toggle interactivity","aria-label":"toggle interactivity"},N?_e.createElement(JM,null):_e.createElement(ZM,null)),p)};_I.displayName="Controls";var tP=re.memo(_I),ji;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ji||(ji={}));function nP({color:t,dimensions:e,lineWidth:n}){return _e.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function rP({color:t,radius:e}){return _e.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const iP={[ji.Dots]:"#91919a",[ji.Lines]:"#eee",[ji.Cross]:"#e2e2e2"},sP={[ji.Dots]:1,[ji.Lines]:1,[ji.Cross]:6},aP=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function TI({id:t,variant:e=ji.Dots,gap:n=20,size:r,lineWidth:s=1,offset:o=2,color:u,style:c,className:f}){const d=re.useRef(null),{transform:p,patternId:y}=gn(aP,xr),T=u||iP[e],b=r||sP[e],w=e===ji.Dots,N=e===ji.Cross,k=Array.isArray(n)?n:[n,n],D=[k[0]*p[2]||1,k[1]*p[2]||1],F=b*p[2],q=N?[F,F]:D,j=w?[F/o,F/o]:[q[0]/o,q[1]/o];return _e.createElement("svg",{className:zr(["react-flow__background",f]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},_e.createElement("pattern",{id:y+t,x:p[0]%D[0],y:p[1]%D[1],width:D[0],height:D[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},w?_e.createElement(rP,{color:T,radius:F/o}):_e.createElement(nP,{dimensions:q,color:T,lineWidth:s})),_e.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${y+t})`}))}TI.displayName="Background";var oP=re.memo(TI);function Eh(){return Eh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Eh.apply(null,arguments)}var Ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function of(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var YS,GS={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/var ry,$S,KS,uP=(YS||(YS=1,ry=GS,function(){var t={}.hasOwnProperty;function e(){for(var n=[],r=0;r<arguments.length;r++){var s=arguments[r];if(s){var o=typeof s;if(o==="string"||o==="number")n.push(s);else if(Array.isArray(s)){if(s.length){var u=e.apply(null,s);u&&n.push(u)}}else if(o==="object")if(s.toString===Object.prototype.toString)for(var c in s)t.call(s,c)&&s[c]&&n.push(c);else n.push(s.toString())}}return n.join(" ")}ry.exports?(e.default=e,ry.exports=e):window.classNames=e}()),GS.exports),eE=of(uP),XS,Zi=of(function(){if(KS)return $S;KS=1;var t=/^\s+|\s+$/g,e=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,r=/^0o[0-7]+$/i,s=parseInt,o=Object.prototype.toString;function u(f){var d=typeof f;return!!f&&(d=="object"||d=="function")}function c(f){if(typeof f=="number")return f;if(function(y){return typeof y=="symbol"||function(T){return!!T&&typeof T=="object"}(y)&&o.call(y)=="[object Symbol]"}(f))return NaN;if(u(f)){var d=typeof f.valueOf=="function"?f.valueOf():f;f=u(d)?d+"":d}if(typeof f!="string")return f===0?f:+f;f=f.replace(t,"");var p=n.test(f);return p||r.test(f)?s(f.slice(2),p?2:8):e.test(f)?NaN:+f}return $S=function(f,d,p){return p===void 0&&(p=d,d=void 0),p!==void 0&&(p=(p=c(p))==p?p:0),d!==void 0&&(d=(d=c(d))==d?d:0),function(y,T,b){return y==y&&(b!==void 0&&(y=y<=b?y:b),T!==void 0&&(y=y>=T?y:T)),y}(c(f),d,p)}}()),iy={exports:{}},lP=(XS||(XS=1,function(t,e){var n="__lodash_hash_undefined__",r=9007199254740991,s="[object Arguments]",o="[object Array]",u="[object Boolean]",c="[object Date]",f="[object Error]",d="[object Function]",p="[object Map]",y="[object Number]",T="[object Object]",b="[object Promise]",w="[object RegExp]",N="[object Set]",k="[object String]",D="[object Symbol]",F="[object WeakMap]",q="[object ArrayBuffer]",j="[object DataView]",ee=/^\[object .+?Constructor\]$/,$=/^(?:0|[1-9]\d*)$/,R={};R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R[s]=R[o]=R[q]=R[u]=R[j]=R[c]=R[f]=R[d]=R[p]=R[y]=R[T]=R[w]=R[N]=R[k]=R[F]=!1;var C=typeof Ja=="object"&&Ja&&Ja.Object===Object&&Ja,O=typeof self=="object"&&self&&self.Object===Object&&self,M=C||O||Function("return this")(),B=e&&!e.nodeType&&e,U=B&&t&&!t.nodeType&&t,I=U&&U.exports===B,L=I&&C.process,K=function(){try{return L&&L.binding&&L.binding("util")}catch{}}(),H=K&&K.isTypedArray;function Q(ne,pe){for(var De=-1,Pe=ne==null?0:ne.length;++De<Pe;)if(pe(ne[De],De,ne))return!0;return!1}function se(ne){var pe=-1,De=Array(ne.size);return ne.forEach(function(Pe,pt){De[++pe]=[pt,Pe]}),De}function te(ne){var pe=-1,De=Array(ne.size);return ne.forEach(function(Pe){De[++pe]=Pe}),De}var S,J,ae,P=Array.prototype,ge=Function.prototype,Ne=Object.prototype,Ie=M["__core-js_shared__"],je=ge.toString,xe=Ne.hasOwnProperty,Me=(S=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",He=Ne.toString,Je=RegExp("^"+je.call(xe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),an=I?M.Buffer:void 0,Jt=M.Symbol,on=M.Uint8Array,Dt=Ne.propertyIsEnumerable,Rn=P.splice,Qe=Jt?Jt.toStringTag:void 0,qe=Object.getOwnPropertySymbols,cn=an?an.isBuffer:void 0,Un=(J=Object.keys,ae=Object,function(ne){return J(ae(ne))}),Vn=ii(M,"DataView"),Kn=ii(M,"Map"),Hn=ii(M,"Promise"),An=ii(M,"Set"),or=ii(M,"WeakMap"),fe=ii(Object,"create"),be=En(Vn),Ve=En(Kn),Ye=En(Hn),ut=En(An),bt=En(or),Ht=Jt?Jt.prototype:void 0,Ft=Ht?Ht.valueOf:void 0;function zt(ne){var pe=-1,De=ne==null?0:ne.length;for(this.clear();++pe<De;){var Pe=ne[pe];this.set(Pe[0],Pe[1])}}function vt(ne){var pe=-1,De=ne==null?0:ne.length;for(this.clear();++pe<De;){var Pe=ne[pe];this.set(Pe[0],Pe[1])}}function lt(ne){var pe=-1,De=ne==null?0:ne.length;for(this.clear();++pe<De;){var Pe=ne[pe];this.set(Pe[0],Pe[1])}}function Wt(ne){var pe=-1,De=ne==null?0:ne.length;for(this.__data__=new lt;++pe<De;)this.add(ne[pe])}function Gt(ne){var pe=this.__data__=new vt(ne);this.size=pe.size}function Yi(ne,pe){var De=Or(ne),Pe=!De&&So(ne),pt=!De&&!Pe&&us(ne),rt=!De&&!Pe&&!pt&&Lr(ne),jt=De||Pe||pt||rt,Mt=jt?function(Nt,Bt){for(var Dn=-1,_n=Array(Nt);++Dn<Nt;)_n[Dn]=Bt(Dn);return _n}(ne.length,String):[],Qn=Mt.length;for(var Pt in ne)!xe.call(ne,Pt)||jt&&(Pt=="length"||pt&&(Pt=="offset"||Pt=="parent")||rt&&(Pt=="buffer"||Pt=="byteLength"||Pt=="byteOffset")||hn(Pt,Qn))||Mt.push(Pt);return Mt}function _r(ne,pe){for(var De=ne.length;De--;)if(os(ne[De][0],pe))return De;return-1}function Fn(ne){return ne==null?ne===void 0?"[object Undefined]":"[object Null]":Qe&&Qe in Object(ne)?function(pe){var De=xe.call(pe,Qe),Pe=pe[Qe];try{pe[Qe]=void 0;var pt=!0}catch{}var rt=He.call(pe);return pt&&(De?pe[Qe]=Pe:delete pe[Qe]),rt}(ne):function(pe){return He.call(pe)}(ne)}function Rr(ne){return Xn(ne)&&Fn(ne)==s}function Tr(ne,pe,De,Pe,pt){return ne===pe||(ne==null||pe==null||!Xn(ne)&&!Xn(pe)?ne!=ne&&pe!=pe:function(rt,jt,Mt,Qn,Pt,Nt){var Bt=Or(rt),Dn=Or(jt),_n=Bt?o:Lt(rt),wn=Dn?o:Lt(jt),Mr=(_n=_n==s?T:_n)==T,Pr=(wn=wn==s?T:wn)==T,Ai=_n==wn;if(Ai&&us(rt)){if(!us(jt))return!1;Bt=!0,Mr=!1}if(Ai&&!Mr)return Nt||(Nt=new Gt),Bt||Lr(rt)?ri(rt,jt,Mt,Qn,Pt,Nt):function(St,Tt,xi,Ii,fn,en,ur){switch(xi){case j:if(St.byteLength!=Tt.byteLength||St.byteOffset!=Tt.byteOffset)return!1;St=St.buffer,Tt=Tt.buffer;case q:return!(St.byteLength!=Tt.byteLength||!en(new on(St),new on(Tt)));case u:case c:case y:return os(+St,+Tt);case f:return St.name==Tt.name&&St.message==Tt.message;case w:case k:return St==Tt+"";case p:var lr=se;case N:var Br=1&Ii;if(lr||(lr=te),St.size!=Tt.size&&!Br)return!1;var Ct=ur.get(St);if(Ct)return Ct==Tt;Ii|=2,ur.set(St,Tt);var $i=ri(lr(St),lr(Tt),Ii,fn,en,ur);return ur.delete(St),$i;case D:if(Ft)return Ft.call(St)==Ft.call(Tt)}return!1}(rt,jt,_n,Mt,Qn,Pt,Nt);if(!(1&Mt)){var wi=Mr&&xe.call(rt,"__wrapped__"),Wn=Pr&&xe.call(jt,"__wrapped__");if(wi||Wn){var Ao=wi?rt.value():rt,tc=Wn?jt.value():jt;return Nt||(Nt=new Gt),Pt(Ao,tc,Mt,Qn,Nt)}}return!!Ai&&(Nt||(Nt=new Gt),function(St,Tt,xi,Ii,fn,en){var ur=1&xi,lr=Gi(St),Br=lr.length,Ct=Gi(Tt),$i=Ct.length;if(Br!=$i&&!ur)return!1;for(var cr=Br;cr--;){var Ur=lr[cr];if(!(ur?Ur in Tt:xe.call(Tt,Ur)))return!1}var wo=en.get(St);if(wo&&en.get(Tt))return wo==Tt;var ls=!0;en.set(St,Tt),en.set(Tt,St);for(var Vs=ur;++cr<Br;){var ya=St[Ur=lr[cr]],Ea=Tt[Ur];if(Ii)var Hs=ur?Ii(Ea,ya,Ur,Tt,St,en):Ii(ya,Ea,Ur,St,Tt,en);if(!(Hs===void 0?ya===Ea||fn(ya,Ea,xi,Ii,en):Hs)){ls=!1;break}Vs||(Vs=Ur=="constructor")}if(ls&&!Vs){var qr=St.constructor,hr=Tt.constructor;qr==hr||!("constructor"in St)||!("constructor"in Tt)||typeof qr=="function"&&qr instanceof qr&&typeof hr=="function"&&hr instanceof hr||(ls=!1)}return en.delete(St),en.delete(Tt),ls}(rt,jt,Mt,Qn,Pt,Nt))}(ne,pe,De,Pe,Tr,pt))}function jr(ne){return!(!kr(ne)||function(pe){return!!Me&&Me in pe}(ne))&&(Si(ne)?Je:ee).test(En(ne))}function Us(ne){if(De=(pe=ne)&&pe.constructor,Pe=typeof De=="function"&&De.prototype||Ne,pe!==Pe)return Un(ne);var pe,De,Pe,pt=[];for(var rt in Object(ne))xe.call(ne,rt)&&rt!="constructor"&&pt.push(rt);return pt}function ri(ne,pe,De,Pe,pt,rt){var jt=1&De,Mt=ne.length,Qn=pe.length;if(Mt!=Qn&&!(jt&&Qn>Mt))return!1;var Pt=rt.get(ne);if(Pt&&rt.get(pe))return Pt==pe;var Nt=-1,Bt=!0,Dn=2&De?new Wt:void 0;for(rt.set(ne,pe),rt.set(pe,ne);++Nt<Mt;){var _n=ne[Nt],wn=pe[Nt];if(Pe)var Mr=jt?Pe(wn,_n,Nt,pe,ne,rt):Pe(_n,wn,Nt,ne,pe,rt);if(Mr!==void 0){if(Mr)continue;Bt=!1;break}if(Dn){if(!Q(pe,function(Pr,Ai){if(wi=Ai,!Dn.has(wi)&&(_n===Pr||pt(_n,Pr,De,Pe,rt)))return Dn.push(Ai);var wi})){Bt=!1;break}}else if(_n!==wn&&!pt(_n,wn,De,Pe,rt)){Bt=!1;break}}return rt.delete(ne),rt.delete(pe),Bt}function Gi(ne){return function(pe,De,Pe){var pt=De(pe);return Or(pe)?pt:function(rt,jt){for(var Mt=-1,Qn=jt.length,Pt=rt.length;++Mt<Qn;)rt[Pt+Mt]=jt[Mt];return rt}(pt,Pe(pe))}(ne,zn,$t)}function Dr(ne,pe){var De,Pe,pt=ne.__data__;return((Pe=typeof(De=pe))=="string"||Pe=="number"||Pe=="symbol"||Pe=="boolean"?De!=="__proto__":De===null)?pt[typeof pe=="string"?"string":"hash"]:pt.map}function ii(ne,pe){var De=function(Pe,pt){return Pe?.[pt]}(ne,pe);return jr(De)?De:void 0}zt.prototype.clear=function(){this.__data__=fe?fe(null):{},this.size=0},zt.prototype.delete=function(ne){var pe=this.has(ne)&&delete this.__data__[ne];return this.size-=pe?1:0,pe},zt.prototype.get=function(ne){var pe=this.__data__;if(fe){var De=pe[ne];return De===n?void 0:De}return xe.call(pe,ne)?pe[ne]:void 0},zt.prototype.has=function(ne){var pe=this.__data__;return fe?pe[ne]!==void 0:xe.call(pe,ne)},zt.prototype.set=function(ne,pe){var De=this.__data__;return this.size+=this.has(ne)?0:1,De[ne]=fe&&pe===void 0?n:pe,this},vt.prototype.clear=function(){this.__data__=[],this.size=0},vt.prototype.delete=function(ne){var pe=this.__data__,De=_r(pe,ne);return!(De<0||(De==pe.length-1?pe.pop():Rn.call(pe,De,1),--this.size,0))},vt.prototype.get=function(ne){var pe=this.__data__,De=_r(pe,ne);return De<0?void 0:pe[De][1]},vt.prototype.has=function(ne){return _r(this.__data__,ne)>-1},vt.prototype.set=function(ne,pe){var De=this.__data__,Pe=_r(De,ne);return Pe<0?(++this.size,De.push([ne,pe])):De[Pe][1]=pe,this},lt.prototype.clear=function(){this.size=0,this.__data__={hash:new zt,map:new(Kn||vt),string:new zt}},lt.prototype.delete=function(ne){var pe=Dr(this,ne).delete(ne);return this.size-=pe?1:0,pe},lt.prototype.get=function(ne){return Dr(this,ne).get(ne)},lt.prototype.has=function(ne){return Dr(this,ne).has(ne)},lt.prototype.set=function(ne,pe){var De=Dr(this,ne),Pe=De.size;return De.set(ne,pe),this.size+=De.size==Pe?0:1,this},Wt.prototype.add=Wt.prototype.push=function(ne){return this.__data__.set(ne,n),this},Wt.prototype.has=function(ne){return this.__data__.has(ne)},Gt.prototype.clear=function(){this.__data__=new vt,this.size=0},Gt.prototype.delete=function(ne){var pe=this.__data__,De=pe.delete(ne);return this.size=pe.size,De},Gt.prototype.get=function(ne){return this.__data__.get(ne)},Gt.prototype.has=function(ne){return this.__data__.has(ne)},Gt.prototype.set=function(ne,pe){var De=this.__data__;if(De instanceof vt){var Pe=De.__data__;if(!Kn||Pe.length<199)return Pe.push([ne,pe]),this.size=++De.size,this;De=this.__data__=new lt(Pe)}return De.set(ne,pe),this.size=De.size,this};var $t=qe?function(ne){return ne==null?[]:(ne=Object(ne),function(pe,De){for(var Pe=-1,pt=pe==null?0:pe.length,rt=0,jt=[];++Pe<pt;){var Mt=pe[Pe];De(Mt,Pe,pe)&&(jt[rt++]=Mt)}return jt}(qe(ne),function(pe){return Dt.call(ne,pe)}))}:function(){return[]},Lt=Fn;function hn(ne,pe){return!!(pe=pe??r)&&(typeof ne=="number"||$.test(ne))&&ne>-1&&ne%1==0&&ne<pe}function En(ne){if(ne!=null){try{return je.call(ne)}catch{}try{return ne+""}catch{}}return""}function os(ne,pe){return ne===pe||ne!=ne&&pe!=pe}(Vn&&Lt(new Vn(new ArrayBuffer(1)))!=j||Kn&&Lt(new Kn)!=p||Hn&&Lt(Hn.resolve())!=b||An&&Lt(new An)!=N||or&&Lt(new or)!=F)&&(Lt=function(ne){var pe=Fn(ne),De=pe==T?ne.constructor:void 0,Pe=De?En(De):"";if(Pe)switch(Pe){case be:return j;case Ve:return p;case Ye:return b;case ut:return N;case bt:return F}return pe});var So=Rr(function(){return arguments}())?Rr:function(ne){return Xn(ne)&&xe.call(ne,"callee")&&!Dt.call(ne,"callee")},Or=Array.isArray,us=cn||function(){return!1};function Si(ne){if(!kr(ne))return!1;var pe=Fn(ne);return pe==d||pe=="[object GeneratorFunction]"||pe=="[object AsyncFunction]"||pe=="[object Proxy]"}function si(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=r}function kr(ne){var pe=typeof ne;return ne!=null&&(pe=="object"||pe=="function")}function Xn(ne){return ne!=null&&typeof ne=="object"}var Lr=H?function(ne){return function(pe){return ne(pe)}}(H):function(ne){return Xn(ne)&&si(ne.length)&&!!R[Fn(ne)]};function zn(ne){return(pe=ne)!=null&&si(pe.length)&&!Si(pe)?Yi(ne):Us(ne);var pe}t.exports=function(ne,pe){return Tr(ne,pe)}}(iy,iy.exports)),iy.exports),cP=of(lP);function QS(t,e,n){return t[e]?t[e][0]?t[e][0][n]:t[e][n]:e==="contentBoxSize"?t.contentRect[n==="inlineSize"?"width":"height"]:void 0}function hP(t){t===void 0&&(t={});var e=t.onResize,n=re.useRef(void 0);n.current=e;var r=t.round||Math.round,s=re.useRef(),o=re.useState({width:void 0,height:void 0}),u=o[0],c=o[1],f=re.useRef(!1);re.useEffect(function(){return f.current=!1,function(){f.current=!0}},[]);var d=re.useRef({width:void 0,height:void 0}),p=function(y,T){var b=re.useRef(null),w=re.useRef(null);w.current=T;var N=re.useRef(null);re.useEffect(function(){k()});var k=re.useCallback(function(){var D=N.current,F=w.current,q=D||(F?F instanceof Element?F:F.current:null);b.current&&b.current.element===q&&b.current.subscriber===y||(b.current&&b.current.cleanup&&b.current.cleanup(),b.current={element:q,subscriber:y,cleanup:q?y(q):void 0})},[y]);return re.useEffect(function(){return function(){b.current&&b.current.cleanup&&(b.current.cleanup(),b.current=null)}},[]),re.useCallback(function(D){N.current=D,k()},[k])}(re.useCallback(function(y){return s.current&&s.current.box===t.box&&s.current.round===r||(s.current={box:t.box,round:r,instance:new ResizeObserver(function(T){var b=T[0],w=t.box==="border-box"?"borderBoxSize":t.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",N=QS(b,w,"inlineSize"),k=QS(b,w,"blockSize"),D=N?r(N):void 0,F=k?r(k):void 0;if(d.current.width!==D||d.current.height!==F){var q={width:D,height:F};d.current.width=D,d.current.height=F,n.current?n.current(q):f.current||c(q)}})}),s.current.instance.observe(y,{box:t.box}),function(){s.current&&s.current.instance.unobserve(y)}},[t.box,r]),t.ref);return re.useMemo(function(){return{ref:p,width:u.width,height:u.height}},[p,u.width,u.height])}var fP="allotment-module_splitView__L-yRc",dP="allotment-module_sashContainer__fzwJF",mP="allotment-module_splitViewContainer__rQnVa",bI="allotment-module_splitViewView__MGZ6O",pP="allotment-module_vertical__WSwwa",gP="allotment-module_horizontal__7doS8",yP="allotment-module_separatorBorder__x-rDS";let nh,vI=!1,SI=!1;typeof navigator=="object"&&(nh=navigator.userAgent,SI=nh.indexOf("Macintosh")>=0,vI=(nh.indexOf("Macintosh")>=0||nh.indexOf("iPad")>=0||nh.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0);const AI=vI,EP=SI,WS=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?re.useLayoutEffect:re.useEffect;let _P=class{constructor(){this._size=void 0}getSize(){return this._size}setSize(e){this._size=e}};function Kd(t,e){const n=t.length,r=n-e.length;return r>=0&&t.slice(r,n)===e}var ZS,JS={exports:{}},eA,tA,TP=(ZS||(ZS=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function s(f,d,p){this.fn=f,this.context=d,this.once=p||!1}function o(f,d,p,y,T){if(typeof p!="function")throw new TypeError("The listener must be a function");var b=new s(p,y||f,T),w=n?n+d:d;return f._events[w]?f._events[w].fn?f._events[w]=[f._events[w],b]:f._events[w].push(b):(f._events[w]=b,f._eventsCount++),f}function u(f,d){--f._eventsCount==0?f._events=new r:delete f._events[d]}function c(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1)),c.prototype.eventNames=function(){var f,d,p=[];if(this._eventsCount===0)return p;for(d in f=this._events)e.call(f,d)&&p.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(f)):p},c.prototype.listeners=function(f){var d=n?n+f:f,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,T=p.length,b=new Array(T);y<T;y++)b[y]=p[y].fn;return b},c.prototype.listenerCount=function(f){var d=n?n+f:f,p=this._events[d];return p?p.fn?1:p.length:0},c.prototype.emit=function(f,d,p,y,T,b){var w=n?n+f:f;if(!this._events[w])return!1;var N,k,D=this._events[w],F=arguments.length;if(D.fn){switch(D.once&&this.removeListener(f,D.fn,void 0,!0),F){case 1:return D.fn.call(D.context),!0;case 2:return D.fn.call(D.context,d),!0;case 3:return D.fn.call(D.context,d,p),!0;case 4:return D.fn.call(D.context,d,p,y),!0;case 5:return D.fn.call(D.context,d,p,y,T),!0;case 6:return D.fn.call(D.context,d,p,y,T,b),!0}for(k=1,N=new Array(F-1);k<F;k++)N[k-1]=arguments[k];D.fn.apply(D.context,N)}else{var q,j=D.length;for(k=0;k<j;k++)switch(D[k].once&&this.removeListener(f,D[k].fn,void 0,!0),F){case 1:D[k].fn.call(D[k].context);break;case 2:D[k].fn.call(D[k].context,d);break;case 3:D[k].fn.call(D[k].context,d,p);break;case 4:D[k].fn.call(D[k].context,d,p,y);break;default:if(!N)for(q=1,N=new Array(F-1);q<F;q++)N[q-1]=arguments[q];D[k].fn.apply(D[k].context,N)}}return!0},c.prototype.on=function(f,d,p){return o(this,f,d,p,!1)},c.prototype.once=function(f,d,p){return o(this,f,d,p,!0)},c.prototype.removeListener=function(f,d,p,y){var T=n?n+f:f;if(!this._events[T])return this;if(!d)return u(this,T),this;var b=this._events[T];if(b.fn)b.fn!==d||y&&!b.once||p&&b.context!==p||u(this,T);else{for(var w=0,N=[],k=b.length;w<k;w++)(b[w].fn!==d||y&&!b[w].once||p&&b[w].context!==p)&&N.push(b[w]);N.length?this._events[T]=N.length===1?N[0]:N:u(this,T)}return this},c.prototype.removeAllListeners=function(f){var d;return f?(d=n?n+f:f,this._events[d]&&u(this,d)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c}(JS)),JS.exports),u_=of(TP);function nA(t,e){const n=t.indexOf(e);n>-1&&(t.splice(n,1),t.unshift(e))}function sy(t,e){const n=t.indexOf(e);n>-1&&(t.splice(n,1),t.push(e))}function Bi(t,e,n=1){const r=Math.max(0,Math.ceil((e-t)/n)),s=new Array(r);let o=-1;for(;++o<r;)s[o]=t+o*n;return s}var bP=of(function(){if(tA)return eA;tA=1;var t=/^\s+|\s+$/g,e=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,r=/^0o[0-7]+$/i,s=parseInt,o=typeof Ja=="object"&&Ja&&Ja.Object===Object&&Ja,u=typeof self=="object"&&self&&self.Object===Object&&self,c=o||u||Function("return this")(),f=Object.prototype.toString,d=Math.max,p=Math.min,y=function(){return c.Date.now()};function T(w){var N=typeof w;return!!w&&(N=="object"||N=="function")}function b(w){if(typeof w=="number")return w;if(function(D){return typeof D=="symbol"||function(F){return!!F&&typeof F=="object"}(D)&&f.call(D)=="[object Symbol]"}(w))return NaN;if(T(w)){var N=typeof w.valueOf=="function"?w.valueOf():w;w=T(N)?N+"":N}if(typeof w!="string")return w===0?w:+w;w=w.replace(t,"");var k=n.test(w);return k||r.test(w)?s(w.slice(2),k?2:8):e.test(w)?NaN:+w}return eA=function(w,N,k){var D,F,q,j,ee,$,R=0,C=!1,O=!1,M=!0;if(typeof w!="function")throw new TypeError("Expected a function");function B(H){var Q=D,se=F;return D=F=void 0,R=H,j=w.apply(se,Q)}function U(H){var Q=H-$;return $===void 0||Q>=N||Q<0||O&&H-R>=q}function I(){var H=y();if(U(H))return L(H);ee=setTimeout(I,function(Q){var se=N-(Q-$);return O?p(se,q-(Q-R)):se}(H))}function L(H){return ee=void 0,M&&D?B(H):(D=F=void 0,j)}function K(){var H=y(),Q=U(H);if(D=arguments,F=this,$=H,Q){if(ee===void 0)return function(se){return R=se,ee=setTimeout(I,N),C?B(se):j}($);if(O)return ee=setTimeout(I,N),B($)}return ee===void 0&&(ee=setTimeout(I,N)),j}return N=b(N)||0,T(k)&&(C=!!k.leading,q=(O="maxWait"in k)?d(b(k.maxWait)||0,N):q,M="trailing"in k?!!k.trailing:M),K.cancel=function(){ee!==void 0&&clearTimeout(ee),R=0,D=$=F=ee=void 0},K.flush=function(){return ee===void 0?j:L(y())},K}}()),vP="sash-module_sash__K-9lB",SP="sash-module_disabled__Hm-wx",AP="sash-module_mac__Jf6OJ",rA="sash-module_vertical__pB-rs",wP="sash-module_minimum__-UKxp",xP="sash-module_maximum__TCWxD",iA="sash-module_horizontal__kFbiw",ay="sash-module_hover__80W6I",oy="sash-module_active__bJspD";let Vi=function(t){return t.Vertical="VERTICAL",t.Horizontal="HORIZONTAL",t}({}),pi=function(t){return t.Disabled="DISABLED",t.Minimum="MINIMUM",t.Maximum="MAXIMUM",t.Enabled="ENABLED",t}({}),wI=AI?20:8;const xI=new u_;class sA extends u_{get state(){return this._state}set state(e){this._state!==e&&(this.el.classList.toggle(SP,e===pi.Disabled),this.el.classList.toggle("sash-disabled",e===pi.Disabled),this.el.classList.toggle(wP,e===pi.Minimum),this.el.classList.toggle("sash-minimum",e===pi.Minimum),this.el.classList.toggle(xP,e===pi.Maximum),this.el.classList.toggle("sash-maximum",e===pi.Maximum),this._state=e,this.emit("enablementChange",e))}constructor(e,n,r){var s;super(),this.el=void 0,this.layoutProvider=void 0,this.orientation=void 0,this.size=void 0,this.hoverDelay=300,this.hoverDelayer=bP(o=>o.classList.add("sash-hover",ay),this.hoverDelay),this._state=pi.Enabled,this.onPointerStart=o=>{const u=o.pageX,c=o.pageY,f={startX:u,currentX:u,startY:c,currentY:c};this.el.classList.add("sash-active",oy),this.emit("start",f),this.el.setPointerCapture(o.pointerId);const d=y=>{y.preventDefault();const T={startX:u,currentX:y.pageX,startY:c,currentY:y.pageY};this.emit("change",T)},p=y=>{y.preventDefault(),this.el.classList.remove("sash-active",oy),this.hoverDelayer.cancel(),this.emit("end"),this.el.releasePointerCapture(y.pointerId),window.removeEventListener("pointermove",d),window.removeEventListener("pointerup",p)};window.addEventListener("pointermove",d),window.addEventListener("pointerup",p)},this.onPointerDoublePress=()=>{this.emit("reset")},this.onMouseEnter=()=>{this.el.classList.contains(oy)?(this.hoverDelayer.cancel(),this.el.classList.add("sash-hover",ay)):this.hoverDelayer(this.el)},this.onMouseLeave=()=>{this.hoverDelayer.cancel(),this.el.classList.remove("sash-hover",ay)},this.el=document.createElement("div"),this.el.classList.add("sash",vP),this.el.dataset.testid="sash",e.append(this.el),EP&&this.el.classList.add("sash-mac",AP),this.el.addEventListener("pointerdown",this.onPointerStart),this.el.addEventListener("dblclick",this.onPointerDoublePress),this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mouseleave",this.onMouseLeave),typeof r.size=="number"?(this.size=r.size,r.orientation===Vi.Vertical?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=wI,xI.on("onDidChangeGlobalSize",o=>{this.size=o,this.layout()})),this.layoutProvider=n,this.orientation=(s=r.orientation)!=null?s:Vi.Vertical,this.orientation===Vi.Horizontal?(this.el.classList.add("sash-horizontal",iA),this.el.classList.remove("sash-vertical",rA)):(this.el.classList.remove("sash-horizontal",iA),this.el.classList.add("sash-vertical",rA)),this.layout()}layout(){if(this.orientation===Vi.Vertical){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}dispose(){this.el.removeEventListener("pointerdown",this.onPointerStart),this.el.removeEventListener("dblclick",this.onPointerDoublePress),this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("mouseleave",()=>this.onMouseLeave),this.el.remove()}}let Lm;var uy;(uy=Lm||(Lm={})).Distribute={type:"distribute"},uy.Split=function(t){return{type:"split",index:t}},uy.Invisible=function(t){return{type:"invisible",cachedVisibleSize:t}};let Ui=function(t){return t.Normal="NORMAL",t.Low="LOW",t.High="HIGH",t}({});class II{constructor(e,n,r){this.container=void 0,this.view=void 0,this._size=void 0,this._cachedVisibleSize=void 0,this.container=e,this.view=n,this.container.classList.add("split-view-view",bI),this.container.dataset.testid="split-view-view",typeof r=="number"?(this._size=r,this._cachedVisibleSize=void 0,e.classList.add("split-view-view-visible")):(this._size=0,this._cachedVisibleSize=r.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get priority(){return this.view.priority}get snap(){return!!this.view.snap}get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return this._cachedVisibleSize===void 0}setVisible(e,n){e!==this.visible&&(e?(this.size=Zi(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof n=="number"?n:this.size,this.size=0),this.container.classList.toggle("split-view-view-visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e){this.layoutContainer(e),this.view.layout(this.size,e)}}class IP extends II{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}class CP extends II{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class NP extends u_{get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,n={},r,s,o){var u,c;if(super(),this.onDidChange=void 0,this.onDidDragStart=void 0,this.onDidDragEnd=void 0,this.orientation=void 0,this.sashContainer=void 0,this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.sashDragState=void 0,this.proportionalLayout=void 0,this.getSashOrthogonalSize=void 0,this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onSashEnd=f=>{this.emit("sashchange",f),this.saveProportions();for(const d of this.viewItems)d.enabled=!0},this.orientation=(u=n.orientation)!=null?u:Vi.Vertical,this.proportionalLayout=(c=n.proportionalLayout)!=null?c:!0,this.getSashOrthogonalSize=n.getSashOrthogonalSize,r&&(this.onDidChange=r),s&&(this.onDidDragStart=s),o&&(this.onDidDragEnd=o),this.sashContainer=document.createElement("div"),this.sashContainer.classList.add("sash-container",dP),e.prepend(this.sashContainer),n.descriptor){this.size=n.descriptor.size;for(const[f,d]of n.descriptor.views.entries()){const p=d.size,y=d.container,T=d.view;this.addView(y,T,p,f,!0)}this.contentSize=this.viewItems.reduce((f,d)=>f+d.size,0),this.saveProportions()}}addView(e,n,r,s=this.viewItems.length,o){let u;u=typeof r=="number"?r:r.type==="split"?this.getViewSize(r.index)/2:r.type==="invisible"?{cachedVisibleSize:r.cachedVisibleSize}:n.minimumSize;const c=this.orientation===Vi.Vertical?new CP(e,n,u):new IP(e,n,u);if(this.viewItems.splice(s,0,c),this.viewItems.length>1){const f=this.orientation===Vi.Vertical?new sA(this.sashContainer,{getHorizontalSashTop:y=>this.getSashPosition(y),getHorizontalSashWidth:this.getSashOrthogonalSize},{orientation:Vi.Horizontal}):new sA(this.sashContainer,{getVerticalSashLeft:y=>this.getSashPosition(y),getVerticalSashHeight:this.getSashOrthogonalSize},{orientation:Vi.Vertical}),d=this.orientation===Vi.Vertical?y=>({sash:f,start:y.startY,current:y.currentY}):y=>({sash:f,start:y.startX,current:y.currentX});f.on("start",y=>{var T;this.emit("sashDragStart"),this.onSashStart(d(y));const b=this.viewItems.map(w=>w.size);(T=this.onDidDragStart)==null||T.call(this,b)}),f.on("change",y=>this.onSashChange(d(y))),f.on("end",()=>{var y;this.emit("sashDragEnd"),this.onSashEnd(this.sashItems.findIndex(b=>b.sash===f));const T=this.viewItems.map(b=>b.size);(y=this.onDidDragEnd)==null||y.call(this,T)}),f.on("reset",()=>{const y=this.sashItems.findIndex(k=>k.sash===f),T=Bi(y,-1,-1),b=Bi(y+1,this.viewItems.length),w=this.findFirstSnapIndex(T),N=this.findFirstSnapIndex(b);(typeof w!="number"||this.viewItems[w].visible)&&(typeof N!="number"||this.viewItems[N].visible)&&this.emit("sashreset",y)});const p={sash:f};this.sashItems.splice(s-1,0,p)}o||this.relayout(),o||typeof r=="number"||r.type!=="distribute"||this.distributeViewSizes()}removeView(e,n){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");const r=this.viewItems.splice(e,1)[0].view;if(this.viewItems.length>=1){const s=Math.max(e-1,0);this.sashItems.splice(s,1)[0].sash.dispose()}return this.relayout(),n&&n.type==="distribute"&&this.distributeViewSizes(),r}moveView(e,n,r){const s=this.getViewCachedVisibleSize(n),o=s===void 0?this.getViewSize(n):Lm.Invisible(s),u=this.removeView(n);this.addView(e,u,o,r)}getViewCachedVisibleSize(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].cachedVisibleSize}layout(e=this.size){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.proportions)for(let r=0;r<this.viewItems.length;r++){const s=this.viewItems[r];s.size=Zi(Math.round(this.proportions[r]*e),s.minimumSize,s.maximumSize)}else{const r=Bi(0,this.viewItems.length),s=r.filter(u=>this.viewItems[u].priority===Ui.Low),o=r.filter(u=>this.viewItems[u].priority===Ui.High);this.resize(this.viewItems.length-1,e-n,void 0,s,o)}this.distributeEmptySpace(),this.layoutViews()}resizeView(e,n){if(e<0||e>=this.viewItems.length)return;const r=Bi(0,this.viewItems.length).filter(c=>c!==e),s=[...r.filter(c=>this.viewItems[c].priority===Ui.Low),e],o=r.filter(c=>this.viewItems[c].priority===Ui.High),u=this.viewItems[e];n=Math.round(n),n=Zi(n,u.minimumSize,Math.min(u.maximumSize,this.size)),u.size=n,this.relayout(s,o)}resizeViews(e){for(let n=0;n<e.length;n++){const r=this.viewItems[n];let s=e[n];s=Math.round(s),s=Zi(s,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=s}this.contentSize=this.viewItems.reduce((n,r)=>n+r.size,0),this.saveProportions(),this.layout(this.size)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}isViewVisible(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].visible}setViewVisible(e,n){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");this.viewItems[e].setVisible(n),this.distributeEmptySpace(e),this.layoutViews(),this.saveProportions()}distributeViewSizes(){const e=[];let n=0;for(const c of this.viewItems)c.maximumSize-c.minimumSize>0&&(e.push(c),n+=c.size);const r=Math.floor(n/e.length);for(const c of e)c.size=Zi(r,c.minimumSize,c.maximumSize);const s=Bi(0,this.viewItems.length),o=s.filter(c=>this.viewItems[c].priority===Ui.Low),u=s.filter(c=>this.viewItems[c].priority===Ui.High);this.relayout(o,u)}dispose(){this.sashItems.forEach(e=>e.sash.dispose()),this.sashItems=[],this.sashContainer.remove()}relayout(e,n){const r=this.viewItems.reduce((s,o)=>s+o.size,0);this.resize(this.viewItems.length-1,this.size-r,void 0,e,n),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}onSashStart({sash:e,start:n}){const r=this.sashItems.findIndex(s=>s.sash===e);(s=>{const o=this.viewItems.map(F=>F.size);let u,c,f=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;const p=Bi(r,-1,-1),y=Bi(r+1,this.viewItems.length),T=p.reduce((F,q)=>F+(this.viewItems[q].minimumSize-o[q]),0),b=p.reduce((F,q)=>F+(this.viewItems[q].viewMaximumSize-o[q]),0),w=y.length===0?Number.POSITIVE_INFINITY:y.reduce((F,q)=>F+(o[q]-this.viewItems[q].minimumSize),0),N=y.length===0?Number.NEGATIVE_INFINITY:y.reduce((F,q)=>F+(o[q]-this.viewItems[q].viewMaximumSize),0);f=Math.max(T,N),d=Math.min(w,b);const k=this.findFirstSnapIndex(p),D=this.findFirstSnapIndex(y);if(typeof k=="number"){const F=this.viewItems[k],q=Math.floor(F.viewMinimumSize/2);u={index:k,limitDelta:F.visible?f-q:f+q,size:F.size}}if(typeof D=="number"){const F=this.viewItems[D],q=Math.floor(F.viewMinimumSize/2);c={index:D,limitDelta:F.visible?d+q:d-q,size:F.size}}this.sashDragState={start:s,current:s,index:r,sizes:o,minDelta:f,maxDelta:d,snapBefore:u,snapAfter:c}})(n)}onSashChange({current:e}){const{index:n,start:r,sizes:s,minDelta:o,maxDelta:u,snapBefore:c,snapAfter:f}=this.sashDragState;this.sashDragState.current=e;const d=e-r;this.resize(n,d,s,void 0,void 0,o,u,c,f),this.distributeEmptySpace(),this.layoutViews()}getSashPosition(e){let n=0;for(let r=0;r<this.sashItems.length;r++)if(n+=this.viewItems[r].size,this.sashItems[r].sash===e)return n;return 0}resize(e,n,r=this.viewItems.map(p=>p.size),s,o,u=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,f,d){if(e<0||e>=this.viewItems.length)return 0;const p=Bi(e,-1,-1),y=Bi(e+1,this.viewItems.length);if(o)for(const R of o)nA(p,R),nA(y,R);if(s)for(const R of s)sy(p,R),sy(y,R);const T=p.map(R=>this.viewItems[R]),b=p.map(R=>r[R]),w=y.map(R=>this.viewItems[R]),N=y.map(R=>r[R]),k=p.reduce((R,C)=>R+(this.viewItems[C].minimumSize-r[C]),0),D=p.reduce((R,C)=>R+(this.viewItems[C].maximumSize-r[C]),0),F=y.length===0?Number.POSITIVE_INFINITY:y.reduce((R,C)=>R+(r[C]-this.viewItems[C].minimumSize),0),q=y.length===0?Number.NEGATIVE_INFINITY:y.reduce((R,C)=>R+(r[C]-this.viewItems[C].maximumSize),0),j=Math.max(k,q,u),ee=Math.min(F,D,c);let $=!1;if(f){const R=this.viewItems[f.index],C=n>=f.limitDelta;$=C!==R.visible,R.setVisible(C,f.size)}if(!$&&d){const R=this.viewItems[d.index],C=n<d.limitDelta;$=C!==R.visible,R.setVisible(C,d.size)}if($)return this.resize(e,n,r,s,o,u,c);for(let R=0,C=n=Zi(n,j,ee);R<T.length;R++){const O=T[R],M=Zi(b[R]+C,O.minimumSize,O.maximumSize);C-=M-b[R],O.size=M}for(let R=0,C=n;R<w.length;R++){const O=w[R],M=Zi(N[R]-C,O.minimumSize,O.maximumSize);C+=M-N[R],O.size=M}return n}distributeEmptySpace(e){const n=this.viewItems.reduce((d,p)=>d+p.size,0);let r=this.size-n;const s=Bi(0,this.viewItems.length),o=[],u=s.filter(d=>this.viewItems[d].priority===Ui.Low),c=s.filter(d=>this.viewItems[d].priority===Ui.Normal),f=s.filter(d=>this.viewItems[d].priority===Ui.High);o.push(...f,...c,...u),typeof e=="number"&&sy(o,e);for(let d=0;r!==0&&d<o.length;d++){const p=this.viewItems[o[d]],y=Zi(p.size+r,p.minimumSize,p.maximumSize);r-=y-p.size,p.size=y}}layoutViews(){var e;this.contentSize=this.viewItems.reduce((r,s)=>r+s.size,0);let n=0;for(const r of this.viewItems)r.layout(n),n+=r.size;(e=this.onDidChange)!=null&&e.call(this,this.viewItems.map(r=>r.size)),this.sashItems.forEach(r=>r.sash.layout()),this.updateSashEnablement()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}updateSashEnablement(){let e=!1;const n=this.viewItems.map(f=>e=f.size-f.minimumSize>0||e);e=!1;const r=this.viewItems.map(f=>e=f.maximumSize-f.size>0||e),s=[...this.viewItems].reverse();e=!1;const o=s.map(f=>e=f.size-f.minimumSize>0||e).reverse();e=!1;const u=s.map(f=>e=f.maximumSize-f.size>0||e).reverse();let c=0;for(let f=0;f<this.sashItems.length;f++){const{sash:d}=this.sashItems[f];c+=this.viewItems[f].size;const p=!(n[f]&&u[f+1]),y=!(r[f]&&o[f+1]);if(p&&y){const T=Bi(f,-1,-1),b=Bi(f+1,this.viewItems.length),w=this.findFirstSnapIndex(T),N=this.findFirstSnapIndex(b),k=typeof w=="number"&&!this.viewItems[w].visible,D=typeof N=="number"&&!this.viewItems[N].visible;k&&o[f]&&(c>0||this.startSnappingEnabled)?d.state=pi.Minimum:D&&n[f]&&(c<this.contentSize||this.endSnappingEnabled)?d.state=pi.Maximum:d.state=pi.Disabled}else d.state=p&&!y?pi.Minimum:!p&&y?pi.Maximum:pi.Enabled}}findFirstSnapIndex(e){for(const n of e){const r=this.viewItems[n];if(r.visible&&r.snap)return n}for(const n of e){const r=this.viewItems[n];if(r.visible&&r.maximumSize-r.minimumSize>0)return;if(!r.visible&&r.snap)return n}}}class il{constructor(e){this.size=void 0,this.size=e}getPreferredSize(){return this.size}}class aA{constructor(e,n){this.proportion=void 0,this.layoutService=void 0,this.proportion=e,this.layoutService=n}getPreferredSize(){return this.proportion*this.layoutService.getSize()}}class Xd{getPreferredSize(){}}class oA{get preferredSize(){return this.layoutStrategy.getPreferredSize()}set preferredSize(e){if(typeof e=="number")this.layoutStrategy=new il(e);else if(typeof e=="string"){const n=e.trim();if(Kd(n,"%")){const r=Number(n.slice(0,-1))/100;this.layoutStrategy=new aA(r,this.layoutService)}else if(Kd(n,"px")){const r=Number(n.slice(0,-2))/100;this.layoutStrategy=new il(r)}else if(typeof Number.parseFloat(n)=="number"){const r=Number.parseFloat(n);this.layoutStrategy=new il(r)}else this.layoutStrategy=new Xd}else this.layoutStrategy=new Xd}constructor(e,n){var r;if(this.minimumSize=0,this.maximumSize=Number.POSITIVE_INFINITY,this.element=void 0,this.priority=void 0,this.snap=void 0,this.layoutService=void 0,this.layoutStrategy=void 0,this.layoutService=e,this.element=n.element,this.minimumSize=typeof n.minimumSize=="number"?n.minimumSize:30,this.maximumSize=typeof n.maximumSize=="number"?n.maximumSize:Number.POSITIVE_INFINITY,typeof n.preferredSize=="number")this.layoutStrategy=new il(n.preferredSize);else if(typeof n.preferredSize=="string"){const s=n.preferredSize.trim();if(Kd(s,"%")){const o=Number(s.slice(0,-1))/100;this.layoutStrategy=new aA(o,this.layoutService)}else if(Kd(s,"px")){const o=Number(s.slice(0,-2));this.layoutStrategy=new il(o)}else if(typeof Number.parseFloat(s)=="number"){const o=Number.parseFloat(s);this.layoutStrategy=new il(o)}else this.layoutStrategy=new Xd}else this.layoutStrategy=new Xd;this.priority=(r=n.priority)!=null?r:Ui.Normal,this.snap=typeof n.snap=="boolean"&&n.snap}layout(e){}}function uA(t){return t.minSize!==void 0||t.maxSize!==void 0||t.preferredSize!==void 0||t.priority!==void 0||t.visible!==void 0}const l_=re.forwardRef(({className:t,children:e},n)=>_e.createElement("div",{ref:n,className:eE("split-view-view",bI,t)},e));l_.displayName="Allotment.Pane";const CI=re.forwardRef(({children:t,className:e,id:n,maxSize:r=1/0,minSize:s=30,proportionalLayout:o=!0,separator:u=!0,sizes:c,defaultSizes:f=c,snap:d=!1,vertical:p=!1,onChange:y,onReset:T,onVisibleChange:b,onDragStart:w,onDragEnd:N},k)=>{const D=re.useRef(null),F=re.useRef([]),q=re.useRef(new Map),j=re.useRef(null),ee=re.useRef(new Map),$=re.useRef(new _P),R=re.useRef([]),[C,O]=re.useState(!1),M=re.useMemo(()=>_e.Children.toArray(t).filter(_e.isValidElement),[t]),B=re.useCallback(U=>{var I,L;const K=(I=R.current)==null?void 0:I[U];return typeof K?.preferredSize=="number"&&((L=j.current)!=null&&L.resizeView(U,Math.round(K.preferredSize)),!0)},[]);return re.useImperativeHandle(k,()=>({reset:()=>{if(T)T();else{var U;(U=j.current)==null||U.distributeViewSizes();for(let I=0;I<R.current.length;I++)B(I)}},resize:U=>{var I;(I=j.current)==null||I.resizeViews(U)}})),WS(()=>{let U=!0;f&&ee.current.size!==f.length&&(U=!1,console.warn(`Expected ${f.length} children based on defaultSizes but found ${ee.current.size}`)),U&&f&&(F.current=M.map(K=>K.key));const I=Eh({orientation:p?Vi.Vertical:Vi.Horizontal,proportionalLayout:o},U&&f&&{descriptor:{size:f.reduce((K,H)=>K+H,0),views:f.map((K,H)=>{var Q,se,te,S;const J=q.current.get(F.current[H]),ae=new oA($.current,Eh({element:document.createElement("div"),minimumSize:(Q=J?.minSize)!=null?Q:s,maximumSize:(se=J?.maxSize)!=null?se:r,priority:(te=J?.priority)!=null?te:Ui.Normal},J?.preferredSize&&{preferredSize:J?.preferredSize},{snap:(S=J?.snap)!=null?S:d}));return R.current.push(ae),{container:[...ee.current.values()][H],size:K,view:ae}})}});j.current=new NP(D.current,I,y,w,N),j.current.on("sashDragStart",()=>{var K;(K=D.current)==null||K.classList.add("split-view-sash-dragging")}),j.current.on("sashDragEnd",()=>{var K;(K=D.current)==null||K.classList.remove("split-view-sash-dragging")}),j.current.on("sashchange",K=>{if(b&&j.current){const H=M.map(Q=>Q.key);for(let Q=0;Q<H.length;Q++){const se=q.current.get(H[Q]);se?.visible!==void 0&&se.visible!==j.current.isViewVisible(Q)&&b(Q,j.current.isViewVisible(Q))}}}),j.current.on("sashreset",K=>{if(T)T();else{var H;if(B(K)||B(K+1))return;(H=j.current)==null||H.distributeViewSizes()}});const L=j.current;return()=>{L.dispose()}},[]),WS(()=>{if(C){const P=M.map(xe=>xe.key),ge=[...F.current],Ne=P.filter(xe=>!F.current.includes(xe)),Ie=P.filter(xe=>F.current.includes(xe)),je=F.current.map(xe=>!P.includes(xe));for(let xe=je.length-1;xe>=0;xe--){var U;je[xe]&&((U=j.current)!=null&&U.removeView(xe),ge.splice(xe,1),R.current.splice(xe,1))}for(const xe of Ne){var I,L,K,H,Q;const Me=q.current.get(xe),He=new oA($.current,Eh({element:document.createElement("div"),minimumSize:(I=Me?.minSize)!=null?I:s,maximumSize:(L=Me?.maxSize)!=null?L:r,priority:(K=Me?.priority)!=null?K:Ui.Normal},Me?.preferredSize&&{preferredSize:Me?.preferredSize},{snap:(H=Me?.snap)!=null?H:d}));(Q=j.current)!=null&&Q.addView(ee.current.get(xe),He,Lm.Distribute,P.findIndex(Je=>Je===xe)),ge.splice(P.findIndex(Je=>Je===xe),0,xe),R.current.splice(P.findIndex(Je=>Je===xe),0,He)}for(;!cP(P,ge);)for(const[xe,Me]of P.entries()){const He=ge.findIndex(Je=>Je===Me);if(He!==xe){var se;(se=j.current)==null||se.moveView(ee.current.get(Me),He,xe);const Je=ge[He];ge.splice(He,1),ge.splice(xe,0,Je);break}}for(const xe of Ne){var te;const Me=P.findIndex(Je=>Je===xe),He=R.current[Me].preferredSize;He!==void 0&&((te=j.current)==null||te.resizeView(Me,He))}for(const xe of[...Ne,...Ie]){var S,J;const Me=q.current.get(xe),He=P.findIndex(Je=>Je===xe);Me&&uA(Me)&&Me.visible!==void 0&&((S=j.current)==null?void 0:S.isViewVisible(He))!==Me.visible&&((J=j.current)==null||J.setViewVisible(He,Me.visible))}for(const xe of Ie){const Me=q.current.get(xe),He=P.findIndex(Je=>Je===xe);if(Me&&uA(Me)){var ae;Me.preferredSize!==void 0&&R.current[He].preferredSize!==Me.preferredSize&&(R.current[He].preferredSize=Me.preferredSize);let Je=!1;Me.minSize!==void 0&&R.current[He].minimumSize!==Me.minSize&&(R.current[He].minimumSize=Me.minSize,Je=!0),Me.maxSize!==void 0&&R.current[He].maximumSize!==Me.maxSize&&(R.current[He].maximumSize=Me.maxSize,Je=!0),Je&&((ae=j.current)==null||ae.layout())}}(Ne.length>0||je.length>0)&&(F.current=P)}},[M,C,r,s,d]),re.useEffect(()=>{j.current&&(j.current.onDidChange=y)},[y]),re.useEffect(()=>{j.current&&(j.current.onDidDragStart=w)},[w]),re.useEffect(()=>{j.current&&(j.current.onDidDragEnd=N)},[N]),hP({ref:D,onResize:({width:U,height:I})=>{var L;U&&I&&((L=j.current)!=null&&L.layout(p?I:U),$.current.setSize(p?I:U),O(!0))}}),re.useEffect(()=>{AI&&RP(20)},[]),_e.createElement("div",{ref:D,className:eE("split-view",p?"split-view-vertical":"split-view-horizontal",{"split-view-separator-border":u},fP,p?pP:gP,{[yP]:u},e),id:n},_e.createElement("div",{className:eE("split-view-container",mP)},_e.Children.toArray(t).map(U=>{if(!_e.isValidElement(U))return null;const I=U.key;return U.type.displayName==="Allotment.Pane"?(q.current.set(I,U.props),_e.cloneElement(U,{key:I,ref:L=>{const K=U.ref;K&&(K.current=L),L?ee.current.set(I,L):ee.current.delete(I)}})):_e.createElement(l_,{key:I,ref:L=>{L?ee.current.set(I,L):ee.current.delete(I)}},U)})))});function RP(t){const e=Zi(t,4,20),n=Zi(t,1,8);document.documentElement.style.setProperty("--sash-size",e+"px"),document.documentElement.style.setProperty("--sash-hover-size",n+"px"),function(r){wI=r,xI.emit("onDidChangeGlobalSize",r)}(e)}CI.displayName="Allotment";var ly=Object.assign(CI,{Pane:l_});const DP=()=>{};var lA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},OP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],u=t[n++],c=t[n++],f=((s&7)<<18|(o&63)<<12|(u&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=t[n++],u=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return e.join("")},RI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],u=s+1<t.length,c=u?t[s+1]:0,f=s+2<t.length,d=f?t[s+2]:0,p=o>>2,y=(o&3)<<4|c>>4;let T=(c&15)<<2|d>>6,b=d&63;f||(b=64,u||(T=64)),r.push(n[p],n[y],n[T],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(NI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):OP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||c==null||d==null||y==null)throw new kP;const T=o<<2|c>>4;if(r.push(T),d!==64){const b=c<<4&240|d>>2;if(r.push(b),y!==64){const w=d<<6&192|y;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LP=function(t){const e=NI(t);return RI.encodeByteArray(e,!0)},Mm=function(t){return LP(t).replace(/\./g,"")},DI=function(t){try{return RI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=()=>MP().__FIREBASE_DEFAULTS__,BP=()=>{if(typeof process>"u"||typeof lA>"u")return;const t=lA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&DI(t[1]);return e&&JSON.parse(e)},m0=()=>{try{return DP()||PP()||BP()||UP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},OI=t=>{var e,n;return(n=(e=m0())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},kI=t=>{const e=OI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},LI=()=>{var t;return(t=m0())===null||t===void 0?void 0:t.config},MI=t=>{var e;return(e=m0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){return t.endsWith(".cloudworkstations.dev")}async function c_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Mm(JSON.stringify(n)),Mm(JSON.stringify(u)),""].join(".")}const _h={};function FP(){const t={prod:[],emulator:[]};for(const e of Object.keys(_h))_h[e]?t.emulator.push(e):t.prod.push(e);return t}function zP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let cA=!1;function h_(t,e){if(typeof window>"u"||typeof document>"u"||!cu(window.location.host)||_h[t]===e||_h[t]||cA)return;_h[t]=e;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",o=FP().prod.length>0;function u(){const T=document.getElementById(r);T&&T.remove()}function c(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,b){T.setAttribute("width","24"),T.setAttribute("id",b),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function d(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{cA=!0,u()},T}function p(T,b){T.setAttribute("id",b),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function y(){const T=zP(r),b=n("text"),w=document.getElementById(b)||document.createElement("span"),N=n("learnmore"),k=document.getElementById(N)||document.createElement("a"),D=n("preprendIcon"),F=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const q=T.element;c(q),p(k,N);const j=d();f(F,D),q.append(F,w,k,j),document.body.appendChild(q)}o?(w.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ir())}function qP(){var t;const e=(t=m0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $P(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KP(){const t=Ir();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XP(){return!qP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QP(){try{return typeof indexedDB=="object"}catch{return!1}}function WP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="FirebaseError";class Ps extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ZP,Object.setPrototypeOf(this,Ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uf.prototype.create)}}class uf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],u=o?JP(o,r):"Error",c=`${this.serviceName}: ${u} (${s}).`;return new Ps(s,c,r)}}function JP(t,e){return t.replace(e5,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const e5=/\{\$([^}]+)}/g;function t5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ru(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],u=e[s];if(hA(o)&&hA(u)){if(!ru(o,u))return!1}else if(o!==u)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function hA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function dh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function n5(t,e){const n=new r5(t,e);return n.subscribe.bind(n)}class r5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");i5(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=cy),s.error===void 0&&(s.error=cy),s.complete===void 0&&(s.complete=cy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function i5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t){return t&&t._delegate?t._delegate:t}class co{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new VP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(o5(e))try{this.getOrInitializeService({instanceIdentifier:Xo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xo){return this.instances.has(e)}getOptions(e=Xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,u]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&u.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:a5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xo){return this.component?this.component.multipleInstances?e:Xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function a5(t){return t===Xo?void 0:t}function o5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new s5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Et||(Et={}));const l5={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},c5=Et.INFO,h5={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},f5=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=h5[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class f_{constructor(e){this.name=e,this._logLevel=c5,this._logHandler=f5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?l5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...e),this._logHandler(this,Et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...e),this._logHandler(this,Et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Et.INFO,...e),this._logHandler(this,Et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Et.WARN,...e),this._logHandler(this,Et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...e),this._logHandler(this,Et.ERROR,...e)}}const d5=(t,e)=>e.some(n=>t instanceof n);let fA,dA;function m5(){return fA||(fA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function p5(){return dA||(dA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PI=new WeakMap,tE=new WeakMap,BI=new WeakMap,hy=new WeakMap,d_=new WeakMap;function g5(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",u)},o=()=>{n(io(t.result)),s()},u=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&PI.set(n,t)}).catch(()=>{}),d_.set(e,t),e}function y5(t){if(tE.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",u),t.removeEventListener("abort",u)},o=()=>{n(),s()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",u),t.addEventListener("abort",u)});tE.set(t,e)}let nE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return io(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function E5(t){nE=t(nE)}function _5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fy(this),e,...n);return BI.set(r,e.sort?e.sort():[e]),io(r)}:p5().includes(t)?function(...e){return t.apply(fy(this),e),io(PI.get(this))}:function(...e){return io(t.apply(fy(this),e))}}function T5(t){return typeof t=="function"?_5(t):(t instanceof IDBTransaction&&y5(t),d5(t,m5())?new Proxy(t,nE):t)}function io(t){if(t instanceof IDBRequest)return g5(t);if(hy.has(t))return hy.get(t);const e=T5(t);return e!==t&&(hy.set(t,e),d_.set(e,t)),e}const fy=t=>d_.get(t);function b5(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const u=indexedDB.open(t,e),c=io(u);return r&&u.addEventListener("upgradeneeded",f=>{r(io(u.result),f.oldVersion,f.newVersion,io(u.transaction),f)}),n&&u.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),c.then(f=>{o&&f.addEventListener("close",()=>o()),s&&f.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const v5=["get","getKey","getAll","getAllKeys","count"],S5=["put","add","delete","clear"],dy=new Map;function mA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(dy.get(e))return dy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=S5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||v5.includes(n)))return;const o=async function(u,...c){const f=this.transaction(u,s?"readwrite":"readonly");let d=f.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&f.done]))[0]};return dy.set(e,o),o}E5(t=>({...t,get:(e,n,r)=>mA(e,n)||t.get(e,n,r),has:(e,n)=>!!mA(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(w5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function w5(t){const e=t.getComponent();return e?.type==="VERSION"}const rE="@firebase/app",pA="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=new f_("@firebase/app"),x5="@firebase/app-compat",I5="@firebase/analytics-compat",C5="@firebase/analytics",N5="@firebase/app-check-compat",R5="@firebase/app-check",D5="@firebase/auth",O5="@firebase/auth-compat",k5="@firebase/database",L5="@firebase/data-connect",M5="@firebase/database-compat",P5="@firebase/functions",B5="@firebase/functions-compat",U5="@firebase/installations",V5="@firebase/installations-compat",H5="@firebase/messaging",F5="@firebase/messaging-compat",z5="@firebase/performance",j5="@firebase/performance-compat",q5="@firebase/remote-config",Y5="@firebase/remote-config-compat",G5="@firebase/storage",$5="@firebase/storage-compat",K5="@firebase/firestore",X5="@firebase/ai",Q5="@firebase/firestore-compat",W5="firebase",Z5="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="[DEFAULT]",J5={[rE]:"fire-core",[x5]:"fire-core-compat",[C5]:"fire-analytics",[I5]:"fire-analytics-compat",[R5]:"fire-app-check",[N5]:"fire-app-check-compat",[D5]:"fire-auth",[O5]:"fire-auth-compat",[k5]:"fire-rtdb",[L5]:"fire-data-connect",[M5]:"fire-rtdb-compat",[P5]:"fire-fn",[B5]:"fire-fn-compat",[U5]:"fire-iid",[V5]:"fire-iid-compat",[H5]:"fire-fcm",[F5]:"fire-fcm-compat",[z5]:"fire-perf",[j5]:"fire-perf-compat",[q5]:"fire-rc",[Y5]:"fire-rc-compat",[G5]:"fire-gcs",[$5]:"fire-gcs-compat",[K5]:"fire-fst",[Q5]:"fire-fst-compat",[X5]:"fire-vertex","fire-js":"fire-js",[W5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=new Map,e8=new Map,sE=new Map;function gA(t,e){try{t.container.addComponent(e)}catch(n){da.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function iu(t){const e=t.name;if(sE.has(e))return da.debug(`There were multiple attempts to register component ${e}.`),!1;sE.set(e,t);for(const n of Pm.values())gA(n,t);for(const n of e8.values())gA(n,t);return!0}function p0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},so=new uf("app","Firebase",t8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw so.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=Z5;function UI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:iE,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw so.create("bad-app-name",{appName:String(s)});if(n||(n=LI()),!n)throw so.create("no-options");const o=Pm.get(s);if(o){if(ru(n,o.options)&&ru(r,o.config))return o;throw so.create("duplicate-app",{appName:s})}const u=new u5(s);for(const f of sE.values())u.addComponent(f);const c=new n8(n,r,u);return Pm.set(s,c),c}function m_(t=iE){const e=Pm.get(t);if(!e&&t===iE&&LI())return UI();if(!e)throw so.create("no-app",{appName:t});return e}function Cs(t,e,n){var r;let s=(r=J5[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),da.warn(c.join(" "));return}iu(new co(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8="firebase-heartbeat-database",i8=1,zh="firebase-heartbeat-store";let my=null;function VI(){return my||(my=b5(r8,i8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zh)}catch(n){console.warn(n)}}}}).catch(t=>{throw so.create("idb-open",{originalErrorMessage:t.message})})),my}async function s8(t){try{const n=(await VI()).transaction(zh),r=await n.objectStore(zh).get(HI(t));return await n.done,r}catch(e){if(e instanceof Ps)da.warn(e.message);else{const n=so.create("idb-get",{originalErrorMessage:e?.message});da.warn(n.message)}}}async function yA(t,e){try{const r=(await VI()).transaction(zh,"readwrite");await r.objectStore(zh).put(e,HI(t)),await r.done}catch(n){if(n instanceof Ps)da.warn(n.message);else{const r=so.create("idb-set",{originalErrorMessage:n?.message});da.warn(r.message)}}}function HI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8=1024,o8=30;class u8{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new c8(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=EA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>o8){const u=h8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){da.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=EA(),{heartbeatsToSend:r,unsentEntries:s}=l8(this._heartbeatsCache.heartbeats),o=Mm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return da.warn(n),""}}}function EA(){return new Date().toISOString().substring(0,10)}function l8(t,e=a8){const n=[];let r=t.slice();for(const s of t){const o=n.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),_A(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),_A(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class c8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QP()?WP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await s8(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function _A(t){return Mm(JSON.stringify({version:2,heartbeats:t})).length}function h8(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f8(t){iu(new co("platform-logger",e=>new A5(e),"PRIVATE")),iu(new co("heartbeat",e=>new u8(e),"PRIVATE")),Cs(rE,pA,t),Cs(rE,pA,"esm2017"),Cs("fire-js","")}f8("");var d8="firebase",m8="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cs(d8,m8,"app");var TA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ao,FI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,C){function O(){}O.prototype=C.prototype,R.D=C.prototype,R.prototype=new O,R.prototype.constructor=R,R.C=function(M,B,U){for(var I=Array(arguments.length-2),L=2;L<arguments.length;L++)I[L-2]=arguments[L];return C.prototype[B].apply(M,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,C,O){O||(O=0);var M=Array(16);if(typeof C=="string")for(var B=0;16>B;++B)M[B]=C.charCodeAt(O++)|C.charCodeAt(O++)<<8|C.charCodeAt(O++)<<16|C.charCodeAt(O++)<<24;else for(B=0;16>B;++B)M[B]=C[O++]|C[O++]<<8|C[O++]<<16|C[O++]<<24;C=R.g[0],O=R.g[1],B=R.g[2];var U=R.g[3],I=C+(U^O&(B^U))+M[0]+3614090360&4294967295;C=O+(I<<7&4294967295|I>>>25),I=U+(B^C&(O^B))+M[1]+3905402710&4294967295,U=C+(I<<12&4294967295|I>>>20),I=B+(O^U&(C^O))+M[2]+606105819&4294967295,B=U+(I<<17&4294967295|I>>>15),I=O+(C^B&(U^C))+M[3]+3250441966&4294967295,O=B+(I<<22&4294967295|I>>>10),I=C+(U^O&(B^U))+M[4]+4118548399&4294967295,C=O+(I<<7&4294967295|I>>>25),I=U+(B^C&(O^B))+M[5]+1200080426&4294967295,U=C+(I<<12&4294967295|I>>>20),I=B+(O^U&(C^O))+M[6]+2821735955&4294967295,B=U+(I<<17&4294967295|I>>>15),I=O+(C^B&(U^C))+M[7]+4249261313&4294967295,O=B+(I<<22&4294967295|I>>>10),I=C+(U^O&(B^U))+M[8]+1770035416&4294967295,C=O+(I<<7&4294967295|I>>>25),I=U+(B^C&(O^B))+M[9]+2336552879&4294967295,U=C+(I<<12&4294967295|I>>>20),I=B+(O^U&(C^O))+M[10]+4294925233&4294967295,B=U+(I<<17&4294967295|I>>>15),I=O+(C^B&(U^C))+M[11]+2304563134&4294967295,O=B+(I<<22&4294967295|I>>>10),I=C+(U^O&(B^U))+M[12]+1804603682&4294967295,C=O+(I<<7&4294967295|I>>>25),I=U+(B^C&(O^B))+M[13]+4254626195&4294967295,U=C+(I<<12&4294967295|I>>>20),I=B+(O^U&(C^O))+M[14]+2792965006&4294967295,B=U+(I<<17&4294967295|I>>>15),I=O+(C^B&(U^C))+M[15]+1236535329&4294967295,O=B+(I<<22&4294967295|I>>>10),I=C+(B^U&(O^B))+M[1]+4129170786&4294967295,C=O+(I<<5&4294967295|I>>>27),I=U+(O^B&(C^O))+M[6]+3225465664&4294967295,U=C+(I<<9&4294967295|I>>>23),I=B+(C^O&(U^C))+M[11]+643717713&4294967295,B=U+(I<<14&4294967295|I>>>18),I=O+(U^C&(B^U))+M[0]+3921069994&4294967295,O=B+(I<<20&4294967295|I>>>12),I=C+(B^U&(O^B))+M[5]+3593408605&4294967295,C=O+(I<<5&4294967295|I>>>27),I=U+(O^B&(C^O))+M[10]+38016083&4294967295,U=C+(I<<9&4294967295|I>>>23),I=B+(C^O&(U^C))+M[15]+3634488961&4294967295,B=U+(I<<14&4294967295|I>>>18),I=O+(U^C&(B^U))+M[4]+3889429448&4294967295,O=B+(I<<20&4294967295|I>>>12),I=C+(B^U&(O^B))+M[9]+568446438&4294967295,C=O+(I<<5&4294967295|I>>>27),I=U+(O^B&(C^O))+M[14]+3275163606&4294967295,U=C+(I<<9&4294967295|I>>>23),I=B+(C^O&(U^C))+M[3]+4107603335&4294967295,B=U+(I<<14&4294967295|I>>>18),I=O+(U^C&(B^U))+M[8]+1163531501&4294967295,O=B+(I<<20&4294967295|I>>>12),I=C+(B^U&(O^B))+M[13]+2850285829&4294967295,C=O+(I<<5&4294967295|I>>>27),I=U+(O^B&(C^O))+M[2]+4243563512&4294967295,U=C+(I<<9&4294967295|I>>>23),I=B+(C^O&(U^C))+M[7]+1735328473&4294967295,B=U+(I<<14&4294967295|I>>>18),I=O+(U^C&(B^U))+M[12]+2368359562&4294967295,O=B+(I<<20&4294967295|I>>>12),I=C+(O^B^U)+M[5]+4294588738&4294967295,C=O+(I<<4&4294967295|I>>>28),I=U+(C^O^B)+M[8]+2272392833&4294967295,U=C+(I<<11&4294967295|I>>>21),I=B+(U^C^O)+M[11]+1839030562&4294967295,B=U+(I<<16&4294967295|I>>>16),I=O+(B^U^C)+M[14]+4259657740&4294967295,O=B+(I<<23&4294967295|I>>>9),I=C+(O^B^U)+M[1]+2763975236&4294967295,C=O+(I<<4&4294967295|I>>>28),I=U+(C^O^B)+M[4]+1272893353&4294967295,U=C+(I<<11&4294967295|I>>>21),I=B+(U^C^O)+M[7]+4139469664&4294967295,B=U+(I<<16&4294967295|I>>>16),I=O+(B^U^C)+M[10]+3200236656&4294967295,O=B+(I<<23&4294967295|I>>>9),I=C+(O^B^U)+M[13]+681279174&4294967295,C=O+(I<<4&4294967295|I>>>28),I=U+(C^O^B)+M[0]+3936430074&4294967295,U=C+(I<<11&4294967295|I>>>21),I=B+(U^C^O)+M[3]+3572445317&4294967295,B=U+(I<<16&4294967295|I>>>16),I=O+(B^U^C)+M[6]+76029189&4294967295,O=B+(I<<23&4294967295|I>>>9),I=C+(O^B^U)+M[9]+3654602809&4294967295,C=O+(I<<4&4294967295|I>>>28),I=U+(C^O^B)+M[12]+3873151461&4294967295,U=C+(I<<11&4294967295|I>>>21),I=B+(U^C^O)+M[15]+530742520&4294967295,B=U+(I<<16&4294967295|I>>>16),I=O+(B^U^C)+M[2]+3299628645&4294967295,O=B+(I<<23&4294967295|I>>>9),I=C+(B^(O|~U))+M[0]+4096336452&4294967295,C=O+(I<<6&4294967295|I>>>26),I=U+(O^(C|~B))+M[7]+1126891415&4294967295,U=C+(I<<10&4294967295|I>>>22),I=B+(C^(U|~O))+M[14]+2878612391&4294967295,B=U+(I<<15&4294967295|I>>>17),I=O+(U^(B|~C))+M[5]+4237533241&4294967295,O=B+(I<<21&4294967295|I>>>11),I=C+(B^(O|~U))+M[12]+1700485571&4294967295,C=O+(I<<6&4294967295|I>>>26),I=U+(O^(C|~B))+M[3]+2399980690&4294967295,U=C+(I<<10&4294967295|I>>>22),I=B+(C^(U|~O))+M[10]+4293915773&4294967295,B=U+(I<<15&4294967295|I>>>17),I=O+(U^(B|~C))+M[1]+2240044497&4294967295,O=B+(I<<21&4294967295|I>>>11),I=C+(B^(O|~U))+M[8]+1873313359&4294967295,C=O+(I<<6&4294967295|I>>>26),I=U+(O^(C|~B))+M[15]+4264355552&4294967295,U=C+(I<<10&4294967295|I>>>22),I=B+(C^(U|~O))+M[6]+2734768916&4294967295,B=U+(I<<15&4294967295|I>>>17),I=O+(U^(B|~C))+M[13]+1309151649&4294967295,O=B+(I<<21&4294967295|I>>>11),I=C+(B^(O|~U))+M[4]+4149444226&4294967295,C=O+(I<<6&4294967295|I>>>26),I=U+(O^(C|~B))+M[11]+3174756917&4294967295,U=C+(I<<10&4294967295|I>>>22),I=B+(C^(U|~O))+M[2]+718787259&4294967295,B=U+(I<<15&4294967295|I>>>17),I=O+(U^(B|~C))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+C&4294967295,R.g[1]=R.g[1]+(B+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+B&4294967295,R.g[3]=R.g[3]+U&4294967295}r.prototype.u=function(R,C){C===void 0&&(C=R.length);for(var O=C-this.blockSize,M=this.B,B=this.h,U=0;U<C;){if(B==0)for(;U<=O;)s(this,R,U),U+=this.blockSize;if(typeof R=="string"){for(;U<C;)if(M[B++]=R.charCodeAt(U++),B==this.blockSize){s(this,M),B=0;break}}else for(;U<C;)if(M[B++]=R[U++],B==this.blockSize){s(this,M),B=0;break}}this.h=B,this.o+=C},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var C=1;C<R.length-8;++C)R[C]=0;var O=8*this.o;for(C=R.length-8;C<R.length;++C)R[C]=O&255,O/=256;for(this.u(R),R=Array(16),C=O=0;4>C;++C)for(var M=0;32>M;M+=8)R[O++]=this.g[C]>>>M&255;return R};function o(R,C){var O=c;return Object.prototype.hasOwnProperty.call(O,R)?O[R]:O[R]=C(R)}function u(R,C){this.h=C;for(var O=[],M=!0,B=R.length-1;0<=B;B--){var U=R[B]|0;M&&U==C||(O[B]=U,M=!1)}this.g=O}var c={};function f(R){return-128<=R&&128>R?o(R,function(C){return new u([C|0],0>C?-1:0)}):new u([R|0],0>R?-1:0)}function d(R){if(isNaN(R)||!isFinite(R))return y;if(0>R)return k(d(-R));for(var C=[],O=1,M=0;R>=O;M++)C[M]=R/O|0,O*=4294967296;return new u(C,0)}function p(R,C){if(R.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(R.charAt(0)=="-")return k(p(R.substring(1),C));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=d(Math.pow(C,8)),M=y,B=0;B<R.length;B+=8){var U=Math.min(8,R.length-B),I=parseInt(R.substring(B,B+U),C);8>U?(U=d(Math.pow(C,U)),M=M.j(U).add(d(I))):(M=M.j(O),M=M.add(d(I)))}return M}var y=f(0),T=f(1),b=f(16777216);t=u.prototype,t.m=function(){if(N(this))return-k(this).m();for(var R=0,C=1,O=0;O<this.g.length;O++){var M=this.i(O);R+=(0<=M?M:4294967296+M)*C,C*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(w(this))return"0";if(N(this))return"-"+k(this).toString(R);for(var C=d(Math.pow(R,6)),O=this,M="";;){var B=j(O,C).g;O=D(O,B.j(C));var U=((0<O.g.length?O.g[0]:O.h)>>>0).toString(R);if(O=B,w(O))return U+M;for(;6>U.length;)U="0"+U;M=U+M}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function w(R){if(R.h!=0)return!1;for(var C=0;C<R.g.length;C++)if(R.g[C]!=0)return!1;return!0}function N(R){return R.h==-1}t.l=function(R){return R=D(this,R),N(R)?-1:w(R)?0:1};function k(R){for(var C=R.g.length,O=[],M=0;M<C;M++)O[M]=~R.g[M];return new u(O,~R.h).add(T)}t.abs=function(){return N(this)?k(this):this},t.add=function(R){for(var C=Math.max(this.g.length,R.g.length),O=[],M=0,B=0;B<=C;B++){var U=M+(this.i(B)&65535)+(R.i(B)&65535),I=(U>>>16)+(this.i(B)>>>16)+(R.i(B)>>>16);M=I>>>16,U&=65535,I&=65535,O[B]=I<<16|U}return new u(O,O[O.length-1]&-2147483648?-1:0)};function D(R,C){return R.add(k(C))}t.j=function(R){if(w(this)||w(R))return y;if(N(this))return N(R)?k(this).j(k(R)):k(k(this).j(R));if(N(R))return k(this.j(k(R)));if(0>this.l(b)&&0>R.l(b))return d(this.m()*R.m());for(var C=this.g.length+R.g.length,O=[],M=0;M<2*C;M++)O[M]=0;for(M=0;M<this.g.length;M++)for(var B=0;B<R.g.length;B++){var U=this.i(M)>>>16,I=this.i(M)&65535,L=R.i(B)>>>16,K=R.i(B)&65535;O[2*M+2*B]+=I*K,F(O,2*M+2*B),O[2*M+2*B+1]+=U*K,F(O,2*M+2*B+1),O[2*M+2*B+1]+=I*L,F(O,2*M+2*B+1),O[2*M+2*B+2]+=U*L,F(O,2*M+2*B+2)}for(M=0;M<C;M++)O[M]=O[2*M+1]<<16|O[2*M];for(M=C;M<2*C;M++)O[M]=0;return new u(O,0)};function F(R,C){for(;(R[C]&65535)!=R[C];)R[C+1]+=R[C]>>>16,R[C]&=65535,C++}function q(R,C){this.g=R,this.h=C}function j(R,C){if(w(C))throw Error("division by zero");if(w(R))return new q(y,y);if(N(R))return C=j(k(R),C),new q(k(C.g),k(C.h));if(N(C))return C=j(R,k(C)),new q(k(C.g),C.h);if(30<R.g.length){if(N(R)||N(C))throw Error("slowDivide_ only works with positive integers.");for(var O=T,M=C;0>=M.l(R);)O=ee(O),M=ee(M);var B=$(O,1),U=$(M,1);for(M=$(M,2),O=$(O,2);!w(M);){var I=U.add(M);0>=I.l(R)&&(B=B.add(O),U=I),M=$(M,1),O=$(O,1)}return C=D(R,B.j(C)),new q(B,C)}for(B=y;0<=R.l(C);){for(O=Math.max(1,Math.floor(R.m()/C.m())),M=Math.ceil(Math.log(O)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),U=d(O),I=U.j(C);N(I)||0<I.l(R);)O-=M,U=d(O),I=U.j(C);w(U)&&(U=T),B=B.add(U),R=D(R,I)}return new q(B,R)}t.A=function(R){return j(this,R).h},t.and=function(R){for(var C=Math.max(this.g.length,R.g.length),O=[],M=0;M<C;M++)O[M]=this.i(M)&R.i(M);return new u(O,this.h&R.h)},t.or=function(R){for(var C=Math.max(this.g.length,R.g.length),O=[],M=0;M<C;M++)O[M]=this.i(M)|R.i(M);return new u(O,this.h|R.h)},t.xor=function(R){for(var C=Math.max(this.g.length,R.g.length),O=[],M=0;M<C;M++)O[M]=this.i(M)^R.i(M);return new u(O,this.h^R.h)};function ee(R){for(var C=R.g.length+1,O=[],M=0;M<C;M++)O[M]=R.i(M)<<1|R.i(M-1)>>>31;return new u(O,R.h)}function $(R,C){var O=C>>5;C%=32;for(var M=R.g.length-O,B=[],U=0;U<M;U++)B[U]=0<C?R.i(U+O)>>>C|R.i(U+O+1)<<32-C:R.i(U+O);return new u(B,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,FI=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=d,u.fromString=p,ao=u}).apply(typeof TA<"u"?TA:typeof self<"u"?self:typeof window<"u"?window:{});var Qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zI,mh,jI,hm,aE,qI,YI,GI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,v,A){return m==Array.prototype||m==Object.prototype||(m[v]=A.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qd=="object"&&Qd];for(var v=0;v<m.length;++v){var A=m[v];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=n(this);function s(m,v){if(v)e:{var A=r;m=m.split(".");for(var z=0;z<m.length-1;z++){var ue=m[z];if(!(ue in A))break e;A=A[ue]}m=m[m.length-1],z=A[m],v=v(z),v!=z&&v!=null&&e(A,m,{configurable:!0,writable:!0,value:v})}}function o(m,v){m instanceof String&&(m+="");var A=0,z=!1,ue={next:function(){if(!z&&A<m.length){var ye=A++;return{value:v(ye,m[ye]),done:!1}}return z=!0,{done:!0,value:void 0}}};return ue[Symbol.iterator]=function(){return ue},ue}s("Array.prototype.values",function(m){return m||function(){return o(this,function(v,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function f(m){var v=typeof m;return v=v!="object"?v:m?Array.isArray(m)?"array":v:"null",v=="array"||v=="object"&&typeof m.length=="number"}function d(m){var v=typeof m;return v=="object"&&m!=null||v=="function"}function p(m,v,A){return m.call.apply(m.bind,arguments)}function y(m,v,A){if(!m)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var ue=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ue,z),m.apply(v,ue)}}return function(){return m.apply(v,arguments)}}function T(m,v,A){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,T.apply(null,arguments)}function b(m,v){var A=Array.prototype.slice.call(arguments,1);return function(){var z=A.slice();return z.push.apply(z,arguments),m.apply(this,z)}}function w(m,v){function A(){}A.prototype=v.prototype,m.aa=v.prototype,m.prototype=new A,m.prototype.constructor=m,m.Qb=function(z,ue,ye){for(var Le=Array(arguments.length-2),At=2;At<arguments.length;At++)Le[At-2]=arguments[At];return v.prototype[ue].apply(z,Le)}}function N(m){const v=m.length;if(0<v){const A=Array(v);for(let z=0;z<v;z++)A[z]=m[z];return A}return[]}function k(m,v){for(let A=1;A<arguments.length;A++){const z=arguments[A];if(f(z)){const ue=m.length||0,ye=z.length||0;m.length=ue+ye;for(let Le=0;Le<ye;Le++)m[ue+Le]=z[Le]}else m.push(z)}}class D{constructor(v,A){this.i=v,this.j=A,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function F(m){return/^[\s\xa0]*$/.test(m)}function q(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function j(m){return j[" "](m),m}j[" "]=function(){};var ee=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function $(m,v,A){for(const z in m)v.call(A,m[z],z,m)}function R(m,v){for(const A in m)v.call(void 0,m[A],A,m)}function C(m){const v={};for(const A in m)v[A]=m[A];return v}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(m,v){let A,z;for(let ue=1;ue<arguments.length;ue++){z=arguments[ue];for(A in z)m[A]=z[A];for(let ye=0;ye<O.length;ye++)A=O[ye],Object.prototype.hasOwnProperty.call(z,A)&&(m[A]=z[A])}}function B(m){var v=1;m=m.split(":");const A=[];for(;0<v&&m.length;)A.push(m.shift()),v--;return m.length&&A.push(m.join(":")),A}function U(m){c.setTimeout(()=>{throw m},0)}function I(){var m=te;let v=null;return m.g&&(v=m.g,m.g=m.g.next,m.g||(m.h=null),v.next=null),v}class L{constructor(){this.h=this.g=null}add(v,A){const z=K.get();z.set(v,A),this.h?this.h.next=z:this.g=z,this.h=z}}var K=new D(()=>new H,m=>m.reset());class H{constructor(){this.next=this.g=this.h=null}set(v,A){this.h=v,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,se=!1,te=new L,S=()=>{const m=c.Promise.resolve(void 0);Q=()=>{m.then(J)}};var J=()=>{for(var m;m=I();){try{m.h.call(m.g)}catch(A){U(A)}var v=K;v.j(m),100>v.h&&(v.h++,m.next=v.g,v.g=m)}se=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(m,v){this.type=m,this.g=this.target=v,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,v=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const A=()=>{};c.addEventListener("test",A,v),c.removeEventListener("test",A,v)}catch{}return m}();function Ne(m,v){if(P.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var A=this.type=m.type,z=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=v,v=m.relatedTarget){if(ee){e:{try{j(v.nodeName);var ue=!0;break e}catch{}ue=!1}ue||(v=null)}}else A=="mouseover"?v=m.fromElement:A=="mouseout"&&(v=m.toElement);this.relatedTarget=v,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ie[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ne.aa.h.call(this)}}w(Ne,P);var Ie={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),xe=0;function Me(m,v,A,z,ue){this.listener=m,this.proxy=null,this.src=v,this.type=A,this.capture=!!z,this.ha=ue,this.key=++xe,this.da=this.fa=!1}function He(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Je(m){this.src=m,this.g={},this.h=0}Je.prototype.add=function(m,v,A,z,ue){var ye=m.toString();m=this.g[ye],m||(m=this.g[ye]=[],this.h++);var Le=Jt(m,v,z,ue);return-1<Le?(v=m[Le],A||(v.fa=!1)):(v=new Me(v,this.src,ye,!!z,ue),v.fa=A,m.push(v)),v};function an(m,v){var A=v.type;if(A in m.g){var z=m.g[A],ue=Array.prototype.indexOf.call(z,v,void 0),ye;(ye=0<=ue)&&Array.prototype.splice.call(z,ue,1),ye&&(He(v),m.g[A].length==0&&(delete m.g[A],m.h--))}}function Jt(m,v,A,z){for(var ue=0;ue<m.length;++ue){var ye=m[ue];if(!ye.da&&ye.listener==v&&ye.capture==!!A&&ye.ha==z)return ue}return-1}var on="closure_lm_"+(1e6*Math.random()|0),Dt={};function Rn(m,v,A,z,ue){if(Array.isArray(v)){for(var ye=0;ye<v.length;ye++)Rn(m,v[ye],A,z,ue);return null}return A=or(A),m&&m[je]?m.K(v,A,d(z)?!!z.capture:!1,ue):Qe(m,v,A,!1,z,ue)}function Qe(m,v,A,z,ue,ye){if(!v)throw Error("Invalid event type");var Le=d(ue)?!!ue.capture:!!ue,At=Hn(m);if(At||(m[on]=At=new Je(m)),A=At.add(v,A,z,Le,ye),A.proxy)return A;if(z=qe(),A.proxy=z,z.src=m,z.listener=A,m.addEventListener)ge||(ue=Le),ue===void 0&&(ue=!1),m.addEventListener(v.toString(),z,ue);else if(m.attachEvent)m.attachEvent(Vn(v.toString()),z);else if(m.addListener&&m.removeListener)m.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return A}function qe(){function m(A){return v.call(m.src,m.listener,A)}const v=Kn;return m}function cn(m,v,A,z,ue){if(Array.isArray(v))for(var ye=0;ye<v.length;ye++)cn(m,v[ye],A,z,ue);else z=d(z)?!!z.capture:!!z,A=or(A),m&&m[je]?(m=m.i,v=String(v).toString(),v in m.g&&(ye=m.g[v],A=Jt(ye,A,z,ue),-1<A&&(He(ye[A]),Array.prototype.splice.call(ye,A,1),ye.length==0&&(delete m.g[v],m.h--)))):m&&(m=Hn(m))&&(v=m.g[v.toString()],m=-1,v&&(m=Jt(v,A,z,ue)),(A=-1<m?v[m]:null)&&Un(A))}function Un(m){if(typeof m!="number"&&m&&!m.da){var v=m.src;if(v&&v[je])an(v.i,m);else{var A=m.type,z=m.proxy;v.removeEventListener?v.removeEventListener(A,z,m.capture):v.detachEvent?v.detachEvent(Vn(A),z):v.addListener&&v.removeListener&&v.removeListener(z),(A=Hn(v))?(an(A,m),A.h==0&&(A.src=null,v[on]=null)):He(m)}}}function Vn(m){return m in Dt?Dt[m]:Dt[m]="on"+m}function Kn(m,v){if(m.da)m=!0;else{v=new Ne(v,this);var A=m.listener,z=m.ha||m.src;m.fa&&Un(m),m=A.call(z,v)}return m}function Hn(m){return m=m[on],m instanceof Je?m:null}var An="__closure_events_fn_"+(1e9*Math.random()>>>0);function or(m){return typeof m=="function"?m:(m[An]||(m[An]=function(v){return m.handleEvent(v)}),m[An])}function fe(){ae.call(this),this.i=new Je(this),this.M=this,this.F=null}w(fe,ae),fe.prototype[je]=!0,fe.prototype.removeEventListener=function(m,v,A,z){cn(this,m,v,A,z)};function be(m,v){var A,z=m.F;if(z)for(A=[];z;z=z.F)A.push(z);if(m=m.M,z=v.type||v,typeof v=="string")v=new P(v,m);else if(v instanceof P)v.target=v.target||m;else{var ue=v;v=new P(z,m),M(v,ue)}if(ue=!0,A)for(var ye=A.length-1;0<=ye;ye--){var Le=v.g=A[ye];ue=Ve(Le,z,!0,v)&&ue}if(Le=v.g=m,ue=Ve(Le,z,!0,v)&&ue,ue=Ve(Le,z,!1,v)&&ue,A)for(ye=0;ye<A.length;ye++)Le=v.g=A[ye],ue=Ve(Le,z,!1,v)&&ue}fe.prototype.N=function(){if(fe.aa.N.call(this),this.i){var m=this.i,v;for(v in m.g){for(var A=m.g[v],z=0;z<A.length;z++)He(A[z]);delete m.g[v],m.h--}}this.F=null},fe.prototype.K=function(m,v,A,z){return this.i.add(String(m),v,!1,A,z)},fe.prototype.L=function(m,v,A,z){return this.i.add(String(m),v,!0,A,z)};function Ve(m,v,A,z){if(v=m.i.g[String(v)],!v)return!0;v=v.concat();for(var ue=!0,ye=0;ye<v.length;++ye){var Le=v[ye];if(Le&&!Le.da&&Le.capture==A){var At=Le.listener,jn=Le.ha||Le.src;Le.fa&&an(m.i,Le),ue=At.call(jn,z)!==!1&&ue}}return ue&&!z.defaultPrevented}function Ye(m,v,A){if(typeof m=="function")A&&(m=T(m,A));else if(m&&typeof m.handleEvent=="function")m=T(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:c.setTimeout(m,v||0)}function ut(m){m.g=Ye(()=>{m.g=null,m.i&&(m.i=!1,ut(m))},m.l);const v=m.h;m.h=null,m.m.apply(null,v)}class bt extends ae{constructor(v,A){super(),this.m=v,this.l=A,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ut(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ht(m){ae.call(this),this.h=m,this.g={}}w(Ht,ae);var Ft=[];function zt(m){$(m.g,function(v,A){this.g.hasOwnProperty(A)&&Un(v)},m),m.g={}}Ht.prototype.N=function(){Ht.aa.N.call(this),zt(this)},Ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vt=c.JSON.stringify,lt=c.JSON.parse,Wt=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function Gt(){}Gt.prototype.h=null;function Yi(m){return m.h||(m.h=m.i())}function _r(){}var Fn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rr(){P.call(this,"d")}w(Rr,P);function Tr(){P.call(this,"c")}w(Tr,P);var jr={},Us=null;function ri(){return Us=Us||new fe}jr.La="serverreachability";function Gi(m){P.call(this,jr.La,m)}w(Gi,P);function Dr(m){const v=ri();be(v,new Gi(v))}jr.STAT_EVENT="statevent";function ii(m,v){P.call(this,jr.STAT_EVENT,m),this.stat=v}w(ii,P);function $t(m){const v=ri();be(v,new ii(v,m))}jr.Ma="timingevent";function Lt(m,v){P.call(this,jr.Ma,m),this.size=v}w(Lt,P);function hn(m,v){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},v)}function En(){this.g=!0}En.prototype.xa=function(){this.g=!1};function os(m,v,A,z,ue,ye){m.info(function(){if(m.g)if(ye)for(var Le="",At=ye.split("&"),jn=0;jn<At.length;jn++){var wt=At[jn].split("=");if(1<wt.length){var Jn=wt[0];wt=wt[1];var qn=Jn.split("_");Le=2<=qn.length&&qn[1]=="type"?Le+(Jn+"="+wt+"&"):Le+(Jn+"=redacted&")}}else Le=null;else Le=ye;return"XMLHTTP REQ ("+z+") [attempt "+ue+"]: "+v+`
`+A+`
`+Le})}function So(m,v,A,z,ue,ye,Le){m.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+ue+"]: "+v+`
`+A+`
`+ye+" "+Le})}function Or(m,v,A,z){m.info(function(){return"XMLHTTP TEXT ("+v+"): "+Si(m,A)+(z?" "+z:"")})}function us(m,v){m.info(function(){return"TIMEOUT: "+v})}En.prototype.info=function(){};function Si(m,v){if(!m.g)return v;if(!v)return null;try{var A=JSON.parse(v);if(A){for(m=0;m<A.length;m++)if(Array.isArray(A[m])){var z=A[m];if(!(2>z.length)){var ue=z[1];if(Array.isArray(ue)&&!(1>ue.length)){var ye=ue[0];if(ye!="noop"&&ye!="stop"&&ye!="close")for(var Le=1;Le<ue.length;Le++)ue[Le]=""}}}}return vt(A)}catch{return v}}var si={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xn;function Lr(){}w(Lr,Gt),Lr.prototype.g=function(){return new XMLHttpRequest},Lr.prototype.i=function(){return{}},Xn=new Lr;function zn(m,v,A,z){this.j=m,this.i=v,this.l=A,this.R=z||1,this.U=new Ht(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ne}function ne(){this.i=null,this.g="",this.h=!1}var pe={},De={};function Pe(m,v,A){m.L=1,m.v=$i(en(v)),m.m=A,m.P=!0,pt(m,null)}function pt(m,v){m.F=Date.now(),Mt(m),m.A=en(m.v);var A=m.A,z=m.R;Array.isArray(z)||(z=[String(z)]),nc(A.i,"t",z),m.C=0,A=m.j.J,m.h=new ne,m.g=Mf(m.j,A?v:null,!m.m),0<m.O&&(m.M=new bt(T(m.Y,m,m.g),m.O)),v=m.U,A=m.g,z=m.ca;var ue="readystatechange";Array.isArray(ue)||(ue&&(Ft[0]=ue.toString()),ue=Ft);for(var ye=0;ye<ue.length;ye++){var Le=Rn(A,ue[ye],z||v.handleEvent,!1,v.h||v);if(!Le)break;v.g[Le.key]=Le}v=m.H?C(m.H):{},m.m?(m.u||(m.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,v)):(m.u="GET",m.g.ea(m.A,m.u,null,v)),Dr(),os(m.i,m.u,m.A,m.l,m.R,m.m)}zn.prototype.ca=function(m){m=m.target;const v=this.M;v&&Ni(m)==3?v.j():this.Y(m)},zn.prototype.Y=function(m){try{if(m==this.g)e:{const qn=Ni(this.g);var v=this.g.Ba();const Ys=this.g.Z();if(!(3>qn)&&(qn!=3||this.g&&(this.h.h||this.g.oa()||If(this.g)))){this.J||qn!=4||v==7||(v==8||0>=Ys?Dr(3):Dr(2)),Pt(this);var A=this.g.Z();this.X=A;t:if(rt(this)){var z=If(this.g);m="";var ue=z.length,ye=Ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bt(this),Nt(this);var Le="";break t}this.h.i=new c.TextDecoder}for(v=0;v<ue;v++)this.h.h=!0,m+=this.h.i.decode(z[v],{stream:!(ye&&v==ue-1)});z.length=0,this.h.g+=m,this.C=0,Le=this.h.g}else Le=this.g.oa();if(this.o=A==200,So(this.i,this.u,this.A,this.l,this.R,qn,A),this.o){if(this.T&&!this.K){t:{if(this.g){var At,jn=this.g;if((At=jn.g?jn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(At)){var wt=At;break t}}wt=null}if(A=wt)Or(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dn(this,A);else{this.o=!1,this.s=3,$t(12),Bt(this),Nt(this);break e}}if(this.P){A=!0;let fr;for(;!this.J&&this.C<Le.length;)if(fr=jt(this,Le),fr==De){qn==4&&(this.s=4,$t(14),A=!1),Or(this.i,this.l,null,"[Incomplete Response]");break}else if(fr==pe){this.s=4,$t(15),Or(this.i,this.l,Le,"[Invalid Chunk]"),A=!1;break}else Or(this.i,this.l,fr,null),Dn(this,fr);if(rt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qn!=4||Le.length!=0||this.h.h||(this.s=1,$t(16),A=!1),this.o=this.o&&A,!A)Or(this.i,this.l,Le,"[Invalid Chunked Response]"),Bt(this),Nt(this);else if(0<Le.length&&!this.W){this.W=!0;var Jn=this.j;Jn.g==this&&Jn.ba&&!Jn.M&&(Jn.j.info("Great, no buffering proxy detected. Bytes received: "+Le.length),Oo(Jn),Jn.M=!0,$t(11))}}else Or(this.i,this.l,Le,null),Dn(this,Le);qn==4&&Bt(this),this.o&&!this.J&&(qn==4?Of(this.j,this):(this.o=!1,Mt(this)))}else G0(this.g),A==400&&0<Le.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),Bt(this),Nt(this)}}}catch{}finally{}};function rt(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function jt(m,v){var A=m.C,z=v.indexOf(`
`,A);return z==-1?De:(A=Number(v.substring(A,z)),isNaN(A)?pe:(z+=1,z+A>v.length?De:(v=v.slice(z,z+A),m.C=z+A,v)))}zn.prototype.cancel=function(){this.J=!0,Bt(this)};function Mt(m){m.S=Date.now()+m.I,Qn(m,m.I)}function Qn(m,v){if(m.B!=null)throw Error("WatchDog timer not null");m.B=hn(T(m.ba,m),v)}function Pt(m){m.B&&(c.clearTimeout(m.B),m.B=null)}zn.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(us(this.i,this.A),this.L!=2&&(Dr(),$t(17)),Bt(this),this.s=2,Nt(this)):Qn(this,this.S-m)};function Nt(m){m.j.G==0||m.J||Of(m.j,m)}function Bt(m){Pt(m);var v=m.M;v&&typeof v.ma=="function"&&v.ma(),m.M=null,zt(m.U),m.g&&(v=m.g,m.g=null,v.abort(),v.ma())}function Dn(m,v){try{var A=m.j;if(A.G!=0&&(A.g==m||Ai(A.h,m))){if(!m.K&&Ai(A.h,m)&&A.G==3){try{var z=A.Da.g.parse(v)}catch{z=null}if(Array.isArray(z)&&z.length==3){var ue=z;if(ue[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<m.F)Au(A),vu(A);else break e;oc(A),$t(18)}}else A.za=ue[1],0<A.za-A.T&&37500>ue[2]&&A.F&&A.v==0&&!A.C&&(A.C=hn(T(A.Za,A),6e3));if(1>=Pr(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else qs(A,11)}else if((m.K||A.g==m)&&Au(A),!F(v))for(ue=A.Da.g.parse(v),v=0;v<ue.length;v++){let wt=ue[v];if(A.T=wt[0],wt=wt[1],A.G==2)if(wt[0]=="c"){A.K=wt[1],A.ia=wt[2];const Jn=wt[3];Jn!=null&&(A.la=Jn,A.j.info("VER="+A.la));const qn=wt[4];qn!=null&&(A.Aa=qn,A.j.info("SVER="+A.Aa));const Ys=wt[5];Ys!=null&&typeof Ys=="number"&&0<Ys&&(z=1.5*Ys,A.L=z,A.j.info("backChannelRequestTimeoutMs_="+z)),z=A;const fr=m.g;if(fr){const gs=fr.g?fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gs){var ye=z.h;ye.g||gs.indexOf("spdy")==-1&&gs.indexOf("quic")==-1&&gs.indexOf("h2")==-1||(ye.j=ye.l,ye.g=new Set,ye.h&&(wi(ye,ye.h),ye.h=null))}if(z.D){const lc=fr.g?fr.g.getResponseHeader("X-HTTP-Session-Id"):null;lc&&(z.ya=lc,Ct(z.I,z.D,lc))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-m.F,A.j.info("Handshake RTT: "+A.R+"ms")),z=A;var Le=m;if(z.qa=Lf(z,z.J?z.ia:null,z.W),Le.K){Wn(z.h,Le);var At=Le,jn=z.L;jn&&(At.I=jn),At.B&&(Pt(At),Mt(At)),z.g=Le}else Rf(z);0<A.i.length&&Su(A)}else wt[0]!="stop"&&wt[0]!="close"||qs(A,7);else A.G==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?qs(A,7):sc(A):wt[0]!="noop"&&A.l&&A.l.ta(wt),A.v=0)}}Dr(4)}catch{}}var _n=class{constructor(m,v){this.g=m,this.map=v}};function wn(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mr(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Pr(m){return m.h?1:m.g?m.g.size:0}function Ai(m,v){return m.h?m.h==v:m.g?m.g.has(v):!1}function wi(m,v){m.g?m.g.add(v):m.h=v}function Wn(m,v){m.h&&m.h==v?m.h=null:m.g&&m.g.has(v)&&m.g.delete(v)}wn.prototype.cancel=function(){if(this.i=Ao(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Ao(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let v=m.i;for(const A of m.g.values())v=v.concat(A.D);return v}return N(m.i)}function tc(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(f(m)){for(var v=[],A=m.length,z=0;z<A;z++)v.push(m[z]);return v}v=[],A=0;for(z in m)v[A++]=m[z];return v}function St(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(f(m)||typeof m=="string"){var v=[];m=m.length;for(var A=0;A<m;A++)v.push(A);return v}v=[],A=0;for(const z in m)v[A++]=z;return v}}}function Tt(m,v){if(m.forEach&&typeof m.forEach=="function")m.forEach(v,void 0);else if(f(m)||typeof m=="string")Array.prototype.forEach.call(m,v,void 0);else for(var A=St(m),z=tc(m),ue=z.length,ye=0;ye<ue;ye++)v.call(void 0,z[ye],A&&A[ye],m)}var xi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ii(m,v){if(m){m=m.split("&");for(var A=0;A<m.length;A++){var z=m[A].indexOf("="),ue=null;if(0<=z){var ye=m[A].substring(0,z);ue=m[A].substring(z+1)}else ye=m[A];v(ye,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function fn(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof fn){this.h=m.h,ur(this,m.j),this.o=m.o,this.g=m.g,lr(this,m.s),this.l=m.l;var v=m.i,A=new qr;A.i=v.i,v.g&&(A.g=new Map(v.g),A.h=v.h),Br(this,A),this.m=m.m}else m&&(v=String(m).match(xi))?(this.h=!1,ur(this,v[1]||"",!0),this.o=cr(v[2]||""),this.g=cr(v[3]||"",!0),lr(this,v[4]),this.l=cr(v[5]||"",!0),Br(this,v[6]||"",!0),this.m=cr(v[7]||"")):(this.h=!1,this.i=new qr(null,this.h))}fn.prototype.toString=function(){var m=[],v=this.j;v&&m.push(Ur(v,ls,!0),":");var A=this.g;return(A||v=="file")&&(m.push("//"),(v=this.o)&&m.push(Ur(v,ls,!0),"@"),m.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&m.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&m.push("/"),m.push(Ur(A,A.charAt(0)=="/"?ya:Vs,!0))),(A=this.i.toString())&&m.push("?",A),(A=this.m)&&m.push("#",Ur(A,Hs)),m.join("")};function en(m){return new fn(m)}function ur(m,v,A){m.j=A?cr(v,!0):v,m.j&&(m.j=m.j.replace(/:$/,""))}function lr(m,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);m.s=v}else m.s=null}function Br(m,v,A){v instanceof qr?(m.i=v,wf(m.i,m.h)):(A||(v=Ur(v,Ea)),m.i=new qr(v,m.h))}function Ct(m,v,A){m.i.set(v,A)}function $i(m){return Ct(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function cr(m,v){return m?v?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ur(m,v,A){return typeof m=="string"?(m=encodeURI(m).replace(v,wo),A&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function wo(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var ls=/[#\/\?@]/g,Vs=/[#\?:]/g,ya=/[#\?]/g,Ea=/[#\?@]/g,Hs=/#/g;function qr(m,v){this.h=this.g=null,this.i=m||null,this.j=!!v}function hr(m){m.g||(m.g=new Map,m.h=0,m.i&&Ii(m.i,function(v,A){m.add(decodeURIComponent(v.replace(/\+/g," ")),A)}))}t=qr.prototype,t.add=function(m,v){hr(this),this.i=null,m=cs(this,m);var A=this.g.get(m);return A||this.g.set(m,A=[]),A.push(v),this.h+=1,this};function Fs(m,v){hr(m),v=cs(m,v),m.g.has(v)&&(m.i=null,m.h-=m.g.get(v).length,m.g.delete(v))}function zs(m,v){return hr(m),v=cs(m,v),m.g.has(v)}t.forEach=function(m,v){hr(this),this.g.forEach(function(A,z){A.forEach(function(ue){m.call(v,ue,z,this)},this)},this)},t.na=function(){hr(this);const m=Array.from(this.g.values()),v=Array.from(this.g.keys()),A=[];for(let z=0;z<v.length;z++){const ue=m[z];for(let ye=0;ye<ue.length;ye++)A.push(v[z])}return A},t.V=function(m){hr(this);let v=[];if(typeof m=="string")zs(this,m)&&(v=v.concat(this.g.get(cs(this,m))));else{m=Array.from(this.g.values());for(let A=0;A<m.length;A++)v=v.concat(m[A])}return v},t.set=function(m,v){return hr(this),this.i=null,m=cs(this,m),zs(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[v]),this.h+=1,this},t.get=function(m,v){return m?(m=this.V(m),0<m.length?String(m[0]):v):v};function nc(m,v,A){Fs(m,v),0<A.length&&(m.i=null,m.g.set(cs(m,v),N(A)),m.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],v=Array.from(this.g.keys());for(var A=0;A<v.length;A++){var z=v[A];const ye=encodeURIComponent(String(z)),Le=this.V(z);for(z=0;z<Le.length;z++){var ue=ye;Le[z]!==""&&(ue+="="+encodeURIComponent(String(Le[z]))),m.push(ue)}}return this.i=m.join("&")};function cs(m,v){return v=String(v),m.j&&(v=v.toLowerCase()),v}function wf(m,v){v&&!m.j&&(hr(m),m.i=null,m.g.forEach(function(A,z){var ue=z.toLowerCase();z!=ue&&(Fs(this,z),nc(this,ue,A))},m)),m.j=v}function xo(m,v){const A=new En;if(c.Image){const z=new Image;z.onload=b(Ci,A,"TestLoadImage: loaded",!0,v,z),z.onerror=b(Ci,A,"TestLoadImage: error",!1,v,z),z.onabort=b(Ci,A,"TestLoadImage: abort",!1,v,z),z.ontimeout=b(Ci,A,"TestLoadImage: timeout",!1,v,z),c.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=m}else v(!1)}function Ki(m,v){const A=new En,z=new AbortController,ue=setTimeout(()=>{z.abort(),Ci(A,"TestPingServer: timeout",!1,v)},1e4);fetch(m,{signal:z.signal}).then(ye=>{clearTimeout(ue),ye.ok?Ci(A,"TestPingServer: ok",!0,v):Ci(A,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(ue),Ci(A,"TestPingServer: error",!1,v)})}function Ci(m,v,A,z,ue){try{ue&&(ue.onload=null,ue.onerror=null,ue.onabort=null,ue.ontimeout=null),z(A)}catch{}}function Io(){this.g=new Wt}function hs(m,v,A){const z=A||"";try{Tt(m,function(ue,ye){let Le=ue;d(ue)&&(Le=vt(ue)),v.push(z+ye+"="+encodeURIComponent(Le))})}catch(ue){throw v.push(z+"type="+encodeURIComponent("_badmap")),ue}}function _a(m){this.l=m.Ub||null,this.j=m.eb||!1}w(_a,Gt),_a.prototype.g=function(){return new js(this.l,this.j)},_a.prototype.i=function(m){return function(){return m}}({});function js(m,v){fe.call(this),this.D=m,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(js,fe),t=js.prototype,t.open=function(m,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=v,this.readyState=1,ds(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(v.body=m),(this.D||c).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fs(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ds(this)),this.g&&(this.readyState=3,ds(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rc(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function rc(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var v=m.value?m.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!m.done}))&&(this.response=this.responseText+=v)}m.done?fs(this):ds(this),this.readyState==3&&rc(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,fs(this))},t.Qa=function(m){this.g&&(this.response=m,fs(this))},t.ga=function(){this.g&&fs(this)};function fs(m){m.readyState=4,m.l=null,m.j=null,m.v=null,ds(m)}t.setRequestHeader=function(m,v){this.u.append(m,v)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],v=this.h.entries();for(var A=v.next();!A.done;)A=A.value,m.push(A[0]+": "+A[1]),A=v.next();return m.join(`\r
`)};function ds(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ic(m){let v="";return $(m,function(A,z){v+=z,v+=":",v+=A,v+=`\r
`}),v}function Zn(m,v,A){e:{for(z in A){var z=!1;break e}z=!0}z||(A=ic(A),typeof m=="string"?A!=null&&encodeURIComponent(String(A)):Ct(m,v,A))}function Ut(m){fe.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ut,fe);var Eu=/^https?$/i,Co=["POST","PUT"];t=Ut.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,v,A,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);v=v?v.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xn.g(),this.v=this.o?Yi(this.o):Yi(Xn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(v,String(m),!0),this.B=!1}catch(ye){xf(this,ye);return}if(m=A||"",A=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var ue in z)A.set(ue,z[ue]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const ye of z.keys())A.set(ye,z.get(ye));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(A.keys()).find(ye=>ye.toLowerCase()=="content-type"),ue=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Co,v,void 0))||z||ue||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ye,Le]of A)this.g.setRequestHeader(ye,Le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{No(this),this.u=!0,this.g.send(m),this.u=!1}catch(ye){xf(this,ye)}};function xf(m,v){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=v,m.m=5,_u(m),ms(m)}function _u(m){m.A||(m.A=!0,be(m,"complete"),be(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,be(this,"complete"),be(this,"abort"),ms(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ms(this,!0)),Ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Tu(this):this.bb())},t.bb=function(){Tu(this)};function Tu(m){if(m.h&&typeof u<"u"&&(!m.v[1]||Ni(m)!=4||m.Z()!=2)){if(m.u&&Ni(m)==4)Ye(m.Ea,0,m);else if(be(m,"readystatechange"),Ni(m)==4){m.h=!1;try{const Le=m.Z();e:switch(Le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var A;if(!(A=v)){var z;if(z=Le===0){var ue=String(m.D).match(xi)[1]||null;!ue&&c.self&&c.self.location&&(ue=c.self.location.protocol.slice(0,-1)),z=!Eu.test(ue?ue.toLowerCase():"")}A=z}if(A)be(m,"complete"),be(m,"success");else{m.m=6;try{var ye=2<Ni(m)?m.g.statusText:""}catch{ye=""}m.l=ye+" ["+m.Z()+"]",_u(m)}}finally{ms(m)}}}}function ms(m,v){if(m.g){No(m);const A=m.g,z=m.v[0]?()=>{}:null;m.g=null,m.v=null,v||be(m,"ready");try{A.onreadystatechange=z}catch{}}}function No(m){m.I&&(c.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Ni(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Ni(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var v=this.g.responseText;return m&&v.indexOf(m)==0&&(v=v.substring(m.length)),lt(v)}};function If(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function G0(m){const v={};m=(m.g&&2<=Ni(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<m.length;z++){if(F(m[z]))continue;var A=B(m[z]);const ue=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ye=v[ue]||[];v[ue]=ye,ye.push(A)}R(v,function(z){return z.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ro(m,v,A){return A&&A.internalChannelParams&&A.internalChannelParams[m]||v}function bu(m){this.Aa=0,this.i=[],this.j=new En,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ro("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ro("baseRetryDelayMs",5e3,m),this.cb=Ro("retryDelaySeedMs",1e4,m),this.Wa=Ro("forwardChannelMaxRetries",2,m),this.wa=Ro("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new wn(m&&m.concurrentRequestLimit),this.Da=new Io,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=bu.prototype,t.la=8,t.G=1,t.connect=function(m,v,A,z){$t(0),this.W=m,this.H=v||{},A&&z!==void 0&&(this.H.OSID=A,this.H.OAID=z),this.F=this.X,this.I=Lf(this,null,this.W),Su(this)};function sc(m){if(Cf(m),m.G==3){var v=m.U++,A=en(m.I);if(Ct(A,"SID",m.K),Ct(A,"RID",v),Ct(A,"TYPE","terminate"),Do(m,A),v=new zn(m,m.j,v),v.L=2,v.v=$i(en(A)),A=!1,c.navigator&&c.navigator.sendBeacon)try{A=c.navigator.sendBeacon(v.v.toString(),"")}catch{}!A&&c.Image&&(new Image().src=v.v,A=!0),A||(v.g=Mf(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Mt(v)}kf(m)}function vu(m){m.g&&(Oo(m),m.g.cancel(),m.g=null)}function Cf(m){vu(m),m.u&&(c.clearTimeout(m.u),m.u=null),Au(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function Su(m){if(!Mr(m.h)&&!m.s){m.s=!0;var v=m.Ga;Q||S(),se||(Q(),se=!0),te.add(v,m),m.B=0}}function $0(m,v){return Pr(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=v.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=hn(T(m.Ga,m,v),uc(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ue=new zn(this,this.j,m);let ye=this.o;if(this.S&&(ye?(ye=C(ye),M(ye,this.S)):ye=this.S),this.m!==null||this.O||(ue.H=ye,ye=null),this.P)e:{for(var v=0,A=0;A<this.i.length;A++){t:{var z=this.i[A];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(v+=z,4096<v){v=A;break e}if(v===4096||A===this.i.length-1){v=A+1;break e}}v=1e3}else v=1e3;v=Nf(this,ue,v),A=en(this.I),Ct(A,"RID",m),Ct(A,"CVER",22),this.D&&Ct(A,"X-HTTP-Session-Id",this.D),Do(this,A),ye&&(this.O?v="headers="+encodeURIComponent(String(ic(ye)))+"&"+v:this.m&&Zn(A,this.m,ye)),wi(this.h,ue),this.Ua&&Ct(A,"TYPE","init"),this.P?(Ct(A,"$req",v),Ct(A,"SID","null"),ue.T=!0,Pe(ue,A,null)):Pe(ue,A,v),this.G=2}}else this.G==3&&(m?ac(this,m):this.i.length==0||Mr(this.h)||ac(this))};function ac(m,v){var A;v?A=v.l:A=m.U++;const z=en(m.I);Ct(z,"SID",m.K),Ct(z,"RID",A),Ct(z,"AID",m.T),Do(m,z),m.m&&m.o&&Zn(z,m.m,m.o),A=new zn(m,m.j,A,m.B+1),m.m===null&&(A.H=m.o),v&&(m.i=v.D.concat(m.i)),v=Nf(m,A,1e3),A.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),wi(m.h,A),Pe(A,z,v)}function Do(m,v){m.H&&$(m.H,function(A,z){Ct(v,z,A)}),m.l&&Tt({},function(A,z){Ct(v,z,A)})}function Nf(m,v,A){A=Math.min(m.i.length,A);var z=m.l?T(m.l.Na,m.l,m):null;e:{var ue=m.i;let ye=-1;for(;;){const Le=["count="+A];ye==-1?0<A?(ye=ue[0].g,Le.push("ofs="+ye)):ye=0:Le.push("ofs="+ye);let At=!0;for(let jn=0;jn<A;jn++){let wt=ue[jn].g;const Jn=ue[jn].map;if(wt-=ye,0>wt)ye=Math.max(0,ue[jn].g-100),At=!1;else try{hs(Jn,Le,"req"+wt+"_")}catch{z&&z(Jn)}}if(At){z=Le.join("&");break e}}}return m=m.i.splice(0,A),v.D=m,z}function Rf(m){if(!m.g&&!m.u){m.Y=1;var v=m.Fa;Q||S(),se||(Q(),se=!0),te.add(v,m),m.v=0}}function oc(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=hn(T(m.Fa,m),uc(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,Df(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=hn(T(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),vu(this),Df(this))};function Oo(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function Df(m){m.g=new zn(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var v=en(m.qa);Ct(v,"RID","rpc"),Ct(v,"SID",m.K),Ct(v,"AID",m.T),Ct(v,"CI",m.F?"0":"1"),!m.F&&m.ja&&Ct(v,"TO",m.ja),Ct(v,"TYPE","xmlhttp"),Do(m,v),m.m&&m.o&&Zn(v,m.m,m.o),m.L&&(m.g.I=m.L);var A=m.g;m=m.ia,A.L=1,A.v=$i(en(v)),A.m=null,A.P=!0,pt(A,m)}t.Za=function(){this.C!=null&&(this.C=null,vu(this),oc(this),$t(19))};function Au(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Of(m,v){var A=null;if(m.g==v){Au(m),Oo(m),m.g=null;var z=2}else if(Ai(m.h,v))A=v.D,Wn(m.h,v),z=1;else return;if(m.G!=0){if(v.o)if(z==1){A=v.m?v.m.length:0,v=Date.now()-v.F;var ue=m.B;z=ri(),be(z,new Lt(z,A)),Su(m)}else Rf(m);else if(ue=v.s,ue==3||ue==0&&0<v.X||!(z==1&&$0(m,v)||z==2&&oc(m)))switch(A&&0<A.length&&(v=m.h,v.i=v.i.concat(A)),ue){case 1:qs(m,5);break;case 4:qs(m,10);break;case 3:qs(m,6);break;default:qs(m,2)}}}function uc(m,v){let A=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(A*=2),A*v}function qs(m,v){if(m.j.info("Error code "+v),v==2){var A=T(m.fb,m),z=m.Xa;const ue=!z;z=new fn(z||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ur(z,"https"),$i(z),ue?xo(z.toString(),A):Ki(z.toString(),A)}else $t(2);m.G=0,m.l&&m.l.sa(v),kf(m),Cf(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function kf(m){if(m.G=0,m.ka=[],m.l){const v=Ao(m.h);(v.length!=0||m.i.length!=0)&&(k(m.ka,v),k(m.ka,m.i),m.h.i.length=0,N(m.i),m.i.length=0),m.l.ra()}}function Lf(m,v,A){var z=A instanceof fn?en(A):new fn(A);if(z.g!="")v&&(z.g=v+"."+z.g),lr(z,z.s);else{var ue=c.location;z=ue.protocol,v=v?v+"."+ue.hostname:ue.hostname,ue=+ue.port;var ye=new fn(null);z&&ur(ye,z),v&&(ye.g=v),ue&&lr(ye,ue),A&&(ye.l=A),z=ye}return A=m.D,v=m.ya,A&&v&&Ct(z,A,v),Ct(z,"VER",m.la),Do(m,z),z}function Mf(m,v,A){if(v&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=m.Ca&&!m.pa?new Ut(new _a({eb:A})):new Ut(m.pa),v.Ha(m.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pf(){}t=Pf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function wu(){}wu.prototype.g=function(m,v){return new Vr(m,v)};function Vr(m,v){fe.call(this),this.g=new bu(v),this.l=m,this.h=v&&v.messageUrlParams||null,m=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(m?m["X-WebChannel-Content-Type"]=v.messageContentType:m={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(m?m["X-WebChannel-Client-Profile"]=v.va:m={"X-WebChannel-Client-Profile":v.va}),this.g.S=m,(m=v&&v.Sb)&&!F(m)&&(this.g.m=m),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!F(v)&&(this.g.D=v,m=this.h,m!==null&&v in m&&(m=this.h,v in m&&delete m[v])),this.j=new ps(this)}w(Vr,fe),Vr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vr.prototype.close=function(){sc(this.g)},Vr.prototype.o=function(m){var v=this.g;if(typeof m=="string"){var A={};A.__data__=m,m=A}else this.u&&(A={},A.__data__=vt(m),m=A);v.i.push(new _n(v.Ya++,m)),v.G==3&&Su(v)},Vr.prototype.N=function(){this.g.l=null,delete this.j,sc(this.g),delete this.g,Vr.aa.N.call(this)};function Bf(m){Rr.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var v=m.__sm__;if(v){e:{for(const A in v){m=A;break e}m=void 0}(this.i=m)&&(m=this.i,v=v!==null&&m in v?v[m]:void 0),this.data=v}else this.data=m}w(Bf,Rr);function Uf(){Tr.call(this),this.status=1}w(Uf,Tr);function ps(m){this.g=m}w(ps,Pf),ps.prototype.ua=function(){be(this.g,"a")},ps.prototype.ta=function(m){be(this.g,new Bf(m))},ps.prototype.sa=function(m){be(this.g,new Uf)},ps.prototype.ra=function(){be(this.g,"b")},wu.prototype.createWebChannel=wu.prototype.g,Vr.prototype.send=Vr.prototype.o,Vr.prototype.open=Vr.prototype.m,Vr.prototype.close=Vr.prototype.close,GI=function(){return new wu},YI=function(){return ri()},qI=jr,aE={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},si.NO_ERROR=0,si.TIMEOUT=8,si.HTTP_ERROR=6,hm=si,kr.COMPLETE="complete",jI=kr,_r.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",fe.prototype.listen=fe.prototype.K,mh=_r,Ut.prototype.listenOnce=Ut.prototype.L,Ut.prototype.getLastError=Ut.prototype.Ka,Ut.prototype.getLastErrorCode=Ut.prototype.Ba,Ut.prototype.getStatus=Ut.prototype.Z,Ut.prototype.getResponseJson=Ut.prototype.Oa,Ut.prototype.getResponseText=Ut.prototype.oa,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Ha,zI=Ut}).apply(typeof Qd<"u"?Qd:typeof self<"u"?self:typeof window<"u"?window:{});const bA="@firebase/firestore",vA="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ar.UNAUTHENTICATED=new Ar(null),Ar.GOOGLE_CREDENTIALS=new Ar("google-credentials-uid"),Ar.FIRST_PARTY=new Ar("first-party-uid"),Ar.MOCK_USER=new Ar("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=new f_("@firebase/firestore");function ul(){return su.logLevel}function Be(t,...e){if(su.logLevel<=Et.DEBUG){const n=e.map(p_);su.debug(`Firestore (${Fl}): ${t}`,...n)}}function ma(t,...e){if(su.logLevel<=Et.ERROR){const n=e.map(p_);su.error(`Firestore (${Fl}): ${t}`,...n)}}function Rl(t,...e){if(su.logLevel<=Et.WARN){const n=e.map(p_);su.warn(`Firestore (${Fl}): ${t}`,...n)}}function p_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,$I(t,r,n)}function $I(t,e,n){let r=`FIRESTORE (${Fl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ma(r),new Error(r)}function Vt(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||$I(e,s,r)}function it(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends Ps{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ar.UNAUTHENTICATED))}shutdown(){}}class g8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class y8{constructor(e){this.t=e,this.currentUser=Ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Vt(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let o=new oo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new oo,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const f=o;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},c=f=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>c(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new oo)}},0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Vt(typeof r.accessToken=="string",31837,{l:r}),new KI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Vt(e===null||typeof e=="string",2055,{h:e}),new Ar(e)}}class E8{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ar.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _8{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new E8(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class SA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T8{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Vt(this.o===void 0,3512);const r=o=>{o.error!=null&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,Be("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new SA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Vt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new SA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=b8(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function ht(t,e){return t<e?-1:t>e?1:0}function oE(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ht(r,s);{const o=XI(),u=v8(o.encode(AA(t,n)),o.encode(AA(e,n)));return u!==0?u:ht(r,s)}}n+=r>65535?2:1}return ht(t.length,e.length)}function AA(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function v8(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ht(t[n],e[n]);return ht(t.length,e.length)}function Dl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=-62135596800,xA=1e6;class ln{static now(){return ln.fromMillis(Date.now())}static fromDate(e){return ln.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*xA);return new ln(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ue(Ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ue(Ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<wA)throw new Ue(Ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(Ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xA}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-wA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{static fromTimestamp(e){return new nt(e)}static min(){return new nt(new ln(0,0))}static max(){return new nt(new ln(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="__name__";class As{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ze(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ze(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return As.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof As?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=As.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return ht(e.length,n.length)}static compareSegments(e,n){const r=As.isNumericId(e),s=As.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?As.extractNumericId(e).compare(As.extractNumericId(n)):oE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ao.fromString(e.substring(4,e.length-2))}}class un extends As{construct(e,n,r){return new un(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(Ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new un(n)}static emptyPath(){return new un([])}}const S8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yr extends As{construct(e,n,r){return new yr(e,n,r)}static isValidIdentifier(e){return S8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===IA}static keyField(){return new yr([IA])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Ue(Ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Ue(Ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ue(Ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else c==="`"?(u=!u,s++):c!=="."||u?(r+=c,s++):(o(),s++)}if(o(),u)throw new Ue(Ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yr(n)}static emptyPath(){return new yr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(un.fromString(e))}static fromName(e){return new $e(un.fromString(e).popFirst(5))}static empty(){return new $e(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&un.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return un.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new un(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=-1;function A8(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=nt.fromTimestamp(r===1e9?new ln(n+1,0):new ln(n,r));return new ho(s,$e.empty(),e)}function w8(t){return new ho(t.readTime,t.key,jh)}class ho{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ho(nt.min(),$e.empty(),jh)}static max(){return new ho(nt.max(),$e.empty(),jh)}}function x8(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$e.comparator(t.documentKey,e.documentKey),n!==0?n:ht(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class C8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(t){if(t.code!==Ae.FAILED_PRECONDITION||t.message!==I8)throw t;Be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new we((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof we?n:we.resolve(n)}catch(n){return we.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):we.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):we.reject(n)}static resolve(e){return new we((n,r)=>{n(e)})}static reject(e){return new we((n,r)=>{r(e)})}static waitFor(e){return new we((n,r)=>{let s=0,o=0,u=!1;e.forEach(c=>{++s,c.next(()=>{++o,u&&o===s&&n()},f=>r(f))}),u=!0,o===s&&n()})}static or(e){let n=we.resolve(!1);for(const r of e)n=n.next(s=>s?we.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new we((r,s)=>{const o=e.length,u=new Array(o);let c=0;for(let f=0;f<o;f++){const d=f;n(e[d]).next(p=>{u[d]=p,++c,c===o&&r(u)},p=>s(p))}})}static doWhile(e,n){return new we((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function N8(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}g0.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=-1;function y0(t){return t==null}function Bm(t){return t===0&&1/t==-1/0}function R8(t){return typeof t=="number"&&Number.isInteger(t)&&!Bm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="";function D8(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=CA(e)),e=O8(t.get(n),e);return CA(e)}function O8(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case WI:n+="";break;default:n+=o}}return n}function CA(t){return t+WI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Eo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ZI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){this.comparator=e,this.root=n||gr.EMPTY}insert(e,n){return new yn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gr.BLACK,null,null))}remove(e){return new yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wd(this.root,e,this.comparator,!0)}}class Wd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gr{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??gr.RED,this.left=s??gr.EMPTY,this.right=o??gr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new gr(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return gr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return gr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ze(27949);return e+(this.isRed()?0:1)}}gr.EMPTY=null,gr.RED=!0,gr.BLACK=!1;gr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ze(57766)}get value(){throw Ze(16141)}get color(){throw Ze(16727)}get left(){throw Ze(29726)}get right(){throw Ze(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new gr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.comparator=e,this.data=new yn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new RA(this.data.getIterator())}getIteratorFrom(e){return new RA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $n(this.comparator);return n.data=e,n}}class RA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.fields=e,e.sort(yr.comparator)}static empty(){return new yi([])}unionWith(e){let n=new $n(yr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new yi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Dl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new JI("Invalid base64 string: "+o):o}}(e);return new Er(n)}static fromUint8Array(e){const n=function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o}(e);return new Er(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Er.EMPTY_BYTE_STRING=new Er("");const k8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fo(t){if(Vt(!!t,39018),typeof t=="string"){let e=0;const n=k8.exec(t);if(Vt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Cn(t.seconds),nanos:Cn(t.nanos)}}function Cn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mo(t){return typeof t=="string"?Er.fromBase64String(t):Er.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="server_timestamp",tC="__type__",nC="__previous_value__",rC="__local_write_time__";function y_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[tC])===null||n===void 0?void 0:n.stringValue)===eC}function E0(t){const e=t.mapValue.fields[nC];return y_(e)?E0(e):e}function qh(t){const e=fo(t.mapValue.fields[rC].timestampValue);return new ln(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e,n,r,s,o,u,c,f,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=p}}const Um="(default)";class Yh{constructor(e,n){this.projectId=e,this.database=n||Um}static empty(){return new Yh("","")}get isDefaultDatabase(){return this.database===Um}isEqual(e){return e instanceof Yh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="__type__",M8="__max__",Zd={mapValue:{}},sC="__vector__",Vm="value";function po(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?y_(t)?4:B8(t)?9007199254740991:P8(t)?10:11:Ze(28295,{value:t})}function ks(t,e){if(t===e)return!0;const n=po(t);if(n!==po(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qh(t).isEqual(qh(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=fo(s.timestampValue),c=fo(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return mo(s.bytesValue).isEqual(mo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return Cn(s.geoPointValue.latitude)===Cn(o.geoPointValue.latitude)&&Cn(s.geoPointValue.longitude)===Cn(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Cn(s.integerValue)===Cn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=Cn(s.doubleValue),c=Cn(o.doubleValue);return u===c?Bm(u)===Bm(c):isNaN(u)&&isNaN(c)}return!1}(t,e);case 9:return Dl(t.arrayValue.values||[],e.arrayValue.values||[],ks);case 10:case 11:return function(s,o){const u=s.mapValue.fields||{},c=o.mapValue.fields||{};if(NA(u)!==NA(c))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(c[f]===void 0||!ks(u[f],c[f])))return!1;return!0}(t,e);default:return Ze(52216,{left:t})}}function Gh(t,e){return(t.values||[]).find(n=>ks(n,e))!==void 0}function Ol(t,e){if(t===e)return 0;const n=po(t),r=po(e);if(n!==r)return ht(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ht(t.booleanValue,e.booleanValue);case 2:return function(o,u){const c=Cn(o.integerValue||o.doubleValue),f=Cn(u.integerValue||u.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(t,e);case 3:return DA(t.timestampValue,e.timestampValue);case 4:return DA(qh(t),qh(e));case 5:return oE(t.stringValue,e.stringValue);case 6:return function(o,u){const c=mo(o),f=mo(u);return c.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(o,u){const c=o.split("/"),f=u.split("/");for(let d=0;d<c.length&&d<f.length;d++){const p=ht(c[d],f[d]);if(p!==0)return p}return ht(c.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,u){const c=ht(Cn(o.latitude),Cn(u.latitude));return c!==0?c:ht(Cn(o.longitude),Cn(u.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return OA(t.arrayValue,e.arrayValue);case 10:return function(o,u){var c,f,d,p;const y=o.fields||{},T=u.fields||{},b=(c=y[Vm])===null||c===void 0?void 0:c.arrayValue,w=(f=T[Vm])===null||f===void 0?void 0:f.arrayValue,N=ht(((d=b?.values)===null||d===void 0?void 0:d.length)||0,((p=w?.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:OA(b,w)}(t.mapValue,e.mapValue);case 11:return function(o,u){if(o===Zd.mapValue&&u===Zd.mapValue)return 0;if(o===Zd.mapValue)return 1;if(u===Zd.mapValue)return-1;const c=o.fields||{},f=Object.keys(c),d=u.fields||{},p=Object.keys(d);f.sort(),p.sort();for(let y=0;y<f.length&&y<p.length;++y){const T=oE(f[y],p[y]);if(T!==0)return T;const b=Ol(c[f[y]],d[p[y]]);if(b!==0)return b}return ht(f.length,p.length)}(t.mapValue,e.mapValue);default:throw Ze(23264,{Pe:n})}}function DA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ht(t,e);const n=fo(t),r=fo(e),s=ht(n.seconds,r.seconds);return s!==0?s:ht(n.nanos,r.nanos)}function OA(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=Ol(n[s],r[s]);if(o)return o}return ht(n.length,r.length)}function kl(t){return uE(t)}function uE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=fo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return mo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $e.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=uE(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const u of r)o?o=!1:s+=",",s+=`${u}:${uE(n.fields[u])}`;return s+"}"}(t.mapValue):Ze(61005,{value:t})}function fm(t){switch(po(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=E0(t);return e?16+fm(e):16;case 5:return 2*t.stringValue.length;case 6:return mo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+fm(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Eo(r.fields,(o,u)=>{s+=o.length+fm(u)}),s}(t.mapValue);default:throw Ze(13486,{value:t})}}function kA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function lE(t){return!!t&&"integerValue"in t}function E_(t){return!!t&&"arrayValue"in t}function LA(t){return!!t&&"nullValue"in t}function MA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dm(t){return!!t&&"mapValue"in t}function P8(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[iC])===null||n===void 0?void 0:n.stringValue)===sC}function Th(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Eo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Th(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Th(t.arrayValue.values[n]);return e}return Object.assign({},t)}function B8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===M8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.value=e}static empty(){return new Zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Th(n)}setAll(e){let n=yr.emptyPath(),r={},s=[];e.forEach((u,c)=>{if(!n.isImmediateParentOf(c)){const f=this.getFieldsMap(n);this.applyChanges(f,r,s),r={},s=[],n=c.popLast()}u?r[c.lastSegment()]=Th(u):s.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());dm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ks(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];dm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Eo(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Zr(Th(this.value))}}function aC(t){const e=[];return Eo(t.fields,(n,r)=>{const s=new yr([n]);if(dm(r)){const o=aC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const u of o)e.push(s.child(u))}else e.push(s)}),new yi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,r,s,o,u,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=u,this.documentState=c}static newInvalidDocument(e){return new wr(e,0,nt.min(),nt.min(),nt.min(),Zr.empty(),0)}static newFoundDocument(e,n,r,s){return new wr(e,1,n,nt.min(),r,s,0)}static newNoDocument(e,n){return new wr(e,2,n,nt.min(),nt.min(),Zr.empty(),0)}static newUnknownDocument(e,n){return new wr(e,3,n,nt.min(),nt.min(),Zr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n){this.position=e,this.inclusive=n}}function PA(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],u=t.position[s];if(o.field.isKeyField()?r=$e.comparator($e.fromName(u.referenceValue),n.key):r=Ol(u,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function BA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ks(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n="asc"){this.field=e,this.dir=n}}function U8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{}class Bn extends oC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new H8(e,n,r):n==="array-contains"?new j8(e,r):n==="in"?new q8(e,r):n==="not-in"?new Y8(e,r):n==="array-contains-any"?new G8(e,r):new Bn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new F8(e,r):new z8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ol(n,this.value)):n!==null&&po(this.value)===po(n)&&this.matchesComparison(Ol(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ns extends oC{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new ns(e,n)}matches(e){return uC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function uC(t){return t.op==="and"}function lC(t){return V8(t)&&uC(t)}function V8(t){for(const e of t.filters)if(e instanceof ns)return!1;return!0}function cE(t){if(t instanceof Bn)return t.field.canonicalString()+t.op.toString()+kl(t.value);if(lC(t))return t.filters.map(e=>cE(e)).join(",");{const e=t.filters.map(n=>cE(n)).join(",");return`${t.op}(${e})`}}function cC(t,e){return t instanceof Bn?function(r,s){return s instanceof Bn&&r.op===s.op&&r.field.isEqual(s.field)&&ks(r.value,s.value)}(t,e):t instanceof ns?function(r,s){return s instanceof ns&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,u,c)=>o&&cC(u,s.filters[c]),!0):!1}(t,e):void Ze(19439)}function hC(t){return t instanceof Bn?function(n){return`${n.field.canonicalString()} ${n.op} ${kl(n.value)}`}(t):t instanceof ns?function(n){return n.op.toString()+" {"+n.getFilters().map(hC).join(" ,")+"}"}(t):"Filter"}class H8 extends Bn{constructor(e,n,r){super(e,n,r),this.key=$e.fromName(r.referenceValue)}matches(e){const n=$e.comparator(e.key,this.key);return this.matchesComparison(n)}}class F8 extends Bn{constructor(e,n){super(e,"in",n),this.keys=fC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class z8 extends Bn{constructor(e,n){super(e,"not-in",n),this.keys=fC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function fC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$e.fromName(r.referenceValue))}class j8 extends Bn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return E_(n)&&Gh(n.arrayValue,this.value)}}class q8 extends Bn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gh(this.value.arrayValue,n)}}class Y8 extends Bn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Gh(this.value.arrayValue,n)}}class G8 extends Bn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!E_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e,n=null,r=[],s=[],o=null,u=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=u,this.endAt=c,this.Ie=null}}function UA(t,e=null,n=[],r=[],s=null,o=null,u=null){return new $8(t,e,n,r,s,o,u)}function __(t){const e=it(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),y0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>kl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>kl(r)).join(",")),e.Ie=n}return e.Ie}function T_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!U8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!BA(t.startAt,e.startAt)&&BA(t.endAt,e.endAt)}function hE(t){return $e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n=null,r=[],s=[],o=null,u="F",c=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=u,this.startAt=c,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function K8(t,e,n,r,s,o,u,c){return new ql(t,e,n,r,s,o,u,c)}function dC(t){return new ql(t)}function VA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mC(t){return t.collectionGroup!==null}function bh(t){const e=it(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let c=new $n(yr.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new $h(o,r))}),n.has(yr.keyField().canonicalString())||e.Ee.push(new $h(yr.keyField(),r))}return e.Ee}function Ns(t){const e=it(t);return e.de||(e.de=X8(e,bh(t))),e.de}function X8(t,e){if(t.limitType==="F")return UA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new $h(s.field,o)});const n=t.endAt?new Hm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hm(t.startAt.position,t.startAt.inclusive):null;return UA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function fE(t,e){const n=t.filters.concat([e]);return new ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dE(t,e,n){return new ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _0(t,e){return T_(Ns(t),Ns(e))&&t.limitType===e.limitType}function pC(t){return`${__(Ns(t))}|lt:${t.limitType}`}function ll(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>hC(s)).join(", ")}]`),y0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>kl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>kl(s)).join(",")),`Target(${r})`}(Ns(t))}; limitType=${t.limitType})`}function T0(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$e.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of bh(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(u,c,f){const d=PA(u,c,f);return u.inclusive?d<=0:d<0}(r.startAt,bh(r),s)||r.endAt&&!function(u,c,f){const d=PA(u,c,f);return u.inclusive?d>=0:d>0}(r.endAt,bh(r),s))}(t,e)}function Q8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gC(t){return(e,n)=>{let r=!1;for(const s of bh(t)){const o=W8(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function W8(t,e,n){const r=t.field.isKeyField()?$e.comparator(e.key,n.key):function(o,u,c){const f=u.data.field(o),d=c.data.field(o);return f!==null&&d!==null?Ol(f,d):Ze(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ze(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return ZI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8=new yn($e.comparator);function pa(){return Z8}const yC=new yn($e.comparator);function ph(...t){let e=yC;for(const n of t)e=e.insert(n.key,n);return e}function EC(t){let e=yC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zo(){return vh()}function _C(){return vh()}function vh(){return new hu(t=>t.toString(),(t,e)=>t.isEqual(e))}const J8=new yn($e.comparator),e9=new $n($e.comparator);function _t(...t){let e=e9;for(const n of t)e=e.add(n);return e}const t9=new $n(ht);function n9(){return t9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bm(e)?"-0":e}}function TC(t){return{integerValue:""+t}}function r9(t,e){return R8(e)?TC(e):b_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(){this._=void 0}}function i9(t,e,n){return t instanceof Fm?function(s,o){const u={fields:{[tC]:{stringValue:eC},[rC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&y_(o)&&(o=E0(o)),o&&(u.fields[nC]=o),{mapValue:u}}(n,e):t instanceof Kh?vC(t,e):t instanceof Xh?SC(t,e):function(s,o){const u=bC(s,o),c=HA(u)+HA(s.Re);return lE(u)&&lE(s.Re)?TC(c):b_(s.serializer,c)}(t,e)}function s9(t,e,n){return t instanceof Kh?vC(t,e):t instanceof Xh?SC(t,e):n}function bC(t,e){return t instanceof zm?function(r){return lE(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Fm extends b0{}class Kh extends b0{constructor(e){super(),this.elements=e}}function vC(t,e){const n=AC(e);for(const r of t.elements)n.some(s=>ks(s,r))||n.push(r);return{arrayValue:{values:n}}}class Xh extends b0{constructor(e){super(),this.elements=e}}function SC(t,e){let n=AC(e);for(const r of t.elements)n=n.filter(s=>!ks(s,r));return{arrayValue:{values:n}}}class zm extends b0{constructor(e,n){super(),this.serializer=e,this.Re=n}}function HA(t){return Cn(t.integerValue||t.doubleValue)}function AC(t){return E_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function a9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Kh&&s instanceof Kh||r instanceof Xh&&s instanceof Xh?Dl(r.elements,s.elements,ks):r instanceof zm&&s instanceof zm?ks(r.Re,s.Re):r instanceof Fm&&s instanceof Fm}(t.transform,e.transform)}class o9{constructor(e,n){this.version=e,this.transformResults=n}}class _i{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _i}static exists(e){return new _i(void 0,e)}static updateTime(e){return new _i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class v0{}function wC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new S0(t.key,_i.none()):new cf(t.key,t.data,_i.none());{const n=t.data,r=Zr.empty();let s=new $n(yr.comparator);for(let o of e.fields)if(!s.has(o)){let u=n.field(o);u===null&&o.length>1&&(o=o.popLast(),u=n.field(o)),u===null?r.delete(o):r.set(o,u),s=s.add(o)}return new _o(t.key,r,new yi(s.toArray()),_i.none())}}function u9(t,e,n){t instanceof cf?function(s,o,u){const c=s.value.clone(),f=zA(s.fieldTransforms,o,u.transformResults);c.setAll(f),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(t,e,n):t instanceof _o?function(s,o,u){if(!mm(s.precondition,o))return void o.convertToUnknownDocument(u.version);const c=zA(s.fieldTransforms,o,u.transformResults),f=o.data;f.setAll(xC(s)),f.setAll(c),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(t,e,n):function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,n)}function Sh(t,e,n,r){return t instanceof cf?function(o,u,c,f){if(!mm(o.precondition,u))return c;const d=o.value.clone(),p=jA(o.fieldTransforms,f,u);return d.setAll(p),u.convertToFoundDocument(u.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof _o?function(o,u,c,f){if(!mm(o.precondition,u))return c;const d=jA(o.fieldTransforms,f,u),p=u.data;return p.setAll(xC(o)),p.setAll(d),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(o,u,c){return mm(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c}(t,e,n)}function l9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=bC(r.transform,s||null);o!=null&&(n===null&&(n=Zr.empty()),n.set(r.field,o))}return n||null}function FA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Dl(r,s,(o,u)=>a9(o,u))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cf extends v0{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class _o extends v0{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function xC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zA(t,e,n){const r=new Map;Vt(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const o=t[s],u=o.transform,c=e.data.field(o.field);r.set(o.field,s9(u,c,n[s]))}return r}function jA(t,e,n){const r=new Map;for(const s of t){const o=s.transform,u=n.data.field(s.field);r.set(s.field,i9(o,u,e))}return r}class S0 extends v0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class c9 extends v0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&u9(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Sh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Sh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_C();return this.mutations.forEach(s=>{const o=e.get(s.key),u=o.overlayedDocument;let c=this.applyToLocalView(u,o.mutatedFields);c=n.has(s.key)?null:c;const f=wC(u,c);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(nt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_t())}isEqual(e){return this.batchId===e.batchId&&Dl(this.mutations,e.mutations,(n,r)=>FA(n,r))&&Dl(this.baseMutations,e.baseMutations,(n,r)=>FA(n,r))}}class v_{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Vt(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return J8}();const o=e.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,r[u].version);return new v_(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ln,It;function m9(t){switch(t){case Ae.OK:return Ze(64938);case Ae.CANCELLED:case Ae.UNKNOWN:case Ae.DEADLINE_EXCEEDED:case Ae.RESOURCE_EXHAUSTED:case Ae.INTERNAL:case Ae.UNAVAILABLE:case Ae.UNAUTHENTICATED:return!1;case Ae.INVALID_ARGUMENT:case Ae.NOT_FOUND:case Ae.ALREADY_EXISTS:case Ae.PERMISSION_DENIED:case Ae.FAILED_PRECONDITION:case Ae.ABORTED:case Ae.OUT_OF_RANGE:case Ae.UNIMPLEMENTED:case Ae.DATA_LOSS:return!0;default:return Ze(15467,{code:t})}}function IC(t){if(t===void 0)return ma("GRPC error has no .code"),Ae.UNKNOWN;switch(t){case Ln.OK:return Ae.OK;case Ln.CANCELLED:return Ae.CANCELLED;case Ln.UNKNOWN:return Ae.UNKNOWN;case Ln.DEADLINE_EXCEEDED:return Ae.DEADLINE_EXCEEDED;case Ln.RESOURCE_EXHAUSTED:return Ae.RESOURCE_EXHAUSTED;case Ln.INTERNAL:return Ae.INTERNAL;case Ln.UNAVAILABLE:return Ae.UNAVAILABLE;case Ln.UNAUTHENTICATED:return Ae.UNAUTHENTICATED;case Ln.INVALID_ARGUMENT:return Ae.INVALID_ARGUMENT;case Ln.NOT_FOUND:return Ae.NOT_FOUND;case Ln.ALREADY_EXISTS:return Ae.ALREADY_EXISTS;case Ln.PERMISSION_DENIED:return Ae.PERMISSION_DENIED;case Ln.FAILED_PRECONDITION:return Ae.FAILED_PRECONDITION;case Ln.ABORTED:return Ae.ABORTED;case Ln.OUT_OF_RANGE:return Ae.OUT_OF_RANGE;case Ln.UNIMPLEMENTED:return Ae.UNIMPLEMENTED;case Ln.DATA_LOSS:return Ae.DATA_LOSS;default:return Ze(39323,{code:t})}}(It=Ln||(Ln={}))[It.OK=0]="OK",It[It.CANCELLED=1]="CANCELLED",It[It.UNKNOWN=2]="UNKNOWN",It[It.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",It[It.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",It[It.NOT_FOUND=5]="NOT_FOUND",It[It.ALREADY_EXISTS=6]="ALREADY_EXISTS",It[It.PERMISSION_DENIED=7]="PERMISSION_DENIED",It[It.UNAUTHENTICATED=16]="UNAUTHENTICATED",It[It.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",It[It.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",It[It.ABORTED=10]="ABORTED",It[It.OUT_OF_RANGE=11]="OUT_OF_RANGE",It[It.UNIMPLEMENTED=12]="UNIMPLEMENTED",It[It.INTERNAL=13]="INTERNAL",It[It.UNAVAILABLE=14]="UNAVAILABLE",It[It.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9=new ao([4294967295,4294967295],0);function qA(t){const e=XI().encode(t),n=new FI;return n.update(e),new Uint8Array(n.digest())}function YA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ao([n,r],0),new ao([s,o],0)]}class S_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new gh(`Invalid padding: ${n}`);if(r<0)throw new gh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new gh(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ao.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(ao.fromNumber(r)));return s.compare(p9)===1&&(s=new ao([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=qA(e),[r,s]=YA(n);for(let o=0;o<this.hashCount;o++){const u=this.we(r,s,o);if(!this.be(u))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new S_(o,s,n);return r.forEach(c=>u.insert(c)),u}insert(e){if(this.pe===0)return;const n=qA(e),[r,s]=YA(n);for(let o=0;o<this.hashCount;o++){const u=this.we(r,s,o);this.Se(u)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class gh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,hf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new A0(nt.min(),s,new yn(ht),pa(),_t())}}class hf{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new hf(r,n,_t(),_t(),_t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class CC{constructor(e,n){this.targetId=e,this.Ce=n}}class NC{constructor(e,n,r=Er.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class GA{constructor(){this.Fe=0,this.Me=$A(),this.xe=Er.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=_t(),n=_t(),r=_t();return this.Me.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ze(38017,{changeType:o})}}),new hf(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=$A()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Vt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class g9{constructor(e){this.ze=e,this.je=new Map,this.He=pa(),this.Je=Jd(),this.Ye=Jd(),this.Ze=new yn(ht)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Ze(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const o=s.target;if(hE(o))if(r===0){const u=new $e(o.path);this.tt(n,u,wr.newNoDocument(u,nt.min()))}else Vt(r===1,20013,{expectedCount:r});else{const u=this.ut(n);if(u!==r){const c=this.ct(e),f=c?this.lt(c,e,u):1;if(f!==0){this.st(n);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let u,c;try{u=mo(r).toUint8Array()}catch(f){if(f instanceof JI)return Rl("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{c=new S_(u,s,o)}catch(f){return Rl(f instanceof gh?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return c.pe===0?null:c}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const u=this.ze.Pt(),c=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,o,null),s++)}),s}It(e){const n=new Map;this.je.forEach((o,u)=>{const c=this._t(u);if(c){if(o.current&&hE(c.target)){const f=new $e(c.target.path);this.Et(f).has(u)||this.dt(u,f)||this.tt(u,f,wr.newNoDocument(f,e))}o.Le&&(n.set(u,o.qe()),o.Qe())}});let r=_t();this.Ye.forEach((o,u)=>{let c=!0;u.forEachWhile(f=>{const d=this._t(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.He.forEach((o,u)=>u.setReadTime(e));const s=new A0(e,n,this.Ze,this.He,r);return this.He=pa(),this.Je=Jd(),this.Ye=Jd(),this.Ze=new yn(ht),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new GA,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new $n(ht),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new $n(ht),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Be("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new GA),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Jd(){return new yn($e.comparator)}function $A(){return new yn($e.comparator)}const y9={asc:"ASCENDING",desc:"DESCENDING"},E9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_9={and:"AND",or:"OR"};class T9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mE(t,e){return t.useProto3Json||y0(e)?e:{value:e}}function jm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function b9(t,e){return jm(t,e.toTimestamp())}function Rs(t){return Vt(!!t,49232),nt.fromTimestamp(function(n){const r=fo(n);return new ln(r.seconds,r.nanos)}(t))}function A_(t,e){return pE(t,e).canonicalString()}function pE(t,e){const n=function(s){return new un(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function DC(t){const e=un.fromString(t);return Vt(PC(e),10190,{key:e.toString()}),e}function gE(t,e){return A_(t.databaseId,e.path)}function py(t,e){const n=DC(e);if(n.get(1)!==t.databaseId.projectId)throw new Ue(Ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ue(Ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $e(kC(n))}function OC(t,e){return A_(t.databaseId,e)}function v9(t){const e=DC(t);return e.length===4?un.emptyPath():kC(e)}function yE(t){return new un(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kC(t){return Vt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function KA(t,e,n){return{name:gE(t,e),fields:n.value.mapValue.fields}}function S9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ze(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(d,p){return d.useProto3Json?(Vt(p===void 0||typeof p=="string",58123),Er.fromBase64String(p||"")):(Vt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Er.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),u=e.targetChange.cause,c=u&&function(d){const p=d.code===void 0?Ae.UNKNOWN:IC(d.code);return new Ue(p,d.message||"")}(u);n=new NC(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=py(t,r.document.name),o=Rs(r.document.updateTime),u=r.document.createTime?Rs(r.document.createTime):nt.min(),c=new Zr({mapValue:{fields:r.document.fields}}),f=wr.newFoundDocument(s,o,u,c),d=r.targetIds||[],p=r.removedTargetIds||[];n=new pm(d,p,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=py(t,r.document),o=r.readTime?Rs(r.readTime):nt.min(),u=wr.newNoDocument(s,o),c=r.removedTargetIds||[];n=new pm([],c,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=py(t,r.document),o=r.removedTargetIds||[];n=new pm([],o,s,null)}else{if(!("filter"in e))return Ze(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,u=new d9(s,o),c=r.targetId;n=new CC(c,u)}}return n}function A9(t,e){let n;if(e instanceof cf)n={update:KA(t,e.key,e.value)};else if(e instanceof S0)n={delete:gE(t,e.key)};else if(e instanceof _o)n={update:KA(t,e.key,e.data),updateMask:k9(e.fieldMask)};else{if(!(e instanceof c9))return Ze(16599,{ft:e.type});n={verify:gE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const c=u.transform;if(c instanceof Fm)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Kh)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xh)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof zm)return{fieldPath:u.field.canonicalString(),increment:c.Re};throw Ze(20930,{transform:u.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:b9(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ze(27497)}(t,e.precondition)),n}function w9(t,e){return t&&t.length>0?(Vt(e!==void 0,14353),t.map(n=>function(s,o){let u=s.updateTime?Rs(s.updateTime):Rs(o);return u.isEqual(nt.min())&&(u=Rs(o)),new o9(u,s.transformResults||[])}(n,e))):[]}function x9(t,e){return{documents:[OC(t,e.path)]}}function I9(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=OC(t,s);const o=function(d){if(d.length!==0)return MC(ns.create(d,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const u=function(d){if(d.length!==0)return d.map(p=>function(T){return{field:cl(T.field),direction:R9(T.dir)}}(p))}(e.orderBy);u&&(n.structuredQuery.orderBy=u);const c=mE(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:s}}function C9(t){let e=v9(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Vt(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=function(y){const T=LC(y);return T instanceof ns&&lC(T)?T.getFilters():[T]}(n.where));let u=[];n.orderBy&&(u=function(y){return y.map(T=>function(w){return new $h(hl(w.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(T))}(n.orderBy));let c=null;n.limit&&(c=function(y){let T;return T=typeof y=="object"?y.value:y,y0(T)?null:T}(n.limit));let f=null;n.startAt&&(f=function(y){const T=!!y.before,b=y.values||[];return new Hm(b,T)}(n.startAt));let d=null;return n.endAt&&(d=function(y){const T=!y.before,b=y.values||[];return new Hm(b,T)}(n.endAt)),K8(e,s,u,o,c,"F",f,d)}function N9(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ze(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function LC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=hl(n.unaryFilter.field);return Bn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=hl(n.unaryFilter.field);return Bn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=hl(n.unaryFilter.field);return Bn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=hl(n.unaryFilter.field);return Bn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ze(61313);default:return Ze(60726)}}(t):t.fieldFilter!==void 0?function(n){return Bn.create(hl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ze(58110);default:return Ze(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ns.create(n.compositeFilter.filters.map(r=>LC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ze(1026)}}(n.compositeFilter.op))}(t):Ze(30097,{filter:t})}function R9(t){return y9[t]}function D9(t){return E9[t]}function O9(t){return _9[t]}function cl(t){return{fieldPath:t.canonicalString()}}function hl(t){return yr.fromServerFormat(t.fieldPath)}function MC(t){return t instanceof Bn?function(n){if(n.op==="=="){if(MA(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NAN"}};if(LA(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(MA(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NAN"}};if(LA(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cl(n.field),op:D9(n.op),value:n.value}}}(t):t instanceof ns?function(n){const r=n.getFilters().map(s=>MC(s));return r.length===1?r[0]:{compositeFilter:{op:O9(n.op),filters:r}}}(t):Ze(54877,{filter:t})}function k9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function PC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n,r,s,o=nt.min(),u=nt.min(),c=Er.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new eo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e){this.wt=e}}function M9(t){const e=C9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dE(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(){this.Cn=new B9}addToCollectionParentIndex(e,n){return this.Cn.add(n),we.resolve()}getCollectionParents(e,n){return we.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return we.resolve()}deleteFieldIndex(e,n){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,n){return we.resolve()}getDocumentsMatchingTarget(e,n){return we.resolve(null)}getIndexType(e,n){return we.resolve(0)}getFieldIndexes(e,n){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,n){return we.resolve(ho.min())}getMinOffsetFromCollectionGroup(e,n){return we.resolve(ho.min())}updateCollectionGroup(e,n,r){return we.resolve()}updateIndexEntries(e,n){return we.resolve()}}class B9{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new $n(un.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new $n(un.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BC=41943040;class Qr{static withCacheSize(e){return new Qr(e,Qr.DEFAULT_COLLECTION_PERCENTILE,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qr.DEFAULT_COLLECTION_PERCENTILE=10,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qr.DEFAULT=new Qr(BC,Qr.DEFAULT_COLLECTION_PERCENTILE,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qr.DISABLED=new Qr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ll(0)}static lr(){return new Ll(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="LruGarbageCollector",U9=1048576;function WA([t,e],[n,r]){const s=ht(t,n);return s===0?ht(e,r):s}class V9{constructor(e){this.Er=e,this.buffer=new $n(WA),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();WA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class H9{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Be(QA,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){jl(n)?Be(QA,"Ignoring IndexedDB error during garbage collection: ",n):await zl(n)}await this.mr(3e5)})}}class F9{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return we.resolve(g0.le);const r=new V9(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(XA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XA):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,o,u,c,f,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,u=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(r=y,c=Date.now(),this.removeTargets(e,r,n))).next(y=>(o=y,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(d=Date.now(),ul()<=Et.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-p}ms
	Determined least recently used ${s} in `+(c-u)+`ms
	Removed ${o} targets in `+(f-c)+`ms
	Removed ${y} documents in `+(d-f)+`ms
Total Duration: ${d-p}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y})))}}function z9(t,e){return new F9(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(){this.changes=new hu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?we.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Sh(r.mutation,s,yi.empty(),ln.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_t()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_t()){const s=Zo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let u=ph();return o.forEach((c,f)=>{u=u.insert(c,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,n){const r=Zo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_t()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((u,c)=>{n.set(u,c)})})}computeViews(e,n,r,s){let o=pa();const u=vh(),c=function(){return vh()}();return n.forEach((f,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof _o)?o=o.insert(d.key,d):p!==void 0?(u.set(d.key,p.mutation.getFieldMask()),Sh(p.mutation,d,p.mutation.getFieldMask(),ln.now())):u.set(d.key,yi.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((d,p)=>u.set(d,p)),n.forEach((d,p)=>{var y;return c.set(d,new q9(p,(y=u.get(d))!==null&&y!==void 0?y:null))}),c))}recalculateAndSaveOverlays(e,n){const r=vh();let s=new yn((u,c)=>u-c),o=_t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(u=>{for(const c of u)c.keys().forEach(f=>{const d=n.get(f);if(d===null)return;let p=r.get(f)||yi.empty();p=c.applyToLocalView(d,p),r.set(f,p);const y=(s.get(c.batchId)||_t()).add(f);s=s.insert(c.batchId,y)})}).next(()=>{const u=[],c=s.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),d=f.key,p=f.value,y=_C();p.forEach(T=>{if(!o.has(T)){const b=wC(n.get(T),r.get(T));b!==null&&y.set(T,b),o=o.add(T)}}),u.push(this.documentOverlayCache.saveOverlays(e,d,y))}return we.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(u){return $e.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):we.resolve(Zo());let c=jh,f=o;return u.next(d=>we.forEach(d,(p,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(p)?we.resolve():this.remoteDocumentCache.getEntry(e,p).next(T=>{f=f.insert(p,T)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,f,d,_t())).next(p=>({batchId:c,changes:EC(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $e(n)).next(r=>{let s=ph();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let u=ph();return this.indexManager.getCollectionParents(e,o).next(c=>we.forEach(c,f=>{const d=function(y,T){return new ql(T,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((y,T)=>{u=u.insert(y,T)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(u=>{o.forEach((f,d)=>{const p=d.getKey();u.get(p)===null&&(u=u.insert(p,wr.newInvalidDocument(p)))});let c=ph();return u.forEach((f,d)=>{const p=o.get(f);p!==void 0&&Sh(p.mutation,d,yi.empty(),ln.now()),T0(n,d)&&(c=c.insert(f,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return we.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Rs(s.createTime)}}(n)),we.resolve()}getNamedQuery(e,n){return we.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:M9(s.bundledQuery),readTime:Rs(s.readTime)}}(n)),we.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(){this.overlays=new yn($e.comparator),this.Qr=new Map}getOverlay(e,n){return we.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zo();return we.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.St(e,n,o)}),we.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),we.resolve()}getOverlaysForCollection(e,n,r){const s=Zo(),o=n.length+1,u=new $e(n.child("")),c=this.overlays.getIteratorFrom(u);for(;c.hasNext();){const f=c.getNext().value,d=f.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&f.largestBatchId>r&&s.set(f.getKey(),f)}return we.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new yn((d,p)=>d-p);const u=this.overlays.getIterator();for(;u.hasNext();){const d=u.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=o.get(d.largestBatchId);p===null&&(p=Zo(),o=o.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=Zo(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=s)););return we.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new f9(n,r));let o=this.Qr.get(n);o===void 0&&(o=_t(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(){this.sessionToken=Er.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,we.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(){this.$r=new $n(ir.Ur),this.Kr=new $n(ir.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new ir(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new ir(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new $e(new un([])),r=new ir(n,e),s=new ir(n,e+1),o=[];return this.Kr.forEachInRange([r,s],u=>{this.zr(u),o.push(u.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new $e(new un([])),r=new ir(n,e),s=new ir(n,e+1);let o=_t();return this.Kr.forEachInRange([r,s],u=>{o=o.add(u.key)}),o}containsKey(e){const n=new ir(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ir{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return $e.comparator(e.key,n.key)||ht(e.Zr,n.Zr)}static Wr(e,n){return ht(e.Zr,n.Zr)||$e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new $n(ir.Ur)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new h9(o,n,r,s);this.mutationQueue.push(u);for(const c of s)this.Xr=this.Xr.add(new ir(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return we.resolve(u)}lookupMutationBatch(e,n){return we.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),o=s<0?0:s;return we.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?g_:this.nr-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ir(n,0),s=new ir(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,s],u=>{const c=this.ei(u.Zr);o.push(c)}),we.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $n(ht);return n.forEach(s=>{const o=new ir(s,0),u=new ir(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,u],c=>{r=r.add(c.Zr)})}),we.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;$e.isDocumentKey(o)||(o=o.child(""));const u=new ir(new $e(o),0);let c=new $n(ht);return this.Xr.forEachWhile(f=>{const d=f.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(f.Zr)),!0)},u),we.resolve(this.ni(c))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Vt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return we.forEach(n.mutations,s=>{const o=new ir(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new ir(n,0),s=this.Xr.firstAfterOrEqual(r);return we.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(e){this.ii=e,this.docs=function(){return new yn($e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,u=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return we.resolve(r?r.document.mutableCopy():wr.newInvalidDocument(n))}getEntries(e,n){let r=pa();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():wr.newInvalidDocument(s))}),we.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=pa();const u=n.path,c=new $e(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:d,value:{document:p}}=f.getNext();if(!u.isPrefixOf(d.path))break;d.path.length>u.length+1||x8(w8(p),r)<=0||(s.has(p.key)||T0(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return we.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Ze(9500)}si(e,n){return we.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new W9(this)}getSize(e){return we.resolve(this.size)}}class W9 extends j9{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),we.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e){this.persistence=e,this.oi=new hu(n=>__(n),T_),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this._i=0,this.ai=new w_,this.targetCount=0,this.ui=Ll.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),we.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Ll(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,we.resolve()}updateTargetData(e,n){return this.Tr(n),we.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.oi.forEach((u,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.oi.delete(u),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),we.waitFor(o).next(()=>s)}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return we.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),we.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(u=>{o.push(s.markPotentiallyOrphaned(e,u))}),we.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),we.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return we.resolve(r)}containsKey(e,n){return we.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n){this.ci={},this.overlays={},this.li=new g0(0),this.hi=!1,this.hi=!0,this.Pi=new K9,this.referenceDelegate=e(this),this.Ti=new Z9(this),this.indexManager=new P9,this.remoteDocumentCache=function(s){return new Q9(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new L9(n),this.Ei=new G9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $9,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new X9(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){Be("MemoryPersistence","Starting transaction:",e);const s=new J9(this.li.next());return this.referenceDelegate.di(),r(s).next(o=>this.referenceDelegate.Ai(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ri(e,n){return we.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class J9 extends C8{constructor(e){super(),this.currentSequenceNumber=e}}class x_{constructor(e){this.persistence=e,this.Vi=new w_,this.mi=null}static fi(e){return new x_(e)}get gi(){if(this.mi)return this.mi;throw Ze(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),we.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),we.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),we.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.gi,r=>{const s=$e.fromPath(r);return this.pi(e,s).next(o=>{o||n.removeEntry(s,nt.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return we.or([()=>we.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class qm{constructor(e,n){this.persistence=e,this.yi=new hu(r=>D8(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=z9(this,n)}static fi(e,n){return new qm(e,n)}di(){}Ai(e){return we.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return we.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(o=>o?we.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.si(e,u=>this.Dr(e,u,n).next(c=>{c||(r++,o.removeEntry(u,nt.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),we.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),we.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),we.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=fm(e.data.value)),n}Dr(e,n,r){return we.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return we.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=_t(),s=_t();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new I_(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return XP()?8:N8(Ir())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ws(e,n).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.bs(e,n,s,r).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new eB;return this.Ss(e,n,u).next(c=>{if(o.result=c,this.fs)return this.Ds(e,n,u,c.size)})}).next(()=>o.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(ul()<=Et.DEBUG&&Be("QueryEngine","SDK will not create cache indexes for query:",ll(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),we.resolve()):(ul()<=Et.DEBUG&&Be("QueryEngine","Query:",ll(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(ul()<=Et.DEBUG&&Be("QueryEngine","The SDK decides to create cache indexes for query:",ll(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ns(n))):we.resolve())}ws(e,n){if(VA(n))return we.resolve(null);let r=Ns(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=dE(n,null,"F"),r=Ns(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=_t(...o);return this.ys.getDocuments(e,u).next(c=>this.indexManager.getMinOffset(e,r).next(f=>{const d=this.vs(n,c);return this.Cs(n,d,u,f.readTime)?this.ws(e,dE(n,null,"F")):this.Fs(e,d,n,f)}))})))}bs(e,n,r,s){return VA(n)||s.isEqual(nt.min())?we.resolve(null):this.ys.getDocuments(e,r).next(o=>{const u=this.vs(n,o);return this.Cs(n,u,r,s)?we.resolve(null):(ul()<=Et.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ll(n)),this.Fs(e,u,n,A8(s,jh)).next(c=>c))})}vs(e,n){let r=new $n(gC(e));return n.forEach((s,o)=>{T0(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return ul()<=Et.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",ll(n)),this.ys.getDocumentsMatchingQuery(e,n,ho.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="LocalStore",nB=3e8;class rB{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new yn(ht),this.Os=new hu(o=>__(o),T_),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y9(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function iB(t,e,n,r){return new rB(t,e,n,r)}async function VC(t,e){const n=it(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],c=[];let f=_t();for(const d of s){u.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}for(const d of o){c.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}return n.localDocuments.getDocuments(r,f).next(d=>({ks:d,removedBatchIds:u,addedBatchIds:c}))})})}function sB(t,e){const n=it(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(c,f,d,p){const y=d.batch,T=y.keys();let b=we.resolve();return T.forEach(w=>{b=b.next(()=>p.getEntry(f,w)).next(N=>{const k=d.docVersions.get(w);Vt(k!==null,48541),N.version.compareTo(k)<0&&(y.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),p.addEntry(N)))})}),b.next(()=>c.mutationQueue.removeMutationBatch(f,y))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=_t();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(f=f.add(c.batch.mutations[d].key));return f}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function HC(t){const e=it(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function aB(t,e){const n=it(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const c=[];e.targetChanges.forEach((p,y)=>{const T=s.get(y);if(!T)return;c.push(n.Ti.removeMatchingKeys(o,p.removedDocuments,y).next(()=>n.Ti.addMatchingKeys(o,p.addedDocuments,y)));let b=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?b=b.withResumeToken(Er.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),s=s.insert(y,b),function(N,k,D){return N.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=nB?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(T,b,p)&&c.push(n.Ti.updateTargetData(o,b))});let f=pa(),d=_t();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))}),c.push(oB(o,u,e.documentUpdates).next(p=>{f=p.qs,d=p.Qs})),!r.isEqual(nt.min())){const p=n.Ti.getLastRemoteSnapshotVersion(o).next(y=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(p)}return we.waitFor(c).next(()=>u.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,f,d)).next(()=>f)}).then(o=>(n.xs=s,o))}function oB(t,e,n){let r=_t(),s=_t();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let u=pa();return n.forEach((c,f)=>{const d=o.get(c);f.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),f.isNoDocument()&&f.version.isEqual(nt.min())?(e.removeEntry(c,f.readTime),u=u.insert(c,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(f),u=u.insert(c,f)):Be(C_,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",f.version)}),{qs:u,Qs:s}})}function uB(t,e){const n=it(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=g_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lB(t,e){const n=it(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(o=>o?(s=o,we.resolve(s)):n.Ti.allocateTargetId(r).next(u=>(s=new eo(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function EE(t,e,n){const r=it(t),s=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!jl(u))throw u;Be(C_,`Failed to update sequence numbers for target ${e}: ${u}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function ZA(t,e,n){const r=it(t);let s=nt.min(),o=_t();return r.persistence.runTransaction("Execute query","readwrite",u=>function(f,d,p){const y=it(f),T=y.Os.get(p);return T!==void 0?we.resolve(y.xs.get(T)):y.Ti.getTargetData(d,p)}(r,u,Ns(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(u,c.targetId).next(f=>{o=f})}).next(()=>r.Ms.getDocumentsMatchingQuery(u,e,n?s:nt.min(),n?o:_t())).next(c=>(cB(r,Q8(e),c),{documents:c,$s:o})))}function cB(t,e,n){let r=t.Ns.get(e)||nt.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}class JA{constructor(){this.activeTargetIds=n9()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hB{constructor(){this.xo=new JA,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new JA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="ConnectivityMonitor";class t2{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Be(e2,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Be(e2,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let em=null;function _E(){return em===null?em=function(){return 268435456+Math.round(2147483648*Math.random())}():em++,"0x"+em.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="RestConnection",dB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mB{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===Um?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,o){const u=_E(),c=this.jo(e,n.toUriEncodedString());Be(gy,`Sending RPC '${e}' ${u}:`,c,r);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,s,o);const{host:d}=new URL(c),p=cu(d);return this.Jo(e,c,f,r,p).then(y=>(Be(gy,`Received RPC '${e}' ${u}: `,y),y),y=>{throw Rl(gy,`RPC '${e}' ${u} failed with error: `,y,"url: ",c,"request:",r),y})}Yo(e,n,r,s,o,u){return this.zo(e,n,r,s,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}jo(e,n){const r=dB[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="WebChannelConnection";class gB extends mB{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const u=_E();return new Promise((c,f)=>{const d=new zI;d.setWithCredentials(!0),d.listenOnce(jI.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case hm.NO_ERROR:const y=d.getResponseJson();Be(Sr,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(y)),c(y);break;case hm.TIMEOUT:Be(Sr,`RPC '${e}' ${u} timed out`),f(new Ue(Ae.DEADLINE_EXCEEDED,"Request time out"));break;case hm.HTTP_ERROR:const T=d.getStatus();if(Be(Sr,`RPC '${e}' ${u} failed with status:`,T,"response text:",d.getResponseText()),T>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const w=b?.error;if(w&&w.status&&w.message){const N=function(D){const F=D.toLowerCase().replace(/_/g,"-");return Object.values(Ae).indexOf(F)>=0?F:Ae.UNKNOWN}(w.status);f(new Ue(N,w.message))}else f(new Ue(Ae.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new Ue(Ae.UNAVAILABLE,"Connection failed."));break;default:Ze(9055,{h_:e,streamId:u,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{Be(Sr,`RPC '${e}' ${u} completed.`)}});const p=JSON.stringify(s);Be(Sr,`RPC '${e}' ${u} sending request:`,s),d.send(n,"POST",p,r,15)})}I_(e,n,r){const s=_E(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=GI(),c=YI(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const p=o.join("");Be(Sr,`Creating RPC '${e}' stream ${s}: ${p}`,f);const y=u.createWebChannel(p,f);this.E_(y);let T=!1,b=!1;const w=new pB({Zo:k=>{b?Be(Sr,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(T||(Be(Sr,`Opening RPC '${e}' stream ${s} transport.`),y.open(),T=!0),Be(Sr,`RPC '${e}' stream ${s} sending:`,k),y.send(k))},Xo:()=>y.close()}),N=(k,D,F)=>{k.listen(D,q=>{try{F(q)}catch(j){setTimeout(()=>{throw j},0)}})};return N(y,mh.EventType.OPEN,()=>{b||(Be(Sr,`RPC '${e}' stream ${s} transport opened.`),w.__())}),N(y,mh.EventType.CLOSE,()=>{b||(b=!0,Be(Sr,`RPC '${e}' stream ${s} transport closed`),w.u_(),this.d_(y))}),N(y,mh.EventType.ERROR,k=>{b||(b=!0,Rl(Sr,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),w.u_(new Ue(Ae.UNAVAILABLE,"The operation could not be completed")))}),N(y,mh.EventType.MESSAGE,k=>{var D;if(!b){const F=k.data[0];Vt(!!F,16349);const q=F,j=q?.error||((D=q[0])===null||D===void 0?void 0:D.error);if(j){Be(Sr,`RPC '${e}' stream ${s} received error:`,j);const ee=j.status;let $=function(O){const M=Ln[O];if(M!==void 0)return IC(M)}(ee),R=j.message;$===void 0&&($=Ae.INTERNAL,R="Unknown error status: "+ee+" with message "+j.message),b=!0,w.u_(new Ue($,R)),y.close()}else Be(Sr,`RPC '${e}' stream ${s} received:`,F),w.c_(F)}}),N(c,qI.STAT_EVENT,k=>{k.stat===aE.PROXY?Be(Sr,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===aE.NOPROXY&&Be(Sr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.a_()},0),w}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function yy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t){return new T9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n,r=1e3,s=1.5,o=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&Be("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="PersistentStream";class zC{constructor(e,n,r,s,o,u,c,f){this.xi=e,this.S_=r,this.D_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new FC(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===Ae.RESOURCE_EXHAUSTED?(ma(n.toString()),ma("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===Ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new Ue(Ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Be(n2,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(Be(n2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yB extends zC{constructor(e,n,r,s,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=S9(this.serializer,e),r=function(o){if(!("targetChange"in o))return nt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?nt.min():u.readTime?Rs(u.readTime):nt.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=yE(this.serializer),n.addTarget=function(o,u){let c;const f=u.target;if(c=hE(f)?{documents:x9(o,f)}:{query:I9(o,f).gt},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=RC(o,u.resumeToken);const d=mE(o,u.expectedCount);d!==null&&(c.expectedCount=d)}else if(u.snapshotVersion.compareTo(nt.min())>0){c.readTime=jm(o,u.snapshotVersion.toTimestamp());const d=mE(o,u.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=N9(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=yE(this.serializer),n.removeTarget=e,this.Q_(n)}}class EB extends zC{constructor(e,n,r,s,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return Vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=w9(e.writeResults,e.commitTime),r=Rs(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=yE(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>A9(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{}class TB extends _B{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new Ue(Ae.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.zo(e,pE(n,r),s,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ue(Ae.UNKNOWN,o.toString())})}Yo(e,n,r,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Yo(e,pE(n,r),s,u,c,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ue(Ae.UNKNOWN,u.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class bB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ma(n),this.ua=!1):Be("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au="RemoteStore";class vB{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(u=>{r.enqueueAndForget(async()=>{fu(this)&&(Be(au,"Restarting streams for network reachability change."),await async function(f){const d=it(f);d.da.add(4),await ff(d),d.Va.set("Unknown"),d.da.delete(4),await x0(d)}(this))})}),this.Va=new bB(r,s)}}async function x0(t){if(fu(t))for(const e of t.Aa)await e(!0)}async function ff(t){for(const e of t.Aa)await e(!1)}function jC(t,e){const n=it(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),O_(n)?D_(n):Yl(n).N_()&&R_(n,e))}function N_(t,e){const n=it(t),r=Yl(n);n.Ea.delete(e),r.N_()&&qC(n,e),n.Ea.size===0&&(r.N_()?r.k_():fu(n)&&n.Va.set("Unknown"))}function R_(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yl(t).Z_(e)}function qC(t,e){t.ma.Ke(e),Yl(t).X_(e)}function D_(t){t.ma=new g9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Yl(t).start(),t.Va.ca()}function O_(t){return fu(t)&&!Yl(t).O_()&&t.Ea.size>0}function fu(t){return it(t).da.size===0}function YC(t){t.ma=void 0}async function SB(t){t.Va.set("Online")}async function AB(t){t.Ea.forEach((e,n)=>{R_(t,e)})}async function wB(t,e){YC(t),O_(t)?(t.Va.Pa(e),D_(t)):t.Va.set("Unknown")}async function xB(t,e,n){if(t.Va.set("Online"),e instanceof NC&&e.state===2&&e.cause)try{await async function(s,o){const u=o.cause;for(const c of o.targetIds)s.Ea.has(c)&&(await s.remoteSyncer.rejectListen(c,u),s.Ea.delete(c),s.ma.removeTarget(c))}(t,e)}catch(r){Be(au,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ym(t,r)}else if(e instanceof pm?t.ma.Xe(e):e instanceof CC?t.ma.ot(e):t.ma.nt(e),!n.isEqual(nt.min()))try{const r=await HC(t.localStore);n.compareTo(r)>=0&&await function(o,u){const c=o.ma.It(u);return c.targetChanges.forEach((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const p=o.Ea.get(d);p&&o.Ea.set(d,p.withResumeToken(f.resumeToken,u))}}),c.targetMismatches.forEach((f,d)=>{const p=o.Ea.get(f);if(!p)return;o.Ea.set(f,p.withResumeToken(Er.EMPTY_BYTE_STRING,p.snapshotVersion)),qC(o,f);const y=new eo(p.target,f,d,p.sequenceNumber);R_(o,y)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Be(au,"Failed to raise snapshot:",r),await Ym(t,r)}}async function Ym(t,e,n){if(!jl(e))throw e;t.da.add(1),await ff(t),t.Va.set("Offline"),n||(n=()=>HC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Be(au,"Retrying IndexedDB access"),await n(),t.da.delete(1),await x0(t)})}function GC(t,e){return e().catch(n=>Ym(t,n,e))}async function I0(t){const e=it(t),n=go(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:g_;for(;IB(e);)try{const s=await uB(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,CB(e,s)}catch(s){await Ym(e,s)}$C(e)&&KC(e)}function IB(t){return fu(t)&&t.Ia.length<10}function CB(t,e){t.Ia.push(e);const n=go(t);n.N_()&&n.ea&&n.ta(e.mutations)}function $C(t){return fu(t)&&!go(t).O_()&&t.Ia.length>0}function KC(t){go(t).start()}async function NB(t){go(t).ia()}async function RB(t){const e=go(t);for(const n of t.Ia)e.ta(n.mutations)}async function DB(t,e,n){const r=t.Ia.shift(),s=v_.from(r,e,n);await GC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await I0(t)}async function OB(t,e){e&&go(t).ea&&await async function(r,s){if(function(u){return m9(u)&&u!==Ae.ABORTED}(s.code)){const o=r.Ia.shift();go(r).L_(),await GC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await I0(r)}}(t,e),$C(t)&&KC(t)}async function r2(t,e){const n=it(t);n.asyncQueue.verifyOperationInProgress(),Be(au,"RemoteStore received new credentials");const r=fu(n);n.da.add(3),await ff(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await x0(n)}async function kB(t,e){const n=it(t);e?(n.da.delete(2),await x0(n)):e||(n.da.add(2),await ff(n),n.Va.set("Unknown"))}function Yl(t){return t.fa||(t.fa=function(n,r,s){const o=it(n);return o.oa(),new yB(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:SB.bind(null,t),n_:AB.bind(null,t),i_:wB.bind(null,t),Y_:xB.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),O_(t)?D_(t):t.Va.set("Unknown")):(await t.fa.stop(),YC(t))})),t.fa}function go(t){return t.ga||(t.ga=function(n,r,s){const o=it(n);return o.oa(),new EB(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:NB.bind(null,t),i_:OB.bind(null,t),na:RB.bind(null,t),ra:DB.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await I0(t)):(await t.ga.stop(),t.Ia.length>0&&(Be(au,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new oo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const u=Date.now()+r,c=new k_(e,n,u,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ue(Ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function L_(t,e){if(ma("AsyncQueue",`${e}: ${t}`),jl(t))return new Ue(Ae.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{static emptySet(e){return new _l(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||$e.comparator(n.key,r.key):(n,r)=>$e.comparator(n.key,r.key),this.keyedMap=ph(),this.sortedSet=new yn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _l)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _l;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.pa=new yn($e.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Ze(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ml{constructor(e,n,r,s,o,u,c,f,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,o){const u=[];return n.forEach(c=>{u.push({type:0,doc:c})}),new Ml(e,n,_l.emptySet(n),u,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class MB{constructor(){this.queries=s2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=it(n),o=s.queries;s.queries=s2(),o.forEach((u,c)=>{for(const f of c.Sa)f.onError(r)})})(this,new Ue(Ae.ABORTED,"Firestore shutting down"))}}function s2(){return new hu(t=>pC(t),_0)}async function PB(t,e){const n=it(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.Da()&&e.va()&&(r=2):(o=new LB,r=e.va()?0:1);try{switch(r){case 0:o.ba=await n.onListen(s,!0);break;case 1:o.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(u){const c=L_(u,`Initialization of query '${ll(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,o),o.Sa.push(e),e.Fa(n.onlineState),o.ba&&e.Ma(o.ba)&&M_(n)}async function BB(t,e){const n=it(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?s=e.va()?0:1:!o.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function UB(t,e){const n=it(t);let r=!1;for(const s of e){const o=s.query,u=n.queries.get(o);if(u){for(const c of u.Sa)c.Ma(s)&&(r=!0);u.ba=s}}r&&M_(n)}function VB(t,e,n){const r=it(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function M_(t){t.Ca.forEach(e=>{e.next()})}var TE,a2;(a2=TE||(TE={})).xa="default",a2.Cache="cache";class HB{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==TE.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.key=e}}class QC{constructor(e){this.key=e}}class FB{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=_t(),this.mutatedKeys=_t(),this.Za=gC(e),this.Xa=new _l(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new i2,s=n?n.Xa:this.Xa;let o=n?n.mutatedKeys:this.mutatedKeys,u=s,c=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,y)=>{const T=s.get(p),b=T0(this.query,y)?y:null,w=!!T&&this.mutatedKeys.has(T.key),N=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let k=!1;T&&b?T.data.isEqual(b.data)?w!==N&&(r.track({type:3,doc:b}),k=!0):this.ru(T,b)||(r.track({type:2,doc:b}),k=!0,(f&&this.Za(b,f)>0||d&&this.Za(b,d)<0)&&(c=!0)):!T&&b?(r.track({type:0,doc:b}),k=!0):T&&!b&&(r.track({type:1,doc:T}),k=!0,(f||d)&&(c=!0)),k&&(b?(u=u.add(b),o=N?o.add(p):o.delete(p)):(u=u.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const p=this.query.limitType==="F"?u.last():u.first();u=u.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{Xa:u,nu:r,Cs:c,mutatedKeys:o}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const u=e.nu.wa();u.sort((p,y)=>function(b,w){const N=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze(20277,{Vt:k})}};return N(b)-N(w)}(p.type,y.type)||this.Za(p.doc,y.doc)),this.iu(r),s=s!=null&&s;const c=n&&!s?this.su():[],f=this.Ya.size===0&&this.current&&!s?1:0,d=f!==this.Ja;return this.Ja=f,u.length!==0||d?{snapshot:new Ml(this.query,e.Xa,o,u,e.mutatedKeys,f===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:c}:{ou:c}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new i2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=_t(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new QC(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new XC(r))}),n}au(e){this.Ha=e.$s,this.Ya=_t();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Ml.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const P_="SyncEngine";class zB{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class jB{constructor(e){this.key=e,this.cu=!1}}class qB{constructor(e,n,r,s,o,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.lu={},this.hu=new hu(c=>pC(c),_0),this.Pu=new Map,this.Tu=new Set,this.Iu=new yn($e.comparator),this.Eu=new Map,this.du=new w_,this.Au={},this.Ru=new Map,this.Vu=Ll.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function YB(t,e,n=!0){const r=nN(t);let s;const o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.uu()):s=await WC(r,e,n,!0),s}async function GB(t,e){const n=nN(t);await WC(n,e,!0,!1)}async function WC(t,e,n,r){const s=await lB(t.localStore,Ns(e)),o=s.targetId,u=t.sharedClientState.addLocalQueryTarget(o,n);let c;return r&&(c=await $B(t,e,o,u==="current",s.resumeToken)),t.isPrimaryClient&&n&&jC(t.remoteStore,s),c}async function $B(t,e,n,r,s){t.fu=(y,T,b)=>async function(N,k,D,F){let q=k.view.tu(D);q.Cs&&(q=await ZA(N.localStore,k.query,!1).then(({documents:R})=>k.view.tu(R,q)));const j=F&&F.targetChanges.get(k.targetId),ee=F&&F.targetMismatches.get(k.targetId)!=null,$=k.view.applyChanges(q,N.isPrimaryClient,j,ee);return u2(N,k.targetId,$.ou),$.snapshot}(t,y,T,b);const o=await ZA(t.localStore,e,!0),u=new FB(e,o.$s),c=u.tu(o.documents),f=hf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=u.applyChanges(c,t.isPrimaryClient,f);u2(t,n,d.ou);const p=new zB(e,n,u);return t.hu.set(e,p),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),d.snapshot}async function KB(t,e,n){const r=it(t),s=r.hu.get(e),o=r.Pu.get(s.targetId);if(o.length>1)return r.Pu.set(s.targetId,o.filter(u=>!_0(u,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await EE(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&N_(r.remoteStore,s.targetId),bE(r,s.targetId)}).catch(zl)):(bE(r,s.targetId),await EE(r.localStore,s.targetId,!0))}async function XB(t,e){const n=it(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),N_(n.remoteStore,r.targetId))}async function QB(t,e,n){const r=r7(t);try{const s=await function(u,c){const f=it(u),d=ln.now(),p=c.reduce((b,w)=>b.add(w.key),_t());let y,T;return f.persistence.runTransaction("Locally write mutations","readwrite",b=>{let w=pa(),N=_t();return f.Bs.getEntries(b,p).next(k=>{w=k,w.forEach((D,F)=>{F.isValidDocument()||(N=N.add(D))})}).next(()=>f.localDocuments.getOverlayedDocuments(b,w)).next(k=>{y=k;const D=[];for(const F of c){const q=l9(F,y.get(F.key).overlayedDocument);q!=null&&D.push(new _o(F.key,q,aC(q.value.mapValue),_i.exists(!0)))}return f.mutationQueue.addMutationBatch(b,d,D,c)}).next(k=>{T=k;const D=k.applyToLocalDocumentSet(y,N);return f.documentOverlayCache.saveOverlays(b,k.batchId,D)})}).then(()=>({batchId:T.batchId,changes:EC(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,c,f){let d=u.Au[u.currentUser.toKey()];d||(d=new yn(ht)),d=d.insert(c,f),u.Au[u.currentUser.toKey()]=d}(r,s.batchId,n),await df(r,s.changes),await I0(r.remoteStore)}catch(s){const o=L_(s,"Failed to persist write");n.reject(o)}}async function ZC(t,e){const n=it(t);try{const r=await aB(n.localStore,e);e.targetChanges.forEach((s,o)=>{const u=n.Eu.get(o);u&&(Vt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.cu=!0:s.modifiedDocuments.size>0?Vt(u.cu,14607):s.removedDocuments.size>0&&(Vt(u.cu,42227),u.cu=!1))}),await df(n,r,e)}catch(r){await zl(r)}}function o2(t,e,n){const r=it(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((o,u)=>{const c=u.view.Fa(e);c.snapshot&&s.push(c.snapshot)}),function(u,c){const f=it(u);f.onlineState=c;let d=!1;f.queries.forEach((p,y)=>{for(const T of y.Sa)T.Fa(c)&&(d=!0)}),d&&M_(f)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WB(t,e,n){const r=it(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),o=s&&s.key;if(o){let u=new yn($e.comparator);u=u.insert(o,wr.newNoDocument(o,nt.min()));const c=_t().add(o),f=new A0(nt.min(),new Map,new yn(ht),u,c);await ZC(r,f),r.Iu=r.Iu.remove(o),r.Eu.delete(e),B_(r)}else await EE(r.localStore,e,!1).then(()=>bE(r,e,n)).catch(zl)}async function ZB(t,e){const n=it(t),r=e.batch.batchId;try{const s=await sB(n.localStore,e);eN(n,r,null),JC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await df(n,s)}catch(s){await zl(s)}}async function JB(t,e,n){const r=it(t);try{const s=await function(u,c){const f=it(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return f.mutationQueue.lookupMutationBatch(d,c).next(y=>(Vt(y!==null,37113),p=y.keys(),f.mutationQueue.removeMutationBatch(d,y))).next(()=>f.mutationQueue.performConsistencyCheck(d)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>f.localDocuments.getDocuments(d,p))})}(r.localStore,e);eN(r,e,n),JC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await df(r,s)}catch(s){await zl(s)}}function JC(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function eN(t,e,n){const r=it(t);let s=r.Au[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function bE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||tN(t,r)})}function tN(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(N_(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),B_(t))}function u2(t,e,n){for(const r of n)r instanceof XC?(t.du.addReference(r.key,e),e7(t,r)):r instanceof QC?(Be(P_,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||tN(t,r.key)):Ze(19791,{pu:r})}function e7(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(Be(P_,"New document in limbo: "+n),t.Tu.add(r),B_(t))}function B_(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new $e(un.fromString(e)),r=t.Vu.next();t.Eu.set(r,new jB(n)),t.Iu=t.Iu.insert(n,r),jC(t.remoteStore,new eo(Ns(dC(n.path)),r,"TargetPurposeLimboResolution",g0.le))}}async function df(t,e,n){const r=it(t),s=[],o=[],u=[];r.hu.isEmpty()||(r.hu.forEach((c,f)=>{u.push(r.fu(f,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const y=d?!d.fromCache:(p=n?.targetChanges.get(f.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(f.targetId,y?"current":"not-current")}if(d){s.push(d);const y=I_.Rs(f.targetId,d);o.push(y)}}))}),await Promise.all(u),r.lu.Y_(s),await async function(f,d){const p=it(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>we.forEach(d,T=>we.forEach(T.ds,b=>p.persistence.referenceDelegate.addReference(y,T.targetId,b)).next(()=>we.forEach(T.As,b=>p.persistence.referenceDelegate.removeReference(y,T.targetId,b)))))}catch(y){if(!jl(y))throw y;Be(C_,"Failed to update sequence numbers: "+y)}for(const y of d){const T=y.targetId;if(!y.fromCache){const b=p.xs.get(T),w=b.snapshotVersion,N=b.withLastLimboFreeSnapshotVersion(w);p.xs=p.xs.insert(T,N)}}}(r.localStore,o))}async function t7(t,e){const n=it(t);if(!n.currentUser.isEqual(e)){Be(P_,"User change. New user:",e.toKey());const r=await VC(n.localStore,e);n.currentUser=e,function(o,u){o.Ru.forEach(c=>{c.forEach(f=>{f.reject(new Ue(Ae.CANCELLED,u))})}),o.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await df(n,r.ks)}}function n7(t,e){const n=it(t),r=n.Eu.get(e);if(r&&r.cu)return _t().add(r.key);{let s=_t();const o=n.Pu.get(e);if(!o)return s;for(const u of o){const c=n.hu.get(u);s=s.unionWith(c.view.eu)}return s}}function nN(t){const e=it(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=n7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WB.bind(null,e),e.lu.Y_=UB.bind(null,e.eventManager),e.lu.gu=VB.bind(null,e.eventManager),e}function r7(t){const e=it(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JB.bind(null,e),e}class Gm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=w0(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return iB(this.persistence,new tB,e.initialUser,this.serializer)}Su(e){return new UC(x_.fi,this.serializer)}bu(e){return new hB}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gm.provider={build:()=>new Gm};class i7 extends Gm{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){Vt(this.persistence.referenceDelegate instanceof qm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new H9(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Qr.withCacheSize(this.cacheSizeBytes):Qr.DEFAULT;return new UC(r=>qm.fi(r,n),this.serializer)}}class vE{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>o2(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=t7.bind(null,this.syncEngine),await kB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new MB}()}createDatastore(e){const n=w0(e.databaseInfo.databaseId),r=function(o){return new gB(o)}(e.databaseInfo);return function(o,u,c,f){return new TB(o,u,c,f)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,u,c){return new vB(r,s,o,u,c)}(this.localStore,this.datastore,e.asyncQueue,n=>o2(this.syncEngine,n,0),function(){return t2.C()?new t2:new fB}())}createSyncEngine(e,n){return function(s,o,u,c,f,d,p){const y=new qB(s,o,u,c,f,d);return p&&(y.mu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=it(s);Be(au,"RemoteStore shutting down."),o.da.add(5),await ff(o),o.Ra.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}vE.provider={build:()=>new vE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):ma("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="FirestoreClient";class a7{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ar.UNAUTHENTICATED,this.clientId=QI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async u=>{Be(yo,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(Be(yo,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=L_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ey(t,e){t.asyncQueue.verifyOperationInProgress(),Be(yo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await VC(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function l2(t,e){t.asyncQueue.verifyOperationInProgress();const n=await o7(t);Be(yo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>r2(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>r2(e.remoteStore,s)),t._onlineComponents=e}async function o7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Be(yo,"Using user provided OfflineComponentProvider");try{await Ey(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Ae.FAILED_PRECONDITION||s.code===Ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Rl("Error using user provided cache. Falling back to memory cache: "+n),await Ey(t,new Gm)}}else Be(yo,"Using default OfflineComponentProvider"),await Ey(t,new i7(void 0));return t._offlineComponents}async function rN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Be(yo,"Using user provided OnlineComponentProvider"),await l2(t,t._uninitializedComponentsProvider._online)):(Be(yo,"Using default OnlineComponentProvider"),await l2(t,new vE))),t._onlineComponents}function u7(t){return rN(t).then(e=>e.syncEngine)}async function l7(t){const e=await rN(t),n=e.eventManager;return n.onListen=YB.bind(null,e.syncEngine),n.onUnlisten=KB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=GB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XB.bind(null,e.syncEngine),n}function c7(t,e,n={}){const r=new oo;return t.asyncQueue.enqueueAndForget(async()=>function(o,u,c,f,d){const p=new s7({next:T=>{p.xu(),u.enqueueAndForget(()=>BB(o,y)),T.fromCache&&f.source==="server"?d.reject(new Ue(Ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(T)},error:T=>d.reject(T)}),y=new HB(c,p,{includeMetadataChanges:!0,Qa:!0});return PB(o,y)}(await l7(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t,e,n){if(!n)throw new Ue(Ae.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function h7(t,e,n,r){if(e===!0&&r===!0)throw new Ue(Ae.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function h2(t){if(!$e.isDocumentKey(t))throw new Ue(Ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function f2(t){if($e.isDocumentKey(t))throw new Ue(Ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function C0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ze(12329,{type:typeof t})}function ou(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ue(Ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=C0(t);throw new Ue(Ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="firestore.googleapis.com",d2=!0;class m2{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ue(Ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aN,this.ssl=d2}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:d2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<U9)throw new Ue(Ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}h7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ue(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ue(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ue(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class N0{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ue(Ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ue(Ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new p8;switch(r.type){case"firstParty":return new _8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ue(Ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=c2.get(n);r&&(Be("ComponentProvider","Removing Datastore"),c2.delete(n),r.terminate())}(this),Promise.resolve()}}function f7(t,e,n,r={}){var s;t=ou(t,N0);const o=cu(e),u=t._getSettings(),c=Object.assign(Object.assign({},u),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;o&&(c_(`https://${f}`),h_("Firestore",!0)),u.host!==aN&&u.host!==f&&Rl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},u),{host:f,ssl:o,emulatorOptions:r});if(!ru(d,c)&&(t._setSettings(d),r.mockUserToken)){let p,y;if(typeof r.mockUserToken=="string")p=r.mockUserToken,y=Ar.MOCK_USER;else{p=HP(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new Ue(Ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Ar(T)}t._authCredentials=new g8(new KI(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new du(this.firestore,e,this._query)}}class Ti{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ti(this.firestore,e,this._key)}}class uo extends du{constructor(e,n,r){super(e,n,dC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ti(this.firestore,null,new $e(e))}withConverter(e){return new uo(this.firestore,e,this._path)}}function U_(t,e,...n){if(t=Sn(t),sN("collection","path",e),t instanceof N0){const r=un.fromString(e,...n);return f2(r),new uo(t,null,r)}{if(!(t instanceof Ti||t instanceof uo))throw new Ue(Ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(un.fromString(e,...n));return f2(r),new uo(t.firestore,null,r)}}function Gl(t,e,...n){if(t=Sn(t),arguments.length===1&&(e=QI.newId()),sN("doc","path",e),t instanceof N0){const r=un.fromString(e,...n);return h2(r),new Ti(t,null,new $e(r))}{if(!(t instanceof Ti||t instanceof uo))throw new Ue(Ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(un.fromString(e,...n));return h2(r),new Ti(t.firestore,t instanceof uo?t.converter:null,new $e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="AsyncQueue";class g2{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new FC(this,"async_queue_retry"),this.rc=()=>{const r=yy();r&&Be(p2,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=yy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=yy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new oo;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!jl(e))throw e;Be(p2,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,ma("INTERNAL UNHANDLED ERROR: ",y2(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=k_.createAndSchedule(this,e,n,r,o=>this.uc(o));return this.Zu.push(s),s}oc(){this.Xu&&Ze(47125,{cc:y2(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function y2(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class mf extends N0{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new g2,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new g2(e),this._firestoreClient=void 0,await e}}}function d7(t,e){const n=typeof t=="object"?t:m_(),r=typeof t=="string"?t:Um,s=p0(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=kI("firestore");o&&f7(s,...o)}return s}function V_(t){if(t._terminated)throw new Ue(Ae.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||m7(t),t._firestoreClient}function m7(t){var e,n,r;const s=t._freezeSettings(),o=function(c,f,d,p){return new L8(c,f,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,iN(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new a7(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){const f=c?._online.build();return{_offline:c?._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pl(Er.fromBase64String(e))}catch(n){throw new Ue(Ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pl(Er.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ue(Ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ue(Ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ue(Ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p7=/^__.*__$/;class g7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _o(e,this.data,this.fieldMask,n,this.fieldTransforms):new cf(e,this.data,n,this.fieldTransforms)}}class oN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new _o(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function uN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ze(40011,{Ic:t})}}class j_{constructor(e,n,r,s,o,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new j_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return $m(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(uN(this.Ic)&&p7.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class y7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||w0(e)}bc(e,n,r,s=!1){return new j_({Ic:e,methodName:n,wc:r,path:yr.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function q_(t){const e=t._freezeSettings(),n=w0(t._databaseId);return new y7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lN(t,e,n,r,s,o={}){const u=t.bc(o.merge||o.mergeFields?2:0,e,n,s);Y_("Data must be an object, but it was:",u,r);const c=cN(r,u);let f,d;if(o.merge)f=new yi(u.fieldMask),d=u.fieldTransforms;else if(o.mergeFields){const p=[];for(const y of o.mergeFields){const T=SE(e,y,n);if(!u.contains(T))throw new Ue(Ae.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);fN(p,T)||p.push(T)}f=new yi(p),d=u.fieldTransforms.filter(y=>f.covers(y.field))}else f=null,d=u.fieldTransforms;return new g7(new Zr(c),f,d)}class D0 extends H_{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof D0}}function E7(t,e,n,r){const s=t.bc(1,e,n);Y_("Data must be an object, but it was:",s,r);const o=[],u=Zr.empty();Eo(r,(f,d)=>{const p=G_(e,f,n);d=Sn(d);const y=s.mc(p);if(d instanceof D0)o.push(p);else{const T=pf(d,y);T!=null&&(o.push(p),u.set(p,T))}});const c=new yi(o);return new oN(u,c,s.fieldTransforms)}function _7(t,e,n,r,s,o){const u=t.bc(1,e,n),c=[SE(e,r,n)],f=[s];if(o.length%2!=0)throw new Ue(Ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)c.push(SE(e,o[T])),f.push(o[T+1]);const d=[],p=Zr.empty();for(let T=c.length-1;T>=0;--T)if(!fN(d,c[T])){const b=c[T];let w=f[T];w=Sn(w);const N=u.mc(b);if(w instanceof D0)d.push(b);else{const k=pf(w,N);k!=null&&(d.push(b),p.set(b,k))}}const y=new yi(d);return new oN(p,y,u.fieldTransforms)}function T7(t,e,n,r=!1){return pf(n,t.bc(r?4:3,e))}function pf(t,e){if(hN(t=Sn(t)))return Y_("Unsupported field value:",e,t),cN(t,e);if(t instanceof H_)return function(r,s){if(!uN(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const o=[];let u=0;for(const c of r){let f=pf(c,s.fc(u));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),u++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=Sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return r9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=ln.fromDate(r);return{timestampValue:jm(s.serializer,o)}}if(r instanceof ln){const o=new ln(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jm(s.serializer,o)}}if(r instanceof F_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pl)return{bytesValue:RC(s.serializer,r._byteString)};if(r instanceof Ti){const o=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw s.gc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:A_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof z_)return function(u,c){return{mapValue:{fields:{[iC]:{stringValue:sC},[Vm]:{arrayValue:{values:u.toArray().map(d=>{if(typeof d!="number")throw c.gc("VectorValues must only contain numeric values.");return b_(c.serializer,d)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${C0(r)}`)}(t,e)}function cN(t,e){const n={};return ZI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eo(t,(r,s)=>{const o=pf(s,e.Ac(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function hN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ln||t instanceof F_||t instanceof Pl||t instanceof Ti||t instanceof H_||t instanceof z_)}function Y_(t,e,n){if(!hN(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=C0(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function SE(t,e,n){if((e=Sn(e))instanceof R0)return e._internalPath;if(typeof e=="string")return G_(t,e);throw $m("Field path arguments must be of type string or ",t,!1,void 0,n)}const b7=new RegExp("[~\\*/\\[\\]]");function G_(t,e,n){if(e.search(b7)>=0)throw $m(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new R0(...e.split("."))._internalPath}catch{throw $m(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $m(t,e,n,r,s){const o=r&&!r.isEmpty(),u=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(o||u)&&(f+=" (found",o&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new Ue(Ae.INVALID_ARGUMENT,c+t+f)}function fN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ti(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new v7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(O0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class v7 extends dN{data(){return super.data()}}function O0(t,e){return typeof e=="string"?G_(t,e):e instanceof R0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ue(Ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $_{}class mN extends $_{}function A7(t,e,...n){let r=[];e instanceof $_&&r.push(e),r=r.concat(n),function(o){const u=o.filter(f=>f instanceof K_).length,c=o.filter(f=>f instanceof k0).length;if(u>1||u>0&&c>0)throw new Ue(Ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class k0 extends mN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new k0(e,n,r)}_apply(e){const n=this._parse(e);return pN(e._query,n),new du(e.firestore,e.converter,fE(e._query,n))}_parse(e){const n=q_(e.firestore);return function(o,u,c,f,d,p,y){let T;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Ue(Ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){_2(y,p);const w=[];for(const N of y)w.push(E2(f,o,N));T={arrayValue:{values:w}}}else T=E2(f,o,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||_2(y,p),T=T7(c,u,y,p==="in"||p==="not-in");return Bn.create(d,p,T)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function w7(t,e,n){const r=e,s=O0("where",t);return k0._create(s,r,n)}class K_ extends $_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new K_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ns.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let u=s;const c=o.getFlattenedFilters();for(const f of c)pN(u,f),u=fE(u,f)}(e._query,n),new du(e.firestore,e.converter,fE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class X_ extends mN{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new X_(e,n)}_apply(e){const n=function(s,o,u){if(s.startAt!==null)throw new Ue(Ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ue(Ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $h(o,u)}(e._query,this._field,this._direction);return new du(e.firestore,e.converter,function(s,o){const u=s.explicitOrderBy.concat([o]);return new ql(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function x7(t,e="asc"){const n=e,r=O0("orderBy",t);return X_._create(r,n)}function E2(t,e,n){if(typeof(n=Sn(n))=="string"){if(n==="")throw new Ue(Ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mC(e)&&n.indexOf("/")!==-1)throw new Ue(Ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(un.fromString(n));if(!$e.isDocumentKey(r))throw new Ue(Ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kA(t,new $e(r))}if(n instanceof Ti)return kA(t,n._key);throw new Ue(Ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${C0(n)}.`)}function _2(t,e){if(!Array.isArray(t)||t.length===0)throw new Ue(Ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pN(t,e){const n=function(s,o){for(const u of s)for(const c of u.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ue(Ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ue(Ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class I7{convertValue(e,n="none"){switch(po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ze(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Eo(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Vm].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>Cn(u.doubleValue));return new z_(o)}convertGeoPoint(e){return new F_(Cn(e.latitude),Cn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=E0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qh(e));default:return null}}convertTimestamp(e){const n=fo(e);return new ln(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=un.fromString(e);Vt(PC(r),9688,{name:e});const s=new Yh(r.get(1),r.get(3)),o=new $e(r.popFirst(5));return s.isEqual(n)||ma(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class C7 extends dN{constructor(e,n,r,s,o,u){super(e,n,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new gm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(O0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class gm extends C7{data(e={}){return super.data(e)}}class N7{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new tm(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new gm(this._firestore,this._userDataWriter,r.key,r,new tm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ue(Ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(c=>{const f=new gm(s._firestore,s._userDataWriter,c.doc.key,c.doc,new tm(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const f=new gm(s._firestore,s._userDataWriter,c.doc.key,c.doc,new tm(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return c.type!==0&&(d=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),c.type!==1&&(u=u.add(c.doc),p=u.indexOf(c.doc.key)),{type:R7(c.type),doc:f,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function R7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze(61501,{type:t})}}class D7 extends I7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ti(this.firestore,null,n)}}function Q_(t){t=ou(t,du);const e=ou(t.firestore,mf),n=V_(e),r=new D7(e);return S7(t._query),c7(n,t._query).then(s=>new N7(e,r,t,s))}function W_(t,e,n){t=ou(t,Ti);const r=ou(t.firestore,mf),s=gN(t.converter,e,n);return Z_(r,[lN(q_(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,_i.none())])}function O7(t){return Z_(ou(t.firestore,mf),[new S0(t._key,_i.none())])}function Z_(t,e){return function(r,s){const o=new oo;return r.asyncQueue.enqueueAndForget(async()=>QB(await u7(r),s,o)),o.promise}(V_(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=q_(e)}set(e,n,r){this._verifyNotCommitted();const s=_y(e,this._firestore),o=gN(s.converter,n,r),u=lN(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(u.toMutation(s._key,_i.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const o=_y(e,this._firestore);let u;return u=typeof(n=Sn(n))=="string"||n instanceof R0?_7(this._dataReader,"WriteBatch.update",o._key,n,r,s):E7(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(u.toMutation(o._key,_i.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=_y(e,this._firestore);return this._mutations=this._mutations.concat(new S0(n._key,_i.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(Ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _y(t,e){if((t=Sn(t)).firestore!==e)throw new Ue(Ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t){return V_(t=ou(t,mf)),new k7(t,e=>Z_(t,e))}(function(e,n=!0){(function(s){Fl=s})(Hl),iu(new co("firestore",(r,{instanceIdentifier:s,options:o})=>{const u=r.getProvider("app").getImmediate(),c=new mf(new y8(r.getProvider("auth-internal")),new T8(u,r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ue(Ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yh(d.options.projectId,p)}(u,s),u);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Cs(bA,vA,e),Cs(bA,vA,"esm2017")})();function J_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function EN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const L7=EN,_N=new uf("auth","Firebase",EN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=new f_("@firebase/auth");function M7(t,...e){Km.logLevel<=Et.WARN&&Km.warn(`Auth (${Hl}): ${t}`,...e)}function ym(t,...e){Km.logLevel<=Et.ERROR&&Km.error(`Auth (${Hl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t,...e){throw e1(t,...e)}function Ds(t,...e){return e1(t,...e)}function TN(t,e,n){const r=Object.assign(Object.assign({},L7()),{[e]:n});return new uf("auth","Firebase",r).create(e,{appName:t.name})}function ca(t){return TN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function e1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _N.create(t,...e)}function We(t,e,...n){if(!t)throw e1(e,...n)}function ua(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ym(e),new Error(e)}function ga(t,e){t||ua(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function P7(){return T2()==="http:"||T2()==="https:"}function T2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(P7()||GP()||"connection"in navigator)?navigator.onLine:!0}function U7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n){this.shortDelay=e,this.longDelay=n,ga(n>e,"Short delay should be less than long delay!"),this.isMobile=jP()||$P()}get(){return B7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(t,e){ga(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ua("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ua("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ua("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],F7=new gf(3e4,6e4);function To(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function bo(t,e,n,r,s={}){return vN(t,s,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const c=lf(Object.assign({key:t.config.apiKey},u)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:f},o);return YP()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&cu(t.emulatorConfig.host)&&(d.credentials="include"),bN.fetch()(await SN(t,t.config.apiHost,n,c),d)})}async function vN(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},V7),e);try{const s=new j7(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw nm(t,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const c=o.ok?u.errorMessage:u.error.message,[f,d]=c.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw nm(t,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw nm(t,"email-already-in-use",u);if(f==="USER_DISABLED")throw nm(t,"user-disabled",u);const p=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw TN(t,p,d);rs(t,p)}}catch(s){if(s instanceof Ps)throw s;rs(t,"network-request-failed",{message:String(s)})}}async function yf(t,e,n,r,s={}){const o=await bo(t,e,n,r,s);return"mfaPendingCredential"in o&&rs(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function SN(t,e,n,r){const s=`${e}${n}?${r}`,o=t,u=o.config.emulator?t1(t.config,s):`${t.config.apiScheme}://${s}`;return H7.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function z7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class j7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ds(this.auth,"network-request-failed")),F7.get())})}}function nm(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ds(t,e,r);return s.customData._tokenResponse=n,s}function b2(t){return t!==void 0&&t.enterprise!==void 0}class q7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return z7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Y7(t,e){return bo(t,"GET","/v2/recaptchaConfig",To(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G7(t,e){return bo(t,"POST","/v1/accounts:delete",e)}async function Xm(t,e){return bo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $7(t,e=!1){const n=Sn(t),r=await n.getIdToken(e),s=n1(r);We(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o?.sign_in_provider;return{claims:s,token:r,authTime:Ah(Ty(s.auth_time)),issuedAtTime:Ah(Ty(s.iat)),expirationTime:Ah(Ty(s.exp)),signInProvider:u||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Ty(t){return Number(t)*1e3}function n1(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ym("JWT malformed, contained fewer than 3 sections"),null;try{const s=DI(n);return s?JSON.parse(s):(ym("Failed to decode base64 JWT payload"),null)}catch(s){return ym("Caught error parsing JWT payload as JSON",s?.toString()),null}}function v2(t){const e=n1(t);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ps&&K7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function K7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ah(this.lastLoginAt),this.creationTime=Ah(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Qh(t,Xm(n,{idToken:r}));We(s?.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?AN(o.providerUserInfo):[],c=W7(t.providerData,u),f=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!c?.length,p=f?d:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new wE(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function Q7(t){const e=Sn(t);await Qm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function W7(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function AN(t){return t.map(e=>{var{providerId:n}=e,r=J_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z7(t,e){const n=await vN(t,{},async()=>{const r=lf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,u=await SN(t,s,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:c,body:r};return t.emulatorConfig&&cu(t.emulatorConfig.host)&&(f.credentials="include"),bN.fetch()(u,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function J7(t,e){return bo(t,"POST","/v2/accounts:revokeToken",To(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){We(e.length!==0,"internal-error");const n=v2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await Z7(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,u=new Tl;return r&&(We(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(We(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),o&&(We(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Tl,this.toJSON())}_performRefresh(){return ua("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t,e){We(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ts{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=J_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new X7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new wE(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Qh(this,this.stsTokenManager.getToken(this.auth,e));return We(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $7(this,e)}reload(){return Q7(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ts(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Qm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gi(this.auth.app))return Promise.reject(ca(this.auth));const e=await this.getIdToken();return await Qh(this,G7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,u,c,f,d,p;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,T=(s=n.email)!==null&&s!==void 0?s:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,w=(u=n.photoURL)!==null&&u!==void 0?u:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,k=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,D=(d=n.createdAt)!==null&&d!==void 0?d:void 0,F=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:q,emailVerified:j,isAnonymous:ee,providerData:$,stsTokenManager:R}=n;We(q&&R,e,"internal-error");const C=Tl.fromJSON(this.name,R);We(typeof q=="string",e,"internal-error"),za(y,e.name),za(T,e.name),We(typeof j=="boolean",e,"internal-error"),We(typeof ee=="boolean",e,"internal-error"),za(b,e.name),za(w,e.name),za(N,e.name),za(k,e.name),za(D,e.name),za(F,e.name);const O=new ts({uid:q,auth:e,email:T,emailVerified:j,displayName:y,isAnonymous:ee,photoURL:w,phoneNumber:b,tenantId:N,stsTokenManager:C,createdAt:D,lastLoginAt:F});return $&&Array.isArray($)&&(O.providerData=$.map(M=>Object.assign({},M))),k&&(O._redirectEventId=k),O}static async _fromIdTokenResponse(e,n,r=!1){const s=new Tl;s.updateFromServerResponse(n);const o=new ts({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Qm(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];We(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?AN(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!o?.length,c=new Tl;c.updateFromIdToken(r);const f=new ts({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:u}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new wE(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=new Map;function la(t){ga(t instanceof Function,"Expected a class definition");let e=S2.get(t);return e?(ga(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,S2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}wN.type="NONE";const A2=wN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t,e,n){return`firebase:${t}:${e}:${n}`}class bl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Em(this.userKey,s.apiKey,o),this.fullPersistenceKey=Em("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Xm(this.auth,{idToken:e}).catch(()=>{});return n?ts._fromGetAccountInfoResponse(this.auth,n,e):null}return ts._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new bl(la(A2),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=s[0]||la(A2);const u=Em(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const p=await d._get(u);if(p){let y;if(typeof p=="string"){const T=await Xm(e,{idToken:p}).catch(()=>{});if(!T)break;y=await ts._fromGetAccountInfoResponse(e,T,p)}else y=ts._fromJSON(e,p);d!==o&&(c=y),o=d;break}}catch{}const f=s.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new bl(o,e,r):(o=f[0],c&&await o._set(u,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==o)try{await d._remove(u)}catch{}})),new bl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DN(e))return"Blackberry";if(ON(e))return"Webos";if(IN(e))return"Safari";if((e.includes("chrome/")||CN(e))&&!e.includes("edge/"))return"Chrome";if(RN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function xN(t=Ir()){return/firefox\//i.test(t)}function IN(t=Ir()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CN(t=Ir()){return/crios\//i.test(t)}function NN(t=Ir()){return/iemobile/i.test(t)}function RN(t=Ir()){return/android/i.test(t)}function DN(t=Ir()){return/blackberry/i.test(t)}function ON(t=Ir()){return/webos/i.test(t)}function r1(t=Ir()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eU(t=Ir()){var e;return r1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tU(){return KP()&&document.documentMode===10}function kN(t=Ir()){return r1(t)||RN(t)||ON(t)||DN(t)||/windows phone/i.test(t)||NN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t,e=[]){let n;switch(t){case"Browser":n=w2(Ir());break;case"Worker":n=`${w2(Ir())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((u,c)=>{try{const f=e(o);u(f)}catch(f){c(f)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rU(t,e={}){return bo(t,"GET","/v2/passwordPolicy",To(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=6;class sU{constructor(e){var n,r,s,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:iU,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,u,c;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(o=f.containsUppercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(c=f.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),f}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new x2(this),this.idTokenSubscription=new x2(this),this.beforeStateQueue=new nU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_N,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=la(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await bl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Xm(this,{idToken:e}),r=await ts._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(gi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===c)&&f?.user&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qm(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=U7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gi(this.app))return Promise.reject(ca(this));const n=e?Sn(e):null;return n&&We(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gi(this.app)?Promise.reject(ca(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gi(this.app)?Promise.reject(ca(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(la(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rU(this),n=new sU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await J7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&la(e)||this._popupRedirectResolver;We(n,this,"argument-error"),this.redirectPersistenceManager=await bl.create(this,[la(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let u=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(c,this,"internal-error"),c.then(()=>{u||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(n);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(gi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&M7(`Error while retrieving App Check token: ${n.error}`),n?.token}}function mu(t){return Sn(t)}class x2{constructor(e){this.auth=e,this.observer=null,this.addObserver=n5(n=>this.observer=n)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oU(t){L0=t}function MN(t){return L0.loadJS(t)}function uU(){return L0.recaptchaEnterpriseScript}function lU(){return L0.gapiScript}function cU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class hU{constructor(){this.enterprise=new fU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class fU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const dU="recaptcha-enterprise",PN="NO_RECAPTCHA";class mU{constructor(e){this.type=dU,this.auth=mu(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,c)=>{Y7(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new q7(f);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,u(d.siteKey)}}).catch(f=>{c(f)})})}function s(o,u,c){const f=window.grecaptcha;b2(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(d=>{u(d)}).catch(()=>{u(PN)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hU().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(c=>{if(!n&&b2(window.grecaptcha))s(c,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=uU();f.length!==0&&(f+=c),MN(f).then(()=>{s(c,o,u)}).catch(d=>{u(d)})}}).catch(c=>{u(c)})})}}async function I2(t,e,n,r=!1,s=!1){const o=new mU(t);let u;if(s)u=PN;else try{u=await o.verify(n)}catch{u=await o.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const f=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const f=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:u}):Object.assign(c,{captchaResponse:u}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function xE(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await I2(t,e,n,n==="getOobCode");return r(t,u)}else return r(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await I2(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(t,e){const n=p0(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(ru(o,e??{}))return s;rs(s,"already-initialized")}return n.initialize({options:e})}function gU(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(la);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function yU(t,e,n){const r=mu(t);We(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=BN(e),{host:u,port:c}=EU(e),f=c===null?"":`:${c}`,d={url:`${o}//${u}${f}/`},p=Object.freeze({host:u,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){We(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),We(ru(d,r.config.emulator)&&ru(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,cu(u)?(c_(`${o}//${u}${f}`),h_("Auth",!0)):_U()}function BN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function EU(t){const e=BN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:C2(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:C2(u)}}}function C2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _U(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ua("not implemented")}_getIdTokenResponse(e){return ua("not implemented")}_linkToIdToken(e,n){return ua("not implemented")}_getReauthenticationResolver(e){return ua("not implemented")}}async function TU(t,e){return bo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bU(t,e){return yf(t,"POST","/v1/accounts:signInWithPassword",To(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vU(t,e){return yf(t,"POST","/v1/accounts:signInWithEmailLink",To(t,e))}async function SU(t,e){return yf(t,"POST","/v1/accounts:signInWithEmailLink",To(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends i1{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Wh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Wh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xE(e,n,"signInWithPassword",bU);case"emailLink":return vU(e,{email:this._email,oobCode:this._password});default:rs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xE(e,r,"signUpPassword",TU);case"emailLink":return SU(e,{idToken:n,email:this._email,oobCode:this._password});default:rs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(t,e){return yf(t,"POST","/v1/accounts:signInWithIdp",To(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU="http://localhost";class uu extends i1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new uu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=J_(n,["providerId","signInMethod"]);if(!r||!s)return null;const u=new uu(r,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return vl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,vl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vl(e,n)}buildRequest(){const e={requestUri:AU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=lf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xU(t){const e=fh(dh(t)).link,n=e?fh(dh(e)).deep_link_id:null,r=fh(dh(t)).deep_link_id;return(r?fh(dh(r)).link:null)||r||n||e||t}class s1{constructor(e){var n,r,s,o,u,c;const f=fh(dh(e)),d=(n=f.apiKey)!==null&&n!==void 0?n:null,p=(r=f.oobCode)!==null&&r!==void 0?r:null,y=wU((s=f.mode)!==null&&s!==void 0?s:null);We(d&&p&&y,"argument-error"),this.apiKey=d,this.operation=y,this.code=p,this.continueUrl=(o=f.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=f.lang)!==null&&u!==void 0?u:null,this.tenantId=(c=f.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=xU(e);try{return new s1(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(){this.providerId=$l.PROVIDER_ID}static credential(e,n){return Wh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=s1.parseLink(n);return We(r,"argument-error"),Wh._fromEmailAndCode(e,r.code,r.tenantId)}}$l.PROVIDER_ID="password";$l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends UN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends Ef{constructor(){super("facebook.com")}static credential(e){return uu._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xa.credential(e.oauthAccessToken)}catch{return null}}}Xa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends Ef{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return uu._fromParams({providerId:Qa.PROVIDER_ID,signInMethod:Qa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qa.credentialFromTaggedObject(e)}static credentialFromError(e){return Qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Qa.credential(n,r)}catch{return null}}}Qa.GOOGLE_SIGN_IN_METHOD="google.com";Qa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa extends Ef{constructor(){super("github.com")}static credential(e){return uu._fromParams({providerId:Wa.PROVIDER_ID,signInMethod:Wa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wa.credentialFromTaggedObject(e)}static credentialFromError(e){return Wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wa.credential(e.oauthAccessToken)}catch{return null}}}Wa.GITHUB_SIGN_IN_METHOD="github.com";Wa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za extends Ef{constructor(){super("twitter.com")}static credential(e,n){return uu._fromParams({providerId:Za.PROVIDER_ID,signInMethod:Za.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Za.credentialFromTaggedObject(e)}static credentialFromError(e){return Za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Za.credential(n,r)}catch{return null}}}Za.TWITTER_SIGN_IN_METHOD="twitter.com";Za.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IU(t,e){return yf(t,"POST","/v1/accounts:signUp",To(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await ts._fromIdTokenResponse(e,r,s),u=N2(r);return new lu({user:o,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=N2(r);return new lu({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function N2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm extends Ps{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Wm.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Wm(e,n,r,s)}}function VN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Wm._fromErrorAndOperation(t,o,e,r):o})}async function CU(t,e,n=!1){const r=await Qh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return lu._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(t,e,n=!1){const{auth:r}=t;if(gi(r.app))return Promise.reject(ca(r));const s="reauthenticate";try{const o=await Qh(t,VN(r,s,e,t),n);We(o.idToken,r,"internal-error");const u=n1(o.idToken);We(u,r,"internal-error");const{sub:c}=u;return We(t.uid===c,r,"user-mismatch"),lu._forOperation(t,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&rs(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(t,e,n=!1){if(gi(t.app))return Promise.reject(ca(t));const r="signIn",s=await VN(t,r,e),o=await lu._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function RU(t,e){return HN(mu(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(t){const e=mu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function DU(t,e,n){if(gi(t.app))return Promise.reject(ca(t));const r=mu(t),u=await xE(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",IU).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&FN(t),f}),c=await lu._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(c.user),c}function OU(t,e,n){return gi(t.app)?Promise.reject(ca(t)):RU(Sn(t),$l.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&FN(t),r})}function kU(t,e,n,r){return Sn(t).onIdTokenChanged(e,n,r)}function LU(t,e,n){return Sn(t).beforeAuthStateChanged(e,n)}function MU(t,e,n,r){return Sn(t).onAuthStateChanged(e,n,r)}function PU(t){return Sn(t).signOut()}const Zm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zm,"1"),this.storage.removeItem(Zm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU=1e3,UU=10;class jN extends zN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,c,f)=>{this.notifyListeners(u,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);tU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,UU):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},BU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jN.type="LOCAL";const VU=jN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN extends zN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qN.type="SESSION";const YN=qN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new M0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,u=this.handlersMap[s];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(u).map(async d=>d(n.origin,o)),f=await HU(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}M0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((c,f)=>{const d=a1("",20);s.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(y){const T=y;if(T.data.eventId===d)switch(T.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(T.data.response);break;default:clearTimeout(p),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(){return window}function zU(t){Os().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(){return typeof Os().WorkerGlobalScope<"u"&&typeof Os().importScripts=="function"}async function jU(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function YU(){return GN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="firebaseLocalStorageDb",GU=1,Jm="firebaseLocalStorage",KN="fbase_key";class _f{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function P0(t,e){return t.transaction([Jm],e?"readwrite":"readonly").objectStore(Jm)}function $U(){const t=indexedDB.deleteDatabase($N);return new _f(t).toPromise()}function IE(){const t=indexedDB.open($N,GU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Jm,{keyPath:KN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Jm)?e(r):(r.close(),await $U(),e(await IE()))})})}async function R2(t,e,n){const r=P0(t,!0).put({[KN]:e,value:n});return new _f(r).toPromise()}async function KU(t,e){const n=P0(t,!1).get(e),r=await new _f(n).toPromise();return r===void 0?null:r.value}function D2(t,e){const n=P0(t,!0).delete(e);return new _f(n).toPromise()}const XU=800,QU=3;class XN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await IE(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>QU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=M0._getInstance(YU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await jU(),!this.activeServiceWorker)return;this.sender=new FU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await IE();return await R2(e,Zm,"1"),await D2(e,Zm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>R2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>KU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>D2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=P0(s,!1).getAll();return new _f(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XN.type="LOCAL";const WU=XN;new gf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(t,e){return e?la(e):(We(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1 extends i1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function JU(t){return HN(t.auth,new o1(t),t.bypassAuthState)}function eV(t){const{auth:e,user:n}=t;return We(n,e,"internal-error"),NU(n,new o1(t),t.bypassAuthState)}async function tV(t){const{auth:e,user:n}=t;return We(n,e,"internal-error"),CU(n,new o1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:u,type:c}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(f))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JU;case"linkViaPopup":case"linkViaRedirect":return tV;case"reauthViaPopup":case"reauthViaRedirect":return eV;default:rs(this.auth,"internal-error")}}resolve(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=new gf(2e3,1e4);class dl extends QN{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,dl.currentPopupAction&&dl.currentPopupAction.cancel(),dl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){ga(this.filter.length===1,"Popup operations only handle one event");const e=a1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nV.get())};e()}}dl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV="pendingRedirect",_m=new Map;class iV extends QN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_m.get(this.auth._key());if(!e){try{const r=await sV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_m.set(this.auth._key(),e)}return this.bypassAuthState||_m.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sV(t,e){const n=uV(e),r=oV(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function aV(t,e){_m.set(t._key(),e)}function oV(t){return la(t._redirectPersistence)}function uV(t){return Em(rV,t.config.apiKey,t.name)}async function lV(t,e,n=!1){if(gi(t.app))return Promise.reject(ca(t));const r=mu(t),s=ZU(r,e),u=await new iV(r,s,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=10*60*1e3;class hV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!WN(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ds(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cV&&this.cachedEventUids.clear(),this.cachedEventUids.has(O2(e))}saveEventToCache(e){this.cachedEventUids.add(O2(e)),this.lastProcessedEventTime=Date.now()}}function O2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function WN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function fV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dV(t,e={}){return bo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pV=/^https?/;async function gV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await dV(t);for(const n of e)try{if(yV(n))return}catch{}rs(t,"unauthorized-domain")}function yV(t){const e=AE(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!pV.test(n))return!1;if(mV.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=new gf(3e4,6e4);function k2(){const t=Os().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _V(t){return new Promise((e,n)=>{var r,s,o;function u(){k2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{k2(),n(Ds(t,"network-request-failed"))},timeout:EV.get()})}if(!((s=(r=Os().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Os().gapi)===null||o===void 0)&&o.load)u();else{const c=cU("iframefcb");return Os()[c]=()=>{gapi.load?u():n(Ds(t,"network-request-failed"))},MN(`${lU()}?onload=${c}`).catch(f=>n(f))}}).catch(e=>{throw Tm=null,e})}let Tm=null;function TV(t){return Tm=Tm||_V(t),Tm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=new gf(5e3,15e3),vV="__/auth/iframe",SV="emulator/auth/iframe",AV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xV(t){const e=t.config;We(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?t1(e,SV):`https://${t.config.authDomain}/${vV}`,r={apiKey:e.apiKey,appName:t.name,v:Hl},s=wV.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${lf(r).slice(1)}`}async function IV(t){const e=await TV(t),n=Os().gapi;return We(n,t,"internal-error"),e.open({where:document.body,url:xV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AV,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const u=Ds(t,"network-request-failed"),c=Os().setTimeout(()=>{o(u)},bV.get());function f(){Os().clearTimeout(c),s(r)}r.ping(f).then(f,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NV=500,RV=600,DV="_blank",OV="http://localhost";class L2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kV(t,e,n,r=NV,s=RV){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const f=Object.assign(Object.assign({},CV),{width:r.toString(),height:s.toString(),top:o,left:u}),d=Ir().toLowerCase();n&&(c=CN(d)?DV:n),xN(d)&&(e=e||OV,f.scrollbars="yes");const p=Object.entries(f).reduce((T,[b,w])=>`${T}${b}=${w},`,"");if(eU(d)&&c!=="_self")return LV(e||"",c),new L2(null);const y=window.open(e||"",c,p);We(y,t,"popup-blocked");try{y.focus()}catch{}return new L2(y)}function LV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV="__/auth/handler",PV="emulator/auth/handler",BV=encodeURIComponent("fac");async function M2(t,e,n,r,s,o){We(t.config.authDomain,t,"auth-domain-config-required"),We(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Hl,eventId:s};if(e instanceof UN){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",t5(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))u[p]=y}if(e instanceof Ef){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(u.scopes=p.join(","))}t.tenantId&&(u.tid=t.tenantId);const c=u;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const f=await t._getAppCheckToken(),d=f?`#${BV}=${encodeURIComponent(f)}`:"";return`${UV(t)}?${lf(c).slice(1)}${d}`}function UV({config:t}){return t.emulator?t1(t,PV):`https://${t.authDomain}/${MV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="webStorageSupport";class VV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YN,this._completeRedirectFn=lV,this._overrideRedirectResult=aV}async _openPopup(e,n,r,s){var o;ga((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await M2(e,n,r,AE(),s);return kV(e,u,a1())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await M2(e,n,r,AE(),s);return zU(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(ga(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await IV(e),r=new hV(e);return n.register("authEvent",s=>(We(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(by,{type:by},s=>{var o;const u=(o=s?.[0])===null||o===void 0?void 0:o[by];u!==void 0&&n(!!u),rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kN()||IN()||r1()}}const HV=VV;var P2="@firebase/auth",B2="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jV(t){iu(new co("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:c}=r.options;We(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LN(t)},d=new aU(r,s,o,f);return gU(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),iu(new co("auth-internal",e=>{const n=mu(e.getProvider("auth").getImmediate());return(r=>new FV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(P2,B2,zV(t)),Cs(P2,B2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV=5*60,YV=MI("authIdTokenMaxAge")||qV;let U2=null;const GV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>YV)return;const s=n?.token;U2!==s&&(U2=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function $V(t=m_()){const e=p0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pU(t,{popupRedirectResolver:HV,persistence:[WU,VU,YN]}),r=MI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=GV(o.toString());LU(n,u,()=>u(n.currentUser)),kU(n,c=>u(c))}}const s=OI("auth");return s&&yU(n,`http://${s}`),n}function KV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}oU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=Ds("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",KV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jV("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV="type.googleapis.com/google.protobuf.Int64Value",QV="type.googleapis.com/google.protobuf.UInt64Value";function ZN(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function e0(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>e0(e));if(typeof t=="function"||typeof t=="object")return ZN(t,e=>e0(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Bl(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case XV:case QV:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Bl(e)):typeof t=="function"||typeof t=="object"?ZN(t,e=>Bl(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ei extends Ps{constructor(e,n,r){super(`${u1}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,ei.prototype)}}function WV(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function t0(t,e){let n=WV(t),r=n,s;try{const o=e&&e.error;if(o){const u=o.status;if(typeof u=="string"){if(!V2[u])return new ei("internal","internal");n=V2[u],r=u}const c=o.message;typeof c=="string"&&(r=c),s=o.details,s!==void 0&&(s=Bl(s))}}catch{}return n==="ok"?null:new ei(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,gi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="us-central1",JV=/^data: (.*?)(?:\n|$)/;function eH(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new ei("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class tH{constructor(e,n,r,s,o=CE,u=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new ZV(e,n,r,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=CE}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function nH(t,e,n){const r=cu(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(c_(t.emulatorOrigin),h_("Functions",!0))}function rH(t,e,n){const r=s=>sH(t,e,s,{});return r.stream=(s,o)=>oH(t,e,s,o),r}async function iH(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function JN(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function sH(t,e,n,r){const s=t._url(e);return aH(t,s,n,r)}async function aH(t,e,n,r){n=e0(n);const s={data:n},o=await JN(t,r),u=r.timeout||7e4,c=eH(u),f=await Promise.race([iH(e,s,o,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!f)throw new ei("cancelled","Firebase Functions instance was deleted.");const d=t0(f.status,f.json);if(d)throw d;if(!f.json)throw new ei("internal","Response is not valid JSON object.");let p=f.json.data;if(typeof p>"u"&&(p=f.json.result),typeof p>"u")throw new ei("internal","Response is missing data field.");return{data:Bl(p)}}function oH(t,e,n,r){const s=t._url(e);return uH(t,s,n,r||{})}async function uH(t,e,n,r){var s;n=e0(n);const o={data:n},u=await JN(t,r);u["Content-Type"]="application/json",u.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:r?.signal})}catch(b){if(b instanceof Error&&b.name==="AbortError"){const N=new ei("cancelled","Request was cancelled.");return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}const w=t0(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let f,d;const p=new Promise((b,w)=>{f=b,d=w});(s=r?.signal)===null||s===void 0||s.addEventListener("abort",()=>{const b=new ei("cancelled","Request was cancelled.");d(b)});const y=c.body.getReader(),T=lH(y,f,d,r?.signal);return{stream:{[Symbol.asyncIterator](){const b=T.getReader();return{async next(){const{value:w,done:N}=await b.read();return{value:w,done:N}},async return(){return await b.cancel(),{done:!0,value:void 0}}}}},data:p}}function lH(t,e,n,r){const s=(u,c)=>{const f=u.match(JV);if(!f)return;const d=f[1];try{const p=JSON.parse(d);if("result"in p){e(Bl(p.result));return}if("message"in p){c.enqueue(Bl(p.message));return}if("error"in p){const y=t0(0,p);c.error(y),n(y);return}}catch(p){if(p instanceof ei){c.error(p),n(p);return}}},o=new TextDecoder;return new ReadableStream({start(u){let c="";return f();async function f(){if(r?.aborted){const d=new ei("cancelled","Request was cancelled");return u.error(d),n(d),Promise.resolve()}try{const{value:d,done:p}=await t.read();if(p){c.trim()&&s(c.trim(),u),u.close();return}if(r?.aborted){const T=new ei("cancelled","Request was cancelled");u.error(T),n(T),await t.cancel();return}c+=o.decode(d,{stream:!0});const y=c.split(`
`);c=y.pop()||"";for(const T of y)T.trim()&&s(T.trim(),u);return f()}catch(d){const p=d instanceof ei?d:t0(0,null);u.error(p),n(p)}}},cancel(){return t.cancel()}})}const H2="@firebase/functions",F2="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cH="auth-internal",hH="app-check-internal",fH="messaging-internal";function dH(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider(cH),u=n.getProvider(fH),c=n.getProvider(hH);return new tH(s,o,u,c,r)};iu(new co(u1,e,"PUBLIC").setMultipleInstances(!0)),Cs(H2,F2,t),Cs(H2,F2,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mH(t=m_(),e=CE){const r=p0(Sn(t),u1).getImmediate({identifier:e}),s=kI("functions");return s&&eR(r,...s),r}function eR(t,e,n){nH(Sn(t),e,n)}function tR(t,e,n){return rH(Sn(t),e)}dH();const pH={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},l1=UI(pH),is=d7(l1),n0=$V(l1),c1=mH(l1,"us-central1");eR(c1,"localhost",5001);const vi={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},Fr={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function gH(){const[t,e]=re.useState(""),[n,r]=re.useState(""),[s,o]=re.useState(!1),[u,c]=re.useState(!1),[f,d]=re.useState(""),p=async T=>{T.preventDefault(),c(!0),d("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(Fr.INVALID_EMAIL);if(n.length<6)throw new Error(Fr.WEAK_PASSWORD);const w=await DU(n0,t,n);console.log("User created successfully:",w.user.uid)}catch(b){console.error("Sign up error:",b);let w="Failed to create account";b.code==="auth/email-already-in-use"?w=Fr.EMAIL_IN_USE:b.code==="auth/invalid-email"?w=Fr.INVALID_EMAIL:b.code==="auth/weak-password"?w=Fr.WEAK_PASSWORD:b.code==="auth/operation-not-allowed"?w="Email/password accounts are not enabled. Please contact support.":b.message&&(w=b.message),d(w)}finally{c(!1)}},y=async T=>{T.preventDefault(),c(!0),d("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(Fr.INVALID_EMAIL);const w=await OU(n0,t,n);console.log("User signed in successfully:",w.user.uid)}catch(b){console.error("Sign in error:",b);let w="Failed to sign in";b.code==="auth/user-not-found"?w=Fr.USER_NOT_FOUND:b.code==="auth/wrong-password"?w=Fr.WRONG_PASSWORD:b.code==="auth/invalid-email"?w=Fr.INVALID_EMAIL:b.code==="auth/user-disabled"?w="This account has been disabled. Please contact support.":b.code==="auth/too-many-requests"?w=Fr.TOO_MANY_REQUESTS:b.message&&(w=b.message),d(w)}finally{c(!1)}};return Y.jsx("div",{className:"auth-window-container fixed inset-0 bg-gray-900/80 dark:bg-gray-950/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:Y.jsxs("div",{className:"auth-window bg-gray-800 dark:bg-gray-900 rounded-lg shadow-2xl p-8 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[Y.jsxs("div",{className:"auth-window-header text-center mb-8",children:[Y.jsx("h2",{className:"auth-window-title text-2xl font-bold text-white dark:text-white mb-2",children:s?"Create Account":"Welcome Back"}),Y.jsx("p",{className:"auth-window-subtitle text-gray-400 dark:text-gray-400 text-sm",children:s?"Join the platform to start building your boards":"Sign in to access your boards and continue your work"})]}),Y.jsxs("form",{onSubmit:s?p:y,className:"auth-form space-y-6",children:[Y.jsx("div",{className:"auth-input-group",children:Y.jsx("input",{type:"email",placeholder:"Email address",value:t,onChange:T=>e(T.target.value),required:!0,className:`auth-input w-full px-4 py-3 bg-gray-700 dark:bg-gray-800 border border-gray-600 dark:border-gray-700 
                                     rounded-lg text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-400 
                                     focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-blue-400/20 
                                     transition-all duration-200`})}),Y.jsx("div",{className:"auth-input-group",children:Y.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:T=>r(T.target.value),required:!0,className:`auth-input w-full px-4 py-3 bg-gray-700 dark:bg-gray-800 border border-gray-600 dark:border-gray-700 
                                     rounded-lg text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-400 
                                     focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-blue-400/20 
                                     transition-all duration-200`})}),Y.jsx("button",{type:"submit",disabled:u,className:`auth-submit-btn w-full py-3 px-4 rounded-lg font-medium text-white transition-all duration-200 
                                   ${u?"bg-gray-600 dark:bg-gray-700 cursor-not-allowed":"bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 active:bg-blue-800 dark:active:bg-blue-700"}
                                   focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-blue-400/20
                                   ${u?"loading":""}`,children:u?Y.jsx("div",{className:"loading-spinner inline-block w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s?"Create Account":"Sign In"}),f&&Y.jsx("div",{className:`auth-error bg-red-900/20 dark:bg-red-900/30 border border-red-500/30 dark:border-red-500/40 
                                       rounded-lg p-3 text-red-400 dark:text-red-400 text-sm`,children:f})]}),Y.jsxs("div",{className:"auth-switch text-center mt-6",children:[Y.jsx("span",{className:"auth-switch-text text-gray-400 dark:text-gray-400 text-sm",children:s?"Already have an account?":"Don't have an account?"}),Y.jsx("button",{type:"button",onClick:()=>o(!s),className:`auth-switch-btn ml-2 text-blue-400 dark:text-blue-400 hover:text-blue-300 dark:hover:text-blue-300 
                                 text-sm font-medium transition-colors duration-200 bg-transparent border-none cursor-pointer`,children:s?"Sign In":"Sign Up"})]})]})})}function yH({show:t,onHide:e,onConfirm:n,isCreating:r=!1}){const[s,o]=re.useState(""),[u,c]=re.useState(!0),f=T=>{const b=T.target.value;o(b),c(b.trim().length>0&&b.trim().length<=50)},d=T=>{T.preventDefault();const b=s.trim();b.length>0&&b.length<=50&&(n(b),o(""),c(!0))},p=()=>{o(""),c(!0),e()},y=T=>{T.key==="Enter"&&d(T)};return t?Y.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/50 dark:bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:Y.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-lg shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[Y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Y.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),Y.jsx("button",{onClick:p,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-transparent border-none text-xl cursor-pointer p-1 rounded transition-colors duration-150`,"aria-label":"Close",children:""})]}),Y.jsxs("form",{onSubmit:d,className:"space-y-4",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),Y.jsx("input",{type:"text",value:s,onChange:f,onKeyDown:y,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-3 py-2 bg-gray-700 dark:bg-gray-800 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-400 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-blue-400/20 
                                       transition-all duration-200
                                       ${u?"border-gray-600 dark:border-gray-700 focus:border-blue-500 dark:focus:border-blue-400":"border-red-500 dark:border-red-500 focus:border-red-500 dark:focus:border-red-500"}`}),!u&&Y.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-1",children:"Board name must be between 1 and 50 characters long."}),Y.jsxs("p",{className:`text-sm mt-1 ${s.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[s.length,"/50 characters"]})]}),Y.jsxs("div",{className:"flex gap-3 pt-4",children:[Y.jsx("button",{type:"button",onClick:p,disabled:r,className:`flex-1 px-4 py-2 bg-gray-600 dark:bg-gray-700 text-gray-200 dark:text-gray-200 
                                     rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-500 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),Y.jsx("button",{type:"submit",disabled:!u||s.trim().length===0||r,className:`flex-1 px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-lg font-medium 
                                     transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none 
                                     focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-blue-400/20`,children:r?"Creating...":"Create Board"})]})]})]})}):null}function EH({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:s,onSignOut:o,isLoading:u}){const[c,f]=re.useState(!1),[d,p]=re.useState(!1),[y,T]=re.useState(null),b=async D=>{try{f(!0),await r(D),p(!1)}catch(F){console.error("Error in sidebar create board:",F)}finally{f(!1)}},w=()=>{p(!0)},N=()=>{p(!1)},k=(D,F)=>{D.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&s(F)};return Y.jsxs(Y.Fragment,{children:[Y.jsx("div",{className:"sidebar split-pane-sidebar bg-gray-900 dark:bg-gray-950 border-r border-gray-700 dark:border-gray-800",children:Y.jsxs("div",{className:"flex flex-col h-full p-4",children:[Y.jsx("div",{className:"py-2 text-right",children:Y.jsx("button",{onClick:w,disabled:u||c,className:`px-3 py-1.5 rounded border transition-all duration-150 
                                ${u||c?"cursor-not-allowed opacity-50":"cursor-pointer hover:bg-blue-600 hover:border-blue-400"}
                                border-blue-500 bg-gray-800 dark:bg-gray-900 
                                text-blue-400 dark:text-blue-400
                                dark:border-blue-500`,children:c?"Creating...":"+ New Board"})}),Y.jsx("div",{className:"flex flex-col gap-2 mt-2 overflow-y-auto flex-grow",children:t.map(D=>{const F=e?.id===D.id,q=y===D.id;return Y.jsxs("div",{onClick:()=>!u&&n(D.id),onMouseEnter:()=>T(D.id),onMouseLeave:()=>T(null),className:`
                                        min-h-[54px] px-5 py-3.5 mx-2 rounded-lg flex justify-between items-center
                                        transition-all duration-150 cursor-pointer
                                        ${u?"cursor-not-allowed":"cursor-pointer"}
                                        ${F?"border-2 border-blue-500 bg-blue-900/30 dark:bg-blue-900/40 text-white dark:text-white font-semibold shadow-lg shadow-blue-500/20":q?"border border-gray-500 dark:border-gray-600 bg-gray-800 dark:bg-gray-800 text-gray-300 dark:text-gray-300 shadow-sm shadow-black/20 -translate-y-0.5":"border border-gray-700 dark:border-gray-700 bg-gray-850 dark:bg-gray-850 text-gray-400 dark:text-gray-400"}
                                    `,role:"button",tabIndex:0,onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&!u&&n(D.id)},children:[Y.jsx("span",{className:`
                                        ${F?"font-bold":"font-medium"} 
                                        text-lg flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        tracking-wide leading-5
                                    `,children:D.name}),Y.jsxs("div",{className:"flex items-center gap-2",children:[D.isOpen&&Y.jsx("span",{className:"text-blue-400 dark:text-blue-400 text-lg",children:""}),t.length>1&&Y.jsx("button",{onClick:j=>{j.stopPropagation(),k(j,D.id)},title:"Delete board",className:`
                                                    bg-transparent border-none text-red-400 dark:text-red-400 
                                                    cursor-pointer text-xl leading-none px-1 transition-opacity duration-150
                                                    ${q?"opacity-100 visible":"opacity-0 invisible"}
                                                    hover:text-red-300 dark:hover:text-red-300
                                                `,children:""})]})]},D.id)})}),u&&Y.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-500",children:"Loading boards..."}),Y.jsx("div",{className:"py-3",children:Y.jsx("button",{onClick:o,className:`px-3 py-1.5 rounded border border-gray-700 dark:border-gray-600 
                                     bg-transparent text-gray-300 dark:text-gray-300 cursor-pointer
                                     hover:bg-gray-700 dark:hover:bg-gray-700
                                     hover:border-gray-600 dark:hover:border-gray-500
                                     transition-all duration-150`,children:"Sign Out"})})]})}),Y.jsx(yH,{show:d,onHide:N,onConfirm:b,isCreating:c})]})}function z2(t){const e=[],n=String(t||"");let r=n.indexOf(","),s=0,o=!1;for(;!o;){r===-1&&(r=n.length,o=!0);const u=n.slice(s,r).trim();(u||!o)&&e.push(u),s=r+1,r=n.indexOf(",",s)}return e}function nR(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const _H=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,TH=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,bH={};function j2(t,e){return(bH.jsx?TH:_H).test(t)}const vH=/[ \t\n\f\r]/g;function SH(t){return typeof t=="object"?t.type==="text"?q2(t.value):!1:q2(t)}function q2(t){return t.replace(vH,"")===""}let Tf=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};Tf.prototype.normal={};Tf.prototype.property={};Tf.prototype.space=void 0;function rR(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new Tf(n,r,e)}function Zh(t){return t.toLowerCase()}let ni=class{constructor(e,n){this.attribute=n,this.property=e}};ni.prototype.attribute="";ni.prototype.booleanish=!1;ni.prototype.boolean=!1;ni.prototype.commaOrSpaceSeparated=!1;ni.prototype.commaSeparated=!1;ni.prototype.defined=!1;ni.prototype.mustUseProperty=!1;ni.prototype.number=!1;ni.prototype.overloadedBoolean=!1;ni.prototype.property="";ni.prototype.spaceSeparated=!1;ni.prototype.space=void 0;let AH=0;const ot=pu(),Mn=pu(),NE=pu(),Oe=pu(),nn=pu(),Sl=pu(),di=pu();function pu(){return 2**++AH}const RE=Object.freeze(Object.defineProperty({__proto__:null,boolean:ot,booleanish:Mn,commaOrSpaceSeparated:di,commaSeparated:Sl,number:Oe,overloadedBoolean:NE,spaceSeparated:nn},Symbol.toStringTag,{value:"Module"})),vy=Object.keys(RE);let h1=class extends ni{constructor(e,n,r,s){let o=-1;if(super(e,n),Y2(this,"space",s),typeof r=="number")for(;++o<vy.length;){const u=vy[o];Y2(this,vy[o],(r&RE[u])===RE[u])}}};h1.prototype.defined=!0;function Y2(t,e,n){n&&(t[e]=n)}function Kl(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const o=new h1(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),e[r]=o,n[Zh(r)]=r,n[Zh(o.attribute)]=r}return new Tf(e,n,t.space)}const iR=Kl({properties:{ariaActiveDescendant:null,ariaAtomic:Mn,ariaAutoComplete:null,ariaBusy:Mn,ariaChecked:Mn,ariaColCount:Oe,ariaColIndex:Oe,ariaColSpan:Oe,ariaControls:nn,ariaCurrent:null,ariaDescribedBy:nn,ariaDetails:null,ariaDisabled:Mn,ariaDropEffect:nn,ariaErrorMessage:null,ariaExpanded:Mn,ariaFlowTo:nn,ariaGrabbed:Mn,ariaHasPopup:null,ariaHidden:Mn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:nn,ariaLevel:Oe,ariaLive:null,ariaModal:Mn,ariaMultiLine:Mn,ariaMultiSelectable:Mn,ariaOrientation:null,ariaOwns:nn,ariaPlaceholder:null,ariaPosInSet:Oe,ariaPressed:Mn,ariaReadOnly:Mn,ariaRelevant:null,ariaRequired:Mn,ariaRoleDescription:nn,ariaRowCount:Oe,ariaRowIndex:Oe,ariaRowSpan:Oe,ariaSelected:Mn,ariaSetSize:Oe,ariaSort:null,ariaValueMax:Oe,ariaValueMin:Oe,ariaValueNow:Oe,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function sR(t,e){return e in t?t[e]:e}function aR(t,e){return sR(t,e.toLowerCase())}const wH=Kl({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Sl,acceptCharset:nn,accessKey:nn,action:null,allow:null,allowFullScreen:ot,allowPaymentRequest:ot,allowUserMedia:ot,alt:null,as:null,async:ot,autoCapitalize:null,autoComplete:nn,autoFocus:ot,autoPlay:ot,blocking:nn,capture:null,charSet:null,checked:ot,cite:null,className:nn,cols:Oe,colSpan:null,content:null,contentEditable:Mn,controls:ot,controlsList:nn,coords:Oe|Sl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ot,defer:ot,dir:null,dirName:null,disabled:ot,download:NE,draggable:Mn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ot,formTarget:null,headers:nn,height:Oe,hidden:NE,high:Oe,href:null,hrefLang:null,htmlFor:nn,httpEquiv:nn,id:null,imageSizes:null,imageSrcSet:null,inert:ot,inputMode:null,integrity:null,is:null,isMap:ot,itemId:null,itemProp:nn,itemRef:nn,itemScope:ot,itemType:nn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ot,low:Oe,manifest:null,max:null,maxLength:Oe,media:null,method:null,min:null,minLength:Oe,multiple:ot,muted:ot,name:null,nonce:null,noModule:ot,noValidate:ot,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ot,optimum:Oe,pattern:null,ping:nn,placeholder:null,playsInline:ot,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ot,referrerPolicy:null,rel:nn,required:ot,reversed:ot,rows:Oe,rowSpan:Oe,sandbox:nn,scope:null,scoped:ot,seamless:ot,selected:ot,shadowRootClonable:ot,shadowRootDelegatesFocus:ot,shadowRootMode:null,shape:null,size:Oe,sizes:null,slot:null,span:Oe,spellCheck:Mn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Oe,step:null,style:null,tabIndex:Oe,target:null,title:null,translate:null,type:null,typeMustMatch:ot,useMap:null,value:Mn,width:Oe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:nn,axis:null,background:null,bgColor:null,border:Oe,borderColor:null,bottomMargin:Oe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ot,declare:ot,event:null,face:null,frame:null,frameBorder:null,hSpace:Oe,leftMargin:Oe,link:null,longDesc:null,lowSrc:null,marginHeight:Oe,marginWidth:Oe,noResize:ot,noHref:ot,noShade:ot,noWrap:ot,object:null,profile:null,prompt:null,rev:null,rightMargin:Oe,rules:null,scheme:null,scrolling:Mn,standby:null,summary:null,text:null,topMargin:Oe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Oe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ot,disableRemotePlayback:ot,prefix:null,property:null,results:Oe,security:null,unselectable:null},space:"html",transform:aR}),xH=Kl({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:di,accentHeight:Oe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Oe,amplitude:Oe,arabicForm:null,ascent:Oe,attributeName:null,attributeType:null,azimuth:Oe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Oe,by:null,calcMode:null,capHeight:Oe,className:nn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Oe,diffuseConstant:Oe,direction:null,display:null,dur:null,divisor:Oe,dominantBaseline:null,download:ot,dx:null,dy:null,edgeMode:null,editable:null,elevation:Oe,enableBackground:null,end:null,event:null,exponent:Oe,externalResourcesRequired:null,fill:null,fillOpacity:Oe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Sl,g2:Sl,glyphName:Sl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Oe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Oe,horizOriginX:Oe,horizOriginY:Oe,id:null,ideographic:Oe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Oe,k:Oe,k1:Oe,k2:Oe,k3:Oe,k4:Oe,kernelMatrix:di,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Oe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Oe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Oe,overlineThickness:Oe,paintOrder:null,panose1:null,path:null,pathLength:Oe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:nn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Oe,pointsAtY:Oe,pointsAtZ:Oe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:di,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:di,rev:di,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:di,requiredFeatures:di,requiredFonts:di,requiredFormats:di,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Oe,specularExponent:Oe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Oe,strikethroughThickness:Oe,string:null,stroke:null,strokeDashArray:di,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Oe,strokeOpacity:Oe,strokeWidth:null,style:null,surfaceScale:Oe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:di,tabIndex:Oe,tableValues:null,target:null,targetX:Oe,targetY:Oe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:di,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Oe,underlineThickness:Oe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Oe,values:null,vAlphabetic:Oe,vMathematical:Oe,vectorEffect:null,vHanging:Oe,vIdeographic:Oe,version:null,vertAdvY:Oe,vertOriginX:Oe,vertOriginY:Oe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Oe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:sR}),oR=Kl({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),uR=Kl({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:aR}),lR=Kl({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),IH={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},CH=/[A-Z]/g,G2=/-[a-z]/g,NH=/^data[-\w.:]+$/i;function f1(t,e){const n=Zh(e);let r=e,s=ni;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&NH.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(G2,DH);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!G2.test(o)){let u=o.replace(CH,RH);u.charAt(0)!=="-"&&(u="-"+u),e="data"+u}}s=h1}return new s(r,e)}function RH(t){return"-"+t.toLowerCase()}function DH(t){return t.charAt(1).toUpperCase()}const B0=rR([iR,wH,oR,uR,lR],"html"),Xl=rR([iR,xH,oR,uR,lR],"svg");function $2(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function cR(t){return t.join(" ").trim()}var sl={},Sy,K2;function OH(){if(K2)return Sy;K2=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,u=/^[;\s]*/,c=/^\s+|\s+$/g,f=`
`,d="/",p="*",y="",T="comment",b="declaration";Sy=function(N,k){if(typeof N!="string")throw new TypeError("First argument must be a string");if(!N)return[];k=k||{};var D=1,F=1;function q(I){var L=I.match(e);L&&(D+=L.length);var K=I.lastIndexOf(f);F=~K?I.length-K:F+I.length}function j(){var I={line:D,column:F};return function(L){return L.position=new ee(I),C(),L}}function ee(I){this.start=I,this.end={line:D,column:F},this.source=k.source}ee.prototype.content=N;function $(I){var L=new Error(k.source+":"+D+":"+F+": "+I);if(L.reason=I,L.filename=k.source,L.line=D,L.column=F,L.source=N,!k.silent)throw L}function R(I){var L=I.exec(N);if(L){var K=L[0];return q(K),N=N.slice(K.length),L}}function C(){R(n)}function O(I){var L;for(I=I||[];L=M();)L!==!1&&I.push(L);return I}function M(){var I=j();if(!(d!=N.charAt(0)||p!=N.charAt(1))){for(var L=2;y!=N.charAt(L)&&(p!=N.charAt(L)||d!=N.charAt(L+1));)++L;if(L+=2,y===N.charAt(L-1))return $("End of comment missing");var K=N.slice(2,L-2);return F+=2,q(K),N=N.slice(L),F+=2,I({type:T,comment:K})}}function B(){var I=j(),L=R(r);if(L){if(M(),!R(s))return $("property missing ':'");var K=R(o),H=I({type:b,property:w(L[0].replace(t,y)),value:K?w(K[0].replace(t,y)):y});return R(u),H}}function U(){var I=[];O(I);for(var L;L=B();)L!==!1&&(I.push(L),O(I));return I}return C(),U()};function w(N){return N?N.replace(c,y):y}return Sy}var X2;function kH(){if(X2)return sl;X2=1;var t=sl&&sl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(sl,"__esModule",{value:!0}),sl.default=n;var e=t(OH());function n(r,s){var o=null;if(!r||typeof r!="string")return o;var u=(0,e.default)(r),c=typeof s=="function";return u.forEach(function(f){if(f.type==="declaration"){var d=f.property,p=f.value;c?s(d,p,f):p&&(o=o||{},o[d]=p)}}),o}return sl}var rh={},Q2;function LH(){if(Q2)return rh;Q2=1,Object.defineProperty(rh,"__esModule",{value:!0}),rh.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,o=function(d){return!d||n.test(d)||t.test(d)},u=function(d,p){return p.toUpperCase()},c=function(d,p){return"".concat(p,"-")},f=function(d,p){return p===void 0&&(p={}),o(d)?d:(d=d.toLowerCase(),p.reactCompat?d=d.replace(s,c):d=d.replace(r,c),d.replace(e,u))};return rh.camelCase=f,rh}var ih,W2;function MH(){if(W2)return ih;W2=1;var t=ih&&ih.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(kH()),n=LH();function r(s,o){var u={};return!s||typeof s!="string"||(0,e.default)(s,function(c,f){c&&f&&(u[(0,n.camelCase)(c,o)]=f)}),u}return r.default=r,ih=r,ih}var PH=MH();const BH=o0(PH),U0=hR("end"),Bs=hR("start");function hR(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function UH(t){const e=Bs(t),n=U0(t);if(e&&n)return{start:e,end:n}}function wh(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Z2(t.position):"start"in t||"end"in t?Z2(t):"line"in t||"column"in t?DE(t):""}function DE(t){return J2(t&&t.line)+":"+J2(t&&t.column)}function Z2(t){return DE(t&&t.start)+"-"+DE(t&&t.end)}function J2(t){return t&&typeof t=="number"?t:1}class Cr extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",o={},u=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof e=="string"?s=e:!o.cause&&e&&(u=!0,s=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?o.ruleId=r:(o.source=r.slice(0,f),o.ruleId=r.slice(f+1))}if(!o.place&&o.ancestors&&o.ancestors){const f=o.ancestors[o.ancestors.length-1];f&&(o.place=f.position)}const c=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=c?c.line:void 0,this.name=wh(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=u&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}Cr.prototype.file="";Cr.prototype.name="";Cr.prototype.reason="";Cr.prototype.message="";Cr.prototype.stack="";Cr.prototype.column=void 0;Cr.prototype.line=void 0;Cr.prototype.ancestors=void 0;Cr.prototype.cause=void 0;Cr.prototype.fatal=void 0;Cr.prototype.place=void 0;Cr.prototype.ruleId=void 0;Cr.prototype.source=void 0;const d1={}.hasOwnProperty,VH=new Map,HH=/[A-Z]/g,FH=new Set(["table","tbody","thead","tfoot","tr"]),zH=new Set(["td","th"]),fR="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function jH(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=WH(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=QH(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Xl:B0,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=dR(s,t,void 0);return o&&typeof o!="string"?o:s.create(t,s.Fragment,{children:o||void 0},void 0)}function dR(t,e,n){if(e.type==="element")return qH(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return YH(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return $H(t,e,n);if(e.type==="mdxjsEsm")return GH(t,e);if(e.type==="root")return KH(t,e,n);if(e.type==="text")return XH(t,e)}function qH(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Xl,t.schema=s),t.ancestors.push(e);const o=pR(t,e.tagName,!1),u=ZH(t,e);let c=p1(t,e);return FH.has(e.tagName)&&(c=c.filter(function(f){return typeof f=="string"?!SH(f):!0})),mR(t,u,o,e),m1(u,c),t.ancestors.pop(),t.schema=r,t.create(e,o,u,n)}function YH(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Jh(t,e.position)}function GH(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Jh(t,e.position)}function $H(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=Xl,t.schema=s),t.ancestors.push(e);const o=e.name===null?t.Fragment:pR(t,e.name,!0),u=JH(t,e),c=p1(t,e);return mR(t,u,o,e),m1(u,c),t.ancestors.pop(),t.schema=r,t.create(e,o,u,n)}function KH(t,e,n){const r={};return m1(r,p1(t,e)),t.create(e,t.Fragment,r,n)}function XH(t,e){return e.value}function mR(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function m1(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function QH(t,e,n){return r;function r(s,o,u,c){const d=Array.isArray(u.children)?n:e;return c?d(o,u,c):d(o,u)}}function WH(t,e){return n;function n(r,s,o,u){const c=Array.isArray(o.children),f=Bs(r);return e(s,o,u,c,{columnNumber:f?f.column-1:void 0,fileName:t,lineNumber:f?f.line:void 0},void 0)}}function ZH(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&d1.call(e.properties,s)){const o=eF(t,s,e.properties[s]);if(o){const[u,c]=o;t.tableCellAlignToStyle&&u==="align"&&typeof c=="string"&&zH.has(e.tagName)?r=c:n[u]=c}}if(r){const o=n.style||(n.style={});o[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function JH(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const o=r.data.estree.body[0];o.type;const u=o.expression;u.type;const c=u.properties[0];c.type,Object.assign(n,t.evaluater.evaluateExpression(c.argument))}else Jh(t,e.position);else{const s=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const c=r.value.data.estree.body[0];c.type,o=t.evaluater.evaluateExpression(c.expression)}else Jh(t,e.position);else o=r.value===null?!0:r.value;n[s]=o}return n}function p1(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:VH;for(;++r<e.children.length;){const o=e.children[r];let u;if(t.passKeys){const f=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(f){const d=s.get(f)||0;u=f+"-"+d,s.set(f,d+1)}}const c=dR(t,o,u);c!==void 0&&n.push(c)}return n}function eF(t,e,n){const r=f1(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?nR(n):cR(n)),r.property==="style"){let s=typeof n=="object"?n:tF(t,String(n));return t.stylePropertyNameCase==="css"&&(s=nF(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?IH[r.property]||r.property:r.attribute,n]}}function tF(t,e){try{return BH(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new Cr("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=fR+"#cannot-parse-style-attribute",s}}function pR(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let o=-1,u;for(;++o<s.length;){const c=j2(s[o])?{type:"Identifier",name:s[o]}:{type:"Literal",value:s[o]};u=u?{type:"MemberExpression",object:u,property:c,computed:!!(o&&c.type==="Literal"),optional:!1}:c}r=u}else r=j2(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return d1.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);Jh(t)}function Jh(t,e){const n=new Cr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=fR+"#cannot-handle-mdx-estrees-without-createevaluater",n}function nF(t){const e={};let n;for(n in t)d1.call(t,n)&&(e[rF(n)]=t[n]);return e}function rF(t){let e=t.replace(HH,iF);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function iF(t){return"-"+t.toLowerCase()}const Ay={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},sF={};function aF(t,e){const n=sF,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return gR(t,r,s)}function gR(t,e,n){if(oF(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return ew(t.children,e,n)}return Array.isArray(t)?ew(t,e,n):""}function ew(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=gR(t[s],e,n);return r.join("")}function oF(t){return!!(t&&typeof t=="object")}const tw=document.createElement("i");function g1(t){const e="&"+t+";";tw.innerHTML=e;const n=tw.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Ls(t,e,n,r){const s=t.length;let o=0,u;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)u=Array.from(r),u.unshift(e,n),t.splice(...u);else for(n&&t.splice(e,n);o<r.length;)u=r.slice(o,o+1e4),u.unshift(e,0),t.splice(...u),o+=1e4,e+=1e4}function Hi(t,e){return t.length>0?(Ls(t,t.length,0,e),t):e}const nw={}.hasOwnProperty;function uF(t){const e={};let n=-1;for(;++n<t.length;)lF(e,t[n]);return e}function lF(t,e){let n;for(n in e){const s=(nw.call(t,n)?t[n]:void 0)||(t[n]={}),o=e[n];let u;if(o)for(u in o){nw.call(s,u)||(s[u]=[]);const c=o[u];cF(s[u],Array.isArray(c)?c:c?[c]:[])}}}function cF(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Ls(t,0,0,r)}function yR(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Al(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const xs=vo(/[A-Za-z]/),Ei=vo(/[\dA-Za-z]/),hF=vo(/[#-'*+\--9=?A-Z^-~]/);function OE(t){return t!==null&&(t<32||t===127)}const kE=vo(/\d/),fF=vo(/[\dA-Fa-f]/),dF=vo(/[!-/:-@[-`{-~]/);function tt(t){return t!==null&&t<-2}function ti(t){return t!==null&&(t<0||t===32)}function kt(t){return t===-2||t===-1||t===32}const mF=vo(new RegExp("\\p{P}|\\p{S}","u")),pF=vo(/\s/);function vo(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Ql(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const o=t.charCodeAt(n);let u="";if(o===37&&Ei(t.charCodeAt(n+1))&&Ei(t.charCodeAt(n+2)))s=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(u=String.fromCharCode(o));else if(o>55295&&o<57344){const c=t.charCodeAt(n+1);o<56320&&c>56319&&c<57344?(u=String.fromCharCode(o,c),s=1):u=""}else u=String.fromCharCode(o);u&&(e.push(t.slice(r,n),encodeURIComponent(u)),r=n+s+1,u=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function sn(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let o=0;return u;function u(f){return kt(f)?(t.enter(n),c(f)):e(f)}function c(f){return kt(f)&&o++<s?(t.consume(f),c):(t.exit(n),e(f))}}const gF={tokenize:yF};function yF(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),sn(t,e,"linePrefix")}function s(c){return t.enter("paragraph"),o(c)}function o(c){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,u(c)}function u(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return tt(c)?(t.consume(c),t.exit("chunkText"),o):(t.consume(c),u)}}const EF={tokenize:_F},rw={tokenize:TF};function _F(t){const e=this,n=[];let r=0,s,o,u;return c;function c(q){if(r<n.length){const j=n[r];return e.containerState=j[1],t.attempt(j[0].continuation,f,d)(q)}return d(q)}function f(q){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&F();const j=e.events.length;let ee=j,$;for(;ee--;)if(e.events[ee][0]==="exit"&&e.events[ee][1].type==="chunkFlow"){$=e.events[ee][1].end;break}D(r);let R=j;for(;R<e.events.length;)e.events[R][1].end={...$},R++;return Ls(e.events,ee+1,0,e.events.slice(j)),e.events.length=R,d(q)}return c(q)}function d(q){if(r===n.length){if(!s)return T(q);if(s.currentConstruct&&s.currentConstruct.concrete)return w(q);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(rw,p,y)(q)}function p(q){return s&&F(),D(r),T(q)}function y(q){return e.parser.lazy[e.now().line]=r!==n.length,u=e.now().offset,w(q)}function T(q){return e.containerState={},t.attempt(rw,b,w)(q)}function b(q){return r++,n.push([e.currentConstruct,e.containerState]),T(q)}function w(q){if(q===null){s&&F(),D(0),t.consume(q);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:o}),N(q)}function N(q){if(q===null){k(t.exit("chunkFlow"),!0),D(0),t.consume(q);return}return tt(q)?(t.consume(q),k(t.exit("chunkFlow")),r=0,e.interrupt=void 0,c):(t.consume(q),N)}function k(q,j){const ee=e.sliceStream(q);if(j&&ee.push(null),q.previous=o,o&&(o.next=q),o=q,s.defineSkip(q.start),s.write(ee),e.parser.lazy[q.start.line]){let $=s.events.length;for(;$--;)if(s.events[$][1].start.offset<u&&(!s.events[$][1].end||s.events[$][1].end.offset>u))return;const R=e.events.length;let C=R,O,M;for(;C--;)if(e.events[C][0]==="exit"&&e.events[C][1].type==="chunkFlow"){if(O){M=e.events[C][1].end;break}O=!0}for(D(r),$=R;$<e.events.length;)e.events[$][1].end={...M},$++;Ls(e.events,C+1,0,e.events.slice(R)),e.events.length=$}}function D(q){let j=n.length;for(;j-- >q;){const ee=n[j];e.containerState=ee[1],ee[0].exit.call(e,t)}n.length=q}function F(){s.write([null]),o=void 0,s=void 0,e.containerState._closeFlow=void 0}}function TF(t,e,n){return sn(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function iw(t){if(t===null||ti(t)||pF(t))return 1;if(mF(t))return 2}function y1(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const o=t[s].resolveAll;o&&!r.includes(o)&&(e=o(e,n),r.push(o))}return e}const LE={name:"attention",resolveAll:bF,tokenize:vF};function bF(t,e){let n=-1,r,s,o,u,c,f,d,p;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const y={...t[r][1].end},T={...t[n][1].start};sw(y,-f),sw(T,f),u={type:f>1?"strongSequence":"emphasisSequence",start:y,end:{...t[r][1].end}},c={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:T},o={type:f>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:f>1?"strong":"emphasis",start:{...u.start},end:{...c.end}},t[r][1].end={...u.start},t[n][1].start={...c.end},d=[],t[r][1].end.offset-t[r][1].start.offset&&(d=Hi(d,[["enter",t[r][1],e],["exit",t[r][1],e]])),d=Hi(d,[["enter",s,e],["enter",u,e],["exit",u,e],["enter",o,e]]),d=Hi(d,y1(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),d=Hi(d,[["exit",o,e],["enter",c,e],["exit",c,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(p=2,d=Hi(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):p=0,Ls(t,r-1,n-r+3,d),n=r+d.length-p-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function vF(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=iw(r);let o;return u;function u(f){return o=f,t.enter("attentionSequence"),c(f)}function c(f){if(f===o)return t.consume(f),c;const d=t.exit("attentionSequence"),p=iw(f),y=!p||p===2&&s||n.includes(f),T=!s||s===2&&p||n.includes(r);return d._open=!!(o===42?y:y&&(s||!T)),d._close=!!(o===42?T:T&&(p||!y)),e(f)}}function sw(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const SF={name:"autolink",tokenize:AF};function AF(t,e,n){let r=0;return s;function s(b){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(b),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(b){return xs(b)?(t.consume(b),u):b===64?n(b):d(b)}function u(b){return b===43||b===45||b===46||Ei(b)?(r=1,c(b)):d(b)}function c(b){return b===58?(t.consume(b),r=0,f):(b===43||b===45||b===46||Ei(b))&&r++<32?(t.consume(b),c):(r=0,d(b))}function f(b){return b===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(b),t.exit("autolinkMarker"),t.exit("autolink"),e):b===null||b===32||b===60||OE(b)?n(b):(t.consume(b),f)}function d(b){return b===64?(t.consume(b),p):hF(b)?(t.consume(b),d):n(b)}function p(b){return Ei(b)?y(b):n(b)}function y(b){return b===46?(t.consume(b),r=0,p):b===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(b),t.exit("autolinkMarker"),t.exit("autolink"),e):T(b)}function T(b){if((b===45||Ei(b))&&r++<63){const w=b===45?T:y;return t.consume(b),w}return n(b)}}const V0={partial:!0,tokenize:wF};function wF(t,e,n){return r;function r(o){return kt(o)?sn(t,s,"linePrefix")(o):s(o)}function s(o){return o===null||tt(o)?e(o):n(o)}}const ER={continuation:{tokenize:IF},exit:CF,name:"blockQuote",tokenize:xF};function xF(t,e,n){const r=this;return s;function s(u){if(u===62){const c=r.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(u),t.exit("blockQuoteMarker"),o}return n(u)}function o(u){return kt(u)?(t.enter("blockQuotePrefixWhitespace"),t.consume(u),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(u))}}function IF(t,e,n){const r=this;return s;function s(u){return kt(u)?sn(t,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u):o(u)}function o(u){return t.attempt(ER,e,n)(u)}}function CF(t){t.exit("blockQuote")}const _R={name:"characterEscape",tokenize:NF};function NF(t,e,n){return r;function r(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),s}function s(o){return dF(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(o)}}const TR={name:"characterReference",tokenize:RF};function RF(t,e,n){const r=this;let s=0,o,u;return c;function c(y){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),f}function f(y){return y===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(y),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),o=31,u=Ei,p(y))}function d(y){return y===88||y===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(y),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,u=fF,p):(t.enter("characterReferenceValue"),o=7,u=kE,p(y))}function p(y){if(y===59&&s){const T=t.exit("characterReferenceValue");return u===Ei&&!g1(r.sliceSerialize(T))?n(y):(t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return u(y)&&s++<o?(t.consume(y),p):n(y)}}const aw={partial:!0,tokenize:OF},ow={concrete:!0,name:"codeFenced",tokenize:DF};function DF(t,e,n){const r=this,s={partial:!0,tokenize:ee};let o=0,u=0,c;return f;function f($){return d($)}function d($){const R=r.events[r.events.length-1];return o=R&&R[1].type==="linePrefix"?R[2].sliceSerialize(R[1],!0).length:0,c=$,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),p($)}function p($){return $===c?(u++,t.consume($),p):u<3?n($):(t.exit("codeFencedFenceSequence"),kt($)?sn(t,y,"whitespace")($):y($))}function y($){return $===null||tt($)?(t.exit("codeFencedFence"),r.interrupt?e($):t.check(aw,N,j)($)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),T($))}function T($){return $===null||tt($)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),y($)):kt($)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),sn(t,b,"whitespace")($)):$===96&&$===c?n($):(t.consume($),T)}function b($){return $===null||tt($)?y($):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),w($))}function w($){return $===null||tt($)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),y($)):$===96&&$===c?n($):(t.consume($),w)}function N($){return t.attempt(s,j,k)($)}function k($){return t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),D}function D($){return o>0&&kt($)?sn(t,F,"linePrefix",o+1)($):F($)}function F($){return $===null||tt($)?t.check(aw,N,j)($):(t.enter("codeFlowValue"),q($))}function q($){return $===null||tt($)?(t.exit("codeFlowValue"),F($)):(t.consume($),q)}function j($){return t.exit("codeFenced"),e($)}function ee($,R,C){let O=0;return M;function M(K){return $.enter("lineEnding"),$.consume(K),$.exit("lineEnding"),B}function B(K){return $.enter("codeFencedFence"),kt(K)?sn($,U,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):U(K)}function U(K){return K===c?($.enter("codeFencedFenceSequence"),I(K)):C(K)}function I(K){return K===c?(O++,$.consume(K),I):O>=u?($.exit("codeFencedFenceSequence"),kt(K)?sn($,L,"whitespace")(K):L(K)):C(K)}function L(K){return K===null||tt(K)?($.exit("codeFencedFence"),R(K)):C(K)}}}function OF(t,e,n){const r=this;return s;function s(u){return u===null?n(u):(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),o)}function o(u){return r.parser.lazy[r.now().line]?n(u):e(u)}}const wy={name:"codeIndented",tokenize:LF},kF={partial:!0,tokenize:MF};function LF(t,e,n){const r=this;return s;function s(d){return t.enter("codeIndented"),sn(t,o,"linePrefix",5)(d)}function o(d){const p=r.events[r.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?u(d):n(d)}function u(d){return d===null?f(d):tt(d)?t.attempt(kF,u,f)(d):(t.enter("codeFlowValue"),c(d))}function c(d){return d===null||tt(d)?(t.exit("codeFlowValue"),u(d)):(t.consume(d),c)}function f(d){return t.exit("codeIndented"),e(d)}}function MF(t,e,n){const r=this;return s;function s(u){return r.parser.lazy[r.now().line]?n(u):tt(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),s):sn(t,o,"linePrefix",5)(u)}function o(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(u):tt(u)?s(u):n(u)}}const PF={name:"codeText",previous:UF,resolve:BF,tokenize:VF};function BF(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function UF(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function VF(t,e,n){let r=0,s,o;return u;function u(y){return t.enter("codeText"),t.enter("codeTextSequence"),c(y)}function c(y){return y===96?(t.consume(y),r++,c):(t.exit("codeTextSequence"),f(y))}function f(y){return y===null?n(y):y===32?(t.enter("space"),t.consume(y),t.exit("space"),f):y===96?(o=t.enter("codeTextSequence"),s=0,p(y)):tt(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),f):(t.enter("codeTextData"),d(y))}function d(y){return y===null||y===32||y===96||tt(y)?(t.exit("codeTextData"),f(y)):(t.consume(y),d)}function p(y){return y===96?(t.consume(y),s++,p):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(y)):(o.type="codeTextData",d(y))}}class HF{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&sh(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),sh(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),sh(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);sh(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);sh(this.left,n.reverse())}}}function sh(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function bR(t){const e={};let n=-1,r,s,o,u,c,f,d;const p=new HF(t);for(;++n<p.length;){for(;n in e;)n=e[n];if(r=p.get(n),n&&r[1].type==="chunkFlow"&&p.get(n-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,o=0,o<f.length&&f[o][1].type==="lineEndingBlank"&&(o+=2),o<f.length&&f[o][1].type==="content"))for(;++o<f.length&&f[o][1].type!=="content";)f[o][1].type==="chunkText"&&(f[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,FF(p,n)),n=e[n],d=!0);else if(r[1]._container){for(o=n,s=void 0;o--;)if(u=p.get(o),u[1].type==="lineEnding"||u[1].type==="lineEndingBlank")u[0]==="enter"&&(s&&(p.get(s)[1].type="lineEndingBlank"),u[1].type="lineEnding",s=o);else if(!(u[1].type==="linePrefix"||u[1].type==="listItemIndent"))break;s&&(r[1].end={...p.get(s)[1].start},c=p.slice(s,n),c.unshift(r),p.splice(s,n-s+1,c))}}return Ls(t,0,Number.POSITIVE_INFINITY,p.slice(0)),!d}function FF(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const o=[];let u=n._tokenizer;u||(u=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(u._contentTypeTextTrailing=!0));const c=u.events,f=[],d={};let p,y,T=-1,b=n,w=0,N=0;const k=[N];for(;b;){for(;t.get(++s)[1]!==b;);o.push(s),b._tokenizer||(p=r.sliceStream(b),b.next||p.push(null),y&&u.defineSkip(b.start),b._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=!0),u.write(p),b._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=void 0)),y=b,b=b.next}for(b=n;++T<c.length;)c[T][0]==="exit"&&c[T-1][0]==="enter"&&c[T][1].type===c[T-1][1].type&&c[T][1].start.line!==c[T][1].end.line&&(N=T+1,k.push(N),b._tokenizer=void 0,b.previous=void 0,b=b.next);for(u.events=[],b?(b._tokenizer=void 0,b.previous=void 0):k.pop(),T=k.length;T--;){const D=c.slice(k[T],k[T+1]),F=o.pop();f.push([F,F+D.length-1]),t.splice(F,2,D)}for(f.reverse(),T=-1;++T<f.length;)d[w+f[T][0]]=w+f[T][1],w+=f[T][1]-f[T][0]-1;return d}const zF={resolve:qF,tokenize:YF},jF={partial:!0,tokenize:GF};function qF(t){return bR(t),t}function YF(t,e){let n;return r;function r(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(c)}function s(c){return c===null?o(c):tt(c)?t.check(jF,u,o)(c):(t.consume(c),s)}function o(c){return t.exit("chunkContent"),t.exit("content"),e(c)}function u(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function GF(t,e,n){const r=this;return s;function s(u){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),sn(t,o,"linePrefix")}function o(u){if(u===null||tt(u))return n(u);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(u):t.interrupt(r.parser.constructs.flow,n,e)(u)}}function vR(t,e,n,r,s,o,u,c,f){const d=f||Number.POSITIVE_INFINITY;let p=0;return y;function y(D){return D===60?(t.enter(r),t.enter(s),t.enter(o),t.consume(D),t.exit(o),T):D===null||D===32||D===41||OE(D)?n(D):(t.enter(r),t.enter(u),t.enter(c),t.enter("chunkString",{contentType:"string"}),N(D))}function T(D){return D===62?(t.enter(o),t.consume(D),t.exit(o),t.exit(s),t.exit(r),e):(t.enter(c),t.enter("chunkString",{contentType:"string"}),b(D))}function b(D){return D===62?(t.exit("chunkString"),t.exit(c),T(D)):D===null||D===60||tt(D)?n(D):(t.consume(D),D===92?w:b)}function w(D){return D===60||D===62||D===92?(t.consume(D),b):b(D)}function N(D){return!p&&(D===null||D===41||ti(D))?(t.exit("chunkString"),t.exit(c),t.exit(u),t.exit(r),e(D)):p<d&&D===40?(t.consume(D),p++,N):D===41?(t.consume(D),p--,N):D===null||D===32||D===40||OE(D)?n(D):(t.consume(D),D===92?k:N)}function k(D){return D===40||D===41||D===92?(t.consume(D),N):N(D)}}function SR(t,e,n,r,s,o){const u=this;let c=0,f;return d;function d(b){return t.enter(r),t.enter(s),t.consume(b),t.exit(s),t.enter(o),p}function p(b){return c>999||b===null||b===91||b===93&&!f||b===94&&!c&&"_hiddenFootnoteSupport"in u.parser.constructs?n(b):b===93?(t.exit(o),t.enter(s),t.consume(b),t.exit(s),t.exit(r),e):tt(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),p):(t.enter("chunkString",{contentType:"string"}),y(b))}function y(b){return b===null||b===91||b===93||tt(b)||c++>999?(t.exit("chunkString"),p(b)):(t.consume(b),f||(f=!kt(b)),b===92?T:y)}function T(b){return b===91||b===92||b===93?(t.consume(b),c++,y):y(b)}}function AR(t,e,n,r,s,o){let u;return c;function c(T){return T===34||T===39||T===40?(t.enter(r),t.enter(s),t.consume(T),t.exit(s),u=T===40?41:T,f):n(T)}function f(T){return T===u?(t.enter(s),t.consume(T),t.exit(s),t.exit(r),e):(t.enter(o),d(T))}function d(T){return T===u?(t.exit(o),f(u)):T===null?n(T):tt(T)?(t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),sn(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),p(T))}function p(T){return T===u||T===null||tt(T)?(t.exit("chunkString"),d(T)):(t.consume(T),T===92?y:p)}function y(T){return T===u||T===92?(t.consume(T),p):p(T)}}function xh(t,e){let n;return r;function r(s){return tt(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):kt(s)?sn(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const $F={name:"definition",tokenize:XF},KF={partial:!0,tokenize:QF};function XF(t,e,n){const r=this;let s;return o;function o(b){return t.enter("definition"),u(b)}function u(b){return SR.call(r,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(b)}function c(b){return s=Al(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),b===58?(t.enter("definitionMarker"),t.consume(b),t.exit("definitionMarker"),f):n(b)}function f(b){return ti(b)?xh(t,d)(b):d(b)}function d(b){return vR(t,p,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(b)}function p(b){return t.attempt(KF,y,y)(b)}function y(b){return kt(b)?sn(t,T,"whitespace")(b):T(b)}function T(b){return b===null||tt(b)?(t.exit("definition"),r.parser.defined.push(s),e(b)):n(b)}}function QF(t,e,n){return r;function r(c){return ti(c)?xh(t,s)(c):n(c)}function s(c){return AR(t,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function o(c){return kt(c)?sn(t,u,"whitespace")(c):u(c)}function u(c){return c===null||tt(c)?e(c):n(c)}}const WF={name:"hardBreakEscape",tokenize:ZF};function ZF(t,e,n){return r;function r(o){return t.enter("hardBreakEscape"),t.consume(o),s}function s(o){return tt(o)?(t.exit("hardBreakEscape"),e(o)):n(o)}}const JF={name:"headingAtx",resolve:ez,tokenize:tz};function ez(t,e){let n=t.length-2,r=3,s,o;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},o={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Ls(t,r,n-r+1,[["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e]])),t}function tz(t,e,n){let r=0;return s;function s(p){return t.enter("atxHeading"),o(p)}function o(p){return t.enter("atxHeadingSequence"),u(p)}function u(p){return p===35&&r++<6?(t.consume(p),u):p===null||ti(p)?(t.exit("atxHeadingSequence"),c(p)):n(p)}function c(p){return p===35?(t.enter("atxHeadingSequence"),f(p)):p===null||tt(p)?(t.exit("atxHeading"),e(p)):kt(p)?sn(t,c,"whitespace")(p):(t.enter("atxHeadingText"),d(p))}function f(p){return p===35?(t.consume(p),f):(t.exit("atxHeadingSequence"),c(p))}function d(p){return p===null||p===35||ti(p)?(t.exit("atxHeadingText"),c(p)):(t.consume(p),d)}}const nz=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],uw=["pre","script","style","textarea"],rz={concrete:!0,name:"htmlFlow",resolveTo:az,tokenize:oz},iz={partial:!0,tokenize:lz},sz={partial:!0,tokenize:uz};function az(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function oz(t,e,n){const r=this;let s,o,u,c,f;return d;function d(P){return p(P)}function p(P){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(P),y}function y(P){return P===33?(t.consume(P),T):P===47?(t.consume(P),o=!0,N):P===63?(t.consume(P),s=3,r.interrupt?e:S):xs(P)?(t.consume(P),u=String.fromCharCode(P),k):n(P)}function T(P){return P===45?(t.consume(P),s=2,b):P===91?(t.consume(P),s=5,c=0,w):xs(P)?(t.consume(P),s=4,r.interrupt?e:S):n(P)}function b(P){return P===45?(t.consume(P),r.interrupt?e:S):n(P)}function w(P){const ge="CDATA[";return P===ge.charCodeAt(c++)?(t.consume(P),c===ge.length?r.interrupt?e:U:w):n(P)}function N(P){return xs(P)?(t.consume(P),u=String.fromCharCode(P),k):n(P)}function k(P){if(P===null||P===47||P===62||ti(P)){const ge=P===47,Ne=u.toLowerCase();return!ge&&!o&&uw.includes(Ne)?(s=1,r.interrupt?e(P):U(P)):nz.includes(u.toLowerCase())?(s=6,ge?(t.consume(P),D):r.interrupt?e(P):U(P)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(P):o?F(P):q(P))}return P===45||Ei(P)?(t.consume(P),u+=String.fromCharCode(P),k):n(P)}function D(P){return P===62?(t.consume(P),r.interrupt?e:U):n(P)}function F(P){return kt(P)?(t.consume(P),F):M(P)}function q(P){return P===47?(t.consume(P),M):P===58||P===95||xs(P)?(t.consume(P),j):kt(P)?(t.consume(P),q):M(P)}function j(P){return P===45||P===46||P===58||P===95||Ei(P)?(t.consume(P),j):ee(P)}function ee(P){return P===61?(t.consume(P),$):kt(P)?(t.consume(P),ee):q(P)}function $(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(t.consume(P),f=P,R):kt(P)?(t.consume(P),$):C(P)}function R(P){return P===f?(t.consume(P),f=null,O):P===null||tt(P)?n(P):(t.consume(P),R)}function C(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||ti(P)?ee(P):(t.consume(P),C)}function O(P){return P===47||P===62||kt(P)?q(P):n(P)}function M(P){return P===62?(t.consume(P),B):n(P)}function B(P){return P===null||tt(P)?U(P):kt(P)?(t.consume(P),B):n(P)}function U(P){return P===45&&s===2?(t.consume(P),H):P===60&&s===1?(t.consume(P),Q):P===62&&s===4?(t.consume(P),J):P===63&&s===3?(t.consume(P),S):P===93&&s===5?(t.consume(P),te):tt(P)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(iz,ae,I)(P)):P===null||tt(P)?(t.exit("htmlFlowData"),I(P)):(t.consume(P),U)}function I(P){return t.check(sz,L,ae)(P)}function L(P){return t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),K}function K(P){return P===null||tt(P)?I(P):(t.enter("htmlFlowData"),U(P))}function H(P){return P===45?(t.consume(P),S):U(P)}function Q(P){return P===47?(t.consume(P),u="",se):U(P)}function se(P){if(P===62){const ge=u.toLowerCase();return uw.includes(ge)?(t.consume(P),J):U(P)}return xs(P)&&u.length<8?(t.consume(P),u+=String.fromCharCode(P),se):U(P)}function te(P){return P===93?(t.consume(P),S):U(P)}function S(P){return P===62?(t.consume(P),J):P===45&&s===2?(t.consume(P),S):U(P)}function J(P){return P===null||tt(P)?(t.exit("htmlFlowData"),ae(P)):(t.consume(P),J)}function ae(P){return t.exit("htmlFlow"),e(P)}}function uz(t,e,n){const r=this;return s;function s(u){return tt(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),o):n(u)}function o(u){return r.parser.lazy[r.now().line]?n(u):e(u)}}function lz(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(V0,e,n)}}const cz={name:"htmlText",tokenize:hz};function hz(t,e,n){const r=this;let s,o,u;return c;function c(S){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(S),f}function f(S){return S===33?(t.consume(S),d):S===47?(t.consume(S),ee):S===63?(t.consume(S),q):xs(S)?(t.consume(S),C):n(S)}function d(S){return S===45?(t.consume(S),p):S===91?(t.consume(S),o=0,w):xs(S)?(t.consume(S),F):n(S)}function p(S){return S===45?(t.consume(S),b):n(S)}function y(S){return S===null?n(S):S===45?(t.consume(S),T):tt(S)?(u=y,Q(S)):(t.consume(S),y)}function T(S){return S===45?(t.consume(S),b):y(S)}function b(S){return S===62?H(S):S===45?T(S):y(S)}function w(S){const J="CDATA[";return S===J.charCodeAt(o++)?(t.consume(S),o===J.length?N:w):n(S)}function N(S){return S===null?n(S):S===93?(t.consume(S),k):tt(S)?(u=N,Q(S)):(t.consume(S),N)}function k(S){return S===93?(t.consume(S),D):N(S)}function D(S){return S===62?H(S):S===93?(t.consume(S),D):N(S)}function F(S){return S===null||S===62?H(S):tt(S)?(u=F,Q(S)):(t.consume(S),F)}function q(S){return S===null?n(S):S===63?(t.consume(S),j):tt(S)?(u=q,Q(S)):(t.consume(S),q)}function j(S){return S===62?H(S):q(S)}function ee(S){return xs(S)?(t.consume(S),$):n(S)}function $(S){return S===45||Ei(S)?(t.consume(S),$):R(S)}function R(S){return tt(S)?(u=R,Q(S)):kt(S)?(t.consume(S),R):H(S)}function C(S){return S===45||Ei(S)?(t.consume(S),C):S===47||S===62||ti(S)?O(S):n(S)}function O(S){return S===47?(t.consume(S),H):S===58||S===95||xs(S)?(t.consume(S),M):tt(S)?(u=O,Q(S)):kt(S)?(t.consume(S),O):H(S)}function M(S){return S===45||S===46||S===58||S===95||Ei(S)?(t.consume(S),M):B(S)}function B(S){return S===61?(t.consume(S),U):tt(S)?(u=B,Q(S)):kt(S)?(t.consume(S),B):O(S)}function U(S){return S===null||S===60||S===61||S===62||S===96?n(S):S===34||S===39?(t.consume(S),s=S,I):tt(S)?(u=U,Q(S)):kt(S)?(t.consume(S),U):(t.consume(S),L)}function I(S){return S===s?(t.consume(S),s=void 0,K):S===null?n(S):tt(S)?(u=I,Q(S)):(t.consume(S),I)}function L(S){return S===null||S===34||S===39||S===60||S===61||S===96?n(S):S===47||S===62||ti(S)?O(S):(t.consume(S),L)}function K(S){return S===47||S===62||ti(S)?O(S):n(S)}function H(S){return S===62?(t.consume(S),t.exit("htmlTextData"),t.exit("htmlText"),e):n(S)}function Q(S){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),se}function se(S){return kt(S)?sn(t,te,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):te(S)}function te(S){return t.enter("htmlTextData"),u(S)}}const E1={name:"labelEnd",resolveAll:pz,resolveTo:gz,tokenize:yz},fz={tokenize:Ez},dz={tokenize:_z},mz={tokenize:Tz};function pz(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&Ls(t,0,t.length,n),t}function gz(t,e){let n=t.length,r=0,s,o,u,c;for(;n--;)if(s=t[n][1],o){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(u){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(o=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(u=n);const f={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[o][1].start},end:{...t[u][1].end}},p={type:"labelText",start:{...t[o+r+2][1].end},end:{...t[u-2][1].start}};return c=[["enter",f,e],["enter",d,e]],c=Hi(c,t.slice(o+1,o+r+3)),c=Hi(c,[["enter",p,e]]),c=Hi(c,y1(e.parser.constructs.insideSpan.null,t.slice(o+r+4,u-3),e)),c=Hi(c,[["exit",p,e],t[u-2],t[u-1],["exit",d,e]]),c=Hi(c,t.slice(u+1)),c=Hi(c,[["exit",f,e]]),Ls(t,o,t.length,c),t}function yz(t,e,n){const r=this;let s=r.events.length,o,u;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){o=r.events[s][1];break}return c;function c(T){return o?o._inactive?y(T):(u=r.parser.defined.includes(Al(r.sliceSerialize({start:o.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(T),t.exit("labelMarker"),t.exit("labelEnd"),f):n(T)}function f(T){return T===40?t.attempt(fz,p,u?p:y)(T):T===91?t.attempt(dz,p,u?d:y)(T):u?p(T):y(T)}function d(T){return t.attempt(mz,p,y)(T)}function p(T){return e(T)}function y(T){return o._balanced=!0,n(T)}}function Ez(t,e,n){return r;function r(y){return t.enter("resource"),t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),s}function s(y){return ti(y)?xh(t,o)(y):o(y)}function o(y){return y===41?p(y):vR(t,u,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(y)}function u(y){return ti(y)?xh(t,f)(y):p(y)}function c(y){return n(y)}function f(y){return y===34||y===39||y===40?AR(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(y):p(y)}function d(y){return ti(y)?xh(t,p)(y):p(y)}function p(y){return y===41?(t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),t.exit("resource"),e):n(y)}}function _z(t,e,n){const r=this;return s;function s(c){return SR.call(r,t,o,u,"reference","referenceMarker","referenceString")(c)}function o(c){return r.parser.defined.includes(Al(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function u(c){return n(c)}}function Tz(t,e,n){return r;function r(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),s}function s(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),e):n(o)}}const bz={name:"labelStartImage",resolveAll:E1.resolveAll,tokenize:vz};function vz(t,e,n){const r=this;return s;function s(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),o}function o(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),u):n(c)}function u(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):e(c)}}const Sz={name:"labelStartLink",resolveAll:E1.resolveAll,tokenize:Az};function Az(t,e,n){const r=this;return s;function s(u){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelLink"),o}function o(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):e(u)}}const xy={name:"lineEnding",tokenize:wz};function wz(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),sn(t,e,"linePrefix")}}const bm={name:"thematicBreak",tokenize:xz};function xz(t,e,n){let r=0,s;return o;function o(d){return t.enter("thematicBreak"),u(d)}function u(d){return s=d,c(d)}function c(d){return d===s?(t.enter("thematicBreakSequence"),f(d)):r>=3&&(d===null||tt(d))?(t.exit("thematicBreak"),e(d)):n(d)}function f(d){return d===s?(t.consume(d),r++,f):(t.exit("thematicBreakSequence"),kt(d)?sn(t,c,"whitespace")(d):c(d))}}const Xr={continuation:{tokenize:Rz},exit:Oz,name:"list",tokenize:Nz},Iz={partial:!0,tokenize:kz},Cz={partial:!0,tokenize:Dz};function Nz(t,e,n){const r=this,s=r.events[r.events.length-1];let o=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,u=0;return c;function c(b){const w=r.containerState.type||(b===42||b===43||b===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!r.containerState.marker||b===r.containerState.marker:kE(b)){if(r.containerState.type||(r.containerState.type=w,t.enter(w,{_container:!0})),w==="listUnordered")return t.enter("listItemPrefix"),b===42||b===45?t.check(bm,n,d)(b):d(b);if(!r.interrupt||b===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(b)}return n(b)}function f(b){return kE(b)&&++u<10?(t.consume(b),f):(!r.interrupt||u<2)&&(r.containerState.marker?b===r.containerState.marker:b===41||b===46)?(t.exit("listItemValue"),d(b)):n(b)}function d(b){return t.enter("listItemMarker"),t.consume(b),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||b,t.check(V0,r.interrupt?n:p,t.attempt(Iz,T,y))}function p(b){return r.containerState.initialBlankLine=!0,o++,T(b)}function y(b){return kt(b)?(t.enter("listItemPrefixWhitespace"),t.consume(b),t.exit("listItemPrefixWhitespace"),T):n(b)}function T(b){return r.containerState.size=o+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(b)}}function Rz(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(V0,s,o);function s(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,sn(t,e,"listItemIndent",r.containerState.size+1)(c)}function o(c){return r.containerState.furtherBlankLines||!kt(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,u(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(Cz,e,u)(c))}function u(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,sn(t,t.attempt(Xr,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function Dz(t,e,n){const r=this;return sn(t,s,"listItemIndent",r.containerState.size+1);function s(o){const u=r.events[r.events.length-1];return u&&u[1].type==="listItemIndent"&&u[2].sliceSerialize(u[1],!0).length===r.containerState.size?e(o):n(o)}}function Oz(t){t.exit(this.containerState.type)}function kz(t,e,n){const r=this;return sn(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(o){const u=r.events[r.events.length-1];return!kt(o)&&u&&u[1].type==="listItemPrefixWhitespace"?e(o):n(o)}}const lw={name:"setextUnderline",resolveTo:Lz,tokenize:Mz};function Lz(t,e){let n=t.length,r,s,o;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!o&&t[n][1].type==="definition"&&(o=n);const u={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",o?(t.splice(s,0,["enter",u,e]),t.splice(o+1,0,["exit",t[r][1],e]),t[r][1].end={...t[o][1].end}):t[r][1]=u,t.push(["exit",u,e]),t}function Mz(t,e,n){const r=this;let s;return o;function o(d){let p=r.events.length,y;for(;p--;)if(r.events[p][1].type!=="lineEnding"&&r.events[p][1].type!=="linePrefix"&&r.events[p][1].type!=="content"){y=r.events[p][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||y)?(t.enter("setextHeadingLine"),s=d,u(d)):n(d)}function u(d){return t.enter("setextHeadingLineSequence"),c(d)}function c(d){return d===s?(t.consume(d),c):(t.exit("setextHeadingLineSequence"),kt(d)?sn(t,f,"lineSuffix")(d):f(d))}function f(d){return d===null||tt(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const Pz={tokenize:Bz};function Bz(t){const e=this,n=t.attempt(V0,r,t.attempt(this.parser.constructs.flowInitial,s,sn(t,t.attempt(this.parser.constructs.flow,s,t.attempt(zF,s)),"linePrefix")));return n;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Uz={resolveAll:xR()},Vz=wR("string"),Hz=wR("text");function wR(t){return{resolveAll:xR(t==="text"?Fz:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],o=n.attempt(s,u,c);return u;function u(p){return d(p)?o(p):c(p)}function c(p){if(p===null){n.consume(p);return}return n.enter("data"),n.consume(p),f}function f(p){return d(p)?(n.exit("data"),o(p)):(n.consume(p),f)}function d(p){if(p===null)return!0;const y=s[p];let T=-1;if(y)for(;++T<y.length;){const b=y[T];if(!b.previous||b.previous.call(r,r.previous))return!0}return!1}}}function xR(t){return e;function e(n,r){let s=-1,o;for(;++s<=n.length;)o===void 0?n[s]&&n[s][1].type==="data"&&(o=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==o+2&&(n[o][1].end=n[s-1][1].end,n.splice(o+2,s-o-2),s=o+2),o=void 0);return t?t(n,r):n}}function Fz(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let o=s.length,u=-1,c=0,f;for(;o--;){const d=s[o];if(typeof d=="string"){for(u=d.length;d.charCodeAt(u-1)===32;)c++,u--;if(u)break;u=-1}else if(d===-2)f=!0,c++;else if(d!==-1){o++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(c=0),c){const d={type:n===t.length||f||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?u:r.start._bufferIndex+u,_index:r.start._index+o,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const zz={42:Xr,43:Xr,45:Xr,48:Xr,49:Xr,50:Xr,51:Xr,52:Xr,53:Xr,54:Xr,55:Xr,56:Xr,57:Xr,62:ER},jz={91:$F},qz={[-2]:wy,[-1]:wy,32:wy},Yz={35:JF,42:bm,45:[lw,bm],60:rz,61:lw,95:bm,96:ow,126:ow},Gz={38:TR,92:_R},$z={[-5]:xy,[-4]:xy,[-3]:xy,33:bz,38:TR,42:LE,60:[SF,cz],91:Sz,92:[WF,_R],93:E1,95:LE,96:PF},Kz={null:[LE,Uz]},Xz={null:[42,95]},Qz={null:[]},Wz=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Xz,contentInitial:jz,disable:Qz,document:zz,flow:Yz,flowInitial:qz,insideSpan:Kz,string:Gz,text:$z},Symbol.toStringTag,{value:"Module"}));function Zz(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},o=[];let u=[],c=[];const f={attempt:R(ee),check:R($),consume:F,enter:q,exit:j,interrupt:R($,{interrupt:!0})},d={code:null,containerState:{},defineSkip:N,events:[],now:w,parser:t,previous:null,sliceSerialize:T,sliceStream:b,write:y};let p=e.tokenize.call(d,f);return e.resolveAll&&o.push(e),d;function y(B){return u=Hi(u,B),k(),u[u.length-1]!==null?[]:(C(e,0),d.events=y1(o,d.events,d),d.events)}function T(B,U){return ej(b(B),U)}function b(B){return Jz(u,B)}function w(){const{_bufferIndex:B,_index:U,line:I,column:L,offset:K}=r;return{_bufferIndex:B,_index:U,line:I,column:L,offset:K}}function N(B){s[B.line]=B.column,M()}function k(){let B;for(;r._index<u.length;){const U=u[r._index];if(typeof U=="string")for(B=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===B&&r._bufferIndex<U.length;)D(U.charCodeAt(r._bufferIndex));else D(U)}}function D(B){p=p(B)}function F(B){tt(B)?(r.line++,r.column=1,r.offset+=B===-3?2:1,M()):B!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===u[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=B}function q(B,U){const I=U||{};return I.type=B,I.start=w(),d.events.push(["enter",I,d]),c.push(I),I}function j(B){const U=c.pop();return U.end=w(),d.events.push(["exit",U,d]),U}function ee(B,U){C(B,U.from)}function $(B,U){U.restore()}function R(B,U){return I;function I(L,K,H){let Q,se,te,S;return Array.isArray(L)?ae(L):"tokenize"in L?ae([L]):J(L);function J(Ie){return je;function je(xe){const Me=xe!==null&&Ie[xe],He=xe!==null&&Ie.null,Je=[...Array.isArray(Me)?Me:Me?[Me]:[],...Array.isArray(He)?He:He?[He]:[]];return ae(Je)(xe)}}function ae(Ie){return Q=Ie,se=0,Ie.length===0?H:P(Ie[se])}function P(Ie){return je;function je(xe){return S=O(),te=Ie,Ie.partial||(d.currentConstruct=Ie),Ie.name&&d.parser.constructs.disable.null.includes(Ie.name)?Ne():Ie.tokenize.call(U?Object.assign(Object.create(d),U):d,f,ge,Ne)(xe)}}function ge(Ie){return B(te,S),K}function Ne(Ie){return S.restore(),++se<Q.length?P(Q[se]):H}}}function C(B,U){B.resolveAll&&!o.includes(B)&&o.push(B),B.resolve&&Ls(d.events,U,d.events.length-U,B.resolve(d.events.slice(U),d)),B.resolveTo&&(d.events=B.resolveTo(d.events,d))}function O(){const B=w(),U=d.previous,I=d.currentConstruct,L=d.events.length,K=Array.from(c);return{from:L,restore:H};function H(){r=B,d.previous=U,d.currentConstruct=I,d.events.length=L,c=K,M()}}function M(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function Jz(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,o=e.end._bufferIndex;let u;if(n===s)u=[t[n].slice(r,o)];else{if(u=t.slice(n,s),r>-1){const c=u[0];typeof c=="string"?u[0]=c.slice(r):u.shift()}o>0&&u.push(t[s].slice(0,o))}return u}function ej(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const o=t[n];let u;if(typeof o=="string")u=o;else switch(o){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=e?" ":"	";break}case-1:{if(!e&&s)continue;u=" ";break}default:u=String.fromCharCode(o)}s=o===-2,r.push(u)}return r.join("")}function tj(t){const r={constructs:uF([Wz,...(t||{}).extensions||[]]),content:s(gF),defined:[],document:s(EF),flow:s(Pz),lazy:{},string:s(Vz),text:s(Hz)};return r;function s(o){return u;function u(c){return Zz(r,o,c)}}}function nj(t){for(;!bR(t););return t}const cw=/[\0\t\n\r]/g;function rj(){let t=1,e="",n=!0,r;return s;function s(o,u,c){const f=[];let d,p,y,T,b;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(u||void 0).decode(o)),y=0,e="",n&&(o.charCodeAt(0)===65279&&y++,n=void 0);y<o.length;){if(cw.lastIndex=y,d=cw.exec(o),T=d&&d.index!==void 0?d.index:o.length,b=o.charCodeAt(T),!d){e=o.slice(y);break}if(b===10&&y===T&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),y<T&&(f.push(o.slice(y,T)),t+=T-y),b){case 0:{f.push(65533),t++;break}case 9:{for(p=Math.ceil(t/4)*4,f.push(-2);t++<p;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:r=!0,t=1}y=T+1}return c&&(r&&f.push(-5),e&&f.push(e),f.push(null)),f}}const ij=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function sj(t){return t.replace(ij,aj)}function aj(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),o=s===120||s===88;return yR(n.slice(o?2:1),o?16:10)}return g1(n)||t}const IR={}.hasOwnProperty;function oj(t,e,n){return typeof e!="string"&&(n=e,e=void 0),uj(n)(nj(tj(n).document().write(rj()(t,e,!0))))}function uj(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(cn),autolinkProtocol:O,autolinkEmail:O,atxHeading:o(Dt),blockQuote:o(He),characterEscape:O,characterReference:O,codeFenced:o(Je),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:o(Je,u),codeText:o(an,u),codeTextData:O,data:O,codeFlowValue:O,definition:o(Jt),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:o(on),hardBreakEscape:o(Rn),hardBreakTrailing:o(Rn),htmlFlow:o(Qe,u),htmlFlowData:O,htmlText:o(Qe,u),htmlTextData:O,image:o(qe),label:u,link:o(cn),listItem:o(Vn),listItemValue:T,listOrdered:o(Un,y),listUnordered:o(Un),paragraph:o(Kn),reference:P,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:o(Dt),strong:o(Hn),thematicBreak:o(or)},exit:{atxHeading:f(),atxHeadingSequence:ee,autolink:f(),autolinkEmail:Me,autolinkProtocol:xe,blockQuote:f(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:Ne,characterReferenceMarkerNumeric:Ne,characterReferenceValue:Ie,characterReference:je,codeFenced:f(k),codeFencedFence:N,codeFencedFenceInfo:b,codeFencedFenceMeta:w,codeFlowValue:M,codeIndented:f(D),codeText:f(K),codeTextData:M,data:M,definition:f(),definitionDestinationString:j,definitionLabelString:F,definitionTitleString:q,emphasis:f(),hardBreakEscape:f(U),hardBreakTrailing:f(U),htmlFlow:f(I),htmlFlowData:M,htmlText:f(L),htmlTextData:M,image:f(Q),label:te,labelText:se,lineEnding:B,link:f(H),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:ge,resourceDestinationString:S,resourceTitleString:J,resource:ae,setextHeading:f(C),setextHeadingLineSequence:R,setextHeadingText:$,strong:f(),thematicBreak:f()}};CR(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(fe){let be={type:"root",children:[]};const Ve={stack:[be],tokenStack:[],config:e,enter:c,exit:d,buffer:u,resume:p,data:n},Ye=[];let ut=-1;for(;++ut<fe.length;)if(fe[ut][1].type==="listOrdered"||fe[ut][1].type==="listUnordered")if(fe[ut][0]==="enter")Ye.push(ut);else{const bt=Ye.pop();ut=s(fe,bt,ut)}for(ut=-1;++ut<fe.length;){const bt=e[fe[ut][0]];IR.call(bt,fe[ut][1].type)&&bt[fe[ut][1].type].call(Object.assign({sliceSerialize:fe[ut][2].sliceSerialize},Ve),fe[ut][1])}if(Ve.tokenStack.length>0){const bt=Ve.tokenStack[Ve.tokenStack.length-1];(bt[1]||hw).call(Ve,void 0,bt[0])}for(be.position={start:ja(fe.length>0?fe[0][1].start:{line:1,column:1,offset:0}),end:ja(fe.length>0?fe[fe.length-2][1].end:{line:1,column:1,offset:0})},ut=-1;++ut<e.transforms.length;)be=e.transforms[ut](be)||be;return be}function s(fe,be,Ve){let Ye=be-1,ut=-1,bt=!1,Ht,Ft,zt,vt;for(;++Ye<=Ve;){const lt=fe[Ye];switch(lt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{lt[0]==="enter"?ut++:ut--,vt=void 0;break}case"lineEndingBlank":{lt[0]==="enter"&&(Ht&&!vt&&!ut&&!zt&&(zt=Ye),vt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:vt=void 0}if(!ut&&lt[0]==="enter"&&lt[1].type==="listItemPrefix"||ut===-1&&lt[0]==="exit"&&(lt[1].type==="listUnordered"||lt[1].type==="listOrdered")){if(Ht){let Wt=Ye;for(Ft=void 0;Wt--;){const Gt=fe[Wt];if(Gt[1].type==="lineEnding"||Gt[1].type==="lineEndingBlank"){if(Gt[0]==="exit")continue;Ft&&(fe[Ft][1].type="lineEndingBlank",bt=!0),Gt[1].type="lineEnding",Ft=Wt}else if(!(Gt[1].type==="linePrefix"||Gt[1].type==="blockQuotePrefix"||Gt[1].type==="blockQuotePrefixWhitespace"||Gt[1].type==="blockQuoteMarker"||Gt[1].type==="listItemIndent"))break}zt&&(!Ft||zt<Ft)&&(Ht._spread=!0),Ht.end=Object.assign({},Ft?fe[Ft][1].start:lt[1].end),fe.splice(Ft||Ye,0,["exit",Ht,lt[2]]),Ye++,Ve++}if(lt[1].type==="listItemPrefix"){const Wt={type:"listItem",_spread:!1,start:Object.assign({},lt[1].start),end:void 0};Ht=Wt,fe.splice(Ye,0,["enter",Wt,lt[2]]),Ye++,Ve++,zt=void 0,vt=!0}}}return fe[be][1]._spread=bt,Ve}function o(fe,be){return Ve;function Ve(Ye){c.call(this,fe(Ye),Ye),be&&be.call(this,Ye)}}function u(){this.stack.push({type:"fragment",children:[]})}function c(fe,be,Ve){this.stack[this.stack.length-1].children.push(fe),this.stack.push(fe),this.tokenStack.push([be,Ve||void 0]),fe.position={start:ja(be.start),end:void 0}}function f(fe){return be;function be(Ve){fe&&fe.call(this,Ve),d.call(this,Ve)}}function d(fe,be){const Ve=this.stack.pop(),Ye=this.tokenStack.pop();if(Ye)Ye[0].type!==fe.type&&(be?be.call(this,fe,Ye[0]):(Ye[1]||hw).call(this,fe,Ye[0]));else throw new Error("Cannot close `"+fe.type+"` ("+wh({start:fe.start,end:fe.end})+"): its not open");Ve.position.end=ja(fe.end)}function p(){return aF(this.stack.pop())}function y(){this.data.expectingFirstListItemValue=!0}function T(fe){if(this.data.expectingFirstListItemValue){const be=this.stack[this.stack.length-2];be.start=Number.parseInt(this.sliceSerialize(fe),10),this.data.expectingFirstListItemValue=void 0}}function b(){const fe=this.resume(),be=this.stack[this.stack.length-1];be.lang=fe}function w(){const fe=this.resume(),be=this.stack[this.stack.length-1];be.meta=fe}function N(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const fe=this.resume(),be=this.stack[this.stack.length-1];be.value=fe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function D(){const fe=this.resume(),be=this.stack[this.stack.length-1];be.value=fe.replace(/(\r?\n|\r)$/g,"")}function F(fe){const be=this.resume(),Ve=this.stack[this.stack.length-1];Ve.label=be,Ve.identifier=Al(this.sliceSerialize(fe)).toLowerCase()}function q(){const fe=this.resume(),be=this.stack[this.stack.length-1];be.title=fe}function j(){const fe=this.resume(),be=this.stack[this.stack.length-1];be.url=fe}function ee(fe){const be=this.stack[this.stack.length-1];if(!be.depth){const Ve=this.sliceSerialize(fe).length;be.depth=Ve}}function $(){this.data.setextHeadingSlurpLineEnding=!0}function R(fe){const be=this.stack[this.stack.length-1];be.depth=this.sliceSerialize(fe).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function O(fe){const Ve=this.stack[this.stack.length-1].children;let Ye=Ve[Ve.length-1];(!Ye||Ye.type!=="text")&&(Ye=An(),Ye.position={start:ja(fe.start),end:void 0},Ve.push(Ye)),this.stack.push(Ye)}function M(fe){const be=this.stack.pop();be.value+=this.sliceSerialize(fe),be.position.end=ja(fe.end)}function B(fe){const be=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ve=be.children[be.children.length-1];Ve.position.end=ja(fe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(be.type)&&(O.call(this,fe),M.call(this,fe))}function U(){this.data.atHardBreak=!0}function I(){const fe=this.resume(),be=this.stack[this.stack.length-1];be.value=fe}function L(){const fe=this.resume(),be=this.stack[this.stack.length-1];be.value=fe}function K(){const fe=this.resume(),be=this.stack[this.stack.length-1];be.value=fe}function H(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const be=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=be,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function Q(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const be=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=be,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function se(fe){const be=this.sliceSerialize(fe),Ve=this.stack[this.stack.length-2];Ve.label=sj(be),Ve.identifier=Al(be).toLowerCase()}function te(){const fe=this.stack[this.stack.length-1],be=this.resume(),Ve=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ve.type==="link"){const Ye=fe.children;Ve.children=Ye}else Ve.alt=be}function S(){const fe=this.resume(),be=this.stack[this.stack.length-1];be.url=fe}function J(){const fe=this.resume(),be=this.stack[this.stack.length-1];be.title=fe}function ae(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function ge(fe){const be=this.resume(),Ve=this.stack[this.stack.length-1];Ve.label=be,Ve.identifier=Al(this.sliceSerialize(fe)).toLowerCase(),this.data.referenceType="full"}function Ne(fe){this.data.characterReferenceType=fe.type}function Ie(fe){const be=this.sliceSerialize(fe),Ve=this.data.characterReferenceType;let Ye;Ve?(Ye=yR(be,Ve==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ye=g1(be);const ut=this.stack[this.stack.length-1];ut.value+=Ye}function je(fe){const be=this.stack.pop();be.position.end=ja(fe.end)}function xe(fe){M.call(this,fe);const be=this.stack[this.stack.length-1];be.url=this.sliceSerialize(fe)}function Me(fe){M.call(this,fe);const be=this.stack[this.stack.length-1];be.url="mailto:"+this.sliceSerialize(fe)}function He(){return{type:"blockquote",children:[]}}function Je(){return{type:"code",lang:null,meta:null,value:""}}function an(){return{type:"inlineCode",value:""}}function Jt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function on(){return{type:"emphasis",children:[]}}function Dt(){return{type:"heading",depth:0,children:[]}}function Rn(){return{type:"break"}}function Qe(){return{type:"html",value:""}}function qe(){return{type:"image",title:null,url:"",alt:null}}function cn(){return{type:"link",title:null,url:"",children:[]}}function Un(fe){return{type:"list",ordered:fe.type==="listOrdered",start:null,spread:fe._spread,children:[]}}function Vn(fe){return{type:"listItem",spread:fe._spread,checked:null,children:[]}}function Kn(){return{type:"paragraph",children:[]}}function Hn(){return{type:"strong",children:[]}}function An(){return{type:"text",value:""}}function or(){return{type:"thematicBreak"}}}function ja(t){return{line:t.line,column:t.column,offset:t.offset}}function CR(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?CR(t,r):lj(t,r)}}function lj(t,e){let n;for(n in e)if(IR.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function hw(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+wh({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+wh({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+wh({start:e.start,end:e.end})+") is still open")}function cj(t){const e=this;e.parser=n;function n(r){return oj(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function hj(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function fj(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function dj(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function mj(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function pj(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function gj(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=Ql(r.toLowerCase()),o=t.footnoteOrder.indexOf(r);let u,c=t.footnoteCounts.get(r);c===void 0?(c=0,t.footnoteOrder.push(r),u=t.footnoteOrder.length):u=o+1,c+=1,t.footnoteCounts.set(r,c);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(u)}]};t.patch(e,f);const d={type:"element",tagName:"sup",properties:{},children:[f]};return t.patch(e,d),t.applyData(e,d)}function yj(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Ej(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function NR(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),o=s[0];o&&o.type==="text"?o.value="["+o.value:s.unshift({type:"text",value:"["});const u=s[s.length-1];return u&&u.type==="text"?u.value+=r:s.push({type:"text",value:r}),s}function _j(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return NR(t,e);const s={src:Ql(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,o),t.applyData(e,o)}function Tj(t,e){const n={src:Ql(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function bj(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function vj(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return NR(t,e);const s={href:Ql(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)}function Sj(t,e){const n={href:Ql(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Aj(t,e,n){const r=t.all(e),s=n?wj(n):RR(e),o={},u=[];if(typeof e.checked=="boolean"){const p=r[0];let y;p&&p.type==="element"&&p.tagName==="p"?y=p:(y={type:"element",tagName:"p",properties:{},children:[]},r.unshift(y)),y.children.length>0&&y.children.unshift({type:"text",value:" "}),y.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const p=r[c];(s||c!==0||p.type!=="element"||p.tagName!=="p")&&u.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!s?u.push(...p.children):u.push(p)}const f=r[r.length-1];f&&(s||f.type!=="element"||f.tagName!=="p")&&u.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:o,children:u};return t.patch(e,d),t.applyData(e,d)}function wj(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=RR(n[r])}return e}function RR(t){const e=t.spread;return e??t.children.length>1}function xj(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const u=r[s];if(u.type==="element"&&u.tagName==="li"&&u.properties&&Array.isArray(u.properties.className)&&u.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,o),t.applyData(e,o)}function Ij(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Cj(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Nj(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Rj(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const u={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],u),s.push(u)}if(n.length>0){const u={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=Bs(e.children[1]),f=U0(e.children[e.children.length-1]);c&&f&&(u.position={start:c,end:f}),s.push(u)}const o={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,o),t.applyData(e,o)}function Dj(t,e,n){const r=n?n.children:void 0,o=(r?r.indexOf(e):1)===0?"th":"td",u=n&&n.type==="table"?n.align:void 0,c=u?u.length:e.children.length;let f=-1;const d=[];for(;++f<c;){const y=e.children[f],T={},b=u?u[f]:void 0;b&&(T.align=b);let w={type:"element",tagName:o,properties:T,children:[]};y&&(w.children=t.all(y),t.patch(y,w),w=t.applyData(y,w)),d.push(w)}const p={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,p),t.applyData(e,p)}function Oj(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const fw=9,dw=32;function kj(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const o=[];for(;r;)o.push(mw(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return o.push(mw(e.slice(s),s>0,!1)),o.join("")}function mw(t,e,n){let r=0,s=t.length;if(e){let o=t.codePointAt(r);for(;o===fw||o===dw;)r++,o=t.codePointAt(r)}if(n){let o=t.codePointAt(s-1);for(;o===fw||o===dw;)s--,o=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function Lj(t,e){const n={type:"text",value:kj(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function Mj(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Pj={blockquote:hj,break:fj,code:dj,delete:mj,emphasis:pj,footnoteReference:gj,heading:yj,html:Ej,imageReference:_j,image:Tj,inlineCode:bj,linkReference:vj,link:Sj,listItem:Aj,list:xj,paragraph:Ij,root:Cj,strong:Nj,table:Rj,tableCell:Oj,tableRow:Dj,text:Lj,thematicBreak:Mj,toml:rm,yaml:rm,definition:rm,footnoteDefinition:rm};function rm(){}const DR=-1,H0=0,Ih=1,r0=2,_1=3,T1=4,b1=5,v1=6,OR=7,kR=8,pw=typeof self=="object"?self:globalThis,Bj=(t,e)=>{const n=(s,o)=>(t.set(o,s),s),r=s=>{if(t.has(s))return t.get(s);const[o,u]=e[s];switch(o){case H0:case DR:return n(u,s);case Ih:{const c=n([],s);for(const f of u)c.push(r(f));return c}case r0:{const c=n({},s);for(const[f,d]of u)c[r(f)]=r(d);return c}case _1:return n(new Date(u),s);case T1:{const{source:c,flags:f}=u;return n(new RegExp(c,f),s)}case b1:{const c=n(new Map,s);for(const[f,d]of u)c.set(r(f),r(d));return c}case v1:{const c=n(new Set,s);for(const f of u)c.add(r(f));return c}case OR:{const{name:c,message:f}=u;return n(new pw[c](f),s)}case kR:return n(BigInt(u),s);case"BigInt":return n(Object(BigInt(u)),s);case"ArrayBuffer":return n(new Uint8Array(u).buffer,u);case"DataView":{const{buffer:c}=new Uint8Array(u);return n(new DataView(c),u)}}return n(new pw[o](u),s)};return r},gw=t=>Bj(new Map,t)(0),al="",{toString:Uj}={},{keys:Vj}=Object,ah=t=>{const e=typeof t;if(e!=="object"||!t)return[H0,e];const n=Uj.call(t).slice(8,-1);switch(n){case"Array":return[Ih,al];case"Object":return[r0,al];case"Date":return[_1,al];case"RegExp":return[T1,al];case"Map":return[b1,al];case"Set":return[v1,al];case"DataView":return[Ih,n]}return n.includes("Array")?[Ih,n]:n.includes("Error")?[OR,n]:[r0,n]},im=([t,e])=>t===H0&&(e==="function"||e==="symbol"),Hj=(t,e,n,r)=>{const s=(u,c)=>{const f=r.push(u)-1;return n.set(c,f),f},o=u=>{if(n.has(u))return n.get(u);let[c,f]=ah(u);switch(c){case H0:{let p=u;switch(f){case"bigint":c=kR,p=u.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);p=null;break;case"undefined":return s([DR],u)}return s([c,p],u)}case Ih:{if(f){let T=u;return f==="DataView"?T=new Uint8Array(u.buffer):f==="ArrayBuffer"&&(T=new Uint8Array(u)),s([f,[...T]],u)}const p=[],y=s([c,p],u);for(const T of u)p.push(o(T));return y}case r0:{if(f)switch(f){case"BigInt":return s([f,u.toString()],u);case"Boolean":case"Number":case"String":return s([f,u.valueOf()],u)}if(e&&"toJSON"in u)return o(u.toJSON());const p=[],y=s([c,p],u);for(const T of Vj(u))(t||!im(ah(u[T])))&&p.push([o(T),o(u[T])]);return y}case _1:return s([c,u.toISOString()],u);case T1:{const{source:p,flags:y}=u;return s([c,{source:p,flags:y}],u)}case b1:{const p=[],y=s([c,p],u);for(const[T,b]of u)(t||!(im(ah(T))||im(ah(b))))&&p.push([o(T),o(b)]);return y}case v1:{const p=[],y=s([c,p],u);for(const T of u)(t||!im(ah(T)))&&p.push(o(T));return y}}const{message:d}=u;return s([c,{name:f,message:d}],u)};return o},yw=(t,{json:e,lossy:n}={})=>{const r=[];return Hj(!(e||n),!!e,new Map,r)(t),r},Ul=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?gw(yw(t,e)):structuredClone(t):(t,e)=>gw(yw(t,e));function Fj(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function zj(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function jj(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Fj,r=t.options.footnoteBackLabel||zj,s=t.options.footnoteLabel||"Footnotes",o=t.options.footnoteLabelTagName||"h2",u=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let f=-1;for(;++f<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[f]);if(!d)continue;const p=t.all(d),y=String(d.identifier).toUpperCase(),T=Ql(y.toLowerCase());let b=0;const w=[],N=t.footnoteCounts.get(y);for(;N!==void 0&&++b<=N;){w.length>0&&w.push({type:"text",value:" "});let F=typeof n=="string"?n:n(f,b);typeof F=="string"&&(F={type:"text",value:F}),w.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+T+(b>1?"-"+b:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(f,b),className:["data-footnote-backref"]},children:Array.isArray(F)?F:[F]})}const k=p[p.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const F=k.children[k.children.length-1];F&&F.type==="text"?F.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...w)}else p.push(...w);const D={type:"element",tagName:"li",properties:{id:e+"fn-"+T},children:t.wrap(p,!0)};t.patch(d,D),c.push(D)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...Ul(u),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const LR=function(t){if(t==null)return $j;if(typeof t=="function")return F0(t);if(typeof t=="object")return Array.isArray(t)?qj(t):Yj(t);if(typeof t=="string")return Gj(t);throw new Error("Expected function, string, or object as test")};function qj(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=LR(t[n]);return F0(r);function r(...s){let o=-1;for(;++o<e.length;)if(e[o].apply(this,s))return!0;return!1}}function Yj(t){const e=t;return F0(n);function n(r){const s=r;let o;for(o in t)if(s[o]!==e[o])return!1;return!0}}function Gj(t){return F0(e);function e(n){return n&&n.type===t}}function F0(t){return e;function e(n,r,s){return!!(Kj(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function $j(){return!0}function Kj(t){return t!==null&&typeof t=="object"&&"type"in t}const MR=[],Xj=!0,Ew=!1,Qj="skip";function Wj(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const o=LR(s),u=r?-1:1;c(t,void 0,[])();function c(f,d,p){const y=f&&typeof f=="object"?f:{};if(typeof y.type=="string"){const b=typeof y.tagName=="string"?y.tagName:typeof y.name=="string"?y.name:void 0;Object.defineProperty(T,"name",{value:"node ("+(f.type+(b?"<"+b+">":""))+")"})}return T;function T(){let b=MR,w,N,k;if((!e||o(f,d,p[p.length-1]||void 0))&&(b=Zj(n(f,p)),b[0]===Ew))return b;if("children"in f&&f.children){const D=f;if(D.children&&b[0]!==Qj)for(N=(r?D.children.length:-1)+u,k=p.concat(D);N>-1&&N<D.children.length;){const F=D.children[N];if(w=c(F,N,k)(),w[0]===Ew)return w;N=typeof w[1]=="number"?w[1]:N+u}}return b}}}function Zj(t){return Array.isArray(t)?t:typeof t=="number"?[Xj,t]:t==null?MR:[t]}function S1(t,e,n,r){let s,o,u;typeof e=="function"&&typeof n!="function"?(o=void 0,u=e,s=n):(o=e,u=n,s=r),Wj(t,o,c,s);function c(f,d){const p=d[d.length-1],y=p?p.children.indexOf(f):void 0;return u(f,y,p)}}const ME={}.hasOwnProperty,Jj={};function eq(t,e){const n=e||Jj,r=new Map,s=new Map,o=new Map,u={...Pj,...n.handlers},c={all:d,applyData:nq,definitionById:r,footnoteById:s,footnoteCounts:o,footnoteOrder:[],handlers:u,one:f,options:n,patch:tq,wrap:iq};return S1(t,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const y=p.type==="definition"?r:s,T=String(p.identifier).toUpperCase();y.has(T)||y.set(T,p)}}),c;function f(p,y){const T=p.type,b=c.handlers[T];if(ME.call(c.handlers,T)&&b)return b(c,p,y);if(c.options.passThrough&&c.options.passThrough.includes(T)){if("children"in p){const{children:N,...k}=p,D=Ul(k);return D.children=c.all(p),D}return Ul(p)}return(c.options.unknownHandler||rq)(c,p,y)}function d(p){const y=[];if("children"in p){const T=p.children;let b=-1;for(;++b<T.length;){const w=c.one(T[b],p);if(w){if(b&&T[b-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=_w(w.value)),!Array.isArray(w)&&w.type==="element")){const N=w.children[0];N&&N.type==="text"&&(N.value=_w(N.value))}Array.isArray(w)?y.push(...w):y.push(w)}}}return y}}function tq(t,e){t.position&&(e.position=UH(t))}function nq(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,o=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const u="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:u}}n.type==="element"&&o&&Object.assign(n.properties,Ul(o)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function rq(t,e){const n=e.data||{},r="value"in e&&!(ME.call(n,"hProperties")||ME.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function iq(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function _w(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function Tw(t,e){const n=eq(t,e),r=n.one(t,void 0),s=jj(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&o.children.push({type:"text",value:`
`},s),o}function sq(t,e){return t&&"run"in t?async function(n,r){const s=Tw(n,{file:r,...e});await t.run(s,r)}:function(n,r){return Tw(n,{file:r,...t||e})}}function bw(t){if(t)throw t}var Iy,vw;function aq(){if(vw)return Iy;vw=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},o=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var p=t.call(d,"constructor"),y=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!p&&!y)return!1;var T;for(T in d);return typeof T>"u"||t.call(d,T)},u=function(d,p){n&&p.name==="__proto__"?n(d,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):d[p.name]=p.newValue},c=function(d,p){if(p==="__proto__")if(t.call(d,p)){if(r)return r(d,p).value}else return;return d[p]};return Iy=function f(){var d,p,y,T,b,w,N=arguments[0],k=1,D=arguments.length,F=!1;for(typeof N=="boolean"&&(F=N,N=arguments[1]||{},k=2),(N==null||typeof N!="object"&&typeof N!="function")&&(N={});k<D;++k)if(d=arguments[k],d!=null)for(p in d)y=c(N,p),T=c(d,p),N!==T&&(F&&T&&(o(T)||(b=s(T)))?(b?(b=!1,w=y&&s(y)?y:[]):w=y&&o(y)?y:{},u(N,{name:p,newValue:f(F,w,T)})):typeof T<"u"&&u(N,{name:p,newValue:T}));return N},Iy}var oq=aq();const Cy=o0(oq);function PE(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function uq(){const t=[],e={run:n,use:r};return e;function n(...s){let o=-1;const u=s.pop();if(typeof u!="function")throw new TypeError("Expected function as last argument, not "+u);c(null,...s);function c(f,...d){const p=t[++o];let y=-1;if(f){u(f);return}for(;++y<s.length;)(d[y]===null||d[y]===void 0)&&(d[y]=s[y]);s=d,p?lq(p,c)(...d):u(null,...d)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function lq(t,e){let n;return r;function r(...u){const c=t.length>u.length;let f;c&&u.push(s);try{f=t.apply(this,u)}catch(d){const p=d;if(c&&n)throw p;return s(p)}c||(f&&f.then&&typeof f.then=="function"?f.then(o,s):f instanceof Error?s(f):o(f))}function s(u,...c){n||(n=!0,e(u,...c))}function o(u){s(null,u)}}const vs={basename:cq,dirname:hq,extname:fq,join:dq,sep:"/"};function cq(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');bf(t);let n=0,r=-1,s=t.length,o;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(o){n=s+1;break}}else r<0&&(o=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let u=-1,c=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(o){n=s+1;break}}else u<0&&(o=!0,u=s+1),c>-1&&(t.codePointAt(s)===e.codePointAt(c--)?c<0&&(r=s):(c=-1,r=u));return n===r?r=u:r<0&&(r=t.length),t.slice(n,r)}function hq(t){if(bf(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function fq(t){bf(t);let e=t.length,n=-1,r=0,s=-1,o=0,u;for(;e--;){const c=t.codePointAt(e);if(c===47){if(u){r=e+1;break}continue}n<0&&(u=!0,n=e+1),c===46?s<0?s=e:o!==1&&(o=1):s>-1&&(o=-1)}return s<0||n<0||o===0||o===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function dq(...t){let e=-1,n;for(;++e<t.length;)bf(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":mq(n)}function mq(t){bf(t);const e=t.codePointAt(0)===47;let n=pq(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function pq(t,e){let n="",r=0,s=-1,o=0,u=-1,c,f;for(;++u<=t.length;){if(u<t.length)c=t.codePointAt(u);else{if(c===47)break;c=47}if(c===47){if(!(s===u-1||o===1))if(s!==u-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",r=0):(n=n.slice(0,f),r=n.length-1-n.lastIndexOf("/")),s=u,o=0;continue}}else if(n.length>0){n="",r=0,s=u,o=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,u):n=t.slice(s+1,u),r=u-s-1;s=u,o=0}else c===46&&o>-1?o++:o=-1}return n}function bf(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const gq={cwd:yq};function yq(){return"/"}function BE(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Eq(t){if(typeof t=="string")t=new URL(t);else if(!BE(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return _q(t)}function _q(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const Ny=["history","path","basename","stem","extname","dirname"];class PR{constructor(e){let n;e?BE(e)?n={path:e}:typeof e=="string"||Tq(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":gq.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Ny.length;){const o=Ny[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let s;for(s in n)Ny.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?vs.basename(this.path):void 0}set basename(e){Dy(e,"basename"),Ry(e,"basename"),this.path=vs.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?vs.dirname(this.path):void 0}set dirname(e){Sw(this.basename,"dirname"),this.path=vs.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?vs.extname(this.path):void 0}set extname(e){if(Ry(e,"extname"),Sw(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=vs.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){BE(e)&&(e=Eq(e)),Dy(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?vs.basename(this.path,this.extname):void 0}set stem(e){Dy(e,"stem"),Ry(e,"stem"),this.path=vs.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new Cr(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Ry(t,e){if(t&&t.includes(vs.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+vs.sep+"`")}function Dy(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Sw(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Tq(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const bq=function(t){const r=this.constructor.prototype,s=r[t],o=function(){return s.apply(o,arguments)};return Object.setPrototypeOf(o,r),o},vq={}.hasOwnProperty;class A1 extends bq{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=uq()}copy(){const e=new A1;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Cy(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Ly("data",this.frozen),this.namespace[e]=n,this):vq.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Ly("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=sm(e),r=this.parser||this.Parser;return Oy("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Oy("process",this.parser||this.Parser),ky("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(o,u){const c=sm(e),f=r.parse(c);r.run(f,c,function(p,y,T){if(p||!y||!T)return d(p);const b=y,w=r.stringify(b,T);wq(w)?T.value=w:T.result=w,d(p,T)});function d(p,y){p||!y?u(p):o?o(y):n(void 0,y)}}}processSync(e){let n=!1,r;return this.freeze(),Oy("processSync",this.parser||this.Parser),ky("processSync",this.compiler||this.Compiler),this.process(e,s),ww("processSync","process",n),r;function s(o,u){n=!0,bw(o),r=u}}run(e,n,r){Aw(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(u,c){const f=sm(n);s.run(e,f,d);function d(p,y,T){const b=y||e;p?c(p):u?u(b):r(void 0,b,T)}}}runSync(e,n){let r=!1,s;return this.run(e,n,o),ww("runSync","run",r),s;function o(u,c){bw(u),s=c,r=!0}}stringify(e,n){this.freeze();const r=sm(n),s=this.compiler||this.Compiler;return ky("stringify",s),Aw(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(Ly("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):u(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(d){if(typeof d=="function")f(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[p,...y]=d;f(p,y)}else u(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function u(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(d.plugins),d.settings&&(s.settings=Cy(!0,s.settings,d.settings))}function c(d){let p=-1;if(d!=null)if(Array.isArray(d))for(;++p<d.length;){const y=d[p];o(y)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function f(d,p){let y=-1,T=-1;for(;++y<r.length;)if(r[y][0]===d){T=y;break}if(T===-1)r.push([d,...p]);else if(p.length>0){let[b,...w]=p;const N=r[T][1];PE(N)&&PE(b)&&(b=Cy(!0,N,b)),r[T]=[d,b,...w]}}}}const Sq=new A1().freeze();function Oy(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function ky(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Ly(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Aw(t){if(!PE(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function ww(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function sm(t){return Aq(t)?t:new PR(t)}function Aq(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function wq(t){return typeof t=="string"||xq(t)}function xq(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Iq="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",xw=[],Iw={allowDangerousHtml:!0},Cq=/^(https?|ircs?|mailto|xmpp)$/i,Nq=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Rq(t){const e=Dq(t),n=Oq(t);return kq(e.runSync(e.parse(n),n),t)}function Dq(t){const e=t.rehypePlugins||xw,n=t.remarkPlugins||xw,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...Iw}:Iw;return Sq().use(cj).use(n).use(sq,r).use(e)}function Oq(t){const e=t.children||"",n=new PR;return typeof e=="string"&&(n.value=e),n}function kq(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,o=e.disallowedElements,u=e.skipHtml,c=e.unwrapDisallowed,f=e.urlTransform||Lq;for(const p of Nq)Object.hasOwn(e,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+Iq+p.id,void 0);return S1(t,d),jH(t,{Fragment:Y.Fragment,components:s,ignoreInvalidStyle:!0,jsx:Y.jsx,jsxs:Y.jsxs,passKeys:!0,passNode:!0});function d(p,y,T){if(p.type==="raw"&&T&&typeof y=="number")return u?T.children.splice(y,1):T.children[y]={type:"text",value:p.value},y;if(p.type==="element"){let b;for(b in Ay)if(Object.hasOwn(Ay,b)&&Object.hasOwn(p.properties,b)){const w=p.properties[b],N=Ay[b];(N===null||N.includes(p.tagName))&&(p.properties[b]=f(String(w||""),b,p))}}if(p.type==="element"){let b=n?!n.includes(p.tagName):o?o.includes(p.tagName):!1;if(!b&&r&&typeof y=="number"&&(b=!r(p,y,T)),b&&T&&typeof y=="number")return c&&p.children?T.children.splice(y,1,...p.children):T.children.splice(y,1),y}}}function Lq(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||Cq.test(t.slice(0,e))?t:""}const Cw=/[#.]/g;function Mq(t,e){const n=t||"",r={};let s=0,o,u;for(;s<n.length;){Cw.lastIndex=s;const c=Cw.exec(n),f=n.slice(s,c?c.index:n.length);f&&(o?o==="#"?r.id=f:Array.isArray(r.className)?r.className.push(f):r.className=[f]:u=f,s+=f.length),c&&(o=c[0],s++)}return{type:"element",tagName:u||e||"div",properties:r,children:[]}}function BR(t,e,n){const r=n?Vq(n):void 0;function s(o,u,...c){let f;if(o==null){f={type:"root",children:[]};const d=u;c.unshift(d)}else{f=Mq(o,e);const d=f.tagName.toLowerCase(),p=r?r.get(d):void 0;if(f.tagName=p||d,Pq(u))c.unshift(u);else for(const[y,T]of Object.entries(u))Bq(t,f.properties,y,T)}for(const d of c)UE(f.children,d);return f.type==="element"&&f.tagName==="template"&&(f.content={type:"root",children:f.children},f.children=[]),f}return s}function Pq(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const r of n){const s=e[r];if(s&&typeof s=="object"){if(!Array.isArray(s))return!0;const o=s;for(const u of o)if(typeof u!="number"&&typeof u!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function Bq(t,e,n,r){const s=f1(t,n);let o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?s.spaceSeparated?o=$2(r):s.commaSeparated?o=z2(r):s.commaOrSpaceSeparated?o=$2(z2(r).join(" ")):o=Nw(s,s.property,r):Array.isArray(r)?o=[...r]:o=s.property==="style"?Uq(r):String(r);if(Array.isArray(o)){const u=[];for(const c of o)u.push(Nw(s,s.property,c));o=u}s.property==="className"&&Array.isArray(e.className)&&(o=e.className.concat(o)),e[s.property]=o}}function UE(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const n of e)UE(t,n);else if(typeof e=="object"&&"type"in e)e.type==="root"?UE(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function Nw(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||Zh(n)===Zh(e)))return!0}return n}function Uq(t){const e=[];for(const[n,r]of Object.entries(t))e.push([n,r].join(": "));return e.join("; ")}function Vq(t){const e=new Map;for(const n of t)e.set(n.toLowerCase(),n);return e}const Hq=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Fq=BR(B0,"div"),zq=BR(Xl,"g",Hq);function jq(t){const e=String(t),n=[];return{toOffset:s,toPoint:r};function r(o){if(typeof o=="number"&&o>-1&&o<=e.length){let u=0;for(;;){let c=n[u];if(c===void 0){const f=Rw(e,n[u-1]);c=f===-1?e.length+1:f+1,n[u]=c}if(c>o)return{line:u+1,column:o-(u>0?n[u-1]:0)+1,offset:o};u++}}}function s(o){if(o&&typeof o.line=="number"&&typeof o.column=="number"&&!Number.isNaN(o.line)&&!Number.isNaN(o.column)){for(;n.length<o.line;){const c=n[n.length-1],f=Rw(e,c),d=f===-1?e.length+1:f+1;if(c===d)break;n.push(d)}const u=(o.line>1?n[o.line-2]:0)+o.column-1;if(u<n[o.line-1])return u}}}function Rw(t,e){const n=t.indexOf("\r",e),r=t.indexOf(`
`,e);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const Jo={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},UR={}.hasOwnProperty,qq=Object.prototype;function Yq(t,e){const n=e||{};return w1({file:n.file||void 0,location:!1,schema:n.space==="svg"?Xl:B0,verbose:n.verbose||!1},t)}function w1(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},vm(t,r,n),n}case"#document":case"#document-fragment":{const r=e,s="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:VR(t,e.childNodes),data:{quirksMode:s}},t.file&&t.location){const o=String(t.file),u=jq(o),c=u.toPoint(0),f=u.toPoint(o.length);n.position={start:c,end:f}}return n}case"#documentType":{const r=e;return n={type:"doctype"},vm(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},vm(t,r,n),n}default:return n=Gq(t,e),n}}function VR(t,e){let n=-1;const r=[];for(;++n<e.length;){const s=w1(t,e[n]);r.push(s)}return r}function Gq(t,e){const n=t.schema;t.schema=e.namespaceURI===Jo.svg?Xl:B0;let r=-1;const s={};for(;++r<e.attrs.length;){const c=e.attrs[r],f=(c.prefix?c.prefix+":":"")+c.name;UR.call(qq,f)||(s[f]=c.value)}const u=(t.schema.space==="svg"?zq:Fq)(e.tagName,s,VR(t,e.childNodes));if(vm(t,e,u),u.tagName==="template"){const c=e,f=c.sourceCodeLocation,d=f&&f.startTag&&ml(f.startTag),p=f&&f.endTag&&ml(f.endTag),y=w1(t,c.content);d&&p&&t.file&&(y.position={start:d.end,end:p.start}),u.content=y}return t.schema=n,u}function vm(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=$q(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function $q(t,e,n){const r=ml(n);if(e.type==="element"){const s=e.children[e.children.length-1];if(r&&!n.endTag&&s&&s.position&&s.position.end&&(r.end=Object.assign({},s.position.end)),t.verbose){const o={};let u;if(n.attrs)for(u in n.attrs)UR.call(n.attrs,u)&&(o[f1(t.schema,u).property]=ml(n.attrs[u]));n.startTag;const c=ml(n.startTag),f=n.endTag?ml(n.endTag):void 0,d={opening:c};f&&(d.closing=f),d.properties=o,e.data={position:d}}}return r}function ml(t){const e=Dw({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=Dw({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function Dw(t){return t.line&&t.column?t:void 0}class vf{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}}vf.prototype.property={};vf.prototype.normal={};vf.prototype.space=null;function HR(t,e){const n={},r={};let s=-1;for(;++s<t.length;)Object.assign(n,t[s].property),Object.assign(r,t[s].normal);return new vf(n,r,e)}function VE(t){return t.toLowerCase()}class qi{constructor(e,n){this.property=e,this.attribute=n}}qi.prototype.space=null;qi.prototype.boolean=!1;qi.prototype.booleanish=!1;qi.prototype.overloadedBoolean=!1;qi.prototype.number=!1;qi.prototype.commaSeparated=!1;qi.prototype.spaceSeparated=!1;qi.prototype.commaOrSpaceSeparated=!1;qi.prototype.mustUseProperty=!1;qi.prototype.defined=!1;let Kq=0;const st=gu(),Pn=gu(),FR=gu(),ke=gu(),rn=gu(),wl=gu(),mi=gu();function gu(){return 2**++Kq}const HE=Object.freeze(Object.defineProperty({__proto__:null,boolean:st,booleanish:Pn,commaOrSpaceSeparated:mi,commaSeparated:wl,number:ke,overloadedBoolean:FR,spaceSeparated:rn},Symbol.toStringTag,{value:"Module"})),My=Object.keys(HE);class x1 extends qi{constructor(e,n,r,s){let o=-1;if(super(e,n),Ow(this,"space",s),typeof r=="number")for(;++o<My.length;){const u=My[o];Ow(this,My[o],(r&HE[u])===HE[u])}}}x1.prototype.defined=!0;function Ow(t,e,n){n&&(t[e]=n)}const Xq={}.hasOwnProperty;function Wl(t){const e={},n={};let r;for(r in t.properties)if(Xq.call(t.properties,r)){const s=t.properties[r],o=new x1(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),e[r]=o,n[VE(r)]=r,n[VE(o.attribute)]=r}return new vf(e,n,t.space)}const zR=Wl({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),jR=Wl({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function qR(t,e){return e in t?t[e]:e}function YR(t,e){return qR(t,e.toLowerCase())}const GR=Wl({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:YR,properties:{xmlns:null,xmlnsXLink:null}}),$R=Wl({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Pn,ariaAutoComplete:null,ariaBusy:Pn,ariaChecked:Pn,ariaColCount:ke,ariaColIndex:ke,ariaColSpan:ke,ariaControls:rn,ariaCurrent:null,ariaDescribedBy:rn,ariaDetails:null,ariaDisabled:Pn,ariaDropEffect:rn,ariaErrorMessage:null,ariaExpanded:Pn,ariaFlowTo:rn,ariaGrabbed:Pn,ariaHasPopup:null,ariaHidden:Pn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:rn,ariaLevel:ke,ariaLive:null,ariaModal:Pn,ariaMultiLine:Pn,ariaMultiSelectable:Pn,ariaOrientation:null,ariaOwns:rn,ariaPlaceholder:null,ariaPosInSet:ke,ariaPressed:Pn,ariaReadOnly:Pn,ariaRelevant:null,ariaRequired:Pn,ariaRoleDescription:rn,ariaRowCount:ke,ariaRowIndex:ke,ariaRowSpan:ke,ariaSelected:Pn,ariaSetSize:ke,ariaSort:null,ariaValueMax:ke,ariaValueMin:ke,ariaValueNow:ke,ariaValueText:null,role:null}}),Qq=Wl({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:YR,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:wl,acceptCharset:rn,accessKey:rn,action:null,allow:null,allowFullScreen:st,allowPaymentRequest:st,allowUserMedia:st,alt:null,as:null,async:st,autoCapitalize:null,autoComplete:rn,autoFocus:st,autoPlay:st,blocking:rn,capture:null,charSet:null,checked:st,cite:null,className:rn,cols:ke,colSpan:null,content:null,contentEditable:Pn,controls:st,controlsList:rn,coords:ke|wl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:st,defer:st,dir:null,dirName:null,disabled:st,download:FR,draggable:Pn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:st,formTarget:null,headers:rn,height:ke,hidden:st,high:ke,href:null,hrefLang:null,htmlFor:rn,httpEquiv:rn,id:null,imageSizes:null,imageSrcSet:null,inert:st,inputMode:null,integrity:null,is:null,isMap:st,itemId:null,itemProp:rn,itemRef:rn,itemScope:st,itemType:rn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:st,low:ke,manifest:null,max:null,maxLength:ke,media:null,method:null,min:null,minLength:ke,multiple:st,muted:st,name:null,nonce:null,noModule:st,noValidate:st,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:st,optimum:ke,pattern:null,ping:rn,placeholder:null,playsInline:st,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:st,referrerPolicy:null,rel:rn,required:st,reversed:st,rows:ke,rowSpan:ke,sandbox:rn,scope:null,scoped:st,seamless:st,selected:st,shadowRootClonable:st,shadowRootDelegatesFocus:st,shadowRootMode:null,shape:null,size:ke,sizes:null,slot:null,span:ke,spellCheck:Pn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ke,step:null,style:null,tabIndex:ke,target:null,title:null,translate:null,type:null,typeMustMatch:st,useMap:null,value:Pn,width:ke,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:rn,axis:null,background:null,bgColor:null,border:ke,borderColor:null,bottomMargin:ke,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:st,declare:st,event:null,face:null,frame:null,frameBorder:null,hSpace:ke,leftMargin:ke,link:null,longDesc:null,lowSrc:null,marginHeight:ke,marginWidth:ke,noResize:st,noHref:st,noShade:st,noWrap:st,object:null,profile:null,prompt:null,rev:null,rightMargin:ke,rules:null,scheme:null,scrolling:Pn,standby:null,summary:null,text:null,topMargin:ke,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ke,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:st,disableRemotePlayback:st,prefix:null,property:null,results:ke,security:null,unselectable:null}}),Wq=Wl({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:qR,properties:{about:mi,accentHeight:ke,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ke,amplitude:ke,arabicForm:null,ascent:ke,attributeName:null,attributeType:null,azimuth:ke,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ke,by:null,calcMode:null,capHeight:ke,className:rn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ke,diffuseConstant:ke,direction:null,display:null,dur:null,divisor:ke,dominantBaseline:null,download:st,dx:null,dy:null,edgeMode:null,editable:null,elevation:ke,enableBackground:null,end:null,event:null,exponent:ke,externalResourcesRequired:null,fill:null,fillOpacity:ke,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:wl,g2:wl,glyphName:wl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ke,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ke,horizOriginX:ke,horizOriginY:ke,id:null,ideographic:ke,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ke,k:ke,k1:ke,k2:ke,k3:ke,k4:ke,kernelMatrix:mi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ke,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ke,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ke,overlineThickness:ke,paintOrder:null,panose1:null,path:null,pathLength:ke,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:rn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ke,pointsAtY:ke,pointsAtZ:ke,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:mi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:mi,rev:mi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:mi,requiredFeatures:mi,requiredFonts:mi,requiredFormats:mi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ke,specularExponent:ke,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ke,strikethroughThickness:ke,string:null,stroke:null,strokeDashArray:mi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ke,strokeOpacity:ke,strokeWidth:null,style:null,surfaceScale:ke,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:mi,tabIndex:ke,tableValues:null,target:null,targetX:ke,targetY:ke,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:mi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ke,underlineThickness:ke,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ke,values:null,vAlphabetic:ke,vMathematical:ke,vectorEffect:null,vHanging:ke,vIdeographic:ke,version:null,vertAdvY:ke,vertOriginX:ke,vertOriginY:ke,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ke,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Zq=/^data[-\w.:]+$/i,kw=/-[a-z]/g,Jq=/[A-Z]/g;function eY(t,e){const n=VE(e);let r=e,s=qi;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Zq.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(kw,nY);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!kw.test(o)){let u=o.replace(Jq,tY);u.charAt(0)!=="-"&&(u="-"+u),e="data"+u}}s=x1}return new s(r,e)}function tY(t){return"-"+t.toLowerCase()}function nY(t){return t.charAt(1).toUpperCase()}const rY=HR([jR,zR,GR,$R,Qq],"html"),KR=HR([jR,zR,GR,$R,Wq],"svg"),Lw={}.hasOwnProperty;function XR(t,e){const n=e||{};function r(s,...o){let u=r.invalid;const c=r.handlers;if(s&&Lw.call(s,t)){const f=String(s[t]);u=Lw.call(c,f)?c[f]:r.unknown}if(u)return u.call(this,s,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const iY={},sY={}.hasOwnProperty,QR=XR("type",{handlers:{root:oY,element:fY,text:cY,comment:hY,doctype:lY}});function aY(t,e){const r=(e||iY).space;return QR(t,r==="svg"?KR:rY)}function oY(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=I1(t.children,n,e),Zl(t,n),n}function uY(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=I1(t.children,n,e),Zl(t,n),n}function lY(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Zl(t,e),e}function cY(t){const e={nodeName:"#text",value:t.value,parentNode:null};return Zl(t,e),e}function hY(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return Zl(t,e),e}function fY(t,e){const n=e;let r=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=KR);const s=[];let o;if(t.properties){for(o in t.properties)if(o!=="children"&&sY.call(t.properties,o)){const f=dY(r,o,t.properties[o]);f&&s.push(f)}}const u=r.space,c={nodeName:t.tagName,tagName:t.tagName,attrs:s,namespaceURI:Jo[u],childNodes:[],parentNode:null};return c.childNodes=I1(t.children,c,r),Zl(t,c),t.tagName==="template"&&t.content&&(c.content=uY(t.content,r)),c}function dY(t,e,n){const r=eY(t,e);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?nR(n):cR(n));const s={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const o=s.name.indexOf(":");o<0?s.prefix="":(s.name=s.name.slice(o+1),s.prefix=r.attribute.slice(0,o)),s.namespace=Jo[r.space]}return s}function I1(t,e,n){let r=-1;const s=[];if(t)for(;++r<t.length;){const o=QR(t[r],n);o.parentNode=e,s.push(o)}return s}function Zl(t,e){const n=t.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const mY=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],pY=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),mn="";var G;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(G||(G={}));const Kr={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function WR(t){return t>=55296&&t<=57343}function gY(t){return t>=56320&&t<=57343}function yY(t,e){return(t-55296)*1024+9216+e}function ZR(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function JR(t){return t>=64976&&t<=65007||pY.has(t)}var Ee;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ee||(Ee={}));const EY=65536;class _Y{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=EY,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,n){const{line:r,col:s,offset:o}=this,u=s+n,c=o+n;return{code:e,startLine:r,endLine:r,startCol:u,endCol:u,startOffset:c,endOffset:c}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(gY(n))return this.pos++,this._addGap(),yY(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,G.EOF;return this._err(Ee.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,G.EOF;const r=this.html.charCodeAt(n);return r===G.CARRIAGE_RETURN?G.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,G.EOF;let e=this.html.charCodeAt(this.pos);return e===G.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,G.LINE_FEED):e===G.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,WR(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===G.LINE_FEED||e===G.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){ZR(e)?this._err(Ee.controlCharacterInInputStream):JR(e)&&this._err(Ee.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var mt;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(mt||(mt={}));function e3(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const TY=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),bY=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function vY(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=bY.get(t))!==null&&e!==void 0?e:t}var sr;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(sr||(sr={}));const SY=32;var to;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(to||(to={}));function FE(t){return t>=sr.ZERO&&t<=sr.NINE}function AY(t){return t>=sr.UPPER_A&&t<=sr.UPPER_F||t>=sr.LOWER_A&&t<=sr.LOWER_F}function wY(t){return t>=sr.UPPER_A&&t<=sr.UPPER_Z||t>=sr.LOWER_A&&t<=sr.LOWER_Z||FE(t)}function xY(t){return t===sr.EQUALS||wY(t)}var rr;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(rr||(rr={}));var aa;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(aa||(aa={}));class IY{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=rr.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=aa.Strict}startEntity(e){this.decodeMode=e,this.state=rr.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case rr.EntityStart:return e.charCodeAt(n)===sr.NUM?(this.state=rr.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=rr.NamedEntity,this.stateNamedEntity(e,n));case rr.NumericStart:return this.stateNumericStart(e,n);case rr.NumericDecimal:return this.stateNumericDecimal(e,n);case rr.NumericHex:return this.stateNumericHex(e,n);case rr.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|SY)===sr.LOWER_X?(this.state=rr.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=rr.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,s){if(n!==r){const o=r-n;this.result=this.result*Math.pow(s,o)+Number.parseInt(e.substr(n,o),s),this.consumed+=o}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(FE(s)||AY(s))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(FE(s))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===sr.SEMI)this.consumed+=1;else if(this.decodeMode===aa.Strict)return 0;return this.emitCodePoint(vY(this.result),this.consumed),this.errors&&(e!==sr.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let s=r[this.treeIndex],o=(s&to.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const u=e.charCodeAt(n);if(this.treeIndex=CY(r,s,this.treeIndex+Math.max(1,o),u),this.treeIndex<0)return this.result===0||this.decodeMode===aa.Attribute&&(o===0||xY(u))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],o=(s&to.VALUE_LENGTH)>>14,o!==0){if(u===sr.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==aa.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,s=(r[n]&to.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[e]&~to.VALUE_LENGTH:s[e+1],r),n===3&&this.emitCodePoint(s[e+2],r),r}end(){var e;switch(this.state){case rr.NamedEntity:return this.result!==0&&(this.decodeMode!==aa.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case rr.NumericDecimal:return this.emitNumericEntity(0,2);case rr.NumericHex:return this.emitNumericEntity(0,3);case rr.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case rr.EntityStart:return 0}}}function CY(t,e,n,r){const s=(e&to.BRANCH_LENGTH)>>7,o=e&to.JUMP_TABLE;if(s===0)return o!==0&&r===o?n:-1;if(o){const f=r-o;return f<0||f>=s?-1:t[n+f]-1}let u=n,c=u+s-1;for(;u<=c;){const f=u+c>>>1,d=t[f];if(d<r)u=f+1;else if(d>r)c=f-1;else return t[f+s]}return-1}var Ce;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(Ce||(Ce={}));var tu;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(tu||(tu={}));var Fi;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(Fi||(Fi={}));var ce;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(ce||(ce={}));var _;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(_||(_={}));const NY=new Map([[ce.A,_.A],[ce.ADDRESS,_.ADDRESS],[ce.ANNOTATION_XML,_.ANNOTATION_XML],[ce.APPLET,_.APPLET],[ce.AREA,_.AREA],[ce.ARTICLE,_.ARTICLE],[ce.ASIDE,_.ASIDE],[ce.B,_.B],[ce.BASE,_.BASE],[ce.BASEFONT,_.BASEFONT],[ce.BGSOUND,_.BGSOUND],[ce.BIG,_.BIG],[ce.BLOCKQUOTE,_.BLOCKQUOTE],[ce.BODY,_.BODY],[ce.BR,_.BR],[ce.BUTTON,_.BUTTON],[ce.CAPTION,_.CAPTION],[ce.CENTER,_.CENTER],[ce.CODE,_.CODE],[ce.COL,_.COL],[ce.COLGROUP,_.COLGROUP],[ce.DD,_.DD],[ce.DESC,_.DESC],[ce.DETAILS,_.DETAILS],[ce.DIALOG,_.DIALOG],[ce.DIR,_.DIR],[ce.DIV,_.DIV],[ce.DL,_.DL],[ce.DT,_.DT],[ce.EM,_.EM],[ce.EMBED,_.EMBED],[ce.FIELDSET,_.FIELDSET],[ce.FIGCAPTION,_.FIGCAPTION],[ce.FIGURE,_.FIGURE],[ce.FONT,_.FONT],[ce.FOOTER,_.FOOTER],[ce.FOREIGN_OBJECT,_.FOREIGN_OBJECT],[ce.FORM,_.FORM],[ce.FRAME,_.FRAME],[ce.FRAMESET,_.FRAMESET],[ce.H1,_.H1],[ce.H2,_.H2],[ce.H3,_.H3],[ce.H4,_.H4],[ce.H5,_.H5],[ce.H6,_.H6],[ce.HEAD,_.HEAD],[ce.HEADER,_.HEADER],[ce.HGROUP,_.HGROUP],[ce.HR,_.HR],[ce.HTML,_.HTML],[ce.I,_.I],[ce.IMG,_.IMG],[ce.IMAGE,_.IMAGE],[ce.INPUT,_.INPUT],[ce.IFRAME,_.IFRAME],[ce.KEYGEN,_.KEYGEN],[ce.LABEL,_.LABEL],[ce.LI,_.LI],[ce.LINK,_.LINK],[ce.LISTING,_.LISTING],[ce.MAIN,_.MAIN],[ce.MALIGNMARK,_.MALIGNMARK],[ce.MARQUEE,_.MARQUEE],[ce.MATH,_.MATH],[ce.MENU,_.MENU],[ce.META,_.META],[ce.MGLYPH,_.MGLYPH],[ce.MI,_.MI],[ce.MO,_.MO],[ce.MN,_.MN],[ce.MS,_.MS],[ce.MTEXT,_.MTEXT],[ce.NAV,_.NAV],[ce.NOBR,_.NOBR],[ce.NOFRAMES,_.NOFRAMES],[ce.NOEMBED,_.NOEMBED],[ce.NOSCRIPT,_.NOSCRIPT],[ce.OBJECT,_.OBJECT],[ce.OL,_.OL],[ce.OPTGROUP,_.OPTGROUP],[ce.OPTION,_.OPTION],[ce.P,_.P],[ce.PARAM,_.PARAM],[ce.PLAINTEXT,_.PLAINTEXT],[ce.PRE,_.PRE],[ce.RB,_.RB],[ce.RP,_.RP],[ce.RT,_.RT],[ce.RTC,_.RTC],[ce.RUBY,_.RUBY],[ce.S,_.S],[ce.SCRIPT,_.SCRIPT],[ce.SEARCH,_.SEARCH],[ce.SECTION,_.SECTION],[ce.SELECT,_.SELECT],[ce.SOURCE,_.SOURCE],[ce.SMALL,_.SMALL],[ce.SPAN,_.SPAN],[ce.STRIKE,_.STRIKE],[ce.STRONG,_.STRONG],[ce.STYLE,_.STYLE],[ce.SUB,_.SUB],[ce.SUMMARY,_.SUMMARY],[ce.SUP,_.SUP],[ce.TABLE,_.TABLE],[ce.TBODY,_.TBODY],[ce.TEMPLATE,_.TEMPLATE],[ce.TEXTAREA,_.TEXTAREA],[ce.TFOOT,_.TFOOT],[ce.TD,_.TD],[ce.TH,_.TH],[ce.THEAD,_.THEAD],[ce.TITLE,_.TITLE],[ce.TR,_.TR],[ce.TRACK,_.TRACK],[ce.TT,_.TT],[ce.U,_.U],[ce.UL,_.UL],[ce.SVG,_.SVG],[ce.VAR,_.VAR],[ce.WBR,_.WBR],[ce.XMP,_.XMP]]);function Jl(t){var e;return(e=NY.get(t))!==null&&e!==void 0?e:_.UNKNOWN}const Re=_,RY={[Ce.HTML]:new Set([Re.ADDRESS,Re.APPLET,Re.AREA,Re.ARTICLE,Re.ASIDE,Re.BASE,Re.BASEFONT,Re.BGSOUND,Re.BLOCKQUOTE,Re.BODY,Re.BR,Re.BUTTON,Re.CAPTION,Re.CENTER,Re.COL,Re.COLGROUP,Re.DD,Re.DETAILS,Re.DIR,Re.DIV,Re.DL,Re.DT,Re.EMBED,Re.FIELDSET,Re.FIGCAPTION,Re.FIGURE,Re.FOOTER,Re.FORM,Re.FRAME,Re.FRAMESET,Re.H1,Re.H2,Re.H3,Re.H4,Re.H5,Re.H6,Re.HEAD,Re.HEADER,Re.HGROUP,Re.HR,Re.HTML,Re.IFRAME,Re.IMG,Re.INPUT,Re.LI,Re.LINK,Re.LISTING,Re.MAIN,Re.MARQUEE,Re.MENU,Re.META,Re.NAV,Re.NOEMBED,Re.NOFRAMES,Re.NOSCRIPT,Re.OBJECT,Re.OL,Re.P,Re.PARAM,Re.PLAINTEXT,Re.PRE,Re.SCRIPT,Re.SECTION,Re.SELECT,Re.SOURCE,Re.STYLE,Re.SUMMARY,Re.TABLE,Re.TBODY,Re.TD,Re.TEMPLATE,Re.TEXTAREA,Re.TFOOT,Re.TH,Re.THEAD,Re.TITLE,Re.TR,Re.TRACK,Re.UL,Re.WBR,Re.XMP]),[Ce.MATHML]:new Set([Re.MI,Re.MO,Re.MN,Re.MS,Re.MTEXT,Re.ANNOTATION_XML]),[Ce.SVG]:new Set([Re.TITLE,Re.FOREIGN_OBJECT,Re.DESC]),[Ce.XLINK]:new Set,[Ce.XML]:new Set,[Ce.XMLNS]:new Set},zE=new Set([Re.H1,Re.H2,Re.H3,Re.H4,Re.H5,Re.H6]);ce.STYLE,ce.SCRIPT,ce.XMP,ce.IFRAME,ce.NOEMBED,ce.NOFRAMES,ce.PLAINTEXT;var X;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(X||(X={}));const Nn={DATA:X.DATA,RCDATA:X.RCDATA,RAWTEXT:X.RAWTEXT,SCRIPT_DATA:X.SCRIPT_DATA,PLAINTEXT:X.PLAINTEXT,CDATA_SECTION:X.CDATA_SECTION};function DY(t){return t>=G.DIGIT_0&&t<=G.DIGIT_9}function yh(t){return t>=G.LATIN_CAPITAL_A&&t<=G.LATIN_CAPITAL_Z}function OY(t){return t>=G.LATIN_SMALL_A&&t<=G.LATIN_SMALL_Z}function qa(t){return OY(t)||yh(t)}function Mw(t){return qa(t)||DY(t)}function am(t){return t+32}function t3(t){return t===G.SPACE||t===G.LINE_FEED||t===G.TABULATION||t===G.FORM_FEED}function Pw(t){return t3(t)||t===G.SOLIDUS||t===G.GREATER_THAN_SIGN}function kY(t){return t===G.NULL?Ee.nullCharacterReference:t>1114111?Ee.characterReferenceOutsideUnicodeRange:WR(t)?Ee.surrogateCharacterReference:JR(t)?Ee.noncharacterCharacterReference:ZR(t)||t===G.CARRIAGE_RETURN?Ee.controlCharacterReference:null}class LY{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=X.DATA,this.returnState=X.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new _Y(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new IY(TY,(r,s)=>{this.preprocessor.pos=this.entityStartPos+s-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(Ee.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(Ee.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const s=kY(r);s&&this._err(s,1)}}:void 0)}_err(e,n=0){var r,s;(s=(r=this.handler).onParseError)===null||s===void 0||s.call(r,this.preprocessor.getError(e,n))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,n,r){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||r?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:mt.START_TAG,tagName:"",tagID:_.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:mt.END_TAG,tagName:"",tagID:_.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:mt.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:mt.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const r=this.currentToken;if(e3(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const s=(e=(n=r.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ee.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=Jl(e.tagName),e.type===mt.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(Ee.endTagWithAttributes),e.selfClosing&&this._err(Ee.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case mt.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case mt.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case mt.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:mt.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,n)}_emitCodePoint(e){const n=t3(e)?mt.WHITESPACE_CHARACTER:e===G.NULL?mt.NULL_CHARACTER:mt.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(mt.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=X.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?aa.Attribute:aa.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===X.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===X.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===X.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case X.DATA:{this._stateData(e);break}case X.RCDATA:{this._stateRcdata(e);break}case X.RAWTEXT:{this._stateRawtext(e);break}case X.SCRIPT_DATA:{this._stateScriptData(e);break}case X.PLAINTEXT:{this._statePlaintext(e);break}case X.TAG_OPEN:{this._stateTagOpen(e);break}case X.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case X.TAG_NAME:{this._stateTagName(e);break}case X.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case X.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case X.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case X.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case X.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case X.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case X.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case X.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case X.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case X.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case X.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case X.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case X.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case X.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case X.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case X.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case X.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case X.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case X.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case X.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case X.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case X.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case X.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case X.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case X.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case X.BOGUS_COMMENT:{this._stateBogusComment(e);break}case X.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case X.COMMENT_START:{this._stateCommentStart(e);break}case X.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case X.COMMENT:{this._stateComment(e);break}case X.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case X.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case X.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case X.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case X.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case X.COMMENT_END:{this._stateCommentEnd(e);break}case X.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case X.DOCTYPE:{this._stateDoctype(e);break}case X.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case X.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case X.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case X.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case X.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case X.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case X.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case X.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case X.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case X.CDATA_SECTION:{this._stateCdataSection(e);break}case X.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case X.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case X.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case X.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case G.LESS_THAN_SIGN:{this.state=X.TAG_OPEN;break}case G.AMPERSAND:{this._startCharacterReference();break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitCodePoint(e);break}case G.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case G.AMPERSAND:{this._startCharacterReference();break}case G.LESS_THAN_SIGN:{this.state=X.RCDATA_LESS_THAN_SIGN;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case G.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case G.LESS_THAN_SIGN:{this.state=X.RAWTEXT_LESS_THAN_SIGN;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case G.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_LESS_THAN_SIGN;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case G.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case G.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case G.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(qa(e))this._createStartTagToken(),this.state=X.TAG_NAME,this._stateTagName(e);else switch(e){case G.EXCLAMATION_MARK:{this.state=X.MARKUP_DECLARATION_OPEN;break}case G.SOLIDUS:{this.state=X.END_TAG_OPEN;break}case G.QUESTION_MARK:{this._err(Ee.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=X.BOGUS_COMMENT,this._stateBogusComment(e);break}case G.EOF:{this._err(Ee.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ee.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=X.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(qa(e))this._createEndTagToken(),this.state=X.TAG_NAME,this._stateTagName(e);else switch(e){case G.GREATER_THAN_SIGN:{this._err(Ee.missingEndTagName),this.state=X.DATA;break}case G.EOF:{this._err(Ee.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ee.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=X.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.BEFORE_ATTRIBUTE_NAME;break}case G.SOLIDUS:{this.state=X.SELF_CLOSING_START_TAG;break}case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentTagToken();break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),n.tagName+=mn;break}case G.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(yh(e)?am(e):e)}}_stateRcdataLessThanSign(e){e===G.SOLIDUS?this.state=X.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=X.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){qa(e)?(this.state=X.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=X.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=X.BEFORE_ATTRIBUTE_NAME,!1;case G.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=X.SELF_CLOSING_START_TAG,!1;case G.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=X.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=X.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===G.SOLIDUS?this.state=X.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=X.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){qa(e)?(this.state=X.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=X.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=X.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case G.SOLIDUS:{this.state=X.SCRIPT_DATA_END_TAG_OPEN;break}case G.EXCLAMATION_MARK:{this.state=X.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=X.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){qa(e)?(this.state=X.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=X.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=X.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===G.HYPHEN_MINUS?(this.state=X.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=X.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===G.HYPHEN_MINUS?(this.state=X.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=X.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case G.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case G.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case G.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_ESCAPED,this._emitChars(mn);break}case G.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case G.HYPHEN_MINUS:{this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case G.GREATER_THAN_SIGN:{this.state=X.SCRIPT_DATA,this._emitChars(">");break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_ESCAPED,this._emitChars(mn);break}case G.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===G.SOLIDUS?this.state=X.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:qa(e)?(this._emitChars("<"),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){qa(e)?(this.state=X.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(Kr.SCRIPT,!1)&&Pw(this.preprocessor.peek(Kr.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Kr.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case G.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case G.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case G.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(mn);break}case G.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case G.HYPHEN_MINUS:{this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case G.GREATER_THAN_SIGN:{this.state=X.SCRIPT_DATA,this._emitChars(">");break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(mn);break}case G.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===G.SOLIDUS?(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(Kr.SCRIPT,!1)&&Pw(this.preprocessor.peek(Kr.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Kr.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=X.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.SOLIDUS:case G.GREATER_THAN_SIGN:case G.EOF:{this.state=X.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case G.EQUALS_SIGN:{this._err(Ee.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=X.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=X.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:case G.SOLIDUS:case G.GREATER_THAN_SIGN:case G.EOF:{this._leaveAttrName(),this.state=X.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case G.EQUALS_SIGN:{this._leaveAttrName(),this.state=X.BEFORE_ATTRIBUTE_VALUE;break}case G.QUOTATION_MARK:case G.APOSTROPHE:case G.LESS_THAN_SIGN:{this._err(Ee.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.name+=mn;break}default:this.currentAttr.name+=String.fromCodePoint(yh(e)?am(e):e)}}_stateAfterAttributeName(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.SOLIDUS:{this.state=X.SELF_CLOSING_START_TAG;break}case G.EQUALS_SIGN:{this.state=X.BEFORE_ATTRIBUTE_VALUE;break}case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentTagToken();break}case G.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=X.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.QUOTATION_MARK:{this.state=X.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case G.APOSTROPHE:{this.state=X.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case G.GREATER_THAN_SIGN:{this._err(Ee.missingAttributeValue),this.state=X.DATA,this.emitCurrentTagToken();break}default:this.state=X.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case G.QUOTATION_MARK:{this.state=X.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case G.AMPERSAND:{this._startCharacterReference();break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.value+=mn;break}case G.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case G.APOSTROPHE:{this.state=X.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case G.AMPERSAND:{this._startCharacterReference();break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.value+=mn;break}case G.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this._leaveAttrValue(),this.state=X.BEFORE_ATTRIBUTE_NAME;break}case G.AMPERSAND:{this._startCharacterReference();break}case G.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=X.DATA,this.emitCurrentTagToken();break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.value+=mn;break}case G.QUOTATION_MARK:case G.APOSTROPHE:case G.LESS_THAN_SIGN:case G.EQUALS_SIGN:case G.GRAVE_ACCENT:{this._err(Ee.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case G.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this._leaveAttrValue(),this.state=X.BEFORE_ATTRIBUTE_NAME;break}case G.SOLIDUS:{this._leaveAttrValue(),this.state=X.SELF_CLOSING_START_TAG;break}case G.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=X.DATA,this.emitCurrentTagToken();break}case G.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this._err(Ee.missingWhitespaceBetweenAttributes),this.state=X.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case G.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=X.DATA,this.emitCurrentTagToken();break}case G.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this._err(Ee.unexpectedSolidusInTag),this.state=X.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentComment(n);break}case G.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),n.data+=mn;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(Kr.DASH_DASH,!0)?(this._createCommentToken(Kr.DASH_DASH.length+1),this.state=X.COMMENT_START):this._consumeSequenceIfMatch(Kr.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Kr.DOCTYPE.length+1),this.state=X.DOCTYPE):this._consumeSequenceIfMatch(Kr.CDATA_START,!0)?this.inForeignNode?this.state=X.CDATA_SECTION:(this._err(Ee.cdataInHtmlContent),this._createCommentToken(Kr.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=X.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ee.incorrectlyOpenedComment),this._createCommentToken(2),this.state=X.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case G.HYPHEN_MINUS:{this.state=X.COMMENT_START_DASH;break}case G.GREATER_THAN_SIGN:{this._err(Ee.abruptClosingOfEmptyComment),this.state=X.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=X.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case G.HYPHEN_MINUS:{this.state=X.COMMENT_END;break}case G.GREATER_THAN_SIGN:{this._err(Ee.abruptClosingOfEmptyComment),this.state=X.DATA,this.emitCurrentComment(n);break}case G.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=X.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case G.HYPHEN_MINUS:{this.state=X.COMMENT_END_DASH;break}case G.LESS_THAN_SIGN:{n.data+="<",this.state=X.COMMENT_LESS_THAN_SIGN;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),n.data+=mn;break}case G.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case G.EXCLAMATION_MARK:{n.data+="!",this.state=X.COMMENT_LESS_THAN_SIGN_BANG;break}case G.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=X.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===G.HYPHEN_MINUS?this.state=X.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=X.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===G.HYPHEN_MINUS?this.state=X.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=X.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==G.GREATER_THAN_SIGN&&e!==G.EOF&&this._err(Ee.nestedComment),this.state=X.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case G.HYPHEN_MINUS:{this.state=X.COMMENT_END;break}case G.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=X.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentComment(n);break}case G.EXCLAMATION_MARK:{this.state=X.COMMENT_END_BANG;break}case G.HYPHEN_MINUS:{n.data+="-";break}case G.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=X.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case G.HYPHEN_MINUS:{n.data+="--!",this.state=X.COMMENT_END_DASH;break}case G.GREATER_THAN_SIGN:{this._err(Ee.incorrectlyClosedComment),this.state=X.DATA,this.emitCurrentComment(n);break}case G.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=X.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_NAME;break}case G.GREATER_THAN_SIGN:{this.state=X.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case G.EOF:{this._err(Ee.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingWhitespaceBeforeDoctypeName),this.state=X.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(yh(e))this._createDoctypeToken(String.fromCharCode(am(e))),this.state=X.DOCTYPE_NAME;else switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.NULL:{this._err(Ee.unexpectedNullCharacter),this._createDoctypeToken(mn),this.state=X.DOCTYPE_NAME;break}case G.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(Ee.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=X.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.AFTER_DOCTYPE_NAME;break}case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),n.name+=mn;break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(yh(e)?am(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Kr.PUBLIC,!1)?this.state=X.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Kr.SYSTEM,!1)?this.state=X.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ee.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case G.QUOTATION_MARK:{this._err(Ee.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{this._err(Ee.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case G.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.QUOTATION_MARK:{n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case G.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case G.QUOTATION_MARK:{this.state=X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),n.publicId+=mn;break}case G.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case G.APOSTROPHE:{this.state=X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),n.publicId+=mn;break}case G.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.QUOTATION_MARK:{this._err(Ee.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{this._err(Ee.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.QUOTATION_MARK:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case G.QUOTATION_MARK:{this._err(Ee.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{this._err(Ee.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case G.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.QUOTATION_MARK:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case G.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case G.QUOTATION_MARK:{this.state=X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),n.systemId+=mn;break}case G.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case G.APOSTROPHE:{this.state=X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),n.systemId+=mn;break}case G.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case G.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter);break}case G.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case G.RIGHT_SQUARE_BRACKET:{this.state=X.CDATA_SECTION_BRACKET;break}case G.EOF:{this._err(Ee.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===G.RIGHT_SQUARE_BRACKET?this.state=X.CDATA_SECTION_END:(this._emitChars("]"),this.state=X.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case G.GREATER_THAN_SIGN:{this.state=X.DATA;break}case G.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=X.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(G.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&Mw(this.preprocessor.peek(1))?X.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){Mw(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===G.SEMICOLON&&this._err(Ee.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const n3=new Set([_.DD,_.DT,_.LI,_.OPTGROUP,_.OPTION,_.P,_.RB,_.RP,_.RT,_.RTC]),Bw=new Set([...n3,_.CAPTION,_.COLGROUP,_.TBODY,_.TD,_.TFOOT,_.TH,_.THEAD,_.TR]),i0=new Set([_.APPLET,_.CAPTION,_.HTML,_.MARQUEE,_.OBJECT,_.TABLE,_.TD,_.TEMPLATE,_.TH]),MY=new Set([...i0,_.OL,_.UL]),PY=new Set([...i0,_.BUTTON]),Uw=new Set([_.ANNOTATION_XML,_.MI,_.MN,_.MO,_.MS,_.MTEXT]),Vw=new Set([_.DESC,_.FOREIGN_OBJECT,_.TITLE]),BY=new Set([_.TR,_.TEMPLATE,_.HTML]),UY=new Set([_.TBODY,_.TFOOT,_.THEAD,_.TEMPLATE,_.HTML]),VY=new Set([_.TABLE,_.TEMPLATE,_.HTML]),HY=new Set([_.TD,_.TH]);class FY{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=_.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===_.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ce.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(e,n,r){const s=this._indexOf(e)+1;this.items.splice(s,0,n),this.tagIDs.splice(s,0,r),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Ce.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(Math.max(n,0))}popUntilPopped(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(zE,Ce.HTML)}popUntilTableCellPopped(){this.popUntilPopped(HY,Ce.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(VY,Ce.HTML)}clearBackToTableBodyContext(){this.clearBackTo(UY,Ce.HTML)}clearBackToTableRowContext(){this.clearBackTo(BY,Ce.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===_.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===_.HTML}hasInDynamicScope(e,n){for(let r=this.stackTop;r>=0;r--){const s=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case Ce.HTML:{if(s===e)return!0;if(n.has(s))return!1;break}case Ce.SVG:{if(Vw.has(s))return!1;break}case Ce.MATHML:{if(Uw.has(s))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,i0)}hasInListItemScope(e){return this.hasInDynamicScope(e,MY)}hasInButtonScope(e){return this.hasInDynamicScope(e,PY)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case Ce.HTML:{if(zE.has(n))return!0;if(i0.has(n))return!1;break}case Ce.SVG:{if(Vw.has(n))return!1;break}case Ce.MATHML:{if(Uw.has(n))return!1;break}}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===Ce.HTML)switch(this.tagIDs[n]){case e:return!0;case _.TABLE:case _.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===Ce.HTML)switch(this.tagIDs[e]){case _.TBODY:case _.THEAD:case _.TFOOT:return!0;case _.TABLE:case _.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===Ce.HTML)switch(this.tagIDs[n]){case e:return!0;case _.OPTION:case _.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&n3.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&Bw.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&Bw.has(this.currentTagId);)this.pop()}}const Py=3;var ws;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(ws||(ws={}));const Hw={type:ws.Marker};class zY{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const r=[],s=n.length,o=this.treeAdapter.getTagName(e),u=this.treeAdapter.getNamespaceURI(e);for(let c=0;c<this.entries.length;c++){const f=this.entries[c];if(f.type===ws.Marker)break;const{element:d}=f;if(this.treeAdapter.getTagName(d)===o&&this.treeAdapter.getNamespaceURI(d)===u){const p=this.treeAdapter.getAttrList(d);p.length===s&&r.push({idx:c,attrs:p})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<Py)return;const n=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,n);if(r.length<Py)return;const s=new Map(n.map(u=>[u.name,u.value]));let o=0;for(let u=0;u<r.length;u++){const c=r[u];c.attrs.every(f=>s.get(f.name)===f.value)&&(o+=1,o>=Py&&this.entries.splice(c.idx,1))}}insertMarker(){this.entries.unshift(Hw)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:ws.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:ws.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(Hw);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const n=this.entries.find(r=>r.type===ws.Marker||this.treeAdapter.getTagName(r.element)===e);return n&&n.type===ws.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===ws.Element&&n.element===e)}}const Ya={createDocument(){return{nodeName:"#document",mode:Fi.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,r){const s=t.childNodes.find(o=>o.nodeName==="#documentType");if(s)s.name=e,s.publicId=n,s.systemId=r;else{const o={nodeName:"#documentType",name:e,publicId:n,systemId:r,parentNode:null};Ya.appendChild(t,o)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(Ya.isTextNode(n)){n.value+=e;return}}Ya.appendChild(t,Ya.createTextNode(e))},insertTextBefore(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&Ya.isTextNode(r)?r.value+=e:Ya.insertBefore(t,Ya.createTextNode(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)n.has(e[r].name)||t.attrs.push(e[r])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},r3="html",jY="about:legacy-compat",qY="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",i3=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],YY=[...i3,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],GY=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),s3=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],$Y=[...s3,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Fw(t,e){return e.some(n=>t.startsWith(n))}function KY(t){return t.name===r3&&t.publicId===null&&(t.systemId===null||t.systemId===jY)}function XY(t){if(t.name!==r3)return Fi.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===qY)return Fi.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),GY.has(n))return Fi.QUIRKS;let r=e===null?YY:i3;if(Fw(n,r))return Fi.QUIRKS;if(r=e===null?s3:$Y,Fw(n,r))return Fi.LIMITED_QUIRKS}return Fi.NO_QUIRKS}const zw={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},QY="definitionurl",WY="definitionURL",ZY=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),JY=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ce.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ce.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ce.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ce.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ce.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ce.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ce.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ce.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ce.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ce.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ce.XMLNS}]]),eG=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),tG=new Set([_.B,_.BIG,_.BLOCKQUOTE,_.BODY,_.BR,_.CENTER,_.CODE,_.DD,_.DIV,_.DL,_.DT,_.EM,_.EMBED,_.H1,_.H2,_.H3,_.H4,_.H5,_.H6,_.HEAD,_.HR,_.I,_.IMG,_.LI,_.LISTING,_.MENU,_.META,_.NOBR,_.OL,_.P,_.PRE,_.RUBY,_.S,_.SMALL,_.SPAN,_.STRONG,_.STRIKE,_.SUB,_.SUP,_.TABLE,_.TT,_.U,_.UL,_.VAR]);function nG(t){const e=t.tagID;return e===_.FONT&&t.attrs.some(({name:r})=>r===tu.COLOR||r===tu.SIZE||r===tu.FACE)||tG.has(e)}function a3(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===QY){t.attrs[e].name=WY;break}}function o3(t){for(let e=0;e<t.attrs.length;e++){const n=ZY.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function C1(t){for(let e=0;e<t.attrs.length;e++){const n=JY.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function rG(t){const e=eG.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=Jl(t.tagName))}function iG(t,e){return e===Ce.MATHML&&(t===_.MI||t===_.MO||t===_.MN||t===_.MS||t===_.MTEXT)}function sG(t,e,n){if(e===Ce.MATHML&&t===_.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===tu.ENCODING){const s=n[r].value.toLowerCase();return s===zw.TEXT_HTML||s===zw.APPLICATION_XML}}return e===Ce.SVG&&(t===_.FOREIGN_OBJECT||t===_.DESC||t===_.TITLE)}function aG(t,e,n,r){return(!r||r===Ce.HTML)&&sG(t,e,n)||(!r||r===Ce.MATHML)&&iG(t,e)}const oG="hidden",uG=8,lG=3;var W;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(W||(W={}));const cG={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},u3=new Set([_.TABLE,_.TBODY,_.TFOOT,_.THEAD,_.TR]),jw={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Ya,onParseError:null};class qw{constructor(e,n,r=null,s=null){this.fragmentContext=r,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=W.INITIAL,this.originalInsertionMode=W.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...jw,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new LY(this.options,this),this.activeFormattingElements=new zY(this.treeAdapter),this.fragmentContextID=r?Jl(this.treeAdapter.getTagName(r)):_.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new FY(this.document,this.treeAdapter,this)}static parse(e,n){const r=new this(n);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,n){const r={...jw,...n};e??(e=r.treeAdapter.createElement(ce.TEMPLATE,Ce.HTML,[]));const s=r.treeAdapter.createElement("documentmock",Ce.HTML,[]),o=new this(r,s,e);return o.fragmentContextID===_.TEMPLATE&&o.tmplInsertionModeStack.unshift(W.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,r){var s;if(!this.onParseError)return;const o=(s=e.location)!==null&&s!==void 0?s:cG,u={code:n,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:r?o.startLine:o.endLine,endCol:r?o.startCol:o.endCol,endOffset:r?o.startOffset:o.endOffset};this.onParseError(u)}onItemPush(e,n,r){var s,o;(o=(s=this.treeAdapter).onItemPush)===null||o===void 0||o.call(s,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var r,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(s=(r=this.treeAdapter).onItemPop)===null||s===void 0||s.call(r,e,this.openElements.current),n){let o,u;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,u=this.fragmentContextID):{current:o,currentTagId:u}=this.openElements,this._setContextModes(o,u)}}_setContextModes(e,n){const r=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===Ce.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&e!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,Ce.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=W.TEXT}switchToPlaintextParsing(){this.insertionMode=W.TEXT,this.originalInsertionMode=W.IN_BODY,this.tokenizer.state=Nn.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===ce.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ce.HTML))switch(this.fragmentContextID){case _.TITLE:case _.TEXTAREA:{this.tokenizer.state=Nn.RCDATA;break}case _.STYLE:case _.XMP:case _.IFRAME:case _.NOEMBED:case _.NOFRAMES:case _.NOSCRIPT:{this.tokenizer.state=Nn.RAWTEXT;break}case _.SCRIPT:{this.tokenizer.state=Nn.SCRIPT_DATA;break}case _.PLAINTEXT:{this.tokenizer.state=Nn.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",s=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,s),e.location){const u=this.treeAdapter.getChildNodes(this.document).find(c=>this.treeAdapter.isDocumentTypeNode(c));u&&this.treeAdapter.setNodeSourceCodeLocation(u,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,n){const r=this.treeAdapter.createElement(e,Ce.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,Ce.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(ce.HTML,Ce.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,_.HTML)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,e.chars,r):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const s=this.treeAdapter.getChildNodes(n),o=r?s.lastIndexOf(r):s.length,u=s[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(u)){const{endLine:f,endCol:d,endOffset:p}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(u,{endLine:f,endCol:d,endOffset:p})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(u,e.location)}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const r=n.location,s=this.treeAdapter.getTagName(e),o=n.type===mt.END_TAG&&s===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,o)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,e.tagID===_.SVG&&this.treeAdapter.getTagName(n)===ce.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Ce.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===_.MGLYPH||e.tagID===_.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,Ce.HTML)}_processToken(e){switch(e.type){case mt.CHARACTER:{this.onCharacter(e);break}case mt.NULL_CHARACTER:{this.onNullCharacter(e);break}case mt.COMMENT:{this.onComment(e);break}case mt.DOCTYPE:{this.onDoctype(e);break}case mt.START_TAG:{this._processStartTag(e);break}case mt.END_TAG:{this.onEndTag(e);break}case mt.EOF:{this.onEof(e);break}case mt.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,r){const s=this.treeAdapter.getNamespaceURI(n),o=this.treeAdapter.getAttrList(n);return aG(e,s,o,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(s=>s.type===ws.Marker||this.openElements.contains(s.element)),r=n===-1?e-1:n-1;for(let s=r;s>=0;s--){const o=this.activeFormattingElements.entries[s];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=W.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(_.P),this.openElements.popUntilTagNamePopped(_.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case _.TR:{this.insertionMode=W.IN_ROW;return}case _.TBODY:case _.THEAD:case _.TFOOT:{this.insertionMode=W.IN_TABLE_BODY;return}case _.CAPTION:{this.insertionMode=W.IN_CAPTION;return}case _.COLGROUP:{this.insertionMode=W.IN_COLUMN_GROUP;return}case _.TABLE:{this.insertionMode=W.IN_TABLE;return}case _.BODY:{this.insertionMode=W.IN_BODY;return}case _.FRAMESET:{this.insertionMode=W.IN_FRAMESET;return}case _.SELECT:{this._resetInsertionModeForSelect(e);return}case _.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case _.HTML:{this.insertionMode=this.headElement?W.AFTER_HEAD:W.BEFORE_HEAD;return}case _.TD:case _.TH:{if(e>0){this.insertionMode=W.IN_CELL;return}break}case _.HEAD:{if(e>0){this.insertionMode=W.IN_HEAD;return}break}}this.insertionMode=W.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===_.TEMPLATE)break;if(r===_.TABLE){this.insertionMode=W.IN_SELECT_IN_TABLE;return}}this.insertionMode=W.IN_SELECT}_isElementCausesFosterParenting(e){return u3.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case _.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Ce.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case _.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const r=this.treeAdapter.getNamespaceURI(e);return RY[r].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){H$(this,e);return}switch(this.insertionMode){case W.INITIAL:{oh(this,e);break}case W.BEFORE_HTML:{Ch(this,e);break}case W.BEFORE_HEAD:{Nh(this,e);break}case W.IN_HEAD:{Rh(this,e);break}case W.IN_HEAD_NO_SCRIPT:{Dh(this,e);break}case W.AFTER_HEAD:{Oh(this,e);break}case W.IN_BODY:case W.IN_CAPTION:case W.IN_CELL:case W.IN_TEMPLATE:{c3(this,e);break}case W.TEXT:case W.IN_SELECT:case W.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case W.IN_TABLE:case W.IN_TABLE_BODY:case W.IN_ROW:{By(this,e);break}case W.IN_TABLE_TEXT:{g3(this,e);break}case W.IN_COLUMN_GROUP:{s0(this,e);break}case W.AFTER_BODY:{a0(this,e);break}case W.AFTER_AFTER_BODY:{Sm(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){V$(this,e);return}switch(this.insertionMode){case W.INITIAL:{oh(this,e);break}case W.BEFORE_HTML:{Ch(this,e);break}case W.BEFORE_HEAD:{Nh(this,e);break}case W.IN_HEAD:{Rh(this,e);break}case W.IN_HEAD_NO_SCRIPT:{Dh(this,e);break}case W.AFTER_HEAD:{Oh(this,e);break}case W.TEXT:{this._insertCharacters(e);break}case W.IN_TABLE:case W.IN_TABLE_BODY:case W.IN_ROW:{By(this,e);break}case W.IN_COLUMN_GROUP:{s0(this,e);break}case W.AFTER_BODY:{a0(this,e);break}case W.AFTER_AFTER_BODY:{Sm(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){jE(this,e);return}switch(this.insertionMode){case W.INITIAL:case W.BEFORE_HTML:case W.BEFORE_HEAD:case W.IN_HEAD:case W.IN_HEAD_NO_SCRIPT:case W.AFTER_HEAD:case W.IN_BODY:case W.IN_TABLE:case W.IN_CAPTION:case W.IN_COLUMN_GROUP:case W.IN_TABLE_BODY:case W.IN_ROW:case W.IN_CELL:case W.IN_SELECT:case W.IN_SELECT_IN_TABLE:case W.IN_TEMPLATE:case W.IN_FRAMESET:case W.AFTER_FRAMESET:{jE(this,e);break}case W.IN_TABLE_TEXT:{uh(this,e);break}case W.AFTER_BODY:{yG(this,e);break}case W.AFTER_AFTER_BODY:case W.AFTER_AFTER_FRAMESET:{EG(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case W.INITIAL:{_G(this,e);break}case W.BEFORE_HEAD:case W.IN_HEAD:case W.IN_HEAD_NO_SCRIPT:case W.AFTER_HEAD:{this._err(e,Ee.misplacedDoctype);break}case W.IN_TABLE_TEXT:{uh(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,Ee.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?F$(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case W.INITIAL:{oh(this,e);break}case W.BEFORE_HTML:{TG(this,e);break}case W.BEFORE_HEAD:{vG(this,e);break}case W.IN_HEAD:{as(this,e);break}case W.IN_HEAD_NO_SCRIPT:{wG(this,e);break}case W.AFTER_HEAD:{IG(this,e);break}case W.IN_BODY:{Nr(this,e);break}case W.IN_TABLE:{Vl(this,e);break}case W.IN_TABLE_TEXT:{uh(this,e);break}case W.IN_CAPTION:{S$(this,e);break}case W.IN_COLUMN_GROUP:{D1(this,e);break}case W.IN_TABLE_BODY:{q0(this,e);break}case W.IN_ROW:{Y0(this,e);break}case W.IN_CELL:{x$(this,e);break}case W.IN_SELECT:{_3(this,e);break}case W.IN_SELECT_IN_TABLE:{C$(this,e);break}case W.IN_TEMPLATE:{R$(this,e);break}case W.AFTER_BODY:{O$(this,e);break}case W.IN_FRAMESET:{k$(this,e);break}case W.AFTER_FRAMESET:{M$(this,e);break}case W.AFTER_AFTER_BODY:{B$(this,e);break}case W.AFTER_AFTER_FRAMESET:{U$(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?z$(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case W.INITIAL:{oh(this,e);break}case W.BEFORE_HTML:{bG(this,e);break}case W.BEFORE_HEAD:{SG(this,e);break}case W.IN_HEAD:{AG(this,e);break}case W.IN_HEAD_NO_SCRIPT:{xG(this,e);break}case W.AFTER_HEAD:{CG(this,e);break}case W.IN_BODY:{j0(this,e);break}case W.TEXT:{d$(this,e);break}case W.IN_TABLE:{ef(this,e);break}case W.IN_TABLE_TEXT:{uh(this,e);break}case W.IN_CAPTION:{A$(this,e);break}case W.IN_COLUMN_GROUP:{w$(this,e);break}case W.IN_TABLE_BODY:{qE(this,e);break}case W.IN_ROW:{E3(this,e);break}case W.IN_CELL:{I$(this,e);break}case W.IN_SELECT:{T3(this,e);break}case W.IN_SELECT_IN_TABLE:{N$(this,e);break}case W.IN_TEMPLATE:{D$(this,e);break}case W.AFTER_BODY:{v3(this,e);break}case W.IN_FRAMESET:{L$(this,e);break}case W.AFTER_FRAMESET:{P$(this,e);break}case W.AFTER_AFTER_BODY:{Sm(this,e);break}}}onEof(e){switch(this.insertionMode){case W.INITIAL:{oh(this,e);break}case W.BEFORE_HTML:{Ch(this,e);break}case W.BEFORE_HEAD:{Nh(this,e);break}case W.IN_HEAD:{Rh(this,e);break}case W.IN_HEAD_NO_SCRIPT:{Dh(this,e);break}case W.AFTER_HEAD:{Oh(this,e);break}case W.IN_BODY:case W.IN_TABLE:case W.IN_CAPTION:case W.IN_COLUMN_GROUP:case W.IN_TABLE_BODY:case W.IN_ROW:case W.IN_CELL:case W.IN_SELECT:case W.IN_SELECT_IN_TABLE:{m3(this,e);break}case W.TEXT:{m$(this,e);break}case W.IN_TABLE_TEXT:{uh(this,e);break}case W.IN_TEMPLATE:{b3(this,e);break}case W.AFTER_BODY:case W.IN_FRAMESET:case W.AFTER_FRAMESET:case W.AFTER_AFTER_BODY:case W.AFTER_AFTER_FRAMESET:{R1(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===G.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case W.IN_HEAD:case W.IN_HEAD_NO_SCRIPT:case W.AFTER_HEAD:case W.TEXT:case W.IN_COLUMN_GROUP:case W.IN_SELECT:case W.IN_SELECT_IN_TABLE:case W.IN_FRAMESET:case W.AFTER_FRAMESET:{this._insertCharacters(e);break}case W.IN_BODY:case W.IN_CAPTION:case W.IN_CELL:case W.IN_TEMPLATE:case W.AFTER_BODY:case W.AFTER_AFTER_BODY:case W.AFTER_AFTER_FRAMESET:{l3(this,e);break}case W.IN_TABLE:case W.IN_TABLE_BODY:case W.IN_ROW:{By(this,e);break}case W.IN_TABLE_TEXT:{p3(this,e);break}}}}function hG(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):d3(t,e),n}function fG(t,e){let n=null,r=t.openElements.stackTop;for(;r>=0;r--){const s=t.openElements.items[r];if(s===e.element)break;t._isSpecialElement(s,t.openElements.tagIDs[r])&&(n=s)}return n||(t.openElements.shortenToLength(Math.max(r,0)),t.activeFormattingElements.removeEntry(e)),n}function dG(t,e,n){let r=e,s=t.openElements.getCommonAncestor(e);for(let o=0,u=s;u!==n;o++,u=s){s=t.openElements.getCommonAncestor(u);const c=t.activeFormattingElements.getElementEntry(u),f=c&&o>=lG;!c||f?(f&&t.activeFormattingElements.removeEntry(c),t.openElements.remove(u)):(u=mG(t,c),r===e&&(t.activeFormattingElements.bookmark=c),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(u,r),r=u)}return r}function mG(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function pG(t,e,n){const r=t.treeAdapter.getTagName(e),s=Jl(r);if(t._isElementCausesFosterParenting(s))t._fosterParentElement(n);else{const o=t.treeAdapter.getNamespaceURI(e);s===_.TEMPLATE&&o===Ce.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function gG(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),{token:s}=n,o=t.treeAdapter.createElement(s.tagName,r,s.attrs);t._adoptNodes(e,o),t.treeAdapter.appendChild(e,o),t.activeFormattingElements.insertElementAfterBookmark(o,s),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,o,s.tagID)}function N1(t,e){for(let n=0;n<uG;n++){const r=hG(t,e);if(!r)break;const s=fG(t,r);if(!s)break;t.activeFormattingElements.bookmark=r;const o=dG(t,s,r.element),u=t.openElements.getCommonAncestor(r.element);t.treeAdapter.detachNode(o),u&&pG(t,u,o),gG(t,s,r)}}function jE(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function yG(t,e){t._appendCommentNode(e,t.openElements.items[0])}function EG(t,e){t._appendCommentNode(e,t.document)}function R1(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let r=t.openElements.stackTop;r>=n;r--)t._setEndLocation(t.openElements.items[r],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const r=t.openElements.items[0],s=t.treeAdapter.getNodeSourceCodeLocation(r);if(s&&!s.endTag&&(t._setEndLocation(r,e),t.openElements.stackTop>=1)){const o=t.openElements.items[1],u=t.treeAdapter.getNodeSourceCodeLocation(o);u&&!u.endTag&&t._setEndLocation(o,e)}}}}function _G(t,e){t._setDocumentType(e);const n=e.forceQuirks?Fi.QUIRKS:XY(e);KY(e)||t._err(e,Ee.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=W.BEFORE_HTML}function oh(t,e){t._err(e,Ee.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,Fi.QUIRKS),t.insertionMode=W.BEFORE_HTML,t._processToken(e)}function TG(t,e){e.tagID===_.HTML?(t._insertElement(e,Ce.HTML),t.insertionMode=W.BEFORE_HEAD):Ch(t,e)}function bG(t,e){const n=e.tagID;(n===_.HTML||n===_.HEAD||n===_.BODY||n===_.BR)&&Ch(t,e)}function Ch(t,e){t._insertFakeRootElement(),t.insertionMode=W.BEFORE_HEAD,t._processToken(e)}function vG(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.HEAD:{t._insertElement(e,Ce.HTML),t.headElement=t.openElements.current,t.insertionMode=W.IN_HEAD;break}default:Nh(t,e)}}function SG(t,e){const n=e.tagID;n===_.HEAD||n===_.BODY||n===_.HTML||n===_.BR?Nh(t,e):t._err(e,Ee.endTagWithoutMatchingOpenElement)}function Nh(t,e){t._insertFakeElement(ce.HEAD,_.HEAD),t.headElement=t.openElements.current,t.insertionMode=W.IN_HEAD,t._processToken(e)}function as(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.BASE:case _.BASEFONT:case _.BGSOUND:case _.LINK:case _.META:{t._appendElement(e,Ce.HTML),e.ackSelfClosing=!0;break}case _.TITLE:{t._switchToTextParsing(e,Nn.RCDATA);break}case _.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,Nn.RAWTEXT):(t._insertElement(e,Ce.HTML),t.insertionMode=W.IN_HEAD_NO_SCRIPT);break}case _.NOFRAMES:case _.STYLE:{t._switchToTextParsing(e,Nn.RAWTEXT);break}case _.SCRIPT:{t._switchToTextParsing(e,Nn.SCRIPT_DATA);break}case _.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=W.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(W.IN_TEMPLATE);break}case _.HEAD:{t._err(e,Ee.misplacedStartTagForHeadElement);break}default:Rh(t,e)}}function AG(t,e){switch(e.tagID){case _.HEAD:{t.openElements.pop(),t.insertionMode=W.AFTER_HEAD;break}case _.BODY:case _.BR:case _.HTML:{Rh(t,e);break}case _.TEMPLATE:{yu(t,e);break}default:t._err(e,Ee.endTagWithoutMatchingOpenElement)}}function yu(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==_.TEMPLATE&&t._err(e,Ee.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(_.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,Ee.endTagWithoutMatchingOpenElement)}function Rh(t,e){t.openElements.pop(),t.insertionMode=W.AFTER_HEAD,t._processToken(e)}function wG(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.BASEFONT:case _.BGSOUND:case _.HEAD:case _.LINK:case _.META:case _.NOFRAMES:case _.STYLE:{as(t,e);break}case _.NOSCRIPT:{t._err(e,Ee.nestedNoscriptInHead);break}default:Dh(t,e)}}function xG(t,e){switch(e.tagID){case _.NOSCRIPT:{t.openElements.pop(),t.insertionMode=W.IN_HEAD;break}case _.BR:{Dh(t,e);break}default:t._err(e,Ee.endTagWithoutMatchingOpenElement)}}function Dh(t,e){const n=e.type===mt.EOF?Ee.openElementsLeftAfterEof:Ee.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=W.IN_HEAD,t._processToken(e)}function IG(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.BODY:{t._insertElement(e,Ce.HTML),t.framesetOk=!1,t.insertionMode=W.IN_BODY;break}case _.FRAMESET:{t._insertElement(e,Ce.HTML),t.insertionMode=W.IN_FRAMESET;break}case _.BASE:case _.BASEFONT:case _.BGSOUND:case _.LINK:case _.META:case _.NOFRAMES:case _.SCRIPT:case _.STYLE:case _.TEMPLATE:case _.TITLE:{t._err(e,Ee.abandonedHeadElementChild),t.openElements.push(t.headElement,_.HEAD),as(t,e),t.openElements.remove(t.headElement);break}case _.HEAD:{t._err(e,Ee.misplacedStartTagForHeadElement);break}default:Oh(t,e)}}function CG(t,e){switch(e.tagID){case _.BODY:case _.HTML:case _.BR:{Oh(t,e);break}case _.TEMPLATE:{yu(t,e);break}default:t._err(e,Ee.endTagWithoutMatchingOpenElement)}}function Oh(t,e){t._insertFakeElement(ce.BODY,_.BODY),t.insertionMode=W.IN_BODY,z0(t,e)}function z0(t,e){switch(e.type){case mt.CHARACTER:{c3(t,e);break}case mt.WHITESPACE_CHARACTER:{l3(t,e);break}case mt.COMMENT:{jE(t,e);break}case mt.START_TAG:{Nr(t,e);break}case mt.END_TAG:{j0(t,e);break}case mt.EOF:{m3(t,e);break}}}function l3(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function c3(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function NG(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function RG(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function DG(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,Ce.HTML),t.insertionMode=W.IN_FRAMESET)}function OG(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ce.HTML)}function kG(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t.openElements.currentTagId!==void 0&&zE.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,Ce.HTML)}function LG(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ce.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function MG(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ce.HTML),n||(t.formElement=t.openElements.current))}function PG(t,e){t.framesetOk=!1;const n=e.tagID;for(let r=t.openElements.stackTop;r>=0;r--){const s=t.openElements.tagIDs[r];if(n===_.LI&&s===_.LI||(n===_.DD||n===_.DT)&&(s===_.DD||s===_.DT)){t.openElements.generateImpliedEndTagsWithExclusion(s),t.openElements.popUntilTagNamePopped(s);break}if(s!==_.ADDRESS&&s!==_.DIV&&s!==_.P&&t._isSpecialElement(t.openElements.items[r],s))break}t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ce.HTML)}function BG(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ce.HTML),t.tokenizer.state=Nn.PLAINTEXT}function UG(t,e){t.openElements.hasInScope(_.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,Ce.HTML),t.framesetOk=!1}function VG(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(ce.A);n&&(N1(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,Ce.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function HG(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ce.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function FG(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(_.NOBR)&&(N1(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,Ce.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function zG(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ce.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function jG(t,e){t.treeAdapter.getDocumentMode(t.document)!==Fi.QUIRKS&&t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ce.HTML),t.framesetOk=!1,t.insertionMode=W.IN_TABLE}function h3(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Ce.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function f3(t){const e=e3(t,tu.TYPE);return e!=null&&e.toLowerCase()===oG}function qG(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Ce.HTML),f3(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function YG(t,e){t._appendElement(e,Ce.HTML),e.ackSelfClosing=!0}function GG(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._appendElement(e,Ce.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function $G(t,e){e.tagName=ce.IMG,e.tagID=_.IMG,h3(t,e)}function KG(t,e){t._insertElement(e,Ce.HTML),t.skipNextNewLine=!0,t.tokenizer.state=Nn.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=W.TEXT}function XG(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,Nn.RAWTEXT)}function QG(t,e){t.framesetOk=!1,t._switchToTextParsing(e,Nn.RAWTEXT)}function Yw(t,e){t._switchToTextParsing(e,Nn.RAWTEXT)}function WG(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ce.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===W.IN_TABLE||t.insertionMode===W.IN_CAPTION||t.insertionMode===W.IN_TABLE_BODY||t.insertionMode===W.IN_ROW||t.insertionMode===W.IN_CELL?W.IN_SELECT_IN_TABLE:W.IN_SELECT}function ZG(t,e){t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,Ce.HTML)}function JG(t,e){t.openElements.hasInScope(_.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,Ce.HTML)}function e$(t,e){t.openElements.hasInScope(_.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(_.RTC),t._insertElement(e,Ce.HTML)}function t$(t,e){t._reconstructActiveFormattingElements(),a3(e),C1(e),e.selfClosing?t._appendElement(e,Ce.MATHML):t._insertElement(e,Ce.MATHML),e.ackSelfClosing=!0}function n$(t,e){t._reconstructActiveFormattingElements(),o3(e),C1(e),e.selfClosing?t._appendElement(e,Ce.SVG):t._insertElement(e,Ce.SVG),e.ackSelfClosing=!0}function Gw(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ce.HTML)}function Nr(t,e){switch(e.tagID){case _.I:case _.S:case _.B:case _.U:case _.EM:case _.TT:case _.BIG:case _.CODE:case _.FONT:case _.SMALL:case _.STRIKE:case _.STRONG:{HG(t,e);break}case _.A:{VG(t,e);break}case _.H1:case _.H2:case _.H3:case _.H4:case _.H5:case _.H6:{kG(t,e);break}case _.P:case _.DL:case _.OL:case _.UL:case _.DIV:case _.DIR:case _.NAV:case _.MAIN:case _.MENU:case _.ASIDE:case _.CENTER:case _.FIGURE:case _.FOOTER:case _.HEADER:case _.HGROUP:case _.DIALOG:case _.DETAILS:case _.ADDRESS:case _.ARTICLE:case _.SEARCH:case _.SECTION:case _.SUMMARY:case _.FIELDSET:case _.BLOCKQUOTE:case _.FIGCAPTION:{OG(t,e);break}case _.LI:case _.DD:case _.DT:{PG(t,e);break}case _.BR:case _.IMG:case _.WBR:case _.AREA:case _.EMBED:case _.KEYGEN:{h3(t,e);break}case _.HR:{GG(t,e);break}case _.RB:case _.RTC:{JG(t,e);break}case _.RT:case _.RP:{e$(t,e);break}case _.PRE:case _.LISTING:{LG(t,e);break}case _.XMP:{XG(t,e);break}case _.SVG:{n$(t,e);break}case _.HTML:{NG(t,e);break}case _.BASE:case _.LINK:case _.META:case _.STYLE:case _.TITLE:case _.SCRIPT:case _.BGSOUND:case _.BASEFONT:case _.TEMPLATE:{as(t,e);break}case _.BODY:{RG(t,e);break}case _.FORM:{MG(t,e);break}case _.NOBR:{FG(t,e);break}case _.MATH:{t$(t,e);break}case _.TABLE:{jG(t,e);break}case _.INPUT:{qG(t,e);break}case _.PARAM:case _.TRACK:case _.SOURCE:{YG(t,e);break}case _.IMAGE:{$G(t,e);break}case _.BUTTON:{UG(t,e);break}case _.APPLET:case _.OBJECT:case _.MARQUEE:{zG(t,e);break}case _.IFRAME:{QG(t,e);break}case _.SELECT:{WG(t,e);break}case _.OPTION:case _.OPTGROUP:{ZG(t,e);break}case _.NOEMBED:case _.NOFRAMES:{Yw(t,e);break}case _.FRAMESET:{DG(t,e);break}case _.TEXTAREA:{KG(t,e);break}case _.NOSCRIPT:{t.options.scriptingEnabled?Yw(t,e):Gw(t,e);break}case _.PLAINTEXT:{BG(t,e);break}case _.COL:case _.TH:case _.TD:case _.TR:case _.HEAD:case _.FRAME:case _.TBODY:case _.TFOOT:case _.THEAD:case _.CAPTION:case _.COLGROUP:break;default:Gw(t,e)}}function r$(t,e){if(t.openElements.hasInScope(_.BODY)&&(t.insertionMode=W.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function i$(t,e){t.openElements.hasInScope(_.BODY)&&(t.insertionMode=W.AFTER_BODY,v3(t,e))}function s$(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function a$(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(_.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(_.FORM):n&&t.openElements.remove(n))}function o$(t){t.openElements.hasInButtonScope(_.P)||t._insertFakeElement(ce.P,_.P),t._closePElement()}function u$(t){t.openElements.hasInListItemScope(_.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(_.LI),t.openElements.popUntilTagNamePopped(_.LI))}function l$(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function c$(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function h$(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function f$(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(ce.BR,_.BR),t.openElements.pop(),t.framesetOk=!1}function d3(t,e){const n=e.tagName,r=e.tagID;for(let s=t.openElements.stackTop;s>0;s--){const o=t.openElements.items[s],u=t.openElements.tagIDs[s];if(r===u&&(r!==_.UNKNOWN||t.treeAdapter.getTagName(o)===n)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.stackTop>=s&&t.openElements.shortenToLength(s);break}if(t._isSpecialElement(o,u))break}}function j0(t,e){switch(e.tagID){case _.A:case _.B:case _.I:case _.S:case _.U:case _.EM:case _.TT:case _.BIG:case _.CODE:case _.FONT:case _.NOBR:case _.SMALL:case _.STRIKE:case _.STRONG:{N1(t,e);break}case _.P:{o$(t);break}case _.DL:case _.UL:case _.OL:case _.DIR:case _.DIV:case _.NAV:case _.PRE:case _.MAIN:case _.MENU:case _.ASIDE:case _.BUTTON:case _.CENTER:case _.FIGURE:case _.FOOTER:case _.HEADER:case _.HGROUP:case _.DIALOG:case _.ADDRESS:case _.ARTICLE:case _.DETAILS:case _.SEARCH:case _.SECTION:case _.SUMMARY:case _.LISTING:case _.FIELDSET:case _.BLOCKQUOTE:case _.FIGCAPTION:{s$(t,e);break}case _.LI:{u$(t);break}case _.DD:case _.DT:{l$(t,e);break}case _.H1:case _.H2:case _.H3:case _.H4:case _.H5:case _.H6:{c$(t);break}case _.BR:{f$(t);break}case _.BODY:{r$(t,e);break}case _.HTML:{i$(t,e);break}case _.FORM:{a$(t);break}case _.APPLET:case _.OBJECT:case _.MARQUEE:{h$(t,e);break}case _.TEMPLATE:{yu(t,e);break}default:d3(t,e)}}function m3(t,e){t.tmplInsertionModeStack.length>0?b3(t,e):R1(t,e)}function d$(t,e){var n;e.tagID===_.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function m$(t,e){t._err(e,Ee.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function By(t,e){if(t.openElements.currentTagId!==void 0&&u3.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=W.IN_TABLE_TEXT,e.type){case mt.CHARACTER:{g3(t,e);break}case mt.WHITESPACE_CHARACTER:{p3(t,e);break}}else Sf(t,e)}function p$(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,Ce.HTML),t.insertionMode=W.IN_CAPTION}function g$(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Ce.HTML),t.insertionMode=W.IN_COLUMN_GROUP}function y$(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(ce.COLGROUP,_.COLGROUP),t.insertionMode=W.IN_COLUMN_GROUP,D1(t,e)}function E$(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Ce.HTML),t.insertionMode=W.IN_TABLE_BODY}function _$(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(ce.TBODY,_.TBODY),t.insertionMode=W.IN_TABLE_BODY,q0(t,e)}function T$(t,e){t.openElements.hasInTableScope(_.TABLE)&&(t.openElements.popUntilTagNamePopped(_.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function b$(t,e){f3(e)?t._appendElement(e,Ce.HTML):Sf(t,e),e.ackSelfClosing=!0}function v$(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,Ce.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function Vl(t,e){switch(e.tagID){case _.TD:case _.TH:case _.TR:{_$(t,e);break}case _.STYLE:case _.SCRIPT:case _.TEMPLATE:{as(t,e);break}case _.COL:{y$(t,e);break}case _.FORM:{v$(t,e);break}case _.TABLE:{T$(t,e);break}case _.TBODY:case _.TFOOT:case _.THEAD:{E$(t,e);break}case _.INPUT:{b$(t,e);break}case _.CAPTION:{p$(t,e);break}case _.COLGROUP:{g$(t,e);break}default:Sf(t,e)}}function ef(t,e){switch(e.tagID){case _.TABLE:{t.openElements.hasInTableScope(_.TABLE)&&(t.openElements.popUntilTagNamePopped(_.TABLE),t._resetInsertionMode());break}case _.TEMPLATE:{yu(t,e);break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:case _.TBODY:case _.TD:case _.TFOOT:case _.TH:case _.THEAD:case _.TR:break;default:Sf(t,e)}}function Sf(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,z0(t,e),t.fosterParentingEnabled=n}function p3(t,e){t.pendingCharacterTokens.push(e)}function g3(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function uh(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)Sf(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const y3=new Set([_.CAPTION,_.COL,_.COLGROUP,_.TBODY,_.TD,_.TFOOT,_.TH,_.THEAD,_.TR]);function S$(t,e){const n=e.tagID;y3.has(n)?t.openElements.hasInTableScope(_.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=W.IN_TABLE,Vl(t,e)):Nr(t,e)}function A$(t,e){const n=e.tagID;switch(n){case _.CAPTION:case _.TABLE:{t.openElements.hasInTableScope(_.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=W.IN_TABLE,n===_.TABLE&&ef(t,e));break}case _.BODY:case _.COL:case _.COLGROUP:case _.HTML:case _.TBODY:case _.TD:case _.TFOOT:case _.TH:case _.THEAD:case _.TR:break;default:j0(t,e)}}function D1(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.COL:{t._appendElement(e,Ce.HTML),e.ackSelfClosing=!0;break}case _.TEMPLATE:{as(t,e);break}default:s0(t,e)}}function w$(t,e){switch(e.tagID){case _.COLGROUP:{t.openElements.currentTagId===_.COLGROUP&&(t.openElements.pop(),t.insertionMode=W.IN_TABLE);break}case _.TEMPLATE:{yu(t,e);break}case _.COL:break;default:s0(t,e)}}function s0(t,e){t.openElements.currentTagId===_.COLGROUP&&(t.openElements.pop(),t.insertionMode=W.IN_TABLE,t._processToken(e))}function q0(t,e){switch(e.tagID){case _.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,Ce.HTML),t.insertionMode=W.IN_ROW;break}case _.TH:case _.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(ce.TR,_.TR),t.insertionMode=W.IN_ROW,Y0(t,e);break}case _.CAPTION:case _.COL:case _.COLGROUP:case _.TBODY:case _.TFOOT:case _.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE,Vl(t,e));break}default:Vl(t,e)}}function qE(t,e){const n=e.tagID;switch(e.tagID){case _.TBODY:case _.TFOOT:case _.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE);break}case _.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE,ef(t,e));break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:case _.TD:case _.TH:case _.TR:break;default:ef(t,e)}}function Y0(t,e){switch(e.tagID){case _.TH:case _.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,Ce.HTML),t.insertionMode=W.IN_CELL,t.activeFormattingElements.insertMarker();break}case _.CAPTION:case _.COL:case _.COLGROUP:case _.TBODY:case _.TFOOT:case _.THEAD:case _.TR:{t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE_BODY,q0(t,e));break}default:Vl(t,e)}}function E3(t,e){switch(e.tagID){case _.TR:{t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE_BODY);break}case _.TABLE:{t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE_BODY,qE(t,e));break}case _.TBODY:case _.TFOOT:case _.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(_.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE_BODY,qE(t,e));break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:case _.TD:case _.TH:break;default:ef(t,e)}}function x$(t,e){const n=e.tagID;y3.has(n)?(t.openElements.hasInTableScope(_.TD)||t.openElements.hasInTableScope(_.TH))&&(t._closeTableCell(),Y0(t,e)):Nr(t,e)}function I$(t,e){const n=e.tagID;switch(n){case _.TD:case _.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=W.IN_ROW);break}case _.TABLE:case _.TBODY:case _.TFOOT:case _.THEAD:case _.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),E3(t,e));break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:break;default:j0(t,e)}}function _3(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.OPTION:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t._insertElement(e,Ce.HTML);break}case _.OPTGROUP:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t.openElements.currentTagId===_.OPTGROUP&&t.openElements.pop(),t._insertElement(e,Ce.HTML);break}case _.HR:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t.openElements.currentTagId===_.OPTGROUP&&t.openElements.pop(),t._appendElement(e,Ce.HTML),e.ackSelfClosing=!0;break}case _.INPUT:case _.KEYGEN:case _.TEXTAREA:case _.SELECT:{t.openElements.hasInSelectScope(_.SELECT)&&(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),e.tagID!==_.SELECT&&t._processStartTag(e));break}case _.SCRIPT:case _.TEMPLATE:{as(t,e);break}}}function T3(t,e){switch(e.tagID){case _.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===_.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===_.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===_.OPTGROUP&&t.openElements.pop();break}case _.OPTION:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop();break}case _.SELECT:{t.openElements.hasInSelectScope(_.SELECT)&&(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode());break}case _.TEMPLATE:{yu(t,e);break}}}function C$(t,e){const n=e.tagID;n===_.CAPTION||n===_.TABLE||n===_.TBODY||n===_.TFOOT||n===_.THEAD||n===_.TR||n===_.TD||n===_.TH?(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),t._processStartTag(e)):_3(t,e)}function N$(t,e){const n=e.tagID;n===_.CAPTION||n===_.TABLE||n===_.TBODY||n===_.TFOOT||n===_.THEAD||n===_.TR||n===_.TD||n===_.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),t.onEndTag(e)):T3(t,e)}function R$(t,e){switch(e.tagID){case _.BASE:case _.BASEFONT:case _.BGSOUND:case _.LINK:case _.META:case _.NOFRAMES:case _.SCRIPT:case _.STYLE:case _.TEMPLATE:case _.TITLE:{as(t,e);break}case _.CAPTION:case _.COLGROUP:case _.TBODY:case _.TFOOT:case _.THEAD:{t.tmplInsertionModeStack[0]=W.IN_TABLE,t.insertionMode=W.IN_TABLE,Vl(t,e);break}case _.COL:{t.tmplInsertionModeStack[0]=W.IN_COLUMN_GROUP,t.insertionMode=W.IN_COLUMN_GROUP,D1(t,e);break}case _.TR:{t.tmplInsertionModeStack[0]=W.IN_TABLE_BODY,t.insertionMode=W.IN_TABLE_BODY,q0(t,e);break}case _.TD:case _.TH:{t.tmplInsertionModeStack[0]=W.IN_ROW,t.insertionMode=W.IN_ROW,Y0(t,e);break}default:t.tmplInsertionModeStack[0]=W.IN_BODY,t.insertionMode=W.IN_BODY,Nr(t,e)}}function D$(t,e){e.tagID===_.TEMPLATE&&yu(t,e)}function b3(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(_.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):R1(t,e)}function O$(t,e){e.tagID===_.HTML?Nr(t,e):a0(t,e)}function v3(t,e){var n;if(e.tagID===_.HTML){if(t.fragmentContext||(t.insertionMode=W.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===_.HTML){t._setEndLocation(t.openElements.items[0],e);const r=t.openElements.items[1];r&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&t._setEndLocation(r,e)}}else a0(t,e)}function a0(t,e){t.insertionMode=W.IN_BODY,z0(t,e)}function k$(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.FRAMESET:{t._insertElement(e,Ce.HTML);break}case _.FRAME:{t._appendElement(e,Ce.HTML),e.ackSelfClosing=!0;break}case _.NOFRAMES:{as(t,e);break}}}function L$(t,e){e.tagID===_.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==_.FRAMESET&&(t.insertionMode=W.AFTER_FRAMESET))}function M$(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.NOFRAMES:{as(t,e);break}}}function P$(t,e){e.tagID===_.HTML&&(t.insertionMode=W.AFTER_AFTER_FRAMESET)}function B$(t,e){e.tagID===_.HTML?Nr(t,e):Sm(t,e)}function Sm(t,e){t.insertionMode=W.IN_BODY,z0(t,e)}function U$(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.NOFRAMES:{as(t,e);break}}}function V$(t,e){e.chars=mn,t._insertCharacters(e)}function H$(t,e){t._insertCharacters(e),t.framesetOk=!1}function S3(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==Ce.HTML&&t.openElements.currentTagId!==void 0&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function F$(t,e){if(nG(e))S3(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===Ce.MATHML?a3(e):r===Ce.SVG&&(rG(e),o3(e)),C1(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function z$(t,e){if(e.tagID===_.P||e.tagID===_.BR){S3(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===Ce.HTML){t._endTagOutsideForeignContent(e);break}const s=t.treeAdapter.getTagName(r);if(s.toLowerCase()===e.tagName){e.tagName=s,t.openElements.shortenToLength(n);break}}}ce.AREA,ce.BASE,ce.BASEFONT,ce.BGSOUND,ce.BR,ce.COL,ce.EMBED,ce.FRAME,ce.HR,ce.IMG,ce.INPUT,ce.KEYGEN,ce.LINK,ce.META,ce.PARAM,ce.SOURCE,ce.TRACK,ce.WBR;const j$=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,q$=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),$w={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function A3(t,e){const n=eK(t),r=XR("type",{handlers:{root:Y$,element:G$,text:$$,comment:x3,doctype:K$,raw:Q$},unknown:W$}),s={parser:n?new qw($w):qw.getFragmentParser(void 0,$w),handle(c){r(c,s)},stitches:!1,options:e||{}};r(t,s),ec(s,Bs());const o=n?s.parser.document:s.parser.getFragment(),u=Yq(o,{file:s.options.file});return s.stitches&&S1(u,"comment",function(c,f,d){const p=c;if(p.value.stitch&&d&&f!==void 0){const y=d.children;return y[f]=p.value.stitch,f}}),u.type==="root"&&u.children.length===1&&u.children[0].type===t.type?u.children[0]:u}function w3(t,e){let n=-1;if(t)for(;++n<t.length;)e.handle(t[n])}function Y$(t,e){w3(t.children,e)}function G$(t,e){Z$(t,e),w3(t.children,e),J$(t,e)}function $$(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const n={type:mt.CHARACTER,chars:t.value,location:Af(t)};ec(e,Bs(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function K$(t,e){const n={type:mt.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Af(t)};ec(e,Bs(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function X$(t,e){e.stitches=!0;const n=tK(t);if("children"in t&&"children"in n){const r=A3({type:"root",children:t.children},e.options);n.children=r.children}x3({type:"comment",value:{stitch:n}},e)}function x3(t,e){const n=t.value,r={type:mt.COMMENT,data:n,location:Af(t)};ec(e,Bs(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function Q$(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,I3(e,Bs(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(j$,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=e.parser.tokenizer._consume();e.parser.tokenizer._callState(n)}}function W$(t,e){const n=t;if(e.options.passThrough&&e.options.passThrough.includes(n.type))X$(n,e);else{let r="";throw q$.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function ec(t,e){I3(t,e);const n=t.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=t.parser.tokenizer.preprocessor.line,n.location.endCol=t.parser.tokenizer.preprocessor.col+1,n.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=Nn.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function I3(t,e){if(e&&e.offset!==void 0){const n={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=n}}function Z$(t,e){const n=t.tagName.toLowerCase();if(e.parser.tokenizer.state===Nn.PLAINTEXT)return;ec(e,Bs(t));const r=e.parser.openElements.current;let s="namespaceURI"in r?r.namespaceURI:Jo.html;s===Jo.html&&n==="svg"&&(s=Jo.svg);const o=aY({...t,children:[]},{space:s===Jo.svg?"svg":"html"}),u={type:mt.START_TAG,tagName:n,tagID:Jl(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in o?o.attrs:[],location:Af(t)};e.parser.currentToken=u,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=n}function J$(t,e){const n=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&mY.includes(n)||e.parser.tokenizer.state===Nn.PLAINTEXT)return;ec(e,U0(t));const r={type:mt.END_TAG,tagName:n,tagID:Jl(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Af(t)};e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken),n===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===Nn.RCDATA||e.parser.tokenizer.state===Nn.RAWTEXT||e.parser.tokenizer.state===Nn.SCRIPT_DATA)&&(e.parser.tokenizer.state=Nn.DATA)}function eK(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function Af(t){const e=Bs(t)||{line:void 0,column:void 0,offset:void 0},n=U0(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function tK(t){return"children"in t?Ul({...t,children:[]}):Ul(t)}function nK(t){return function(e,n){return A3(e,{...t,file:n})}}function rK({explanation:t,onClose:e,isVisible:n}){return n?Y.jsxs("div",{className:`explanation-sidebar bg-gray-900 dark:bg-gray-950 border-l border-gray-700 dark:border-gray-800 
                       h-full flex flex-col shadow-2xl`,children:[Y.jsxs("div",{className:"explanation-sidebar-header flex justify-between items-center p-4 border-b border-gray-700 dark:border-gray-800",children:[Y.jsx("h3",{className:"explanation-title text-lg font-semibold text-white dark:text-white flex items-center gap-2",children:" Explanation"}),Y.jsx("button",{className:`explanation-close-btn bg-transparent border-none text-gray-400 dark:text-gray-400 
                             hover:text-white dark:hover:text-white cursor-pointer text-xl p-1 rounded 
                             transition-colors duration-150 hover:bg-gray-700 dark:hover:bg-gray-800`,onClick:e,title:"Close explanation","aria-label":"Close explanation sidebar",children:""})]}),Y.jsx("div",{className:"explanation-content p-4 overflow-y-auto flex-1",children:t?Y.jsxs(Y.Fragment,{children:[Y.jsx("div",{className:"explanation-header mb-4",children:Y.jsx("h3",{className:"text-xl font-bold text-white dark:text-white leading-tight",children:t.title})}),Y.jsx("div",{className:`explanation-text prose prose-invert dark:prose-invert prose-gray max-w-none
                                      [&>h1]:text-white [&>h1]:text-2xl [&>h1]:font-bold [&>h1]:mb-4 [&>h1]:mt-6
                                      [&>h2]:text-white [&>h2]:text-xl [&>h2]:font-semibold [&>h2]:mb-3 [&>h2]:mt-5
                                      [&>h3]:text-white [&>h3]:text-lg [&>h3]:font-semibold [&>h3]:mb-2 [&>h3]:mt-4
                                      [&>h4]:text-gray-200 [&>h4]:text-base [&>h4]:font-medium [&>h4]:mb-2 [&>h4]:mt-3
                                      [&>h5]:text-gray-300 [&>h5]:text-sm [&>h5]:font-medium [&>h5]:mb-2 [&>h5]:mt-3
                                      [&>h6]:text-gray-400 [&>h6]:text-sm [&>h6]:font-medium [&>h6]:mb-2 [&>h6]:mt-3
                                      [&>p]:text-gray-300 [&>p]:leading-relaxed [&>p]:mb-4
                                      [&>strong]:text-blue-400 [&>strong]:font-semibold
                                      [&>em]:text-gray-200 [&>em]:italic
                                      [&>code]:bg-gray-800 [&>code]:text-blue-300 [&>code]:px-1.5 [&>code]:py-0.5 [&>code]:rounded [&>code]:text-sm
                                      [&>pre]:bg-gray-800 [&>pre]:border [&>pre]:border-gray-700 [&>pre]:rounded-lg [&>pre]:p-4 [&>pre]:mb-4 [&>pre]:overflow-x-auto
                                      [&>pre>code]:bg-transparent [&>pre>code]:text-gray-200 [&>pre>code]:p-0 [&>pre>code]:text-sm [&>pre>code]:font-mono
                                      [&>ul]:text-gray-300 [&>ul]:mb-4 [&>ul]:pl-6
                                      [&>ol]:text-gray-300 [&>ol]:mb-4 [&>ol]:pl-6
                                      [&>li]:mb-1 [&>li]:leading-relaxed
                                      [&>ul>li]:list-disc [&>ol>li]:list-decimal
                                      [&>blockquote]:border-l-4 [&>blockquote]:border-blue-500 [&>blockquote]:bg-gray-800/50 [&>blockquote]:p-4 [&>blockquote]:mb-4 [&>blockquote]:italic
                                      [&>blockquote>p]:text-gray-200 [&>blockquote>p]:mb-0
                                      [&>a]:text-blue-400 [&>a]:underline [&>a]:transition-colors [&>a]:duration-150
                                      [&>a:hover]:text-blue-300`,children:Y.jsx(Rq,{rehypePlugins:[nK],children:t.text.replace(/_/g,"")})})]}):Y.jsxs("div",{className:"explanation-placeholder text-center py-8",children:[Y.jsx("p",{className:"text-gray-400 dark:text-gray-400 mb-4",children:" Click on a node's explanation button () to view its detailed information here."}),Y.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm opacity-70",children:"This panel provides in-depth explanations and documentation for your workflow components."})]})})]}):null}const C3=re.createContext(void 0),N3=()=>{const t=re.useContext(C3);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},iK=({children:t})=>{const[e,n]=re.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});re.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return Y.jsx(C3.Provider,{value:{theme:e,toggleTheme:r},children:t})},sK=()=>{const{theme:t,toggleTheme:e}=N3();return Y.jsx("button",{onClick:e,className:`p-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 
                 hover:bg-gray-300 dark:hover:bg-gray-600 transition-all duration-200 
                 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-blue-400/20`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?Y.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:Y.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):Y.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:Y.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function aK({name:t,onSetName:e,user:n,isSaving:r}){const[s,o]=re.useState(!1),[u,c]=re.useState(t||"");re.useEffect(()=>{c(t||"")},[t]);const f=p=>{p.key==="Enter"&&(e(u),o(!1))},d=()=>{o(!0),c(t||"")};return Y.jsx(Y.Fragment,{children:Y.jsx("div",{className:"name bg-gray-900 dark:bg-gray-950 border-b border-gray-700 dark:border-gray-800",children:Y.jsx("div",{className:"app-container max-w-7xl mx-auto px-4",children:Y.jsxs("header",{className:"app-header flex justify-between items-center py-4",children:[Y.jsxs("div",{className:"flex items-center gap-4",children:[Y.jsx("h1",{className:"text-xl font-bold text-white dark:text-white",children:"Launch Flow"}),Y.jsx("span",{className:"text-slate-500 dark:text-slate-500 text-sm",children:""}),s?Y.jsx("input",{type:"text",value:u,onChange:p=>c(p.target.value),onKeyDown:f,onBlur:()=>{e(u),o(!1)},className:`bg-gray-800 dark:bg-gray-800 border border-white/20 dark:border-white/20 
                                             rounded px-2 py-1 text-slate-100 dark:text-slate-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-400 dark:focus:border-blue-400`,autoFocus:!0}):Y.jsx("button",{onClick:d,className:`bg-transparent border-none text-slate-400 dark:text-slate-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded transition-all duration-150 ease-in-out
                                             hover:bg-white/5 dark:hover:bg-white/5 hover:text-slate-100 dark:hover:text-slate-100`,children:t||"Untitled Board"})]}),Y.jsxs("div",{className:"user-info flex items-center gap-3",children:[Y.jsx(sK,{}),Y.jsx("p",{className:"text-slate-700 dark:text-slate-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"}),r&&Y.jsx("span",{className:"save-indicator text-blue-600 dark:text-blue-400 text-sm flex items-center gap-1",children:" Saving"})]})]})})})})}const oK=({notification:t,onRemove:e})=>{const n=s=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";default:return""}},r=s=>{switch(s){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-400 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-400 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-400 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-400 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-400 dark:text-gray-400"}};return Y.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-lg border shadow-lg backdrop-blur-sm 
                        animate-slide-in-right transition-all duration-300 
                        ${r(t.type)}`,children:[Y.jsxs("div",{className:"notification-content flex items-start gap-3 pr-6",children:[Y.jsx("span",{className:"notification-icon text-lg flex-shrink-0",children:n(t.type)}),Y.jsx("span",{className:"notification-message flex-1 text-sm leading-relaxed",children:t.message})]}),Y.jsx("button",{className:`notification-close absolute top-2 right-2 bg-transparent border-none 
                         text-gray-400 dark:text-gray-400 hover:text-white dark:hover:text-white 
                         cursor-pointer text-lg p-1 rounded transition-colors duration-150 
                         hover:bg-white/10 dark:hover:bg-white/10`,onClick:()=>e(t.id),children:""})]})},uK=({notifications:t,onRemove:e})=>t.length===0?null:Y.jsx("div",{className:`notifications-container fixed top-4 right-4 z-50 flex flex-col gap-3 
                       max-h-screen overflow-y-auto`,children:t.map(n=>Y.jsx(oK,{notification:n,onRemove:e},n.id))});function lK({onLogin:t}){const{theme:e,toggleTheme:n}=N3();return Y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[Y.jsx("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:Y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Y.jsxs("div",{className:"flex justify-between items-center py-4",children:[Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:Y.jsx("span",{className:"text-white font-bold text-sm",children:"LH"})}),Y.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"TinkFlow"})]}),Y.jsxs("div",{className:"flex items-center gap-4",children:[Y.jsx("button",{onClick:n,className:`p-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 
                                         hover:bg-gray-300 dark:hover:bg-gray-600 transition-all duration-200 
                                         focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-blue-400/20`,title:`Switch to ${e==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${e==="light"?"dark":"light"} mode`,children:e==="light"?Y.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:Y.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):Y.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:Y.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})}),Y.jsx("button",{onClick:t,className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-2 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Get Started"})]})]})})}),Y.jsxs("section",{className:"relative overflow-hidden",children:[Y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:Y.jsxs("div",{className:"text-center",children:[Y.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:["Build Your Ideas",Y.jsx("span",{className:"bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent block",children:"Faster Than Ever"})]}),Y.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:"The ultimate platform for hackers and builders to prototype, collaborate, and ship amazing projects. Join thousands of developers turning ideas into reality."}),Y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[Y.jsx("button",{onClick:t,className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-xl text-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:"Start Building Now"}),Y.jsx("button",{className:"border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 px-8 py-4 rounded-xl text-lg font-semibold hover:border-gray-400 dark:hover:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200",children:"Watch Demo"})]})]})}),Y.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full opacity-10 blur-3xl"}),Y.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})]}),Y.jsx("section",{className:"py-20 bg-white dark:bg-gray-800",children:Y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Y.jsxs("div",{className:"text-center mb-16",children:[Y.jsx("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Everything You Need"}),Y.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Powerful tools and features designed to accelerate your development process"})]}),Y.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[Y.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-blue-200 dark:border-blue-700/50",children:[Y.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center mb-6",children:Y.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),Y.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:"Lightning Fast"}),Y.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:"Deploy your projects in seconds with our optimized build pipeline and global CDN distribution."})]}),Y.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50",children:[Y.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center mb-6",children:Y.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),Y.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:"Real-time Collaboration"}),Y.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:"Work together seamlessly with live editing, comments, and instant synchronization across teams."})]}),Y.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50",children:[Y.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center mb-6",children:Y.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),Y.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:"Production Ready"}),Y.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:"Enterprise-grade security, monitoring, and scaling capabilities built right into the platform."})]})]})]})}),Y.jsx("section",{className:"py-20 bg-gradient-to-r from-blue-500 to-purple-600",children:Y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Y.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[Y.jsxs("div",{className:"text-white",children:[Y.jsx("div",{className:"text-4xl font-bold mb-2",children:"50K+"}),Y.jsx("div",{className:"text-blue-100",children:"Projects Built"})]}),Y.jsxs("div",{className:"text-white",children:[Y.jsx("div",{className:"text-4xl font-bold mb-2",children:"15K+"}),Y.jsx("div",{className:"text-blue-100",children:"Developers"})]}),Y.jsxs("div",{className:"text-white",children:[Y.jsx("div",{className:"text-4xl font-bold mb-2",children:"99.9%"}),Y.jsx("div",{className:"text-blue-100",children:"Uptime"})]}),Y.jsxs("div",{className:"text-white",children:[Y.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"}),Y.jsx("div",{className:"text-blue-100",children:"Support"})]})]})})}),Y.jsx("section",{className:"py-20 bg-gray-50 dark:bg-gray-800",children:Y.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[Y.jsx("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:"Ready to Launch Your Next Big Idea?"}),Y.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:"Join thousands of developers who are already building the future with Launch Hacks."}),Y.jsx("button",{onClick:t,className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:"Get Started for Free"})]})}),Y.jsx("footer",{className:"bg-gray-900 text-white py-12",children:Y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Y.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[Y.jsxs("div",{children:[Y.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Y.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:Y.jsx("span",{className:"text-white font-bold text-sm",children:"LH"})}),Y.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})]}),Y.jsx("p",{className:"text-gray-400 mb-4",children:"Empowering developers to build, deploy, and scale their ideas faster than ever before."})]}),Y.jsxs("div",{children:[Y.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Product"}),Y.jsxs("ul",{className:"space-y-2 text-gray-400",children:[Y.jsx("li",{children:Y.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})}),Y.jsx("li",{children:Y.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})}),Y.jsx("li",{children:Y.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})}),Y.jsx("li",{children:Y.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})]})]}),Y.jsxs("div",{children:[Y.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Company"}),Y.jsxs("ul",{className:"space-y-2 text-gray-400",children:[Y.jsx("li",{children:Y.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})}),Y.jsx("li",{children:Y.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})}),Y.jsx("li",{children:Y.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Careers"})}),Y.jsx("li",{children:Y.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})]})]}),Y.jsxs("div",{children:[Y.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Support"}),Y.jsxs("ul",{className:"space-y-2 text-gray-400",children:[Y.jsx("li",{children:Y.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Help Center"})}),Y.jsx("li",{children:Y.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Community"})}),Y.jsx("li",{children:Y.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Status"})}),Y.jsx("li",{children:Y.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Security"})})]})]})]}),Y.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[Y.jsx("p",{className:"text-gray-400 text-sm",children:" 2025 Launch Hacks. All rights reserved."}),Y.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[Y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Privacy Policy"}),Y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Terms of Service"}),Y.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Cookie Policy"})]})]})]})})]})}const cK=async()=>{try{await PU(n0),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},hK=()=>{const[t,e]=re.useState(null);return re.useEffect(()=>{const r=MU(n0,s=>{e(s),s?console.log("User signed in:",s.uid):console.log("No user signed in")});return()=>r()},[]),{user:t,signOut:async()=>{try{await cK(),e(null)}catch(r){console.error("Error in sign out:",r)}}}},R3=t=>!!(t&&t.uid),kh=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],xl=[],fK=async t=>{if(!R3({uid:t}))throw new Error(Fr.AUTH_REQUIRED);try{const e=U_(is,vi.BOARDS),n=A7(e,w7("userId","==",t),x7("createdAt","desc")),r=await Q_(n);if(r.empty){const o={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:ln.now(),isOpen:!0};return await W_(Gl(is,vi.BOARDS,o.id),o),console.log("Created default board:",o),[o]}const s=r.docs.map(o=>({id:o.id,...o.data()}));return console.log("Fetched all boards:",s),s}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:ln.now(),isOpen:!0,isFallback:!0}]}throw new Error(Fr.LOAD_FAILED)}},Kw=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),kh;try{const e=U_(is,vi.BOARDS,t,vi.NODES),n=await Q_(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),kh;const r=n.docs.map(s=>{const o=s.data(),u={...o.data,tokenColors:o.data?.tokenColors||{},previousNode:o.data?.previousNode||null};return{id:s.id,type:o.type,position:o.position,data:u,draggable:o.draggable,style:o.style}});return console.log("Fetched nodes from board:",r),r}catch(e){return console.error("Fetch nodes error:",e),kh}},Xw=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),xl;try{const e=U_(is,vi.BOARDS,t,vi.EDGES),n=await Q_(e);if(n.empty)return console.log("No edges found for board, using initial edges"),xl;const r=n.docs.map(s=>({id:s.id,...s.data()}));return console.log("Fetched edges from board:",r),r}catch(e){return console.error("Fetch edges error:",e),xl}},dK=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=yN(is);e.forEach(r=>{const s=Gl(is,vi.BOARDS,t,vi.NODES,r.id),o={type:r.type,data:r.data,position:r.position,updatedAt:ln.now()};r.draggable!=null&&(o.draggable=r.draggable),r.style!=null&&(o.style=r.style),n.set(s,o)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(Fr.SAVE_FAILED)}},mK=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=yN(is);e.forEach(r=>{const s=Gl(is,vi.BOARDS,t,vi.EDGES,r.id),o={source:r.source,target:r.target,updatedAt:ln.now()};r.sourceHandle!=null&&(o.sourceHandle=r.sourceHandle),r.targetHandle!=null&&(o.targetHandle=r.targetHandle),r.style!=null&&(o.style=r.style),r.markerEnd!=null&&(o.markerEnd=r.markerEnd),n.set(s,o)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(Fr.SAVE_FAILED)}},pK=async(t,e,n)=>{if(!R3({uid:t}))throw new Error(Fr.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:ln.now(),isOpen:!1};return console.log("Creating board:",r),await W_(Gl(is,vi.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},gK=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await O7(Gl(is,vi.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},ol=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:ln.now()};await W_(Gl(is,vi.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},yK=t=>{if(!t||!t.data)return t;const e={...t},n={...t.data};return n.title||(n.title=n.label||n.summary||"Node"),n.suggestions||(n.suggestions=[]),e.draggable===void 0&&(e.draggable=!0),e.data=n,e},EK=t=>Array.isArray(t)?t.map(yK):[],_K=(t,e={})=>{const[n,r,s]=$M([]),[o,u,c]=KM([]),[f,d]=re.useState(!0),[p,y]=re.useState(!1),[T,b]=re.useState(!1),[w,N]=re.useState([]),[k,D]=re.useState(null),F=re.useRef(null),{showSuccess:q,showError:j,showInfo:ee}=e,$=I=>{const L=I.find(K=>K.isOpen===!0);if(L)return L;if(I.length>0){const K={...I[0],isOpen:!0};return ol(K.id,K).catch(console.error),K}return null};re.useEffect(()=>{(async()=>{if(t)try{d(!0);const L=await fK(t.uid);N(L);const K=L.some(te=>te.isFallback);K&&j&&j("Database index missing. Please create the required Firestore index. Check console for details.");const H=$(L);if(!H){console.error("No board found for user"),j&&j("No boards found. Creating a default board..."),r(kh),u(xl);return}D(H);const[Q,se]=await Promise.all([Kw(H.id),Xw(H.id)]);r(Q),u(se),ee&&!K&&ee("Board loaded successfully!")}catch(L){console.error("Error loading initial data:",L),j&&j("Failed to load board data. Using default board."),r(kh),u(xl)}finally{d(!1)}})()},[t,r,u]);const R=async(I,L,K)=>{F.current&&clearTimeout(F.current);const H=setTimeout(async()=>{try{b(!0);const Q=[];L&&L.length>0&&Q.push(dK(I,L)),K&&K.length>0&&Q.push(mK(I,K)),Q.length>0&&(await Promise.all(Q),console.log("Auto-save completed successfully"))}catch(Q){console.error("Auto-save failed:",Q),j&&j("Failed to save changes automatically")}finally{b(!1),F.current=null}},1e3);F.current=H};re.useEffect(()=>(!f&&k&&!p&&!k.isFallback&&R(k.id,n,o),()=>{F.current&&clearTimeout(F.current)}),[n,o,f,k,p]);const C=async I=>{try{if(k?.id===I)return;if(k?.isFallback||w.find(K=>K.id===I)?.isFallback){j&&j("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(y(!0),k&&!k.isFallback){const K={...k,isOpen:!1};await ol(k.id,K),N(H=>H.map(Q=>Q.id===k.id?K:Q))}const L=w.find(K=>K.id===I);if(L){const K={...L,isOpen:!0};await ol(I,K),D(K),N(te=>te.map(S=>S.id===I?K:S));const[H,Q]=await Promise.all([Kw(I),Xw(I)]),se=EK(H);r(se),u(Q),q&&q(`Switched to "${K.name}"`)}else console.error("Board not found:",I),j&&j("Board not found")}catch(L){console.error("Error switching board:",L),j&&j("Failed to switch board. Please try again.")}finally{y(!1)}};return{nodes:n,edges:o,allBoards:w,currentBoard:k,isLoading:f,isSwitchingBoard:p,isSaving:T,onNodesChange:s,onEdgesChange:c,setNodes:r,switchToBoard:C,createNewBoard:async I=>{try{if(!t)return j&&j("You must be logged in to create a board"),null;ee&&ee("Creating new board...");const L=await pK(t.uid,I||null,w);if(L){if(k&&!k.isFallback){const H={...k,isOpen:!1};ol(k.id,H).catch(console.error)}const K={...L,isOpen:!0};return N(H=>{const Q=H.map(se=>se.id===k?.id?{...se,isOpen:!1}:se);return[K,...Q]}),D(K),ol(L.id,K).catch(console.error),r([{id:"1",type:"staticEditable",data:{label:I||"New Board"},position:{x:250,y:25},draggable:!1}]),u(xl),q&&q(`Board "${L.name}" created and opened!`),K}else return j&&j("Failed to create board. Please try again."),null}catch(L){return j&&j(`Failed to create board: ${L.message}`),null}},deleteBoard:async I=>{try{if(w.length<=1){j&&j("Cannot delete the last board!");return}if(!w.find(K=>K.id===I)){console.error("Board not found for deletion"),j&&j("Board not found");return}if(ee&&ee("Deleting board..."),k?.id===I){const K=w.find(H=>H.id!==I);K&&await C(K.id)}await gK(I),N(K=>K.filter(H=>H.id!==I)),q&&q("Board deleted successfully!")}catch(L){console.error("Error deleting board:",L),j&&j("Failed to delete board. Please try again.")}},updateBoardName:async I=>{if(k&&k.name!==I){const L={...k,name:I};D(L),N(K=>K.map(H=>H.id===k.id?L:H));try{await ol(k.id,L),console.log("Board name updated successfully")}catch(K){console.error("Error updating board name:",K)}}},clearBoardState:()=>{F.current&&(clearTimeout(F.current),F.current=null),N([]),D(null),r([]),u([]),d(!0),y(!1),b(!1)}}},TK=()=>{const[t,e]=re.useState([]),n=d=>{e(p=>p.filter(y=>y.id!==d))},r=d=>{const p=Date.now().toString(),y={id:p,timestamp:new Date,...d};return e(T=>[...T,y]),d.autoRemove!==!1&&setTimeout(()=>{n(p)},d.duration||5e3),p};return{notifications:t,addNotification:r,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(d,p={})=>r({type:"success",message:d,...p}),showError:(d,p={})=>r({type:"error",message:d,duration:7e3,...p}),showInfo:(d,p={})=>r({type:"info",message:d,...p}),showWarning:(d,p={})=>r({type:"warning",message:d,duration:6e3,...p})}},D3=t=>{const e=[],n=t.split("_");for(let r=0;r<n.length;r++)if(r%2===0)n[r].split(/\s+/).filter(o=>o.trim()!=="").forEach(o=>{e.push({word:o.trim()})});else{const s=n[r].trim();s.split(/\s+/).filter(u=>u.trim()!=="").forEach(u=>{e.push({word:u.trim(),myConcept:s})})}return e},Qw=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},Am=t=>{if(!t)return"#000000";const e=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),r=parseInt(t.substring(5,7),16);return(e*299+n*587+r*114)/1e3>=128?"#000000":"#ffffff"},wm=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.substring(1):t;const r=parseInt(n,16),s=255,o=e,u=r>>16,c=r>>8&255,f=r&255,d=Math.round((s-u)*o)+u,p=Math.round((s-c)*o)+c,y=Math.round((s-f)*o)+f;return`#${(16777216+d*65536+p*256+y).toString(16).slice(1)}`},bK=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16),o=30,u=Math.min(255,Math.max(0,n+(Math.random()-.5)*o*2)),c=Math.min(255,Math.max(0,r+(Math.random()-.5)*o*2)),f=Math.min(255,Math.max(0,s+(Math.random()-.5)*o*2));return`#${Math.round(u).toString(16).padStart(2,"0")}${Math.round(c).toString(16).padStart(2,"0")}${Math.round(f).toString(16).padStart(2,"0")}`},vK=t=>{const r=(Math.random()-.5)*150*2;return{x:t.x+r,y:t.y+200}},SK=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,AK=(t,e)=>`edge_${t}_${e}`,wK=(t,e,n,r,s,o,u)=>({id:SK(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:r,full_text:n,suggestions:[],myColor:s,tokenColors:{},previousNode:u}}),xK=(t,e,n,r)=>({id:AK(t,e),source:t,target:e,sourceHandle:r,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:Hh.ArrowClosed,color:n}}),Ww=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const r=await tR(c1,"groqChat")({message:e});return console.log("groqChat response:",r.data),r.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},IK=async(t,e)=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const n=t.trim();if(!n)throw new Error("Message cannot be empty or just whitespace");const r=tR(c1,"groqChat");console.log("Starting streaming request...");const{stream:s,data:o}=await r.stream({message:n});console.log("Stream started, waiting for chunks...");let u="";for await(const f of s)if(console.log("Received chunk:",f),f&&typeof f=="object"&&"type"in f&&"content"in f){const d=f;console.log("Processing chunk:",d),d.type==="chunk"&&d.content&&(u+=d.content,e?.(d.content))}console.log("Waiting for final result...");const c=await o;return console.log("Final result received:",c),c&&typeof c=="object"&&"response"in c?(console.log("Returning final result response"),c.response):(console.log("Returning accumulated response:",u),u)}catch(n){throw console.error("Firebase function streaming error:",n),n}},CK=async(t,e,n)=>{try{const r=`You are an expert educator. Explain the following concept to a beginner.

        Context: ${e}

        Instructions:
        - Highlight every key term with [square-braces], e.g., [variable].
        - Use simple language and practical examples or analogies.
        - Use only correct HTML or MARKDOWN for all formatting (headings, lists, tables, images, code).
        - All HTML elements (including headings, lists, tables, images, code) MUST use inline CSS for styling.
        - For inline CSS, use: <span style="color:#fff;background:#222;padding:4px;border-radius:4px;">example</span>
        - For images: <img src="IMAGE_URL" alt="desc" style="max-width:100%;border-radius:8px;">
        - For code: <pre style="background:#222;color:#fff;padding:8px;border-radius:6px;"><code>console.log("Hello World");</code></pre>
        - For tables: <table style="border-collapse:collapse;width:100%;"><tr><th style="background:#222;color:#fff;padding:6px;">Header</th></tr><tr><td style="padding:6px;">Data</td></tr></table>
        - For lists: <ul style="padding-left:20px;"><li style="margin-bottom:4px;">Item 1</li></ul>
        - No introductions, conclusions, or extra commentary.
        - Start directly with the explanation.

        Concept: `,s=`Summarize in exactly 40 words or less.

        CRITICAL:
        - Preserve ALL [square-braces] concepts exactly
        - Every key concept MUST use [square-braces]
        - NO introductory phrases like "Here is..." or "Summary..."
        - NO bullet points or formatting except [square-braces]
        - Start immediately with summary content
        - ONLY the summary text

        Text to summarize: `,o=`You are an expert educator. Respond ONLY with a valid JSON object in the following format: {"topics": ["[concept1]", "[concept2]", "[concept3]"]}. 

        Instructions:
        - Suggest exactly 3 topics that are logical next steps for learning the given concept.
        - Each topic must be no more than 5 words.
        - Each topic MUST be enclosed in double quotes, e.g., "example topic".
        - Do NOT include any explanation, commentary, or formatting outside the JSON object.
        - Only output the JSON object as specified.

        Concept: `,u=Ww(r+t),c=Ww(o+t);let f="";const d=IK(s+t,D=>{f+=D,n(D)}),[p,y,T]=await Promise.all([u,c,d]);let b=y??"";b=b.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"");let w=[];const N=b.match(/"(.*?)"/g);N&&(w=N.map(D=>D.replace(/"/g,"")));const k={firstResponse:{response:p?.replace(/\[/g,"_").replace(/\]/g,"_").replace(/```/g,"").replace(/markdown/g,"")},secondResponse:{response:T?.replace(/\[/g,"_").replace(/\]/g,"_").replace(/Here is a summary of the text in exactly 40 words or less:/g,"").replace("/Here is a summary of the text in 40 words or less:/g","")},thirdResponse:{response:w}};return console.log("askAITwice response:",k),k}catch(r){throw console.error("Error in askAITwice:",r),r}},O3=re.createContext(null),NK=({children:t,nodes:e,onNodesChange:n,onEdgesChange:r,setNodes:s,showExplanation:o})=>{const u=(c,f,d,p,y,T,b)=>{const w=e.find($=>$.id===f);if(!w)return null;const N=w.data.tokenColors||{},k=c.myConcept||c.word;if(N[k])return console.log(`Token "${k}" is already colored, ignoring click`),null;let D;p==="staticEditable"?D=Qw():D=y?bK(y):Qw();const F={...N};c.myConcept?F[c.myConcept]=D:F[c.word]=D,s($=>$.map(R=>R.id===f?{...R,data:{...R.data,tokenColors:F}}:R));const q=vK(d),j=wK(q,c.word,"Loading...","",D,p,f);j.data.isLoading=!0;const ee=xK(f,j.id,D,b);return n([{type:"add",item:j}]),r([{type:"add",item:ee}]),CK(c.word,T||"",$=>{s(R=>R.map(C=>{if(C.id===j.id){const O=C.data.summary||"";return{...C,data:{...C.data,label:O+$,summary:O+$}}}return C}))}).then($=>{const R=$.firstResponse?.response||c.word,C=$.secondResponse?.response||c.word,O=$.thirdResponse?.response||{};s(M=>M.map(B=>B.id===j.id?{...B,data:{...B.data,label:C,title:c.word,summary:C,full_text:R,suggestions:O,isLoading:!1}}:B))}).catch(()=>{s($=>$.map(R=>R.id===j.id?{...R,data:{...R.data,label:c.word,title:c.word,summary:c.word,full_text:c.word,suggestions:[],isLoading:!1}}:R))}),D};return Y.jsx(O3.Provider,{value:{handleTokenClick:u,setNodes:s,showExplanation:o},children:t})},k3=()=>{const t=re.useContext(O3);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t},L3=({size:t="medium",color:e="#4f86f7"})=>Y.jsx("div",{className:`loading-spinner ${t}`,children:Y.jsx("div",{className:"spinner-ring",style:{borderTopColor:e}})});function RK({data:t,id:e}){const[n,r]=re.useState(!1),[s,o]=re.useState(t.summary||t.label||"Static Node"),[u,c]=re.useState(!1),{handleTokenClick:f,showExplanation:d}=k3(),{getNode:p,setViewport:y}=af();re.useEffect(()=>{n||o(t.summary||t.label||"Static Node")},[t.summary,t.label,n]);const T=D3(s),b=(C,O)=>{O.stopPropagation(),console.log("Static Token clicked:",C),f(C,e,{x:0,y:0},"staticEditable",t.myColor,t.summary||t.label||"Draggable Node",C.suggestionId)},w=C=>{C.stopPropagation(),r(!0)},N=()=>{r(!1)},k=C=>{C.stopPropagation()},D=C=>{C.stopPropagation(),C.key==="Enter"&&N(),C.key==="Escape"&&(o(t.summary||t.label||"Static Node"),r(!1))},F=C=>{C.stopPropagation(),c(!u)},q=C=>{C.stopPropagation(),d&&d(t.title||"Explanation",t.full_text||"No detailed information available.")},j=C=>{if(C.stopPropagation(),t.previousNode){const O=p(t.previousNode);if(O){const{x:M,y:B}=O.position;y({x:-M+200,y:-B+100,zoom:1},{duration:500})}}},ee=(()=>{const C=t.tokenColors||{};return T.map((O,M)=>{const B=O.myConcept||O.word,U=C[B],I=!U;return Y.jsxs("span",{className:`word-token ${I?"":"disabled"} ${O.myConcept?"concept-highlight":""}`,style:{backgroundColor:U||"transparent",color:U?t.myColor||"#ffffff":"inherit",border:U?`1px solid ${U}`:""},onClick:L=>I?b(O,L):L.stopPropagation(),children:[O.word,M<T.length-1?" ":""]},M)})})(),$=Y.jsxs("div",{className:"node-buttons",children:[t.previousNode&&Y.jsx("button",{className:"node-expand-btn previous-node-btn",onClick:j,title:"Go to previous node",children:""}),T.length>5&&Y.jsx("button",{className:"node-expand-btn",onClick:F,title:u?"Show less":"Show more",children:u?"":"+"}),Y.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:q,title:"Show full text",children:""})]}),R=re.useMemo(()=>t.isLoading?Y.jsxs("div",{className:"node-loading-content",children:[Y.jsx(L3,{size:"small",color:t.myColor||"#4f86f7"}),Y.jsx("span",{className:"loading-text",children:"Loading concept..."})]}):n?Y.jsx("input",{type:"text",value:s,onChange:C=>o(C.target.value),onBlur:N,onKeyDown:D,onClick:k,className:"node-input nodrag",autoFocus:!0}):Y.jsxs("div",{className:"node-layout",children:[Y.jsxs("div",{className:"node-header",children:[Y.jsx("div",{className:"node-title",children:t.title||"Node"}),Y.jsxs("div",{className:"node-buttons",children:[t.previousNode&&Y.jsx("button",{className:"node-expand-btn previous-node-btn",onClick:j,title:"Go to previous node",children:""}),T.length>5&&Y.jsx("button",{className:"node-expand-btn",onClick:F,title:u?"Show less":"Show more",children:u?"":"+"}),Y.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:q,title:"Show full text",children:""})]})]}),Y.jsx("div",{className:"node-main-content",children:Y.jsx("div",{className:"node-summary-section",children:Y.jsxs("div",{className:"node-summary-text",onClick:w,children:[ee,T.length>5&&!u&&Y.jsx("span",{className:"token-truncation",children:"..."})]})})}),Y.jsxs("div",{className:"node-suggestions-section",children:[Y.jsx("div",{className:"node-suggestions-header",children:"Suggestions"}),Y.jsx("div",{className:"node-suggestions-list",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((C,O)=>{const B=(t.tokenColors||{})[C],U=!B;return Y.jsxs("span",{className:`word-token ${U?"":"disabled"}`,style:{backgroundColor:B||"transparent",color:B?t.myColor||"#ffffff":"inherit",border:B?`1px solid ${B}`:""},onClick:I=>U?b({word:C,myConcept:C,suggestionId:t.label+C+O},I):I.stopPropagation(),children:[C,O<t.suggestions.length-1?" ":"",Y.jsx(Wr,{type:"source",position:ze.Right,id:t.label+C+O})]},O)}):Y.jsx("div",{className:"node-suggestions-empty",children:"No suggestions"})})]})]}),[n,s,u,T.length,w,N,D,k,ee,$]);return Y.jsxs("div",{className:"static-editable-node nodrag",style:{backgroundColor:t.myColor,color:t.myColor?Am(t.myColor):"",border:t.myColor?`2px solid ${wm(t.myColor,20)}`:""},children:[Y.jsx("div",{className:"node-content",children:R}),Y.jsx(Wr,{type:"source",position:ze.Bottom,id:"bottom-source"}),Y.jsx(Wr,{type:"target",position:ze.Bottom,id:"bottom-target"})]})}function DK({data:t,id:e}){const[n,r]=re.useState(!1),[s,o]=re.useState(t.summary||t.label||"Draggable Node"),[u,c]=re.useState(t.expanded||!1),{getNodes:f,getNode:d,setViewport:p}=af(),{handleTokenClick:y,showExplanation:T}=k3();re.useEffect(()=>{n||o(t.summary||t.label||"Draggable Node")},[t.summary,t.label,n]);const b=D3(s),w=u||b.length<=5?b:b.slice(0,5),N=()=>!0,k=(M,B)=>{B.stopPropagation();const I=f().find(K=>K.id===e);return I?y(M,e,I.position,I.type||"draggableEditable",t.myColor,t.summary||t.label||"Draggable Node"):void 0},D=M=>{M.stopPropagation(),r(!0)},F=()=>{r(!1)},q=M=>{M.stopPropagation()},j=M=>{M.stopPropagation(),M.key==="Enter"&&F(),M.key==="Escape"&&(o(t.summary||t.label||"Draggable Node"),r(!1))},ee=M=>{M.stopPropagation(),c(!u),!u&&t.onExpand&&t.onExpand()},$=M=>{M.stopPropagation(),T&&T(t.title,t.full_text||"No detailed information available.")},R=M=>{if(M.stopPropagation(),t.previousNode){const B=d(t.previousNode);if(B){const{x:U,y:I}=B.position;p({x:-U+200,y:-I+100,zoom:1},{duration:500})}}},C=re.useMemo(()=>{const M={};return w.forEach(B=>{const U=B.myConcept||B.word;M[U]||(M[U]=[]),M[U].push(B)}),M},[w]),O=re.useMemo(()=>n?Y.jsx("input",{type:"text",value:s,onChange:M=>o(M.target.value),onBlur:F,onKeyDown:j,onClick:q,className:"node-input nodrag",autoFocus:!0}):Y.jsxs(Y.Fragment,{children:[t.isLoading&&Y.jsx(L3,{}),Y.jsxs("div",{className:"node-layout",children:[Y.jsxs("div",{className:"node-header",children:[Y.jsx("div",{className:"node-title",children:t.title||"Node"}),Y.jsxs("div",{className:"node-buttons",children:[t.previousNode&&Y.jsx("button",{className:"node-expand-btn previous-node-btn",onClick:R,title:"Go to previous node",children:""}),b.length>5&&Y.jsx("button",{className:"node-expand-btn",onClick:ee,title:u?"Show less":"Show more",children:u?"":"+"}),Y.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:$,title:"Show full text",children:""})]})]}),Y.jsx("div",{className:"node-main-content",children:Y.jsx("div",{className:"node-summary-section",children:Y.jsxs("div",{className:"node-summary-text",onClick:D,children:[w.map((M,B)=>{const U=t.tokenColors||{},I=M.myConcept||M.word,L=U[I],K=!L;return Y.jsxs("span",{className:`word-token ${K?"":"disabled"} ${M.myConcept?"concept-highlight":""}`,style:{backgroundColor:L||"transparent",color:L?Am(L):"inherit",border:L?`1px solid ${wm(L,20)}`:""},onClick:H=>K?k(M,H):H.stopPropagation(),children:[M.word,B<w.length-1?" ":""]},B)}),b.length>5&&!u&&Y.jsx("span",{className:"token-truncation",children:"..."})]})})}),Y.jsxs("div",{className:"node-suggestions-section",children:[Y.jsx("div",{className:"node-suggestions-header",children:"Suggestions"}),Y.jsx("div",{className:"node-suggestions-list",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((M,B)=>{const I=(t.tokenColors||{})[M],L=!I;return Y.jsxs("span",{className:`suggestion-token ${L?"":"disabled"}`,style:{backgroundColor:I||"transparent",color:I?Am(I):"inherit",border:I?`1px solid ${wm(I,20)}`:""},onClick:K=>L?k({word:M,myConcept:M,suggestionId:t.label+M+B},K):K.stopPropagation(),children:[M,Y.jsx(Wr,{type:"source",position:ze.Bottom,id:t.label+M+B})]},B)}):Y.jsx("div",{className:"node-suggestions-empty",children:"No suggestions"})})]})]})]}),[n,s,w,b,u,C,D,F,j,q,ee,$,k,N,t.previousNode,R,t.tokenColors,t.myColor,t.isLoading]);return Y.jsxs("div",{className:"draggable-editable-node",style:{background:t.myColor,color:t.myColor?Am(t.myColor):"",border:t.myColor?`2px solid ${wm(t.myColor,20)}`:""},children:[Y.jsx("div",{className:"node-content",children:O}),Y.jsx(Wr,{type:"source",position:ze.Bottom,id:"bottom-source"}),Y.jsx(Wr,{type:"target",position:ze.Top,id:"top-target"}),Y.jsx(Wr,{type:"source",position:ze.Left,id:"left-source"}),Y.jsx(Wr,{type:"target",position:ze.Left,id:"left-target"}),Y.jsx(Wr,{type:"source",position:ze.Right,id:"right-source"}),Y.jsx(Wr,{type:"target",position:ze.Right,id:"right-target"})]})}const OK={staticEditable:RK,draggableEditable:DK};function kK(){const[t,e]=re.useState(!1),[n,r]=re.useState(!1),[s,o]=re.useState(()=>{const te=localStorage.getItem("explanationSidebarWidth");return te?parseInt(te):650}),[u,c]=re.useState(null),{user:f,signOut:d}=hK(),{notifications:p,removeNotification:y,showSuccess:T,showError:b,showInfo:w}=TK(),{nodes:N,edges:k,allBoards:D,currentBoard:F,isSwitchingBoard:q,isSaving:j,onNodesChange:ee,onEdgesChange:$,setNodes:R,switchToBoard:C,createNewBoard:O,deleteBoard:M,updateBoardName:B,clearBoardState:U}=_K(f,{showSuccess:T,showError:b,showInfo:w}),I=async()=>{await d(),U()},L=()=>{r(!0)},K=(te,S)=>{c({title:te,text:S}),e(!0)},H=()=>{e(!1)},Q=te=>{o(te),localStorage.setItem("explanationSidebarWidth",te.toString())},se=te=>{const S={id:`e${te.source}-${te.target}`,source:te.source,target:te.target,sourceHandle:te.sourceHandle,targetHandle:te.targetHandle};$([{type:"add",item:S}])};return f?Y.jsxs("div",{className:"app-layout bg-gray-900 dark:bg-gray-950",style:{height:"100vh",width:"100vw"},children:[Y.jsx(uK,{notifications:p,onRemove:y}),Y.jsxs("div",{className:"bg-gray-900 dark:bg-gray-950",style:{height:"100%",position:"relative"},children:[Y.jsxs(ly,{defaultSizes:[280,1e3],children:[Y.jsx(ly.Pane,{minSize:200,maxSize:500,children:Y.jsx(EH,{allBoards:D,currentBoard:F,onSwitchBoard:C,onCreateBoard:async te=>{await O(te)},onDeleteBoard:M,onSignOut:I,isLoading:q})}),Y.jsx(ly.Pane,{children:Y.jsxs("div",{className:"main-content-pane bg-gray-800 dark:bg-gray-900",style:{height:"100%",position:"relative"},children:[Y.jsx(aK,{name:F?.name||"Loading...",onSetName:B,user:f,isSaving:j}),Y.jsx("div",{className:"reactflow-container bg-gray-800 dark:bg-gray-900",style:{height:"calc(100% - 56px)"},children:Y.jsx(NK,{nodes:N,onNodesChange:ee,onEdgesChange:$,setNodes:R,showExplanation:K,children:Y.jsxs(yI,{nodes:N,edges:k,onNodesChange:ee,onEdgesChange:$,onConnect:se,nodeTypes:OK,connectionMode:lo.Loose,fitView:!0,children:[Y.jsx(tP,{}),Y.jsx(oP,{variant:ji.Cross,gap:30,size:10,lineWidth:.5,color:"#616161"})]})})})]})})]}),t&&Y.jsx(Y.Fragment,{children:Y.jsxs("div",{className:"explanation-panel-floating bg-gray-900 dark:bg-gray-950 border-l border-gray-700 dark:border-gray-800",style:{position:"fixed",top:"0",right:"0",width:`${s}px`,maxWidth:"50vw",minWidth:"420px",height:"100vh",zIndex:1e3,pointerEvents:"auto"},children:[Y.jsx("div",{className:"panel-resize-handle",onMouseDown:te=>{te.preventDefault();const S=te.clientX,J=s,ae=ge=>{const Ne=S-ge.clientX,Ie=Math.max(420,Math.min(window.innerWidth*.5,J+Ne));Q(Ie)},P=()=>{document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",P),document.body.style.cursor="default",document.body.style.userSelect="auto"};document.addEventListener("mousemove",ae),document.addEventListener("mouseup",P),document.body.style.cursor="ew-resize",document.body.style.userSelect="none"}}),Y.jsx("div",{className:"panel-main-content h-full",children:Y.jsx(rK,{explanation:u,onClose:H,isVisible:t})})]})})]})]}):n?Y.jsx(gH,{}):Y.jsx(lK,{onLogin:L})}function LK(){return Y.jsx(iK,{children:Y.jsx(kK,{})})}const M3=document.getElementById("root");if(!M3)throw new Error("Failed to find the root element");m6.createRoot(M3).render(Y.jsx(re.StrictMode,{children:Y.jsx(LK,{})}));
