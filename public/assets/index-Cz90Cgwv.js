function nD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function jv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ky={exports:{}},Mc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nT;function rD(){if(nT)return Mc;nT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:t,type:r,key:l,ref:s!==void 0?s:null,props:o}}return Mc.Fragment=e,Mc.jsx=n,Mc.jsxs=n,Mc}var rT;function iD(){return rT||(rT=1,ky.exports=rD()),ky.exports}var O=iD(),Iy={exports:{}},He={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT;function sD(){if(iT)return He;iT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),_=Symbol.iterator;function w(z){return z===null||typeof z!="object"?null:(z=_&&z[_]||z["@@iterator"],typeof z=="function"?z:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,P={};function L(z,W,ee){this.props=z,this.context=W,this.refs=P,this.updater=ee||C}L.prototype.isReactComponent={},L.prototype.setState=function(z,W){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,W,"setState")},L.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function j(){}j.prototype=L.prototype;function H(z,W,ee){this.props=z,this.context=W,this.refs=P,this.updater=ee||C}var K=H.prototype=new j;K.constructor=H,M(K,L.prototype),K.isPureReactComponent=!0;var y=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},b=Object.prototype.hasOwnProperty;function T(z,W,ee,Z,ne,oe){return ee=oe.ref,{$$typeof:t,type:z,key:W,ref:ee!==void 0?ee:null,props:oe}}function A(z,W){return T(z.type,W,void 0,void 0,void 0,z.props)}function R(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function k(z){var W={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ee){return W[ee]})}var D=/\/+/g;function $(z,W){return typeof z=="object"&&z!==null&&z.key!=null?k(""+z.key):W.toString(36)}function V(){}function U(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(V,V):(z.status="pending",z.then(function(W){z.status==="pending"&&(z.status="fulfilled",z.value=W)},function(W){z.status==="pending"&&(z.status="rejected",z.reason=W)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function Q(z,W,ee,Z,ne){var oe=typeof z;(oe==="undefined"||oe==="boolean")&&(z=null);var ce=!1;if(z===null)ce=!0;else switch(oe){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(z.$$typeof){case t:case e:ce=!0;break;case m:return ce=z._init,Q(ce(z._payload),W,ee,Z,ne)}}if(ce)return ne=ne(z),ce=Z===""?"."+$(z,0):Z,y(ne)?(ee="",ce!=null&&(ee=ce.replace(D,"$&/")+"/"),Q(ne,W,ee,"",function(Ae){return Ae})):ne!=null&&(R(ne)&&(ne=A(ne,ee+(ne.key==null||z&&z.key===ne.key?"":(""+ne.key).replace(D,"$&/")+"/")+ce)),W.push(ne)),1;ce=0;var fe=Z===""?".":Z+":";if(y(z))for(var ge=0;ge<z.length;ge++)Z=z[ge],oe=fe+$(Z,ge),ce+=Q(Z,W,ee,oe,ne);else if(ge=w(z),typeof ge=="function")for(z=ge.call(z),ge=0;!(Z=z.next()).done;)Z=Z.value,oe=fe+$(Z,ge++),ce+=Q(Z,W,ee,oe,ne);else if(oe==="object"){if(typeof z.then=="function")return Q(U(z),W,ee,Z,ne);throw W=String(z),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return ce}function x(z,W,ee){if(z==null)return z;var Z=[],ne=0;return Q(z,Z,"","",function(oe){return W.call(ee,oe,ne++)}),Z}function B(z){if(z._status===-1){var W=z._result;W=W(),W.then(function(ee){(z._status===0||z._status===-1)&&(z._status=1,z._result=ee)},function(ee){(z._status===0||z._status===-1)&&(z._status=2,z._result=ee)}),z._status===-1&&(z._status=0,z._result=W)}if(z._status===1)return z._result.default;throw z._result}var G=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function X(){}return He.Children={map:x,forEach:function(z,W,ee){x(z,function(){W.apply(this,arguments)},ee)},count:function(z){var W=0;return x(z,function(){W++}),W},toArray:function(z){return x(z,function(W){return W})||[]},only:function(z){if(!R(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},He.Component=L,He.Fragment=n,He.Profiler=s,He.PureComponent=H,He.StrictMode=r,He.Suspense=f,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,He.__COMPILER_RUNTIME={__proto__:null,c:function(z){return E.H.useMemoCache(z)}},He.cache=function(z){return function(){return z.apply(null,arguments)}},He.cloneElement=function(z,W,ee){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var Z=M({},z.props),ne=z.key,oe=void 0;if(W!=null)for(ce in W.ref!==void 0&&(oe=void 0),W.key!==void 0&&(ne=""+W.key),W)!b.call(W,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&W.ref===void 0||(Z[ce]=W[ce]);var ce=arguments.length-2;if(ce===1)Z.children=ee;else if(1<ce){for(var fe=Array(ce),ge=0;ge<ce;ge++)fe[ge]=arguments[ge+2];Z.children=fe}return T(z.type,ne,void 0,void 0,oe,Z)},He.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:o,_context:z},z},He.createElement=function(z,W,ee){var Z,ne={},oe=null;if(W!=null)for(Z in W.key!==void 0&&(oe=""+W.key),W)b.call(W,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ne[Z]=W[Z]);var ce=arguments.length-2;if(ce===1)ne.children=ee;else if(1<ce){for(var fe=Array(ce),ge=0;ge<ce;ge++)fe[ge]=arguments[ge+2];ne.children=fe}if(z&&z.defaultProps)for(Z in ce=z.defaultProps,ce)ne[Z]===void 0&&(ne[Z]=ce[Z]);return T(z,oe,void 0,void 0,null,ne)},He.createRef=function(){return{current:null}},He.forwardRef=function(z){return{$$typeof:c,render:z}},He.isValidElement=R,He.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:B}},He.memo=function(z,W){return{$$typeof:h,type:z,compare:W===void 0?null:W}},He.startTransition=function(z){var W=E.T,ee={};E.T=ee;try{var Z=z(),ne=E.S;ne!==null&&ne(ee,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(X,G)}catch(oe){G(oe)}finally{E.T=W}},He.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},He.use=function(z){return E.H.use(z)},He.useActionState=function(z,W,ee){return E.H.useActionState(z,W,ee)},He.useCallback=function(z,W){return E.H.useCallback(z,W)},He.useContext=function(z){return E.H.useContext(z)},He.useDebugValue=function(){},He.useDeferredValue=function(z,W){return E.H.useDeferredValue(z,W)},He.useEffect=function(z,W,ee){var Z=E.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(z,W)},He.useId=function(){return E.H.useId()},He.useImperativeHandle=function(z,W,ee){return E.H.useImperativeHandle(z,W,ee)},He.useInsertionEffect=function(z,W){return E.H.useInsertionEffect(z,W)},He.useLayoutEffect=function(z,W){return E.H.useLayoutEffect(z,W)},He.useMemo=function(z,W){return E.H.useMemo(z,W)},He.useOptimistic=function(z,W){return E.H.useOptimistic(z,W)},He.useReducer=function(z,W,ee){return E.H.useReducer(z,W,ee)},He.useRef=function(z){return E.H.useRef(z)},He.useState=function(z){return E.H.useState(z)},He.useSyncExternalStore=function(z,W,ee){return E.H.useSyncExternalStore(z,W,ee)},He.useTransition=function(){return E.H.useTransition()},He.version="19.1.0",He}var sT;function Ud(){return sT||(sT=1,Iy.exports=sD()),Iy.exports}var F=Ud();const pe=jv(F),aD=nD({__proto__:null,default:pe},[F]);var Ny={exports:{}},Pc={},Dy={exports:{}},My={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT;function oD(){return aT||(aT=1,function(t){function e(x,B){var G=x.length;x.push(B);e:for(;0<G;){var X=G-1>>>1,z=x[X];if(0<s(z,B))x[X]=B,x[G]=z,G=X;else break e}}function n(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var B=x[0],G=x.pop();if(G!==B){x[0]=G;e:for(var X=0,z=x.length,W=z>>>1;X<W;){var ee=2*(X+1)-1,Z=x[ee],ne=ee+1,oe=x[ne];if(0>s(Z,G))ne<z&&0>s(oe,Z)?(x[X]=oe,x[ne]=G,X=ne):(x[X]=Z,x[ee]=G,X=ee);else if(ne<z&&0>s(oe,G))x[X]=oe,x[ne]=G,X=ne;else break e}}return B}function s(x,B){var G=x.sortIndex-B.sortIndex;return G!==0?G:x.id-B.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var f=[],h=[],m=1,_=null,w=3,C=!1,M=!1,P=!1,L=!1,j=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function y(x){for(var B=n(h);B!==null;){if(B.callback===null)r(h);else if(B.startTime<=x)r(h),B.sortIndex=B.expirationTime,e(f,B);else break;B=n(h)}}function E(x){if(P=!1,y(x),!M)if(n(f)!==null)M=!0,b||(b=!0,$());else{var B=n(h);B!==null&&Q(E,B.startTime-x)}}var b=!1,T=-1,A=5,R=-1;function k(){return L?!0:!(t.unstable_now()-R<A)}function D(){if(L=!1,b){var x=t.unstable_now();R=x;var B=!0;try{e:{M=!1,P&&(P=!1,H(T),T=-1),C=!0;var G=w;try{t:{for(y(x),_=n(f);_!==null&&!(_.expirationTime>x&&k());){var X=_.callback;if(typeof X=="function"){_.callback=null,w=_.priorityLevel;var z=X(_.expirationTime<=x);if(x=t.unstable_now(),typeof z=="function"){_.callback=z,y(x),B=!0;break t}_===n(f)&&r(f),y(x)}else r(f);_=n(f)}if(_!==null)B=!0;else{var W=n(h);W!==null&&Q(E,W.startTime-x),B=!1}}break e}finally{_=null,w=G,C=!1}B=void 0}}finally{B?$():b=!1}}}var $;if(typeof K=="function")$=function(){K(D)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,U=V.port2;V.port1.onmessage=D,$=function(){U.postMessage(null)}}else $=function(){j(D,0)};function Q(x,B){T=j(function(){x(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(x){x.callback=null},t.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<x?Math.floor(1e3/x):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_next=function(x){switch(w){case 1:case 2:case 3:var B=3;break;default:B=w}var G=w;w=B;try{return x()}finally{w=G}},t.unstable_requestPaint=function(){L=!0},t.unstable_runWithPriority=function(x,B){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var G=w;w=x;try{return B()}finally{w=G}},t.unstable_scheduleCallback=function(x,B,G){var X=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?X+G:X):G=X,x){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=G+z,x={id:m++,callback:B,priorityLevel:x,startTime:G,expirationTime:z,sortIndex:-1},G>X?(x.sortIndex=G,e(h,x),n(f)===null&&x===n(h)&&(P?(H(T),T=-1):P=!0,Q(E,G-X))):(x.sortIndex=z,e(f,x),M||C||(M=!0,b||(b=!0,$()))),x},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(x){var B=w;return function(){var G=w;w=B;try{return x.apply(this,arguments)}finally{w=G}}}}(My)),My}var oT;function lD(){return oT||(oT=1,Dy.exports=oD()),Dy.exports}var Py={exports:{}},Cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT;function uD(){if(lT)return Cn;lT=1;var t=Ud();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,h,m){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:_==null?null:""+_,children:f,containerInfo:h,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Cn.createPortal=function(f,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(f,h,null,m)},Cn.flushSync=function(f){var h=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=h,r.p=m,r.d.f()}},Cn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},Cn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Cn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var m=h.as,_=c(m,h.crossOrigin),w=typeof h.integrity=="string"?h.integrity:void 0,C=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:_,integrity:w,fetchPriority:C}):m==="script"&&r.d.X(f,{crossOrigin:_,integrity:w,fetchPriority:C,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Cn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=c(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},Cn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,_=c(m,h.crossOrigin);r.d.L(f,m,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Cn.preloadModule=function(f,h){if(typeof f=="string")if(h){var m=c(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},Cn.requestFormReset=function(f){r.d.r(f)},Cn.unstable_batchedUpdates=function(f,h){return f(h)},Cn.useFormState=function(f,h,m){return l.H.useFormState(f,h,m)},Cn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Cn.version="19.1.0",Cn}var uT;function T2(){if(uT)return Py.exports;uT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Py.exports=uD(),Py.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cT;function cD(){if(cT)return Pc;cT=1;var t=lD(),e=Ud(),n=T2();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function l(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function c(i){if(o(i)!==i)throw Error(r(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var u=i,d=a;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(d=g.return,d!==null){u=d;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return c(g),i;if(v===d)return c(g),a;v=v.sibling}throw Error(r(188))}if(u.return!==d.return)u=g,d=v;else{for(var N=!1,q=g.child;q;){if(q===u){N=!0,u=g,d=v;break}if(q===d){N=!0,d=g,u=v;break}q=q.sibling}if(!N){for(q=v.child;q;){if(q===u){N=!0,u=v,d=g;break}if(q===d){N=!0,d=v,u=g;break}q=q.sibling}if(!N)throw Error(r(189))}}if(u.alternate!==d)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?i:a}function h(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=h(i),a!==null)return a;i=i.sibling}return null}var m=Object.assign,_=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),K=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function $(i){return i===null||typeof i!="object"?null:(i=D&&i[D]||i["@@iterator"],typeof i=="function"?i:null)}var V=Symbol.for("react.client.reference");function U(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===V?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case L:return"Profiler";case P:return"StrictMode";case E:return"Suspense";case b:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case C:return"Portal";case K:return(i.displayName||"Context")+".Provider";case H:return(i._context.displayName||"Context")+".Consumer";case y:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case T:return a=i.displayName||null,a!==null?a:U(i.type)||"Memo";case A:a=i._payload,i=i._init;try{return U(i(a))}catch{}}return null}var Q=Array.isArray,x=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},X=[],z=-1;function W(i){return{current:i}}function ee(i){0>z||(i.current=X[z],X[z]=null,z--)}function Z(i,a){z++,X[z]=i.current,i.current=a}var ne=W(null),oe=W(null),ce=W(null),fe=W(null);function ge(i,a){switch(Z(ce,a),Z(oe,i),Z(ne,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?IE(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=IE(a),i=NE(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ee(ne),Z(ne,i)}function Ae(){ee(ne),ee(oe),ee(ce)}function xe(i){i.memoizedState!==null&&Z(fe,i);var a=ne.current,u=NE(a,i.type);a!==u&&(Z(oe,i),Z(ne,u))}function Ue(i){oe.current===i&&(ee(ne),ee(oe)),fe.current===i&&(ee(fe),Rc._currentValue=G)}var Ne=Object.prototype.hasOwnProperty,Le=t.unstable_scheduleCallback,rt=t.unstable_cancelCallback,st=t.unstable_shouldYield,Ht=t.unstable_requestPaint,Be=t.unstable_now,be=t.unstable_getCurrentPriorityLevel,kt=t.unstable_ImmediatePriority,An=t.unstable_UserBlockingPriority,Qt=t.unstable_NormalPriority,er=t.unstable_LowPriority,Pn=t.unstable_IdlePriority,On=t.log,$r=t.unstable_setDisableYieldValue,ot=null,Ye=null;function $t(i){if(typeof On=="function"&&$r(i),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(ot,i)}catch{}}var Tt=Math.clz32?Math.clz32:sn,li=Math.log,Ft=Math.LN2;function sn(i){return i>>>=0,i===0?32:31-(li(i)/Ft|0)|0}var Vn=256,Ln=4194304;function an(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function mn(i,a,u){var d=i.pendingLanes;if(d===0)return 0;var g=0,v=i.suspendedLanes,N=i.pingedLanes;i=i.warmLanes;var q=d&134217727;return q!==0?(d=q&~v,d!==0?g=an(d):(N&=q,N!==0?g=an(N):u||(u=q&~i,u!==0&&(g=an(u))))):(q=d&~v,q!==0?g=an(q):N!==0?g=an(N):u||(u=d&~i,u!==0&&(g=an(u)))),g===0?0:a!==0&&a!==g&&(a&v)===0&&(v=g&-g,u=a&-a,v>=u||v===32&&(u&4194048)!==0)?a:g}function zn(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function $i(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fi(){var i=Vn;return Vn<<=1,(Vn&4194048)===0&&(Vn=256),i}function Fr(){var i=Ln;return Ln<<=1,(Ln&62914560)===0&&(Ln=4194304),i}function tr(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function br(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function nr(i,a,u,d,g,v){var N=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var q=i.entanglements,J=i.expirationTimes,ae=i.hiddenUpdates;for(u=N&~u;0<u;){var he=31-Tt(u),ye=1<<he;q[he]=0,J[he]=-1;var le=ae[he];if(le!==null)for(ae[he]=null,he=0;he<le.length;he++){var ue=le[he];ue!==null&&(ue.lane&=-536870913)}u&=~ye}d!==0&&Er(i,d,0),v!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=v&~(N&~a))}function Er(i,a,u){i.pendingLanes|=a,i.suspendedLanes&=~a;var d=31-Tt(a);i.entangledLanes|=a,i.entanglements[d]=i.entanglements[d]|1073741824|u&4194090}function Pa(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var d=31-Tt(u),g=1<<d;g&a|i[d]&a&&(i[d]|=a),u&=~g}}function ui(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Cs(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ci(){var i=B.p;return i!==0?i:(i=window.event,i===void 0?32:WE(i.type))}function $o(i,a){var u=B.p;try{return B.p=i,a()}finally{B.p=u}}var yt=Math.random().toString(36).slice(2),Lt="__reactFiber$"+yt,It="__reactProps$"+yt,qn="__reactContainer$"+yt,Oa="__reactEvents$"+yt,Pu="__reactListeners$"+yt,di="__reactHandles$"+yt,Fo="__reactResources$"+yt,qi="__reactMarker$"+yt;function fi(i){delete i[Lt],delete i[It],delete i[Oa],delete i[Pu],delete i[di]}function Tr(i){var a=i[Lt];if(a)return a;for(var u=i.parentNode;u;){if(a=u[qn]||u[Lt]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=OE(i);i!==null;){if(u=i[Lt])return u;i=OE(i)}return a}i=u,u=i.parentNode}return null}function Sr(i){if(i=i[Lt]||i[qn]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Ar(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function gn(i){var a=i[Fo];return a||(a=i[Fo]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function St(i){i[qi]=!0}var Va=new Set,Rs={};function rr(i,a){qr(i,a),qr(i+"Capture",a)}function qr(i,a){for(Rs[i]=a,i=0;i<a.length;i++)Va.add(a[i])}var La=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qo={},Gi={};function Go(i){return Ne.call(Gi,i)?!0:Ne.call(qo,i)?!1:La.test(i)?Gi[i]=!0:(qo[i]=!0,!1)}function hi(i,a,u){if(Go(a))if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+u)}}function xr(i,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+u)}}function Zt(i,a,u,d){if(d===null)i.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(a,u,""+d)}}var pi,Ko;function Gr(i){if(pi===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);pi=a&&a[1]||"",Ko=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pi+i+Ko}var ks=!1;function mi(i,a){if(!i||ks)return"";ks=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(ue){var le=ue}Reflect.construct(i,[],ye)}else{try{ye.call()}catch(ue){le=ue}i.call(ye.prototype)}}else{try{throw Error()}catch(ue){le=ue}(ye=i())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(ue){if(ue&&le&&typeof ue.stack=="string")return[ue.stack,le.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),N=v[0],q=v[1];if(N&&q){var J=N.split(`
`),ae=q.split(`
`);for(g=d=0;d<J.length&&!J[d].includes("DetermineComponentFrameRoot");)d++;for(;g<ae.length&&!ae[g].includes("DetermineComponentFrameRoot");)g++;if(d===J.length||g===ae.length)for(d=J.length-1,g=ae.length-1;1<=d&&0<=g&&J[d]!==ae[g];)g--;for(;1<=d&&0<=g;d--,g--)if(J[d]!==ae[g]){if(d!==1||g!==1)do if(d--,g--,0>g||J[d]!==ae[g]){var he=`
`+J[d].replace(" at new "," at ");return i.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",i.displayName)),he}while(1<=d&&0<=g);break}}}finally{ks=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?Gr(u):""}function Ou(i){switch(i.tag){case 26:case 27:case 5:return Gr(i.type);case 16:return Gr("Lazy");case 13:return Gr("Suspense");case 19:return Gr("SuspenseList");case 0:case 15:return mi(i.type,!1);case 11:return mi(i.type.render,!1);case 1:return mi(i.type,!0);case 31:return Gr("Activity");default:return""}}function Yo(i){try{var a="";do a+=Ou(i),i=i.return;while(i);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function jn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Vu(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Mm(i){var a=Vu(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),d=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(N){d=""+N,v.call(this,N)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(N){d=""+N},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Xo(i){i._valueTracker||(i._valueTracker=Mm(i))}function Lu(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),d="";return i&&(d=Vu(i)?i.checked?"true":"false":i.value),i=d,i!==u?(a.setValue(i),!0):!1}function za(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Pm=/[\n"\\]/g;function qt(i){return i.replace(Pm,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function ir(i,a,u,d,g,v,N,q){i.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?i.type=N:i.removeAttribute("type"),a!=null?N==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+jn(a)):i.value!==""+jn(a)&&(i.value=""+jn(a)):N!=="submit"&&N!=="reset"||i.removeAttribute("value"),a!=null?Is(i,N,jn(a)):u!=null?Is(i,N,jn(u)):d!=null&&i.removeAttribute("value"),g==null&&v!=null&&(i.defaultChecked=!!v),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?i.name=""+jn(q):i.removeAttribute("name")}function ja(i,a,u,d,g,v,N,q){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),a!=null||u!=null){if(!(v!=="submit"&&v!=="reset"||a!=null))return;u=u!=null?""+jn(u):"",a=a!=null?""+jn(a):u,q||a===i.value||(i.value=a),i.defaultValue=a}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=q?i.checked:!!d,i.defaultChecked=!!d,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(i.name=N)}function Is(i,a,u){a==="number"&&za(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function Ki(i,a,u,d){if(i=i.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=a.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&d&&(i[u].defaultSelected=!0)}else{for(u=""+jn(u),a=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,d&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function ft(i,a,u){if(a!=null&&(a=""+jn(a),a!==i.value&&(i.value=a),u==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=u!=null?""+jn(u):""}function Ua(i,a,u,d){if(a==null){if(d!=null){if(u!=null)throw Error(r(92));if(Q(d)){if(1<d.length)throw Error(r(93));d=d[0]}u=d}u==null&&(u=""),a=u}u=jn(a),i.defaultValue=u,d=i.textContent,d===u&&d!==""&&d!==null&&(i.value=d)}function Cr(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var Ba=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lf(i,a,u){var d=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":d?i.setProperty(a,u):typeof u!="number"||u===0||Ba.has(a)?a==="float"?i.cssFloat=u:i[a]=(""+u).trim():i[a]=u+"px"}function zu(i,a,u){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var g in a)d=a[g],a.hasOwnProperty(g)&&u[g]!==d&&lf(i,g,d)}else for(var v in a)a.hasOwnProperty(v)&&lf(i,v,a[v])}function ju(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Om=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wo(i){return Vm.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Yi=null;function Rr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Xi=null,Wi=null;function Uu(i){var a=Sr(i);if(a&&(i=a.stateNode)){var u=i[It]||null;e:switch(i=a.stateNode,a.type){case"input":if(ir(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+qt(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var d=u[a];if(d!==i&&d.form===i.form){var g=d[It]||null;if(!g)throw Error(r(90));ir(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<u.length;a++)d=u[a],d.form===i.form&&Lu(d)}break e;case"textarea":ft(i,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&Ki(i,!!u.multiple,a,!1)}}}var gi=!1;function uf(i,a,u){if(gi)return i(a,u);gi=!0;try{var d=i(a);return d}finally{if(gi=!1,(Xi!==null||Wi!==null)&&(nh(),Xi&&(a=Xi,i=Wi,Wi=Xi=null,Uu(a),i)))for(a=0;a<i.length;a++)Uu(i[a])}}function Ha(i,a){var u=i.stateNode;if(u===null)return null;var d=u[It]||null;if(d===null)return null;u=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(r(231,a,typeof u));return u}var Kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kr=!1;if(Kr)try{var $a={};Object.defineProperty($a,"passive",{get:function(){kr=!0}}),window.addEventListener("test",$a,$a),window.removeEventListener("test",$a,$a)}catch{kr=!1}var yi=null,Ns=null,Qi=null;function Bu(){if(Qi)return Qi;var i,a=Ns,u=a.length,d,g="value"in yi?yi.value:yi.textContent,v=g.length;for(i=0;i<u&&a[i]===g[i];i++);var N=u-i;for(d=1;d<=N&&a[u-d]===g[v-d];d++);return Qi=g.slice(i,1<d?1-d:void 0)}function vi(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function _i(){return!0}function Hu(){return!1}function on(i){function a(u,d,g,v,N){this._reactName=u,this._targetInst=g,this.type=d,this.nativeEvent=v,this.target=N,this.currentTarget=null;for(var q in i)i.hasOwnProperty(q)&&(u=i[q],this[q]=u?u(v):v[q]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?_i:Hu,this.isPropagationStopped=Hu,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=_i)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=_i)},persist:function(){},isPersistent:_i}),a}var lt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qo=on(lt),Fa=m({},lt,{view:0,detail:0}),cf=on(Fa),Zo,Jo,wi,qa=m({},Fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ya,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==wi&&(wi&&i.type==="mousemove"?(Zo=i.screenX-wi.screenX,Jo=i.screenY-wi.screenY):Jo=Zo=0,wi=i),Zo)},movementY:function(i){return"movementY"in i?i.movementY:Jo}}),Ir=on(qa),df=m({},qa,{dataTransfer:0}),Lm=on(df),Ga=m({},Fa,{relatedTarget:0}),el=on(Ga),$u=m({},lt,{animationName:0,elapsedTime:0,pseudoElement:0}),tl=on($u),ff=m({},lt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),nl=on(ff),zm=m({},lt,{data:0}),Fu=on(zm),Ka={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qu(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=pf[i])?!!a[i]:!1}function Ya(){return qu}var mf=m({},Fa,{key:function(i){if(i.key){var a=Ka[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=vi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?hf[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ya,charCode:function(i){return i.type==="keypress"?vi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?vi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),rl=on(mf),gf=m({},qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gu=on(gf),Zi=m({},Fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ya}),yf=on(Zi),vf=m({},lt,{propertyName:0,elapsedTime:0,pseudoElement:0}),_f=on(vf),wf=m({},qa,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),il=on(wf),Un=m({},lt,{newState:0,oldState:0}),bf=on(Un),Ef=[9,13,27,32],bi=Kr&&"CompositionEvent"in window,p=null;Kr&&"documentMode"in document&&(p=document.documentMode);var S=Kr&&"TextEvent"in window&&!p,I=Kr&&(!bi||p&&8<p&&11>=p),Y=" ",ie=!1;function de(i,a){switch(i){case"keyup":return Ef.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function we(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Je=!1;function Jt(i,a){switch(i){case"compositionend":return we(a);case"keypress":return a.which!==32?null:(ie=!0,Y);case"textInput":return i=a.data,i===Y&&ie?null:i;default:return null}}function et(i,a){if(Je)return i==="compositionend"||!bi&&de(i,a)?(i=Bu(),Qi=Ns=yi=null,Je=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return I&&a.locale!=="ko"?null:a.data;default:return null}}var ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function en(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!ln[i.type]:a==="textarea"}function Ji(i,a,u,d){Xi?Wi?Wi.push(d):Wi=[d]:Xi=d,a=lh(a,"onChange"),0<a.length&&(u=new Qo("onChange","change",null,u,d),i.push({event:u,listeners:a}))}var yn=null,Ei=null;function Ku(i){AE(i,0)}function Tf(i){var a=Ar(i);if(Lu(a))return i}function Gw(i,a){if(i==="change")return a}var Kw=!1;if(Kr){var jm;if(Kr){var Um="oninput"in document;if(!Um){var Yw=document.createElement("div");Yw.setAttribute("oninput","return;"),Um=typeof Yw.oninput=="function"}jm=Um}else jm=!1;Kw=jm&&(!document.documentMode||9<document.documentMode)}function Xw(){yn&&(yn.detachEvent("onpropertychange",Ww),Ei=yn=null)}function Ww(i){if(i.propertyName==="value"&&Tf(Ei)){var a=[];Ji(a,Ei,i,Rr(i)),uf(Ku,a)}}function DI(i,a,u){i==="focusin"?(Xw(),yn=a,Ei=u,yn.attachEvent("onpropertychange",Ww)):i==="focusout"&&Xw()}function MI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Tf(Ei)}function PI(i,a){if(i==="click")return Tf(a)}function OI(i,a){if(i==="input"||i==="change")return Tf(a)}function VI(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var sr=typeof Object.is=="function"?Object.is:VI;function Yu(i,a){if(sr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),d=Object.keys(a);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var g=u[d];if(!Ne.call(a,g)||!sr(i[g],a[g]))return!1}return!0}function Qw(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Zw(i,a){var u=Qw(i);i=0;for(var d;u;){if(u.nodeType===3){if(d=i+u.textContent.length,i<=a&&d>=a)return{node:u,offset:a-i};i=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Qw(u)}}function Jw(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Jw(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function eb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=za(i.document);a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=za(i.document)}return a}function Bm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var LI=Kr&&"documentMode"in document&&11>=document.documentMode,sl=null,Hm=null,Xu=null,$m=!1;function tb(i,a,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;$m||sl==null||sl!==za(d)||(d=sl,"selectionStart"in d&&Bm(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Xu&&Yu(Xu,d)||(Xu=d,d=lh(Hm,"onSelect"),0<d.length&&(a=new Qo("onSelect","select",null,a,u),i.push({event:a,listeners:d}),a.target=sl)))}function Xa(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var al={animationend:Xa("Animation","AnimationEnd"),animationiteration:Xa("Animation","AnimationIteration"),animationstart:Xa("Animation","AnimationStart"),transitionrun:Xa("Transition","TransitionRun"),transitionstart:Xa("Transition","TransitionStart"),transitioncancel:Xa("Transition","TransitionCancel"),transitionend:Xa("Transition","TransitionEnd")},Fm={},nb={};Kr&&(nb=document.createElement("div").style,"AnimationEvent"in window||(delete al.animationend.animation,delete al.animationiteration.animation,delete al.animationstart.animation),"TransitionEvent"in window||delete al.transitionend.transition);function Wa(i){if(Fm[i])return Fm[i];if(!al[i])return i;var a=al[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in nb)return Fm[i]=a[u];return i}var rb=Wa("animationend"),ib=Wa("animationiteration"),sb=Wa("animationstart"),zI=Wa("transitionrun"),jI=Wa("transitionstart"),UI=Wa("transitioncancel"),ab=Wa("transitionend"),ob=new Map,qm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qm.push("scrollEnd");function Yr(i,a){ob.set(i,a),rr(a,[i])}var lb=new WeakMap;function Nr(i,a){if(typeof i=="object"&&i!==null){var u=lb.get(i);return u!==void 0?u:(a={value:i,source:a,stack:Yo(a)},lb.set(i,a),a)}return{value:i,source:a,stack:Yo(a)}}var Dr=[],ol=0,Gm=0;function Sf(){for(var i=ol,a=Gm=ol=0;a<i;){var u=Dr[a];Dr[a++]=null;var d=Dr[a];Dr[a++]=null;var g=Dr[a];Dr[a++]=null;var v=Dr[a];if(Dr[a++]=null,d!==null&&g!==null){var N=d.pending;N===null?g.next=g:(g.next=N.next,N.next=g),d.pending=g}v!==0&&ub(u,g,v)}}function Af(i,a,u,d){Dr[ol++]=i,Dr[ol++]=a,Dr[ol++]=u,Dr[ol++]=d,Gm|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Km(i,a,u,d){return Af(i,a,u,d),xf(i)}function ll(i,a){return Af(i,null,null,a),xf(i)}function ub(i,a,u){i.lanes|=u;var d=i.alternate;d!==null&&(d.lanes|=u);for(var g=!1,v=i.return;v!==null;)v.childLanes|=u,d=v.alternate,d!==null&&(d.childLanes|=u),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(g=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,g&&a!==null&&(g=31-Tt(u),i=v.hiddenUpdates,d=i[g],d===null?i[g]=[a]:d.push(a),a.lane=u|536870912),v):null}function xf(i){if(50<wc)throw wc=0,Jg=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var ul={};function BI(i,a,u,d){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(i,a,u,d){return new BI(i,a,u,d)}function Ym(i){return i=i.prototype,!(!i||!i.isReactComponent)}function es(i,a){var u=i.alternate;return u===null?(u=ar(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function cb(i,a){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,a=u.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Cf(i,a,u,d,g,v){var N=0;if(d=i,typeof i=="function")Ym(i)&&(N=1);else if(typeof i=="string")N=$N(i,u,ne.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=ar(31,u,a,g),i.elementType=R,i.lanes=v,i;case M:return Qa(u.children,g,v,a);case P:N=8,g|=24;break;case L:return i=ar(12,u,a,g|2),i.elementType=L,i.lanes=v,i;case E:return i=ar(13,u,a,g),i.elementType=E,i.lanes=v,i;case b:return i=ar(19,u,a,g),i.elementType=b,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:case K:N=10;break e;case H:N=9;break e;case y:N=11;break e;case T:N=14;break e;case A:N=16,d=null;break e}N=29,u=Error(r(130,i===null?"null":typeof i,"")),d=null}return a=ar(N,u,a,g),a.elementType=i,a.type=d,a.lanes=v,a}function Qa(i,a,u,d){return i=ar(7,i,d,a),i.lanes=u,i}function Xm(i,a,u){return i=ar(6,i,null,a),i.lanes=u,i}function Wm(i,a,u){return a=ar(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var cl=[],dl=0,Rf=null,kf=0,Mr=[],Pr=0,Za=null,ts=1,ns="";function Ja(i,a){cl[dl++]=kf,cl[dl++]=Rf,Rf=i,kf=a}function db(i,a,u){Mr[Pr++]=ts,Mr[Pr++]=ns,Mr[Pr++]=Za,Za=i;var d=ts;i=ns;var g=32-Tt(d)-1;d&=~(1<<g),u+=1;var v=32-Tt(a)+g;if(30<v){var N=g-g%5;v=(d&(1<<N)-1).toString(32),d>>=N,g-=N,ts=1<<32-Tt(a)+g|u<<g|d,ns=v+i}else ts=1<<v|u<<g|d,ns=i}function Qm(i){i.return!==null&&(Ja(i,1),db(i,1,0))}function Zm(i){for(;i===Rf;)Rf=cl[--dl],cl[dl]=null,kf=cl[--dl],cl[dl]=null;for(;i===Za;)Za=Mr[--Pr],Mr[Pr]=null,ns=Mr[--Pr],Mr[Pr]=null,ts=Mr[--Pr],Mr[Pr]=null}var Bn=null,Nt=null,at=!1,eo=null,Ti=!1,Jm=Error(r(519));function to(i){var a=Error(r(418,""));throw Zu(Nr(a,i)),Jm}function fb(i){var a=i.stateNode,u=i.type,d=i.memoizedProps;switch(a[Lt]=i,a[It]=d,u){case"dialog":We("cancel",a),We("close",a);break;case"iframe":case"object":case"embed":We("load",a);break;case"video":case"audio":for(u=0;u<Ec.length;u++)We(Ec[u],a);break;case"source":We("error",a);break;case"img":case"image":case"link":We("error",a),We("load",a);break;case"details":We("toggle",a);break;case"input":We("invalid",a),ja(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Xo(a);break;case"select":We("invalid",a);break;case"textarea":We("invalid",a),Ua(a,d.value,d.defaultValue,d.children),Xo(a)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||d.suppressHydrationWarning===!0||kE(a.textContent,u)?(d.popover!=null&&(We("beforetoggle",a),We("toggle",a)),d.onScroll!=null&&We("scroll",a),d.onScrollEnd!=null&&We("scrollend",a),d.onClick!=null&&(a.onclick=uh),a=!0):a=!1,a||to(i)}function hb(i){for(Bn=i.return;Bn;)switch(Bn.tag){case 5:case 13:Ti=!1;return;case 27:case 3:Ti=!0;return;default:Bn=Bn.return}}function Wu(i){if(i!==Bn)return!1;if(!at)return hb(i),at=!0,!1;var a=i.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||my(i.type,i.memoizedProps)),u=!u),u&&Nt&&to(i),hb(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(u=i.data,u==="/$"){if(a===0){Nt=Wr(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++;i=i.nextSibling}Nt=null}}else a===27?(a=Nt,Ks(i.type)?(i=_y,_y=null,Nt=i):Nt=a):Nt=Bn?Wr(i.stateNode.nextSibling):null;return!0}function Qu(){Nt=Bn=null,at=!1}function pb(){var i=eo;return i!==null&&(Yn===null?Yn=i:Yn.push.apply(Yn,i),eo=null),i}function Zu(i){eo===null?eo=[i]:eo.push(i)}var eg=W(null),no=null,rs=null;function Ds(i,a,u){Z(eg,a._currentValue),a._currentValue=u}function is(i){i._currentValue=eg.current,ee(eg)}function tg(i,a,u){for(;i!==null;){var d=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),i===u)break;i=i.return}}function ng(i,a,u,d){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var v=g.dependencies;if(v!==null){var N=g.child;v=v.firstContext;e:for(;v!==null;){var q=v;v=g;for(var J=0;J<a.length;J++)if(q.context===a[J]){v.lanes|=u,q=v.alternate,q!==null&&(q.lanes|=u),tg(v.return,u,i),d||(N=null);break e}v=q.next}}else if(g.tag===18){if(N=g.return,N===null)throw Error(r(341));N.lanes|=u,v=N.alternate,v!==null&&(v.lanes|=u),tg(N,u,i),N=null}else N=g.child;if(N!==null)N.return=g;else for(N=g;N!==null;){if(N===i){N=null;break}if(g=N.sibling,g!==null){g.return=N.return,N=g;break}N=N.return}g=N}}function Ju(i,a,u,d){i=null;for(var g=a,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var N=g.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var q=g.type;sr(g.pendingProps.value,N.value)||(i!==null?i.push(q):i=[q])}}else if(g===fe.current){if(N=g.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Rc):i=[Rc])}g=g.return}i!==null&&ng(a,i,u,d),a.flags|=262144}function If(i){for(i=i.firstContext;i!==null;){if(!sr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ro(i){no=i,rs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function xn(i){return mb(no,i)}function Nf(i,a){return no===null&&ro(i),mb(i,a)}function mb(i,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},rs===null){if(i===null)throw Error(r(308));rs=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else rs=rs.next=a;return u}var HI=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(u,d){i.push(d)}};this.abort=function(){a.aborted=!0,i.forEach(function(u){return u()})}},$I=t.unstable_scheduleCallback,FI=t.unstable_NormalPriority,tn={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rg(){return{controller:new HI,data:new Map,refCount:0}}function ec(i){i.refCount--,i.refCount===0&&$I(FI,function(){i.controller.abort()})}var tc=null,ig=0,fl=0,hl=null;function qI(i,a){if(tc===null){var u=tc=[];ig=0,fl=ay(),hl={status:"pending",value:void 0,then:function(d){u.push(d)}}}return ig++,a.then(gb,gb),a}function gb(){if(--ig===0&&tc!==null){hl!==null&&(hl.status="fulfilled");var i=tc;tc=null,fl=0,hl=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function GI(i,a){var u=[],d={status:"pending",value:null,reason:null,then:function(g){u.push(g)}};return i.then(function(){d.status="fulfilled",d.value=a;for(var g=0;g<u.length;g++)(0,u[g])(a)},function(g){for(d.status="rejected",d.reason=g,g=0;g<u.length;g++)(0,u[g])(void 0)}),d}var yb=x.S;x.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&qI(i,a),yb!==null&&yb(i,a)};var io=W(null);function sg(){var i=io.current;return i!==null?i:vt.pooledCache}function Df(i,a){a===null?Z(io,io.current):Z(io,a.pool)}function vb(){var i=sg();return i===null?null:{parent:tn._currentValue,pool:i}}var nc=Error(r(460)),_b=Error(r(474)),Mf=Error(r(542)),ag={then:function(){}};function wb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Pf(){}function bb(i,a,u){switch(u=i[u],u===void 0?i.push(a):u!==a&&(a.then(Pf,Pf),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Tb(i),i;default:if(typeof a.status=="string")a.then(Pf,Pf);else{if(i=vt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(d){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=d}},function(d){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Tb(i),i}throw rc=a,nc}}var rc=null;function Eb(){if(rc===null)throw Error(r(459));var i=rc;return rc=null,i}function Tb(i){if(i===nc||i===Mf)throw Error(r(483))}var Ms=!1;function og(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ps(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Os(i,a,u){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(ct&2)!==0){var g=d.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),d.pending=a,a=xf(i),ub(i,null,u),a}return Af(i,d,a,u),xf(i)}function ic(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var d=a.lanes;d&=i.pendingLanes,u|=d,a.lanes=u,Pa(i,u)}}function ug(i,a){var u=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var N={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};v===null?g=v=N:v=v.next=N,u=u.next}while(u!==null);v===null?g=v=a:v=v.next=a}else g=v=a;u={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}var cg=!1;function sc(){if(cg){var i=hl;if(i!==null)throw i}}function ac(i,a,u,d){cg=!1;var g=i.updateQueue;Ms=!1;var v=g.firstBaseUpdate,N=g.lastBaseUpdate,q=g.shared.pending;if(q!==null){g.shared.pending=null;var J=q,ae=J.next;J.next=null,N===null?v=ae:N.next=ae,N=J;var he=i.alternate;he!==null&&(he=he.updateQueue,q=he.lastBaseUpdate,q!==N&&(q===null?he.firstBaseUpdate=ae:q.next=ae,he.lastBaseUpdate=J))}if(v!==null){var ye=g.baseState;N=0,he=ae=J=null,q=v;do{var le=q.lane&-536870913,ue=le!==q.lane;if(ue?(tt&le)===le:(d&le)===le){le!==0&&le===fl&&(cg=!0),he!==null&&(he=he.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var Oe=i,Ie=q;le=a;var mt=u;switch(Ie.tag){case 1:if(Oe=Ie.payload,typeof Oe=="function"){ye=Oe.call(mt,ye,le);break e}ye=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ie.payload,le=typeof Oe=="function"?Oe.call(mt,ye,le):Oe,le==null)break e;ye=m({},ye,le);break e;case 2:Ms=!0}}le=q.callback,le!==null&&(i.flags|=64,ue&&(i.flags|=8192),ue=g.callbacks,ue===null?g.callbacks=[le]:ue.push(le))}else ue={lane:le,tag:q.tag,payload:q.payload,callback:q.callback,next:null},he===null?(ae=he=ue,J=ye):he=he.next=ue,N|=le;if(q=q.next,q===null){if(q=g.shared.pending,q===null)break;ue=q,q=ue.next,ue.next=null,g.lastBaseUpdate=ue,g.shared.pending=null}}while(!0);he===null&&(J=ye),g.baseState=J,g.firstBaseUpdate=ae,g.lastBaseUpdate=he,v===null&&(g.shared.lanes=0),$s|=N,i.lanes=N,i.memoizedState=ye}}function Sb(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function Ab(i,a){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)Sb(u[i],a)}var pl=W(null),Of=W(0);function xb(i,a){i=ds,Z(Of,i),Z(pl,a),ds=i|a.baseLanes}function dg(){Z(Of,ds),Z(pl,pl.current)}function fg(){ds=Of.current,ee(pl),ee(Of)}var Vs=0,Fe=null,ht=null,Gt=null,Vf=!1,ml=!1,so=!1,Lf=0,oc=0,gl=null,KI=0;function zt(){throw Error(r(321))}function hg(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!sr(i[u],a[u]))return!1;return!0}function pg(i,a,u,d,g,v){return Vs=v,Fe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,x.H=i===null||i.memoizedState===null?u1:c1,so=!1,v=u(d,g),so=!1,ml&&(v=Rb(a,u,d,g)),Cb(i),v}function Cb(i){x.H=$f;var a=ht!==null&&ht.next!==null;if(Vs=0,Gt=ht=Fe=null,Vf=!1,oc=0,gl=null,a)throw Error(r(300));i===null||un||(i=i.dependencies,i!==null&&If(i)&&(un=!0))}function Rb(i,a,u,d){Fe=i;var g=0;do{if(ml&&(gl=null),oc=0,ml=!1,25<=g)throw Error(r(301));if(g+=1,Gt=ht=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}x.H=eN,v=a(u,d)}while(ml);return v}function YI(){var i=x.H,a=i.useState()[0];return a=typeof a.then=="function"?lc(a):a,i=i.useState()[0],(ht!==null?ht.memoizedState:null)!==i&&(Fe.flags|=1024),a}function mg(){var i=Lf!==0;return Lf=0,i}function gg(i,a,u){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~u}function yg(i){if(Vf){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Vf=!1}Vs=0,Gt=ht=Fe=null,ml=!1,oc=Lf=0,gl=null}function Gn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Fe.memoizedState=Gt=i:Gt=Gt.next=i,Gt}function Kt(){if(ht===null){var i=Fe.alternate;i=i!==null?i.memoizedState:null}else i=ht.next;var a=Gt===null?Fe.memoizedState:Gt.next;if(a!==null)Gt=a,ht=i;else{if(i===null)throw Fe.alternate===null?Error(r(467)):Error(r(310));ht=i,i={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Gt===null?Fe.memoizedState=Gt=i:Gt=Gt.next=i}return Gt}function vg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lc(i){var a=oc;return oc+=1,gl===null&&(gl=[]),i=bb(gl,i,a),a=Fe,(Gt===null?a.memoizedState:Gt.next)===null&&(a=a.alternate,x.H=a===null||a.memoizedState===null?u1:c1),i}function zf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return lc(i);if(i.$$typeof===K)return xn(i)}throw Error(r(438,String(i)))}function _g(i){var a=null,u=Fe.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var d=Fe.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=vg(),Fe.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(i),d=0;d<i;d++)u[d]=k;return a.index++,u}function ss(i,a){return typeof a=="function"?a(i):a}function jf(i){var a=Kt();return wg(a,ht,i)}function wg(i,a,u){var d=i.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=u;var g=i.baseQueue,v=d.pending;if(v!==null){if(g!==null){var N=g.next;g.next=v.next,v.next=N}a.baseQueue=g=v,d.pending=null}if(v=i.baseState,g===null)i.memoizedState=v;else{a=g.next;var q=N=null,J=null,ae=a,he=!1;do{var ye=ae.lane&-536870913;if(ye!==ae.lane?(tt&ye)===ye:(Vs&ye)===ye){var le=ae.revertLane;if(le===0)J!==null&&(J=J.next={lane:0,revertLane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),ye===fl&&(he=!0);else if((Vs&le)===le){ae=ae.next,le===fl&&(he=!0);continue}else ye={lane:0,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},J===null?(q=J=ye,N=v):J=J.next=ye,Fe.lanes|=le,$s|=le;ye=ae.action,so&&u(v,ye),v=ae.hasEagerState?ae.eagerState:u(v,ye)}else le={lane:ye,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},J===null?(q=J=le,N=v):J=J.next=le,Fe.lanes|=ye,$s|=ye;ae=ae.next}while(ae!==null&&ae!==a);if(J===null?N=v:J.next=q,!sr(v,i.memoizedState)&&(un=!0,he&&(u=hl,u!==null)))throw u;i.memoizedState=v,i.baseState=N,i.baseQueue=J,d.lastRenderedState=v}return g===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function bg(i){var a=Kt(),u=a.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=i;var d=u.dispatch,g=u.pending,v=a.memoizedState;if(g!==null){u.pending=null;var N=g=g.next;do v=i(v,N.action),N=N.next;while(N!==g);sr(v,a.memoizedState)||(un=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),u.lastRenderedState=v}return[v,d]}function kb(i,a,u){var d=Fe,g=Kt(),v=at;if(v){if(u===void 0)throw Error(r(407));u=u()}else u=a();var N=!sr((ht||g).memoizedState,u);N&&(g.memoizedState=u,un=!0),g=g.queue;var q=Db.bind(null,d,g,i);if(uc(2048,8,q,[i]),g.getSnapshot!==a||N||Gt!==null&&Gt.memoizedState.tag&1){if(d.flags|=2048,yl(9,Uf(),Nb.bind(null,d,g,u,a),null),vt===null)throw Error(r(349));v||(Vs&124)!==0||Ib(d,a,u)}return u}function Ib(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=Fe.updateQueue,a===null?(a=vg(),Fe.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function Nb(i,a,u,d){a.value=u,a.getSnapshot=d,Mb(a)&&Pb(i)}function Db(i,a,u){return u(function(){Mb(a)&&Pb(i)})}function Mb(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!sr(i,u)}catch{return!0}}function Pb(i){var a=ll(i,2);a!==null&&dr(a,i,2)}function Eg(i){var a=Gn();if(typeof i=="function"){var u=i;if(i=u(),so){$t(!0);try{u()}finally{$t(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:i},a}function Ob(i,a,u,d){return i.baseState=u,wg(i,ht,typeof d=="function"?d:ss)}function XI(i,a,u,d,g){if(Hf(i))throw Error(r(485));if(i=a.action,i!==null){var v={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){v.listeners.push(N)}};x.T!==null?u(!0):v.isTransition=!1,d(v),u=a.pending,u===null?(v.next=a.pending=v,Vb(a,v)):(v.next=u.next,a.pending=u.next=v)}}function Vb(i,a){var u=a.action,d=a.payload,g=i.state;if(a.isTransition){var v=x.T,N={};x.T=N;try{var q=u(g,d),J=x.S;J!==null&&J(N,q),Lb(i,a,q)}catch(ae){Tg(i,a,ae)}finally{x.T=v}}else try{v=u(g,d),Lb(i,a,v)}catch(ae){Tg(i,a,ae)}}function Lb(i,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){zb(i,a,d)},function(d){return Tg(i,a,d)}):zb(i,a,u)}function zb(i,a,u){a.status="fulfilled",a.value=u,jb(a),i.state=u,a=i.pending,a!==null&&(u=a.next,u===a?i.pending=null:(u=u.next,a.next=u,Vb(i,u)))}function Tg(i,a,u){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=u,jb(a),a=a.next;while(a!==d)}i.action=null}function jb(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Ub(i,a){return a}function Bb(i,a){if(at){var u=vt.formState;if(u!==null){e:{var d=Fe;if(at){if(Nt){t:{for(var g=Nt,v=Ti;g.nodeType!==8;){if(!v){g=null;break t}if(g=Wr(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){Nt=Wr(g.nextSibling),d=g.data==="F!";break e}}to(d)}d=!1}d&&(a=u[0])}}return u=Gn(),u.memoizedState=u.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ub,lastRenderedState:a},u.queue=d,u=a1.bind(null,Fe,d),d.dispatch=u,d=Eg(!1),v=Rg.bind(null,Fe,!1,d.queue),d=Gn(),g={state:a,dispatch:null,action:i,pending:null},d.queue=g,u=XI.bind(null,Fe,g,v,u),g.dispatch=u,d.memoizedState=i,[a,u,!1]}function Hb(i){var a=Kt();return $b(a,ht,i)}function $b(i,a,u){if(a=wg(i,a,Ub)[0],i=jf(ss)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=lc(a)}catch(N){throw N===nc?Mf:N}else d=a;a=Kt();var g=a.queue,v=g.dispatch;return u!==a.memoizedState&&(Fe.flags|=2048,yl(9,Uf(),WI.bind(null,g,u),null)),[d,v,i]}function WI(i,a){i.action=a}function Fb(i){var a=Kt(),u=ht;if(u!==null)return $b(a,u,i);Kt(),a=a.memoizedState,u=Kt();var d=u.queue.dispatch;return u.memoizedState=i,[a,d,!1]}function yl(i,a,u,d){return i={tag:i,create:u,deps:d,inst:a,next:null},a=Fe.updateQueue,a===null&&(a=vg(),Fe.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=i.next=i:(d=u.next,u.next=i,i.next=d,a.lastEffect=i),i}function Uf(){return{destroy:void 0,resource:void 0}}function qb(){return Kt().memoizedState}function Bf(i,a,u,d){var g=Gn();d=d===void 0?null:d,Fe.flags|=i,g.memoizedState=yl(1|a,Uf(),u,d)}function uc(i,a,u,d){var g=Kt();d=d===void 0?null:d;var v=g.memoizedState.inst;ht!==null&&d!==null&&hg(d,ht.memoizedState.deps)?g.memoizedState=yl(a,v,u,d):(Fe.flags|=i,g.memoizedState=yl(1|a,v,u,d))}function Gb(i,a){Bf(8390656,8,i,a)}function Kb(i,a){uc(2048,8,i,a)}function Yb(i,a){return uc(4,2,i,a)}function Xb(i,a){return uc(4,4,i,a)}function Wb(i,a){if(typeof a=="function"){i=i();var u=a(i);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Qb(i,a,u){u=u!=null?u.concat([i]):null,uc(4,4,Wb.bind(null,a,i),u)}function Sg(){}function Zb(i,a){var u=Kt();a=a===void 0?null:a;var d=u.memoizedState;return a!==null&&hg(a,d[1])?d[0]:(u.memoizedState=[i,a],i)}function Jb(i,a){var u=Kt();a=a===void 0?null:a;var d=u.memoizedState;if(a!==null&&hg(a,d[1]))return d[0];if(d=i(),so){$t(!0);try{i()}finally{$t(!1)}}return u.memoizedState=[d,a],d}function Ag(i,a,u){return u===void 0||(Vs&1073741824)!==0?i.memoizedState=a:(i.memoizedState=u,i=nE(),Fe.lanes|=i,$s|=i,u)}function e1(i,a,u,d){return sr(u,a)?u:pl.current!==null?(i=Ag(i,u,d),sr(i,a)||(un=!0),i):(Vs&42)===0?(un=!0,i.memoizedState=u):(i=nE(),Fe.lanes|=i,$s|=i,a)}function t1(i,a,u,d,g){var v=B.p;B.p=v!==0&&8>v?v:8;var N=x.T,q={};x.T=q,Rg(i,!1,a,u);try{var J=g(),ae=x.S;if(ae!==null&&ae(q,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var he=GI(J,d);cc(i,a,he,cr(i))}else cc(i,a,d,cr(i))}catch(ye){cc(i,a,{then:function(){},status:"rejected",reason:ye},cr())}finally{B.p=v,x.T=N}}function QI(){}function xg(i,a,u,d){if(i.tag!==5)throw Error(r(476));var g=n1(i).queue;t1(i,g,a,G,u===null?QI:function(){return r1(i),u(d)})}function n1(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:G},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:u},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function r1(i){var a=n1(i).next.queue;cc(i,a,{},cr())}function Cg(){return xn(Rc)}function i1(){return Kt().memoizedState}function s1(){return Kt().memoizedState}function ZI(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var u=cr();i=Ps(u);var d=Os(a,i,u);d!==null&&(dr(d,a,u),ic(d,a,u)),a={cache:rg()},i.payload=a;return}a=a.return}}function JI(i,a,u){var d=cr();u={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Hf(i)?o1(a,u):(u=Km(i,a,u,d),u!==null&&(dr(u,i,d),l1(u,a,d)))}function a1(i,a,u){var d=cr();cc(i,a,u,d)}function cc(i,a,u,d){var g={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Hf(i))o1(a,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var N=a.lastRenderedState,q=v(N,u);if(g.hasEagerState=!0,g.eagerState=q,sr(q,N))return Af(i,a,g,0),vt===null&&Sf(),!1}catch{}finally{}if(u=Km(i,a,g,d),u!==null)return dr(u,i,d),l1(u,a,d),!0}return!1}function Rg(i,a,u,d){if(d={lane:2,revertLane:ay(),action:d,hasEagerState:!1,eagerState:null,next:null},Hf(i)){if(a)throw Error(r(479))}else a=Km(i,u,d,2),a!==null&&dr(a,i,2)}function Hf(i){var a=i.alternate;return i===Fe||a!==null&&a===Fe}function o1(i,a){ml=Vf=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function l1(i,a,u){if((u&4194048)!==0){var d=a.lanes;d&=i.pendingLanes,u|=d,a.lanes=u,Pa(i,u)}}var $f={readContext:xn,use:zf,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt},u1={readContext:xn,use:zf,useCallback:function(i,a){return Gn().memoizedState=[i,a===void 0?null:a],i},useContext:xn,useEffect:Gb,useImperativeHandle:function(i,a,u){u=u!=null?u.concat([i]):null,Bf(4194308,4,Wb.bind(null,a,i),u)},useLayoutEffect:function(i,a){return Bf(4194308,4,i,a)},useInsertionEffect:function(i,a){Bf(4,2,i,a)},useMemo:function(i,a){var u=Gn();a=a===void 0?null:a;var d=i();if(so){$t(!0);try{i()}finally{$t(!1)}}return u.memoizedState=[d,a],d},useReducer:function(i,a,u){var d=Gn();if(u!==void 0){var g=u(a);if(so){$t(!0);try{u(a)}finally{$t(!1)}}}else g=a;return d.memoizedState=d.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},d.queue=i,i=i.dispatch=JI.bind(null,Fe,i),[d.memoizedState,i]},useRef:function(i){var a=Gn();return i={current:i},a.memoizedState=i},useState:function(i){i=Eg(i);var a=i.queue,u=a1.bind(null,Fe,a);return a.dispatch=u,[i.memoizedState,u]},useDebugValue:Sg,useDeferredValue:function(i,a){var u=Gn();return Ag(u,i,a)},useTransition:function(){var i=Eg(!1);return i=t1.bind(null,Fe,i.queue,!0,!1),Gn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,u){var d=Fe,g=Gn();if(at){if(u===void 0)throw Error(r(407));u=u()}else{if(u=a(),vt===null)throw Error(r(349));(tt&124)!==0||Ib(d,a,u)}g.memoizedState=u;var v={value:u,getSnapshot:a};return g.queue=v,Gb(Db.bind(null,d,v,i),[i]),d.flags|=2048,yl(9,Uf(),Nb.bind(null,d,v,u,a),null),u},useId:function(){var i=Gn(),a=vt.identifierPrefix;if(at){var u=ns,d=ts;u=(d&~(1<<32-Tt(d)-1)).toString(32)+u,a=""+a+"R"+u,u=Lf++,0<u&&(a+="H"+u.toString(32)),a+=""}else u=KI++,a=""+a+"r"+u.toString(32)+"";return i.memoizedState=a},useHostTransitionStatus:Cg,useFormState:Bb,useActionState:Bb,useOptimistic:function(i){var a=Gn();a.memoizedState=a.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Rg.bind(null,Fe,!0,u),u.dispatch=a,[i,a]},useMemoCache:_g,useCacheRefresh:function(){return Gn().memoizedState=ZI.bind(null,Fe)}},c1={readContext:xn,use:zf,useCallback:Zb,useContext:xn,useEffect:Kb,useImperativeHandle:Qb,useInsertionEffect:Yb,useLayoutEffect:Xb,useMemo:Jb,useReducer:jf,useRef:qb,useState:function(){return jf(ss)},useDebugValue:Sg,useDeferredValue:function(i,a){var u=Kt();return e1(u,ht.memoizedState,i,a)},useTransition:function(){var i=jf(ss)[0],a=Kt().memoizedState;return[typeof i=="boolean"?i:lc(i),a]},useSyncExternalStore:kb,useId:i1,useHostTransitionStatus:Cg,useFormState:Hb,useActionState:Hb,useOptimistic:function(i,a){var u=Kt();return Ob(u,ht,i,a)},useMemoCache:_g,useCacheRefresh:s1},eN={readContext:xn,use:zf,useCallback:Zb,useContext:xn,useEffect:Kb,useImperativeHandle:Qb,useInsertionEffect:Yb,useLayoutEffect:Xb,useMemo:Jb,useReducer:bg,useRef:qb,useState:function(){return bg(ss)},useDebugValue:Sg,useDeferredValue:function(i,a){var u=Kt();return ht===null?Ag(u,i,a):e1(u,ht.memoizedState,i,a)},useTransition:function(){var i=bg(ss)[0],a=Kt().memoizedState;return[typeof i=="boolean"?i:lc(i),a]},useSyncExternalStore:kb,useId:i1,useHostTransitionStatus:Cg,useFormState:Fb,useActionState:Fb,useOptimistic:function(i,a){var u=Kt();return ht!==null?Ob(u,ht,i,a):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:_g,useCacheRefresh:s1},vl=null,dc=0;function Ff(i){var a=dc;return dc+=1,vl===null&&(vl=[]),bb(vl,i,a)}function fc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function qf(i,a){throw a.$$typeof===_?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function d1(i){var a=i._init;return a(i._payload)}function f1(i){function a(re,te){if(i){var se=re.deletions;se===null?(re.deletions=[te],re.flags|=16):se.push(te)}}function u(re,te){if(!i)return null;for(;te!==null;)a(re,te),te=te.sibling;return null}function d(re){for(var te=new Map;re!==null;)re.key!==null?te.set(re.key,re):te.set(re.index,re),re=re.sibling;return te}function g(re,te){return re=es(re,te),re.index=0,re.sibling=null,re}function v(re,te,se){return re.index=se,i?(se=re.alternate,se!==null?(se=se.index,se<te?(re.flags|=67108866,te):se):(re.flags|=67108866,te)):(re.flags|=1048576,te)}function N(re){return i&&re.alternate===null&&(re.flags|=67108866),re}function q(re,te,se,me){return te===null||te.tag!==6?(te=Xm(se,re.mode,me),te.return=re,te):(te=g(te,se),te.return=re,te)}function J(re,te,se,me){var Ce=se.type;return Ce===M?he(re,te,se.props.children,me,se.key):te!==null&&(te.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===A&&d1(Ce)===te.type)?(te=g(te,se.props),fc(te,se),te.return=re,te):(te=Cf(se.type,se.key,se.props,null,re.mode,me),fc(te,se),te.return=re,te)}function ae(re,te,se,me){return te===null||te.tag!==4||te.stateNode.containerInfo!==se.containerInfo||te.stateNode.implementation!==se.implementation?(te=Wm(se,re.mode,me),te.return=re,te):(te=g(te,se.children||[]),te.return=re,te)}function he(re,te,se,me,Ce){return te===null||te.tag!==7?(te=Qa(se,re.mode,me,Ce),te.return=re,te):(te=g(te,se),te.return=re,te)}function ye(re,te,se){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=Xm(""+te,re.mode,se),te.return=re,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case w:return se=Cf(te.type,te.key,te.props,null,re.mode,se),fc(se,te),se.return=re,se;case C:return te=Wm(te,re.mode,se),te.return=re,te;case A:var me=te._init;return te=me(te._payload),ye(re,te,se)}if(Q(te)||$(te))return te=Qa(te,re.mode,se,null),te.return=re,te;if(typeof te.then=="function")return ye(re,Ff(te),se);if(te.$$typeof===K)return ye(re,Nf(re,te),se);qf(re,te)}return null}function le(re,te,se,me){var Ce=te!==null?te.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Ce!==null?null:q(re,te,""+se,me);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return se.key===Ce?J(re,te,se,me):null;case C:return se.key===Ce?ae(re,te,se,me):null;case A:return Ce=se._init,se=Ce(se._payload),le(re,te,se,me)}if(Q(se)||$(se))return Ce!==null?null:he(re,te,se,me,null);if(typeof se.then=="function")return le(re,te,Ff(se),me);if(se.$$typeof===K)return le(re,te,Nf(re,se),me);qf(re,se)}return null}function ue(re,te,se,me,Ce){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return re=re.get(se)||null,q(te,re,""+me,Ce);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case w:return re=re.get(me.key===null?se:me.key)||null,J(te,re,me,Ce);case C:return re=re.get(me.key===null?se:me.key)||null,ae(te,re,me,Ce);case A:var Ge=me._init;return me=Ge(me._payload),ue(re,te,se,me,Ce)}if(Q(me)||$(me))return re=re.get(se)||null,he(te,re,me,Ce,null);if(typeof me.then=="function")return ue(re,te,se,Ff(me),Ce);if(me.$$typeof===K)return ue(re,te,se,Nf(te,me),Ce);qf(te,me)}return null}function Oe(re,te,se,me){for(var Ce=null,Ge=null,Re=te,De=te=0,dn=null;Re!==null&&De<se.length;De++){Re.index>De?(dn=Re,Re=null):dn=Re.sibling;var it=le(re,Re,se[De],me);if(it===null){Re===null&&(Re=dn);break}i&&Re&&it.alternate===null&&a(re,Re),te=v(it,te,De),Ge===null?Ce=it:Ge.sibling=it,Ge=it,Re=dn}if(De===se.length)return u(re,Re),at&&Ja(re,De),Ce;if(Re===null){for(;De<se.length;De++)Re=ye(re,se[De],me),Re!==null&&(te=v(Re,te,De),Ge===null?Ce=Re:Ge.sibling=Re,Ge=Re);return at&&Ja(re,De),Ce}for(Re=d(Re);De<se.length;De++)dn=ue(Re,re,De,se[De],me),dn!==null&&(i&&dn.alternate!==null&&Re.delete(dn.key===null?De:dn.key),te=v(dn,te,De),Ge===null?Ce=dn:Ge.sibling=dn,Ge=dn);return i&&Re.forEach(function(Zs){return a(re,Zs)}),at&&Ja(re,De),Ce}function Ie(re,te,se,me){if(se==null)throw Error(r(151));for(var Ce=null,Ge=null,Re=te,De=te=0,dn=null,it=se.next();Re!==null&&!it.done;De++,it=se.next()){Re.index>De?(dn=Re,Re=null):dn=Re.sibling;var Zs=le(re,Re,it.value,me);if(Zs===null){Re===null&&(Re=dn);break}i&&Re&&Zs.alternate===null&&a(re,Re),te=v(Zs,te,De),Ge===null?Ce=Zs:Ge.sibling=Zs,Ge=Zs,Re=dn}if(it.done)return u(re,Re),at&&Ja(re,De),Ce;if(Re===null){for(;!it.done;De++,it=se.next())it=ye(re,it.value,me),it!==null&&(te=v(it,te,De),Ge===null?Ce=it:Ge.sibling=it,Ge=it);return at&&Ja(re,De),Ce}for(Re=d(Re);!it.done;De++,it=se.next())it=ue(Re,re,De,it.value,me),it!==null&&(i&&it.alternate!==null&&Re.delete(it.key===null?De:it.key),te=v(it,te,De),Ge===null?Ce=it:Ge.sibling=it,Ge=it);return i&&Re.forEach(function(tD){return a(re,tD)}),at&&Ja(re,De),Ce}function mt(re,te,se,me){if(typeof se=="object"&&se!==null&&se.type===M&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case w:e:{for(var Ce=se.key;te!==null;){if(te.key===Ce){if(Ce=se.type,Ce===M){if(te.tag===7){u(re,te.sibling),me=g(te,se.props.children),me.return=re,re=me;break e}}else if(te.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===A&&d1(Ce)===te.type){u(re,te.sibling),me=g(te,se.props),fc(me,se),me.return=re,re=me;break e}u(re,te);break}else a(re,te);te=te.sibling}se.type===M?(me=Qa(se.props.children,re.mode,me,se.key),me.return=re,re=me):(me=Cf(se.type,se.key,se.props,null,re.mode,me),fc(me,se),me.return=re,re=me)}return N(re);case C:e:{for(Ce=se.key;te!==null;){if(te.key===Ce)if(te.tag===4&&te.stateNode.containerInfo===se.containerInfo&&te.stateNode.implementation===se.implementation){u(re,te.sibling),me=g(te,se.children||[]),me.return=re,re=me;break e}else{u(re,te);break}else a(re,te);te=te.sibling}me=Wm(se,re.mode,me),me.return=re,re=me}return N(re);case A:return Ce=se._init,se=Ce(se._payload),mt(re,te,se,me)}if(Q(se))return Oe(re,te,se,me);if($(se)){if(Ce=$(se),typeof Ce!="function")throw Error(r(150));return se=Ce.call(se),Ie(re,te,se,me)}if(typeof se.then=="function")return mt(re,te,Ff(se),me);if(se.$$typeof===K)return mt(re,te,Nf(re,se),me);qf(re,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,te!==null&&te.tag===6?(u(re,te.sibling),me=g(te,se),me.return=re,re=me):(u(re,te),me=Xm(se,re.mode,me),me.return=re,re=me),N(re)):u(re,te)}return function(re,te,se,me){try{dc=0;var Ce=mt(re,te,se,me);return vl=null,Ce}catch(Re){if(Re===nc||Re===Mf)throw Re;var Ge=ar(29,Re,null,re.mode);return Ge.lanes=me,Ge.return=re,Ge}finally{}}}var _l=f1(!0),h1=f1(!1),Or=W(null),Si=null;function Ls(i){var a=i.alternate;Z(nn,nn.current&1),Z(Or,i),Si===null&&(a===null||pl.current!==null||a.memoizedState!==null)&&(Si=i)}function p1(i){if(i.tag===22){if(Z(nn,nn.current),Z(Or,i),Si===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(Si=i)}}else zs()}function zs(){Z(nn,nn.current),Z(Or,Or.current)}function as(i){ee(Or),Si===i&&(Si=null),ee(nn)}var nn=W(0);function Gf(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||vy(u)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function kg(i,a,u,d){a=i.memoizedState,u=u(d,a),u=u==null?a:m({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Ig={enqueueSetState:function(i,a,u){i=i._reactInternals;var d=cr(),g=Ps(d);g.payload=a,u!=null&&(g.callback=u),a=Os(i,g,d),a!==null&&(dr(a,i,d),ic(a,i,d))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var d=cr(),g=Ps(d);g.tag=1,g.payload=a,u!=null&&(g.callback=u),a=Os(i,g,d),a!==null&&(dr(a,i,d),ic(a,i,d))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=cr(),d=Ps(u);d.tag=2,a!=null&&(d.callback=a),a=Os(i,d,u),a!==null&&(dr(a,i,u),ic(a,i,u))}};function m1(i,a,u,d,g,v,N){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,v,N):a.prototype&&a.prototype.isPureReactComponent?!Yu(u,d)||!Yu(g,v):!0}function g1(i,a,u,d){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,d),a.state!==i&&Ig.enqueueReplaceState(a,a.state,null)}function ao(i,a){var u=a;if("ref"in a){u={};for(var d in a)d!=="ref"&&(u[d]=a[d])}if(i=i.defaultProps){u===a&&(u=m({},u));for(var g in i)u[g]===void 0&&(u[g]=i[g])}return u}var Kf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function y1(i){Kf(i)}function v1(i){console.error(i)}function _1(i){Kf(i)}function Yf(i,a){try{var u=i.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function w1(i,a,u){try{var d=i.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Ng(i,a,u){return u=Ps(u),u.tag=3,u.payload={element:null},u.callback=function(){Yf(i,a)},u}function b1(i){return i=Ps(i),i.tag=3,i}function E1(i,a,u,d){var g=u.type.getDerivedStateFromError;if(typeof g=="function"){var v=d.value;i.payload=function(){return g(v)},i.callback=function(){w1(a,u,d)}}var N=u.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(i.callback=function(){w1(a,u,d),typeof g!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var q=d.stack;this.componentDidCatch(d.value,{componentStack:q!==null?q:""})})}function tN(i,a,u,d,g){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=u.alternate,a!==null&&Ju(a,u,g,!0),u=Or.current,u!==null){switch(u.tag){case 13:return Si===null?ty():u.alternate===null&&Dt===0&&(Dt=3),u.flags&=-257,u.flags|=65536,u.lanes=g,d===ag?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([d]):a.add(d),ry(i,d,g)),!1;case 22:return u.flags|=65536,d===ag?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([d]):u.add(d)),ry(i,d,g)),!1}throw Error(r(435,u.tag))}return ry(i,d,g),ty(),!1}if(at)return a=Or.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,d!==Jm&&(i=Error(r(422),{cause:d}),Zu(Nr(i,u)))):(d!==Jm&&(a=Error(r(423),{cause:d}),Zu(Nr(a,u))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,d=Nr(d,u),g=Ng(i.stateNode,d,g),ug(i,g),Dt!==4&&(Dt=2)),!1;var v=Error(r(520),{cause:d});if(v=Nr(v,u),_c===null?_c=[v]:_c.push(v),Dt!==4&&(Dt=2),a===null)return!0;d=Nr(d,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,i=g&-g,u.lanes|=i,i=Ng(u.stateNode,d,i),ug(u,i),!1;case 1:if(a=u.type,v=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Fs===null||!Fs.has(v))))return u.flags|=65536,g&=-g,u.lanes|=g,g=b1(g),E1(g,i,u,d),ug(u,g),!1}u=u.return}while(u!==null);return!1}var T1=Error(r(461)),un=!1;function vn(i,a,u,d){a.child=i===null?h1(a,null,u,d):_l(a,i.child,u,d)}function S1(i,a,u,d,g){u=u.render;var v=a.ref;if("ref"in d){var N={};for(var q in d)q!=="ref"&&(N[q]=d[q])}else N=d;return ro(a),d=pg(i,a,u,N,v,g),q=mg(),i!==null&&!un?(gg(i,a,g),os(i,a,g)):(at&&q&&Qm(a),a.flags|=1,vn(i,a,d,g),a.child)}function A1(i,a,u,d,g){if(i===null){var v=u.type;return typeof v=="function"&&!Ym(v)&&v.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=v,x1(i,a,v,d,g)):(i=Cf(u.type,null,d,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(v=i.child,!jg(i,g)){var N=v.memoizedProps;if(u=u.compare,u=u!==null?u:Yu,u(N,d)&&i.ref===a.ref)return os(i,a,g)}return a.flags|=1,i=es(v,d),i.ref=a.ref,i.return=a,a.child=i}function x1(i,a,u,d,g){if(i!==null){var v=i.memoizedProps;if(Yu(v,d)&&i.ref===a.ref)if(un=!1,a.pendingProps=d=v,jg(i,g))(i.flags&131072)!==0&&(un=!0);else return a.lanes=i.lanes,os(i,a,g)}return Dg(i,a,u,d,g)}function C1(i,a,u){var d=a.pendingProps,g=d.children,v=i!==null?i.memoizedState:null;if(d.mode==="hidden"){if((a.flags&128)!==0){if(d=v!==null?v.baseLanes|u:u,i!==null){for(g=a.child=i.child,v=0;g!==null;)v=v|g.lanes|g.childLanes,g=g.sibling;a.childLanes=v&~d}else a.childLanes=0,a.child=null;return R1(i,a,d,u)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Df(a,v!==null?v.cachePool:null),v!==null?xb(a,v):dg(),p1(a);else return a.lanes=a.childLanes=536870912,R1(i,a,v!==null?v.baseLanes|u:u,u)}else v!==null?(Df(a,v.cachePool),xb(a,v),zs(),a.memoizedState=null):(i!==null&&Df(a,null),dg(),zs());return vn(i,a,g,u),a.child}function R1(i,a,u,d){var g=sg();return g=g===null?null:{parent:tn._currentValue,pool:g},a.memoizedState={baseLanes:u,cachePool:g},i!==null&&Df(a,null),dg(),p1(a),i!==null&&Ju(i,a,d,!0),null}function Xf(i,a){var u=a.ref;if(u===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(i===null||i.ref!==u)&&(a.flags|=4194816)}}function Dg(i,a,u,d,g){return ro(a),u=pg(i,a,u,d,void 0,g),d=mg(),i!==null&&!un?(gg(i,a,g),os(i,a,g)):(at&&d&&Qm(a),a.flags|=1,vn(i,a,u,g),a.child)}function k1(i,a,u,d,g,v){return ro(a),a.updateQueue=null,u=Rb(a,d,u,g),Cb(i),d=mg(),i!==null&&!un?(gg(i,a,v),os(i,a,v)):(at&&d&&Qm(a),a.flags|=1,vn(i,a,u,v),a.child)}function I1(i,a,u,d,g){if(ro(a),a.stateNode===null){var v=ul,N=u.contextType;typeof N=="object"&&N!==null&&(v=xn(N)),v=new u(d,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Ig,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=d,v.state=a.memoizedState,v.refs={},og(a),N=u.contextType,v.context=typeof N=="object"&&N!==null?xn(N):ul,v.state=a.memoizedState,N=u.getDerivedStateFromProps,typeof N=="function"&&(kg(a,u,N,d),v.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(N=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),N!==v.state&&Ig.enqueueReplaceState(v,v.state,null),ac(a,d,v,g),sc(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(i===null){v=a.stateNode;var q=a.memoizedProps,J=ao(u,q);v.props=J;var ae=v.context,he=u.contextType;N=ul,typeof he=="object"&&he!==null&&(N=xn(he));var ye=u.getDerivedStateFromProps;he=typeof ye=="function"||typeof v.getSnapshotBeforeUpdate=="function",q=a.pendingProps!==q,he||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(q||ae!==N)&&g1(a,v,d,N),Ms=!1;var le=a.memoizedState;v.state=le,ac(a,d,v,g),sc(),ae=a.memoizedState,q||le!==ae||Ms?(typeof ye=="function"&&(kg(a,u,ye,d),ae=a.memoizedState),(J=Ms||m1(a,u,J,d,le,ae,N))?(he||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=ae),v.props=d,v.state=ae,v.context=N,d=J):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{v=a.stateNode,lg(i,a),N=a.memoizedProps,he=ao(u,N),v.props=he,ye=a.pendingProps,le=v.context,ae=u.contextType,J=ul,typeof ae=="object"&&ae!==null&&(J=xn(ae)),q=u.getDerivedStateFromProps,(ae=typeof q=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(N!==ye||le!==J)&&g1(a,v,d,J),Ms=!1,le=a.memoizedState,v.state=le,ac(a,d,v,g),sc();var ue=a.memoizedState;N!==ye||le!==ue||Ms||i!==null&&i.dependencies!==null&&If(i.dependencies)?(typeof q=="function"&&(kg(a,u,q,d),ue=a.memoizedState),(he=Ms||m1(a,u,he,d,le,ue,J)||i!==null&&i.dependencies!==null&&If(i.dependencies))?(ae||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,ue,J),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,ue,J)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||N===i.memoizedProps&&le===i.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&le===i.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=ue),v.props=d,v.state=ue,v.context=J,d=he):(typeof v.componentDidUpdate!="function"||N===i.memoizedProps&&le===i.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&le===i.memoizedState||(a.flags|=1024),d=!1)}return v=d,Xf(i,a),d=(a.flags&128)!==0,v||d?(v=a.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,i!==null&&d?(a.child=_l(a,i.child,null,g),a.child=_l(a,null,u,g)):vn(i,a,u,g),a.memoizedState=v.state,i=a.child):i=os(i,a,g),i}function N1(i,a,u,d){return Qu(),a.flags|=256,vn(i,a,u,d),a.child}var Mg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pg(i){return{baseLanes:i,cachePool:vb()}}function Og(i,a,u){return i=i!==null?i.childLanes&~u:0,a&&(i|=Vr),i}function D1(i,a,u){var d=a.pendingProps,g=!1,v=(a.flags&128)!==0,N;if((N=v)||(N=i!==null&&i.memoizedState===null?!1:(nn.current&2)!==0),N&&(g=!0,a.flags&=-129),N=(a.flags&32)!==0,a.flags&=-33,i===null){if(at){if(g?Ls(a):zs(),at){var q=Nt,J;if(J=q){e:{for(J=q,q=Ti;J.nodeType!==8;){if(!q){q=null;break e}if(J=Wr(J.nextSibling),J===null){q=null;break e}}q=J}q!==null?(a.memoizedState={dehydrated:q,treeContext:Za!==null?{id:ts,overflow:ns}:null,retryLane:536870912,hydrationErrors:null},J=ar(18,null,null,0),J.stateNode=q,J.return=a,a.child=J,Bn=a,Nt=null,J=!0):J=!1}J||to(a)}if(q=a.memoizedState,q!==null&&(q=q.dehydrated,q!==null))return vy(q)?a.lanes=32:a.lanes=536870912,null;as(a)}return q=d.children,d=d.fallback,g?(zs(),g=a.mode,q=Wf({mode:"hidden",children:q},g),d=Qa(d,g,u,null),q.return=a,d.return=a,q.sibling=d,a.child=q,g=a.child,g.memoizedState=Pg(u),g.childLanes=Og(i,N,u),a.memoizedState=Mg,d):(Ls(a),Vg(a,q))}if(J=i.memoizedState,J!==null&&(q=J.dehydrated,q!==null)){if(v)a.flags&256?(Ls(a),a.flags&=-257,a=Lg(i,a,u)):a.memoizedState!==null?(zs(),a.child=i.child,a.flags|=128,a=null):(zs(),g=d.fallback,q=a.mode,d=Wf({mode:"visible",children:d.children},q),g=Qa(g,q,u,null),g.flags|=2,d.return=a,g.return=a,d.sibling=g,a.child=d,_l(a,i.child,null,u),d=a.child,d.memoizedState=Pg(u),d.childLanes=Og(i,N,u),a.memoizedState=Mg,a=g);else if(Ls(a),vy(q)){if(N=q.nextSibling&&q.nextSibling.dataset,N)var ae=N.dgst;N=ae,d=Error(r(419)),d.stack="",d.digest=N,Zu({value:d,source:null,stack:null}),a=Lg(i,a,u)}else if(un||Ju(i,a,u,!1),N=(u&i.childLanes)!==0,un||N){if(N=vt,N!==null&&(d=u&-u,d=(d&42)!==0?1:ui(d),d=(d&(N.suspendedLanes|u))!==0?0:d,d!==0&&d!==J.retryLane))throw J.retryLane=d,ll(i,d),dr(N,i,d),T1;q.data==="$?"||ty(),a=Lg(i,a,u)}else q.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=J.treeContext,Nt=Wr(q.nextSibling),Bn=a,at=!0,eo=null,Ti=!1,i!==null&&(Mr[Pr++]=ts,Mr[Pr++]=ns,Mr[Pr++]=Za,ts=i.id,ns=i.overflow,Za=a),a=Vg(a,d.children),a.flags|=4096);return a}return g?(zs(),g=d.fallback,q=a.mode,J=i.child,ae=J.sibling,d=es(J,{mode:"hidden",children:d.children}),d.subtreeFlags=J.subtreeFlags&65011712,ae!==null?g=es(ae,g):(g=Qa(g,q,u,null),g.flags|=2),g.return=a,d.return=a,d.sibling=g,a.child=d,d=g,g=a.child,q=i.child.memoizedState,q===null?q=Pg(u):(J=q.cachePool,J!==null?(ae=tn._currentValue,J=J.parent!==ae?{parent:ae,pool:ae}:J):J=vb(),q={baseLanes:q.baseLanes|u,cachePool:J}),g.memoizedState=q,g.childLanes=Og(i,N,u),a.memoizedState=Mg,d):(Ls(a),u=i.child,i=u.sibling,u=es(u,{mode:"visible",children:d.children}),u.return=a,u.sibling=null,i!==null&&(N=a.deletions,N===null?(a.deletions=[i],a.flags|=16):N.push(i)),a.child=u,a.memoizedState=null,u)}function Vg(i,a){return a=Wf({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Wf(i,a){return i=ar(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Lg(i,a,u){return _l(a,i.child,null,u),i=Vg(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function M1(i,a,u){i.lanes|=a;var d=i.alternate;d!==null&&(d.lanes|=a),tg(i.return,a,u)}function zg(i,a,u,d,g){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:g}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=u,v.tailMode=g)}function P1(i,a,u){var d=a.pendingProps,g=d.revealOrder,v=d.tail;if(vn(i,a,d.children,u),d=nn.current,(d&2)!==0)d=d&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&M1(i,u,a);else if(i.tag===19)M1(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}switch(Z(nn,d),g){case"forwards":for(u=a.child,g=null;u!==null;)i=u.alternate,i!==null&&Gf(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),zg(a,!1,g,u,v);break;case"backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&Gf(i)===null){a.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}zg(a,!0,u,null,v);break;case"together":zg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function os(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),$s|=a.lanes,(u&a.childLanes)===0)if(i!==null){if(Ju(i,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,u=es(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=es(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function jg(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&If(i)))}function nN(i,a,u){switch(a.tag){case 3:ge(a,a.stateNode.containerInfo),Ds(a,tn,i.memoizedState.cache),Qu();break;case 27:case 5:xe(a);break;case 4:ge(a,a.stateNode.containerInfo);break;case 10:Ds(a,a.type,a.memoizedProps.value);break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Ls(a),a.flags|=128,null):(u&a.child.childLanes)!==0?D1(i,a,u):(Ls(a),i=os(i,a,u),i!==null?i.sibling:null);Ls(a);break;case 19:var g=(i.flags&128)!==0;if(d=(u&a.childLanes)!==0,d||(Ju(i,a,u,!1),d=(u&a.childLanes)!==0),g){if(d)return P1(i,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Z(nn,nn.current),d)break;return null;case 22:case 23:return a.lanes=0,C1(i,a,u);case 24:Ds(a,tn,i.memoizedState.cache)}return os(i,a,u)}function O1(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps)un=!0;else{if(!jg(i,u)&&(a.flags&128)===0)return un=!1,nN(i,a,u);un=(i.flags&131072)!==0}else un=!1,at&&(a.flags&1048576)!==0&&db(a,kf,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var d=a.elementType,g=d._init;if(d=g(d._payload),a.type=d,typeof d=="function")Ym(d)?(i=ao(d,i),a.tag=1,a=I1(null,a,d,i,u)):(a.tag=0,a=Dg(null,a,d,i,u));else{if(d!=null){if(g=d.$$typeof,g===y){a.tag=11,a=S1(null,a,d,i,u);break e}else if(g===T){a.tag=14,a=A1(null,a,d,i,u);break e}}throw a=U(d)||d,Error(r(306,a,""))}}return a;case 0:return Dg(i,a,a.type,a.pendingProps,u);case 1:return d=a.type,g=ao(d,a.pendingProps),I1(i,a,d,g,u);case 3:e:{if(ge(a,a.stateNode.containerInfo),i===null)throw Error(r(387));d=a.pendingProps;var v=a.memoizedState;g=v.element,lg(i,a),ac(a,d,null,u);var N=a.memoizedState;if(d=N.cache,Ds(a,tn,d),d!==v.cache&&ng(a,[tn],u,!0),sc(),d=N.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:N.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=N1(i,a,d,u);break e}else if(d!==g){g=Nr(Error(r(424)),a),Zu(g),a=N1(i,a,d,u);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Nt=Wr(i.firstChild),Bn=a,at=!0,eo=null,Ti=!0,u=h1(a,null,d,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Qu(),d===g){a=os(i,a,u);break e}vn(i,a,d,u)}a=a.child}return a;case 26:return Xf(i,a),i===null?(u=jE(a.type,null,a.pendingProps,null))?a.memoizedState=u:at||(u=a.type,i=a.pendingProps,d=ch(ce.current).createElement(u),d[Lt]=a,d[It]=i,wn(d,u,i),St(d),a.stateNode=d):a.memoizedState=jE(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return xe(a),i===null&&at&&(d=a.stateNode=VE(a.type,a.pendingProps,ce.current),Bn=a,Ti=!0,g=Nt,Ks(a.type)?(_y=g,Nt=Wr(d.firstChild)):Nt=g),vn(i,a,a.pendingProps.children,u),Xf(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&at&&((g=d=Nt)&&(d=IN(d,a.type,a.pendingProps,Ti),d!==null?(a.stateNode=d,Bn=a,Nt=Wr(d.firstChild),Ti=!1,g=!0):g=!1),g||to(a)),xe(a),g=a.type,v=a.pendingProps,N=i!==null?i.memoizedProps:null,d=v.children,my(g,v)?d=null:N!==null&&my(g,N)&&(a.flags|=32),a.memoizedState!==null&&(g=pg(i,a,YI,null,null,u),Rc._currentValue=g),Xf(i,a),vn(i,a,d,u),a.child;case 6:return i===null&&at&&((i=u=Nt)&&(u=NN(u,a.pendingProps,Ti),u!==null?(a.stateNode=u,Bn=a,Nt=null,i=!0):i=!1),i||to(a)),null;case 13:return D1(i,a,u);case 4:return ge(a,a.stateNode.containerInfo),d=a.pendingProps,i===null?a.child=_l(a,null,d,u):vn(i,a,d,u),a.child;case 11:return S1(i,a,a.type,a.pendingProps,u);case 7:return vn(i,a,a.pendingProps,u),a.child;case 8:return vn(i,a,a.pendingProps.children,u),a.child;case 12:return vn(i,a,a.pendingProps.children,u),a.child;case 10:return d=a.pendingProps,Ds(a,a.type,d.value),vn(i,a,d.children,u),a.child;case 9:return g=a.type._context,d=a.pendingProps.children,ro(a),g=xn(g),d=d(g),a.flags|=1,vn(i,a,d,u),a.child;case 14:return A1(i,a,a.type,a.pendingProps,u);case 15:return x1(i,a,a.type,a.pendingProps,u);case 19:return P1(i,a,u);case 31:return d=a.pendingProps,u=a.mode,d={mode:d.mode,children:d.children},i===null?(u=Wf(d,u),u.ref=a.ref,a.child=u,u.return=a,a=u):(u=es(i.child,d),u.ref=a.ref,a.child=u,u.return=a,a=u),a;case 22:return C1(i,a,u);case 24:return ro(a),d=xn(tn),i===null?(g=sg(),g===null&&(g=vt,v=rg(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=u),g=v),a.memoizedState={parent:d,cache:g},og(a),Ds(a,tn,g)):((i.lanes&u)!==0&&(lg(i,a),ac(a,null,null,u),sc()),g=i.memoizedState,v=a.memoizedState,g.parent!==d?(g={parent:d,cache:d},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Ds(a,tn,d)):(d=v.cache,Ds(a,tn,d),d!==g.cache&&ng(a,[tn],u,!0))),vn(i,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function ls(i){i.flags|=4}function V1(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!FE(a)){if(a=Or.current,a!==null&&((tt&4194048)===tt?Si!==null:(tt&62914560)!==tt&&(tt&536870912)===0||a!==Si))throw rc=ag,_b;i.flags|=8192}}function Qf(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Fr():536870912,i.lanes|=a,Tl|=a)}function hc(i,a){if(!at)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function At(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,d=0;if(a)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=d,i.childLanes=u,a}function rN(i,a,u){var d=a.pendingProps;switch(Zm(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(a),null;case 1:return At(a),null;case 3:return u=a.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),is(tn),Ae(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(Wu(a)?ls(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,pb())),At(a),null;case 26:return u=a.memoizedState,i===null?(ls(a),u!==null?(At(a),V1(a,u)):(At(a),a.flags&=-16777217)):u?u!==i.memoizedState?(ls(a),At(a),V1(a,u)):(At(a),a.flags&=-16777217):(i.memoizedProps!==d&&ls(a),At(a),a.flags&=-16777217),null;case 27:Ue(a),u=ce.current;var g=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==d&&ls(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return At(a),null}i=ne.current,Wu(a)?fb(a):(i=VE(g,d,u),a.stateNode=i,ls(a))}return At(a),null;case 5:if(Ue(a),u=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&ls(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return At(a),null}if(i=ne.current,Wu(a))fb(a);else{switch(g=ch(ce.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof d.is=="string"?g.createElement("select",{is:d.is}):g.createElement("select"),d.multiple?i.multiple=!0:d.size&&(i.size=d.size);break;default:i=typeof d.is=="string"?g.createElement(u,{is:d.is}):g.createElement(u)}}i[Lt]=a,i[It]=d;e:for(g=a.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===a)break e;for(;g.sibling===null;){if(g.return===null||g.return===a)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}a.stateNode=i;e:switch(wn(i,u,d),u){case"button":case"input":case"select":case"textarea":i=!!d.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&ls(a)}}return At(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==d&&ls(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(r(166));if(i=ce.current,Wu(a)){if(i=a.stateNode,u=a.memoizedProps,d=null,g=Bn,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}i[Lt]=a,i=!!(i.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||kE(i.nodeValue,u)),i||to(a)}else i=ch(i).createTextNode(d),i[Lt]=a,a.stateNode=i}return At(a),null;case 13:if(d=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Wu(a),d!==null&&d.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Lt]=a}else Qu(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;At(a),g=!1}else g=pb(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(as(a),a):(as(a),null)}if(as(a),(a.flags&128)!==0)return a.lanes=u,a;if(u=d!==null,i=i!==null&&i.memoizedState!==null,u){d=a.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool);var v=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==g&&(d.flags|=2048)}return u!==i&&u&&(a.child.flags|=8192),Qf(a,a.updateQueue),At(a),null;case 4:return Ae(),i===null&&cy(a.stateNode.containerInfo),At(a),null;case 10:return is(a.type),At(a),null;case 19:if(ee(nn),g=a.memoizedState,g===null)return At(a),null;if(d=(a.flags&128)!==0,v=g.rendering,v===null)if(d)hc(g,!1);else{if(Dt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(v=Gf(i),v!==null){for(a.flags|=128,hc(g,!1),i=v.updateQueue,a.updateQueue=i,Qf(a,i),a.subtreeFlags=0,i=u,u=a.child;u!==null;)cb(u,i),u=u.sibling;return Z(nn,nn.current&1|2),a.child}i=i.sibling}g.tail!==null&&Be()>eh&&(a.flags|=128,d=!0,hc(g,!1),a.lanes=4194304)}else{if(!d)if(i=Gf(v),i!==null){if(a.flags|=128,d=!0,i=i.updateQueue,a.updateQueue=i,Qf(a,i),hc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!at)return At(a),null}else 2*Be()-g.renderingStartTime>eh&&u!==536870912&&(a.flags|=128,d=!0,hc(g,!1),a.lanes=4194304);g.isBackwards?(v.sibling=a.child,a.child=v):(i=g.last,i!==null?i.sibling=v:a.child=v,g.last=v)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=Be(),a.sibling=null,i=nn.current,Z(nn,d?i&1|2:i&1),a):(At(a),null);case 22:case 23:return as(a),fg(),d=a.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(u&536870912)!==0&&(a.flags&128)===0&&(At(a),a.subtreeFlags&6&&(a.flags|=8192)):At(a),u=a.updateQueue,u!==null&&Qf(a,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==u&&(a.flags|=2048),i!==null&&ee(io),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),is(tn),At(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function iN(i,a){switch(Zm(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return is(tn),Ae(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Ue(a),null;case 13:if(as(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Qu()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ee(nn),null;case 4:return Ae(),null;case 10:return is(a.type),null;case 22:case 23:return as(a),fg(),i!==null&&ee(io),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return is(tn),null;case 25:return null;default:return null}}function L1(i,a){switch(Zm(a),a.tag){case 3:is(tn),Ae();break;case 26:case 27:case 5:Ue(a);break;case 4:Ae();break;case 13:as(a);break;case 19:ee(nn);break;case 10:is(a.type);break;case 22:case 23:as(a),fg(),i!==null&&ee(io);break;case 24:is(tn)}}function pc(i,a){try{var u=a.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var g=d.next;u=g;do{if((u.tag&i)===i){d=void 0;var v=u.create,N=u.inst;d=v(),N.destroy=d}u=u.next}while(u!==g)}}catch(q){gt(a,a.return,q)}}function js(i,a,u){try{var d=a.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var v=g.next;d=v;do{if((d.tag&i)===i){var N=d.inst,q=N.destroy;if(q!==void 0){N.destroy=void 0,g=a;var J=u,ae=q;try{ae()}catch(he){gt(g,J,he)}}}d=d.next}while(d!==v)}}catch(he){gt(a,a.return,he)}}function z1(i){var a=i.updateQueue;if(a!==null){var u=i.stateNode;try{Ab(a,u)}catch(d){gt(i,i.return,d)}}}function j1(i,a,u){u.props=ao(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(d){gt(i,a,d)}}function mc(i,a){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof u=="function"?i.refCleanup=u(d):u.current=d}}catch(g){gt(i,a,g)}}function Ai(i,a){var u=i.ref,d=i.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(g){gt(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(g){gt(i,a,g)}else u.current=null}function U1(i){var a=i.type,u=i.memoizedProps,d=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break e;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(g){gt(i,i.return,g)}}function Ug(i,a,u){try{var d=i.stateNode;AN(d,i.type,u,a),d[It]=a}catch(g){gt(i,i.return,g)}}function B1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ks(i.type)||i.tag===4}function Bg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||B1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ks(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Hg(i,a,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(i),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=uh));else if(d!==4&&(d===27&&Ks(i.type)&&(u=i.stateNode,a=null),i=i.child,i!==null))for(Hg(i,a,u),i=i.sibling;i!==null;)Hg(i,a,u),i=i.sibling}function Zf(i,a,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(d!==4&&(d===27&&Ks(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Zf(i,a,u),i=i.sibling;i!==null;)Zf(i,a,u),i=i.sibling}function H1(i){var a=i.stateNode,u=i.memoizedProps;try{for(var d=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);wn(a,d,u),a[Lt]=i,a[It]=u}catch(v){gt(i,i.return,v)}}var us=!1,jt=!1,$g=!1,$1=typeof WeakSet=="function"?WeakSet:Set,cn=null;function sN(i,a){if(i=i.containerInfo,hy=gh,i=eb(i),Bm(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var g=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var N=0,q=-1,J=-1,ae=0,he=0,ye=i,le=null;t:for(;;){for(var ue;ye!==u||g!==0&&ye.nodeType!==3||(q=N+g),ye!==v||d!==0&&ye.nodeType!==3||(J=N+d),ye.nodeType===3&&(N+=ye.nodeValue.length),(ue=ye.firstChild)!==null;)le=ye,ye=ue;for(;;){if(ye===i)break t;if(le===u&&++ae===g&&(q=N),le===v&&++he===d&&(J=N),(ue=ye.nextSibling)!==null)break;ye=le,le=ye.parentNode}ye=ue}u=q===-1||J===-1?null:{start:q,end:J}}else u=null}u=u||{start:0,end:0}}else u=null;for(py={focusedElem:i,selectionRange:u},gh=!1,cn=a;cn!==null;)if(a=cn,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,cn=i;else for(;cn!==null;){switch(a=cn,v=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,u=a,g=v.memoizedProps,v=v.memoizedState,d=u.stateNode;try{var Oe=ao(u.type,g,u.elementType===u.type);i=d.getSnapshotBeforeUpdate(Oe,v),d.__reactInternalSnapshotBeforeUpdate=i}catch(Ie){gt(u,u.return,Ie)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,u=i.nodeType,u===9)yy(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":yy(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,cn=i;break}cn=a.return}}function F1(i,a,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:Us(i,u),d&4&&pc(5,u);break;case 1:if(Us(i,u),d&4)if(i=u.stateNode,a===null)try{i.componentDidMount()}catch(N){gt(u,u.return,N)}else{var g=ao(u.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(N){gt(u,u.return,N)}}d&64&&z1(u),d&512&&mc(u,u.return);break;case 3:if(Us(i,u),d&64&&(i=u.updateQueue,i!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{Ab(i,a)}catch(N){gt(u,u.return,N)}}break;case 27:a===null&&d&4&&H1(u);case 26:case 5:Us(i,u),a===null&&d&4&&U1(u),d&512&&mc(u,u.return);break;case 12:Us(i,u);break;case 13:Us(i,u),d&4&&K1(i,u),d&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=pN.bind(null,u),DN(i,u))));break;case 22:if(d=u.memoizedState!==null||us,!d){a=a!==null&&a.memoizedState!==null||jt,g=us;var v=jt;us=d,(jt=a)&&!v?Bs(i,u,(u.subtreeFlags&8772)!==0):Us(i,u),us=g,jt=v}break;case 30:break;default:Us(i,u)}}function q1(i){var a=i.alternate;a!==null&&(i.alternate=null,q1(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&fi(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var bt=null,Kn=!1;function cs(i,a,u){for(u=u.child;u!==null;)G1(i,a,u),u=u.sibling}function G1(i,a,u){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(ot,u)}catch{}switch(u.tag){case 26:jt||Ai(u,a),cs(i,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:jt||Ai(u,a);var d=bt,g=Kn;Ks(u.type)&&(bt=u.stateNode,Kn=!1),cs(i,a,u),Sc(u.stateNode),bt=d,Kn=g;break;case 5:jt||Ai(u,a);case 6:if(d=bt,g=Kn,bt=null,cs(i,a,u),bt=d,Kn=g,bt!==null)if(Kn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(u.stateNode)}catch(v){gt(u,a,v)}else try{bt.removeChild(u.stateNode)}catch(v){gt(u,a,v)}break;case 18:bt!==null&&(Kn?(i=bt,PE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),Dc(i)):PE(bt,u.stateNode));break;case 4:d=bt,g=Kn,bt=u.stateNode.containerInfo,Kn=!0,cs(i,a,u),bt=d,Kn=g;break;case 0:case 11:case 14:case 15:jt||js(2,u,a),jt||js(4,u,a),cs(i,a,u);break;case 1:jt||(Ai(u,a),d=u.stateNode,typeof d.componentWillUnmount=="function"&&j1(u,a,d)),cs(i,a,u);break;case 21:cs(i,a,u);break;case 22:jt=(d=jt)||u.memoizedState!==null,cs(i,a,u),jt=d;break;default:cs(i,a,u)}}function K1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Dc(i)}catch(u){gt(a,a.return,u)}}function aN(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new $1),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new $1),a;default:throw Error(r(435,i.tag))}}function Fg(i,a){var u=aN(i);a.forEach(function(d){var g=mN.bind(null,i,d);u.has(d)||(u.add(d),d.then(g,g))})}function or(i,a){var u=a.deletions;if(u!==null)for(var d=0;d<u.length;d++){var g=u[d],v=i,N=a,q=N;e:for(;q!==null;){switch(q.tag){case 27:if(Ks(q.type)){bt=q.stateNode,Kn=!1;break e}break;case 5:bt=q.stateNode,Kn=!1;break e;case 3:case 4:bt=q.stateNode.containerInfo,Kn=!0;break e}q=q.return}if(bt===null)throw Error(r(160));G1(v,N,g),bt=null,Kn=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Y1(a,i),a=a.sibling}var Xr=null;function Y1(i,a){var u=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:or(a,i),lr(i),d&4&&(js(3,i,i.return),pc(3,i),js(5,i,i.return));break;case 1:or(a,i),lr(i),d&512&&(jt||u===null||Ai(u,u.return)),d&64&&us&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var g=Xr;if(or(a,i),lr(i),d&512&&(jt||u===null||Ai(u,u.return)),d&4){var v=u!==null?u.memoizedState:null;if(d=i.memoizedState,u===null)if(d===null)if(i.stateNode===null){e:{d=i.type,u=i.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":v=g.getElementsByTagName("title")[0],(!v||v[qi]||v[Lt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(d),g.head.insertBefore(v,g.querySelector("head > title"))),wn(v,d,u),v[Lt]=i,St(v),d=v;break e;case"link":var N=HE("link","href",g).get(d+(u.href||""));if(N){for(var q=0;q<N.length;q++)if(v=N[q],v.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&v.getAttribute("rel")===(u.rel==null?null:u.rel)&&v.getAttribute("title")===(u.title==null?null:u.title)&&v.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){N.splice(q,1);break t}}v=g.createElement(d),wn(v,d,u),g.head.appendChild(v);break;case"meta":if(N=HE("meta","content",g).get(d+(u.content||""))){for(q=0;q<N.length;q++)if(v=N[q],v.getAttribute("content")===(u.content==null?null:""+u.content)&&v.getAttribute("name")===(u.name==null?null:u.name)&&v.getAttribute("property")===(u.property==null?null:u.property)&&v.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&v.getAttribute("charset")===(u.charSet==null?null:u.charSet)){N.splice(q,1);break t}}v=g.createElement(d),wn(v,d,u),g.head.appendChild(v);break;default:throw Error(r(468,d))}v[Lt]=i,St(v),d=v}i.stateNode=d}else $E(g,i.type,i.stateNode);else i.stateNode=BE(g,d,i.memoizedProps);else v!==d?(v===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):v.count--,d===null?$E(g,i.type,i.stateNode):BE(g,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Ug(i,i.memoizedProps,u.memoizedProps)}break;case 27:or(a,i),lr(i),d&512&&(jt||u===null||Ai(u,u.return)),u!==null&&d&4&&Ug(i,i.memoizedProps,u.memoizedProps);break;case 5:if(or(a,i),lr(i),d&512&&(jt||u===null||Ai(u,u.return)),i.flags&32){g=i.stateNode;try{Cr(g,"")}catch(ue){gt(i,i.return,ue)}}d&4&&i.stateNode!=null&&(g=i.memoizedProps,Ug(i,g,u!==null?u.memoizedProps:g)),d&1024&&($g=!0);break;case 6:if(or(a,i),lr(i),d&4){if(i.stateNode===null)throw Error(r(162));d=i.memoizedProps,u=i.stateNode;try{u.nodeValue=d}catch(ue){gt(i,i.return,ue)}}break;case 3:if(hh=null,g=Xr,Xr=dh(a.containerInfo),or(a,i),Xr=g,lr(i),d&4&&u!==null&&u.memoizedState.isDehydrated)try{Dc(a.containerInfo)}catch(ue){gt(i,i.return,ue)}$g&&($g=!1,X1(i));break;case 4:d=Xr,Xr=dh(i.stateNode.containerInfo),or(a,i),lr(i),Xr=d;break;case 12:or(a,i),lr(i);break;case 13:or(a,i),lr(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Wg=Be()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Fg(i,d)));break;case 22:g=i.memoizedState!==null;var J=u!==null&&u.memoizedState!==null,ae=us,he=jt;if(us=ae||g,jt=he||J,or(a,i),jt=he,us=ae,lr(i),d&8192)e:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(u===null||J||us||jt||oo(i)),u=null,a=i;;){if(a.tag===5||a.tag===26){if(u===null){J=u=a;try{if(v=J.stateNode,g)N=v.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{q=J.stateNode;var ye=J.memoizedProps.style,le=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;q.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(ue){gt(J,J.return,ue)}}}else if(a.tag===6){if(u===null){J=a;try{J.stateNode.nodeValue=g?"":J.memoizedProps}catch(ue){gt(J,J.return,ue)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=i.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,Fg(i,u))));break;case 19:or(a,i),lr(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Fg(i,d)));break;case 30:break;case 21:break;default:or(a,i),lr(i)}}function lr(i){var a=i.flags;if(a&2){try{for(var u,d=i.return;d!==null;){if(B1(d)){u=d;break}d=d.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var g=u.stateNode,v=Bg(i);Zf(i,v,g);break;case 5:var N=u.stateNode;u.flags&32&&(Cr(N,""),u.flags&=-33);var q=Bg(i);Zf(i,q,N);break;case 3:case 4:var J=u.stateNode.containerInfo,ae=Bg(i);Hg(i,ae,J);break;default:throw Error(r(161))}}catch(he){gt(i,i.return,he)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function X1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;X1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Us(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)F1(i,a.alternate,a),a=a.sibling}function oo(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:js(4,a,a.return),oo(a);break;case 1:Ai(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&j1(a,a.return,u),oo(a);break;case 27:Sc(a.stateNode);case 26:case 5:Ai(a,a.return),oo(a);break;case 22:a.memoizedState===null&&oo(a);break;case 30:oo(a);break;default:oo(a)}i=i.sibling}}function Bs(i,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,g=i,v=a,N=v.flags;switch(v.tag){case 0:case 11:case 15:Bs(g,v,u),pc(4,v);break;case 1:if(Bs(g,v,u),d=v,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ae){gt(d,d.return,ae)}if(d=v,g=d.updateQueue,g!==null){var q=d.stateNode;try{var J=g.shared.hiddenCallbacks;if(J!==null)for(g.shared.hiddenCallbacks=null,g=0;g<J.length;g++)Sb(J[g],q)}catch(ae){gt(d,d.return,ae)}}u&&N&64&&z1(v),mc(v,v.return);break;case 27:H1(v);case 26:case 5:Bs(g,v,u),u&&d===null&&N&4&&U1(v),mc(v,v.return);break;case 12:Bs(g,v,u);break;case 13:Bs(g,v,u),u&&N&4&&K1(g,v);break;case 22:v.memoizedState===null&&Bs(g,v,u),mc(v,v.return);break;case 30:break;default:Bs(g,v,u)}a=a.sibling}}function qg(i,a){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&ec(u))}function Gg(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&ec(i))}function xi(i,a,u,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)W1(i,a,u,d),a=a.sibling}function W1(i,a,u,d){var g=a.flags;switch(a.tag){case 0:case 11:case 15:xi(i,a,u,d),g&2048&&pc(9,a);break;case 1:xi(i,a,u,d);break;case 3:xi(i,a,u,d),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&ec(i)));break;case 12:if(g&2048){xi(i,a,u,d),i=a.stateNode;try{var v=a.memoizedProps,N=v.id,q=v.onPostCommit;typeof q=="function"&&q(N,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(J){gt(a,a.return,J)}}else xi(i,a,u,d);break;case 13:xi(i,a,u,d);break;case 23:break;case 22:v=a.stateNode,N=a.alternate,a.memoizedState!==null?v._visibility&2?xi(i,a,u,d):gc(i,a):v._visibility&2?xi(i,a,u,d):(v._visibility|=2,wl(i,a,u,d,(a.subtreeFlags&10256)!==0)),g&2048&&qg(N,a);break;case 24:xi(i,a,u,d),g&2048&&Gg(a.alternate,a);break;default:xi(i,a,u,d)}}function wl(i,a,u,d,g){for(g=g&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var v=i,N=a,q=u,J=d,ae=N.flags;switch(N.tag){case 0:case 11:case 15:wl(v,N,q,J,g),pc(8,N);break;case 23:break;case 22:var he=N.stateNode;N.memoizedState!==null?he._visibility&2?wl(v,N,q,J,g):gc(v,N):(he._visibility|=2,wl(v,N,q,J,g)),g&&ae&2048&&qg(N.alternate,N);break;case 24:wl(v,N,q,J,g),g&&ae&2048&&Gg(N.alternate,N);break;default:wl(v,N,q,J,g)}a=a.sibling}}function gc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=i,d=a,g=d.flags;switch(d.tag){case 22:gc(u,d),g&2048&&qg(d.alternate,d);break;case 24:gc(u,d),g&2048&&Gg(d.alternate,d);break;default:gc(u,d)}a=a.sibling}}var yc=8192;function bl(i){if(i.subtreeFlags&yc)for(i=i.child;i!==null;)Q1(i),i=i.sibling}function Q1(i){switch(i.tag){case 26:bl(i),i.flags&yc&&i.memoizedState!==null&&qN(Xr,i.memoizedState,i.memoizedProps);break;case 5:bl(i);break;case 3:case 4:var a=Xr;Xr=dh(i.stateNode.containerInfo),bl(i),Xr=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=yc,yc=16777216,bl(i),yc=a):bl(i));break;default:bl(i)}}function Z1(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function vc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];cn=d,eE(d,i)}Z1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)J1(i),i=i.sibling}function J1(i){switch(i.tag){case 0:case 11:case 15:vc(i),i.flags&2048&&js(9,i,i.return);break;case 3:vc(i);break;case 12:vc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Jf(i)):vc(i);break;default:vc(i)}}function Jf(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];cn=d,eE(d,i)}Z1(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:js(8,a,a.return),Jf(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,Jf(a));break;default:Jf(a)}i=i.sibling}}function eE(i,a){for(;cn!==null;){var u=cn;switch(u.tag){case 0:case 11:case 15:js(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ec(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,cn=d;else e:for(u=i;cn!==null;){d=cn;var g=d.sibling,v=d.return;if(q1(d),d===u){cn=null;break e}if(g!==null){g.return=v,cn=g;break e}cn=v}}}var oN={getCacheForType:function(i){var a=xn(tn),u=a.data.get(i);return u===void 0&&(u=i(),a.data.set(i,u)),u}},lN=typeof WeakMap=="function"?WeakMap:Map,ct=0,vt=null,Xe=null,tt=0,dt=0,ur=null,Hs=!1,El=!1,Kg=!1,ds=0,Dt=0,$s=0,lo=0,Yg=0,Vr=0,Tl=0,_c=null,Yn=null,Xg=!1,Wg=0,eh=1/0,th=null,Fs=null,_n=0,qs=null,Sl=null,Al=0,Qg=0,Zg=null,tE=null,wc=0,Jg=null;function cr(){if((ct&2)!==0&&tt!==0)return tt&-tt;if(x.T!==null){var i=fl;return i!==0?i:ay()}return ci()}function nE(){Vr===0&&(Vr=(tt&536870912)===0||at?Fi():536870912);var i=Or.current;return i!==null&&(i.flags|=32),Vr}function dr(i,a,u){(i===vt&&(dt===2||dt===9)||i.cancelPendingCommit!==null)&&(xl(i,0),Gs(i,tt,Vr,!1)),br(i,u),((ct&2)===0||i!==vt)&&(i===vt&&((ct&2)===0&&(lo|=u),Dt===4&&Gs(i,tt,Vr,!1)),Ci(i))}function rE(i,a,u){if((ct&6)!==0)throw Error(r(327));var d=!u&&(a&124)===0&&(a&i.expiredLanes)===0||zn(i,a),g=d?dN(i,a):ny(i,a,!0),v=d;do{if(g===0){El&&!d&&Gs(i,a,0,!1);break}else{if(u=i.current.alternate,v&&!uN(u)){g=ny(i,a,!1),v=!1;continue}if(g===2){if(v=a,i.errorRecoveryDisabledLanes&v)var N=0;else N=i.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){a=N;e:{var q=i;g=_c;var J=q.current.memoizedState.isDehydrated;if(J&&(xl(q,N).flags|=256),N=ny(q,N,!1),N!==2){if(Kg&&!J){q.errorRecoveryDisabledLanes|=v,lo|=v,g=4;break e}v=Yn,Yn=g,v!==null&&(Yn===null?Yn=v:Yn.push.apply(Yn,v))}g=N}if(v=!1,g!==2)continue}}if(g===1){xl(i,0),Gs(i,a,0,!0);break}e:{switch(d=i,v=g,v){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Gs(d,a,Vr,!Hs);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=Wg+300-Be(),10<g)){if(Gs(d,a,Vr,!Hs),mn(d,0,!0)!==0)break e;d.timeoutHandle=DE(iE.bind(null,d,u,Yn,th,Xg,a,Vr,lo,Tl,Hs,v,2,-0,0),g);break e}iE(d,u,Yn,th,Xg,a,Vr,lo,Tl,Hs,v,0,-0,0)}}break}while(!0);Ci(i)}function iE(i,a,u,d,g,v,N,q,J,ae,he,ye,le,ue){if(i.timeoutHandle=-1,ye=a.subtreeFlags,(ye&8192||(ye&16785408)===16785408)&&(Cc={stylesheets:null,count:0,unsuspend:FN},Q1(a),ye=GN(),ye!==null)){i.cancelPendingCommit=ye(dE.bind(null,i,a,v,u,d,g,N,q,J,he,1,le,ue)),Gs(i,v,N,!ae);return}dE(i,a,v,u,d,g,N,q,J)}function uN(i){for(var a=i;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var g=u[d],v=g.getSnapshot;g=g.value;try{if(!sr(v(),g))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Gs(i,a,u,d){a&=~Yg,a&=~lo,i.suspendedLanes|=a,i.pingedLanes&=~a,d&&(i.warmLanes|=a),d=i.expirationTimes;for(var g=a;0<g;){var v=31-Tt(g),N=1<<v;d[v]=-1,g&=~N}u!==0&&Er(i,u,a)}function nh(){return(ct&6)===0?(bc(0),!1):!0}function ey(){if(Xe!==null){if(dt===0)var i=Xe.return;else i=Xe,rs=no=null,yg(i),vl=null,dc=0,i=Xe;for(;i!==null;)L1(i.alternate,i),i=i.return;Xe=null}}function xl(i,a){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,CN(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),ey(),vt=i,Xe=u=es(i.current,null),tt=a,dt=0,ur=null,Hs=!1,El=zn(i,a),Kg=!1,Tl=Vr=Yg=lo=$s=Dt=0,Yn=_c=null,Xg=!1,(a&8)!==0&&(a|=a&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=a;0<d;){var g=31-Tt(d),v=1<<g;a|=i[g],d&=~v}return ds=a,Sf(),u}function sE(i,a){Fe=null,x.H=$f,a===nc||a===Mf?(a=Eb(),dt=3):a===_b?(a=Eb(),dt=4):dt=a===T1?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ur=a,Xe===null&&(Dt=1,Yf(i,Nr(a,i.current)))}function aE(){var i=x.H;return x.H=$f,i===null?$f:i}function oE(){var i=x.A;return x.A=oN,i}function ty(){Dt=4,Hs||(tt&4194048)!==tt&&Or.current!==null||(El=!0),($s&134217727)===0&&(lo&134217727)===0||vt===null||Gs(vt,tt,Vr,!1)}function ny(i,a,u){var d=ct;ct|=2;var g=aE(),v=oE();(vt!==i||tt!==a)&&(th=null,xl(i,a)),a=!1;var N=Dt;e:do try{if(dt!==0&&Xe!==null){var q=Xe,J=ur;switch(dt){case 8:ey(),N=6;break e;case 3:case 2:case 9:case 6:Or.current===null&&(a=!0);var ae=dt;if(dt=0,ur=null,Cl(i,q,J,ae),u&&El){N=0;break e}break;default:ae=dt,dt=0,ur=null,Cl(i,q,J,ae)}}cN(),N=Dt;break}catch(he){sE(i,he)}while(!0);return a&&i.shellSuspendCounter++,rs=no=null,ct=d,x.H=g,x.A=v,Xe===null&&(vt=null,tt=0,Sf()),N}function cN(){for(;Xe!==null;)lE(Xe)}function dN(i,a){var u=ct;ct|=2;var d=aE(),g=oE();vt!==i||tt!==a?(th=null,eh=Be()+500,xl(i,a)):El=zn(i,a);e:do try{if(dt!==0&&Xe!==null){a=Xe;var v=ur;t:switch(dt){case 1:dt=0,ur=null,Cl(i,a,v,1);break;case 2:case 9:if(wb(v)){dt=0,ur=null,uE(a);break}a=function(){dt!==2&&dt!==9||vt!==i||(dt=7),Ci(i)},v.then(a,a);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:wb(v)?(dt=0,ur=null,uE(a)):(dt=0,ur=null,Cl(i,a,v,7));break;case 5:var N=null;switch(Xe.tag){case 26:N=Xe.memoizedState;case 5:case 27:var q=Xe;if(!N||FE(N)){dt=0,ur=null;var J=q.sibling;if(J!==null)Xe=J;else{var ae=q.return;ae!==null?(Xe=ae,rh(ae)):Xe=null}break t}}dt=0,ur=null,Cl(i,a,v,5);break;case 6:dt=0,ur=null,Cl(i,a,v,6);break;case 8:ey(),Dt=6;break e;default:throw Error(r(462))}}fN();break}catch(he){sE(i,he)}while(!0);return rs=no=null,x.H=d,x.A=g,ct=u,Xe!==null?0:(vt=null,tt=0,Sf(),Dt)}function fN(){for(;Xe!==null&&!st();)lE(Xe)}function lE(i){var a=O1(i.alternate,i,ds);i.memoizedProps=i.pendingProps,a===null?rh(i):Xe=a}function uE(i){var a=i,u=a.alternate;switch(a.tag){case 15:case 0:a=k1(u,a,a.pendingProps,a.type,void 0,tt);break;case 11:a=k1(u,a,a.pendingProps,a.type.render,a.ref,tt);break;case 5:yg(a);default:L1(u,a),a=Xe=cb(a,ds),a=O1(u,a,ds)}i.memoizedProps=i.pendingProps,a===null?rh(i):Xe=a}function Cl(i,a,u,d){rs=no=null,yg(a),vl=null,dc=0;var g=a.return;try{if(tN(i,g,a,u,tt)){Dt=1,Yf(i,Nr(u,i.current)),Xe=null;return}}catch(v){if(g!==null)throw Xe=g,v;Dt=1,Yf(i,Nr(u,i.current)),Xe=null;return}a.flags&32768?(at||d===1?i=!0:El||(tt&536870912)!==0?i=!1:(Hs=i=!0,(d===2||d===9||d===3||d===6)&&(d=Or.current,d!==null&&d.tag===13&&(d.flags|=16384))),cE(a,i)):rh(a)}function rh(i){var a=i;do{if((a.flags&32768)!==0){cE(a,Hs);return}i=a.return;var u=rN(a.alternate,a,ds);if(u!==null){Xe=u;return}if(a=a.sibling,a!==null){Xe=a;return}Xe=a=i}while(a!==null);Dt===0&&(Dt=5)}function cE(i,a){do{var u=iN(i.alternate,i);if(u!==null){u.flags&=32767,Xe=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(i=i.sibling,i!==null)){Xe=i;return}Xe=i=u}while(i!==null);Dt=6,Xe=null}function dE(i,a,u,d,g,v,N,q,J){i.cancelPendingCommit=null;do ih();while(_n!==0);if((ct&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(v=a.lanes|a.childLanes,v|=Gm,nr(i,u,v,N,q,J),i===vt&&(Xe=vt=null,tt=0),Sl=a,qs=i,Al=u,Qg=v,Zg=g,tE=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,gN(Qt,function(){return gE(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=x.T,x.T=null,g=B.p,B.p=2,N=ct,ct|=4;try{sN(i,a,u)}finally{ct=N,B.p=g,x.T=d}}_n=1,fE(),hE(),pE()}}function fE(){if(_n===1){_n=0;var i=qs,a=Sl,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=x.T,x.T=null;var d=B.p;B.p=2;var g=ct;ct|=4;try{Y1(a,i);var v=py,N=eb(i.containerInfo),q=v.focusedElem,J=v.selectionRange;if(N!==q&&q&&q.ownerDocument&&Jw(q.ownerDocument.documentElement,q)){if(J!==null&&Bm(q)){var ae=J.start,he=J.end;if(he===void 0&&(he=ae),"selectionStart"in q)q.selectionStart=ae,q.selectionEnd=Math.min(he,q.value.length);else{var ye=q.ownerDocument||document,le=ye&&ye.defaultView||window;if(le.getSelection){var ue=le.getSelection(),Oe=q.textContent.length,Ie=Math.min(J.start,Oe),mt=J.end===void 0?Ie:Math.min(J.end,Oe);!ue.extend&&Ie>mt&&(N=mt,mt=Ie,Ie=N);var re=Zw(q,Ie),te=Zw(q,mt);if(re&&te&&(ue.rangeCount!==1||ue.anchorNode!==re.node||ue.anchorOffset!==re.offset||ue.focusNode!==te.node||ue.focusOffset!==te.offset)){var se=ye.createRange();se.setStart(re.node,re.offset),ue.removeAllRanges(),Ie>mt?(ue.addRange(se),ue.extend(te.node,te.offset)):(se.setEnd(te.node,te.offset),ue.addRange(se))}}}}for(ye=[],ue=q;ue=ue.parentNode;)ue.nodeType===1&&ye.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<ye.length;q++){var me=ye[q];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}gh=!!hy,py=hy=null}finally{ct=g,B.p=d,x.T=u}}i.current=a,_n=2}}function hE(){if(_n===2){_n=0;var i=qs,a=Sl,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=x.T,x.T=null;var d=B.p;B.p=2;var g=ct;ct|=4;try{F1(i,a.alternate,a)}finally{ct=g,B.p=d,x.T=u}}_n=3}}function pE(){if(_n===4||_n===3){_n=0,Ht();var i=qs,a=Sl,u=Al,d=tE;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?_n=5:(_n=0,Sl=qs=null,mE(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Fs=null),Cs(u),a=a.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(ot,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=x.T,g=B.p,B.p=2,x.T=null;try{for(var v=i.onRecoverableError,N=0;N<d.length;N++){var q=d[N];v(q.value,{componentStack:q.stack})}}finally{x.T=a,B.p=g}}(Al&3)!==0&&ih(),Ci(i),g=i.pendingLanes,(u&4194090)!==0&&(g&42)!==0?i===Jg?wc++:(wc=0,Jg=i):wc=0,bc(0)}}function mE(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,ec(a)))}function ih(i){return fE(),hE(),pE(),gE()}function gE(){if(_n!==5)return!1;var i=qs,a=Qg;Qg=0;var u=Cs(Al),d=x.T,g=B.p;try{B.p=32>u?32:u,x.T=null,u=Zg,Zg=null;var v=qs,N=Al;if(_n=0,Sl=qs=null,Al=0,(ct&6)!==0)throw Error(r(331));var q=ct;if(ct|=4,J1(v.current),W1(v,v.current,N,u),ct=q,bc(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(ot,v)}catch{}return!0}finally{B.p=g,x.T=d,mE(i,a)}}function yE(i,a,u){a=Nr(u,a),a=Ng(i.stateNode,a,2),i=Os(i,a,2),i!==null&&(br(i,2),Ci(i))}function gt(i,a,u){if(i.tag===3)yE(i,i,u);else for(;a!==null;){if(a.tag===3){yE(a,i,u);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Fs===null||!Fs.has(d))){i=Nr(u,i),u=b1(2),d=Os(a,u,2),d!==null&&(E1(u,d,a,i),br(d,2),Ci(d));break}}a=a.return}}function ry(i,a,u){var d=i.pingCache;if(d===null){d=i.pingCache=new lN;var g=new Set;d.set(a,g)}else g=d.get(a),g===void 0&&(g=new Set,d.set(a,g));g.has(u)||(Kg=!0,g.add(u),i=hN.bind(null,i,a,u),a.then(i,i))}function hN(i,a,u){var d=i.pingCache;d!==null&&d.delete(a),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,vt===i&&(tt&u)===u&&(Dt===4||Dt===3&&(tt&62914560)===tt&&300>Be()-Wg?(ct&2)===0&&xl(i,0):Yg|=u,Tl===tt&&(Tl=0)),Ci(i)}function vE(i,a){a===0&&(a=Fr()),i=ll(i,a),i!==null&&(br(i,a),Ci(i))}function pN(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),vE(i,u)}function mN(i,a){var u=0;switch(i.tag){case 13:var d=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(a),vE(i,u)}function gN(i,a){return Le(i,a)}var sh=null,Rl=null,iy=!1,ah=!1,sy=!1,uo=0;function Ci(i){i!==Rl&&i.next===null&&(Rl===null?sh=Rl=i:Rl=Rl.next=i),ah=!0,iy||(iy=!0,vN())}function bc(i,a){if(!sy&&ah){sy=!0;do for(var u=!1,d=sh;d!==null;){if(i!==0){var g=d.pendingLanes;if(g===0)var v=0;else{var N=d.suspendedLanes,q=d.pingedLanes;v=(1<<31-Tt(42|i)+1)-1,v&=g&~(N&~q),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(u=!0,EE(d,v))}else v=tt,v=mn(d,d===vt?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||zn(d,v)||(u=!0,EE(d,v));d=d.next}while(u);sy=!1}}function yN(){_E()}function _E(){ah=iy=!1;var i=0;uo!==0&&(xN()&&(i=uo),uo=0);for(var a=Be(),u=null,d=sh;d!==null;){var g=d.next,v=wE(d,a);v===0?(d.next=null,u===null?sh=g:u.next=g,g===null&&(Rl=u)):(u=d,(i!==0||(v&3)!==0)&&(ah=!0)),d=g}bc(i)}function wE(i,a){for(var u=i.suspendedLanes,d=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var N=31-Tt(v),q=1<<N,J=g[N];J===-1?((q&u)===0||(q&d)!==0)&&(g[N]=$i(q,a)):J<=a&&(i.expiredLanes|=q),v&=~q}if(a=vt,u=tt,u=mn(i,i===a?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,u===0||i===a&&(dt===2||dt===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&rt(d),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||zn(i,u)){if(a=u&-u,a===i.callbackPriority)return a;switch(d!==null&&rt(d),Cs(u)){case 2:case 8:u=An;break;case 32:u=Qt;break;case 268435456:u=Pn;break;default:u=Qt}return d=bE.bind(null,i),u=Le(u,d),i.callbackPriority=a,i.callbackNode=u,a}return d!==null&&d!==null&&rt(d),i.callbackPriority=2,i.callbackNode=null,2}function bE(i,a){if(_n!==0&&_n!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(ih()&&i.callbackNode!==u)return null;var d=tt;return d=mn(i,i===vt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(rE(i,d,a),wE(i,Be()),i.callbackNode!=null&&i.callbackNode===u?bE.bind(null,i):null)}function EE(i,a){if(ih())return null;rE(i,a,!0)}function vN(){RN(function(){(ct&6)!==0?Le(kt,yN):_E()})}function ay(){return uo===0&&(uo=Fi()),uo}function TE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Wo(""+i)}function SE(i,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,i.id&&u.setAttribute("form",i.id),a.parentNode.insertBefore(u,a),i=new FormData(i),u.parentNode.removeChild(u),i}function _N(i,a,u,d,g){if(a==="submit"&&u&&u.stateNode===g){var v=TE((g[It]||null).action),N=d.submitter;N&&(a=(a=N[It]||null)?TE(a.formAction):N.getAttribute("formAction"),a!==null&&(v=a,N=null));var q=new Qo("action","action",null,d,g);i.push({event:q,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(uo!==0){var J=N?SE(g,N):new FormData(g);xg(u,{pending:!0,data:J,method:g.method,action:v},null,J)}}else typeof v=="function"&&(q.preventDefault(),J=N?SE(g,N):new FormData(g),xg(u,{pending:!0,data:J,method:g.method,action:v},v,J))},currentTarget:g}]})}}for(var oy=0;oy<qm.length;oy++){var ly=qm[oy],wN=ly.toLowerCase(),bN=ly[0].toUpperCase()+ly.slice(1);Yr(wN,"on"+bN)}Yr(rb,"onAnimationEnd"),Yr(ib,"onAnimationIteration"),Yr(sb,"onAnimationStart"),Yr("dblclick","onDoubleClick"),Yr("focusin","onFocus"),Yr("focusout","onBlur"),Yr(zI,"onTransitionRun"),Yr(jI,"onTransitionStart"),Yr(UI,"onTransitionCancel"),Yr(ab,"onTransitionEnd"),qr("onMouseEnter",["mouseout","mouseover"]),qr("onMouseLeave",["mouseout","mouseover"]),qr("onPointerEnter",["pointerout","pointerover"]),qr("onPointerLeave",["pointerout","pointerover"]),rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ec));function AE(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var d=i[u],g=d.event;d=d.listeners;e:{var v=void 0;if(a)for(var N=d.length-1;0<=N;N--){var q=d[N],J=q.instance,ae=q.currentTarget;if(q=q.listener,J!==v&&g.isPropagationStopped())break e;v=q,g.currentTarget=ae;try{v(g)}catch(he){Kf(he)}g.currentTarget=null,v=J}else for(N=0;N<d.length;N++){if(q=d[N],J=q.instance,ae=q.currentTarget,q=q.listener,J!==v&&g.isPropagationStopped())break e;v=q,g.currentTarget=ae;try{v(g)}catch(he){Kf(he)}g.currentTarget=null,v=J}}}}function We(i,a){var u=a[Oa];u===void 0&&(u=a[Oa]=new Set);var d=i+"__bubble";u.has(d)||(xE(a,i,2,!1),u.add(d))}function uy(i,a,u){var d=0;a&&(d|=4),xE(u,i,d,a)}var oh="_reactListening"+Math.random().toString(36).slice(2);function cy(i){if(!i[oh]){i[oh]=!0,Va.forEach(function(u){u!=="selectionchange"&&(EN.has(u)||uy(u,!1,i),uy(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[oh]||(a[oh]=!0,uy("selectionchange",!1,a))}}function xE(i,a,u,d){switch(WE(a)){case 2:var g=XN;break;case 8:g=WN;break;default:g=Sy}u=g.bind(null,a,u,i),g=void 0,!kr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),d?g!==void 0?i.addEventListener(a,u,{capture:!0,passive:g}):i.addEventListener(a,u,!0):g!==void 0?i.addEventListener(a,u,{passive:g}):i.addEventListener(a,u,!1)}function dy(i,a,u,d,g){var v=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var N=d.tag;if(N===3||N===4){var q=d.stateNode.containerInfo;if(q===g)break;if(N===4)for(N=d.return;N!==null;){var J=N.tag;if((J===3||J===4)&&N.stateNode.containerInfo===g)return;N=N.return}for(;q!==null;){if(N=Tr(q),N===null)return;if(J=N.tag,J===5||J===6||J===26||J===27){d=v=N;continue e}q=q.parentNode}}d=d.return}uf(function(){var ae=v,he=Rr(u),ye=[];e:{var le=ob.get(i);if(le!==void 0){var ue=Qo,Oe=i;switch(i){case"keypress":if(vi(u)===0)break e;case"keydown":case"keyup":ue=rl;break;case"focusin":Oe="focus",ue=el;break;case"focusout":Oe="blur",ue=el;break;case"beforeblur":case"afterblur":ue=el;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Ir;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Lm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=yf;break;case rb:case ib:case sb:ue=tl;break;case ab:ue=_f;break;case"scroll":case"scrollend":ue=cf;break;case"wheel":ue=il;break;case"copy":case"cut":case"paste":ue=nl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=Gu;break;case"toggle":case"beforetoggle":ue=bf}var Ie=(a&4)!==0,mt=!Ie&&(i==="scroll"||i==="scrollend"),re=Ie?le!==null?le+"Capture":null:le;Ie=[];for(var te=ae,se;te!==null;){var me=te;if(se=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||se===null||re===null||(me=Ha(te,re),me!=null&&Ie.push(Tc(te,me,se))),mt)break;te=te.return}0<Ie.length&&(le=new ue(le,Oe,null,u,he),ye.push({event:le,listeners:Ie}))}}if((a&7)===0){e:{if(le=i==="mouseover"||i==="pointerover",ue=i==="mouseout"||i==="pointerout",le&&u!==Yi&&(Oe=u.relatedTarget||u.fromElement)&&(Tr(Oe)||Oe[qn]))break e;if((ue||le)&&(le=he.window===he?he:(le=he.ownerDocument)?le.defaultView||le.parentWindow:window,ue?(Oe=u.relatedTarget||u.toElement,ue=ae,Oe=Oe?Tr(Oe):null,Oe!==null&&(mt=o(Oe),Ie=Oe.tag,Oe!==mt||Ie!==5&&Ie!==27&&Ie!==6)&&(Oe=null)):(ue=null,Oe=ae),ue!==Oe)){if(Ie=Ir,me="onMouseLeave",re="onMouseEnter",te="mouse",(i==="pointerout"||i==="pointerover")&&(Ie=Gu,me="onPointerLeave",re="onPointerEnter",te="pointer"),mt=ue==null?le:Ar(ue),se=Oe==null?le:Ar(Oe),le=new Ie(me,te+"leave",ue,u,he),le.target=mt,le.relatedTarget=se,me=null,Tr(he)===ae&&(Ie=new Ie(re,te+"enter",Oe,u,he),Ie.target=se,Ie.relatedTarget=mt,me=Ie),mt=me,ue&&Oe)t:{for(Ie=ue,re=Oe,te=0,se=Ie;se;se=kl(se))te++;for(se=0,me=re;me;me=kl(me))se++;for(;0<te-se;)Ie=kl(Ie),te--;for(;0<se-te;)re=kl(re),se--;for(;te--;){if(Ie===re||re!==null&&Ie===re.alternate)break t;Ie=kl(Ie),re=kl(re)}Ie=null}else Ie=null;ue!==null&&CE(ye,le,ue,Ie,!1),Oe!==null&&mt!==null&&CE(ye,mt,Oe,Ie,!0)}}e:{if(le=ae?Ar(ae):window,ue=le.nodeName&&le.nodeName.toLowerCase(),ue==="select"||ue==="input"&&le.type==="file")var Ce=Gw;else if(en(le))if(Kw)Ce=OI;else{Ce=MI;var Ge=DI}else ue=le.nodeName,!ue||ue.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?ae&&ju(ae.elementType)&&(Ce=Gw):Ce=PI;if(Ce&&(Ce=Ce(i,ae))){Ji(ye,Ce,u,he);break e}Ge&&Ge(i,le,ae),i==="focusout"&&ae&&le.type==="number"&&ae.memoizedProps.value!=null&&Is(le,"number",le.value)}switch(Ge=ae?Ar(ae):window,i){case"focusin":(en(Ge)||Ge.contentEditable==="true")&&(sl=Ge,Hm=ae,Xu=null);break;case"focusout":Xu=Hm=sl=null;break;case"mousedown":$m=!0;break;case"contextmenu":case"mouseup":case"dragend":$m=!1,tb(ye,u,he);break;case"selectionchange":if(LI)break;case"keydown":case"keyup":tb(ye,u,he)}var Re;if(bi)e:{switch(i){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Je?de(i,u)&&(De="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(De="onCompositionStart");De&&(I&&u.locale!=="ko"&&(Je||De!=="onCompositionStart"?De==="onCompositionEnd"&&Je&&(Re=Bu()):(yi=he,Ns="value"in yi?yi.value:yi.textContent,Je=!0)),Ge=lh(ae,De),0<Ge.length&&(De=new Fu(De,i,null,u,he),ye.push({event:De,listeners:Ge}),Re?De.data=Re:(Re=we(u),Re!==null&&(De.data=Re)))),(Re=S?Jt(i,u):et(i,u))&&(De=lh(ae,"onBeforeInput"),0<De.length&&(Ge=new Fu("onBeforeInput","beforeinput",null,u,he),ye.push({event:Ge,listeners:De}),Ge.data=Re)),_N(ye,i,ae,u,he)}AE(ye,a)})}function Tc(i,a,u){return{instance:i,listener:a,currentTarget:u}}function lh(i,a){for(var u=a+"Capture",d=[];i!==null;){var g=i,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=Ha(i,u),g!=null&&d.unshift(Tc(i,g,v)),g=Ha(i,a),g!=null&&d.push(Tc(i,g,v))),i.tag===3)return d;i=i.return}return[]}function kl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function CE(i,a,u,d,g){for(var v=a._reactName,N=[];u!==null&&u!==d;){var q=u,J=q.alternate,ae=q.stateNode;if(q=q.tag,J!==null&&J===d)break;q!==5&&q!==26&&q!==27||ae===null||(J=ae,g?(ae=Ha(u,v),ae!=null&&N.unshift(Tc(u,ae,J))):g||(ae=Ha(u,v),ae!=null&&N.push(Tc(u,ae,J)))),u=u.return}N.length!==0&&i.push({event:a,listeners:N})}var TN=/\r\n?/g,SN=/\u0000|\uFFFD/g;function RE(i){return(typeof i=="string"?i:""+i).replace(TN,`
`).replace(SN,"")}function kE(i,a){return a=RE(a),RE(i)===a}function uh(){}function pt(i,a,u,d,g,v){switch(u){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||Cr(i,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&Cr(i,""+d);break;case"className":xr(i,"class",d);break;case"tabIndex":xr(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":xr(i,u,d);break;case"style":zu(i,d,v);break;case"data":if(a!=="object"){xr(i,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||u!=="href")){i.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(u);break}d=Wo(""+d),i.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(u==="formAction"?(a!=="input"&&pt(i,a,"name",g.name,g,null),pt(i,a,"formEncType",g.formEncType,g,null),pt(i,a,"formMethod",g.formMethod,g,null),pt(i,a,"formTarget",g.formTarget,g,null)):(pt(i,a,"encType",g.encType,g,null),pt(i,a,"method",g.method,g,null),pt(i,a,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(u);break}d=Wo(""+d),i.setAttribute(u,d);break;case"onClick":d!=null&&(i.onclick=uh);break;case"onScroll":d!=null&&We("scroll",i);break;case"onScrollEnd":d!=null&&We("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(u=d.__html,u!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}u=Wo(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(u,""+d):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":d===!0?i.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(u,d):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(u,d):i.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(u):i.setAttribute(u,d);break;case"popover":We("beforetoggle",i),We("toggle",i),hi(i,"popover",d);break;case"xlinkActuate":Zt(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Zt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Zt(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Zt(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Zt(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Zt(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Zt(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Zt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Zt(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":hi(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Om.get(u)||u,hi(i,u,d))}}function fy(i,a,u,d,g,v){switch(u){case"style":zu(i,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(u=d.__html,u!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"children":typeof d=="string"?Cr(i,d):(typeof d=="number"||typeof d=="bigint")&&Cr(i,""+d);break;case"onScroll":d!=null&&We("scroll",i);break;case"onScrollEnd":d!=null&&We("scrollend",i);break;case"onClick":d!=null&&(i.onclick=uh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rs.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(g=u.endsWith("Capture"),a=u.slice(2,g?u.length-7:void 0),v=i[It]||null,v=v!=null?v[u]:null,typeof v=="function"&&i.removeEventListener(a,v,g),typeof d=="function")){typeof v!="function"&&v!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(a,d,g);break e}u in i?i[u]=d:d===!0?i.setAttribute(u,""):hi(i,u,d)}}}function wn(i,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",i),We("load",i);var d=!1,g=!1,v;for(v in u)if(u.hasOwnProperty(v)){var N=u[v];if(N!=null)switch(v){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:pt(i,a,v,N,u,null)}}g&&pt(i,a,"srcSet",u.srcSet,u,null),d&&pt(i,a,"src",u.src,u,null);return;case"input":We("invalid",i);var q=v=N=g=null,J=null,ae=null;for(d in u)if(u.hasOwnProperty(d)){var he=u[d];if(he!=null)switch(d){case"name":g=he;break;case"type":N=he;break;case"checked":J=he;break;case"defaultChecked":ae=he;break;case"value":v=he;break;case"defaultValue":q=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,a));break;default:pt(i,a,d,he,u,null)}}ja(i,v,q,J,ae,N,g,!1),Xo(i);return;case"select":We("invalid",i),d=N=v=null;for(g in u)if(u.hasOwnProperty(g)&&(q=u[g],q!=null))switch(g){case"value":v=q;break;case"defaultValue":N=q;break;case"multiple":d=q;default:pt(i,a,g,q,u,null)}a=v,u=N,i.multiple=!!d,a!=null?Ki(i,!!d,a,!1):u!=null&&Ki(i,!!d,u,!0);return;case"textarea":We("invalid",i),v=g=d=null;for(N in u)if(u.hasOwnProperty(N)&&(q=u[N],q!=null))switch(N){case"value":d=q;break;case"defaultValue":g=q;break;case"children":v=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(91));break;default:pt(i,a,N,q,u,null)}Ua(i,d,g,v),Xo(i);return;case"option":for(J in u)if(u.hasOwnProperty(J)&&(d=u[J],d!=null))switch(J){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:pt(i,a,J,d,u,null)}return;case"dialog":We("beforetoggle",i),We("toggle",i),We("cancel",i),We("close",i);break;case"iframe":case"object":We("load",i);break;case"video":case"audio":for(d=0;d<Ec.length;d++)We(Ec[d],i);break;case"image":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"embed":case"source":case"link":We("error",i),We("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in u)if(u.hasOwnProperty(ae)&&(d=u[ae],d!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:pt(i,a,ae,d,u,null)}return;default:if(ju(a)){for(he in u)u.hasOwnProperty(he)&&(d=u[he],d!==void 0&&fy(i,a,he,d,u,void 0));return}}for(q in u)u.hasOwnProperty(q)&&(d=u[q],d!=null&&pt(i,a,q,d,u,null))}function AN(i,a,u,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,N=null,q=null,J=null,ae=null,he=null;for(ue in u){var ye=u[ue];if(u.hasOwnProperty(ue)&&ye!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":J=ye;default:d.hasOwnProperty(ue)||pt(i,a,ue,null,d,ye)}}for(var le in d){var ue=d[le];if(ye=u[le],d.hasOwnProperty(le)&&(ue!=null||ye!=null))switch(le){case"type":v=ue;break;case"name":g=ue;break;case"checked":ae=ue;break;case"defaultChecked":he=ue;break;case"value":N=ue;break;case"defaultValue":q=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,a));break;default:ue!==ye&&pt(i,a,le,ue,d,ye)}}ir(i,N,q,J,ae,he,v,g);return;case"select":ue=N=q=le=null;for(v in u)if(J=u[v],u.hasOwnProperty(v)&&J!=null)switch(v){case"value":break;case"multiple":ue=J;default:d.hasOwnProperty(v)||pt(i,a,v,null,d,J)}for(g in d)if(v=d[g],J=u[g],d.hasOwnProperty(g)&&(v!=null||J!=null))switch(g){case"value":le=v;break;case"defaultValue":q=v;break;case"multiple":N=v;default:v!==J&&pt(i,a,g,v,d,J)}a=q,u=N,d=ue,le!=null?Ki(i,!!u,le,!1):!!d!=!!u&&(a!=null?Ki(i,!!u,a,!0):Ki(i,!!u,u?[]:"",!1));return;case"textarea":ue=le=null;for(q in u)if(g=u[q],u.hasOwnProperty(q)&&g!=null&&!d.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:pt(i,a,q,null,d,g)}for(N in d)if(g=d[N],v=u[N],d.hasOwnProperty(N)&&(g!=null||v!=null))switch(N){case"value":le=g;break;case"defaultValue":ue=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==v&&pt(i,a,N,g,d,v)}ft(i,le,ue);return;case"option":for(var Oe in u)if(le=u[Oe],u.hasOwnProperty(Oe)&&le!=null&&!d.hasOwnProperty(Oe))switch(Oe){case"selected":i.selected=!1;break;default:pt(i,a,Oe,null,d,le)}for(J in d)if(le=d[J],ue=u[J],d.hasOwnProperty(J)&&le!==ue&&(le!=null||ue!=null))switch(J){case"selected":i.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:pt(i,a,J,le,d,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in u)le=u[Ie],u.hasOwnProperty(Ie)&&le!=null&&!d.hasOwnProperty(Ie)&&pt(i,a,Ie,null,d,le);for(ae in d)if(le=d[ae],ue=u[ae],d.hasOwnProperty(ae)&&le!==ue&&(le!=null||ue!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,a));break;default:pt(i,a,ae,le,d,ue)}return;default:if(ju(a)){for(var mt in u)le=u[mt],u.hasOwnProperty(mt)&&le!==void 0&&!d.hasOwnProperty(mt)&&fy(i,a,mt,void 0,d,le);for(he in d)le=d[he],ue=u[he],!d.hasOwnProperty(he)||le===ue||le===void 0&&ue===void 0||fy(i,a,he,le,d,ue);return}}for(var re in u)le=u[re],u.hasOwnProperty(re)&&le!=null&&!d.hasOwnProperty(re)&&pt(i,a,re,null,d,le);for(ye in d)le=d[ye],ue=u[ye],!d.hasOwnProperty(ye)||le===ue||le==null&&ue==null||pt(i,a,ye,le,d,ue)}var hy=null,py=null;function ch(i){return i.nodeType===9?i:i.ownerDocument}function IE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function NE(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function my(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var gy=null;function xN(){var i=window.event;return i&&i.type==="popstate"?i===gy?!1:(gy=i,!0):(gy=null,!1)}var DE=typeof setTimeout=="function"?setTimeout:void 0,CN=typeof clearTimeout=="function"?clearTimeout:void 0,ME=typeof Promise=="function"?Promise:void 0,RN=typeof queueMicrotask=="function"?queueMicrotask:typeof ME<"u"?function(i){return ME.resolve(null).then(i).catch(kN)}:DE;function kN(i){setTimeout(function(){throw i})}function Ks(i){return i==="head"}function PE(i,a){var u=a,d=0,g=0;do{var v=u.nextSibling;if(i.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(0<d&&8>d){u=d;var N=i.ownerDocument;if(u&1&&Sc(N.documentElement),u&2&&Sc(N.body),u&4)for(u=N.head,Sc(u),N=u.firstChild;N;){var q=N.nextSibling,J=N.nodeName;N[qi]||J==="SCRIPT"||J==="STYLE"||J==="LINK"&&N.rel.toLowerCase()==="stylesheet"||u.removeChild(N),N=q}}if(g===0){i.removeChild(v),Dc(a);return}g--}else u==="$"||u==="$?"||u==="$!"?g++:d=u.charCodeAt(0)-48;else d=0;u=v}while(u);Dc(a)}function yy(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":yy(u),fi(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function IN(i,a,u,d){for(;i.nodeType===1;){var g=u;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[qi])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Wr(i.nextSibling),i===null)break}return null}function NN(i,a,u){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=Wr(i.nextSibling),i===null))return null;return i}function vy(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function DN(i,a){var u=i.ownerDocument;if(i.data!=="$?"||u.readyState==="complete")a();else{var d=function(){a(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function Wr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var _y=null;function OE(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}function VE(i,a,u){switch(a=ch(u),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Sc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);fi(i)}var Lr=new Map,LE=new Set;function dh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var fs=B.d;B.d={f:MN,r:PN,D:ON,C:VN,L:LN,m:zN,X:UN,S:jN,M:BN};function MN(){var i=fs.f(),a=nh();return i||a}function PN(i){var a=Sr(i);a!==null&&a.tag===5&&a.type==="form"?r1(a):fs.r(i)}var Il=typeof document>"u"?null:document;function zE(i,a,u){var d=Il;if(d&&typeof a=="string"&&a){var g=qt(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof u=="string"&&(g+='[crossorigin="'+u+'"]'),LE.has(g)||(LE.add(g),i={rel:i,crossOrigin:u,href:a},d.querySelector(g)===null&&(a=d.createElement("link"),wn(a,"link",i),St(a),d.head.appendChild(a)))}}function ON(i){fs.D(i),zE("dns-prefetch",i,null)}function VN(i,a){fs.C(i,a),zE("preconnect",i,a)}function LN(i,a,u){fs.L(i,a,u);var d=Il;if(d&&i&&a){var g='link[rel="preload"][as="'+qt(a)+'"]';a==="image"&&u&&u.imageSrcSet?(g+='[imagesrcset="'+qt(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(g+='[imagesizes="'+qt(u.imageSizes)+'"]')):g+='[href="'+qt(i)+'"]';var v=g;switch(a){case"style":v=Nl(i);break;case"script":v=Dl(i)}Lr.has(v)||(i=m({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:i,as:a},u),Lr.set(v,i),d.querySelector(g)!==null||a==="style"&&d.querySelector(Ac(v))||a==="script"&&d.querySelector(xc(v))||(a=d.createElement("link"),wn(a,"link",i),St(a),d.head.appendChild(a)))}}function zN(i,a){fs.m(i,a);var u=Il;if(u&&i){var d=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+qt(d)+'"][href="'+qt(i)+'"]',v=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Dl(i)}if(!Lr.has(v)&&(i=m({rel:"modulepreload",href:i},a),Lr.set(v,i),u.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(xc(v)))return}d=u.createElement("link"),wn(d,"link",i),St(d),u.head.appendChild(d)}}}function jN(i,a,u){fs.S(i,a,u);var d=Il;if(d&&i){var g=gn(d).hoistableStyles,v=Nl(i);a=a||"default";var N=g.get(v);if(!N){var q={loading:0,preload:null};if(N=d.querySelector(Ac(v)))q.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":a},u),(u=Lr.get(v))&&wy(i,u);var J=N=d.createElement("link");St(J),wn(J,"link",i),J._p=new Promise(function(ae,he){J.onload=ae,J.onerror=he}),J.addEventListener("load",function(){q.loading|=1}),J.addEventListener("error",function(){q.loading|=2}),q.loading|=4,fh(N,a,d)}N={type:"stylesheet",instance:N,count:1,state:q},g.set(v,N)}}}function UN(i,a){fs.X(i,a);var u=Il;if(u&&i){var d=gn(u).hoistableScripts,g=Dl(i),v=d.get(g);v||(v=u.querySelector(xc(g)),v||(i=m({src:i,async:!0},a),(a=Lr.get(g))&&by(i,a),v=u.createElement("script"),St(v),wn(v,"link",i),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function BN(i,a){fs.M(i,a);var u=Il;if(u&&i){var d=gn(u).hoistableScripts,g=Dl(i),v=d.get(g);v||(v=u.querySelector(xc(g)),v||(i=m({src:i,async:!0,type:"module"},a),(a=Lr.get(g))&&by(i,a),v=u.createElement("script"),St(v),wn(v,"link",i),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function jE(i,a,u,d){var g=(g=ce.current)?dh(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Nl(u.href),u=gn(g).hoistableStyles,d=u.get(a),d||(d={type:"style",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=Nl(u.href);var v=gn(g).hoistableStyles,N=v.get(i);if(N||(g=g.ownerDocument||g,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,N),(v=g.querySelector(Ac(i)))&&!v._p&&(N.instance=v,N.state.loading=5),Lr.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Lr.set(i,u),v||HN(g,i,u,N.state))),a&&d===null)throw Error(r(528,""));return N}if(a&&d!==null)throw Error(r(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Dl(u),u=gn(g).hoistableScripts,d=u.get(a),d||(d={type:"script",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Nl(i){return'href="'+qt(i)+'"'}function Ac(i){return'link[rel="stylesheet"]['+i+"]"}function UE(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function HN(i,a,u,d){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=i.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),wn(a,"link",u),St(a),i.head.appendChild(a))}function Dl(i){return'[src="'+qt(i)+'"]'}function xc(i){return"script[async]"+i}function BE(i,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var d=i.querySelector('style[data-href~="'+qt(u.href)+'"]');if(d)return a.instance=d,St(d),d;var g=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),St(d),wn(d,"style",g),fh(d,u.precedence,i),a.instance=d;case"stylesheet":g=Nl(u.href);var v=i.querySelector(Ac(g));if(v)return a.state.loading|=4,a.instance=v,St(v),v;d=UE(u),(g=Lr.get(g))&&wy(d,g),v=(i.ownerDocument||i).createElement("link"),St(v);var N=v;return N._p=new Promise(function(q,J){N.onload=q,N.onerror=J}),wn(v,"link",d),a.state.loading|=4,fh(v,u.precedence,i),a.instance=v;case"script":return v=Dl(u.src),(g=i.querySelector(xc(v)))?(a.instance=g,St(g),g):(d=u,(g=Lr.get(v))&&(d=m({},u),by(d,g)),i=i.ownerDocument||i,g=i.createElement("script"),St(g),wn(g,"link",d),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,fh(d,u.precedence,i));return a.instance}function fh(i,a,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,v=g,N=0;N<d.length;N++){var q=d[N];if(q.dataset.precedence===a)v=q;else if(v!==g)break}v?v.parentNode.insertBefore(i,v.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(i,a.firstChild))}function wy(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function by(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var hh=null;function HE(i,a,u){if(hh===null){var d=new Map,g=hh=new Map;g.set(u,d)}else g=hh,d=g.get(u),d||(d=new Map,g.set(u,d));if(d.has(i))return d;for(d.set(i,null),u=u.getElementsByTagName(i),g=0;g<u.length;g++){var v=u[g];if(!(v[qi]||v[Lt]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var N=v.getAttribute(a)||"";N=i+N;var q=d.get(N);q?q.push(v):d.set(N,[v])}}return d}function $E(i,a,u){i=i.ownerDocument||i,i.head.insertBefore(u,a==="title"?i.querySelector("head > title"):null)}function $N(i,a,u){if(u===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function FE(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Cc=null;function FN(){}function qN(i,a,u){if(Cc===null)throw Error(r(475));var d=Cc;if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Nl(u.href),v=i.querySelector(Ac(g));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(d.count++,d=ph.bind(d),i.then(d,d)),a.state.loading|=4,a.instance=v,St(v);return}v=i.ownerDocument||i,u=UE(u),(g=Lr.get(g))&&wy(u,g),v=v.createElement("link"),St(v);var N=v;N._p=new Promise(function(q,J){N.onload=q,N.onerror=J}),wn(v,"link",u),a.instance=v}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(d.count++,a=ph.bind(d),i.addEventListener("load",a),i.addEventListener("error",a))}}function GN(){if(Cc===null)throw Error(r(475));var i=Cc;return i.stylesheets&&i.count===0&&Ey(i,i.stylesheets),0<i.count?function(a){var u=setTimeout(function(){if(i.stylesheets&&Ey(i,i.stylesheets),i.unsuspend){var d=i.unsuspend;i.unsuspend=null,d()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u)}}:null}function ph(){if(this.count--,this.count===0){if(this.stylesheets)Ey(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var mh=null;function Ey(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,mh=new Map,a.forEach(KN,i),mh=null,ph.call(i))}function KN(i,a){if(!(a.state.loading&4)){var u=mh.get(i);if(u)var d=u.get(null);else{u=new Map,mh.set(i,u);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var N=g[v];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(u.set(N.dataset.precedence,N),d=N)}d&&u.set(null,d)}g=a.instance,N=g.getAttribute("data-precedence"),v=u.get(N)||d,v===d&&u.set(null,g),u.set(N,g),this.count++,d=ph.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),v?v.parentNode.insertBefore(g,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var Rc={$$typeof:K,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function YN(i,a,u,d,g,v,N,q){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tr(0),this.hiddenUpdates=tr(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function qE(i,a,u,d,g,v,N,q,J,ae,he,ye){return i=new YN(i,a,u,N,q,J,ae,ye),a=1,v===!0&&(a|=24),v=ar(3,null,null,a),i.current=v,v.stateNode=i,a=rg(),a.refCount++,i.pooledCache=a,a.refCount++,v.memoizedState={element:d,isDehydrated:u,cache:a},og(v),i}function GE(i){return i?(i=ul,i):ul}function KE(i,a,u,d,g,v){g=GE(g),d.context===null?d.context=g:d.pendingContext=g,d=Ps(a),d.payload={element:u},v=v===void 0?null:v,v!==null&&(d.callback=v),u=Os(i,d,a),u!==null&&(dr(u,i,a),ic(u,i,a))}function YE(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function Ty(i,a){YE(i,a),(i=i.alternate)&&YE(i,a)}function XE(i){if(i.tag===13){var a=ll(i,67108864);a!==null&&dr(a,i,67108864),Ty(i,67108864)}}var gh=!0;function XN(i,a,u,d){var g=x.T;x.T=null;var v=B.p;try{B.p=2,Sy(i,a,u,d)}finally{B.p=v,x.T=g}}function WN(i,a,u,d){var g=x.T;x.T=null;var v=B.p;try{B.p=8,Sy(i,a,u,d)}finally{B.p=v,x.T=g}}function Sy(i,a,u,d){if(gh){var g=Ay(d);if(g===null)dy(i,a,d,yh,u),QE(i,d);else if(ZN(g,i,a,u,d))d.stopPropagation();else if(QE(i,d),a&4&&-1<QN.indexOf(i)){for(;g!==null;){var v=Sr(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var N=an(v.pendingLanes);if(N!==0){var q=v;for(q.pendingLanes|=2,q.entangledLanes|=2;N;){var J=1<<31-Tt(N);q.entanglements[1]|=J,N&=~J}Ci(v),(ct&6)===0&&(eh=Be()+500,bc(0))}}break;case 13:q=ll(v,2),q!==null&&dr(q,v,2),nh(),Ty(v,2)}if(v=Ay(d),v===null&&dy(i,a,d,yh,u),v===g)break;g=v}g!==null&&d.stopPropagation()}else dy(i,a,d,null,u)}}function Ay(i){return i=Rr(i),xy(i)}var yh=null;function xy(i){if(yh=null,i=Tr(i),i!==null){var a=o(i);if(a===null)i=null;else{var u=a.tag;if(u===13){if(i=l(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return yh=i,null}function WE(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(be()){case kt:return 2;case An:return 8;case Qt:case er:return 32;case Pn:return 268435456;default:return 32}default:return 32}}var Cy=!1,Ys=null,Xs=null,Ws=null,kc=new Map,Ic=new Map,Qs=[],QN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function QE(i,a){switch(i){case"focusin":case"focusout":Ys=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":kc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ic.delete(a.pointerId)}}function Nc(i,a,u,d,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:a,domEventName:u,eventSystemFlags:d,nativeEvent:v,targetContainers:[g]},a!==null&&(a=Sr(a),a!==null&&XE(a)),i):(i.eventSystemFlags|=d,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function ZN(i,a,u,d,g){switch(a){case"focusin":return Ys=Nc(Ys,i,a,u,d,g),!0;case"dragenter":return Xs=Nc(Xs,i,a,u,d,g),!0;case"mouseover":return Ws=Nc(Ws,i,a,u,d,g),!0;case"pointerover":var v=g.pointerId;return kc.set(v,Nc(kc.get(v)||null,i,a,u,d,g)),!0;case"gotpointercapture":return v=g.pointerId,Ic.set(v,Nc(Ic.get(v)||null,i,a,u,d,g)),!0}return!1}function ZE(i){var a=Tr(i.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){i.blockedOn=a,$o(i.priority,function(){if(u.tag===13){var d=cr();d=ui(d);var g=ll(u,d);g!==null&&dr(g,u,d),Ty(u,d)}});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function vh(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=Ay(i.nativeEvent);if(u===null){u=i.nativeEvent;var d=new u.constructor(u.type,u);Yi=d,u.target.dispatchEvent(d),Yi=null}else return a=Sr(u),a!==null&&XE(a),i.blockedOn=u,!1;a.shift()}return!0}function JE(i,a,u){vh(i)&&u.delete(a)}function JN(){Cy=!1,Ys!==null&&vh(Ys)&&(Ys=null),Xs!==null&&vh(Xs)&&(Xs=null),Ws!==null&&vh(Ws)&&(Ws=null),kc.forEach(JE),Ic.forEach(JE)}function _h(i,a){i.blockedOn===a&&(i.blockedOn=null,Cy||(Cy=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,JN)))}var wh=null;function eT(i){wh!==i&&(wh=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){wh===i&&(wh=null);for(var a=0;a<i.length;a+=3){var u=i[a],d=i[a+1],g=i[a+2];if(typeof d!="function"){if(xy(d||u)===null)continue;break}var v=Sr(u);v!==null&&(i.splice(a,3),a-=3,xg(v,{pending:!0,data:g,method:u.method,action:d},d,g))}}))}function Dc(i){function a(J){return _h(J,i)}Ys!==null&&_h(Ys,i),Xs!==null&&_h(Xs,i),Ws!==null&&_h(Ws,i),kc.forEach(a),Ic.forEach(a);for(var u=0;u<Qs.length;u++){var d=Qs[u];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Qs.length&&(u=Qs[0],u.blockedOn===null);)ZE(u),u.blockedOn===null&&Qs.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var g=u[d],v=u[d+1],N=g[It]||null;if(typeof v=="function")N||eT(u);else if(N){var q=null;if(v&&v.hasAttribute("formAction")){if(g=v,N=v[It]||null)q=N.formAction;else if(xy(g)!==null)continue}else q=N.action;typeof q=="function"?u[d+1]=q:(u.splice(d,3),d-=3),eT(u)}}}function Ry(i){this._internalRoot=i}bh.prototype.render=Ry.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var u=a.current,d=cr();KE(u,d,i,a,null,null)},bh.prototype.unmount=Ry.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;KE(i.current,2,null,i,null,null),nh(),a[qn]=null}};function bh(i){this._internalRoot=i}bh.prototype.unstable_scheduleHydration=function(i){if(i){var a=ci();i={blockedOn:null,target:i,priority:a};for(var u=0;u<Qs.length&&a!==0&&a<Qs[u].priority;u++);Qs.splice(u,0,i),u===0&&ZE(i)}};var tT=e.version;if(tT!=="19.1.0")throw Error(r(527,tT,"19.1.0"));B.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=f(a),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var eD={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:x,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eh.isDisabled&&Eh.supportsFiber)try{ot=Eh.inject(eD),Ye=Eh}catch{}}return Pc.createRoot=function(i,a){if(!s(i))throw Error(r(299));var u=!1,d="",g=y1,v=v1,N=_1,q=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(N=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(q=a.unstable_transitionCallbacks)),a=qE(i,1,!1,null,null,u,d,g,v,N,q,null),i[qn]=a.current,cy(i),new Ry(a)},Pc.hydrateRoot=function(i,a,u){if(!s(i))throw Error(r(299));var d=!1,g="",v=y1,N=v1,q=_1,J=null,ae=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(v=u.onUncaughtError),u.onCaughtError!==void 0&&(N=u.onCaughtError),u.onRecoverableError!==void 0&&(q=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(J=u.unstable_transitionCallbacks),u.formState!==void 0&&(ae=u.formState)),a=qE(i,1,!0,a,u??null,d,g,v,N,q,J,ae),a.context=GE(null),u=a.current,d=cr(),d=ui(d),g=Ps(d),g.callback=null,Os(u,g,d),u=d,a.current.lanes=u,br(a,u),Ci(a),i[qn]=a.current,cy(i),new bh(a)},Pc.version="19.1.0",Pc}var dT;function dD(){if(dT)return Ny.exports;dT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ny.exports=cD(),Ny.exports}var fD=dD();function Fn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Fn(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var Oy={exports:{}},Vy={},Ly={exports:{}},zy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT;function hD(){if(fT)return zy;fT=1;var t=Ud();function e(_,w){return _===w&&(_!==0||1/_===1/w)||_!==_&&w!==w}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,o=t.useLayoutEffect,l=t.useDebugValue;function c(_,w){var C=w(),M=r({inst:{value:C,getSnapshot:w}}),P=M[0].inst,L=M[1];return o(function(){P.value=C,P.getSnapshot=w,f(P)&&L({inst:P})},[_,C,w]),s(function(){return f(P)&&L({inst:P}),_(function(){f(P)&&L({inst:P})})},[_]),l(C),C}function f(_){var w=_.getSnapshot;_=_.value;try{var C=w();return!n(_,C)}catch{return!0}}function h(_,w){return w()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return zy.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,zy}var hT;function pD(){return hT||(hT=1,Ly.exports=hD()),Ly.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pT;function mD(){if(pT)return Vy;pT=1;var t=Ud(),e=pD();function n(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,o=t.useRef,l=t.useEffect,c=t.useMemo,f=t.useDebugValue;return Vy.useSyncExternalStoreWithSelector=function(h,m,_,w,C){var M=o(null);if(M.current===null){var P={hasValue:!1,value:null};M.current=P}else P=M.current;M=c(function(){function j(b){if(!H){if(H=!0,K=b,b=w(b),C!==void 0&&P.hasValue){var T=P.value;if(C(T,b))return y=T}return y=b}if(T=y,r(K,b))return T;var A=w(b);return C!==void 0&&C(T,A)?(K=b,T):(K=b,y=A)}var H=!1,K,y,E=_===void 0?null:_;return[function(){return j(m())},E===null?void 0:function(){return j(E())}]},[m,_,w,C]);var L=s(h,M[0],M[1]);return l(function(){P.hasValue=!0,P.value=L},[L]),f(L),L},Vy}var mT;function gD(){return mT||(mT=1,Oy.exports=mD()),Oy.exports}var yD=gD();const vD=jv(yD),_D={},gT=t=>{let e;const n=new Set,r=(m,_)=>{const w=typeof m=="function"?m(e):m;if(!Object.is(w,e)){const C=e;e=_??(typeof w!="object"||w===null)?w:Object.assign({},e,w),n.forEach(M=>M(e,C))}},s=()=>e,f={setState:r,getState:s,getInitialState:()=>h,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(_D?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=e=t(r,s,f);return f},wD=t=>t?gT(t):gT,{useDebugValue:bD}=pe,{useSyncExternalStoreWithSelector:ED}=vD,TD=t=>t;function S2(t,e=TD,n){const r=ED(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return bD(r),r}const yT=(t,e)=>{const n=wD(t),r=(s,o=e)=>S2(n,s,o);return Object.assign(r,n),r},SD=(t,e)=>t?yT(t,e):yT;function Dn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var AD={value:()=>{}};function Yp(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new qh(n)}function qh(t){this._=t}function xD(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}qh.prototype=Yp.prototype={constructor:qh,on:function(t,e){var n=this._,r=xD(t+"",n),s,o=-1,l=r.length;if(arguments.length<2){for(;++o<l;)if((s=(t=r[o]).type)&&(s=CD(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<l;)if(s=(t=r[o]).type)n[s]=vT(n[s],t.name,e);else if(e==null)for(s in n)n[s]=vT(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new qh(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,o;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,s=o.length;r<s;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,o=r.length;s<o;++s)r[s].value.apply(e,n)}};function CD(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function vT(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=AD,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var x0="http://www.w3.org/1999/xhtml";const _T={svg:"http://www.w3.org/2000/svg",xhtml:x0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xp(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),_T.hasOwnProperty(e)?{space:_T[e],local:t}:t}function RD(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===x0&&e.documentElement.namespaceURI===x0?e.createElement(t):e.createElementNS(n,t)}}function kD(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function A2(t){var e=Xp(t);return(e.local?kD:RD)(e)}function ID(){}function Uv(t){return t==null?ID:function(){return this.querySelector(t)}}function ND(t){typeof t!="function"&&(t=Uv(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,c=r[s]=new Array(l),f,h,m=0;m<l;++m)(f=o[m])&&(h=t.call(f,f.__data__,m,o))&&("__data__"in f&&(h.__data__=f.__data__),c[m]=h);return new _r(r,this._parents)}function DD(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function MD(){return[]}function x2(t){return t==null?MD:function(){return this.querySelectorAll(t)}}function PD(t){return function(){return DD(t.apply(this,arguments))}}function OD(t){typeof t=="function"?t=PD(t):t=x2(t);for(var e=this._groups,n=e.length,r=[],s=[],o=0;o<n;++o)for(var l=e[o],c=l.length,f,h=0;h<c;++h)(f=l[h])&&(r.push(t.call(f,f.__data__,h,l)),s.push(f));return new _r(r,s)}function C2(t){return function(){return this.matches(t)}}function R2(t){return function(e){return e.matches(t)}}var VD=Array.prototype.find;function LD(t){return function(){return VD.call(this.children,t)}}function zD(){return this.firstElementChild}function jD(t){return this.select(t==null?zD:LD(typeof t=="function"?t:R2(t)))}var UD=Array.prototype.filter;function BD(){return Array.from(this.children)}function HD(t){return function(){return UD.call(this.children,t)}}function $D(t){return this.selectAll(t==null?BD:HD(typeof t=="function"?t:R2(t)))}function FD(t){typeof t!="function"&&(t=C2(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,c=r[s]=[],f,h=0;h<l;++h)(f=o[h])&&t.call(f,f.__data__,h,o)&&c.push(f);return new _r(r,this._parents)}function k2(t){return new Array(t.length)}function qD(){return new _r(this._enter||this._groups.map(k2),this._parents)}function fp(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}fp.prototype={constructor:fp,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function GD(t){return function(){return t}}function KD(t,e,n,r,s,o){for(var l=0,c,f=e.length,h=o.length;l<h;++l)(c=e[l])?(c.__data__=o[l],r[l]=c):n[l]=new fp(t,o[l]);for(;l<f;++l)(c=e[l])&&(s[l]=c)}function YD(t,e,n,r,s,o,l){var c,f,h=new Map,m=e.length,_=o.length,w=new Array(m),C;for(c=0;c<m;++c)(f=e[c])&&(w[c]=C=l.call(f,f.__data__,c,e)+"",h.has(C)?s[c]=f:h.set(C,f));for(c=0;c<_;++c)C=l.call(t,o[c],c,o)+"",(f=h.get(C))?(r[c]=f,f.__data__=o[c],h.delete(C)):n[c]=new fp(t,o[c]);for(c=0;c<m;++c)(f=e[c])&&h.get(w[c])===f&&(s[c]=f)}function XD(t){return t.__data__}function WD(t,e){if(!arguments.length)return Array.from(this,XD);var n=e?YD:KD,r=this._parents,s=this._groups;typeof t!="function"&&(t=GD(t));for(var o=s.length,l=new Array(o),c=new Array(o),f=new Array(o),h=0;h<o;++h){var m=r[h],_=s[h],w=_.length,C=QD(t.call(m,m&&m.__data__,h,r)),M=C.length,P=c[h]=new Array(M),L=l[h]=new Array(M),j=f[h]=new Array(w);n(m,_,P,L,j,C,e);for(var H=0,K=0,y,E;H<M;++H)if(y=P[H]){for(H>=K&&(K=H+1);!(E=L[K])&&++K<M;);y._next=E||null}}return l=new _r(l,r),l._enter=c,l._exit=f,l}function QD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ZD(){return new _r(this._exit||this._groups.map(k2),this._parents)}function JD(t,e,n){var r=this.enter(),s=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?o.remove():n(o),r&&s?r.merge(s).order():s}function e4(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,o=r.length,l=Math.min(s,o),c=new Array(s),f=0;f<l;++f)for(var h=n[f],m=r[f],_=h.length,w=c[f]=new Array(_),C,M=0;M<_;++M)(C=h[M]||m[M])&&(w[M]=C);for(;f<s;++f)c[f]=n[f];return new _r(c,this._parents)}function t4(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,o=r[s],l;--s>=0;)(l=r[s])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function n4(t){t||(t=r4);function e(_,w){return _&&w?t(_.__data__,w.__data__):!_-!w}for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o){for(var l=n[o],c=l.length,f=s[o]=new Array(c),h,m=0;m<c;++m)(h=l[m])&&(f[m]=h);f.sort(e)}return new _r(s,this._parents).order()}function r4(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function i4(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function s4(){return Array.from(this)}function a4(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length;s<o;++s){var l=r[s];if(l)return l}return null}function o4(){let t=0;for(const e of this)++t;return t}function l4(){return!this.node()}function u4(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],o=0,l=s.length,c;o<l;++o)(c=s[o])&&t.call(c,c.__data__,o,s);return this}function c4(t){return function(){this.removeAttribute(t)}}function d4(t){return function(){this.removeAttributeNS(t.space,t.local)}}function f4(t,e){return function(){this.setAttribute(t,e)}}function h4(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function p4(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function m4(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function g4(t,e){var n=Xp(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?d4:c4:typeof e=="function"?n.local?m4:p4:n.local?h4:f4)(n,e))}function I2(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function y4(t){return function(){this.style.removeProperty(t)}}function v4(t,e,n){return function(){this.style.setProperty(t,e,n)}}function _4(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function w4(t,e,n){return arguments.length>1?this.each((e==null?y4:typeof e=="function"?_4:v4)(t,e,n??"")):uu(this.node(),t)}function uu(t,e){return t.style.getPropertyValue(e)||I2(t).getComputedStyle(t,null).getPropertyValue(e)}function b4(t){return function(){delete this[t]}}function E4(t,e){return function(){this[t]=e}}function T4(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function S4(t,e){return arguments.length>1?this.each((e==null?b4:typeof e=="function"?T4:E4)(t,e)):this.node()[t]}function N2(t){return t.trim().split(/^|\s+/)}function Bv(t){return t.classList||new D2(t)}function D2(t){this._node=t,this._names=N2(t.getAttribute("class")||"")}D2.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function M2(t,e){for(var n=Bv(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function P2(t,e){for(var n=Bv(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function A4(t){return function(){M2(this,t)}}function x4(t){return function(){P2(this,t)}}function C4(t,e){return function(){(e.apply(this,arguments)?M2:P2)(this,t)}}function R4(t,e){var n=N2(t+"");if(arguments.length<2){for(var r=Bv(this.node()),s=-1,o=n.length;++s<o;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?C4:e?A4:x4)(n,e))}function k4(){this.textContent=""}function I4(t){return function(){this.textContent=t}}function N4(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function D4(t){return arguments.length?this.each(t==null?k4:(typeof t=="function"?N4:I4)(t)):this.node().textContent}function M4(){this.innerHTML=""}function P4(t){return function(){this.innerHTML=t}}function O4(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function V4(t){return arguments.length?this.each(t==null?M4:(typeof t=="function"?O4:P4)(t)):this.node().innerHTML}function L4(){this.nextSibling&&this.parentNode.appendChild(this)}function z4(){return this.each(L4)}function j4(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function U4(){return this.each(j4)}function B4(t){var e=typeof t=="function"?t:A2(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function H4(){return null}function $4(t,e){var n=typeof t=="function"?t:A2(t),r=e==null?H4:typeof e=="function"?e:Uv(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function F4(){var t=this.parentNode;t&&t.removeChild(this)}function q4(){return this.each(F4)}function G4(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function K4(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Y4(t){return this.select(t?K4:G4)}function X4(t){return arguments.length?this.property("__data__",t):this.node().__data__}function W4(t){return function(e){t.call(this,e,this.__data__)}}function Q4(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Z4(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,o;n<s;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function J4(t,e,n){return function(){var r=this.__on,s,o=W4(e);if(r){for(var l=0,c=r.length;l<c;++l)if((s=r[l]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=n),s.value=e;return}}this.addEventListener(t.type,o,n),s={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(s):this.__on=[s]}}function eM(t,e,n){var r=Q4(t+""),s,o=r.length,l;if(arguments.length<2){var c=this.node().__on;if(c){for(var f=0,h=c.length,m;f<h;++f)for(s=0,m=c[f];s<o;++s)if((l=r[s]).type===m.type&&l.name===m.name)return m.value}return}for(c=e?J4:Z4,s=0;s<o;++s)this.each(c(r[s],e,n));return this}function O2(t,e,n){var r=I2(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function tM(t,e){return function(){return O2(this,t,e)}}function nM(t,e){return function(){return O2(this,t,e.apply(this,arguments))}}function rM(t,e){return this.each((typeof e=="function"?nM:tM)(t,e))}function*iM(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length,l;s<o;++s)(l=r[s])&&(yield l)}var V2=[null];function _r(t,e){this._groups=t,this._parents=e}function Bd(){return new _r([[document.documentElement]],V2)}function sM(){return this}_r.prototype=Bd.prototype={constructor:_r,select:ND,selectAll:OD,selectChild:jD,selectChildren:$D,filter:FD,data:WD,enter:qD,exit:ZD,join:JD,merge:e4,selection:sM,order:t4,sort:n4,call:i4,nodes:s4,node:a4,size:o4,empty:l4,each:u4,attr:g4,style:w4,property:S4,classed:R4,text:D4,html:V4,raise:z4,lower:U4,append:B4,insert:$4,remove:q4,clone:Y4,datum:X4,on:eM,dispatch:rM,[Symbol.iterator]:iM};function Jr(t){return typeof t=="string"?new _r([[document.querySelector(t)]],[document.documentElement]):new _r([[t]],V2)}function aM(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ki(t,e){if(t=aM(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const oM={passive:!1},pd={capture:!0,passive:!1};function jy(t){t.stopImmediatePropagation()}function Jl(t){t.preventDefault(),t.stopImmediatePropagation()}function L2(t){var e=t.document.documentElement,n=Jr(t).on("dragstart.drag",Jl,pd);"onselectstart"in e?n.on("selectstart.drag",Jl,pd):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function z2(t,e){var n=t.document.documentElement,r=Jr(t).on("dragstart.drag",null);e&&(r.on("click.drag",Jl,pd),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Th=t=>()=>t;function C0(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:o,x:l,y:c,dx:f,dy:h,dispatch:m}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:m}})}C0.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function lM(t){return!t.ctrlKey&&!t.button}function uM(){return this.parentNode}function cM(t,e){return e??{x:t.x,y:t.y}}function dM(){return navigator.maxTouchPoints||"ontouchstart"in this}function fM(){var t=lM,e=uM,n=cM,r=dM,s={},o=Yp("start","drag","end"),l=0,c,f,h,m,_=0;function w(y){y.on("mousedown.drag",C).filter(r).on("touchstart.drag",L).on("touchmove.drag",j,oM).on("touchend.drag touchcancel.drag",H).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function C(y,E){if(!(m||!t.call(this,y,E))){var b=K(this,e.call(this,y,E),y,E,"mouse");b&&(Jr(y.view).on("mousemove.drag",M,pd).on("mouseup.drag",P,pd),L2(y.view),jy(y),h=!1,c=y.clientX,f=y.clientY,b("start",y))}}function M(y){if(Jl(y),!h){var E=y.clientX-c,b=y.clientY-f;h=E*E+b*b>_}s.mouse("drag",y)}function P(y){Jr(y.view).on("mousemove.drag mouseup.drag",null),z2(y.view,h),Jl(y),s.mouse("end",y)}function L(y,E){if(t.call(this,y,E)){var b=y.changedTouches,T=e.call(this,y,E),A=b.length,R,k;for(R=0;R<A;++R)(k=K(this,T,y,E,b[R].identifier,b[R]))&&(jy(y),k("start",y,b[R]))}}function j(y){var E=y.changedTouches,b=E.length,T,A;for(T=0;T<b;++T)(A=s[E[T].identifier])&&(Jl(y),A("drag",y,E[T]))}function H(y){var E=y.changedTouches,b=E.length,T,A;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),T=0;T<b;++T)(A=s[E[T].identifier])&&(jy(y),A("end",y,E[T]))}function K(y,E,b,T,A,R){var k=o.copy(),D=ki(R||b,E),$,V,U;if((U=n.call(y,new C0("beforestart",{sourceEvent:b,target:w,identifier:A,active:l,x:D[0],y:D[1],dx:0,dy:0,dispatch:k}),T))!=null)return $=U.x-D[0]||0,V=U.y-D[1]||0,function Q(x,B,G){var X=D,z;switch(x){case"start":s[A]=Q,z=l++;break;case"end":delete s[A],--l;case"drag":D=ki(G||B,E),z=l;break}k.call(x,y,new C0(x,{sourceEvent:B,subject:U,target:w,identifier:A,active:z,x:D[0]+$,y:D[1]+V,dx:D[0]-X[0],dy:D[1]-X[1],dispatch:k}),T)}}return w.filter=function(y){return arguments.length?(t=typeof y=="function"?y:Th(!!y),w):t},w.container=function(y){return arguments.length?(e=typeof y=="function"?y:Th(y),w):e},w.subject=function(y){return arguments.length?(n=typeof y=="function"?y:Th(y),w):n},w.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:Th(!!y),w):r},w.on=function(){var y=o.on.apply(o,arguments);return y===o?w:y},w.clickDistance=function(y){return arguments.length?(_=(y=+y)*y,w):Math.sqrt(_)},w}function Hv(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function j2(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Hd(){}var md=.7,hp=1/md,eu="\\s*([+-]?\\d+)\\s*",gd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ni="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hM=/^#([0-9a-f]{3,8})$/,pM=new RegExp(`^rgb\\(${eu},${eu},${eu}\\)$`),mM=new RegExp(`^rgb\\(${Ni},${Ni},${Ni}\\)$`),gM=new RegExp(`^rgba\\(${eu},${eu},${eu},${gd}\\)$`),yM=new RegExp(`^rgba\\(${Ni},${Ni},${Ni},${gd}\\)$`),vM=new RegExp(`^hsl\\(${gd},${Ni},${Ni}\\)$`),_M=new RegExp(`^hsla\\(${gd},${Ni},${Ni},${gd}\\)$`),wT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hv(Hd,yd,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:bT,formatHex:bT,formatHex8:wM,formatHsl:bM,formatRgb:ET,toString:ET});function bT(){return this.rgb().formatHex()}function wM(){return this.rgb().formatHex8()}function bM(){return U2(this).formatHsl()}function ET(){return this.rgb().formatRgb()}function yd(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=hM.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?TT(e):n===3?new Qn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Sh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Sh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=pM.exec(t))?new Qn(e[1],e[2],e[3],1):(e=mM.exec(t))?new Qn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=gM.exec(t))?Sh(e[1],e[2],e[3],e[4]):(e=yM.exec(t))?Sh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=vM.exec(t))?xT(e[1],e[2]/100,e[3]/100,1):(e=_M.exec(t))?xT(e[1],e[2]/100,e[3]/100,e[4]):wT.hasOwnProperty(t)?TT(wT[t]):t==="transparent"?new Qn(NaN,NaN,NaN,0):null}function TT(t){return new Qn(t>>16&255,t>>8&255,t&255,1)}function Sh(t,e,n,r){return r<=0&&(t=e=n=NaN),new Qn(t,e,n,r)}function EM(t){return t instanceof Hd||(t=yd(t)),t?(t=t.rgb(),new Qn(t.r,t.g,t.b,t.opacity)):new Qn}function R0(t,e,n,r){return arguments.length===1?EM(t):new Qn(t,e,n,r??1)}function Qn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Hv(Qn,R0,j2(Hd,{brighter(t){return t=t==null?hp:Math.pow(hp,t),new Qn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?md:Math.pow(md,t),new Qn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qn(To(this.r),To(this.g),To(this.b),pp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ST,formatHex:ST,formatHex8:TM,formatRgb:AT,toString:AT}));function ST(){return`#${vo(this.r)}${vo(this.g)}${vo(this.b)}`}function TM(){return`#${vo(this.r)}${vo(this.g)}${vo(this.b)}${vo((isNaN(this.opacity)?1:this.opacity)*255)}`}function AT(){const t=pp(this.opacity);return`${t===1?"rgb(":"rgba("}${To(this.r)}, ${To(this.g)}, ${To(this.b)}${t===1?")":`, ${t})`}`}function pp(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function To(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vo(t){return t=To(t),(t<16?"0":"")+t.toString(16)}function xT(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ei(t,e,n,r)}function U2(t){if(t instanceof ei)return new ei(t.h,t.s,t.l,t.opacity);if(t instanceof Hd||(t=yd(t)),!t)return new ei;if(t instanceof ei)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),o=Math.max(e,n,r),l=NaN,c=o-s,f=(o+s)/2;return c?(e===o?l=(n-r)/c+(n<r)*6:n===o?l=(r-e)/c+2:l=(e-n)/c+4,c/=f<.5?o+s:2-o-s,l*=60):c=f>0&&f<1?0:l,new ei(l,c,f,t.opacity)}function SM(t,e,n,r){return arguments.length===1?U2(t):new ei(t,e,n,r??1)}function ei(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Hv(ei,SM,j2(Hd,{brighter(t){return t=t==null?hp:Math.pow(hp,t),new ei(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?md:Math.pow(md,t),new ei(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Qn(Uy(t>=240?t-240:t+120,s,r),Uy(t,s,r),Uy(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new ei(CT(this.h),Ah(this.s),Ah(this.l),pp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=pp(this.opacity);return`${t===1?"hsl(":"hsla("}${CT(this.h)}, ${Ah(this.s)*100}%, ${Ah(this.l)*100}%${t===1?")":`, ${t})`}`}}));function CT(t){return t=(t||0)%360,t<0?t+360:t}function Ah(t){return Math.max(0,Math.min(1,t||0))}function Uy(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const $v=t=>()=>t;function B2(t,e){return function(n){return t+n*e}}function AM(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function PY(t,e){var n=e-t;return n?B2(t,n>180||n<-180?n-360*Math.round(n/360):n):$v(isNaN(t)?e:t)}function xM(t){return(t=+t)==1?H2:function(e,n){return n-e?AM(e,n,t):$v(isNaN(e)?n:e)}}function H2(t,e){var n=e-t;return n?B2(t,n):$v(isNaN(t)?e:t)}const RT=function t(e){var n=xM(e);function r(s,o){var l=n((s=R0(s)).r,(o=R0(o)).r),c=n(s.g,o.g),f=n(s.b,o.b),h=H2(s.opacity,o.opacity);return function(m){return s.r=l(m),s.g=c(m),s.b=f(m),s.opacity=h(m),s+""}}return r.gamma=t,r}(1);function na(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var k0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,By=new RegExp(k0.source,"g");function CM(t){return function(){return t}}function RM(t){return function(e){return t(e)+""}}function kM(t,e){var n=k0.lastIndex=By.lastIndex=0,r,s,o,l=-1,c=[],f=[];for(t=t+"",e=e+"";(r=k0.exec(t))&&(s=By.exec(e));)(o=s.index)>n&&(o=e.slice(n,o),c[l]?c[l]+=o:c[++l]=o),(r=r[0])===(s=s[0])?c[l]?c[l]+=s:c[++l]=s:(c[++l]=null,f.push({i:l,x:na(r,s)})),n=By.lastIndex;return n<e.length&&(o=e.slice(n),c[l]?c[l]+=o:c[++l]=o),c.length<2?f[0]?RM(f[0].x):CM(e):(e=f.length,function(h){for(var m=0,_;m<e;++m)c[(_=f[m]).i]=_.x(h);return c.join("")})}var kT=180/Math.PI,I0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $2(t,e,n,r,s,o){var l,c,f;return(l=Math.sqrt(t*t+e*e))&&(t/=l,e/=l),(f=t*n+e*r)&&(n-=t*f,r-=e*f),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,f/=c),t*r<e*n&&(t=-t,e=-e,f=-f,l=-l),{translateX:s,translateY:o,rotate:Math.atan2(e,t)*kT,skewX:Math.atan(f)*kT,scaleX:l,scaleY:c}}var xh;function IM(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?I0:$2(e.a,e.b,e.c,e.d,e.e,e.f)}function NM(t){return t==null||(xh||(xh=document.createElementNS("http://www.w3.org/2000/svg","g")),xh.setAttribute("transform",t),!(t=xh.transform.baseVal.consolidate()))?I0:(t=t.matrix,$2(t.a,t.b,t.c,t.d,t.e,t.f))}function F2(t,e,n,r){function s(h){return h.length?h.pop()+" ":""}function o(h,m,_,w,C,M){if(h!==_||m!==w){var P=C.push("translate(",null,e,null,n);M.push({i:P-4,x:na(h,_)},{i:P-2,x:na(m,w)})}else(_||w)&&C.push("translate("+_+e+w+n)}function l(h,m,_,w){h!==m?(h-m>180?m+=360:m-h>180&&(h+=360),w.push({i:_.push(s(_)+"rotate(",null,r)-2,x:na(h,m)})):m&&_.push(s(_)+"rotate("+m+r)}function c(h,m,_,w){h!==m?w.push({i:_.push(s(_)+"skewX(",null,r)-2,x:na(h,m)}):m&&_.push(s(_)+"skewX("+m+r)}function f(h,m,_,w,C,M){if(h!==_||m!==w){var P=C.push(s(C)+"scale(",null,",",null,")");M.push({i:P-4,x:na(h,_)},{i:P-2,x:na(m,w)})}else(_!==1||w!==1)&&C.push(s(C)+"scale("+_+","+w+")")}return function(h,m){var _=[],w=[];return h=t(h),m=t(m),o(h.translateX,h.translateY,m.translateX,m.translateY,_,w),l(h.rotate,m.rotate,_,w),c(h.skewX,m.skewX,_,w),f(h.scaleX,h.scaleY,m.scaleX,m.scaleY,_,w),h=m=null,function(C){for(var M=-1,P=w.length,L;++M<P;)_[(L=w[M]).i]=L.x(C);return _.join("")}}}var DM=F2(IM,"px, ","px)","deg)"),MM=F2(NM,", ",")",")"),PM=1e-12;function IT(t){return((t=Math.exp(t))+1/t)/2}function OM(t){return((t=Math.exp(t))-1/t)/2}function VM(t){return((t=Math.exp(2*t))-1)/(t+1)}const LM=function t(e,n,r){function s(o,l){var c=o[0],f=o[1],h=o[2],m=l[0],_=l[1],w=l[2],C=m-c,M=_-f,P=C*C+M*M,L,j;if(P<PM)j=Math.log(w/h)/e,L=function(T){return[c+T*C,f+T*M,h*Math.exp(e*T*j)]};else{var H=Math.sqrt(P),K=(w*w-h*h+r*P)/(2*h*n*H),y=(w*w-h*h-r*P)/(2*w*n*H),E=Math.log(Math.sqrt(K*K+1)-K),b=Math.log(Math.sqrt(y*y+1)-y);j=(b-E)/e,L=function(T){var A=T*j,R=IT(E),k=h/(n*H)*(R*VM(e*A+E)-OM(E));return[c+k*C,f+k*M,h*R/IT(e*A+E)]}}return L.duration=j*1e3*e/Math.SQRT2,L}return s.rho=function(o){var l=Math.max(.001,+o),c=l*l,f=c*c;return t(l,c,f)},s}(Math.SQRT2,2,4);var cu=0,Fc=0,Oc=0,q2=1e3,mp,qc,gp=0,Co=0,Wp=0,vd=typeof performance=="object"&&performance.now?performance:Date,G2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Fv(){return Co||(G2(zM),Co=vd.now()+Wp)}function zM(){Co=0}function yp(){this._call=this._time=this._next=null}yp.prototype=K2.prototype={constructor:yp,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Fv():+n)+(e==null?0:+e),!this._next&&qc!==this&&(qc?qc._next=this:mp=this,qc=this),this._call=t,this._time=n,N0()},stop:function(){this._call&&(this._call=null,this._time=1/0,N0())}};function K2(t,e,n){var r=new yp;return r.restart(t,e,n),r}function jM(){Fv(),++cu;for(var t=mp,e;t;)(e=Co-t._time)>=0&&t._call.call(void 0,e),t=t._next;--cu}function NT(){Co=(gp=vd.now())+Wp,cu=Fc=0;try{jM()}finally{cu=0,BM(),Co=0}}function UM(){var t=vd.now(),e=t-gp;e>q2&&(Wp-=e,gp=t)}function BM(){for(var t,e=mp,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:mp=n);qc=t,N0(r)}function N0(t){if(!cu){Fc&&(Fc=clearTimeout(Fc));var e=t-Co;e>24?(t<1/0&&(Fc=setTimeout(NT,t-vd.now()-Wp)),Oc&&(Oc=clearInterval(Oc))):(Oc||(gp=vd.now(),Oc=setInterval(UM,q2)),cu=1,G2(NT))}}function DT(t,e,n){var r=new yp;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var HM=Yp("start","end","cancel","interrupt"),$M=[],Y2=0,MT=1,D0=2,Gh=3,PT=4,M0=5,Kh=6;function Qp(t,e,n,r,s,o){var l=t.__transition;if(!l)t.__transition={};else if(n in l)return;FM(t,n,{name:e,index:r,group:s,on:HM,tween:$M,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Y2})}function qv(t,e){var n=oi(t,e);if(n.state>Y2)throw new Error("too late; already scheduled");return n}function Bi(t,e){var n=oi(t,e);if(n.state>Gh)throw new Error("too late; already running");return n}function oi(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function FM(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=K2(o,0,n.time);function o(h){n.state=MT,n.timer.restart(l,n.delay,n.time),n.delay<=h&&l(h-n.delay)}function l(h){var m,_,w,C;if(n.state!==MT)return f();for(m in r)if(C=r[m],C.name===n.name){if(C.state===Gh)return DT(l);C.state===PT?(C.state=Kh,C.timer.stop(),C.on.call("interrupt",t,t.__data__,C.index,C.group),delete r[m]):+m<e&&(C.state=Kh,C.timer.stop(),C.on.call("cancel",t,t.__data__,C.index,C.group),delete r[m])}if(DT(function(){n.state===Gh&&(n.state=PT,n.timer.restart(c,n.delay,n.time),c(h))}),n.state=D0,n.on.call("start",t,t.__data__,n.index,n.group),n.state===D0){for(n.state=Gh,s=new Array(w=n.tween.length),m=0,_=-1;m<w;++m)(C=n.tween[m].value.call(t,t.__data__,n.index,n.group))&&(s[++_]=C);s.length=_+1}}function c(h){for(var m=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(f),n.state=M0,1),_=-1,w=s.length;++_<w;)s[_].call(t,m);n.state===M0&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=Kh,n.timer.stop(),delete r[e];for(var h in r)return;delete t.__transition}}function Yh(t,e){var n=t.__transition,r,s,o=!0,l;if(n){e=e==null?null:e+"";for(l in n){if((r=n[l]).name!==e){o=!1;continue}s=r.state>D0&&r.state<M0,r.state=Kh,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[l]}o&&delete t.__transition}}function qM(t){return this.each(function(){Yh(this,t)})}function GM(t,e){var n,r;return function(){var s=Bi(this,t),o=s.tween;if(o!==n){r=n=o;for(var l=0,c=r.length;l<c;++l)if(r[l].name===e){r=r.slice(),r.splice(l,1);break}}s.tween=r}}function KM(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var o=Bi(this,t),l=o.tween;if(l!==r){s=(r=l).slice();for(var c={name:e,value:n},f=0,h=s.length;f<h;++f)if(s[f].name===e){s[f]=c;break}f===h&&s.push(c)}o.tween=s}}function YM(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=oi(this.node(),n).tween,s=0,o=r.length,l;s<o;++s)if((l=r[s]).name===t)return l.value;return null}return this.each((e==null?GM:KM)(n,t,e))}function Gv(t,e,n){var r=t._id;return t.each(function(){var s=Bi(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return oi(s,r).value[e]}}function X2(t,e){var n;return(typeof e=="number"?na:e instanceof yd?RT:(n=yd(e))?(e=n,RT):kM)(t,e)}function XM(t){return function(){this.removeAttribute(t)}}function WM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function QM(t,e,n){var r,s=n+"",o;return function(){var l=this.getAttribute(t);return l===s?null:l===r?o:o=e(r=l,n)}}function ZM(t,e,n){var r,s=n+"",o;return function(){var l=this.getAttributeNS(t.space,t.local);return l===s?null:l===r?o:o=e(r=l,n)}}function JM(t,e,n){var r,s,o;return function(){var l,c=n(this),f;return c==null?void this.removeAttribute(t):(l=this.getAttribute(t),f=c+"",l===f?null:l===r&&f===s?o:(s=f,o=e(r=l,c)))}}function eP(t,e,n){var r,s,o;return function(){var l,c=n(this),f;return c==null?void this.removeAttributeNS(t.space,t.local):(l=this.getAttributeNS(t.space,t.local),f=c+"",l===f?null:l===r&&f===s?o:(s=f,o=e(r=l,c)))}}function tP(t,e){var n=Xp(t),r=n==="transform"?MM:X2;return this.attrTween(t,typeof e=="function"?(n.local?eP:JM)(n,r,Gv(this,"attr."+t,e)):e==null?(n.local?WM:XM)(n):(n.local?ZM:QM)(n,r,e))}function nP(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function rP(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function iP(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&rP(t,o)),n}return s._value=e,s}function sP(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&nP(t,o)),n}return s._value=e,s}function aP(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Xp(t);return this.tween(n,(r.local?iP:sP)(r,e))}function oP(t,e){return function(){qv(this,t).delay=+e.apply(this,arguments)}}function lP(t,e){return e=+e,function(){qv(this,t).delay=e}}function uP(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?oP:lP)(e,t)):oi(this.node(),e).delay}function cP(t,e){return function(){Bi(this,t).duration=+e.apply(this,arguments)}}function dP(t,e){return e=+e,function(){Bi(this,t).duration=e}}function fP(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?cP:dP)(e,t)):oi(this.node(),e).duration}function hP(t,e){if(typeof e!="function")throw new Error;return function(){Bi(this,t).ease=e}}function pP(t){var e=this._id;return arguments.length?this.each(hP(e,t)):oi(this.node(),e).ease}function mP(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Bi(this,t).ease=n}}function gP(t){if(typeof t!="function")throw new Error;return this.each(mP(this._id,t))}function yP(t){typeof t!="function"&&(t=C2(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,c=r[s]=[],f,h=0;h<l;++h)(f=o[h])&&t.call(f,f.__data__,h,o)&&c.push(f);return new _s(r,this._parents,this._name,this._id)}function vP(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,o=Math.min(r,s),l=new Array(r),c=0;c<o;++c)for(var f=e[c],h=n[c],m=f.length,_=l[c]=new Array(m),w,C=0;C<m;++C)(w=f[C]||h[C])&&(_[C]=w);for(;c<r;++c)l[c]=e[c];return new _s(l,this._parents,this._name,this._id)}function _P(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function wP(t,e,n){var r,s,o=_P(e)?qv:Bi;return function(){var l=o(this,t),c=l.on;c!==r&&(s=(r=c).copy()).on(e,n),l.on=s}}function bP(t,e){var n=this._id;return arguments.length<2?oi(this.node(),n).on.on(t):this.each(wP(n,t,e))}function EP(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function TP(){return this.on("end.remove",EP(this._id))}function SP(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Uv(t));for(var r=this._groups,s=r.length,o=new Array(s),l=0;l<s;++l)for(var c=r[l],f=c.length,h=o[l]=new Array(f),m,_,w=0;w<f;++w)(m=c[w])&&(_=t.call(m,m.__data__,w,c))&&("__data__"in m&&(_.__data__=m.__data__),h[w]=_,Qp(h[w],e,n,w,h,oi(m,n)));return new _s(o,this._parents,e,n)}function AP(t){var e=this._name,n=this._id;typeof t!="function"&&(t=x2(t));for(var r=this._groups,s=r.length,o=[],l=[],c=0;c<s;++c)for(var f=r[c],h=f.length,m,_=0;_<h;++_)if(m=f[_]){for(var w=t.call(m,m.__data__,_,f),C,M=oi(m,n),P=0,L=w.length;P<L;++P)(C=w[P])&&Qp(C,e,n,P,w,M);o.push(w),l.push(m)}return new _s(o,l,e,n)}var xP=Bd.prototype.constructor;function CP(){return new xP(this._groups,this._parents)}function RP(t,e){var n,r,s;return function(){var o=uu(this,t),l=(this.style.removeProperty(t),uu(this,t));return o===l?null:o===n&&l===r?s:s=e(n=o,r=l)}}function W2(t){return function(){this.style.removeProperty(t)}}function kP(t,e,n){var r,s=n+"",o;return function(){var l=uu(this,t);return l===s?null:l===r?o:o=e(r=l,n)}}function IP(t,e,n){var r,s,o;return function(){var l=uu(this,t),c=n(this),f=c+"";return c==null&&(f=c=(this.style.removeProperty(t),uu(this,t))),l===f?null:l===r&&f===s?o:(s=f,o=e(r=l,c))}}function NP(t,e){var n,r,s,o="style."+e,l="end."+o,c;return function(){var f=Bi(this,t),h=f.on,m=f.value[o]==null?c||(c=W2(e)):void 0;(h!==n||s!==m)&&(r=(n=h).copy()).on(l,s=m),f.on=r}}function DP(t,e,n){var r=(t+="")=="transform"?DM:X2;return e==null?this.styleTween(t,RP(t,r)).on("end.style."+t,W2(t)):typeof e=="function"?this.styleTween(t,IP(t,r,Gv(this,"style."+t,e))).each(NP(this._id,t)):this.styleTween(t,kP(t,r,e),n).on("end.style."+t,null)}function MP(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function PP(t,e,n){var r,s;function o(){var l=e.apply(this,arguments);return l!==s&&(r=(s=l)&&MP(t,l,n)),r}return o._value=e,o}function OP(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,PP(t,e,n??""))}function VP(t){return function(){this.textContent=t}}function LP(t){return function(){var e=t(this);this.textContent=e??""}}function zP(t){return this.tween("text",typeof t=="function"?LP(Gv(this,"text",t)):VP(t==null?"":t+""))}function jP(t){return function(e){this.textContent=t.call(this,e)}}function UP(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&jP(s)),e}return r._value=t,r}function BP(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,UP(t))}function HP(){for(var t=this._name,e=this._id,n=Q2(),r=this._groups,s=r.length,o=0;o<s;++o)for(var l=r[o],c=l.length,f,h=0;h<c;++h)if(f=l[h]){var m=oi(f,e);Qp(f,t,n,h,l,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new _s(r,this._parents,t,n)}function $P(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(o,l){var c={value:l},f={value:function(){--s===0&&o()}};n.each(function(){var h=Bi(this,r),m=h.on;m!==t&&(e=(t=m).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(f)),h.on=e}),s===0&&o()})}var FP=0;function _s(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Q2(){return++FP}var hs=Bd.prototype;_s.prototype={constructor:_s,select:SP,selectAll:AP,selectChild:hs.selectChild,selectChildren:hs.selectChildren,filter:yP,merge:vP,selection:CP,transition:HP,call:hs.call,nodes:hs.nodes,node:hs.node,size:hs.size,empty:hs.empty,each:hs.each,on:bP,attr:tP,attrTween:aP,style:DP,styleTween:OP,text:zP,textTween:BP,remove:TP,tween:YM,delay:uP,duration:fP,ease:pP,easeVarying:gP,end:$P,[Symbol.iterator]:hs[Symbol.iterator]};function qP(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var GP={time:null,delay:0,duration:250,ease:qP};function KP(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function YP(t){var e,n;t instanceof _s?(e=t._id,t=t._name):(e=Q2(),(n=GP).time=Fv(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,o=0;o<s;++o)for(var l=r[o],c=l.length,f,h=0;h<c;++h)(f=l[h])&&Qp(f,t,e,h,l,n||KP(f,e));return new _s(r,this._parents,t,e)}Bd.prototype.interrupt=qM;Bd.prototype.transition=YP;const Ch=t=>()=>t;function XP(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function ms(t,e,n){this.k=t,this.x=e,this.y=n}ms.prototype={constructor:ms,scale:function(t){return t===1?this:new ms(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ms(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var fa=new ms(1,0,0);ms.prototype;function Hy(t){t.stopImmediatePropagation()}function Vc(t){t.preventDefault(),t.stopImmediatePropagation()}function WP(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function QP(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function OT(){return this.__zoom||fa}function ZP(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function JP(){return navigator.maxTouchPoints||"ontouchstart"in this}function e6(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],l=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),l>o?(o+l)/2:Math.min(0,o)||Math.max(0,l))}function t6(){var t=WP,e=QP,n=e6,r=ZP,s=JP,o=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,f=LM,h=Yp("start","zoom","end"),m,_,w,C=500,M=150,P=0,L=10;function j(U){U.property("__zoom",OT).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",k).filter(s).on("touchstart.zoom",D).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}j.transform=function(U,Q,x,B){var G=U.selection?U.selection():U;G.property("__zoom",OT),U!==G?E(U,Q,x,B):G.interrupt().each(function(){b(this,arguments).event(B).start().zoom(null,typeof Q=="function"?Q.apply(this,arguments):Q).end()})},j.scaleBy=function(U,Q,x,B){j.scaleTo(U,function(){var G=this.__zoom.k,X=typeof Q=="function"?Q.apply(this,arguments):Q;return G*X},x,B)},j.scaleTo=function(U,Q,x,B){j.transform(U,function(){var G=e.apply(this,arguments),X=this.__zoom,z=x==null?y(G):typeof x=="function"?x.apply(this,arguments):x,W=X.invert(z),ee=typeof Q=="function"?Q.apply(this,arguments):Q;return n(K(H(X,ee),z,W),G,l)},x,B)},j.translateBy=function(U,Q,x,B){j.transform(U,function(){return n(this.__zoom.translate(typeof Q=="function"?Q.apply(this,arguments):Q,typeof x=="function"?x.apply(this,arguments):x),e.apply(this,arguments),l)},null,B)},j.translateTo=function(U,Q,x,B,G){j.transform(U,function(){var X=e.apply(this,arguments),z=this.__zoom,W=B==null?y(X):typeof B=="function"?B.apply(this,arguments):B;return n(fa.translate(W[0],W[1]).scale(z.k).translate(typeof Q=="function"?-Q.apply(this,arguments):-Q,typeof x=="function"?-x.apply(this,arguments):-x),X,l)},B,G)};function H(U,Q){return Q=Math.max(o[0],Math.min(o[1],Q)),Q===U.k?U:new ms(Q,U.x,U.y)}function K(U,Q,x){var B=Q[0]-x[0]*U.k,G=Q[1]-x[1]*U.k;return B===U.x&&G===U.y?U:new ms(U.k,B,G)}function y(U){return[(+U[0][0]+ +U[1][0])/2,(+U[0][1]+ +U[1][1])/2]}function E(U,Q,x,B){U.on("start.zoom",function(){b(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(B).end()}).tween("zoom",function(){var G=this,X=arguments,z=b(G,X).event(B),W=e.apply(G,X),ee=x==null?y(W):typeof x=="function"?x.apply(G,X):x,Z=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),ne=G.__zoom,oe=typeof Q=="function"?Q.apply(G,X):Q,ce=f(ne.invert(ee).concat(Z/ne.k),oe.invert(ee).concat(Z/oe.k));return function(fe){if(fe===1)fe=oe;else{var ge=ce(fe),Ae=Z/ge[2];fe=new ms(Ae,ee[0]-ge[0]*Ae,ee[1]-ge[1]*Ae)}z.zoom(null,fe)}})}function b(U,Q,x){return!x&&U.__zooming||new T(U,Q)}function T(U,Q){this.that=U,this.args=Q,this.active=0,this.sourceEvent=null,this.extent=e.apply(U,Q),this.taps=0}T.prototype={event:function(U){return U&&(this.sourceEvent=U),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(U,Q){return this.mouse&&U!=="mouse"&&(this.mouse[1]=Q.invert(this.mouse[0])),this.touch0&&U!=="touch"&&(this.touch0[1]=Q.invert(this.touch0[0])),this.touch1&&U!=="touch"&&(this.touch1[1]=Q.invert(this.touch1[0])),this.that.__zoom=Q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(U){var Q=Jr(this.that).datum();h.call(U,this.that,new XP(U,{sourceEvent:this.sourceEvent,target:j,transform:this.that.__zoom,dispatch:h}),Q)}};function A(U,...Q){if(!t.apply(this,arguments))return;var x=b(this,Q).event(U),B=this.__zoom,G=Math.max(o[0],Math.min(o[1],B.k*Math.pow(2,r.apply(this,arguments)))),X=ki(U);if(x.wheel)(x.mouse[0][0]!==X[0]||x.mouse[0][1]!==X[1])&&(x.mouse[1]=B.invert(x.mouse[0]=X)),clearTimeout(x.wheel);else{if(B.k===G)return;x.mouse=[X,B.invert(X)],Yh(this),x.start()}Vc(U),x.wheel=setTimeout(z,M),x.zoom("mouse",n(K(H(B,G),x.mouse[0],x.mouse[1]),x.extent,l));function z(){x.wheel=null,x.end()}}function R(U,...Q){if(w||!t.apply(this,arguments))return;var x=U.currentTarget,B=b(this,Q,!0).event(U),G=Jr(U.view).on("mousemove.zoom",ee,!0).on("mouseup.zoom",Z,!0),X=ki(U,x),z=U.clientX,W=U.clientY;L2(U.view),Hy(U),B.mouse=[X,this.__zoom.invert(X)],Yh(this),B.start();function ee(ne){if(Vc(ne),!B.moved){var oe=ne.clientX-z,ce=ne.clientY-W;B.moved=oe*oe+ce*ce>P}B.event(ne).zoom("mouse",n(K(B.that.__zoom,B.mouse[0]=ki(ne,x),B.mouse[1]),B.extent,l))}function Z(ne){G.on("mousemove.zoom mouseup.zoom",null),z2(ne.view,B.moved),Vc(ne),B.event(ne).end()}}function k(U,...Q){if(t.apply(this,arguments)){var x=this.__zoom,B=ki(U.changedTouches?U.changedTouches[0]:U,this),G=x.invert(B),X=x.k*(U.shiftKey?.5:2),z=n(K(H(x,X),B,G),e.apply(this,Q),l);Vc(U),c>0?Jr(this).transition().duration(c).call(E,z,B,U):Jr(this).call(j.transform,z,B,U)}}function D(U,...Q){if(t.apply(this,arguments)){var x=U.touches,B=x.length,G=b(this,Q,U.changedTouches.length===B).event(U),X,z,W,ee;for(Hy(U),z=0;z<B;++z)W=x[z],ee=ki(W,this),ee=[ee,this.__zoom.invert(ee),W.identifier],G.touch0?!G.touch1&&G.touch0[2]!==ee[2]&&(G.touch1=ee,G.taps=0):(G.touch0=ee,X=!0,G.taps=1+!!m);m&&(m=clearTimeout(m)),X&&(G.taps<2&&(_=ee[0],m=setTimeout(function(){m=null},C)),Yh(this),G.start())}}function $(U,...Q){if(this.__zooming){var x=b(this,Q).event(U),B=U.changedTouches,G=B.length,X,z,W,ee;for(Vc(U),X=0;X<G;++X)z=B[X],W=ki(z,this),x.touch0&&x.touch0[2]===z.identifier?x.touch0[0]=W:x.touch1&&x.touch1[2]===z.identifier&&(x.touch1[0]=W);if(z=x.that.__zoom,x.touch1){var Z=x.touch0[0],ne=x.touch0[1],oe=x.touch1[0],ce=x.touch1[1],fe=(fe=oe[0]-Z[0])*fe+(fe=oe[1]-Z[1])*fe,ge=(ge=ce[0]-ne[0])*ge+(ge=ce[1]-ne[1])*ge;z=H(z,Math.sqrt(fe/ge)),W=[(Z[0]+oe[0])/2,(Z[1]+oe[1])/2],ee=[(ne[0]+ce[0])/2,(ne[1]+ce[1])/2]}else if(x.touch0)W=x.touch0[0],ee=x.touch0[1];else return;x.zoom("touch",n(K(z,W,ee),x.extent,l))}}function V(U,...Q){if(this.__zooming){var x=b(this,Q).event(U),B=U.changedTouches,G=B.length,X,z;for(Hy(U),w&&clearTimeout(w),w=setTimeout(function(){w=null},C),X=0;X<G;++X)z=B[X],x.touch0&&x.touch0[2]===z.identifier?delete x.touch0:x.touch1&&x.touch1[2]===z.identifier&&delete x.touch1;if(x.touch1&&!x.touch0&&(x.touch0=x.touch1,delete x.touch1),x.touch0)x.touch0[1]=this.__zoom.invert(x.touch0[0]);else if(x.end(),x.taps===2&&(z=ki(z,this),Math.hypot(_[0]-z[0],_[1]-z[1])<L)){var W=Jr(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return j.wheelDelta=function(U){return arguments.length?(r=typeof U=="function"?U:Ch(+U),j):r},j.filter=function(U){return arguments.length?(t=typeof U=="function"?U:Ch(!!U),j):t},j.touchable=function(U){return arguments.length?(s=typeof U=="function"?U:Ch(!!U),j):s},j.extent=function(U){return arguments.length?(e=typeof U=="function"?U:Ch([[+U[0][0],+U[0][1]],[+U[1][0],+U[1][1]]]),j):e},j.scaleExtent=function(U){return arguments.length?(o[0]=+U[0],o[1]=+U[1],j):[o[0],o[1]]},j.translateExtent=function(U){return arguments.length?(l[0][0]=+U[0][0],l[1][0]=+U[1][0],l[0][1]=+U[0][1],l[1][1]=+U[1][1],j):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},j.constrain=function(U){return arguments.length?(n=U,j):n},j.duration=function(U){return arguments.length?(c=+U,j):c},j.interpolate=function(U){return arguments.length?(f=U,j):f},j.on=function(){var U=h.on.apply(h,arguments);return U===h?j:U},j.clickDistance=function(U){return arguments.length?(P=(U=+U)*U,j):Math.sqrt(P)},j.tapDistance=function(U){return arguments.length?(L=+U,j):L},j}var n6=T2();const Zp=F.createContext(null),r6=Zp.Provider,ws={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Z2=ws.error001();function Ct(t,e){const n=F.useContext(Zp);if(n===null)throw new Error(Z2);return S2(n,t,e)}const pn=()=>{const t=F.useContext(Zp);if(t===null)throw new Error(Z2);return F.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},i6=t=>t.userSelectionActive?"none":"all";function J2({position:t,children:e,className:n,style:r,...s}){const o=Ct(i6),l=`${t}`.split("-");return pe.createElement("div",{className:Fn(["react-flow__panel",n,...l]),style:{...r,pointerEvents:o},...s},e)}function s6({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:pe.createElement(J2,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},pe.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const a6=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:o={},labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:f,className:h,...m})=>{const _=F.useRef(null),[w,C]=F.useState({x:0,y:0,width:0,height:0}),M=Fn(["react-flow__edge-textwrapper",h]);return F.useEffect(()=>{if(_.current){const P=_.current.getBBox();C({x:P.x,y:P.y,width:P.width,height:P.height})}},[n]),typeof n>"u"||!n?null:pe.createElement("g",{transform:`translate(${t-w.width/2} ${e-w.height/2})`,className:M,visibility:w.width?"visible":"hidden",...m},s&&pe.createElement("rect",{width:w.width+2*l[0],x:-l[0],y:-l[1],height:w.height+2*l[1],className:"react-flow__edge-textbg",style:o,rx:c,ry:c}),pe.createElement("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:_,style:r},n),f)};var o6=F.memo(a6);const Kv=t=>({width:t.offsetWidth,height:t.offsetHeight}),du=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Yv=(t={x:0,y:0},e)=>({x:du(t.x,e[0][0],e[1][0]),y:du(t.y,e[0][1],e[1][1])}),VT=(t,e,n)=>t<e?du(Math.abs(t-e),1,50)/50:t>n?-du(Math.abs(t-n),1,50)/50:0,e3=(t,e)=>{const n=VT(t.x,35,e.width-35)*20,r=VT(t.y,35,e.height-35)*20;return[n,r]},t3=t=>t.getRootNode?.()||window?.document,l6=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Xv=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),u6=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),LT=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),P0=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},c6=t=>Ur(t.width)&&Ur(t.height)&&Ur(t.x)&&Ur(t.y),Ur=t=>!isNaN(t)&&isFinite(t),Ot=Symbol.for("internals"),n3=["Enter"," ","Escape"],d6=(t,e)=>{},f6=t=>"nativeEvent"in t;function O0(t){const n=(f6(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const r3=t=>"clientX"in t,ha=(t,e)=>{const n=r3(t),r=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:s-(e?.top??0)}},vp=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,$d=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:m,markerEnd:_,markerStart:w,interactionWidth:C=20})=>pe.createElement(pe.Fragment,null,pe.createElement("path",{id:t,style:m,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:_,markerStart:w}),C&&pe.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:C,className:"react-flow__edge-interaction"}),s&&Ur(n)&&Ur(r)?pe.createElement(o6,{x:n,y:r,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h}):null);$d.displayName="BaseEdge";function Lc(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(o=>o.id===t);s&&n(r,{...s})}}function i3({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,o=n<t?n+s:n-s,l=Math.abs(r-e)/2,c=r<e?r+l:r-l;return[o,c,s,l]}function s3({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:o,targetControlX:l,targetControlY:c}){const f=t*.125+s*.375+l*.375+n*.125,h=e*.125+o*.375+c*.375+r*.125,m=Math.abs(f-t),_=Math.abs(h-e);return[f,h,m,_]}var _a;(function(t){t.Strict="strict",t.Loose="loose"})(_a||(_a={}));var _o;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(_o||(_o={}));var _d;(function(t){t.Partial="partial",t.Full="full"})(_d||(_d={}));var ia;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(ia||(ia={}));var Ro;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Ro||(Ro={}));var Ee;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Ee||(Ee={}));function zT({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===Ee.Left||t===Ee.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function a3({sourceX:t,sourceY:e,sourcePosition:n=Ee.Bottom,targetX:r,targetY:s,targetPosition:o=Ee.Top}){const[l,c]=zT({pos:n,x1:t,y1:e,x2:r,y2:s}),[f,h]=zT({pos:o,x1:r,y1:s,x2:t,y2:e}),[m,_,w,C]=s3({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:l,sourceControlY:c,targetControlX:f,targetControlY:h});return[`M${t},${e} C${l},${c} ${f},${h} ${r},${s}`,m,_,w,C]}const Wv=F.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Ee.Bottom,targetPosition:o=Ee.Top,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:_,style:w,markerEnd:C,markerStart:M,interactionWidth:P})=>{const[L,j,H]=a3({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o});return pe.createElement($d,{path:L,labelX:j,labelY:H,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:_,style:w,markerEnd:C,markerStart:M,interactionWidth:P})});Wv.displayName="SimpleBezierEdge";const jT={[Ee.Left]:{x:-1,y:0},[Ee.Right]:{x:1,y:0},[Ee.Top]:{x:0,y:-1},[Ee.Bottom]:{x:0,y:1}},h6=({source:t,sourcePosition:e=Ee.Bottom,target:n})=>e===Ee.Left||e===Ee.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},UT=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function p6({source:t,sourcePosition:e=Ee.Bottom,target:n,targetPosition:r=Ee.Top,center:s,offset:o}){const l=jT[e],c=jT[r],f={x:t.x+l.x*o,y:t.y+l.y*o},h={x:n.x+c.x*o,y:n.y+c.y*o},m=h6({source:f,sourcePosition:e,target:h}),_=m.x!==0?"x":"y",w=m[_];let C=[],M,P;const L={x:0,y:0},j={x:0,y:0},[H,K,y,E]=i3({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(l[_]*c[_]===-1){M=s.x??H,P=s.y??K;const T=[{x:M,y:f.y},{x:M,y:h.y}],A=[{x:f.x,y:P},{x:h.x,y:P}];l[_]===w?C=_==="x"?T:A:C=_==="x"?A:T}else{const T=[{x:f.x,y:h.y}],A=[{x:h.x,y:f.y}];if(_==="x"?C=l.x===w?A:T:C=l.y===w?T:A,e===r){const V=Math.abs(t[_]-n[_]);if(V<=o){const U=Math.min(o-1,o-V);l[_]===w?L[_]=(f[_]>t[_]?-1:1)*U:j[_]=(h[_]>n[_]?-1:1)*U}}if(e!==r){const V=_==="x"?"y":"x",U=l[_]===c[V],Q=f[V]>h[V],x=f[V]<h[V];(l[_]===1&&(!U&&Q||U&&x)||l[_]!==1&&(!U&&x||U&&Q))&&(C=_==="x"?T:A)}const R={x:f.x+L.x,y:f.y+L.y},k={x:h.x+j.x,y:h.y+j.y},D=Math.max(Math.abs(R.x-C[0].x),Math.abs(k.x-C[0].x)),$=Math.max(Math.abs(R.y-C[0].y),Math.abs(k.y-C[0].y));D>=$?(M=(R.x+k.x)/2,P=C[0].y):(M=C[0].x,P=(R.y+k.y)/2)}return[[t,{x:f.x+L.x,y:f.y+L.y},...C,{x:h.x+j.x,y:h.y+j.y},n],M,P,y,E]}function m6(t,e,n,r){const s=Math.min(UT(t,e)/2,UT(e,n)/2,r),{x:o,y:l}=e;if(t.x===o&&o===n.x||t.y===l&&l===n.y)return`L${o} ${l}`;if(t.y===l){const h=t.x<n.x?-1:1,m=t.y<n.y?1:-1;return`L ${o+s*h},${l}Q ${o},${l} ${o},${l+s*m}`}const c=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${o},${l+s*f}Q ${o},${l} ${o+s*c},${l}`}function V0({sourceX:t,sourceY:e,sourcePosition:n=Ee.Bottom,targetX:r,targetY:s,targetPosition:o=Ee.Top,borderRadius:l=5,centerX:c,centerY:f,offset:h=20}){const[m,_,w,C,M]=p6({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:o,center:{x:c,y:f},offset:h});return[m.reduce((L,j,H)=>{let K="";return H>0&&H<m.length-1?K=m6(m[H-1],j,m[H+1],l):K=`${H===0?"M":"L"}${j.x} ${j.y}`,L+=K,L},""),_,w,C,M]}const Jp=F.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:m,sourcePosition:_=Ee.Bottom,targetPosition:w=Ee.Top,markerEnd:C,markerStart:M,pathOptions:P,interactionWidth:L})=>{const[j,H,K]=V0({sourceX:t,sourceY:e,sourcePosition:_,targetX:n,targetY:r,targetPosition:w,borderRadius:P?.borderRadius,offset:P?.offset});return pe.createElement($d,{path:j,labelX:H,labelY:K,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:m,markerEnd:C,markerStart:M,interactionWidth:L})});Jp.displayName="SmoothStepEdge";const Qv=F.memo(t=>pe.createElement(Jp,{...t,pathOptions:F.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));Qv.displayName="StepEdge";function g6({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,o,l,c]=i3({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,o,l,c]}const Zv=F.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:m,markerEnd:_,markerStart:w,interactionWidth:C})=>{const[M,P,L]=g6({sourceX:t,sourceY:e,targetX:n,targetY:r});return pe.createElement($d,{path:M,labelX:P,labelY:L,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:m,markerEnd:_,markerStart:w,interactionWidth:C})});Zv.displayName="StraightEdge";function Rh(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function BT({pos:t,x1:e,y1:n,x2:r,y2:s,c:o}){switch(t){case Ee.Left:return[e-Rh(e-r,o),n];case Ee.Right:return[e+Rh(r-e,o),n];case Ee.Top:return[e,n-Rh(n-s,o)];case Ee.Bottom:return[e,n+Rh(s-n,o)]}}function o3({sourceX:t,sourceY:e,sourcePosition:n=Ee.Bottom,targetX:r,targetY:s,targetPosition:o=Ee.Top,curvature:l=.25}){const[c,f]=BT({pos:n,x1:t,y1:e,x2:r,y2:s,c:l}),[h,m]=BT({pos:o,x1:r,y1:s,x2:t,y2:e,c:l}),[_,w,C,M]=s3({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:c,sourceControlY:f,targetControlX:h,targetControlY:m});return[`M${t},${e} C${c},${f} ${h},${m} ${r},${s}`,_,w,C,M]}const _p=F.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Ee.Bottom,targetPosition:o=Ee.Top,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:_,style:w,markerEnd:C,markerStart:M,pathOptions:P,interactionWidth:L})=>{const[j,H,K]=o3({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o,curvature:P?.curvature});return pe.createElement($d,{path:j,labelX:H,labelY:K,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:_,style:w,markerEnd:C,markerStart:M,interactionWidth:L})});_p.displayName="BezierEdge";const Jv=F.createContext(null),y6=Jv.Provider;Jv.Consumer;const v6=()=>F.useContext(Jv),_6=t=>"id"in t&&"source"in t&&"target"in t,w6=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,L0=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,b6=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),E6=(t,e)=>{if(!t.source||!t.target)return e;let n;return _6(t)?n={...t}:n={...t,id:w6(t)},b6(n,e)?e:e.concat(n)},z0=({x:t,y:e},[n,r,s],o,[l,c])=>{const f={x:(t-n)/s,y:(e-r)/s};return o?{x:l*Math.round(f.x/l),y:c*Math.round(f.y/c)}:f},l3=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),tu=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},e_=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:o,y:l}=tu(s,e).positionAbsolute;return l6(r,Xv({x:o,y:l,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return u6(n)},u3=(t,e,[n,r,s]=[0,0,1],o=!1,l=!1,c=[0,0])=>{const f={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},h=[];return t.forEach(m=>{const{width:_,height:w,selectable:C=!0,hidden:M=!1}=m;if(l&&!C||M)return!1;const{positionAbsolute:P}=tu(m,c),L={x:P.x,y:P.y,width:_||0,height:w||0},j=P0(f,L),H=typeof _>"u"||typeof w>"u"||_===null||w===null,K=o&&j>0,y=(_||0)*(w||0);(H||K||j>=y||m.dragging)&&h.push(m)}),h},c3=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},d3=(t,e,n,r,s,o=.1)=>{const l=e/(t.width*(1+o)),c=n/(t.height*(1+o)),f=Math.min(l,c),h=du(f,r,s),m=t.x+t.width/2,_=t.y+t.height/2,w=e/2-m*h,C=n/2-_*h;return{x:w,y:C,zoom:h}},po=(t,e=0)=>t.transition().duration(e);function HT(t,e,n,r){return(e[n]||[]).reduce((s,o)=>(`${t.id}-${o.id}-${n}`!==r&&s.push({id:o.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+o.x+o.width/2,y:(t.positionAbsolute?.y??0)+o.y+o.height/2}),s),[])}function T6(t,e,n,r,s,o){const{x:l,y:c}=ha(t),h=e.elementsFromPoint(l,c).find(M=>M.classList.contains("react-flow__handle"));if(h){const M=h.getAttribute("data-nodeid");if(M){const P=t_(void 0,h),L=h.getAttribute("data-handleid"),j=o({nodeId:M,id:L,type:P});if(j){const H=s.find(K=>K.nodeId===M&&K.type===P&&K.id===L);return{handle:{id:L,type:P,nodeId:M,x:H?.x||n.x,y:H?.y||n.y},validHandleResult:j}}}}let m=[],_=1/0;if(s.forEach(M=>{const P=Math.sqrt((M.x-n.x)**2+(M.y-n.y)**2);if(P<=r){const L=o(M);P<=_&&(P<_?m=[{handle:M,validHandleResult:L}]:P===_&&m.push({handle:M,validHandleResult:L}),_=P)}}),!m.length)return{handle:null,validHandleResult:f3()};if(m.length===1)return m[0];const w=m.some(({validHandleResult:M})=>M.isValid),C=m.some(({handle:M})=>M.type==="target");return m.find(({handle:M,validHandleResult:P})=>C?M.type==="target":w?P.isValid:!0)||m[0]}const S6={source:null,target:null,sourceHandle:null,targetHandle:null},f3=()=>({handleDomNode:null,isValid:!1,connection:S6,endHandle:null});function h3(t,e,n,r,s,o,l){const c=s==="target",f=l.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),h={...f3(),handleDomNode:f};if(f){const m=t_(void 0,f),_=f.getAttribute("data-nodeid"),w=f.getAttribute("data-handleid"),C=f.classList.contains("connectable"),M=f.classList.contains("connectableend"),P={source:c?_:n,sourceHandle:c?w:r,target:c?n:_,targetHandle:c?r:w};h.connection=P,C&&M&&(e===_a.Strict?c&&m==="source"||!c&&m==="target":_!==n||w!==r)&&(h.endHandle={nodeId:_,handleId:w,type:m},h.isValid=o(P))}return h}function A6({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,o)=>{if(o[Ot]){const{handleBounds:l}=o[Ot];let c=[],f=[];l&&(c=HT(o,l,"source",`${e}-${n}-${r}`),f=HT(o,l,"target",`${e}-${n}-${r}`)),s.push(...c,...f)}return s},[])}function t_(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function $y(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function x6(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function p3({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:o,setState:l,isValidConnection:c,edgeUpdaterType:f,onReconnectEnd:h}){const m=t3(t.target),{connectionMode:_,domNode:w,autoPanOnConnect:C,connectionRadius:M,onConnectStart:P,panBy:L,getNodes:j,cancelConnection:H}=o();let K=0,y;const{x:E,y:b}=ha(t),T=m?.elementFromPoint(E,b),A=t_(f,T),R=w?.getBoundingClientRect();if(!R||!A)return;let k,D=ha(t,R),$=!1,V=null,U=!1,Q=null;const x=A6({nodes:j(),nodeId:n,handleId:e,handleType:A}),B=()=>{if(!C)return;const[z,W]=e3(D,R);L({x:z,y:W}),K=requestAnimationFrame(B)};l({connectionPosition:D,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:A,connectionStartHandle:{nodeId:n,handleId:e,type:A},connectionEndHandle:null}),P?.(t,{nodeId:n,handleId:e,handleType:A});function G(z){const{transform:W}=o();D=ha(z,R);const{handle:ee,validHandleResult:Z}=T6(z,m,z0(D,W,!1,[1,1]),M,x,ne=>h3(ne,_,n,e,s?"target":"source",c,m));if(y=ee,$||(B(),$=!0),Q=Z.handleDomNode,V=Z.connection,U=Z.isValid,l({connectionPosition:y&&U?l3({x:y.x,y:y.y},W):D,connectionStatus:x6(!!y,U),connectionEndHandle:Z.endHandle}),!y&&!U&&!Q)return $y(k);V.source!==V.target&&Q&&($y(k),k=Q,Q.classList.add("connecting","react-flow__handle-connecting"),Q.classList.toggle("valid",U),Q.classList.toggle("react-flow__handle-valid",U))}function X(z){(y||Q)&&V&&U&&r?.(V),o().onConnectEnd?.(z),f&&h?.(z),$y(k),H(),cancelAnimationFrame(K),$=!1,U=!1,V=null,Q=null,m.removeEventListener("mousemove",G),m.removeEventListener("mouseup",X),m.removeEventListener("touchmove",G),m.removeEventListener("touchend",X)}m.addEventListener("mousemove",G),m.addEventListener("mouseup",X),m.addEventListener("touchmove",G),m.addEventListener("touchend",X)}const $T=()=>!0,C6=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),R6=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:o,connectionClickStartHandle:l}=r;return{connecting:s?.nodeId===t&&s?.handleId===e&&s?.type===n||o?.nodeId===t&&o?.handleId===e&&o?.type===n,clickConnecting:l?.nodeId===t&&l?.handleId===e&&l?.type===n}},m3=F.forwardRef(({type:t="source",position:e=Ee.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:l,onConnect:c,children:f,className:h,onMouseDown:m,onTouchStart:_,...w},C)=>{const M=l||null,P=t==="target",L=pn(),j=v6(),{connectOnClick:H,noPanClassName:K}=Ct(C6,Dn),{connecting:y,clickConnecting:E}=Ct(R6(j,M,t),Dn);j||L.getState().onError?.("010",ws.error010());const b=R=>{const{defaultEdgeOptions:k,onConnect:D,hasDefaultEdges:$}=L.getState(),V={...k,...R};if($){const{edges:U,setEdges:Q}=L.getState();Q(E6(V,U))}D?.(V),c?.(V)},T=R=>{if(!j)return;const k=r3(R);s&&(k&&R.button===0||!k)&&p3({event:R,handleId:M,nodeId:j,onConnect:b,isTarget:P,getState:L.getState,setState:L.setState,isValidConnection:n||L.getState().isValidConnection||$T}),k?m?.(R):_?.(R)},A=R=>{const{onClickConnectStart:k,onClickConnectEnd:D,connectionClickStartHandle:$,connectionMode:V,isValidConnection:U}=L.getState();if(!j||!$&&!s)return;if(!$){k?.(R,{nodeId:j,handleId:M,handleType:t}),L.setState({connectionClickStartHandle:{nodeId:j,type:t,handleId:M}});return}const Q=t3(R.target),x=n||U||$T,{connection:B,isValid:G}=h3({nodeId:j,id:M,type:t},V,$.nodeId,$.handleId||null,$.type,x,Q);G&&b(B),D?.(R),L.setState({connectionClickStartHandle:null})};return pe.createElement("div",{"data-handleid":M,"data-nodeid":j,"data-handlepos":e,"data-id":`${j}-${M}-${t}`,className:Fn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",K,h,{source:!P,target:P,connectable:r,connectablestart:s,connectableend:o,connecting:E,connectionindicator:r&&(s&&!y||o&&y)}]),onMouseDown:T,onTouchStart:T,onClick:H?A:void 0,ref:C,...w},f)});m3.displayName="Handle";var Hn=F.memo(m3);const g3=({data:t,isConnectable:e,targetPosition:n=Ee.Top,sourcePosition:r=Ee.Bottom})=>pe.createElement(pe.Fragment,null,pe.createElement(Hn,{type:"target",position:n,isConnectable:e}),t?.label,pe.createElement(Hn,{type:"source",position:r,isConnectable:e}));g3.displayName="DefaultNode";var j0=F.memo(g3);const y3=({data:t,isConnectable:e,sourcePosition:n=Ee.Bottom})=>pe.createElement(pe.Fragment,null,t?.label,pe.createElement(Hn,{type:"source",position:n,isConnectable:e}));y3.displayName="InputNode";var v3=F.memo(y3);const _3=({data:t,isConnectable:e,targetPosition:n=Ee.Top})=>pe.createElement(pe.Fragment,null,pe.createElement(Hn,{type:"target",position:n,isConnectable:e}),t?.label);_3.displayName="OutputNode";var w3=F.memo(_3);const n_=()=>null;n_.displayName="GroupNode";const k6=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),kh=t=>t.id;function I6(t,e){return Dn(t.selectedNodes.map(kh),e.selectedNodes.map(kh))&&Dn(t.selectedEdges.map(kh),e.selectedEdges.map(kh))}const b3=F.memo(({onSelectionChange:t})=>{const e=pn(),{selectedNodes:n,selectedEdges:r}=Ct(k6,I6);return F.useEffect(()=>{const s={nodes:n,edges:r};t?.(s),e.getState().onSelectionChange.forEach(o=>o(s))},[n,r,t]),null});b3.displayName="SelectionListener";const N6=t=>!!t.onSelectionChange;function D6({onSelectionChange:t}){const e=Ct(N6);return t||e?pe.createElement(b3,{onSelectionChange:t}):null}const M6=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Ml(t,e){F.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function Ke(t,e,n){F.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const P6=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:o,onConnectEnd:l,onClickConnectStart:c,onClickConnectEnd:f,nodesDraggable:h,nodesConnectable:m,nodesFocusable:_,edgesFocusable:w,edgesUpdatable:C,elevateNodesOnSelect:M,minZoom:P,maxZoom:L,nodeExtent:j,onNodesChange:H,onEdgesChange:K,elementsSelectable:y,connectionMode:E,snapGrid:b,snapToGrid:T,translateExtent:A,connectOnClick:R,defaultEdgeOptions:k,fitView:D,fitViewOptions:$,onNodesDelete:V,onEdgesDelete:U,onNodeDrag:Q,onNodeDragStart:x,onNodeDragStop:B,onSelectionDrag:G,onSelectionDragStart:X,onSelectionDragStop:z,noPanClassName:W,nodeOrigin:ee,rfId:Z,autoPanOnConnect:ne,autoPanOnNodeDrag:oe,onError:ce,connectionRadius:fe,isValidConnection:ge,nodeDragThreshold:Ae})=>{const{setNodes:xe,setEdges:Ue,setDefaultNodesAndEdges:Ne,setMinZoom:Le,setMaxZoom:rt,setTranslateExtent:st,setNodeExtent:Ht,reset:Be}=Ct(M6,Dn),be=pn();return F.useEffect(()=>{const kt=r?.map(An=>({...An,...k}));return Ne(n,kt),()=>{Be()}},[]),Ke("defaultEdgeOptions",k,be.setState),Ke("connectionMode",E,be.setState),Ke("onConnect",s,be.setState),Ke("onConnectStart",o,be.setState),Ke("onConnectEnd",l,be.setState),Ke("onClickConnectStart",c,be.setState),Ke("onClickConnectEnd",f,be.setState),Ke("nodesDraggable",h,be.setState),Ke("nodesConnectable",m,be.setState),Ke("nodesFocusable",_,be.setState),Ke("edgesFocusable",w,be.setState),Ke("edgesUpdatable",C,be.setState),Ke("elementsSelectable",y,be.setState),Ke("elevateNodesOnSelect",M,be.setState),Ke("snapToGrid",T,be.setState),Ke("snapGrid",b,be.setState),Ke("onNodesChange",H,be.setState),Ke("onEdgesChange",K,be.setState),Ke("connectOnClick",R,be.setState),Ke("fitViewOnInit",D,be.setState),Ke("fitViewOnInitOptions",$,be.setState),Ke("onNodesDelete",V,be.setState),Ke("onEdgesDelete",U,be.setState),Ke("onNodeDrag",Q,be.setState),Ke("onNodeDragStart",x,be.setState),Ke("onNodeDragStop",B,be.setState),Ke("onSelectionDrag",G,be.setState),Ke("onSelectionDragStart",X,be.setState),Ke("onSelectionDragStop",z,be.setState),Ke("noPanClassName",W,be.setState),Ke("nodeOrigin",ee,be.setState),Ke("rfId",Z,be.setState),Ke("autoPanOnConnect",ne,be.setState),Ke("autoPanOnNodeDrag",oe,be.setState),Ke("onError",ce,be.setState),Ke("connectionRadius",fe,be.setState),Ke("isValidConnection",ge,be.setState),Ke("nodeDragThreshold",Ae,be.setState),Ml(t,xe),Ml(e,Ue),Ml(P,Le),Ml(L,rt),Ml(A,st),Ml(j,Ht),null},FT={display:"none"},O6={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},E3="react-flow__node-desc",T3="react-flow__edge-desc",V6="react-flow__aria-live",L6=t=>t.ariaLiveMessage;function z6({rfId:t}){const e=Ct(L6);return pe.createElement("div",{id:`${V6}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:O6},e)}function j6({rfId:t,disableKeyboardA11y:e}){return pe.createElement(pe.Fragment,null,pe.createElement("div",{id:`${E3}-${t}`,style:FT},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),pe.createElement("div",{id:`${T3}-${t}`,style:FT},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&pe.createElement(z6,{rfId:t}))}var wd=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=F.useState(!1),s=F.useRef(!1),o=F.useRef(new Set([])),[l,c]=F.useMemo(()=>{if(t!==null){const h=(Array.isArray(t)?t:[t]).filter(_=>typeof _=="string").map(_=>_.split("+")),m=h.reduce((_,w)=>_.concat(...w),[]);return[h,m]}return[[],[]]},[t]);return F.useEffect(()=>{const f=typeof document<"u"?document:null,h=e?.target||f;if(t!==null){const m=C=>{if(s.current=C.ctrlKey||C.metaKey||C.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&O0(C))return!1;const P=GT(C.code,c);o.current.add(C[P]),qT(l,o.current,!1)&&(C.preventDefault(),r(!0))},_=C=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&O0(C))return!1;const P=GT(C.code,c);qT(l,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(C[P]),C.key==="Meta"&&o.current.clear(),s.current=!1},w=()=>{o.current.clear(),r(!1)};return h?.addEventListener("keydown",m),h?.addEventListener("keyup",_),window.addEventListener("blur",w),()=>{h?.removeEventListener("keydown",m),h?.removeEventListener("keyup",_),window.removeEventListener("blur",w)}}},[t,r]),n};function qT(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function GT(t,e){return e.includes(t)?"code":"key"}function S3(t,e,n,r){const s=t.parentNode||t.parentId;if(!s)return n;const o=e.get(s),l=tu(o,r);return S3(o,e,{x:(n.x??0)+l.x,y:(n.y??0)+l.y,z:(o[Ot]?.z??0)>(n.z??0)?o[Ot]?.z??0:n.z??0},r)}function A3(t,e,n){t.forEach(r=>{const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[r.id]){const{x:o,y:l,z:c}=S3(r,t,{...r.position,z:r[Ot]?.z??0},e);r.positionAbsolute={x:o,y:l},r[Ot].z=c,n?.[r.id]&&(r[Ot].isParent=!0)}})}function Fy(t,e,n,r){const s=new Map,o={},l=r?1e3:0;return t.forEach(c=>{const f=(Ur(c.zIndex)?c.zIndex:0)+(c.selected?l:0),h=e.get(c.id),m={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},_=c.parentNode||c.parentId;_&&(o[_]=!0);const w=h?.type&&h?.type!==c.type;Object.defineProperty(m,Ot,{enumerable:!1,value:{handleBounds:w?void 0:h?.[Ot]?.handleBounds,z:f}}),s.set(c.id,m)}),A3(s,n,o),s}function x3(t,e={}){const{getNodes:n,width:r,height:s,minZoom:o,maxZoom:l,d3Zoom:c,d3Selection:f,fitViewOnInitDone:h,fitViewOnInit:m,nodeOrigin:_}=t(),w=e.initial&&!h&&m;if(c&&f&&(w||!e.initial)){const M=n().filter(L=>{const j=e.includeHiddenNodes?L.width&&L.height:!L.hidden;return e.nodes?.length?j&&e.nodes.some(H=>H.id===L.id):j}),P=M.every(L=>L.width&&L.height);if(M.length>0&&P){const L=e_(M,_),{x:j,y:H,zoom:K}=d3(L,r,s,e.minZoom??o,e.maxZoom??l,e.padding??.1),y=fa.translate(j,H).scale(K);return typeof e.duration=="number"&&e.duration>0?c.transform(po(f,e.duration),y):c.transform(f,y),!0}}return!1}function U6(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[Ot]:r[Ot],selected:n.selected})}),new Map(e)}function B6(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function Ih({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:o,onNodesChange:l,onEdgesChange:c,hasDefaultNodes:f,hasDefaultEdges:h}=n();t?.length&&(f&&r({nodeInternals:U6(t,s)}),l?.(t)),e?.length&&(h&&r({edges:B6(e,o)}),c?.(e))}const Pl=()=>{},H6={zoomIn:Pl,zoomOut:Pl,zoomTo:Pl,getZoom:()=>1,setViewport:Pl,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Pl,fitBounds:Pl,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},$6=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),F6=()=>{const t=pn(),{d3Zoom:e,d3Selection:n}=Ct($6,Dn);return F.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(po(n,s?.duration),1.2),zoomOut:s=>e.scaleBy(po(n,s?.duration),1/1.2),zoomTo:(s,o)=>e.scaleTo(po(n,o?.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,o)=>{const[l,c,f]=t.getState().transform,h=fa.translate(s.x??l,s.y??c).scale(s.zoom??f);e.transform(po(n,o?.duration),h)},getViewport:()=>{const[s,o,l]=t.getState().transform;return{x:s,y:o,zoom:l}},fitView:s=>x3(t.getState,s),setCenter:(s,o,l)=>{const{width:c,height:f,maxZoom:h}=t.getState(),m=typeof l?.zoom<"u"?l.zoom:h,_=c/2-s*m,w=f/2-o*m,C=fa.translate(_,w).scale(m);e.transform(po(n,l?.duration),C)},fitBounds:(s,o)=>{const{width:l,height:c,minZoom:f,maxZoom:h}=t.getState(),{x:m,y:_,zoom:w}=d3(s,l,c,f,h,o?.padding??.1),C=fa.translate(m,_).scale(w);e.transform(po(n,o?.duration),C)},project:s=>{const{transform:o,snapToGrid:l,snapGrid:c}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),z0(s,o,l,c)},screenToFlowPosition:s=>{const{transform:o,snapToGrid:l,snapGrid:c,domNode:f}=t.getState();if(!f)return s;const{x:h,y:m}=f.getBoundingClientRect(),_={x:s.x-h,y:s.y-m};return z0(_,o,l,c)},flowToScreenPosition:s=>{const{transform:o,domNode:l}=t.getState();if(!l)return s;const{x:c,y:f}=l.getBoundingClientRect(),h=l3(s,o);return{x:h.x+c,y:h.y+f}},viewportInitialized:!0}:H6,[e,n])};function Fd(){const t=F6(),e=pn(),n=F.useCallback(()=>e.getState().getNodes().map(P=>({...P})),[]),r=F.useCallback(P=>e.getState().nodeInternals.get(P),[]),s=F.useCallback(()=>{const{edges:P=[]}=e.getState();return P.map(L=>({...L}))},[]),o=F.useCallback(P=>{const{edges:L=[]}=e.getState();return L.find(j=>j.id===P)},[]),l=F.useCallback(P=>{const{getNodes:L,setNodes:j,hasDefaultNodes:H,onNodesChange:K}=e.getState(),y=L(),E=typeof P=="function"?P(y):P;if(H)j(E);else if(K){const b=E.length===0?y.map(T=>({type:"remove",id:T.id})):E.map(T=>({item:T,type:"reset"}));K(b)}},[]),c=F.useCallback(P=>{const{edges:L=[],setEdges:j,hasDefaultEdges:H,onEdgesChange:K}=e.getState(),y=typeof P=="function"?P(L):P;if(H)j(y);else if(K){const E=y.length===0?L.map(b=>({type:"remove",id:b.id})):y.map(b=>({item:b,type:"reset"}));K(E)}},[]),f=F.useCallback(P=>{const L=Array.isArray(P)?P:[P],{getNodes:j,setNodes:H,hasDefaultNodes:K,onNodesChange:y}=e.getState();if(K){const b=[...j(),...L];H(b)}else if(y){const E=L.map(b=>({item:b,type:"add"}));y(E)}},[]),h=F.useCallback(P=>{const L=Array.isArray(P)?P:[P],{edges:j=[],setEdges:H,hasDefaultEdges:K,onEdgesChange:y}=e.getState();if(K)H([...j,...L]);else if(y){const E=L.map(b=>({item:b,type:"add"}));y(E)}},[]),m=F.useCallback(()=>{const{getNodes:P,edges:L=[],transform:j}=e.getState(),[H,K,y]=j;return{nodes:P().map(E=>({...E})),edges:L.map(E=>({...E})),viewport:{x:H,y:K,zoom:y}}},[]),_=F.useCallback(({nodes:P,edges:L})=>{const{nodeInternals:j,getNodes:H,edges:K,hasDefaultNodes:y,hasDefaultEdges:E,onNodesDelete:b,onEdgesDelete:T,onNodesChange:A,onEdgesChange:R}=e.getState(),k=(P||[]).map(Q=>Q.id),D=(L||[]).map(Q=>Q.id),$=H().reduce((Q,x)=>{const B=x.parentNode||x.parentId,G=!k.includes(x.id)&&B&&Q.find(z=>z.id===B);return(typeof x.deletable=="boolean"?x.deletable:!0)&&(k.includes(x.id)||G)&&Q.push(x),Q},[]),V=K.filter(Q=>typeof Q.deletable=="boolean"?Q.deletable:!0),U=V.filter(Q=>D.includes(Q.id));if($||U){const Q=c3($,V),x=[...U,...Q],B=x.reduce((G,X)=>(G.includes(X.id)||G.push(X.id),G),[]);if((E||y)&&(E&&e.setState({edges:K.filter(G=>!B.includes(G.id))}),y&&($.forEach(G=>{j.delete(G.id)}),e.setState({nodeInternals:new Map(j)}))),B.length>0&&(T?.(x),R&&R(B.map(G=>({id:G,type:"remove"})))),$.length>0&&(b?.($),A)){const G=$.map(X=>({id:X.id,type:"remove"}));A(G)}}},[]),w=F.useCallback(P=>{const L=c6(P),j=L?null:e.getState().nodeInternals.get(P.id);return!L&&!j?[null,null,L]:[L?P:LT(j),j,L]},[]),C=F.useCallback((P,L=!0,j)=>{const[H,K,y]=w(P);return H?(j||e.getState().getNodes()).filter(E=>{if(!y&&(E.id===K.id||!E.positionAbsolute))return!1;const b=LT(E),T=P0(b,H);return L&&T>0||T>=H.width*H.height}):[]},[]),M=F.useCallback((P,L,j=!0)=>{const[H]=w(P);if(!H)return!1;const K=P0(H,L);return j&&K>0||K>=H.width*H.height},[]);return F.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:o,setNodes:l,setEdges:c,addNodes:f,addEdges:h,toObject:m,deleteElements:_,getIntersectingNodes:C,isNodeIntersecting:M}),[t,n,r,s,o,l,c,f,h,m,_,C,M])}const q6={actInsideInputWithModifier:!1};var G6=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=pn(),{deleteElements:r}=Fd(),s=wd(t,q6),o=wd(e);F.useEffect(()=>{if(s){const{edges:l,getNodes:c}=n.getState(),f=c().filter(m=>m.selected),h=l.filter(m=>m.selected);r({nodes:f,edges:h}),n.setState({nodesSelectionActive:!1})}},[s]),F.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function K6(t){const e=pn();F.useEffect(()=>{let n;const r=()=>{if(!t.current)return;const s=Kv(t.current);(s.height===0||s.width===0)&&e.getState().onError?.("004",ws.error004()),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const r_={position:"absolute",width:"100%",height:"100%",top:0,left:0},Y6=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Nh=t=>({x:t.x,y:t.y,zoom:t.k}),Ol=(t,e)=>t.target.closest(`.${e}`),KT=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),YT=t=>{const e=t.ctrlKey&&vp()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},X6=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),W6=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:o=!0,panOnScroll:l=!1,panOnScrollSpeed:c=.5,panOnScrollMode:f=_o.Free,zoomOnDoubleClick:h=!0,elementsSelectable:m,panOnDrag:_=!0,defaultViewport:w,translateExtent:C,minZoom:M,maxZoom:P,zoomActivationKeyCode:L,preventScrolling:j=!0,children:H,noWheelClassName:K,noPanClassName:y})=>{const E=F.useRef(),b=pn(),T=F.useRef(!1),A=F.useRef(!1),R=F.useRef(null),k=F.useRef({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:$,d3ZoomHandler:V,userSelectionActive:U}=Ct(X6,Dn),Q=wd(L),x=F.useRef(0),B=F.useRef(!1),G=F.useRef();return K6(R),F.useEffect(()=>{if(R.current){const X=R.current.getBoundingClientRect(),z=t6().scaleExtent([M,P]).translateExtent(C),W=Jr(R.current).call(z),ee=fa.translate(w.x,w.y).scale(du(w.zoom,M,P)),Z=[[0,0],[X.width,X.height]],ne=z.constrain()(ee,Z,C);z.transform(W,ne),z.wheelDelta(YT),b.setState({d3Zoom:z,d3Selection:W,d3ZoomHandler:W.on("wheel.zoom"),transform:[ne.x,ne.y,ne.k],domNode:R.current.closest(".react-flow")})}},[]),F.useEffect(()=>{$&&D&&(l&&!Q&&!U?$.on("wheel.zoom",X=>{if(Ol(X,K))return!1;X.preventDefault(),X.stopImmediatePropagation();const z=$.property("__zoom").k||1;if(X.ctrlKey&&o){const ge=ki(X),Ae=YT(X),xe=z*Math.pow(2,Ae);D.scaleTo($,xe,ge,X);return}const W=X.deltaMode===1?20:1;let ee=f===_o.Vertical?0:X.deltaX*W,Z=f===_o.Horizontal?0:X.deltaY*W;!vp()&&X.shiftKey&&f!==_o.Vertical&&(ee=X.deltaY*W,Z=0),D.translateBy($,-(ee/z)*c,-(Z/z)*c,{internal:!0});const ne=Nh($.property("__zoom")),{onViewportChangeStart:oe,onViewportChange:ce,onViewportChangeEnd:fe}=b.getState();clearTimeout(G.current),B.current||(B.current=!0,e?.(X,ne),oe?.(ne)),B.current&&(t?.(X,ne),ce?.(ne),G.current=setTimeout(()=>{n?.(X,ne),fe?.(ne),B.current=!1},150))},{passive:!1}):typeof V<"u"&&$.on("wheel.zoom",function(X,z){if(!j&&X.type==="wheel"&&!X.ctrlKey||Ol(X,K))return null;X.preventDefault(),V.call(this,X,z)},{passive:!1}))},[U,l,f,$,D,V,Q,o,j,K,e,t,n]),F.useEffect(()=>{D&&D.on("start",X=>{if(!X.sourceEvent||X.sourceEvent.internal)return null;x.current=X.sourceEvent?.button;const{onViewportChangeStart:z}=b.getState(),W=Nh(X.transform);T.current=!0,k.current=W,X.sourceEvent?.type==="mousedown"&&b.setState({paneDragging:!0}),z?.(W),e?.(X.sourceEvent,W)})},[D,e]),F.useEffect(()=>{D&&(U&&!T.current?D.on("zoom",null):U||D.on("zoom",X=>{const{onViewportChange:z}=b.getState();if(b.setState({transform:[X.transform.x,X.transform.y,X.transform.k]}),A.current=!!(r&&KT(_,x.current??0)),(t||z)&&!X.sourceEvent?.internal){const W=Nh(X.transform);z?.(W),t?.(X.sourceEvent,W)}}))},[U,D,t,_,r]),F.useEffect(()=>{D&&D.on("end",X=>{if(!X.sourceEvent||X.sourceEvent.internal)return null;const{onViewportChangeEnd:z}=b.getState();if(T.current=!1,b.setState({paneDragging:!1}),r&&KT(_,x.current??0)&&!A.current&&r(X.sourceEvent),A.current=!1,(n||z)&&Y6(k.current,X.transform)){const W=Nh(X.transform);k.current=W,clearTimeout(E.current),E.current=setTimeout(()=>{z?.(W),n?.(X.sourceEvent,W)},l?150:0)}})},[D,l,_,n,r]),F.useEffect(()=>{D&&D.filter(X=>{const z=Q||s,W=o&&X.ctrlKey;if((_===!0||Array.isArray(_)&&_.includes(1))&&X.button===1&&X.type==="mousedown"&&(Ol(X,"react-flow__node")||Ol(X,"react-flow__edge")))return!0;if(!_&&!z&&!l&&!h&&!o||U||!h&&X.type==="dblclick"||Ol(X,K)&&X.type==="wheel"||Ol(X,y)&&(X.type!=="wheel"||l&&X.type==="wheel"&&!Q)||!o&&X.ctrlKey&&X.type==="wheel"||!z&&!l&&!W&&X.type==="wheel"||!_&&(X.type==="mousedown"||X.type==="touchstart")||Array.isArray(_)&&!_.includes(X.button)&&X.type==="mousedown")return!1;const ee=Array.isArray(_)&&_.includes(X.button)||!X.button||X.button<=1;return(!X.ctrlKey||X.type==="wheel")&&ee})},[U,D,s,o,l,h,_,m,Q]),pe.createElement("div",{className:"react-flow__renderer",ref:R,style:r_},H)},Q6=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Z6(){const{userSelectionActive:t,userSelectionRect:e}=Ct(Q6,Dn);return t&&e?pe.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function XT(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,o=e.position.y+e.height-r.height;if(s>0||o>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),o>0&&(r.style.height+=o),e.position.x<0){const l=Math.abs(e.position.x);r.position.x=r.position.x-l,r.style.width+=l,e.position.x=0}if(e.position.y<0){const l=Math.abs(e.position.y);r.position.y=r.position.y-l,r.style.height+=l,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function C3(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const o=t.filter(c=>c.id===s.id);if(o.length===0)return r.push(s),r;const l={...s};for(const c of o)if(c)switch(c.type){case"select":{l.selected=c.selected;break}case"position":{typeof c.position<"u"&&(l.position=c.position),typeof c.positionAbsolute<"u"&&(l.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(l.dragging=c.dragging),l.expandParent&&XT(r,l);break}case"dimensions":{typeof c.dimensions<"u"&&(l.width=c.dimensions.width,l.height=c.dimensions.height),typeof c.updateStyle<"u"&&(l.style={...l.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(l.resizing=c.resizing),l.expandParent&&XT(r,l);break}case"remove":return r}return r.push(l),r},n)}function R3(t,e){return C3(t,e)}function J6(t,e){return C3(t,e)}const ra=(t,e)=>({id:t,type:"select",selected:e});function ql(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(ra(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(ra(r.id,!1))),n},[])}const qy=(t,e)=>n=>{n.target===e.current&&t?.(n)},e5=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),k3=F.memo(({isSelecting:t,selectionMode:e=_d.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:o,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:f,onPaneMouseMove:h,onPaneMouseLeave:m,children:_})=>{const w=F.useRef(null),C=pn(),M=F.useRef(0),P=F.useRef(0),L=F.useRef(),{userSelectionActive:j,elementsSelectable:H,dragging:K}=Ct(e5,Dn),y=()=>{C.setState({userSelectionActive:!1,userSelectionRect:null}),M.current=0,P.current=0},E=V=>{o?.(V),C.getState().resetSelectedElements(),C.setState({nodesSelectionActive:!1})},b=V=>{if(Array.isArray(n)&&n?.includes(2)){V.preventDefault();return}l?.(V)},T=c?V=>c(V):void 0,A=V=>{const{resetSelectedElements:U,domNode:Q}=C.getState();if(L.current=Q?.getBoundingClientRect(),!H||!t||V.button!==0||V.target!==w.current||!L.current)return;const{x,y:B}=ha(V,L.current);U(),C.setState({userSelectionRect:{width:0,height:0,startX:x,startY:B,x,y:B}}),r?.(V)},R=V=>{const{userSelectionRect:U,nodeInternals:Q,edges:x,transform:B,onNodesChange:G,onEdgesChange:X,nodeOrigin:z,getNodes:W}=C.getState();if(!t||!L.current||!U)return;C.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ee=ha(V,L.current),Z=U.startX??0,ne=U.startY??0,oe={...U,x:ee.x<Z?ee.x:Z,y:ee.y<ne?ee.y:ne,width:Math.abs(ee.x-Z),height:Math.abs(ee.y-ne)},ce=W(),fe=u3(Q,oe,B,e===_d.Partial,!0,z),ge=c3(fe,x).map(xe=>xe.id),Ae=fe.map(xe=>xe.id);if(M.current!==Ae.length){M.current=Ae.length;const xe=ql(ce,Ae);xe.length&&G?.(xe)}if(P.current!==ge.length){P.current=ge.length;const xe=ql(x,ge);xe.length&&X?.(xe)}C.setState({userSelectionRect:oe})},k=V=>{if(V.button!==0)return;const{userSelectionRect:U}=C.getState();!j&&U&&V.target===w.current&&E?.(V),C.setState({nodesSelectionActive:M.current>0}),y(),s?.(V)},D=V=>{j&&(C.setState({nodesSelectionActive:M.current>0}),s?.(V)),y()},$=H&&(t||j);return pe.createElement("div",{className:Fn(["react-flow__pane",{dragging:K,selection:t}]),onClick:$?void 0:qy(E,w),onContextMenu:qy(b,w),onWheel:qy(T,w),onMouseEnter:$?void 0:f,onMouseDown:$?A:void 0,onMouseMove:$?R:h,onMouseUp:$?k:void 0,onMouseLeave:$?D:m,ref:w,style:r_},_,pe.createElement(Z6,null))});k3.displayName="Pane";function I3(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:I3(r,e):!1}function WT(t,e,n){let r=t;do{if(r?.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function t5(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!I3(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function n5(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function N3(t,e,n,r,s=[0,0],o){const l=n5(t,t.extent||r);let c=l;const f=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(f&&t.width&&t.height){const _=n.get(f),{x:w,y:C}=tu(_,s).positionAbsolute;c=_&&Ur(w)&&Ur(C)&&Ur(_.width)&&Ur(_.height)?[[w+t.width*s[0],C+t.height*s[1]],[w+_.width-t.width+t.width*s[0],C+_.height-t.height+t.height*s[1]]]:c}else o?.("005",ws.error005()),c=l;else if(t.extent&&f&&t.extent!=="parent"){const _=n.get(f),{x:w,y:C}=tu(_,s).positionAbsolute;c=[[t.extent[0][0]+w,t.extent[0][1]+C],[t.extent[1][0]+w,t.extent[1][1]+C]]}let h={x:0,y:0};if(f){const _=n.get(f);h=tu(_,s).positionAbsolute}const m=c&&c!=="parent"?Yv(e,c):e;return{position:{x:m.x-h.x,y:m.y-h.y},positionAbsolute:m}}function Gy({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const QT=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const o=Array.from(s),l=e.getBoundingClientRect(),c={x:l.width*r[0],y:l.height*r[1]};return o.map(f=>{const h=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),position:f.getAttribute("data-handlepos"),x:(h.left-l.left-c.x)/n,y:(h.top-l.top-c.y)/n,...Kv(f)}})};function zc(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function U0({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:l,nodeInternals:c,onError:f}=e.getState(),h=c.get(t);if(!h){f?.("012",ws.error012(t));return}e.setState({nodesSelectionActive:!1}),h.selected?(n||h.selected&&l)&&(o({nodes:[h],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):s([t])}function r5(){const t=pn();return F.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:o}=t.getState(),l=n.touches?n.touches[0].clientX:n.clientX,c=n.touches?n.touches[0].clientY:n.clientY,f={x:(l-r[0])/r[2],y:(c-r[1])/r[2]};return{xSnapped:o?s[0]*Math.round(f.x/s[0]):f.x,ySnapped:o?s[1]*Math.round(f.y/s[1]):f.y,...f}},[])}function Ky(t){return(e,n,r)=>t?.(e,r)}function D3({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:o,selectNodesOnDrag:l}){const c=pn(),[f,h]=F.useState(!1),m=F.useRef([]),_=F.useRef({x:null,y:null}),w=F.useRef(0),C=F.useRef(null),M=F.useRef({x:0,y:0}),P=F.useRef(null),L=F.useRef(!1),j=F.useRef(!1),H=F.useRef(!1),K=r5();return F.useEffect(()=>{if(t?.current){const y=Jr(t.current),E=({x:A,y:R})=>{const{nodeInternals:k,onNodeDrag:D,onSelectionDrag:$,updateNodePositions:V,nodeExtent:U,snapGrid:Q,snapToGrid:x,nodeOrigin:B,onError:G}=c.getState();_.current={x:A,y:R};let X=!1,z={x:0,y:0,x2:0,y2:0};if(m.current.length>1&&U){const ee=e_(m.current,B);z=Xv(ee)}if(m.current=m.current.map(ee=>{const Z={x:A-ee.distance.x,y:R-ee.distance.y};x&&(Z.x=Q[0]*Math.round(Z.x/Q[0]),Z.y=Q[1]*Math.round(Z.y/Q[1]));const ne=[[U[0][0],U[0][1]],[U[1][0],U[1][1]]];m.current.length>1&&U&&!ee.extent&&(ne[0][0]=ee.positionAbsolute.x-z.x+U[0][0],ne[1][0]=ee.positionAbsolute.x+(ee.width??0)-z.x2+U[1][0],ne[0][1]=ee.positionAbsolute.y-z.y+U[0][1],ne[1][1]=ee.positionAbsolute.y+(ee.height??0)-z.y2+U[1][1]);const oe=N3(ee,Z,k,ne,B,G);return X=X||ee.position.x!==oe.position.x||ee.position.y!==oe.position.y,ee.position=oe.position,ee.positionAbsolute=oe.positionAbsolute,ee}),!X)return;V(m.current,!0,!0),h(!0);const W=s?D:Ky($);if(W&&P.current){const[ee,Z]=Gy({nodeId:s,dragItems:m.current,nodeInternals:k});W(P.current,ee,Z)}},b=()=>{if(!C.current)return;const[A,R]=e3(M.current,C.current);if(A!==0||R!==0){const{transform:k,panBy:D}=c.getState();_.current.x=(_.current.x??0)-A/k[2],_.current.y=(_.current.y??0)-R/k[2],D({x:A,y:R})&&E(_.current)}w.current=requestAnimationFrame(b)},T=A=>{const{nodeInternals:R,multiSelectionActive:k,nodesDraggable:D,unselectNodesAndEdges:$,onNodeDragStart:V,onSelectionDragStart:U}=c.getState();j.current=!0;const Q=s?V:Ky(U);(!l||!o)&&!k&&s&&(R.get(s)?.selected||$()),s&&o&&l&&U0({id:s,store:c,nodeRef:t});const x=K(A);if(_.current=x,m.current=t5(R,D,x,s),Q&&m.current){const[B,G]=Gy({nodeId:s,dragItems:m.current,nodeInternals:R});Q(A.sourceEvent,B,G)}};if(e)y.on(".drag",null);else{const A=fM().on("start",R=>{const{domNode:k,nodeDragThreshold:D}=c.getState();D===0&&T(R),H.current=!1;const $=K(R);_.current=$,C.current=k?.getBoundingClientRect()||null,M.current=ha(R.sourceEvent,C.current)}).on("drag",R=>{const k=K(R),{autoPanOnNodeDrag:D,nodeDragThreshold:$}=c.getState();if(R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1&&(H.current=!0),!H.current){if(!L.current&&j.current&&D&&(L.current=!0,b()),!j.current){const V=k.xSnapped-(_?.current?.x??0),U=k.ySnapped-(_?.current?.y??0);Math.sqrt(V*V+U*U)>$&&T(R)}(_.current.x!==k.xSnapped||_.current.y!==k.ySnapped)&&m.current&&j.current&&(P.current=R.sourceEvent,M.current=ha(R.sourceEvent,C.current),E(k))}}).on("end",R=>{if(!(!j.current||H.current)&&(h(!1),L.current=!1,j.current=!1,cancelAnimationFrame(w.current),m.current)){const{updateNodePositions:k,nodeInternals:D,onNodeDragStop:$,onSelectionDragStop:V}=c.getState(),U=s?$:Ky(V);if(k(m.current,!1,!1),U){const[Q,x]=Gy({nodeId:s,dragItems:m.current,nodeInternals:D});U(R.sourceEvent,Q,x)}}}).filter(R=>{const k=R.target;return!R.button&&(!n||!WT(k,`.${n}`,t))&&(!r||WT(k,r,t))});return y.call(A),()=>{y.on(".drag",null)}}}},[t,e,n,r,o,c,s,l,K]),f}function M3(){const t=pn();return F.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:o,getNodes:l,snapToGrid:c,snapGrid:f,onError:h,nodesDraggable:m}=t.getState(),_=l().filter(H=>H.selected&&(H.draggable||m&&typeof H.draggable>"u")),w=c?f[0]:5,C=c?f[1]:5,M=n.isShiftPressed?4:1,P=n.x*w*M,L=n.y*C*M,j=_.map(H=>{if(H.positionAbsolute){const K={x:H.positionAbsolute.x+P,y:H.positionAbsolute.y+L};c&&(K.x=f[0]*Math.round(K.x/f[0]),K.y=f[1]*Math.round(K.y/f[1]));const{positionAbsolute:y,position:E}=N3(H,K,r,s,void 0,h);H.position=E,H.positionAbsolute=y}return H});o(j,!0,!1)},[])}const nu={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var jc=t=>{const e=({id:n,type:r,data:s,xPos:o,yPos:l,xPosOrigin:c,yPosOrigin:f,selected:h,onClick:m,onMouseEnter:_,onMouseMove:w,onMouseLeave:C,onContextMenu:M,onDoubleClick:P,style:L,className:j,isDraggable:H,isSelectable:K,isConnectable:y,isFocusable:E,selectNodesOnDrag:b,sourcePosition:T,targetPosition:A,hidden:R,resizeObserver:k,dragHandle:D,zIndex:$,isParent:V,noDragClassName:U,noPanClassName:Q,initialized:x,disableKeyboardA11y:B,ariaLabel:G,rfId:X,hasHandleBounds:z})=>{const W=pn(),ee=F.useRef(null),Z=F.useRef(null),ne=F.useRef(T),oe=F.useRef(A),ce=F.useRef(r),fe=K||H||m||_||w||C,ge=M3(),Ae=zc(n,W.getState,_),xe=zc(n,W.getState,w),Ue=zc(n,W.getState,C),Ne=zc(n,W.getState,M),Le=zc(n,W.getState,P),rt=Be=>{const{nodeDragThreshold:be}=W.getState();if(K&&(!b||!H||be>0)&&U0({id:n,store:W,nodeRef:ee}),m){const kt=W.getState().nodeInternals.get(n);kt&&m(Be,{...kt})}},st=Be=>{if(!O0(Be)&&!B)if(n3.includes(Be.key)&&K){const be=Be.key==="Escape";U0({id:n,store:W,unselect:be,nodeRef:ee})}else H&&h&&Object.prototype.hasOwnProperty.call(nu,Be.key)&&(W.setState({ariaLiveMessage:`Moved selected node ${Be.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~l}`}),ge({x:nu[Be.key].x,y:nu[Be.key].y,isShiftPressed:Be.shiftKey}))};F.useEffect(()=>()=>{Z.current&&(k?.unobserve(Z.current),Z.current=null)},[]),F.useEffect(()=>{if(ee.current&&!R){const Be=ee.current;(!x||!z||Z.current!==Be)&&(Z.current&&k?.unobserve(Z.current),k?.observe(Be),Z.current=Be)}},[R,x,z]),F.useEffect(()=>{const Be=ce.current!==r,be=ne.current!==T,kt=oe.current!==A;ee.current&&(Be||be||kt)&&(Be&&(ce.current=r),be&&(ne.current=T),kt&&(oe.current=A),W.getState().updateNodeDimensions([{id:n,nodeElement:ee.current,forceUpdate:!0}]))},[n,r,T,A]);const Ht=D3({nodeRef:ee,disabled:R||!H,noDragClassName:U,handleSelector:D,nodeId:n,isSelectable:K,selectNodesOnDrag:b});return R?null:pe.createElement("div",{className:Fn(["react-flow__node",`react-flow__node-${r}`,{[Q]:H},j,{selected:h,selectable:K,parent:V,dragging:Ht}]),ref:ee,style:{zIndex:$,transform:`translate(${c}px,${f}px)`,pointerEvents:fe?"all":"none",visibility:x?"visible":"hidden",...L},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ae,onMouseMove:xe,onMouseLeave:Ue,onContextMenu:Ne,onClick:rt,onDoubleClick:Le,onKeyDown:E?st:void 0,tabIndex:E?0:void 0,role:E?"button":void 0,"aria-describedby":B?void 0:`${E3}-${X}`,"aria-label":G},pe.createElement(y6,{value:n},pe.createElement(t,{id:n,data:s,type:r,xPos:o,yPos:l,selected:h,isConnectable:y,sourcePosition:T,targetPosition:A,dragging:Ht,dragHandle:D,zIndex:$})))};return e.displayName="NodeWrapper",F.memo(e)};const i5=t=>{const e=t.getNodes().filter(n=>n.selected);return{...e_(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function s5({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=pn(),{width:s,height:o,x:l,y:c,transformString:f,userSelectionActive:h}=Ct(i5,Dn),m=M3(),_=F.useRef(null);if(F.useEffect(()=>{n||_.current?.focus({preventScroll:!0})},[n]),D3({nodeRef:_}),h||!s||!o)return null;const w=t?M=>{const P=r.getState().getNodes().filter(L=>L.selected);t(M,P)}:void 0,C=M=>{Object.prototype.hasOwnProperty.call(nu,M.key)&&m({x:nu[M.key].x,y:nu[M.key].y,isShiftPressed:M.shiftKey})};return pe.createElement("div",{className:Fn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:f}},pe.createElement("div",{ref:_,className:"react-flow__nodesselection-rect",onContextMenu:w,tabIndex:n?void 0:-1,onKeyDown:n?void 0:C,style:{width:s,height:o,top:c,left:l}}))}var a5=F.memo(s5);const o5=t=>t.nodesSelectionActive,P3=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:l,deleteKeyCode:c,onMove:f,onMoveStart:h,onMoveEnd:m,selectionKeyCode:_,selectionOnDrag:w,selectionMode:C,onSelectionStart:M,onSelectionEnd:P,multiSelectionKeyCode:L,panActivationKeyCode:j,zoomActivationKeyCode:H,elementsSelectable:K,zoomOnScroll:y,zoomOnPinch:E,panOnScroll:b,panOnScrollSpeed:T,panOnScrollMode:A,zoomOnDoubleClick:R,panOnDrag:k,defaultViewport:D,translateExtent:$,minZoom:V,maxZoom:U,preventScrolling:Q,onSelectionContextMenu:x,noWheelClassName:B,noPanClassName:G,disableKeyboardA11y:X})=>{const z=Ct(o5),W=wd(_),ee=wd(j),Z=ee||k,ne=ee||b,oe=W||w&&Z!==!0;return G6({deleteKeyCode:c,multiSelectionKeyCode:L}),pe.createElement(W6,{onMove:f,onMoveStart:h,onMoveEnd:m,onPaneContextMenu:o,elementsSelectable:K,zoomOnScroll:y,zoomOnPinch:E,panOnScroll:ne,panOnScrollSpeed:T,panOnScrollMode:A,zoomOnDoubleClick:R,panOnDrag:!W&&Z,defaultViewport:D,translateExtent:$,minZoom:V,maxZoom:U,zoomActivationKeyCode:H,preventScrolling:Q,noWheelClassName:B,noPanClassName:G},pe.createElement(k3,{onSelectionStart:M,onSelectionEnd:P,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:l,panOnDrag:Z,isSelecting:!!oe,selectionMode:C},t,z&&pe.createElement(a5,{onSelectionContextMenu:x,noPanClassName:G,disableKeyboardA11y:X})))};P3.displayName="FlowRenderer";var l5=F.memo(P3);function u5(t){return Ct(F.useCallback(n=>t?u3(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function c5(t){const e={input:jc(t.input||v3),default:jc(t.default||j0),output:jc(t.output||w3),group:jc(t.group||n_)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,o)=>(s[o]=jc(t[o]||j0),s),n);return{...e,...r}}const d5=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},f5=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),O3=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:o,onError:l}=Ct(f5,Dn),c=u5(t.onlyRenderVisibleElements),f=F.useRef(),h=F.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const m=new ResizeObserver(_=>{const w=_.map(C=>({id:C.target.getAttribute("data-id"),nodeElement:C.target,forceUpdate:!0}));o(w)});return f.current=m,m},[]);return F.useEffect(()=>()=>{f?.current?.disconnect()},[]),pe.createElement("div",{className:"react-flow__nodes",style:r_},c.map(m=>{let _=m.type||"default";t.nodeTypes[_]||(l?.("003",ws.error003(_)),_="default");const w=t.nodeTypes[_]||t.nodeTypes.default,C=!!(m.draggable||e&&typeof m.draggable>"u"),M=!!(m.selectable||s&&typeof m.selectable>"u"),P=!!(m.connectable||n&&typeof m.connectable>"u"),L=!!(m.focusable||r&&typeof m.focusable>"u"),j=t.nodeExtent?Yv(m.positionAbsolute,t.nodeExtent):m.positionAbsolute,H=j?.x??0,K=j?.y??0,y=d5({x:H,y:K,width:m.width??0,height:m.height??0,origin:t.nodeOrigin});return pe.createElement(w,{key:m.id,id:m.id,className:m.className,style:m.style,type:_,data:m.data,sourcePosition:m.sourcePosition||Ee.Bottom,targetPosition:m.targetPosition||Ee.Top,hidden:m.hidden,xPos:H,yPos:K,xPosOrigin:y.x,yPosOrigin:y.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!m.selected,isDraggable:C,isSelectable:M,isConnectable:P,isFocusable:L,resizeObserver:h,dragHandle:m.dragHandle,zIndex:m[Ot]?.z??0,isParent:!!m[Ot]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!m.width&&!!m.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:m.ariaLabel,hasHandleBounds:!!m[Ot]?.handleBounds})}))};O3.displayName="NodeRenderer";var h5=F.memo(O3);const p5=(t,e,n)=>n===Ee.Left?t-e:n===Ee.Right?t+e:t,m5=(t,e,n)=>n===Ee.Top?t-e:n===Ee.Bottom?t+e:t,ZT="react-flow__edgeupdater",JT=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:o,onMouseOut:l,type:c})=>pe.createElement("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:l,className:Fn([ZT,`${ZT}-${c}`]),cx:p5(e,r,t),cy:m5(n,r,t),r,stroke:"transparent",fill:"transparent"}),g5=()=>!0;var Vl=t=>{const e=({id:n,className:r,type:s,data:o,onClick:l,onEdgeDoubleClick:c,selected:f,animated:h,label:m,labelStyle:_,labelShowBg:w,labelBgStyle:C,labelBgPadding:M,labelBgBorderRadius:P,style:L,source:j,target:H,sourceX:K,sourceY:y,targetX:E,targetY:b,sourcePosition:T,targetPosition:A,elementsSelectable:R,hidden:k,sourceHandleId:D,targetHandleId:$,onContextMenu:V,onMouseEnter:U,onMouseMove:Q,onMouseLeave:x,reconnectRadius:B,onReconnect:G,onReconnectStart:X,onReconnectEnd:z,markerEnd:W,markerStart:ee,rfId:Z,ariaLabel:ne,isFocusable:oe,isReconnectable:ce,pathOptions:fe,interactionWidth:ge,disableKeyboardA11y:Ae})=>{const xe=F.useRef(null),[Ue,Ne]=F.useState(!1),[Le,rt]=F.useState(!1),st=pn(),Ht=F.useMemo(()=>`url('#${L0(ee,Z)}')`,[ee,Z]),Be=F.useMemo(()=>`url('#${L0(W,Z)}')`,[W,Z]);if(k)return null;const be=Ft=>{const{edges:sn,addSelectedEdges:Vn,unselectNodesAndEdges:Ln,multiSelectionActive:an}=st.getState(),mn=sn.find(zn=>zn.id===n);mn&&(R&&(st.setState({nodesSelectionActive:!1}),mn.selected&&an?(Ln({nodes:[],edges:[mn]}),xe.current?.blur()):Vn([n])),l&&l(Ft,mn))},kt=Lc(n,st.getState,c),An=Lc(n,st.getState,V),Qt=Lc(n,st.getState,U),er=Lc(n,st.getState,Q),Pn=Lc(n,st.getState,x),On=(Ft,sn)=>{if(Ft.button!==0)return;const{edges:Vn,isValidConnection:Ln}=st.getState(),an=sn?H:j,mn=(sn?$:D)||null,zn=sn?"target":"source",$i=Ln||g5,Fi=sn,Fr=Vn.find(nr=>nr.id===n);rt(!0),X?.(Ft,Fr,zn);const tr=nr=>{rt(!1),z?.(nr,Fr,zn)};p3({event:Ft,handleId:mn,nodeId:an,onConnect:nr=>G?.(Fr,nr),isTarget:Fi,getState:st.getState,setState:st.setState,isValidConnection:$i,edgeUpdaterType:zn,onReconnectEnd:tr})},$r=Ft=>On(Ft,!0),ot=Ft=>On(Ft,!1),Ye=()=>Ne(!0),$t=()=>Ne(!1),Tt=!R&&!l,li=Ft=>{if(!Ae&&n3.includes(Ft.key)&&R){const{unselectNodesAndEdges:sn,addSelectedEdges:Vn,edges:Ln}=st.getState();Ft.key==="Escape"?(xe.current?.blur(),sn({edges:[Ln.find(mn=>mn.id===n)]})):Vn([n])}};return pe.createElement("g",{className:Fn(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:f,animated:h,inactive:Tt,updating:Ue}]),onClick:be,onDoubleClick:kt,onContextMenu:An,onMouseEnter:Qt,onMouseMove:er,onMouseLeave:Pn,onKeyDown:oe?li:void 0,tabIndex:oe?0:void 0,role:oe?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ne===null?void 0:ne||`Edge from ${j} to ${H}`,"aria-describedby":oe?`${T3}-${Z}`:void 0,ref:xe},!Le&&pe.createElement(t,{id:n,source:j,target:H,selected:f,animated:h,label:m,labelStyle:_,labelShowBg:w,labelBgStyle:C,labelBgPadding:M,labelBgBorderRadius:P,data:o,style:L,sourceX:K,sourceY:y,targetX:E,targetY:b,sourcePosition:T,targetPosition:A,sourceHandleId:D,targetHandleId:$,markerStart:Ht,markerEnd:Be,pathOptions:fe,interactionWidth:ge}),ce&&pe.createElement(pe.Fragment,null,(ce==="source"||ce===!0)&&pe.createElement(JT,{position:T,centerX:K,centerY:y,radius:B,onMouseDown:$r,onMouseEnter:Ye,onMouseOut:$t,type:"source"}),(ce==="target"||ce===!0)&&pe.createElement(JT,{position:A,centerX:E,centerY:b,radius:B,onMouseDown:ot,onMouseEnter:Ye,onMouseOut:$t,type:"target"})))};return e.displayName="EdgeWrapper",F.memo(e)};function y5(t){const e={default:Vl(t.default||_p),straight:Vl(t.bezier||Zv),step:Vl(t.step||Qv),smoothstep:Vl(t.step||Jp),simplebezier:Vl(t.simplebezier||Wv)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,o)=>(s[o]=Vl(t[o]||_p),s),n);return{...e,...r}}function eS(t,e,n=null){const r=(n?.x||0)+e.x,s=(n?.y||0)+e.y,o=n?.width||e.width,l=n?.height||e.height;switch(t){case Ee.Top:return{x:r+o/2,y:s};case Ee.Right:return{x:r+o,y:s+l/2};case Ee.Bottom:return{x:r+o/2,y:s+l};case Ee.Left:return{x:r,y:s+l/2}}}function tS(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const v5=(t,e,n,r,s,o)=>{const l=eS(n,t,e),c=eS(o,r,s);return{sourceX:l.x,sourceY:l.y,targetX:c.x,targetY:c.y}};function _5({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:o,width:l,height:c,transform:f}){const h={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+o)};h.x===h.x2&&(h.x2+=1),h.y===h.y2&&(h.y2+=1);const m=Xv({x:(0-f[0])/f[2],y:(0-f[1])/f[2],width:l/f[2],height:c/f[2]}),_=Math.max(0,Math.min(m.x2,h.x2)-Math.max(m.x,h.x)),w=Math.max(0,Math.min(m.y2,h.y2)-Math.max(m.y,h.y));return Math.ceil(_*w)>0}function nS(t){const e=t?.[Ot]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const w5=[{level:0,isMaxLevel:!0,edges:[]}];function b5(t,e,n=!1){let r=-1;const s=t.reduce((l,c)=>{const f=Ur(c.zIndex);let h=f?c.zIndex:0;if(n){const m=e.get(c.target),_=e.get(c.source),w=c.selected||m?.selected||_?.selected,C=Math.max(_?.[Ot]?.z||0,m?.[Ot]?.z||0,1e3);h=(f?c.zIndex:0)+(w?C:0)}return l[h]?l[h].push(c):l[h]=[c],r=h>r?h:r,l},{}),o=Object.entries(s).map(([l,c])=>{const f=+l;return{edges:c,level:f,isMaxLevel:f===r}});return o.length===0?w5:o}function E5(t,e,n){const r=Ct(F.useCallback(s=>t?s.edges.filter(o=>{const l=e.get(o.source),c=e.get(o.target);return l?.width&&l?.height&&c?.width&&c?.height&&_5({sourcePos:l.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:l.width,sourceHeight:l.height,targetWidth:c.width,targetHeight:c.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return b5(r,e,n)}const T5=({color:t="none",strokeWidth:e=1})=>pe.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),S5=({color:t="none",strokeWidth:e=1})=>pe.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),rS={[Ro.Arrow]:T5,[Ro.ArrowClosed]:S5};function A5(t){const e=pn();return F.useMemo(()=>Object.prototype.hasOwnProperty.call(rS,t)?rS[t]:(e.getState().onError?.("009",ws.error009(t)),null),[t])}const x5=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"})=>{const f=A5(e);return f?pe.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:c,refX:"0",refY:"0"},pe.createElement(f,{color:n,strokeWidth:l})):null},C5=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,o)=>([o.markerStart,o.markerEnd].forEach(l=>{if(l&&typeof l=="object"){const c=L0(l,e);r.includes(c)||(s.push({id:c,color:l.color||t,...l}),r.push(c))}}),s),[]).sort((s,o)=>s.id.localeCompare(o.id))},V3=({defaultColor:t,rfId:e})=>{const n=Ct(F.useCallback(C5({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((o,l)=>o.id!==s[l].id)));return pe.createElement("defs",null,n.map(r=>pe.createElement(x5,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};V3.displayName="MarkerDefinitions";var R5=F.memo(V3);const k5=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),L3=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:o,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:f,onEdgeMouseLeave:h,onEdgeClick:m,onEdgeDoubleClick:_,onReconnect:w,onReconnectStart:C,onReconnectEnd:M,reconnectRadius:P,children:L,disableKeyboardA11y:j})=>{const{edgesFocusable:H,edgesUpdatable:K,elementsSelectable:y,width:E,height:b,connectionMode:T,nodeInternals:A,onError:R}=Ct(k5,Dn),k=E5(e,A,n);return E?pe.createElement(pe.Fragment,null,k.map(({level:D,edges:$,isMaxLevel:V})=>pe.createElement("svg",{key:D,style:{zIndex:D},width:E,height:b,className:"react-flow__edges react-flow__container"},V&&pe.createElement(R5,{defaultColor:t,rfId:r}),pe.createElement("g",null,$.map(U=>{const[Q,x,B]=nS(A.get(U.source)),[G,X,z]=nS(A.get(U.target));if(!B||!z)return null;let W=U.type||"default";s[W]||(R?.("011",ws.error011(W)),W="default");const ee=s[W]||s.default,Z=T===_a.Strict?X.target:(X.target??[]).concat(X.source??[]),ne=tS(x.source,U.sourceHandle),oe=tS(Z,U.targetHandle),ce=ne?.position||Ee.Bottom,fe=oe?.position||Ee.Top,ge=!!(U.focusable||H&&typeof U.focusable>"u"),Ae=U.reconnectable||U.updatable,xe=typeof w<"u"&&(Ae||K&&typeof Ae>"u");if(!ne||!oe)return R?.("008",ws.error008(ne,U)),null;const{sourceX:Ue,sourceY:Ne,targetX:Le,targetY:rt}=v5(Q,ne,ce,G,oe,fe);return pe.createElement(ee,{key:U.id,id:U.id,className:Fn([U.className,o]),type:W,data:U.data,selected:!!U.selected,animated:!!U.animated,hidden:!!U.hidden,label:U.label,labelStyle:U.labelStyle,labelShowBg:U.labelShowBg,labelBgStyle:U.labelBgStyle,labelBgPadding:U.labelBgPadding,labelBgBorderRadius:U.labelBgBorderRadius,style:U.style,source:U.source,target:U.target,sourceHandleId:U.sourceHandle,targetHandleId:U.targetHandle,markerEnd:U.markerEnd,markerStart:U.markerStart,sourceX:Ue,sourceY:Ne,targetX:Le,targetY:rt,sourcePosition:ce,targetPosition:fe,elementsSelectable:y,onContextMenu:l,onMouseEnter:c,onMouseMove:f,onMouseLeave:h,onClick:m,onEdgeDoubleClick:_,onReconnect:w,onReconnectStart:C,onReconnectEnd:M,reconnectRadius:P,rfId:r,ariaLabel:U.ariaLabel,isFocusable:ge,isReconnectable:xe,pathOptions:"pathOptions"in U?U.pathOptions:void 0,interactionWidth:U.interactionWidth,disableKeyboardA11y:j})})))),L):null};L3.displayName="EdgeRenderer";var I5=F.memo(L3);const N5=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function D5({children:t}){const e=Ct(N5);return pe.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function M5(t){const e=Fd(),n=F.useRef(!1);F.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const P5={[Ee.Left]:Ee.Right,[Ee.Right]:Ee.Left,[Ee.Top]:Ee.Bottom,[Ee.Bottom]:Ee.Top},z3=({nodeId:t,handleType:e,style:n,type:r=ia.Bezier,CustomComponent:s,connectionStatus:o})=>{const{fromNode:l,handleId:c,toX:f,toY:h,connectionMode:m}=Ct(F.useCallback(b=>({fromNode:b.nodeInternals.get(t),handleId:b.connectionHandleId,toX:(b.connectionPosition.x-b.transform[0])/b.transform[2],toY:(b.connectionPosition.y-b.transform[1])/b.transform[2],connectionMode:b.connectionMode}),[t]),Dn),_=l?.[Ot]?.handleBounds;let w=_?.[e];if(m===_a.Loose&&(w=w||_?.[e==="source"?"target":"source"]),!l||!w)return null;const C=c?w.find(b=>b.id===c):w[0],M=C?C.x+C.width/2:(l.width??0)/2,P=C?C.y+C.height/2:l.height??0,L=(l.positionAbsolute?.x??0)+M,j=(l.positionAbsolute?.y??0)+P,H=C?.position,K=H?P5[H]:null;if(!H||!K)return null;if(s)return pe.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:l,fromHandle:C,fromX:L,fromY:j,toX:f,toY:h,fromPosition:H,toPosition:K,connectionStatus:o});let y="";const E={sourceX:L,sourceY:j,sourcePosition:H,targetX:f,targetY:h,targetPosition:K};return r===ia.Bezier?[y]=o3(E):r===ia.Step?[y]=V0({...E,borderRadius:0}):r===ia.SmoothStep?[y]=V0(E):r===ia.SimpleBezier?[y]=a3(E):y=`M${L},${j} ${f},${h}`,pe.createElement("path",{d:y,fill:"none",className:"react-flow__connection-path",style:n})};z3.displayName="ConnectionLine";const O5=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function V5({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:o,nodesConnectable:l,width:c,height:f,connectionStatus:h}=Ct(O5,Dn);return!(s&&o&&c&&l)?null:pe.createElement("svg",{style:t,width:c,height:f,className:"react-flow__edges react-flow__connectionline react-flow__container"},pe.createElement("g",{className:Fn(["react-flow__connection",h])},pe.createElement(z3,{nodeId:s,handleType:o,style:e,type:n,CustomComponent:r,connectionStatus:h})))}function iS(t,e){return F.useRef(null),pn(),F.useMemo(()=>e(t),[t])}const j3=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:o,onNodeClick:l,onEdgeClick:c,onNodeDoubleClick:f,onEdgeDoubleClick:h,onNodeMouseEnter:m,onNodeMouseMove:_,onNodeMouseLeave:w,onNodeContextMenu:C,onSelectionContextMenu:M,onSelectionStart:P,onSelectionEnd:L,connectionLineType:j,connectionLineStyle:H,connectionLineComponent:K,connectionLineContainerStyle:y,selectionKeyCode:E,selectionOnDrag:b,selectionMode:T,multiSelectionKeyCode:A,panActivationKeyCode:R,zoomActivationKeyCode:k,deleteKeyCode:D,onlyRenderVisibleElements:$,elementsSelectable:V,selectNodesOnDrag:U,defaultViewport:Q,translateExtent:x,minZoom:B,maxZoom:G,preventScrolling:X,defaultMarkerColor:z,zoomOnScroll:W,zoomOnPinch:ee,panOnScroll:Z,panOnScrollSpeed:ne,panOnScrollMode:oe,zoomOnDoubleClick:ce,panOnDrag:fe,onPaneClick:ge,onPaneMouseEnter:Ae,onPaneMouseMove:xe,onPaneMouseLeave:Ue,onPaneScroll:Ne,onPaneContextMenu:Le,onEdgeContextMenu:rt,onEdgeMouseEnter:st,onEdgeMouseMove:Ht,onEdgeMouseLeave:Be,onReconnect:be,onReconnectStart:kt,onReconnectEnd:An,reconnectRadius:Qt,noDragClassName:er,noWheelClassName:Pn,noPanClassName:On,elevateEdgesOnSelect:$r,disableKeyboardA11y:ot,nodeOrigin:Ye,nodeExtent:$t,rfId:Tt})=>{const li=iS(t,c5),Ft=iS(e,y5);return M5(o),pe.createElement(l5,{onPaneClick:ge,onPaneMouseEnter:Ae,onPaneMouseMove:xe,onPaneMouseLeave:Ue,onPaneContextMenu:Le,onPaneScroll:Ne,deleteKeyCode:D,selectionKeyCode:E,selectionOnDrag:b,selectionMode:T,onSelectionStart:P,onSelectionEnd:L,multiSelectionKeyCode:A,panActivationKeyCode:R,zoomActivationKeyCode:k,elementsSelectable:V,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:W,zoomOnPinch:ee,zoomOnDoubleClick:ce,panOnScroll:Z,panOnScrollSpeed:ne,panOnScrollMode:oe,panOnDrag:fe,defaultViewport:Q,translateExtent:x,minZoom:B,maxZoom:G,onSelectionContextMenu:M,preventScrolling:X,noDragClassName:er,noWheelClassName:Pn,noPanClassName:On,disableKeyboardA11y:ot},pe.createElement(D5,null,pe.createElement(I5,{edgeTypes:Ft,onEdgeClick:c,onEdgeDoubleClick:h,onlyRenderVisibleElements:$,onEdgeContextMenu:rt,onEdgeMouseEnter:st,onEdgeMouseMove:Ht,onEdgeMouseLeave:Be,onReconnect:be,onReconnectStart:kt,onReconnectEnd:An,reconnectRadius:Qt,defaultMarkerColor:z,noPanClassName:On,elevateEdgesOnSelect:!!$r,disableKeyboardA11y:ot,rfId:Tt},pe.createElement(V5,{style:H,type:j,component:K,containerStyle:y})),pe.createElement("div",{className:"react-flow__edgelabel-renderer"}),pe.createElement(h5,{nodeTypes:li,onNodeClick:l,onNodeDoubleClick:f,onNodeMouseEnter:m,onNodeMouseMove:_,onNodeMouseLeave:w,onNodeContextMenu:C,selectNodesOnDrag:U,onlyRenderVisibleElements:$,noPanClassName:On,noDragClassName:er,disableKeyboardA11y:ot,nodeOrigin:Ye,nodeExtent:$t,rfId:Tt})))};j3.displayName="GraphView";var L5=F.memo(j3);const B0=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Js={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:B0,nodeExtent:B0,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:_a.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:d6,isValidConnection:void 0},z5=()=>SD((t,e)=>({...Js,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:o}=e();t({nodeInternals:Fy(n,r,s,o)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",o=typeof r<"u",l=s?Fy(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:l,edges:o?r:[],hasDefaultNodes:s,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:o,fitViewOnInitDone:l,fitViewOnInitOptions:c,domNode:f,nodeOrigin:h}=e(),m=f?.querySelector(".react-flow__viewport");if(!m)return;const _=window.getComputedStyle(m),{m22:w}=new window.DOMMatrixReadOnly(_.transform),C=n.reduce((P,L)=>{const j=s.get(L.id);if(j?.hidden)s.set(j.id,{...j,[Ot]:{...j[Ot],handleBounds:void 0}});else if(j){const H=Kv(L.nodeElement);!!(H.width&&H.height&&(j.width!==H.width||j.height!==H.height||L.forceUpdate))&&(s.set(j.id,{...j,[Ot]:{...j[Ot],handleBounds:{source:QT(".source",L.nodeElement,w,h),target:QT(".target",L.nodeElement,w,h)}},...H}),P.push({id:j.id,type:"dimensions",dimensions:H}))}return P},[]);A3(s,h);const M=l||o&&!l&&x3(e,{initial:!0,...c});t({nodeInternals:new Map(s),fitViewOnInitDone:M}),C?.length>0&&r?.(C)},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:o}=e(),l=n.map(c=>{const f={id:c.id,type:"position",dragging:s};return r&&(f.positionAbsolute=c.positionAbsolute,f.position=c.position),f});o(l)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:o,nodeOrigin:l,getNodes:c,elevateNodesOnSelect:f}=e();if(n?.length){if(o){const h=R3(n,c()),m=Fy(h,s,l,f);t({nodeInternals:m})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let l,c=null;r?l=n.map(f=>ra(f,!0)):(l=ql(o(),n),c=ql(s,[])),Ih({changedNodes:l,changedEdges:c,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let l,c=null;r?l=n.map(f=>ra(f,!0)):(l=ql(s,n),c=ql(o(),[])),Ih({changedNodes:c,changedEdges:l,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:o}=e(),l=n||o(),c=r||s,f=l.map(m=>(m.selected=!1,ra(m.id,!1))),h=c.map(m=>ra(m.id,!1));Ih({changedNodes:f,changedEdges:h,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r?.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r?.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),o=r().filter(c=>c.selected).map(c=>ra(c.id,!1)),l=n.filter(c=>c.selected).map(c=>ra(c.id,!1));Ih({changedNodes:o,changedEdges:l,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=Yv(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:o,d3Zoom:l,d3Selection:c,translateExtent:f}=e();if(!l||!c||!n.x&&!n.y)return!1;const h=fa.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),m=[[0,0],[s,o]],_=l?.constrain()(h,m,f);return l.transform(c,_),r[0]!==_.x||r[1]!==_.y||r[2]!==_.k},cancelConnection:()=>t({connectionNodeId:Js.connectionNodeId,connectionHandleId:Js.connectionHandleId,connectionHandleType:Js.connectionHandleType,connectionStatus:Js.connectionStatus,connectionStartHandle:Js.connectionStartHandle,connectionEndHandle:Js.connectionEndHandle}),reset:()=>t({...Js})}),Object.is),U3=({children:t})=>{const e=F.useRef(null);return e.current||(e.current=z5()),pe.createElement(r6,{value:e.current},t)};U3.displayName="ReactFlowProvider";const B3=({children:t})=>F.useContext(Zp)?pe.createElement(pe.Fragment,null,t):pe.createElement(U3,null,t);B3.displayName="ReactFlowWrapper";const j5={input:v3,default:j0,output:w3,group:n_},U5={default:_p,straight:Zv,step:Qv,smoothstep:Jp,simplebezier:Wv},B5=[0,0],H5=[15,15],$5={x:0,y:0,zoom:1},F5={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},H3=F.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:o=j5,edgeTypes:l=U5,onNodeClick:c,onEdgeClick:f,onInit:h,onMove:m,onMoveStart:_,onMoveEnd:w,onConnect:C,onConnectStart:M,onConnectEnd:P,onClickConnectStart:L,onClickConnectEnd:j,onNodeMouseEnter:H,onNodeMouseMove:K,onNodeMouseLeave:y,onNodeContextMenu:E,onNodeDoubleClick:b,onNodeDragStart:T,onNodeDrag:A,onNodeDragStop:R,onNodesDelete:k,onEdgesDelete:D,onSelectionChange:$,onSelectionDragStart:V,onSelectionDrag:U,onSelectionDragStop:Q,onSelectionContextMenu:x,onSelectionStart:B,onSelectionEnd:G,connectionMode:X=_a.Strict,connectionLineType:z=ia.Bezier,connectionLineStyle:W,connectionLineComponent:ee,connectionLineContainerStyle:Z,deleteKeyCode:ne="Backspace",selectionKeyCode:oe="Shift",selectionOnDrag:ce=!1,selectionMode:fe=_d.Full,panActivationKeyCode:ge="Space",multiSelectionKeyCode:Ae=vp()?"Meta":"Control",zoomActivationKeyCode:xe=vp()?"Meta":"Control",snapToGrid:Ue=!1,snapGrid:Ne=H5,onlyRenderVisibleElements:Le=!1,selectNodesOnDrag:rt=!0,nodesDraggable:st,nodesConnectable:Ht,nodesFocusable:Be,nodeOrigin:be=B5,edgesFocusable:kt,edgesUpdatable:An,elementsSelectable:Qt,defaultViewport:er=$5,minZoom:Pn=.5,maxZoom:On=2,translateExtent:$r=B0,preventScrolling:ot=!0,nodeExtent:Ye,defaultMarkerColor:$t="#b1b1b7",zoomOnScroll:Tt=!0,zoomOnPinch:li=!0,panOnScroll:Ft=!1,panOnScrollSpeed:sn=.5,panOnScrollMode:Vn=_o.Free,zoomOnDoubleClick:Ln=!0,panOnDrag:an=!0,onPaneClick:mn,onPaneMouseEnter:zn,onPaneMouseMove:$i,onPaneMouseLeave:Fi,onPaneScroll:Fr,onPaneContextMenu:tr,children:br,onEdgeContextMenu:nr,onEdgeDoubleClick:Er,onEdgeMouseEnter:Pa,onEdgeMouseMove:ui,onEdgeMouseLeave:Cs,onEdgeUpdate:ci,onEdgeUpdateStart:$o,onEdgeUpdateEnd:yt,onReconnect:Lt,onReconnectStart:It,onReconnectEnd:qn,reconnectRadius:Oa=10,edgeUpdaterRadius:Pu=10,onNodesChange:di,onEdgesChange:Fo,noDragClassName:qi="nodrag",noWheelClassName:fi="nowheel",noPanClassName:Tr="nopan",fitView:Sr=!1,fitViewOptions:Ar,connectOnClick:gn=!0,attributionPosition:St,proOptions:Va,defaultEdgeOptions:Rs,elevateNodesOnSelect:rr=!0,elevateEdgesOnSelect:qr=!1,disableKeyboardA11y:La=!1,autoPanOnConnect:qo=!0,autoPanOnNodeDrag:Gi=!0,connectionRadius:Go=20,isValidConnection:hi,onError:xr,style:Zt,id:pi,nodeDragThreshold:Ko,...Gr},ks)=>{const mi=pi||"1";return pe.createElement("div",{...Gr,style:{...Zt,...F5},ref:ks,className:Fn(["react-flow",s]),"data-testid":"rf__wrapper",id:pi},pe.createElement(B3,null,pe.createElement(L5,{onInit:h,onMove:m,onMoveStart:_,onMoveEnd:w,onNodeClick:c,onEdgeClick:f,onNodeMouseEnter:H,onNodeMouseMove:K,onNodeMouseLeave:y,onNodeContextMenu:E,onNodeDoubleClick:b,nodeTypes:o,edgeTypes:l,connectionLineType:z,connectionLineStyle:W,connectionLineComponent:ee,connectionLineContainerStyle:Z,selectionKeyCode:oe,selectionOnDrag:ce,selectionMode:fe,deleteKeyCode:ne,multiSelectionKeyCode:Ae,panActivationKeyCode:ge,zoomActivationKeyCode:xe,onlyRenderVisibleElements:Le,selectNodesOnDrag:rt,defaultViewport:er,translateExtent:$r,minZoom:Pn,maxZoom:On,preventScrolling:ot,zoomOnScroll:Tt,zoomOnPinch:li,zoomOnDoubleClick:Ln,panOnScroll:Ft,panOnScrollSpeed:sn,panOnScrollMode:Vn,panOnDrag:an,onPaneClick:mn,onPaneMouseEnter:zn,onPaneMouseMove:$i,onPaneMouseLeave:Fi,onPaneScroll:Fr,onPaneContextMenu:tr,onSelectionContextMenu:x,onSelectionStart:B,onSelectionEnd:G,onEdgeContextMenu:nr,onEdgeDoubleClick:Er,onEdgeMouseEnter:Pa,onEdgeMouseMove:ui,onEdgeMouseLeave:Cs,onReconnect:Lt??ci,onReconnectStart:It??$o,onReconnectEnd:qn??yt,reconnectRadius:Oa??Pu,defaultMarkerColor:$t,noDragClassName:qi,noWheelClassName:fi,noPanClassName:Tr,elevateEdgesOnSelect:qr,rfId:mi,disableKeyboardA11y:La,nodeOrigin:be,nodeExtent:Ye}),pe.createElement(P6,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:C,onConnectStart:M,onConnectEnd:P,onClickConnectStart:L,onClickConnectEnd:j,nodesDraggable:st,nodesConnectable:Ht,nodesFocusable:Be,edgesFocusable:kt,edgesUpdatable:An,elementsSelectable:Qt,elevateNodesOnSelect:rr,minZoom:Pn,maxZoom:On,nodeExtent:Ye,onNodesChange:di,onEdgesChange:Fo,snapToGrid:Ue,snapGrid:Ne,connectionMode:X,translateExtent:$r,connectOnClick:gn,defaultEdgeOptions:Rs,fitView:Sr,fitViewOptions:Ar,onNodesDelete:k,onEdgesDelete:D,onNodeDragStart:T,onNodeDrag:A,onNodeDragStop:R,onSelectionDrag:U,onSelectionDragStart:V,onSelectionDragStop:Q,noPanClassName:Tr,nodeOrigin:be,rfId:mi,autoPanOnConnect:qo,autoPanOnNodeDrag:Gi,onError:xr,connectionRadius:Go,isValidConnection:hi,nodeDragThreshold:Ko}),pe.createElement(D6,{onSelectionChange:$}),br,pe.createElement(s6,{proOptions:Va,position:St}),pe.createElement(j6,{rfId:mi,disableKeyboardA11y:La})))});H3.displayName="ReactFlow";function $3(t){return e=>{const[n,r]=F.useState(e),s=F.useCallback(o=>r(l=>t(o,l)),[]);return[n,r,s]}}const q5=$3(R3),G5=$3(J6);function K5(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},pe.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Y5(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},pe.createElement("path",{d:"M0 0h32v4.2H0z"}))}function X5(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},pe.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function W5(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},pe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Q5(){return pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},pe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Gc=({children:t,className:e,...n})=>pe.createElement("button",{type:"button",className:Fn(["react-flow__controls-button",e]),...n},t);Gc.displayName="ControlButton";const Z5=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),F3=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:l,onFitView:c,onInteractiveChange:f,className:h,children:m,position:_="bottom-left"})=>{const w=pn(),[C,M]=F.useState(!1),{isInteractive:P,minZoomReached:L,maxZoomReached:j}=Ct(Z5,Dn),{zoomIn:H,zoomOut:K,fitView:y}=Fd();if(F.useEffect(()=>{M(!0)},[]),!C)return null;const E=()=>{H(),o?.()},b=()=>{K(),l?.()},T=()=>{y(s),c?.()},A=()=>{w.setState({nodesDraggable:!P,nodesConnectable:!P,elementsSelectable:!P}),f?.(!P)};return pe.createElement(J2,{className:Fn(["react-flow__controls",h]),position:_,style:t,"data-testid":"rf__controls"},e&&pe.createElement(pe.Fragment,null,pe.createElement(Gc,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:j},pe.createElement(K5,null)),pe.createElement(Gc,{onClick:b,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:L},pe.createElement(Y5,null))),n&&pe.createElement(Gc,{className:"react-flow__controls-fitview",onClick:T,title:"fit view","aria-label":"fit view"},pe.createElement(X5,null)),r&&pe.createElement(Gc,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity"},P?pe.createElement(Q5,null):pe.createElement(W5,null)),m)};F3.displayName="Controls";var J5=F.memo(F3),Br;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Br||(Br={}));function eO({color:t,dimensions:e,lineWidth:n}){return pe.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function tO({color:t,radius:e}){return pe.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const nO={[Br.Dots]:"#91919a",[Br.Lines]:"#eee",[Br.Cross]:"#e2e2e2"},rO={[Br.Dots]:1,[Br.Lines]:1,[Br.Cross]:6},iO=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function q3({id:t,variant:e=Br.Dots,gap:n=20,size:r,lineWidth:s=1,offset:o=2,color:l,style:c,className:f}){const h=F.useRef(null),{transform:m,patternId:_}=Ct(iO,Dn),w=l||nO[e],C=r||rO[e],M=e===Br.Dots,P=e===Br.Cross,L=Array.isArray(n)?n:[n,n],j=[L[0]*m[2]||1,L[1]*m[2]||1],H=C*m[2],K=P?[H,H]:j,y=M?[H/o,H/o]:[K[0]/o,K[1]/o];return pe.createElement("svg",{className:Fn(["react-flow__background",f]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:h,"data-testid":"rf__background"},pe.createElement("pattern",{id:_+t,x:m[0]%j[0],y:m[1]%j[1],width:j[0],height:j[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${y[0]},-${y[1]})`},M?pe.createElement(tO,{color:w,radius:H/o}):pe.createElement(eO,{dimensions:K,color:w,lineWidth:s})),pe.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${_+t})`}))}q3.displayName="Background";var sO=F.memo(q3);const em=F.createContext(null);em.displayName="PanelGroupContext";const Pt={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},i_=10,So=F.useLayoutEffect,sS=aD.useId,aO=typeof sS=="function"?sS:()=>null;let oO=0;function s_(t=null){const e=aO(),n=F.useRef(t||e||null);return n.current===null&&(n.current=""+oO++),t??n.current}function G3({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:s,forwardedRef:o,id:l,maxSize:c,minSize:f,onCollapse:h,onExpand:m,onResize:_,order:w,style:C,tagName:M="div",...P}){const L=F.useContext(em);if(L===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:j,expandPanel:H,getPanelSize:K,getPanelStyle:y,groupId:E,isPanelCollapsed:b,reevaluatePanelConstraints:T,registerPanel:A,resizePanel:R,unregisterPanel:k}=L,D=s_(l),$=F.useRef({callbacks:{onCollapse:h,onExpand:m,onResize:_},constraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:c,minSize:f},id:D,idIsFromProps:l!==void 0,order:w});F.useRef({didLogMissingDefaultSizeWarning:!1}),So(()=>{const{callbacks:U,constraints:Q}=$.current,x={...Q};$.current.id=D,$.current.idIsFromProps=l!==void 0,$.current.order=w,U.onCollapse=h,U.onExpand=m,U.onResize=_,Q.collapsedSize=n,Q.collapsible=r,Q.defaultSize=s,Q.maxSize=c,Q.minSize=f,(x.collapsedSize!==Q.collapsedSize||x.collapsible!==Q.collapsible||x.maxSize!==Q.maxSize||x.minSize!==Q.minSize)&&T($.current,x)}),So(()=>{const U=$.current;return A(U),()=>{k(U)}},[w,D,A,k]),F.useImperativeHandle(o,()=>({collapse:()=>{j($.current)},expand:U=>{H($.current,U)},getId(){return D},getSize(){return K($.current)},isCollapsed(){return b($.current)},isExpanded(){return!b($.current)},resize:U=>{R($.current,U)}}),[j,H,K,b,D,R]);const V=y($.current,s);return F.createElement(M,{...P,children:t,className:e,id:D,style:{...V,...C},[Pt.groupId]:E,[Pt.panel]:"",[Pt.panelCollapsible]:r||void 0,[Pt.panelId]:D,[Pt.panelSize]:parseFloat(""+V.flexGrow).toFixed(1)})}const H0=F.forwardRef((t,e)=>F.createElement(G3,{...t,forwardedRef:e}));G3.displayName="Panel";H0.displayName="forwardRef(Panel)";let $0=null,Xh=-1,sa=null;function lO(t,e){if(e){const n=(e&Q3)!==0,r=(e&Z3)!==0,s=(e&J3)!==0,o=(e&eC)!==0;if(n)return s?"se-resize":o?"ne-resize":"e-resize";if(r)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function uO(){sa!==null&&(document.head.removeChild(sa),$0=null,sa=null,Xh=-1)}function Yy(t,e){var n,r;const s=lO(t,e);if($0!==s){if($0=s,sa===null&&(sa=document.createElement("style"),document.head.appendChild(sa)),Xh>=0){var o;(o=sa.sheet)===null||o===void 0||o.removeRule(Xh)}Xh=(n=(r=sa.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function K3(t){return t.type==="keydown"}function Y3(t){return t.type.startsWith("pointer")}function X3(t){return t.type.startsWith("mouse")}function tm(t){if(Y3(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(X3(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function cO(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function dO(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function fO(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:lS(t),b:lS(e)};let r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;$e(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:oS(aS(n.a)),b:oS(aS(n.b))};if(s.a===s.b){const o=r.childNodes,l={a:n.a.at(-1),b:n.b.at(-1)};let c=o.length;for(;c--;){const f=o[c];if(f===l.a)return 1;if(f===l.b)return-1}}return Math.sign(s.a-s.b)}const hO=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function pO(t){var e;const n=getComputedStyle((e=W3(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function mO(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||pO(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||hO.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function aS(t){let e=t.length;for(;e--;){const n=t[e];if($e(n,"Missing node"),mO(n))return n}return null}function oS(t){return t&&Number(getComputedStyle(t).zIndex)||0}function lS(t){const e=[];for(;t;)e.push(t),t=W3(t);return e}function W3(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const Q3=1,Z3=2,J3=4,eC=8,gO=cO()==="coarse";let ni=[],ru=!1,aa=new Map,nm=new Map;const bd=new Set;function yO(t,e,n,r,s){var o;const{ownerDocument:l}=e,c={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:s},f=(o=aa.get(l))!==null&&o!==void 0?o:0;return aa.set(l,f+1),bd.add(c),wp(),function(){var m;nm.delete(t),bd.delete(c);const _=(m=aa.get(l))!==null&&m!==void 0?m:1;if(aa.set(l,_-1),wp(),_===1&&aa.delete(l),ni.includes(c)){const w=ni.indexOf(c);w>=0&&ni.splice(w,1),o_(),s("up",!0,null)}}}function vO(t){const{target:e}=t,{x:n,y:r}=tm(t);ru=!0,a_({target:e,x:n,y:r}),wp(),ni.length>0&&(bp("down",t),t.preventDefault(),tC(e)||t.stopImmediatePropagation())}function Xy(t){const{x:e,y:n}=tm(t);if(ru&&t.buttons===0&&(ru=!1,bp("up",t)),!ru){const{target:r}=t;a_({target:r,x:e,y:n})}bp("move",t),o_(),ni.length>0&&t.preventDefault()}function Wy(t){const{target:e}=t,{x:n,y:r}=tm(t);nm.clear(),ru=!1,ni.length>0&&(t.preventDefault(),tC(e)||t.stopImmediatePropagation()),bp("up",t),a_({target:e,x:n,y:r}),o_(),wp()}function tC(t){let e=t;for(;e;){if(e.hasAttribute(Pt.resizeHandle))return!0;e=e.parentElement}return!1}function a_({target:t,x:e,y:n}){ni.splice(0);let r=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(r=t),bd.forEach(s=>{const{element:o,hitAreaMargins:l}=s,c=o.getBoundingClientRect(),{bottom:f,left:h,right:m,top:_}=c,w=gO?l.coarse:l.fine;if(e>=h-w&&e<=m+w&&n>=_-w&&n<=f+w){if(r!==null&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&fO(r,o)>0){let M=r,P=!1;for(;M&&!M.contains(o);){if(dO(M.getBoundingClientRect(),c)){P=!0;break}M=M.parentElement}if(P)return}ni.push(s)}})}function Qy(t,e){nm.set(t,e)}function o_(){let t=!1,e=!1;ni.forEach(r=>{const{direction:s}=r;s==="horizontal"?t=!0:e=!0});let n=0;nm.forEach(r=>{n|=r}),t&&e?Yy("intersection",n):t?Yy("horizontal",n):e?Yy("vertical",n):uO()}let Zy;function wp(){var t;(t=Zy)===null||t===void 0||t.abort(),Zy=new AbortController;const e={capture:!0,signal:Zy.signal};bd.size&&(ru?(ni.length>0&&aa.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("contextmenu",Wy,e),s.addEventListener("pointerleave",Xy,e),s.addEventListener("pointermove",Xy,e))}),aa.forEach((n,r)=>{const{body:s}=r;s.addEventListener("pointerup",Wy,e),s.addEventListener("pointercancel",Wy,e)})):aa.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("pointerdown",vO,e),s.addEventListener("pointermove",Xy,e))}))}function bp(t,e){bd.forEach(n=>{const{setResizeHandlerState:r}=n,s=ni.includes(n);r(t,s,e)})}function _O(){const[t,e]=F.useState(0);return F.useCallback(()=>e(n=>n+1),[])}function $e(t,e){if(!t)throw console.error(e),Error(e)}function ko(t,e,n=i_){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function ps(t,e,n=i_){return ko(t,e,n)===0}function fr(t,e,n){return ko(t,e,n)===0}function wO(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const s=t[r],o=e[r];if(!fr(s,o,n))return!1}return!0}function Gl({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];$e(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:o,maxSize:l=100,minSize:c=0}=r;if(ko(n,c)<0)if(o){const f=(s+c)/2;ko(n,f)<0?n=s:n=c}else n=c;return n=Math.min(l,n),n=parseFloat(n.toFixed(i_)),n}function Kc({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:o}){if(fr(t,0))return e;const l=[...e],[c,f]=r;$e(c!=null,"Invalid first pivot index"),$e(f!=null,"Invalid second pivot index");let h=0;if(o==="keyboard"){{const _=t<0?f:c,w=n[_];$e(w,`Panel constraints not found for index ${_}`);const{collapsedSize:C=0,collapsible:M,minSize:P=0}=w;if(M){const L=e[_];if($e(L!=null,`Previous layout not found for panel index ${_}`),fr(L,C)){const j=P-L;ko(j,Math.abs(t))>0&&(t=t<0?0-j:j)}}}{const _=t<0?c:f,w=n[_];$e(w,`No panel constraints found for index ${_}`);const{collapsedSize:C=0,collapsible:M,minSize:P=0}=w;if(M){const L=e[_];if($e(L!=null,`Previous layout not found for panel index ${_}`),fr(L,P)){const j=L-C;ko(j,Math.abs(t))>0&&(t=t<0?0-j:j)}}}}{const _=t<0?1:-1;let w=t<0?f:c,C=0;for(;;){const P=e[w];$e(P!=null,`Previous layout not found for panel index ${w}`);const j=Gl({panelConstraints:n,panelIndex:w,size:100})-P;if(C+=j,w+=_,w<0||w>=n.length)break}const M=Math.min(Math.abs(t),Math.abs(C));t=t<0?0-M:M}{let w=t<0?c:f;for(;w>=0&&w<n.length;){const C=Math.abs(t)-Math.abs(h),M=e[w];$e(M!=null,`Previous layout not found for panel index ${w}`);const P=M-C,L=Gl({panelConstraints:n,panelIndex:w,size:P});if(!fr(M,L)&&(h+=M-L,l[w]=L,h.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?w--:w++}}if(wO(s,l))return s;{const _=t<0?f:c,w=e[_];$e(w!=null,`Previous layout not found for panel index ${_}`);const C=w+h,M=Gl({panelConstraints:n,panelIndex:_,size:C});if(l[_]=M,!fr(M,C)){let P=C-M,j=t<0?f:c;for(;j>=0&&j<n.length;){const H=l[j];$e(H!=null,`Previous layout not found for panel index ${j}`);const K=H+P,y=Gl({panelConstraints:n,panelIndex:j,size:K});if(fr(H,y)||(P-=y-H,l[j]=y),fr(P,0))break;t>0?j--:j++}}}const m=l.reduce((_,w)=>w+_,0);return fr(m,100)?l:s}function bO({layout:t,panelsArray:e,pivotIndices:n}){let r=0,s=100,o=0,l=0;const c=n[0];$e(c!=null,"No pivot index found"),e.forEach((_,w)=>{const{constraints:C}=_,{maxSize:M=100,minSize:P=0}=C;w===c?(r=P,s=M):(o+=P,l+=M)});const f=Math.min(s,100-o),h=Math.max(r,100-l),m=t[c];return{valueMax:f,valueMin:h,valueNow:m}}function Ed(t,e=document){return Array.from(e.querySelectorAll(`[${Pt.resizeHandleId}][data-panel-group-id="${t}"]`))}function nC(t,e,n=document){const s=Ed(t,n).findIndex(o=>o.getAttribute(Pt.resizeHandleId)===e);return s??null}function rC(t,e,n){const r=nC(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function EO(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function iC(t,e=document){if(EO(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function rm(t,e=document){const n=e.querySelector(`[${Pt.resizeHandleId}="${t}"]`);return n||null}function TO(t,e,n,r=document){var s,o,l,c;const f=rm(e,r),h=Ed(t,r),m=f?h.indexOf(f):-1,_=(s=(o=n[m])===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:null,w=(l=(c=n[m+1])===null||c===void 0?void 0:c.id)!==null&&l!==void 0?l:null;return[_,w]}function SO({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:s,panelGroupElement:o,setLayout:l}){F.useRef({didWarnAboutMissingResizeHandle:!1}),So(()=>{if(!o)return;const c=Ed(n,o);for(let f=0;f<s.length-1;f++){const{valueMax:h,valueMin:m,valueNow:_}=bO({layout:r,panelsArray:s,pivotIndices:[f,f+1]}),w=c[f];if(w!=null){const C=s[f];$e(C,`No panel data found for index "${f}"`),w.setAttribute("aria-controls",C.id),w.setAttribute("aria-valuemax",""+Math.round(h)),w.setAttribute("aria-valuemin",""+Math.round(m)),w.setAttribute("aria-valuenow",_!=null?""+Math.round(_):"")}}return()=>{c.forEach((f,h)=>{f.removeAttribute("aria-controls"),f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow")})}},[n,r,s,o]),F.useEffect(()=>{if(!o)return;const c=e.current;$e(c,"Eager values not found");const{panelDataArray:f}=c,h=iC(n,o);$e(h!=null,`No group found for id "${n}"`);const m=Ed(n,o);$e(m,`No resize handles found for group id "${n}"`);const _=m.map(w=>{const C=w.getAttribute(Pt.resizeHandleId);$e(C,"Resize handle element has no handle id attribute");const[M,P]=TO(n,C,f,o);if(M==null||P==null)return()=>{};const L=j=>{if(!j.defaultPrevented)switch(j.key){case"Enter":{j.preventDefault();const H=f.findIndex(K=>K.id===M);if(H>=0){const K=f[H];$e(K,`No panel data found for index ${H}`);const y=r[H],{collapsedSize:E=0,collapsible:b,minSize:T=0}=K.constraints;if(y!=null&&b){const A=Kc({delta:fr(y,E)?T-E:E-y,initialLayout:r,panelConstraints:f.map(R=>R.constraints),pivotIndices:rC(n,C,o),prevLayout:r,trigger:"keyboard"});r!==A&&l(A)}}break}}};return w.addEventListener("keydown",L),()=>{w.removeEventListener("keydown",L)}});return()=>{_.forEach(w=>w())}},[o,t,e,n,r,s,l])}function uS(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function sC(t,e){const n=t==="horizontal",{x:r,y:s}=tm(e);return n?r:s}function AO(t,e,n,r,s){const o=n==="horizontal",l=rm(e,s);$e(l,`No resize handle element found for id "${e}"`);const c=l.getAttribute(Pt.groupId);$e(c,"Resize handle element has no group id attribute");let{initialCursorPosition:f}=r;const h=sC(n,t),m=iC(c,s);$e(m,`No group element found for id "${c}"`);const _=m.getBoundingClientRect(),w=o?_.width:_.height;return(h-f)/w*100}function xO(t,e,n,r,s,o){if(K3(t)){const l=n==="horizontal";let c=0;t.shiftKey?c=100:s!=null?c=s:c=10;let f=0;switch(t.key){case"ArrowDown":f=l?0:c;break;case"ArrowLeft":f=l?-c:0;break;case"ArrowRight":f=l?c:0;break;case"ArrowUp":f=l?0:-c;break;case"End":f=100;break;case"Home":f=-100;break}return f}else return r==null?0:AO(t,e,n,r,o)}function CO({panelDataArray:t}){const e=Array(t.length),n=t.map(o=>o.constraints);let r=0,s=100;for(let o=0;o<t.length;o++){const l=n[o];$e(l,`Panel constraints not found for index ${o}`);const{defaultSize:c}=l;c!=null&&(r++,e[o]=c,s-=c)}for(let o=0;o<t.length;o++){const l=n[o];$e(l,`Panel constraints not found for index ${o}`);const{defaultSize:c}=l;if(c!=null)continue;const f=t.length-r,h=s/f;r++,e[o]=h,s-=h}return e}function Ll(t,e,n){e.forEach((r,s)=>{const o=t[s];$e(o,`Panel data not found for index ${s}`);const{callbacks:l,constraints:c,id:f}=o,{collapsedSize:h=0,collapsible:m}=c,_=n[f];if(_==null||r!==_){n[f]=r;const{onCollapse:w,onExpand:C,onResize:M}=l;M&&M(r,_),m&&(w||C)&&(C&&(_==null||ps(_,h))&&!ps(r,h)&&C(),w&&(_==null||!ps(_,h))&&ps(r,h)&&w())}})}function Dh(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function RO({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:s,precision:o=3}){const l=n[s];let c;return l==null?c=t!=null?t.toPrecision(o):"1":r.length===1?c="1":c=l.toPrecision(o),{flexBasis:0,flexGrow:c,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function kO(t,e=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...s)},e)}}function cS(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function aC(t){return`react-resizable-panels:${t}`}function oC(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:s,order:o}=e;return s?r:o?`${o}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function lC(t,e){try{const n=aC(t),r=e.getItem(n);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function IO(t,e,n){var r,s;const o=(r=lC(t,n))!==null&&r!==void 0?r:{},l=oC(e);return(s=o[l])!==null&&s!==void 0?s:null}function NO(t,e,n,r,s){var o;const l=aC(t),c=oC(e),f=(o=lC(t,s))!==null&&o!==void 0?o:{};f[c]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(l,JSON.stringify(f))}catch(h){console.error(h)}}function dS({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((o,l)=>o+l,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(o=>`${o}%`).join(", ")}`);if(!fr(r,100)&&n.length>0)for(let o=0;o<e.length;o++){const l=n[o];$e(l!=null,`No layout data found for index ${o}`);const c=100/r*l;n[o]=c}let s=0;for(let o=0;o<e.length;o++){const l=n[o];$e(l!=null,`No layout data found for index ${o}`);const c=Gl({panelConstraints:e,panelIndex:o,size:l});l!=c&&(s+=l-c,n[o]=c)}if(!fr(s,0))for(let o=0;o<e.length;o++){const l=n[o];$e(l!=null,`No layout data found for index ${o}`);const c=l+s,f=Gl({panelConstraints:e,panelIndex:o,size:c});if(l!==f&&(s-=f-l,n[o]=f,fr(s,0)))break}return n}const DO=100,Yc={getItem:t=>(cS(Yc),Yc.getItem(t)),setItem:(t,e)=>{cS(Yc),Yc.setItem(t,e)}},fS={};function uC({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:s,id:o=null,onLayout:l=null,keyboardResizeBy:c=null,storage:f=Yc,style:h,tagName:m="div",..._}){const w=s_(o),C=F.useRef(null),[M,P]=F.useState(null),[L,j]=F.useState([]),H=_O(),K=F.useRef({}),y=F.useRef(new Map),E=F.useRef(0),b=F.useRef({autoSaveId:t,direction:r,dragState:M,id:w,keyboardResizeBy:c,onLayout:l,storage:f}),T=F.useRef({layout:L,panelDataArray:[],panelDataArrayChanged:!1});F.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),F.useImperativeHandle(s,()=>({getId:()=>b.current.id,getLayout:()=>{const{layout:Z}=T.current;return Z},setLayout:Z=>{const{onLayout:ne}=b.current,{layout:oe,panelDataArray:ce}=T.current,fe=dS({layout:Z,panelConstraints:ce.map(ge=>ge.constraints)});uS(oe,fe)||(j(fe),T.current.layout=fe,ne&&ne(fe),Ll(ce,fe,K.current))}}),[]),So(()=>{b.current.autoSaveId=t,b.current.direction=r,b.current.dragState=M,b.current.id=w,b.current.onLayout=l,b.current.storage=f}),SO({committedValuesRef:b,eagerValuesRef:T,groupId:w,layout:L,panelDataArray:T.current.panelDataArray,setLayout:j,panelGroupElement:C.current}),F.useEffect(()=>{const{panelDataArray:Z}=T.current;if(t){if(L.length===0||L.length!==Z.length)return;let ne=fS[t];ne==null&&(ne=kO(NO,DO),fS[t]=ne);const oe=[...Z],ce=new Map(y.current);ne(t,oe,ce,L,f)}},[t,L,f]),F.useEffect(()=>{});const A=F.useCallback(Z=>{const{onLayout:ne}=b.current,{layout:oe,panelDataArray:ce}=T.current;if(Z.constraints.collapsible){const fe=ce.map(Ue=>Ue.constraints),{collapsedSize:ge=0,panelSize:Ae,pivotIndices:xe}=co(ce,Z,oe);if($e(Ae!=null,`Panel size not found for panel "${Z.id}"`),!ps(Ae,ge)){y.current.set(Z.id,Ae);const Ne=Ul(ce,Z)===ce.length-1?Ae-ge:ge-Ae,Le=Kc({delta:Ne,initialLayout:oe,panelConstraints:fe,pivotIndices:xe,prevLayout:oe,trigger:"imperative-api"});Dh(oe,Le)||(j(Le),T.current.layout=Le,ne&&ne(Le),Ll(ce,Le,K.current))}}},[]),R=F.useCallback((Z,ne)=>{const{onLayout:oe}=b.current,{layout:ce,panelDataArray:fe}=T.current;if(Z.constraints.collapsible){const ge=fe.map(rt=>rt.constraints),{collapsedSize:Ae=0,panelSize:xe=0,minSize:Ue=0,pivotIndices:Ne}=co(fe,Z,ce),Le=ne??Ue;if(ps(xe,Ae)){const rt=y.current.get(Z.id),st=rt!=null&&rt>=Le?rt:Le,Be=Ul(fe,Z)===fe.length-1?xe-st:st-xe,be=Kc({delta:Be,initialLayout:ce,panelConstraints:ge,pivotIndices:Ne,prevLayout:ce,trigger:"imperative-api"});Dh(ce,be)||(j(be),T.current.layout=be,oe&&oe(be),Ll(fe,be,K.current))}}},[]),k=F.useCallback(Z=>{const{layout:ne,panelDataArray:oe}=T.current,{panelSize:ce}=co(oe,Z,ne);return $e(ce!=null,`Panel size not found for panel "${Z.id}"`),ce},[]),D=F.useCallback((Z,ne)=>{const{panelDataArray:oe}=T.current,ce=Ul(oe,Z);return RO({defaultSize:ne,dragState:M,layout:L,panelData:oe,panelIndex:ce})},[M,L]),$=F.useCallback(Z=>{const{layout:ne,panelDataArray:oe}=T.current,{collapsedSize:ce=0,collapsible:fe,panelSize:ge}=co(oe,Z,ne);return $e(ge!=null,`Panel size not found for panel "${Z.id}"`),fe===!0&&ps(ge,ce)},[]),V=F.useCallback(Z=>{const{layout:ne,panelDataArray:oe}=T.current,{collapsedSize:ce=0,collapsible:fe,panelSize:ge}=co(oe,Z,ne);return $e(ge!=null,`Panel size not found for panel "${Z.id}"`),!fe||ko(ge,ce)>0},[]),U=F.useCallback(Z=>{const{panelDataArray:ne}=T.current;ne.push(Z),ne.sort((oe,ce)=>{const fe=oe.order,ge=ce.order;return fe==null&&ge==null?0:fe==null?-1:ge==null?1:fe-ge}),T.current.panelDataArrayChanged=!0,H()},[H]);So(()=>{if(T.current.panelDataArrayChanged){T.current.panelDataArrayChanged=!1;const{autoSaveId:Z,onLayout:ne,storage:oe}=b.current,{layout:ce,panelDataArray:fe}=T.current;let ge=null;if(Z){const xe=IO(Z,fe,oe);xe&&(y.current=new Map(Object.entries(xe.expandToSizes)),ge=xe.layout)}ge==null&&(ge=CO({panelDataArray:fe}));const Ae=dS({layout:ge,panelConstraints:fe.map(xe=>xe.constraints)});uS(ce,Ae)||(j(Ae),T.current.layout=Ae,ne&&ne(Ae),Ll(fe,Ae,K.current))}}),So(()=>{const Z=T.current;return()=>{Z.layout=[]}},[]);const Q=F.useCallback(Z=>{let ne=!1;const oe=C.current;return oe&&window.getComputedStyle(oe,null).getPropertyValue("direction")==="rtl"&&(ne=!0),function(fe){fe.preventDefault();const ge=C.current;if(!ge)return()=>null;const{direction:Ae,dragState:xe,id:Ue,keyboardResizeBy:Ne,onLayout:Le}=b.current,{layout:rt,panelDataArray:st}=T.current,{initialLayout:Ht}=xe??{},Be=rC(Ue,Z,ge);let be=xO(fe,Z,Ae,xe,Ne,ge);const kt=Ae==="horizontal";kt&&ne&&(be=-be);const An=st.map(Pn=>Pn.constraints),Qt=Kc({delta:be,initialLayout:Ht??rt,panelConstraints:An,pivotIndices:Be,prevLayout:rt,trigger:K3(fe)?"keyboard":"mouse-or-touch"}),er=!Dh(rt,Qt);(Y3(fe)||X3(fe))&&E.current!=be&&(E.current=be,!er&&be!==0?kt?Qy(Z,be<0?Q3:Z3):Qy(Z,be<0?J3:eC):Qy(Z,0)),er&&(j(Qt),T.current.layout=Qt,Le&&Le(Qt),Ll(st,Qt,K.current))}},[]),x=F.useCallback((Z,ne)=>{const{onLayout:oe}=b.current,{layout:ce,panelDataArray:fe}=T.current,ge=fe.map(rt=>rt.constraints),{panelSize:Ae,pivotIndices:xe}=co(fe,Z,ce);$e(Ae!=null,`Panel size not found for panel "${Z.id}"`);const Ne=Ul(fe,Z)===fe.length-1?Ae-ne:ne-Ae,Le=Kc({delta:Ne,initialLayout:ce,panelConstraints:ge,pivotIndices:xe,prevLayout:ce,trigger:"imperative-api"});Dh(ce,Le)||(j(Le),T.current.layout=Le,oe&&oe(Le),Ll(fe,Le,K.current))},[]),B=F.useCallback((Z,ne)=>{const{layout:oe,panelDataArray:ce}=T.current,{collapsedSize:fe=0,collapsible:ge}=ne,{collapsedSize:Ae=0,collapsible:xe,maxSize:Ue=100,minSize:Ne=0}=Z.constraints,{panelSize:Le}=co(ce,Z,oe);Le!=null&&(ge&&xe&&ps(Le,fe)?ps(fe,Ae)||x(Z,Ae):Le<Ne?x(Z,Ne):Le>Ue&&x(Z,Ue))},[x]),G=F.useCallback((Z,ne)=>{const{direction:oe}=b.current,{layout:ce}=T.current;if(!C.current)return;const fe=rm(Z,C.current);$e(fe,`Drag handle element not found for id "${Z}"`);const ge=sC(oe,ne);P({dragHandleId:Z,dragHandleRect:fe.getBoundingClientRect(),initialCursorPosition:ge,initialLayout:ce})},[]),X=F.useCallback(()=>{P(null)},[]),z=F.useCallback(Z=>{const{panelDataArray:ne}=T.current,oe=Ul(ne,Z);oe>=0&&(ne.splice(oe,1),delete K.current[Z.id],T.current.panelDataArrayChanged=!0,H())},[H]),W=F.useMemo(()=>({collapsePanel:A,direction:r,dragState:M,expandPanel:R,getPanelSize:k,getPanelStyle:D,groupId:w,isPanelCollapsed:$,isPanelExpanded:V,reevaluatePanelConstraints:B,registerPanel:U,registerResizeHandle:Q,resizePanel:x,startDragging:G,stopDragging:X,unregisterPanel:z,panelGroupElement:C.current}),[A,M,r,R,k,D,w,$,V,B,U,Q,x,G,X,z]),ee={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return F.createElement(em.Provider,{value:W},F.createElement(m,{..._,children:e,className:n,id:o,ref:C,style:{...ee,...h},[Pt.group]:"",[Pt.groupDirection]:r,[Pt.groupId]:w}))}const cC=F.forwardRef((t,e)=>F.createElement(uC,{...t,forwardedRef:e}));uC.displayName="PanelGroup";cC.displayName="forwardRef(PanelGroup)";function Ul(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function co(t,e,n){const r=Ul(t,e),o=r===t.length-1?[r-1,r]:[r,r+1],l=n[r];return{...e.constraints,panelSize:l,pivotIndices:o}}function MO({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){F.useEffect(()=>{if(t||n==null||r==null)return;const s=rm(e,r);if(s==null)return;const o=l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{l.preventDefault(),n(l);break}case"F6":{l.preventDefault();const c=s.getAttribute(Pt.groupId);$e(c,`No group element found for id "${c}"`);const f=Ed(c,r),h=nC(c,e,r);$e(h!==null,`No resize element found for id "${e}"`);const m=l.shiftKey?h>0?h-1:f.length-1:h+1<f.length?h+1:0;f[m].focus();break}}};return s.addEventListener("keydown",o),()=>{s.removeEventListener("keydown",o)}},[r,t,e,n])}function dC({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:s,onBlur:o,onClick:l,onDragging:c,onFocus:f,onPointerDown:h,onPointerUp:m,style:_={},tabIndex:w=0,tagName:C="div",...M}){var P,L;const j=F.useRef(null),H=F.useRef({onClick:l,onDragging:c,onPointerDown:h,onPointerUp:m});F.useEffect(()=>{H.current.onClick=l,H.current.onDragging=c,H.current.onPointerDown=h,H.current.onPointerUp=m});const K=F.useContext(em);if(K===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:y,groupId:E,registerResizeHandle:b,startDragging:T,stopDragging:A,panelGroupElement:R}=K,k=s_(s),[D,$]=F.useState("inactive"),[V,U]=F.useState(!1),[Q,x]=F.useState(null),B=F.useRef({state:D});So(()=>{B.current.state=D}),F.useEffect(()=>{if(n)x(null);else{const W=b(k);x(()=>W)}},[n,k,b]);const G=(P=r?.coarse)!==null&&P!==void 0?P:15,X=(L=r?.fine)!==null&&L!==void 0?L:5;F.useEffect(()=>{if(n||Q==null)return;const W=j.current;$e(W,"Element ref not attached");let ee=!1;return yO(k,W,y,{coarse:G,fine:X},(ne,oe,ce)=>{if(!oe){$("inactive");return}switch(ne){case"down":{$("drag"),ee=!1,$e(ce,'Expected event to be defined for "down" action'),T(k,ce);const{onDragging:fe,onPointerDown:ge}=H.current;fe?.(!0),ge?.();break}case"move":{const{state:fe}=B.current;ee=!0,fe!=="drag"&&$("hover"),$e(ce,'Expected event to be defined for "move" action'),Q(ce);break}case"up":{$("hover"),A();const{onClick:fe,onDragging:ge,onPointerUp:Ae}=H.current;ge?.(!1),Ae?.(),ee||fe?.();break}}})},[G,y,n,X,b,k,Q,T,A]),MO({disabled:n,handleId:k,resizeHandler:Q,panelGroupElement:R});const z={touchAction:"none",userSelect:"none"};return F.createElement(C,{...M,children:t,className:e,id:s,onBlur:()=>{U(!1),o?.()},onFocus:()=>{U(!0),f?.()},ref:j,role:"separator",style:{...z,..._},tabIndex:w,[Pt.groupDirection]:y,[Pt.groupId]:E,[Pt.resizeHandle]:"",[Pt.resizeHandleActive]:D==="drag"?"pointer":V?"keyboard":void 0,[Pt.resizeHandleEnabled]:!n,[Pt.resizeHandleId]:k,[Pt.resizeHandleState]:D})}dC.displayName="PanelResizeHandle";const PO=t=>{const e=[],n=t.split("_");for(let r=0;r<n.length;r++)if(r%2===0)n[r].split(/\s+/).filter(o=>o.trim()!=="").forEach(o=>{e.push({word:o.trim()})});else{const s=n[r].trim();s.split(/\s+/).filter(l=>l.trim()!=="").forEach(l=>{e.push({word:l.trim(),myConcept:s})})}return e},hS=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},pS=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.slice(1):t,r=parseInt(n.slice(0,2),16),s=parseInt(n.slice(2,4),16),o=parseInt(n.slice(4,6),16);const l=f=>Math.max(0,Math.min(255,f)),c=1-e;return r=l(Math.round(r*c)),s=l(Math.round(s*c)),o=l(Math.round(o*c)),`#${[r,s,o].map(f=>f.toString(16).padStart(2,"0")).join("")}`},OO=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16),o=30,l=Math.min(255,Math.max(0,n+(Math.random()-.5)*o*2)),c=Math.min(255,Math.max(0,r+(Math.random()-.5)*o*2)),f=Math.min(255,Math.max(0,s+(Math.random()-.5)*o*2));return`#${Math.round(l).toString(16).padStart(2,"0")}${Math.round(c).toString(16).padStart(2,"0")}${Math.round(f).toString(16).padStart(2,"0")}`},VO=t=>{const s=(Math.random()-.5)*400*2,o=(Math.random()-.5)*30*2;return{x:t.x+s,y:t.y+650+o}},LO=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,zO=(t,e)=>`edge_${t}_${e}`,jO=(t,e,n,r,s,o,l)=>({id:LO(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:r,full_text:n,suggestions:[],myColor:s,tokenColors:{},previousNode:l}}),UO=(t,e,n,r)=>({id:zO(t,e),source:t,target:e,sourceHandle:r,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:Ro.ArrowClosed,color:n}}),BO="modulepreload",HO=function(t){return"/"+t},mS={},fC=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let f=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");s=f(n.map(h=>{if(h=HO(h),h in mS)return;mS[h]=!0;const m=h.endsWith(".css"),_=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${_}`))return;const w=document.createElement("link");if(w.rel=m?"stylesheet":BO,m||(w.as="script"),w.crossOrigin="",w.href=h,c&&w.setAttribute("nonce",c),document.head.appendChild(w),m)return new Promise((C,M)=>{w.addEventListener("load",C),w.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},$O=()=>{};var gS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},FO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],c=t[n++],f=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},pC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,c=l?t[s+1]:0,f=s+2<t.length,h=f?t[s+2]:0,m=o>>2,_=(o&3)<<4|c>>4;let w=(c&15)<<2|h>>6,C=h&63;f||(C=64,l||(w=64)),r.push(n[m],n[_],n[w],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const _=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||c==null||h==null||_==null)throw new qO;const w=o<<2|c>>4;if(r.push(w),h!==64){const C=c<<4&240|h>>2;if(r.push(C),_!==64){const M=h<<6&192|_;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GO=function(t){const e=hC(t);return pC.encodeByteArray(e,!0)},Ep=function(t){return GO(t).replace(/\./g,"")},mC=function(t){try{return pC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=()=>KO().__FIREBASE_DEFAULTS__,XO=()=>{if(typeof process>"u"||typeof gS>"u")return;const t=gS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},WO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mC(t[1]);return e&&JSON.parse(e)},im=()=>{try{return $O()||YO()||XO()||WO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gC=t=>{var e,n;return(n=(e=im())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yC=t=>{const e=gC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},vC=()=>{var t;return(t=im())===null||t===void 0?void 0:t.config},_C=t=>{var e;return(e=im())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t){return t.endsWith(".cloudworkstations.dev")}async function l_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ep(JSON.stringify(n)),Ep(JSON.stringify(l)),""].join(".")}const td={};function JO(){const t={prod:[],emulator:[]};for(const e of Object.keys(td))td[e]?t.emulator.push(e):t.prod.push(e);return t}function eV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let yS=!1;function u_(t,e){if(typeof window>"u"||typeof document>"u"||!zo(window.location.host)||td[t]===e||td[t]||yS)return;td[t]=e;function n(w){return`__firebase__banner__${w}`}const r="__firebase__banner",o=JO().prod.length>0;function l(){const w=document.getElementById(r);w&&w.remove()}function c(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function f(w,C){w.setAttribute("width","24"),w.setAttribute("id",C),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function h(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{yS=!0,l()},w}function m(w,C){w.setAttribute("id",C),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function _(){const w=eV(r),C=n("text"),M=document.getElementById(C)||document.createElement("span"),P=n("learnmore"),L=document.getElementById(P)||document.createElement("a"),j=n("preprendIcon"),H=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const K=w.element;c(K),m(L,P);const y=h();f(H,j),K.append(H,M,L,y),document.body.appendChild(K)}o?(M.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mn())}function nV(){var t;const e=(t=im())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aV(){const t=Mn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function oV(){return!nV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lV(){try{return typeof indexedDB=="object"}catch{return!1}}function uV(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV="FirebaseError";class Hi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cV,Object.setPrototypeOf(this,Hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qd.prototype.create)}}class qd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?dV(o,r):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new Hi(s,c,r)}}function dV(t,e){return t.replace(fV,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const fV=/\{\$([^}]+)}/g;function hV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Io(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],l=e[s];if(vS(o)&&vS(l)){if(!Io(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function vS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Wc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function pV(t,e){const n=new mV(t,e);return n.subscribe.bind(n)}class mV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gV(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Jy),s.error===void 0&&(s.error=Jy),s.complete===void 0&&(s.complete=Jy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class wa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new QO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_V(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vV(t){return t===mo?void 0:t}function _V(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qe||(Qe={}));const bV={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},EV=Qe.INFO,TV={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},SV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=TV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class c_{constructor(e){this.name=e,this._logLevel=EV,this._logHandler=SV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const AV=(t,e)=>e.some(n=>t instanceof n);let _S,wS;function xV(){return _S||(_S=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CV(){return wS||(wS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wC=new WeakMap,F0=new WeakMap,bC=new WeakMap,e0=new WeakMap,d_=new WeakMap;function RV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(pa(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&wC.set(n,t)}).catch(()=>{}),d_.set(e,t),e}function kV(t){if(F0.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});F0.set(t,e)}let q0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return F0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IV(t){q0=t(q0)}function NV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(t0(this),e,...n);return bC.set(r,e.sort?e.sort():[e]),pa(r)}:CV().includes(t)?function(...e){return t.apply(t0(this),e),pa(wC.get(this))}:function(...e){return pa(t.apply(t0(this),e))}}function DV(t){return typeof t=="function"?NV(t):(t instanceof IDBTransaction&&kV(t),AV(t,xV())?new Proxy(t,q0):t)}function pa(t){if(t instanceof IDBRequest)return RV(t);if(e0.has(t))return e0.get(t);const e=DV(t);return e!==t&&(e0.set(t,e),d_.set(e,t)),e}const t0=t=>d_.get(t);function MV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),c=pa(l);return r&&l.addEventListener("upgradeneeded",f=>{r(pa(l.result),f.oldVersion,f.newVersion,pa(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),c.then(f=>{o&&f.addEventListener("close",()=>o()),s&&f.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const PV=["get","getKey","getAll","getAllKeys","count"],OV=["put","add","delete","clear"],n0=new Map;function bS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(n0.get(e))return n0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=OV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||PV.includes(n)))return;const o=async function(l,...c){const f=this.transaction(l,s?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&f.done]))[0]};return n0.set(e,o),o}IV(t=>({...t,get:(e,n,r)=>bS(e,n)||t.get(e,n,r),has:(e,n)=>!!bS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(LV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function LV(t){const e=t.getComponent();return e?.type==="VERSION"}const G0="@firebase/app",ES="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new c_("@firebase/app"),zV="@firebase/app-compat",jV="@firebase/analytics-compat",UV="@firebase/analytics",BV="@firebase/app-check-compat",HV="@firebase/app-check",$V="@firebase/auth",FV="@firebase/auth-compat",qV="@firebase/database",GV="@firebase/data-connect",KV="@firebase/database-compat",YV="@firebase/functions",XV="@firebase/functions-compat",WV="@firebase/installations",QV="@firebase/installations-compat",ZV="@firebase/messaging",JV="@firebase/messaging-compat",eL="@firebase/performance",tL="@firebase/performance-compat",nL="@firebase/remote-config",rL="@firebase/remote-config-compat",iL="@firebase/storage",sL="@firebase/storage-compat",aL="@firebase/firestore",oL="@firebase/ai",lL="@firebase/firestore-compat",uL="firebase",cL="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="[DEFAULT]",dL={[G0]:"fire-core",[zV]:"fire-core-compat",[UV]:"fire-analytics",[jV]:"fire-analytics-compat",[HV]:"fire-app-check",[BV]:"fire-app-check-compat",[$V]:"fire-auth",[FV]:"fire-auth-compat",[qV]:"fire-rtdb",[GV]:"fire-data-connect",[KV]:"fire-rtdb-compat",[YV]:"fire-fn",[XV]:"fire-fn-compat",[WV]:"fire-iid",[QV]:"fire-iid-compat",[ZV]:"fire-fcm",[JV]:"fire-fcm-compat",[eL]:"fire-perf",[tL]:"fire-perf-compat",[nL]:"fire-rc",[rL]:"fire-rc-compat",[iL]:"fire-gcs",[sL]:"fire-gcs-compat",[aL]:"fire-fst",[lL]:"fire-fst-compat",[oL]:"fire-vertex","fire-js":"fire-js",[uL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp=new Map,fL=new Map,Y0=new Map;function TS(t,e){try{t.container.addComponent(e)}catch(n){bs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function No(t){const e=t.name;if(Y0.has(e))return bs.debug(`There were multiple attempts to register component ${e}.`),!1;Y0.set(e,t);for(const n of Tp.values())TS(n,t);for(const n of fL.values())TS(n,t);return!0}function sm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ma=new qd("app","Firebase",hL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ma.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=cL;function EC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:K0,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw ma.create("bad-app-name",{appName:String(s)});if(n||(n=vC()),!n)throw ma.create("no-options");const o=Tp.get(s);if(o){if(Io(n,o.options)&&Io(r,o.config))return o;throw ma.create("duplicate-app",{appName:s})}const l=new wV(s);for(const f of Y0.values())l.addComponent(f);const c=new pL(n,r,l);return Tp.set(s,c),c}function f_(t=K0){const e=Tp.get(t);if(!e&&t===K0&&vC())return EC();if(!e)throw ma.create("no-app",{appName:t});return e}function Di(t,e,n){var r;let s=(r=dL[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bs.warn(c.join(" "));return}No(new wa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL="firebase-heartbeat-database",gL=1,Td="firebase-heartbeat-store";let r0=null;function TC(){return r0||(r0=MV(mL,gL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Td)}catch(n){console.warn(n)}}}}).catch(t=>{throw ma.create("idb-open",{originalErrorMessage:t.message})})),r0}async function yL(t){try{const n=(await TC()).transaction(Td),r=await n.objectStore(Td).get(SC(t));return await n.done,r}catch(e){if(e instanceof Hi)bs.warn(e.message);else{const n=ma.create("idb-get",{originalErrorMessage:e?.message});bs.warn(n.message)}}}async function SS(t,e){try{const r=(await TC()).transaction(Td,"readwrite");await r.objectStore(Td).put(e,SC(t)),await r.done}catch(n){if(n instanceof Hi)bs.warn(n.message);else{const r=ma.create("idb-set",{originalErrorMessage:n?.message});bs.warn(r.message)}}}function SC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL=1024,_L=30;class wL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new EL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=AS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>_L){const l=TL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){bs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=AS(),{heartbeatsToSend:r,unsentEntries:s}=bL(this._heartbeatsCache.heartbeats),o=Ep(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return bs.warn(n),""}}}function AS(){return new Date().toISOString().substring(0,10)}function bL(t,e=vL){const n=[];let r=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),xS(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),xS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class EL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lV()?uV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return SS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return SS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function xS(t){return Ep(JSON.stringify({version:2,heartbeats:t})).length}function TL(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(t){No(new wa("platform-logger",e=>new VV(e),"PRIVATE")),No(new wa("heartbeat",e=>new wL(e),"PRIVATE")),Di(G0,ES,t),Di(G0,ES,"esm2017"),Di("fire-js","")}SL("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL="type.googleapis.com/google.protobuf.Int64Value",xL="type.googleapis.com/google.protobuf.UInt64Value";function AC(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Sp(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Sp(e));if(typeof t=="function"||typeof t=="object")return AC(t,e=>Sp(e));throw new Error("Data cannot be encoded in JSON: "+t)}function fu(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case AL:case xL:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>fu(e)):typeof t=="function"||typeof t=="object"?AC(t,e=>fu(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zn extends Hi{constructor(e,n,r){super(`${h_}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Zn.prototype)}}function CL(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Ap(t,e){let n=CL(t),r=n,s;try{const o=e&&e.error;if(o){const l=o.status;if(typeof l=="string"){if(!CS[l])return new Zn("internal","internal");n=CS[l],r=l}const c=o.message;typeof c=="string"&&(r=c),s=o.details,s!==void 0&&(s=fu(s))}}catch{}return n==="ok"?null:new Zn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,pr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="us-central1",kL=/^data: (.*?)(?:\n|$)/;function IL(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Zn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class NL{constructor(e,n,r,s,o=X0,l=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new RL(e,n,r,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=X0}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function DL(t,e,n){const r=zo(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(l_(t.emulatorOrigin),u_("Functions",!0))}function ML(t,e,n){const r=s=>OL(t,e,s,{});return r.stream=(s,o)=>LL(t,e,s,o),r}async function PL(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function xC(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function OL(t,e,n,r){const s=t._url(e);return VL(t,s,n,r)}async function VL(t,e,n,r){n=Sp(n);const s={data:n},o=await xC(t,r),l=r.timeout||7e4,c=IL(l),f=await Promise.race([PL(e,s,o,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!f)throw new Zn("cancelled","Firebase Functions instance was deleted.");const h=Ap(f.status,f.json);if(h)throw h;if(!f.json)throw new Zn("internal","Response is not valid JSON object.");let m=f.json.data;if(typeof m>"u"&&(m=f.json.result),typeof m>"u")throw new Zn("internal","Response is missing data field.");return{data:fu(m)}}function LL(t,e,n,r){const s=t._url(e);return zL(t,s,n,r||{})}async function zL(t,e,n,r){var s;n=Sp(n);const o={data:n},l=await xC(t,r);l["Content-Type"]="application/json",l.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:l,signal:r?.signal})}catch(C){if(C instanceof Error&&C.name==="AbortError"){const P=new Zn("cancelled","Request was cancelled.");return{data:Promise.reject(P),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(P)}}}}}}const M=Ap(0,null);return{data:Promise.reject(M),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(M)}}}}}}let f,h;const m=new Promise((C,M)=>{f=C,h=M});(s=r?.signal)===null||s===void 0||s.addEventListener("abort",()=>{const C=new Zn("cancelled","Request was cancelled.");h(C)});const _=c.body.getReader(),w=jL(_,f,h,r?.signal);return{stream:{[Symbol.asyncIterator](){const C=w.getReader();return{async next(){const{value:M,done:P}=await C.read();return{value:M,done:P}},async return(){return await C.cancel(),{done:!0,value:void 0}}}}},data:m}}function jL(t,e,n,r){const s=(l,c)=>{const f=l.match(kL);if(!f)return;const h=f[1];try{const m=JSON.parse(h);if("result"in m){e(fu(m.result));return}if("message"in m){c.enqueue(fu(m.message));return}if("error"in m){const _=Ap(0,m);c.error(_),n(_);return}}catch(m){if(m instanceof Zn){c.error(m),n(m);return}}},o=new TextDecoder;return new ReadableStream({start(l){let c="";return f();async function f(){if(r?.aborted){const h=new Zn("cancelled","Request was cancelled");return l.error(h),n(h),Promise.resolve()}try{const{value:h,done:m}=await t.read();if(m){c.trim()&&s(c.trim(),l),l.close();return}if(r?.aborted){const w=new Zn("cancelled","Request was cancelled");l.error(w),n(w),await t.cancel();return}c+=o.decode(h,{stream:!0});const _=c.split(`
`);c=_.pop()||"";for(const w of _)w.trim()&&s(w.trim(),l);return f()}catch(h){const m=h instanceof Zn?h:Ap(0,null);l.error(m),n(m)}}},cancel(){return t.cancel()}})}const RS="@firebase/functions",kS="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL="auth-internal",BL="app-check-internal",HL="messaging-internal";function $L(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider(UL),l=n.getProvider(HL),c=n.getProvider(BL);return new NL(s,o,l,c,r)};No(new wa(h_,e,"PUBLIC").setMultipleInstances(!0)),Di(RS,kS,t),Di(RS,kS,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(t=f_(),e=X0){const r=sm(Vt(t),h_).getImmediate({identifier:e}),s=yC("functions");return s&&qL(r,...s),r}function qL(t,e,n){DL(Vt(t),e,n)}function GL(t,e,n){return ML(Vt(t),e)}$L();var KL="firebase",YL="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Di(KL,YL,"app");var IS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ga,CC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,A){function R(){}R.prototype=A.prototype,T.D=A.prototype,T.prototype=new R,T.prototype.constructor=T,T.C=function(k,D,$){for(var V=Array(arguments.length-2),U=2;U<arguments.length;U++)V[U-2]=arguments[U];return A.prototype[D].apply(k,V)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,A,R){R||(R=0);var k=Array(16);if(typeof A=="string")for(var D=0;16>D;++D)k[D]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(D=0;16>D;++D)k[D]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=T.g[0],R=T.g[1],D=T.g[2];var $=T.g[3],V=A+($^R&(D^$))+k[0]+3614090360&4294967295;A=R+(V<<7&4294967295|V>>>25),V=$+(D^A&(R^D))+k[1]+3905402710&4294967295,$=A+(V<<12&4294967295|V>>>20),V=D+(R^$&(A^R))+k[2]+606105819&4294967295,D=$+(V<<17&4294967295|V>>>15),V=R+(A^D&($^A))+k[3]+3250441966&4294967295,R=D+(V<<22&4294967295|V>>>10),V=A+($^R&(D^$))+k[4]+4118548399&4294967295,A=R+(V<<7&4294967295|V>>>25),V=$+(D^A&(R^D))+k[5]+1200080426&4294967295,$=A+(V<<12&4294967295|V>>>20),V=D+(R^$&(A^R))+k[6]+2821735955&4294967295,D=$+(V<<17&4294967295|V>>>15),V=R+(A^D&($^A))+k[7]+4249261313&4294967295,R=D+(V<<22&4294967295|V>>>10),V=A+($^R&(D^$))+k[8]+1770035416&4294967295,A=R+(V<<7&4294967295|V>>>25),V=$+(D^A&(R^D))+k[9]+2336552879&4294967295,$=A+(V<<12&4294967295|V>>>20),V=D+(R^$&(A^R))+k[10]+4294925233&4294967295,D=$+(V<<17&4294967295|V>>>15),V=R+(A^D&($^A))+k[11]+2304563134&4294967295,R=D+(V<<22&4294967295|V>>>10),V=A+($^R&(D^$))+k[12]+1804603682&4294967295,A=R+(V<<7&4294967295|V>>>25),V=$+(D^A&(R^D))+k[13]+4254626195&4294967295,$=A+(V<<12&4294967295|V>>>20),V=D+(R^$&(A^R))+k[14]+2792965006&4294967295,D=$+(V<<17&4294967295|V>>>15),V=R+(A^D&($^A))+k[15]+1236535329&4294967295,R=D+(V<<22&4294967295|V>>>10),V=A+(D^$&(R^D))+k[1]+4129170786&4294967295,A=R+(V<<5&4294967295|V>>>27),V=$+(R^D&(A^R))+k[6]+3225465664&4294967295,$=A+(V<<9&4294967295|V>>>23),V=D+(A^R&($^A))+k[11]+643717713&4294967295,D=$+(V<<14&4294967295|V>>>18),V=R+($^A&(D^$))+k[0]+3921069994&4294967295,R=D+(V<<20&4294967295|V>>>12),V=A+(D^$&(R^D))+k[5]+3593408605&4294967295,A=R+(V<<5&4294967295|V>>>27),V=$+(R^D&(A^R))+k[10]+38016083&4294967295,$=A+(V<<9&4294967295|V>>>23),V=D+(A^R&($^A))+k[15]+3634488961&4294967295,D=$+(V<<14&4294967295|V>>>18),V=R+($^A&(D^$))+k[4]+3889429448&4294967295,R=D+(V<<20&4294967295|V>>>12),V=A+(D^$&(R^D))+k[9]+568446438&4294967295,A=R+(V<<5&4294967295|V>>>27),V=$+(R^D&(A^R))+k[14]+3275163606&4294967295,$=A+(V<<9&4294967295|V>>>23),V=D+(A^R&($^A))+k[3]+4107603335&4294967295,D=$+(V<<14&4294967295|V>>>18),V=R+($^A&(D^$))+k[8]+1163531501&4294967295,R=D+(V<<20&4294967295|V>>>12),V=A+(D^$&(R^D))+k[13]+2850285829&4294967295,A=R+(V<<5&4294967295|V>>>27),V=$+(R^D&(A^R))+k[2]+4243563512&4294967295,$=A+(V<<9&4294967295|V>>>23),V=D+(A^R&($^A))+k[7]+1735328473&4294967295,D=$+(V<<14&4294967295|V>>>18),V=R+($^A&(D^$))+k[12]+2368359562&4294967295,R=D+(V<<20&4294967295|V>>>12),V=A+(R^D^$)+k[5]+4294588738&4294967295,A=R+(V<<4&4294967295|V>>>28),V=$+(A^R^D)+k[8]+2272392833&4294967295,$=A+(V<<11&4294967295|V>>>21),V=D+($^A^R)+k[11]+1839030562&4294967295,D=$+(V<<16&4294967295|V>>>16),V=R+(D^$^A)+k[14]+4259657740&4294967295,R=D+(V<<23&4294967295|V>>>9),V=A+(R^D^$)+k[1]+2763975236&4294967295,A=R+(V<<4&4294967295|V>>>28),V=$+(A^R^D)+k[4]+1272893353&4294967295,$=A+(V<<11&4294967295|V>>>21),V=D+($^A^R)+k[7]+4139469664&4294967295,D=$+(V<<16&4294967295|V>>>16),V=R+(D^$^A)+k[10]+3200236656&4294967295,R=D+(V<<23&4294967295|V>>>9),V=A+(R^D^$)+k[13]+681279174&4294967295,A=R+(V<<4&4294967295|V>>>28),V=$+(A^R^D)+k[0]+3936430074&4294967295,$=A+(V<<11&4294967295|V>>>21),V=D+($^A^R)+k[3]+3572445317&4294967295,D=$+(V<<16&4294967295|V>>>16),V=R+(D^$^A)+k[6]+76029189&4294967295,R=D+(V<<23&4294967295|V>>>9),V=A+(R^D^$)+k[9]+3654602809&4294967295,A=R+(V<<4&4294967295|V>>>28),V=$+(A^R^D)+k[12]+3873151461&4294967295,$=A+(V<<11&4294967295|V>>>21),V=D+($^A^R)+k[15]+530742520&4294967295,D=$+(V<<16&4294967295|V>>>16),V=R+(D^$^A)+k[2]+3299628645&4294967295,R=D+(V<<23&4294967295|V>>>9),V=A+(D^(R|~$))+k[0]+4096336452&4294967295,A=R+(V<<6&4294967295|V>>>26),V=$+(R^(A|~D))+k[7]+1126891415&4294967295,$=A+(V<<10&4294967295|V>>>22),V=D+(A^($|~R))+k[14]+2878612391&4294967295,D=$+(V<<15&4294967295|V>>>17),V=R+($^(D|~A))+k[5]+4237533241&4294967295,R=D+(V<<21&4294967295|V>>>11),V=A+(D^(R|~$))+k[12]+1700485571&4294967295,A=R+(V<<6&4294967295|V>>>26),V=$+(R^(A|~D))+k[3]+2399980690&4294967295,$=A+(V<<10&4294967295|V>>>22),V=D+(A^($|~R))+k[10]+4293915773&4294967295,D=$+(V<<15&4294967295|V>>>17),V=R+($^(D|~A))+k[1]+2240044497&4294967295,R=D+(V<<21&4294967295|V>>>11),V=A+(D^(R|~$))+k[8]+1873313359&4294967295,A=R+(V<<6&4294967295|V>>>26),V=$+(R^(A|~D))+k[15]+4264355552&4294967295,$=A+(V<<10&4294967295|V>>>22),V=D+(A^($|~R))+k[6]+2734768916&4294967295,D=$+(V<<15&4294967295|V>>>17),V=R+($^(D|~A))+k[13]+1309151649&4294967295,R=D+(V<<21&4294967295|V>>>11),V=A+(D^(R|~$))+k[4]+4149444226&4294967295,A=R+(V<<6&4294967295|V>>>26),V=$+(R^(A|~D))+k[11]+3174756917&4294967295,$=A+(V<<10&4294967295|V>>>22),V=D+(A^($|~R))+k[2]+718787259&4294967295,D=$+(V<<15&4294967295|V>>>17),V=R+($^(D|~A))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+A&4294967295,T.g[1]=T.g[1]+(D+(V<<21&4294967295|V>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+$&4294967295}r.prototype.u=function(T,A){A===void 0&&(A=T.length);for(var R=A-this.blockSize,k=this.B,D=this.h,$=0;$<A;){if(D==0)for(;$<=R;)s(this,T,$),$+=this.blockSize;if(typeof T=="string"){for(;$<A;)if(k[D++]=T.charCodeAt($++),D==this.blockSize){s(this,k),D=0;break}}else for(;$<A;)if(k[D++]=T[$++],D==this.blockSize){s(this,k),D=0;break}}this.h=D,this.o+=A},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var A=1;A<T.length-8;++A)T[A]=0;var R=8*this.o;for(A=T.length-8;A<T.length;++A)T[A]=R&255,R/=256;for(this.u(T),T=Array(16),A=R=0;4>A;++A)for(var k=0;32>k;k+=8)T[R++]=this.g[A]>>>k&255;return T};function o(T,A){var R=c;return Object.prototype.hasOwnProperty.call(R,T)?R[T]:R[T]=A(T)}function l(T,A){this.h=A;for(var R=[],k=!0,D=T.length-1;0<=D;D--){var $=T[D]|0;k&&$==A||(R[D]=$,k=!1)}this.g=R}var c={};function f(T){return-128<=T&&128>T?o(T,function(A){return new l([A|0],0>A?-1:0)}):new l([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return _;if(0>T)return L(h(-T));for(var A=[],R=1,k=0;T>=R;k++)A[k]=T/R|0,R*=4294967296;return new l(A,0)}function m(T,A){if(T.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T.charAt(0)=="-")return L(m(T.substring(1),A));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=h(Math.pow(A,8)),k=_,D=0;D<T.length;D+=8){var $=Math.min(8,T.length-D),V=parseInt(T.substring(D,D+$),A);8>$?($=h(Math.pow(A,$)),k=k.j($).add(h(V))):(k=k.j(R),k=k.add(h(V)))}return k}var _=f(0),w=f(1),C=f(16777216);t=l.prototype,t.m=function(){if(P(this))return-L(this).m();for(var T=0,A=1,R=0;R<this.g.length;R++){var k=this.i(R);T+=(0<=k?k:4294967296+k)*A,A*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(M(this))return"0";if(P(this))return"-"+L(this).toString(T);for(var A=h(Math.pow(T,6)),R=this,k="";;){var D=y(R,A).g;R=j(R,D.j(A));var $=((0<R.g.length?R.g[0]:R.h)>>>0).toString(T);if(R=D,M(R))return $+k;for(;6>$.length;)$="0"+$;k=$+k}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function M(T){if(T.h!=0)return!1;for(var A=0;A<T.g.length;A++)if(T.g[A]!=0)return!1;return!0}function P(T){return T.h==-1}t.l=function(T){return T=j(this,T),P(T)?-1:M(T)?0:1};function L(T){for(var A=T.g.length,R=[],k=0;k<A;k++)R[k]=~T.g[k];return new l(R,~T.h).add(w)}t.abs=function(){return P(this)?L(this):this},t.add=function(T){for(var A=Math.max(this.g.length,T.g.length),R=[],k=0,D=0;D<=A;D++){var $=k+(this.i(D)&65535)+(T.i(D)&65535),V=($>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);k=V>>>16,$&=65535,V&=65535,R[D]=V<<16|$}return new l(R,R[R.length-1]&-2147483648?-1:0)};function j(T,A){return T.add(L(A))}t.j=function(T){if(M(this)||M(T))return _;if(P(this))return P(T)?L(this).j(L(T)):L(L(this).j(T));if(P(T))return L(this.j(L(T)));if(0>this.l(C)&&0>T.l(C))return h(this.m()*T.m());for(var A=this.g.length+T.g.length,R=[],k=0;k<2*A;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var D=0;D<T.g.length;D++){var $=this.i(k)>>>16,V=this.i(k)&65535,U=T.i(D)>>>16,Q=T.i(D)&65535;R[2*k+2*D]+=V*Q,H(R,2*k+2*D),R[2*k+2*D+1]+=$*Q,H(R,2*k+2*D+1),R[2*k+2*D+1]+=V*U,H(R,2*k+2*D+1),R[2*k+2*D+2]+=$*U,H(R,2*k+2*D+2)}for(k=0;k<A;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=A;k<2*A;k++)R[k]=0;return new l(R,0)};function H(T,A){for(;(T[A]&65535)!=T[A];)T[A+1]+=T[A]>>>16,T[A]&=65535,A++}function K(T,A){this.g=T,this.h=A}function y(T,A){if(M(A))throw Error("division by zero");if(M(T))return new K(_,_);if(P(T))return A=y(L(T),A),new K(L(A.g),L(A.h));if(P(A))return A=y(T,L(A)),new K(L(A.g),A.h);if(30<T.g.length){if(P(T)||P(A))throw Error("slowDivide_ only works with positive integers.");for(var R=w,k=A;0>=k.l(T);)R=E(R),k=E(k);var D=b(R,1),$=b(k,1);for(k=b(k,2),R=b(R,2);!M(k);){var V=$.add(k);0>=V.l(T)&&(D=D.add(R),$=V),k=b(k,1),R=b(R,1)}return A=j(T,D.j(A)),new K(D,A)}for(D=_;0<=T.l(A);){for(R=Math.max(1,Math.floor(T.m()/A.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),$=h(R),V=$.j(A);P(V)||0<V.l(T);)R-=k,$=h(R),V=$.j(A);M($)&&($=w),D=D.add($),T=j(T,V)}return new K(D,T)}t.A=function(T){return y(this,T).h},t.and=function(T){for(var A=Math.max(this.g.length,T.g.length),R=[],k=0;k<A;k++)R[k]=this.i(k)&T.i(k);return new l(R,this.h&T.h)},t.or=function(T){for(var A=Math.max(this.g.length,T.g.length),R=[],k=0;k<A;k++)R[k]=this.i(k)|T.i(k);return new l(R,this.h|T.h)},t.xor=function(T){for(var A=Math.max(this.g.length,T.g.length),R=[],k=0;k<A;k++)R[k]=this.i(k)^T.i(k);return new l(R,this.h^T.h)};function E(T){for(var A=T.g.length+1,R=[],k=0;k<A;k++)R[k]=T.i(k)<<1|T.i(k-1)>>>31;return new l(R,T.h)}function b(T,A){var R=A>>5;A%=32;for(var k=T.g.length-R,D=[],$=0;$<k;$++)D[$]=0<A?T.i($+R)>>>A|T.i($+R+1)<<32-A:T.i($+R);return new l(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CC=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=m,ga=l}).apply(typeof IS<"u"?IS:typeof self<"u"?self:typeof window<"u"?window:{});var Mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RC,Qc,kC,Wh,W0,IC,NC,DC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,S,I){return p==Array.prototype||p==Object.prototype||(p[S]=I.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mh=="object"&&Mh];for(var S=0;S<p.length;++S){var I=p[S];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function s(p,S){if(S)e:{var I=r;p=p.split(".");for(var Y=0;Y<p.length-1;Y++){var ie=p[Y];if(!(ie in I))break e;I=I[ie]}p=p[p.length-1],Y=I[p],S=S(Y),S!=Y&&S!=null&&e(I,p,{configurable:!0,writable:!0,value:S})}}function o(p,S){p instanceof String&&(p+="");var I=0,Y=!1,ie={next:function(){if(!Y&&I<p.length){var de=I++;return{value:S(de,p[de]),done:!1}}return Y=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}s("Array.prototype.values",function(p){return p||function(){return o(this,function(S,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(p){var S=typeof p;return S=S!="object"?S:p?Array.isArray(p)?"array":S:"null",S=="array"||S=="object"&&typeof p.length=="number"}function h(p){var S=typeof p;return S=="object"&&p!=null||S=="function"}function m(p,S,I){return p.call.apply(p.bind,arguments)}function _(p,S,I){if(!p)throw Error();if(2<arguments.length){var Y=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,Y),p.apply(S,ie)}}return function(){return p.apply(S,arguments)}}function w(p,S,I){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:_,w.apply(null,arguments)}function C(p,S){var I=Array.prototype.slice.call(arguments,1);return function(){var Y=I.slice();return Y.push.apply(Y,arguments),p.apply(this,Y)}}function M(p,S){function I(){}I.prototype=S.prototype,p.aa=S.prototype,p.prototype=new I,p.prototype.constructor=p,p.Qb=function(Y,ie,de){for(var we=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)we[Je-2]=arguments[Je];return S.prototype[ie].apply(Y,we)}}function P(p){const S=p.length;if(0<S){const I=Array(S);for(let Y=0;Y<S;Y++)I[Y]=p[Y];return I}return[]}function L(p,S){for(let I=1;I<arguments.length;I++){const Y=arguments[I];if(f(Y)){const ie=p.length||0,de=Y.length||0;p.length=ie+de;for(let we=0;we<de;we++)p[ie+we]=Y[we]}else p.push(Y)}}class j{constructor(S,I){this.i=S,this.j=I,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function H(p){return/^[\s\xa0]*$/.test(p)}function K(){var p=c.navigator;return p&&(p=p.userAgent)?p:""}function y(p){return y[" "](p),p}y[" "]=function(){};var E=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function b(p,S,I){for(const Y in p)S.call(I,p[Y],Y,p)}function T(p,S){for(const I in p)S.call(void 0,p[I],I,p)}function A(p){const S={};for(const I in p)S[I]=p[I];return S}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(p,S){let I,Y;for(let ie=1;ie<arguments.length;ie++){Y=arguments[ie];for(I in Y)p[I]=Y[I];for(let de=0;de<R.length;de++)I=R[de],Object.prototype.hasOwnProperty.call(Y,I)&&(p[I]=Y[I])}}function D(p){var S=1;p=p.split(":");const I=[];for(;0<S&&p.length;)I.push(p.shift()),S--;return p.length&&I.push(p.join(":")),I}function $(p){c.setTimeout(()=>{throw p},0)}function V(){var p=X;let S=null;return p.g&&(S=p.g,p.g=p.g.next,p.g||(p.h=null),S.next=null),S}class U{constructor(){this.h=this.g=null}add(S,I){const Y=Q.get();Y.set(S,I),this.h?this.h.next=Y:this.g=Y,this.h=Y}}var Q=new j(()=>new x,p=>p.reset());class x{constructor(){this.next=this.g=this.h=null}set(S,I){this.h=S,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let B,G=!1,X=new U,z=()=>{const p=c.Promise.resolve(void 0);B=()=>{p.then(W)}};var W=()=>{for(var p;p=V();){try{p.h.call(p.g)}catch(I){$(I)}var S=Q;S.j(p),100>S.h&&(S.h++,p.next=S.g,S.g=p)}G=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(p,S){this.type=p,this.g=this.target=S,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var ne=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,S=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const I=()=>{};c.addEventListener("test",I,S),c.removeEventListener("test",I,S)}catch{}return p}();function oe(p,S){if(Z.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var I=this.type=p.type,Y=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=S,S=p.relatedTarget){if(E){e:{try{y(S.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(S=null)}}else I=="mouseover"?S=p.fromElement:I=="mouseout"&&(S=p.toElement);this.relatedTarget=S,Y?(this.clientX=Y.clientX!==void 0?Y.clientX:Y.pageX,this.clientY=Y.clientY!==void 0?Y.clientY:Y.pageY,this.screenX=Y.screenX||0,this.screenY=Y.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:ce[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&oe.aa.h.call(this)}}M(oe,Z);var ce={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),ge=0;function Ae(p,S,I,Y,ie){this.listener=p,this.proxy=null,this.src=S,this.type=I,this.capture=!!Y,this.ha=ie,this.key=++ge,this.da=this.fa=!1}function xe(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Ue(p){this.src=p,this.g={},this.h=0}Ue.prototype.add=function(p,S,I,Y,ie){var de=p.toString();p=this.g[de],p||(p=this.g[de]=[],this.h++);var we=Le(p,S,Y,ie);return-1<we?(S=p[we],I||(S.fa=!1)):(S=new Ae(S,this.src,de,!!Y,ie),S.fa=I,p.push(S)),S};function Ne(p,S){var I=S.type;if(I in p.g){var Y=p.g[I],ie=Array.prototype.indexOf.call(Y,S,void 0),de;(de=0<=ie)&&Array.prototype.splice.call(Y,ie,1),de&&(xe(S),p.g[I].length==0&&(delete p.g[I],p.h--))}}function Le(p,S,I,Y){for(var ie=0;ie<p.length;++ie){var de=p[ie];if(!de.da&&de.listener==S&&de.capture==!!I&&de.ha==Y)return ie}return-1}var rt="closure_lm_"+(1e6*Math.random()|0),st={};function Ht(p,S,I,Y,ie){if(Array.isArray(S)){for(var de=0;de<S.length;de++)Ht(p,S[de],I,Y,ie);return null}return I=$r(I),p&&p[fe]?p.K(S,I,h(Y)?!!Y.capture:!1,ie):Be(p,S,I,!1,Y,ie)}function Be(p,S,I,Y,ie,de){if(!S)throw Error("Invalid event type");var we=h(ie)?!!ie.capture:!!ie,Je=Pn(p);if(Je||(p[rt]=Je=new Ue(p)),I=Je.add(S,I,Y,we,de),I.proxy)return I;if(Y=be(),I.proxy=Y,Y.src=p,Y.listener=I,p.addEventListener)ne||(ie=we),ie===void 0&&(ie=!1),p.addEventListener(S.toString(),Y,ie);else if(p.attachEvent)p.attachEvent(Qt(S.toString()),Y);else if(p.addListener&&p.removeListener)p.addListener(Y);else throw Error("addEventListener and attachEvent are unavailable.");return I}function be(){function p(I){return S.call(p.src,p.listener,I)}const S=er;return p}function kt(p,S,I,Y,ie){if(Array.isArray(S))for(var de=0;de<S.length;de++)kt(p,S[de],I,Y,ie);else Y=h(Y)?!!Y.capture:!!Y,I=$r(I),p&&p[fe]?(p=p.i,S=String(S).toString(),S in p.g&&(de=p.g[S],I=Le(de,I,Y,ie),-1<I&&(xe(de[I]),Array.prototype.splice.call(de,I,1),de.length==0&&(delete p.g[S],p.h--)))):p&&(p=Pn(p))&&(S=p.g[S.toString()],p=-1,S&&(p=Le(S,I,Y,ie)),(I=-1<p?S[p]:null)&&An(I))}function An(p){if(typeof p!="number"&&p&&!p.da){var S=p.src;if(S&&S[fe])Ne(S.i,p);else{var I=p.type,Y=p.proxy;S.removeEventListener?S.removeEventListener(I,Y,p.capture):S.detachEvent?S.detachEvent(Qt(I),Y):S.addListener&&S.removeListener&&S.removeListener(Y),(I=Pn(S))?(Ne(I,p),I.h==0&&(I.src=null,S[rt]=null)):xe(p)}}}function Qt(p){return p in st?st[p]:st[p]="on"+p}function er(p,S){if(p.da)p=!0;else{S=new oe(S,this);var I=p.listener,Y=p.ha||p.src;p.fa&&An(p),p=I.call(Y,S)}return p}function Pn(p){return p=p[rt],p instanceof Ue?p:null}var On="__closure_events_fn_"+(1e9*Math.random()>>>0);function $r(p){return typeof p=="function"?p:(p[On]||(p[On]=function(S){return p.handleEvent(S)}),p[On])}function ot(){ee.call(this),this.i=new Ue(this),this.M=this,this.F=null}M(ot,ee),ot.prototype[fe]=!0,ot.prototype.removeEventListener=function(p,S,I,Y){kt(this,p,S,I,Y)};function Ye(p,S){var I,Y=p.F;if(Y)for(I=[];Y;Y=Y.F)I.push(Y);if(p=p.M,Y=S.type||S,typeof S=="string")S=new Z(S,p);else if(S instanceof Z)S.target=S.target||p;else{var ie=S;S=new Z(Y,p),k(S,ie)}if(ie=!0,I)for(var de=I.length-1;0<=de;de--){var we=S.g=I[de];ie=$t(we,Y,!0,S)&&ie}if(we=S.g=p,ie=$t(we,Y,!0,S)&&ie,ie=$t(we,Y,!1,S)&&ie,I)for(de=0;de<I.length;de++)we=S.g=I[de],ie=$t(we,Y,!1,S)&&ie}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var p=this.i,S;for(S in p.g){for(var I=p.g[S],Y=0;Y<I.length;Y++)xe(I[Y]);delete p.g[S],p.h--}}this.F=null},ot.prototype.K=function(p,S,I,Y){return this.i.add(String(p),S,!1,I,Y)},ot.prototype.L=function(p,S,I,Y){return this.i.add(String(p),S,!0,I,Y)};function $t(p,S,I,Y){if(S=p.i.g[String(S)],!S)return!0;S=S.concat();for(var ie=!0,de=0;de<S.length;++de){var we=S[de];if(we&&!we.da&&we.capture==I){var Je=we.listener,Jt=we.ha||we.src;we.fa&&Ne(p.i,we),ie=Je.call(Jt,Y)!==!1&&ie}}return ie&&!Y.defaultPrevented}function Tt(p,S,I){if(typeof p=="function")I&&(p=w(p,I));else if(p&&typeof p.handleEvent=="function")p=w(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:c.setTimeout(p,S||0)}function li(p){p.g=Tt(()=>{p.g=null,p.i&&(p.i=!1,li(p))},p.l);const S=p.h;p.h=null,p.m.apply(null,S)}class Ft extends ee{constructor(S,I){super(),this.m=S,this.l=I,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:li(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sn(p){ee.call(this),this.h=p,this.g={}}M(sn,ee);var Vn=[];function Ln(p){b(p.g,function(S,I){this.g.hasOwnProperty(I)&&An(S)},p),p.g={}}sn.prototype.N=function(){sn.aa.N.call(this),Ln(this)},sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var an=c.JSON.stringify,mn=c.JSON.parse,zn=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function $i(){}$i.prototype.h=null;function Fi(p){return p.h||(p.h=p.i())}function Fr(){}var tr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function br(){Z.call(this,"d")}M(br,Z);function nr(){Z.call(this,"c")}M(nr,Z);var Er={},Pa=null;function ui(){return Pa=Pa||new ot}Er.La="serverreachability";function Cs(p){Z.call(this,Er.La,p)}M(Cs,Z);function ci(p){const S=ui();Ye(S,new Cs(S))}Er.STAT_EVENT="statevent";function $o(p,S){Z.call(this,Er.STAT_EVENT,p),this.stat=S}M($o,Z);function yt(p){const S=ui();Ye(S,new $o(S,p))}Er.Ma="timingevent";function Lt(p,S){Z.call(this,Er.Ma,p),this.size=S}M(Lt,Z);function It(p,S){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},S)}function qn(){this.g=!0}qn.prototype.xa=function(){this.g=!1};function Oa(p,S,I,Y,ie,de){p.info(function(){if(p.g)if(de)for(var we="",Je=de.split("&"),Jt=0;Jt<Je.length;Jt++){var et=Je[Jt].split("=");if(1<et.length){var ln=et[0];et=et[1];var en=ln.split("_");we=2<=en.length&&en[1]=="type"?we+(ln+"="+et+"&"):we+(ln+"=redacted&")}}else we=null;else we=de;return"XMLHTTP REQ ("+Y+") [attempt "+ie+"]: "+S+`
`+I+`
`+we})}function Pu(p,S,I,Y,ie,de,we){p.info(function(){return"XMLHTTP RESP ("+Y+") [ attempt "+ie+"]: "+S+`
`+I+`
`+de+" "+we})}function di(p,S,I,Y){p.info(function(){return"XMLHTTP TEXT ("+S+"): "+qi(p,I)+(Y?" "+Y:"")})}function Fo(p,S){p.info(function(){return"TIMEOUT: "+S})}qn.prototype.info=function(){};function qi(p,S){if(!p.g)return S;if(!S)return null;try{var I=JSON.parse(S);if(I){for(p=0;p<I.length;p++)if(Array.isArray(I[p])){var Y=I[p];if(!(2>Y.length)){var ie=Y[1];if(Array.isArray(ie)&&!(1>ie.length)){var de=ie[0];if(de!="noop"&&de!="stop"&&de!="close")for(var we=1;we<ie.length;we++)ie[we]=""}}}}return an(I)}catch{return S}}var fi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sr;function Ar(){}M(Ar,$i),Ar.prototype.g=function(){return new XMLHttpRequest},Ar.prototype.i=function(){return{}},Sr=new Ar;function gn(p,S,I,Y){this.j=p,this.i=S,this.l=I,this.R=Y||1,this.U=new sn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new St}function St(){this.i=null,this.g="",this.h=!1}var Va={},Rs={};function rr(p,S,I){p.L=1,p.v=Ua(ir(S)),p.m=I,p.P=!0,qr(p,null)}function qr(p,S){p.F=Date.now(),Gi(p),p.A=ir(p.v);var I=p.A,Y=p.R;Array.isArray(Y)||(Y=[String(Y)]),Uu(I.i,"t",Y),p.C=0,I=p.j.J,p.h=new St,p.g=_f(p.j,I?S:null,!p.m),0<p.O&&(p.M=new Ft(w(p.Y,p,p.g),p.O)),S=p.U,I=p.g,Y=p.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(Vn[0]=ie.toString()),ie=Vn);for(var de=0;de<ie.length;de++){var we=Ht(I,ie[de],Y||S.handleEvent,!1,S.h||S);if(!we)break;S.g[we.key]=we}S=p.H?A(p.H):{},p.m?(p.u||(p.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,S)):(p.u="GET",p.g.ea(p.A,p.u,null,S)),ci(),Oa(p.i,p.u,p.A,p.l,p.R,p.m)}gn.prototype.ca=function(p){p=p.target;const S=this.M;S&&Ir(p)==3?S.j():this.Y(p)},gn.prototype.Y=function(p){try{if(p==this.g)e:{const en=Ir(this.g);var S=this.g.Ba();const Ji=this.g.Z();if(!(3>en)&&(en!=3||this.g&&(this.h.h||this.g.oa()||df(this.g)))){this.J||en!=4||S==7||(S==8||0>=Ji?ci(3):ci(2)),hi(this);var I=this.g.Z();this.X=I;t:if(La(this)){var Y=df(this.g);p="";var ie=Y.length,de=Ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zt(this),xr(this);var we="";break t}this.h.i=new c.TextDecoder}for(S=0;S<ie;S++)this.h.h=!0,p+=this.h.i.decode(Y[S],{stream:!(de&&S==ie-1)});Y.length=0,this.h.g+=p,this.C=0,we=this.h.g}else we=this.g.oa();if(this.o=I==200,Pu(this.i,this.u,this.A,this.l,this.R,en,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Jt=this.g;if((Je=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Je)){var et=Je;break t}}et=null}if(I=et)di(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pi(this,I);else{this.o=!1,this.s=3,yt(12),Zt(this),xr(this);break e}}if(this.P){I=!0;let yn;for(;!this.J&&this.C<we.length;)if(yn=qo(this,we),yn==Rs){en==4&&(this.s=4,yt(14),I=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Va){this.s=4,yt(15),di(this.i,this.l,we,"[Invalid Chunk]"),I=!1;break}else di(this.i,this.l,yn,null),pi(this,yn);if(La(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),en!=4||we.length!=0||this.h.h||(this.s=1,yt(16),I=!1),this.o=this.o&&I,!I)di(this.i,this.l,we,"[Invalid Chunked Response]"),Zt(this),xr(this);else if(0<we.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+we.length),Ya(ln),ln.M=!0,yt(11))}}else di(this.i,this.l,we,null),pi(this,we);en==4&&Zt(this),this.o&&!this.J&&(en==4?gf(this.j,this):(this.o=!1,Gi(this)))}else Lm(this.g),I==400&&0<we.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Zt(this),xr(this)}}}catch{}finally{}};function La(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function qo(p,S){var I=p.C,Y=S.indexOf(`
`,I);return Y==-1?Rs:(I=Number(S.substring(I,Y)),isNaN(I)?Va:(Y+=1,Y+I>S.length?Rs:(S=S.slice(Y,Y+I),p.C=Y+I,S)))}gn.prototype.cancel=function(){this.J=!0,Zt(this)};function Gi(p){p.S=Date.now()+p.I,Go(p,p.I)}function Go(p,S){if(p.B!=null)throw Error("WatchDog timer not null");p.B=It(w(p.ba,p),S)}function hi(p){p.B&&(c.clearTimeout(p.B),p.B=null)}gn.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(Fo(this.i,this.A),this.L!=2&&(ci(),yt(17)),Zt(this),this.s=2,xr(this)):Go(this,this.S-p)};function xr(p){p.j.G==0||p.J||gf(p.j,p)}function Zt(p){hi(p);var S=p.M;S&&typeof S.ma=="function"&&S.ma(),p.M=null,Ln(p.U),p.g&&(S=p.g,p.g=null,S.abort(),S.ma())}function pi(p,S){try{var I=p.j;if(I.G!=0&&(I.g==p||Ou(I.h,p))){if(!p.K&&Ou(I.h,p)&&I.G==3){try{var Y=I.Da.g.parse(S)}catch{Y=null}if(Array.isArray(Y)&&Y.length==3){var ie=Y;if(ie[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<p.F)rl(I),tl(I);else break e;qu(I),yt(18)}}else I.za=ie[1],0<I.za-I.T&&37500>ie[2]&&I.F&&I.v==0&&!I.C&&(I.C=It(w(I.Za,I),6e3));if(1>=mi(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Zi(I,11)}else if((p.K||I.g==p)&&rl(I),!H(S))for(ie=I.Da.g.parse(S),S=0;S<ie.length;S++){let et=ie[S];if(I.T=et[0],et=et[1],I.G==2)if(et[0]=="c"){I.K=et[1],I.ia=et[2];const ln=et[3];ln!=null&&(I.la=ln,I.j.info("VER="+I.la));const en=et[4];en!=null&&(I.Aa=en,I.j.info("SVER="+I.Aa));const Ji=et[5];Ji!=null&&typeof Ji=="number"&&0<Ji&&(Y=1.5*Ji,I.L=Y,I.j.info("backChannelRequestTimeoutMs_="+Y)),Y=I;const yn=p.g;if(yn){const Ei=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ei){var de=Y.h;de.g||Ei.indexOf("spdy")==-1&&Ei.indexOf("quic")==-1&&Ei.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(Yo(de,de.h),de.h=null))}if(Y.D){const Ku=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ku&&(Y.ya=Ku,ft(Y.I,Y.D,Ku))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-p.F,I.j.info("Handshake RTT: "+I.R+"ms")),Y=I;var we=p;if(Y.qa=vf(Y,Y.J?Y.ia:null,Y.W),we.K){jn(Y.h,we);var Je=we,Jt=Y.L;Jt&&(Je.I=Jt),Je.B&&(hi(Je),Gi(Je)),Y.g=we}else pf(Y);0<I.i.length&&nl(I)}else et[0]!="stop"&&et[0]!="close"||Zi(I,7);else I.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Zi(I,7):$u(I):et[0]!="noop"&&I.l&&I.l.ta(et),I.v=0)}}ci(4)}catch{}}var Ko=class{constructor(p,S){this.g=p,this.map=S}};function Gr(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ks(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function mi(p){return p.h?1:p.g?p.g.size:0}function Ou(p,S){return p.h?p.h==S:p.g?p.g.has(S):!1}function Yo(p,S){p.g?p.g.add(S):p.h=S}function jn(p,S){p.h&&p.h==S?p.h=null:p.g&&p.g.has(S)&&p.g.delete(S)}Gr.prototype.cancel=function(){if(this.i=Vu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Vu(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let S=p.i;for(const I of p.g.values())S=S.concat(I.D);return S}return P(p.i)}function Mm(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(f(p)){for(var S=[],I=p.length,Y=0;Y<I;Y++)S.push(p[Y]);return S}S=[],I=0;for(Y in p)S[I++]=p[Y];return S}function Xo(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(f(p)||typeof p=="string"){var S=[];p=p.length;for(var I=0;I<p;I++)S.push(I);return S}S=[],I=0;for(const Y in p)S[I++]=Y;return S}}}function Lu(p,S){if(p.forEach&&typeof p.forEach=="function")p.forEach(S,void 0);else if(f(p)||typeof p=="string")Array.prototype.forEach.call(p,S,void 0);else for(var I=Xo(p),Y=Mm(p),ie=Y.length,de=0;de<ie;de++)S.call(void 0,Y[de],I&&I[de],p)}var za=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pm(p,S){if(p){p=p.split("&");for(var I=0;I<p.length;I++){var Y=p[I].indexOf("="),ie=null;if(0<=Y){var de=p[I].substring(0,Y);ie=p[I].substring(Y+1)}else de=p[I];S(de,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function qt(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof qt){this.h=p.h,ja(this,p.j),this.o=p.o,this.g=p.g,Is(this,p.s),this.l=p.l;var S=p.i,I=new Yi;I.i=S.i,S.g&&(I.g=new Map(S.g),I.h=S.h),Ki(this,I),this.m=p.m}else p&&(S=String(p).match(za))?(this.h=!1,ja(this,S[1]||"",!0),this.o=Cr(S[2]||""),this.g=Cr(S[3]||"",!0),Is(this,S[4]),this.l=Cr(S[5]||"",!0),Ki(this,S[6]||"",!0),this.m=Cr(S[7]||"")):(this.h=!1,this.i=new Yi(null,this.h))}qt.prototype.toString=function(){var p=[],S=this.j;S&&p.push(Ba(S,zu,!0),":");var I=this.g;return(I||S=="file")&&(p.push("//"),(S=this.o)&&p.push(Ba(S,zu,!0),"@"),p.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&p.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&p.push("/"),p.push(Ba(I,I.charAt(0)=="/"?Om:ju,!0))),(I=this.i.toString())&&p.push("?",I),(I=this.m)&&p.push("#",Ba(I,Wo)),p.join("")};function ir(p){return new qt(p)}function ja(p,S,I){p.j=I?Cr(S,!0):S,p.j&&(p.j=p.j.replace(/:$/,""))}function Is(p,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);p.s=S}else p.s=null}function Ki(p,S,I){S instanceof Yi?(p.i=S,uf(p.i,p.h)):(I||(S=Ba(S,Vm)),p.i=new Yi(S,p.h))}function ft(p,S,I){p.i.set(S,I)}function Ua(p){return ft(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Cr(p,S){return p?S?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Ba(p,S,I){return typeof p=="string"?(p=encodeURI(p).replace(S,lf),I&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function lf(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var zu=/[#\/\?@]/g,ju=/[#\?:]/g,Om=/[#\?]/g,Vm=/[#\?@]/g,Wo=/#/g;function Yi(p,S){this.h=this.g=null,this.i=p||null,this.j=!!S}function Rr(p){p.g||(p.g=new Map,p.h=0,p.i&&Pm(p.i,function(S,I){p.add(decodeURIComponent(S.replace(/\+/g," ")),I)}))}t=Yi.prototype,t.add=function(p,S){Rr(this),this.i=null,p=gi(this,p);var I=this.g.get(p);return I||this.g.set(p,I=[]),I.push(S),this.h+=1,this};function Xi(p,S){Rr(p),S=gi(p,S),p.g.has(S)&&(p.i=null,p.h-=p.g.get(S).length,p.g.delete(S))}function Wi(p,S){return Rr(p),S=gi(p,S),p.g.has(S)}t.forEach=function(p,S){Rr(this),this.g.forEach(function(I,Y){I.forEach(function(ie){p.call(S,ie,Y,this)},this)},this)},t.na=function(){Rr(this);const p=Array.from(this.g.values()),S=Array.from(this.g.keys()),I=[];for(let Y=0;Y<S.length;Y++){const ie=p[Y];for(let de=0;de<ie.length;de++)I.push(S[Y])}return I},t.V=function(p){Rr(this);let S=[];if(typeof p=="string")Wi(this,p)&&(S=S.concat(this.g.get(gi(this,p))));else{p=Array.from(this.g.values());for(let I=0;I<p.length;I++)S=S.concat(p[I])}return S},t.set=function(p,S){return Rr(this),this.i=null,p=gi(this,p),Wi(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[S]),this.h+=1,this},t.get=function(p,S){return p?(p=this.V(p),0<p.length?String(p[0]):S):S};function Uu(p,S,I){Xi(p,S),0<I.length&&(p.i=null,p.g.set(gi(p,S),P(I)),p.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],S=Array.from(this.g.keys());for(var I=0;I<S.length;I++){var Y=S[I];const de=encodeURIComponent(String(Y)),we=this.V(Y);for(Y=0;Y<we.length;Y++){var ie=de;we[Y]!==""&&(ie+="="+encodeURIComponent(String(we[Y]))),p.push(ie)}}return this.i=p.join("&")};function gi(p,S){return S=String(S),p.j&&(S=S.toLowerCase()),S}function uf(p,S){S&&!p.j&&(Rr(p),p.i=null,p.g.forEach(function(I,Y){var ie=Y.toLowerCase();Y!=ie&&(Xi(this,Y),Uu(this,ie,I))},p)),p.j=S}function Ha(p,S){const I=new qn;if(c.Image){const Y=new Image;Y.onload=C(kr,I,"TestLoadImage: loaded",!0,S,Y),Y.onerror=C(kr,I,"TestLoadImage: error",!1,S,Y),Y.onabort=C(kr,I,"TestLoadImage: abort",!1,S,Y),Y.ontimeout=C(kr,I,"TestLoadImage: timeout",!1,S,Y),c.setTimeout(function(){Y.ontimeout&&Y.ontimeout()},1e4),Y.src=p}else S(!1)}function Kr(p,S){const I=new qn,Y=new AbortController,ie=setTimeout(()=>{Y.abort(),kr(I,"TestPingServer: timeout",!1,S)},1e4);fetch(p,{signal:Y.signal}).then(de=>{clearTimeout(ie),de.ok?kr(I,"TestPingServer: ok",!0,S):kr(I,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(ie),kr(I,"TestPingServer: error",!1,S)})}function kr(p,S,I,Y,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),Y(I)}catch{}}function $a(){this.g=new zn}function yi(p,S,I){const Y=I||"";try{Lu(p,function(ie,de){let we=ie;h(ie)&&(we=an(ie)),S.push(Y+de+"="+encodeURIComponent(we))})}catch(ie){throw S.push(Y+"type="+encodeURIComponent("_badmap")),ie}}function Ns(p){this.l=p.Ub||null,this.j=p.eb||!1}M(Ns,$i),Ns.prototype.g=function(){return new Qi(this.l,this.j)},Ns.prototype.i=function(p){return function(){return p}}({});function Qi(p,S){ot.call(this),this.D=p,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Qi,ot),t=Qi.prototype,t.open=function(p,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=S,this.readyState=1,_i(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(S.body=p),(this.D||c).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,_i(this)),this.g&&(this.readyState=3,_i(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bu(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bu(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var S=p.value?p.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!p.done}))&&(this.response=this.responseText+=S)}p.done?vi(this):_i(this),this.readyState==3&&Bu(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,vi(this))},t.Qa=function(p){this.g&&(this.response=p,vi(this))},t.ga=function(){this.g&&vi(this)};function vi(p){p.readyState=4,p.l=null,p.j=null,p.v=null,_i(p)}t.setRequestHeader=function(p,S){this.u.append(p,S)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],S=this.h.entries();for(var I=S.next();!I.done;)I=I.value,p.push(I[0]+": "+I[1]),I=S.next();return p.join(`\r
`)};function _i(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Hu(p){let S="";return b(p,function(I,Y){S+=Y,S+=":",S+=I,S+=`\r
`}),S}function on(p,S,I){e:{for(Y in I){var Y=!1;break e}Y=!0}Y||(I=Hu(I),typeof p=="string"?I!=null&&encodeURIComponent(String(I)):ft(p,S,I))}function lt(p){ot.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(lt,ot);var Qo=/^https?$/i,Fa=["POST","PUT"];t=lt.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,S,I,Y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);S=S?S.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sr.g(),this.v=this.o?Fi(this.o):Fi(Sr),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(S,String(p),!0),this.B=!1}catch(de){cf(this,de);return}if(p=I||"",I=new Map(this.headers),Y)if(Object.getPrototypeOf(Y)===Object.prototype)for(var ie in Y)I.set(ie,Y[ie]);else if(typeof Y.keys=="function"&&typeof Y.get=="function")for(const de of Y.keys())I.set(de,Y.get(de));else throw Error("Unknown input type for opt_headers: "+String(Y));Y=Array.from(I.keys()).find(de=>de.toLowerCase()=="content-type"),ie=c.FormData&&p instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Fa,S,void 0))||Y||ie||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,we]of I)this.g.setRequestHeader(de,we);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qa(this),this.u=!0,this.g.send(p),this.u=!1}catch(de){cf(this,de)}};function cf(p,S){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=S,p.m=5,Zo(p),wi(p)}function Zo(p){p.A||(p.A=!0,Ye(p,"complete"),Ye(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Ye(this,"complete"),Ye(this,"abort"),wi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wi(this,!0)),lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Jo(this):this.bb())},t.bb=function(){Jo(this)};function Jo(p){if(p.h&&typeof l<"u"&&(!p.v[1]||Ir(p)!=4||p.Z()!=2)){if(p.u&&Ir(p)==4)Tt(p.Ea,0,p);else if(Ye(p,"readystatechange"),Ir(p)==4){p.h=!1;try{const we=p.Z();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var I;if(!(I=S)){var Y;if(Y=we===0){var ie=String(p.D).match(za)[1]||null;!ie&&c.self&&c.self.location&&(ie=c.self.location.protocol.slice(0,-1)),Y=!Qo.test(ie?ie.toLowerCase():"")}I=Y}if(I)Ye(p,"complete"),Ye(p,"success");else{p.m=6;try{var de=2<Ir(p)?p.g.statusText:""}catch{de=""}p.l=de+" ["+p.Z()+"]",Zo(p)}}finally{wi(p)}}}}function wi(p,S){if(p.g){qa(p);const I=p.g,Y=p.v[0]?()=>{}:null;p.g=null,p.v=null,S||Ye(p,"ready");try{I.onreadystatechange=Y}catch{}}}function qa(p){p.I&&(c.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function Ir(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<Ir(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var S=this.g.responseText;return p&&S.indexOf(p)==0&&(S=S.substring(p.length)),mn(S)}};function df(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Lm(p){const S={};p=(p.g&&2<=Ir(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let Y=0;Y<p.length;Y++){if(H(p[Y]))continue;var I=D(p[Y]);const ie=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const de=S[ie]||[];S[ie]=de,de.push(I)}T(S,function(Y){return Y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ga(p,S,I){return I&&I.internalChannelParams&&I.internalChannelParams[p]||S}function el(p){this.Aa=0,this.i=[],this.j=new qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ga("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ga("baseRetryDelayMs",5e3,p),this.cb=Ga("retryDelaySeedMs",1e4,p),this.Wa=Ga("forwardChannelMaxRetries",2,p),this.wa=Ga("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Gr(p&&p.concurrentRequestLimit),this.Da=new $a,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=el.prototype,t.la=8,t.G=1,t.connect=function(p,S,I,Y){yt(0),this.W=p,this.H=S||{},I&&Y!==void 0&&(this.H.OSID=I,this.H.OAID=Y),this.F=this.X,this.I=vf(this,null,this.W),nl(this)};function $u(p){if(ff(p),p.G==3){var S=p.U++,I=ir(p.I);if(ft(I,"SID",p.K),ft(I,"RID",S),ft(I,"TYPE","terminate"),Ka(p,I),S=new gn(p,p.j,S),S.L=2,S.v=Ua(ir(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(S.v.toString(),"")}catch{}!I&&c.Image&&(new Image().src=S.v,I=!0),I||(S.g=_f(S.j,null),S.g.ea(S.v)),S.F=Date.now(),Gi(S)}yf(p)}function tl(p){p.g&&(Ya(p),p.g.cancel(),p.g=null)}function ff(p){tl(p),p.u&&(c.clearTimeout(p.u),p.u=null),rl(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&c.clearTimeout(p.s),p.s=null)}function nl(p){if(!ks(p.h)&&!p.s){p.s=!0;var S=p.Ga;B||z(),G||(B(),G=!0),X.add(S,p),p.B=0}}function zm(p,S){return mi(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=S.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=It(w(p.Ga,p,S),Gu(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const ie=new gn(this,this.j,p);let de=this.o;if(this.S&&(de?(de=A(de),k(de,this.S)):de=this.S),this.m!==null||this.O||(ie.H=de,de=null),this.P)e:{for(var S=0,I=0;I<this.i.length;I++){t:{var Y=this.i[I];if("__data__"in Y.map&&(Y=Y.map.__data__,typeof Y=="string")){Y=Y.length;break t}Y=void 0}if(Y===void 0)break;if(S+=Y,4096<S){S=I;break e}if(S===4096||I===this.i.length-1){S=I+1;break e}}S=1e3}else S=1e3;S=hf(this,ie,S),I=ir(this.I),ft(I,"RID",p),ft(I,"CVER",22),this.D&&ft(I,"X-HTTP-Session-Id",this.D),Ka(this,I),de&&(this.O?S="headers="+encodeURIComponent(String(Hu(de)))+"&"+S:this.m&&on(I,this.m,de)),Yo(this.h,ie),this.Ua&&ft(I,"TYPE","init"),this.P?(ft(I,"$req",S),ft(I,"SID","null"),ie.T=!0,rr(ie,I,null)):rr(ie,I,S),this.G=2}}else this.G==3&&(p?Fu(this,p):this.i.length==0||ks(this.h)||Fu(this))};function Fu(p,S){var I;S?I=S.l:I=p.U++;const Y=ir(p.I);ft(Y,"SID",p.K),ft(Y,"RID",I),ft(Y,"AID",p.T),Ka(p,Y),p.m&&p.o&&on(Y,p.m,p.o),I=new gn(p,p.j,I,p.B+1),p.m===null&&(I.H=p.o),S&&(p.i=S.D.concat(p.i)),S=hf(p,I,1e3),I.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Yo(p.h,I),rr(I,Y,S)}function Ka(p,S){p.H&&b(p.H,function(I,Y){ft(S,Y,I)}),p.l&&Lu({},function(I,Y){ft(S,Y,I)})}function hf(p,S,I){I=Math.min(p.i.length,I);var Y=p.l?w(p.l.Na,p.l,p):null;e:{var ie=p.i;let de=-1;for(;;){const we=["count="+I];de==-1?0<I?(de=ie[0].g,we.push("ofs="+de)):de=0:we.push("ofs="+de);let Je=!0;for(let Jt=0;Jt<I;Jt++){let et=ie[Jt].g;const ln=ie[Jt].map;if(et-=de,0>et)de=Math.max(0,ie[Jt].g-100),Je=!1;else try{yi(ln,we,"req"+et+"_")}catch{Y&&Y(ln)}}if(Je){Y=we.join("&");break e}}}return p=p.i.splice(0,I),S.D=p,Y}function pf(p){if(!p.g&&!p.u){p.Y=1;var S=p.Fa;B||z(),G||(B(),G=!0),X.add(S,p),p.v=0}}function qu(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=It(w(p.Fa,p),Gu(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,mf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=It(w(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),tl(this),mf(this))};function Ya(p){p.A!=null&&(c.clearTimeout(p.A),p.A=null)}function mf(p){p.g=new gn(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var S=ir(p.qa);ft(S,"RID","rpc"),ft(S,"SID",p.K),ft(S,"AID",p.T),ft(S,"CI",p.F?"0":"1"),!p.F&&p.ja&&ft(S,"TO",p.ja),ft(S,"TYPE","xmlhttp"),Ka(p,S),p.m&&p.o&&on(S,p.m,p.o),p.L&&(p.g.I=p.L);var I=p.g;p=p.ia,I.L=1,I.v=Ua(ir(S)),I.m=null,I.P=!0,qr(I,p)}t.Za=function(){this.C!=null&&(this.C=null,tl(this),qu(this),yt(19))};function rl(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function gf(p,S){var I=null;if(p.g==S){rl(p),Ya(p),p.g=null;var Y=2}else if(Ou(p.h,S))I=S.D,jn(p.h,S),Y=1;else return;if(p.G!=0){if(S.o)if(Y==1){I=S.m?S.m.length:0,S=Date.now()-S.F;var ie=p.B;Y=ui(),Ye(Y,new Lt(Y,I)),nl(p)}else pf(p);else if(ie=S.s,ie==3||ie==0&&0<S.X||!(Y==1&&zm(p,S)||Y==2&&qu(p)))switch(I&&0<I.length&&(S=p.h,S.i=S.i.concat(I)),ie){case 1:Zi(p,5);break;case 4:Zi(p,10);break;case 3:Zi(p,6);break;default:Zi(p,2)}}}function Gu(p,S){let I=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(I*=2),I*S}function Zi(p,S){if(p.j.info("Error code "+S),S==2){var I=w(p.fb,p),Y=p.Xa;const ie=!Y;Y=new qt(Y||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ja(Y,"https"),Ua(Y),ie?Ha(Y.toString(),I):Kr(Y.toString(),I)}else yt(2);p.G=0,p.l&&p.l.sa(S),yf(p),ff(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function yf(p){if(p.G=0,p.ka=[],p.l){const S=Vu(p.h);(S.length!=0||p.i.length!=0)&&(L(p.ka,S),L(p.ka,p.i),p.h.i.length=0,P(p.i),p.i.length=0),p.l.ra()}}function vf(p,S,I){var Y=I instanceof qt?ir(I):new qt(I);if(Y.g!="")S&&(Y.g=S+"."+Y.g),Is(Y,Y.s);else{var ie=c.location;Y=ie.protocol,S=S?S+"."+ie.hostname:ie.hostname,ie=+ie.port;var de=new qt(null);Y&&ja(de,Y),S&&(de.g=S),ie&&Is(de,ie),I&&(de.l=I),Y=de}return I=p.D,S=p.ya,I&&S&&ft(Y,I,S),ft(Y,"VER",p.la),Ka(p,Y),Y}function _f(p,S,I){if(S&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=p.Ca&&!p.pa?new lt(new Ns({eb:I})):new lt(p.pa),S.Ha(p.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wf(){}t=wf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function il(){}il.prototype.g=function(p,S){return new Un(p,S)};function Un(p,S){ot.call(this),this.g=new el(S),this.l=p,this.h=S&&S.messageUrlParams||null,p=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(p?p["X-WebChannel-Content-Type"]=S.messageContentType:p={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(p?p["X-WebChannel-Client-Profile"]=S.va:p={"X-WebChannel-Client-Profile":S.va}),this.g.S=p,(p=S&&S.Sb)&&!H(p)&&(this.g.m=p),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!H(S)&&(this.g.D=S,p=this.h,p!==null&&S in p&&(p=this.h,S in p&&delete p[S])),this.j=new bi(this)}M(Un,ot),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){$u(this.g)},Un.prototype.o=function(p){var S=this.g;if(typeof p=="string"){var I={};I.__data__=p,p=I}else this.u&&(I={},I.__data__=an(p),p=I);S.i.push(new Ko(S.Ya++,p)),S.G==3&&nl(S)},Un.prototype.N=function(){this.g.l=null,delete this.j,$u(this.g),delete this.g,Un.aa.N.call(this)};function bf(p){br.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var S=p.__sm__;if(S){e:{for(const I in S){p=I;break e}p=void 0}(this.i=p)&&(p=this.i,S=S!==null&&p in S?S[p]:void 0),this.data=S}else this.data=p}M(bf,br);function Ef(){nr.call(this),this.status=1}M(Ef,nr);function bi(p){this.g=p}M(bi,wf),bi.prototype.ua=function(){Ye(this.g,"a")},bi.prototype.ta=function(p){Ye(this.g,new bf(p))},bi.prototype.sa=function(p){Ye(this.g,new Ef)},bi.prototype.ra=function(){Ye(this.g,"b")},il.prototype.createWebChannel=il.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,DC=function(){return new il},NC=function(){return ui()},IC=Er,W0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fi.NO_ERROR=0,fi.TIMEOUT=8,fi.HTTP_ERROR=6,Wh=fi,Tr.COMPLETE="complete",kC=Tr,Fr.EventType=tr,tr.OPEN="a",tr.CLOSE="b",tr.ERROR="c",tr.MESSAGE="d",ot.prototype.listen=ot.prototype.K,Qc=Fr,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,RC=lt}).apply(typeof Mh<"u"?Mh:typeof self<"u"?self:typeof window<"u"?window:{});const NS="@firebase/firestore",DS="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kn.UNAUTHENTICATED=new kn(null),kn.GOOGLE_CREDENTIALS=new kn("google-credentials-uid"),kn.FIRST_PARTY=new kn("first-party-uid"),kn.MOCK_USER=new kn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tu="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=new c_("@firebase/firestore");function Bl(){return Do.logLevel}function Te(t,...e){if(Do.logLevel<=Qe.DEBUG){const n=e.map(p_);Do.debug(`Firestore (${Tu}): ${t}`,...n)}}function Es(t,...e){if(Do.logLevel<=Qe.ERROR){const n=e.map(p_);Do.error(`Firestore (${Tu}): ${t}`,...n)}}function hu(t,...e){if(Do.logLevel<=Qe.WARN){const n=e.map(p_);Do.warn(`Firestore (${Tu}): ${t}`,...n)}}function p_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,MC(t,r,n)}function MC(t,e,n){let r=`FIRESTORE (${Tu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Es(r),new Error(r)}function ut(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||MC(e,s,r)}function je(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Hi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(kn.UNAUTHENTICATED))}shutdown(){}}class WL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QL{constructor(e){this.t=e,this.currentUser=kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ut(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let o=new ya;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ya,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const f=o;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},c=f=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(f=>c(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ya)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ut(typeof r.accessToken=="string",31837,{l:r}),new PC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string",2055,{h:e}),new kn(e)}}class ZL{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=kn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JL{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ZL(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(kn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class MS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class e9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ut(this.o===void 0,3512);const r=o=>{o.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,Te("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new MS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ut(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new MS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=t9(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function qe(t,e){return t<e?-1:t>e?1:0}function Q0(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return qe(r,s);{const o=OC(),l=n9(o.encode(PS(t,n)),o.encode(PS(e,n)));return l!==0?l:qe(r,s)}}n+=r>65535?2:1}return qe(t.length,e.length)}function PS(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function n9(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return qe(t[n],e[n]);return qe(t.length,e.length)}function pu(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=-62135596800,VS=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*VS);return new wt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Se(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<OS)throw new Se(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/VS}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-OS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new wt(0,0))}static max(){return new ze(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="__name__";class Ii{constructor(e,n,r){n===void 0?n=0:n>e.length&&Pe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Pe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ii.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ii?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=Ii.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return qe(e.length,n.length)}static compareSegments(e,n){const r=Ii.isNumericId(e),s=Ii.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ii.extractNumericId(e).compare(Ii.extractNumericId(n)):Q0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ga.fromString(e.substring(4,e.length-2))}}class _t extends Ii{construct(e,n,r){return new _t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new _t(n)}static emptyPath(){return new _t([])}}const r9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tn extends Ii{construct(e,n,r){return new Tn(e,n,r)}static isValidIdentifier(e){return r9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===LS}static keyField(){return new Tn([LS])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Se(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Se(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Se(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(r+=c,s++):(o(),s++)}if(o(),l)throw new Se(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tn(n)}static emptyPath(){return new Tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(_t.fromString(e))}static fromName(e){return new ke(_t.fromString(e).popFirst(5))}static empty(){return new ke(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _t.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new _t(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd=-1;function i9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ze.fromTimestamp(r===1e9?new wt(n+1,0):new wt(n,r));return new ba(s,ke.empty(),e)}function s9(t){return new ba(t.readTime,t.key,Sd)}class ba{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ba(ze.min(),ke.empty(),Sd)}static max(){return new ba(ze.max(),ke.empty(),Sd)}}function a9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ke.comparator(t.documentKey,e.documentKey),n!==0?n:qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Su(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==o9)throw t;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _e((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof _e?n:_e.resolve(n)}catch(n){return _e.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):_e.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):_e.reject(n)}static resolve(e){return new _e((n,r)=>{n(e)})}static reject(e){return new _e((n,r)=>{r(e)})}static waitFor(e){return new _e((n,r)=>{let s=0,o=0,l=!1;e.forEach(c=>{++s,c.next(()=>{++o,l&&o===s&&n()},f=>r(f))}),l=!0,o===s&&n()})}static or(e){let n=_e.resolve(!1);for(const r of e)n=n.next(s=>s?_e.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new _e((r,s)=>{const o=e.length,l=new Array(o);let c=0;for(let f=0;f<o;f++){const h=f;n(e[h]).next(m=>{l[h]=m,++c,c===o&&r(l)},m=>s(m))}})}static doWhile(e,n){return new _e((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function u9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Au(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}am.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=-1;function om(t){return t==null}function xp(t){return t===0&&1/t==-1/0}function c9(t){return typeof t=="number"&&Number.isInteger(t)&&!xp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="";function d9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=zS(e)),e=f9(t.get(n),e);return zS(e)}function f9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case LC:n+="";break;default:n+=o}}return n}function zS(t){return t+LC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ka(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n){this.comparator=e,this.root=n||En.EMPTY}insert(e,n){return new Rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ph(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ph(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ph(this.root,e,this.comparator,!0)}}class Ph{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class En{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??En.RED,this.left=s??En.EMPTY,this.right=o??En.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new En(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return En.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return En.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new En(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new US(this.data.getIterator())}getIteratorFrom(e){return new US(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof rn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rn(this.comparator);return n.data=e,n}}class US{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new mr([])}unionWith(e){let n=new rn(Tn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new jC("Invalid base64 string: "+o):o}}(e);return new Sn(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new Sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sn.EMPTY_BYTE_STRING=new Sn("");const h9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ea(t){if(ut(!!t,39018),typeof t=="string"){let e=0;const n=h9.exec(t);if(ut(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Bt(t.seconds),nanos:Bt(t.nanos)}}function Bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ta(t){return typeof t=="string"?Sn.fromBase64String(t):Sn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="server_timestamp",BC="__type__",HC="__previous_value__",$C="__local_write_time__";function g_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[BC])===null||n===void 0?void 0:n.stringValue)===UC}function lm(t){const e=t.mapValue.fields[HC];return g_(e)?lm(e):e}function Ad(t){const e=Ea(t.mapValue.fields[$C].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e,n,r,s,o,l,c,f,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=m}}const Cp="(default)";class xd{constructor(e,n){this.projectId=e,this.database=n||Cp}static empty(){return new xd("","")}get isDefaultDatabase(){return this.database===Cp}isEqual(e){return e instanceof xd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="__type__",m9="__max__",Oh={mapValue:{}},qC="__vector__",Rp="value";function Sa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?g_(t)?4:y9(t)?9007199254740991:g9(t)?10:11:Pe(28295,{value:t})}function Ui(t,e){if(t===e)return!0;const n=Sa(t);if(n!==Sa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ad(t).isEqual(Ad(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Ea(s.timestampValue),c=Ea(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Ta(s.bytesValue).isEqual(Ta(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return Bt(s.geoPointValue.latitude)===Bt(o.geoPointValue.latitude)&&Bt(s.geoPointValue.longitude)===Bt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Bt(s.integerValue)===Bt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Bt(s.doubleValue),c=Bt(o.doubleValue);return l===c?xp(l)===xp(c):isNaN(l)&&isNaN(c)}return!1}(t,e);case 9:return pu(t.arrayValue.values||[],e.arrayValue.values||[],Ui);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},c=o.mapValue.fields||{};if(jS(l)!==jS(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!Ui(l[f],c[f])))return!1;return!0}(t,e);default:return Pe(52216,{left:t})}}function Cd(t,e){return(t.values||[]).find(n=>Ui(n,e))!==void 0}function mu(t,e){if(t===e)return 0;const n=Sa(t),r=Sa(e);if(n!==r)return qe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(t.booleanValue,e.booleanValue);case 2:return function(o,l){const c=Bt(o.integerValue||o.doubleValue),f=Bt(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(t,e);case 3:return BS(t.timestampValue,e.timestampValue);case 4:return BS(Ad(t),Ad(e));case 5:return Q0(t.stringValue,e.stringValue);case 6:return function(o,l){const c=Ta(o),f=Ta(l);return c.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),f=l.split("/");for(let h=0;h<c.length&&h<f.length;h++){const m=qe(c[h],f[h]);if(m!==0)return m}return qe(c.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const c=qe(Bt(o.latitude),Bt(l.latitude));return c!==0?c:qe(Bt(o.longitude),Bt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return HS(t.arrayValue,e.arrayValue);case 10:return function(o,l){var c,f,h,m;const _=o.fields||{},w=l.fields||{},C=(c=_[Rp])===null||c===void 0?void 0:c.arrayValue,M=(f=w[Rp])===null||f===void 0?void 0:f.arrayValue,P=qe(((h=C?.values)===null||h===void 0?void 0:h.length)||0,((m=M?.values)===null||m===void 0?void 0:m.length)||0);return P!==0?P:HS(C,M)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Oh.mapValue&&l===Oh.mapValue)return 0;if(o===Oh.mapValue)return 1;if(l===Oh.mapValue)return-1;const c=o.fields||{},f=Object.keys(c),h=l.fields||{},m=Object.keys(h);f.sort(),m.sort();for(let _=0;_<f.length&&_<m.length;++_){const w=Q0(f[_],m[_]);if(w!==0)return w;const C=mu(c[f[_]],h[m[_]]);if(C!==0)return C}return qe(f.length,m.length)}(t.mapValue,e.mapValue);default:throw Pe(23264,{Pe:n})}}function BS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return qe(t,e);const n=Ea(t),r=Ea(e),s=qe(n.seconds,r.seconds);return s!==0?s:qe(n.nanos,r.nanos)}function HS(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=mu(n[s],r[s]);if(o)return o}return qe(n.length,r.length)}function gu(t){return Z0(t)}function Z0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ea(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ta(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ke.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=Z0(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${Z0(n.fields[l])}`;return s+"}"}(t.mapValue):Pe(61005,{value:t})}function Qh(t){switch(Sa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lm(t);return e?16+Qh(e):16;case 5:return 2*t.stringValue.length;case 6:return Ta(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Qh(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ka(r.fields,(o,l)=>{s+=o.length+Qh(l)}),s}(t.mapValue);default:throw Pe(13486,{value:t})}}function $S(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function J0(t){return!!t&&"integerValue"in t}function y_(t){return!!t&&"arrayValue"in t}function FS(t){return!!t&&"nullValue"in t}function qS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zh(t){return!!t&&"mapValue"in t}function g9(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[FC])===null||n===void 0?void 0:n.stringValue)===qC}function nd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ka(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=nd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function y9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===m9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.value=e}static empty(){return new Wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nd(n)}setAll(e){let n=Tn.emptyPath(),r={},s=[];e.forEach((l,c)=>{if(!n.isImmediateParentOf(c)){const f=this.getFieldsMap(n);this.applyChanges(f,r,s),r={},s=[],n=c.popLast()}l?r[c.lastSegment()]=nd(l):s.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ui(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Zh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ka(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Wn(nd(this.value))}}function GC(t){const e=[];return ka(t.fields,(n,r)=>{const s=new Tn([n]);if(Zh(r)){const o=GC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n,r,s,o,l,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new In(e,0,ze.min(),ze.min(),ze.min(),Wn.empty(),0)}static newFoundDocument(e,n,r,s){return new In(e,1,n,ze.min(),r,s,0)}static newNoDocument(e,n){return new In(e,2,n,ze.min(),ze.min(),Wn.empty(),0)}static newUnknownDocument(e,n){return new In(e,3,n,ze.min(),ze.min(),Wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n){this.position=e,this.inclusive=n}}function GS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?r=ke.comparator(ke.fromName(l.referenceValue),n.key):r=mu(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function KS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ui(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n="asc"){this.field=e,this.dir=n}}function v9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{}class Wt extends KC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new w9(e,n,r):n==="array-contains"?new T9(e,r):n==="in"?new S9(e,r):n==="not-in"?new A9(e,r):n==="array-contains-any"?new x9(e,r):new Wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new b9(e,r):new E9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(mu(n,this.value)):n!==null&&Sa(this.value)===Sa(n)&&this.matchesComparison(mu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ri extends KC{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new ri(e,n)}matches(e){return YC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function YC(t){return t.op==="and"}function XC(t){return _9(t)&&YC(t)}function _9(t){for(const e of t.filters)if(e instanceof ri)return!1;return!0}function ev(t){if(t instanceof Wt)return t.field.canonicalString()+t.op.toString()+gu(t.value);if(XC(t))return t.filters.map(e=>ev(e)).join(",");{const e=t.filters.map(n=>ev(n)).join(",");return`${t.op}(${e})`}}function WC(t,e){return t instanceof Wt?function(r,s){return s instanceof Wt&&r.op===s.op&&r.field.isEqual(s.field)&&Ui(r.value,s.value)}(t,e):t instanceof ri?function(r,s){return s instanceof ri&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,c)=>o&&WC(l,s.filters[c]),!0):!1}(t,e):void Pe(19439)}function QC(t){return t instanceof Wt?function(n){return`${n.field.canonicalString()} ${n.op} ${gu(n.value)}`}(t):t instanceof ri?function(n){return n.op.toString()+" {"+n.getFilters().map(QC).join(" ,")+"}"}(t):"Filter"}class w9 extends Wt{constructor(e,n,r){super(e,n,r),this.key=ke.fromName(r.referenceValue)}matches(e){const n=ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class b9 extends Wt{constructor(e,n){super(e,"in",n),this.keys=ZC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class E9 extends Wt{constructor(e,n){super(e,"not-in",n),this.keys=ZC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ZC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ke.fromName(r.referenceValue))}class T9 extends Wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return y_(n)&&Cd(n.arrayValue,this.value)}}class S9 extends Wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Cd(this.value.arrayValue,n)}}class A9 extends Wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Cd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Cd(this.value.arrayValue,n)}}class x9 extends Wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!y_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Cd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(e,n=null,r=[],s=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=c,this.Ie=null}}function YS(t,e=null,n=[],r=[],s=null,o=null,l=null){return new C9(t,e,n,r,s,o,l)}function v_(t){const e=je(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ev(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),om(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>gu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>gu(r)).join(",")),e.Ie=n}return e.Ie}function __(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!v9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!WC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!KS(t.startAt,e.startAt)&&KS(t.endAt,e.endAt)}function tv(t){return ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n=null,r=[],s=[],o=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function R9(t,e,n,r,s,o,l,c){return new xu(t,e,n,r,s,o,l,c)}function JC(t){return new xu(t)}function XS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function eR(t){return t.collectionGroup!==null}function rd(t){const e=je(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new rn(Tn.comparator);return l.filters.forEach(f=>{f.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Rd(o,r))}),n.has(Tn.keyField().canonicalString())||e.Ee.push(new Rd(Tn.keyField(),r))}return e.Ee}function Mi(t){const e=je(t);return e.de||(e.de=k9(e,rd(t))),e.de}function k9(t,e){if(t.limitType==="F")return YS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Rd(s.field,o)});const n=t.endAt?new kp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new kp(t.startAt.position,t.startAt.inclusive):null;return YS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function nv(t,e){const n=t.filters.concat([e]);return new xu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rv(t,e,n){return new xu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function um(t,e){return __(Mi(t),Mi(e))&&t.limitType===e.limitType}function tR(t){return`${v_(Mi(t))}|lt:${t.limitType}`}function Hl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>QC(s)).join(", ")}]`),om(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>gu(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>gu(s)).join(",")),`Target(${r})`}(Mi(t))}; limitType=${t.limitType})`}function cm(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ke.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of rd(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(l,c,f){const h=GS(l,c,f);return l.inclusive?h<=0:h<0}(r.startAt,rd(r),s)||r.endAt&&!function(l,c,f){const h=GS(l,c,f);return l.inclusive?h>=0:h>0}(r.endAt,rd(r),s))}(t,e)}function I9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nR(t){return(e,n)=>{let r=!1;for(const s of rd(t)){const o=N9(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function N9(t,e,n){const r=t.field.isKeyField()?ke.comparator(e.key,n.key):function(o,l,c){const f=l.data.field(o),h=c.data.field(o);return f!==null&&h!==null?mu(f,h):Pe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Pe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ka(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return zC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9=new Rt(ke.comparator);function Ts(){return D9}const rR=new Rt(ke.comparator);function Zc(...t){let e=rR;for(const n of t)e=e.insert(n.key,n);return e}function iR(t){let e=rR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function wo(){return id()}function sR(){return id()}function id(){return new jo(t=>t.toString(),(t,e)=>t.isEqual(e))}const M9=new Rt(ke.comparator),P9=new rn(ke.comparator);function Ze(...t){let e=P9;for(const n of t)e=e.add(n);return e}const O9=new rn(qe);function V9(){return O9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xp(e)?"-0":e}}function aR(t){return{integerValue:""+t}}function L9(t,e){return c9(e)?aR(e):w_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(){this._=void 0}}function z9(t,e,n){return t instanceof Ip?function(s,o){const l={fields:{[BC]:{stringValue:UC},[$C]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&g_(o)&&(o=lm(o)),o&&(l.fields[HC]=o),{mapValue:l}}(n,e):t instanceof kd?lR(t,e):t instanceof Id?uR(t,e):function(s,o){const l=oR(s,o),c=WS(l)+WS(s.Re);return J0(l)&&J0(s.Re)?aR(c):w_(s.serializer,c)}(t,e)}function j9(t,e,n){return t instanceof kd?lR(t,e):t instanceof Id?uR(t,e):n}function oR(t,e){return t instanceof Np?function(r){return J0(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Ip extends dm{}class kd extends dm{constructor(e){super(),this.elements=e}}function lR(t,e){const n=cR(e);for(const r of t.elements)n.some(s=>Ui(s,r))||n.push(r);return{arrayValue:{values:n}}}class Id extends dm{constructor(e){super(),this.elements=e}}function uR(t,e){let n=cR(e);for(const r of t.elements)n=n.filter(s=>!Ui(s,r));return{arrayValue:{values:n}}}class Np extends dm{constructor(e,n){super(),this.serializer=e,this.Re=n}}function WS(t){return Bt(t.integerValue||t.doubleValue)}function cR(t){return y_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function U9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof kd&&s instanceof kd||r instanceof Id&&s instanceof Id?pu(r.elements,s.elements,Ui):r instanceof Np&&s instanceof Np?Ui(r.Re,s.Re):r instanceof Ip&&s instanceof Ip}(t.transform,e.transform)}class B9{constructor(e,n){this.version=e,this.transformResults=n}}class yr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fm{}function dR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hm(t.key,yr.none()):new Kd(t.key,t.data,yr.none());{const n=t.data,r=Wn.empty();let s=new rn(Tn.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Ia(t.key,r,new mr(s.toArray()),yr.none())}}function H9(t,e,n){t instanceof Kd?function(s,o,l){const c=s.value.clone(),f=ZS(s.fieldTransforms,o,l.transformResults);c.setAll(f),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ia?function(s,o,l){if(!Jh(s.precondition,o))return void o.convertToUnknownDocument(l.version);const c=ZS(s.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(fR(s)),f.setAll(c),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function sd(t,e,n,r){return t instanceof Kd?function(o,l,c,f){if(!Jh(o.precondition,l))return c;const h=o.value.clone(),m=JS(o.fieldTransforms,f,l);return h.setAll(m),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ia?function(o,l,c,f){if(!Jh(o.precondition,l))return c;const h=JS(o.fieldTransforms,f,l),m=l.data;return m.setAll(fR(o)),m.setAll(h),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))}(t,e,n,r):function(o,l,c){return Jh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(t,e,n)}function $9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=oR(r.transform,s||null);o!=null&&(n===null&&(n=Wn.empty()),n.set(r.field,o))}return n||null}function QS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&pu(r,s,(o,l)=>U9(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Kd extends fm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ia extends fm{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function fR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ZS(t,e,n){const r=new Map;ut(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,c=e.data.field(o.field);r.set(o.field,j9(l,c,n[s]))}return r}function JS(t,e,n){const r=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);r.set(s.field,z9(o,l,e))}return r}class hm extends fm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class F9 extends fm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&H9(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=sd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=sd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=sR();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=n.has(s.key)?null:c;const f=dR(l,c);f!==null&&r.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(ze.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ze())}isEqual(e){return this.batchId===e.batchId&&pu(this.mutations,e.mutations,(n,r)=>QS(n,r))&&pu(this.baseMutations,e.baseMutations,(n,r)=>QS(n,r))}}class b_{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ut(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return M9}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new b_(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,nt;function Y9(t){switch(t){case ve.OK:return Pe(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return Pe(15467,{code:t})}}function hR(t){if(t===void 0)return Es("GRPC error has no .code"),ve.UNKNOWN;switch(t){case Yt.OK:return ve.OK;case Yt.CANCELLED:return ve.CANCELLED;case Yt.UNKNOWN:return ve.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return ve.INTERNAL;case Yt.UNAVAILABLE:return ve.UNAVAILABLE;case Yt.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Yt.NOT_FOUND:return ve.NOT_FOUND;case Yt.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Yt.ABORTED:return ve.ABORTED;case Yt.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Yt.DATA_LOSS:return ve.DATA_LOSS;default:return Pe(39323,{code:t})}}(nt=Yt||(Yt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9=new ga([4294967295,4294967295],0);function eA(t){const e=OC().encode(t),n=new CC;return n.update(e),new Uint8Array(n.digest())}function tA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ga([n,r],0),new ga([s,o],0)]}class E_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Jc(`Invalid padding: ${n}`);if(r<0)throw new Jc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Jc(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ga.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(ga.fromNumber(r)));return s.compare(X9)===1&&(s=new ga([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=eA(e),[r,s]=tA(n);for(let o=0;o<this.hashCount;o++){const l=this.we(r,s,o);if(!this.be(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new E_(o,s,n);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.pe===0)return;const n=eA(e),[r,s]=tA(n);for(let o=0;o<this.hashCount;o++){const l=this.we(r,s,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Jc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Yd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new pm(ze.min(),s,new Rt(qe),Ts(),Ze())}}class Yd{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Yd(r,n,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class pR{constructor(e,n){this.targetId=e,this.Ce=n}}class mR{constructor(e,n,r=Sn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class nA{constructor(){this.Fe=0,this.Me=rA(),this.xe=Sn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ze(),n=Ze(),r=Ze();return this.Me.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Pe(38017,{changeType:o})}}),new Yd(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=rA()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ut(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class W9{constructor(e){this.ze=e,this.je=new Map,this.He=Ts(),this.Je=Vh(),this.Ye=Vh(),this.Ze=new Rt(qe)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const o=s.target;if(tv(o))if(r===0){const l=new ke(o.path);this.tt(n,l,In.newNoDocument(l,ze.min()))}else ut(r===1,20013,{expectedCount:r});else{const l=this.ut(n);if(l!==r){const c=this.ct(e),f=c?this.lt(c,e,l):1;if(f!==0){this.st(n);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let l,c;try{l=Ta(r).toUint8Array()}catch(f){if(f instanceof jC)return hu("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{c=new E_(l,s,o)}catch(f){return hu(f instanceof Jc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return c.pe===0?null:c}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const l=this.ze.Pt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,o,null),s++)}),s}It(e){const n=new Map;this.je.forEach((o,l)=>{const c=this._t(l);if(c){if(o.current&&tv(c.target)){const f=new ke(c.target.path);this.Et(f).has(l)||this.dt(l,f)||this.tt(l,f,In.newNoDocument(f,e))}o.Le&&(n.set(l,o.qe()),o.Qe())}});let r=Ze();this.Ye.forEach((o,l)=>{let c=!0;l.forEachWhile(f=>{const h=this._t(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.He.forEach((o,l)=>l.setReadTime(e));const s=new pm(e,n,this.Ze,this.He,r);return this.He=Ts(),this.Je=Vh(),this.Ye=Vh(),this.Ze=new Rt(qe),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new nA,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new rn(qe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new rn(qe),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new nA),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Vh(){return new Rt(ke.comparator)}function rA(){return new Rt(ke.comparator)}const Q9={asc:"ASCENDING",desc:"DESCENDING"},Z9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J9={and:"AND",or:"OR"};class ez{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function iv(t,e){return t.useProto3Json||om(e)?e:{value:e}}function Dp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function tz(t,e){return Dp(t,e.toTimestamp())}function Pi(t){return ut(!!t,49232),ze.fromTimestamp(function(n){const r=Ea(n);return new wt(r.seconds,r.nanos)}(t))}function T_(t,e){return sv(t,e).canonicalString()}function sv(t,e){const n=function(s){return new _t(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function yR(t){const e=_t.fromString(t);return ut(ER(e),10190,{key:e.toString()}),e}function av(t,e){return T_(t.databaseId,e.path)}function i0(t,e){const n=yR(e);if(n.get(1)!==t.databaseId.projectId)throw new Se(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Se(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ke(_R(n))}function vR(t,e){return T_(t.databaseId,e)}function nz(t){const e=yR(t);return e.length===4?_t.emptyPath():_R(e)}function ov(t){return new _t(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _R(t){return ut(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function iA(t,e,n){return{name:av(t,e),fields:n.value.mapValue.fields}}function rz(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Pe(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(h,m){return h.useProto3Json?(ut(m===void 0||typeof m=="string",58123),Sn.fromBase64String(m||"")):(ut(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Sn.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(h){const m=h.code===void 0?ve.UNKNOWN:hR(h.code);return new Se(m,h.message||"")}(l);n=new mR(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=i0(t,r.document.name),o=Pi(r.document.updateTime),l=r.document.createTime?Pi(r.document.createTime):ze.min(),c=new Wn({mapValue:{fields:r.document.fields}}),f=In.newFoundDocument(s,o,l,c),h=r.targetIds||[],m=r.removedTargetIds||[];n=new ep(h,m,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=i0(t,r.document),o=r.readTime?Pi(r.readTime):ze.min(),l=In.newNoDocument(s,o),c=r.removedTargetIds||[];n=new ep([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=i0(t,r.document),o=r.removedTargetIds||[];n=new ep([],o,s,null)}else{if(!("filter"in e))return Pe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new K9(s,o),c=r.targetId;n=new pR(c,l)}}return n}function iz(t,e){let n;if(e instanceof Kd)n={update:iA(t,e.key,e.value)};else if(e instanceof hm)n={delete:av(t,e.key)};else if(e instanceof Ia)n={update:iA(t,e.key,e.data),updateMask:hz(e.fieldMask)};else{if(!(e instanceof F9))return Pe(16599,{ft:e.type});n={verify:av(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof Ip)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof kd)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Id)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Np)return{fieldPath:l.field.canonicalString(),increment:c.Re};throw Pe(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:tz(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Pe(27497)}(t,e.precondition)),n}function sz(t,e){return t&&t.length>0?(ut(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?Pi(s.updateTime):Pi(o);return l.isEqual(ze.min())&&(l=Pi(o)),new B9(l,s.transformResults||[])}(n,e))):[]}function az(t,e){return{documents:[vR(t,e.path)]}}function oz(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vR(t,s);const o=function(h){if(h.length!==0)return bR(ri.create(h,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(h){if(h.length!==0)return h.map(m=>function(w){return{field:$l(w.field),direction:cz(w.dir)}}(m))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=iv(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{gt:n,parent:s}}function lz(t){let e=nz(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ut(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(_){const w=wR(_);return w instanceof ri&&XC(w)?w.getFilters():[w]}(n.where));let l=[];n.orderBy&&(l=function(_){return _.map(w=>function(M){return new Rd(Fl(M.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(w))}(n.orderBy));let c=null;n.limit&&(c=function(_){let w;return w=typeof _=="object"?_.value:_,om(w)?null:w}(n.limit));let f=null;n.startAt&&(f=function(_){const w=!!_.before,C=_.values||[];return new kp(C,w)}(n.startAt));let h=null;return n.endAt&&(h=function(_){const w=!_.before,C=_.values||[];return new kp(C,w)}(n.endAt)),R9(e,s,l,o,c,"F",f,h)}function uz(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fl(n.unaryFilter.field);return Wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Fl(n.unaryFilter.field);return Wt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Fl(n.unaryFilter.field);return Wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Fl(n.unaryFilter.field);return Wt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}}(t):t.fieldFilter!==void 0?function(n){return Wt.create(Fl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ri.create(n.compositeFilter.filters.map(r=>wR(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}}(n.compositeFilter.op))}(t):Pe(30097,{filter:t})}function cz(t){return Q9[t]}function dz(t){return Z9[t]}function fz(t){return J9[t]}function $l(t){return{fieldPath:t.canonicalString()}}function Fl(t){return Tn.fromServerFormat(t.fieldPath)}function bR(t){return t instanceof Wt?function(n){if(n.op==="=="){if(qS(n.value))return{unaryFilter:{field:$l(n.field),op:"IS_NAN"}};if(FS(n.value))return{unaryFilter:{field:$l(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qS(n.value))return{unaryFilter:{field:$l(n.field),op:"IS_NOT_NAN"}};if(FS(n.value))return{unaryFilter:{field:$l(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$l(n.field),op:dz(n.op),value:n.value}}}(t):t instanceof ri?function(n){const r=n.getFilters().map(s=>bR(s));return r.length===1?r[0]:{compositeFilter:{op:fz(n.op),filters:r}}}(t):Pe(54877,{filter:t})}function hz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ER(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n,r,s,o=ze.min(),l=ze.min(),c=Sn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new da(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(e){this.wt=e}}function mz(t){const e=lz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(){this.Cn=new yz}addToCollectionParentIndex(e,n){return this.Cn.add(n),_e.resolve()}getCollectionParents(e,n){return _e.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return _e.resolve()}deleteFieldIndex(e,n){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,n){return _e.resolve()}getDocumentsMatchingTarget(e,n){return _e.resolve(null)}getIndexType(e,n){return _e.resolve(0)}getFieldIndexes(e,n){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,n){return _e.resolve(ba.min())}getMinOffsetFromCollectionGroup(e,n){return _e.resolve(ba.min())}updateCollectionGroup(e,n,r){return _e.resolve()}updateIndexEntries(e,n){return _e.resolve()}}class yz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new rn(_t.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new rn(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TR=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(TR,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new yu(0)}static lr(){return new yu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="LruGarbageCollector",vz=1048576;function oA([t,e],[n,r]){const s=qe(t,n);return s===0?qe(e,r):s}class _z{constructor(e){this.Er=e,this.buffer=new rn(oA),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();oA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class wz{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Te(aA,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Au(n)?Te(aA,"Ignoring IndexedDB error during garbage collection: ",n):await Su(n)}await this.mr(3e5)})}}class bz{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return _e.resolve(am.le);const r=new _z(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(sA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sA):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,o,l,c,f,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),s=this.params.maximumSequenceNumbersToCollect):s=_,l=Date.now(),this.nthSequenceNumber(e,s))).next(_=>(r=_,c=Date.now(),this.removeTargets(e,r,n))).next(_=>(o=_,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(_=>(h=Date.now(),Bl()<=Qe.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${o} targets in `+(f-c)+`ms
	Removed ${_} documents in `+(h-f)+`ms
Total Duration: ${h-m}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:_})))}}function Ez(t,e){return new bz(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(){this.changes=new jo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?_e.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&sd(r.mutation,s,mr.empty(),wt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ze()){const s=wo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let l=Zc();return o.forEach((c,f)=>{l=l.insert(c,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=wo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ze()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,c)=>{n.set(l,c)})})}computeViews(e,n,r,s){let o=Ts();const l=id(),c=function(){return id()}();return n.forEach((f,h)=>{const m=r.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof Ia)?o=o.insert(h.key,h):m!==void 0?(l.set(h.key,m.mutation.getFieldMask()),sd(m.mutation,h,m.mutation.getFieldMask(),wt.now())):l.set(h.key,mr.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((h,m)=>l.set(h,m)),n.forEach((h,m)=>{var _;return c.set(h,new Sz(m,(_=l.get(h))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,n){const r=id();let s=new Rt((l,c)=>l-c),o=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const c of l)c.keys().forEach(f=>{const h=n.get(f);if(h===null)return;let m=r.get(f)||mr.empty();m=c.applyToLocalView(h,m),r.set(f,m);const _=(s.get(c.batchId)||Ze()).add(f);s=s.insert(c.batchId,_)})}).next(()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),h=f.key,m=f.value,_=sR();m.forEach(w=>{if(!o.has(w)){const C=dR(n.get(w),r.get(w));C!==null&&_.set(w,C),o=o.add(w)}}),l.push(this.documentOverlayCache.saveOverlays(e,h,_))}return _e.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(l){return ke.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):eR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):_e.resolve(wo());let c=Sd,f=o;return l.next(h=>_e.forEach(h,(m,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),o.get(m)?_e.resolve():this.remoteDocumentCache.getEntry(e,m).next(w=>{f=f.insert(m,w)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,f,h,Ze())).next(m=>({batchId:c,changes:iR(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ke(n)).next(r=>{let s=Zc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let l=Zc();return this.indexManager.getCollectionParents(e,o).next(c=>_e.forEach(c,f=>{const h=function(_,w){return new xu(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(m=>{m.forEach((_,w)=>{l=l.insert(_,w)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(l=>{o.forEach((f,h)=>{const m=h.getKey();l.get(m)===null&&(l=l.insert(m,In.newInvalidDocument(m)))});let c=Zc();return l.forEach((f,h)=>{const m=o.get(f);m!==void 0&&sd(m.mutation,h,mr.empty(),wt.now()),cm(n,h)&&(c=c.insert(f,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return _e.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Pi(s.createTime)}}(n)),_e.resolve()}getNamedQuery(e,n){return _e.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:mz(s.bundledQuery),readTime:Pi(s.readTime)}}(n)),_e.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(){this.overlays=new Rt(ke.comparator),this.Qr=new Map}getOverlay(e,n){return _e.resolve(this.overlays.get(n))}getOverlays(e,n){const r=wo();return _e.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.St(e,n,o)}),_e.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),_e.resolve()}getOverlaysForCollection(e,n,r){const s=wo(),o=n.length+1,l=new ke(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const f=c.getNext().value,h=f.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&f.largestBatchId>r&&s.set(f.getKey(),f)}return _e.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new Rt((h,m)=>h-m);const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=o.get(h.largestBatchId);m===null&&(m=wo(),o=o.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const c=wo(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((h,m)=>c.set(h,m)),!(c.size()>=s)););return _e.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new G9(n,r));let o=this.Qr.get(n);o===void 0&&(o=Ze(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,_e.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(){this.$r=new rn(fn.Ur),this.Kr=new rn(fn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new fn(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new fn(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new ke(new _t([])),r=new fn(n,e),s=new fn(n,e+1),o=[];return this.Kr.forEachInRange([r,s],l=>{this.zr(l),o.push(l.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new ke(new _t([])),r=new fn(n,e),s=new fn(n,e+1);let o=Ze();return this.Kr.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new fn(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class fn{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return ke.comparator(e.key,n.key)||qe(e.Zr,n.Zr)}static Wr(e,n){return qe(e.Zr,n.Zr)||ke.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new rn(fn.Ur)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new q9(o,n,r,s);this.mutationQueue.push(l);for(const c of s)this.Xr=this.Xr.add(new fn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return _e.resolve(l)}lookupMutationBatch(e,n){return _e.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),o=s<0?0:s;return _e.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?m_:this.nr-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new fn(n,0),s=new fn(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,s],l=>{const c=this.ei(l.Zr);o.push(c)}),_e.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rn(qe);return n.forEach(s=>{const o=new fn(s,0),l=new fn(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,l],c=>{r=r.add(c.Zr)})}),_e.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;ke.isDocumentKey(o)||(o=o.child(""));const l=new fn(new ke(o),0);let c=new rn(qe);return this.Xr.forEachWhile(f=>{const h=f.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(f.Zr)),!0)},l),_e.resolve(this.ni(c))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ut(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return _e.forEach(n.mutations,s=>{const o=new fn(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new fn(n,0),s=this.Xr.firstAfterOrEqual(r);return _e.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e){this.ii=e,this.docs=function(){return new Rt(ke.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,l=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return _e.resolve(r?r.document.mutableCopy():In.newInvalidDocument(n))}getEntries(e,n){let r=Ts();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():In.newInvalidDocument(s))}),_e.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=Ts();const l=n.path,c=new ke(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:h,value:{document:m}}=f.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||a9(s9(m),r)<=0||(s.has(m.key)||cm(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return _e.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Pe(9500)}si(e,n){return _e.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Nz(this)}getSize(e){return _e.resolve(this.size)}}class Nz extends Tz{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),_e.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{constructor(e){this.persistence=e,this.oi=new jo(n=>v_(n),__),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this._i=0,this.ai=new S_,this.targetCount=0,this.ui=yu.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),_e.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new yu(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,_e.resolve()}updateTargetData(e,n){return this.Tr(n),_e.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.oi.forEach((l,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.oi.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),_e.waitFor(o).next(()=>s)}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return _e.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),_e.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),_e.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),_e.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return _e.resolve(r)}containsKey(e,n){return _e.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n){this.ci={},this.overlays={},this.li=new am(0),this.hi=!1,this.hi=!0,this.Pi=new Rz,this.referenceDelegate=e(this),this.Ti=new Dz(this),this.indexManager=new gz,this.remoteDocumentCache=function(s){return new Iz(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new pz(n),this.Ei=new xz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Cz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new kz(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){Te("MemoryPersistence","Starting transaction:",e);const s=new Mz(this.li.next());return this.referenceDelegate.di(),r(s).next(o=>this.referenceDelegate.Ai(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ri(e,n){return _e.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class Mz extends l9{constructor(e){super(),this.currentSequenceNumber=e}}class A_{constructor(e){this.persistence=e,this.Vi=new S_,this.mi=null}static fi(e){return new A_(e)}get gi(){if(this.mi)return this.mi;throw Pe(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),_e.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),_e.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),_e.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.gi,r=>{const s=ke.fromPath(r);return this.pi(e,s).next(o=>{o||n.removeEntry(s,ze.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return _e.or([()=>_e.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Mp{constructor(e,n){this.persistence=e,this.yi=new jo(r=>d9(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Ez(this,n)}static fi(e,n){return new Mp(e,n)}di(){}Ai(e){return _e.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return _e.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(o=>o?_e.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.si(e,l=>this.Dr(e,l,n).next(c=>{c||(r++,o.removeEntry(l,ze.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),_e.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),_e.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),_e.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qh(e.data.value)),n}Dr(e,n,r){return _e.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return _e.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=Ze(),s=Ze();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new x_(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return oV()?8:u9(Mn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ws(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.bs(e,n,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new Pz;return this.Ss(e,n,l).next(c=>{if(o.result=c,this.fs)return this.Ds(e,n,l,c.size)})}).next(()=>o.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(Bl()<=Qe.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",Hl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),_e.resolve()):(Bl()<=Qe.DEBUG&&Te("QueryEngine","Query:",Hl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(Bl()<=Qe.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",Hl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(n))):_e.resolve())}ws(e,n){if(XS(n))return _e.resolve(null);let r=Mi(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=rv(n,null,"F"),r=Mi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Ze(...o);return this.ys.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(f=>{const h=this.vs(n,c);return this.Cs(n,h,l,f.readTime)?this.ws(e,rv(n,null,"F")):this.Fs(e,h,n,f)}))})))}bs(e,n,r,s){return XS(n)||s.isEqual(ze.min())?_e.resolve(null):this.ys.getDocuments(e,r).next(o=>{const l=this.vs(n,o);return this.Cs(n,l,r,s)?_e.resolve(null):(Bl()<=Qe.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Hl(n)),this.Fs(e,l,n,i9(s,Sd)).next(c=>c))})}vs(e,n){let r=new rn(nR(e));return n.forEach((s,o)=>{cm(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return Bl()<=Qe.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",Hl(n)),this.ys.getDocumentsMatchingQuery(e,n,ba.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="LocalStore",Vz=3e8;class Lz{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new Rt(qe),this.Os=new jo(o=>v_(o),__),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Az(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function zz(t,e,n,r){return new Lz(t,e,n,r)}async function AR(t,e){const n=je(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let f=Ze();for(const h of s){l.push(h.batchId);for(const m of h.mutations)f=f.add(m.key)}for(const h of o){c.push(h.batchId);for(const m of h.mutations)f=f.add(m.key)}return n.localDocuments.getDocuments(r,f).next(h=>({ks:h,removedBatchIds:l,addedBatchIds:c}))})})}function jz(t,e){const n=je(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(c,f,h,m){const _=h.batch,w=_.keys();let C=_e.resolve();return w.forEach(M=>{C=C.next(()=>m.getEntry(f,M)).next(P=>{const L=h.docVersions.get(M);ut(L!==null,48541),P.version.compareTo(L)<0&&(_.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),m.addEntry(P)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(f,_))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=Ze();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(f=f.add(c.batch.mutations[h].key));return f}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function xR(t){const e=je(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function Uz(t,e){const n=je(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const c=[];e.targetChanges.forEach((m,_)=>{const w=s.get(_);if(!w)return;c.push(n.Ti.removeMatchingKeys(o,m.removedDocuments,_).next(()=>n.Ti.addMatchingKeys(o,m.addedDocuments,_)));let C=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?C=C.withResumeToken(Sn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):m.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(m.resumeToken,r)),s=s.insert(_,C),function(P,L,j){return P.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=Vz?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(w,C,m)&&c.push(n.Ti.updateTargetData(o,C))});let f=Ts(),h=Ze();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(Bz(o,l,e.documentUpdates).next(m=>{f=m.qs,h=m.Qs})),!r.isEqual(ze.min())){const m=n.Ti.getLastRemoteSnapshotVersion(o).next(_=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return _e.waitFor(c).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,f,h)).next(()=>f)}).then(o=>(n.xs=s,o))}function Bz(t,e,n){let r=Ze(),s=Ze();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=Ts();return n.forEach((c,f)=>{const h=o.get(c);f.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),f.isNoDocument()&&f.version.isEqual(ze.min())?(e.removeEntry(c,f.readTime),l=l.insert(c,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),l=l.insert(c,f)):Te(C_,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",f.version)}),{qs:l,Qs:s}})}function Hz(t,e){const n=je(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=m_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $z(t,e){const n=je(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(o=>o?(s=o,_e.resolve(s)):n.Ti.allocateTargetId(r).next(l=>(s=new da(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function lv(t,e,n){const r=je(t),s=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Au(l))throw l;Te(C_,`Failed to update sequence numbers for target ${e}: ${l}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function lA(t,e,n){const r=je(t);let s=ze.min(),o=Ze();return r.persistence.runTransaction("Execute query","readwrite",l=>function(f,h,m){const _=je(f),w=_.Os.get(m);return w!==void 0?_e.resolve(_.xs.get(w)):_.Ti.getTargetData(h,m)}(r,l,Mi(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(l,c.targetId).next(f=>{o=f})}).next(()=>r.Ms.getDocumentsMatchingQuery(l,e,n?s:ze.min(),n?o:Ze())).next(c=>(Fz(r,I9(e),c),{documents:c,$s:o})))}function Fz(t,e,n){let r=t.Ns.get(e)||ze.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}class uA{constructor(){this.activeTargetIds=V9()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qz{constructor(){this.xo=new uA,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new uA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="ConnectivityMonitor";class dA{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Te(cA,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Te(cA,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lh=null;function uv(){return Lh===null?Lh=function(){return 268435456+Math.round(2147483648*Math.random())}():Lh++,"0x"+Lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="RestConnection",Kz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Yz{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===Cp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,o){const l=uv(),c=this.jo(e,n.toUriEncodedString());Te(s0,`Sending RPC '${e}' ${l}:`,c,r);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,s,o);const{host:h}=new URL(c),m=zo(h);return this.Jo(e,c,f,r,m).then(_=>(Te(s0,`Received RPC '${e}' ${l}: `,_),_),_=>{throw hu(s0,`RPC '${e}' ${l} failed with error: `,_,"url: ",c,"request:",r),_})}Yo(e,n,r,s,o,l){return this.zo(e,n,r,s,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Tu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}jo(e,n){const r=Kz[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="WebChannelConnection";class Wz extends Yz{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const l=uv();return new Promise((c,f)=>{const h=new RC;h.setWithCredentials(!0),h.listenOnce(kC.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Wh.NO_ERROR:const _=h.getResponseJson();Te(Rn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),c(_);break;case Wh.TIMEOUT:Te(Rn,`RPC '${e}' ${l} timed out`),f(new Se(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Wh.HTTP_ERROR:const w=h.getStatus();if(Te(Rn,`RPC '${e}' ${l} failed with status:`,w,"response text:",h.getResponseText()),w>0){let C=h.getResponseJson();Array.isArray(C)&&(C=C[0]);const M=C?.error;if(M&&M.status&&M.message){const P=function(j){const H=j.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(H)>=0?H:ve.UNKNOWN}(M.status);f(new Se(P,M.message))}else f(new Se(ve.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new Se(ve.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{h_:e,streamId:l,P_:h.getLastErrorCode(),T_:h.getLastError()})}}finally{Te(Rn,`RPC '${e}' ${l} completed.`)}});const m=JSON.stringify(s);Te(Rn,`RPC '${e}' ${l} sending request:`,s),h.send(n,"POST",m,r,15)})}I_(e,n,r){const s=uv(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=DC(),c=NC(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const m=o.join("");Te(Rn,`Creating RPC '${e}' stream ${s}: ${m}`,f);const _=l.createWebChannel(m,f);this.E_(_);let w=!1,C=!1;const M=new Xz({Zo:L=>{C?Te(Rn,`Not sending because RPC '${e}' stream ${s} is closed:`,L):(w||(Te(Rn,`Opening RPC '${e}' stream ${s} transport.`),_.open(),w=!0),Te(Rn,`RPC '${e}' stream ${s} sending:`,L),_.send(L))},Xo:()=>_.close()}),P=(L,j,H)=>{L.listen(j,K=>{try{H(K)}catch(y){setTimeout(()=>{throw y},0)}})};return P(_,Qc.EventType.OPEN,()=>{C||(Te(Rn,`RPC '${e}' stream ${s} transport opened.`),M.__())}),P(_,Qc.EventType.CLOSE,()=>{C||(C=!0,Te(Rn,`RPC '${e}' stream ${s} transport closed`),M.u_(),this.d_(_))}),P(_,Qc.EventType.ERROR,L=>{C||(C=!0,hu(Rn,`RPC '${e}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),M.u_(new Se(ve.UNAVAILABLE,"The operation could not be completed")))}),P(_,Qc.EventType.MESSAGE,L=>{var j;if(!C){const H=L.data[0];ut(!!H,16349);const K=H,y=K?.error||((j=K[0])===null||j===void 0?void 0:j.error);if(y){Te(Rn,`RPC '${e}' stream ${s} received error:`,y);const E=y.status;let b=function(R){const k=Yt[R];if(k!==void 0)return hR(k)}(E),T=y.message;b===void 0&&(b=ve.INTERNAL,T="Unknown error status: "+E+" with message "+y.message),C=!0,M.u_(new Se(b,T)),_.close()}else Te(Rn,`RPC '${e}' stream ${s} received:`,H),M.c_(H)}}),P(c,IC.STAT_EVENT,L=>{L.stat===W0.PROXY?Te(Rn,`RPC '${e}' stream ${s} detected buffering proxy`):L.stat===W0.NOPROXY&&Te(Rn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{M.a_()},0),M}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function a0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t){return new ez(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n,r=1e3,s=1.5,o=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&Te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="PersistentStream";class RR{constructor(e,n,r,s,o,l,c,f){this.xi=e,this.S_=r,this.D_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new CR(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(Es(n.toString()),Es("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new Se(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Te(fA,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(Te(fA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Qz extends RR{constructor(e,n,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=rz(this.serializer,e),r=function(o){if(!("targetChange"in o))return ze.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ze.min():l.readTime?Pi(l.readTime):ze.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=ov(this.serializer),n.addTarget=function(o,l){let c;const f=l.target;if(c=tv(f)?{documents:az(o,f)}:{query:oz(o,f).gt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=gR(o,l.resumeToken);const h=iv(o,l.expectedCount);h!==null&&(c.expectedCount=h)}else if(l.snapshotVersion.compareTo(ze.min())>0){c.readTime=Dp(o,l.snapshotVersion.toTimestamp());const h=iv(o,l.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=uz(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=ov(this.serializer),n.removeTarget=e,this.Q_(n)}}class Zz extends RR{constructor(e,n,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ut(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ut(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ut(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=sz(e.writeResults,e.commitTime),r=Pi(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=ov(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>iz(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{}class e7 extends Jz{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new Se(ve.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.zo(e,sv(n,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(ve.UNKNOWN,o.toString())})}Yo(e,n,r,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Yo(e,sv(n,r),s,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Se(ve.UNKNOWN,l.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class t7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Es(n),this.ua=!1):Te("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="RemoteStore";class n7{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(l=>{r.enqueueAndForget(async()=>{Uo(this)&&(Te(Mo,"Restarting streams for network reachability change."),await async function(f){const h=je(f);h.da.add(4),await Xd(h),h.Va.set("Unknown"),h.da.delete(4),await gm(h)}(this))})}),this.Va=new t7(r,s)}}async function gm(t){if(Uo(t))for(const e of t.Aa)await e(!0)}async function Xd(t){for(const e of t.Aa)await e(!1)}function kR(t,e){const n=je(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),N_(n)?I_(n):Cu(n).N_()&&k_(n,e))}function R_(t,e){const n=je(t),r=Cu(n);n.Ea.delete(e),r.N_()&&IR(n,e),n.Ea.size===0&&(r.N_()?r.k_():Uo(n)&&n.Va.set("Unknown"))}function k_(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Cu(t).Z_(e)}function IR(t,e){t.ma.Ke(e),Cu(t).X_(e)}function I_(t){t.ma=new W9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Cu(t).start(),t.Va.ca()}function N_(t){return Uo(t)&&!Cu(t).O_()&&t.Ea.size>0}function Uo(t){return je(t).da.size===0}function NR(t){t.ma=void 0}async function r7(t){t.Va.set("Online")}async function i7(t){t.Ea.forEach((e,n)=>{k_(t,e)})}async function s7(t,e){NR(t),N_(t)?(t.Va.Pa(e),I_(t)):t.Va.set("Unknown")}async function a7(t,e,n){if(t.Va.set("Online"),e instanceof mR&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const c of o.targetIds)s.Ea.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ea.delete(c),s.ma.removeTarget(c))}(t,e)}catch(r){Te(Mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Pp(t,r)}else if(e instanceof ep?t.ma.Xe(e):e instanceof pR?t.ma.ot(e):t.ma.nt(e),!n.isEqual(ze.min()))try{const r=await xR(t.localStore);n.compareTo(r)>=0&&await function(o,l){const c=o.ma.It(l);return c.targetChanges.forEach((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const m=o.Ea.get(h);m&&o.Ea.set(h,m.withResumeToken(f.resumeToken,l))}}),c.targetMismatches.forEach((f,h)=>{const m=o.Ea.get(f);if(!m)return;o.Ea.set(f,m.withResumeToken(Sn.EMPTY_BYTE_STRING,m.snapshotVersion)),IR(o,f);const _=new da(m.target,f,h,m.sequenceNumber);k_(o,_)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Te(Mo,"Failed to raise snapshot:",r),await Pp(t,r)}}async function Pp(t,e,n){if(!Au(e))throw e;t.da.add(1),await Xd(t),t.Va.set("Offline"),n||(n=()=>xR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Te(Mo,"Retrying IndexedDB access"),await n(),t.da.delete(1),await gm(t)})}function DR(t,e){return e().catch(n=>Pp(t,n,e))}async function ym(t){const e=je(t),n=Aa(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:m_;for(;o7(e);)try{const s=await Hz(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,l7(e,s)}catch(s){await Pp(e,s)}MR(e)&&PR(e)}function o7(t){return Uo(t)&&t.Ia.length<10}function l7(t,e){t.Ia.push(e);const n=Aa(t);n.N_()&&n.ea&&n.ta(e.mutations)}function MR(t){return Uo(t)&&!Aa(t).O_()&&t.Ia.length>0}function PR(t){Aa(t).start()}async function u7(t){Aa(t).ia()}async function c7(t){const e=Aa(t);for(const n of t.Ia)e.ta(n.mutations)}async function d7(t,e,n){const r=t.Ia.shift(),s=b_.from(r,e,n);await DR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ym(t)}async function f7(t,e){e&&Aa(t).ea&&await async function(r,s){if(function(l){return Y9(l)&&l!==ve.ABORTED}(s.code)){const o=r.Ia.shift();Aa(r).L_(),await DR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await ym(r)}}(t,e),MR(t)&&PR(t)}async function hA(t,e){const n=je(t);n.asyncQueue.verifyOperationInProgress(),Te(Mo,"RemoteStore received new credentials");const r=Uo(n);n.da.add(3),await Xd(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await gm(n)}async function h7(t,e){const n=je(t);e?(n.da.delete(2),await gm(n)):e||(n.da.add(2),await Xd(n),n.Va.set("Unknown"))}function Cu(t){return t.fa||(t.fa=function(n,r,s){const o=je(n);return o.oa(),new Qz(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:r7.bind(null,t),n_:i7.bind(null,t),i_:s7.bind(null,t),Y_:a7.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),N_(t)?I_(t):t.Va.set("Unknown")):(await t.fa.stop(),NR(t))})),t.fa}function Aa(t){return t.ga||(t.ga=function(n,r,s){const o=je(n);return o.oa(),new Zz(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:u7.bind(null,t),i_:f7.bind(null,t),na:c7.bind(null,t),ra:d7.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await ym(t)):(await t.ga.stop(),t.Ia.length>0&&(Te(Mo,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new ya,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const l=Date.now()+r,c=new D_(e,n,l,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function M_(t,e){if(Es("AsyncQueue",`${e}: ${t}`),Au(t))return new Se(ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{static emptySet(e){return new iu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ke.comparator(n.key,r.key):(n,r)=>ke.comparator(n.key,r.key),this.keyedMap=Zc(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof iu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new iu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.pa=new Rt(ke.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Pe(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class vu{constructor(e,n,r,s,o,l,c,f,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,o){const l=[];return n.forEach(c=>{l.push({type:0,doc:c})}),new vu(e,n,iu.emptySet(n),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&um(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class m7{constructor(){this.queries=mA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=je(n),o=s.queries;s.queries=mA(),o.forEach((l,c)=>{for(const f of c.Sa)f.onError(r)})})(this,new Se(ve.ABORTED,"Firestore shutting down"))}}function mA(){return new jo(t=>tR(t),um)}async function g7(t,e){const n=je(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.Da()&&e.va()&&(r=2):(o=new p7,r=e.va()?0:1);try{switch(r){case 0:o.ba=await n.onListen(s,!0);break;case 1:o.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const c=M_(l,`Initialization of query '${Hl(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,o),o.Sa.push(e),e.Fa(n.onlineState),o.ba&&e.Ma(o.ba)&&P_(n)}async function y7(t,e){const n=je(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.va()?0:1:!o.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function v7(t,e){const n=je(t);let r=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const c of l.Sa)c.Ma(s)&&(r=!0);l.ba=s}}r&&P_(n)}function _7(t,e,n){const r=je(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function P_(t){t.Ca.forEach(e=>{e.next()})}var cv,gA;(gA=cv||(cv={})).xa="default",gA.Cache="cache";class w7{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new vu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=vu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==cv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.key=e}}class VR{constructor(e){this.key=e}}class b7{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ze(),this.mutatedKeys=Ze(),this.Za=nR(e),this.Xa=new iu(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new pA,s=n?n.Xa:this.Xa;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,c=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,_)=>{const w=s.get(m),C=cm(this.query,_)?_:null,M=!!w&&this.mutatedKeys.has(w.key),P=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let L=!1;w&&C?w.data.isEqual(C.data)?M!==P&&(r.track({type:3,doc:C}),L=!0):this.ru(w,C)||(r.track({type:2,doc:C}),L=!0,(f&&this.Za(C,f)>0||h&&this.Za(C,h)<0)&&(c=!0)):!w&&C?(r.track({type:0,doc:C}),L=!0):w&&!C&&(r.track({type:1,doc:w}),L=!0,(f||h)&&(c=!0)),L&&(C?(l=l.add(C),o=P?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{Xa:l,nu:r,Cs:c,mutatedKeys:o}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const l=e.nu.wa();l.sort((m,_)=>function(C,M){const P=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Vt:L})}};return P(C)-P(M)}(m.type,_.type)||this.Za(m.doc,_.doc)),this.iu(r),s=s!=null&&s;const c=n&&!s?this.su():[],f=this.Ya.size===0&&this.current&&!s?1:0,h=f!==this.Ja;return this.Ja=f,l.length!==0||h?{snapshot:new vu(this.query,e.Xa,o,l,e.mutatedKeys,f===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:c}:{ou:c}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new pA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Ze(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new VR(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new OR(r))}),n}au(e){this.Ha=e.$s,this.Ya=Ze();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return vu.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const O_="SyncEngine";class E7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class T7{constructor(e){this.key=e,this.cu=!1}}class S7{constructor(e,n,r,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.lu={},this.hu=new jo(c=>tR(c),um),this.Pu=new Map,this.Tu=new Set,this.Iu=new Rt(ke.comparator),this.Eu=new Map,this.du=new S_,this.Au={},this.Ru=new Map,this.Vu=yu.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function A7(t,e,n=!0){const r=HR(t);let s;const o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.uu()):s=await LR(r,e,n,!0),s}async function x7(t,e){const n=HR(t);await LR(n,e,!0,!1)}async function LR(t,e,n,r){const s=await $z(t.localStore,Mi(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let c;return r&&(c=await C7(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&kR(t.remoteStore,s),c}async function C7(t,e,n,r,s){t.fu=(_,w,C)=>async function(P,L,j,H){let K=L.view.tu(j);K.Cs&&(K=await lA(P.localStore,L.query,!1).then(({documents:T})=>L.view.tu(T,K)));const y=H&&H.targetChanges.get(L.targetId),E=H&&H.targetMismatches.get(L.targetId)!=null,b=L.view.applyChanges(K,P.isPrimaryClient,y,E);return vA(P,L.targetId,b.ou),b.snapshot}(t,_,w,C);const o=await lA(t.localStore,e,!0),l=new b7(e,o.$s),c=l.tu(o.documents),f=Yd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=l.applyChanges(c,t.isPrimaryClient,f);vA(t,n,h.ou);const m=new E7(e,n,l);return t.hu.set(e,m),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),h.snapshot}async function R7(t,e,n){const r=je(t),s=r.hu.get(e),o=r.Pu.get(s.targetId);if(o.length>1)return r.Pu.set(s.targetId,o.filter(l=>!um(l,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await lv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&R_(r.remoteStore,s.targetId),dv(r,s.targetId)}).catch(Su)):(dv(r,s.targetId),await lv(r.localStore,s.targetId,!0))}async function k7(t,e){const n=je(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),R_(n.remoteStore,r.targetId))}async function I7(t,e,n){const r=L7(t);try{const s=await function(l,c){const f=je(l),h=wt.now(),m=c.reduce((C,M)=>C.add(M.key),Ze());let _,w;return f.persistence.runTransaction("Locally write mutations","readwrite",C=>{let M=Ts(),P=Ze();return f.Bs.getEntries(C,m).next(L=>{M=L,M.forEach((j,H)=>{H.isValidDocument()||(P=P.add(j))})}).next(()=>f.localDocuments.getOverlayedDocuments(C,M)).next(L=>{_=L;const j=[];for(const H of c){const K=$9(H,_.get(H.key).overlayedDocument);K!=null&&j.push(new Ia(H.key,K,GC(K.value.mapValue),yr.exists(!0)))}return f.mutationQueue.addMutationBatch(C,h,j,c)}).next(L=>{w=L;const j=L.applyToLocalDocumentSet(_,P);return f.documentOverlayCache.saveOverlays(C,L.batchId,j)})}).then(()=>({batchId:w.batchId,changes:iR(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,c,f){let h=l.Au[l.currentUser.toKey()];h||(h=new Rt(qe)),h=h.insert(c,f),l.Au[l.currentUser.toKey()]=h}(r,s.batchId,n),await Wd(r,s.changes),await ym(r.remoteStore)}catch(s){const o=M_(s,"Failed to persist write");n.reject(o)}}async function zR(t,e){const n=je(t);try{const r=await Uz(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Eu.get(o);l&&(ut(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.cu=!0:s.modifiedDocuments.size>0?ut(l.cu,14607):s.removedDocuments.size>0&&(ut(l.cu,42227),l.cu=!1))}),await Wd(n,r,e)}catch(r){await Su(r)}}function yA(t,e,n){const r=je(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((o,l)=>{const c=l.view.Fa(e);c.snapshot&&s.push(c.snapshot)}),function(l,c){const f=je(l);f.onlineState=c;let h=!1;f.queries.forEach((m,_)=>{for(const w of _.Sa)w.Fa(c)&&(h=!0)}),h&&P_(f)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function N7(t,e,n){const r=je(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),o=s&&s.key;if(o){let l=new Rt(ke.comparator);l=l.insert(o,In.newNoDocument(o,ze.min()));const c=Ze().add(o),f=new pm(ze.min(),new Map,new Rt(qe),l,c);await zR(r,f),r.Iu=r.Iu.remove(o),r.Eu.delete(e),V_(r)}else await lv(r.localStore,e,!1).then(()=>dv(r,e,n)).catch(Su)}async function D7(t,e){const n=je(t),r=e.batch.batchId;try{const s=await jz(n.localStore,e);UR(n,r,null),jR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wd(n,s)}catch(s){await Su(s)}}async function M7(t,e,n){const r=je(t);try{const s=await function(l,c){const f=je(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return f.mutationQueue.lookupMutationBatch(h,c).next(_=>(ut(_!==null,37113),m=_.keys(),f.mutationQueue.removeMutationBatch(h,_))).next(()=>f.mutationQueue.performConsistencyCheck(h)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(h,m,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>f.localDocuments.getDocuments(h,m))})}(r.localStore,e);UR(r,e,n),jR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Wd(r,s)}catch(s){await Su(s)}}function jR(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function UR(t,e,n){const r=je(t);let s=r.Au[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function dv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||BR(t,r)})}function BR(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(R_(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),V_(t))}function vA(t,e,n){for(const r of n)r instanceof OR?(t.du.addReference(r.key,e),P7(t,r)):r instanceof VR?(Te(O_,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||BR(t,r.key)):Pe(19791,{pu:r})}function P7(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(Te(O_,"New document in limbo: "+n),t.Tu.add(r),V_(t))}function V_(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new ke(_t.fromString(e)),r=t.Vu.next();t.Eu.set(r,new T7(n)),t.Iu=t.Iu.insert(n,r),kR(t.remoteStore,new da(Mi(JC(n.path)),r,"TargetPurposeLimboResolution",am.le))}}async function Wd(t,e,n){const r=je(t),s=[],o=[],l=[];r.hu.isEmpty()||(r.hu.forEach((c,f)=>{l.push(r.fu(f,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const _=h?!h.fromCache:(m=n?.targetChanges.get(f.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(h){s.push(h);const _=x_.Rs(f.targetId,h);o.push(_)}}))}),await Promise.all(l),r.lu.Y_(s),await async function(f,h){const m=je(f);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>_e.forEach(h,w=>_e.forEach(w.ds,C=>m.persistence.referenceDelegate.addReference(_,w.targetId,C)).next(()=>_e.forEach(w.As,C=>m.persistence.referenceDelegate.removeReference(_,w.targetId,C)))))}catch(_){if(!Au(_))throw _;Te(C_,"Failed to update sequence numbers: "+_)}for(const _ of h){const w=_.targetId;if(!_.fromCache){const C=m.xs.get(w),M=C.snapshotVersion,P=C.withLastLimboFreeSnapshotVersion(M);m.xs=m.xs.insert(w,P)}}}(r.localStore,o))}async function O7(t,e){const n=je(t);if(!n.currentUser.isEqual(e)){Te(O_,"User change. New user:",e.toKey());const r=await AR(n.localStore,e);n.currentUser=e,function(o,l){o.Ru.forEach(c=>{c.forEach(f=>{f.reject(new Se(ve.CANCELLED,l))})}),o.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Wd(n,r.ks)}}function V7(t,e){const n=je(t),r=n.Eu.get(e);if(r&&r.cu)return Ze().add(r.key);{let s=Ze();const o=n.Pu.get(e);if(!o)return s;for(const l of o){const c=n.hu.get(l);s=s.unionWith(c.view.eu)}return s}}function HR(t){const e=je(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N7.bind(null,e),e.lu.Y_=v7.bind(null,e.eventManager),e.lu.gu=_7.bind(null,e.eventManager),e}function L7(t){const e=je(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=D7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M7.bind(null,e),e}class Op{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return zz(this.persistence,new Oz,e.initialUser,this.serializer)}Su(e){return new SR(A_.fi,this.serializer)}bu(e){return new qz}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Op.provider={build:()=>new Op};class z7 extends Op{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ut(this.persistence.referenceDelegate instanceof Mp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new wz(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new SR(r=>Mp.fi(r,n),this.serializer)}}class fv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=O7.bind(null,this.syncEngine),await h7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new m7}()}createDatastore(e){const n=mm(e.databaseInfo.databaseId),r=function(o){return new Wz(o)}(e.databaseInfo);return function(o,l,c,f){return new e7(o,l,c,f)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,l,c){return new n7(r,s,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,n=>yA(this.syncEngine,n,0),function(){return dA.C()?new dA:new Gz}())}createSyncEngine(e,n){return function(s,o,l,c,f,h,m){const _=new S7(s,o,l,c,f,h);return m&&(_.mu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=je(s);Te(Mo,"RemoteStore shutting down."),o.da.add(5),await Xd(o),o.Ra.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}fv.provider={build:()=>new fv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Es("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="FirestoreClient";class U7{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=kn.UNAUTHENTICATED,this.clientId=VC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{Te(xa,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(Te(xa,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ya;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=M_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function o0(t,e){t.asyncQueue.verifyOperationInProgress(),Te(xa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await AR(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function _A(t,e){t.asyncQueue.verifyOperationInProgress();const n=await B7(t);Te(xa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>hA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>hA(e.remoteStore,s)),t._onlineComponents=e}async function B7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Te(xa,"Using user provided OfflineComponentProvider");try{await o0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ve.FAILED_PRECONDITION||s.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;hu("Error using user provided cache. Falling back to memory cache: "+n),await o0(t,new Op)}}else Te(xa,"Using default OfflineComponentProvider"),await o0(t,new z7(void 0));return t._offlineComponents}async function $R(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Te(xa,"Using user provided OnlineComponentProvider"),await _A(t,t._uninitializedComponentsProvider._online)):(Te(xa,"Using default OnlineComponentProvider"),await _A(t,new fv))),t._onlineComponents}function H7(t){return $R(t).then(e=>e.syncEngine)}async function $7(t){const e=await $R(t),n=e.eventManager;return n.onListen=A7.bind(null,e.syncEngine),n.onUnlisten=R7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=x7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=k7.bind(null,e.syncEngine),n}function F7(t,e,n={}){const r=new ya;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,c,f,h){const m=new j7({next:w=>{m.xu(),l.enqueueAndForget(()=>y7(o,_)),w.fromCache&&f.source==="server"?h.reject(new Se(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(w)},error:w=>h.reject(w)}),_=new w7(c,m,{includeMetadataChanges:!0,Qa:!0});return g7(o,_)}(await $7(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t,e,n){if(!n)throw new Se(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function q7(t,e,n,r){if(e===!0&&r===!0)throw new Se(ve.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bA(t){if(!ke.isDocumentKey(t))throw new Se(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function EA(t){if(ke.isDocumentKey(t))throw new Se(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe(12329,{type:typeof t})}function Po(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Se(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vm(t);throw new Se(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="firestore.googleapis.com",TA=!0;class SA{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GR,this.ssl=TA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:TA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vz)throw new Se(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}q7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Se(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Se(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Se(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _m{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new XL;switch(r.type){case"firstParty":return new JL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Se(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=wA.get(n);r&&(Te("ComponentProvider","Removing Datastore"),wA.delete(n),r.terminate())}(this),Promise.resolve()}}function G7(t,e,n,r={}){var s;t=Po(t,_m);const o=zo(e),l=t._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;o&&(l_(`https://${f}`),u_("Firestore",!0)),l.host!==GR&&l.host!==f&&hu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},l),{host:f,ssl:o,emulatorOptions:r});if(!Io(h,c)&&(t._setSettings(h),r.mockUserToken)){let m,_;if(typeof r.mockUserToken=="string")m=r.mockUserToken,_=kn.MOCK_USER;else{m=ZO(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Se(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new kn(w)}t._authCredentials=new WL(new PC(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bo(this.firestore,e,this._query)}}class vr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new va(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vr(this.firestore,e,this._key)}}class va extends Bo{constructor(e,n,r){super(e,n,JC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vr(this.firestore,null,new ke(e))}withConverter(e){return new va(this.firestore,e,this._path)}}function L_(t,e,...n){if(t=Vt(t),qR("collection","path",e),t instanceof _m){const r=_t.fromString(e,...n);return EA(r),new va(t,null,r)}{if(!(t instanceof vr||t instanceof va))throw new Se(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return EA(r),new va(t.firestore,null,r)}}function Ru(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=VC.newId()),qR("doc","path",e),t instanceof _m){const r=_t.fromString(e,...n);return bA(r),new vr(t,null,new ke(r))}{if(!(t instanceof vr||t instanceof va))throw new Se(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return bA(r),new vr(t.firestore,t instanceof va?t.converter:null,new ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="AsyncQueue";class xA{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new CR(this,"async_queue_retry"),this.rc=()=>{const r=a0();r&&Te(AA,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=a0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=a0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new ya;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Au(e))throw e;Te(AA,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Es("INTERNAL UNHANDLED ERROR: ",CA(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=D_.createAndSchedule(this,e,n,r,o=>this.uc(o));return this.Zu.push(s),s}oc(){this.Xu&&Pe(47125,{cc:CA(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function CA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Qd extends _m{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new xA,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xA(e),this._firestoreClient=void 0,await e}}}function K7(t,e){const n=typeof t=="object"?t:f_(),r=typeof t=="string"?t:Cp,s=sm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=yC("firestore");o&&G7(s,...o)}return s}function z_(t){if(t._terminated)throw new Se(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Y7(t),t._firestoreClient}function Y7(t){var e,n,r;const s=t._freezeSettings(),o=function(c,f,h,m){return new p9(c,f,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,FR(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new U7(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){const f=c?._online.build();return{_offline:c?._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _u(Sn.fromBase64String(e))}catch(n){throw new Se(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _u(Sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Se(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Se(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Se(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7=/^__.*__$/;class W7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ia(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kd(e,this.data,n,this.fieldTransforms)}}class KR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ia(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function YR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{Ic:t})}}class H_{constructor(e,n,r,s,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new H_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Vp(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(YR(this.Ic)&&X7.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class Q7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mm(e)}bc(e,n,r,s=!1){return new H_({Ic:e,methodName:n,wc:r,path:Tn.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $_(t){const e=t._freezeSettings(),n=mm(t._databaseId);return new Q7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function XR(t,e,n,r,s,o={}){const l=t.bc(o.merge||o.mergeFields?2:0,e,n,s);F_("Data must be an object, but it was:",l,r);const c=WR(r,l);let f,h;if(o.merge)f=new mr(l.fieldMask),h=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const _ of o.mergeFields){const w=hv(e,_,n);if(!l.contains(w))throw new Se(ve.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);ZR(m,w)||m.push(w)}f=new mr(m),h=l.fieldTransforms.filter(_=>f.covers(_.field))}else f=null,h=l.fieldTransforms;return new W7(new Wn(c),f,h)}class bm extends j_{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bm}}function Z7(t,e,n,r){const s=t.bc(1,e,n);F_("Data must be an object, but it was:",s,r);const o=[],l=Wn.empty();ka(r,(f,h)=>{const m=q_(e,f,n);h=Vt(h);const _=s.mc(m);if(h instanceof bm)o.push(m);else{const w=Zd(h,_);w!=null&&(o.push(m),l.set(m,w))}});const c=new mr(o);return new KR(l,c,s.fieldTransforms)}function J7(t,e,n,r,s,o){const l=t.bc(1,e,n),c=[hv(e,r,n)],f=[s];if(o.length%2!=0)throw new Se(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)c.push(hv(e,o[w])),f.push(o[w+1]);const h=[],m=Wn.empty();for(let w=c.length-1;w>=0;--w)if(!ZR(h,c[w])){const C=c[w];let M=f[w];M=Vt(M);const P=l.mc(C);if(M instanceof bm)h.push(C);else{const L=Zd(M,P);L!=null&&(h.push(C),m.set(C,L))}}const _=new mr(h);return new KR(m,_,l.fieldTransforms)}function ej(t,e,n,r=!1){return Zd(n,t.bc(r?4:3,e))}function Zd(t,e){if(QR(t=Vt(t)))return F_("Unsupported field value:",e,t),WR(t,e);if(t instanceof j_)return function(r,s){if(!YR(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const c of r){let f=Zd(c,s.fc(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return L9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=wt.fromDate(r);return{timestampValue:Dp(s.serializer,o)}}if(r instanceof wt){const o=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dp(s.serializer,o)}}if(r instanceof U_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _u)return{bytesValue:gR(s.serializer,r._byteString)};if(r instanceof vr){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.gc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:T_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof B_)return function(l,c){return{mapValue:{fields:{[FC]:{stringValue:qC},[Rp]:{arrayValue:{values:l.toArray().map(h=>{if(typeof h!="number")throw c.gc("VectorValues must only contain numeric values.");return w_(c.serializer,h)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${vm(r)}`)}(t,e)}function WR(t,e){const n={};return zC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ka(t,(r,s)=>{const o=Zd(s,e.Ac(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function QR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof wt||t instanceof U_||t instanceof _u||t instanceof vr||t instanceof j_||t instanceof B_)}function F_(t,e,n){if(!QR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=vm(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function hv(t,e,n){if((e=Vt(e))instanceof wm)return e._internalPath;if(typeof e=="string")return q_(t,e);throw Vp("Field path arguments must be of type string or ",t,!1,void 0,n)}const tj=new RegExp("[~\\*/\\[\\]]");function q_(t,e,n){if(e.search(tj)>=0)throw Vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wm(...e.split("."))._internalPath}catch{throw Vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vp(t,e,n,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${r}`),l&&(f+=` in document ${s}`),f+=")"),new Se(ve.INVALID_ARGUMENT,c+t+f)}function ZR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new vr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Em("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nj extends JR{data(){return super.data()}}function Em(t,e){return typeof e=="string"?q_(t,e):e instanceof wm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Se(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class G_{}class ek extends G_{}function ij(t,e,...n){let r=[];e instanceof G_&&r.push(e),r=r.concat(n),function(o){const l=o.filter(f=>f instanceof K_).length,c=o.filter(f=>f instanceof Tm).length;if(l>1||l>0&&c>0)throw new Se(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Tm extends ek{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Tm(e,n,r)}_apply(e){const n=this._parse(e);return tk(e._query,n),new Bo(e.firestore,e.converter,nv(e._query,n))}_parse(e){const n=$_(e.firestore);return function(o,l,c,f,h,m,_){let w;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Se(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){kA(_,m);const M=[];for(const P of _)M.push(RA(f,o,P));w={arrayValue:{values:M}}}else w=RA(f,o,_)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||kA(_,m),w=ej(c,l,_,m==="in"||m==="not-in");return Wt.create(h,m,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function sj(t,e,n){const r=e,s=Em("where",t);return Tm._create(s,r,n)}class K_ extends G_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new K_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ri.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const c=o.getFlattenedFilters();for(const f of c)tk(l,f),l=nv(l,f)}(e._query,n),new Bo(e.firestore,e.converter,nv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Y_ extends ek{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Y_(e,n)}_apply(e){const n=function(s,o,l){if(s.startAt!==null)throw new Se(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Se(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rd(o,l)}(e._query,this._field,this._direction);return new Bo(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new xu(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function aj(t,e="asc"){const n=e,r=Em("orderBy",t);return Y_._create(r,n)}function RA(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new Se(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eR(e)&&n.indexOf("/")!==-1)throw new Se(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_t.fromString(n));if(!ke.isDocumentKey(r))throw new Se(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $S(t,new ke(r))}if(n instanceof vr)return $S(t,n._key);throw new Se(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vm(n)}.`)}function kA(t,e){if(!Array.isArray(t)||t.length===0)throw new Se(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tk(t,e){const n=function(s,o){for(const l of s)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Se(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class oj{convertValue(e,n="none"){switch(Sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ka(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Rp].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>Bt(l.doubleValue));return new B_(o)}convertGeoPoint(e){return new U_(Bt(e.latitude),Bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=lm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ad(e));default:return null}}convertTimestamp(e){const n=Ea(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_t.fromString(e);ut(ER(r),9688,{name:e});const s=new xd(r.get(1),r.get(3)),o=new ke(r.popFirst(5));return s.isEqual(n)||Es(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lj extends JR{constructor(e,n,r,s,o,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new tp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Em("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class tp extends lj{data(e={}){return super.data(e)}}class uj{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new zh(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new tp(this._firestore,this._userDataWriter,r.key,r,new zh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(c=>{const f=new tp(s._firestore,s._userDataWriter,c.doc.key,c.doc,new zh(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const f=new tp(s._firestore,s._userDataWriter,c.doc.key,c.doc,new zh(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return c.type!==0&&(h=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),m=l.indexOf(c.doc.key)),{type:cj(c.type),doc:f,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:t})}}class dj extends oj{constructor(e){super(),this.firestore=e}convertBytes(e){return new _u(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,n)}}function X_(t){t=Po(t,Bo);const e=Po(t.firestore,Qd),n=z_(e),r=new dj(e);return rj(t._query),F7(n,t._query).then(s=>new uj(e,r,t,s))}function W_(t,e,n){t=Po(t,vr);const r=Po(t.firestore,Qd),s=nk(t.converter,e,n);return Q_(r,[XR($_(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,yr.none())])}function fj(t){return Q_(Po(t.firestore,Qd),[new hm(t._key,yr.none())])}function Q_(t,e){return function(r,s){const o=new ya;return r.asyncQueue.enqueueAndForget(async()=>I7(await H7(r),s,o)),o.promise}(z_(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=$_(e)}set(e,n,r){this._verifyNotCommitted();const s=l0(e,this._firestore),o=nk(s.converter,n,r),l=XR(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(l.toMutation(s._key,yr.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const o=l0(e,this._firestore);let l;return l=typeof(n=Vt(n))=="string"||n instanceof wm?J7(this._dataReader,"WriteBatch.update",o._key,n,r,s):Z7(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(l.toMutation(o._key,yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=l0(e,this._firestore);return this._mutations=this._mutations.concat(new hm(n._key,yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function l0(t,e){if((t=Vt(t)).firestore!==e)throw new Se(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t){return z_(t=Po(t,Qd)),new hj(t,e=>Q_(t,e))}(function(e,n=!0){(function(s){Tu=s})(Eu),No(new wa("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new Qd(new QL(r.getProvider("auth-internal")),new e9(l,r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Se(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xd(h.options.projectId,m)}(l,s),l);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Di(NS,DS,e),Di(NS,DS,"esm2017")})();function Z_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ik(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pj=ik,sk=new qd("auth","Firebase",ik());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp=new c_("@firebase/auth");function mj(t,...e){Lp.logLevel<=Qe.WARN&&Lp.warn(`Auth (${Eu}): ${t}`,...e)}function np(t,...e){Lp.logLevel<=Qe.ERROR&&Lp.error(`Auth (${Eu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(t,...e){throw J_(t,...e)}function Oi(t,...e){return J_(t,...e)}function ak(t,e,n){const r=Object.assign(Object.assign({},pj()),{[e]:n});return new qd("auth","Firebase",r).create(e,{appName:t.name})}function vs(t){return ak(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function J_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sk.create(t,...e)}function Me(t,e,...n){if(!t)throw J_(e,...n)}function gs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw np(e),new Error(e)}function Ss(t,e){t||gs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function gj(){return IA()==="http:"||IA()==="https:"}function IA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gj()||iV()||"connection"in navigator)?navigator.onLine:!0}function vj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ss(n>e,"Short delay should be less than long delay!"),this.isMobile=tV()||sV()}get(){return yj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(t,e){Ss(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bj=new Jd(3e4,6e4);function Na(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Da(t,e,n,r,s={}){return lk(t,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=Gd(Object.assign({key:t.config.apiKey},l)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:f},o);return rV()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&zo(t.emulatorConfig.host)&&(h.credentials="include"),ok.fetch()(await uk(t,t.config.apiHost,n,c),h)})}async function lk(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},_j),e);try{const s=new Tj(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw jh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[f,h]=c.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw jh(t,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw jh(t,"email-already-in-use",l);if(f==="USER_DISABLED")throw jh(t,"user-disabled",l);const m=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ak(t,m,h);ii(t,m)}}catch(s){if(s instanceof Hi)throw s;ii(t,"network-request-failed",{message:String(s)})}}async function ef(t,e,n,r,s={}){const o=await Da(t,e,n,r,s);return"mfaPendingCredential"in o&&ii(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function uk(t,e,n,r){const s=`${e}${n}?${r}`,o=t,l=o.config.emulator?ew(t.config,s):`${t.config.apiScheme}://${s}`;return wj.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function Ej(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Tj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Oi(this.auth,"network-request-failed")),bj.get())})}}function jh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Oi(t,e,r);return s.customData._tokenResponse=n,s}function NA(t){return t!==void 0&&t.enterprise!==void 0}class Sj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Ej(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Aj(t,e){return Da(t,"GET","/v2/recaptchaConfig",Na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(t,e){return Da(t,"POST","/v1/accounts:delete",e)}async function zp(t,e){return Da(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Cj(t,e=!1){const n=Vt(t),r=await n.getIdToken(e),s=tw(r);Me(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:r,authTime:ad(u0(s.auth_time)),issuedAtTime:ad(u0(s.iat)),expirationTime:ad(u0(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function u0(t){return Number(t)*1e3}function tw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return np("JWT malformed, contained fewer than 3 sections"),null;try{const s=mC(n);return s?JSON.parse(s):(np("Failed to decode base64 JWT payload"),null)}catch(s){return np("Caught error parsing JWT payload as JSON",s?.toString()),null}}function DA(t){const e=tw(t);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hi&&Rj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Rj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ad(this.lastLoginAt),this.creationTime=ad(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jp(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Nd(t,zp(n,{idToken:r}));Me(s?.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?ck(o.providerUserInfo):[],c=Nj(t.providerData,l),f=t.isAnonymous,h=!(t.email&&o.passwordHash)&&!c?.length,m=f?h:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new mv(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,_)}async function Ij(t){const e=Vt(t);await jp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Nj(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ck(t){return t.map(e=>{var{providerId:n}=e,r=Z_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dj(t,e){const n=await lk(t,{},async()=>{const r=Gd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await uk(t,s,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:c,body:r};return t.emulatorConfig&&zo(t.emulatorConfig.host)&&(f.credentials="include"),ok.fetch()(l,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Mj(t,e){return Da(t,"POST","/v2/accounts:revokeToken",Na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=DA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await Dj(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,l=new su;return r&&(Me(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Me(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Me(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new su,this.toJSON())}_performRefresh(){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(t,e){Me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ti{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=Z_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new mv(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Nd(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Cj(this,e)}reload(){return Ij(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await jp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pr(this.auth.app))return Promise.reject(vs(this.auth));const e=await this.getIdToken();return await Nd(this,xj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,l,c,f,h,m;const _=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(s=n.email)!==null&&s!==void 0?s:void 0,C=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,M=(l=n.photoURL)!==null&&l!==void 0?l:void 0,P=(c=n.tenantId)!==null&&c!==void 0?c:void 0,L=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,j=(h=n.createdAt)!==null&&h!==void 0?h:void 0,H=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:K,emailVerified:y,isAnonymous:E,providerData:b,stsTokenManager:T}=n;Me(K&&T,e,"internal-error");const A=su.fromJSON(this.name,T);Me(typeof K=="string",e,"internal-error"),ea(_,e.name),ea(w,e.name),Me(typeof y=="boolean",e,"internal-error"),Me(typeof E=="boolean",e,"internal-error"),ea(C,e.name),ea(M,e.name),ea(P,e.name),ea(L,e.name),ea(j,e.name),ea(H,e.name);const R=new ti({uid:K,auth:e,email:w,emailVerified:y,displayName:_,isAnonymous:E,photoURL:M,phoneNumber:C,tenantId:P,stsTokenManager:A,createdAt:j,lastLoginAt:H});return b&&Array.isArray(b)&&(R.providerData=b.map(k=>Object.assign({},k))),L&&(R._redirectEventId=L),R}static async _fromIdTokenResponse(e,n,r=!1){const s=new su;s.updateFromServerResponse(n);const o=new ti({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await jp(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Me(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?ck(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,c=new su;c.updateFromIdToken(r);const f=new ti({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new mv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=new Map;function ys(t){Ss(t instanceof Function,"Expected a class definition");let e=MA.get(t);return e?(Ss(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,MA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dk.type="NONE";const PA=dk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(t,e,n){return`firebase:${t}:${e}:${n}`}class au{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=rp(this.userKey,s.apiKey,o),this.fullPersistenceKey=rp("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await zp(this.auth,{idToken:e}).catch(()=>{});return n?ti._fromGetAccountInfoResponse(this.auth,n,e):null}return ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new au(ys(PA),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=s[0]||ys(PA);const l=rp(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const m=await h._get(l);if(m){let _;if(typeof m=="string"){const w=await zp(e,{idToken:m}).catch(()=>{});if(!w)break;_=await ti._fromGetAccountInfoResponse(e,w,m)}else _=ti._fromJSON(e,m);h!==o&&(c=_),o=h;break}}catch{}const f=s.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new au(o,e,r):(o=f[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==o)try{await h._remove(l)}catch{}})),new au(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yk(e))return"Blackberry";if(vk(e))return"Webos";if(hk(e))return"Safari";if((e.includes("chrome/")||pk(e))&&!e.includes("edge/"))return"Chrome";if(gk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function fk(t=Mn()){return/firefox\//i.test(t)}function hk(t=Mn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pk(t=Mn()){return/crios\//i.test(t)}function mk(t=Mn()){return/iemobile/i.test(t)}function gk(t=Mn()){return/android/i.test(t)}function yk(t=Mn()){return/blackberry/i.test(t)}function vk(t=Mn()){return/webos/i.test(t)}function nw(t=Mn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Pj(t=Mn()){var e;return nw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Oj(){return aV()&&document.documentMode===10}function _k(t=Mn()){return nw(t)||gk(t)||vk(t)||yk(t)||/windows phone/i.test(t)||mk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t,e=[]){let n;switch(t){case"Browser":n=OA(Mn());break;case"Worker":n=`${OA(Mn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Eu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,c)=>{try{const f=e(o);l(f)}catch(f){c(f)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lj(t,e={}){return Da(t,"GET","/v2/passwordPolicy",Na(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=6;class jj{constructor(e){var n,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:zj,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,l,c;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(o=f.containsUppercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(l=f.containsNumericCharacter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(c=f.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),f}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VA(this),this.idTokenSubscription=new VA(this),this.beforeStateQueue=new Vj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ys(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await au.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zp(this,{idToken:e}),r=await ti._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(pr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&f?.user&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await jp(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pr(this.app))return Promise.reject(vs(this));const n=e?Vt(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pr(this.app)?Promise.reject(vs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pr(this.app)?Promise.reject(vs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Lj(this),n=new jj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Mj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ys(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await au.create(this,[ys(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,s);return()=>{l=!0,f()}}else{const f=e.addObserver(n);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&mj(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Ho(t){return Vt(t)}class VA{constructor(e){this.auth=e,this.observer=null,this.addObserver=pV(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Bj(t){Sm=t}function bk(t){return Sm.loadJS(t)}function Hj(){return Sm.recaptchaEnterpriseScript}function $j(){return Sm.gapiScript}function Fj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class qj{constructor(){this.enterprise=new Gj}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Gj{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Kj="recaptcha-enterprise",Ek="NO_RECAPTCHA";class Yj{constructor(e){this.type=Kj,this.auth=Ho(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{Aj(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new Sj(f);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,l(h.siteKey)}}).catch(f=>{c(f)})})}function s(o,l,c){const f=window.grecaptcha;NA(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(h=>{l(h)}).catch(()=>{l(Ek)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qj().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!n&&NA(window.grecaptcha))s(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=Hj();f.length!==0&&(f+=c),bk(f).then(()=>{s(c,o,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}async function LA(t,e,n,r=!1,s=!1){const o=new Yj(t);let l;if(s)l=Ek;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const f=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const f=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function gv(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await LA(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await LA(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(t,e){const n=sm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Io(o,e??{}))return s;ii(s,"already-initialized")}return n.initialize({options:e})}function Wj(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ys);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Qj(t,e,n){const r=Ho(t);Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=Tk(e),{host:l,port:c}=Zj(e),f=c===null?"":`:${c}`,h={url:`${o}//${l}${f}/`},m=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Me(Io(h,r.config.emulator)&&Io(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,zo(l)?(l_(`${o}//${l}${f}`),u_("Auth",!0)):Jj()}function Tk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Zj(t){const e=Tk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:zA(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:zA(l)}}}function zA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Jj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gs("not implemented")}_getIdTokenResponse(e){return gs("not implemented")}_linkToIdToken(e,n){return gs("not implemented")}_getReauthenticationResolver(e){return gs("not implemented")}}async function eU(t,e){return Da(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tU(t,e){return ef(t,"POST","/v1/accounts:signInWithPassword",Na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nU(t,e){return ef(t,"POST","/v1/accounts:signInWithEmailLink",Na(t,e))}async function rU(t,e){return ef(t,"POST","/v1/accounts:signInWithEmailLink",Na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends rw{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Dd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Dd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gv(e,n,"signInWithPassword",tU);case"emailLink":return nU(e,{email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gv(e,r,"signUpPassword",eU);case"emailLink":return rU(e,{idToken:n,email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(t,e){return ef(t,"POST","/v1/accounts:signInWithIdp",Na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU="http://localhost";class Oo extends rw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ii("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=Z_(n,["providerId","signInMethod"]);if(!r||!s)return null;const l=new Oo(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return ou(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ou(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ou(e,n)}buildRequest(){const e={requestUri:iU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aU(t){const e=Xc(Wc(t)).link,n=e?Xc(Wc(e)).deep_link_id:null,r=Xc(Wc(t)).deep_link_id;return(r?Xc(Wc(r)).link:null)||r||n||e||t}class iw{constructor(e){var n,r,s,o,l,c;const f=Xc(Wc(e)),h=(n=f.apiKey)!==null&&n!==void 0?n:null,m=(r=f.oobCode)!==null&&r!==void 0?r:null,_=sU((s=f.mode)!==null&&s!==void 0?s:null);Me(h&&m&&_,"argument-error"),this.apiKey=h,this.operation=_,this.code=m,this.continueUrl=(o=f.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=f.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=f.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=aU(e);try{return new iw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(){this.providerId=ku.PROVIDER_ID}static credential(e,n){return Dd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=iw.parseLink(n);return Me(r,"argument-error"),Dd._fromEmailAndCode(e,r.code,r.tenantId)}}ku.PROVIDER_ID="password";ku.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ku.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends Sk{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends tf{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oa.credentialFromTaggedObject(e)}static credentialFromError(e){return oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oa.credential(e.oauthAccessToken)}catch{return null}}}oa.FACEBOOK_SIGN_IN_METHOD="facebook.com";oa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends tf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Oo._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return la.credential(n,r)}catch{return null}}}la.GOOGLE_SIGN_IN_METHOD="google.com";la.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends tf{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.GITHUB_SIGN_IN_METHOD="github.com";ua.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends tf{constructor(){super("twitter.com")}static credential(e,n){return Oo._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ca.credential(n,r)}catch{return null}}}ca.TWITTER_SIGN_IN_METHOD="twitter.com";ca.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oU(t,e){return ef(t,"POST","/v1/accounts:signUp",Na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await ti._fromIdTokenResponse(e,r,s),l=jA(r);return new Vo({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=jA(r);return new Vo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function jA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up extends Hi{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Up.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Up(e,n,r,s)}}function Ak(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Up._fromErrorAndOperation(t,o,e,r):o})}async function lU(t,e,n=!1){const r=await Nd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Vo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uU(t,e,n=!1){const{auth:r}=t;if(pr(r.app))return Promise.reject(vs(r));const s="reauthenticate";try{const o=await Nd(t,Ak(r,s,e,t),n);Me(o.idToken,r,"internal-error");const l=tw(o.idToken);Me(l,r,"internal-error");const{sub:c}=l;return Me(t.uid===c,r,"user-mismatch"),Vo._forOperation(t,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&ii(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(t,e,n=!1){if(pr(t.app))return Promise.reject(vs(t));const r="signIn",s=await Ak(t,r,e),o=await Vo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function cU(t,e){return xk(Ho(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(t){const e=Ho(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dU(t,e,n){if(pr(t.app))return Promise.reject(vs(t));const r=Ho(t),l=await gv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oU).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&Ck(t),f}),c=await Vo._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function fU(t,e,n){return pr(t.app)?Promise.reject(vs(t)):cU(Vt(t),ku.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ck(t),r})}function hU(t,e,n,r){return Vt(t).onIdTokenChanged(e,n,r)}function pU(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function mU(t,e,n,r){return Vt(t).onAuthStateChanged(e,n,r)}function gU(t){return Vt(t).signOut()}const Bp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bp,"1"),this.storage.removeItem(Bp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU=1e3,vU=10;class kk extends Rk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_k(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,f)=>{this.notifyListeners(l,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);Oj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,vU):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},yU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kk.type="LOCAL";const _U=kk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik extends Rk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ik.type="SESSION";const Nk=Ik;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Am(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(l).map(async h=>h(n.origin,o)),f=await wU(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Am.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((c,f)=>{const h=sw("",20);s.port1.start();const m=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(_){const w=_;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(w.data.response);break;default:clearTimeout(m),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(){return window}function EU(t){Vi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(){return typeof Vi().WorkerGlobalScope<"u"&&typeof Vi().importScripts=="function"}async function TU(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function AU(){return Dk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="firebaseLocalStorageDb",xU=1,Hp="firebaseLocalStorage",Pk="fbase_key";class nf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xm(t,e){return t.transaction([Hp],e?"readwrite":"readonly").objectStore(Hp)}function CU(){const t=indexedDB.deleteDatabase(Mk);return new nf(t).toPromise()}function yv(){const t=indexedDB.open(Mk,xU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Hp,{keyPath:Pk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Hp)?e(r):(r.close(),await CU(),e(await yv()))})})}async function UA(t,e,n){const r=xm(t,!0).put({[Pk]:e,value:n});return new nf(r).toPromise()}async function RU(t,e){const n=xm(t,!1).get(e),r=await new nf(n).toPromise();return r===void 0?null:r.value}function BA(t,e){const n=xm(t,!0).delete(e);return new nf(n).toPromise()}const kU=800,IU=3;class Ok{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>IU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Dk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Am._getInstance(AU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await TU(),!this.activeServiceWorker)return;this.sender=new bU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yv();return await UA(e,Bp,"1"),await BA(e,Bp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>UA(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>RU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>BA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=xm(s,!1).getAll();return new nf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ok.type="LOCAL";const NU=Ok;new Jd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DU(t,e){return e?ys(e):(Me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw extends rw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ou(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ou(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ou(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MU(t){return xk(t.auth,new aw(t),t.bypassAuthState)}function PU(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),uU(n,new aw(t),t.bypassAuthState)}async function OU(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),lU(n,new aw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MU;case"linkViaPopup":case"linkViaRedirect":return OU;case"reauthViaPopup":case"reauthViaRedirect":return PU;default:ii(this.auth,"internal-error")}}resolve(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VU=new Jd(2e3,1e4);class Kl extends Vk{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Kl.currentPopupAction&&Kl.currentPopupAction.cancel(),Kl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Ss(this.filter.length===1,"Popup operations only handle one event");const e=sw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VU.get())};e()}}Kl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU="pendingRedirect",ip=new Map;class zU extends Vk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ip.get(this.auth._key());if(!e){try{const r=await jU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ip.set(this.auth._key(),e)}return this.bypassAuthState||ip.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jU(t,e){const n=HU(e),r=BU(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function UU(t,e){ip.set(t._key(),e)}function BU(t){return ys(t._redirectPersistence)}function HU(t){return rp(LU,t.config.apiKey,t.name)}async function $U(t,e,n=!1){if(pr(t.app))return Promise.reject(vs(t));const r=Ho(t),s=DU(r,e),l=await new zU(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU=10*60*1e3;class qU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Lk(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Oi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FU&&this.cachedEventUids.clear(),this.cachedEventUids.has(HA(e))}saveEventToCache(e){this.cachedEventUids.add(HA(e)),this.lastProcessedEventTime=Date.now()}}function HA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Lk({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function GU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KU(t,e={}){return Da(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XU=/^https?/;async function WU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await KU(t);for(const n of e)try{if(QU(n))return}catch{}ii(t,"unauthorized-domain")}function QU(t){const e=pv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!XU.test(n))return!1;if(YU.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=new Jd(3e4,6e4);function $A(){const t=Vi().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function JU(t){return new Promise((e,n)=>{var r,s,o;function l(){$A(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$A(),n(Oi(t,"network-request-failed"))},timeout:ZU.get()})}if(!((s=(r=Vi().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Vi().gapi)===null||o===void 0)&&o.load)l();else{const c=Fj("iframefcb");return Vi()[c]=()=>{gapi.load?l():n(Oi(t,"network-request-failed"))},bk(`${$j()}?onload=${c}`).catch(f=>n(f))}}).catch(e=>{throw sp=null,e})}let sp=null;function eB(t){return sp=sp||JU(t),sp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB=new Jd(5e3,15e3),nB="__/auth/iframe",rB="emulator/auth/iframe",iB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aB(t){const e=t.config;Me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ew(e,rB):`https://${t.config.authDomain}/${nB}`,r={apiKey:e.apiKey,appName:t.name,v:Eu},s=sB.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Gd(r).slice(1)}`}async function oB(t){const e=await eB(t),n=Vi().gapi;return Me(n,t,"internal-error"),e.open({where:document.body,url:aB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iB,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Oi(t,"network-request-failed"),c=Vi().setTimeout(()=>{o(l)},tB.get());function f(){Vi().clearTimeout(c),s(r)}r.ping(f).then(f,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uB=500,cB=600,dB="_blank",fB="http://localhost";class FA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hB(t,e,n,r=uB,s=cB){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const f=Object.assign(Object.assign({},lB),{width:r.toString(),height:s.toString(),top:o,left:l}),h=Mn().toLowerCase();n&&(c=pk(h)?dB:n),fk(h)&&(e=e||fB,f.scrollbars="yes");const m=Object.entries(f).reduce((w,[C,M])=>`${w}${C}=${M},`,"");if(Pj(h)&&c!=="_self")return pB(e||"",c),new FA(null);const _=window.open(e||"",c,m);Me(_,t,"popup-blocked");try{_.focus()}catch{}return new FA(_)}function pB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB="__/auth/handler",gB="emulator/auth/handler",yB=encodeURIComponent("fac");async function qA(t,e,n,r,s,o){Me(t.config.authDomain,t,"auth-domain-config-required"),Me(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Eu,eventId:s};if(e instanceof Sk){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",hV(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,_]of Object.entries({}))l[m]=_}if(e instanceof tf){const m=e.getScopes().filter(_=>_!=="");m.length>0&&(l.scopes=m.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const f=await t._getAppCheckToken(),h=f?`#${yB}=${encodeURIComponent(f)}`:"";return`${vB(t)}?${Gd(c).slice(1)}${h}`}function vB({config:t}){return t.emulator?ew(t,gB):`https://${t.authDomain}/${mB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="webStorageSupport";class _B{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nk,this._completeRedirectFn=$U,this._overrideRedirectResult=UU}async _openPopup(e,n,r,s){var o;Ss((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await qA(e,n,r,pv(),s);return hB(e,l,sw())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await qA(e,n,r,pv(),s);return EU(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Ss(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await oB(e),r=new qU(e);return n.register("authEvent",s=>(Me(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(c0,{type:c0},s=>{var o;const l=(o=s?.[0])===null||o===void 0?void 0:o[c0];l!==void 0&&n(!!l),ii(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=WU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _k()||hk()||nw()}}const wB=_B;var GA="@firebase/auth",KA="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TB(t){No(new wa("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Me(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wk(t)},h=new Uj(r,s,o,f);return Wj(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),No(new wa("auth-internal",e=>{const n=Ho(e.getProvider("auth").getImmediate());return(r=>new bB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Di(GA,KA,EB(t)),Di(GA,KA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB=5*60,AB=_C("authIdTokenMaxAge")||SB;let YA=null;const xB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>AB)return;const s=n?.token;YA!==s&&(YA=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function CB(t=f_()){const e=sm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Xj(t,{popupRedirectResolver:wB,persistence:[NU,_U,Nk]}),r=_C("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=xB(o.toString());pU(n,l,()=>l(n.currentUser)),hU(n,c=>l(c))}}const s=gC("auth");return s&&Qj(n,`http://${s}`),n}function RB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Bj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=Oi("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",RB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TB("Browser");const kB={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},ow=EC(kB),si=K7(ow),lw=CB(ow),IB=FL(ow,"us-central1");class zl extends Error{constructor(e,n){super(`${e} at position ${n}`),this.position=n}}const zk=32,NB=10,jk=9,Uk=13,DB=160,MB=8192,PB=8202,OB=8239,VB=8287,LB=12288;function zB(t){return/^[0-9A-Fa-f]$/.test(t)}function fo(t){return t>="0"&&t<="9"}function jB(t){return t>=" "}function Uh(t){return`,:[]/{}()
+`.includes(t)}function XA(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="_"||t==="$"}function WA(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="_"||t==="$"||t>="0"&&t<="9"}const QA=/^(http|https|ftp|mailto|file|data|irc):\/\/$/,ZA=/^[A-Za-z0-9-._~:/?#@!$&'()*+;=]$/;function JA(t){return`,[]/{}
+`.includes(t)}function ex(t){return ap(t)||UB.test(t)}const UB=/^[[{\w-]$/;function BB(t){return t===`
`||t==="\r"||t==="	"||t==="\b"||t==="\f"}function yo(t,e){const n=t.charCodeAt(e);return n===zk||n===NB||n===jk||n===Uk}function HB(t,e){const n=t.charCodeAt(e);return n===zk||n===jk||n===Uk}function $B(t,e){const n=t.charCodeAt(e);return n===DB||n>=MB&&n<=PB||n===OB||n===VB||n===LB}function ap(t){return Bk(t)||vv(t)}function Bk(t){return t==='"'||t===""||t===""}function tx(t){return t==='"'}function vv(t){return t==="'"||t===""||t===""||t==="`"||t===""}function nx(t){return t==="'"}function Uc(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=t.lastIndexOf(e);return r!==-1?t.substring(0,r)+(n?"":t.substring(r+1)):t}function Qr(t,e){let n=t.length;if(!yo(t,n-1))return t+e;for(;yo(t,n-1);)n--;return t.substring(0,n)+e+t.substring(n)}function FB(t,e,n){return t.substring(0,e)+t.substring(e+n)}function qB(t){return/[,\n][ \t\r]*$/.test(t)}const GB={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},KB={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function uw(t){let e=0,n="";h(["```","[```","{```"]),o()||U(),h(["```","```]","```}"]);const s=_(",");for(s&&l(),ex(t[e])&&qB(n)?(s||(n=Qr(n,",")),j()):s&&(n=Uc(n,","));t[e]==="}"||t[e]==="]";)e++,l();if(e>=t.length)return n;V();function o(){l();const G=P()||L()||H()||y()||E()||T(!1)||A();return l(),G}function l(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const X=e;let z=c(G);do z=f(),z&&(z=c(G));while(z);return e>X}function c(G){const X=G?yo:HB;let z="";for(;;)if(X(t,e))z+=t[e],e++;else if($B(t,e))z+=" ",e++;else break;return z.length>0?(n+=z,!0):!1}function f(){if(t[e]==="/"&&t[e+1]==="*"){for(;e<t.length&&!YB(t,e);)e++;return e+=2,!0}if(t[e]==="/"&&t[e+1]==="/"){for(;e<t.length&&t[e]!==`
`;)e++;return!0}return!1}function h(G){if(m(G)){if(XA(t[e]))for(;e<t.length&&WA(t[e]);)e++;return l(),!0}return!1}function m(G){for(const X of G){const z=e+X.length;if(t.slice(e,z)===X)return e=z,!0}return!1}function _(G){return t[e]===G?(n+=t[e],e++,!0):!1}function w(G){return t[e]===G?(e++,!0):!1}function C(){return w("\\")}function M(){return l(),t[e]==="."&&t[e+1]==="."&&t[e+2]==="."?(e+=3,l(),w(","),!0):!1}function P(){if(t[e]==="{"){n+="{",e++,l(),w(",")&&l();let G=!0;for(;e<t.length&&t[e]!=="}";){let X;if(G?(X=!0,G=!1):(X=_(","),X||(n=Qr(n,",")),l()),M(),!(H()||T(!0))){t[e]==="}"||t[e]==="{"||t[e]==="]"||t[e]==="["||t[e]===void 0?n=Uc(n,","):Q();break}l();const W=_(":"),ee=e>=t.length;W||(ex(t[e])||ee?n=Qr(n,":"):x()),o()||(W||ee?n+="null":x())}return t[e]==="}"?(n+="}",e++):n=Qr(n,"}"),!0}return!1}function L(){if(t[e]==="["){n+="[",e++,l(),w(",")&&l();let G=!0;for(;e<t.length&&t[e]!=="]";)if(G?G=!1:_(",")||(n=Qr(n,",")),M(),!o()){n=Uc(n,",");break}return t[e]==="]"?(n+="]",e++):n=Qr(n,"]"),!0}return!1}function j(){let G=!0,X=!0;for(;X;)G?G=!1:_(",")||(n=Qr(n,",")),X=o();X||(n=Uc(n,",")),n=`[
${n}
]`}function H(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,z=t[e]==="\\";if(z&&(e++,z=!0),ap(t[e])){const W=tx(t[e])?tx:nx(t[e])?nx:vv(t[e])?vv:Bk,ee=e,Z=n.length;let ne='"';for(e++;;){if(e>=t.length){const oe=R(e-1);return!G&&Uh(t.charAt(oe))?(e=ee,n=n.substring(0,Z),H(!0)):(ne=Qr(ne,'"'),n+=ne,!0)}if(e===X)return ne=Qr(ne,'"'),n+=ne,!0;if(W(t[e])){const oe=e,ce=ne.length;if(ne+='"',e++,n+=ne,l(!1),G||e>=t.length||Uh(t[e])||ap(t[e])||fo(t[e]))return K(),!0;const fe=R(oe-1),ge=t.charAt(fe);if(ge===",")return e=ee,n=n.substring(0,Z),H(!1,fe);if(Uh(ge))return e=ee,n=n.substring(0,Z),H(!0);n=n.substring(0,Z),e=oe+1,ne=`${ne.substring(0,ce)}\\${ne.substring(ce)}`}else if(G&&JA(t[e])){if(t[e-1]===":"&&QA.test(t.substring(ee+1,e+2)))for(;e<t.length&&ZA.test(t[e]);)ne+=t[e],e++;return ne=Qr(ne,'"'),n+=ne,K(),!0}else if(t[e]==="\\"){const oe=t.charAt(e+1);if(KB[oe]!==void 0)ne+=t.slice(e,e+2),e+=2;else if(oe==="u"){let fe=2;for(;fe<6&&zB(t[e+fe]);)fe++;fe===6?(ne+=t.slice(e,e+6),e+=6):e+fe>=t.length?e=t.length:B()}else ne+=oe,e+=2}else{const oe=t.charAt(e);oe==='"'&&t[e-1]!=="\\"?(ne+=`\\${oe}`,e++):BB(oe)?(ne+=GB[oe],e++):(jB(oe)||$(oe),ne+=oe,e++)}z&&C()}}return!1}function K(){let G=!1;for(l();t[e]==="+";){G=!0,e++,l(),n=Uc(n,'"',!0);const X=n.length;H()?n=FB(n,X,1):n=Qr(n,'"')}return G}function y(){const G=e;if(t[e]==="-"){if(e++,k())return D(G),!0;if(!fo(t[e]))return e=G,!1}for(;fo(t[e]);)e++;if(t[e]==="."){if(e++,k())return D(G),!0;if(!fo(t[e]))return e=G,!1;for(;fo(t[e]);)e++}if(t[e]==="e"||t[e]==="E"){if(e++,(t[e]==="-"||t[e]==="+")&&e++,k())return D(G),!0;if(!fo(t[e]))return e=G,!1;for(;fo(t[e]);)e++}if(!k())return e=G,!1;if(e>G){const X=t.slice(G,e),z=/^0\d/.test(X);return n+=z?`"${X}"`:X,!0}return!1}function E(){return b("true","true")||b("false","false")||b("null","null")||b("True","true")||b("False","false")||b("None","null")}function b(G,X){return t.slice(e,e+G.length)===G?(n+=X,e+=G.length,!0):!1}function T(G){const X=e;if(XA(t[e])){for(;e<t.length&&WA(t[e]);)e++;let z=e;for(;yo(t,z);)z++;if(t[z]==="(")return e=z+1,o(),t[e]===")"&&(e++,t[e]===";"&&e++),!0}for(;e<t.length&&!JA(t[e])&&!ap(t[e])&&(!G||t[e]!==":");)e++;if(t[e-1]===":"&&QA.test(t.substring(X,e+2)))for(;e<t.length&&ZA.test(t[e]);)e++;if(e>X){for(;yo(t,e-1)&&e>0;)e--;const z=t.slice(X,e);return n+=z==="undefined"?"null":JSON.stringify(z),t[e]==='"'&&e++,!0}}function A(){if(t[e]==="/"){const G=e;for(e++;e<t.length&&(t[e]!=="/"||t[e-1]==="\\");)e++;return e++,n+=`"${t.substring(G,e)}"`,!0}}function R(G){let X=G;for(;X>0&&yo(t,X);)X--;return X}function k(){return e>=t.length||Uh(t[e])||yo(t,e)}function D(G){n+=`${t.slice(G,e)}0`}function $(G){throw new zl(`Invalid character ${JSON.stringify(G)}`,e)}function V(){throw new zl(`Unexpected character ${JSON.stringify(t[e])}`,e)}function U(){throw new zl("Unexpected end of json string",t.length)}function Q(){throw new zl("Object key expected",e)}function x(){throw new zl("Colon expected",e)}function B(){const G=t.slice(e,e+6);throw new zl(`Invalid unicode character "${G}"`,e)}}function YB(t,e){return t[e]==="*"&&t[e+1]==="/"}const Hk={1:"Hero visual with comprehensive explanation - large image with detailed educational content",2:"Step-by-step visual guide - multiple images with substantial explanations for each step",3:"Process diagram with detailed explanation - flowchart showing complex processes with educational context",4:"Concept map with analysis - mind map with detailed explanations of relationships",5:"Data visualization with analysis - pie chart with detailed statistical breakdown and interpretation",6:"Strategic framework with detailed explanation - quadrant analysis with comprehensive guidelines",7:"Featured concept layout - large visual with title and multiple paragraphs of educational content",8:"Comparative analysis - main concept with supporting evidence and detailed explanations",9:"Video learning with context - educational video with substantial background information",12:"Illustrated guide with key insights - central visual with detailed bullet points and explanations",13:"Media-rich educational content - video with comprehensive overview and context",14:"Comprehensive topic exploration - alternating visuals and detailed explanations for thorough understanding",15:"Historical timeline with detailed context - chronological progression with substantial descriptions",16:"Multi-concept comparison - grid layout with detailed descriptions for comparing related topics",17:"Code tutorial with visual examples - code snippets with explanations and visual diagrams",18:"Technical documentation - code examples with comprehensive API documentation and use cases"},XB={1:'["compelling_title", "comprehensive_educational_content", ["hero_image_prompt", "supporting_visual_1", "supporting_visual_2"]]',2:'[["step_image_1", "detailed_step_explanation_1"], ["step_image_2", "detailed_step_explanation_2"], ["step_image_3", "detailed_step_explanation_3"]]',3:[`flowchart TD
    A[starting_concept] -->|process_1| B(intermediate_result)
    B --> C{decision_point}
    C -->|outcome_a| D[final_result_1]
    C -->|outcome_b| E[final_result_2]
    C -->|outcome_c| F[fa:fa-star special_case]`,"comprehensive_process_explanation"],4:[`mindmap
  root((Central_Educational_Concept))
    Key_Aspect_1
      Supporting_Detail_A
      Supporting_Detail_B
    Key_Aspect_2
      Supporting_Detail_C
      Supporting_Detail_D`,"detailed_concept_analysis"],5:[`pie
    title Educational_Data_Analysis
    "Primary_Factor" : 45
    "Secondary_Factor" : 30
    "Additional_Factors" : 25`,"comprehensive_data_interpretation"],6:[`quadrantChart
    title Educational_Framework
    x-axis Low_Complexity --> High_Complexity
    y-axis Low_Impact --> High_Impact
    quadrant-1 Quick_Concepts
    quadrant-2 Advanced_Topics
    quadrant-3 Basic_Ideas
    quadrant-4 Fundamental_Principles
    "Concept_A": [0.3, 0.7]
    "Concept_B": [0.8, 0.4]
    "Concept_C": [0.2, 0.8]`,"detailed_framework_explanation"],7:"[featured_visual_prompt, educational_title, detailed_paragraph_1, detailed_paragraph_2, detailed_paragraph_3]",8:"[main_concept_visual, educational_title, comprehensive_explanation, [evidence_visual_1, evidence_visual_2, evidence_visual_3]]",9:"[educational_video_prompt, comprehensive_contextual_explanation]",12:"[central_educational_visual, [detailed_insight_1, detailed_insight_2, detailed_insight_3, detailed_insight_4]]",13:"[educational_section_title, comprehensive_overview_text, instructional_video_prompt]",14:"[educational_visual_1, detailed_explanation_1, educational_visual_2, detailed_explanation_2, educational_visual_3, detailed_explanation_3]",15:"[date_1, historical_visual_1, comprehensive_event_description_1, date_2, historical_visual_2, comprehensive_event_description_2]",16:"[topic_title_1, topic_visual_1, detailed_description_1, topic_title_2, topic_visual_2, detailed_description_2]",17:"[tutorial_title, code_example_1, code_explanation_1, architecture_diagram_prompt, implementation_explanation, code_example_2, code_explanation_2]",18:"[api_title, code_snippet, comprehensive_documentation, usage_examples, visual_diagram_prompt, best_practices_explanation]"},WB=Object.freeze(Object.defineProperty({__proto__:null,LAYOUT_SCHEMA:XB,LAYOUT_TYPES:Hk},Symbol.toStringTag,{value:"Module"})),QB=(t,e,n,r)=>`You are an expert educational designer who creates comprehensive, visually-enhanced learning content.
    Return ONLY a valid array. Do not include markdown formatting, code blocks, or any text before or after the array.
        
        EDUCATIONAL CONTENT RULES:
         COMPREHENSIVE: Each node should contain 100+ words of educational content total
         WELL-STRUCTURED: Use proper paragraphs, clear explanations, and logical flow
         VISUAL BALANCE: Combine substantial text with compelling visuals
         EDUCATIONAL DEPTH: Explain concepts thoroughly with examples, context, and details
         ENGAGING WRITING: Use clear, engaging language that teaches effectively
        
        TEXT GUIDELINES:
         Titles: Clear, educational (3-8 words)
         Paragraphs: Full explanations (3-5 sentences each, 20-40 words per sentence)
         Descriptions: Detailed and informative (2-3 sentences minimum)
         Content should flow logically and build understanding progressively
         Markdown should be used for formatting

        IMAGE PROMPTS:
         Educational and specific: "Detailed diagram of photosynthesis process in plant cells"
         Include visual style: "realistic scientific illustration", "clean educational diagram"
         Support the educational content meaningfully
        
        CONTENT BALANCE:
         60% substantial educational text
         40% compelling visuals that enhance learning
         Ensure minimum 100 words total per node
         Use markdown formatting in text (headings, bold, italics where appropriate)
        
        OUTPUT FORMAT:
        Return ONLY a valid array based on the SCHEMA. Follow the exact structure.
        NO markdown code blocks, NO extra text.
        RETURN AN ARRAY [] - NOT AN OBJECT!

        CONCEPT: ${e}
        CONTEXT: ${t}
        REMEMBER: THIS IS REALLY IMPORTANT : Focus strictly on the main topic. The provided context should be used only to clarify the topic or provide concrete examples  not as the focus of the explanation. If the context is irrelevant or distracting, ignore it entirely
        SCHEMA: ${r}`,ZB=(t,e)=>{const n=(r,s)=>`Respond ONLY with a valid JSON array like ["topic1", "topic2"].
        Instructions:
        - Suggest exactly ${r}-${s} logical next topics.
        - Each topic <4 words, doublequoted.
        - No explanation or extra text.
  
    Concept: ${t}`;switch(e){case"explain":return n(4,5);case"argue":return n(3,5);case"answer":return n(2,3);default:return n(3,5)}},JB=(t,e)=>`RETURN ONLY THE FA ICON CORRESPONDING TO THE CONCEPT: "${t}". EXAMPLE: <i class="fas fa-check"></i>`,eH=(t,e,n)=>`Choose the best educational layout for "${t}" - prioritize diversity and optimal content presentation.
        
        Use diverse layouts for better user experience. If both layouts are suitable, prefer the one that is different from the last used layout. Last used layout: ${n}.
        
        SELECTION CRITERIA:
         Content Type Match: Which layout best fits the specific content structure?
         Visual Balance: Optimal text-to-visual ratio for the topic
         Learning Effectiveness: Best presentation for comprehension
         Layout Variety: Strongly prefer different layouts (avoid repeating same layout)
        
        PRIORITY LAYOUT SELECTION GUIDE:
         **Technical/Programming topics**: Use layouts 17, 18 (code tutorials, API docs), 1, 8
         **Process/systems**: Use diagram layouts 3, 4, 5, 6
         **Comprehensive explanations**: Use hero layouts 1, 7, 12
         **Step-by-step content**: Use layouts 2, 15 (timeline), 17 (code tutorial)
         **Multi-aspect topics**: Use layouts 12, 13, 16
         **Media-heavy content**: Use layouts 9, 13
         **Quick concepts**: Use layouts 1, 6, 8
         **Historical/chronological**: Use layout 15
         **Comparison content**: Use layouts 8, 16, 14
        
        DIVERSIFICATION RULES:
        - Prioritize new code layouts (17, 18) for technical content
        - Rotate between different layout families
        - Match complexity of layout to complexity of content
        - Consider visual appeal and educational effectiveness
        
        Return ONLY the layout number as an integer (1-18).
        
        LAYOUT TYPES:
        ${JSON.stringify(Hk)}`,$k=t=>{try{let e=t.replace(/```json\s*\n?/gi,"").replace(/```\s*$/gi,"");e=e.trim();const n=e.match(/\[[\s\S]*\]|\{[\s\S]*\}/);return n&&(e=n[0]),uw(e)}catch(e){console.warn("Failed to repair JSON:",e),console.warn("Original response:",t);let n=t.replace(/```json\s*\n?/gi,"").replace(/```\s*$/gi,"").trim();const r=n.match(/\[[\s\S]*\]|\{[\s\S]*\}/);return r?r[0]:n}},Cm=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const r=await GL(IB,"groqChat")({message:e});return console.log("groqChat response:",r.data),r.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},tH=async t=>{try{const e=await Cm(ZB(t,"default"));console.log("Suggestions response:",e);const n=$k(e);try{const r=JSON.parse(n);return Array.isArray(r)?r:[]}catch(r){console.warn("JSON parse failed for suggestions, attempting repair:",r);const s=uw(e),o=JSON.parse(s);return Array.isArray(o)?o:[]}}catch(e){return console.error("Error fetching suggestions:",e),[]}},nH=async t=>{try{const e=await Cm(JB(t,"default"));return console.log("Icon response:",e),e||""}catch(e){return console.error("Error fetching icon:",e),""}},rH=async t=>{try{const e=await Cm(eH(t,"default"));console.log("Layout response:",e);const n=e.replace(/[^\d]/g,""),r=parseInt(n);return isNaN(r)||r<1||r>18?(console.warn(`Invalid layout number: ${r}, defaulting to 1`),1):r}catch(e){return console.error("Error fetching layout:",e),1}},iH=async(t,e,n,r)=>{try{const o=(await fC(()=>Promise.resolve().then(()=>WB),void 0)).LAYOUT_SCHEMA[n.toString()],l=Array.isArray(o)?JSON.stringify(o):o,c=await Cm(QB(e,t,r,l));console.log("Content response:",c);const f=$k(c);try{const h=JSON.parse(f);return Array.isArray(h)?h:[]}catch(h){console.warn("JSON parse failed, attempting repair:",h);const m=uw(c),_=JSON.parse(m);return Array.isArray(_)?_:[]}}catch(s){return console.error("Error fetching content:",s),[]}},sH=async(t,e="",n="default")=>{try{const r=await rH(t);console.log("Selected layout:",r);const[s,o,l]=await Promise.all([iH(t,e,r,n),tH(t),nH(t)]);return console.log("Generated content:",s),console.log("Generated suggestions:",o),console.log("Generated icon:",l),{layout:r,content:s,suggestions:o,icon:l,title:t,fullText:t}}catch(r){return console.error("Error in generateNodeContent:",r),{layout:1,content:[t,"Content loading failed",[]],suggestions:[],icon:"",title:t,fullText:t}}},aH="AIzaSyD2LVnTgBbk-5Wo1V2sCmY9ebcmIPdS1ng",oH="93fe2cec9d77f4202",lH="https://www.googleapis.com/customsearch/v1",uH="AIzaSyDxTJKoi1S8YjJZD12QTa4F9hV8fN8pNqo",cH="https://www.googleapis.com/youtube/v3/search",Bc=new Map,Hc=new Map,ai=async t=>{if(Bc.has(t))return Bc.get(t);try{const e=encodeURIComponent(t),n=`${lH}?key=${aH}&cx=${oH}&q=${e}&searchType=image&num=1&safe=active`,r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.items&&s.items.length>0){const l=s.items[0],c=l.link||l.pagemap?.cse_image?.[0]?.src;if(c)return Bc.set(t,c),c}const o=`https://via.placeholder.com/640x360/e5e7eb/6b7280?text=${e}`;return Bc.set(t,o),o}catch(e){console.error("Error fetching Google image:",e);const n="https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error";return Bc.set(t,n),n}},Fk=async t=>{if(Hc.has(t))return Hc.get(t);try{const e=encodeURIComponent(t),n=`${cH}?key=${uH}&q=${e}&part=snippet&type=video&maxResults=1&videoEmbeddable=true&safeSearch=strict`,r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.items&&s.items.length>0){const l=s.items[0].id.videoId;if(l)return Hc.set(t,l),l}const o="dQw4w9WgXcQ";return Hc.set(t,o),o}catch(e){console.error("Error fetching YouTube video:",e);const n="dQw4w9WgXcQ";return Hc.set(t,n),n}},qk=t=>`https://www.youtube.com/embed/${t}`;async function Rm(t){const n=(await fC(()=>import("./mermaid.core-rnrQoKS0.js").then(o=>o.bo),[])).default??window.mermaid?.mermaidAPI;window.___mermaidInitialised||(n.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose",fontFamily:"inherit"}),window.___mermaidInitialised=!0);let r;try{r=(await n.render("m_"+Math.random().toString(36).slice(2),t.trim())).svg}catch(o){throw o}return new DOMParser().parseFromString(r,"image/svg+xml").documentElement}var op={exports:{}},dH=op.exports,rx;function fH(){return rx||(rx=1,function(t){(function(){function e(y){var E={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `` and `` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(y===!1)return JSON.parse(JSON.stringify(E));var b={};for(var T in E)E.hasOwnProperty(T)&&(b[T]=E[T].defaultValue);return b}function n(){var y=e(!0),E={};for(var b in y)y.hasOwnProperty(b)&&(E[b]=!0);return E}var r={},s={},o={},l=e(!0),c="vanilla",f={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:e(!0),allOn:n()};r.helper={},r.extensions={},r.setOption=function(y,E){return l[y]=E,this},r.getOption=function(y){return l[y]},r.getOptions=function(){return l},r.resetOptions=function(){l=e(!0)},r.setFlavor=function(y){if(!f.hasOwnProperty(y))throw Error(y+" flavor was not found");r.resetOptions();var E=f[y];c=y;for(var b in E)E.hasOwnProperty(b)&&(l[b]=E[b])},r.getFlavor=function(){return c},r.getFlavorOptions=function(y){if(f.hasOwnProperty(y))return f[y]},r.getDefaultOptions=function(y){return e(y)},r.subParser=function(y,E){if(r.helper.isString(y))if(typeof E<"u")s[y]=E;else{if(s.hasOwnProperty(y))return s[y];throw Error("SubParser named "+y+" not registered!")}},r.extension=function(y,E){if(!r.helper.isString(y))throw Error("Extension 'name' must be a string");if(y=r.helper.stdExtName(y),r.helper.isUndefined(E)){if(!o.hasOwnProperty(y))throw Error("Extension named "+y+" is not registered!");return o[y]}else{typeof E=="function"&&(E=E()),r.helper.isArray(E)||(E=[E]);var b=h(E,y);if(b.valid)o[y]=E;else throw Error(b.error)}},r.getAllExtensions=function(){return o},r.removeExtension=function(y){delete o[y]},r.resetExtensions=function(){o={}};function h(y,E){var b=E?"Error in "+E+" extension->":"Error in unnamed extension",T={valid:!0,error:""};r.helper.isArray(y)||(y=[y]);for(var A=0;A<y.length;++A){var R=b+" sub-extension "+A+": ",k=y[A];if(typeof k!="object")return T.valid=!1,T.error=R+"must be an object, but "+typeof k+" given",T;if(!r.helper.isString(k.type))return T.valid=!1,T.error=R+'property "type" must be a string, but '+typeof k.type+" given",T;var D=k.type=k.type.toLowerCase();if(D==="language"&&(D=k.type="lang"),D==="html"&&(D=k.type="output"),D!=="lang"&&D!=="output"&&D!=="listener")return T.valid=!1,T.error=R+"type "+D+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',T;if(D==="listener"){if(r.helper.isUndefined(k.listeners))return T.valid=!1,T.error=R+'. Extensions of type "listener" must have a property called "listeners"',T}else if(r.helper.isUndefined(k.filter)&&r.helper.isUndefined(k.regex))return T.valid=!1,T.error=R+D+' extensions must define either a "regex" property or a "filter" method',T;if(k.listeners){if(typeof k.listeners!="object")return T.valid=!1,T.error=R+'"listeners" property must be an object but '+typeof k.listeners+" given",T;for(var $ in k.listeners)if(k.listeners.hasOwnProperty($)&&typeof k.listeners[$]!="function")return T.valid=!1,T.error=R+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+$+" must be a function but "+typeof k.listeners[$]+" given",T}if(k.filter){if(typeof k.filter!="function")return T.valid=!1,T.error=R+'"filter" must be a function, but '+typeof k.filter+" given",T}else if(k.regex){if(r.helper.isString(k.regex)&&(k.regex=new RegExp(k.regex,"g")),!(k.regex instanceof RegExp))return T.valid=!1,T.error=R+'"regex" property must either be a string or a RegExp object, but '+typeof k.regex+" given",T;if(r.helper.isUndefined(k.replace))return T.valid=!1,T.error=R+'"regex" extensions must implement a replace string or function',T}}return T}r.validateExtension=function(y){var E=h(y,null);return E.valid?!0:(console.warn(E.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(y){return typeof y=="string"||y instanceof String},r.helper.isFunction=function(y){var E={};return y&&E.toString.call(y)==="[object Function]"},r.helper.isArray=function(y){return Array.isArray(y)},r.helper.isUndefined=function(y){return typeof y>"u"},r.helper.forEach=function(y,E){if(r.helper.isUndefined(y))throw new Error("obj param is required");if(r.helper.isUndefined(E))throw new Error("callback param is required");if(!r.helper.isFunction(E))throw new Error("callback param must be a function/closure");if(typeof y.forEach=="function")y.forEach(E);else if(r.helper.isArray(y))for(var b=0;b<y.length;b++)E(y[b],b,y);else if(typeof y=="object")for(var T in y)y.hasOwnProperty(T)&&E(y[T],T,y);else throw new Error("obj does not seem to be an array or an iterable object")},r.helper.stdExtName=function(y){return y.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function m(y,E){var b=E.charCodeAt(0);return"E"+b+"E"}r.helper.escapeCharactersCallback=m,r.helper.escapeCharacters=function(y,E,b){var T="(["+E.replace(/([\[\]\\])/g,"\\$1")+"])";b&&(T="\\\\"+T);var A=new RegExp(T,"g");return y=y.replace(A,m),y},r.helper.unescapeHTMLEntities=function(y){return y.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var _=function(y,E,b,T){var A=T||"",R=A.indexOf("g")>-1,k=new RegExp(E+"|"+b,"g"+A.replace(/g/g,"")),D=new RegExp(E,A.replace(/g/g,"")),$=[],V,U,Q,x,B;do for(V=0;Q=k.exec(y);)if(D.test(Q[0]))V++||(U=k.lastIndex,x=U-Q[0].length);else if(V&&!--V){B=Q.index+Q[0].length;var G={left:{start:x,end:U},match:{start:U,end:Q.index},right:{start:Q.index,end:B},wholeMatch:{start:x,end:B}};if($.push(G),!R)return $}while(V&&(k.lastIndex=U));return $};r.helper.matchRecursiveRegExp=function(y,E,b,T){for(var A=_(y,E,b,T),R=[],k=0;k<A.length;++k)R.push([y.slice(A[k].wholeMatch.start,A[k].wholeMatch.end),y.slice(A[k].match.start,A[k].match.end),y.slice(A[k].left.start,A[k].left.end),y.slice(A[k].right.start,A[k].right.end)]);return R},r.helper.replaceRecursiveRegExp=function(y,E,b,T,A){if(!r.helper.isFunction(E)){var R=E;E=function(){return R}}var k=_(y,b,T,A),D=y,$=k.length;if($>0){var V=[];k[0].wholeMatch.start!==0&&V.push(y.slice(0,k[0].wholeMatch.start));for(var U=0;U<$;++U)V.push(E(y.slice(k[U].wholeMatch.start,k[U].wholeMatch.end),y.slice(k[U].match.start,k[U].match.end),y.slice(k[U].left.start,k[U].left.end),y.slice(k[U].right.start,k[U].right.end))),U<$-1&&V.push(y.slice(k[U].wholeMatch.end,k[U+1].wholeMatch.start));k[$-1].wholeMatch.end<y.length&&V.push(y.slice(k[$-1].wholeMatch.end)),D=V.join("")}return D},r.helper.regexIndexOf=function(y,E,b){if(!r.helper.isString(y))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(E instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var T=y.substring(b||0).search(E);return T>=0?T+(b||0):T},r.helper.splitAtIndex=function(y,E){if(!r.helper.isString(y))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[y.substring(0,E),y.substring(E)]},r.helper.encodeEmailAddress=function(y){var E=[function(b){return"&#"+b.charCodeAt(0)+";"},function(b){return"&#x"+b.charCodeAt(0).toString(16)+";"},function(b){return b}];return y=y.replace(/./g,function(b){if(b==="@")b=E[Math.floor(Math.random()*2)](b);else{var T=Math.random();b=T>.9?E[2](b):T>.45?E[1](b):E[0](b)}return b}),y},r.helper.padEnd=function(E,b,T){return b=b>>0,T=String(T||" "),E.length>b?String(E):(b=b-E.length,b>T.length&&(T+=T.repeat(b/T.length)),String(E)+T.slice(0,b))},typeof console>"u"&&(console={warn:function(y){alert(y)},log:function(y){alert(y)},error:function(y){throw y}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"","-1":"",100:"",1234:"","1st_place_medal":"","2nd_place_medal":"","3rd_place_medal":"","8ball":"",a:"",ab:"",abc:"",abcd:"",accept:"",aerial_tramway:"",airplane:"",alarm_clock:"",alembic:"",alien:"",ambulance:"",amphora:"",anchor:"",angel:"",anger:"",angry:"",anguished:"",ant:"",apple:"",aquarius:"",aries:"",arrow_backward:"",arrow_double_down:"",arrow_double_up:"",arrow_down:"",arrow_down_small:"",arrow_forward:"",arrow_heading_down:"",arrow_heading_up:"",arrow_left:"",arrow_lower_left:"",arrow_lower_right:"",arrow_right:"",arrow_right_hook:"",arrow_up:"",arrow_up_down:"",arrow_up_small:"",arrow_upper_left:"",arrow_upper_right:"",arrows_clockwise:"",arrows_counterclockwise:"",art:"",articulated_lorry:"",artificial_satellite:"",astonished:"",athletic_shoe:"",atm:"",atom_symbol:"",avocado:"",b:"",baby:"",baby_bottle:"",baby_chick:"",baby_symbol:"",back:"",bacon:"",badminton:"",baggage_claim:"",baguette_bread:"",balance_scale:"",balloon:"",ballot_box:"",ballot_box_with_check:"",bamboo:"",banana:"",bangbang:"",bank:"",bar_chart:"",barber:"",baseball:"",basketball:"",basketball_man:"",basketball_woman:"&zwj;",bat:"",bath:"",bathtub:"",battery:"",beach_umbrella:"",bear:"",bed:"",bee:"",beer:"",beers:"",beetle:"",beginner:"",bell:"",bellhop_bell:"",bento:"",biking_man:"",bike:"",biking_woman:"&zwj;",bikini:"",biohazard:"",bird:"",birthday:"",black_circle:"",black_flag:"",black_heart:"",black_joker:"",black_large_square:"",black_medium_small_square:"",black_medium_square:"",black_nib:"",black_small_square:"",black_square_button:"",blonde_man:"",blonde_woman:"&zwj;",blossom:"",blowfish:"",blue_book:"",blue_car:"",blue_heart:"",blush:"",boar:"",boat:"",bomb:"",book:"",bookmark:"",bookmark_tabs:"",books:"",boom:"",boot:"",bouquet:"",bowing_man:"",bow_and_arrow:"",bowing_woman:"&zwj;",bowling:"",boxing_glove:"",boy:"",bread:"",bride_with_veil:"",bridge_at_night:"",briefcase:"",broken_heart:"",bug:"",building_construction:"",bulb:"",bullettrain_front:"",bullettrain_side:"",burrito:"",bus:"",business_suit_levitating:"",busstop:"",bust_in_silhouette:"",busts_in_silhouette:"",butterfly:"",cactus:"",cake:"",calendar:"",call_me_hand:"",calling:"",camel:"",camera:"",camera_flash:"",camping:"",cancer:"",candle:"",candy:"",canoe:"",capital_abcd:"",capricorn:"",car:"",card_file_box:"",card_index:"",card_index_dividers:"",carousel_horse:"",carrot:"",cat:"",cat2:"",cd:"",chains:"",champagne:"",chart:"",chart_with_downwards_trend:"",chart_with_upwards_trend:"",checkered_flag:"",cheese:"",cherries:"",cherry_blossom:"",chestnut:"",chicken:"",children_crossing:"",chipmunk:"",chocolate_bar:"",christmas_tree:"",church:"",cinema:"",circus_tent:"",city_sunrise:"",city_sunset:"",cityscape:"",cl:"",clamp:"",clap:"",clapper:"",classical_building:"",clinking_glasses:"",clipboard:"",clock1:"",clock10:"",clock1030:"",clock11:"",clock1130:"",clock12:"",clock1230:"",clock130:"",clock2:"",clock230:"",clock3:"",clock330:"",clock4:"",clock430:"",clock5:"",clock530:"",clock6:"",clock630:"",clock7:"",clock730:"",clock8:"",clock830:"",clock9:"",clock930:"",closed_book:"",closed_lock_with_key:"",closed_umbrella:"",cloud:"",cloud_with_lightning:"",cloud_with_lightning_and_rain:"",cloud_with_rain:"",cloud_with_snow:"",clown_face:"",clubs:"",cocktail:"",coffee:"",coffin:"",cold_sweat:"",comet:"",computer:"",computer_mouse:"",confetti_ball:"",confounded:"",confused:"",congratulations:"",construction:"",construction_worker_man:"",construction_worker_woman:"&zwj;",control_knobs:"",convenience_store:"",cookie:"",cool:"",policeman:"",copyright:"",corn:"",couch_and_lamp:"",couple:"",couple_with_heart_woman_man:"",couple_with_heart_man_man:"&zwj;&zwj;",couple_with_heart_woman_woman:"&zwj;&zwj;",couplekiss_man_man:"&zwj;&zwj;&zwj;",couplekiss_man_woman:"",couplekiss_woman_woman:"&zwj;&zwj;&zwj;",cow:"",cow2:"",cowboy_hat_face:"",crab:"",crayon:"",credit_card:"",crescent_moon:"",cricket:"",crocodile:"",croissant:"",crossed_fingers:"",crossed_flags:"",crossed_swords:"",crown:"",cry:"",crying_cat_face:"",crystal_ball:"",cucumber:"",cupid:"",curly_loop:"",currency_exchange:"",curry:"",custard:"",customs:"",cyclone:"",dagger:"",dancer:"",dancing_women:"",dancing_men:"&zwj;",dango:"",dark_sunglasses:"",dart:"",dash:"",date:"",deciduous_tree:"",deer:"",department_store:"",derelict_house:"",desert:"",desert_island:"",desktop_computer:"",male_detective:"",diamond_shape_with_a_dot_inside:"",diamonds:"",disappointed:"",disappointed_relieved:"",dizzy:"",dizzy_face:"",do_not_litter:"",dog:"",dog2:"",dollar:"",dolls:"",dolphin:"",door:"",doughnut:"",dove:"",dragon:"",dragon_face:"",dress:"",dromedary_camel:"",drooling_face:"",droplet:"",drum:"",duck:"",dvd:"","e-mail":"",eagle:"",ear:"",ear_of_rice:"",earth_africa:"",earth_americas:"",earth_asia:"",egg:"",eggplant:"",eight_pointed_black_star:"",eight_spoked_asterisk:"",electric_plug:"",elephant:"",email:"",end:"",envelope_with_arrow:"",euro:"",european_castle:"",european_post_office:"",evergreen_tree:"",exclamation:"",expressionless:"",eye:"",eye_speech_bubble:"&zwj;",eyeglasses:"",eyes:"",face_with_head_bandage:"",face_with_thermometer:"",fist_oncoming:"",factory:"",fallen_leaf:"",family_man_woman_boy:"",family_man_boy:"&zwj;",family_man_boy_boy:"&zwj;&zwj;",family_man_girl:"&zwj;",family_man_girl_boy:"&zwj;&zwj;",family_man_girl_girl:"&zwj;&zwj;",family_man_man_boy:"&zwj;&zwj;",family_man_man_boy_boy:"&zwj;&zwj;&zwj;",family_man_man_girl:"&zwj;&zwj;",family_man_man_girl_boy:"&zwj;&zwj;&zwj;",family_man_man_girl_girl:"&zwj;&zwj;&zwj;",family_man_woman_boy_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl:"&zwj;&zwj;",family_man_woman_girl_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl_girl:"&zwj;&zwj;&zwj;",family_woman_boy:"&zwj;",family_woman_boy_boy:"&zwj;&zwj;",family_woman_girl:"&zwj;",family_woman_girl_boy:"&zwj;&zwj;",family_woman_girl_girl:"&zwj;&zwj;",family_woman_woman_boy:"&zwj;&zwj;",family_woman_woman_boy_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl:"&zwj;&zwj;",family_woman_woman_girl_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl_girl:"&zwj;&zwj;&zwj;",fast_forward:"",fax:"",fearful:"",feet:"",female_detective:"&zwj;",ferris_wheel:"",ferry:"",field_hockey:"",file_cabinet:"",file_folder:"",film_projector:"",film_strip:"",fire:"",fire_engine:"",fireworks:"",first_quarter_moon:"",first_quarter_moon_with_face:"",fish:"",fish_cake:"",fishing_pole_and_fish:"",fist_raised:"",fist_left:"",fist_right:"",flags:"",flashlight:"",fleur_de_lis:"",flight_arrival:"",flight_departure:"",floppy_disk:"",flower_playing_cards:"",flushed:"",fog:"",foggy:"",football:"",footprints:"",fork_and_knife:"",fountain:"",fountain_pen:"",four_leaf_clover:"",fox_face:"",framed_picture:"",free:"",fried_egg:"",fried_shrimp:"",fries:"",frog:"",frowning:"",frowning_face:"",frowning_man:"&zwj;",frowning_woman:"",middle_finger:"",fuelpump:"",full_moon:"",full_moon_with_face:"",funeral_urn:"",game_die:"",gear:"",gem:"",gemini:"",ghost:"",gift:"",gift_heart:"",girl:"",globe_with_meridians:"",goal_net:"",goat:"",golf:"",golfing_man:"",golfing_woman:"&zwj;",gorilla:"",grapes:"",green_apple:"",green_book:"",green_heart:"",green_salad:"",grey_exclamation:"",grey_question:"",grimacing:"",grin:"",grinning:"",guardsman:"",guardswoman:"&zwj;",guitar:"",gun:"",haircut_woman:"",haircut_man:"&zwj;",hamburger:"",hammer:"",hammer_and_pick:"",hammer_and_wrench:"",hamster:"",hand:"",handbag:"",handshake:"",hankey:"",hatched_chick:"",hatching_chick:"",headphones:"",hear_no_evil:"",heart:"",heart_decoration:"",heart_eyes:"",heart_eyes_cat:"",heartbeat:"",heartpulse:"",hearts:"",heavy_check_mark:"",heavy_division_sign:"",heavy_dollar_sign:"",heavy_heart_exclamation:"",heavy_minus_sign:"",heavy_multiplication_x:"",heavy_plus_sign:"",helicopter:"",herb:"",hibiscus:"",high_brightness:"",high_heel:"",hocho:"",hole:"",honey_pot:"",horse:"",horse_racing:"",hospital:"",hot_pepper:"",hotdog:"",hotel:"",hotsprings:"",hourglass:"",hourglass_flowing_sand:"",house:"",house_with_garden:"",houses:"",hugs:"",hushed:"",ice_cream:"",ice_hockey:"",ice_skate:"",icecream:"",id:"",ideograph_advantage:"",imp:"",inbox_tray:"",incoming_envelope:"",tipping_hand_woman:"",information_source:"",innocent:"",interrobang:"",iphone:"",izakaya_lantern:"",jack_o_lantern:"",japan:"",japanese_castle:"",japanese_goblin:"",japanese_ogre:"",jeans:"",joy:"",joy_cat:"",joystick:"",kaaba:"",key:"",keyboard:"",keycap_ten:"",kick_scooter:"",kimono:"",kiss:"",kissing:"",kissing_cat:"",kissing_closed_eyes:"",kissing_heart:"",kissing_smiling_eyes:"",kiwi_fruit:"",koala:"",koko:"",label:"",large_blue_circle:"",large_blue_diamond:"",large_orange_diamond:"",last_quarter_moon:"",last_quarter_moon_with_face:"",latin_cross:"",laughing:"",leaves:"",ledger:"",left_luggage:"",left_right_arrow:"",leftwards_arrow_with_hook:"",lemon:"",leo:"",leopard:"",level_slider:"",libra:"",light_rail:"",link:"",lion:"",lips:"",lipstick:"",lizard:"",lock:"",lock_with_ink_pen:"",lollipop:"",loop:"",loud_sound:"",loudspeaker:"",love_hotel:"",love_letter:"",low_brightness:"",lying_face:"",m:"",mag:"",mag_right:"",mahjong:"",mailbox:"",mailbox_closed:"",mailbox_with_mail:"",mailbox_with_no_mail:"",man:"",man_artist:"&zwj;",man_astronaut:"&zwj;",man_cartwheeling:"&zwj;",man_cook:"&zwj;",man_dancing:"",man_facepalming:"&zwj;",man_factory_worker:"&zwj;",man_farmer:"&zwj;",man_firefighter:"&zwj;",man_health_worker:"&zwj;",man_in_tuxedo:"",man_judge:"&zwj;",man_juggling:"&zwj;",man_mechanic:"&zwj;",man_office_worker:"&zwj;",man_pilot:"&zwj;",man_playing_handball:"&zwj;",man_playing_water_polo:"&zwj;",man_scientist:"&zwj;",man_shrugging:"&zwj;",man_singer:"&zwj;",man_student:"&zwj;",man_teacher:"&zwj;",man_technologist:"&zwj;",man_with_gua_pi_mao:"",man_with_turban:"",tangerine:"",mans_shoe:"",mantelpiece_clock:"",maple_leaf:"",martial_arts_uniform:"",mask:"",massage_woman:"",massage_man:"&zwj;",meat_on_bone:"",medal_military:"",medal_sports:"",mega:"",melon:"",memo:"",men_wrestling:"&zwj;",menorah:"",mens:"",metal:"",metro:"",microphone:"",microscope:"",milk_glass:"",milky_way:"",minibus:"",minidisc:"",mobile_phone_off:"",money_mouth_face:"",money_with_wings:"",moneybag:"",monkey:"",monkey_face:"",monorail:"",moon:"",mortar_board:"",mosque:"",motor_boat:"",motor_scooter:"",motorcycle:"",motorway:"",mount_fuji:"",mountain:"",mountain_biking_man:"",mountain_biking_woman:"&zwj;",mountain_cableway:"",mountain_railway:"",mountain_snow:"",mouse:"",mouse2:"",movie_camera:"",moyai:"",mrs_claus:"",muscle:"",mushroom:"",musical_keyboard:"",musical_note:"",musical_score:"",mute:"",nail_care:"",name_badge:"",national_park:"",nauseated_face:"",necktie:"",negative_squared_cross_mark:"",nerd_face:"",neutral_face:"",new:"",new_moon:"",new_moon_with_face:"",newspaper:"",newspaper_roll:"",next_track_button:"",ng:"",no_good_man:"&zwj;",no_good_woman:"",night_with_stars:"",no_bell:"",no_bicycles:"",no_entry:"",no_entry_sign:"",no_mobile_phones:"",no_mouth:"",no_pedestrians:"",no_smoking:"","non-potable_water":"",nose:"",notebook:"",notebook_with_decorative_cover:"",notes:"",nut_and_bolt:"",o:"",o2:"",ocean:"",octopus:"",oden:"",office:"",oil_drum:"",ok:"",ok_hand:"",ok_man:"&zwj;",ok_woman:"",old_key:"",older_man:"",older_woman:"",om:"",on:"",oncoming_automobile:"",oncoming_bus:"",oncoming_police_car:"",oncoming_taxi:"",open_file_folder:"",open_hands:"",open_mouth:"",open_umbrella:"",ophiuchus:"",orange_book:"",orthodox_cross:"",outbox_tray:"",owl:"",ox:"",package:"",page_facing_up:"",page_with_curl:"",pager:"",paintbrush:"",palm_tree:"",pancakes:"",panda_face:"",paperclip:"",paperclips:"",parasol_on_ground:"",parking:"",part_alternation_mark:"",partly_sunny:"",passenger_ship:"",passport_control:"",pause_button:"",peace_symbol:"",peach:"",peanuts:"",pear:"",pen:"",pencil2:"",penguin:"",pensive:"",performing_arts:"",persevere:"",person_fencing:"",pouting_woman:"",phone:"",pick:"",pig:"",pig2:"",pig_nose:"",pill:"",pineapple:"",ping_pong:"",pisces:"",pizza:"",place_of_worship:"",plate_with_cutlery:"",play_or_pause_button:"",point_down:"",point_left:"",point_right:"",point_up:"",point_up_2:"",police_car:"",policewoman:"&zwj;",poodle:"",popcorn:"",post_office:"",postal_horn:"",postbox:"",potable_water:"",potato:"",pouch:"",poultry_leg:"",pound:"",rage:"",pouting_cat:"",pouting_man:"&zwj;",pray:"",prayer_beads:"",pregnant_woman:"",previous_track_button:"",prince:"",princess:"",printer:"",purple_heart:"",purse:"",pushpin:"",put_litter_in_its_place:"",question:"",rabbit:"",rabbit2:"",racehorse:"",racing_car:"",radio:"",radio_button:"",radioactive:"",railway_car:"",railway_track:"",rainbow:"",rainbow_flag:"&zwj;",raised_back_of_hand:"",raised_hand_with_fingers_splayed:"",raised_hands:"",raising_hand_woman:"",raising_hand_man:"&zwj;",ram:"",ramen:"",rat:"",record_button:"",recycle:"",red_circle:"",registered:"",relaxed:"",relieved:"",reminder_ribbon:"",repeat:"",repeat_one:"",rescue_worker_helmet:"",restroom:"",revolving_hearts:"",rewind:"",rhinoceros:"",ribbon:"",rice:"",rice_ball:"",rice_cracker:"",rice_scene:"",right_anger_bubble:"",ring:"",robot:"",rocket:"",rofl:"",roll_eyes:"",roller_coaster:"",rooster:"",rose:"",rosette:"",rotating_light:"",round_pushpin:"",rowing_man:"",rowing_woman:"&zwj;",rugby_football:"",running_man:"",running_shirt_with_sash:"",running_woman:"&zwj;",sa:"",sagittarius:"",sake:"",sandal:"",santa:"",satellite:"",saxophone:"",school:"",school_satchel:"",scissors:"",scorpion:"",scorpius:"",scream:"",scream_cat:"",scroll:"",seat:"",secret:"",see_no_evil:"",seedling:"",selfie:"",shallow_pan_of_food:"",shamrock:"",shark:"",shaved_ice:"",sheep:"",shell:"",shield:"",shinto_shrine:"",ship:"",shirt:"",shopping:"",shopping_cart:"",shower:"",shrimp:"",signal_strength:"",six_pointed_star:"",ski:"",skier:"",skull:"",skull_and_crossbones:"",sleeping:"",sleeping_bed:"",sleepy:"",slightly_frowning_face:"",slightly_smiling_face:"",slot_machine:"",small_airplane:"",small_blue_diamond:"",small_orange_diamond:"",small_red_triangle:"",small_red_triangle_down:"",smile:"",smile_cat:"",smiley:"",smiley_cat:"",smiling_imp:"",smirk:"",smirk_cat:"",smoking:"",snail:"",snake:"",sneezing_face:"",snowboarder:"",snowflake:"",snowman:"",snowman_with_snow:"",sob:"",soccer:"",soon:"",sos:"",sound:"",space_invader:"",spades:"",spaghetti:"",sparkle:"",sparkler:"",sparkles:"",sparkling_heart:"",speak_no_evil:"",speaker:"",speaking_head:"",speech_balloon:"",speedboat:"",spider:"",spider_web:"",spiral_calendar:"",spiral_notepad:"",spoon:"",squid:"",stadium:"",star:"",star2:"",star_and_crescent:"",star_of_david:"",stars:"",station:"",statue_of_liberty:"",steam_locomotive:"",stew:"",stop_button:"",stop_sign:"",stopwatch:"",straight_ruler:"",strawberry:"",stuck_out_tongue:"",stuck_out_tongue_closed_eyes:"",stuck_out_tongue_winking_eye:"",studio_microphone:"",stuffed_flatbread:"",sun_behind_large_cloud:"",sun_behind_rain_cloud:"",sun_behind_small_cloud:"",sun_with_face:"",sunflower:"",sunglasses:"",sunny:"",sunrise:"",sunrise_over_mountains:"",surfing_man:"",surfing_woman:"&zwj;",sushi:"",suspension_railway:"",sweat:"",sweat_drops:"",sweat_smile:"",sweet_potato:"",swimming_man:"",swimming_woman:"&zwj;",symbols:"",synagogue:"",syringe:"",taco:"",tada:"",tanabata_tree:"",taurus:"",taxi:"",tea:"",telephone_receiver:"",telescope:"",tennis:"",tent:"",thermometer:"",thinking:"",thought_balloon:"",ticket:"",tickets:"",tiger:"",tiger2:"",timer_clock:"",tipping_hand_man:"&zwj;",tired_face:"",tm:"",toilet:"",tokyo_tower:"",tomato:"",tongue:"",top:"",tophat:"",tornado:"",trackball:"",tractor:"",traffic_light:"",train:"",train2:"",tram:"",triangular_flag_on_post:"",triangular_ruler:"",trident:"",triumph:"",trolleybus:"",trophy:"",tropical_drink:"",tropical_fish:"",truck:"",trumpet:"",tulip:"",tumbler_glass:"",turkey:"",turtle:"",tv:"",twisted_rightwards_arrows:"",two_hearts:"",two_men_holding_hands:"",two_women_holding_hands:"",u5272:"",u5408:"",u55b6:"",u6307:"",u6708:"",u6709:"",u6e80:"",u7121:"",u7533:"",u7981:"",u7a7a:"",umbrella:"",unamused:"",underage:"",unicorn:"",unlock:"",up:"",upside_down_face:"",v:"",vertical_traffic_light:"",vhs:"",vibration_mode:"",video_camera:"",video_game:"",violin:"",virgo:"",volcano:"",volleyball:"",vs:"",vulcan_salute:"",walking_man:"",walking_woman:"&zwj;",waning_crescent_moon:"",waning_gibbous_moon:"",warning:"",wastebasket:"",watch:"",water_buffalo:"",watermelon:"",wave:"",wavy_dash:"",waxing_crescent_moon:"",wc:"",weary:"",wedding:"",weight_lifting_man:"",weight_lifting_woman:"&zwj;",whale:"",whale2:"",wheel_of_dharma:"",wheelchair:"",white_check_mark:"",white_circle:"",white_flag:"",white_flower:"",white_large_square:"",white_medium_small_square:"",white_medium_square:"",white_small_square:"",white_square_button:"",wilted_flower:"",wind_chime:"",wind_face:"",wine_glass:"",wink:"",wolf:"",woman:"",woman_artist:"&zwj;",woman_astronaut:"&zwj;",woman_cartwheeling:"&zwj;",woman_cook:"&zwj;",woman_facepalming:"&zwj;",woman_factory_worker:"&zwj;",woman_farmer:"&zwj;",woman_firefighter:"&zwj;",woman_health_worker:"&zwj;",woman_judge:"&zwj;",woman_juggling:"&zwj;",woman_mechanic:"&zwj;",woman_office_worker:"&zwj;",woman_pilot:"&zwj;",woman_playing_handball:"&zwj;",woman_playing_water_polo:"&zwj;",woman_scientist:"&zwj;",woman_shrugging:"&zwj;",woman_singer:"&zwj;",woman_student:"&zwj;",woman_teacher:"&zwj;",woman_technologist:"&zwj;",woman_with_turban:"&zwj;",womans_clothes:"",womans_hat:"",women_wrestling:"&zwj;",womens:"",world_map:"",worried:"",wrench:"",writing_hand:"",x:"",yellow_heart:"",yen:"",yin_yang:"",yum:"",zap:"",zipper_mouth_face:"",zzz:"",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},r.Converter=function(y){var E={},b=[],T=[],A={},R=c,k={parsed:{},raw:"",format:""};D();function D(){y=y||{};for(var x in l)l.hasOwnProperty(x)&&(E[x]=l[x]);if(typeof y=="object")for(var B in y)y.hasOwnProperty(B)&&(E[B]=y[B]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof y+" was passed instead.");E.extensions&&r.helper.forEach(E.extensions,$)}function $(x,B){if(B=B||null,r.helper.isString(x))if(x=r.helper.stdExtName(x),B=x,r.extensions[x]){console.warn("DEPRECATION WARNING: "+x+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),V(r.extensions[x],x);return}else if(!r.helper.isUndefined(o[x]))x=o[x];else throw Error('Extension "'+x+'" could not be loaded. It was either not found or is not a valid extension.');typeof x=="function"&&(x=x()),r.helper.isArray(x)||(x=[x]);var G=h(x,B);if(!G.valid)throw Error(G.error);for(var X=0;X<x.length;++X){switch(x[X].type){case"lang":b.push(x[X]);break;case"output":T.push(x[X]);break}if(x[X].hasOwnProperty("listeners"))for(var z in x[X].listeners)x[X].listeners.hasOwnProperty(z)&&U(z,x[X].listeners[z])}}function V(x,B){typeof x=="function"&&(x=x(new r.Converter)),r.helper.isArray(x)||(x=[x]);var G=h(x,B);if(!G.valid)throw Error(G.error);for(var X=0;X<x.length;++X)switch(x[X].type){case"lang":b.push(x[X]);break;case"output":T.push(x[X]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function U(x,B){if(!r.helper.isString(x))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof x+" given");if(typeof B!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof B+" given");A.hasOwnProperty(x)||(A[x]=[]),A[x].push(B)}function Q(x){var B=x.match(/^\s*/)[0].length,G=new RegExp("^\\s{0,"+B+"}","gm");return x.replace(G,"")}this._dispatch=function(B,G,X,z){if(A.hasOwnProperty(B))for(var W=0;W<A[B].length;++W){var ee=A[B][W](B,G,this,X,z);ee&&typeof ee<"u"&&(G=ee)}return G},this.listen=function(x,B){return U(x,B),this},this.makeHtml=function(x){if(!x)return x;var B={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:b,outputModifiers:T,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return x=x.replace(//g,"T"),x=x.replace(/\$/g,"D"),x=x.replace(/\r\n/g,`
`),x=x.replace(/\r/g,`
`),x=x.replace(/\u00A0/g,"&nbsp;"),E.smartIndentationFix&&(x=Q(x)),x=`

`+x+`

`,x=r.subParser("detab")(x,E,B),x=x.replace(/^[ \t]+$/mg,""),r.helper.forEach(b,function(G){x=r.subParser("runExtension")(G,x,E,B)}),x=r.subParser("metadata")(x,E,B),x=r.subParser("hashPreCodeTags")(x,E,B),x=r.subParser("githubCodeBlocks")(x,E,B),x=r.subParser("hashHTMLBlocks")(x,E,B),x=r.subParser("hashCodeTags")(x,E,B),x=r.subParser("stripLinkDefinitions")(x,E,B),x=r.subParser("blockGamut")(x,E,B),x=r.subParser("unhashHTMLSpans")(x,E,B),x=r.subParser("unescapeSpecialChars")(x,E,B),x=x.replace(/D/g,"$$"),x=x.replace(/T/g,""),x=r.subParser("completeHTMLDocument")(x,E,B),r.helper.forEach(T,function(G){x=r.subParser("runExtension")(G,x,E,B)}),k=B.metadata,x},this.makeMarkdown=this.makeMd=function(x,B){if(x=x.replace(/\r\n/g,`
`),x=x.replace(/\r/g,`
`),x=x.replace(/>[ \t]+</,">NBSP;<"),!B)if(window&&window.document)B=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var G=B.createElement("div");G.innerHTML=x;var X={preList:ne(G)};Z(G);for(var z=G.childNodes,W="",ee=0;ee<z.length;ee++)W+=r.subParser("makeMarkdown.node")(z[ee],X);function Z(oe){for(var ce=0;ce<oe.childNodes.length;++ce){var fe=oe.childNodes[ce];fe.nodeType===3?!/\S/.test(fe.nodeValue)&&!/^[ ]+$/.test(fe.nodeValue)?(oe.removeChild(fe),--ce):(fe.nodeValue=fe.nodeValue.split(`
`).join(" "),fe.nodeValue=fe.nodeValue.replace(/(\s)+/g,"$1")):fe.nodeType===1&&Z(fe)}}function ne(oe){for(var ce=oe.querySelectorAll("pre"),fe=[],ge=0;ge<ce.length;++ge)if(ce[ge].childElementCount===1&&ce[ge].firstChild.tagName.toLowerCase()==="code"){var Ae=ce[ge].firstChild.innerHTML.trim(),xe=ce[ge].firstChild.getAttribute("data-language")||"";if(xe==="")for(var Ue=ce[ge].firstChild.className.split(" "),Ne=0;Ne<Ue.length;++Ne){var Le=Ue[Ne].match(/^language-(.+)$/);if(Le!==null){xe=Le[1];break}}Ae=r.helper.unescapeHTMLEntities(Ae),fe.push(Ae),ce[ge].outerHTML='<precode language="'+xe+'" precodenum="'+ge.toString()+'"></precode>'}else fe.push(ce[ge].innerHTML),ce[ge].innerHTML="",ce[ge].setAttribute("prenum",ge.toString());return fe}return W},this.setOption=function(x,B){E[x]=B},this.getOption=function(x){return E[x]},this.getOptions=function(){return E},this.addExtension=function(x,B){B=B||null,$(x,B)},this.useExtension=function(x){$(x)},this.setFlavor=function(x){if(!f.hasOwnProperty(x))throw Error(x+" flavor was not found");var B=f[x];R=x;for(var G in B)B.hasOwnProperty(G)&&(E[G]=B[G])},this.getFlavor=function(){return R},this.removeExtension=function(x){r.helper.isArray(x)||(x=[x]);for(var B=0;B<x.length;++B){for(var G=x[B],X=0;X<b.length;++X)b[X]===G&&b.splice(X,1);for(var z=0;z<T.length;++z)T[z]===G&&T.splice(z,1)}},this.getAllExtensions=function(){return{language:b,output:T}},this.getMetadata=function(x){return x?k.raw:k.parsed},this.getMetadataFormat=function(){return k.format},this._setMetadataPair=function(x,B){k.parsed[x]=B},this._setMetadataFormat=function(x){k.format=x},this._setMetadataRaw=function(x){k.raw=x}},r.subParser("anchors",function(y,E,b){y=b.converter._dispatch("anchors.before",y,E,b);var T=function(A,R,k,D,$,V,U){if(r.helper.isUndefined(U)&&(U=""),k=k.toLowerCase(),A.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)D="";else if(!D)if(k||(k=R.toLowerCase().replace(/ ?\n/g," ")),D="#"+k,!r.helper.isUndefined(b.gUrls[k]))D=b.gUrls[k],r.helper.isUndefined(b.gTitles[k])||(U=b.gTitles[k]);else return A;D=D.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var Q='<a href="'+D+'"';return U!==""&&U!==null&&(U=U.replace(/"/g,"&quot;"),U=U.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),Q+=' title="'+U+'"'),E.openLinksInNewWindow&&!/^#/.test(D)&&(Q+=' rel="noopener noreferrer" target="E95Eblank"'),Q+=">"+R+"</a>",Q};return y=y.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,T),y=y.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,T),y=y.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,T),y=y.replace(/\[([^\[\]]+)]()()()()()/g,T),E.ghMentions&&(y=y.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(A,R,k,D,$){if(k==="\\")return R+D;if(!r.helper.isString(E.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var V=E.ghMentionsLink.replace(/\{u}/g,$),U="";return E.openLinksInNewWindow&&(U=' rel="noopener noreferrer" target="E95Eblank"'),R+'<a href="'+V+'"'+U+">"+D+"</a>"})),y=b.converter._dispatch("anchors.after",y,E,b),y});var w=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,C=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,M=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,P=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,L=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,j=function(y){return function(E,b,T,A,R,k,D){T=T.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var $=T,V="",U="",Q=b||"",x=D||"";return/^www\./i.test(T)&&(T=T.replace(/^www\./i,"http://www.")),y.excludeTrailingPunctuationFromURLs&&k&&(V=k),y.openLinksInNewWindow&&(U=' rel="noopener noreferrer" target="E95Eblank"'),Q+'<a href="'+T+'"'+U+">"+$+"</a>"+V+x}},H=function(y,E){return function(b,T,A){var R="mailto:";return T=T||"",A=r.subParser("unescapeSpecialChars")(A,y,E),y.encodeEmails?(R=r.helper.encodeEmailAddress(R+A),A=r.helper.encodeEmailAddress(A)):R=R+A,T+'<a href="'+R+'">'+A+"</a>"}};r.subParser("autoLinks",function(y,E,b){return y=b.converter._dispatch("autoLinks.before",y,E,b),y=y.replace(M,j(E)),y=y.replace(L,H(E,b)),y=b.converter._dispatch("autoLinks.after",y,E,b),y}),r.subParser("simplifiedAutoLinks",function(y,E,b){return E.simplifiedAutoLink&&(y=b.converter._dispatch("simplifiedAutoLinks.before",y,E,b),E.excludeTrailingPunctuationFromURLs?y=y.replace(C,j(E)):y=y.replace(w,j(E)),y=y.replace(P,H(E,b)),y=b.converter._dispatch("simplifiedAutoLinks.after",y,E,b)),y}),r.subParser("blockGamut",function(y,E,b){return y=b.converter._dispatch("blockGamut.before",y,E,b),y=r.subParser("blockQuotes")(y,E,b),y=r.subParser("headers")(y,E,b),y=r.subParser("horizontalRule")(y,E,b),y=r.subParser("lists")(y,E,b),y=r.subParser("codeBlocks")(y,E,b),y=r.subParser("tables")(y,E,b),y=r.subParser("hashHTMLBlocks")(y,E,b),y=r.subParser("paragraphs")(y,E,b),y=b.converter._dispatch("blockGamut.after",y,E,b),y}),r.subParser("blockQuotes",function(y,E,b){y=b.converter._dispatch("blockQuotes.before",y,E,b),y=y+`

`;var T=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return E.splitAdjacentBlockquotes&&(T=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),y=y.replace(T,function(A){return A=A.replace(/^[ \t]*>[ \t]?/gm,""),A=A.replace(/0/g,""),A=A.replace(/^[ \t]+$/gm,""),A=r.subParser("githubCodeBlocks")(A,E,b),A=r.subParser("blockGamut")(A,E,b),A=A.replace(/(^|\n)/g,"$1  "),A=A.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(R,k){var D=k;return D=D.replace(/^  /mg,"0"),D=D.replace(/0/g,""),D}),r.subParser("hashBlock")(`<blockquote>
`+A+`
</blockquote>`,E,b)}),y=b.converter._dispatch("blockQuotes.after",y,E,b),y}),r.subParser("codeBlocks",function(y,E,b){y=b.converter._dispatch("codeBlocks.before",y,E,b),y+="0";var T=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;return y=y.replace(T,function(A,R,k){var D=R,$=k,V=`
`;return D=r.subParser("outdent")(D,E,b),D=r.subParser("encodeCode")(D,E,b),D=r.subParser("detab")(D,E,b),D=D.replace(/^\n+/g,""),D=D.replace(/\n+$/g,""),E.omitExtraWLInCodeBlocks&&(V=""),D="<pre><code>"+D+V+"</code></pre>",r.subParser("hashBlock")(D,E,b)+$}),y=y.replace(/0/,""),y=b.converter._dispatch("codeBlocks.after",y,E,b),y}),r.subParser("codeSpans",function(y,E,b){return y=b.converter._dispatch("codeSpans.before",y,E,b),typeof y>"u"&&(y=""),y=y.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(T,A,R,k){var D=k;return D=D.replace(/^([ \t]*)/g,""),D=D.replace(/[ \t]*$/g,""),D=r.subParser("encodeCode")(D,E,b),D=A+"<code>"+D+"</code>",D=r.subParser("hashHTMLSpans")(D,E,b),D}),y=b.converter._dispatch("codeSpans.after",y,E,b),y}),r.subParser("completeHTMLDocument",function(y,E,b){if(!E.completeHTMLDocument)return y;y=b.converter._dispatch("completeHTMLDocument.before",y,E,b);var T="html",A=`<!DOCTYPE HTML>
`,R="",k=`<meta charset="utf-8">
`,D="",$="";typeof b.metadata.parsed.doctype<"u"&&(A="<!DOCTYPE "+b.metadata.parsed.doctype+`>
`,T=b.metadata.parsed.doctype.toString().toLowerCase(),(T==="html"||T==="html5")&&(k='<meta charset="utf-8">'));for(var V in b.metadata.parsed)if(b.metadata.parsed.hasOwnProperty(V))switch(V.toLowerCase()){case"doctype":break;case"title":R="<title>"+b.metadata.parsed.title+`</title>
`;break;case"charset":T==="html"||T==="html5"?k='<meta charset="'+b.metadata.parsed.charset+`">
`:k='<meta name="charset" content="'+b.metadata.parsed.charset+`">
`;break;case"language":case"lang":D=' lang="'+b.metadata.parsed[V]+'"',$+='<meta name="'+V+'" content="'+b.metadata.parsed[V]+`">
`;break;default:$+='<meta name="'+V+'" content="'+b.metadata.parsed[V]+`">
`}return y=A+"<html"+D+`>
<head>
`+R+k+$+`</head>
<body>
`+y.trim()+`
</body>
</html>`,y=b.converter._dispatch("completeHTMLDocument.after",y,E,b),y}),r.subParser("detab",function(y,E,b){return y=b.converter._dispatch("detab.before",y,E,b),y=y.replace(/\t(?=\t)/g,"    "),y=y.replace(/\t/g,"AB"),y=y.replace(/B(.+?)A/g,function(T,A){for(var R=A,k=4-R.length%4,D=0;D<k;D++)R+=" ";return R}),y=y.replace(/A/g,"    "),y=y.replace(/B/g,""),y=b.converter._dispatch("detab.after",y,E,b),y}),r.subParser("ellipsis",function(y,E,b){return E.ellipsis&&(y=b.converter._dispatch("ellipsis.before",y,E,b),y=y.replace(/\.\.\./g,""),y=b.converter._dispatch("ellipsis.after",y,E,b)),y}),r.subParser("emoji",function(y,E,b){if(!E.emoji)return y;y=b.converter._dispatch("emoji.before",y,E,b);var T=/:([\S]+?):/g;return y=y.replace(T,function(A,R){return r.helper.emojis.hasOwnProperty(R)?r.helper.emojis[R]:A}),y=b.converter._dispatch("emoji.after",y,E,b),y}),r.subParser("encodeAmpsAndAngles",function(y,E,b){return y=b.converter._dispatch("encodeAmpsAndAngles.before",y,E,b),y=y.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),y=y.replace(/<(?![a-z\/?$!])/gi,"&lt;"),y=y.replace(/</g,"&lt;"),y=y.replace(/>/g,"&gt;"),y=b.converter._dispatch("encodeAmpsAndAngles.after",y,E,b),y}),r.subParser("encodeBackslashEscapes",function(y,E,b){return y=b.converter._dispatch("encodeBackslashEscapes.before",y,E,b),y=y.replace(/\\(\\)/g,r.helper.escapeCharactersCallback),y=y.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),y=b.converter._dispatch("encodeBackslashEscapes.after",y,E,b),y}),r.subParser("encodeCode",function(y,E,b){return y=b.converter._dispatch("encodeCode.before",y,E,b),y=y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),y=b.converter._dispatch("encodeCode.after",y,E,b),y}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(y,E,b){y=b.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",y,E,b);var T=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,A=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return y=y.replace(T,function(R){return R.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),y=y.replace(A,function(R){return R.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),y=b.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",y,E,b),y}),r.subParser("githubCodeBlocks",function(y,E,b){return E.ghCodeBlocks?(y=b.converter._dispatch("githubCodeBlocks.before",y,E,b),y+="0",y=y.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(T,A,R,k){var D=E.omitExtraWLInCodeBlocks?"":`
`;return k=r.subParser("encodeCode")(k,E,b),k=r.subParser("detab")(k,E,b),k=k.replace(/^\n+/g,""),k=k.replace(/\n+$/g,""),k="<pre><code"+(R?' class="'+R+" language-"+R+'"':"")+">"+k+D+"</code></pre>",k=r.subParser("hashBlock")(k,E,b),`

G`+(b.ghCodeBlocks.push({text:T,codeblock:k})-1)+`G

`}),y=y.replace(/0/,""),b.converter._dispatch("githubCodeBlocks.after",y,E,b)):y}),r.subParser("hashBlock",function(y,E,b){return y=b.converter._dispatch("hashBlock.before",y,E,b),y=y.replace(/(^\n+|\n+$)/g,""),y=`

K`+(b.gHtmlBlocks.push(y)-1)+`K

`,y=b.converter._dispatch("hashBlock.after",y,E,b),y}),r.subParser("hashCodeTags",function(y,E,b){y=b.converter._dispatch("hashCodeTags.before",y,E,b);var T=function(A,R,k,D){var $=k+r.subParser("encodeCode")(R,E,b)+D;return"C"+(b.gHtmlSpans.push($)-1)+"C"};return y=r.helper.replaceRecursiveRegExp(y,T,"<code\\b[^>]*>","</code>","gim"),y=b.converter._dispatch("hashCodeTags.after",y,E,b),y}),r.subParser("hashElement",function(y,E,b){return function(T,A){var R=A;return R=R.replace(/\n\n/g,`
`),R=R.replace(/^\n/,""),R=R.replace(/\n+$/g,""),R=`

K`+(b.gHtmlBlocks.push(R)-1)+`K

`,R}}),r.subParser("hashHTMLBlocks",function(y,E,b){y=b.converter._dispatch("hashHTMLBlocks.before",y,E,b);var T=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],A=function(x,B,G,X){var z=x;return G.search(/\bmarkdown\b/)!==-1&&(z=G+b.converter.makeHtml(B)+X),`

K`+(b.gHtmlBlocks.push(z)-1)+`K

`};E.backslashEscapesHTMLTags&&(y=y.replace(/\\<(\/?[^>]+?)>/g,function(x,B){return"&lt;"+B+"&gt;"}));for(var R=0;R<T.length;++R)for(var k,D=new RegExp("^ {0,3}(<"+T[R]+"\\b[^>]*>)","im"),$="<"+T[R]+"\\b[^>]*>",V="</"+T[R]+">";(k=r.helper.regexIndexOf(y,D))!==-1;){var U=r.helper.splitAtIndex(y,k),Q=r.helper.replaceRecursiveRegExp(U[1],A,$,V,"im");if(Q===U[1])break;y=U[0].concat(Q)}return y=y.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(y,E,b)),y=r.helper.replaceRecursiveRegExp(y,function(x){return`

K`+(b.gHtmlBlocks.push(x)-1)+`K

`},"^ {0,3}<!--","-->","gm"),y=y.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(y,E,b)),y=b.converter._dispatch("hashHTMLBlocks.after",y,E,b),y}),r.subParser("hashHTMLSpans",function(y,E,b){y=b.converter._dispatch("hashHTMLSpans.before",y,E,b);function T(A){return"C"+(b.gHtmlSpans.push(A)-1)+"C"}return y=y.replace(/<[^>]+?\/>/gi,function(A){return T(A)}),y=y.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(A){return T(A)}),y=y.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(A){return T(A)}),y=y.replace(/<[^>]+?>/gi,function(A){return T(A)}),y=b.converter._dispatch("hashHTMLSpans.after",y,E,b),y}),r.subParser("unhashHTMLSpans",function(y,E,b){y=b.converter._dispatch("unhashHTMLSpans.before",y,E,b);for(var T=0;T<b.gHtmlSpans.length;++T){for(var A=b.gHtmlSpans[T],R=0;/C(\d+)C/.test(A);){var k=RegExp.$1;if(A=A.replace("C"+k+"C",b.gHtmlSpans[k]),R===10){console.error("maximum nesting of 10 spans reached!!!");break}++R}y=y.replace("C"+T+"C",A)}return y=b.converter._dispatch("unhashHTMLSpans.after",y,E,b),y}),r.subParser("hashPreCodeTags",function(y,E,b){y=b.converter._dispatch("hashPreCodeTags.before",y,E,b);var T=function(A,R,k,D){var $=k+r.subParser("encodeCode")(R,E,b)+D;return`

G`+(b.ghCodeBlocks.push({text:A,codeblock:$})-1)+`G

`};return y=r.helper.replaceRecursiveRegExp(y,T,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),y=b.converter._dispatch("hashPreCodeTags.after",y,E,b),y}),r.subParser("headers",function(y,E,b){y=b.converter._dispatch("headers.before",y,E,b);var T=isNaN(parseInt(E.headerLevelStart))?1:parseInt(E.headerLevelStart),A=E.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,R=E.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;y=y.replace(A,function($,V){var U=r.subParser("spanGamut")(V,E,b),Q=E.noHeaderId?"":' id="'+D(V)+'"',x=T,B="<h"+x+Q+">"+U+"</h"+x+">";return r.subParser("hashBlock")(B,E,b)}),y=y.replace(R,function($,V){var U=r.subParser("spanGamut")(V,E,b),Q=E.noHeaderId?"":' id="'+D(V)+'"',x=T+1,B="<h"+x+Q+">"+U+"</h"+x+">";return r.subParser("hashBlock")(B,E,b)});var k=E.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;y=y.replace(k,function($,V,U){var Q=U;E.customizedHeaderId&&(Q=U.replace(/\s?\{([^{]+?)}\s*$/,""));var x=r.subParser("spanGamut")(Q,E,b),B=E.noHeaderId?"":' id="'+D(U)+'"',G=T-1+V.length,X="<h"+G+B+">"+x+"</h"+G+">";return r.subParser("hashBlock")(X,E,b)});function D($){var V,U;if(E.customizedHeaderId){var Q=$.match(/\{([^{]+?)}\s*$/);Q&&Q[1]&&($=Q[1])}return V=$,r.helper.isString(E.prefixHeaderId)?U=E.prefixHeaderId:E.prefixHeaderId===!0?U="section-":U="",E.rawPrefixHeaderId||(V=U+V),E.ghCompatibleHeaderId?V=V.replace(/ /g,"-").replace(/&amp;/g,"").replace(/T/g,"").replace(/D/g,"").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():E.rawHeaderId?V=V.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/T/g,"").replace(/D/g,"$").replace(/["']/g,"-").toLowerCase():V=V.replace(/[^\w]/g,"").toLowerCase(),E.rawPrefixHeaderId&&(V=U+V),b.hashLinkCounts[V]?V=V+"-"+b.hashLinkCounts[V]++:b.hashLinkCounts[V]=1,V}return y=b.converter._dispatch("headers.after",y,E,b),y}),r.subParser("horizontalRule",function(y,E,b){y=b.converter._dispatch("horizontalRule.before",y,E,b);var T=r.subParser("hashBlock")("<hr />",E,b);return y=y.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,T),y=y.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,T),y=y.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,T),y=b.converter._dispatch("horizontalRule.after",y,E,b),y}),r.subParser("images",function(y,E,b){y=b.converter._dispatch("images.before",y,E,b);var T=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,A=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,R=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,k=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,D=/!\[([^\[\]]+)]()()()()()/g;function $(U,Q,x,B,G,X,z,W){return B=B.replace(/\s/g,""),V(U,Q,x,B,G,X,z,W)}function V(U,Q,x,B,G,X,z,W){var ee=b.gUrls,Z=b.gTitles,ne=b.gDimensions;if(x=x.toLowerCase(),W||(W=""),U.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)B="";else if(B===""||B===null)if((x===""||x===null)&&(x=Q.toLowerCase().replace(/ ?\n/g," ")),B="#"+x,!r.helper.isUndefined(ee[x]))B=ee[x],r.helper.isUndefined(Z[x])||(W=Z[x]),r.helper.isUndefined(ne[x])||(G=ne[x].width,X=ne[x].height);else return U;Q=Q.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),B=B.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var oe='<img src="'+B+'" alt="'+Q+'"';return W&&r.helper.isString(W)&&(W=W.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),oe+=' title="'+W+'"'),G&&X&&(G=G==="*"?"auto":G,X=X==="*"?"auto":X,oe+=' width="'+G+'"',oe+=' height="'+X+'"'),oe+=" />",oe}return y=y.replace(k,V),y=y.replace(R,$),y=y.replace(A,V),y=y.replace(T,V),y=y.replace(D,V),y=b.converter._dispatch("images.after",y,E,b),y}),r.subParser("italicsAndBold",function(y,E,b){y=b.converter._dispatch("italicsAndBold.before",y,E,b);function T(A,R,k){return R+A+k}return E.literalMidWordUnderscores?(y=y.replace(/\b___(\S[\s\S]*?)___\b/g,function(A,R){return T(R,"<strong><em>","</em></strong>")}),y=y.replace(/\b__(\S[\s\S]*?)__\b/g,function(A,R){return T(R,"<strong>","</strong>")}),y=y.replace(/\b_(\S[\s\S]*?)_\b/g,function(A,R){return T(R,"<em>","</em>")})):(y=y.replace(/___(\S[\s\S]*?)___/g,function(A,R){return/\S$/.test(R)?T(R,"<strong><em>","</em></strong>"):A}),y=y.replace(/__(\S[\s\S]*?)__/g,function(A,R){return/\S$/.test(R)?T(R,"<strong>","</strong>"):A}),y=y.replace(/_([^\s_][\s\S]*?)_/g,function(A,R){return/\S$/.test(R)?T(R,"<em>","</em>"):A})),E.literalMidWordAsterisks?(y=y.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(A,R,k){return T(k,R+"<strong><em>","</em></strong>")}),y=y.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(A,R,k){return T(k,R+"<strong>","</strong>")}),y=y.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(A,R,k){return T(k,R+"<em>","</em>")})):(y=y.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(A,R){return/\S$/.test(R)?T(R,"<strong><em>","</em></strong>"):A}),y=y.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(A,R){return/\S$/.test(R)?T(R,"<strong>","</strong>"):A}),y=y.replace(/\*([^\s*][\s\S]*?)\*/g,function(A,R){return/\S$/.test(R)?T(R,"<em>","</em>"):A})),y=b.converter._dispatch("italicsAndBold.after",y,E,b),y}),r.subParser("lists",function(y,E,b){function T(k,D){b.gListLevel++,k=k.replace(/\n{2,}$/,`
`),k+="0";var $=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,V=/\n[ \t]*\n(?!0)/.test(k);return E.disableForced4SpacesIndentedSublists&&($=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm),k=k.replace($,function(U,Q,x,B,G,X,z){z=z&&z.trim()!=="";var W=r.subParser("outdent")(G,E,b),ee="";return X&&E.tasklists&&(ee=' class="task-list-item" style="list-style-type: none;"',W=W.replace(/^[ \t]*\[(x|X| )?]/m,function(){var Z='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return z&&(Z+=" checked"),Z+=">",Z})),W=W.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(Z){return"A"+Z}),Q||W.search(/\n{2,}/)>-1?(W=r.subParser("githubCodeBlocks")(W,E,b),W=r.subParser("blockGamut")(W,E,b)):(W=r.subParser("lists")(W,E,b),W=W.replace(/\n$/,""),W=r.subParser("hashHTMLBlocks")(W,E,b),W=W.replace(/\n\n+/g,`

`),V?W=r.subParser("paragraphs")(W,E,b):W=r.subParser("spanGamut")(W,E,b)),W=W.replace("A",""),W="<li"+ee+">"+W+`</li>
`,W}),k=k.replace(/0/g,""),b.gListLevel--,D&&(k=k.replace(/\s+$/,"")),k}function A(k,D){if(D==="ol"){var $=k.match(/^ *(\d+)\./);if($&&$[1]!=="1")return' start="'+$[1]+'"'}return""}function R(k,D,$){var V=E.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,U=E.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,Q=D==="ul"?V:U,x="";if(k.search(Q)!==-1)(function G(X){var z=X.search(Q),W=A(k,D);z!==-1?(x+=`

<`+D+W+`>
`+T(X.slice(0,z),!!$)+"</"+D+`>
`,D=D==="ul"?"ol":"ul",Q=D==="ul"?V:U,G(X.slice(z))):x+=`

<`+D+W+`>
`+T(X,!!$)+"</"+D+`>
`})(k);else{var B=A(k,D);x=`

<`+D+B+`>
`+T(k,!!$)+"</"+D+`>
`}return x}return y=b.converter._dispatch("lists.before",y,E,b),y+="0",b.gListLevel?y=y.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(k,D,$){var V=$.search(/[*+-]/g)>-1?"ul":"ol";return R(D,V,!0)}):y=y.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(k,D,$,V){var U=V.search(/[*+-]/g)>-1?"ul":"ol";return R($,U,!1)}),y=y.replace(/0/,""),y=b.converter._dispatch("lists.after",y,E,b),y}),r.subParser("metadata",function(y,E,b){if(!E.metadata)return y;y=b.converter._dispatch("metadata.before",y,E,b);function T(A){b.metadata.raw=A,A=A.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),A=A.replace(/\n {4}/g," "),A.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(R,k,D){return b.metadata.parsed[k]=D,""})}return y=y.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/,function(A,R,k){return T(k),"M"}),y=y.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(A,R,k){return R&&(b.metadata.format=R),T(k),"M"}),y=y.replace(/M/g,""),y=b.converter._dispatch("metadata.after",y,E,b),y}),r.subParser("outdent",function(y,E,b){return y=b.converter._dispatch("outdent.before",y,E,b),y=y.replace(/^(\t|[ ]{1,4})/gm,"0"),y=y.replace(/0/g,""),y=b.converter._dispatch("outdent.after",y,E,b),y}),r.subParser("paragraphs",function(y,E,b){y=b.converter._dispatch("paragraphs.before",y,E,b),y=y.replace(/^\n+/g,""),y=y.replace(/\n+$/g,"");for(var T=y.split(/\n{2,}/g),A=[],R=T.length,k=0;k<R;k++){var D=T[k];D.search(/(K|G)(\d+)\1/g)>=0?A.push(D):D.search(/\S/)>=0&&(D=r.subParser("spanGamut")(D,E,b),D=D.replace(/^([ \t]*)/g,"<p>"),D+="</p>",A.push(D))}for(R=A.length,k=0;k<R;k++){for(var $="",V=A[k],U=!1;/(K|G)(\d+)\1/.test(V);){var Q=RegExp.$1,x=RegExp.$2;Q==="K"?$=b.gHtmlBlocks[x]:U?$=r.subParser("encodeCode")(b.ghCodeBlocks[x].text,E,b):$=b.ghCodeBlocks[x].codeblock,$=$.replace(/\$/g,"$$$$"),V=V.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/,$),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(V)&&(U=!0)}A[k]=V}return y=A.join(`
`),y=y.replace(/^\n+/g,""),y=y.replace(/\n+$/g,""),b.converter._dispatch("paragraphs.after",y,E,b)}),r.subParser("runExtension",function(y,E,b,T){if(y.filter)E=y.filter(E,T.converter,b);else if(y.regex){var A=y.regex;A instanceof RegExp||(A=new RegExp(A,"g")),E=E.replace(A,y.replace)}return E}),r.subParser("spanGamut",function(y,E,b){return y=b.converter._dispatch("spanGamut.before",y,E,b),y=r.subParser("codeSpans")(y,E,b),y=r.subParser("escapeSpecialCharsWithinTagAttributes")(y,E,b),y=r.subParser("encodeBackslashEscapes")(y,E,b),y=r.subParser("images")(y,E,b),y=r.subParser("anchors")(y,E,b),y=r.subParser("autoLinks")(y,E,b),y=r.subParser("simplifiedAutoLinks")(y,E,b),y=r.subParser("emoji")(y,E,b),y=r.subParser("underline")(y,E,b),y=r.subParser("italicsAndBold")(y,E,b),y=r.subParser("strikethrough")(y,E,b),y=r.subParser("ellipsis")(y,E,b),y=r.subParser("hashHTMLSpans")(y,E,b),y=r.subParser("encodeAmpsAndAngles")(y,E,b),E.simpleLineBreaks?/\n\nK/.test(y)||(y=y.replace(/\n+/g,`<br />
`)):y=y.replace(/  +\n/g,`<br />
`),y=b.converter._dispatch("spanGamut.after",y,E,b),y}),r.subParser("strikethrough",function(y,E,b){function T(A){return E.simplifiedAutoLink&&(A=r.subParser("simplifiedAutoLinks")(A,E,b)),"<del>"+A+"</del>"}return E.strikethrough&&(y=b.converter._dispatch("strikethrough.before",y,E,b),y=y.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(A,R){return T(R)}),y=b.converter._dispatch("strikethrough.after",y,E,b)),y}),r.subParser("stripLinkDefinitions",function(y,E,b){var T=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm,A=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;y+="0";var R=function(k,D,$,V,U,Q,x){return D=D.toLowerCase(),y.toLowerCase().split(D).length-1<2?k:($.match(/^data:.+?\/.+?;base64,/)?b.gUrls[D]=$.replace(/\s/g,""):b.gUrls[D]=r.subParser("encodeAmpsAndAngles")($,E,b),Q?Q+x:(x&&(b.gTitles[D]=x.replace(/"|'/g,"&quot;")),E.parseImgDimensions&&V&&U&&(b.gDimensions[D]={width:V,height:U}),""))};return y=y.replace(A,R),y=y.replace(T,R),y=y.replace(/0/,""),y}),r.subParser("tables",function(y,E,b){if(!E.tables)return y;var T=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm,A=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;function R(U){return/^:[ \t]*--*$/.test(U)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(U)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(U)?' style="text-align:center;"':""}function k(U,Q){var x="";return U=U.trim(),(E.tablesHeaderId||E.tableHeaderId)&&(x=' id="'+U.replace(/ /g,"_").toLowerCase()+'"'),U=r.subParser("spanGamut")(U,E,b),"<th"+x+Q+">"+U+`</th>
`}function D(U,Q){var x=r.subParser("spanGamut")(U,E,b);return"<td"+Q+">"+x+`</td>
`}function $(U,Q){for(var x=`<table>
<thead>
<tr>
`,B=U.length,G=0;G<B;++G)x+=U[G];for(x+=`</tr>
</thead>
<tbody>
`,G=0;G<Q.length;++G){x+=`<tr>
`;for(var X=0;X<B;++X)x+=Q[G][X];x+=`</tr>
`}return x+=`</tbody>
</table>
`,x}function V(U){var Q,x=U.split(`
`);for(Q=0;Q<x.length;++Q)/^ {0,3}\|/.test(x[Q])&&(x[Q]=x[Q].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(x[Q])&&(x[Q]=x[Q].replace(/\|[ \t]*$/,"")),x[Q]=r.subParser("codeSpans")(x[Q],E,b);var B=x[0].split("|").map(function(oe){return oe.trim()}),G=x[1].split("|").map(function(oe){return oe.trim()}),X=[],z=[],W=[],ee=[];for(x.shift(),x.shift(),Q=0;Q<x.length;++Q)x[Q].trim()!==""&&X.push(x[Q].split("|").map(function(oe){return oe.trim()}));if(B.length<G.length)return U;for(Q=0;Q<G.length;++Q)W.push(R(G[Q]));for(Q=0;Q<B.length;++Q)r.helper.isUndefined(W[Q])&&(W[Q]=""),z.push(k(B[Q],W[Q]));for(Q=0;Q<X.length;++Q){for(var Z=[],ne=0;ne<z.length;++ne)r.helper.isUndefined(X[Q][ne]),Z.push(D(X[Q][ne],W[ne]));ee.push(Z)}return $(z,ee)}return y=b.converter._dispatch("tables.before",y,E,b),y=y.replace(/\\(\|)/g,r.helper.escapeCharactersCallback),y=y.replace(T,V),y=y.replace(A,V),y=b.converter._dispatch("tables.after",y,E,b),y}),r.subParser("underline",function(y,E,b){return E.underline&&(y=b.converter._dispatch("underline.before",y,E,b),E.literalMidWordUnderscores?(y=y.replace(/\b___(\S[\s\S]*?)___\b/g,function(T,A){return"<u>"+A+"</u>"}),y=y.replace(/\b__(\S[\s\S]*?)__\b/g,function(T,A){return"<u>"+A+"</u>"})):(y=y.replace(/___(\S[\s\S]*?)___/g,function(T,A){return/\S$/.test(A)?"<u>"+A+"</u>":T}),y=y.replace(/__(\S[\s\S]*?)__/g,function(T,A){return/\S$/.test(A)?"<u>"+A+"</u>":T})),y=y.replace(/(_)/g,r.helper.escapeCharactersCallback),y=b.converter._dispatch("underline.after",y,E,b)),y}),r.subParser("unescapeSpecialChars",function(y,E,b){return y=b.converter._dispatch("unescapeSpecialChars.before",y,E,b),y=y.replace(/E(\d+)E/g,function(T,A){var R=parseInt(A);return String.fromCharCode(R)}),y=b.converter._dispatch("unescapeSpecialChars.after",y,E,b),y}),r.subParser("makeMarkdown.blockquote",function(y,E){var b="";if(y.hasChildNodes())for(var T=y.childNodes,A=T.length,R=0;R<A;++R){var k=r.subParser("makeMarkdown.node")(T[R],E);k!==""&&(b+=k)}return b=b.trim(),b="> "+b.split(`
`).join(`
> `),b}),r.subParser("makeMarkdown.codeBlock",function(y,E){var b=y.getAttribute("language"),T=y.getAttribute("precodenum");return"```"+b+`
`+E.preList[T]+"\n```"}),r.subParser("makeMarkdown.codeSpan",function(y){return"`"+y.innerHTML+"`"}),r.subParser("makeMarkdown.emphasis",function(y,E){var b="";if(y.hasChildNodes()){b+="*";for(var T=y.childNodes,A=T.length,R=0;R<A;++R)b+=r.subParser("makeMarkdown.node")(T[R],E);b+="*"}return b}),r.subParser("makeMarkdown.header",function(y,E,b){var T=new Array(b+1).join("#"),A="";if(y.hasChildNodes()){A=T+" ";for(var R=y.childNodes,k=R.length,D=0;D<k;++D)A+=r.subParser("makeMarkdown.node")(R[D],E)}return A}),r.subParser("makeMarkdown.hr",function(){return"---"}),r.subParser("makeMarkdown.image",function(y){var E="";return y.hasAttribute("src")&&(E+="!["+y.getAttribute("alt")+"](",E+="<"+y.getAttribute("src")+">",y.hasAttribute("width")&&y.hasAttribute("height")&&(E+=" ="+y.getAttribute("width")+"x"+y.getAttribute("height")),y.hasAttribute("title")&&(E+=' "'+y.getAttribute("title")+'"'),E+=")"),E}),r.subParser("makeMarkdown.links",function(y,E){var b="";if(y.hasChildNodes()&&y.hasAttribute("href")){var T=y.childNodes,A=T.length;b="[";for(var R=0;R<A;++R)b+=r.subParser("makeMarkdown.node")(T[R],E);b+="](",b+="<"+y.getAttribute("href")+">",y.hasAttribute("title")&&(b+=' "'+y.getAttribute("title")+'"'),b+=")"}return b}),r.subParser("makeMarkdown.list",function(y,E,b){var T="";if(!y.hasChildNodes())return"";for(var A=y.childNodes,R=A.length,k=y.getAttribute("start")||1,D=0;D<R;++D)if(!(typeof A[D].tagName>"u"||A[D].tagName.toLowerCase()!=="li")){var $="";b==="ol"?$=k.toString()+". ":$="- ",T+=$+r.subParser("makeMarkdown.listItem")(A[D],E),++k}return T+=`
<!-- -->
`,T.trim()}),r.subParser("makeMarkdown.listItem",function(y,E){for(var b="",T=y.childNodes,A=T.length,R=0;R<A;++R)b+=r.subParser("makeMarkdown.node")(T[R],E);return/\n$/.test(b)?b=b.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):b+=`
`,b}),r.subParser("makeMarkdown.node",function(y,E,b){b=b||!1;var T="";if(y.nodeType===3)return r.subParser("makeMarkdown.txt")(y,E);if(y.nodeType===8)return"<!--"+y.data+`-->

`;if(y.nodeType!==1)return"";var A=y.tagName.toLowerCase();switch(A){case"h1":b||(T=r.subParser("makeMarkdown.header")(y,E,1)+`

`);break;case"h2":b||(T=r.subParser("makeMarkdown.header")(y,E,2)+`

`);break;case"h3":b||(T=r.subParser("makeMarkdown.header")(y,E,3)+`

`);break;case"h4":b||(T=r.subParser("makeMarkdown.header")(y,E,4)+`

`);break;case"h5":b||(T=r.subParser("makeMarkdown.header")(y,E,5)+`

`);break;case"h6":b||(T=r.subParser("makeMarkdown.header")(y,E,6)+`

`);break;case"p":b||(T=r.subParser("makeMarkdown.paragraph")(y,E)+`

`);break;case"blockquote":b||(T=r.subParser("makeMarkdown.blockquote")(y,E)+`

`);break;case"hr":b||(T=r.subParser("makeMarkdown.hr")(y,E)+`

`);break;case"ol":b||(T=r.subParser("makeMarkdown.list")(y,E,"ol")+`

`);break;case"ul":b||(T=r.subParser("makeMarkdown.list")(y,E,"ul")+`

`);break;case"precode":b||(T=r.subParser("makeMarkdown.codeBlock")(y,E)+`

`);break;case"pre":b||(T=r.subParser("makeMarkdown.pre")(y,E)+`

`);break;case"table":b||(T=r.subParser("makeMarkdown.table")(y,E)+`

`);break;case"code":T=r.subParser("makeMarkdown.codeSpan")(y,E);break;case"em":case"i":T=r.subParser("makeMarkdown.emphasis")(y,E);break;case"strong":case"b":T=r.subParser("makeMarkdown.strong")(y,E);break;case"del":T=r.subParser("makeMarkdown.strikethrough")(y,E);break;case"a":T=r.subParser("makeMarkdown.links")(y,E);break;case"img":T=r.subParser("makeMarkdown.image")(y,E);break;default:T=y.outerHTML+`

`}return T}),r.subParser("makeMarkdown.paragraph",function(y,E){var b="";if(y.hasChildNodes())for(var T=y.childNodes,A=T.length,R=0;R<A;++R)b+=r.subParser("makeMarkdown.node")(T[R],E);return b=b.trim(),b}),r.subParser("makeMarkdown.pre",function(y,E){var b=y.getAttribute("prenum");return"<pre>"+E.preList[b]+"</pre>"}),r.subParser("makeMarkdown.strikethrough",function(y,E){var b="";if(y.hasChildNodes()){b+="~~";for(var T=y.childNodes,A=T.length,R=0;R<A;++R)b+=r.subParser("makeMarkdown.node")(T[R],E);b+="~~"}return b}),r.subParser("makeMarkdown.strong",function(y,E){var b="";if(y.hasChildNodes()){b+="**";for(var T=y.childNodes,A=T.length,R=0;R<A;++R)b+=r.subParser("makeMarkdown.node")(T[R],E);b+="**"}return b}),r.subParser("makeMarkdown.table",function(y,E){var b="",T=[[],[]],A=y.querySelectorAll("thead>tr>th"),R=y.querySelectorAll("tbody>tr"),k,D;for(k=0;k<A.length;++k){var $=r.subParser("makeMarkdown.tableCell")(A[k],E),V="---";if(A[k].hasAttribute("style")){var U=A[k].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(U){case"text-align:left;":V=":---";break;case"text-align:right;":V="---:";break;case"text-align:center;":V=":---:";break}}T[0][k]=$.trim(),T[1][k]=V}for(k=0;k<R.length;++k){var Q=T.push([])-1,x=R[k].getElementsByTagName("td");for(D=0;D<A.length;++D){var B=" ";typeof x[D]<"u"&&(B=r.subParser("makeMarkdown.tableCell")(x[D],E)),T[Q].push(B)}}var G=3;for(k=0;k<T.length;++k)for(D=0;D<T[k].length;++D){var X=T[k][D].length;X>G&&(G=X)}for(k=0;k<T.length;++k){for(D=0;D<T[k].length;++D)k===1?T[k][D].slice(-1)===":"?T[k][D]=r.helper.padEnd(T[k][D].slice(-1),G-1,"-")+":":T[k][D]=r.helper.padEnd(T[k][D],G,"-"):T[k][D]=r.helper.padEnd(T[k][D],G);b+="| "+T[k].join(" | ")+` |
`}return b.trim()}),r.subParser("makeMarkdown.tableCell",function(y,E){var b="";if(!y.hasChildNodes())return"";for(var T=y.childNodes,A=T.length,R=0;R<A;++R)b+=r.subParser("makeMarkdown.node")(T[R],E,!0);return b.trim()}),r.subParser("makeMarkdown.txt",function(y){var E=y.nodeValue;return E=E.replace(/ +/g," "),E=E.replace(/NBSP;/g," "),E=r.helper.unescapeHTMLEntities(E),E=E.replace(/([*_~|`])/g,"\\$1"),E=E.replace(/^(\s*)>/g,"\\$1>"),E=E.replace(/^#/gm,"\\#"),E=E.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),E=E.replace(/^( {0,3}\d+)\./gm,"$1\\."),E=E.replace(/^( {0,3})([+-])/gm,"$1\\$2"),E=E.replace(/]([\s]*)\(/g,"\\]$1\\("),E=E.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),E});var K=this;t.exports?t.exports=r:K.showdown=r}).call(dH)}(op)),op.exports}var hH=fH();const pH=jv(hH),mH=new pH.Converter({tables:!0,strikethrough:!0,emoji:!0,underline:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,openLinksInNewWindow:!0,backslashEscapesHTMLTags:!0,ghCodeBlocks:!0,tasklists:!0});function gr(t){return t?mH.makeHtml(t):""}const gH=async(t,e,n)=>{let r="";if(!Array.isArray(e)||e.length===0)return console.warn(`Layout ${t}: Empty or invalid content array`),{html:`<div class="layout-error">
                <div class="error-icon"></div>
                <div class="error-message">No content available</div>
            </div>`};try{switch(t){case 1:r=await ix(e,n);break;case 2:r=await yH(e,n);break;case 3:r=await vH(e,n);break;case 4:r=await _H(e,n);break;case 5:r=await wH(e,n);break;case 6:r=await bH(e,n);break;case 7:r=await EH(e,n);break;case 8:r=await TH(e,n);break;case 9:r=await SH(e,n);break;case 12:r=await AH(e,n);break;case 13:r=await xH(e,n);break;case 14:r=await CH(e,n);break;case 15:r=await RH(e,n);break;case 16:r=await kH(e,n);break;case 17:r=await IH(e,n);break;case 18:r=await NH(e,n);break;default:console.warn(`Layout ${t} not implemented, falling back to layout 1`),r=await ix(e,n)}if(!r||r.trim().length===0)throw new Error("Layout parser returned empty HTML")}catch(s){console.error(`Error parsing layout ${t}:`,s),r=`
            <div class="layout-error">
                <div class="error-icon"></div>
                <div class="error-message">
                    <strong>Layout Error</strong><br>
                    Unable to render content for layout ${t}
                </div>
                <div class="error-details">
                    ${s instanceof Error?s.message:"Unknown error occurred"}
                </div>
            </div>
        `}return{html:r}};async function ix(t,e){const[n,r,s]=t;let o=`
        <div class="layout-1">
            <div class="layout-header">
                <h2 class="layout-title">${n||"Educational Topic"}</h2>
                <div class="layout-textbar">${gr(r||"Content description")}</div>
            </div>
    `;return Array.isArray(s)&&s.length>0&&(o+='<div class="layout-images">',(await Promise.all(s.map(c=>ai(c).catch(()=>null)))).forEach((c,f)=>{c?o+=`
                    <div class="layout-image-wrapper">
                        <img class="layout-small-image" src="${c}" alt="Illustration ${f+1}" loading="lazy" />
                    </div>
                `:o+=`
                    <div class="layout-image-wrapper">
                        <div class="image-error">
                            <span class="error-icon"></span>
                            <span>Image ${f+1} unavailable</span>
                        </div>
                    </div>
                `}),o+="</div>"),o+=`
        </div>
    `,o}async function yH(t,e){let n='<div class="layout-2">',r=[];if(t.length>0&&Array.isArray(t[0]))r=t.filter(l=>Array.isArray(l)&&l.length>=2);else for(let l=0;l<t.length;l+=2)l+1<t.length&&r.push([t[l],t[l+1]]);if(r.length===0)return n+=`
            <div class="layout-error">
                <div class="error-icon"></div>
                <div class="error-message">No image-caption pairs found</div>
            </div>
        `,n+="</div>",n;const s=r.map(async([l,c])=>{try{return{url:await ai(l),caption:c,error:null}}catch(f){return{url:null,caption:c,error:f instanceof Error?f.message:"Unknown error"}}});return(await Promise.all(s)).forEach(({url:l,caption:c,error:f},h)=>{n+=`
            <div class="layout-image-caption">
        `,l?n+=`
                <div class="layout-image-wrapper">
                    <img class="layout-image" src="${l}" alt="Educational image ${h+1}" loading="lazy" />
                </div>
            `:n+=`
                <div class="layout-image-wrapper">
                    <div class="image-error">
                        <div class="error-icon"></div>
                        <span class="error-message">Image ${h+1} unavailable</span>
                        ${f?`<span class="error-details">${f}</span>`:""}
                    </div>
                </div>
            `,n+=`
                <div class="layout-caption-wrapper">
                    <p class="layout-caption">${gr(c)}</p>
                </div>
            </div>
        `}),n+="</div>",n}async function vH(t,e){const[n,r]=t;let o=`
        <div class="layout-3">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading diagram...</div>
            <div class="layout-description">${gr(r||"")}</div>
        </div>
    `;try{const l=await Rm(n);o=o.replace("Loading diagram...",l.outerHTML)}catch{o=o.replace("Loading diagram...",'<div class="mermaid-error">Error loading diagram</div>')}return o}async function _H(t,e){const[n,r]=t;let o=`
        <div class="layout-4">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading mindmap...</div>
            <p class="layout-description">${r||""}</p>
        </div>
    `;try{const l=await Rm(n);o=o.replace("Loading mindmap...",l.outerHTML)}catch{o=o.replace("Loading mindmap...",'<div class="mermaid-error">Error loading mindmap</div>')}return o}async function wH(t,e){const[n,r]=t;let o=`
        <div class="layout-5">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading piechart...</div>
            <p class="layout-description">${r||""}</p>
        </div>
    `;try{const l=await Rm(n);o=o.replace("Loading piechart...",l.outerHTML)}catch{o=o.replace("Loading piechart...",'<div class="mermaid-error">Error loading piechart</div>')}return o}async function bH(t,e){const[n,r]=t;let o=`
        <div class="layout-6">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading quadrant chart...</div>
            <p class="layout-description">${r||""}</p>
        </div>
    `;try{const l=await Rm(n);o=o.replace("Loading quadrant chart...",l.outerHTML)}catch{o=o.replace("Loading quadrant chart...",'<div class="mermaid-error">Error loading quadrant chart</div>')}return o}async function EH(t,e){const[n,r,s,o,l]=t,c=`img-${e}`;try{const f=await ai(n);return`
            <div class="layout-7">
                <div class="layout-visual-section">
                    <img id="${c}" class="layout-featured-image" src="${f}" alt="Featured Visual" />
                </div>
                <div class="layout-content-section">
                    <h2 class="layout-title">${r||"Educational Topic"}</h2>
                    <div class="layout-educational-content">
                        ${s?`<p class="layout-paragraph">${s}</p>`:""}
                        ${o?`<p class="layout-paragraph">${o}</p>`:""}
                        ${l?`<p class="layout-paragraph">${l}</p>`:""}
                    </div>
                </div>
            </div>
        `}catch{return`
            <div class="layout-7">
                <div class="layout-visual-section">
                    <div class="image-error">Error loading featured image</div>
                </div>
                <div class="layout-content-section">
                    <h2 class="layout-title">${r||"Educational Topic"}</h2>
                    <div class="layout-educational-content">
                        ${s?`<p class="layout-paragraph">${s}</p>`:""}
                        ${o?`<p class="layout-paragraph">${o}</p>`:""}
                        ${l?`<p class="layout-paragraph">${l}</p>`:""}
                    </div>
                </div>
            </div>
        `}}async function TH(t,e){const[n,r,s]=t,o=`img-main-${e}`;try{const l=await ai(n);let c=`
            <div class="layout-8">
                <div class="layout-primary-content">
                    <div class="layout-content-header">
                        <h2 class="layout-title">${r||"Educational Topic"}</h2>
                    </div>
        `;return Array.isArray(s)&&s.length>0&&(c+='<div class="layout-thumbnail-grid">',(await Promise.all(s.map(h=>ai(h).catch(()=>null)))).forEach((h,m)=>{h?c+=`
                        <div class="layout-thumbnail-wrapper">
                            <img class="layout-thumbnail-image" src="${h}" alt="Detail ${m+1}" loading="lazy" />
                        </div>
                    `:c+=`
                        <div class="layout-thumbnail-wrapper">
                            <div class="thumbnail-error">
                                <span></span>
                            </div>
                        </div>
                    `}),c+="</div>"),c+=`
                </div>
                <div class="layout-hero-visual">
                    <img id="${o}" class="layout-hero-image" src="${l}" alt="Main Visual" loading="lazy" />
                </div>
            </div>
        `,c}catch(l){console.error("Layout 8 error:",l);let c=`
            <div class="layout-8">
                <div class="layout-primary-content">
                    <div class="layout-content-header">
                        <h2 class="layout-title">${r||"Educational Topic"}</h2>
                    </div>
        `;return Array.isArray(s)&&s.length>0&&(c+=`
                <div class="layout-thumbnail-grid">
                    ${s.map((f,h)=>`
                        <div class="layout-thumbnail-wrapper">
                            <div class="thumbnail-error">
                                <span class="error-icon"></span>
                                <span class="error-text">Error ${h+1}</span>
                            </div>
                        </div>
                    `).join("")}
                </div>
            `),c+=`
                </div>
                <div class="layout-hero-visual">
                    <div class="image-error">
                        <div class="error-icon"></div>
                        <span>Main image unavailable</span>
                    </div>
                </div>
            </div>
        `,c}}async function SH(t,e){const[n,r]=t,s=`video-${e}`;try{const o=await Fk(n),l=qk(o);return`
            <div class="layout-9">
                <div id="${s}" class="layout-video">
                    <iframe src="${l}" frameborder="0" allowfullscreen></iframe>
                </div>
                <p class="layout-caption">${r||""}</p>
            </div>
        `}catch{return`
            <div class="layout-9">
                <div id="${s}" class="layout-video">
                    <div class="video-error">Error loading video</div>
                </div>
                <p class="layout-caption">${r||""}</p>
            </div>
        `}}async function AH(t,e){const[n,r]=t,s=`illustration-${e}`;try{const o=await ai(n);let l=`
            <div class="layout-12">
                <div class="layout-hero-section">
                    <div class="layout-central-visual">
                        <img id="${s}" class="layout-hero-image" src="${o}" alt="Educational Illustration" />
                    </div>
                </div>
                <div class="layout-content-section">
                    <div class="layout-educational-content">
        `;return typeof r=="string"?l+=`
                <div class="layout-text-content">
                    <p class="layout-description">${gr(r)}</p>
                </div>
            `:Array.isArray(r)&&(l+='<div class="layout-points-grid">',r.forEach((c,f)=>{const h=c.match(new RegExp("^(\\p{Emoji}|\\p{Symbol})\\s+(.+)$","u")),m=h?h[1]:sx(f),_=h?h[2]:c;l+=`
                    <div class="layout-educational-point">
                        <div class="layout-point-icon">${m}</div>
                        <div class="layout-point-content">
                            <span class="layout-point-text">${gr(_)}</span>
                        </div>
                    </div>
                `}),l+="</div>"),l+=`
                    </div>
                </div>
            </div>
        `,l}catch(o){console.error("Layout 12 error:",o);let l=`
            <div class="layout-12">
                <div class="layout-hero-section">
                    <div class="layout-central-visual">
                        <div class="image-error">
                            <div class="error-icon"></div>
                            <span>Unable to load illustration</span>
                        </div>
                    </div>
                </div>
                <div class="layout-content-section">
                    <div class="layout-educational-content">
        `;return typeof r=="string"?l+=`
                <div class="layout-text-content">
                    <p class="layout-description">${gr(r)}</p>
                </div>
            `:Array.isArray(r)&&(l+='<div class="layout-points-grid">',r.forEach((c,f)=>{const h=c.match(new RegExp("^(\\p{Emoji}|\\p{Symbol})\\s+(.+)$","u")),m=h?h[1]:sx(f),_=h?h[2]:c;l+=`
                    <div class="layout-educational-point">
                        <div class="layout-point-icon">${m}</div>
                        <div class="layout-point-content">
                            <span class="layout-point-text">${gr(_)}</span>
                        </div>
                    </div>
                `}),l+="</div>"),l+=`
                    </div>
                </div>
            </div>
        `,l}}function sx(t){const e=["","","","","","","","","",""];return e[t%e.length]}async function xH(t,e){const[n,r,s]=t,o=`video-${e}`;try{const l=await Fk(s),c=qk(l);return`
            <div class="layout-13">
                <div class="layout-left">
                    <h2 class="layout-title">${n||"Title"}</h2>
                    <p class="layout-text">${r||""}</p>
                </div>
                <div class="layout-right">
                    <div id="${o}" class="layout-video">
                        <iframe src="${c}" frameborder="0" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        `}catch{return`
            <div class="layout-13">
                <div class="layout-left">
                    <h2 class="layout-title">${n||"Title"}</h2>
                    <p class="layout-text">${r||""}</p>
                </div>
                <div class="layout-right">
                    <div id="${o}" class="layout-video">
                        <div class="video-error">Error loading video</div>
                    </div>
                </div>
            </div>
        `}}async function CH(t,e){let n='<div class="layout-14">';for(let r=0;r<t.length;r+=2){const s=t[r],o=t[r+1];if(s&&o){const l=r/2,c=l%2===0;try{const f=await ai(s);n+=`
                    <div class="layout-section ${c?"layout-section-normal":"layout-section-reverse"}">
                        <div class="layout-section-image">
                            <img class="layout-large-image" src="${f}" alt="Section ${l+1}" />
                        </div>
                        <div class="layout-section-content">
                            <p class="layout-text">${o}</p>
                        </div>
                    </div>
                `}catch{n+=`
                    <div class="layout-section ${c?"layout-section-normal":"layout-section-reverse"}">
                        <div class="layout-section-image">
                            <div class="image-error">Error loading image</div>
                        </div>
                        <div class="layout-section-content">
                            <p class="layout-text">${o}</p>
                        </div>
                    </div>
                `}}}return n+="</div>",n}async function RH(t,e){let n='<div class="layout-15">';for(let r=0;r<t.length;r+=3){const s=t[r],o=t[r+1],l=t[r+2];if(s&&o&&l)try{const c=await ai(o);n+=`
                    <div class="layout-timeline-item">
                        <div class="layout-timeline-date">${s}</div>
                        <img class="layout-timeline-image" src="${c}" alt="Timeline event" />
                        <div class="layout-timeline-content">
                            <p class="layout-timeline-text">${l}</p>
                        </div>
                    </div>
                `}catch{n+=`
                    <div class="layout-timeline-item">
                        <div class="layout-timeline-date">${s}</div>
                        <div class="image-error">Error loading image</div>
                        <div class="layout-timeline-content">
                            <p class="layout-timeline-text">${l}</p>
                        </div>
                    </div>
                `}}return n+="</div>",n}async function kH(t,e){let n='<div class="layout-16">';for(let r=0;r<t.length;r+=3){const s=t[r],o=t[r+1],l=t[r+2];if(s&&o&&l)try{const c=await ai(o);n+=`
                    <div class="layout-card">
                        <h3 class="layout-card-title">${s}</h3>
                        <img class="layout-card-image" src="${c}" alt="${s}" />
                        <p class="layout-card-description">${l}</p>
                    </div>
                `}catch{n+=`
                    <div class="layout-card">
                        <h3 class="layout-card-title">${s}</h3>
                        <div class="image-error">Error loading image</div>
                        <p class="layout-card-description">${l}</p>
                    </div>
                `}}return n+="</div>",n}async function IH(t,e){const[n,r,s,o,l,c,f]=t;try{const h=await ai(o),m=L=>{let j="javascript",H=(L||"").toString();if(H.startsWith("```")){const K=H.match(/```(\w+)?\n?([\s\S]*?)\n?```$/);K?(K[1]&&(j=K[1]),H=K[2]||""):H=H.replace(/^```\w*\n?/,"").replace(/\n?```$/,"")}else H.includes("def ")||H.includes("import ")||H.includes("print(")?j="python":H.includes("function ")||H.includes("const ")||H.includes("let ")?j="javascript":H.includes("public class ")||H.includes("System.out.println")?j="java":H.includes("#include")||H.includes("int main")?j="cpp":(H.includes("SELECT ")||H.includes("FROM "))&&(j="sql");return(!H||H.trim()==="")&&(H="// No code provided"),{lang:j,cleanCode:H}},{lang:_,cleanCode:w}=m(r),{lang:C,cleanCode:M}=m(c);return`
            <div class="layout-17">
                <h2 class="layout-title">${n||"Code Tutorial"}</h2>
                <div class="layout-code-section">
                    <pre class="layout-code-block language-${_}"><code class="language-${_}">${w}</code></pre>
                    <div class="layout-code-explanation">${gr(s||"")}</div>
                </div>
                <div class="layout-diagram-section">
                    <img class="layout-diagram-image" src="${h}" alt="Architecture Diagram" />
                    <div class="layout-implementation-explanation">${gr(l||"")}</div>
                </div>
                <div class="layout-code-section">
                    <pre class="layout-code-block language-${C}"><code class="language-${C}">${M}</code></pre>
                    <div class="layout-code-explanation">${gr(f||"")}</div>
                </div>
            </div>
        `}catch{return'<div class="layout-17"><div class="error-content">Error loading tutorial content</div></div>'}}async function NH(t,e){const[n,r,s,o,l,c]=t;try{const f=await ai(l),h=C=>{let M="javascript",P=(C||"").toString();if(P.startsWith("```")){const L=P.match(/```(\w+)?\n?([\s\S]*?)\n?```$/);L?(L[1]&&(M=L[1]),P=L[2]||""):P=P.replace(/^```\w*\n?/,"").replace(/\n?```$/,"")}else P.includes("def ")||P.includes("import ")||P.includes("print(")?M="python":P.includes("function ")||P.includes("const ")||P.includes("let ")?M="javascript":P.includes("public class ")||P.includes("System.out.println")?M="java":P.includes("#include")||P.includes("int main")?M="cpp":P.includes("SELECT ")||P.includes("FROM ")?M="sql":(P.includes("curl ")||P.includes("GET ")||P.includes("POST "))&&(M="bash");return(!P||P.trim()==="")&&(P="// No code provided"),{lang:M,cleanCode:P}},{lang:m,cleanCode:_}=h(r);return`
            <div class="layout-18">
                <h2 class="layout-title">${n||"API Documentation"}</h2>
                <div class="layout-api-section">
                    <div class="layout-code-container">
                        <pre class="layout-code-block language-${m}"><code class="language-${m}">${_}</code></pre>
                    </div>
                    <div class="layout-documentation">${gr(s||"")}</div>
                </div>
                <div class="layout-usage-section">
                    <h3 class="layout-subtitle">Usage Examples</h3>
                    <div class="layout-usage-examples">${gr(o||"")}</div>
                </div>
                <div class="layout-diagram-section">
                    <img class="layout-api-diagram" src="${f}" alt="API Flow Diagram" />
                    <div class="layout-best-practices">
                        <h3 class="layout-subtitle">Best Practices</h3>
                        ${gr(c||"")}
                    </div>
                </div>
            </div>
        `}catch{return'<div class="layout-18"><div class="error-content">Error loading documentation content</div></div>'}}const Gk=F.createContext(null),Kk=(t,e,n,r,s,o,l,c,f,h,m,_,w,C,M)=>{console.log(1);const P=s.find(K=>K.id===e);if(!P)return null;console.log(2);const L=P.data.tokenColors||{};if(console.log(3),!_){const K=t.myConcept||t.word;if(L[K])return console.log(`Token "${K}" is already colored, ignoring click`),null}console.log(4);let j;r==="staticEditable"?j=hS():j=f?OO(f):hS();let H=null;if(_)H=w;else{const K={...L};t.myConcept?K[t.myConcept]=j:K[t.word]=j,o(b=>b.map(T=>T.id===e?{...T,data:{...T.data,tokenColors:K}}:T));const y=VO(n);H=jO(y,t.myConcept||t.word,"Loading...","",j,r,e);const E=UO(e,H.id,j,m);l([{type:"add",item:H}]),c([{type:"add",item:E}])}return H&&(H.data.isLoading=!0,H.data.previousNode=e),_&&o(K=>K.map(y=>y.id===H?.id?{...y,data:{...H.data}}:y)),sH(t.myConcept||t.word,h||"",C||"default").then(async K=>{console.log("AI Response received:",K),console.log("Selected layout:",K.layout),console.log("Content array:",K.content);const{html:y}=await gH(K.layout,K.content,H?.id||"");if(console.log("Layout HTML generated (first 500 chars):",y.substring(0,500)),console.log("Layout HTML full length:",y.length),o(E=>E.map(b=>{if(b.id===H?.id){const T={...b,data:{...b.data,title:K.title,full_text:K.fullText,suggestions:K.suggestions,layout:K.layout,contents:[y],isLoading:!1,icon:K.icon}};return console.log("Updated node data:",T.data),T}return b})),M)try{await M()}catch(E){console.error("Error saving new node content:",E)}}).catch(async K=>{if(console.error("Error generating node content:",K),o(y=>y.map(E=>E.id===H?.id?{...E,data:{...E.data,title:t.word,full_text:t.word,suggestions:[],layout:1,contents:[`<div class="error-content">Failed to load content for "${t.word}"</div>`],isLoading:!1,icon:""}}:E)),M)try{await M()}catch(y){console.error("Error saving new node content after error:",y)}}),j},DH=({children:t,nodes:e,onNodesChange:n,onEdgesChange:r,setNodes:s,saveCallback:o})=>{const l=(c,f,h,m,_,w,C,M,P,L)=>Kk(c,f,h,m,e,s,n,r,_,w,C,M,P,L,o);return O.jsx(Gk.Provider,{value:{handleTokenClick:l,setNodes:s},children:t})},MH=()=>{const t=F.useContext(Gk);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t};function PH({title:t,titleId:e,...n},r){return F.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?F.createElement("title",{id:e},t):null,F.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const OH=F.forwardRef(PH);function VH({title:t,titleId:e,...n},r){return F.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?F.createElement("title",{id:e},t):null,F.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const LH=F.forwardRef(VH);function zH({title:t,titleId:e,...n},r){return F.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?F.createElement("title",{id:e},t):null,F.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const jH=F.forwardRef(zH);function UH({title:t,titleId:e,...n},r){return F.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?F.createElement("title",{id:e},t):null,F.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const BH=F.forwardRef(UH);function HH({title:t,titleId:e,...n},r){return F.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?F.createElement("title",{id:e},t):null,F.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),F.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const $H=F.forwardRef(HH);function FH({title:t,titleId:e,...n},r){return F.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?F.createElement("title",{id:e},t):null,F.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const qH=F.forwardRef(FH);function GH({title:t,titleId:e,...n},r){return F.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?F.createElement("title",{id:e},t):null,F.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const KH=F.forwardRef(GH),cw=F.createContext({});function dw(t){const e=F.useRef(null);return e.current===null&&(e.current=t()),e.current}const fw=typeof window<"u",Yk=fw?F.useLayoutEffect:F.useEffect,km=F.createContext(null);function hw(t,e){t.indexOf(e)===-1&&t.push(e)}function pw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const As=(t,e,n)=>n>e?e:n<t?t:n;let mw=()=>{};const xs={},Xk=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Wk(t){return typeof t=="object"&&t!==null}const Qk=t=>/^0[^.\s]+$/u.test(t);function gw(t){let e;return()=>(e===void 0&&(e=t()),e)}const Hr=t=>t,YH=(t,e)=>n=>e(t(n)),rf=(...t)=>t.reduce(YH),Md=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class yw{constructor(){this.subscriptions=[]}add(e){return hw(this.subscriptions,e),()=>pw(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Li=t=>t*1e3,zi=t=>t/1e3;function Zk(t,e){return e?t*(1e3/e):0}const Jk=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,XH=1e-7,WH=12;function QH(t,e,n,r,s){let o,l,c=0;do l=e+(n-e)/2,o=Jk(l,r,s)-t,o>0?n=l:e=l;while(Math.abs(o)>XH&&++c<WH);return l}function sf(t,e,n,r){if(t===e&&n===r)return Hr;const s=o=>QH(o,0,1,t,n);return o=>o===0||o===1?o:Jk(s(o),e,r)}const e8=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,t8=t=>e=>1-t(1-e),n8=sf(.33,1.53,.69,.99),vw=t8(n8),r8=e8(vw),i8=t=>(t*=2)<1?.5*vw(t):.5*(2-Math.pow(2,-10*(t-1))),_w=t=>1-Math.sin(Math.acos(t)),s8=t8(_w),a8=e8(_w),ZH=sf(.42,0,1,1),JH=sf(0,0,.58,1),o8=sf(.42,0,.58,1),e$=t=>Array.isArray(t)&&typeof t[0]!="number",l8=t=>Array.isArray(t)&&typeof t[0]=="number",t$={linear:Hr,easeIn:ZH,easeInOut:o8,easeOut:JH,circIn:_w,circInOut:a8,circOut:s8,backIn:vw,backInOut:r8,backOut:n8,anticipate:i8},n$=t=>typeof t=="string",ax=t=>{if(l8(t)){mw(t.length===4);const[e,n,r,s]=t;return sf(e,n,r,s)}else if(n$(t))return t$[t];return t},Bh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function r$(t,e){let n=new Set,r=new Set,s=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(m){l.has(m)&&(h.schedule(m),t()),m(c)}const h={schedule:(m,_=!1,w=!1)=>{const M=w&&s?n:r;return _&&l.add(m),M.has(m)||M.add(m),m},cancel:m=>{r.delete(m),l.delete(m)},process:m=>{if(c=m,s){o=!0;return}s=!0,[n,r]=[r,n],n.forEach(f),n.clear(),s=!1,o&&(o=!1,h.process(m))}};return h}const i$=40;function u8(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=Bh.reduce((K,y)=>(K[y]=r$(o),K),{}),{setup:c,read:f,resolveKeyframes:h,preUpdate:m,update:_,preRender:w,render:C,postRender:M}=l,P=()=>{const K=xs.useManualTiming?s.timestamp:performance.now();n=!1,xs.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(K-s.timestamp,i$),1)),s.timestamp=K,s.isProcessing=!0,c.process(s),f.process(s),h.process(s),m.process(s),_.process(s),w.process(s),C.process(s),M.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(P))},L=()=>{n=!0,r=!0,s.isProcessing||t(P)};return{schedule:Bh.reduce((K,y)=>{const E=l[y];return K[y]=(b,T=!1,A=!1)=>(n||L(),E.schedule(b,T,A)),K},{}),cancel:K=>{for(let y=0;y<Bh.length;y++)l[Bh[y]].cancel(K)},state:s,steps:l}}const{schedule:Et,cancel:Ca,state:bn,steps:d0}=u8(typeof requestAnimationFrame<"u"?requestAnimationFrame:Hr,!0);let lp;function s$(){lp=void 0}const Jn={now:()=>(lp===void 0&&Jn.set(bn.isProcessing||xs.useManualTiming?bn.timestamp:performance.now()),lp),set:t=>{lp=t,queueMicrotask(s$)}},c8=t=>e=>typeof e=="string"&&e.startsWith(t),ww=c8("--"),a$=c8("var(--"),bw=t=>a$(t)?o$.test(t.split("/*")[0].trim()):!1,o$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Iu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Pd={...Iu,transform:t=>As(0,1,t)},Hh={...Iu,default:1},od=t=>Math.round(t*1e5)/1e5,Ew=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function l$(t){return t==null}const u$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Tw=(t,e)=>n=>!!(typeof n=="string"&&u$.test(n)&&n.startsWith(t)||e&&!l$(n)&&Object.prototype.hasOwnProperty.call(n,e)),d8=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,l,c]=r.match(Ew);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},c$=t=>As(0,255,t),f0={...Iu,transform:t=>Math.round(c$(t))},bo={test:Tw("rgb","red"),parse:d8("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+f0.transform(t)+", "+f0.transform(e)+", "+f0.transform(n)+", "+od(Pd.transform(r))+")"};function d$(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const _v={test:Tw("#"),parse:d$,transform:bo.transform},af=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ta=af("deg"),ji=af("%"),Ve=af("px"),f$=af("vh"),h$=af("vw"),ox={...ji,parse:t=>ji.parse(t)/100,transform:t=>ji.transform(t*100)},Yl={test:Tw("hsl","hue"),parse:d8("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ji.transform(od(e))+", "+ji.transform(od(n))+", "+od(Pd.transform(r))+")"},Xt={test:t=>bo.test(t)||_v.test(t)||Yl.test(t),parse:t=>bo.test(t)?bo.parse(t):Yl.test(t)?Yl.parse(t):_v.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?bo.transform(t):Yl.transform(t),getAnimatableNone:t=>{const e=Xt.parse(t);return e.alpha=0,Xt.transform(e)}},p$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function m$(t){return isNaN(t)&&typeof t=="string"&&(t.match(Ew)?.length||0)+(t.match(p$)?.length||0)>0}const f8="number",h8="color",g$="var",y$="var(",lx="${}",v$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Od(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const c=e.replace(v$,f=>(Xt.test(f)?(r.color.push(o),s.push(h8),n.push(Xt.parse(f))):f.startsWith(y$)?(r.var.push(o),s.push(g$),n.push(f)):(r.number.push(o),s.push(f8),n.push(parseFloat(f))),++o,lx)).split(lx);return{values:n,split:c,indexes:r,types:s}}function p8(t){return Od(t).values}function m8(t){const{split:e,types:n}=Od(t),r=e.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],s[l]!==void 0){const c=n[l];c===f8?o+=od(s[l]):c===h8?o+=Xt.transform(s[l]):o+=s[l]}return o}}const _$=t=>typeof t=="number"?0:Xt.test(t)?Xt.getAnimatableNone(t):t;function w$(t){const e=p8(t);return m8(t)(e.map(_$))}const Ra={test:m$,parse:p8,createTransformer:m8,getAnimatableNone:w$};function h0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function b$({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,l=0;if(!e)s=o=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,f=2*n-c;s=h0(f,c,t+1/3),o=h0(f,c,t),l=h0(f,c,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function $p(t,e){return n=>n>0?e:t}const xt=(t,e,n)=>t+(e-t)*n,p0=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},E$=[_v,bo,Yl],T$=t=>E$.find(e=>e.test(t));function ux(t){const e=T$(t);if(!e)return!1;let n=e.parse(t);return e===Yl&&(n=b$(n)),n}const cx=(t,e)=>{const n=ux(t),r=ux(e);if(!n||!r)return $p(t,e);const s={...n};return o=>(s.red=p0(n.red,r.red,o),s.green=p0(n.green,r.green,o),s.blue=p0(n.blue,r.blue,o),s.alpha=xt(n.alpha,r.alpha,o),bo.transform(s))},wv=new Set(["none","hidden"]);function S$(t,e){return wv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function A$(t,e){return n=>xt(t,e,n)}function Sw(t){return typeof t=="number"?A$:typeof t=="string"?bw(t)?$p:Xt.test(t)?cx:R$:Array.isArray(t)?g8:typeof t=="object"?Xt.test(t)?cx:x$:$p}function g8(t,e){const n=[...t],r=n.length,s=t.map((o,l)=>Sw(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)n[l]=s[l](o);return n}}function x$(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Sw(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function C$(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=t.indexes[o][r[o]],c=t.values[l]??0;n[s]=c,r[o]++}return n}const R$=(t,e)=>{const n=Ra.createTransformer(e),r=Od(t),s=Od(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?wv.has(t)&&!s.values.length||wv.has(e)&&!r.values.length?S$(t,e):rf(g8(C$(r,s),s.values),n):$p(t,e)};function y8(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?xt(t,e,n):Sw(t)(t,e)}const k$=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Et.update(e,n),stop:()=>Ca(e),now:()=>bn.isProcessing?bn.timestamp:Jn.now()}},v8=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=Math.round(t(o/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Fp=2e4;function Aw(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Fp;)e+=n,r=t.next(e);return e>=Fp?1/0:e}function I$(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(Aw(r),Fp);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:zi(s)}}const N$=5;function _8(t,e,n){const r=Math.max(e-N$,0);return Zk(n-t(r),e-r)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},m0=.001;function D$({duration:t=Mt.duration,bounce:e=Mt.bounce,velocity:n=Mt.velocity,mass:r=Mt.mass}){let s,o,l=1-e;l=As(Mt.minDamping,Mt.maxDamping,l),t=As(Mt.minDuration,Mt.maxDuration,zi(t)),l<1?(s=h=>{const m=h*l,_=m*t,w=m-n,C=bv(h,l),M=Math.exp(-_);return m0-w/C*M},o=h=>{const _=h*l*t,w=_*n+n,C=Math.pow(l,2)*Math.pow(h,2)*t,M=Math.exp(-_),P=bv(Math.pow(h,2),l);return(-s(h)+m0>0?-1:1)*((w-C)*M)/P}):(s=h=>{const m=Math.exp(-h*t),_=(h-n)*t+1;return-m0+m*_},o=h=>{const m=Math.exp(-h*t),_=(n-h)*(t*t);return m*_});const c=5/t,f=P$(s,o,c);if(t=Li(t),isNaN(f))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:t};{const h=Math.pow(f,2)*r;return{stiffness:h,damping:l*2*Math.sqrt(r*h),duration:t}}}const M$=12;function P$(t,e,n){let r=n;for(let s=1;s<M$;s++)r=r-t(r)/e(r);return r}function bv(t,e){return t*Math.sqrt(1-e*e)}const O$=["duration","bounce"],V$=["stiffness","damping","mass"];function dx(t,e){return e.some(n=>t[n]!==void 0)}function L$(t){let e={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...t};if(!dx(t,V$)&&dx(t,O$))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*As(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Mt.mass,stiffness:s,damping:o}}else{const n=D$(t);e={...e,...n,mass:Mt.mass},e.isResolvedFromDuration=!0}return e}function qp(t=Mt.visualDuration,e=Mt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:f,damping:h,mass:m,duration:_,velocity:w,isResolvedFromDuration:C}=L$({...n,velocity:-zi(n.velocity||0)}),M=w||0,P=h/(2*Math.sqrt(f*m)),L=l-o,j=zi(Math.sqrt(f/m)),H=Math.abs(L)<5;r||(r=H?Mt.restSpeed.granular:Mt.restSpeed.default),s||(s=H?Mt.restDelta.granular:Mt.restDelta.default);let K;if(P<1){const E=bv(j,P);K=b=>{const T=Math.exp(-P*j*b);return l-T*((M+P*j*L)/E*Math.sin(E*b)+L*Math.cos(E*b))}}else if(P===1)K=E=>l-Math.exp(-j*E)*(L+(M+j*L)*E);else{const E=j*Math.sqrt(P*P-1);K=b=>{const T=Math.exp(-P*j*b),A=Math.min(E*b,300);return l-T*((M+P*j*L)*Math.sinh(A)+E*L*Math.cosh(A))/E}}const y={calculatedDuration:C&&_||null,next:E=>{const b=K(E);if(C)c.done=E>=_;else{let T=E===0?M:0;P<1&&(T=E===0?Li(M):_8(K,E,b));const A=Math.abs(T)<=r,R=Math.abs(l-b)<=s;c.done=A&&R}return c.value=c.done?l:b,c},toString:()=>{const E=Math.min(Aw(y),Fp),b=v8(T=>y.next(E*T).value,E,30);return E+"ms "+b},toTransition:()=>{}};return y}qp.applyToOptions=t=>{const e=I$(t,100,qp);return t.ease=e.ease,t.duration=Li(e.duration),t.type="keyframes",t};function Ev({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:f,restDelta:h=.5,restSpeed:m}){const _=t[0],w={done:!1,value:_},C=A=>c!==void 0&&A<c||f!==void 0&&A>f,M=A=>c===void 0?f:f===void 0||Math.abs(c-A)<Math.abs(f-A)?c:f;let P=n*e;const L=_+P,j=l===void 0?L:l(L);j!==L&&(P=j-_);const H=A=>-P*Math.exp(-A/r),K=A=>j+H(A),y=A=>{const R=H(A),k=K(A);w.done=Math.abs(R)<=h,w.value=w.done?j:k};let E,b;const T=A=>{C(w.value)&&(E=A,b=qp({keyframes:[w.value,M(w.value)],velocity:_8(K,A,w.value),damping:s,stiffness:o,restDelta:h,restSpeed:m}))};return T(0),{calculatedDuration:null,next:A=>{let R=!1;return!b&&E===void 0&&(R=!0,y(A),T(A)),E!==void 0&&A>=E?b.next(A-E):(!R&&y(A),w)}}}function z$(t,e,n){const r=[],s=n||xs.mix||y8,o=t.length-1;for(let l=0;l<o;l++){let c=s(t[l],t[l+1]);if(e){const f=Array.isArray(e)?e[l]||Hr:e;c=rf(f,c)}r.push(c)}return r}function j$(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(mw(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=z$(e,r,s),f=c.length,h=m=>{if(l&&m<t[0])return e[0];let _=0;if(f>1)for(;_<t.length-2&&!(m<t[_+1]);_++);const w=Md(t[_],t[_+1],m);return c[_](w)};return n?m=>h(As(t[0],t[o-1],m)):h}function U$(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Md(0,e,r);t.push(xt(n,1,s))}}function B$(t){const e=[0];return U$(e,t.length-1),e}function H$(t,e){return t.map(n=>n*e)}function $$(t,e){return t.map(()=>e||o8).splice(0,t.length-1)}function ld({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=e$(r)?r.map(ax):ax(r),o={done:!1,value:e[0]},l=H$(n&&n.length===e.length?n:B$(e),t),c=j$(l,e,{ease:Array.isArray(s)?s:$$(e,s)});return{calculatedDuration:t,next:f=>(o.value=c(f),o.done=f>=t,o)}}const F$=t=>t!==null;function xw(t,{repeat:e,repeatType:n="loop"},r,s=1){const o=t.filter(F$),c=s<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!c||r===void 0?o[c]:r}const q$={decay:Ev,inertia:Ev,tween:ld,keyframes:ld,spring:qp};function w8(t){typeof t.type=="string"&&(t.type=q$[t.type])}class Cw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const G$=t=>t/100;class Rw extends Cw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Jn.now()&&this.tick(Jn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;w8(e);const{type:n=ld,repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=e;let{keyframes:c}=e;const f=n||ld;f!==ld&&typeof c[0]!="number"&&(this.mixKeyframes=rf(G$,y8(c[0],c[1])),c=[0,100]);const h=f({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...c].reverse(),velocity:-l})),h.calculatedDuration===null&&(h.calculatedDuration=Aw(h));const{calculatedDuration:m}=h;this.calculatedDuration=m,this.resolvedDuration=m+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=h}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:f}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:m,repeat:_,repeatType:w,repeatDelay:C,type:M,onUpdate:P,finalKeyframe:L}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const j=this.currentTime-h*(this.playbackSpeed>=0?1:-1),H=this.playbackSpeed>=0?j<0:j>s;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let K=this.currentTime,y=r;if(_){const A=Math.min(this.currentTime,s)/c;let R=Math.floor(A),k=A%1;!k&&A>=1&&(k=1),k===1&&R--,R=Math.min(R,_+1),!!(R%2)&&(w==="reverse"?(k=1-k,C&&(k-=C/c)):w==="mirror"&&(y=l)),K=As(0,1,k)*c}const E=H?{done:!1,value:m[0]}:y.next(K);o&&(E.value=o(E.value));let{done:b}=E;!H&&f!==null&&(b=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&b);return T&&M!==Ev&&(E.value=xw(m,this.options,L,this.speed)),P&&P(E.value),T&&this.finish(),E}then(e,n){return this.finished.then(e,n)}get duration(){return zi(this.calculatedDuration)}get time(){return zi(this.currentTime)}set time(e){e=Li(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Jn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=zi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=k$,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Jn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function K$(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Eo=t=>t*180/Math.PI,Tv=t=>{const e=Eo(Math.atan2(t[1],t[0]));return Sv(e)},Y$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Tv,rotateZ:Tv,skewX:t=>Eo(Math.atan(t[1])),skewY:t=>Eo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Sv=t=>(t=t%360,t<0&&(t+=360),t),fx=Tv,hx=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),px=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),X$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:hx,scaleY:px,scale:t=>(hx(t)+px(t))/2,rotateX:t=>Sv(Eo(Math.atan2(t[6],t[5]))),rotateY:t=>Sv(Eo(Math.atan2(-t[2],t[0]))),rotateZ:fx,rotate:fx,skewX:t=>Eo(Math.atan(t[4])),skewY:t=>Eo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Av(t){return t.includes("scale")?1:0}function xv(t,e){if(!t||t==="none")return Av(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=X$,s=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Y$,s=c}if(!s)return Av(e);const o=r[e],l=s[1].split(",").map(Q$);return typeof o=="function"?o(l):l[o]}const W$=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return xv(n,e)};function Q$(t){return parseFloat(t.trim())}const Nu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Du=new Set(Nu),mx=t=>t===Iu||t===Ve,Z$=new Set(["x","y","z"]),J$=Nu.filter(t=>!Z$.has(t));function eF(t){const e=[];return J$.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Ao={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>xv(e,"x"),y:(t,{transform:e})=>xv(e,"y")};Ao.translateX=Ao.x;Ao.translateY=Ao.y;const xo=new Set;let Cv=!1,Rv=!1,kv=!1;function b8(){if(Rv){const t=Array.from(xo).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=eF(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,l])=>{r.getValue(o)?.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Rv=!1,Cv=!1,xo.forEach(t=>t.complete(kv)),xo.clear()}function E8(){xo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Rv=!0)})}function tF(){kv=!0,E8(),b8(),kv=!1}class kw{constructor(e,n,r,s,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(xo.add(this),Cv||(Cv=!0,Et.read(E8),Et.resolveKeyframes(b8))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const o=s?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const c=r.readValue(n,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}K$(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),xo.delete(this)}cancel(){this.state==="scheduled"&&(xo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const nF=t=>t.startsWith("--");function rF(t,e,n){nF(e)?t.style.setProperty(e,n):t.style[e]=n}const iF=gw(()=>window.ScrollTimeline!==void 0),sF={};function aF(t,e){const n=gw(t);return()=>sF[e]??n()}const T8=aF(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ed=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,gx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ed([0,.65,.55,1]),circOut:ed([.55,0,1,.45]),backIn:ed([.31,.01,.66,-.59]),backOut:ed([.33,1.53,.69,.99])};function S8(t,e){if(t)return typeof t=="function"?T8()?v8(t,e):"ease-out":l8(t)?ed(t):Array.isArray(t)?t.map(n=>S8(n,e)||gx.easeOut):gx[t]}function oF(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:c="easeOut",times:f}={},h=void 0){const m={[e]:n};f&&(m.offset=f);const _=S8(c,s);Array.isArray(_)&&(m.easing=_);const w={delay:r,duration:s,easing:Array.isArray(_)?"linear":_,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return h&&(w.pseudoElement=h),t.animate(m,w)}function A8(t){return typeof t=="function"&&"applyToOptions"in t}function lF({type:t,...e}){return A8(t)&&T8()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class uF extends Cw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:c,onComplete:f}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,mw(typeof e.type!="string");const h=lF(e);this.animation=oF(n,r,s,h,o),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const m=xw(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):rF(n,r,m),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return zi(Number(e))}get time(){return zi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Li(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&iF()?(this.animation.timeline=e,Hr):n(this)}}const x8={anticipate:i8,backInOut:r8,circInOut:a8};function cF(t){return t in x8}function dF(t){typeof t.ease=="string"&&cF(t.ease)&&(t.ease=x8[t.ease])}const yx=10;class fF extends uF{constructor(e){dF(e),w8(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:o,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new Rw({...l,autoplay:!1}),f=Li(this.finishedTime??this.time);n.setWithVelocity(c.sample(f-yx).value,c.sample(f).value,yx),c.stop()}}const vx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ra.test(t)||t==="0")&&!t.startsWith("url("));function hF(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function pF(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=vx(s,e),c=vx(o,e);return!l||!c?!1:hF(t)||(n==="spring"||A8(n))&&r}const mF=new Set(["opacity","clipPath","filter","transform"]),gF=gw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function yF(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:o,type:l}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:h}=e.owner.getProps();return gF()&&n&&mF.has(n)&&(n!=="transform"||!h)&&!f&&!r&&s!=="mirror"&&o!==0&&l!=="inertia"}const vF=40;class _F extends Cw{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:f,motionValue:h,element:m,..._}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Jn.now();const w={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:l,name:f,motionValue:h,element:m,..._},C=m?.KeyframeResolver||kw;this.keyframeResolver=new C(c,(M,P,L)=>this.onKeyframesResolved(M,P,w,!L),f,h,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:o,type:l,velocity:c,delay:f,isHandoff:h,onUpdate:m}=r;this.resolvedAt=Jn.now(),pF(e,o,l,c)||((xs.instantAnimations||!f)&&m?.(xw(e,r,n)),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const w={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>vF?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},C=!h&&yF(w)?new fF({...w,element:w.motionValue.owner.current}):new Rw(w);C.finished.then(()=>this.notifyFinished()).catch(Hr),this.pendingTimeline&&(this.stopTimeline=C.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=C}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),tF()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const wF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function bF(t){const e=wF.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function C8(t,e,n=1){const[r,s]=bF(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return Xk(l)?parseFloat(l):l}return bw(s)?C8(s,e,n+1):s}function Iw(t,e){return t?.[e]??t?.default??t}const R8=new Set(["width","height","top","left","right","bottom",...Nu]),EF={test:t=>t==="auto",parse:t=>t},k8=t=>e=>e.test(t),I8=[Iu,Ve,ji,ta,h$,f$,EF],_x=t=>I8.find(k8(t));function TF(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Qk(t):!0}const SF=new Set(["brightness","contrast","saturate","opacity"]);function AF(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Ew)||[];if(!r)return t;const s=n.replace(r,"");let o=SF.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const xF=/\b([a-z-]*)\(.*?\)/gu,Iv={...Ra,getAnimatableNone:t=>{const e=t.match(xF);return e?e.map(AF).join(" "):t}},wx={...Iu,transform:Math.round},CF={rotate:ta,rotateX:ta,rotateY:ta,rotateZ:ta,scale:Hh,scaleX:Hh,scaleY:Hh,scaleZ:Hh,skew:ta,skewX:ta,skewY:ta,distance:Ve,translateX:Ve,translateY:Ve,translateZ:Ve,x:Ve,y:Ve,z:Ve,perspective:Ve,transformPerspective:Ve,opacity:Pd,originX:ox,originY:ox,originZ:Ve},Nw={borderWidth:Ve,borderTopWidth:Ve,borderRightWidth:Ve,borderBottomWidth:Ve,borderLeftWidth:Ve,borderRadius:Ve,radius:Ve,borderTopLeftRadius:Ve,borderTopRightRadius:Ve,borderBottomRightRadius:Ve,borderBottomLeftRadius:Ve,width:Ve,maxWidth:Ve,height:Ve,maxHeight:Ve,top:Ve,right:Ve,bottom:Ve,left:Ve,padding:Ve,paddingTop:Ve,paddingRight:Ve,paddingBottom:Ve,paddingLeft:Ve,margin:Ve,marginTop:Ve,marginRight:Ve,marginBottom:Ve,marginLeft:Ve,backgroundPositionX:Ve,backgroundPositionY:Ve,...CF,zIndex:wx,fillOpacity:Pd,strokeOpacity:Pd,numOctaves:wx},RF={...Nw,color:Xt,backgroundColor:Xt,outlineColor:Xt,fill:Xt,stroke:Xt,borderColor:Xt,borderTopColor:Xt,borderRightColor:Xt,borderBottomColor:Xt,borderLeftColor:Xt,filter:Iv,WebkitFilter:Iv},N8=t=>RF[t];function D8(t,e){let n=N8(t);return n!==Iv&&(n=Ra),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const kF=new Set(["auto","none","0"]);function IF(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!kF.has(o)&&Od(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=D8(n,s)}class NF extends kw{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let h=e[f];if(typeof h=="string"&&(h=h.trim(),bw(h))){const m=C8(h,n.current);m!==void 0&&(e[f]=m),f===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!R8.has(r)||e.length!==2)return;const[s,o]=e,l=_x(s),c=_x(o);if(l!==c)if(mx(l)&&mx(c))for(let f=0;f<e.length;f++){const h=e[f];typeof h=="string"&&(e[f]=parseFloat(h))}else Ao[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||TF(e[s]))&&r.push(s);r.length&&IF(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ao[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=Ao[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,f])=>{e.getValue(c).set(f)}),this.resolveNoneKeyframes()}}function DF(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=n?.[t]??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const M8=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function P8(t){return Wk(t)&&"offsetHeight"in t}const bx=30,MF=t=>!isNaN(parseFloat(t));class PF{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=Jn.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();s&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Jn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=MF(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new yw);const r=this.events[e].add(n);return e==="change"?()=>{r(),Et.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Jn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>bx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,bx);return Zk(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function wu(t,e){return new PF(t,e)}const{schedule:Dw}=u8(queueMicrotask,!1),Zr={x:!1,y:!1};function O8(){return Zr.x||Zr.y}function OF(t){return t==="x"||t==="y"?Zr[t]?null:(Zr[t]=!0,()=>{Zr[t]=!1}):Zr.x||Zr.y?null:(Zr.x=Zr.y=!0,()=>{Zr.x=Zr.y=!1})}function V8(t,e){const n=DF(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function Ex(t){return!(t.pointerType==="touch"||O8())}function VF(t,e,n={}){const[r,s,o]=V8(t,n),l=c=>{if(!Ex(c))return;const{target:f}=c,h=e(f,c);if(typeof h!="function"||!f)return;const m=_=>{Ex(_)&&(h(_),f.removeEventListener("pointerleave",m))};f.addEventListener("pointerleave",m,s)};return r.forEach(c=>{c.addEventListener("pointerenter",l,s)}),o}const L8=(t,e)=>e?t===e?!0:L8(t,e.parentElement):!1,Mw=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,LF=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zF(t){return LF.has(t.tagName)||t.tabIndex!==-1}const up=new WeakSet;function Tx(t){return e=>{e.key==="Enter"&&t(e)}}function g0(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const jF=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Tx(()=>{if(up.has(n))return;g0(n,"down");const s=Tx(()=>{g0(n,"up")}),o=()=>g0(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Sx(t){return Mw(t)&&!O8()}function UF(t,e,n={}){const[r,s,o]=V8(t,n),l=c=>{const f=c.currentTarget;if(!Sx(c))return;up.add(f);const h=e(f,c),m=(C,M)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",w),up.has(f)&&up.delete(f),Sx(C)&&typeof h=="function"&&h(C,{success:M})},_=C=>{m(C,f===window||f===document||n.useGlobalTarget||L8(f,C.target))},w=C=>{m(C,!1)};window.addEventListener("pointerup",_,s),window.addEventListener("pointercancel",w,s)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,s),P8(c)&&(c.addEventListener("focus",h=>jF(h,s)),!zF(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function z8(t){return Wk(t)&&"ownerSVGElement"in t}function BF(t){return z8(t)&&t.tagName==="svg"}const Nn=t=>!!(t&&t.getVelocity),HF=[...I8,Xt,Ra],$F=t=>HF.find(k8(t)),Pw=F.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class FF extends F.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=P8(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function qF({children:t,isPresent:e,anchorX:n,root:r}){const s=F.useId(),o=F.useRef(null),l=F.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=F.useContext(Pw);return F.useInsertionEffect(()=>{const{width:f,height:h,top:m,left:_,right:w}=l.current;if(e||!o.current||!f||!h)return;const C=n==="left"?`left: ${_}`:`right: ${w}`;o.current.dataset.motionPopId=s;const M=document.createElement("style");c&&(M.nonce=c);const P=r??document.head;return P.appendChild(M),M.sheet&&M.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${h}px !important;
            ${C}px !important;
            top: ${m}px !important;
          }
        `),()=>{P.removeChild(M),P.contains(M)&&P.removeChild(M)}},[e]),O.jsx(FF,{isPresent:e,childRef:o,sizeRef:l,children:F.cloneElement(t,{ref:o})})}const GF=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:l,anchorX:c,root:f})=>{const h=dw(KF),m=F.useId();let _=!0,w=F.useMemo(()=>(_=!1,{id:m,initial:e,isPresent:n,custom:s,onExitComplete:C=>{h.set(C,!0);for(const M of h.values())if(!M)return;r&&r()},register:C=>(h.set(C,!1),()=>h.delete(C))}),[n,h,r]);return o&&_&&(w={...w}),F.useMemo(()=>{h.forEach((C,M)=>h.set(M,!1))},[n]),F.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),l==="popLayout"&&(t=O.jsx(qF,{isPresent:n,anchorX:c,root:f,children:t})),O.jsx(km.Provider,{value:w,children:t})};function KF(){return new Map}function j8(t=!0){const e=F.useContext(km);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=F.useId();F.useEffect(()=>{if(t)return s(o)},[t]);const l=F.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,l]:[!0]}const $h=t=>t.key||"";function Ax(t){const e=[];return F.Children.forEach(t,n=>{F.isValidElement(n)&&e.push(n)}),e}const xx=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",root:f})=>{const[h,m]=j8(l),_=F.useMemo(()=>Ax(t),[t]),w=l&&!h?[]:_.map($h),C=F.useRef(!0),M=F.useRef(_),P=dw(()=>new Map),[L,j]=F.useState(_),[H,K]=F.useState(_);Yk(()=>{C.current=!1,M.current=_;for(let b=0;b<H.length;b++){const T=$h(H[b]);w.includes(T)?P.delete(T):P.get(T)!==!0&&P.set(T,!1)}},[H,w.length,w.join("-")]);const y=[];if(_!==L){let b=[..._];for(let T=0;T<H.length;T++){const A=H[T],R=$h(A);w.includes(R)||(b.splice(T,0,A),y.push(A))}return o==="wait"&&y.length&&(b=y),K(Ax(b)),j(_),null}const{forceRender:E}=F.useContext(cw);return O.jsx(O.Fragment,{children:H.map(b=>{const T=$h(b),A=l&&!h?!1:_===H||w.includes(T),R=()=>{if(P.has(T))P.set(T,!0);else return;let k=!0;P.forEach(D=>{D||(k=!1)}),k&&(E?.(),K(M.current),l&&m?.(),r&&r())};return O.jsx(GF,{isPresent:A,initial:!C.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:f,onExitComplete:A?void 0:R,anchorX:c,children:b},T)})})},U8=F.createContext({strict:!1}),Cx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bu={};for(const t in Cx)bu[t]={isEnabled:e=>Cx[t].some(n=>!!e[n])};function YF(t){for(const e in t)bu[e]={...bu[e],...t[e]}}const XF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Gp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||XF.has(t)}let B8=t=>!Gp(t);function WF(t){typeof t=="function"&&(B8=e=>e.startsWith("on")?!Gp(e):t(e))}try{WF(require("@emotion/is-prop-valid").default)}catch{}function QF(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(B8(s)||n===!0&&Gp(s)||!e&&!Gp(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const Im=F.createContext({});function Nm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Vd(t){return typeof t=="string"||Array.isArray(t)}const Ow=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Vw=["initial",...Ow];function Dm(t){return Nm(t.animate)||Vw.some(e=>Vd(t[e]))}function H8(t){return!!(Dm(t)||t.variants)}function ZF(t,e){if(Dm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Vd(n)?n:void 0,animate:Vd(r)?r:void 0}}return t.inherit!==!1?e:{}}function JF(t){const{initial:e,animate:n}=ZF(t,F.useContext(Im));return F.useMemo(()=>({initial:e,animate:n}),[Rx(e),Rx(n)])}function Rx(t){return Array.isArray(t)?t.join(" "):t}const Ld={};function eq(t){for(const e in t)Ld[e]=t[e],ww(e)&&(Ld[e].isCSSVariable=!0)}function $8(t,{layout:e,layoutId:n}){return Du.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ld[t]||t==="opacity")}const tq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nq=Nu.length;function rq(t,e,n){let r="",s=!0;for(let o=0;o<nq;o++){const l=Nu[o],c=t[l];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(l.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||n){const h=M8(c,Nw[l]);if(!f){s=!1;const m=tq[l]||l;r+=`${m}(${h}) `}n&&(e[l]=h)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Lw(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let l=!1,c=!1;for(const f in e){const h=e[f];if(Du.has(f)){l=!0;continue}else if(ww(f)){s[f]=h;continue}else{const m=M8(h,Nw[f]);f.startsWith("origin")?(c=!0,o[f]=m):r[f]=m}}if(e.transform||(l||n?r.transform=rq(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:f="50%",originY:h="50%",originZ:m=0}=o;r.transformOrigin=`${f} ${h} ${m}`}}const zw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function F8(t,e,n){for(const r in e)!Nn(e[r])&&!$8(r,n)&&(t[r]=e[r])}function iq({transformTemplate:t},e){return F.useMemo(()=>{const n=zw();return Lw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function sq(t,e){const n=t.style||{},r={};return F8(r,n,t),Object.assign(r,iq(t,e)),r}function aq(t,e){const n={},r=sq(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const oq={offset:"stroke-dashoffset",array:"stroke-dasharray"},lq={offset:"strokeDashoffset",array:"strokeDasharray"};function uq(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?oq:lq;t[o.offset]=Ve.transform(-r);const l=Ve.transform(e),c=Ve.transform(n);t[o.array]=`${l} ${c}`}function q8(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...c},f,h,m){if(Lw(t,c,h),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:_,style:w}=t;_.transform&&(w.transform=_.transform,delete _.transform),(w.transform||_.transformOrigin)&&(w.transformOrigin=_.transformOrigin??"50% 50%",delete _.transformOrigin),w.transform&&(w.transformBox=m?.transformBox??"fill-box",delete _.transformBox),e!==void 0&&(_.x=e),n!==void 0&&(_.y=n),r!==void 0&&(_.scale=r),s!==void 0&&uq(_,s,o,l,!1)}const G8=()=>({...zw(),attrs:{}}),K8=t=>typeof t=="string"&&t.toLowerCase()==="svg";function cq(t,e,n,r){const s=F.useMemo(()=>{const o=G8();return q8(o,e,K8(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};F8(o,t.style,t),s.style={...o,...s.style}}return s}const dq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function jw(t){return typeof t!="string"||t.includes("-")?!1:!!(dq.indexOf(t)>-1||/[A-Z]/u.test(t))}function fq(t,e,n,{latestValues:r},s,o=!1){const c=(jw(t)?cq:aq)(e,r,s,t),f=QF(e,typeof t=="string",o),h=t!==F.Fragment?{...f,...c,ref:n}:{},{children:m}=e,_=F.useMemo(()=>Nn(m)?m.get():m,[m]);return F.createElement(t,{...h,children:_})}function kx(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Uw(t,e,n,r){if(typeof e=="function"){const[s,o]=kx(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=kx(r);e=e(n!==void 0?n:t.custom,s,o)}return e}function cp(t){return Nn(t)?t.get():t}function hq({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:pq(n,r,s,t),renderState:e()}}function pq(t,e,n,r){const s={},o=r(t,{});for(const w in o)s[w]=cp(o[w]);let{initial:l,animate:c}=t;const f=Dm(t),h=H8(t);e&&h&&!f&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let m=n?n.initial===!1:!1;m=m||l===!1;const _=m?c:l;if(_&&typeof _!="boolean"&&!Nm(_)){const w=Array.isArray(_)?_:[_];for(let C=0;C<w.length;C++){const M=Uw(t,w[C]);if(M){const{transitionEnd:P,transition:L,...j}=M;for(const H in j){let K=j[H];if(Array.isArray(K)){const y=m?K.length-1:0;K=K[y]}K!==null&&(s[H]=K)}for(const H in P)s[H]=P[H]}}}return s}const Y8=t=>(e,n)=>{const r=F.useContext(Im),s=F.useContext(km),o=()=>hq(t,e,r,s);return n?o():dw(o)};function Bw(t,e,n){const{style:r}=t,s={};for(const o in r)(Nn(r[o])||e.style&&Nn(e.style[o])||$8(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(s[o]=r[o]);return s}const mq=Y8({scrapeMotionValuesFromProps:Bw,createRenderState:zw});function X8(t,e,n){const r=Bw(t,e,n);for(const s in t)if(Nn(t[s])||Nn(e[s])){const o=Nu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}const gq=Y8({scrapeMotionValuesFromProps:X8,createRenderState:G8}),yq=Symbol.for("motionComponentSymbol");function Xl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function vq(t,e,n){return F.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Xl(n)&&(n.current=r))},[e])}const Hw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_q="framerAppearId",W8="data-"+Hw(_q),Q8=F.createContext({});function wq(t,e,n,r,s){const{visualElement:o}=F.useContext(Im),l=F.useContext(U8),c=F.useContext(km),f=F.useContext(Pw).reducedMotion,h=F.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const m=h.current,_=F.useContext(Q8);m&&!m.projection&&s&&(m.type==="html"||m.type==="svg")&&bq(h.current,n,s,_);const w=F.useRef(!1);F.useInsertionEffect(()=>{m&&w.current&&m.update(n,c)});const C=n[W8],M=F.useRef(!!C&&!window.MotionHandoffIsComplete?.(C)&&window.MotionHasOptimisedAnimation?.(C));return Yk(()=>{m&&(w.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),M.current&&m.animationState&&m.animationState.animateChanges())}),F.useEffect(()=>{m&&(!M.current&&m.animationState&&m.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(C)}),M.current=!1))}),m}function bq(t,e,n,r){const{layoutId:s,layout:o,drag:l,dragConstraints:c,layoutScroll:f,layoutRoot:h,layoutCrossfade:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Z8(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||c&&Xl(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:f,layoutRoot:h})}function Z8(t){if(t)return t.options.allowProjection!==!1?t.projection:Z8(t.parent)}function y0(t,{forwardMotionProps:e=!1}={},n,r){n&&YF(n);const s=jw(t)?gq:mq;function o(c,f){let h;const m={...F.useContext(Pw),...c,layoutId:Eq(c)},{isStatic:_}=m,w=JF(c),C=s(c,_);if(!_&&fw){Tq();const M=Sq(m);h=M.MeasureLayout,w.visualElement=wq(t,C,m,r,M.ProjectionNode)}return O.jsxs(Im.Provider,{value:w,children:[h&&w.visualElement?O.jsx(h,{visualElement:w.visualElement,...m}):null,fq(t,c,vq(C,w.visualElement,f),C,_,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=F.forwardRef(o);return l[yq]=t,l}function Eq({layoutId:t}){const e=F.useContext(cw).id;return e&&t!==void 0?e+"-"+t:t}function Tq(t,e){F.useContext(U8).strict}function Sq(t){const{drag:e,layout:n}=bu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Aq(t,e){if(typeof Proxy>"u")return y0;const n=new Map,r=(o,l)=>y0(o,l,t,e),s=(o,l)=>r(o,l);return new Proxy(s,{get:(o,l)=>l==="create"?r:(n.has(l)||n.set(l,y0(l,void 0,t,e)),n.get(l))})}function J8({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function xq({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Cq(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function v0(t){return t===void 0||t===1}function Nv({scale:t,scaleX:e,scaleY:n}){return!v0(t)||!v0(e)||!v0(n)}function go(t){return Nv(t)||eI(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function eI(t){return Ix(t.x)||Ix(t.y)}function Ix(t){return t&&t!=="0%"}function Kp(t,e,n){const r=t-n,s=e*r;return n+s}function Nx(t,e,n,r,s){return s!==void 0&&(t=Kp(t,s,r)),Kp(t,n,r)+e}function Dv(t,e=0,n=1,r,s){t.min=Nx(t.min,e,n,r,s),t.max=Nx(t.max,e,n,r,s)}function tI(t,{x:e,y:n}){Dv(t.x,e.translate,e.scale,e.originPoint),Dv(t.y,n.translate,n.scale,n.originPoint)}const Dx=.999999999999,Mx=1.0000000000001;function Rq(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,l;for(let c=0;c<s;c++){o=n[c],l=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ql(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,tI(t,l)),r&&go(o.latestValues)&&Ql(t,o.latestValues))}e.x<Mx&&e.x>Dx&&(e.x=1),e.y<Mx&&e.y>Dx&&(e.y=1)}function Wl(t,e){t.min=t.min+e,t.max=t.max+e}function Px(t,e,n,r,s=.5){const o=xt(t.min,t.max,s);Dv(t,e,n,o,r)}function Ql(t,e){Px(t.x,e.x,e.scaleX,e.scale,e.originX),Px(t.y,e.y,e.scaleY,e.scale,e.originY)}function nI(t,e){return J8(Cq(t.getBoundingClientRect(),e))}function kq(t,e,n){const r=nI(t,n),{scroll:s}=e;return s&&(Wl(r.x,s.offset.x),Wl(r.y,s.offset.y)),r}const Ox=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zl=()=>({x:Ox(),y:Ox()}),Vx=()=>({min:0,max:0}),Ut=()=>({x:Vx(),y:Vx()}),Mv={current:null},rI={current:!1};function Iq(){if(rI.current=!0,!!fw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Mv.current=t.matches;t.addEventListener("change",e),e()}else Mv.current=!1}const Nq=new WeakMap;function Dq(t,e,n){for(const r in e){const s=e[r],o=n[r];if(Nn(s))t.addValue(r,s);else if(Nn(o))t.addValue(r,wu(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=t.getStaticValue(r);t.addValue(r,wu(l!==void 0?l:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Lx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Mq{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=kw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=Jn.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,Et.render(this.render,!1,!0))};const{latestValues:f,renderState:h}=l;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=Dm(n),this.isVariantNode=H8(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,..._}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in _){const C=_[w];f[w]!==void 0&&Nn(C)&&C.set(f[w],!1)}}mount(e){this.current=e,Nq.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),rI.current||Iq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Mv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ca(this.notifyUpdate),Ca(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Du.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Et.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in bu){const n=bu[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ut()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Lx.length;r++){const s=Lx[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=Dq(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=wu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Xk(r)||Qk(r))?r=parseFloat(r):!$F(r)&&Ra.test(n)&&(r=D8(e,n)),this.setBaseTarget(e,Nn(r)?r.get():r)),Nn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Uw(this.props,n,this.presenceContext?.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Nn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new yw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Dw.render(this.render)}}class iI extends Mq{constructor(){super(...arguments),this.KeyframeResolver=NF}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Nn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function sI(t,{style:e,vars:n},r,s){const o=t.style;let l;for(l in e)o[l]=e[l];s?.applyProjectionStyles(o,r);for(l in n)o.setProperty(l,n[l])}function Pq(t){return window.getComputedStyle(t)}class Oq extends iI{constructor(){super(...arguments),this.type="html",this.renderInstance=sI}readValueFromInstance(e,n){if(Du.has(n))return this.projection?.isProjecting?Av(n):W$(e,n);{const r=Pq(e),s=(ww(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return nI(e,n)}build(e,n,r){Lw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Bw(e,n,r)}}const aI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Vq(t,e,n,r){sI(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(aI.has(s)?s:Hw(s),e.attrs[s])}class Lq extends iI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ut}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Du.has(n)){const r=N8(n);return r&&r.default||0}return n=aI.has(n)?n:Hw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return X8(e,n,r)}build(e,n,r){q8(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){Vq(e,n,r,s)}mount(e){this.isSVGTag=K8(e.tagName),super.mount(e)}}const zq=(t,e)=>jw(t)?new Lq(e):new Oq(e,{allowProjection:t!==F.Fragment});function zd(t,e,n){const r=t.getProps();return Uw(r,e,n!==void 0?n:r.custom,t)}const Pv=t=>Array.isArray(t);function jq(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,wu(n))}function Uq(t){return Pv(t)?t[t.length-1]||0:t}function Bq(t,e){const n=zd(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const l in o){const c=Uq(o[l]);jq(t,l,c)}}function Hq(t){return!!(Nn(t)&&t.add)}function Ov(t,e){const n=t.getValue("willChange");if(Hq(n))return n.add(e);if(!n&&xs.WillChange){const r=new xs.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function oI(t){return t.props[W8]}const $q=t=>t!==null;function Fq(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter($q),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[o]}const qq={type:"spring",stiffness:500,damping:25,restSpeed:10},Gq=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Kq={type:"keyframes",duration:.8},Yq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Xq=(t,{keyframes:e})=>e.length>2?Kq:Du.has(t)?t.startsWith("scale")?Gq(e[1]):qq:Yq;function Wq({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:c,from:f,elapsed:h,...m}){return!!Object.keys(m).length}const $w=(t,e,n,r={},s,o)=>l=>{const c=Iw(r,t)||{},f=c.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Li(f);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:w=>{e.set(w),c.onUpdate&&c.onUpdate(w)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:s};Wq(c)||Object.assign(m,Xq(t,m)),m.duration&&(m.duration=Li(m.duration)),m.repeatDelay&&(m.repeatDelay=Li(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let _=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(_=!0)),(xs.instantAnimations||xs.skipAnimations)&&(_=!0,m.duration=0,m.delay=0),m.allowFlatten=!c.type&&!c.ease,_&&!o&&e.get()!==void 0){const w=Fq(m.keyframes,c);if(w!==void 0){Et.update(()=>{m.onUpdate(w),m.onComplete()});return}}return c.isSync?new Rw(m):new _F(m)};function Qq({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function lI(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:l,...c}=e;r&&(o=r);const f=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const m in c){const _=t.getValue(m,t.latestValues[m]??null),w=c[m];if(w===void 0||h&&Qq(h,m))continue;const C={delay:n,...Iw(o||{},m)},M=_.get();if(M!==void 0&&!_.isAnimating&&!Array.isArray(w)&&w===M&&!C.velocity)continue;let P=!1;if(window.MotionHandoffAnimation){const j=oI(t);if(j){const H=window.MotionHandoffAnimation(j,m,Et);H!==null&&(C.startTime=H,P=!0)}}Ov(t,m),_.start($w(m,_,w,t.shouldReduceMotion&&R8.has(m)?{type:!1}:C,t,P));const L=_.animation;L&&f.push(L)}return l&&Promise.all(f).then(()=>{Et.update(()=>{l&&Bq(t,l)})}),f}function Vv(t,e,n={}){const r=zd(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(lI(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:_}=s;return Zq(t,e,f,h,m,_,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[f,h]=c==="beforeChildren"?[o,l]:[l,o];return f().then(()=>h())}else return Promise.all([o(),l(n.delay)])}function Zq(t,e,n=0,r=0,s=0,o=1,l){const c=[],f=t.variantChildren.size,h=(f-1)*s,m=typeof r=="function",_=m?w=>r(w,f):o===1?(w=0)=>w*s:(w=0)=>h-w*s;return Array.from(t.variantChildren).sort(Jq).forEach((w,C)=>{w.notify("AnimationStart",e),c.push(Vv(w,e,{...l,delay:n+(m?0:r)+_(C)}).then(()=>w.notify("AnimationComplete",e)))}),Promise.all(c)}function Jq(t,e){return t.sortNodePosition(e)}function eG(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>Vv(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=Vv(t,e,n);else{const s=typeof e=="function"?zd(t,e,n.custom):e;r=Promise.all(lI(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function uI(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const tG=Vw.length;function cI(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?cI(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<tG;n++){const r=Vw[n],s=t.props[r];(Vd(s)||s===!1)&&(e[r]=s)}return e}const nG=[...Ow].reverse(),rG=Ow.length;function iG(t){return e=>Promise.all(e.map(({animation:n,options:r})=>eG(t,n,r)))}function sG(t){let e=iG(t),n=zx(),r=!0;const s=f=>(h,m)=>{const _=zd(t,m,f==="exit"?t.presenceContext?.custom:void 0);if(_){const{transition:w,transitionEnd:C,...M}=_;h={...h,...M,...C}}return h};function o(f){e=f(t)}function l(f){const{props:h}=t,m=cI(t.parent)||{},_=[],w=new Set;let C={},M=1/0;for(let L=0;L<rG;L++){const j=nG[L],H=n[j],K=h[j]!==void 0?h[j]:m[j],y=Vd(K),E=j===f?H.isActive:null;E===!1&&(M=L);let b=K===m[j]&&K!==h[j]&&y;if(b&&r&&t.manuallyAnimateOnMount&&(b=!1),H.protectedKeys={...C},!H.isActive&&E===null||!K&&!H.prevProp||Nm(K)||typeof K=="boolean")continue;const T=aG(H.prevProp,K);let A=T||j===f&&H.isActive&&!b&&y||L>M&&y,R=!1;const k=Array.isArray(K)?K:[K];let D=k.reduce(s(j),{});E===!1&&(D={});const{prevResolvedValues:$={}}=H,V={...$,...D},U=B=>{A=!0,w.has(B)&&(R=!0,w.delete(B)),H.needsAnimating[B]=!0;const G=t.getValue(B);G&&(G.liveStyle=!1)};for(const B in V){const G=D[B],X=$[B];if(C.hasOwnProperty(B))continue;let z=!1;Pv(G)&&Pv(X)?z=!uI(G,X):z=G!==X,z?G!=null?U(B):w.add(B):G!==void 0&&w.has(B)?U(B):H.protectedKeys[B]=!0}H.prevProp=K,H.prevResolvedValues=D,H.isActive&&(C={...C,...D}),r&&t.blockInitialAnimation&&(A=!1),A&&(!(b&&T)||R)&&_.push(...k.map(B=>({animation:B,options:{type:j}})))}if(w.size){const L={};if(typeof h.initial!="boolean"){const j=zd(t,Array.isArray(h.initial)?h.initial[0]:h.initial);j&&j.transition&&(L.transition=j.transition)}w.forEach(j=>{const H=t.getBaseTarget(j),K=t.getValue(j);K&&(K.liveStyle=!0),L[j]=H??null}),_.push({animation:L})}let P=!!_.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(P=!1),r=!1,P?e(_):Promise.resolve()}function c(f,h){if(n[f].isActive===h)return Promise.resolve();t.variantChildren?.forEach(_=>_.animationState?.setActive(f,h)),n[f].isActive=h;const m=l(f);for(const _ in n)n[_].protectedKeys={};return m}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=zx(),r=!0}}}function aG(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!uI(e,t):!1}function ho(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zx(){return{animate:ho(!0),whileInView:ho(),whileHover:ho(),whileTap:ho(),whileDrag:ho(),whileFocus:ho(),exit:ho()}}class Ma{constructor(e){this.isMounted=!1,this.node=e}update(){}}class oG extends Ma{constructor(e){super(e),e.animationState||(e.animationState=sG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Nm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let lG=0;class uG extends Ma{constructor(){super(...arguments),this.id=lG++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const cG={animation:{Feature:oG},exit:{Feature:uG}};function jd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function of(t){return{point:{x:t.pageX,y:t.pageY}}}const dG=t=>e=>Mw(e)&&t(e,of(e));function ud(t,e,n,r){return jd(t,e,dG(n),r)}const dI=1e-4,fG=1-dI,hG=1+dI,fI=.01,pG=0-fI,mG=0+fI;function $n(t){return t.max-t.min}function gG(t,e,n){return Math.abs(t-e)<=n}function jx(t,e,n,r=.5){t.origin=r,t.originPoint=xt(e.min,e.max,t.origin),t.scale=$n(n)/$n(e),t.translate=xt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=fG&&t.scale<=hG||isNaN(t.scale))&&(t.scale=1),(t.translate>=pG&&t.translate<=mG||isNaN(t.translate))&&(t.translate=0)}function cd(t,e,n,r){jx(t.x,e.x,n.x,r?r.originX:void 0),jx(t.y,e.y,n.y,r?r.originY:void 0)}function Ux(t,e,n){t.min=n.min+e.min,t.max=t.min+$n(e)}function yG(t,e,n){Ux(t.x,e.x,n.x),Ux(t.y,e.y,n.y)}function Bx(t,e,n){t.min=e.min-n.min,t.max=t.min+$n(e)}function dd(t,e,n){Bx(t.x,e.x,n.x),Bx(t.y,e.y,n.y)}function jr(t){return[t("x"),t("y")]}const hI=({current:t})=>t?t.ownerDocument.defaultView:null,Hx=(t,e)=>Math.abs(t-e);function vG(t,e){const n=Hx(t.x,e.x),r=Hx(t.y,e.y);return Math.sqrt(n**2+r**2)}class pI{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=w0(this.lastMoveEventInfo,this.history),C=this.startEvent!==null,M=vG(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!C&&!M)return;const{point:P}=w,{timestamp:L}=bn;this.history.push({...P,timestamp:L});const{onStart:j,onMove:H}=this.handlers;C||(j&&j(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),H&&H(this.lastMoveEvent,w)},this.handlePointerMove=(w,C)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=_0(C,this.transformPagePoint),Et.update(this.updatePoint,!0)},this.handlePointerUp=(w,C)=>{this.end();const{onEnd:M,onSessionEnd:P,resumeAnimation:L}=this.handlers;if(this.dragSnapToOrigin&&L&&L(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=w0(w.type==="pointercancel"?this.lastMoveEventInfo:_0(C,this.transformPagePoint),this.history);this.startEvent&&M&&M(w,j),P&&P(w,j)},!Mw(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=s||window;const c=of(e),f=_0(c,this.transformPagePoint),{point:h}=f,{timestamp:m}=bn;this.history=[{...h,timestamp:m}];const{onSessionStart:_}=n;_&&_(e,w0(f,this.history)),this.removeListeners=rf(ud(this.contextWindow,"pointermove",this.handlePointerMove),ud(this.contextWindow,"pointerup",this.handlePointerUp),ud(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ca(this.updatePoint)}}function _0(t,e){return e?{point:e(t.point)}:t}function $x(t,e){return{x:t.x-e.x,y:t.y-e.y}}function w0({point:t},e){return{point:t,delta:$x(t,mI(e)),offset:$x(t,_G(e)),velocity:wG(e,.1)}}function _G(t){return t[0]}function mI(t){return t[t.length-1]}function wG(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=mI(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Li(e)));)n--;if(!r)return{x:0,y:0};const o=zi(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function bG(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?xt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?xt(n,t,r.max):Math.min(t,n)),t}function Fx(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function EG(t,{top:e,left:n,bottom:r,right:s}){return{x:Fx(t.x,n,s),y:Fx(t.y,e,r)}}function qx(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function TG(t,e){return{x:qx(t.x,e.x),y:qx(t.y,e.y)}}function SG(t,e){let n=.5;const r=$n(t),s=$n(e);return s>r?n=Md(e.min,e.max-r,t.min):r>s&&(n=Md(t.min,t.max-s,e.min)),As(0,1,n)}function AG(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Lv=.35;function xG(t=Lv){return t===!1?t=0:t===!0&&(t=Lv),{x:Gx(t,"left","right"),y:Gx(t,"top","bottom")}}function Gx(t,e,n){return{min:Kx(t,e),max:Kx(t,n)}}function Kx(t,e){return typeof t=="number"?t:t[e]||0}const CG=new WeakMap;class RG{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ut(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=_=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(of(_).point)},l=(_,w)=>{const{drag:C,dragPropagation:M,onDragStart:P}=this.getProps();if(C&&!M&&(this.openDragLock&&this.openDragLock(),this.openDragLock=OF(C),!this.openDragLock))return;this.latestPointerEvent=_,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),jr(j=>{let H=this.getAxisMotionValue(j).get()||0;if(ji.test(H)){const{projection:K}=this.visualElement;if(K&&K.layout){const y=K.layout.layoutBox[j];y&&(H=$n(y)*(parseFloat(H)/100))}}this.originPoint[j]=H}),P&&Et.postRender(()=>P(_,w)),Ov(this.visualElement,"transform");const{animationState:L}=this.visualElement;L&&L.setActive("whileDrag",!0)},c=(_,w)=>{this.latestPointerEvent=_,this.latestPanInfo=w;const{dragPropagation:C,dragDirectionLock:M,onDirectionLock:P,onDrag:L}=this.getProps();if(!C&&!this.openDragLock)return;const{offset:j}=w;if(M&&this.currentDirection===null){this.currentDirection=kG(j),this.currentDirection!==null&&P&&P(this.currentDirection);return}this.updateAxis("x",w.point,j),this.updateAxis("y",w.point,j),this.visualElement.render(),L&&L(_,w)},f=(_,w)=>{this.latestPointerEvent=_,this.latestPanInfo=w,this.stop(_,w),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>jr(_=>this.getAnimationState(_)==="paused"&&this.getAxisMotionValue(_).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new pI(e,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:f,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:r,contextWindow:hI(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!r)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&Et.postRender(()=>c(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Fh(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=bG(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Xl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=EG(r.layoutBox,e):this.constraints=!1,this.elastic=xG(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&jr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=AG(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Xl(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=kq(r,s.root,this.visualElement.getTransformPagePoint());let l=TG(s.layout.layoutBox,o);if(n){const c=n(xq(l));this.hasMutatedConstraints=!!c,c&&(l=J8(c))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},h=jr(m=>{if(!Fh(m,n,this.currentDirection))return;let _=f&&f[m]||{};l&&(_={min:0,max:0});const w=s?200:1e6,C=s?40:1e7,M={type:"inertia",velocity:r?e[m]:0,bounceStiffness:w,bounceDamping:C,timeConstant:750,restDelta:1,restSpeed:10,...o,..._};return this.startAxisValueAnimation(m,M)});return Promise.all(h).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Ov(this.visualElement,e),r.start($w(e,r,0,n,this.visualElement,!1))}stopAnimation(){jr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){jr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){jr(n=>{const{drag:r}=this.getProps();if(!Fh(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:l,max:c}=s.layout.layoutBox[n];o.set(e[n]-xt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Xl(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};jr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const f=c.get();s[l]=SG({min:f,max:f},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),jr(l=>{if(!Fh(l,e,null))return;const c=this.getAxisMotionValue(l),{min:f,max:h}=this.constraints[l];c.set(xt(f,h,s[l]))})}addListeners(){if(!this.visualElement.current)return;CG.set(this.visualElement,this);const e=this.visualElement.current,n=ud(e,"pointerdown",f=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();Xl(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Et.read(r);const l=jd(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h})=>{this.isDragging&&h&&(jr(m=>{const _=this.getAxisMotionValue(m);_&&(this.originPoint[m]+=f[m].translate,_.set(_.get()+f[m].translate))}),this.visualElement.render())});return()=>{l(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=Lv,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function Fh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function kG(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class IG extends Ma{constructor(e){super(e),this.removeGroupControls=Hr,this.removeListeners=Hr,this.controls=new RG(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Hr}unmount(){this.removeGroupControls(),this.removeListeners()}}const Yx=t=>(e,n)=>{t&&Et.postRender(()=>t(e,n))};class NG extends Ma{constructor(){super(...arguments),this.removePointerDownListener=Hr}onPointerDown(e){this.session=new pI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:hI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Yx(e),onStart:Yx(n),onMove:r,onEnd:(o,l)=>{delete this.session,s&&Et.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=ud(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const dp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Xx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const $c={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ve.test(t))t=parseFloat(t);else return t;const n=Xx(t,e.target.x),r=Xx(t,e.target.y);return`${n}% ${r}%`}},DG={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ra.parse(t);if(s.length>5)return r;const o=Ra.createTransformer(t),l=typeof s[0]!="number"?1:0,c=n.x.scale*e.x,f=n.y.scale*e.y;s[0+l]/=c,s[1+l]/=f;const h=xt(c,f,.5);return typeof s[2+l]=="number"&&(s[2+l]/=h),typeof s[3+l]=="number"&&(s[3+l]/=h),o(s)}};let Wx=!1;class MG extends F.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;eq(PG),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),Wx&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),dp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,{projection:l}=r;return l&&(l.isPresent=o,Wx=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Et.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Dw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function gI(t){const[e,n]=j8(),r=F.useContext(cw);return O.jsx(MG,{...t,layoutGroup:r,switchLayoutGroup:F.useContext(Q8),isPresent:e,safeToRemove:n})}const PG={borderRadius:{...$c,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$c,borderTopRightRadius:$c,borderBottomLeftRadius:$c,borderBottomRightRadius:$c,boxShadow:DG};function OG(t,e,n){const r=Nn(t)?t:wu(t);return r.start($w("",r,e,n)),r.animation}const VG=(t,e)=>t.depth-e.depth;class LG{constructor(){this.children=[],this.isDirty=!1}add(e){hw(this.children,e),this.isDirty=!0}remove(e){pw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(VG),this.isDirty=!1,this.children.forEach(e)}}function zG(t,e){const n=Jn.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(Ca(r),t(o-e))};return Et.setup(r,!0),()=>Ca(r)}const yI=["TopLeft","TopRight","BottomLeft","BottomRight"],jG=yI.length,Qx=t=>typeof t=="string"?parseFloat(t):t,Zx=t=>typeof t=="number"||Ve.test(t);function UG(t,e,n,r,s,o){s?(t.opacity=xt(0,n.opacity??1,BG(r)),t.opacityExit=xt(e.opacity??1,0,HG(r))):o&&(t.opacity=xt(e.opacity??1,n.opacity??1,r));for(let l=0;l<jG;l++){const c=`border${yI[l]}Radius`;let f=Jx(e,c),h=Jx(n,c);if(f===void 0&&h===void 0)continue;f||(f=0),h||(h=0),f===0||h===0||Zx(f)===Zx(h)?(t[c]=Math.max(xt(Qx(f),Qx(h),r),0),(ji.test(h)||ji.test(f))&&(t[c]+="%")):t[c]=h}(e.rotate||n.rotate)&&(t.rotate=xt(e.rotate||0,n.rotate||0,r))}function Jx(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const BG=vI(0,.5,s8),HG=vI(.5,.95,Hr);function vI(t,e,n){return r=>r<t?0:r>e?1:n(Md(t,e,r))}function e2(t,e){t.min=e.min,t.max=e.max}function zr(t,e){e2(t.x,e.x),e2(t.y,e.y)}function t2(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function n2(t,e,n,r,s){return t-=e,t=Kp(t,1/n,r),s!==void 0&&(t=Kp(t,1/s,r)),t}function $G(t,e=0,n=1,r=.5,s,o=t,l=t){if(ji.test(e)&&(e=parseFloat(e),e=xt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=xt(o.min,o.max,r);t===o&&(c-=e),t.min=n2(t.min,e,n,c,s),t.max=n2(t.max,e,n,c,s)}function r2(t,e,[n,r,s],o,l){$G(t,e[n],e[r],e[s],e.scale,o,l)}const FG=["x","scaleX","originX"],qG=["y","scaleY","originY"];function i2(t,e,n,r){r2(t.x,e,FG,n?n.x:void 0,r?r.x:void 0),r2(t.y,e,qG,n?n.y:void 0,r?r.y:void 0)}function s2(t){return t.translate===0&&t.scale===1}function _I(t){return s2(t.x)&&s2(t.y)}function a2(t,e){return t.min===e.min&&t.max===e.max}function GG(t,e){return a2(t.x,e.x)&&a2(t.y,e.y)}function o2(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function wI(t,e){return o2(t.x,e.x)&&o2(t.y,e.y)}function l2(t){return $n(t.x)/$n(t.y)}function u2(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class KG{constructor(){this.members=[]}add(e){hw(this.members,e),e.scheduleRender()}remove(e){if(pw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function YG(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,l=n?.z||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:m,rotateX:_,rotateY:w,skewX:C,skewY:M}=n;h&&(r=`perspective(${h}px) ${r}`),m&&(r+=`rotate(${m}deg) `),_&&(r+=`rotateX(${_}deg) `),w&&(r+=`rotateY(${w}deg) `),C&&(r+=`skewX(${C}deg) `),M&&(r+=`skewY(${M}deg) `)}const c=t.x.scale*e.x,f=t.y.scale*e.y;return(c!==1||f!==1)&&(r+=`scale(${c}, ${f})`),r||"none"}const b0=["","X","Y","Z"],XG=1e3;let WG=0;function E0(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function bI(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=oI(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Et,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&bI(r)}function EI({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},c=e?.()){this.id=WG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(JG),this.nodes.forEach(rK),this.nodes.forEach(iK),this.nodes.forEach(eK)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new LG)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new yw),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const f=this.eventHandlers.get(l);f&&f.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=z8(l)&&!BF(l),this.instance=l;const{layoutId:c,layout:f,visualElement:h}=this.options;if(h&&!h.current&&h.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||c)&&(this.isLayoutDirty=!0),t){let m,_=0;const w=()=>this.root.updateBlockedByResize=!1;Et.read(()=>{_=window.innerWidth}),t(l,()=>{const C=window.innerWidth;C!==_&&(_=C,this.root.updateBlockedByResize=!0,m&&m(),m=zG(w,250),dp.hasAnimatedSinceResize&&(dp.hasAnimatedSinceResize=!1,this.nodes.forEach(f2)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||f)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:_,hasRelativeLayoutChanged:w,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||h.getDefaultTransition()||uK,{onLayoutAnimationStart:P,onLayoutAnimationComplete:L}=h.getProps(),j=!this.targetLayout||!wI(this.targetLayout,C),H=!_&&w;if(this.options.layoutRoot||this.resumeFrom||H||_&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const K={...Iw(M,"layout"),onPlay:P,onComplete:L};(h.shouldReduceMotion||this.options.layoutRoot)&&(K.delay=0,K.type=!1),this.startAnimation(K),this.setAnimationOrigin(m,H)}else _||f2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ca(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sK),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const _=this.path[m];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(c2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(d2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nK),this.nodes.forEach(QG),this.nodes.forEach(ZG)):this.nodes.forEach(d2),this.clearAllSnapshots();const c=Jn.now();bn.delta=As(0,1e3/60,c-bn.timestamp),bn.timestamp=c,bn.isProcessing=!0,d0.update.process(bn),d0.preRender.process(bn),d0.render.process(bn),bn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Dw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tK),this.sharedNodes.forEach(aK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!$n(this.snapshot.measuredBox.x)&&!$n(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ut(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!_I(this.projectionDelta),f=this.getTransformTemplate(),h=f?f(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;l&&this.instance&&(c||go(this.latestValues)||m)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return l&&(f=this.removeTransform(f)),cK(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Ut();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(dK))){const{scroll:h}=this.root;h&&(Wl(c.x,h.offset.x),Wl(c.y,h.offset.y))}return c}removeElementScroll(l){const c=Ut();if(zr(c,l),this.scroll?.wasRoot)return c;for(let f=0;f<this.path.length;f++){const h=this.path[f],{scroll:m,options:_}=h;h!==this.root&&m&&_.layoutScroll&&(m.wasRoot&&zr(c,l),Wl(c.x,m.offset.x),Wl(c.y,m.offset.y))}return c}applyTransform(l,c=!1){const f=Ut();zr(f,l);for(let h=0;h<this.path.length;h++){const m=this.path[h];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Ql(f,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),go(m.latestValues)&&Ql(f,m.latestValues)}return go(this.latestValues)&&Ql(f,this.latestValues),f}removeTransform(l){const c=Ut();zr(c,l);for(let f=0;f<this.path.length;f++){const h=this.path[f];if(!h.instance||!go(h.latestValues))continue;Nv(h.latestValues)&&h.updateSnapshot();const m=Ut(),_=h.measurePageBox();zr(m,_),i2(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return go(this.latestValues)&&i2(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:_}=this.options;if(!(!this.layout||!(m||_))){if(this.resolvedRelativeTargetAt=bn.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ut(),this.relativeTargetOrigin=Ut(),dd(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),zr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ut(),this.targetWithTransforms=Ut()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):zr(this.target,this.layout.layoutBox),tI(this.target,this.targetDelta)):zr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ut(),this.relativeTargetOrigin=Ut(),dd(this.relativeTargetOrigin,this.target,w.target),zr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Nv(this.parent.latestValues)||eI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===bn.timestamp&&(f=!1),f)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;zr(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,w=this.treeScale.y;Rq(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Ut());const{target:C}=l;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(t2(this.prevProjectionDelta.x,this.projectionDelta.x),t2(this.prevProjectionDelta.y,this.projectionDelta.y)),cd(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==w||!u2(this.projectionDelta.x,this.prevProjectionDelta.x)||!u2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zl(),this.projectionDelta=Zl(),this.projectionDeltaWithTransform=Zl()}setAnimationOrigin(l,c=!1){const f=this.snapshot,h=f?f.latestValues:{},m={...this.latestValues},_=Zl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const w=Ut(),C=f?f.source:void 0,M=this.layout?this.layout.source:void 0,P=C!==M,L=this.getStack(),j=!L||L.members.length<=1,H=!!(P&&!j&&this.options.crossfade===!0&&!this.path.some(lK));this.animationProgress=0;let K;this.mixTargetDelta=y=>{const E=y/1e3;h2(_.x,l.x,E),h2(_.y,l.y,E),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(dd(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oK(this.relativeTarget,this.relativeTargetOrigin,w,E),K&&GG(this.relativeTarget,K)&&(this.isProjectionDirty=!1),K||(K=Ut()),zr(K,this.relativeTarget)),P&&(this.animationValues=m,UG(m,h,this.latestValues,E,H,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ca(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Et.update(()=>{dp.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=wu(0)),this.currentAnimation=OG(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(XG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:f,layout:h,latestValues:m}=l;if(!(!c||!f||!h)){if(this!==l&&this.layout&&h&&TI(this.options.animationType,this.layout.layoutBox,h.layoutBox)){f=this.target||Ut();const _=$n(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+_;const w=$n(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+w}zr(c,f),Ql(c,m),cd(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new KG),this.sharedNodes.get(l).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:f}={}){const h=this.getStack();h&&h.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const h={};f.z&&E0("z",l,h,this.animationValues);for(let m=0;m<b0.length;m++)E0(`rotate${b0[m]}`,l,h,this.animationValues),E0(`skew${b0[m]}`,l,h,this.animationValues);l.render();for(const m in h)l.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=cp(c?.pointerEvents)||"",l.transform=f?f(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=cp(c?.pointerEvents)||""),this.hasProjected&&!go(this.latestValues)&&(l.transform=f?f({},""):"none",this.hasProjected=!1);return}l.visibility="";const m=h.animationValues||h.latestValues;this.applyTransformsToTarget();let _=YG(this.projectionDeltaWithTransform,this.treeScale,m);f&&(_=f(m,_)),l.transform=_;const{x:w,y:C}=this.projectionDelta;l.transformOrigin=`${w.origin*100}% ${C.origin*100}% 0`,h.animationValues?l.opacity=h===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:l.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const M in Ld){if(m[M]===void 0)continue;const{correct:P,applyTo:L,isCSSVariable:j}=Ld[M],H=_==="none"?m[M]:P(m[M],h);if(L){const K=L.length;for(let y=0;y<K;y++)l[L[y]]=H}else j?this.options.visualElement.renderState.vars[M]=H:l[M]=H}this.options.layoutId&&(l.pointerEvents=h===this?cp(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(c2),this.root.sharedNodes.clear()}}}function QG(t){t.updateLayout()}function ZG(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?jr(m=>{const _=o?e.measuredBox[m]:e.layoutBox[m],w=$n(_);_.min=n[m].min,_.max=_.min+w}):TI(s,e.layoutBox,n)&&jr(m=>{const _=o?e.measuredBox[m]:e.layoutBox[m],w=$n(n[m]);_.max=_.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+w)});const l=Zl();cd(l,n,e.layoutBox);const c=Zl();o?cd(c,t.applyTransform(r,!0),e.measuredBox):cd(c,n,e.layoutBox);const f=!_I(l);let h=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:_,layout:w}=m;if(_&&w){const C=Ut();dd(C,e.layoutBox,_.layoutBox);const M=Ut();dd(M,n,w.layoutBox),wI(C,M)||(h=!0),m.options.layoutRoot&&(t.relativeTarget=M,t.relativeTargetOrigin=C,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function JG(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function eK(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function tK(t){t.clearSnapshot()}function c2(t){t.clearMeasurements()}function d2(t){t.isLayoutDirty=!1}function nK(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function f2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function rK(t){t.resolveTargetDelta()}function iK(t){t.calcProjection()}function sK(t){t.resetSkewAndRotation()}function aK(t){t.removeLeadSnapshot()}function h2(t,e,n){t.translate=xt(e.translate,0,n),t.scale=xt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function p2(t,e,n,r){t.min=xt(e.min,n.min,r),t.max=xt(e.max,n.max,r)}function oK(t,e,n,r){p2(t.x,e.x,n.x,r),p2(t.y,e.y,n.y,r)}function lK(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const uK={duration:.45,ease:[.4,0,.1,1]},m2=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),g2=m2("applewebkit/")&&!m2("chrome/")?Math.round:Hr;function y2(t){t.min=g2(t.min),t.max=g2(t.max)}function cK(t){y2(t.x),y2(t.y)}function TI(t,e,n){return t==="position"||t==="preserve-aspect"&&!gG(l2(e),l2(n),.2)}function dK(t){return t!==t.root&&t.scroll?.wasRoot}const fK=EI({attachResizeListener:(t,e)=>jd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),T0={current:void 0},SI=EI({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!T0.current){const t=new fK({});t.mount(window),t.setOptions({layoutScroll:!0}),T0.current=t}return T0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),hK={pan:{Feature:NG},drag:{Feature:IG,ProjectionNode:SI,MeasureLayout:gI}};function v2(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&Et.postRender(()=>o(e,of(e)))}class pK extends Ma{mount(){const{current:e}=this.node;e&&(this.unmount=VF(e,(n,r)=>(v2(this.node,r,"Start"),s=>v2(this.node,s,"End"))))}unmount(){}}class mK extends Ma{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rf(jd(this.node.current,"focus",()=>this.onFocus()),jd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function _2(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&Et.postRender(()=>o(e,of(e)))}class gK extends Ma{mount(){const{current:e}=this.node;e&&(this.unmount=UF(e,(n,r)=>(_2(this.node,r,"Start"),(s,{success:o})=>_2(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const zv=new WeakMap,S0=new WeakMap,yK=t=>{const e=zv.get(t.target);e&&e(t)},vK=t=>{t.forEach(yK)};function _K({root:t,...e}){const n=t||document;S0.has(n)||S0.set(n,{});const r=S0.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(vK,{root:t,...e})),r[s]}function wK(t,e,n){const r=_K(e);return zv.set(t,n),r.observe(t),()=>{zv.delete(t),r.unobserve(t)}}const bK={some:0,all:1};class EK extends Ma{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:bK[s]},c=f=>{const{isIntersecting:h}=f;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:_}=this.node.getProps(),w=h?m:_;w&&w(f)};return wK(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(TK(e,n))&&this.startObserver()}unmount(){}}function TK({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const SK={inView:{Feature:EK},tap:{Feature:gK},focus:{Feature:mK},hover:{Feature:pK}},AK={layout:{ProjectionNode:SI,MeasureLayout:gI}},xK={...cG,...SK,...hK,...AK},A0=Aq(xK,zq),wr={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},hr={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function CK(){const[t,e]=F.useState(""),[n,r]=F.useState(""),[s,o]=F.useState(!1),[l,c]=F.useState(!1),[f,h]=F.useState(!1),[m,_]=F.useState(""),w=async P=>{P.preventDefault(),h(!0),_("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(hr.INVALID_EMAIL);if(n.length<6)throw new Error(hr.WEAK_PASSWORD);const j=s?dU:fU,{user:H}=await j(lw,t,n);console.info("Auth success  uid:",H.uid)}catch(L){_(C(L))}finally{h(!1)}},C=P=>{switch(P.code){case"auth/email-already-in-use":return hr.EMAIL_IN_USE;case"auth/invalid-email":return hr.INVALID_EMAIL;case"auth/weak-password":return hr.WEAK_PASSWORD;case"auth/user-not-found":return hr.USER_NOT_FOUND;case"auth/wrong-password":return hr.WRONG_PASSWORD;case"auth/too-many-requests":return hr.TOO_MANY_REQUESTS;case"auth/user-disabled":return"This account has been disabled. Please contact support.";default:return P.message||"Authentication error"}},M="w-full px-4 py-3 rounded-lg border bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 transition";return O.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/40 dark:bg-gray-950/60 backdrop-blur-sm p-4",children:O.jsxs(A0.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.25},className:"w-full max-w-md rounded-3xl shadow-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 overflow-hidden",children:[O.jsxs("div",{className:"px-8 pt-8 pb-4 text-center",children:[O.jsx(xx,{mode:"wait",children:O.jsx(A0.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.25},className:"text-3xl font-semibold text-gray-900 dark:text-gray-100",children:s?"Create an account":"Welcome back"},s?"signup-header":"signin-header")}),O.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:s?"Start your AIpowered journey.":"Sign in to continue."})]}),O.jsxs("form",{onSubmit:w,className:"px-8 pb-8 space-y-6",children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),O.jsxs("div",{className:"relative",children:[O.jsx(LH,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),O.jsx("input",{id:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:P=>e(P.target.value),placeholder:"you@example.com",className:`${M} pl-11`})]})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),O.jsxs("div",{className:"relative",children:[O.jsx(qH,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),O.jsx("input",{id:"password",type:l?"text":"password",autoComplete:s?"new-password":"current-password",required:!0,value:n,onChange:P=>r(P.target.value),placeholder:"",className:`${M} pl-11 pr-11`}),O.jsx("button",{type:"button",onClick:()=>c(P=>!P),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300","aria-label":l?"Hide password":"Show password",children:l?O.jsx(BH,{className:"h-5 w-5"}):O.jsx($H,{className:"h-5 w-5"})})]})]}),O.jsx(xx,{children:m&&O.jsxs(A0.div,{initial:{y:-6,opacity:0},animate:{y:0,opacity:1},exit:{y:-6,opacity:0},className:"flex items-start gap-3 rounded-lg border border-red-300 dark:border-red-800 bg-red-50 dark:bg-red-900/30 px-4 py-3 text-sm text-red-700 dark:text-red-300",role:"alert",children:[O.jsx(jH,{className:"h-5 w-5 flex-shrink-0"}),O.jsx("span",{children:m})]},"error")}),O.jsxs("button",{type:"submit",disabled:f,className:"inline-flex w-full items-center justify-center gap-2 rounded-lg bg-indigo-600 px-4 py-3 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-indigo-500 dark:hover:bg-indigo-400",children:[f?O.jsxs("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[O.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),O.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}):s?O.jsx(KH,{className:"h-5 w-5"}):O.jsx(OH,{className:"h-5 w-5"}),O.jsx("span",{children:f?s?"Creating account":"Signing in":s?"Sign Up":"Sign In"})]})]}),O.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-8 py-4 text-center",children:[O.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s?"Already have an account?":"New to TinkFlow?"}),O.jsx("button",{onClick:()=>o(P=>!P),type:"button",className:"mt-2 text-sm font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none dark:text-indigo-400 dark:hover:text-indigo-300",children:s?"Sign In":"Create an account"})]})]})})}function RK({show:t,onHide:e,onConfirm:n,isCreating:r=!1}){const[s,o]=F.useState(""),[l,c]=F.useState(!0),f=w=>{const C=w.target.value;o(C),c(C.trim().length>0&&C.trim().length<=50)},h=w=>{w.preventDefault();const C=s.trim();C.length>0&&C.length<=50&&(n(C),o(""),c(!0))},m=()=>{o(""),c(!0),e()},_=w=>{w.key==="Enter"&&h(w)};return t?O.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:O.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-xl shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[O.jsxs("div",{className:"flex justify-between items-center mb-6",children:[O.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),O.jsx("button",{onClick:m,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-gray-700/50 dark:bg-gray-800/50 hover:bg-gray-600/50 dark:hover:bg-gray-700/50
                                 border border-gray-600 dark:border-gray-700 rounded-lg w-8 h-8 flex items-center justify-center
                                 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/20`,"aria-label":"Close",children:""})]}),O.jsxs("form",{onSubmit:h,className:"space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),O.jsx("input",{type:"text",value:s,onChange:f,onKeyDown:_,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-500 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40 
                                       transition-all duration-200 font-medium
                                       ${l?"border-gray-600/50 dark:border-gray-700/50 focus:border-blue-500/60 dark:focus:border-blue-400/60":"border-red-500/60 dark:border-red-500/60 focus:border-red-500/60 dark:focus:border-red-500/60"}`}),!l&&O.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-2",children:"Board name must be between 1 and 50 characters long."}),O.jsxs("p",{className:`text-xs mt-1 ${s.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[s.length,"/50 characters"]})]}),O.jsxs("div",{className:"flex gap-3 pt-4",children:[O.jsx("button",{type:"button",onClick:m,disabled:r,className:`flex-1 px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border border-gray-600/50 dark:border-gray-700/50
                                     text-gray-300 dark:text-gray-300 rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-600/60 dark:hover:bg-gray-700/60 hover:border-gray-500/60 dark:hover:border-gray-600/60
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),O.jsx("button",{type:"submit",disabled:!l||s.trim().length===0||r,className:`flex-1 px-4 py-3 bg-blue-600/80 dark:bg-blue-500/80 border border-blue-500/50 dark:border-blue-400/50
                                     text-white rounded-lg font-medium transition-all duration-200 
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-500/90 dark:hover:bg-blue-400/90 hover:border-blue-400/60 dark:hover:border-blue-300/60
                                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40`,children:r?"Creating...":"Create Board"})]})]})]})}):null}function kK({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:s,onSignOut:o,isLoading:l}){const[c,f]=F.useState(!1),[h,m]=F.useState(!1),[_,w]=F.useState(null),C=async j=>{try{f(!0),await r(j),m(!1)}catch(H){console.error("Error in sidebar create board:",H)}finally{f(!1)}},M=()=>{m(!0)},P=()=>{m(!1)},L=(j,H)=>{j.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&s(H)};return O.jsxs(O.Fragment,{children:[O.jsx("div",{className:"left-0 top-0 w-[100%] h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:O.jsxs("div",{className:"flex flex-col h-full",children:[O.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50",children:[O.jsx("h2",{className:"m-0 mb-3 text-lg font-semibold text-gray-900 dark:text-gray-100 tracking-tight",children:"TinkFlow Boards"}),O.jsx("button",{onClick:M,disabled:l||c,className:`w-full bg-blue-600 dark:bg-blue-600 text-white dark:text-white border border-blue-600 dark:border-blue-600 
                                      px-3 py-2 rounded-lg cursor-pointer text-base font-medium transition-all duration-200 
                                      ${l||c?"cursor-not-allowed opacity-60":"hover:bg-blue-700 dark:hover:bg-blue-700 hover:border-blue-700 dark:hover:border-blue-700 hover:-translate-y-0.5 hover:shadow-md"}`,children:c?"Creating...":"+ New Board"})]}),O.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:t.map(j=>{const H=e?.id===j.id,K=_===j.id;return O.jsxs("div",{onClick:()=>!l&&n(j.id),onMouseEnter:()=>w(j.id),onMouseLeave:()=>w(null),className:`
                                        min-h-[44px] px-3 py-2.5 mb-1 rounded-lg flex justify-between items-center
                                        transition-all duration-200 cursor-pointer border font-medium text-lg leading-tight
                                        ${l?"cursor-not-allowed opacity-60":"cursor-pointer"}
                                        ${H?"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100 font-semibold shadow-sm":K?"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 shadow-sm":"border-transparent bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/30"}
                                    `,role:"button",tabIndex:0,onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&!l&&n(j.id)},children:[O.jsx("span",{className:`
                                        ${H?"font-semibold":"font-medium"} 
                                        flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        text-lg leading-tight
                                    `,children:j.name}),O.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[j.isOpen&&O.jsx("span",{className:"text-green-500 dark:text-green-400 text-base",children:""}),t.length>1&&O.jsx("button",{onClick:y=>{y.stopPropagation(),L(y,j.id)},title:"Delete board",className:`
                                                    w-5 h-5 bg-transparent border-none text-red-500 dark:text-red-400 
                                                    cursor-pointer text-lg leading-none flex items-center justify-center
                                                    rounded transition-all duration-150
                                                    ${K?"opacity-100 visible hover:bg-red-50 dark:hover:bg-red-900/30":"opacity-0 invisible"}
                                                    hover:text-red-600 dark:hover:text-red-300
                                                `,children:""})]})]},j.id)})}),l&&O.jsx("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-base font-medium",children:"Loading boards..."}),O.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:O.jsx("button",{onClick:o,className:`w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 
                                     bg-transparent text-gray-700 dark:text-gray-300 cursor-pointer text-base font-medium
                                     transition-all duration-200
                                     hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:border-gray-400 dark:hover:border-gray-500 
                                     hover:text-gray-900 dark:hover:text-gray-100`,children:"Sign Out"})})]})}),O.jsx(RK,{show:h,onHide:P,onConfirm:C,isCreating:c})]})}const AI=F.createContext(void 0),IK=()=>{const t=F.useContext(AI);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},NK=({children:t})=>{const[e,n]=F.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});F.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return O.jsx(AI.Provider,{value:{theme:e,toggleTheme:r},children:t})},xI=()=>{const{theme:t,toggleTheme:e}=IK();return O.jsx("button",{onClick:e,className:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 
                     hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600
                     hover:border-gray-300 dark:hover:border-gray-500 transition-all duration-200 
                     focus:outline-none focus:ring-2 focus:ring-blue-500/30 dark:focus:ring-blue-400/30
                     shadow-sm hover:shadow-md`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?O.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:O.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):O.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:O.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function DK({name:t,onSetName:e,user:n,isSaving:r}){const[s,o]=F.useState(!1),[l,c]=F.useState(t||"");F.useEffect(()=>{c(t||"")},[t]);const f=m=>{m.key==="Enter"&&(e(l),o(!1))},h=()=>{o(!0),c(t||"")};return O.jsx(O.Fragment,{children:O.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:O.jsx("div",{className:"max-w-none mx-auto px-4",children:O.jsxs("header",{className:"flex justify-between items-center py-3",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsxs("div",{className:"flex items-center space-x-2",children:[O.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:O.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),O.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"TinkFlow"})]}),O.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:""}),s?O.jsx("input",{type:"text",value:l,onChange:m=>c(m.target.value),onKeyDown:f,onBlur:()=>{e(l),o(!1)},className:`bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 
                                             rounded-md px-2 py-1 text-gray-900 dark:text-gray-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 focus:ring-blue-500/20`,autoFocus:!0}):O.jsx("button",{onClick:h,className:`bg-transparent border-none text-gray-600 dark:text-gray-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded-md transition-all duration-150 ease-in-out
                                             hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100`,children:t||"Untitled Board"})]}),O.jsxs("div",{className:"flex items-center gap-3",children:[r&&O.jsxs("div",{className:`text-green-600 dark:text-green-400 text-sm flex items-center gap-2 
                                               bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full border border-green-200 dark:border-green-700/50
                                               animate-pulse`,children:[O.jsx("div",{className:"w-2 h-2 bg-green-500 dark:bg-green-400 rounded-full animate-bounce"}),O.jsx("span",{className:"font-medium",children:"Saving..."})]}),O.jsx(xI,{}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center",children:O.jsx("span",{className:"text-white font-medium text-xs",children:n?.isAnonymous?"G":n?.email?.charAt(0).toUpperCase()||"U"})}),O.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"})]})]})]})})})})}const MK=({notification:t,onRemove:e})=>{const n=s=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";default:return""}},r=s=>{switch(s){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-300 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-300 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-300 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-300 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-300 dark:text-gray-400"}};return O.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-xl border shadow-2xl backdrop-blur-sm                         transform transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-3xl                        ${r(t.type)}`,children:[" ",O.jsxs("div",{className:"flex items-start gap-3",children:[" ",O.jsxs("span",{className:"text-lg flex-shrink-0 mt-0.5",children:[" ",n(t.type)," "]})," ",O.jsxs("div",{className:"flex-1 min-w-0",children:[" ",O.jsxs("p",{className:"text-sm font-medium leading-5 break-words",children:[" ",t.message," "]})," "]})," ",O.jsxs("button",{onClick:()=>e(t.id),className:"flex-shrink-0 text-gray-400 dark:text-gray-500 hover:text-gray-200 dark:hover:text-gray-300                              hover:bg-gray-700/50 dark:hover:bg-gray-600/50                              rounded-full p-1 transition-all duration-200                              focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20","aria-label":"Close notification",children:[" ",O.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[" ",O.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})," "]})," "]})," "]})," "]})},PK=({notifications:t,onRemove:e})=>O.jsxs("div",{className:"notification-container fixed top-4 right-4 space-y-3 z-[2000] pointer-events-none",children:[" ",t.map(n=>O.jsxs("div",{className:"pointer-events-auto",children:[" ",O.jsx(MK,{notification:n,onRemove:e})," "]},n.id))," "]});function OK({onLogin:t}){return O.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 antialiased",children:[" "," ",O.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:[" ",O.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",O.jsxs("div",{className:"flex justify-between items-center py-4",children:[" ",O.jsxs("div",{className:"flex items-center space-x-3",children:[" ",O.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",O.jsx("span",{className:"text-white font-bold text-lg",children:"T"})," "]})," ",O.jsxs("div",{className:"flex flex-col",children:[" ",O.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"TinkFlow"})," ",O.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"AI Learning Platform"})," "]})," "]})," ",O.jsxs("div",{className:"flex items-center gap-4",children:[" ",O.jsx(xI,{})," ",O.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200",children:[" ","Get Started"," "]})," "]})," "]})," "]})," "]})," "," ",O.jsxs("section",{className:"relative overflow-hidden",children:[" ",O.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:[" ",O.jsxs("div",{className:"text-center",children:[" ",O.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full mb-8",children:[" ",O.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})," ",O.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium text-sm",children:"AI-Powered Concept Learning"})," "]})," ",O.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:[" ","Learn & Tinker with"," ",O.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent block",children:[" ","AI-Powered Concepts"," "]})," "]})," ",O.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:[" ","TinkFlow is the ultimate AI-powered platform for exploring, understanding, and experimenting with new concepts. Transform your learning journey with interactive visual flows and intelligent insights."," "]})," ",O.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[" ",O.jsxs("button",{onClick:t,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning Now"," "]})," ",O.jsxs("button",{className:"px-8 py-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[" ","Watch Demo"," "]})," "]})," "]})," "]})," "," ",O.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full opacity-10 blur-3xl"})," ",O.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})," "]})," "," ",O.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",O.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",O.jsxs("div",{className:"text-center mb-16",children:[" ",O.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Everything You Need to Learn"," "]})," ",O.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","AI-powered tools and features designed to accelerate your learning and conceptual understanding"," "]})," "]})," ",O.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",O.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-indigo-200 dark:border-indigo-700/50 hover:transform hover:-translate-y-1",children:[" ",O.jsxs("div",{className:"w-14 h-14 bg-indigo-500 rounded-xl flex items-center justify-center mb-6",children:[" ",O.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})," "]})," "]})," ",O.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI-Powered Insights"," "]})," ",O.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Get intelligent explanations and connections between concepts powered by advanced AI that understands your learning style."," "]})," "]})," ",O.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50 hover:transform hover:-translate-y-1",children:[" ",O.jsxs("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-6",children:[" ",O.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})," "]})," "]})," ",O.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Interactive Visual Flows"," "]})," ",O.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Build and explore concept maps with interactive nodes that respond to your curiosity and create dynamic learning pathways."," "]})," "]})," ",O.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50 hover:transform hover:-translate-y-1",children:[" ",O.jsxs("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-6",children:[" ",O.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})," "]})," "]})," ",O.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Experimentation Sandbox"," "]})," ",O.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Tinker with concepts in a safe, guided environment where you can test ideas and see instant results with AI feedback."," "]})," "]})," "]})," "]})," "]})," "," ",O.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",O.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",O.jsxs("div",{className:"text-center mb-16",children:[" ",O.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","How TinkFlow Works"," "]})," ",O.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Three simple steps to unlock your learning potential with AI-powered concept exploration"," "]})," "]})," ",O.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",O.jsxs("div",{className:"text-center",children:[" ",O.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",O.jsx("span",{className:"text-white font-bold text-xl",children:"1"})," "]})," ",O.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Input Your Concept"," "]})," ",O.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Start by entering any topic, question, or concept you want to explore. Our AI understands context and complexity."," "]})," "]})," ",O.jsxs("div",{className:"text-center",children:[" ",O.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",O.jsx("span",{className:"text-white font-bold text-xl",children:"2"})," "]})," ",O.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI Generates Flow"," "]})," ",O.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Watch as TinkFlow creates an interactive visual map with connected nodes, each representing key aspects of your concept."," "]})," "]})," ",O.jsxs("div",{className:"text-center",children:[" ",O.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",O.jsx("span",{className:"text-white font-bold text-xl",children:"3"})," "]})," ",O.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Explore & Learn"," "]})," ",O.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Click on any node to dive deeper, ask questions, and watch new connections emerge as you explore your learning path."," "]})," "]})," "]})," "]})," "]})," "," ",O.jsxs("section",{className:"py-20 bg-gradient-to-r from-indigo-500 to-purple-600",children:[" ",O.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",O.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[" ",O.jsxs("div",{className:"text-white",children:[" ",O.jsx("div",{className:"text-4xl font-bold mb-2",children:"27K+"})," ",O.jsx("div",{className:"text-indigo-100",children:"Concepts Explored"})," "]})," ",O.jsxs("div",{className:"text-white",children:[" ",O.jsx("div",{className:"text-4xl font-bold mb-2",children:"2.4K+"})," ",O.jsx("div",{className:"text-indigo-100",children:"Active Learners"})," "]})," ",O.jsxs("div",{className:"text-white",children:[" ",O.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"})," ",O.jsx("div",{className:"text-indigo-100",children:"Learning Success"})," "]})," ",O.jsxs("div",{className:"text-white",children:[" ",O.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"})," ",O.jsx("div",{className:"text-indigo-100",children:"AI Support"})," "]})," "]})," "]})," "]})," "," ",O.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",O.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",O.jsxs("div",{className:"text-center mb-16",children:[" ",O.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Perfect for Every Learning Style"," "]})," ",O.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Whether you're a student, researcher, or curious mind, TinkFlow adapts to your learning needs"," "]})," "]})," ",O.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[" ",O.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/10 p-8 rounded-2xl border border-blue-200 dark:border-blue-700/30",children:[" ",O.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Academic Learning"," "]})," ",O.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Break down complex academic subjects into digestible, interconnected concepts. Perfect for studying sciences, humanities, and technical topics."," "]})," ",O.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",O.jsx("li",{children:" Research paper analysis"})," ",O.jsx("li",{children:" Concept mapping for exams"})," ",O.jsx("li",{children:" Cross-disciplinary connections"})," "]})," "]})," ",O.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/10 dark:to-purple-800/10 p-8 rounded-2xl border border-purple-200 dark:border-purple-700/30",children:[" ",O.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Creative Exploration"," "]})," ",O.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Explore ideas, brainstorm solutions, and discover unexpected connections. Great for creative professionals and innovators."," "]})," ",O.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",O.jsx("li",{children:" Idea generation workflows"})," ",O.jsx("li",{children:" Problem-solving frameworks"})," ",O.jsx("li",{children:" Innovation mapping"})," "]})," "]})," ",O.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/10 p-8 rounded-2xl border border-green-200 dark:border-green-700/30",children:[" ",O.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Technical Deep Dives"," "]})," ",O.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Understand complex systems, architectures, and technologies through interactive exploration and AI-guided explanations."," "]})," ",O.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",O.jsx("li",{children:" System architecture learning"})," ",O.jsx("li",{children:" Technology stack exploration"})," ",O.jsx("li",{children:" Code concept mapping"})," "]})," "]})," ",O.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 p-8 rounded-2xl border border-orange-200 dark:border-orange-700/30",children:[" ",O.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Professional Development"," "]})," ",O.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Build skills, understand industry trends, and create learning paths for career advancement with AI-powered insights."," "]})," ",O.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",O.jsx("li",{children:" Skill gap analysis"})," ",O.jsx("li",{children:" Career pathway planning"})," ",O.jsx("li",{children:" Industry trend mapping"})," "]})," "]})," "]})," "]})," "]})," "," ",O.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",O.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[" ",O.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:[" ","Ready to Transform Your Learning?"," "]})," ",O.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:[" ","Join thousands of learners who are already exploring concepts in revolutionary ways with TinkFlow's AI-powered platform."," "]})," ",O.jsxs("button",{onClick:t,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning for Free"," "]})," ",O.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:[" ","No credit card required  Get started in seconds"," "]})," "]})," "]})," "," ",O.jsxs("footer",{className:"bg-gray-900 text-white py-12",children:[" ",O.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",O.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[" ",O.jsxs("div",{className:"col-span-1",children:[" ",O.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[" ",O.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",O.jsx("span",{className:"text-white font-bold text-sm",children:"T"})," "]})," ",O.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})," "]})," ",O.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","AI-powered concept learning platform for curious minds."," "]})," "]})," ",O.jsxs("div",{children:[" ",O.jsx("h4",{className:"font-semibold mb-4",children:"Product"})," ",O.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",O.jsx("li",{children:O.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})})," ",O.jsx("li",{children:O.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})})," ",O.jsx("li",{children:O.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})," "]})," "]})," ",O.jsxs("div",{children:[" ",O.jsx("h4",{className:"font-semibold mb-4",children:"Resources"})," ",O.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",O.jsx("li",{children:O.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})," ",O.jsx("li",{children:O.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Tutorials"})})," ",O.jsx("li",{children:O.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})," "]})," "]})," ",O.jsxs("div",{children:[" ",O.jsx("h4",{className:"font-semibold mb-4",children:"Company"})," ",O.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",O.jsx("li",{children:O.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})})," ",O.jsx("li",{children:O.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})," ",O.jsx("li",{children:O.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})," "]})," "]})," "]})," ",O.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[" ",O.jsxs("p",{className:"text-gray-400 text-sm",children:[" "," 2025 TinkFlow. All rights reserved."," "]})," ",O.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[" ",O.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",O.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",O.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})," "]})," "]})," ",O.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",O.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",O.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})," "]})," "]})," ",O.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",O.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",O.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.747.099.12.112.225.085.344-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})," "]})," "]})," "]})," "]})," "]})," "]})," "]})}const Ri={TTL:5*60*1e3,STORAGE_PREFIX:"launchhacks_cache_",MAX_CACHE_SIZE:50};class VK{memoryCache=new Map;pendingRequests=new Map;stats={hits:0,misses:0,evictions:0,reads:0};generateKey(e,n){return`${e}_${n}`}isValid(e){return e.expiresAt>Date.now()}getFromMemory(e){const n=this.memoryCache.get(e);return n&&this.isValid(n)?(this.stats.hits++,n.data):(n&&this.memoryCache.delete(e),null)}getFromStorage(e){try{const n=localStorage.getItem(Ri.STORAGE_PREFIX+e);if(n){const r=JSON.parse(n);if(this.isValid(r))return this.memoryCache.set(e,r),this.stats.hits++,r.data;localStorage.removeItem(Ri.STORAGE_PREFIX+e)}}catch(n){console.warn("Error reading from cache storage:",n)}return null}store(e,n,r){const s=Date.now(),o=r||Ri.TTL,l={data:n,timestamp:s,expiresAt:s+o};this.memoryCache.set(e,l);try{localStorage.setItem(Ri.STORAGE_PREFIX+e,JSON.stringify(l))}catch(c){console.warn("Error storing to local storage:",c),this.cleanupStorage()}this.memoryCache.size>Ri.MAX_CACHE_SIZE&&this.evictOldest()}cleanupStorage(){const e=[],n=Date.now();for(let r=0;r<localStorage.length;r++){const s=localStorage.key(r);if(s&&s.startsWith(Ri.STORAGE_PREFIX))try{const o=localStorage.getItem(s);o&&JSON.parse(o).expiresAt<n&&e.push(s)}catch{e.push(s)}}e.forEach(r=>{localStorage.removeItem(r),this.stats.evictions++})}evictOldest(){let e="",n=Date.now();for(const[r,s]of this.memoryCache.entries())s.timestamp<n&&(n=s.timestamp,e=r);e&&(this.memoryCache.delete(e),this.stats.evictions++)}async get(e,n,r,s){const o=this.generateKey(e,n),l=this.getFromMemory(o);if(l!==null)return l;const c=this.getFromStorage(o);if(c!==null)return c;const f=this.pendingRequests.get(o);if(f)return f;this.stats.misses++,this.stats.reads++;const h=r().then(m=>(this.store(o,m,s),this.pendingRequests.delete(o),m)).catch(m=>{throw this.pendingRequests.delete(o),m});return this.pendingRequests.set(o,h),h}set(e,n,r,s){const o=this.generateKey(e,n);this.store(o,r,s)}invalidate(e,n){const r=this.generateKey(e,n);this.memoryCache.delete(r),localStorage.removeItem(Ri.STORAGE_PREFIX+r)}invalidateType(e){Array.from(this.memoryCache.keys()).filter(s=>s.startsWith(e+"_")).forEach(s=>this.memoryCache.delete(s));const r=[];for(let s=0;s<localStorage.length;s++){const o=localStorage.key(s);o&&o.startsWith(Ri.STORAGE_PREFIX+e+"_")&&r.push(o)}r.forEach(s=>localStorage.removeItem(s))}clear(){this.memoryCache.clear(),this.pendingRequests.clear();const e=[];for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);r&&r.startsWith(Ri.STORAGE_PREFIX)&&e.push(r)}e.forEach(n=>localStorage.removeItem(n))}getStats(){const e=this.stats.hits+this.stats.misses;return{...this.stats,hitRate:e>0?this.stats.hits/e*100:0,cacheSize:this.memoryCache.size}}async preloadUserData(e,n){try{const r=await this.get("boards",e,n,Ri.TTL*2);r.find(o=>o.isOpen)&&console.log(`Preloaded data for user ${e} with ${r.length} boards`)}catch(r){console.warn("Error preloading user data:",r)}}}const hn=new VK,LK=()=>hn.getStats(),zK=({isVisible:t,onToggle:e})=>{const n=LK();return t?O.jsxs("div",{className:"fixed bottom-4 right-4 bg-white border border-gray-200 rounded-lg shadow-lg p-4 z-50 max-w-sm",children:[O.jsxs("div",{className:"flex items-center justify-between mb-3",children:[O.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Cache Statistics"}),O.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-lg",title:"Hide Cache Stats",children:""})]}),O.jsxs("div",{className:"space-y-2 text-xs",children:[O.jsxs("div",{className:"flex justify-between",children:[O.jsx("span",{className:"text-gray-600",children:"Hit Rate:"}),O.jsxs("span",{className:`font-medium ${n.hitRate>70?"text-green-600":n.hitRate>40?"text-yellow-600":"text-red-600"}`,children:[n.hitRate.toFixed(1),"%"]})]}),O.jsxs("div",{className:"flex justify-between",children:[O.jsx("span",{className:"text-gray-600",children:"Cache Hits:"}),O.jsx("span",{className:"font-medium text-green-600",children:n.hits})]}),O.jsxs("div",{className:"flex justify-between",children:[O.jsx("span",{className:"text-gray-600",children:"Cache Misses:"}),O.jsx("span",{className:"font-medium text-red-600",children:n.misses})]}),O.jsxs("div",{className:"flex justify-between",children:[O.jsx("span",{className:"text-gray-600",children:"DB Reads:"}),O.jsx("span",{className:"font-medium text-blue-600",children:n.reads})]}),O.jsxs("div",{className:"flex justify-between",children:[O.jsx("span",{className:"text-gray-600",children:"Cache Size:"}),O.jsx("span",{className:"font-medium",children:n.cacheSize})]}),O.jsxs("div",{className:"flex justify-between",children:[O.jsx("span",{className:"text-gray-600",children:"Evictions:"}),O.jsx("span",{className:"font-medium text-orange-600",children:n.evictions})]}),O.jsx("div",{className:"pt-2 border-t border-gray-100",children:O.jsx("div",{className:"text-center text-gray-500",children:n.reads<10?"Gathering data...":`${(n.hits/(n.hits+n.misses)*100).toFixed(1)}% cache efficiency`})})]}),O.jsx("div",{className:"mt-3 text-xs text-gray-400 text-center",children:n.reads===0?"No database reads yet":`Saved ${n.hits} database reads`})]}):O.jsx("button",{onClick:e,className:"fixed bottom-4 right-4 bg-blue-600 text-white p-2 rounded-full shadow-lg hover:bg-blue-700 transition-colors z-50 text-xs",title:"Show Cache Stats",children:""})};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UK=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),w2=t=>{const e=UK(t);return e.charAt(0).toUpperCase()+e.slice(1)},CI=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),BK=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=F.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...c},f)=>F.createElement("svg",{ref:f,...HK,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:CI("lucide",s),...!o&&!BK(c)&&{"aria-hidden":"true"},...c},[...l.map(([h,m])=>F.createElement(h,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=(t,e)=>{const n=F.forwardRef(({className:r,...s},o)=>F.createElement($K,{ref:o,iconNode:e,className:CI(`lucide-${jK(w2(t))}`,`lucide-${t}`,r),...s}));return n.displayName=w2(t),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FK=[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]],qK=Mu("gavel",FK);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GK=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],KK=Mu("hash",GK);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],XK=Mu("info",YK);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WK=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],QK=Mu("lightbulb",WK);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],JK=Mu("loader-circle",ZK);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eY=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Fw=Mu("sparkles",eY),b2={default:{border:"border-gray-400",ring:"ring-gray-100 dark:ring-gray-500/30",placeholder:"Enter your text...",Icon:KK,color:"#6b7280"},explain:{border:"border-blue-400",ring:"ring-blue-100 dark:ring-blue-500/30",placeholder:"Explain this concept...",Icon:XK,color:"#3b82f6"},answer:{border:"border-emerald-400",ring:"ring-emerald-100 dark:ring-emerald-500/30",placeholder:"Answer this question...",Icon:QK,color:"#10b981"},argue:{border:"border-rose-400",ring:"ring-rose-100 dark:ring-rose-500/30",placeholder:"Argue this point...",Icon:qK,color:"#f43f5e"}};function tY({data:t}){const[e,n]=F.useState("default"),r=F.useRef(null),[s,o]=F.useState(t.label||""),l=["default","explain","answer","argue"];F.useEffect(()=>{const P=r.current;if(!P)return;const L=setTimeout(()=>{P.focus()},100),j=new IntersectionObserver(([H])=>{H.isIntersecting&&(P.focus(),j.disconnect())},{threshold:.1});return j.observe(P),()=>{clearTimeout(L),j.disconnect()}},[]);const c=P=>{P.preventDefault();const L=s.trim();L&&t.onNodeCallback?.(L)},f=P=>{if(P.key==="ArrowUp"||P.key==="ArrowDown"){P.preventDefault();const L=l.indexOf(e);let j;P.key==="ArrowUp"?j=L>0?L-1:l.length-1:j=L<l.length-1?L+1:0,n(l[j])}},h=b2[e]||b2.default,{border:m,ring:_,placeholder:w,color:C}=h,M=h.Icon;return O.jsxs("div",{className:`relative bg-white dark:bg-gray-900 shadow-lg rounded-xl px-4 py-3 min-w-[200px] border transition-all duration-300 ease-in-out ${m} ring-1 ${_}`,style:{borderColor:C,boxShadow:`0 0 0 1px ${C}20, 0 4px 6px -1px rgb(0 0 0 / 0.1)`},children:[O.jsxs("form",{onSubmit:c,className:"flex items-center gap-2",children:[O.jsx("div",{className:"transition-all duration-300 ease-in-out transform hover:scale-110",children:O.jsx(M,{size:18,className:"shrink-0 transition-colors duration-300 ease-in-out animate-pulse",style:{color:C}})}),O.jsx("input",{ref:r,value:s,onChange:P=>o(P.target.value),onKeyDown:f,placeholder:w,className:"flex-1 bg-transparent outline-none text-sm placeholder-gray-400 dark:placeholder-gray-500 caret-black dark:caret-white text-gray-900 dark:text-gray-100 transition-all duration-300",style:{caretColor:C}})]}),O.jsx("div",{className:"absolute -top-2 -right-2 px-2 py-1 text-xs font-semibold text-white rounded-full transition-all duration-300 ease-in-out",style:{backgroundColor:C},children:e}),O.jsx(Hn,{type:"target",position:Ee.Top}),O.jsx(Hn,{type:"source",position:Ee.Bottom})]})}const nY=async()=>{try{await gU(lw),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},rY=()=>{const[t,e]=F.useState(null);return F.useEffect(()=>{const r=mU(lw,s=>{e(s),s?console.log("User signed in:",s.uid):console.log("No user signed in")});return()=>r()},[]),{user:t,signOut:async()=>{try{await nY(),e(null)}catch(r){console.error("Error in sign out:",r)}}}},RI=t=>!!(t&&t.uid),fd=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],lu=[],iY=async t=>{if(!RI({uid:t}))throw new Error(hr.AUTH_REQUIRED);try{const e=L_(si,wr.BOARDS),n=ij(e,sj("userId","==",t),aj("createdAt","desc")),r=await X_(n);if(r.empty){const o={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:wt.now(),isOpen:!0};return await W_(Ru(si,wr.BOARDS,o.id),o),console.log("Created default board:",o),[o]}const s=r.docs.map(o=>({id:o.id,...o.data()}));return console.log("Fetched all boards:",s),s}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:wt.now(),isOpen:!0,isFallback:!0}]}throw new Error(hr.LOAD_FAILED)}},sY=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),fd;try{const e=L_(si,wr.BOARDS,t,wr.NODES),n=await X_(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),fd;const r=n.docs.map(s=>{const o=s.data(),l={...o.data,tokenColors:o.data?.tokenColors||{},previousNode:o.data?.previousNode||null};return{id:s.id,type:o.type,position:o.position,data:l,draggable:o.draggable,style:o.style}});return console.log("Fetched nodes from board:",r),r}catch(e){return console.error("Fetch nodes error:",e),fd}},aY=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),lu;try{const e=L_(si,wr.BOARDS,t,wr.EDGES),n=await X_(e);if(n.empty)return console.log("No edges found for board, using initial edges"),lu;const r=n.docs.map(s=>({id:s.id,...s.data()}));return console.log("Fetched edges from board:",r),r}catch(e){return console.error("Fetch edges error:",e),lu}},oY=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=rk(si);e.forEach(r=>{const s=Ru(si,wr.BOARDS,t,wr.NODES,r.id),o={type:r.type,data:r.data,position:r.position,updatedAt:wt.now()};r.draggable!=null&&(o.draggable=r.draggable),r.style!=null&&(o.style=r.style),n.set(s,o)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(hr.SAVE_FAILED)}},lY=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=rk(si);e.forEach(r=>{const s=Ru(si,wr.BOARDS,t,wr.EDGES,r.id),o={source:r.source,target:r.target,updatedAt:wt.now()};r.sourceHandle!=null&&(o.sourceHandle=r.sourceHandle),r.targetHandle!=null&&(o.targetHandle=r.targetHandle),r.style!=null&&(o.style=r.style),r.markerEnd!=null&&(o.markerEnd=r.markerEnd),n.set(s,o)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(hr.SAVE_FAILED)}},uY=async(t,e,n)=>{if(!RI({uid:t}))throw new Error(hr.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:wt.now(),isOpen:!1};return console.log("Creating board:",r),await W_(Ru(si,wr.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},cY=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await fj(Ru(si,wr.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},dY=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:wt.now()};await W_(Ru(si,wr.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},Lo={BOARDS:10*60*1e3,NODES:15*60*1e3,EDGES:15*60*1e3},qw=async t=>hn.get("boards",t,()=>iY(t),Lo.BOARDS),fY=async t=>hn.get("nodes",t,()=>sY(t),Lo.NODES),hY=async t=>hn.get("edges",t,()=>aY(t),Lo.EDGES),hd=async t=>{const[e,n]=await Promise.all([fY(t),hY(t)]);return{nodes:e,edges:n}},pY=async(t,e)=>{await oY(t,e),hn.set("nodes",t,e,Lo.NODES)},mY=async(t,e)=>{await lY(t,e),hn.set("edges",t,e,Lo.EDGES)},gY=async(t,e,n)=>{await Promise.all([pY(t,e),mY(t,n)])},yY=async(t,e,n)=>{const r=await uY(t,e??null,n??[]);return r&&(hn.invalidate("boards",t),hn.set("nodes",r.id,[],Lo.NODES),hn.set("edges",r.id,[],Lo.EDGES)),r},vY=async t=>{await cY(t),hn.invalidate("nodes",t),hn.invalidate("edges",t)},jl=async(t,e)=>{await dY(t,e),e.userId&&hn.invalidate("boards",e.userId)},_Y=async t=>{try{const n=(await qw(t)).find(r=>r.isOpen);n&&hd(n.id).catch(r=>{console.warn("Failed to preload board content:",r)}),console.log(`Preloaded data for user ${t}`)}catch(e){console.warn("Error in preloadUserData:",e)}},kI=t=>{hn.invalidate("boards",t)},wY=async t=>{kI(t);const e=await qw(t);let n;const r=e.find(s=>s.isOpen);return r&&(hn.invalidate("nodes",r.id),hn.invalidate("edges",r.id),n=await hd(r.id)),{boards:e,openBoardContent:n}},bY=(t,e={})=>{const[n,r,s]=q5([]),[o,l,c]=G5([]),[f,h]=F.useState(!0),[m,_]=F.useState(!1),[w,C]=F.useState(!1),[M,P]=F.useState([]),[L,j]=F.useState(null),H=F.useRef(!1),K=F.useRef(null),{showSuccess:y,showError:E,showInfo:b}=e,T=x=>{const B=x.find(G=>G.isOpen===!0);if(B)return B;if(x.length>0){const G={...x[0],isOpen:!0};return jl(G.id,G).catch(console.error),G}return null};F.useEffect(()=>{(async()=>{if(!(!t||H.current))try{h(!0),H.current=!0,await _Y(t.uid);const B=await qw(t.uid);P(B);const G=B.some(ee=>ee.isFallback);G&&E&&E("Database index missing. Please create the required Firestore index. Check console for details.");const X=T(B);if(!X){console.error("No board found for user"),E&&E("No boards found. Creating a default board..."),r(fd),l(lu);return}j(X);const{nodes:z,edges:W}=await hd(X.id);if(r(z),l(W),b&&!G){const ee=hn.getStats();b(`Board loaded successfully! Cache hit rate: ${ee.hitRate.toFixed(1)}%`)}}catch(B){console.error("Error loading initial data:",B),H.current=!1,E&&E("Failed to load board data. Using default board."),r(fd),l(lu)}finally{h(!1)}})()},[t]);const A=F.useCallback(async()=>{!L||L.isFallback||f||m||(K.current&&clearTimeout(K.current),K.current=setTimeout(async()=>{try{C(!0),(n&&n.length>0||o&&o.length>0)&&(await gY(L.id,n||[],o||[]),console.log("Batch save completed successfully after node creation"))}catch(x){console.error("Save failed:",x),E&&E("Failed to save new content")}finally{C(!1),K.current=null}},2e3))},[L,f,m,n,o,E]),R=async x=>{try{if(L?.id===x)return;if(L?.isFallback||M.find(G=>G.id===x)?.isFallback){E&&E("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(_(!0),L&&!L.isFallback){const G={...L,isOpen:!1};await jl(L.id,G),P(X=>X.map(z=>z.id===L.id?G:z))}const B=M.find(G=>G.id===x);if(B){const G={...B,isOpen:!0};await jl(x,G),j(G),P(W=>W.map(ee=>ee.id===x?G:ee));const{nodes:X,edges:z}=await hd(x);r(X),l(z),y&&y(`Switched to "${G.name}"`)}else console.error("Board not found:",x),E&&E("Board not found")}catch(B){console.error("Error switching board:",B),E&&E("Failed to switch board. Please try again.")}finally{_(!1)}},k=async x=>{try{if(!t)return E&&E("You must be logged in to create a board"),null;b&&b("Creating new board...");const B=await yY(t.uid,x||null,M);if(B){if(L&&!L.isFallback){const X={...L,isOpen:!1};jl(L.id,X).catch(console.error)}const G={...B,isOpen:!0};return P(X=>{const z=X.map(W=>W.id===L?.id?{...W,isOpen:!1}:W);return[G,...z]}),j(G),jl(B.id,G).catch(console.error),r([{id:"1",type:"staticEditable",data:{label:x||"New Board"},position:{x:250,y:25},draggable:!1}]),l(lu),y&&y(`Board "${B.name}" created and opened!`),G}else return E&&E("Failed to create board. Please try again."),null}catch(B){return E&&E(`Failed to create board: ${B.message}`),null}},D=async x=>{try{if(M.length<=1){E&&E("Cannot delete the last board!");return}if(!M.find(G=>G.id===x)){console.error("Board not found for deletion"),E&&E("Board not found");return}if(b&&b("Deleting board..."),L?.id===x){const G=M.find(X=>X.id!==x);G&&await R(G.id)}await vY(x),P(G=>G.filter(X=>X.id!==x)),y&&y("Board deleted successfully!")}catch(B){console.error("Error deleting board:",B),E&&E("Failed to delete board. Please try again.")}},$=async x=>{if(L&&L.name!==x){const B={...L,name:x};j(B),P(G=>G.map(X=>X.id===L.id?B:X));try{await jl(L.id,B),console.log("Board name updated successfully")}catch(G){console.error("Error updating board name:",G)}}},V=F.useCallback(()=>{t?.uid&&kI(t.uid),P([]),j(null),r([]),l([]),h(!0),_(!1),C(!1),H.current=!1,K.current&&(clearTimeout(K.current),K.current=null)},[t?.uid]),U=F.useCallback(async()=>{if(t?.uid)try{h(!0),b&&b("Refreshing data...");const{boards:x,openBoardContent:B}=await wY(t.uid);P(x);const G=x.find(z=>z.isOpen);if(j(G||null),B)r(B.nodes),l(B.edges);else if(G){const{nodes:z,edges:W}=await hd(G.id);r(z),l(W)}const X=hn.getStats();y&&y(`Data refreshed! Cache hit rate: ${X.hitRate.toFixed(1)}%`)}catch(x){console.error("Error during force refresh:",x),E&&E("Failed to refresh data")}finally{h(!1)}},[t?.uid,b,y,E]),Q=F.useCallback(()=>hn.getStats(),[]);return{nodes:n,edges:o,allBoards:M,currentBoard:L,isLoading:f,isSwitchingBoard:m,isSaving:w,onNodesChange:s,onEdgesChange:c,setNodes:r,setEdges:l,switchToBoard:R,createNewBoard:k,deleteBoard:D,updateBoardName:$,clearBoardState:V,saveNewNodeContent:A,forceRefresh:U,getCacheStats:Q}},EY=()=>{const[t,e]=F.useState([]),n=h=>{e(m=>m.filter(_=>_.id!==h))},r=h=>{const m=Date.now().toString(),_={id:m,timestamp:new Date,...h};return e(w=>[...w,_]),h.autoRemove!==!1&&setTimeout(()=>{n(m)},h.duration||5e3),m};return{notifications:t,addNotification:r,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(h,m={})=>r({type:"success",message:h,...m}),showError:(h,m={})=>r({type:"error",message:h,duration:7e3,...m}),showInfo:(h,m={})=>r({type:"info",message:h,...m}),showWarning:(h,m={})=>r({type:"warning",message:h,duration:6e3,...m})}},II=({size:t="medium",color:e="#4f86f7"})=>{const n={small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"};return O.jsx("div",{className:"flex items-center justify-center",children:O.jsx("div",{className:`${n[t]} border-gray-200 dark:border-gray-700 border-t-indigo-500 dark:border-t-indigo-400 rounded-full animate-spin`,style:{borderTopColor:e}})})};function E2(t){if(!t)return"#ffffff";const e=(t??"000000").replace(/^#/,""),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16),[o,l,c]=[n,r,s].map(h=>{const m=h/255;return m<=.03928?m/12.92:Math.pow((m+.055)/1.055,2.4)});return .2126*o+.7152*l+.0722*c>.179?"#000000":"#ffffff"}function TY({data:t,id:e}){const[n,r]=F.useState(t.summary||t.label||"Static Node"),{screenToFlowPosition:s}=Fd(),{handleTokenClick:o}=MH(),l=F.useRef(null),[c,f]=F.useState({mode:void 0,x:0,y:0,isDragging:!1}),h=F.useRef(c);F.useEffect(()=>{h.current=c},[c]);const[m,_]=F.useState(null);F.useEffect(()=>{r(t.summary||t.label||"Static Node")},[t.summary,t.label]);const C=PO(n),M=(H,K)=>{K.stopPropagation(),o(H,e,{x:0,y:0},"staticEditable",t.myColor,t.label||t.title||"Static Node",H.suggestionId)},P=F.useMemo(()=>{const H=t.tokenColors||{};return C.map((K,y)=>{const E=K.myConcept||K.word,b=H[E],T=!b;return O.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-200 ease-out
                        ${T?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}
                        ${K.myConcept?"bg-blue-500/10 border border-blue-500/30":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:b||"transparent",color:b?E2(b):"#f8faff",border:b?`1px solid ${pS(b,20)}`:""},onClick:A=>T?M(K,A):A.stopPropagation(),children:[K.word,y<C.length-1?" ":""]},y)})},[C,t.tokenColors]),L=F.useMemo(()=>{const H=t.tokenColors||{};return!t.suggestions||t.suggestions.length===0?O.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"}):t.suggestions.map((K,y)=>{const E=H[K],b=!E;return O.jsx("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                        bg-white/5 border border-white/10 transition-all duration-200 
                        ${b?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:E||"transparent",color:E?E2(E):"#f8faff",border:E?`1px solid ${pS(E,20)}`:""},onClick:T=>b?M({word:K,myConcept:K,suggestionId:(t.label||"")+K+y},T):T.stopPropagation(),children:K},y)})},[t.suggestions,t.tokenColors]),j=F.useMemo(()=>t.isLoading?O.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[O.jsx(II,{size:"small",color:"#6366f1"}),O.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}):O.jsxs("div",{className:"flex flex-col gap-3",children:[O.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[O.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),O.jsx("div",{className:"flex gap-2",children:O.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                transition-all duration-150 flex items-center justify-center text-sm`,title:"Show full text",children:""})})]}),O.jsx("div",{className:"flex-1",children:O.jsx("div",{className:"cursor-text leading-relaxed break-words text-lg font-medium",children:P})}),O.jsxs("div",{className:"mt-2",children:[O.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),O.jsx("div",{className:"flex flex-wrap gap-1",children:L})]})]}),[t.isLoading,t.title,P,L]);return O.jsxs("div",{ref:l,className:`bg-black border border-white/[0.1] rounded-[20px] p-7 min-w-[320px] max-w-[500px] 
                transition-all duration-150 ease-in-out cursor-pointer select-none overflow-hidden
                opacity-[0.98] border-b-[3px] border-b-white/[0.06]
                hover:opacity-100 hover:bg-[#28282c] hover:border-white/[0.2]`,style:{backgroundColor:"#000000",color:"#f8faff",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[O.jsx("div",{className:"relative pointer-events-auto text-[#f8faff] text-[18px] leading-[1.7] font-semibold",children:j}),O.jsx(Hn,{type:"source",position:Ee.Bottom,id:"bottom-source"}),O.jsx(Hn,{type:"target",position:Ee.Bottom,id:"bottom-target"})]})}const SY=6,AY=({dragState:t,handleOrigin:e,getParentCenter:n})=>{if(!t.isDragging||typeof window>"u")return null;const r=e||n();return n6.createPortal(O.jsxs(O.Fragment,{children:[O.jsxs("svg",{className:"fixed inset-0 pointer-events-none z-[9998]",width:"100vw",height:"100vh",children:[O.jsx("defs",{children:O.jsxs("linearGradient",{id:"connectionGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[O.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.8"}),O.jsx("stop",{offset:"100%",stopColor:"#1d4ed8",stopOpacity:"1"})]})}),O.jsx("line",{x1:r.x,y1:r.y,x2:t.x,y2:t.y,stroke:"url(#connectionGradient)",strokeWidth:3,strokeLinecap:"round",strokeDasharray:"5,5",className:"animate-pulse"})]}),O.jsx("div",{className:"fixed pointer-events-none z-[9999] transform -translate-x-1/2 -translate-y-1/2",style:{left:t.x,top:t.y},children:O.jsx("div",{className:`px-4 py-2 rounded-lg shadow-xl font-medium text-white 
                               bg-gradient-to-r from-blue-600 to-blue-700 backdrop-blur-sm
                               border border-blue-500/30 animate-bounce`,children:O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(Fw,{size:14,className:"animate-spin"}),t.suggestion]})})})]}),document.body)},xY=({suggestion:t,index:e,position:n,style:r,isHidden:s,onDragStart:o})=>{const l=c=>{c.stopPropagation(),c.preventDefault(),c.button===0&&o(t,c.nativeEvent)};return O.jsx("div",{className:`absolute z-10 select-none transition-all duration-200 ease-out ${s?"opacity-0 scale-95":"opacity-100 scale-100"}`,style:{...r,[n===Ee.Right?"right":"left"]:"-12px",transform:"translateY(-50%)"},onPointerDown:l,draggable:!1,children:O.jsxs("div",{className:`group relative flex items-center justify-center w-8 h-8
                          bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200
                          dark:from-blue-950 dark:to-blue-900 dark:hover:from-blue-900 dark:hover:to-blue-800
                          border-2 border-blue-200 hover:border-blue-300 
                          dark:border-blue-700 dark:hover:border-blue-600
                          rounded-full cursor-grab active:cursor-grabbing 
                          shadow-sm hover:shadow-md transition-all duration-200 ease-out 
                          hover:scale-110 active:scale-95`,title:t,onPointerDown:l,draggable:!1,children:[O.jsx(Fw,{size:16,className:`text-blue-600 dark:text-blue-400 transition-transform duration-200 
                             group-hover:rotate-12 group-active:rotate-45`}),O.jsxs("div",{className:`absolute z-20 px-3 py-1.5 text-xs font-medium text-white 
                              bg-gray-900/90 backdrop-blur-sm rounded-md shadow-lg 
                              opacity-0 group-hover:opacity-100 pointer-events-none
                              transition-opacity duration-200 ease-out whitespace-nowrap
                              transform -translate-y-1/2`,style:{[n===Ee.Right?"left":"right"]:"calc(100% + 8px)",top:"50%"},children:[t,O.jsx("div",{className:`absolute w-0 h-0 top-1/2 transform -translate-y-1/2
                                   border-t-[4px] border-b-[4px] border-t-transparent border-b-transparent
                                   ${n===Ee.Right?"border-r-[4px] border-r-gray-900/90 -left-1":"border-l-[4px] border-l-gray-900/90 -right-1"}`})]}),O.jsx(Hn,{type:"source",position:n,id:t,className:"opacity-0"})]})},`${t}-${e}`)};function CY({suggestions:t,dragState:e,handleDragStart:n,handleOrigin:r,getParentCenter:s}){if(!t?.length)return null;const o=t.slice(0,SY),l=(c,f)=>{if(f===1)return{position:Ee.Right,style:{top:"50%"}};const h=c<Math.ceil(f/2),m=h?Ee.Right:Ee.Left,_=h?c:c-Math.ceil(f/2),w=h?Math.ceil(f/2):Math.floor(f/2),C=w===1?50:_/(w-1)*60+20;return{position:m,style:{top:`${C}%`}}};return O.jsxs(O.Fragment,{children:[o.map((c,f)=>{const{position:h,style:m}=l(f,o.length),_=e.isDragging&&e.suggestion===c;return O.jsx(xY,{suggestion:c,index:f,position:h,style:m,isHidden:_,onDragStart:n},`${c}-${f}`)}),O.jsx(AY,{dragState:e,handleOrigin:r,getParentCenter:s})]})}function RY(){return O.jsxs(O.Fragment,{children:[O.jsx(Hn,{style:{transform:"translateY(-150%)"},type:"source",position:Ee.Bottom,id:"bottom-source"}),O.jsx(Hn,{style:{transform:"translateY(100%)"},type:"target",position:Ee.Top,id:"top-target"}),O.jsx(Hn,{style:{transform:"translateY(100%)"},type:"source",position:Ee.Left,id:"left-source"}),O.jsx(Hn,{style:{transform:"translateY(100%)"},type:"target",position:Ee.Left,id:"left-target"}),O.jsx(Hn,{style:{transform:"translateY(100%)"},type:"source",position:Ee.Right,id:"right-source"}),O.jsx(Hn,{style:{transform:"translateY(100%)"},type:"target",position:Ee.Right,id:"right-target"})]})}function kY({data:t,id:e}){F.useEffect(()=>{t.layout||(t.layout=1)},[t.layout]);const{screenToFlowPosition:n}=Fd(),r=F.useRef(null),[s,o]=F.useState({suggestion:"",x:0,y:0,isDragging:!1}),l=F.useRef(s);F.useEffect(()=>{l.current=s},[s]);const[c,f]=F.useState(null);F.useEffect(()=>{l.current=s},[s]);const h=F.useMemo(()=>t.contents&&t.contents.length>0?t.contents[0].trim()?O.jsx("div",{className:"node-rich-content w-full",dangerouslySetInnerHTML:{__html:t.contents[0]}}):O.jsx("div",{className:"text-center py-8 text-gray-500",children:O.jsx("p",{children:"No content available"})}):t.isLoading?O.jsxs("div",{className:"flex items-center justify-center gap-3 py-6",children:[O.jsx(II,{}),O.jsx("span",{className:"text-slate-400 text-sm",children:"Generating content..."})]}):null,[t.contents,t.isLoading]),m=F.useCallback(()=>{if(!r.current)return{x:0,y:0};const j=r.current.getBoundingClientRect();return{x:j.left+j.width/2,y:j.top+j.height/2}},[]),_=F.useCallback((j,H)=>{const y=H.target.getBoundingClientRect();f({x:y.left+y.width/2,y:y.top+y.height/2}),o({suggestion:j,x:H.clientX,y:H.clientY,isDragging:!0}),document.addEventListener("pointermove",w),document.addEventListener("pointerup",C)},[]),w=F.useCallback(j=>{o(H=>H.isDragging?{...H,x:j.clientX,y:j.clientY}:H)},[]),C=F.useCallback(()=>{const j=l.current;if(j.isDragging&&t.onNodeCallback){const H=n({x:j.x,y:j.y});t.onNodeCallback(j.suggestion||void 0,e,H)}o({suggestion:"explain",x:0,y:0,isDragging:!1}),f(null),document.removeEventListener("pointermove",w),document.removeEventListener("pointerup",C)},[t.onNodeCallback,e,n]),M=F.useMemo(()=>({background:t.myColor?`linear-gradient(135deg, ${t.myColor}f0, ${t.myColor}e0)`:"linear-gradient(135deg, #ffffff, #fafafa)",borderColor:t.myColor?`${t.myColor}60`:"rgba(229, 231, 235, 0.6)",transform:"translateZ(0)",willChange:"transform",backfaceVisibility:"hidden"}),[t.myColor]),P=F.useCallback(()=>{},[]),L=F.useCallback(()=>{},[]);return O.jsxs("div",{ref:r,className:`group relative bg-white/95 border border-gray-200/60 rounded-3xl
                       min-w-[320px] max-w-[640px] cursor-grab select-none
                       transition-all duration-300 ease-[cubic-bezier(0.4,0,0.2,1)]
                       hover:border-gray-300/80`,style:M,onMouseEnter:P,onMouseLeave:L,children:[O.jsxs("div",{className:"relative p-6 text-gray-900",children:[t.isLoading&&O.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-12",children:[O.jsxs("div",{className:"relative",children:[O.jsx(JK,{className:"w-8 h-8 text-blue-500 animate-spin"}),O.jsx("div",{className:"absolute inset-0 w-8 h-8 rounded-full bg-blue-500/20 animate-ping"})]}),O.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Generating content..."})]}),!t.isLoading&&O.jsx("header",{className:"flex flex-col items-center gap-4 mb-6",children:O.jsxs("div",{className:"flex items-center gap-3 group/header",children:[t.icon?O.jsx("div",{className:`w-12 h-12 flex items-center justify-center rounded-2xl bg-white/50 backdrop-blur-sm border border-white/80 
                                               transition-transform duration-200 ease-out group-hover/header:scale-105`,children:O.jsx("span",{className:"text-2xl",dangerouslySetInnerHTML:{__html:t.icon}})}):O.jsx("div",{className:`w-12 h-12 flex items-center justify-center rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 text-white 
                                               transition-transform duration-200 ease-out group-hover/header:scale-105`,children:O.jsx(Fw,{className:"w-6 h-6"})}),O.jsx("h2",{className:`text-2xl font-bold tracking-tight text-gray-900 
                                          transition-colors duration-200 group-hover/header:text-gray-700`,children:t.label||"Node"})]})}),!t.isLoading&&h,t.suggestions&&t.suggestions.length>0&&O.jsx(CY,{suggestions:t.suggestions,dragState:s,handleDragStart:_,handleOrigin:c,getParentCenter:m})]}),O.jsx(RY,{})]})}const IY={staticEditable:TY,draggableEditable:kY},NY={...IY,tempInput:tY};function DY(){const[t,e]=F.useState(!1),[n,r]=F.useState(!1),{user:s,signOut:o}=rY(),{notifications:l,removeNotification:c,showSuccess:f,showError:h,showInfo:m}=EY(),{nodes:_,edges:w,allBoards:C,currentBoard:M,isSwitchingBoard:P,isSaving:L,onNodesChange:j,onEdgesChange:H,setNodes:K,setEdges:y,switchToBoard:E,createNewBoard:b,deleteBoard:T,updateBoardName:A,clearBoardState:R,saveNewNodeContent:k}=bY(s,{showSuccess:f,showError:h,showInfo:m}),D=async()=>{await o(),R()},$=()=>{e(!0)},V=F.useCallback(B=>{const G={id:`e${B.source}-${B.target}`,source:B.source,target:B.target,sourceHandle:B.sourceHandle,targetHandle:B.targetHandle};H([{type:"add",item:G}])},[H]),U=F.useCallback((B,G,X,z,W)=>{if(!X||!W){console.warn("handleNodeCallback called without suggestion or position",X,W);return}const ee=`temp-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;K(ne=>[...ne,{id:ee,type:"tempInput",position:{x:W.x-80,y:W.y-40},data:{label:X,parent:z}}]);const Z="#3b82f6";z&&H([{type:"add",item:{id:`e${z}-${ee}`,source:z,target:ee,sourceHandle:X,style:{stroke:Z,strokeWidth:3},markerEnd:{type:Ro.ArrowClosed,color:Z}}}])},[K]),Q=F.useMemo(()=>_.map(B=>{let G={...B.data};return G.onNodeCallback=(X,z,W)=>U(B.id,B.data,X,z,W),B.type==="tempInput"&&(G.onNodeCallback=(X,z)=>{K(Ue=>Ue.map(Ne=>Ne.id===B.id?{...Ne,type:"draggableEditable",data:{...Ne.data,label:X}}:Ne));const W=_.find(Ue=>Ue.id===B.data.parent),ee=W?.data?.color,Z=W?.data?.label,ne={word:X},oe=B.data.parent,ce={x:B.position.x,y:B.position.y},xe=Kk(ne,oe,ce,"draggableEditable",_,K,j,H,ee,Z,void 0,!0,B,B.data.mode);if(K(Ue=>Ue.map(Ne=>Ne.id===B.id?{...Ne,data:{...Ne.data,myColor:xe}}:Ne)),B.data.parent){if(!xe)return;y(Ue=>Ue.map(Ne=>Ne.id===`e${B.data.parent}-${B.id}`?{...Ne,style:{...Ne.style||{},stroke:xe,strokeWidth:3},markerEnd:{type:Ro.ArrowClosed,color:xe}}:Ne))}}),{...B,data:G}}),[_,U,K]),x=F.useMemo(()=>O.jsxs(H3,{nodes:Q,edges:w,onNodesChange:j,onEdgesChange:H,onConnect:V,nodeTypes:NY,connectionMode:_a.Loose,fitView:!0,className:"bg-gray-50 dark:bg-gray-900 w-full h-full",children:[O.jsx(J5,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg"}),O.jsx(sO,{variant:Br.Cross,gap:30,size:10,lineWidth:.5,color:"#94a3b8",className:"bg-gray-50 dark:bg-gray-900"})]}),[Q,w,j,H,V]);return s?O.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 relative",style:{height:"100vh",width:"100vw",overflow:"hidden"},children:[O.jsx(PK,{notifications:l,onRemove:c}),O.jsx("div",{style:{height:"100%",position:"relative"},children:O.jsxs(cC,{direction:"horizontal",children:[O.jsx(H0,{defaultSize:15,minSize:10,maxSize:30,children:O.jsx("div",{className:"bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:O.jsx(kK,{allBoards:C,currentBoard:M,onSwitchBoard:E,onCreateBoard:async B=>{await b(B)},onDeleteBoard:T,onSignOut:D,isLoading:P})})}),O.jsx(dC,{}),O.jsx(H0,{children:O.jsxs("div",{className:"bg-white dark:bg-gray-800",style:{height:"100%",position:"relative"},children:[O.jsx(DK,{name:M?.name||"Loading...",onSetName:A,user:s,isSaving:L}),O.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",style:{height:"calc(100% - 60px)",width:"100%"},children:O.jsx(DH,{nodes:_,onNodesChange:j,onEdgesChange:H,setNodes:K,saveCallback:k,children:x})})]})})]})}),O.jsx(zK,{isVisible:n,onToggle:()=>r(!n)})]}):t?O.jsx(CK,{}):O.jsx(OK,{onLogin:$})}function MY(){return O.jsx(NK,{children:O.jsx(DY,{})})}const NI=document.getElementById("root");if(!NI)throw new Error("Failed to find the root element");fD.createRoot(NI).render(O.jsx(F.StrictMode,{children:O.jsx(MY,{})}));export{Hd as C,Qn as R,fC as _,RT as a,kM as b,$v as c,yd as d,Hv as e,j2 as f,jv as g,PY as h,na as i,H2 as n,EM as r,Jr as s};
