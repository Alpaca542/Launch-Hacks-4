(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Bw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _m={exports:{}},Eu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE;function dI(){if(sE)return Eu;sE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:e,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Eu.Fragment=t,Eu.jsx=n,Eu.jsxs=n,Eu}var aE;function gI(){return aE||(aE=1,_m.exports=dI()),_m.exports}var _t=gI(),vm={exports:{}},Ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE;function mI(){if(oE)return Ut;oE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function E(x){return x===null||typeof x!="object"?null:(x=v&&x[v]||x["@@iterator"],typeof x=="function"?x:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,L={};function V(x,G,W){this.props=x,this.context=G,this.refs=L,this.updater=W||S}V.prototype.isReactComponent={},V.prototype.setState=function(x,G){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,G,"setState")},V.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function B(){}B.prototype=V.prototype;function F(x,G,W){this.props=x,this.context=G,this.refs=L,this.updater=W||S}var q=F.prototype=new B;q.constructor=F,M(q,V.prototype),q.isPureReactComponent=!0;var H=Array.isArray,nt={H:null,A:null,T:null,S:null,V:null},et=Object.prototype.hasOwnProperty;function D(x,G,W,rt,ct,mt){return W=mt.ref,{$$typeof:e,type:x,key:G,ref:W!==void 0?W:null,props:mt}}function R(x,G){return D(x.type,G,void 0,void 0,void 0,x.props)}function I(x){return typeof x=="object"&&x!==null&&x.$$typeof===e}function P(x){var G={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(W){return G[W]})}var N=/\/+/g;function U(x,G){return typeof x=="object"&&x!==null&&x.key!=null?P(""+x.key):G.toString(36)}function A(){}function k(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(A,A):(x.status="pending",x.then(function(G){x.status==="pending"&&(x.status="fulfilled",x.value=G)},function(G){x.status==="pending"&&(x.status="rejected",x.reason=G)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function tt(x,G,W,rt,ct){var mt=typeof x;(mt==="undefined"||mt==="boolean")&&(x=null);var pt=!1;if(x===null)pt=!0;else switch(mt){case"bigint":case"string":case"number":pt=!0;break;case"object":switch(x.$$typeof){case e:case t:pt=!0;break;case y:return pt=x._init,tt(pt(x._payload),G,W,rt,ct)}}if(pt)return ct=ct(x),pt=rt===""?"."+U(x,0):rt,H(ct)?(W="",pt!=null&&(W=pt.replace(N,"$&/")+"/"),tt(ct,G,W,"",function(kt){return kt})):ct!=null&&(I(ct)&&(ct=R(ct,W+(ct.key==null||x&&x.key===ct.key?"":(""+ct.key).replace(N,"$&/")+"/")+pt)),G.push(ct)),1;pt=0;var It=rt===""?".":rt+":";if(H(x))for(var At=0;At<x.length;At++)rt=x[At],mt=It+U(rt,At),pt+=tt(rt,G,W,mt,ct);else if(At=E(x),typeof At=="function")for(x=At.call(x),At=0;!(rt=x.next()).done;)rt=rt.value,mt=It+U(rt,At++),pt+=tt(rt,G,W,mt,ct);else if(mt==="object"){if(typeof x.then=="function")return tt(k(x),G,W,rt,ct);throw G=String(x),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return pt}function O(x,G,W){if(x==null)return x;var rt=[],ct=0;return tt(x,rt,"","",function(mt){return G.call(W,mt,ct++)}),rt}function $(x){if(x._status===-1){var G=x._result;G=G(),G.then(function(W){(x._status===0||x._status===-1)&&(x._status=1,x._result=W)},function(W){(x._status===0||x._status===-1)&&(x._status=2,x._result=W)}),x._status===-1&&(x._status=0,x._result=G)}if(x._status===1)return x._result.default;throw x._result}var at=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)};function Y(){}return Ut.Children={map:O,forEach:function(x,G,W){O(x,function(){G.apply(this,arguments)},W)},count:function(x){var G=0;return O(x,function(){G++}),G},toArray:function(x){return O(x,function(G){return G})||[]},only:function(x){if(!I(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Ut.Component=V,Ut.Fragment=n,Ut.Profiler=a,Ut.PureComponent=F,Ut.StrictMode=r,Ut.Suspense=g,Ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=nt,Ut.__COMPILER_RUNTIME={__proto__:null,c:function(x){return nt.H.useMemoCache(x)}},Ut.cache=function(x){return function(){return x.apply(null,arguments)}},Ut.cloneElement=function(x,G,W){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var rt=M({},x.props),ct=x.key,mt=void 0;if(G!=null)for(pt in G.ref!==void 0&&(mt=void 0),G.key!==void 0&&(ct=""+G.key),G)!et.call(G,pt)||pt==="key"||pt==="__self"||pt==="__source"||pt==="ref"&&G.ref===void 0||(rt[pt]=G[pt]);var pt=arguments.length-2;if(pt===1)rt.children=W;else if(1<pt){for(var It=Array(pt),At=0;At<pt;At++)It[At]=arguments[At+2];rt.children=It}return D(x.type,ct,void 0,void 0,mt,rt)},Ut.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:l,_context:x},x},Ut.createElement=function(x,G,W){var rt,ct={},mt=null;if(G!=null)for(rt in G.key!==void 0&&(mt=""+G.key),G)et.call(G,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(ct[rt]=G[rt]);var pt=arguments.length-2;if(pt===1)ct.children=W;else if(1<pt){for(var It=Array(pt),At=0;At<pt;At++)It[At]=arguments[At+2];ct.children=It}if(x&&x.defaultProps)for(rt in pt=x.defaultProps,pt)ct[rt]===void 0&&(ct[rt]=pt[rt]);return D(x,mt,void 0,void 0,null,ct)},Ut.createRef=function(){return{current:null}},Ut.forwardRef=function(x){return{$$typeof:d,render:x}},Ut.isValidElement=I,Ut.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:$}},Ut.memo=function(x,G){return{$$typeof:m,type:x,compare:G===void 0?null:G}},Ut.startTransition=function(x){var G=nt.T,W={};nt.T=W;try{var rt=x(),ct=nt.S;ct!==null&&ct(W,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(Y,at)}catch(mt){at(mt)}finally{nt.T=G}},Ut.unstable_useCacheRefresh=function(){return nt.H.useCacheRefresh()},Ut.use=function(x){return nt.H.use(x)},Ut.useActionState=function(x,G,W){return nt.H.useActionState(x,G,W)},Ut.useCallback=function(x,G){return nt.H.useCallback(x,G)},Ut.useContext=function(x){return nt.H.useContext(x)},Ut.useDebugValue=function(){},Ut.useDeferredValue=function(x,G){return nt.H.useDeferredValue(x,G)},Ut.useEffect=function(x,G,W){var rt=nt.H;if(typeof W=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return rt.useEffect(x,G)},Ut.useId=function(){return nt.H.useId()},Ut.useImperativeHandle=function(x,G,W){return nt.H.useImperativeHandle(x,G,W)},Ut.useInsertionEffect=function(x,G){return nt.H.useInsertionEffect(x,G)},Ut.useLayoutEffect=function(x,G){return nt.H.useLayoutEffect(x,G)},Ut.useMemo=function(x,G){return nt.H.useMemo(x,G)},Ut.useOptimistic=function(x,G){return nt.H.useOptimistic(x,G)},Ut.useReducer=function(x,G,W){return nt.H.useReducer(x,G,W)},Ut.useRef=function(x){return nt.H.useRef(x)},Ut.useState=function(x){return nt.H.useState(x)},Ut.useSyncExternalStore=function(x,G,W){return nt.H.useSyncExternalStore(x,G,W)},Ut.useTransition=function(){return nt.H.useTransition()},Ut.version="19.1.0",Ut}var lE;function oc(){return lE||(lE=1,vm.exports=mI()),vm.exports}var X=oc();const lt=Bw(X);var Em={exports:{}},Tu={},Tm={exports:{}},wm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uE;function pI(){return uE||(uE=1,function(e){function t(O,$){var at=O.length;O.push($);t:for(;0<at;){var Y=at-1>>>1,x=O[Y];if(0<a(x,$))O[Y]=$,O[at]=x,at=Y;else break t}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var $=O[0],at=O.pop();if(at!==$){O[0]=at;t:for(var Y=0,x=O.length,G=x>>>1;Y<G;){var W=2*(Y+1)-1,rt=O[W],ct=W+1,mt=O[ct];if(0>a(rt,at))ct<x&&0>a(mt,rt)?(O[Y]=mt,O[ct]=at,Y=ct):(O[Y]=rt,O[W]=at,Y=W);else if(ct<x&&0>a(mt,at))O[Y]=mt,O[ct]=at,Y=ct;else break t}}return $}function a(O,$){var at=O.sortIndex-$.sortIndex;return at!==0?at:O.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var g=[],m=[],y=1,v=null,E=3,S=!1,M=!1,L=!1,V=!1,B=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function H(O){for(var $=n(m);$!==null;){if($.callback===null)r(m);else if($.startTime<=O)r(m),$.sortIndex=$.expirationTime,t(g,$);else break;$=n(m)}}function nt(O){if(L=!1,H(O),!M)if(n(g)!==null)M=!0,et||(et=!0,U());else{var $=n(m);$!==null&&tt(nt,$.startTime-O)}}var et=!1,D=-1,R=5,I=-1;function P(){return V?!0:!(e.unstable_now()-I<R)}function N(){if(V=!1,et){var O=e.unstable_now();I=O;var $=!0;try{t:{M=!1,L&&(L=!1,F(D),D=-1),S=!0;var at=E;try{e:{for(H(O),v=n(g);v!==null&&!(v.expirationTime>O&&P());){var Y=v.callback;if(typeof Y=="function"){v.callback=null,E=v.priorityLevel;var x=Y(v.expirationTime<=O);if(O=e.unstable_now(),typeof x=="function"){v.callback=x,H(O),$=!0;break e}v===n(g)&&r(g),H(O)}else r(g);v=n(g)}if(v!==null)$=!0;else{var G=n(m);G!==null&&tt(nt,G.startTime-O),$=!1}}break t}finally{v=null,E=at,S=!1}$=void 0}}finally{$?U():et=!1}}}var U;if(typeof q=="function")U=function(){q(N)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,k=A.port2;A.port1.onmessage=N,U=function(){k.postMessage(null)}}else U=function(){B(N,0)};function tt(O,$){D=B(function(){O(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_next=function(O){switch(E){case 1:case 2:case 3:var $=3;break;default:$=E}var at=E;E=$;try{return O()}finally{E=at}},e.unstable_requestPaint=function(){V=!0},e.unstable_runWithPriority=function(O,$){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var at=E;E=O;try{return $()}finally{E=at}},e.unstable_scheduleCallback=function(O,$,at){var Y=e.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?Y+at:Y):at=Y,O){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=at+x,O={id:y++,callback:$,priorityLevel:O,startTime:at,expirationTime:x,sortIndex:-1},at>Y?(O.sortIndex=at,t(m,O),n(g)===null&&O===n(m)&&(L?(F(D),D=-1):L=!0,tt(nt,at-Y))):(O.sortIndex=x,t(g,O),M||S||(M=!0,et||(et=!0,U()))),O},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(O){var $=E;return function(){var at=E;E=$;try{return O.apply(this,arguments)}finally{E=at}}}}(wm)),wm}var cE;function yI(){return cE||(cE=1,Tm.exports=pI()),Tm.exports}var Sm={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hE;function _I(){if(hE)return _n;hE=1;var e=oc();function t(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,m,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:g,containerInfo:m,implementation:y}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_n.createPortal=function(g,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return l(g,m,null,y)},_n.flushSync=function(g){var m=c.T,y=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=m,r.p=y,r.d.f()}},_n.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(g,m))},_n.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},_n.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin),E=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?r.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:S}):y==="script"&&r.d.X(g,{crossOrigin:v,integrity:E,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},_n.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=d(m.as,m.crossOrigin);r.d.M(g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(g)},_n.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin);r.d.L(g,y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},_n.preloadModule=function(g,m){if(typeof g=="string")if(m){var y=d(m.as,m.crossOrigin);r.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(g)},_n.requestFormReset=function(g){r.d.r(g)},_n.unstable_batchedUpdates=function(g,m){return g(m)},_n.useFormState=function(g,m,y){return c.H.useFormState(g,m,y)},_n.useFormStatus=function(){return c.H.useHostTransitionStatus()},_n.version="19.1.0",_n}var fE;function Hw(){if(fE)return Sm.exports;fE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Sm.exports=_I(),Sm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dE;function vI(){if(dE)return Tu;dE=1;var e=yI(),t=oc(),n=Hw();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(r(188))}function g(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return d(f),i;if(p===u)return d(f),s;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=p;else{for(var w=!1,b=f.child;b;){if(b===o){w=!0,o=f,u=p;break}if(b===u){w=!0,u=f,o=p;break}b=b.sibling}if(!w){for(b=p.child;b;){if(b===o){w=!0,o=p,u=f;break}if(b===u){w=!0,u=p,o=f;break}b=b.sibling}if(!w)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function m(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=m(i),s!==null)return s;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),q=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),nt=Symbol.for("react.suspense"),et=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=N&&i[N]||i["@@iterator"],typeof i=="function"?i:null)}var A=Symbol.for("react.client.reference");function k(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===A?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case V:return"Profiler";case L:return"StrictMode";case nt:return"Suspense";case et:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case q:return(i.displayName||"Context")+".Provider";case F:return(i._context.displayName||"Context")+".Consumer";case H:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return s=i.displayName||null,s!==null?s:k(i.type)||"Memo";case R:s=i._payload,i=i._init;try{return k(i(s))}catch{}}return null}var tt=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at={pending:!1,data:null,method:null,action:null},Y=[],x=-1;function G(i){return{current:i}}function W(i){0>x||(i.current=Y[x],Y[x]=null,x--)}function rt(i,s){x++,Y[x]=i.current,i.current=s}var ct=G(null),mt=G(null),pt=G(null),It=G(null);function At(i,s){switch(rt(pt,s),rt(mt,i),rt(ct,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Mv(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Mv(s),i=Vv(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}W(ct),rt(ct,i)}function kt(){W(ct),W(mt),W(pt)}function Pt(i){i.memoizedState!==null&&rt(It,i);var s=ct.current,o=Vv(s,i.type);s!==o&&(rt(mt,i),rt(ct,o))}function ue(i){mt.current===i&&(W(ct),W(mt)),It.current===i&&(W(It),mu._currentValue=at)}var ce=Object.prototype.hasOwnProperty,ve=e.unstable_scheduleCallback,ye=e.unstable_cancelCallback,he=e.unstable_shouldYield,Xe=e.unstable_requestPaint,Lt=e.unstable_now,wt=e.unstable_getCurrentPriorityLevel,xe=e.unstable_ImmediatePriority,pn=e.unstable_UserBlockingPriority,Un=e.unstable_NormalPriority,Li=e.unstable_LowPriority,zn=e.unstable_IdlePriority,Sn=e.log,wi=e.unstable_setDisableYieldValue,te=null,Ft=null;function Ve(i){if(typeof Sn=="function"&&wi(i),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(te,i)}catch{}}var Ee=Math.clz32?Math.clz32:Qe,Ui=Math.log,ke=Math.LN2;function Qe(i){return i>>>=0,i===0?32:31-(Ui(i)/ke|0)|0}var bn=256,An=4194304;function Ze(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function an(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,p=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var b=u&134217727;return b!==0?(u=b&~p,u!==0?f=Ze(u):(w&=b,w!==0?f=Ze(w):o||(o=b&~i,o!==0&&(f=Ze(o))))):(b=u&~p,b!==0?f=Ze(b):w!==0?f=Ze(w):o||(o=u&~i,o!==0&&(f=Ze(o)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:f}function Rn(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function fr(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dr(){var i=bn;return bn<<=1,(bn&4194048)===0&&(bn=256),i}function Si(){var i=An;return An<<=1,(An&62914560)===0&&(An=4194304),i}function Bn(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function ei(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Hn(i,s,o,u,f,p){var w=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var b=i.entanglements,z=i.expirationTimes,J=i.hiddenUpdates;for(o=w&~o;0<o;){var ut=31-Ee(o),ft=1<<ut;b[ut]=0,z[ut]=-1;var it=J[ut];if(it!==null)for(J[ut]=null,ut=0;ut<it.length;ut++){var st=it[ut];st!==null&&(st.lane&=-536870913)}o&=~ft}u!==0&&ni(i,u,0),p!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=p&~(w&~s))}function ni(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-Ee(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&4194090}function Qs(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-Ee(o),f=1<<u;f&s|i[u]&s&&(i[u]|=s),o&=~f}}function zi(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Qr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Bi(){var i=$.p;return i!==0?i:(i=window.event,i===void 0?32:Jv(i.type))}function Ka(i,s){var o=$.p;try{return $.p=i,s()}finally{$.p=o}}var de=Math.random().toString(36).slice(2),Ne="__reactFiber$"+de,be="__reactProps$"+de,Nn="__reactContainer$"+de,Zs="__reactEvents$"+de,Tl="__reactListeners$"+de,Hi="__reactHandles$"+de,Xa="__reactResources$"+de,gr="__reactMarker$"+de;function qi(i){delete i[Ne],delete i[be],delete i[Zs],delete i[Tl],delete i[Hi]}function ii(i){var s=i[Ne];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Nn]||o[Ne]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=Uv(i);i!==null;){if(o=i[Ne])return o;i=Uv(i)}return s}i=o,o=i.parentNode}return null}function ri(i){if(i=i[Ne]||i[Nn]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function si(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function on(i){var s=i[Xa];return s||(s=i[Xa]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Te(i){i[gr]=!0}var Ws=new Set,Zr={};function qn(i,s){bi(i,s),bi(i+"Capture",s)}function bi(i,s){for(Zr[i]=s,i=0;i<s.length;i++)Ws.add(s[i])}var Js=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qa={},mr={};function Za(i){return ce.call(mr,i)?!0:ce.call(Qa,i)?!1:Js.test(i)?mr[i]=!0:(Qa[i]=!0,!1)}function Fi(i,s,o){if(Za(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function ai(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function He(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}var ji,Wa;function Ai(i){if(ji===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);ji=s&&s[1]||"",Wa=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ji+i+Wa}var Wr=!1;function Gi(i,s){if(!i||Wr)return"";Wr=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(st){var it=st}Reflect.construct(i,[],ft)}else{try{ft.call()}catch(st){it=st}i.call(ft.prototype)}}else{try{throw Error()}catch(st){it=st}(ft=i())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(st){if(st&&it&&typeof st.stack=="string")return[st.stack,it.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),w=p[0],b=p[1];if(w&&b){var z=w.split(`
`),J=b.split(`
`);for(f=u=0;u<z.length&&!z[u].includes("DetermineComponentFrameRoot");)u++;for(;f<J.length&&!J[f].includes("DetermineComponentFrameRoot");)f++;if(u===z.length||f===J.length)for(u=z.length-1,f=J.length-1;1<=u&&0<=f&&z[u]!==J[f];)f--;for(;1<=u&&0<=f;u--,f--)if(z[u]!==J[f]){if(u!==1||f!==1)do if(u--,f--,0>f||z[u]!==J[f]){var ut=`
`+z[u].replace(" at new "," at ");return i.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",i.displayName)),ut}while(1<=u&&0<=f);break}}}finally{Wr=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Ai(o):""}function wl(i){switch(i.tag){case 26:case 27:case 5:return Ai(i.type);case 16:return Ai("Lazy");case 13:return Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 15:return Gi(i.type,!1);case 11:return Gi(i.type.render,!1);case 1:return Gi(i.type,!0);case 31:return Ai("Activity");default:return""}}function Ja(i){try{var s="";do s+=wl(i),i=i.return;while(i);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function In(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Sl(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function wd(i){var s=Sl(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),u=""+i[s];if(!i.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){u=""+w,p.call(this,w)}}),Object.defineProperty(i,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function to(i){i._valueTracker||(i._valueTracker=wd(i))}function bl(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=Sl(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function ta(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Sd=/[\n"\\]/g;function Pe(i){return i.replace(Sd,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Fn(i,s,o,u,f,p,w,b){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),s!=null?w==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+In(s)):i.value!==""+In(s)&&(i.value=""+In(s)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),s!=null?Jr(i,w,In(s)):o!=null?Jr(i,w,In(o)):u!=null&&i.removeAttribute("value"),f==null&&p!=null&&(i.defaultChecked=!!p),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.name=""+In(b):i.removeAttribute("name")}function ea(i,s,o,u,f,p,w,b){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+In(o):"",s=s!=null?""+In(s):o,b||s===i.value||(i.value=s),i.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=b?i.checked:!!u,i.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w)}function Jr(i,s,o){s==="number"&&ta(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function pr(i,s,o,u){if(i=i.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=s.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+In(o),s=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function se(i,s,o){if(s!=null&&(s=""+In(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+In(o):""}function na(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(tt(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=In(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u)}function oi(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var ia=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bc(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||ia.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function Al(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&bc(i,f,u)}else for(var p in s)s.hasOwnProperty(p)&&bc(i,p,s[p])}function Rl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ad=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function eo(i){return Ad.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var yr=null;function li(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var _r=null,vr=null;function Il(i){var s=ri(i);if(s&&(i=s.stateNode)){var o=i[be]||null;t:switch(i=s.stateNode,s.type){case"input":if(Fn(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Pe(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var f=u[be]||null;if(!f)throw Error(r(90));Fn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&bl(u)}break t;case"textarea":se(i,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&pr(i,!!o.multiple,s,!1)}}}var $i=!1;function Ac(i,s,o){if($i)return i(s,o);$i=!0;try{var u=i(s);return u}finally{if($i=!1,(_r!==null||vr!==null)&&(_h(),_r&&(s=_r,i=vr,vr=_r=null,Il(s),i)))for(s=0;s<i.length;s++)Il(i[s])}}function ra(i,s){var o=i.stateNode;if(o===null)return null;var u=o[be]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ui=!1;if(Ri)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){ui=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{ui=!1}var Yi=null,ts=null,Er=null;function Cl(){if(Er)return Er;var i,s=ts,o=s.length,u,f="value"in Yi?Yi.value:Yi.textContent,p=f.length;for(i=0;i<o&&s[i]===f[i];i++);var w=o-i;for(u=1;u<=w&&s[o-u]===f[p-u];u++);return Er=f.slice(i,1<u?1-u:void 0)}function Ki(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Xi(){return!0}function xl(){return!1}function We(i){function s(o,u,f,p,w){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(o=i[b],this[b]=o?o(p):p[b]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Xi:xl,this.isPropagationStopped=xl,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Xi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Xi)},persist:function(){},isPersistent:Xi}),s}var ee={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=We(ee),aa=y({},ee,{view:0,detail:0}),Rc=We(aa),io,ro,Qi,oa=y({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ca,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Qi&&(Qi&&i.type==="mousemove"?(io=i.screenX-Qi.screenX,ro=i.screenY-Qi.screenY):ro=io=0,Qi=i),io)},movementY:function(i){return"movementY"in i?i.movementY:ro}}),ci=We(oa),Ic=y({},oa,{dataTransfer:0}),Rd=We(Ic),la=y({},aa,{relatedTarget:0}),so=We(la),Nl=y({},ee,{animationName:0,elapsedTime:0,pseudoElement:0}),ao=We(Nl),Cc=y({},ee,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),oo=We(Cc),Id=y({},ee,{data:0}),Dl=We(Id),ua={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ol(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Nc[i])?!!s[i]:!1}function ca(){return Ol}var Dc=y({},aa,{key:function(i){if(i.key){var s=ua[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Ki(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?xc[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ca,charCode:function(i){return i.type==="keypress"?Ki(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ki(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),lo=We(Dc),Oc=y({},oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ml=We(Oc),Tr=y({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ca}),Mc=We(Tr),Vc=y({},ee,{propertyName:0,elapsedTime:0,pseudoElement:0}),kc=We(Vc),Pc=y({},oa,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),uo=We(Pc),Cn=y({},ee,{newState:0,oldState:0}),Lc=We(Cn),Uc=[9,13,27,32],Zi=Ri&&"CompositionEvent"in window,h=null;Ri&&"documentMode"in document&&(h=document.documentMode);var _=Ri&&"TextEvent"in window&&!h,T=Ri&&(!Zi||h&&8<h&&11>=h),C=" ",Q=!1;function ot(i,s){switch(i){case"keyup":return Uc.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Kt=!1;function qe(i,s){switch(i){case"compositionend":return yt(s);case"keypress":return s.which!==32?null:(Q=!0,C);case"textInput":return i=s.data,i===C&&Q?null:i;default:return null}}function Xt(i,s){if(Kt)return i==="compositionend"||!Zi&&ot(i,s)?(i=Cl(),Er=ts=Yi=null,Kt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return T&&s.locale!=="ko"?null:s.data;default:return null}}var Je={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fe(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Je[i.type]:s==="textarea"}function wr(i,s,o,u){_r?vr?vr.push(u):vr=[u]:_r=u,s=bh(s,"onChange"),0<s.length&&(o=new no("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var ln=null,Wi=null;function Vl(i){Cv(i,0)}function zc(i){var s=si(i);if(bl(s))return i}function Xy(i,s){if(i==="change")return s}var Qy=!1;if(Ri){var Cd;if(Ri){var xd="oninput"in document;if(!xd){var Zy=document.createElement("div");Zy.setAttribute("oninput","return;"),xd=typeof Zy.oninput=="function"}Cd=xd}else Cd=!1;Qy=Cd&&(!document.documentMode||9<document.documentMode)}function Wy(){ln&&(ln.detachEvent("onpropertychange",Jy),Wi=ln=null)}function Jy(i){if(i.propertyName==="value"&&zc(Wi)){var s=[];wr(s,Wi,i,li(i)),Ac(Vl,s)}}function FA(i,s,o){i==="focusin"?(Wy(),ln=s,Wi=o,ln.attachEvent("onpropertychange",Jy)):i==="focusout"&&Wy()}function jA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return zc(Wi)}function GA(i,s){if(i==="click")return zc(s)}function $A(i,s){if(i==="input"||i==="change")return zc(s)}function YA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var jn=typeof Object.is=="function"?Object.is:YA;function kl(i,s){if(jn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!ce.call(s,f)||!jn(i[f],s[f]))return!1}return!0}function t_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function e_(i,s){var o=t_(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=t_(o)}}function n_(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?n_(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function i_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=ta(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=ta(i.document)}return s}function Nd(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var KA=Ri&&"documentMode"in document&&11>=document.documentMode,co=null,Dd=null,Pl=null,Od=!1;function r_(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Od||co==null||co!==ta(u)||(u=co,"selectionStart"in u&&Nd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Pl&&kl(Pl,u)||(Pl=u,u=bh(Dd,"onSelect"),0<u.length&&(s=new no("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=co)))}function ha(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var ho={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionrun:ha("Transition","TransitionRun"),transitionstart:ha("Transition","TransitionStart"),transitioncancel:ha("Transition","TransitionCancel"),transitionend:ha("Transition","TransitionEnd")},Md={},s_={};Ri&&(s_=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function fa(i){if(Md[i])return Md[i];if(!ho[i])return i;var s=ho[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in s_)return Md[i]=s[o];return i}var a_=fa("animationend"),o_=fa("animationiteration"),l_=fa("animationstart"),XA=fa("transitionrun"),QA=fa("transitionstart"),ZA=fa("transitioncancel"),u_=fa("transitionend"),c_=new Map,Vd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vd.push("scrollEnd");function Ii(i,s){c_.set(i,s),qn(s,[i])}var h_=new WeakMap;function hi(i,s){if(typeof i=="object"&&i!==null){var o=h_.get(i);return o!==void 0?o:(s={value:i,source:s,stack:Ja(s)},h_.set(i,s),s)}return{value:i,source:s,stack:Ja(s)}}var fi=[],fo=0,kd=0;function Bc(){for(var i=fo,s=kd=fo=0;s<i;){var o=fi[s];fi[s++]=null;var u=fi[s];fi[s++]=null;var f=fi[s];fi[s++]=null;var p=fi[s];if(fi[s++]=null,u!==null&&f!==null){var w=u.pending;w===null?f.next=f:(f.next=w.next,w.next=f),u.pending=f}p!==0&&f_(o,f,p)}}function Hc(i,s,o,u){fi[fo++]=i,fi[fo++]=s,fi[fo++]=o,fi[fo++]=u,kd|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Pd(i,s,o,u){return Hc(i,s,o,u),qc(i)}function go(i,s){return Hc(i,null,null,s),qc(i)}function f_(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=i.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(f=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,f&&s!==null&&(f=31-Ee(o),i=p.hiddenUpdates,u=i[f],u===null?i[f]=[s]:u.push(s),s.lane=o|536870912),p):null}function qc(i){if(50<ou)throw ou=0,qg=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var mo={};function WA(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(i,s,o,u){return new WA(i,s,o,u)}function Ld(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Sr(i,s){var o=i.alternate;return o===null?(o=Gn(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function d_(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Fc(i,s,o,u,f,p){var w=0;if(u=i,typeof i=="function")Ld(i)&&(w=1);else if(typeof i=="string")w=tI(i,o,ct.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case I:return i=Gn(31,o,s,f),i.elementType=I,i.lanes=p,i;case M:return da(o.children,f,p,s);case L:w=8,f|=24;break;case V:return i=Gn(12,o,s,f|2),i.elementType=V,i.lanes=p,i;case nt:return i=Gn(13,o,s,f),i.elementType=nt,i.lanes=p,i;case et:return i=Gn(19,o,s,f),i.elementType=et,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:case q:w=10;break t;case F:w=9;break t;case H:w=11;break t;case D:w=14;break t;case R:w=16,u=null;break t}w=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=Gn(w,o,s,f),s.elementType=i,s.type=u,s.lanes=p,s}function da(i,s,o,u){return i=Gn(7,i,u,s),i.lanes=o,i}function Ud(i,s,o){return i=Gn(6,i,null,s),i.lanes=o,i}function zd(i,s,o){return s=Gn(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var po=[],yo=0,jc=null,Gc=0,di=[],gi=0,ga=null,br=1,Ar="";function ma(i,s){po[yo++]=Gc,po[yo++]=jc,jc=i,Gc=s}function g_(i,s,o){di[gi++]=br,di[gi++]=Ar,di[gi++]=ga,ga=i;var u=br;i=Ar;var f=32-Ee(u)-1;u&=~(1<<f),o+=1;var p=32-Ee(s)+f;if(30<p){var w=f-f%5;p=(u&(1<<w)-1).toString(32),u>>=w,f-=w,br=1<<32-Ee(s)+f|o<<f|u,Ar=p+i}else br=1<<p|o<<f|u,Ar=i}function Bd(i){i.return!==null&&(ma(i,1),g_(i,1,0))}function Hd(i){for(;i===jc;)jc=po[--yo],po[yo]=null,Gc=po[--yo],po[yo]=null;for(;i===ga;)ga=di[--gi],di[gi]=null,Ar=di[--gi],di[gi]=null,br=di[--gi],di[gi]=null}var xn=null,Ae=null,Jt=!1,pa=null,Ji=!1,qd=Error(r(519));function ya(i){var s=Error(r(418,""));throw zl(hi(s,i)),qd}function m_(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[Ne]=i,s[be]=u,o){case"dialog":Gt("cancel",s),Gt("close",s);break;case"iframe":case"object":case"embed":Gt("load",s);break;case"video":case"audio":for(o=0;o<uu.length;o++)Gt(uu[o],s);break;case"source":Gt("error",s);break;case"img":case"image":case"link":Gt("error",s),Gt("load",s);break;case"details":Gt("toggle",s);break;case"input":Gt("invalid",s),ea(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),to(s);break;case"select":Gt("invalid",s);break;case"textarea":Gt("invalid",s),na(s,u.value,u.defaultValue,u.children),to(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||Ov(s.textContent,o)?(u.popover!=null&&(Gt("beforetoggle",s),Gt("toggle",s)),u.onScroll!=null&&Gt("scroll",s),u.onScrollEnd!=null&&Gt("scrollend",s),u.onClick!=null&&(s.onclick=Ah),s=!0):s=!1,s||ya(i)}function p_(i){for(xn=i.return;xn;)switch(xn.tag){case 5:case 13:Ji=!1;return;case 27:case 3:Ji=!0;return;default:xn=xn.return}}function Ll(i){if(i!==xn)return!1;if(!Jt)return p_(i),Jt=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||rm(i.type,i.memoizedProps)),o=!o),o&&Ae&&ya(i),p_(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(s===0){Ae=xi(i.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;i=i.nextSibling}Ae=null}}else s===27?(s=Ae,ps(i.type)?(i=lm,lm=null,Ae=i):Ae=s):Ae=xn?xi(i.stateNode.nextSibling):null;return!0}function Ul(){Ae=xn=null,Jt=!1}function y_(){var i=pa;return i!==null&&(Mn===null?Mn=i:Mn.push.apply(Mn,i),pa=null),i}function zl(i){pa===null?pa=[i]:pa.push(i)}var Fd=G(null),_a=null,Rr=null;function es(i,s,o){rt(Fd,s._currentValue),s._currentValue=o}function Ir(i){i._currentValue=Fd.current,W(Fd)}function jd(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function Gd(i,s,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var p=f.dependencies;if(p!==null){var w=f.child;p=p.firstContext;t:for(;p!==null;){var b=p;p=f;for(var z=0;z<s.length;z++)if(b.context===s[z]){p.lanes|=o,b=p.alternate,b!==null&&(b.lanes|=o),jd(p.return,o,i),u||(w=null);break t}p=b.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(r(341));w.lanes|=o,p=w.alternate,p!==null&&(p.lanes|=o),jd(w,o,i),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===i){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function Bl(i,s,o,u){i=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var b=f.type;jn(f.pendingProps.value,w.value)||(i!==null?i.push(b):i=[b])}}else if(f===It.current){if(w=f.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(mu):i=[mu])}f=f.return}i!==null&&Gd(s,i,o,u),s.flags|=262144}function $c(i){for(i=i.firstContext;i!==null;){if(!jn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function va(i){_a=i,Rr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function yn(i){return __(_a,i)}function Yc(i,s){return _a===null&&va(i),__(i,s)}function __(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Rr===null){if(i===null)throw Error(r(308));Rr=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Rr=Rr.next=s;return o}var JA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},tR=e.unstable_scheduleCallback,eR=e.unstable_NormalPriority,je={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $d(){return{controller:new JA,data:new Map,refCount:0}}function Hl(i){i.refCount--,i.refCount===0&&tR(eR,function(){i.controller.abort()})}var ql=null,Yd=0,_o=0,vo=null;function nR(i,s){if(ql===null){var o=ql=[];Yd=0,_o=Xg(),vo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Yd++,s.then(v_,v_),s}function v_(){if(--Yd===0&&ql!==null){vo!==null&&(vo.status="fulfilled");var i=ql;ql=null,_o=0,vo=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function iR(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var E_=O.S;O.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&nR(i,s),E_!==null&&E_(i,s)};var Ea=G(null);function Kd(){var i=Ea.current;return i!==null?i:ge.pooledCache}function Kc(i,s){s===null?rt(Ea,Ea.current):rt(Ea,s.pool)}function T_(){var i=Kd();return i===null?null:{parent:je._currentValue,pool:i}}var Fl=Error(r(460)),w_=Error(r(474)),Xc=Error(r(542)),Xd={then:function(){}};function S_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Qc(){}function b_(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(Qc,Qc),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,R_(i),i;default:if(typeof s.status=="string")s.then(Qc,Qc);else{if(i=ge,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,R_(i),i}throw jl=s,Fl}}var jl=null;function A_(){if(jl===null)throw Error(r(459));var i=jl;return jl=null,i}function R_(i){if(i===Fl||i===Xc)throw Error(r(483))}var ns=!1;function Qd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zd(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function is(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function rs(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(ie&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=qc(i),f_(i,null,o),s}return Hc(i,u,s,o),qc(i)}function Gl(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Qs(i,o)}}function Wd(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=w:p=p.next=w,o=o.next}while(o!==null);p===null?f=p=s:p=p.next=s}else f=p=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var Jd=!1;function $l(){if(Jd){var i=vo;if(i!==null)throw i}}function Yl(i,s,o,u){Jd=!1;var f=i.updateQueue;ns=!1;var p=f.firstBaseUpdate,w=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var z=b,J=z.next;z.next=null,w===null?p=J:w.next=J,w=z;var ut=i.alternate;ut!==null&&(ut=ut.updateQueue,b=ut.lastBaseUpdate,b!==w&&(b===null?ut.firstBaseUpdate=J:b.next=J,ut.lastBaseUpdate=z))}if(p!==null){var ft=f.baseState;w=0,ut=J=z=null,b=p;do{var it=b.lane&-536870913,st=it!==b.lane;if(st?(Qt&it)===it:(u&it)===it){it!==0&&it===_o&&(Jd=!0),ut!==null&&(ut=ut.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var Ot=i,Ct=b;it=s;var le=o;switch(Ct.tag){case 1:if(Ot=Ct.payload,typeof Ot=="function"){ft=Ot.call(le,ft,it);break t}ft=Ot;break t;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Ct.payload,it=typeof Ot=="function"?Ot.call(le,ft,it):Ot,it==null)break t;ft=y({},ft,it);break t;case 2:ns=!0}}it=b.callback,it!==null&&(i.flags|=64,st&&(i.flags|=8192),st=f.callbacks,st===null?f.callbacks=[it]:st.push(it))}else st={lane:it,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ut===null?(J=ut=st,z=ft):ut=ut.next=st,w|=it;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;st=b,b=st.next,st.next=null,f.lastBaseUpdate=st,f.shared.pending=null}}while(!0);ut===null&&(z=ft),f.baseState=z,f.firstBaseUpdate=J,f.lastBaseUpdate=ut,p===null&&(f.shared.lanes=0),fs|=w,i.lanes=w,i.memoizedState=ft}}function I_(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function C_(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)I_(o[i],s)}var Eo=G(null),Zc=G(0);function x_(i,s){i=Vr,rt(Zc,i),rt(Eo,s),Vr=i|s.baseLanes}function tg(){rt(Zc,Vr),rt(Eo,Eo.current)}function eg(){Vr=Zc.current,W(Eo),W(Zc)}var ss=0,zt=null,ae=null,Le=null,Wc=!1,To=!1,Ta=!1,Jc=0,Kl=0,wo=null,rR=0;function De(){throw Error(r(321))}function ng(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!jn(i[o],s[o]))return!1;return!0}function ig(i,s,o,u,f,p){return ss=p,zt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,O.H=i===null||i.memoizedState===null?f0:d0,Ta=!1,p=o(u,f),Ta=!1,To&&(p=D_(s,o,u,f)),N_(i),p}function N_(i){O.H=sh;var s=ae!==null&&ae.next!==null;if(ss=0,Le=ae=zt=null,Wc=!1,Kl=0,wo=null,s)throw Error(r(300));i===null||tn||(i=i.dependencies,i!==null&&$c(i)&&(tn=!0))}function D_(i,s,o,u){zt=i;var f=0;do{if(To&&(wo=null),Kl=0,To=!1,25<=f)throw Error(r(301));if(f+=1,Le=ae=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}O.H=hR,p=s(o,u)}while(To);return p}function sR(){var i=O.H,s=i.useState()[0];return s=typeof s.then=="function"?Xl(s):s,i=i.useState()[0],(ae!==null?ae.memoizedState:null)!==i&&(zt.flags|=1024),s}function rg(){var i=Jc!==0;return Jc=0,i}function sg(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function ag(i){if(Wc){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Wc=!1}ss=0,Le=ae=zt=null,To=!1,Kl=Jc=0,wo=null}function Dn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?zt.memoizedState=Le=i:Le=Le.next=i,Le}function Ue(){if(ae===null){var i=zt.alternate;i=i!==null?i.memoizedState:null}else i=ae.next;var s=Le===null?zt.memoizedState:Le.next;if(s!==null)Le=s,ae=i;else{if(i===null)throw zt.alternate===null?Error(r(467)):Error(r(310));ae=i,i={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},Le===null?zt.memoizedState=Le=i:Le=Le.next=i}return Le}function og(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xl(i){var s=Kl;return Kl+=1,wo===null&&(wo=[]),i=b_(wo,i,s),s=zt,(Le===null?s.memoizedState:Le.next)===null&&(s=s.alternate,O.H=s===null||s.memoizedState===null?f0:d0),i}function th(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Xl(i);if(i.$$typeof===q)return yn(i)}throw Error(r(438,String(i)))}function lg(i){var s=null,o=zt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=zt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=og(),zt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=P;return s.index++,o}function Cr(i,s){return typeof s=="function"?s(i):s}function eh(i){var s=Ue();return ug(s,ae,i)}function ug(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=i.baseQueue,p=u.pending;if(p!==null){if(f!==null){var w=f.next;f.next=p.next,p.next=w}s.baseQueue=f=p,u.pending=null}if(p=i.baseState,f===null)i.memoizedState=p;else{s=f.next;var b=w=null,z=null,J=s,ut=!1;do{var ft=J.lane&-536870913;if(ft!==J.lane?(Qt&ft)===ft:(ss&ft)===ft){var it=J.revertLane;if(it===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ft===_o&&(ut=!0);else if((ss&it)===it){J=J.next,it===_o&&(ut=!0);continue}else ft={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},z===null?(b=z=ft,w=p):z=z.next=ft,zt.lanes|=it,fs|=it;ft=J.action,Ta&&o(p,ft),p=J.hasEagerState?J.eagerState:o(p,ft)}else it={lane:ft,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},z===null?(b=z=it,w=p):z=z.next=it,zt.lanes|=ft,fs|=ft;J=J.next}while(J!==null&&J!==s);if(z===null?w=p:z.next=b,!jn(p,i.memoizedState)&&(tn=!0,ut&&(o=vo,o!==null)))throw o;i.memoizedState=p,i.baseState=w,i.baseQueue=z,u.lastRenderedState=p}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function cg(i){var s=Ue(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,p=s.memoizedState;if(f!==null){o.pending=null;var w=f=f.next;do p=i(p,w.action),w=w.next;while(w!==f);jn(p,s.memoizedState)||(tn=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function O_(i,s,o){var u=zt,f=Ue(),p=Jt;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var w=!jn((ae||f).memoizedState,o);w&&(f.memoizedState=o,tn=!0),f=f.queue;var b=k_.bind(null,u,f,i);if(Ql(2048,8,b,[i]),f.getSnapshot!==s||w||Le!==null&&Le.memoizedState.tag&1){if(u.flags|=2048,So(9,nh(),V_.bind(null,u,f,o,s),null),ge===null)throw Error(r(349));p||(ss&124)!==0||M_(u,s,o)}return o}function M_(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=zt.updateQueue,s===null?(s=og(),zt.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function V_(i,s,o,u){s.value=o,s.getSnapshot=u,P_(s)&&L_(i)}function k_(i,s,o){return o(function(){P_(s)&&L_(i)})}function P_(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!jn(i,o)}catch{return!0}}function L_(i){var s=go(i,2);s!==null&&Qn(s,i,2)}function hg(i){var s=Dn();if(typeof i=="function"){var o=i;if(i=o(),Ta){Ve(!0);try{o()}finally{Ve(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:i},s}function U_(i,s,o,u){return i.baseState=o,ug(i,ae,typeof u=="function"?u:Cr)}function aR(i,s,o,u,f){if(rh(i))throw Error(r(485));if(i=s.action,i!==null){var p={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};O.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,z_(s,p)):(p.next=o.next,s.pending=o.next=p)}}function z_(i,s){var o=s.action,u=s.payload,f=i.state;if(s.isTransition){var p=O.T,w={};O.T=w;try{var b=o(f,u),z=O.S;z!==null&&z(w,b),B_(i,s,b)}catch(J){fg(i,s,J)}finally{O.T=p}}else try{p=o(f,u),B_(i,s,p)}catch(J){fg(i,s,J)}}function B_(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){H_(i,s,u)},function(u){return fg(i,s,u)}):H_(i,s,o)}function H_(i,s,o){s.status="fulfilled",s.value=o,q_(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,z_(i,o)))}function fg(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,q_(s),s=s.next;while(s!==u)}i.action=null}function q_(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function F_(i,s){return s}function j_(i,s){if(Jt){var o=ge.formState;if(o!==null){t:{var u=zt;if(Jt){if(Ae){e:{for(var f=Ae,p=Ji;f.nodeType!==8;){if(!p){f=null;break e}if(f=xi(f.nextSibling),f===null){f=null;break e}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Ae=xi(f.nextSibling),u=f.data==="F!";break t}}ya(u)}u=!1}u&&(s=o[0])}}return o=Dn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:F_,lastRenderedState:s},o.queue=u,o=u0.bind(null,zt,u),u.dispatch=o,u=hg(!1),p=yg.bind(null,zt,!1,u.queue),u=Dn(),f={state:s,dispatch:null,action:i,pending:null},u.queue=f,o=aR.bind(null,zt,f,p,o),f.dispatch=o,u.memoizedState=i,[s,o,!1]}function G_(i){var s=Ue();return $_(s,ae,i)}function $_(i,s,o){if(s=ug(i,s,F_)[0],i=eh(Cr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Xl(s)}catch(w){throw w===Fl?Xc:w}else u=s;s=Ue();var f=s.queue,p=f.dispatch;return o!==s.memoizedState&&(zt.flags|=2048,So(9,nh(),oR.bind(null,f,o),null)),[u,p,i]}function oR(i,s){i.action=s}function Y_(i){var s=Ue(),o=ae;if(o!==null)return $_(s,o,i);Ue(),s=s.memoizedState,o=Ue();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function So(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=zt.updateQueue,s===null&&(s=og(),zt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function nh(){return{destroy:void 0,resource:void 0}}function K_(){return Ue().memoizedState}function ih(i,s,o,u){var f=Dn();u=u===void 0?null:u,zt.flags|=i,f.memoizedState=So(1|s,nh(),o,u)}function Ql(i,s,o,u){var f=Ue();u=u===void 0?null:u;var p=f.memoizedState.inst;ae!==null&&u!==null&&ng(u,ae.memoizedState.deps)?f.memoizedState=So(s,p,o,u):(zt.flags|=i,f.memoizedState=So(1|s,p,o,u))}function X_(i,s){ih(8390656,8,i,s)}function Q_(i,s){Ql(2048,8,i,s)}function Z_(i,s){return Ql(4,2,i,s)}function W_(i,s){return Ql(4,4,i,s)}function J_(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function t0(i,s,o){o=o!=null?o.concat([i]):null,Ql(4,4,J_.bind(null,s,i),o)}function dg(){}function e0(i,s){var o=Ue();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&ng(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function n0(i,s){var o=Ue();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&ng(s,u[1]))return u[0];if(u=i(),Ta){Ve(!0);try{i()}finally{Ve(!1)}}return o.memoizedState=[u,s],u}function gg(i,s,o){return o===void 0||(ss&1073741824)!==0?i.memoizedState=s:(i.memoizedState=o,i=sv(),zt.lanes|=i,fs|=i,o)}function i0(i,s,o,u){return jn(o,s)?o:Eo.current!==null?(i=gg(i,o,u),jn(i,s)||(tn=!0),i):(ss&42)===0?(tn=!0,i.memoizedState=o):(i=sv(),zt.lanes|=i,fs|=i,s)}function r0(i,s,o,u,f){var p=$.p;$.p=p!==0&&8>p?p:8;var w=O.T,b={};O.T=b,yg(i,!1,s,o);try{var z=f(),J=O.S;if(J!==null&&J(b,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ut=iR(z,u);Zl(i,s,ut,Xn(i))}else Zl(i,s,u,Xn(i))}catch(ft){Zl(i,s,{then:function(){},status:"rejected",reason:ft},Xn())}finally{$.p=p,O.T=w}}function lR(){}function mg(i,s,o,u){if(i.tag!==5)throw Error(r(476));var f=s0(i).queue;r0(i,f,s,at,o===null?lR:function(){return a0(i),o(u)})}function s0(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:at,baseState:at,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:at},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function a0(i){var s=s0(i).next.queue;Zl(i,s,{},Xn())}function pg(){return yn(mu)}function o0(){return Ue().memoizedState}function l0(){return Ue().memoizedState}function uR(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=Xn();i=is(o);var u=rs(s,i,o);u!==null&&(Qn(u,s,o),Gl(u,s,o)),s={cache:$d()},i.payload=s;return}s=s.return}}function cR(i,s,o){var u=Xn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},rh(i)?c0(s,o):(o=Pd(i,s,o,u),o!==null&&(Qn(o,i,u),h0(o,s,u)))}function u0(i,s,o){var u=Xn();Zl(i,s,o,u)}function Zl(i,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(rh(i))c0(s,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var w=s.lastRenderedState,b=p(w,o);if(f.hasEagerState=!0,f.eagerState=b,jn(b,w))return Hc(i,s,f,0),ge===null&&Bc(),!1}catch{}finally{}if(o=Pd(i,s,f,u),o!==null)return Qn(o,i,u),h0(o,s,u),!0}return!1}function yg(i,s,o,u){if(u={lane:2,revertLane:Xg(),action:u,hasEagerState:!1,eagerState:null,next:null},rh(i)){if(s)throw Error(r(479))}else s=Pd(i,o,u,2),s!==null&&Qn(s,i,2)}function rh(i){var s=i.alternate;return i===zt||s!==null&&s===zt}function c0(i,s){To=Wc=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function h0(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Qs(i,o)}}var sh={readContext:yn,use:th,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useLayoutEffect:De,useInsertionEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useSyncExternalStore:De,useId:De,useHostTransitionStatus:De,useFormState:De,useActionState:De,useOptimistic:De,useMemoCache:De,useCacheRefresh:De},f0={readContext:yn,use:th,useCallback:function(i,s){return Dn().memoizedState=[i,s===void 0?null:s],i},useContext:yn,useEffect:X_,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,ih(4194308,4,J_.bind(null,s,i),o)},useLayoutEffect:function(i,s){return ih(4194308,4,i,s)},useInsertionEffect:function(i,s){ih(4,2,i,s)},useMemo:function(i,s){var o=Dn();s=s===void 0?null:s;var u=i();if(Ta){Ve(!0);try{i()}finally{Ve(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=Dn();if(o!==void 0){var f=o(s);if(Ta){Ve(!0);try{o(s)}finally{Ve(!1)}}}else f=s;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=cR.bind(null,zt,i),[u.memoizedState,i]},useRef:function(i){var s=Dn();return i={current:i},s.memoizedState=i},useState:function(i){i=hg(i);var s=i.queue,o=u0.bind(null,zt,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:dg,useDeferredValue:function(i,s){var o=Dn();return gg(o,i,s)},useTransition:function(){var i=hg(!1);return i=r0.bind(null,zt,i.queue,!0,!1),Dn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=zt,f=Dn();if(Jt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),ge===null)throw Error(r(349));(Qt&124)!==0||M_(u,s,o)}f.memoizedState=o;var p={value:o,getSnapshot:s};return f.queue=p,X_(k_.bind(null,u,p,i),[i]),u.flags|=2048,So(9,nh(),V_.bind(null,u,p,o,s),null),o},useId:function(){var i=Dn(),s=ge.identifierPrefix;if(Jt){var o=Ar,u=br;o=(u&~(1<<32-Ee(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=Jc++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=rR++,s="«"+s+"r"+o.toString(32)+"»";return i.memoizedState=s},useHostTransitionStatus:pg,useFormState:j_,useActionState:j_,useOptimistic:function(i){var s=Dn();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=yg.bind(null,zt,!0,o),o.dispatch=s,[i,s]},useMemoCache:lg,useCacheRefresh:function(){return Dn().memoizedState=uR.bind(null,zt)}},d0={readContext:yn,use:th,useCallback:e0,useContext:yn,useEffect:Q_,useImperativeHandle:t0,useInsertionEffect:Z_,useLayoutEffect:W_,useMemo:n0,useReducer:eh,useRef:K_,useState:function(){return eh(Cr)},useDebugValue:dg,useDeferredValue:function(i,s){var o=Ue();return i0(o,ae.memoizedState,i,s)},useTransition:function(){var i=eh(Cr)[0],s=Ue().memoizedState;return[typeof i=="boolean"?i:Xl(i),s]},useSyncExternalStore:O_,useId:o0,useHostTransitionStatus:pg,useFormState:G_,useActionState:G_,useOptimistic:function(i,s){var o=Ue();return U_(o,ae,i,s)},useMemoCache:lg,useCacheRefresh:l0},hR={readContext:yn,use:th,useCallback:e0,useContext:yn,useEffect:Q_,useImperativeHandle:t0,useInsertionEffect:Z_,useLayoutEffect:W_,useMemo:n0,useReducer:cg,useRef:K_,useState:function(){return cg(Cr)},useDebugValue:dg,useDeferredValue:function(i,s){var o=Ue();return ae===null?gg(o,i,s):i0(o,ae.memoizedState,i,s)},useTransition:function(){var i=cg(Cr)[0],s=Ue().memoizedState;return[typeof i=="boolean"?i:Xl(i),s]},useSyncExternalStore:O_,useId:o0,useHostTransitionStatus:pg,useFormState:Y_,useActionState:Y_,useOptimistic:function(i,s){var o=Ue();return ae!==null?U_(o,ae,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:lg,useCacheRefresh:l0},bo=null,Wl=0;function ah(i){var s=Wl;return Wl+=1,bo===null&&(bo=[]),b_(bo,i,s)}function Jl(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function oh(i,s){throw s.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function g0(i){var s=i._init;return s(i._payload)}function m0(i){function s(K,j){if(i){var Z=K.deletions;Z===null?(K.deletions=[j],K.flags|=16):Z.push(j)}}function o(K,j){if(!i)return null;for(;j!==null;)s(K,j),j=j.sibling;return null}function u(K){for(var j=new Map;K!==null;)K.key!==null?j.set(K.key,K):j.set(K.index,K),K=K.sibling;return j}function f(K,j){return K=Sr(K,j),K.index=0,K.sibling=null,K}function p(K,j,Z){return K.index=Z,i?(Z=K.alternate,Z!==null?(Z=Z.index,Z<j?(K.flags|=67108866,j):Z):(K.flags|=67108866,j)):(K.flags|=1048576,j)}function w(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function b(K,j,Z,ht){return j===null||j.tag!==6?(j=Ud(Z,K.mode,ht),j.return=K,j):(j=f(j,Z),j.return=K,j)}function z(K,j,Z,ht){var Tt=Z.type;return Tt===M?ut(K,j,Z.props.children,ht,Z.key):j!==null&&(j.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===R&&g0(Tt)===j.type)?(j=f(j,Z.props),Jl(j,Z),j.return=K,j):(j=Fc(Z.type,Z.key,Z.props,null,K.mode,ht),Jl(j,Z),j.return=K,j)}function J(K,j,Z,ht){return j===null||j.tag!==4||j.stateNode.containerInfo!==Z.containerInfo||j.stateNode.implementation!==Z.implementation?(j=zd(Z,K.mode,ht),j.return=K,j):(j=f(j,Z.children||[]),j.return=K,j)}function ut(K,j,Z,ht,Tt){return j===null||j.tag!==7?(j=da(Z,K.mode,ht,Tt),j.return=K,j):(j=f(j,Z),j.return=K,j)}function ft(K,j,Z){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Ud(""+j,K.mode,Z),j.return=K,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case E:return Z=Fc(j.type,j.key,j.props,null,K.mode,Z),Jl(Z,j),Z.return=K,Z;case S:return j=zd(j,K.mode,Z),j.return=K,j;case R:var ht=j._init;return j=ht(j._payload),ft(K,j,Z)}if(tt(j)||U(j))return j=da(j,K.mode,Z,null),j.return=K,j;if(typeof j.then=="function")return ft(K,ah(j),Z);if(j.$$typeof===q)return ft(K,Yc(K,j),Z);oh(K,j)}return null}function it(K,j,Z,ht){var Tt=j!==null?j.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Tt!==null?null:b(K,j,""+Z,ht);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case E:return Z.key===Tt?z(K,j,Z,ht):null;case S:return Z.key===Tt?J(K,j,Z,ht):null;case R:return Tt=Z._init,Z=Tt(Z._payload),it(K,j,Z,ht)}if(tt(Z)||U(Z))return Tt!==null?null:ut(K,j,Z,ht,null);if(typeof Z.then=="function")return it(K,j,ah(Z),ht);if(Z.$$typeof===q)return it(K,j,Yc(K,Z),ht);oh(K,Z)}return null}function st(K,j,Z,ht,Tt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return K=K.get(Z)||null,b(j,K,""+ht,Tt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case E:return K=K.get(ht.key===null?Z:ht.key)||null,z(j,K,ht,Tt);case S:return K=K.get(ht.key===null?Z:ht.key)||null,J(j,K,ht,Tt);case R:var Ht=ht._init;return ht=Ht(ht._payload),st(K,j,Z,ht,Tt)}if(tt(ht)||U(ht))return K=K.get(Z)||null,ut(j,K,ht,Tt,null);if(typeof ht.then=="function")return st(K,j,Z,ah(ht),Tt);if(ht.$$typeof===q)return st(K,j,Z,Yc(j,ht),Tt);oh(j,ht)}return null}function Ot(K,j,Z,ht){for(var Tt=null,Ht=null,St=j,xt=j=0,nn=null;St!==null&&xt<Z.length;xt++){St.index>xt?(nn=St,St=null):nn=St.sibling;var Wt=it(K,St,Z[xt],ht);if(Wt===null){St===null&&(St=nn);break}i&&St&&Wt.alternate===null&&s(K,St),j=p(Wt,j,xt),Ht===null?Tt=Wt:Ht.sibling=Wt,Ht=Wt,St=nn}if(xt===Z.length)return o(K,St),Jt&&ma(K,xt),Tt;if(St===null){for(;xt<Z.length;xt++)St=ft(K,Z[xt],ht),St!==null&&(j=p(St,j,xt),Ht===null?Tt=St:Ht.sibling=St,Ht=St);return Jt&&ma(K,xt),Tt}for(St=u(St);xt<Z.length;xt++)nn=st(St,K,xt,Z[xt],ht),nn!==null&&(i&&nn.alternate!==null&&St.delete(nn.key===null?xt:nn.key),j=p(nn,j,xt),Ht===null?Tt=nn:Ht.sibling=nn,Ht=nn);return i&&St.forEach(function(Ts){return s(K,Ts)}),Jt&&ma(K,xt),Tt}function Ct(K,j,Z,ht){if(Z==null)throw Error(r(151));for(var Tt=null,Ht=null,St=j,xt=j=0,nn=null,Wt=Z.next();St!==null&&!Wt.done;xt++,Wt=Z.next()){St.index>xt?(nn=St,St=null):nn=St.sibling;var Ts=it(K,St,Wt.value,ht);if(Ts===null){St===null&&(St=nn);break}i&&St&&Ts.alternate===null&&s(K,St),j=p(Ts,j,xt),Ht===null?Tt=Ts:Ht.sibling=Ts,Ht=Ts,St=nn}if(Wt.done)return o(K,St),Jt&&ma(K,xt),Tt;if(St===null){for(;!Wt.done;xt++,Wt=Z.next())Wt=ft(K,Wt.value,ht),Wt!==null&&(j=p(Wt,j,xt),Ht===null?Tt=Wt:Ht.sibling=Wt,Ht=Wt);return Jt&&ma(K,xt),Tt}for(St=u(St);!Wt.done;xt++,Wt=Z.next())Wt=st(St,K,xt,Wt.value,ht),Wt!==null&&(i&&Wt.alternate!==null&&St.delete(Wt.key===null?xt:Wt.key),j=p(Wt,j,xt),Ht===null?Tt=Wt:Ht.sibling=Wt,Ht=Wt);return i&&St.forEach(function(fI){return s(K,fI)}),Jt&&ma(K,xt),Tt}function le(K,j,Z,ht){if(typeof Z=="object"&&Z!==null&&Z.type===M&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case E:t:{for(var Tt=Z.key;j!==null;){if(j.key===Tt){if(Tt=Z.type,Tt===M){if(j.tag===7){o(K,j.sibling),ht=f(j,Z.props.children),ht.return=K,K=ht;break t}}else if(j.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===R&&g0(Tt)===j.type){o(K,j.sibling),ht=f(j,Z.props),Jl(ht,Z),ht.return=K,K=ht;break t}o(K,j);break}else s(K,j);j=j.sibling}Z.type===M?(ht=da(Z.props.children,K.mode,ht,Z.key),ht.return=K,K=ht):(ht=Fc(Z.type,Z.key,Z.props,null,K.mode,ht),Jl(ht,Z),ht.return=K,K=ht)}return w(K);case S:t:{for(Tt=Z.key;j!==null;){if(j.key===Tt)if(j.tag===4&&j.stateNode.containerInfo===Z.containerInfo&&j.stateNode.implementation===Z.implementation){o(K,j.sibling),ht=f(j,Z.children||[]),ht.return=K,K=ht;break t}else{o(K,j);break}else s(K,j);j=j.sibling}ht=zd(Z,K.mode,ht),ht.return=K,K=ht}return w(K);case R:return Tt=Z._init,Z=Tt(Z._payload),le(K,j,Z,ht)}if(tt(Z))return Ot(K,j,Z,ht);if(U(Z)){if(Tt=U(Z),typeof Tt!="function")throw Error(r(150));return Z=Tt.call(Z),Ct(K,j,Z,ht)}if(typeof Z.then=="function")return le(K,j,ah(Z),ht);if(Z.$$typeof===q)return le(K,j,Yc(K,Z),ht);oh(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,j!==null&&j.tag===6?(o(K,j.sibling),ht=f(j,Z),ht.return=K,K=ht):(o(K,j),ht=Ud(Z,K.mode,ht),ht.return=K,K=ht),w(K)):o(K,j)}return function(K,j,Z,ht){try{Wl=0;var Tt=le(K,j,Z,ht);return bo=null,Tt}catch(St){if(St===Fl||St===Xc)throw St;var Ht=Gn(29,St,null,K.mode);return Ht.lanes=ht,Ht.return=K,Ht}finally{}}}var Ao=m0(!0),p0=m0(!1),mi=G(null),tr=null;function as(i){var s=i.alternate;rt(Ge,Ge.current&1),rt(mi,i),tr===null&&(s===null||Eo.current!==null||s.memoizedState!==null)&&(tr=i)}function y0(i){if(i.tag===22){if(rt(Ge,Ge.current),rt(mi,i),tr===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(tr=i)}}else os()}function os(){rt(Ge,Ge.current),rt(mi,mi.current)}function xr(i){W(mi),tr===i&&(tr=null),W(Ge)}var Ge=G(0);function lh(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||om(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function _g(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var vg={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=Xn(),f=is(u);f.payload=s,o!=null&&(f.callback=o),s=rs(i,f,u),s!==null&&(Qn(s,i,u),Gl(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=Xn(),f=is(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=rs(i,f,u),s!==null&&(Qn(s,i,u),Gl(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=Xn(),u=is(o);u.tag=2,s!=null&&(u.callback=s),s=rs(i,u,o),s!==null&&(Qn(s,i,o),Gl(s,i,o))}};function _0(i,s,o,u,f,p,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,p,w):s.prototype&&s.prototype.isPureReactComponent?!kl(o,u)||!kl(f,p):!0}function v0(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&vg.enqueueReplaceState(s,s.state,null)}function wa(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=y({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}var uh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function E0(i){uh(i)}function T0(i){console.error(i)}function w0(i){uh(i)}function ch(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function S0(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Eg(i,s,o){return o=is(o),o.tag=3,o.payload={element:null},o.callback=function(){ch(i,s)},o}function b0(i){return i=is(i),i.tag=3,i}function A0(i,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;i.payload=function(){return f(p)},i.callback=function(){S0(s,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){S0(s,o,u),typeof f!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function fR(i,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Bl(s,o,f,!0),o=mi.current,o!==null){switch(o.tag){case 13:return tr===null?jg():o.alternate===null&&Re===0&&(Re=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Xd?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),$g(i,u,f)),!1;case 22:return o.flags|=65536,u===Xd?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),$g(i,u,f)),!1}throw Error(r(435,o.tag))}return $g(i,u,f),jg(),!1}if(Jt)return s=mi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==qd&&(i=Error(r(422),{cause:u}),zl(hi(i,o)))):(u!==qd&&(s=Error(r(423),{cause:u}),zl(hi(s,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=hi(u,o),f=Eg(i.stateNode,u,f),Wd(i,f),Re!==4&&(Re=2)),!1;var p=Error(r(520),{cause:u});if(p=hi(p,o),au===null?au=[p]:au.push(p),Re!==4&&(Re=2),s===null)return!0;u=hi(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=Eg(o.stateNode,u,i),Wd(o,i),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ds===null||!ds.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=b0(f),A0(f,i,o,u),Wd(o,f),!1}o=o.return}while(o!==null);return!1}var R0=Error(r(461)),tn=!1;function un(i,s,o,u){s.child=i===null?p0(s,null,o,u):Ao(s,i.child,o,u)}function I0(i,s,o,u,f){o=o.render;var p=s.ref;if("ref"in u){var w={};for(var b in u)b!=="ref"&&(w[b]=u[b])}else w=u;return va(s),u=ig(i,s,o,w,p,f),b=rg(),i!==null&&!tn?(sg(i,s,f),Nr(i,s,f)):(Jt&&b&&Bd(s),s.flags|=1,un(i,s,u,f),s.child)}function C0(i,s,o,u,f){if(i===null){var p=o.type;return typeof p=="function"&&!Ld(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,x0(i,s,p,u,f)):(i=Fc(o.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(p=i.child,!Cg(i,f)){var w=p.memoizedProps;if(o=o.compare,o=o!==null?o:kl,o(w,u)&&i.ref===s.ref)return Nr(i,s,f)}return s.flags|=1,i=Sr(p,u),i.ref=s.ref,i.return=s,s.child=i}function x0(i,s,o,u,f){if(i!==null){var p=i.memoizedProps;if(kl(p,u)&&i.ref===s.ref)if(tn=!1,s.pendingProps=u=p,Cg(i,f))(i.flags&131072)!==0&&(tn=!0);else return s.lanes=i.lanes,Nr(i,s,f)}return Tg(i,s,o,u,f)}function N0(i,s,o){var u=s.pendingProps,f=u.children,p=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,i!==null){for(f=s.child=i.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return D0(i,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Kc(s,p!==null?p.cachePool:null),p!==null?x_(s,p):tg(),y0(s);else return s.lanes=s.childLanes=536870912,D0(i,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(Kc(s,p.cachePool),x_(s,p),os(),s.memoizedState=null):(i!==null&&Kc(s,null),tg(),os());return un(i,s,f,o),s.child}function D0(i,s,o,u){var f=Kd();return f=f===null?null:{parent:je._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},i!==null&&Kc(s,null),tg(),y0(s),i!==null&&Bl(i,s,u,!0),null}function hh(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function Tg(i,s,o,u,f){return va(s),o=ig(i,s,o,u,void 0,f),u=rg(),i!==null&&!tn?(sg(i,s,f),Nr(i,s,f)):(Jt&&u&&Bd(s),s.flags|=1,un(i,s,o,f),s.child)}function O0(i,s,o,u,f,p){return va(s),s.updateQueue=null,o=D_(s,u,o,f),N_(i),u=rg(),i!==null&&!tn?(sg(i,s,p),Nr(i,s,p)):(Jt&&u&&Bd(s),s.flags|=1,un(i,s,o,p),s.child)}function M0(i,s,o,u,f){if(va(s),s.stateNode===null){var p=mo,w=o.contextType;typeof w=="object"&&w!==null&&(p=yn(w)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=vg,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},Qd(s),w=o.contextType,p.context=typeof w=="object"&&w!==null?yn(w):mo,p.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(_g(s,o,w,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&vg.enqueueReplaceState(p,p.state,null),Yl(s,u,p,f),$l(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){p=s.stateNode;var b=s.memoizedProps,z=wa(o,b);p.props=z;var J=p.context,ut=o.contextType;w=mo,typeof ut=="object"&&ut!==null&&(w=yn(ut));var ft=o.getDerivedStateFromProps;ut=typeof ft=="function"||typeof p.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,ut||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b||J!==w)&&v0(s,p,u,w),ns=!1;var it=s.memoizedState;p.state=it,Yl(s,u,p,f),$l(),J=s.memoizedState,b||it!==J||ns?(typeof ft=="function"&&(_g(s,o,ft,u),J=s.memoizedState),(z=ns||_0(s,o,z,u,it,J,w))?(ut||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=J),p.props=u,p.state=J,p.context=w,u=z):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,Zd(i,s),w=s.memoizedProps,ut=wa(o,w),p.props=ut,ft=s.pendingProps,it=p.context,J=o.contextType,z=mo,typeof J=="object"&&J!==null&&(z=yn(J)),b=o.getDerivedStateFromProps,(J=typeof b=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==ft||it!==z)&&v0(s,p,u,z),ns=!1,it=s.memoizedState,p.state=it,Yl(s,u,p,f),$l();var st=s.memoizedState;w!==ft||it!==st||ns||i!==null&&i.dependencies!==null&&$c(i.dependencies)?(typeof b=="function"&&(_g(s,o,b,u),st=s.memoizedState),(ut=ns||_0(s,o,ut,u,it,st,z)||i!==null&&i.dependencies!==null&&$c(i.dependencies))?(J||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,st,z),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,st,z)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=st),p.props=u,p.state=st,p.context=z,u=ut):(typeof p.componentDidUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=1024),u=!1)}return p=u,hh(i,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,i!==null&&u?(s.child=Ao(s,i.child,null,f),s.child=Ao(s,null,o,f)):un(i,s,o,f),s.memoizedState=p.state,i=s.child):i=Nr(i,s,f),i}function V0(i,s,o,u){return Ul(),s.flags|=256,un(i,s,o,u),s.child}var wg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sg(i){return{baseLanes:i,cachePool:T_()}}function bg(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=pi),i}function k0(i,s,o){var u=s.pendingProps,f=!1,p=(s.flags&128)!==0,w;if((w=p)||(w=i!==null&&i.memoizedState===null?!1:(Ge.current&2)!==0),w&&(f=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,i===null){if(Jt){if(f?as(s):os(),Jt){var b=Ae,z;if(z=b){t:{for(z=b,b=Ji;z.nodeType!==8;){if(!b){b=null;break t}if(z=xi(z.nextSibling),z===null){b=null;break t}}b=z}b!==null?(s.memoizedState={dehydrated:b,treeContext:ga!==null?{id:br,overflow:Ar}:null,retryLane:536870912,hydrationErrors:null},z=Gn(18,null,null,0),z.stateNode=b,z.return=s,s.child=z,xn=s,Ae=null,z=!0):z=!1}z||ya(s)}if(b=s.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return om(b)?s.lanes=32:s.lanes=536870912,null;xr(s)}return b=u.children,u=u.fallback,f?(os(),f=s.mode,b=fh({mode:"hidden",children:b},f),u=da(u,f,o,null),b.return=s,u.return=s,b.sibling=u,s.child=b,f=s.child,f.memoizedState=Sg(o),f.childLanes=bg(i,w,o),s.memoizedState=wg,u):(as(s),Ag(s,b))}if(z=i.memoizedState,z!==null&&(b=z.dehydrated,b!==null)){if(p)s.flags&256?(as(s),s.flags&=-257,s=Rg(i,s,o)):s.memoizedState!==null?(os(),s.child=i.child,s.flags|=128,s=null):(os(),f=u.fallback,b=s.mode,u=fh({mode:"visible",children:u.children},b),f=da(f,b,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,Ao(s,i.child,null,o),u=s.child,u.memoizedState=Sg(o),u.childLanes=bg(i,w,o),s.memoizedState=wg,s=f);else if(as(s),om(b)){if(w=b.nextSibling&&b.nextSibling.dataset,w)var J=w.dgst;w=J,u=Error(r(419)),u.stack="",u.digest=w,zl({value:u,source:null,stack:null}),s=Rg(i,s,o)}else if(tn||Bl(i,s,o,!1),w=(o&i.childLanes)!==0,tn||w){if(w=ge,w!==null&&(u=o&-o,u=(u&42)!==0?1:zi(u),u=(u&(w.suspendedLanes|o))!==0?0:u,u!==0&&u!==z.retryLane))throw z.retryLane=u,go(i,u),Qn(w,i,u),R0;b.data==="$?"||jg(),s=Rg(i,s,o)}else b.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=z.treeContext,Ae=xi(b.nextSibling),xn=s,Jt=!0,pa=null,Ji=!1,i!==null&&(di[gi++]=br,di[gi++]=Ar,di[gi++]=ga,br=i.id,Ar=i.overflow,ga=s),s=Ag(s,u.children),s.flags|=4096);return s}return f?(os(),f=u.fallback,b=s.mode,z=i.child,J=z.sibling,u=Sr(z,{mode:"hidden",children:u.children}),u.subtreeFlags=z.subtreeFlags&65011712,J!==null?f=Sr(J,f):(f=da(f,b,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,b=i.child.memoizedState,b===null?b=Sg(o):(z=b.cachePool,z!==null?(J=je._currentValue,z=z.parent!==J?{parent:J,pool:J}:z):z=T_(),b={baseLanes:b.baseLanes|o,cachePool:z}),f.memoizedState=b,f.childLanes=bg(i,w,o),s.memoizedState=wg,u):(as(s),o=i.child,i=o.sibling,o=Sr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(w=s.deletions,w===null?(s.deletions=[i],s.flags|=16):w.push(i)),s.child=o,s.memoizedState=null,o)}function Ag(i,s){return s=fh({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function fh(i,s){return i=Gn(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Rg(i,s,o){return Ao(s,i.child,null,o),i=Ag(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function P0(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),jd(i.return,s,o)}function Ig(i,s,o,u,f){var p=i.memoizedState;p===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=f)}function L0(i,s,o){var u=s.pendingProps,f=u.revealOrder,p=u.tail;if(un(i,s,u.children,o),u=Ge.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&P0(i,o,s);else if(i.tag===19)P0(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(rt(Ge,u),f){case"forwards":for(o=s.child,f=null;o!==null;)i=o.alternate,i!==null&&lh(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Ig(s,!1,f,o,p);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&lh(i)===null){s.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}Ig(s,!0,o,null,p);break;case"together":Ig(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Nr(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),fs|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(Bl(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=Sr(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=Sr(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function Cg(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&$c(i)))}function dR(i,s,o){switch(s.tag){case 3:At(s,s.stateNode.containerInfo),es(s,je,i.memoizedState.cache),Ul();break;case 27:case 5:Pt(s);break;case 4:At(s,s.stateNode.containerInfo);break;case 10:es(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(as(s),s.flags|=128,null):(o&s.child.childLanes)!==0?k0(i,s,o):(as(s),i=Nr(i,s,o),i!==null?i.sibling:null);as(s);break;case 19:var f=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Bl(i,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return L0(i,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),rt(Ge,Ge.current),u)break;return null;case 22:case 23:return s.lanes=0,N0(i,s,o);case 24:es(s,je,i.memoizedState.cache)}return Nr(i,s,o)}function U0(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)tn=!0;else{if(!Cg(i,o)&&(s.flags&128)===0)return tn=!1,dR(i,s,o);tn=(i.flags&131072)!==0}else tn=!1,Jt&&(s.flags&1048576)!==0&&g_(s,Gc,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")Ld(u)?(i=wa(u,i),s.tag=1,s=M0(null,s,u,i,o)):(s.tag=0,s=Tg(null,s,u,i,o));else{if(u!=null){if(f=u.$$typeof,f===H){s.tag=11,s=I0(null,s,u,i,o);break t}else if(f===D){s.tag=14,s=C0(null,s,u,i,o);break t}}throw s=k(u)||u,Error(r(306,s,""))}}return s;case 0:return Tg(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=wa(u,s.pendingProps),M0(i,s,u,f,o);case 3:t:{if(At(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;f=p.element,Zd(i,s),Yl(s,u,null,o);var w=s.memoizedState;if(u=w.cache,es(s,je,u),u!==p.cache&&Gd(s,[je],o,!0),$l(),u=w.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=V0(i,s,u,o);break t}else if(u!==f){f=hi(Error(r(424)),s),zl(f),s=V0(i,s,u,o);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ae=xi(i.firstChild),xn=s,Jt=!0,pa=null,Ji=!0,o=p0(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ul(),u===f){s=Nr(i,s,o);break t}un(i,s,u,o)}s=s.child}return s;case 26:return hh(i,s),i===null?(o=qv(s.type,null,s.pendingProps,null))?s.memoizedState=o:Jt||(o=s.type,i=s.pendingProps,u=Rh(pt.current).createElement(o),u[Ne]=s,u[be]=i,hn(u,o,i),Te(u),s.stateNode=u):s.memoizedState=qv(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Pt(s),i===null&&Jt&&(u=s.stateNode=zv(s.type,s.pendingProps,pt.current),xn=s,Ji=!0,f=Ae,ps(s.type)?(lm=f,Ae=xi(u.firstChild)):Ae=f),un(i,s,s.pendingProps.children,o),hh(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Jt&&((f=u=Ae)&&(u=HR(u,s.type,s.pendingProps,Ji),u!==null?(s.stateNode=u,xn=s,Ae=xi(u.firstChild),Ji=!1,f=!0):f=!1),f||ya(s)),Pt(s),f=s.type,p=s.pendingProps,w=i!==null?i.memoizedProps:null,u=p.children,rm(f,p)?u=null:w!==null&&rm(f,w)&&(s.flags|=32),s.memoizedState!==null&&(f=ig(i,s,sR,null,null,o),mu._currentValue=f),hh(i,s),un(i,s,u,o),s.child;case 6:return i===null&&Jt&&((i=o=Ae)&&(o=qR(o,s.pendingProps,Ji),o!==null?(s.stateNode=o,xn=s,Ae=null,i=!0):i=!1),i||ya(s)),null;case 13:return k0(i,s,o);case 4:return At(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Ao(s,null,u,o):un(i,s,u,o),s.child;case 11:return I0(i,s,s.type,s.pendingProps,o);case 7:return un(i,s,s.pendingProps,o),s.child;case 8:return un(i,s,s.pendingProps.children,o),s.child;case 12:return un(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,es(s,s.type,u.value),un(i,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,va(s),f=yn(f),u=u(f),s.flags|=1,un(i,s,u,o),s.child;case 14:return C0(i,s,s.type,s.pendingProps,o);case 15:return x0(i,s,s.type,s.pendingProps,o);case 19:return L0(i,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},i===null?(o=fh(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Sr(i.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return N0(i,s,o);case 24:return va(s),u=yn(je),i===null?(f=Kd(),f===null&&(f=ge,p=$d(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),s.memoizedState={parent:u,cache:f},Qd(s),es(s,je,f)):((i.lanes&o)!==0&&(Zd(i,s),Yl(s,null,null,o),$l()),f=i.memoizedState,p=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),es(s,je,u)):(u=p.cache,es(s,je,u),u!==f.cache&&Gd(s,[je],o,!0))),un(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Dr(i){i.flags|=4}function z0(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Yv(s)){if(s=mi.current,s!==null&&((Qt&4194048)===Qt?tr!==null:(Qt&62914560)!==Qt&&(Qt&536870912)===0||s!==tr))throw jl=Xd,w_;i.flags|=8192}}function dh(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Si():536870912,i.lanes|=s,xo|=s)}function tu(i,s){if(!Jt)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function we(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function gR(i,s,o){var u=s.pendingProps;switch(Hd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(s),null;case 1:return we(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ir(je),kt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Ll(s)?Dr(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,y_())),we(s),null;case 26:return o=s.memoizedState,i===null?(Dr(s),o!==null?(we(s),z0(s,o)):(we(s),s.flags&=-16777217)):o?o!==i.memoizedState?(Dr(s),we(s),z0(s,o)):(we(s),s.flags&=-16777217):(i.memoizedProps!==u&&Dr(s),we(s),s.flags&=-16777217),null;case 27:ue(s),o=pt.current;var f=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Dr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return we(s),null}i=ct.current,Ll(s)?m_(s):(i=zv(f,u,o),s.stateNode=i,Dr(s))}return we(s),null;case 5:if(ue(s),o=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Dr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return we(s),null}if(i=ct.current,Ll(s))m_(s);else{switch(f=Rh(pt.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}i[Ne]=s,i[be]=u;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=i;t:switch(hn(i,o,u),o){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Dr(s)}}return we(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Dr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=pt.current,Ll(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,f=xn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[Ne]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Ov(i.nodeValue,o)),i||ya(s)}else i=Rh(i).createTextNode(u),i[Ne]=s,s.stateNode=i}return we(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=Ll(s),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ne]=s}else Ul(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;we(s),f=!1}else f=y_(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(xr(s),s):(xr(s),null)}if(xr(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,i=i!==null&&i.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return o!==i&&o&&(s.child.flags|=8192),dh(s,s.updateQueue),we(s),null;case 4:return kt(),i===null&&Jg(s.stateNode.containerInfo),we(s),null;case 10:return Ir(s.type),we(s),null;case 19:if(W(Ge),f=s.memoizedState,f===null)return we(s),null;if(u=(s.flags&128)!==0,p=f.rendering,p===null)if(u)tu(f,!1);else{if(Re!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(p=lh(i),p!==null){for(s.flags|=128,tu(f,!1),i=p.updateQueue,s.updateQueue=i,dh(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)d_(o,i),o=o.sibling;return rt(Ge,Ge.current&1|2),s.child}i=i.sibling}f.tail!==null&&Lt()>ph&&(s.flags|=128,u=!0,tu(f,!1),s.lanes=4194304)}else{if(!u)if(i=lh(p),i!==null){if(s.flags|=128,u=!0,i=i.updateQueue,s.updateQueue=i,dh(s,i),tu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Jt)return we(s),null}else 2*Lt()-f.renderingStartTime>ph&&o!==536870912&&(s.flags|=128,u=!0,tu(f,!1),s.lanes=4194304);f.isBackwards?(p.sibling=s.child,s.child=p):(i=f.last,i!==null?i.sibling=p:s.child=p,f.last=p)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Lt(),s.sibling=null,i=Ge.current,rt(Ge,u?i&1|2:i&1),s):(we(s),null);case 22:case 23:return xr(s),eg(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(we(s),s.subtreeFlags&6&&(s.flags|=8192)):we(s),o=s.updateQueue,o!==null&&dh(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&W(Ea),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Ir(je),we(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function mR(i,s){switch(Hd(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Ir(je),kt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return ue(s),null;case 13:if(xr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ul()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return W(Ge),null;case 4:return kt(),null;case 10:return Ir(s.type),null;case 22:case 23:return xr(s),eg(),i!==null&&W(Ea),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Ir(je),null;case 25:return null;default:return null}}function B0(i,s){switch(Hd(s),s.tag){case 3:Ir(je),kt();break;case 26:case 27:case 5:ue(s);break;case 4:kt();break;case 13:xr(s);break;case 19:W(Ge);break;case 10:Ir(s.type);break;case 22:case 23:xr(s),eg(),i!==null&&W(Ea);break;case 24:Ir(je)}}function eu(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var p=o.create,w=o.inst;u=p(),w.destroy=u}o=o.next}while(o!==f)}}catch(b){fe(s,s.return,b)}}function ls(i,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&i)===i){var w=u.inst,b=w.destroy;if(b!==void 0){w.destroy=void 0,f=s;var z=o,J=b;try{J()}catch(ut){fe(f,z,ut)}}}u=u.next}while(u!==p)}}catch(ut){fe(s,s.return,ut)}}function H0(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{C_(s,o)}catch(u){fe(i,i.return,u)}}}function q0(i,s,o){o.props=wa(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){fe(i,s,u)}}function nu(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){fe(i,s,f)}}function er(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){fe(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){fe(i,s,f)}else o.current=null}function F0(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){fe(i,i.return,f)}}function xg(i,s,o){try{var u=i.stateNode;PR(u,i.type,o,s),u[be]=s}catch(f){fe(i,i.return,f)}}function j0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ps(i.type)||i.tag===4}function Ng(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||j0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ps(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Dg(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Ah));else if(u!==4&&(u===27&&ps(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(Dg(i,s,o),i=i.sibling;i!==null;)Dg(i,s,o),i=i.sibling}function gh(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&ps(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(gh(i,s,o),i=i.sibling;i!==null;)gh(i,s,o),i=i.sibling}function G0(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);hn(s,u,o),s[Ne]=i,s[be]=o}catch(p){fe(i,i.return,p)}}var Or=!1,Oe=!1,Og=!1,$0=typeof WeakSet=="function"?WeakSet:Set,en=null;function pR(i,s){if(i=i.containerInfo,nm=Oh,i=i_(i),Nd(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break t}var w=0,b=-1,z=-1,J=0,ut=0,ft=i,it=null;e:for(;;){for(var st;ft!==o||f!==0&&ft.nodeType!==3||(b=w+f),ft!==p||u!==0&&ft.nodeType!==3||(z=w+u),ft.nodeType===3&&(w+=ft.nodeValue.length),(st=ft.firstChild)!==null;)it=ft,ft=st;for(;;){if(ft===i)break e;if(it===o&&++J===f&&(b=w),it===p&&++ut===u&&(z=w),(st=ft.nextSibling)!==null)break;ft=it,it=ft.parentNode}ft=st}o=b===-1||z===-1?null:{start:b,end:z}}else o=null}o=o||{start:0,end:0}}else o=null;for(im={focusedElem:i,selectionRange:o},Oh=!1,en=s;en!==null;)if(s=en,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,en=i;else for(;en!==null;){switch(s=en,p=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,o=s,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Ot=wa(o.type,f,o.elementType===o.type);i=u.getSnapshotBeforeUpdate(Ot,p),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ct){fe(o,o.return,Ct)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)am(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":am(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,en=i;break}en=s.return}}function Y0(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:us(i,o),u&4&&eu(5,o);break;case 1:if(us(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(w){fe(o,o.return,w)}else{var f=wa(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(w){fe(o,o.return,w)}}u&64&&H0(o),u&512&&nu(o,o.return);break;case 3:if(us(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{C_(i,s)}catch(w){fe(o,o.return,w)}}break;case 27:s===null&&u&4&&G0(o);case 26:case 5:us(i,o),s===null&&u&4&&F0(o),u&512&&nu(o,o.return);break;case 12:us(i,o);break;case 13:us(i,o),u&4&&Q0(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=AR.bind(null,o),FR(i,o))));break;case 22:if(u=o.memoizedState!==null||Or,!u){s=s!==null&&s.memoizedState!==null||Oe,f=Or;var p=Oe;Or=u,(Oe=s)&&!p?cs(i,o,(o.subtreeFlags&8772)!==0):us(i,o),Or=f,Oe=p}break;case 30:break;default:us(i,o)}}function K0(i){var s=i.alternate;s!==null&&(i.alternate=null,K0(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&qi(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var _e=null,On=!1;function Mr(i,s,o){for(o=o.child;o!==null;)X0(i,s,o),o=o.sibling}function X0(i,s,o){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(te,o)}catch{}switch(o.tag){case 26:Oe||er(o,s),Mr(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Oe||er(o,s);var u=_e,f=On;ps(o.type)&&(_e=o.stateNode,On=!1),Mr(i,s,o),hu(o.stateNode),_e=u,On=f;break;case 5:Oe||er(o,s);case 6:if(u=_e,f=On,_e=null,Mr(i,s,o),_e=u,On=f,_e!==null)if(On)try{(_e.nodeType===9?_e.body:_e.nodeName==="HTML"?_e.ownerDocument.body:_e).removeChild(o.stateNode)}catch(p){fe(o,s,p)}else try{_e.removeChild(o.stateNode)}catch(p){fe(o,s,p)}break;case 18:_e!==null&&(On?(i=_e,Lv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),vu(i)):Lv(_e,o.stateNode));break;case 4:u=_e,f=On,_e=o.stateNode.containerInfo,On=!0,Mr(i,s,o),_e=u,On=f;break;case 0:case 11:case 14:case 15:Oe||ls(2,o,s),Oe||ls(4,o,s),Mr(i,s,o);break;case 1:Oe||(er(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&q0(o,s,u)),Mr(i,s,o);break;case 21:Mr(i,s,o);break;case 22:Oe=(u=Oe)||o.memoizedState!==null,Mr(i,s,o),Oe=u;break;default:Mr(i,s,o)}}function Q0(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{vu(i)}catch(o){fe(s,s.return,o)}}function yR(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new $0),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new $0),s;default:throw Error(r(435,i.tag))}}function Mg(i,s){var o=yR(i);s.forEach(function(u){var f=RR.bind(null,i,u);o.has(u)||(o.add(u),u.then(f,f))})}function $n(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=i,w=s,b=w;t:for(;b!==null;){switch(b.tag){case 27:if(ps(b.type)){_e=b.stateNode,On=!1;break t}break;case 5:_e=b.stateNode,On=!1;break t;case 3:case 4:_e=b.stateNode.containerInfo,On=!0;break t}b=b.return}if(_e===null)throw Error(r(160));X0(p,w,f),_e=null,On=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Z0(s,i),s=s.sibling}var Ci=null;function Z0(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:$n(s,i),Yn(i),u&4&&(ls(3,i,i.return),eu(3,i),ls(5,i,i.return));break;case 1:$n(s,i),Yn(i),u&512&&(Oe||o===null||er(o,o.return)),u&64&&Or&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Ci;if($n(s,i),Yn(i),u&512&&(Oe||o===null||er(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){t:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[gr]||p[Ne]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),hn(p,u,o),p[Ne]=i,Te(p),u=p;break t;case"link":var w=Gv("link","href",f).get(u+(o.href||""));if(w){for(var b=0;b<w.length;b++)if(p=w[b],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(b,1);break e}}p=f.createElement(u),hn(p,u,o),f.head.appendChild(p);break;case"meta":if(w=Gv("meta","content",f).get(u+(o.content||""))){for(b=0;b<w.length;b++)if(p=w[b],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(b,1);break e}}p=f.createElement(u),hn(p,u,o),f.head.appendChild(p);break;default:throw Error(r(468,u))}p[Ne]=i,Te(p),u=p}i.stateNode=u}else $v(f,i.type,i.stateNode);else i.stateNode=jv(f,u,i.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?$v(f,i.type,i.stateNode):jv(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&xg(i,i.memoizedProps,o.memoizedProps)}break;case 27:$n(s,i),Yn(i),u&512&&(Oe||o===null||er(o,o.return)),o!==null&&u&4&&xg(i,i.memoizedProps,o.memoizedProps);break;case 5:if($n(s,i),Yn(i),u&512&&(Oe||o===null||er(o,o.return)),i.flags&32){f=i.stateNode;try{oi(f,"")}catch(st){fe(i,i.return,st)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,xg(i,f,o!==null?o.memoizedProps:f)),u&1024&&(Og=!0);break;case 6:if($n(s,i),Yn(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(st){fe(i,i.return,st)}}break;case 3:if(xh=null,f=Ci,Ci=Ih(s.containerInfo),$n(s,i),Ci=f,Yn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{vu(s.containerInfo)}catch(st){fe(i,i.return,st)}Og&&(Og=!1,W0(i));break;case 4:u=Ci,Ci=Ih(i.stateNode.containerInfo),$n(s,i),Yn(i),Ci=u;break;case 12:$n(s,i),Yn(i);break;case 13:$n(s,i),Yn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(zg=Lt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Mg(i,u)));break;case 22:f=i.memoizedState!==null;var z=o!==null&&o.memoizedState!==null,J=Or,ut=Oe;if(Or=J||f,Oe=ut||z,$n(s,i),Oe=ut,Or=J,Yn(i),u&8192)t:for(s=i.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||z||Or||Oe||Sa(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){z=o=s;try{if(p=z.stateNode,f)w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{b=z.stateNode;var ft=z.memoizedProps.style,it=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;b.style.display=it==null||typeof it=="boolean"?"":(""+it).trim()}}catch(st){fe(z,z.return,st)}}}else if(s.tag===6){if(o===null){z=s;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(st){fe(z,z.return,st)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Mg(i,o))));break;case 19:$n(s,i),Yn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Mg(i,u)));break;case 30:break;case 21:break;default:$n(s,i),Yn(i)}}function Yn(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(j0(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,p=Ng(i);gh(i,p,f);break;case 5:var w=o.stateNode;o.flags&32&&(oi(w,""),o.flags&=-33);var b=Ng(i);gh(i,b,w);break;case 3:case 4:var z=o.stateNode.containerInfo,J=Ng(i);Dg(i,J,z);break;default:throw Error(r(161))}}catch(ut){fe(i,i.return,ut)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function W0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;W0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function us(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Y0(i,s.alternate,s),s=s.sibling}function Sa(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:ls(4,s,s.return),Sa(s);break;case 1:er(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&q0(s,s.return,o),Sa(s);break;case 27:hu(s.stateNode);case 26:case 5:er(s,s.return),Sa(s);break;case 22:s.memoizedState===null&&Sa(s);break;case 30:Sa(s);break;default:Sa(s)}i=i.sibling}}function cs(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=i,p=s,w=p.flags;switch(p.tag){case 0:case 11:case 15:cs(f,p,o),eu(4,p);break;case 1:if(cs(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(J){fe(u,u.return,J)}if(u=p,f=u.updateQueue,f!==null){var b=u.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)I_(z[f],b)}catch(J){fe(u,u.return,J)}}o&&w&64&&H0(p),nu(p,p.return);break;case 27:G0(p);case 26:case 5:cs(f,p,o),o&&u===null&&w&4&&F0(p),nu(p,p.return);break;case 12:cs(f,p,o);break;case 13:cs(f,p,o),o&&w&4&&Q0(f,p);break;case 22:p.memoizedState===null&&cs(f,p,o),nu(p,p.return);break;case 30:break;default:cs(f,p,o)}s=s.sibling}}function Vg(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Hl(o))}function kg(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Hl(i))}function nr(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)J0(i,s,o,u),s=s.sibling}function J0(i,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:nr(i,s,o,u),f&2048&&eu(9,s);break;case 1:nr(i,s,o,u);break;case 3:nr(i,s,o,u),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Hl(i)));break;case 12:if(f&2048){nr(i,s,o,u),i=s.stateNode;try{var p=s.memoizedProps,w=p.id,b=p.onPostCommit;typeof b=="function"&&b(w,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(z){fe(s,s.return,z)}}else nr(i,s,o,u);break;case 13:nr(i,s,o,u);break;case 23:break;case 22:p=s.stateNode,w=s.alternate,s.memoizedState!==null?p._visibility&2?nr(i,s,o,u):iu(i,s):p._visibility&2?nr(i,s,o,u):(p._visibility|=2,Ro(i,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&Vg(w,s);break;case 24:nr(i,s,o,u),f&2048&&kg(s.alternate,s);break;default:nr(i,s,o,u)}}function Ro(i,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=i,w=s,b=o,z=u,J=w.flags;switch(w.tag){case 0:case 11:case 15:Ro(p,w,b,z,f),eu(8,w);break;case 23:break;case 22:var ut=w.stateNode;w.memoizedState!==null?ut._visibility&2?Ro(p,w,b,z,f):iu(p,w):(ut._visibility|=2,Ro(p,w,b,z,f)),f&&J&2048&&Vg(w.alternate,w);break;case 24:Ro(p,w,b,z,f),f&&J&2048&&kg(w.alternate,w);break;default:Ro(p,w,b,z,f)}s=s.sibling}}function iu(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,f=u.flags;switch(u.tag){case 22:iu(o,u),f&2048&&Vg(u.alternate,u);break;case 24:iu(o,u),f&2048&&kg(u.alternate,u);break;default:iu(o,u)}s=s.sibling}}var ru=8192;function Io(i){if(i.subtreeFlags&ru)for(i=i.child;i!==null;)tv(i),i=i.sibling}function tv(i){switch(i.tag){case 26:Io(i),i.flags&ru&&i.memoizedState!==null&&nI(Ci,i.memoizedState,i.memoizedProps);break;case 5:Io(i);break;case 3:case 4:var s=Ci;Ci=Ih(i.stateNode.containerInfo),Io(i),Ci=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=ru,ru=16777216,Io(i),ru=s):Io(i));break;default:Io(i)}}function ev(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function su(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];en=u,iv(u,i)}ev(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)nv(i),i=i.sibling}function nv(i){switch(i.tag){case 0:case 11:case 15:su(i),i.flags&2048&&ls(9,i,i.return);break;case 3:su(i);break;case 12:su(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,mh(i)):su(i);break;default:su(i)}}function mh(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];en=u,iv(u,i)}ev(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:ls(8,s,s.return),mh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,mh(s));break;default:mh(s)}i=i.sibling}}function iv(i,s){for(;en!==null;){var o=en;switch(o.tag){case 0:case 11:case 15:ls(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Hl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,en=u;else t:for(o=i;en!==null;){u=en;var f=u.sibling,p=u.return;if(K0(u),u===o){en=null;break t}if(f!==null){f.return=p,en=f;break t}en=p}}}var _R={getCacheForType:function(i){var s=yn(je),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o}},vR=typeof WeakMap=="function"?WeakMap:Map,ie=0,ge=null,jt=null,Qt=0,re=0,Kn=null,hs=!1,Co=!1,Pg=!1,Vr=0,Re=0,fs=0,ba=0,Lg=0,pi=0,xo=0,au=null,Mn=null,Ug=!1,zg=0,ph=1/0,yh=null,ds=null,cn=0,gs=null,No=null,Do=0,Bg=0,Hg=null,rv=null,ou=0,qg=null;function Xn(){if((ie&2)!==0&&Qt!==0)return Qt&-Qt;if(O.T!==null){var i=_o;return i!==0?i:Xg()}return Bi()}function sv(){pi===0&&(pi=(Qt&536870912)===0||Jt?dr():536870912);var i=mi.current;return i!==null&&(i.flags|=32),pi}function Qn(i,s,o){(i===ge&&(re===2||re===9)||i.cancelPendingCommit!==null)&&(Oo(i,0),ms(i,Qt,pi,!1)),ei(i,o),((ie&2)===0||i!==ge)&&(i===ge&&((ie&2)===0&&(ba|=o),Re===4&&ms(i,Qt,pi,!1)),ir(i))}function av(i,s,o){if((ie&6)!==0)throw Error(r(327));var u=!o&&(s&124)===0&&(s&i.expiredLanes)===0||Rn(i,s),f=u?wR(i,s):Gg(i,s,!0),p=u;do{if(f===0){Co&&!u&&ms(i,s,0,!1);break}else{if(o=i.current.alternate,p&&!ER(o)){f=Gg(i,s,!1),p=!1;continue}if(f===2){if(p=s,i.errorRecoveryDisabledLanes&p)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;t:{var b=i;f=au;var z=b.current.memoizedState.isDehydrated;if(z&&(Oo(b,w).flags|=256),w=Gg(b,w,!1),w!==2){if(Pg&&!z){b.errorRecoveryDisabledLanes|=p,ba|=p,f=4;break t}p=Mn,Mn=f,p!==null&&(Mn===null?Mn=p:Mn.push.apply(Mn,p))}f=w}if(p=!1,f!==2)continue}}if(f===1){Oo(i,0),ms(i,s,0,!0);break}t:{switch(u=i,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:ms(u,s,pi,!hs);break t;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=zg+300-Lt(),10<f)){if(ms(u,s,pi,!hs),an(u,0,!0)!==0)break t;u.timeoutHandle=kv(ov.bind(null,u,o,Mn,yh,Ug,s,pi,ba,xo,hs,p,2,-0,0),f);break t}ov(u,o,Mn,yh,Ug,s,pi,ba,xo,hs,p,0,-0,0)}}break}while(!0);ir(i)}function ov(i,s,o,u,f,p,w,b,z,J,ut,ft,it,st){if(i.timeoutHandle=-1,ft=s.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(gu={stylesheets:null,count:0,unsuspend:eI},tv(s),ft=iI(),ft!==null)){i.cancelPendingCommit=ft(gv.bind(null,i,s,p,o,u,f,w,b,z,ut,1,it,st)),ms(i,p,w,!J);return}gv(i,s,p,o,u,f,w,b,z)}function ER(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!jn(p(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ms(i,s,o,u){s&=~Lg,s&=~ba,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var f=s;0<f;){var p=31-Ee(f),w=1<<p;u[p]=-1,f&=~w}o!==0&&ni(i,o,s)}function _h(){return(ie&6)===0?(lu(0),!1):!0}function Fg(){if(jt!==null){if(re===0)var i=jt.return;else i=jt,Rr=_a=null,ag(i),bo=null,Wl=0,i=jt;for(;i!==null;)B0(i.alternate,i),i=i.return;jt=null}}function Oo(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,UR(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Fg(),ge=i,jt=o=Sr(i.current,null),Qt=s,re=0,Kn=null,hs=!1,Co=Rn(i,s),Pg=!1,xo=pi=Lg=ba=fs=Re=0,Mn=au=null,Ug=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var f=31-Ee(u),p=1<<f;s|=i[f],u&=~p}return Vr=s,Bc(),o}function lv(i,s){zt=null,O.H=sh,s===Fl||s===Xc?(s=A_(),re=3):s===w_?(s=A_(),re=4):re=s===R0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Kn=s,jt===null&&(Re=1,ch(i,hi(s,i.current)))}function uv(){var i=O.H;return O.H=sh,i===null?sh:i}function cv(){var i=O.A;return O.A=_R,i}function jg(){Re=4,hs||(Qt&4194048)!==Qt&&mi.current!==null||(Co=!0),(fs&134217727)===0&&(ba&134217727)===0||ge===null||ms(ge,Qt,pi,!1)}function Gg(i,s,o){var u=ie;ie|=2;var f=uv(),p=cv();(ge!==i||Qt!==s)&&(yh=null,Oo(i,s)),s=!1;var w=Re;t:do try{if(re!==0&&jt!==null){var b=jt,z=Kn;switch(re){case 8:Fg(),w=6;break t;case 3:case 2:case 9:case 6:mi.current===null&&(s=!0);var J=re;if(re=0,Kn=null,Mo(i,b,z,J),o&&Co){w=0;break t}break;default:J=re,re=0,Kn=null,Mo(i,b,z,J)}}TR(),w=Re;break}catch(ut){lv(i,ut)}while(!0);return s&&i.shellSuspendCounter++,Rr=_a=null,ie=u,O.H=f,O.A=p,jt===null&&(ge=null,Qt=0,Bc()),w}function TR(){for(;jt!==null;)hv(jt)}function wR(i,s){var o=ie;ie|=2;var u=uv(),f=cv();ge!==i||Qt!==s?(yh=null,ph=Lt()+500,Oo(i,s)):Co=Rn(i,s);t:do try{if(re!==0&&jt!==null){s=jt;var p=Kn;e:switch(re){case 1:re=0,Kn=null,Mo(i,s,p,1);break;case 2:case 9:if(S_(p)){re=0,Kn=null,fv(s);break}s=function(){re!==2&&re!==9||ge!==i||(re=7),ir(i)},p.then(s,s);break t;case 3:re=7;break t;case 4:re=5;break t;case 7:S_(p)?(re=0,Kn=null,fv(s)):(re=0,Kn=null,Mo(i,s,p,7));break;case 5:var w=null;switch(jt.tag){case 26:w=jt.memoizedState;case 5:case 27:var b=jt;if(!w||Yv(w)){re=0,Kn=null;var z=b.sibling;if(z!==null)jt=z;else{var J=b.return;J!==null?(jt=J,vh(J)):jt=null}break e}}re=0,Kn=null,Mo(i,s,p,5);break;case 6:re=0,Kn=null,Mo(i,s,p,6);break;case 8:Fg(),Re=6;break t;default:throw Error(r(462))}}SR();break}catch(ut){lv(i,ut)}while(!0);return Rr=_a=null,O.H=u,O.A=f,ie=o,jt!==null?0:(ge=null,Qt=0,Bc(),Re)}function SR(){for(;jt!==null&&!he();)hv(jt)}function hv(i){var s=U0(i.alternate,i,Vr);i.memoizedProps=i.pendingProps,s===null?vh(i):jt=s}function fv(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=O0(o,s,s.pendingProps,s.type,void 0,Qt);break;case 11:s=O0(o,s,s.pendingProps,s.type.render,s.ref,Qt);break;case 5:ag(s);default:B0(o,s),s=jt=d_(s,Vr),s=U0(o,s,Vr)}i.memoizedProps=i.pendingProps,s===null?vh(i):jt=s}function Mo(i,s,o,u){Rr=_a=null,ag(s),bo=null,Wl=0;var f=s.return;try{if(fR(i,f,s,o,Qt)){Re=1,ch(i,hi(o,i.current)),jt=null;return}}catch(p){if(f!==null)throw jt=f,p;Re=1,ch(i,hi(o,i.current)),jt=null;return}s.flags&32768?(Jt||u===1?i=!0:Co||(Qt&536870912)!==0?i=!1:(hs=i=!0,(u===2||u===9||u===3||u===6)&&(u=mi.current,u!==null&&u.tag===13&&(u.flags|=16384))),dv(s,i)):vh(s)}function vh(i){var s=i;do{if((s.flags&32768)!==0){dv(s,hs);return}i=s.return;var o=gR(s.alternate,s,Vr);if(o!==null){jt=o;return}if(s=s.sibling,s!==null){jt=s;return}jt=s=i}while(s!==null);Re===0&&(Re=5)}function dv(i,s){do{var o=mR(i.alternate,i);if(o!==null){o.flags&=32767,jt=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){jt=i;return}jt=i=o}while(i!==null);Re=6,jt=null}function gv(i,s,o,u,f,p,w,b,z){i.cancelPendingCommit=null;do Eh();while(cn!==0);if((ie&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=kd,Hn(i,o,p,w,b,z),i===ge&&(jt=ge=null,Qt=0),No=s,gs=i,Do=o,Bg=p,Hg=f,rv=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,IR(Un,function(){return vv(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=O.T,O.T=null,f=$.p,$.p=2,w=ie,ie|=4;try{pR(i,s,o)}finally{ie=w,$.p=f,O.T=u}}cn=1,mv(),pv(),yv()}}function mv(){if(cn===1){cn=0;var i=gs,s=No,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=O.T,O.T=null;var u=$.p;$.p=2;var f=ie;ie|=4;try{Z0(s,i);var p=im,w=i_(i.containerInfo),b=p.focusedElem,z=p.selectionRange;if(w!==b&&b&&b.ownerDocument&&n_(b.ownerDocument.documentElement,b)){if(z!==null&&Nd(b)){var J=z.start,ut=z.end;if(ut===void 0&&(ut=J),"selectionStart"in b)b.selectionStart=J,b.selectionEnd=Math.min(ut,b.value.length);else{var ft=b.ownerDocument||document,it=ft&&ft.defaultView||window;if(it.getSelection){var st=it.getSelection(),Ot=b.textContent.length,Ct=Math.min(z.start,Ot),le=z.end===void 0?Ct:Math.min(z.end,Ot);!st.extend&&Ct>le&&(w=le,le=Ct,Ct=w);var K=e_(b,Ct),j=e_(b,le);if(K&&j&&(st.rangeCount!==1||st.anchorNode!==K.node||st.anchorOffset!==K.offset||st.focusNode!==j.node||st.focusOffset!==j.offset)){var Z=ft.createRange();Z.setStart(K.node,K.offset),st.removeAllRanges(),Ct>le?(st.addRange(Z),st.extend(j.node,j.offset)):(Z.setEnd(j.node,j.offset),st.addRange(Z))}}}}for(ft=[],st=b;st=st.parentNode;)st.nodeType===1&&ft.push({element:st,left:st.scrollLeft,top:st.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ft.length;b++){var ht=ft[b];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}Oh=!!nm,im=nm=null}finally{ie=f,$.p=u,O.T=o}}i.current=s,cn=2}}function pv(){if(cn===2){cn=0;var i=gs,s=No,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=O.T,O.T=null;var u=$.p;$.p=2;var f=ie;ie|=4;try{Y0(i,s.alternate,s)}finally{ie=f,$.p=u,O.T=o}}cn=3}}function yv(){if(cn===4||cn===3){cn=0,Xe();var i=gs,s=No,o=Do,u=rv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?cn=5:(cn=0,No=gs=null,_v(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(ds=null),Qr(o),s=s.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(te,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=O.T,f=$.p,$.p=2,O.T=null;try{for(var p=i.onRecoverableError,w=0;w<u.length;w++){var b=u[w];p(b.value,{componentStack:b.stack})}}finally{O.T=s,$.p=f}}(Do&3)!==0&&Eh(),ir(i),f=i.pendingLanes,(o&4194090)!==0&&(f&42)!==0?i===qg?ou++:(ou=0,qg=i):ou=0,lu(0)}}function _v(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Hl(s)))}function Eh(i){return mv(),pv(),yv(),vv()}function vv(){if(cn!==5)return!1;var i=gs,s=Bg;Bg=0;var o=Qr(Do),u=O.T,f=$.p;try{$.p=32>o?32:o,O.T=null,o=Hg,Hg=null;var p=gs,w=Do;if(cn=0,No=gs=null,Do=0,(ie&6)!==0)throw Error(r(331));var b=ie;if(ie|=4,nv(p.current),J0(p,p.current,w,o),ie=b,lu(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(te,p)}catch{}return!0}finally{$.p=f,O.T=u,_v(i,s)}}function Ev(i,s,o){s=hi(o,s),s=Eg(i.stateNode,s,2),i=rs(i,s,2),i!==null&&(ei(i,2),ir(i))}function fe(i,s,o){if(i.tag===3)Ev(i,i,o);else for(;s!==null;){if(s.tag===3){Ev(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ds===null||!ds.has(u))){i=hi(o,i),o=b0(2),u=rs(s,o,2),u!==null&&(A0(o,u,s,i),ei(u,2),ir(u));break}}s=s.return}}function $g(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new vR;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(Pg=!0,f.add(o),i=bR.bind(null,i,s,o),s.then(i,i))}function bR(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,ge===i&&(Qt&o)===o&&(Re===4||Re===3&&(Qt&62914560)===Qt&&300>Lt()-zg?(ie&2)===0&&Oo(i,0):Lg|=o,xo===Qt&&(xo=0)),ir(i)}function Tv(i,s){s===0&&(s=Si()),i=go(i,s),i!==null&&(ei(i,s),ir(i))}function AR(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),Tv(i,o)}function RR(i,s){var o=0;switch(i.tag){case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),Tv(i,o)}function IR(i,s){return ve(i,s)}var Th=null,Vo=null,Yg=!1,wh=!1,Kg=!1,Aa=0;function ir(i){i!==Vo&&i.next===null&&(Vo===null?Th=Vo=i:Vo=Vo.next=i),wh=!0,Yg||(Yg=!0,xR())}function lu(i,s){if(!Kg&&wh){Kg=!0;do for(var o=!1,u=Th;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var w=u.suspendedLanes,b=u.pingedLanes;p=(1<<31-Ee(42|i)+1)-1,p&=f&~(w&~b),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,Av(u,p))}else p=Qt,p=an(u,u===ge?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Rn(u,p)||(o=!0,Av(u,p));u=u.next}while(o);Kg=!1}}function CR(){wv()}function wv(){wh=Yg=!1;var i=0;Aa!==0&&(LR()&&(i=Aa),Aa=0);for(var s=Lt(),o=null,u=Th;u!==null;){var f=u.next,p=Sv(u,s);p===0?(u.next=null,o===null?Th=f:o.next=f,f===null&&(Vo=o)):(o=u,(i!==0||(p&3)!==0)&&(wh=!0)),u=f}lu(i)}function Sv(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var w=31-Ee(p),b=1<<w,z=f[w];z===-1?((b&o)===0||(b&u)!==0)&&(f[w]=fr(b,s)):z<=s&&(i.expiredLanes|=b),p&=~b}if(s=ge,o=Qt,o=an(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(re===2||re===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&ye(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Rn(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&ye(u),Qr(o)){case 2:case 8:o=pn;break;case 32:o=Un;break;case 268435456:o=zn;break;default:o=Un}return u=bv.bind(null,i),o=ve(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&ye(u),i.callbackPriority=2,i.callbackNode=null,2}function bv(i,s){if(cn!==0&&cn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(Eh()&&i.callbackNode!==o)return null;var u=Qt;return u=an(i,i===ge?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(av(i,u,s),Sv(i,Lt()),i.callbackNode!=null&&i.callbackNode===o?bv.bind(null,i):null)}function Av(i,s){if(Eh())return null;av(i,s,!0)}function xR(){zR(function(){(ie&6)!==0?ve(xe,CR):wv()})}function Xg(){return Aa===0&&(Aa=dr()),Aa}function Rv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:eo(""+i)}function Iv(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function NR(i,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var p=Rv((f[be]||null).action),w=u.submitter;w&&(s=(s=w[be]||null)?Rv(s.formAction):w.getAttribute("formAction"),s!==null&&(p=s,w=null));var b=new no("action","action",null,u,f);i.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Aa!==0){var z=w?Iv(f,w):new FormData(f);mg(o,{pending:!0,data:z,method:f.method,action:p},null,z)}}else typeof p=="function"&&(b.preventDefault(),z=w?Iv(f,w):new FormData(f),mg(o,{pending:!0,data:z,method:f.method,action:p},p,z))},currentTarget:f}]})}}for(var Qg=0;Qg<Vd.length;Qg++){var Zg=Vd[Qg],DR=Zg.toLowerCase(),OR=Zg[0].toUpperCase()+Zg.slice(1);Ii(DR,"on"+OR)}Ii(a_,"onAnimationEnd"),Ii(o_,"onAnimationIteration"),Ii(l_,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(XA,"onTransitionRun"),Ii(QA,"onTransitionStart"),Ii(ZA,"onTransitionCancel"),Ii(u_,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uu));function Cv(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;t:{var p=void 0;if(s)for(var w=u.length-1;0<=w;w--){var b=u[w],z=b.instance,J=b.currentTarget;if(b=b.listener,z!==p&&f.isPropagationStopped())break t;p=b,f.currentTarget=J;try{p(f)}catch(ut){uh(ut)}f.currentTarget=null,p=z}else for(w=0;w<u.length;w++){if(b=u[w],z=b.instance,J=b.currentTarget,b=b.listener,z!==p&&f.isPropagationStopped())break t;p=b,f.currentTarget=J;try{p(f)}catch(ut){uh(ut)}f.currentTarget=null,p=z}}}}function Gt(i,s){var o=s[Zs];o===void 0&&(o=s[Zs]=new Set);var u=i+"__bubble";o.has(u)||(xv(s,i,2,!1),o.add(u))}function Wg(i,s,o){var u=0;s&&(u|=4),xv(o,i,u,s)}var Sh="_reactListening"+Math.random().toString(36).slice(2);function Jg(i){if(!i[Sh]){i[Sh]=!0,Ws.forEach(function(o){o!=="selectionchange"&&(MR.has(o)||Wg(o,!1,i),Wg(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Sh]||(s[Sh]=!0,Wg("selectionchange",!1,s))}}function xv(i,s,o,u){switch(Jv(s)){case 2:var f=aI;break;case 8:f=oI;break;default:f=dm}o=f.bind(null,s,o,i),f=void 0,!ui||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,o,{capture:!0,passive:f}):i.addEventListener(s,o,!0):f!==void 0?i.addEventListener(s,o,{passive:f}):i.addEventListener(s,o,!1)}function tm(i,s,o,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var b=u.stateNode.containerInfo;if(b===f)break;if(w===4)for(w=u.return;w!==null;){var z=w.tag;if((z===3||z===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;b!==null;){if(w=ii(b),w===null)return;if(z=w.tag,z===5||z===6||z===26||z===27){u=p=w;continue t}b=b.parentNode}}u=u.return}Ac(function(){var J=p,ut=li(o),ft=[];t:{var it=c_.get(i);if(it!==void 0){var st=no,Ot=i;switch(i){case"keypress":if(Ki(o)===0)break t;case"keydown":case"keyup":st=lo;break;case"focusin":Ot="focus",st=so;break;case"focusout":Ot="blur",st=so;break;case"beforeblur":case"afterblur":st=so;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=ci;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=Rd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=Mc;break;case a_:case o_:case l_:st=ao;break;case u_:st=kc;break;case"scroll":case"scrollend":st=Rc;break;case"wheel":st=uo;break;case"copy":case"cut":case"paste":st=oo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=Ml;break;case"toggle":case"beforetoggle":st=Lc}var Ct=(s&4)!==0,le=!Ct&&(i==="scroll"||i==="scrollend"),K=Ct?it!==null?it+"Capture":null:it;Ct=[];for(var j=J,Z;j!==null;){var ht=j;if(Z=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||Z===null||K===null||(ht=ra(j,K),ht!=null&&Ct.push(cu(j,ht,Z))),le)break;j=j.return}0<Ct.length&&(it=new st(it,Ot,null,o,ut),ft.push({event:it,listeners:Ct}))}}if((s&7)===0){t:{if(it=i==="mouseover"||i==="pointerover",st=i==="mouseout"||i==="pointerout",it&&o!==yr&&(Ot=o.relatedTarget||o.fromElement)&&(ii(Ot)||Ot[Nn]))break t;if((st||it)&&(it=ut.window===ut?ut:(it=ut.ownerDocument)?it.defaultView||it.parentWindow:window,st?(Ot=o.relatedTarget||o.toElement,st=J,Ot=Ot?ii(Ot):null,Ot!==null&&(le=l(Ot),Ct=Ot.tag,Ot!==le||Ct!==5&&Ct!==27&&Ct!==6)&&(Ot=null)):(st=null,Ot=J),st!==Ot)){if(Ct=ci,ht="onMouseLeave",K="onMouseEnter",j="mouse",(i==="pointerout"||i==="pointerover")&&(Ct=Ml,ht="onPointerLeave",K="onPointerEnter",j="pointer"),le=st==null?it:si(st),Z=Ot==null?it:si(Ot),it=new Ct(ht,j+"leave",st,o,ut),it.target=le,it.relatedTarget=Z,ht=null,ii(ut)===J&&(Ct=new Ct(K,j+"enter",Ot,o,ut),Ct.target=Z,Ct.relatedTarget=le,ht=Ct),le=ht,st&&Ot)e:{for(Ct=st,K=Ot,j=0,Z=Ct;Z;Z=ko(Z))j++;for(Z=0,ht=K;ht;ht=ko(ht))Z++;for(;0<j-Z;)Ct=ko(Ct),j--;for(;0<Z-j;)K=ko(K),Z--;for(;j--;){if(Ct===K||K!==null&&Ct===K.alternate)break e;Ct=ko(Ct),K=ko(K)}Ct=null}else Ct=null;st!==null&&Nv(ft,it,st,Ct,!1),Ot!==null&&le!==null&&Nv(ft,le,Ot,Ct,!0)}}t:{if(it=J?si(J):window,st=it.nodeName&&it.nodeName.toLowerCase(),st==="select"||st==="input"&&it.type==="file")var Tt=Xy;else if(Fe(it))if(Qy)Tt=$A;else{Tt=jA;var Ht=FA}else st=it.nodeName,!st||st.toLowerCase()!=="input"||it.type!=="checkbox"&&it.type!=="radio"?J&&Rl(J.elementType)&&(Tt=Xy):Tt=GA;if(Tt&&(Tt=Tt(i,J))){wr(ft,Tt,o,ut);break t}Ht&&Ht(i,it,J),i==="focusout"&&J&&it.type==="number"&&J.memoizedProps.value!=null&&Jr(it,"number",it.value)}switch(Ht=J?si(J):window,i){case"focusin":(Fe(Ht)||Ht.contentEditable==="true")&&(co=Ht,Dd=J,Pl=null);break;case"focusout":Pl=Dd=co=null;break;case"mousedown":Od=!0;break;case"contextmenu":case"mouseup":case"dragend":Od=!1,r_(ft,o,ut);break;case"selectionchange":if(KA)break;case"keydown":case"keyup":r_(ft,o,ut)}var St;if(Zi)t:{switch(i){case"compositionstart":var xt="onCompositionStart";break t;case"compositionend":xt="onCompositionEnd";break t;case"compositionupdate":xt="onCompositionUpdate";break t}xt=void 0}else Kt?ot(i,o)&&(xt="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(xt="onCompositionStart");xt&&(T&&o.locale!=="ko"&&(Kt||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Kt&&(St=Cl()):(Yi=ut,ts="value"in Yi?Yi.value:Yi.textContent,Kt=!0)),Ht=bh(J,xt),0<Ht.length&&(xt=new Dl(xt,i,null,o,ut),ft.push({event:xt,listeners:Ht}),St?xt.data=St:(St=yt(o),St!==null&&(xt.data=St)))),(St=_?qe(i,o):Xt(i,o))&&(xt=bh(J,"onBeforeInput"),0<xt.length&&(Ht=new Dl("onBeforeInput","beforeinput",null,o,ut),ft.push({event:Ht,listeners:xt}),Ht.data=St)),NR(ft,i,J,o,ut)}Cv(ft,s)})}function cu(i,s,o){return{instance:i,listener:s,currentTarget:o}}function bh(i,s){for(var o=s+"Capture",u=[];i!==null;){var f=i,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=ra(i,o),f!=null&&u.unshift(cu(i,f,p)),f=ra(i,s),f!=null&&u.push(cu(i,f,p))),i.tag===3)return u;i=i.return}return[]}function ko(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Nv(i,s,o,u,f){for(var p=s._reactName,w=[];o!==null&&o!==u;){var b=o,z=b.alternate,J=b.stateNode;if(b=b.tag,z!==null&&z===u)break;b!==5&&b!==26&&b!==27||J===null||(z=J,f?(J=ra(o,p),J!=null&&w.unshift(cu(o,J,z))):f||(J=ra(o,p),J!=null&&w.push(cu(o,J,z)))),o=o.return}w.length!==0&&i.push({event:s,listeners:w})}var VR=/\r\n?/g,kR=/\u0000|\uFFFD/g;function Dv(i){return(typeof i=="string"?i:""+i).replace(VR,`
`).replace(kR,"")}function Ov(i,s){return s=Dv(s),Dv(i)===s}function Ah(){}function oe(i,s,o,u,f,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||oi(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&oi(i,""+u);break;case"className":ai(i,"class",u);break;case"tabIndex":ai(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ai(i,o,u);break;case"style":Al(i,u,p);break;case"data":if(s!=="object"){ai(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=eo(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&oe(i,s,"name",f.name,f,null),oe(i,s,"formEncType",f.formEncType,f,null),oe(i,s,"formMethod",f.formMethod,f,null),oe(i,s,"formTarget",f.formTarget,f,null)):(oe(i,s,"encType",f.encType,f,null),oe(i,s,"method",f.method,f,null),oe(i,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=eo(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=Ah);break;case"onScroll":u!=null&&Gt("scroll",i);break;case"onScrollEnd":u!=null&&Gt("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=eo(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Gt("beforetoggle",i),Gt("toggle",i),Fi(i,"popover",u);break;case"xlinkActuate":He(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":He(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":He(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":He(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":He(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":He(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":He(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":He(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":He(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Fi(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=bd.get(o)||o,Fi(i,o,u))}}function em(i,s,o,u,f,p){switch(o){case"style":Al(i,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?oi(i,u):(typeof u=="number"||typeof u=="bigint")&&oi(i,""+u);break;case"onScroll":u!=null&&Gt("scroll",i);break;case"onScrollEnd":u!=null&&Gt("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Ah);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zr.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),p=i[be]||null,p=p!=null?p[o]:null,typeof p=="function"&&i.removeEventListener(s,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,f);break t}o in i?i[o]=u:u===!0?i.setAttribute(o,""):Fi(i,o,u)}}}function hn(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",i),Gt("load",i);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var w=o[p];if(w!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:oe(i,s,p,w,o,null)}}f&&oe(i,s,"srcSet",o.srcSet,o,null),u&&oe(i,s,"src",o.src,o,null);return;case"input":Gt("invalid",i);var b=p=w=f=null,z=null,J=null;for(u in o)if(o.hasOwnProperty(u)){var ut=o[u];if(ut!=null)switch(u){case"name":f=ut;break;case"type":w=ut;break;case"checked":z=ut;break;case"defaultChecked":J=ut;break;case"value":p=ut;break;case"defaultValue":b=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(r(137,s));break;default:oe(i,s,u,ut,o,null)}}ea(i,p,b,z,J,w,f,!1),to(i);return;case"select":Gt("invalid",i),u=w=p=null;for(f in o)if(o.hasOwnProperty(f)&&(b=o[f],b!=null))switch(f){case"value":p=b;break;case"defaultValue":w=b;break;case"multiple":u=b;default:oe(i,s,f,b,o,null)}s=p,o=w,i.multiple=!!u,s!=null?pr(i,!!u,s,!1):o!=null&&pr(i,!!u,o,!0);return;case"textarea":Gt("invalid",i),p=f=u=null;for(w in o)if(o.hasOwnProperty(w)&&(b=o[w],b!=null))switch(w){case"value":u=b;break;case"defaultValue":f=b;break;case"children":p=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:oe(i,s,w,b,o,null)}na(i,u,f,p),to(i);return;case"option":for(z in o)if(o.hasOwnProperty(z)&&(u=o[z],u!=null))switch(z){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:oe(i,s,z,u,o,null)}return;case"dialog":Gt("beforetoggle",i),Gt("toggle",i),Gt("cancel",i),Gt("close",i);break;case"iframe":case"object":Gt("load",i);break;case"video":case"audio":for(u=0;u<uu.length;u++)Gt(uu[u],i);break;case"image":Gt("error",i),Gt("load",i);break;case"details":Gt("toggle",i);break;case"embed":case"source":case"link":Gt("error",i),Gt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in o)if(o.hasOwnProperty(J)&&(u=o[J],u!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:oe(i,s,J,u,o,null)}return;default:if(Rl(s)){for(ut in o)o.hasOwnProperty(ut)&&(u=o[ut],u!==void 0&&em(i,s,ut,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&oe(i,s,b,u,o,null))}function PR(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,w=null,b=null,z=null,J=null,ut=null;for(st in o){var ft=o[st];if(o.hasOwnProperty(st)&&ft!=null)switch(st){case"checked":break;case"value":break;case"defaultValue":z=ft;default:u.hasOwnProperty(st)||oe(i,s,st,null,u,ft)}}for(var it in u){var st=u[it];if(ft=o[it],u.hasOwnProperty(it)&&(st!=null||ft!=null))switch(it){case"type":p=st;break;case"name":f=st;break;case"checked":J=st;break;case"defaultChecked":ut=st;break;case"value":w=st;break;case"defaultValue":b=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(r(137,s));break;default:st!==ft&&oe(i,s,it,st,u,ft)}}Fn(i,w,b,z,J,ut,p,f);return;case"select":st=w=b=it=null;for(p in o)if(z=o[p],o.hasOwnProperty(p)&&z!=null)switch(p){case"value":break;case"multiple":st=z;default:u.hasOwnProperty(p)||oe(i,s,p,null,u,z)}for(f in u)if(p=u[f],z=o[f],u.hasOwnProperty(f)&&(p!=null||z!=null))switch(f){case"value":it=p;break;case"defaultValue":b=p;break;case"multiple":w=p;default:p!==z&&oe(i,s,f,p,u,z)}s=b,o=w,u=st,it!=null?pr(i,!!o,it,!1):!!u!=!!o&&(s!=null?pr(i,!!o,s,!0):pr(i,!!o,o?[]:"",!1));return;case"textarea":st=it=null;for(b in o)if(f=o[b],o.hasOwnProperty(b)&&f!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:oe(i,s,b,null,u,f)}for(w in u)if(f=u[w],p=o[w],u.hasOwnProperty(w)&&(f!=null||p!=null))switch(w){case"value":it=f;break;case"defaultValue":st=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&oe(i,s,w,f,u,p)}se(i,it,st);return;case"option":for(var Ot in o)if(it=o[Ot],o.hasOwnProperty(Ot)&&it!=null&&!u.hasOwnProperty(Ot))switch(Ot){case"selected":i.selected=!1;break;default:oe(i,s,Ot,null,u,it)}for(z in u)if(it=u[z],st=o[z],u.hasOwnProperty(z)&&it!==st&&(it!=null||st!=null))switch(z){case"selected":i.selected=it&&typeof it!="function"&&typeof it!="symbol";break;default:oe(i,s,z,it,u,st)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in o)it=o[Ct],o.hasOwnProperty(Ct)&&it!=null&&!u.hasOwnProperty(Ct)&&oe(i,s,Ct,null,u,it);for(J in u)if(it=u[J],st=o[J],u.hasOwnProperty(J)&&it!==st&&(it!=null||st!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(r(137,s));break;default:oe(i,s,J,it,u,st)}return;default:if(Rl(s)){for(var le in o)it=o[le],o.hasOwnProperty(le)&&it!==void 0&&!u.hasOwnProperty(le)&&em(i,s,le,void 0,u,it);for(ut in u)it=u[ut],st=o[ut],!u.hasOwnProperty(ut)||it===st||it===void 0&&st===void 0||em(i,s,ut,it,u,st);return}}for(var K in o)it=o[K],o.hasOwnProperty(K)&&it!=null&&!u.hasOwnProperty(K)&&oe(i,s,K,null,u,it);for(ft in u)it=u[ft],st=o[ft],!u.hasOwnProperty(ft)||it===st||it==null&&st==null||oe(i,s,ft,it,u,st)}var nm=null,im=null;function Rh(i){return i.nodeType===9?i:i.ownerDocument}function Mv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vv(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function rm(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var sm=null;function LR(){var i=window.event;return i&&i.type==="popstate"?i===sm?!1:(sm=i,!0):(sm=null,!1)}var kv=typeof setTimeout=="function"?setTimeout:void 0,UR=typeof clearTimeout=="function"?clearTimeout:void 0,Pv=typeof Promise=="function"?Promise:void 0,zR=typeof queueMicrotask=="function"?queueMicrotask:typeof Pv<"u"?function(i){return Pv.resolve(null).then(i).catch(BR)}:kv;function BR(i){setTimeout(function(){throw i})}function ps(i){return i==="head"}function Lv(i,s){var o=s,u=0,f=0;do{var p=o.nextSibling;if(i.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var w=i.ownerDocument;if(o&1&&hu(w.documentElement),o&2&&hu(w.body),o&4)for(o=w.head,hu(o),w=o.firstChild;w;){var b=w.nextSibling,z=w.nodeName;w[gr]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=b}}if(f===0){i.removeChild(p),vu(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);vu(s)}function am(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":am(o),qi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function HR(i,s,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[gr])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=xi(i.nextSibling),i===null)break}return null}function qR(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=xi(i.nextSibling),i===null))return null;return i}function om(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function FR(i,s){var o=i.ownerDocument;if(i.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function xi(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var lm=null;function Uv(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return i;s--}else o==="/$"&&s++}i=i.previousSibling}return null}function zv(i,s,o){switch(s=Rh(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function hu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);qi(i)}var yi=new Map,Bv=new Set;function Ih(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var kr=$.d;$.d={f:jR,r:GR,D:$R,C:YR,L:KR,m:XR,X:ZR,S:QR,M:WR};function jR(){var i=kr.f(),s=_h();return i||s}function GR(i){var s=ri(i);s!==null&&s.tag===5&&s.type==="form"?a0(s):kr.r(i)}var Po=typeof document>"u"?null:document;function Hv(i,s,o){var u=Po;if(u&&typeof s=="string"&&s){var f=Pe(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Bv.has(f)||(Bv.add(f),i={rel:i,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),hn(s,"link",i),Te(s),u.head.appendChild(s)))}}function $R(i){kr.D(i),Hv("dns-prefetch",i,null)}function YR(i,s){kr.C(i,s),Hv("preconnect",i,s)}function KR(i,s,o){kr.L(i,s,o);var u=Po;if(u&&i&&s){var f='link[rel="preload"][as="'+Pe(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Pe(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Pe(o.imageSizes)+'"]')):f+='[href="'+Pe(i)+'"]';var p=f;switch(s){case"style":p=Lo(i);break;case"script":p=Uo(i)}yi.has(p)||(i=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),yi.set(p,i),u.querySelector(f)!==null||s==="style"&&u.querySelector(fu(p))||s==="script"&&u.querySelector(du(p))||(s=u.createElement("link"),hn(s,"link",i),Te(s),u.head.appendChild(s)))}}function XR(i,s){kr.m(i,s);var o=Po;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Pe(u)+'"][href="'+Pe(i)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Uo(i)}if(!yi.has(p)&&(i=y({rel:"modulepreload",href:i},s),yi.set(p,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(du(p)))return}u=o.createElement("link"),hn(u,"link",i),Te(u),o.head.appendChild(u)}}}function QR(i,s,o){kr.S(i,s,o);var u=Po;if(u&&i){var f=on(u).hoistableStyles,p=Lo(i);s=s||"default";var w=f.get(p);if(!w){var b={loading:0,preload:null};if(w=u.querySelector(fu(p)))b.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":s},o),(o=yi.get(p))&&um(i,o);var z=w=u.createElement("link");Te(z),hn(z,"link",i),z._p=new Promise(function(J,ut){z.onload=J,z.onerror=ut}),z.addEventListener("load",function(){b.loading|=1}),z.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Ch(w,s,u)}w={type:"stylesheet",instance:w,count:1,state:b},f.set(p,w)}}}function ZR(i,s){kr.X(i,s);var o=Po;if(o&&i){var u=on(o).hoistableScripts,f=Uo(i),p=u.get(f);p||(p=o.querySelector(du(f)),p||(i=y({src:i,async:!0},s),(s=yi.get(f))&&cm(i,s),p=o.createElement("script"),Te(p),hn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function WR(i,s){kr.M(i,s);var o=Po;if(o&&i){var u=on(o).hoistableScripts,f=Uo(i),p=u.get(f);p||(p=o.querySelector(du(f)),p||(i=y({src:i,async:!0,type:"module"},s),(s=yi.get(f))&&cm(i,s),p=o.createElement("script"),Te(p),hn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function qv(i,s,o,u){var f=(f=pt.current)?Ih(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Lo(o.href),o=on(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Lo(o.href);var p=on(f).hoistableStyles,w=p.get(i);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,w),(p=f.querySelector(fu(i)))&&!p._p&&(w.instance=p,w.state.loading=5),yi.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},yi.set(i,o),p||JR(f,i,o,w.state))),s&&u===null)throw Error(r(528,""));return w}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Uo(o),o=on(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Lo(i){return'href="'+Pe(i)+'"'}function fu(i){return'link[rel="stylesheet"]['+i+"]"}function Fv(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function JR(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),hn(s,"link",o),Te(s),i.head.appendChild(s))}function Uo(i){return'[src="'+Pe(i)+'"]'}function du(i){return"script[async]"+i}function jv(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+Pe(o.href)+'"]');if(u)return s.instance=u,Te(u),u;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Te(u),hn(u,"style",f),Ch(u,o.precedence,i),s.instance=u;case"stylesheet":f=Lo(o.href);var p=i.querySelector(fu(f));if(p)return s.state.loading|=4,s.instance=p,Te(p),p;u=Fv(o),(f=yi.get(f))&&um(u,f),p=(i.ownerDocument||i).createElement("link"),Te(p);var w=p;return w._p=new Promise(function(b,z){w.onload=b,w.onerror=z}),hn(p,"link",u),s.state.loading|=4,Ch(p,o.precedence,i),s.instance=p;case"script":return p=Uo(o.src),(f=i.querySelector(du(p)))?(s.instance=f,Te(f),f):(u=o,(f=yi.get(p))&&(u=y({},o),cm(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),Te(f),hn(f,"link",u),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Ch(u,o.precedence,i));return s.instance}function Ch(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,w=0;w<u.length;w++){var b=u[w];if(b.dataset.precedence===s)p=b;else if(p!==f)break}p?p.parentNode.insertBefore(i,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function um(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function cm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var xh=null;function Gv(i,s,o){if(xh===null){var u=new Map,f=xh=new Map;f.set(o,u)}else f=xh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var p=o[f];if(!(p[gr]||p[Ne]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(s)||"";w=i+w;var b=u.get(w);b?b.push(p):u.set(w,[p])}}return u}function $v(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function tI(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Yv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var gu=null;function eI(){}function nI(i,s,o){if(gu===null)throw Error(r(475));var u=gu;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Lo(o.href),p=i.querySelector(fu(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=Nh.bind(u),i.then(u,u)),s.state.loading|=4,s.instance=p,Te(p);return}p=i.ownerDocument||i,o=Fv(o),(f=yi.get(f))&&um(o,f),p=p.createElement("link"),Te(p);var w=p;w._p=new Promise(function(b,z){w.onload=b,w.onerror=z}),hn(p,"link",o),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=Nh.bind(u),i.addEventListener("load",s),i.addEventListener("error",s))}}function iI(){if(gu===null)throw Error(r(475));var i=gu;return i.stylesheets&&i.count===0&&hm(i,i.stylesheets),0<i.count?function(s){var o=setTimeout(function(){if(i.stylesheets&&hm(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(o)}}:null}function Nh(){if(this.count--,this.count===0){if(this.stylesheets)hm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Dh=null;function hm(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Dh=new Map,s.forEach(rI,i),Dh=null,Nh.call(i))}function rI(i,s){if(!(s.state.loading&4)){var o=Dh.get(i);if(o)var u=o.get(null);else{o=new Map,Dh.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var w=f[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}f=s.instance,w=f.getAttribute("data-precedence"),p=o.get(w)||u,p===u&&o.set(null,f),o.set(w,f),this.count++,u=Nh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var mu={$$typeof:q,Provider:null,Consumer:null,_currentValue:at,_currentValue2:at,_threadCount:0};function sI(i,s,o,u,f,p,w,b){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bn(0),this.hiddenUpdates=Bn(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Kv(i,s,o,u,f,p,w,b,z,J,ut,ft){return i=new sI(i,s,o,w,b,z,J,ft),s=1,p===!0&&(s|=24),p=Gn(3,null,null,s),i.current=p,p.stateNode=i,s=$d(),s.refCount++,i.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},Qd(p),i}function Xv(i){return i?(i=mo,i):mo}function Qv(i,s,o,u,f,p){f=Xv(f),u.context===null?u.context=f:u.pendingContext=f,u=is(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=rs(i,u,s),o!==null&&(Qn(o,i,s),Gl(o,i,s))}function Zv(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function fm(i,s){Zv(i,s),(i=i.alternate)&&Zv(i,s)}function Wv(i){if(i.tag===13){var s=go(i,67108864);s!==null&&Qn(s,i,67108864),fm(i,67108864)}}var Oh=!0;function aI(i,s,o,u){var f=O.T;O.T=null;var p=$.p;try{$.p=2,dm(i,s,o,u)}finally{$.p=p,O.T=f}}function oI(i,s,o,u){var f=O.T;O.T=null;var p=$.p;try{$.p=8,dm(i,s,o,u)}finally{$.p=p,O.T=f}}function dm(i,s,o,u){if(Oh){var f=gm(u);if(f===null)tm(i,s,u,Mh,o),tE(i,u);else if(uI(f,i,s,o,u))u.stopPropagation();else if(tE(i,u),s&4&&-1<lI.indexOf(i)){for(;f!==null;){var p=ri(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=Ze(p.pendingLanes);if(w!==0){var b=p;for(b.pendingLanes|=2,b.entangledLanes|=2;w;){var z=1<<31-Ee(w);b.entanglements[1]|=z,w&=~z}ir(p),(ie&6)===0&&(ph=Lt()+500,lu(0))}}break;case 13:b=go(p,2),b!==null&&Qn(b,p,2),_h(),fm(p,2)}if(p=gm(u),p===null&&tm(i,s,u,Mh,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else tm(i,s,u,null,o)}}function gm(i){return i=li(i),mm(i)}var Mh=null;function mm(i){if(Mh=null,i=ii(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Mh=i,null}function Jv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wt()){case xe:return 2;case pn:return 8;case Un:case Li:return 32;case zn:return 268435456;default:return 32}default:return 32}}var pm=!1,ys=null,_s=null,vs=null,pu=new Map,yu=new Map,Es=[],lI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tE(i,s){switch(i){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":pu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":yu.delete(s.pointerId)}}function _u(i,s,o,u,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=ri(s),s!==null&&Wv(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function uI(i,s,o,u,f){switch(s){case"focusin":return ys=_u(ys,i,s,o,u,f),!0;case"dragenter":return _s=_u(_s,i,s,o,u,f),!0;case"mouseover":return vs=_u(vs,i,s,o,u,f),!0;case"pointerover":var p=f.pointerId;return pu.set(p,_u(pu.get(p)||null,i,s,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,yu.set(p,_u(yu.get(p)||null,i,s,o,u,f)),!0}return!1}function eE(i){var s=ii(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,Ka(i.priority,function(){if(o.tag===13){var u=Xn();u=zi(u);var f=go(o,u);f!==null&&Qn(f,o,u),fm(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Vh(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=gm(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);yr=u,o.target.dispatchEvent(u),yr=null}else return s=ri(o),s!==null&&Wv(s),i.blockedOn=o,!1;s.shift()}return!0}function nE(i,s,o){Vh(i)&&o.delete(s)}function cI(){pm=!1,ys!==null&&Vh(ys)&&(ys=null),_s!==null&&Vh(_s)&&(_s=null),vs!==null&&Vh(vs)&&(vs=null),pu.forEach(nE),yu.forEach(nE)}function kh(i,s){i.blockedOn===s&&(i.blockedOn=null,pm||(pm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,cI)))}var Ph=null;function iE(i){Ph!==i&&(Ph=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Ph===i&&(Ph=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],f=i[s+2];if(typeof u!="function"){if(mm(u||o)===null)continue;break}var p=ri(o);p!==null&&(i.splice(s,3),s-=3,mg(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function vu(i){function s(z){return kh(z,i)}ys!==null&&kh(ys,i),_s!==null&&kh(_s,i),vs!==null&&kh(vs,i),pu.forEach(s),yu.forEach(s);for(var o=0;o<Es.length;o++){var u=Es[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Es.length&&(o=Es[0],o.blockedOn===null);)eE(o),o.blockedOn===null&&Es.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],w=f[be]||null;if(typeof p=="function")w||iE(o);else if(w){var b=null;if(p&&p.hasAttribute("formAction")){if(f=p,w=p[be]||null)b=w.formAction;else if(mm(f)!==null)continue}else b=w.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),iE(o)}}}function ym(i){this._internalRoot=i}Lh.prototype.render=ym.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Xn();Qv(o,u,i,s,null,null)},Lh.prototype.unmount=ym.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Qv(i.current,2,null,i,null,null),_h(),s[Nn]=null}};function Lh(i){this._internalRoot=i}Lh.prototype.unstable_scheduleHydration=function(i){if(i){var s=Bi();i={blockedOn:null,target:i,priority:s};for(var o=0;o<Es.length&&s!==0&&s<Es[o].priority;o++);Es.splice(o,0,i),o===0&&eE(i)}};var rE=t.version;if(rE!=="19.1.0")throw Error(r(527,rE,"19.1.0"));$.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=g(s),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var hI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uh.isDisabled&&Uh.supportsFiber)try{te=Uh.inject(hI),Ft=Uh}catch{}}return Tu.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",f=E0,p=T0,w=w0,b=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(b=s.unstable_transitionCallbacks)),s=Kv(i,1,!1,null,null,o,u,f,p,w,b,null),i[Nn]=s.current,Jg(i),new ym(s)},Tu.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,f="",p=E0,w=T0,b=w0,z=null,J=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(z=o.unstable_transitionCallbacks),o.formState!==void 0&&(J=o.formState)),s=Kv(i,1,!0,s,o??null,u,f,p,w,b,z,J),s.context=Xv(null),o=s.current,u=Xn(),u=zi(u),f=is(u),f.callback=null,rs(o,f,u),o=u,s.current.lanes=o,ei(s,o),ir(s),i[Nn]=s.current,Jg(i),new Lh(s)},Tu.version="19.1.0",Tu}var gE;function EI(){if(gE)return Em.exports;gE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Em.exports=vI(),Em.exports}var TI=EI();function mn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=mn(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var bm={exports:{}},Am={},Rm={exports:{}},Im={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mE;function wI(){if(mE)return Im;mE=1;var e=oc();function t(v,E){return v===E&&(v!==0||1/v===1/E)||v!==v&&E!==E}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,a=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function d(v,E){var S=E(),M=r({inst:{value:S,getSnapshot:E}}),L=M[0].inst,V=M[1];return l(function(){L.value=S,L.getSnapshot=E,g(L)&&V({inst:L})},[v,S,E]),a(function(){return g(L)&&V({inst:L}),v(function(){g(L)&&V({inst:L})})},[v]),c(S),S}function g(v){var E=v.getSnapshot;v=v.value;try{var S=E();return!n(v,S)}catch{return!0}}function m(v,E){return E()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return Im.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:y,Im}var pE;function SI(){return pE||(pE=1,Rm.exports=wI()),Rm.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE;function bI(){if(yE)return Am;yE=1;var e=oc(),t=SI();function n(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var r=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,l=e.useRef,c=e.useEffect,d=e.useMemo,g=e.useDebugValue;return Am.useSyncExternalStoreWithSelector=function(m,y,v,E,S){var M=l(null);if(M.current===null){var L={hasValue:!1,value:null};M.current=L}else L=M.current;M=d(function(){function B(et){if(!F){if(F=!0,q=et,et=E(et),S!==void 0&&L.hasValue){var D=L.value;if(S(D,et))return H=D}return H=et}if(D=H,r(q,et))return D;var R=E(et);return S!==void 0&&S(D,R)?(q=et,D):(q=et,H=R)}var F=!1,q,H,nt=v===void 0?null:v;return[function(){return B(y())},nt===null?void 0:function(){return B(nt())}]},[y,v,E,S]);var V=a(m,M[0],M[1]);return c(function(){L.hasValue=!0,L.value=V},[V]),g(V),V},Am}var _E;function AI(){return _E||(_E=1,bm.exports=bI()),bm.exports}var RI=AI();const II=Bw(RI),CI={},vE=e=>{let t;const n=new Set,r=(y,v)=>{const E=typeof y=="function"?y(t):y;if(!Object.is(E,t)){const S=t;t=v??(typeof E!="object"||E===null)?E:Object.assign({},t,E),n.forEach(M=>M(t,S))}},a=()=>t,g={setState:r,getState:a,getInitialState:()=>m,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(CI?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},m=t=e(r,a,g);return g},xI=e=>e?vE(e):vE,{useDebugValue:NI}=lt,{useSyncExternalStoreWithSelector:DI}=II,OI=e=>e;function qw(e,t=OI,n){const r=DI(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return NI(r),r}const EE=(e,t)=>{const n=xI(e),r=(a,l=t)=>qw(n,a,l);return Object.assign(r,n),r},MI=(e,t)=>e?EE(e,t):EE;function sn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,a]of e)if(!Object.is(a,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var VI={value:()=>{}};function Gf(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new nf(n)}function nf(e){this._=e}function kI(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}nf.prototype=Gf.prototype={constructor:nf,on:function(e,t){var n=this._,r=kI(e+"",n),a,l=-1,c=r.length;if(arguments.length<2){for(;++l<c;)if((a=(e=r[l]).type)&&(a=PI(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(a=(e=r[l]).type)n[a]=TE(n[a],e.name,t);else if(t==null)for(a in n)n[a]=TE(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new nf(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,l;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],r=0,a=l.length;r<a;++r)l[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,l=r.length;a<l;++a)r[a].value.apply(t,n)}};function PI(e,t){for(var n=0,r=e.length,a;n<r;++n)if((a=e[n]).name===t)return a.value}function TE(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=VI,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Qm="http://www.w3.org/1999/xhtml";const wE={svg:"http://www.w3.org/2000/svg",xhtml:Qm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $f(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),wE.hasOwnProperty(t)?{space:wE[t],local:e}:e}function LI(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Qm&&t.documentElement.namespaceURI===Qm?t.createElement(e):t.createElementNS(n,e)}}function UI(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Fw(e){var t=$f(e);return(t.local?UI:LI)(t)}function zI(){}function zp(e){return e==null?zI:function(){return this.querySelector(e)}}function BI(e){typeof e!="function"&&(e=zp(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=new Array(c),g,m,y=0;y<c;++y)(g=l[y])&&(m=e.call(g,g.__data__,y,l))&&("__data__"in g&&(m.__data__=g.__data__),d[y]=m);return new ti(r,this._parents)}function HI(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function qI(){return[]}function jw(e){return e==null?qI:function(){return this.querySelectorAll(e)}}function FI(e){return function(){return HI(e.apply(this,arguments))}}function jI(e){typeof e=="function"?e=FI(e):e=jw(e);for(var t=this._groups,n=t.length,r=[],a=[],l=0;l<n;++l)for(var c=t[l],d=c.length,g,m=0;m<d;++m)(g=c[m])&&(r.push(e.call(g,g.__data__,m,c)),a.push(g));return new ti(r,a)}function Gw(e){return function(){return this.matches(e)}}function $w(e){return function(t){return t.matches(e)}}var GI=Array.prototype.find;function $I(e){return function(){return GI.call(this.children,e)}}function YI(){return this.firstElementChild}function KI(e){return this.select(e==null?YI:$I(typeof e=="function"?e:$w(e)))}var XI=Array.prototype.filter;function QI(){return Array.from(this.children)}function ZI(e){return function(){return XI.call(this.children,e)}}function WI(e){return this.selectAll(e==null?QI:ZI(typeof e=="function"?e:$w(e)))}function JI(e){typeof e!="function"&&(e=Gw(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=[],g,m=0;m<c;++m)(g=l[m])&&e.call(g,g.__data__,m,l)&&d.push(g);return new ti(r,this._parents)}function Yw(e){return new Array(e.length)}function tC(){return new ti(this._enter||this._groups.map(Yw),this._parents)}function yf(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}yf.prototype={constructor:yf,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function eC(e){return function(){return e}}function nC(e,t,n,r,a,l){for(var c=0,d,g=t.length,m=l.length;c<m;++c)(d=t[c])?(d.__data__=l[c],r[c]=d):n[c]=new yf(e,l[c]);for(;c<g;++c)(d=t[c])&&(a[c]=d)}function iC(e,t,n,r,a,l,c){var d,g,m=new Map,y=t.length,v=l.length,E=new Array(y),S;for(d=0;d<y;++d)(g=t[d])&&(E[d]=S=c.call(g,g.__data__,d,t)+"",m.has(S)?a[d]=g:m.set(S,g));for(d=0;d<v;++d)S=c.call(e,l[d],d,l)+"",(g=m.get(S))?(r[d]=g,g.__data__=l[d],m.delete(S)):n[d]=new yf(e,l[d]);for(d=0;d<y;++d)(g=t[d])&&m.get(E[d])===g&&(a[d]=g)}function rC(e){return e.__data__}function sC(e,t){if(!arguments.length)return Array.from(this,rC);var n=t?iC:nC,r=this._parents,a=this._groups;typeof e!="function"&&(e=eC(e));for(var l=a.length,c=new Array(l),d=new Array(l),g=new Array(l),m=0;m<l;++m){var y=r[m],v=a[m],E=v.length,S=aC(e.call(y,y&&y.__data__,m,r)),M=S.length,L=d[m]=new Array(M),V=c[m]=new Array(M),B=g[m]=new Array(E);n(y,v,L,V,B,S,t);for(var F=0,q=0,H,nt;F<M;++F)if(H=L[F]){for(F>=q&&(q=F+1);!(nt=V[q])&&++q<M;);H._next=nt||null}}return c=new ti(c,r),c._enter=d,c._exit=g,c}function aC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function oC(){return new ti(this._exit||this._groups.map(Yw),this._parents)}function lC(e,t,n){var r=this.enter(),a=this,l=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?l.remove():n(l),r&&a?r.merge(a).order():a}function uC(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,l=r.length,c=Math.min(a,l),d=new Array(a),g=0;g<c;++g)for(var m=n[g],y=r[g],v=m.length,E=d[g]=new Array(v),S,M=0;M<v;++M)(S=m[M]||y[M])&&(E[M]=S);for(;g<a;++g)d[g]=n[g];return new ti(d,this._parents)}function cC(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],a=r.length-1,l=r[a],c;--a>=0;)(c=r[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function hC(e){e||(e=fC);function t(v,E){return v&&E?e(v.__data__,E.__data__):!v-!E}for(var n=this._groups,r=n.length,a=new Array(r),l=0;l<r;++l){for(var c=n[l],d=c.length,g=a[l]=new Array(d),m,y=0;y<d;++y)(m=c[y])&&(g[y]=m);g.sort(t)}return new ti(a,this._parents).order()}function fC(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function dC(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function gC(){return Array.from(this)}function mC(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length;a<l;++a){var c=r[a];if(c)return c}return null}function pC(){let e=0;for(const t of this)++e;return e}function yC(){return!this.node()}function _C(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a=t[n],l=0,c=a.length,d;l<c;++l)(d=a[l])&&e.call(d,d.__data__,l,a);return this}function vC(e){return function(){this.removeAttribute(e)}}function EC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function TC(e,t){return function(){this.setAttribute(e,t)}}function wC(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function SC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function bC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function AC(e,t){var n=$f(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?EC:vC:typeof t=="function"?n.local?bC:SC:n.local?wC:TC)(n,t))}function Kw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function RC(e){return function(){this.style.removeProperty(e)}}function IC(e,t,n){return function(){this.style.setProperty(e,t,n)}}function CC(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function xC(e,t,n){return arguments.length>1?this.each((t==null?RC:typeof t=="function"?CC:IC)(e,t,n??"")):nl(this.node(),e)}function nl(e,t){return e.style.getPropertyValue(t)||Kw(e).getComputedStyle(e,null).getPropertyValue(t)}function NC(e){return function(){delete this[e]}}function DC(e,t){return function(){this[e]=t}}function OC(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function MC(e,t){return arguments.length>1?this.each((t==null?NC:typeof t=="function"?OC:DC)(e,t)):this.node()[e]}function Xw(e){return e.trim().split(/^|\s+/)}function Bp(e){return e.classList||new Qw(e)}function Qw(e){this._node=e,this._names=Xw(e.getAttribute("class")||"")}Qw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Zw(e,t){for(var n=Bp(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function Ww(e,t){for(var n=Bp(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function VC(e){return function(){Zw(this,e)}}function kC(e){return function(){Ww(this,e)}}function PC(e,t){return function(){(t.apply(this,arguments)?Zw:Ww)(this,e)}}function LC(e,t){var n=Xw(e+"");if(arguments.length<2){for(var r=Bp(this.node()),a=-1,l=n.length;++a<l;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?PC:t?VC:kC)(n,t))}function UC(){this.textContent=""}function zC(e){return function(){this.textContent=e}}function BC(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function HC(e){return arguments.length?this.each(e==null?UC:(typeof e=="function"?BC:zC)(e)):this.node().textContent}function qC(){this.innerHTML=""}function FC(e){return function(){this.innerHTML=e}}function jC(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function GC(e){return arguments.length?this.each(e==null?qC:(typeof e=="function"?jC:FC)(e)):this.node().innerHTML}function $C(){this.nextSibling&&this.parentNode.appendChild(this)}function YC(){return this.each($C)}function KC(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function XC(){return this.each(KC)}function QC(e){var t=typeof e=="function"?e:Fw(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ZC(){return null}function WC(e,t){var n=typeof e=="function"?e:Fw(e),r=t==null?ZC:typeof t=="function"?t:zp(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function JC(){var e=this.parentNode;e&&e.removeChild(this)}function t2(){return this.each(JC)}function e2(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function n2(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function i2(e){return this.select(e?n2:e2)}function r2(e){return arguments.length?this.property("__data__",e):this.node().__data__}function s2(e){return function(t){e.call(this,t,this.__data__)}}function a2(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function o2(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,a=t.length,l;n<a;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++r]=l;++r?t.length=r:delete this.__on}}}function l2(e,t,n){return function(){var r=this.__on,a,l=s2(t);if(r){for(var c=0,d=r.length;c<d;++c)if((a=r[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=t;return}}this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,options:n},r?r.push(a):this.__on=[a]}}function u2(e,t,n){var r=a2(e+""),a,l=r.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var g=0,m=d.length,y;g<m;++g)for(a=0,y=d[g];a<l;++a)if((c=r[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=t?l2:o2,a=0;a<l;++a)this.each(d(r[a],t,n));return this}function Jw(e,t,n){var r=Kw(e),a=r.CustomEvent;typeof a=="function"?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function c2(e,t){return function(){return Jw(this,e,t)}}function h2(e,t){return function(){return Jw(this,e,t.apply(this,arguments))}}function f2(e,t){return this.each((typeof t=="function"?h2:c2)(e,t))}function*d2(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length,c;a<l;++a)(c=r[a])&&(yield c)}var tS=[null];function ti(e,t){this._groups=e,this._parents=t}function lc(){return new ti([[document.documentElement]],tS)}function g2(){return this}ti.prototype=lc.prototype={constructor:ti,select:BI,selectAll:jI,selectChild:KI,selectChildren:WI,filter:JI,data:sC,enter:tC,exit:oC,join:lC,merge:uC,selection:g2,order:cC,sort:hC,call:dC,nodes:gC,node:mC,size:pC,empty:yC,each:_C,attr:AC,style:xC,property:MC,classed:LC,text:HC,html:GC,raise:YC,lower:XC,append:QC,insert:WC,remove:t2,clone:i2,datum:r2,on:u2,dispatch:f2,[Symbol.iterator]:d2};function _i(e){return typeof e=="string"?new ti([[document.querySelector(e)]],[document.documentElement]):new ti([[e]],tS)}function m2(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ni(e,t){if(e=m2(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const p2={passive:!1},Fu={capture:!0,passive:!1};function Cm(e){e.stopImmediatePropagation()}function Xo(e){e.preventDefault(),e.stopImmediatePropagation()}function eS(e){var t=e.document.documentElement,n=_i(e).on("dragstart.drag",Xo,Fu);"onselectstart"in t?n.on("selectstart.drag",Xo,Fu):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function nS(e,t){var n=e.document.documentElement,r=_i(e).on("dragstart.drag",null);t&&(r.on("click.drag",Xo,Fu),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const zh=e=>()=>e;function Zm(e,{sourceEvent:t,subject:n,target:r,identifier:a,active:l,x:c,y:d,dx:g,dy:m,dispatch:y}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:y}})}Zm.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function y2(e){return!e.ctrlKey&&!e.button}function _2(){return this.parentNode}function v2(e,t){return t??{x:e.x,y:e.y}}function E2(){return navigator.maxTouchPoints||"ontouchstart"in this}function T2(){var e=y2,t=_2,n=v2,r=E2,a={},l=Gf("start","drag","end"),c=0,d,g,m,y,v=0;function E(H){H.on("mousedown.drag",S).filter(r).on("touchstart.drag",V).on("touchmove.drag",B,p2).on("touchend.drag touchcancel.drag",F).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(H,nt){if(!(y||!e.call(this,H,nt))){var et=q(this,t.call(this,H,nt),H,nt,"mouse");et&&(_i(H.view).on("mousemove.drag",M,Fu).on("mouseup.drag",L,Fu),eS(H.view),Cm(H),m=!1,d=H.clientX,g=H.clientY,et("start",H))}}function M(H){if(Xo(H),!m){var nt=H.clientX-d,et=H.clientY-g;m=nt*nt+et*et>v}a.mouse("drag",H)}function L(H){_i(H.view).on("mousemove.drag mouseup.drag",null),nS(H.view,m),Xo(H),a.mouse("end",H)}function V(H,nt){if(e.call(this,H,nt)){var et=H.changedTouches,D=t.call(this,H,nt),R=et.length,I,P;for(I=0;I<R;++I)(P=q(this,D,H,nt,et[I].identifier,et[I]))&&(Cm(H),P("start",H,et[I]))}}function B(H){var nt=H.changedTouches,et=nt.length,D,R;for(D=0;D<et;++D)(R=a[nt[D].identifier])&&(Xo(H),R("drag",H,nt[D]))}function F(H){var nt=H.changedTouches,et=nt.length,D,R;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),D=0;D<et;++D)(R=a[nt[D].identifier])&&(Cm(H),R("end",H,nt[D]))}function q(H,nt,et,D,R,I){var P=l.copy(),N=Ni(I||et,nt),U,A,k;if((k=n.call(H,new Zm("beforestart",{sourceEvent:et,target:E,identifier:R,active:c,x:N[0],y:N[1],dx:0,dy:0,dispatch:P}),D))!=null)return U=k.x-N[0]||0,A=k.y-N[1]||0,function tt(O,$,at){var Y=N,x;switch(O){case"start":a[R]=tt,x=c++;break;case"end":delete a[R],--c;case"drag":N=Ni(at||$,nt),x=c;break}P.call(O,H,new Zm(O,{sourceEvent:$,subject:k,target:E,identifier:R,active:x,x:N[0]+U,y:N[1]+A,dx:N[0]-Y[0],dy:N[1]-Y[1],dispatch:P}),D)}}return E.filter=function(H){return arguments.length?(e=typeof H=="function"?H:zh(!!H),E):e},E.container=function(H){return arguments.length?(t=typeof H=="function"?H:zh(H),E):t},E.subject=function(H){return arguments.length?(n=typeof H=="function"?H:zh(H),E):n},E.touchable=function(H){return arguments.length?(r=typeof H=="function"?H:zh(!!H),E):r},E.on=function(){var H=l.on.apply(l,arguments);return H===l?E:H},E.clickDistance=function(H){return arguments.length?(v=(H=+H)*H,E):Math.sqrt(v)},E}function Hp(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function iS(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function uc(){}var ju=.7,_f=1/ju,Qo="\\s*([+-]?\\d+)\\s*",Gu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",w2=/^#([0-9a-f]{3,8})$/,S2=new RegExp(`^rgb\\(${Qo},${Qo},${Qo}\\)$`),b2=new RegExp(`^rgb\\(${sr},${sr},${sr}\\)$`),A2=new RegExp(`^rgba\\(${Qo},${Qo},${Qo},${Gu}\\)$`),R2=new RegExp(`^rgba\\(${sr},${sr},${sr},${Gu}\\)$`),I2=new RegExp(`^hsl\\(${Gu},${sr},${sr}\\)$`),C2=new RegExp(`^hsla\\(${Gu},${sr},${sr},${Gu}\\)$`),SE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hp(uc,$u,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:bE,formatHex:bE,formatHex8:x2,formatHsl:N2,formatRgb:AE,toString:AE});function bE(){return this.rgb().formatHex()}function x2(){return this.rgb().formatHex8()}function N2(){return rS(this).formatHsl()}function AE(){return this.rgb().formatRgb()}function $u(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=w2.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?RE(t):n===3?new Ln(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Bh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Bh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=S2.exec(e))?new Ln(t[1],t[2],t[3],1):(t=b2.exec(e))?new Ln(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=A2.exec(e))?Bh(t[1],t[2],t[3],t[4]):(t=R2.exec(e))?Bh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=I2.exec(e))?xE(t[1],t[2]/100,t[3]/100,1):(t=C2.exec(e))?xE(t[1],t[2]/100,t[3]/100,t[4]):SE.hasOwnProperty(e)?RE(SE[e]):e==="transparent"?new Ln(NaN,NaN,NaN,0):null}function RE(e){return new Ln(e>>16&255,e>>8&255,e&255,1)}function Bh(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ln(e,t,n,r)}function D2(e){return e instanceof uc||(e=$u(e)),e?(e=e.rgb(),new Ln(e.r,e.g,e.b,e.opacity)):new Ln}function Wm(e,t,n,r){return arguments.length===1?D2(e):new Ln(e,t,n,r??1)}function Ln(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Hp(Ln,Wm,iS(uc,{brighter(e){return e=e==null?_f:Math.pow(_f,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ju:Math.pow(ju,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ln(Oa(this.r),Oa(this.g),Oa(this.b),vf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:IE,formatHex:IE,formatHex8:O2,formatRgb:CE,toString:CE}));function IE(){return`#${xa(this.r)}${xa(this.g)}${xa(this.b)}`}function O2(){return`#${xa(this.r)}${xa(this.g)}${xa(this.b)}${xa((isNaN(this.opacity)?1:this.opacity)*255)}`}function CE(){const e=vf(this.opacity);return`${e===1?"rgb(":"rgba("}${Oa(this.r)}, ${Oa(this.g)}, ${Oa(this.b)}${e===1?")":`, ${e})`}`}function vf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Oa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xa(e){return e=Oa(e),(e<16?"0":"")+e.toString(16)}function xE(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Di(e,t,n,r)}function rS(e){if(e instanceof Di)return new Di(e.h,e.s,e.l,e.opacity);if(e instanceof uc||(e=$u(e)),!e)return new Di;if(e instanceof Di)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),l=Math.max(t,n,r),c=NaN,d=l-a,g=(l+a)/2;return d?(t===l?c=(n-r)/d+(n<r)*6:n===l?c=(r-t)/d+2:c=(t-n)/d+4,d/=g<.5?l+a:2-l-a,c*=60):d=g>0&&g<1?0:c,new Di(c,d,g,e.opacity)}function M2(e,t,n,r){return arguments.length===1?rS(e):new Di(e,t,n,r??1)}function Di(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Hp(Di,M2,iS(uc,{brighter(e){return e=e==null?_f:Math.pow(_f,e),new Di(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ju:Math.pow(ju,e),new Di(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Ln(xm(e>=240?e-240:e+120,a,r),xm(e,a,r),xm(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Di(NE(this.h),Hh(this.s),Hh(this.l),vf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vf(this.opacity);return`${e===1?"hsl(":"hsla("}${NE(this.h)}, ${Hh(this.s)*100}%, ${Hh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function NE(e){return e=(e||0)%360,e<0?e+360:e}function Hh(e){return Math.max(0,Math.min(1,e||0))}function xm(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const sS=e=>()=>e;function V2(e,t){return function(n){return e+n*t}}function k2(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function P2(e){return(e=+e)==1?aS:function(t,n){return n-t?k2(t,n,e):sS(isNaN(t)?n:t)}}function aS(e,t){var n=t-e;return n?V2(e,n):sS(isNaN(e)?t:e)}const DE=function e(t){var n=P2(t);function r(a,l){var c=n((a=Wm(a)).r,(l=Wm(l)).r),d=n(a.g,l.g),g=n(a.b,l.b),m=aS(a.opacity,l.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=g(y),a.opacity=m(y),a+""}}return r.gamma=e,r}(1);function bs(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Jm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nm=new RegExp(Jm.source,"g");function L2(e){return function(){return e}}function U2(e){return function(t){return e(t)+""}}function z2(e,t){var n=Jm.lastIndex=Nm.lastIndex=0,r,a,l,c=-1,d=[],g=[];for(e=e+"",t=t+"";(r=Jm.exec(e))&&(a=Nm.exec(t));)(l=a.index)>n&&(l=t.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(r=r[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,g.push({i:c,x:bs(r,a)})),n=Nm.lastIndex;return n<t.length&&(l=t.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?g[0]?U2(g[0].x):L2(t):(t=g.length,function(m){for(var y=0,v;y<t;++y)d[(v=g[y]).i]=v.x(m);return d.join("")})}var OE=180/Math.PI,tp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function oS(e,t,n,r,a,l){var c,d,g;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(g=e*n+t*r)&&(n-=e*g,r-=t*g),(d=Math.sqrt(n*n+r*r))&&(n/=d,r/=d,g/=d),e*r<t*n&&(e=-e,t=-t,g=-g,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(t,e)*OE,skewX:Math.atan(g)*OE,scaleX:c,scaleY:d}}var qh;function B2(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?tp:oS(t.a,t.b,t.c,t.d,t.e,t.f)}function H2(e){return e==null||(qh||(qh=document.createElementNS("http://www.w3.org/2000/svg","g")),qh.setAttribute("transform",e),!(e=qh.transform.baseVal.consolidate()))?tp:(e=e.matrix,oS(e.a,e.b,e.c,e.d,e.e,e.f))}function lS(e,t,n,r){function a(m){return m.length?m.pop()+" ":""}function l(m,y,v,E,S,M){if(m!==v||y!==E){var L=S.push("translate(",null,t,null,n);M.push({i:L-4,x:bs(m,v)},{i:L-2,x:bs(y,E)})}else(v||E)&&S.push("translate("+v+t+E+n)}function c(m,y,v,E){m!==y?(m-y>180?y+=360:y-m>180&&(m+=360),E.push({i:v.push(a(v)+"rotate(",null,r)-2,x:bs(m,y)})):y&&v.push(a(v)+"rotate("+y+r)}function d(m,y,v,E){m!==y?E.push({i:v.push(a(v)+"skewX(",null,r)-2,x:bs(m,y)}):y&&v.push(a(v)+"skewX("+y+r)}function g(m,y,v,E,S,M){if(m!==v||y!==E){var L=S.push(a(S)+"scale(",null,",",null,")");M.push({i:L-4,x:bs(m,v)},{i:L-2,x:bs(y,E)})}else(v!==1||E!==1)&&S.push(a(S)+"scale("+v+","+E+")")}return function(m,y){var v=[],E=[];return m=e(m),y=e(y),l(m.translateX,m.translateY,y.translateX,y.translateY,v,E),c(m.rotate,y.rotate,v,E),d(m.skewX,y.skewX,v,E),g(m.scaleX,m.scaleY,y.scaleX,y.scaleY,v,E),m=y=null,function(S){for(var M=-1,L=E.length,V;++M<L;)v[(V=E[M]).i]=V.x(S);return v.join("")}}}var q2=lS(B2,"px, ","px)","deg)"),F2=lS(H2,", ",")",")"),j2=1e-12;function ME(e){return((e=Math.exp(e))+1/e)/2}function G2(e){return((e=Math.exp(e))-1/e)/2}function $2(e){return((e=Math.exp(2*e))-1)/(e+1)}const Y2=function e(t,n,r){function a(l,c){var d=l[0],g=l[1],m=l[2],y=c[0],v=c[1],E=c[2],S=y-d,M=v-g,L=S*S+M*M,V,B;if(L<j2)B=Math.log(E/m)/t,V=function(D){return[d+D*S,g+D*M,m*Math.exp(t*D*B)]};else{var F=Math.sqrt(L),q=(E*E-m*m+r*L)/(2*m*n*F),H=(E*E-m*m-r*L)/(2*E*n*F),nt=Math.log(Math.sqrt(q*q+1)-q),et=Math.log(Math.sqrt(H*H+1)-H);B=(et-nt)/t,V=function(D){var R=D*B,I=ME(nt),P=m/(n*F)*(I*$2(t*R+nt)-G2(nt));return[d+P*S,g+P*M,m*I/ME(t*R+nt)]}}return V.duration=B*1e3*t/Math.SQRT2,V}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,g=d*d;return e(c,d,g)},a}(Math.SQRT2,2,4);var il=0,Iu=0,wu=0,uS=1e3,Ef,Cu,Tf=0,Va=0,Yf=0,Yu=typeof performance=="object"&&performance.now?performance:Date,cS=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function qp(){return Va||(cS(K2),Va=Yu.now()+Yf)}function K2(){Va=0}function wf(){this._call=this._time=this._next=null}wf.prototype=hS.prototype={constructor:wf,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?qp():+n)+(t==null?0:+t),!this._next&&Cu!==this&&(Cu?Cu._next=this:Ef=this,Cu=this),this._call=e,this._time=n,ep()},stop:function(){this._call&&(this._call=null,this._time=1/0,ep())}};function hS(e,t,n){var r=new wf;return r.restart(e,t,n),r}function X2(){qp(),++il;for(var e=Ef,t;e;)(t=Va-e._time)>=0&&e._call.call(void 0,t),e=e._next;--il}function VE(){Va=(Tf=Yu.now())+Yf,il=Iu=0;try{X2()}finally{il=0,Z2(),Va=0}}function Q2(){var e=Yu.now(),t=e-Tf;t>uS&&(Yf-=t,Tf=e)}function Z2(){for(var e,t=Ef,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ef=n);Cu=e,ep(r)}function ep(e){if(!il){Iu&&(Iu=clearTimeout(Iu));var t=e-Va;t>24?(e<1/0&&(Iu=setTimeout(VE,e-Yu.now()-Yf)),wu&&(wu=clearInterval(wu))):(wu||(Tf=Yu.now(),wu=setInterval(Q2,uS)),il=1,cS(VE))}}function kE(e,t,n){var r=new wf;return t=t==null?0:+t,r.restart(a=>{r.stop(),e(a+t)},t,n),r}var W2=Gf("start","end","cancel","interrupt"),J2=[],fS=0,PE=1,np=2,rf=3,LE=4,ip=5,sf=6;function Kf(e,t,n,r,a,l){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;tx(e,n,{name:t,index:r,group:a,on:W2,tween:J2,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:fS})}function Fp(e,t){var n=Pi(e,t);if(n.state>fS)throw new Error("too late; already scheduled");return n}function hr(e,t){var n=Pi(e,t);if(n.state>rf)throw new Error("too late; already running");return n}function Pi(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function tx(e,t,n){var r=e.__transition,a;r[t]=n,n.timer=hS(l,0,n.time);function l(m){n.state=PE,n.timer.restart(c,n.delay,n.time),n.delay<=m&&c(m-n.delay)}function c(m){var y,v,E,S;if(n.state!==PE)return g();for(y in r)if(S=r[y],S.name===n.name){if(S.state===rf)return kE(c);S.state===LE?(S.state=sf,S.timer.stop(),S.on.call("interrupt",e,e.__data__,S.index,S.group),delete r[y]):+y<t&&(S.state=sf,S.timer.stop(),S.on.call("cancel",e,e.__data__,S.index,S.group),delete r[y])}if(kE(function(){n.state===rf&&(n.state=LE,n.timer.restart(d,n.delay,n.time),d(m))}),n.state=np,n.on.call("start",e,e.__data__,n.index,n.group),n.state===np){for(n.state=rf,a=new Array(E=n.tween.length),y=0,v=-1;y<E;++y)(S=n.tween[y].value.call(e,e.__data__,n.index,n.group))&&(a[++v]=S);a.length=v+1}}function d(m){for(var y=m<n.duration?n.ease.call(null,m/n.duration):(n.timer.restart(g),n.state=ip,1),v=-1,E=a.length;++v<E;)a[v].call(e,y);n.state===ip&&(n.on.call("end",e,e.__data__,n.index,n.group),g())}function g(){n.state=sf,n.timer.stop(),delete r[t];for(var m in r)return;delete e.__transition}}function af(e,t){var n=e.__transition,r,a,l=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((r=n[c]).name!==t){l=!1;continue}a=r.state>np&&r.state<ip,r.state=sf,r.timer.stop(),r.on.call(a?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[c]}l&&delete e.__transition}}function ex(e){return this.each(function(){af(this,e)})}function nx(e,t){var n,r;return function(){var a=hr(this,e),l=a.tween;if(l!==n){r=n=l;for(var c=0,d=r.length;c<d;++c)if(r[c].name===t){r=r.slice(),r.splice(c,1);break}}a.tween=r}}function ix(e,t,n){var r,a;if(typeof n!="function")throw new Error;return function(){var l=hr(this,e),c=l.tween;if(c!==r){a=(r=c).slice();for(var d={name:t,value:n},g=0,m=a.length;g<m;++g)if(a[g].name===t){a[g]=d;break}g===m&&a.push(d)}l.tween=a}}function rx(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Pi(this.node(),n).tween,a=0,l=r.length,c;a<l;++a)if((c=r[a]).name===e)return c.value;return null}return this.each((t==null?nx:ix)(n,e,t))}function jp(e,t,n){var r=e._id;return e.each(function(){var a=hr(this,r);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Pi(a,r).value[t]}}function dS(e,t){var n;return(typeof t=="number"?bs:t instanceof $u?DE:(n=$u(t))?(t=n,DE):z2)(e,t)}function sx(e){return function(){this.removeAttribute(e)}}function ax(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ox(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttribute(e);return c===a?null:c===r?l:l=t(r=c,n)}}function lx(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===r?l:l=t(r=c,n)}}function ux(e,t,n){var r,a,l;return function(){var c,d=n(this),g;return d==null?void this.removeAttribute(e):(c=this.getAttribute(e),g=d+"",c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d)))}}function cx(e,t,n){var r,a,l;return function(){var c,d=n(this),g;return d==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),g=d+"",c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d)))}}function hx(e,t){var n=$f(e),r=n==="transform"?F2:dS;return this.attrTween(e,typeof t=="function"?(n.local?cx:ux)(n,r,jp(this,"attr."+e,t)):t==null?(n.local?ax:sx)(n):(n.local?lx:ox)(n,r,t))}function fx(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function dx(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function gx(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&dx(e,l)),n}return a._value=t,a}function mx(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&fx(e,l)),n}return a._value=t,a}function px(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=$f(e);return this.tween(n,(r.local?gx:mx)(r,t))}function yx(e,t){return function(){Fp(this,e).delay=+t.apply(this,arguments)}}function _x(e,t){return t=+t,function(){Fp(this,e).delay=t}}function vx(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yx:_x)(t,e)):Pi(this.node(),t).delay}function Ex(e,t){return function(){hr(this,e).duration=+t.apply(this,arguments)}}function Tx(e,t){return t=+t,function(){hr(this,e).duration=t}}function wx(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ex:Tx)(t,e)):Pi(this.node(),t).duration}function Sx(e,t){if(typeof t!="function")throw new Error;return function(){hr(this,e).ease=t}}function bx(e){var t=this._id;return arguments.length?this.each(Sx(t,e)):Pi(this.node(),t).ease}function Ax(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;hr(this,e).ease=n}}function Rx(e){if(typeof e!="function")throw new Error;return this.each(Ax(this._id,e))}function Ix(e){typeof e!="function"&&(e=Gw(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=[],g,m=0;m<c;++m)(g=l[m])&&e.call(g,g.__data__,m,l)&&d.push(g);return new qr(r,this._parents,this._name,this._id)}function Cx(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,l=Math.min(r,a),c=new Array(r),d=0;d<l;++d)for(var g=t[d],m=n[d],y=g.length,v=c[d]=new Array(y),E,S=0;S<y;++S)(E=g[S]||m[S])&&(v[S]=E);for(;d<r;++d)c[d]=t[d];return new qr(c,this._parents,this._name,this._id)}function xx(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Nx(e,t,n){var r,a,l=xx(t)?Fp:hr;return function(){var c=l(this,e),d=c.on;d!==r&&(a=(r=d).copy()).on(t,n),c.on=a}}function Dx(e,t){var n=this._id;return arguments.length<2?Pi(this.node(),n).on.on(e):this.each(Nx(n,e,t))}function Ox(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Mx(){return this.on("end.remove",Ox(this._id))}function Vx(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zp(e));for(var r=this._groups,a=r.length,l=new Array(a),c=0;c<a;++c)for(var d=r[c],g=d.length,m=l[c]=new Array(g),y,v,E=0;E<g;++E)(y=d[E])&&(v=e.call(y,y.__data__,E,d))&&("__data__"in y&&(v.__data__=y.__data__),m[E]=v,Kf(m[E],t,n,E,m,Pi(y,n)));return new qr(l,this._parents,t,n)}function kx(e){var t=this._name,n=this._id;typeof e!="function"&&(e=jw(e));for(var r=this._groups,a=r.length,l=[],c=[],d=0;d<a;++d)for(var g=r[d],m=g.length,y,v=0;v<m;++v)if(y=g[v]){for(var E=e.call(y,y.__data__,v,g),S,M=Pi(y,n),L=0,V=E.length;L<V;++L)(S=E[L])&&Kf(S,t,n,L,E,M);l.push(E),c.push(y)}return new qr(l,c,t,n)}var Px=lc.prototype.constructor;function Lx(){return new Px(this._groups,this._parents)}function Ux(e,t){var n,r,a;return function(){var l=nl(this,e),c=(this.style.removeProperty(e),nl(this,e));return l===c?null:l===n&&c===r?a:a=t(n=l,r=c)}}function gS(e){return function(){this.style.removeProperty(e)}}function zx(e,t,n){var r,a=n+"",l;return function(){var c=nl(this,e);return c===a?null:c===r?l:l=t(r=c,n)}}function Bx(e,t,n){var r,a,l;return function(){var c=nl(this,e),d=n(this),g=d+"";return d==null&&(g=d=(this.style.removeProperty(e),nl(this,e))),c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d))}}function Hx(e,t){var n,r,a,l="style."+t,c="end."+l,d;return function(){var g=hr(this,e),m=g.on,y=g.value[l]==null?d||(d=gS(t)):void 0;(m!==n||a!==y)&&(r=(n=m).copy()).on(c,a=y),g.on=r}}function qx(e,t,n){var r=(e+="")=="transform"?q2:dS;return t==null?this.styleTween(e,Ux(e,r)).on("end.style."+e,gS(e)):typeof t=="function"?this.styleTween(e,Bx(e,r,jp(this,"style."+e,t))).each(Hx(this._id,e)):this.styleTween(e,zx(e,r,t),n).on("end.style."+e,null)}function Fx(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function jx(e,t,n){var r,a;function l(){var c=t.apply(this,arguments);return c!==a&&(r=(a=c)&&Fx(e,c,n)),r}return l._value=t,l}function Gx(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,jx(e,t,n??""))}function $x(e){return function(){this.textContent=e}}function Yx(e){return function(){var t=e(this);this.textContent=t??""}}function Kx(e){return this.tween("text",typeof e=="function"?Yx(jp(this,"text",e)):$x(e==null?"":e+""))}function Xx(e){return function(t){this.textContent=e.call(this,t)}}function Qx(e){var t,n;function r(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&Xx(a)),t}return r._value=e,r}function Zx(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Qx(e))}function Wx(){for(var e=this._name,t=this._id,n=mS(),r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,g,m=0;m<d;++m)if(g=c[m]){var y=Pi(g,t);Kf(g,e,n,m,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new qr(r,this._parents,e,n)}function Jx(){var e,t,n=this,r=n._id,a=n.size();return new Promise(function(l,c){var d={value:c},g={value:function(){--a===0&&l()}};n.each(function(){var m=hr(this,r),y=m.on;y!==e&&(t=(e=y).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(g)),m.on=t}),a===0&&l()})}var tN=0;function qr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function mS(){return++tN}var Pr=lc.prototype;qr.prototype={constructor:qr,select:Vx,selectAll:kx,selectChild:Pr.selectChild,selectChildren:Pr.selectChildren,filter:Ix,merge:Cx,selection:Lx,transition:Wx,call:Pr.call,nodes:Pr.nodes,node:Pr.node,size:Pr.size,empty:Pr.empty,each:Pr.each,on:Dx,attr:hx,attrTween:px,style:qx,styleTween:Gx,text:Kx,textTween:Zx,remove:Mx,tween:rx,delay:vx,duration:wx,ease:bx,easeVarying:Rx,end:Jx,[Symbol.iterator]:Pr[Symbol.iterator]};function eN(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var nN={time:null,delay:0,duration:250,ease:eN};function iN(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function rN(e){var t,n;e instanceof qr?(t=e._id,e=e._name):(t=mS(),(n=nN).time=qp(),e=e==null?null:e+"");for(var r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,g,m=0;m<d;++m)(g=c[m])&&Kf(g,e,t,m,c,n||iN(g,t));return new qr(r,this._parents,e,t)}lc.prototype.interrupt=ex;lc.prototype.transition=rN;const Fh=e=>()=>e;function sN(e,{sourceEvent:t,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function Lr(e,t,n){this.k=e,this.x=t,this.y=n}Lr.prototype={constructor:Lr,scale:function(e){return e===1?this:new Lr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Lr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Br=new Lr(1,0,0);Lr.prototype;function Dm(e){e.stopImmediatePropagation()}function Su(e){e.preventDefault(),e.stopImmediatePropagation()}function aN(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function oN(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function UE(){return this.__zoom||Br}function lN(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function uN(){return navigator.maxTouchPoints||"ontouchstart"in this}function cN(e,t,n){var r=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],l=e.invertY(t[0][1])-n[0][1],c=e.invertY(t[1][1])-n[1][1];return e.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function pS(){var e=aN,t=oN,n=cN,r=lN,a=uN,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,g=Y2,m=Gf("start","zoom","end"),y,v,E,S=500,M=150,L=0,V=10;function B(k){k.property("__zoom",UE).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",P).filter(a).on("touchstart.zoom",N).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}B.transform=function(k,tt,O,$){var at=k.selection?k.selection():k;at.property("__zoom",UE),k!==at?nt(k,tt,O,$):at.interrupt().each(function(){et(this,arguments).event($).start().zoom(null,typeof tt=="function"?tt.apply(this,arguments):tt).end()})},B.scaleBy=function(k,tt,O,$){B.scaleTo(k,function(){var at=this.__zoom.k,Y=typeof tt=="function"?tt.apply(this,arguments):tt;return at*Y},O,$)},B.scaleTo=function(k,tt,O,$){B.transform(k,function(){var at=t.apply(this,arguments),Y=this.__zoom,x=O==null?H(at):typeof O=="function"?O.apply(this,arguments):O,G=Y.invert(x),W=typeof tt=="function"?tt.apply(this,arguments):tt;return n(q(F(Y,W),x,G),at,c)},O,$)},B.translateBy=function(k,tt,O,$){B.transform(k,function(){return n(this.__zoom.translate(typeof tt=="function"?tt.apply(this,arguments):tt,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),c)},null,$)},B.translateTo=function(k,tt,O,$,at){B.transform(k,function(){var Y=t.apply(this,arguments),x=this.__zoom,G=$==null?H(Y):typeof $=="function"?$.apply(this,arguments):$;return n(Br.translate(G[0],G[1]).scale(x.k).translate(typeof tt=="function"?-tt.apply(this,arguments):-tt,typeof O=="function"?-O.apply(this,arguments):-O),Y,c)},$,at)};function F(k,tt){return tt=Math.max(l[0],Math.min(l[1],tt)),tt===k.k?k:new Lr(tt,k.x,k.y)}function q(k,tt,O){var $=tt[0]-O[0]*k.k,at=tt[1]-O[1]*k.k;return $===k.x&&at===k.y?k:new Lr(k.k,$,at)}function H(k){return[(+k[0][0]+ +k[1][0])/2,(+k[0][1]+ +k[1][1])/2]}function nt(k,tt,O,$){k.on("start.zoom",function(){et(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){et(this,arguments).event($).end()}).tween("zoom",function(){var at=this,Y=arguments,x=et(at,Y).event($),G=t.apply(at,Y),W=O==null?H(G):typeof O=="function"?O.apply(at,Y):O,rt=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),ct=at.__zoom,mt=typeof tt=="function"?tt.apply(at,Y):tt,pt=g(ct.invert(W).concat(rt/ct.k),mt.invert(W).concat(rt/mt.k));return function(It){if(It===1)It=mt;else{var At=pt(It),kt=rt/At[2];It=new Lr(kt,W[0]-At[0]*kt,W[1]-At[1]*kt)}x.zoom(null,It)}})}function et(k,tt,O){return!O&&k.__zooming||new D(k,tt)}function D(k,tt){this.that=k,this.args=tt,this.active=0,this.sourceEvent=null,this.extent=t.apply(k,tt),this.taps=0}D.prototype={event:function(k){return k&&(this.sourceEvent=k),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(k,tt){return this.mouse&&k!=="mouse"&&(this.mouse[1]=tt.invert(this.mouse[0])),this.touch0&&k!=="touch"&&(this.touch0[1]=tt.invert(this.touch0[0])),this.touch1&&k!=="touch"&&(this.touch1[1]=tt.invert(this.touch1[0])),this.that.__zoom=tt,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(k){var tt=_i(this.that).datum();m.call(k,this.that,new sN(k,{sourceEvent:this.sourceEvent,target:B,transform:this.that.__zoom,dispatch:m}),tt)}};function R(k,...tt){if(!e.apply(this,arguments))return;var O=et(this,tt).event(k),$=this.__zoom,at=Math.max(l[0],Math.min(l[1],$.k*Math.pow(2,r.apply(this,arguments)))),Y=Ni(k);if(O.wheel)(O.mouse[0][0]!==Y[0]||O.mouse[0][1]!==Y[1])&&(O.mouse[1]=$.invert(O.mouse[0]=Y)),clearTimeout(O.wheel);else{if($.k===at)return;O.mouse=[Y,$.invert(Y)],af(this),O.start()}Su(k),O.wheel=setTimeout(x,M),O.zoom("mouse",n(q(F($,at),O.mouse[0],O.mouse[1]),O.extent,c));function x(){O.wheel=null,O.end()}}function I(k,...tt){if(E||!e.apply(this,arguments))return;var O=k.currentTarget,$=et(this,tt,!0).event(k),at=_i(k.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",rt,!0),Y=Ni(k,O),x=k.clientX,G=k.clientY;eS(k.view),Dm(k),$.mouse=[Y,this.__zoom.invert(Y)],af(this),$.start();function W(ct){if(Su(ct),!$.moved){var mt=ct.clientX-x,pt=ct.clientY-G;$.moved=mt*mt+pt*pt>L}$.event(ct).zoom("mouse",n(q($.that.__zoom,$.mouse[0]=Ni(ct,O),$.mouse[1]),$.extent,c))}function rt(ct){at.on("mousemove.zoom mouseup.zoom",null),nS(ct.view,$.moved),Su(ct),$.event(ct).end()}}function P(k,...tt){if(e.apply(this,arguments)){var O=this.__zoom,$=Ni(k.changedTouches?k.changedTouches[0]:k,this),at=O.invert($),Y=O.k*(k.shiftKey?.5:2),x=n(q(F(O,Y),$,at),t.apply(this,tt),c);Su(k),d>0?_i(this).transition().duration(d).call(nt,x,$,k):_i(this).call(B.transform,x,$,k)}}function N(k,...tt){if(e.apply(this,arguments)){var O=k.touches,$=O.length,at=et(this,tt,k.changedTouches.length===$).event(k),Y,x,G,W;for(Dm(k),x=0;x<$;++x)G=O[x],W=Ni(G,this),W=[W,this.__zoom.invert(W),G.identifier],at.touch0?!at.touch1&&at.touch0[2]!==W[2]&&(at.touch1=W,at.taps=0):(at.touch0=W,Y=!0,at.taps=1+!!y);y&&(y=clearTimeout(y)),Y&&(at.taps<2&&(v=W[0],y=setTimeout(function(){y=null},S)),af(this),at.start())}}function U(k,...tt){if(this.__zooming){var O=et(this,tt).event(k),$=k.changedTouches,at=$.length,Y,x,G,W;for(Su(k),Y=0;Y<at;++Y)x=$[Y],G=Ni(x,this),O.touch0&&O.touch0[2]===x.identifier?O.touch0[0]=G:O.touch1&&O.touch1[2]===x.identifier&&(O.touch1[0]=G);if(x=O.that.__zoom,O.touch1){var rt=O.touch0[0],ct=O.touch0[1],mt=O.touch1[0],pt=O.touch1[1],It=(It=mt[0]-rt[0])*It+(It=mt[1]-rt[1])*It,At=(At=pt[0]-ct[0])*At+(At=pt[1]-ct[1])*At;x=F(x,Math.sqrt(It/At)),G=[(rt[0]+mt[0])/2,(rt[1]+mt[1])/2],W=[(ct[0]+pt[0])/2,(ct[1]+pt[1])/2]}else if(O.touch0)G=O.touch0[0],W=O.touch0[1];else return;O.zoom("touch",n(q(x,G,W),O.extent,c))}}function A(k,...tt){if(this.__zooming){var O=et(this,tt).event(k),$=k.changedTouches,at=$.length,Y,x;for(Dm(k),E&&clearTimeout(E),E=setTimeout(function(){E=null},S),Y=0;Y<at;++Y)x=$[Y],O.touch0&&O.touch0[2]===x.identifier?delete O.touch0:O.touch1&&O.touch1[2]===x.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(x=Ni(x,this),Math.hypot(v[0]-x[0],v[1]-x[1])<V)){var G=_i(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return B.wheelDelta=function(k){return arguments.length?(r=typeof k=="function"?k:Fh(+k),B):r},B.filter=function(k){return arguments.length?(e=typeof k=="function"?k:Fh(!!k),B):e},B.touchable=function(k){return arguments.length?(a=typeof k=="function"?k:Fh(!!k),B):a},B.extent=function(k){return arguments.length?(t=typeof k=="function"?k:Fh([[+k[0][0],+k[0][1]],[+k[1][0],+k[1][1]]]),B):t},B.scaleExtent=function(k){return arguments.length?(l[0]=+k[0],l[1]=+k[1],B):[l[0],l[1]]},B.translateExtent=function(k){return arguments.length?(c[0][0]=+k[0][0],c[1][0]=+k[1][0],c[0][1]=+k[0][1],c[1][1]=+k[1][1],B):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},B.constrain=function(k){return arguments.length?(n=k,B):n},B.duration=function(k){return arguments.length?(d=+k,B):d},B.interpolate=function(k){return arguments.length?(g=k,B):g},B.on=function(){var k=m.on.apply(m,arguments);return k===m?B:k},B.clickDistance=function(k){return arguments.length?(L=(k=+k)*k,B):Math.sqrt(L)},B.tapDistance=function(k){return arguments.length?(V=+k,B):V},B}Hw();const Xf=X.createContext(null),hN=Xf.Provider,Fr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},yS=Fr.error001();function me(e,t){const n=X.useContext(Xf);if(n===null)throw new Error(yS);return qw(n,e,t)}const Ke=()=>{const e=X.useContext(Xf);if(e===null)throw new Error(yS);return X.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},fN=e=>e.userSelectionActive?"none":"all";function Gp({position:e,children:t,className:n,style:r,...a}){const l=me(fN),c=`${e}`.split("-");return lt.createElement("div",{className:mn(["react-flow__panel",n,...c]),style:{...r,pointerEvents:l},...a},t)}function dN({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:lt.createElement(Gp,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},lt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const gN=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:a=!0,labelBgStyle:l={},labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:g,className:m,...y})=>{const v=X.useRef(null),[E,S]=X.useState({x:0,y:0,width:0,height:0}),M=mn(["react-flow__edge-textwrapper",m]);return X.useEffect(()=>{if(v.current){const L=v.current.getBBox();S({x:L.x,y:L.y,width:L.width,height:L.height})}},[n]),typeof n>"u"||!n?null:lt.createElement("g",{transform:`translate(${e-E.width/2} ${t-E.height/2})`,className:M,visibility:E.width?"visible":"hidden",...y},a&&lt.createElement("rect",{width:E.width+2*c[0],x:-c[0],y:-c[1],height:E.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),lt.createElement("text",{className:"react-flow__edge-text",y:E.height/2,dy:"0.3em",ref:v,style:r},n),g)};var mN=X.memo(gN);const $p=e=>({width:e.offsetWidth,height:e.offsetHeight}),rl=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Yp=(e={x:0,y:0},t)=>({x:rl(e.x,t[0][0],t[1][0]),y:rl(e.y,t[0][1],t[1][1])}),zE=(e,t,n)=>e<t?rl(Math.abs(e-t),1,50)/50:e>n?-rl(Math.abs(e-n),1,50)/50:0,_S=(e,t)=>{const n=zE(e.x,35,t.width-35)*20,r=zE(e.y,35,t.height-35)*20;return[n,r]},vS=e=>e.getRootNode?.()||window?.document,ES=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Ku=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),TS=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),BE=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),pN=(e,t)=>TS(ES(Ku(e),Ku(t))),rp=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},yN=e=>Ei(e.width)&&Ei(e.height)&&Ei(e.x)&&Ei(e.y),Ei=e=>!isNaN(e)&&isFinite(e),Ie=Symbol.for("internals"),wS=["Enter"," ","Escape"],_N=(e,t)=>{},vN=e=>"nativeEvent"in e;function sp(e){const n=(vN(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const SS=e=>"clientX"in e,Os=(e,t)=>{const n=SS(e),r=n?e.clientX:e.touches?.[0].clientX,a=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:a-(t?.top??0)}},Sf=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,cc=({id:e,path:t,labelX:n,labelY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:E,interactionWidth:S=20})=>lt.createElement(lt.Fragment,null,lt.createElement("path",{id:e,style:y,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:E}),S&&lt.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:S,className:"react-flow__edge-interaction"}),a&&Ei(n)&&Ei(r)?lt.createElement(mN,{x:n,y:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m}):null);cc.displayName="BaseEdge";function bu(e,t,n){return n===void 0?n:r=>{const a=t().edges.find(l=>l.id===e);a&&n(r,{...a})}}function bS({sourceX:e,sourceY:t,targetX:n,targetY:r}){const a=Math.abs(n-e)/2,l=n<e?n+a:n-a,c=Math.abs(r-t)/2,d=r<t?r+c:r-c;return[l,d,a,c]}function AS({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const g=e*.125+a*.375+c*.375+n*.125,m=t*.125+l*.375+d*.375+r*.125,y=Math.abs(g-e),v=Math.abs(m-t);return[g,m,y,v]}var zs;(function(e){e.Strict="strict",e.Loose="loose"})(zs||(zs={}));var Na;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Na||(Na={}));var Xu;(function(e){e.Partial="partial",e.Full="full"})(Xu||(Xu={}));var Rs;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Rs||(Rs={}));var bf;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(bf||(bf={}));var bt;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(bt||(bt={}));function HE({pos:e,x1:t,y1:n,x2:r,y2:a}){return e===bt.Left||e===bt.Right?[.5*(t+r),n]:[t,.5*(n+a)]}function RS({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:a,targetPosition:l=bt.Top}){const[c,d]=HE({pos:n,x1:e,y1:t,x2:r,y2:a}),[g,m]=HE({pos:l,x1:r,y1:a,x2:e,y2:t}),[y,v,E,S]=AS({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:g,targetControlY:m});return[`M${e},${t} C${c},${d} ${g},${m} ${r},${a}`,y,v,E,S]}const Kp=X.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=bt.Bottom,targetPosition:l=bt.Top,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:S,markerStart:M,interactionWidth:L})=>{const[V,B,F]=RS({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:l});return lt.createElement(cc,{path:V,labelX:B,labelY:F,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:S,markerStart:M,interactionWidth:L})});Kp.displayName="SimpleBezierEdge";const qE={[bt.Left]:{x:-1,y:0},[bt.Right]:{x:1,y:0},[bt.Top]:{x:0,y:-1},[bt.Bottom]:{x:0,y:1}},EN=({source:e,sourcePosition:t=bt.Bottom,target:n})=>t===bt.Left||t===bt.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},FE=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function TN({source:e,sourcePosition:t=bt.Bottom,target:n,targetPosition:r=bt.Top,center:a,offset:l}){const c=qE[t],d=qE[r],g={x:e.x+c.x*l,y:e.y+c.y*l},m={x:n.x+d.x*l,y:n.y+d.y*l},y=EN({source:g,sourcePosition:t,target:m}),v=y.x!==0?"x":"y",E=y[v];let S=[],M,L;const V={x:0,y:0},B={x:0,y:0},[F,q,H,nt]=bS({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[v]*d[v]===-1){M=a.x??F,L=a.y??q;const D=[{x:M,y:g.y},{x:M,y:m.y}],R=[{x:g.x,y:L},{x:m.x,y:L}];c[v]===E?S=v==="x"?D:R:S=v==="x"?R:D}else{const D=[{x:g.x,y:m.y}],R=[{x:m.x,y:g.y}];if(v==="x"?S=c.x===E?R:D:S=c.y===E?D:R,t===r){const A=Math.abs(e[v]-n[v]);if(A<=l){const k=Math.min(l-1,l-A);c[v]===E?V[v]=(g[v]>e[v]?-1:1)*k:B[v]=(m[v]>n[v]?-1:1)*k}}if(t!==r){const A=v==="x"?"y":"x",k=c[v]===d[A],tt=g[A]>m[A],O=g[A]<m[A];(c[v]===1&&(!k&&tt||k&&O)||c[v]!==1&&(!k&&O||k&&tt))&&(S=v==="x"?D:R)}const I={x:g.x+V.x,y:g.y+V.y},P={x:m.x+B.x,y:m.y+B.y},N=Math.max(Math.abs(I.x-S[0].x),Math.abs(P.x-S[0].x)),U=Math.max(Math.abs(I.y-S[0].y),Math.abs(P.y-S[0].y));N>=U?(M=(I.x+P.x)/2,L=S[0].y):(M=S[0].x,L=(I.y+P.y)/2)}return[[e,{x:g.x+V.x,y:g.y+V.y},...S,{x:m.x+B.x,y:m.y+B.y},n],M,L,H,nt]}function wN(e,t,n,r){const a=Math.min(FE(e,t)/2,FE(t,n)/2,r),{x:l,y:c}=t;if(e.x===l&&l===n.x||e.y===c&&c===n.y)return`L${l} ${c}`;if(e.y===c){const m=e.x<n.x?-1:1,y=e.y<n.y?1:-1;return`L ${l+a*m},${c}Q ${l},${c} ${l},${c+a*y}`}const d=e.x<n.x?1:-1,g=e.y<n.y?-1:1;return`L ${l},${c+a*g}Q ${l},${c} ${l+a*d},${c}`}function ap({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:a,targetPosition:l=bt.Top,borderRadius:c=5,centerX:d,centerY:g,offset:m=20}){const[y,v,E,S,M]=TN({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:a},targetPosition:l,center:{x:d,y:g},offset:m});return[y.reduce((V,B,F)=>{let q="";return F>0&&F<y.length-1?q=wN(y[F-1],B,y[F+1],c):q=`${F===0?"M":"L"}${B.x} ${B.y}`,V+=q,V},""),v,E,S,M]}const Qf=X.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,sourcePosition:v=bt.Bottom,targetPosition:E=bt.Top,markerEnd:S,markerStart:M,pathOptions:L,interactionWidth:V})=>{const[B,F,q]=ap({sourceX:e,sourceY:t,sourcePosition:v,targetX:n,targetY:r,targetPosition:E,borderRadius:L?.borderRadius,offset:L?.offset});return lt.createElement(cc,{path:B,labelX:F,labelY:q,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:S,markerStart:M,interactionWidth:V})});Qf.displayName="SmoothStepEdge";const Xp=X.memo(e=>lt.createElement(Qf,{...e,pathOptions:X.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));Xp.displayName="StepEdge";function SN({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[a,l,c,d]=bS({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,a,l,c,d]}const Qp=X.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:E,interactionWidth:S})=>{const[M,L,V]=SN({sourceX:e,sourceY:t,targetX:n,targetY:r});return lt.createElement(cc,{path:M,labelX:L,labelY:V,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:E,interactionWidth:S})});Qp.displayName="StraightEdge";function jh(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function jE({pos:e,x1:t,y1:n,x2:r,y2:a,c:l}){switch(e){case bt.Left:return[t-jh(t-r,l),n];case bt.Right:return[t+jh(r-t,l),n];case bt.Top:return[t,n-jh(n-a,l)];case bt.Bottom:return[t,n+jh(a-n,l)]}}function IS({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:a,targetPosition:l=bt.Top,curvature:c=.25}){const[d,g]=jE({pos:n,x1:e,y1:t,x2:r,y2:a,c}),[m,y]=jE({pos:l,x1:r,y1:a,x2:e,y2:t,c}),[v,E,S,M]=AS({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:d,sourceControlY:g,targetControlX:m,targetControlY:y});return[`M${e},${t} C${d},${g} ${m},${y} ${r},${a}`,v,E,S,M]}const Af=X.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=bt.Bottom,targetPosition:l=bt.Top,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:S,markerStart:M,pathOptions:L,interactionWidth:V})=>{const[B,F,q]=IS({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:l,curvature:L?.curvature});return lt.createElement(cc,{path:B,labelX:F,labelY:q,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:S,markerStart:M,interactionWidth:V})});Af.displayName="BezierEdge";const Zp=X.createContext(null),bN=Zp.Provider;Zp.Consumer;const AN=()=>X.useContext(Zp),RN=e=>"id"in e&&"source"in e&&"target"in e,IN=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,op=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,CN=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),CS=(e,t)=>{if(!e.source||!e.target)return t;let n;return RN(e)?n={...e}:n={...e,id:IN(e)},CN(n,t)?t:t.concat(n)},lp=({x:e,y:t},[n,r,a],l,[c,d])=>{const g={x:(e-n)/a,y:(t-r)/a};return l?{x:c*Math.round(g.x/c),y:d*Math.round(g.y/d)}:g},xS=({x:e,y:t},[n,r,a])=>({x:e*a+n,y:t*a+r}),Ma=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],a={x:e.position.x-n,y:e.position.y-r};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:a}},Zf=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,a)=>{const{x:l,y:c}=Ma(a,t).positionAbsolute;return ES(r,Ku({x:l,y:c,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return TS(n)},NS=(e,t,[n,r,a]=[0,0,1],l=!1,c=!1,d=[0,0])=>{const g={x:(t.x-n)/a,y:(t.y-r)/a,width:t.width/a,height:t.height/a},m=[];return e.forEach(y=>{const{width:v,height:E,selectable:S=!0,hidden:M=!1}=y;if(c&&!S||M)return!1;const{positionAbsolute:L}=Ma(y,d),V={x:L.x,y:L.y,width:v||0,height:E||0},B=rp(g,V),F=typeof v>"u"||typeof E>"u"||v===null||E===null,q=l&&B>0,H=(v||0)*(E||0);(F||q||B>=H||y.dragging)&&m.push(y)}),m},DS=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},OS=(e,t,n,r,a,l=.1)=>{const c=t/(e.width*(1+l)),d=n/(e.height*(1+l)),g=Math.min(c,d),m=rl(g,r,a),y=e.x+e.width/2,v=e.y+e.height/2,E=t/2-y*m,S=n/2-v*m;return{x:E,y:S,zoom:m}},Ra=(e,t=0)=>e.transition().duration(t);function GE(e,t,n,r){return(t[n]||[]).reduce((a,l)=>(`${e.id}-${l.id}-${n}`!==r&&a.push({id:l.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+l.x+l.width/2,y:(e.positionAbsolute?.y??0)+l.y+l.height/2}),a),[])}function xN(e,t,n,r,a,l){const{x:c,y:d}=Os(e),m=t.elementsFromPoint(c,d).find(M=>M.classList.contains("react-flow__handle"));if(m){const M=m.getAttribute("data-nodeid");if(M){const L=Wp(void 0,m),V=m.getAttribute("data-handleid"),B=l({nodeId:M,id:V,type:L});if(B){const F=a.find(q=>q.nodeId===M&&q.type===L&&q.id===V);return{handle:{id:V,type:L,nodeId:M,x:F?.x||n.x,y:F?.y||n.y},validHandleResult:B}}}}let y=[],v=1/0;if(a.forEach(M=>{const L=Math.sqrt((M.x-n.x)**2+(M.y-n.y)**2);if(L<=r){const V=l(M);L<=v&&(L<v?y=[{handle:M,validHandleResult:V}]:L===v&&y.push({handle:M,validHandleResult:V}),v=L)}}),!y.length)return{handle:null,validHandleResult:MS()};if(y.length===1)return y[0];const E=y.some(({validHandleResult:M})=>M.isValid),S=y.some(({handle:M})=>M.type==="target");return y.find(({handle:M,validHandleResult:L})=>S?M.type==="target":E?L.isValid:!0)||y[0]}const NN={source:null,target:null,sourceHandle:null,targetHandle:null},MS=()=>({handleDomNode:null,isValid:!1,connection:NN,endHandle:null});function VS(e,t,n,r,a,l,c){const d=a==="target",g=c.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),m={...MS(),handleDomNode:g};if(g){const y=Wp(void 0,g),v=g.getAttribute("data-nodeid"),E=g.getAttribute("data-handleid"),S=g.classList.contains("connectable"),M=g.classList.contains("connectableend"),L={source:d?v:n,sourceHandle:d?E:r,target:d?n:v,targetHandle:d?r:E};m.connection=L,S&&M&&(t===zs.Strict?d&&y==="source"||!d&&y==="target":v!==n||E!==r)&&(m.endHandle={nodeId:v,handleId:E,type:y},m.isValid=l(L))}return m}function DN({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((a,l)=>{if(l[Ie]){const{handleBounds:c}=l[Ie];let d=[],g=[];c&&(d=GE(l,c,"source",`${t}-${n}-${r}`),g=GE(l,c,"target",`${t}-${n}-${r}`)),a.push(...d,...g)}return a},[])}function Wp(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Om(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function ON(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function kS({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:a,getState:l,setState:c,isValidConnection:d,edgeUpdaterType:g,onReconnectEnd:m}){const y=vS(e.target),{connectionMode:v,domNode:E,autoPanOnConnect:S,connectionRadius:M,onConnectStart:L,panBy:V,getNodes:B,cancelConnection:F}=l();let q=0,H;const{x:nt,y:et}=Os(e),D=y?.elementFromPoint(nt,et),R=Wp(g,D),I=E?.getBoundingClientRect();if(!I||!R)return;let P,N=Os(e,I),U=!1,A=null,k=!1,tt=null;const O=DN({nodes:B(),nodeId:n,handleId:t,handleType:R}),$=()=>{if(!S)return;const[x,G]=_S(N,I);V({x,y:G}),q=requestAnimationFrame($)};c({connectionPosition:N,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:R,connectionStartHandle:{nodeId:n,handleId:t,type:R},connectionEndHandle:null}),L?.(e,{nodeId:n,handleId:t,handleType:R});function at(x){const{transform:G}=l();N=Os(x,I);const{handle:W,validHandleResult:rt}=xN(x,y,lp(N,G,!1,[1,1]),M,O,ct=>VS(ct,v,n,t,a?"target":"source",d,y));if(H=W,U||($(),U=!0),tt=rt.handleDomNode,A=rt.connection,k=rt.isValid,c({connectionPosition:H&&k?xS({x:H.x,y:H.y},G):N,connectionStatus:ON(!!H,k),connectionEndHandle:rt.endHandle}),!H&&!k&&!tt)return Om(P);A.source!==A.target&&tt&&(Om(P),P=tt,tt.classList.add("connecting","react-flow__handle-connecting"),tt.classList.toggle("valid",k),tt.classList.toggle("react-flow__handle-valid",k))}function Y(x){(H||tt)&&A&&k&&r?.(A),l().onConnectEnd?.(x),g&&m?.(x),Om(P),F(),cancelAnimationFrame(q),U=!1,k=!1,A=null,tt=null,y.removeEventListener("mousemove",at),y.removeEventListener("mouseup",Y),y.removeEventListener("touchmove",at),y.removeEventListener("touchend",Y)}y.addEventListener("mousemove",at),y.addEventListener("mouseup",Y),y.addEventListener("touchmove",at),y.addEventListener("touchend",Y)}const $E=()=>!0,MN=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),VN=(e,t,n)=>r=>{const{connectionStartHandle:a,connectionEndHandle:l,connectionClickStartHandle:c}=r;return{connecting:a?.nodeId===e&&a?.handleId===t&&a?.type===n||l?.nodeId===e&&l?.handleId===t&&l?.type===n,clickConnecting:c?.nodeId===e&&c?.handleId===t&&c?.type===n}},PS=X.forwardRef(({type:e="source",position:t=bt.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:g,className:m,onMouseDown:y,onTouchStart:v,...E},S)=>{const M=c||null,L=e==="target",V=Ke(),B=AN(),{connectOnClick:F,noPanClassName:q}=me(MN,sn),{connecting:H,clickConnecting:nt}=me(VN(B,M,e),sn);B||V.getState().onError?.("010",Fr.error010());const et=I=>{const{defaultEdgeOptions:P,onConnect:N,hasDefaultEdges:U}=V.getState(),A={...P,...I};if(U){const{edges:k,setEdges:tt}=V.getState();tt(CS(A,k))}N?.(A),d?.(A)},D=I=>{if(!B)return;const P=SS(I);a&&(P&&I.button===0||!P)&&kS({event:I,handleId:M,nodeId:B,onConnect:et,isTarget:L,getState:V.getState,setState:V.setState,isValidConnection:n||V.getState().isValidConnection||$E}),P?y?.(I):v?.(I)},R=I=>{const{onClickConnectStart:P,onClickConnectEnd:N,connectionClickStartHandle:U,connectionMode:A,isValidConnection:k}=V.getState();if(!B||!U&&!a)return;if(!U){P?.(I,{nodeId:B,handleId:M,handleType:e}),V.setState({connectionClickStartHandle:{nodeId:B,type:e,handleId:M}});return}const tt=vS(I.target),O=n||k||$E,{connection:$,isValid:at}=VS({nodeId:B,id:M,type:e},A,U.nodeId,U.handleId||null,U.type,O,tt);at&&et($),N?.(I),V.setState({connectionClickStartHandle:null})};return lt.createElement("div",{"data-handleid":M,"data-nodeid":B,"data-handlepos":t,"data-id":`${B}-${M}-${e}`,className:mn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",q,m,{source:!L,target:L,connectable:r,connectablestart:a,connectableend:l,connecting:nt,connectionindicator:r&&(a&&!H||l&&H)}]),onMouseDown:D,onTouchStart:D,onClick:F?R:void 0,ref:S,...E},g)});PS.displayName="Handle";var ka=X.memo(PS);const LS=({data:e,isConnectable:t,targetPosition:n=bt.Top,sourcePosition:r=bt.Bottom})=>lt.createElement(lt.Fragment,null,lt.createElement(ka,{type:"target",position:n,isConnectable:t}),e?.label,lt.createElement(ka,{type:"source",position:r,isConnectable:t}));LS.displayName="DefaultNode";var up=X.memo(LS);const US=({data:e,isConnectable:t,sourcePosition:n=bt.Bottom})=>lt.createElement(lt.Fragment,null,e?.label,lt.createElement(ka,{type:"source",position:n,isConnectable:t}));US.displayName="InputNode";var zS=X.memo(US);const BS=({data:e,isConnectable:t,targetPosition:n=bt.Top})=>lt.createElement(lt.Fragment,null,lt.createElement(ka,{type:"target",position:n,isConnectable:t}),e?.label);BS.displayName="OutputNode";var HS=X.memo(BS);const Jp=()=>null;Jp.displayName="GroupNode";const kN=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Gh=e=>e.id;function PN(e,t){return sn(e.selectedNodes.map(Gh),t.selectedNodes.map(Gh))&&sn(e.selectedEdges.map(Gh),t.selectedEdges.map(Gh))}const qS=X.memo(({onSelectionChange:e})=>{const t=Ke(),{selectedNodes:n,selectedEdges:r}=me(kN,PN);return X.useEffect(()=>{const a={nodes:n,edges:r};e?.(a),t.getState().onSelectionChange.forEach(l=>l(a))},[n,r,e]),null});qS.displayName="SelectionListener";const LN=e=>!!e.onSelectionChange;function UN({onSelectionChange:e}){const t=me(LN);return e||t?lt.createElement(qS,{onSelectionChange:e}):null}const zN=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function zo(e,t){X.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function qt(e,t,n){X.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const BN=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:a,onConnectStart:l,onConnectEnd:c,onClickConnectStart:d,onClickConnectEnd:g,nodesDraggable:m,nodesConnectable:y,nodesFocusable:v,edgesFocusable:E,edgesUpdatable:S,elevateNodesOnSelect:M,minZoom:L,maxZoom:V,nodeExtent:B,onNodesChange:F,onEdgesChange:q,elementsSelectable:H,connectionMode:nt,snapGrid:et,snapToGrid:D,translateExtent:R,connectOnClick:I,defaultEdgeOptions:P,fitView:N,fitViewOptions:U,onNodesDelete:A,onEdgesDelete:k,onNodeDrag:tt,onNodeDragStart:O,onNodeDragStop:$,onSelectionDrag:at,onSelectionDragStart:Y,onSelectionDragStop:x,noPanClassName:G,nodeOrigin:W,rfId:rt,autoPanOnConnect:ct,autoPanOnNodeDrag:mt,onError:pt,connectionRadius:It,isValidConnection:At,nodeDragThreshold:kt})=>{const{setNodes:Pt,setEdges:ue,setDefaultNodesAndEdges:ce,setMinZoom:ve,setMaxZoom:ye,setTranslateExtent:he,setNodeExtent:Xe,reset:Lt}=me(zN,sn),wt=Ke();return X.useEffect(()=>{const xe=r?.map(pn=>({...pn,...P}));return ce(n,xe),()=>{Lt()}},[]),qt("defaultEdgeOptions",P,wt.setState),qt("connectionMode",nt,wt.setState),qt("onConnect",a,wt.setState),qt("onConnectStart",l,wt.setState),qt("onConnectEnd",c,wt.setState),qt("onClickConnectStart",d,wt.setState),qt("onClickConnectEnd",g,wt.setState),qt("nodesDraggable",m,wt.setState),qt("nodesConnectable",y,wt.setState),qt("nodesFocusable",v,wt.setState),qt("edgesFocusable",E,wt.setState),qt("edgesUpdatable",S,wt.setState),qt("elementsSelectable",H,wt.setState),qt("elevateNodesOnSelect",M,wt.setState),qt("snapToGrid",D,wt.setState),qt("snapGrid",et,wt.setState),qt("onNodesChange",F,wt.setState),qt("onEdgesChange",q,wt.setState),qt("connectOnClick",I,wt.setState),qt("fitViewOnInit",N,wt.setState),qt("fitViewOnInitOptions",U,wt.setState),qt("onNodesDelete",A,wt.setState),qt("onEdgesDelete",k,wt.setState),qt("onNodeDrag",tt,wt.setState),qt("onNodeDragStart",O,wt.setState),qt("onNodeDragStop",$,wt.setState),qt("onSelectionDrag",at,wt.setState),qt("onSelectionDragStart",Y,wt.setState),qt("onSelectionDragStop",x,wt.setState),qt("noPanClassName",G,wt.setState),qt("nodeOrigin",W,wt.setState),qt("rfId",rt,wt.setState),qt("autoPanOnConnect",ct,wt.setState),qt("autoPanOnNodeDrag",mt,wt.setState),qt("onError",pt,wt.setState),qt("connectionRadius",It,wt.setState),qt("isValidConnection",At,wt.setState),qt("nodeDragThreshold",kt,wt.setState),zo(e,Pt),zo(t,ue),zo(L,ve),zo(V,ye),zo(R,he),zo(B,Xe),null},YE={display:"none"},HN={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},FS="react-flow__node-desc",jS="react-flow__edge-desc",qN="react-flow__aria-live",FN=e=>e.ariaLiveMessage;function jN({rfId:e}){const t=me(FN);return lt.createElement("div",{id:`${qN}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:HN},t)}function GN({rfId:e,disableKeyboardA11y:t}){return lt.createElement(lt.Fragment,null,lt.createElement("div",{id:`${FS}-${e}`,style:YE},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),lt.createElement("div",{id:`${jS}-${e}`,style:YE},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&lt.createElement(jN,{rfId:e}))}var Qu=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=X.useState(!1),a=X.useRef(!1),l=X.useRef(new Set([])),[c,d]=X.useMemo(()=>{if(e!==null){const m=(Array.isArray(e)?e:[e]).filter(v=>typeof v=="string").map(v=>v.split("+")),y=m.reduce((v,E)=>v.concat(...E),[]);return[m,y]}return[[],[]]},[e]);return X.useEffect(()=>{const g=typeof document<"u"?document:null,m=t?.target||g;if(e!==null){const y=S=>{if(a.current=S.ctrlKey||S.metaKey||S.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&sp(S))return!1;const L=XE(S.code,d);l.current.add(S[L]),KE(c,l.current,!1)&&(S.preventDefault(),r(!0))},v=S=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&sp(S))return!1;const L=XE(S.code,d);KE(c,l.current,!0)?(r(!1),l.current.clear()):l.current.delete(S[L]),S.key==="Meta"&&l.current.clear(),a.current=!1},E=()=>{l.current.clear(),r(!1)};return m?.addEventListener("keydown",y),m?.addEventListener("keyup",v),window.addEventListener("blur",E),()=>{m?.removeEventListener("keydown",y),m?.removeEventListener("keyup",v),window.removeEventListener("blur",E)}}},[e,r]),n};function KE(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(a=>t.has(a)))}function XE(e,t){return t.includes(e)?"code":"key"}function GS(e,t,n,r){const a=e.parentNode||e.parentId;if(!a)return n;const l=t.get(a),c=Ma(l,r);return GS(l,t,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(l[Ie]?.z??0)>(n.z??0)?l[Ie]?.z??0:n.z??0},r)}function $S(e,t,n){e.forEach(r=>{const a=r.parentNode||r.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||n?.[r.id]){const{x:l,y:c,z:d}=GS(r,e,{...r.position,z:r[Ie]?.z??0},t);r.positionAbsolute={x:l,y:c},r[Ie].z=d,n?.[r.id]&&(r[Ie].isParent=!0)}})}function Mm(e,t,n,r){const a=new Map,l={},c=r?1e3:0;return e.forEach(d=>{const g=(Ei(d.zIndex)?d.zIndex:0)+(d.selected?c:0),m=t.get(d.id),y={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},v=d.parentNode||d.parentId;v&&(l[v]=!0);const E=m?.type&&m?.type!==d.type;Object.defineProperty(y,Ie,{enumerable:!1,value:{handleBounds:E?void 0:m?.[Ie]?.handleBounds,z:g}}),a.set(d.id,y)}),$S(a,n,l),a}function YS(e,t={}){const{getNodes:n,width:r,height:a,minZoom:l,maxZoom:c,d3Zoom:d,d3Selection:g,fitViewOnInitDone:m,fitViewOnInit:y,nodeOrigin:v}=e(),E=t.initial&&!m&&y;if(d&&g&&(E||!t.initial)){const M=n().filter(V=>{const B=t.includeHiddenNodes?V.width&&V.height:!V.hidden;return t.nodes?.length?B&&t.nodes.some(F=>F.id===V.id):B}),L=M.every(V=>V.width&&V.height);if(M.length>0&&L){const V=Zf(M,v),{x:B,y:F,zoom:q}=OS(V,r,a,t.minZoom??l,t.maxZoom??c,t.padding??.1),H=Br.translate(B,F).scale(q);return typeof t.duration=="number"&&t.duration>0?d.transform(Ra(g,t.duration),H):d.transform(g,H),!0}}return!1}function $N(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Ie]:r[Ie],selected:n.selected})}),new Map(t)}function YN(e,t){return t.map(n=>{const r=e.find(a=>a.id===n.id);return r&&(n.selected=r.selected),n})}function $h({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:a,edges:l,onNodesChange:c,onEdgesChange:d,hasDefaultNodes:g,hasDefaultEdges:m}=n();e?.length&&(g&&r({nodeInternals:$N(e,a)}),c?.(e)),t?.length&&(m&&r({edges:YN(t,l)}),d?.(t))}const Bo=()=>{},KN={zoomIn:Bo,zoomOut:Bo,zoomTo:Bo,getZoom:()=>1,setViewport:Bo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Bo,fitBounds:Bo,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},XN=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),QN=()=>{const e=Ke(),{d3Zoom:t,d3Selection:n}=me(XN,sn);return X.useMemo(()=>n&&t?{zoomIn:a=>t.scaleBy(Ra(n,a?.duration),1.2),zoomOut:a=>t.scaleBy(Ra(n,a?.duration),1/1.2),zoomTo:(a,l)=>t.scaleTo(Ra(n,l?.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,l)=>{const[c,d,g]=e.getState().transform,m=Br.translate(a.x??c,a.y??d).scale(a.zoom??g);t.transform(Ra(n,l?.duration),m)},getViewport:()=>{const[a,l,c]=e.getState().transform;return{x:a,y:l,zoom:c}},fitView:a=>YS(e.getState,a),setCenter:(a,l,c)=>{const{width:d,height:g,maxZoom:m}=e.getState(),y=typeof c?.zoom<"u"?c.zoom:m,v=d/2-a*y,E=g/2-l*y,S=Br.translate(v,E).scale(y);t.transform(Ra(n,c?.duration),S)},fitBounds:(a,l)=>{const{width:c,height:d,minZoom:g,maxZoom:m}=e.getState(),{x:y,y:v,zoom:E}=OS(a,c,d,g,m,l?.padding??.1),S=Br.translate(y,v).scale(E);t.transform(Ra(n,l?.duration),S)},project:a=>{const{transform:l,snapToGrid:c,snapGrid:d}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),lp(a,l,c,d)},screenToFlowPosition:a=>{const{transform:l,snapToGrid:c,snapGrid:d,domNode:g}=e.getState();if(!g)return a;const{x:m,y}=g.getBoundingClientRect(),v={x:a.x-m,y:a.y-y};return lp(v,l,c,d)},flowToScreenPosition:a=>{const{transform:l,domNode:c}=e.getState();if(!c)return a;const{x:d,y:g}=c.getBoundingClientRect(),m=xS(a,l);return{x:m.x+d,y:m.y+g}},viewportInitialized:!0}:KN,[t,n])};function ty(){const e=QN(),t=Ke(),n=X.useCallback(()=>t.getState().getNodes().map(L=>({...L})),[]),r=X.useCallback(L=>t.getState().nodeInternals.get(L),[]),a=X.useCallback(()=>{const{edges:L=[]}=t.getState();return L.map(V=>({...V}))},[]),l=X.useCallback(L=>{const{edges:V=[]}=t.getState();return V.find(B=>B.id===L)},[]),c=X.useCallback(L=>{const{getNodes:V,setNodes:B,hasDefaultNodes:F,onNodesChange:q}=t.getState(),H=V(),nt=typeof L=="function"?L(H):L;if(F)B(nt);else if(q){const et=nt.length===0?H.map(D=>({type:"remove",id:D.id})):nt.map(D=>({item:D,type:"reset"}));q(et)}},[]),d=X.useCallback(L=>{const{edges:V=[],setEdges:B,hasDefaultEdges:F,onEdgesChange:q}=t.getState(),H=typeof L=="function"?L(V):L;if(F)B(H);else if(q){const nt=H.length===0?V.map(et=>({type:"remove",id:et.id})):H.map(et=>({item:et,type:"reset"}));q(nt)}},[]),g=X.useCallback(L=>{const V=Array.isArray(L)?L:[L],{getNodes:B,setNodes:F,hasDefaultNodes:q,onNodesChange:H}=t.getState();if(q){const et=[...B(),...V];F(et)}else if(H){const nt=V.map(et=>({item:et,type:"add"}));H(nt)}},[]),m=X.useCallback(L=>{const V=Array.isArray(L)?L:[L],{edges:B=[],setEdges:F,hasDefaultEdges:q,onEdgesChange:H}=t.getState();if(q)F([...B,...V]);else if(H){const nt=V.map(et=>({item:et,type:"add"}));H(nt)}},[]),y=X.useCallback(()=>{const{getNodes:L,edges:V=[],transform:B}=t.getState(),[F,q,H]=B;return{nodes:L().map(nt=>({...nt})),edges:V.map(nt=>({...nt})),viewport:{x:F,y:q,zoom:H}}},[]),v=X.useCallback(({nodes:L,edges:V})=>{const{nodeInternals:B,getNodes:F,edges:q,hasDefaultNodes:H,hasDefaultEdges:nt,onNodesDelete:et,onEdgesDelete:D,onNodesChange:R,onEdgesChange:I}=t.getState(),P=(L||[]).map(tt=>tt.id),N=(V||[]).map(tt=>tt.id),U=F().reduce((tt,O)=>{const $=O.parentNode||O.parentId,at=!P.includes(O.id)&&$&&tt.find(x=>x.id===$);return(typeof O.deletable=="boolean"?O.deletable:!0)&&(P.includes(O.id)||at)&&tt.push(O),tt},[]),A=q.filter(tt=>typeof tt.deletable=="boolean"?tt.deletable:!0),k=A.filter(tt=>N.includes(tt.id));if(U||k){const tt=DS(U,A),O=[...k,...tt],$=O.reduce((at,Y)=>(at.includes(Y.id)||at.push(Y.id),at),[]);if((nt||H)&&(nt&&t.setState({edges:q.filter(at=>!$.includes(at.id))}),H&&(U.forEach(at=>{B.delete(at.id)}),t.setState({nodeInternals:new Map(B)}))),$.length>0&&(D?.(O),I&&I($.map(at=>({id:at,type:"remove"})))),U.length>0&&(et?.(U),R)){const at=U.map(Y=>({id:Y.id,type:"remove"}));R(at)}}},[]),E=X.useCallback(L=>{const V=yN(L),B=V?null:t.getState().nodeInternals.get(L.id);return!V&&!B?[null,null,V]:[V?L:BE(B),B,V]},[]),S=X.useCallback((L,V=!0,B)=>{const[F,q,H]=E(L);return F?(B||t.getState().getNodes()).filter(nt=>{if(!H&&(nt.id===q.id||!nt.positionAbsolute))return!1;const et=BE(nt),D=rp(et,F);return V&&D>0||D>=F.width*F.height}):[]},[]),M=X.useCallback((L,V,B=!0)=>{const[F]=E(L);if(!F)return!1;const q=rp(F,V);return B&&q>0||q>=F.width*F.height},[]);return X.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:a,getEdge:l,setNodes:c,setEdges:d,addNodes:g,addEdges:m,toObject:y,deleteElements:v,getIntersectingNodes:S,isNodeIntersecting:M}),[e,n,r,a,l,c,d,g,m,y,v,S,M])}const ZN={actInsideInputWithModifier:!1};var WN=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Ke(),{deleteElements:r}=ty(),a=Qu(e,ZN),l=Qu(t);X.useEffect(()=>{if(a){const{edges:c,getNodes:d}=n.getState(),g=d().filter(y=>y.selected),m=c.filter(y=>y.selected);r({nodes:g,edges:m}),n.setState({nodesSelectionActive:!1})}},[a]),X.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])};function JN(e){const t=Ke();X.useEffect(()=>{let n;const r=()=>{if(!e.current)return;const a=$p(e.current);(a.height===0||a.width===0)&&t.getState().onError?.("004",Fr.error004()),t.setState({width:a.width||500,height:a.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const ey={position:"absolute",width:"100%",height:"100%",top:0,left:0},tD=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Yh=e=>({x:e.x,y:e.y,zoom:e.k}),Ho=(e,t)=>e.target.closest(`.${t}`),QE=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),ZE=e=>{const t=e.ctrlKey&&Sf()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},eD=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),nD=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:a=!0,zoomOnPinch:l=!0,panOnScroll:c=!1,panOnScrollSpeed:d=.5,panOnScrollMode:g=Na.Free,zoomOnDoubleClick:m=!0,elementsSelectable:y,panOnDrag:v=!0,defaultViewport:E,translateExtent:S,minZoom:M,maxZoom:L,zoomActivationKeyCode:V,preventScrolling:B=!0,children:F,noWheelClassName:q,noPanClassName:H})=>{const nt=X.useRef(),et=Ke(),D=X.useRef(!1),R=X.useRef(!1),I=X.useRef(null),P=X.useRef({x:0,y:0,zoom:0}),{d3Zoom:N,d3Selection:U,d3ZoomHandler:A,userSelectionActive:k}=me(eD,sn),tt=Qu(V),O=X.useRef(0),$=X.useRef(!1),at=X.useRef();return JN(I),X.useEffect(()=>{if(I.current){const Y=I.current.getBoundingClientRect(),x=pS().scaleExtent([M,L]).translateExtent(S),G=_i(I.current).call(x),W=Br.translate(E.x,E.y).scale(rl(E.zoom,M,L)),rt=[[0,0],[Y.width,Y.height]],ct=x.constrain()(W,rt,S);x.transform(G,ct),x.wheelDelta(ZE),et.setState({d3Zoom:x,d3Selection:G,d3ZoomHandler:G.on("wheel.zoom"),transform:[ct.x,ct.y,ct.k],domNode:I.current.closest(".react-flow")})}},[]),X.useEffect(()=>{U&&N&&(c&&!tt&&!k?U.on("wheel.zoom",Y=>{if(Ho(Y,q))return!1;Y.preventDefault(),Y.stopImmediatePropagation();const x=U.property("__zoom").k||1;if(Y.ctrlKey&&l){const At=Ni(Y),kt=ZE(Y),Pt=x*Math.pow(2,kt);N.scaleTo(U,Pt,At,Y);return}const G=Y.deltaMode===1?20:1;let W=g===Na.Vertical?0:Y.deltaX*G,rt=g===Na.Horizontal?0:Y.deltaY*G;!Sf()&&Y.shiftKey&&g!==Na.Vertical&&(W=Y.deltaY*G,rt=0),N.translateBy(U,-(W/x)*d,-(rt/x)*d,{internal:!0});const ct=Yh(U.property("__zoom")),{onViewportChangeStart:mt,onViewportChange:pt,onViewportChangeEnd:It}=et.getState();clearTimeout(at.current),$.current||($.current=!0,t?.(Y,ct),mt?.(ct)),$.current&&(e?.(Y,ct),pt?.(ct),at.current=setTimeout(()=>{n?.(Y,ct),It?.(ct),$.current=!1},150))},{passive:!1}):typeof A<"u"&&U.on("wheel.zoom",function(Y,x){if(!B&&Y.type==="wheel"&&!Y.ctrlKey||Ho(Y,q))return null;Y.preventDefault(),A.call(this,Y,x)},{passive:!1}))},[k,c,g,U,N,A,tt,l,B,q,t,e,n]),X.useEffect(()=>{N&&N.on("start",Y=>{if(!Y.sourceEvent||Y.sourceEvent.internal)return null;O.current=Y.sourceEvent?.button;const{onViewportChangeStart:x}=et.getState(),G=Yh(Y.transform);D.current=!0,P.current=G,Y.sourceEvent?.type==="mousedown"&&et.setState({paneDragging:!0}),x?.(G),t?.(Y.sourceEvent,G)})},[N,t]),X.useEffect(()=>{N&&(k&&!D.current?N.on("zoom",null):k||N.on("zoom",Y=>{const{onViewportChange:x}=et.getState();if(et.setState({transform:[Y.transform.x,Y.transform.y,Y.transform.k]}),R.current=!!(r&&QE(v,O.current??0)),(e||x)&&!Y.sourceEvent?.internal){const G=Yh(Y.transform);x?.(G),e?.(Y.sourceEvent,G)}}))},[k,N,e,v,r]),X.useEffect(()=>{N&&N.on("end",Y=>{if(!Y.sourceEvent||Y.sourceEvent.internal)return null;const{onViewportChangeEnd:x}=et.getState();if(D.current=!1,et.setState({paneDragging:!1}),r&&QE(v,O.current??0)&&!R.current&&r(Y.sourceEvent),R.current=!1,(n||x)&&tD(P.current,Y.transform)){const G=Yh(Y.transform);P.current=G,clearTimeout(nt.current),nt.current=setTimeout(()=>{x?.(G),n?.(Y.sourceEvent,G)},c?150:0)}})},[N,c,v,n,r]),X.useEffect(()=>{N&&N.filter(Y=>{const x=tt||a,G=l&&Y.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&Y.button===1&&Y.type==="mousedown"&&(Ho(Y,"react-flow__node")||Ho(Y,"react-flow__edge")))return!0;if(!v&&!x&&!c&&!m&&!l||k||!m&&Y.type==="dblclick"||Ho(Y,q)&&Y.type==="wheel"||Ho(Y,H)&&(Y.type!=="wheel"||c&&Y.type==="wheel"&&!tt)||!l&&Y.ctrlKey&&Y.type==="wheel"||!x&&!c&&!G&&Y.type==="wheel"||!v&&(Y.type==="mousedown"||Y.type==="touchstart")||Array.isArray(v)&&!v.includes(Y.button)&&Y.type==="mousedown")return!1;const W=Array.isArray(v)&&v.includes(Y.button)||!Y.button||Y.button<=1;return(!Y.ctrlKey||Y.type==="wheel")&&W})},[k,N,a,l,c,m,v,y,tt]),lt.createElement("div",{className:"react-flow__renderer",ref:I,style:ey},F)},iD=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function rD(){const{userSelectionActive:e,userSelectionRect:t}=me(iD,sn);return e&&t?lt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function WE(e,t){const n=t.parentNode||t.parentId,r=e.find(a=>a.id===n);if(r){const a=t.position.x+t.width-r.width,l=t.position.y+t.height-r.height;if(a>0||l>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,a>0&&(r.style.width+=a),l>0&&(r.style.height+=l),t.position.x<0){const c=Math.abs(t.position.x);r.position.x=r.position.x-c,r.style.width+=c,t.position.x=0}if(t.position.y<0){const c=Math.abs(t.position.y);r.position.y=r.position.y-c,r.style.height+=c,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function KS(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,a)=>{const l=e.filter(d=>d.id===a.id);if(l.length===0)return r.push(a),r;const c={...a};for(const d of l)if(d)switch(d.type){case"select":{c.selected=d.selected;break}case"position":{typeof d.position<"u"&&(c.position=d.position),typeof d.positionAbsolute<"u"&&(c.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(c.dragging=d.dragging),c.expandParent&&WE(r,c);break}case"dimensions":{typeof d.dimensions<"u"&&(c.width=d.dimensions.width,c.height=d.dimensions.height),typeof d.updateStyle<"u"&&(c.style={...c.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(c.resizing=d.resizing),c.expandParent&&WE(r,c);break}case"remove":return r}return r.push(c),r},n)}function XS(e,t){return KS(e,t)}function sD(e,t){return KS(e,t)}const As=(e,t)=>({id:e,type:"select",selected:t});function Yo(e,t){return e.reduce((n,r)=>{const a=t.includes(r.id);return!r.selected&&a?(r.selected=!0,n.push(As(r.id,!0))):r.selected&&!a&&(r.selected=!1,n.push(As(r.id,!1))),n},[])}const Vm=(e,t)=>n=>{n.target===t.current&&e?.(n)},aD=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),QS=X.memo(({isSelecting:e,selectionMode:t=Xu.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:g,onPaneMouseMove:m,onPaneMouseLeave:y,children:v})=>{const E=X.useRef(null),S=Ke(),M=X.useRef(0),L=X.useRef(0),V=X.useRef(),{userSelectionActive:B,elementsSelectable:F,dragging:q}=me(aD,sn),H=()=>{S.setState({userSelectionActive:!1,userSelectionRect:null}),M.current=0,L.current=0},nt=A=>{l?.(A),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1})},et=A=>{if(Array.isArray(n)&&n?.includes(2)){A.preventDefault();return}c?.(A)},D=d?A=>d(A):void 0,R=A=>{const{resetSelectedElements:k,domNode:tt}=S.getState();if(V.current=tt?.getBoundingClientRect(),!F||!e||A.button!==0||A.target!==E.current||!V.current)return;const{x:O,y:$}=Os(A,V.current);k(),S.setState({userSelectionRect:{width:0,height:0,startX:O,startY:$,x:O,y:$}}),r?.(A)},I=A=>{const{userSelectionRect:k,nodeInternals:tt,edges:O,transform:$,onNodesChange:at,onEdgesChange:Y,nodeOrigin:x,getNodes:G}=S.getState();if(!e||!V.current||!k)return;S.setState({userSelectionActive:!0,nodesSelectionActive:!1});const W=Os(A,V.current),rt=k.startX??0,ct=k.startY??0,mt={...k,x:W.x<rt?W.x:rt,y:W.y<ct?W.y:ct,width:Math.abs(W.x-rt),height:Math.abs(W.y-ct)},pt=G(),It=NS(tt,mt,$,t===Xu.Partial,!0,x),At=DS(It,O).map(Pt=>Pt.id),kt=It.map(Pt=>Pt.id);if(M.current!==kt.length){M.current=kt.length;const Pt=Yo(pt,kt);Pt.length&&at?.(Pt)}if(L.current!==At.length){L.current=At.length;const Pt=Yo(O,At);Pt.length&&Y?.(Pt)}S.setState({userSelectionRect:mt})},P=A=>{if(A.button!==0)return;const{userSelectionRect:k}=S.getState();!B&&k&&A.target===E.current&&nt?.(A),S.setState({nodesSelectionActive:M.current>0}),H(),a?.(A)},N=A=>{B&&(S.setState({nodesSelectionActive:M.current>0}),a?.(A)),H()},U=F&&(e||B);return lt.createElement("div",{className:mn(["react-flow__pane",{dragging:q,selection:e}]),onClick:U?void 0:Vm(nt,E),onContextMenu:Vm(et,E),onWheel:Vm(D,E),onMouseEnter:U?void 0:g,onMouseDown:U?R:void 0,onMouseMove:U?I:m,onMouseUp:U?P:void 0,onMouseLeave:U?N:y,ref:E,style:ey},v,lt.createElement(rD,null))});QS.displayName="Pane";function ZS(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:ZS(r,t):!1}function JE(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function oD(e,t,n,r){return Array.from(e.values()).filter(a=>(a.selected||a.id===r)&&(!a.parentNode||a.parentId||!ZS(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(a.positionAbsolute?.x??0),y:n.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}))}function lD(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function WS(e,t,n,r,a=[0,0],l){const c=lD(e,e.extent||r);let d=c;const g=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(g&&e.width&&e.height){const v=n.get(g),{x:E,y:S}=Ma(v,a).positionAbsolute;d=v&&Ei(E)&&Ei(S)&&Ei(v.width)&&Ei(v.height)?[[E+e.width*a[0],S+e.height*a[1]],[E+v.width-e.width+e.width*a[0],S+v.height-e.height+e.height*a[1]]]:d}else l?.("005",Fr.error005()),d=c;else if(e.extent&&g&&e.extent!=="parent"){const v=n.get(g),{x:E,y:S}=Ma(v,a).positionAbsolute;d=[[e.extent[0][0]+E,e.extent[0][1]+S],[e.extent[1][0]+E,e.extent[1][1]+S]]}let m={x:0,y:0};if(g){const v=n.get(g);m=Ma(v,a).positionAbsolute}const y=d&&d!=="parent"?Yp(t,d):t;return{position:{x:y.x-m.x,y:y.y-m.y},positionAbsolute:y}}function km({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?r.find(a=>a.id===e):r[0],r]}const tT=(e,t,n,r)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const l=Array.from(a),c=t.getBoundingClientRect(),d={x:c.width*r[0],y:c.height*r[1]};return l.map(g=>{const m=g.getBoundingClientRect();return{id:g.getAttribute("data-handleid"),position:g.getAttribute("data-handlepos"),x:(m.left-c.left-d.x)/n,y:(m.top-c.top-d.y)/n,...$p(g)}})};function Au(e,t,n){return n===void 0?n:r=>{const a=t().nodeInternals.get(e);a&&n(r,{...a})}}function cp({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeInternals:d,onError:g}=t.getState(),m=d.get(e);if(!m){g?.("012",Fr.error012(e));return}t.setState({nodesSelectionActive:!1}),m.selected?(n||m.selected&&c)&&(l({nodes:[m],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):a([e])}function uD(){const e=Ke();return X.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:a,snapToGrid:l}=e.getState(),c=n.touches?n.touches[0].clientX:n.clientX,d=n.touches?n.touches[0].clientY:n.clientY,g={x:(c-r[0])/r[2],y:(d-r[1])/r[2]};return{xSnapped:l?a[0]*Math.round(g.x/a[0]):g.x,ySnapped:l?a[1]*Math.round(g.y/a[1]):g.y,...g}},[])}function Pm(e){return(t,n,r)=>e?.(t,r)}function JS({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:a,isSelectable:l,selectNodesOnDrag:c}){const d=Ke(),[g,m]=X.useState(!1),y=X.useRef([]),v=X.useRef({x:null,y:null}),E=X.useRef(0),S=X.useRef(null),M=X.useRef({x:0,y:0}),L=X.useRef(null),V=X.useRef(!1),B=X.useRef(!1),F=X.useRef(!1),q=uD();return X.useEffect(()=>{if(e?.current){const H=_i(e.current),nt=({x:R,y:I})=>{const{nodeInternals:P,onNodeDrag:N,onSelectionDrag:U,updateNodePositions:A,nodeExtent:k,snapGrid:tt,snapToGrid:O,nodeOrigin:$,onError:at}=d.getState();v.current={x:R,y:I};let Y=!1,x={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&k){const W=Zf(y.current,$);x=Ku(W)}if(y.current=y.current.map(W=>{const rt={x:R-W.distance.x,y:I-W.distance.y};O&&(rt.x=tt[0]*Math.round(rt.x/tt[0]),rt.y=tt[1]*Math.round(rt.y/tt[1]));const ct=[[k[0][0],k[0][1]],[k[1][0],k[1][1]]];y.current.length>1&&k&&!W.extent&&(ct[0][0]=W.positionAbsolute.x-x.x+k[0][0],ct[1][0]=W.positionAbsolute.x+(W.width??0)-x.x2+k[1][0],ct[0][1]=W.positionAbsolute.y-x.y+k[0][1],ct[1][1]=W.positionAbsolute.y+(W.height??0)-x.y2+k[1][1]);const mt=WS(W,rt,P,ct,$,at);return Y=Y||W.position.x!==mt.position.x||W.position.y!==mt.position.y,W.position=mt.position,W.positionAbsolute=mt.positionAbsolute,W}),!Y)return;A(y.current,!0,!0),m(!0);const G=a?N:Pm(U);if(G&&L.current){const[W,rt]=km({nodeId:a,dragItems:y.current,nodeInternals:P});G(L.current,W,rt)}},et=()=>{if(!S.current)return;const[R,I]=_S(M.current,S.current);if(R!==0||I!==0){const{transform:P,panBy:N}=d.getState();v.current.x=(v.current.x??0)-R/P[2],v.current.y=(v.current.y??0)-I/P[2],N({x:R,y:I})&&nt(v.current)}E.current=requestAnimationFrame(et)},D=R=>{const{nodeInternals:I,multiSelectionActive:P,nodesDraggable:N,unselectNodesAndEdges:U,onNodeDragStart:A,onSelectionDragStart:k}=d.getState();B.current=!0;const tt=a?A:Pm(k);(!c||!l)&&!P&&a&&(I.get(a)?.selected||U()),a&&l&&c&&cp({id:a,store:d,nodeRef:e});const O=q(R);if(v.current=O,y.current=oD(I,N,O,a),tt&&y.current){const[$,at]=km({nodeId:a,dragItems:y.current,nodeInternals:I});tt(R.sourceEvent,$,at)}};if(t)H.on(".drag",null);else{const R=T2().on("start",I=>{const{domNode:P,nodeDragThreshold:N}=d.getState();N===0&&D(I),F.current=!1;const U=q(I);v.current=U,S.current=P?.getBoundingClientRect()||null,M.current=Os(I.sourceEvent,S.current)}).on("drag",I=>{const P=q(I),{autoPanOnNodeDrag:N,nodeDragThreshold:U}=d.getState();if(I.sourceEvent.type==="touchmove"&&I.sourceEvent.touches.length>1&&(F.current=!0),!F.current){if(!V.current&&B.current&&N&&(V.current=!0,et()),!B.current){const A=P.xSnapped-(v?.current?.x??0),k=P.ySnapped-(v?.current?.y??0);Math.sqrt(A*A+k*k)>U&&D(I)}(v.current.x!==P.xSnapped||v.current.y!==P.ySnapped)&&y.current&&B.current&&(L.current=I.sourceEvent,M.current=Os(I.sourceEvent,S.current),nt(P))}}).on("end",I=>{if(!(!B.current||F.current)&&(m(!1),V.current=!1,B.current=!1,cancelAnimationFrame(E.current),y.current)){const{updateNodePositions:P,nodeInternals:N,onNodeDragStop:U,onSelectionDragStop:A}=d.getState(),k=a?U:Pm(A);if(P(y.current,!1,!1),k){const[tt,O]=km({nodeId:a,dragItems:y.current,nodeInternals:N});k(I.sourceEvent,tt,O)}}}).filter(I=>{const P=I.target;return!I.button&&(!n||!JE(P,`.${n}`,e))&&(!r||JE(P,r,e))});return H.call(R),()=>{H.on(".drag",null)}}}},[e,t,n,r,l,d,a,c,q]),g}function t1(){const e=Ke();return X.useCallback(n=>{const{nodeInternals:r,nodeExtent:a,updateNodePositions:l,getNodes:c,snapToGrid:d,snapGrid:g,onError:m,nodesDraggable:y}=e.getState(),v=c().filter(F=>F.selected&&(F.draggable||y&&typeof F.draggable>"u")),E=d?g[0]:5,S=d?g[1]:5,M=n.isShiftPressed?4:1,L=n.x*E*M,V=n.y*S*M,B=v.map(F=>{if(F.positionAbsolute){const q={x:F.positionAbsolute.x+L,y:F.positionAbsolute.y+V};d&&(q.x=g[0]*Math.round(q.x/g[0]),q.y=g[1]*Math.round(q.y/g[1]));const{positionAbsolute:H,position:nt}=WS(F,q,r,a,void 0,m);F.position=nt,F.positionAbsolute=H}return F});l(B,!0,!1)},[])}const Zo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ru=e=>{const t=({id:n,type:r,data:a,xPos:l,yPos:c,xPosOrigin:d,yPosOrigin:g,selected:m,onClick:y,onMouseEnter:v,onMouseMove:E,onMouseLeave:S,onContextMenu:M,onDoubleClick:L,style:V,className:B,isDraggable:F,isSelectable:q,isConnectable:H,isFocusable:nt,selectNodesOnDrag:et,sourcePosition:D,targetPosition:R,hidden:I,resizeObserver:P,dragHandle:N,zIndex:U,isParent:A,noDragClassName:k,noPanClassName:tt,initialized:O,disableKeyboardA11y:$,ariaLabel:at,rfId:Y,hasHandleBounds:x})=>{const G=Ke(),W=X.useRef(null),rt=X.useRef(null),ct=X.useRef(D),mt=X.useRef(R),pt=X.useRef(r),It=q||F||y||v||E||S,At=t1(),kt=Au(n,G.getState,v),Pt=Au(n,G.getState,E),ue=Au(n,G.getState,S),ce=Au(n,G.getState,M),ve=Au(n,G.getState,L),ye=Lt=>{const{nodeDragThreshold:wt}=G.getState();if(q&&(!et||!F||wt>0)&&cp({id:n,store:G,nodeRef:W}),y){const xe=G.getState().nodeInternals.get(n);xe&&y(Lt,{...xe})}},he=Lt=>{if(!sp(Lt)&&!$)if(wS.includes(Lt.key)&&q){const wt=Lt.key==="Escape";cp({id:n,store:G,unselect:wt,nodeRef:W})}else F&&m&&Object.prototype.hasOwnProperty.call(Zo,Lt.key)&&(G.setState({ariaLiveMessage:`Moved selected node ${Lt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~c}`}),At({x:Zo[Lt.key].x,y:Zo[Lt.key].y,isShiftPressed:Lt.shiftKey}))};X.useEffect(()=>()=>{rt.current&&(P?.unobserve(rt.current),rt.current=null)},[]),X.useEffect(()=>{if(W.current&&!I){const Lt=W.current;(!O||!x||rt.current!==Lt)&&(rt.current&&P?.unobserve(rt.current),P?.observe(Lt),rt.current=Lt)}},[I,O,x]),X.useEffect(()=>{const Lt=pt.current!==r,wt=ct.current!==D,xe=mt.current!==R;W.current&&(Lt||wt||xe)&&(Lt&&(pt.current=r),wt&&(ct.current=D),xe&&(mt.current=R),G.getState().updateNodeDimensions([{id:n,nodeElement:W.current,forceUpdate:!0}]))},[n,r,D,R]);const Xe=JS({nodeRef:W,disabled:I||!F,noDragClassName:k,handleSelector:N,nodeId:n,isSelectable:q,selectNodesOnDrag:et});return I?null:lt.createElement("div",{className:mn(["react-flow__node",`react-flow__node-${r}`,{[tt]:F},B,{selected:m,selectable:q,parent:A,dragging:Xe}]),ref:W,style:{zIndex:U,transform:`translate(${d}px,${g}px)`,pointerEvents:It?"all":"none",visibility:O?"visible":"hidden",...V},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:kt,onMouseMove:Pt,onMouseLeave:ue,onContextMenu:ce,onClick:ye,onDoubleClick:ve,onKeyDown:nt?he:void 0,tabIndex:nt?0:void 0,role:nt?"button":void 0,"aria-describedby":$?void 0:`${FS}-${Y}`,"aria-label":at},lt.createElement(bN,{value:n},lt.createElement(e,{id:n,data:a,type:r,xPos:l,yPos:c,selected:m,isConnectable:H,sourcePosition:D,targetPosition:R,dragging:Xe,dragHandle:N,zIndex:U})))};return t.displayName="NodeWrapper",X.memo(t)};const cD=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Zf(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function hD({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ke(),{width:a,height:l,x:c,y:d,transformString:g,userSelectionActive:m}=me(cD,sn),y=t1(),v=X.useRef(null);if(X.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),JS({nodeRef:v}),m||!a||!l)return null;const E=e?M=>{const L=r.getState().getNodes().filter(V=>V.selected);e(M,L)}:void 0,S=M=>{Object.prototype.hasOwnProperty.call(Zo,M.key)&&y({x:Zo[M.key].x,y:Zo[M.key].y,isShiftPressed:M.shiftKey})};return lt.createElement("div",{className:mn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:g}},lt.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:E,tabIndex:n?void 0:-1,onKeyDown:n?void 0:S,style:{width:a,height:l,top:d,left:c}}))}var fD=X.memo(hD);const dD=e=>e.nodesSelectionActive,e1=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,deleteKeyCode:d,onMove:g,onMoveStart:m,onMoveEnd:y,selectionKeyCode:v,selectionOnDrag:E,selectionMode:S,onSelectionStart:M,onSelectionEnd:L,multiSelectionKeyCode:V,panActivationKeyCode:B,zoomActivationKeyCode:F,elementsSelectable:q,zoomOnScroll:H,zoomOnPinch:nt,panOnScroll:et,panOnScrollSpeed:D,panOnScrollMode:R,zoomOnDoubleClick:I,panOnDrag:P,defaultViewport:N,translateExtent:U,minZoom:A,maxZoom:k,preventScrolling:tt,onSelectionContextMenu:O,noWheelClassName:$,noPanClassName:at,disableKeyboardA11y:Y})=>{const x=me(dD),G=Qu(v),W=Qu(B),rt=W||P,ct=W||et,mt=G||E&&rt!==!0;return WN({deleteKeyCode:d,multiSelectionKeyCode:V}),lt.createElement(nD,{onMove:g,onMoveStart:m,onMoveEnd:y,onPaneContextMenu:l,elementsSelectable:q,zoomOnScroll:H,zoomOnPinch:nt,panOnScroll:ct,panOnScrollSpeed:D,panOnScrollMode:R,zoomOnDoubleClick:I,panOnDrag:!G&&rt,defaultViewport:N,translateExtent:U,minZoom:A,maxZoom:k,zoomActivationKeyCode:F,preventScrolling:tt,noWheelClassName:$,noPanClassName:at},lt.createElement(QS,{onSelectionStart:M,onSelectionEnd:L,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:rt,isSelecting:!!mt,selectionMode:S},e,x&&lt.createElement(fD,{onSelectionContextMenu:O,noPanClassName:at,disableKeyboardA11y:Y})))};e1.displayName="FlowRenderer";var gD=X.memo(e1);function mD(e){return me(X.useCallback(n=>e?NS(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function pD(e){const t={input:Ru(e.input||zS),default:Ru(e.default||up),output:Ru(e.output||HS),group:Ru(e.group||Jp)},n={},r=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,l)=>(a[l]=Ru(e[l]||up),a),n);return{...t,...r}}const yD=({x:e,y:t,width:n,height:r,origin:a})=>!n||!r?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-n*a[0],y:t-r*a[1]},_D=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),n1=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:a,updateNodeDimensions:l,onError:c}=me(_D,sn),d=mD(e.onlyRenderVisibleElements),g=X.useRef(),m=X.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(v=>{const E=v.map(S=>({id:S.target.getAttribute("data-id"),nodeElement:S.target,forceUpdate:!0}));l(E)});return g.current=y,y},[]);return X.useEffect(()=>()=>{g?.current?.disconnect()},[]),lt.createElement("div",{className:"react-flow__nodes",style:ey},d.map(y=>{let v=y.type||"default";e.nodeTypes[v]||(c?.("003",Fr.error003(v)),v="default");const E=e.nodeTypes[v]||e.nodeTypes.default,S=!!(y.draggable||t&&typeof y.draggable>"u"),M=!!(y.selectable||a&&typeof y.selectable>"u"),L=!!(y.connectable||n&&typeof y.connectable>"u"),V=!!(y.focusable||r&&typeof y.focusable>"u"),B=e.nodeExtent?Yp(y.positionAbsolute,e.nodeExtent):y.positionAbsolute,F=B?.x??0,q=B?.y??0,H=yD({x:F,y:q,width:y.width??0,height:y.height??0,origin:e.nodeOrigin});return lt.createElement(E,{key:y.id,id:y.id,className:y.className,style:y.style,type:v,data:y.data,sourcePosition:y.sourcePosition||bt.Bottom,targetPosition:y.targetPosition||bt.Top,hidden:y.hidden,xPos:F,yPos:q,xPosOrigin:H.x,yPosOrigin:H.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!y.selected,isDraggable:S,isSelectable:M,isConnectable:L,isFocusable:V,resizeObserver:m,dragHandle:y.dragHandle,zIndex:y[Ie]?.z??0,isParent:!!y[Ie]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!y.width&&!!y.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[Ie]?.handleBounds})}))};n1.displayName="NodeRenderer";var vD=X.memo(n1);const ED=(e,t,n)=>n===bt.Left?e-t:n===bt.Right?e+t:e,TD=(e,t,n)=>n===bt.Top?e-t:n===bt.Bottom?e+t:e,eT="react-flow__edgeupdater",nT=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d})=>lt.createElement("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:mn([eT,`${eT}-${d}`]),cx:ED(t,r,e),cy:TD(n,r,e),r,stroke:"transparent",fill:"transparent"}),wD=()=>!0;var qo=e=>{const t=({id:n,className:r,type:a,data:l,onClick:c,onEdgeDoubleClick:d,selected:g,animated:m,label:y,labelStyle:v,labelShowBg:E,labelBgStyle:S,labelBgPadding:M,labelBgBorderRadius:L,style:V,source:B,target:F,sourceX:q,sourceY:H,targetX:nt,targetY:et,sourcePosition:D,targetPosition:R,elementsSelectable:I,hidden:P,sourceHandleId:N,targetHandleId:U,onContextMenu:A,onMouseEnter:k,onMouseMove:tt,onMouseLeave:O,reconnectRadius:$,onReconnect:at,onReconnectStart:Y,onReconnectEnd:x,markerEnd:G,markerStart:W,rfId:rt,ariaLabel:ct,isFocusable:mt,isReconnectable:pt,pathOptions:It,interactionWidth:At,disableKeyboardA11y:kt})=>{const Pt=X.useRef(null),[ue,ce]=X.useState(!1),[ve,ye]=X.useState(!1),he=Ke(),Xe=X.useMemo(()=>`url('#${op(W,rt)}')`,[W,rt]),Lt=X.useMemo(()=>`url('#${op(G,rt)}')`,[G,rt]);if(P)return null;const wt=ke=>{const{edges:Qe,addSelectedEdges:bn,unselectNodesAndEdges:An,multiSelectionActive:Ze}=he.getState(),an=Qe.find(Rn=>Rn.id===n);an&&(I&&(he.setState({nodesSelectionActive:!1}),an.selected&&Ze?(An({nodes:[],edges:[an]}),Pt.current?.blur()):bn([n])),c&&c(ke,an))},xe=bu(n,he.getState,d),pn=bu(n,he.getState,A),Un=bu(n,he.getState,k),Li=bu(n,he.getState,tt),zn=bu(n,he.getState,O),Sn=(ke,Qe)=>{if(ke.button!==0)return;const{edges:bn,isValidConnection:An}=he.getState(),Ze=Qe?F:B,an=(Qe?U:N)||null,Rn=Qe?"target":"source",fr=An||wD,dr=Qe,Si=bn.find(Hn=>Hn.id===n);ye(!0),Y?.(ke,Si,Rn);const Bn=Hn=>{ye(!1),x?.(Hn,Si,Rn)};kS({event:ke,handleId:an,nodeId:Ze,onConnect:Hn=>at?.(Si,Hn),isTarget:dr,getState:he.getState,setState:he.setState,isValidConnection:fr,edgeUpdaterType:Rn,onReconnectEnd:Bn})},wi=ke=>Sn(ke,!0),te=ke=>Sn(ke,!1),Ft=()=>ce(!0),Ve=()=>ce(!1),Ee=!I&&!c,Ui=ke=>{if(!kt&&wS.includes(ke.key)&&I){const{unselectNodesAndEdges:Qe,addSelectedEdges:bn,edges:An}=he.getState();ke.key==="Escape"?(Pt.current?.blur(),Qe({edges:[An.find(an=>an.id===n)]})):bn([n])}};return lt.createElement("g",{className:mn(["react-flow__edge",`react-flow__edge-${a}`,r,{selected:g,animated:m,inactive:Ee,updating:ue}]),onClick:wt,onDoubleClick:xe,onContextMenu:pn,onMouseEnter:Un,onMouseMove:Li,onMouseLeave:zn,onKeyDown:mt?Ui:void 0,tabIndex:mt?0:void 0,role:mt?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ct===null?void 0:ct||`Edge from ${B} to ${F}`,"aria-describedby":mt?`${jS}-${rt}`:void 0,ref:Pt},!ve&&lt.createElement(e,{id:n,source:B,target:F,selected:g,animated:m,label:y,labelStyle:v,labelShowBg:E,labelBgStyle:S,labelBgPadding:M,labelBgBorderRadius:L,data:l,style:V,sourceX:q,sourceY:H,targetX:nt,targetY:et,sourcePosition:D,targetPosition:R,sourceHandleId:N,targetHandleId:U,markerStart:Xe,markerEnd:Lt,pathOptions:It,interactionWidth:At}),pt&&lt.createElement(lt.Fragment,null,(pt==="source"||pt===!0)&&lt.createElement(nT,{position:D,centerX:q,centerY:H,radius:$,onMouseDown:wi,onMouseEnter:Ft,onMouseOut:Ve,type:"source"}),(pt==="target"||pt===!0)&&lt.createElement(nT,{position:R,centerX:nt,centerY:et,radius:$,onMouseDown:te,onMouseEnter:Ft,onMouseOut:Ve,type:"target"})))};return t.displayName="EdgeWrapper",X.memo(t)};function SD(e){const t={default:qo(e.default||Af),straight:qo(e.bezier||Qp),step:qo(e.step||Xp),smoothstep:qo(e.step||Qf),simplebezier:qo(e.simplebezier||Kp)},n={},r=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,l)=>(a[l]=qo(e[l]||Af),a),n);return{...t,...r}}function iT(e,t,n=null){const r=(n?.x||0)+t.x,a=(n?.y||0)+t.y,l=n?.width||t.width,c=n?.height||t.height;switch(e){case bt.Top:return{x:r+l/2,y:a};case bt.Right:return{x:r+l,y:a+c/2};case bt.Bottom:return{x:r+l/2,y:a+c};case bt.Left:return{x:r,y:a+c/2}}}function rT(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const bD=(e,t,n,r,a,l)=>{const c=iT(n,e,t),d=iT(l,r,a);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y}};function AD({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:a,targetHeight:l,width:c,height:d,transform:g}){const m={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+a),y2:Math.max(e.y+r,t.y+l)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const y=Ku({x:(0-g[0])/g[2],y:(0-g[1])/g[2],width:c/g[2],height:d/g[2]}),v=Math.max(0,Math.min(y.x2,m.x2)-Math.max(y.x,m.x)),E=Math.max(0,Math.min(y.y2,m.y2)-Math.max(y.y,m.y));return Math.ceil(v*E)>0}function sT(e){const t=e?.[Ie]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const RD=[{level:0,isMaxLevel:!0,edges:[]}];function ID(e,t,n=!1){let r=-1;const a=e.reduce((c,d)=>{const g=Ei(d.zIndex);let m=g?d.zIndex:0;if(n){const y=t.get(d.target),v=t.get(d.source),E=d.selected||y?.selected||v?.selected,S=Math.max(v?.[Ie]?.z||0,y?.[Ie]?.z||0,1e3);m=(g?d.zIndex:0)+(E?S:0)}return c[m]?c[m].push(d):c[m]=[d],r=m>r?m:r,c},{}),l=Object.entries(a).map(([c,d])=>{const g=+c;return{edges:d,level:g,isMaxLevel:g===r}});return l.length===0?RD:l}function CD(e,t,n){const r=me(X.useCallback(a=>e?a.edges.filter(l=>{const c=t.get(l.source),d=t.get(l.target);return c?.width&&c?.height&&d?.width&&d?.height&&AD({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:d.width,targetHeight:d.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return ID(r,t,n)}const xD=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),ND=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),aT={[bf.Arrow]:xD,[bf.ArrowClosed]:ND};function DD(e){const t=Ke();return X.useMemo(()=>Object.prototype.hasOwnProperty.call(aT,e)?aT[e]:(t.getState().onError?.("009",Fr.error009(e)),null),[e])}const OD=({id:e,type:t,color:n,width:r=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const g=DD(t);return g?lt.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0"},lt.createElement(g,{color:n,strokeWidth:c})):null},MD=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((a,l)=>([l.markerStart,l.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const d=op(c,t);r.includes(d)||(a.push({id:d,color:c.color||e,...c}),r.push(d))}}),a),[]).sort((a,l)=>a.id.localeCompare(l.id))},i1=({defaultColor:e,rfId:t})=>{const n=me(X.useCallback(MD({defaultColor:e,rfId:t}),[e,t]),(r,a)=>!(r.length!==a.length||r.some((l,c)=>l.id!==a[c].id)));return lt.createElement("defs",null,n.map(r=>lt.createElement(OD,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};i1.displayName="MarkerDefinitions";var VD=X.memo(i1);const kD=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),r1=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:a,noPanClassName:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:g,onEdgeMouseLeave:m,onEdgeClick:y,onEdgeDoubleClick:v,onReconnect:E,onReconnectStart:S,onReconnectEnd:M,reconnectRadius:L,children:V,disableKeyboardA11y:B})=>{const{edgesFocusable:F,edgesUpdatable:q,elementsSelectable:H,width:nt,height:et,connectionMode:D,nodeInternals:R,onError:I}=me(kD,sn),P=CD(t,R,n);return nt?lt.createElement(lt.Fragment,null,P.map(({level:N,edges:U,isMaxLevel:A})=>lt.createElement("svg",{key:N,style:{zIndex:N},width:nt,height:et,className:"react-flow__edges react-flow__container"},A&&lt.createElement(VD,{defaultColor:e,rfId:r}),lt.createElement("g",null,U.map(k=>{const[tt,O,$]=sT(R.get(k.source)),[at,Y,x]=sT(R.get(k.target));if(!$||!x)return null;let G=k.type||"default";a[G]||(I?.("011",Fr.error011(G)),G="default");const W=a[G]||a.default,rt=D===zs.Strict?Y.target:(Y.target??[]).concat(Y.source??[]),ct=rT(O.source,k.sourceHandle),mt=rT(rt,k.targetHandle),pt=ct?.position||bt.Bottom,It=mt?.position||bt.Top,At=!!(k.focusable||F&&typeof k.focusable>"u"),kt=k.reconnectable||k.updatable,Pt=typeof E<"u"&&(kt||q&&typeof kt>"u");if(!ct||!mt)return I?.("008",Fr.error008(ct,k)),null;const{sourceX:ue,sourceY:ce,targetX:ve,targetY:ye}=bD(tt,ct,pt,at,mt,It);return lt.createElement(W,{key:k.id,id:k.id,className:mn([k.className,l]),type:G,data:k.data,selected:!!k.selected,animated:!!k.animated,hidden:!!k.hidden,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,style:k.style,source:k.source,target:k.target,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerEnd:k.markerEnd,markerStart:k.markerStart,sourceX:ue,sourceY:ce,targetX:ve,targetY:ye,sourcePosition:pt,targetPosition:It,elementsSelectable:H,onContextMenu:c,onMouseEnter:d,onMouseMove:g,onMouseLeave:m,onClick:y,onEdgeDoubleClick:v,onReconnect:E,onReconnectStart:S,onReconnectEnd:M,reconnectRadius:L,rfId:r,ariaLabel:k.ariaLabel,isFocusable:At,isReconnectable:Pt,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth,disableKeyboardA11y:B})})))),V):null};r1.displayName="EdgeRenderer";var PD=X.memo(r1);const LD=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function UD({children:e}){const t=me(LD);return lt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function zD(e){const t=ty(),n=X.useRef(!1);X.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const BD={[bt.Left]:bt.Right,[bt.Right]:bt.Left,[bt.Top]:bt.Bottom,[bt.Bottom]:bt.Top},s1=({nodeId:e,handleType:t,style:n,type:r=Rs.Bezier,CustomComponent:a,connectionStatus:l})=>{const{fromNode:c,handleId:d,toX:g,toY:m,connectionMode:y}=me(X.useCallback(et=>({fromNode:et.nodeInternals.get(e),handleId:et.connectionHandleId,toX:(et.connectionPosition.x-et.transform[0])/et.transform[2],toY:(et.connectionPosition.y-et.transform[1])/et.transform[2],connectionMode:et.connectionMode}),[e]),sn),v=c?.[Ie]?.handleBounds;let E=v?.[t];if(y===zs.Loose&&(E=E||v?.[t==="source"?"target":"source"]),!c||!E)return null;const S=d?E.find(et=>et.id===d):E[0],M=S?S.x+S.width/2:(c.width??0)/2,L=S?S.y+S.height/2:c.height??0,V=(c.positionAbsolute?.x??0)+M,B=(c.positionAbsolute?.y??0)+L,F=S?.position,q=F?BD[F]:null;if(!F||!q)return null;if(a)return lt.createElement(a,{connectionLineType:r,connectionLineStyle:n,fromNode:c,fromHandle:S,fromX:V,fromY:B,toX:g,toY:m,fromPosition:F,toPosition:q,connectionStatus:l});let H="";const nt={sourceX:V,sourceY:B,sourcePosition:F,targetX:g,targetY:m,targetPosition:q};return r===Rs.Bezier?[H]=IS(nt):r===Rs.Step?[H]=ap({...nt,borderRadius:0}):r===Rs.SmoothStep?[H]=ap(nt):r===Rs.SimpleBezier?[H]=RS(nt):H=`M${V},${B} ${g},${m}`,lt.createElement("path",{d:H,fill:"none",className:"react-flow__connection-path",style:n})};s1.displayName="ConnectionLine";const HD=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function qD({containerStyle:e,style:t,type:n,component:r}){const{nodeId:a,handleType:l,nodesConnectable:c,width:d,height:g,connectionStatus:m}=me(HD,sn);return!(a&&l&&d&&c)?null:lt.createElement("svg",{style:e,width:d,height:g,className:"react-flow__edges react-flow__connectionline react-flow__container"},lt.createElement("g",{className:mn(["react-flow__connection",m])},lt.createElement(s1,{nodeId:a,handleType:l,style:t,type:n,CustomComponent:r,connectionStatus:m})))}function oT(e,t){return X.useRef(null),Ke(),X.useMemo(()=>t(e),[e])}const a1=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:a,onInit:l,onNodeClick:c,onEdgeClick:d,onNodeDoubleClick:g,onEdgeDoubleClick:m,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:E,onNodeContextMenu:S,onSelectionContextMenu:M,onSelectionStart:L,onSelectionEnd:V,connectionLineType:B,connectionLineStyle:F,connectionLineComponent:q,connectionLineContainerStyle:H,selectionKeyCode:nt,selectionOnDrag:et,selectionMode:D,multiSelectionKeyCode:R,panActivationKeyCode:I,zoomActivationKeyCode:P,deleteKeyCode:N,onlyRenderVisibleElements:U,elementsSelectable:A,selectNodesOnDrag:k,defaultViewport:tt,translateExtent:O,minZoom:$,maxZoom:at,preventScrolling:Y,defaultMarkerColor:x,zoomOnScroll:G,zoomOnPinch:W,panOnScroll:rt,panOnScrollSpeed:ct,panOnScrollMode:mt,zoomOnDoubleClick:pt,panOnDrag:It,onPaneClick:At,onPaneMouseEnter:kt,onPaneMouseMove:Pt,onPaneMouseLeave:ue,onPaneScroll:ce,onPaneContextMenu:ve,onEdgeContextMenu:ye,onEdgeMouseEnter:he,onEdgeMouseMove:Xe,onEdgeMouseLeave:Lt,onReconnect:wt,onReconnectStart:xe,onReconnectEnd:pn,reconnectRadius:Un,noDragClassName:Li,noWheelClassName:zn,noPanClassName:Sn,elevateEdgesOnSelect:wi,disableKeyboardA11y:te,nodeOrigin:Ft,nodeExtent:Ve,rfId:Ee})=>{const Ui=oT(e,pD),ke=oT(t,SD);return zD(l),lt.createElement(gD,{onPaneClick:At,onPaneMouseEnter:kt,onPaneMouseMove:Pt,onPaneMouseLeave:ue,onPaneContextMenu:ve,onPaneScroll:ce,deleteKeyCode:N,selectionKeyCode:nt,selectionOnDrag:et,selectionMode:D,onSelectionStart:L,onSelectionEnd:V,multiSelectionKeyCode:R,panActivationKeyCode:I,zoomActivationKeyCode:P,elementsSelectable:A,onMove:n,onMoveStart:r,onMoveEnd:a,zoomOnScroll:G,zoomOnPinch:W,zoomOnDoubleClick:pt,panOnScroll:rt,panOnScrollSpeed:ct,panOnScrollMode:mt,panOnDrag:It,defaultViewport:tt,translateExtent:O,minZoom:$,maxZoom:at,onSelectionContextMenu:M,preventScrolling:Y,noDragClassName:Li,noWheelClassName:zn,noPanClassName:Sn,disableKeyboardA11y:te},lt.createElement(UD,null,lt.createElement(PD,{edgeTypes:ke,onEdgeClick:d,onEdgeDoubleClick:m,onlyRenderVisibleElements:U,onEdgeContextMenu:ye,onEdgeMouseEnter:he,onEdgeMouseMove:Xe,onEdgeMouseLeave:Lt,onReconnect:wt,onReconnectStart:xe,onReconnectEnd:pn,reconnectRadius:Un,defaultMarkerColor:x,noPanClassName:Sn,elevateEdgesOnSelect:!!wi,disableKeyboardA11y:te,rfId:Ee},lt.createElement(qD,{style:F,type:B,component:q,containerStyle:H})),lt.createElement("div",{className:"react-flow__edgelabel-renderer"}),lt.createElement(vD,{nodeTypes:Ui,onNodeClick:c,onNodeDoubleClick:g,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:E,onNodeContextMenu:S,selectNodesOnDrag:k,onlyRenderVisibleElements:U,noPanClassName:Sn,noDragClassName:Li,disableKeyboardA11y:te,nodeOrigin:Ft,nodeExtent:Ve,rfId:Ee})))};a1.displayName="GraphView";var FD=X.memo(a1);const hp=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ws={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:hp,nodeExtent:hp,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:zs.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:_N,isValidConnection:void 0},jD=()=>MI((e,t)=>({...ws,setNodes:n=>{const{nodeInternals:r,nodeOrigin:a,elevateNodesOnSelect:l}=t();e({nodeInternals:Mm(n,r,a,l)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(a=>({...r,...a}))})},setDefaultNodesAndEdges:(n,r)=>{const a=typeof n<"u",l=typeof r<"u",c=a?Mm(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:c,edges:l?r:[],hasDefaultNodes:a,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:a,fitViewOnInit:l,fitViewOnInitDone:c,fitViewOnInitOptions:d,domNode:g,nodeOrigin:m}=t(),y=g?.querySelector(".react-flow__viewport");if(!y)return;const v=window.getComputedStyle(y),{m22:E}=new window.DOMMatrixReadOnly(v.transform),S=n.reduce((L,V)=>{const B=a.get(V.id);if(B?.hidden)a.set(B.id,{...B,[Ie]:{...B[Ie],handleBounds:void 0}});else if(B){const F=$p(V.nodeElement);!!(F.width&&F.height&&(B.width!==F.width||B.height!==F.height||V.forceUpdate))&&(a.set(B.id,{...B,[Ie]:{...B[Ie],handleBounds:{source:tT(".source",V.nodeElement,E,m),target:tT(".target",V.nodeElement,E,m)}},...F}),L.push({id:B.id,type:"dimensions",dimensions:F}))}return L},[]);$S(a,m);const M=c||l&&!c&&YS(t,{initial:!0,...d});e({nodeInternals:new Map(a),fitViewOnInitDone:M}),S?.length>0&&r?.(S)},updateNodePositions:(n,r=!0,a=!1)=>{const{triggerNodeChanges:l}=t(),c=n.map(d=>{const g={id:d.id,type:"position",dragging:a};return r&&(g.positionAbsolute=d.positionAbsolute,g.position=d.position),g});l(c)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:a,hasDefaultNodes:l,nodeOrigin:c,getNodes:d,elevateNodesOnSelect:g}=t();if(n?.length){if(l){const m=XS(n,d()),y=Mm(m,a,c,g);e({nodeInternals:y})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:a,getNodes:l}=t();let c,d=null;r?c=n.map(g=>As(g,!0)):(c=Yo(l(),n),d=Yo(a,[])),$h({changedNodes:c,changedEdges:d,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:a,getNodes:l}=t();let c,d=null;r?c=n.map(g=>As(g,!0)):(c=Yo(a,n),d=Yo(l(),[])),$h({changedNodes:d,changedEdges:c,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:a,getNodes:l}=t(),c=n||l(),d=r||a,g=c.map(y=>(y.selected=!1,As(y.id,!1))),m=d.map(y=>As(y.id,!1));$h({changedNodes:g,changedEdges:m,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:a}=t();r?.scaleExtent([n,a]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:a}=t();r?.scaleExtent([a,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),l=r().filter(d=>d.selected).map(d=>As(d.id,!1)),c=n.filter(d=>d.selected).map(d=>As(d.id,!1));$h({changedNodes:l,changedEdges:c,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(a=>{a.positionAbsolute=Yp(a.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:a,height:l,d3Zoom:c,d3Selection:d,translateExtent:g}=t();if(!c||!d||!n.x&&!n.y)return!1;const m=Br.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),y=[[0,0],[a,l]],v=c?.constrain()(m,y,g);return c.transform(d,v),r[0]!==v.x||r[1]!==v.y||r[2]!==v.k},cancelConnection:()=>e({connectionNodeId:ws.connectionNodeId,connectionHandleId:ws.connectionHandleId,connectionHandleType:ws.connectionHandleType,connectionStatus:ws.connectionStatus,connectionStartHandle:ws.connectionStartHandle,connectionEndHandle:ws.connectionEndHandle}),reset:()=>e({...ws})}),Object.is),o1=({children:e})=>{const t=X.useRef(null);return t.current||(t.current=jD()),lt.createElement(hN,{value:t.current},e)};o1.displayName="ReactFlowProvider";const l1=({children:e})=>X.useContext(Xf)?lt.createElement(lt.Fragment,null,e):lt.createElement(o1,null,e);l1.displayName="ReactFlowWrapper";const GD={input:zS,default:up,output:HS,group:Jp},$D={default:Af,straight:Qp,step:Xp,smoothstep:Qf,simplebezier:Kp},YD=[0,0],KD=[15,15],XD={x:0,y:0,zoom:1},QD={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},u1=X.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:a,nodeTypes:l=GD,edgeTypes:c=$D,onNodeClick:d,onEdgeClick:g,onInit:m,onMove:y,onMoveStart:v,onMoveEnd:E,onConnect:S,onConnectStart:M,onConnectEnd:L,onClickConnectStart:V,onClickConnectEnd:B,onNodeMouseEnter:F,onNodeMouseMove:q,onNodeMouseLeave:H,onNodeContextMenu:nt,onNodeDoubleClick:et,onNodeDragStart:D,onNodeDrag:R,onNodeDragStop:I,onNodesDelete:P,onEdgesDelete:N,onSelectionChange:U,onSelectionDragStart:A,onSelectionDrag:k,onSelectionDragStop:tt,onSelectionContextMenu:O,onSelectionStart:$,onSelectionEnd:at,connectionMode:Y=zs.Strict,connectionLineType:x=Rs.Bezier,connectionLineStyle:G,connectionLineComponent:W,connectionLineContainerStyle:rt,deleteKeyCode:ct="Backspace",selectionKeyCode:mt="Shift",selectionOnDrag:pt=!1,selectionMode:It=Xu.Full,panActivationKeyCode:At="Space",multiSelectionKeyCode:kt=Sf()?"Meta":"Control",zoomActivationKeyCode:Pt=Sf()?"Meta":"Control",snapToGrid:ue=!1,snapGrid:ce=KD,onlyRenderVisibleElements:ve=!1,selectNodesOnDrag:ye=!0,nodesDraggable:he,nodesConnectable:Xe,nodesFocusable:Lt,nodeOrigin:wt=YD,edgesFocusable:xe,edgesUpdatable:pn,elementsSelectable:Un,defaultViewport:Li=XD,minZoom:zn=.5,maxZoom:Sn=2,translateExtent:wi=hp,preventScrolling:te=!0,nodeExtent:Ft,defaultMarkerColor:Ve="#b1b1b7",zoomOnScroll:Ee=!0,zoomOnPinch:Ui=!0,panOnScroll:ke=!1,panOnScrollSpeed:Qe=.5,panOnScrollMode:bn=Na.Free,zoomOnDoubleClick:An=!0,panOnDrag:Ze=!0,onPaneClick:an,onPaneMouseEnter:Rn,onPaneMouseMove:fr,onPaneMouseLeave:dr,onPaneScroll:Si,onPaneContextMenu:Bn,children:ei,onEdgeContextMenu:Hn,onEdgeDoubleClick:ni,onEdgeMouseEnter:Qs,onEdgeMouseMove:zi,onEdgeMouseLeave:Qr,onEdgeUpdate:Bi,onEdgeUpdateStart:Ka,onEdgeUpdateEnd:de,onReconnect:Ne,onReconnectStart:be,onReconnectEnd:Nn,reconnectRadius:Zs=10,edgeUpdaterRadius:Tl=10,onNodesChange:Hi,onEdgesChange:Xa,noDragClassName:gr="nodrag",noWheelClassName:qi="nowheel",noPanClassName:ii="nopan",fitView:ri=!1,fitViewOptions:si,connectOnClick:on=!0,attributionPosition:Te,proOptions:Ws,defaultEdgeOptions:Zr,elevateNodesOnSelect:qn=!0,elevateEdgesOnSelect:bi=!1,disableKeyboardA11y:Js=!1,autoPanOnConnect:Qa=!0,autoPanOnNodeDrag:mr=!0,connectionRadius:Za=20,isValidConnection:Fi,onError:ai,style:He,id:ji,nodeDragThreshold:Wa,...Ai},Wr)=>{const Gi=ji||"1";return lt.createElement("div",{...Ai,style:{...He,...QD},ref:Wr,className:mn(["react-flow",a]),"data-testid":"rf__wrapper",id:ji},lt.createElement(l1,null,lt.createElement(FD,{onInit:m,onMove:y,onMoveStart:v,onMoveEnd:E,onNodeClick:d,onEdgeClick:g,onNodeMouseEnter:F,onNodeMouseMove:q,onNodeMouseLeave:H,onNodeContextMenu:nt,onNodeDoubleClick:et,nodeTypes:l,edgeTypes:c,connectionLineType:x,connectionLineStyle:G,connectionLineComponent:W,connectionLineContainerStyle:rt,selectionKeyCode:mt,selectionOnDrag:pt,selectionMode:It,deleteKeyCode:ct,multiSelectionKeyCode:kt,panActivationKeyCode:At,zoomActivationKeyCode:Pt,onlyRenderVisibleElements:ve,selectNodesOnDrag:ye,defaultViewport:Li,translateExtent:wi,minZoom:zn,maxZoom:Sn,preventScrolling:te,zoomOnScroll:Ee,zoomOnPinch:Ui,zoomOnDoubleClick:An,panOnScroll:ke,panOnScrollSpeed:Qe,panOnScrollMode:bn,panOnDrag:Ze,onPaneClick:an,onPaneMouseEnter:Rn,onPaneMouseMove:fr,onPaneMouseLeave:dr,onPaneScroll:Si,onPaneContextMenu:Bn,onSelectionContextMenu:O,onSelectionStart:$,onSelectionEnd:at,onEdgeContextMenu:Hn,onEdgeDoubleClick:ni,onEdgeMouseEnter:Qs,onEdgeMouseMove:zi,onEdgeMouseLeave:Qr,onReconnect:Ne??Bi,onReconnectStart:be??Ka,onReconnectEnd:Nn??de,reconnectRadius:Zs??Tl,defaultMarkerColor:Ve,noDragClassName:gr,noWheelClassName:qi,noPanClassName:ii,elevateEdgesOnSelect:bi,rfId:Gi,disableKeyboardA11y:Js,nodeOrigin:wt,nodeExtent:Ft}),lt.createElement(BN,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:S,onConnectStart:M,onConnectEnd:L,onClickConnectStart:V,onClickConnectEnd:B,nodesDraggable:he,nodesConnectable:Xe,nodesFocusable:Lt,edgesFocusable:xe,edgesUpdatable:pn,elementsSelectable:Un,elevateNodesOnSelect:qn,minZoom:zn,maxZoom:Sn,nodeExtent:Ft,onNodesChange:Hi,onEdgesChange:Xa,snapToGrid:ue,snapGrid:ce,connectionMode:Y,translateExtent:wi,connectOnClick:on,defaultEdgeOptions:Zr,fitView:ri,fitViewOptions:si,onNodesDelete:P,onEdgesDelete:N,onNodeDragStart:D,onNodeDrag:R,onNodeDragStop:I,onSelectionDrag:k,onSelectionDragStart:A,onSelectionDragStop:tt,noPanClassName:ii,nodeOrigin:wt,rfId:Gi,autoPanOnConnect:Qa,autoPanOnNodeDrag:mr,onError:ai,connectionRadius:Za,isValidConnection:Fi,nodeDragThreshold:Wa}),lt.createElement(UN,{onSelectionChange:U}),ei,lt.createElement(dN,{proOptions:Ws,position:Te}),lt.createElement(GN,{rfId:Gi,disableKeyboardA11y:Js})))});u1.displayName="ReactFlow";function c1(e){return t=>{const[n,r]=X.useState(t),a=X.useCallback(l=>r(c=>e(l,c)),[]);return[n,r,a]}}const ZD=c1(XS),WD=c1(sD),h1=({id:e,x:t,y:n,width:r,height:a,style:l,color:c,strokeColor:d,strokeWidth:g,className:m,borderRadius:y,shapeRendering:v,onClick:E,selected:S})=>{const{background:M,backgroundColor:L}=l||{},V=c||M||L;return lt.createElement("rect",{className:mn(["react-flow__minimap-node",{selected:S},m]),x:t,y:n,rx:y,ry:y,width:r,height:a,fill:V,stroke:d,strokeWidth:g,shapeRendering:v,onClick:E?B=>E(B,e):void 0})};h1.displayName="MiniMapNode";var JD=X.memo(h1);const tO=e=>e.nodeOrigin,eO=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Lm=e=>e instanceof Function?e:()=>e;function nO({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:a=2,nodeComponent:l=JD,onClick:c}){const d=me(eO,sn),g=me(tO),m=Lm(t),y=Lm(e),v=Lm(n),E=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return lt.createElement(lt.Fragment,null,d.map(S=>{const{x:M,y:L}=Ma(S,g).positionAbsolute;return lt.createElement(l,{key:S.id,x:M,y:L,width:S.width,height:S.height,style:S.style,selected:S.selected,className:v(S),color:m(S),borderRadius:r,strokeColor:y(S),strokeWidth:a,shapeRendering:E,onClick:c,id:S.id})}))}var iO=X.memo(nO);const rO=200,sO=150,aO=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?pN(Zf(t,e.nodeOrigin),n):n,rfId:e.rfId}},oO="react-flow__minimap-desc";function f1({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:a="",nodeBorderRadius:l=5,nodeStrokeWidth:c=2,nodeComponent:d,maskColor:g="rgb(240, 240, 240, 0.6)",maskStrokeColor:m="none",maskStrokeWidth:y=1,position:v="bottom-right",onClick:E,onNodeClick:S,pannable:M=!1,zoomable:L=!1,ariaLabel:V="React Flow mini map",inversePan:B=!1,zoomStep:F=10,offsetScale:q=5}){const H=Ke(),nt=X.useRef(null),{boundingRect:et,viewBB:D,rfId:R}=me(aO,sn),I=e?.width??rO,P=e?.height??sO,N=et.width/I,U=et.height/P,A=Math.max(N,U),k=A*I,tt=A*P,O=q*A,$=et.x-(k-et.width)/2-O,at=et.y-(tt-et.height)/2-O,Y=k+O*2,x=tt+O*2,G=`${oO}-${R}`,W=X.useRef(0);W.current=A,X.useEffect(()=>{if(nt.current){const mt=_i(nt.current),pt=kt=>{const{transform:Pt,d3Selection:ue,d3Zoom:ce}=H.getState();if(kt.sourceEvent.type!=="wheel"||!ue||!ce)return;const ve=-kt.sourceEvent.deltaY*(kt.sourceEvent.deltaMode===1?.05:kt.sourceEvent.deltaMode?1:.002)*F,ye=Pt[2]*Math.pow(2,ve);ce.scaleTo(ue,ye)},It=kt=>{const{transform:Pt,d3Selection:ue,d3Zoom:ce,translateExtent:ve,width:ye,height:he}=H.getState();if(kt.sourceEvent.type!=="mousemove"||!ue||!ce)return;const Xe=W.current*Math.max(1,Pt[2])*(B?-1:1),Lt={x:Pt[0]-kt.sourceEvent.movementX*Xe,y:Pt[1]-kt.sourceEvent.movementY*Xe},wt=[[0,0],[ye,he]],xe=Br.translate(Lt.x,Lt.y).scale(Pt[2]),pn=ce.constrain()(xe,wt,ve);ce.transform(ue,pn)},At=pS().on("zoom",M?It:null).on("zoom.wheel",L?pt:null);return mt.call(At),()=>{mt.on("zoom",null)}}},[M,L,B,F]);const rt=E?mt=>{const pt=Ni(mt);E(mt,{x:pt[0],y:pt[1]})}:void 0,ct=S?(mt,pt)=>{const It=H.getState().nodeInternals.get(pt);S(mt,It)}:void 0;return lt.createElement(Gp,{position:v,style:e,className:mn(["react-flow__minimap",t]),"data-testid":"rf__minimap"},lt.createElement("svg",{width:I,height:P,viewBox:`${$} ${at} ${Y} ${x}`,role:"img","aria-labelledby":G,ref:nt,onClick:rt},V&&lt.createElement("title",{id:G},V),lt.createElement(iO,{onClick:ct,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:l,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:d}),lt.createElement("path",{className:"react-flow__minimap-mask",d:`M${$-O},${at-O}h${Y+O*2}v${x+O*2}h${-Y-O*2}z
        M${D.x},${D.y}h${D.width}v${D.height}h${-D.width}z`,fill:g,fillRule:"evenodd",stroke:m,strokeWidth:y,pointerEvents:"none"})))}f1.displayName="MiniMap";var lO=X.memo(f1);function uO(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},lt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function cO(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},lt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function hO(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},lt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function fO(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function dO(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const xu=({children:e,className:t,...n})=>lt.createElement("button",{type:"button",className:mn(["react-flow__controls-button",t]),...n},e);xu.displayName="ControlButton";const gO=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),d1=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:g,className:m,children:y,position:v="bottom-left"})=>{const E=Ke(),[S,M]=X.useState(!1),{isInteractive:L,minZoomReached:V,maxZoomReached:B}=me(gO,sn),{zoomIn:F,zoomOut:q,fitView:H}=ty();if(X.useEffect(()=>{M(!0)},[]),!S)return null;const nt=()=>{F(),l?.()},et=()=>{q(),c?.()},D=()=>{H(a),d?.()},R=()=>{E.setState({nodesDraggable:!L,nodesConnectable:!L,elementsSelectable:!L}),g?.(!L)};return lt.createElement(Gp,{className:mn(["react-flow__controls",m]),position:v,style:e,"data-testid":"rf__controls"},t&&lt.createElement(lt.Fragment,null,lt.createElement(xu,{onClick:nt,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:B},lt.createElement(uO,null)),lt.createElement(xu,{onClick:et,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:V},lt.createElement(cO,null))),n&&lt.createElement(xu,{className:"react-flow__controls-fitview",onClick:D,title:"fit view","aria-label":"fit view"},lt.createElement(hO,null)),r&&lt.createElement(xu,{className:"react-flow__controls-interactive",onClick:R,title:"toggle interactivity","aria-label":"toggle interactivity"},L?lt.createElement(dO,null):lt.createElement(fO,null)),y)};d1.displayName="Controls";var mO=X.memo(d1),Mi;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Mi||(Mi={}));function pO({color:e,dimensions:t,lineWidth:n}){return lt.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function yO({color:e,radius:t}){return lt.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const _O={[Mi.Dots]:"#91919a",[Mi.Lines]:"#eee",[Mi.Cross]:"#e2e2e2"},vO={[Mi.Dots]:1,[Mi.Lines]:1,[Mi.Cross]:6},EO=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function g1({id:e,variant:t=Mi.Dots,gap:n=20,size:r,lineWidth:a=1,offset:l=2,color:c,style:d,className:g}){const m=X.useRef(null),{transform:y,patternId:v}=me(EO,sn),E=c||_O[t],S=r||vO[t],M=t===Mi.Dots,L=t===Mi.Cross,V=Array.isArray(n)?n:[n,n],B=[V[0]*y[2]||1,V[1]*y[2]||1],F=S*y[2],q=L?[F,F]:B,H=M?[F/l,F/l]:[q[0]/l,q[1]/l];return lt.createElement("svg",{className:mn(["react-flow__background",g]),style:{...d,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:m,"data-testid":"rf__background"},lt.createElement("pattern",{id:v+e,x:y[0]%B[0],y:y[1]%B[1],width:B[0],height:B[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${H[0]},-${H[1]})`},M?lt.createElement(yO,{color:E,radius:F/l}):lt.createElement(pO,{dimensions:q,color:E,lineWidth:a})),lt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+e})`}))}g1.displayName="Background";var TO=X.memo(g1);const wO=()=>{};var lT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=a&63|128):(a&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=a&63|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=a&63|128)}return t},SO=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=e[n++];t[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=e[n++],c=e[n++],d=e[n++],g=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const l=e[n++],c=e[n++];t[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},p1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<e.length;a+=3){const l=e[a],c=a+1<e.length,d=c?e[a+1]:0,g=a+2<e.length,m=g?e[a+2]:0,y=l>>2,v=(l&3)<<4|d>>4;let E=(d&15)<<2|m>>6,S=m&63;g||(S=64,c||(E=64)),r.push(n[y],n[v],n[E],n[S])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(m1(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):SO(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<e.length;){const l=n[e.charAt(a++)],d=a<e.length?n[e.charAt(a)]:0;++a;const m=a<e.length?n[e.charAt(a)]:64;++a;const v=a<e.length?n[e.charAt(a)]:64;if(++a,l==null||d==null||m==null||v==null)throw new bO;const E=l<<2|d>>4;if(r.push(E),m!==64){const S=d<<4&240|m>>2;if(r.push(S),v!==64){const M=m<<6&192|v;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class bO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AO=function(e){const t=m1(e);return p1.encodeByteArray(t,!0)},Rf=function(e){return AO(e).replace(/\./g,"")},y1=function(e){try{return p1.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO=()=>RO().__FIREBASE_DEFAULTS__,CO=()=>{if(typeof process>"u"||typeof lT>"u")return;const e=lT.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},xO=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&y1(e[1]);return t&&JSON.parse(t)},Wf=()=>{try{return wO()||IO()||CO()||xO()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},_1=e=>{var t,n;return(n=(t=Wf())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},NO=e=>{const t=_1(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},v1=()=>{var e;return(e=Wf())===null||e===void 0?void 0:e.config},E1=e=>{var t;return(t=Wf())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(e){return e.endsWith(".cloudworkstations.dev")}async function T1(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",a=e.iat||0,l=e.sub||e.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Rf(JSON.stringify(n)),Rf(JSON.stringify(c)),""].join(".")}const ku={};function MO(){const e={prod:[],emulator:[]};for(const t of Object.keys(ku))ku[t]?e.emulator.push(t):e.prod.push(t);return e}function VO(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let uT=!1;function w1(e,t){if(typeof window>"u"||typeof document>"u"||!dl(window.location.host)||ku[e]===t||ku[e]||uT)return;ku[e]=t;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",l=MO().prod.length>0;function c(){const E=document.getElementById(r);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{uT=!0,c()},E}function y(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=VO(r),S=n("text"),M=document.getElementById(S)||document.createElement("span"),L=n("learnmore"),V=document.getElementById(L)||document.createElement("a"),B=n("preprendIcon"),F=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const q=E.element;d(q),y(V,L);const H=m();g(F,B),q.append(F,M,V,H),document.body.appendChild(q)}l?(M.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function PO(){var e;const t=(e=Wf())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UO(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function zO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BO(){const e=wn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function HO(){return!PO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qO(){try{return typeof indexedDB=="object"}catch{return!1}}function FO(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;t(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO="FirebaseError";class Xr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=jO,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hc.prototype.create)}}class hc{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?GO(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Xr(a,d,r)}}function GO(e,t){return e.replace($O,(n,r)=>{const a=t[r];return a!=null?String(a):`<${r}?>`})}const $O=/\{\$([^}]+)}/g;function YO(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Pa(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const a of n){if(!r.includes(a))return!1;const l=e[a],c=t[a];if(cT(l)&&cT(c)){if(!Pa(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function cT(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(a=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Nu(e){const t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");t[decodeURIComponent(a)]=decodeURIComponent(l)}}),t}function Du(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function KO(e,t){const n=new XO(e,t);return n.subscribe.bind(n)}class XO{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let a;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");QO(t,["next","error","complete"])?a=t:a={next:t,error:n,complete:r},a.next===void 0&&(a.next=Um),a.error===void 0&&(a.error=Um),a.complete===void 0&&(a.complete=Um);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QO(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Um(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(e){return e&&e._delegate?e._delegate:e}class La{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new DO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t?.identifier),a=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(JO(t))try{this.getOrInitializeService({instanceIdentifier:Ia})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(t=Ia){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ia){return this.instances.has(t)}getOptions(t=Ia){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(t,n){var r;const a=this.normalizeInstanceIdentifier(n),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(t),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&t(c,a),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WO(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ia){return this.component?this.component.multipleInstances?t:Ia:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WO(e){return e===Ia?void 0:e}function JO(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new ZO(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})($t||($t={}));const eM={debug:$t.DEBUG,verbose:$t.VERBOSE,info:$t.INFO,warn:$t.WARN,error:$t.ERROR,silent:$t.SILENT},nM=$t.INFO,iM={[$t.DEBUG]:"log",[$t.VERBOSE]:"log",[$t.INFO]:"info",[$t.WARN]:"warn",[$t.ERROR]:"error"},rM=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),a=iM[t];if(a)console[a](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ny{constructor(t){this.name=t,this._logLevel=nM,this._logHandler=rM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in $t))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?eM[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,$t.DEBUG,...t),this._logHandler(this,$t.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,$t.VERBOSE,...t),this._logHandler(this,$t.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,$t.INFO,...t),this._logHandler(this,$t.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,$t.WARN,...t),this._logHandler(this,$t.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,$t.ERROR,...t),this._logHandler(this,$t.ERROR,...t)}}const sM=(e,t)=>t.some(n=>e instanceof n);let hT,fT;function aM(){return hT||(hT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oM(){return fT||(fT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const S1=new WeakMap,fp=new WeakMap,b1=new WeakMap,zm=new WeakMap,iy=new WeakMap;function lM(e){const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("success",l),e.removeEventListener("error",c)},l=()=>{n(Ms(e.result)),a()},c=()=>{r(e.error),a()};e.addEventListener("success",l),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&S1.set(n,e)}).catch(()=>{}),iy.set(t,e),t}function uM(e){if(fp.has(e))return;const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("complete",l),e.removeEventListener("error",c),e.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",l),e.addEventListener("error",c),e.addEventListener("abort",c)});fp.set(e,t)}let dp={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return fp.get(e);if(t==="objectStoreNames")return e.objectStoreNames||b1.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ms(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function cM(e){dp=e(dp)}function hM(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Bm(this),t,...n);return b1.set(r,t.sort?t.sort():[t]),Ms(r)}:oM().includes(e)?function(...t){return e.apply(Bm(this),t),Ms(S1.get(this))}:function(...t){return Ms(e.apply(Bm(this),t))}}function fM(e){return typeof e=="function"?hM(e):(e instanceof IDBTransaction&&uM(e),sM(e,aM())?new Proxy(e,dp):e)}function Ms(e){if(e instanceof IDBRequest)return lM(e);if(zm.has(e))return zm.get(e);const t=fM(e);return t!==e&&(zm.set(e,t),iy.set(t,e)),t}const Bm=e=>iy.get(e);function dM(e,t,{blocked:n,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(e,t),d=Ms(c);return r&&c.addEventListener("upgradeneeded",g=>{r(Ms(c.result),g.oldVersion,g.newVersion,Ms(c.transaction),g)}),n&&c.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const gM=["get","getKey","getAll","getAllKeys","count"],mM=["put","add","delete","clear"],Hm=new Map;function dT(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Hm.get(t))return Hm.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=mM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||gM.includes(n)))return;const l=async function(c,...d){const g=this.transaction(c,a?"readwrite":"readonly");let m=g.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),a&&g.done]))[0]};return Hm.set(t,l),l}cM(e=>({...e,get:(t,n,r)=>dT(t,n)||e.get(t,n,r),has:(t,n)=>!!dT(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function yM(e){const t=e.getComponent();return t?.type==="VERSION"}const gp="@firebase/app",gT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new ny("@firebase/app"),_M="@firebase/app-compat",vM="@firebase/analytics-compat",EM="@firebase/analytics",TM="@firebase/app-check-compat",wM="@firebase/app-check",SM="@firebase/auth",bM="@firebase/auth-compat",AM="@firebase/database",RM="@firebase/data-connect",IM="@firebase/database-compat",CM="@firebase/functions",xM="@firebase/functions-compat",NM="@firebase/installations",DM="@firebase/installations-compat",OM="@firebase/messaging",MM="@firebase/messaging-compat",VM="@firebase/performance",kM="@firebase/performance-compat",PM="@firebase/remote-config",LM="@firebase/remote-config-compat",UM="@firebase/storage",zM="@firebase/storage-compat",BM="@firebase/firestore",HM="@firebase/ai",qM="@firebase/firestore-compat",FM="firebase",jM="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="[DEFAULT]",GM={[gp]:"fire-core",[_M]:"fire-core-compat",[EM]:"fire-analytics",[vM]:"fire-analytics-compat",[wM]:"fire-app-check",[TM]:"fire-app-check-compat",[SM]:"fire-auth",[bM]:"fire-auth-compat",[AM]:"fire-rtdb",[RM]:"fire-data-connect",[IM]:"fire-rtdb-compat",[CM]:"fire-fn",[xM]:"fire-fn-compat",[NM]:"fire-iid",[DM]:"fire-iid-compat",[OM]:"fire-fcm",[MM]:"fire-fcm-compat",[VM]:"fire-perf",[kM]:"fire-perf-compat",[PM]:"fire-rc",[LM]:"fire-rc-compat",[UM]:"fire-gcs",[zM]:"fire-gcs-compat",[BM]:"fire-fst",[qM]:"fire-fst-compat",[HM]:"fire-vertex","fire-js":"fire-js",[FM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=new Map,$M=new Map,pp=new Map;function mT(e,t){try{e.container.addComponent(t)}catch(n){jr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function sl(e){const t=e.name;if(pp.has(t))return jr.debug(`There were multiple attempts to register component ${t}.`),!1;pp.set(t,e);for(const n of If.values())mT(n,e);for(const n of $M.values())mT(n,e);return!0}function ry(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function vi(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vs=new hc("app","Firebase",YM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new La("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=jM;function A1(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:mp,automaticDataCollectionEnabled:!0},t),a=r.name;if(typeof a!="string"||!a)throw Vs.create("bad-app-name",{appName:String(a)});if(n||(n=v1()),!n)throw Vs.create("no-options");const l=If.get(a);if(l){if(Pa(n,l.options)&&Pa(r,l.config))return l;throw Vs.create("duplicate-app",{appName:a})}const c=new tM(a);for(const g of pp.values())c.addComponent(g);const d=new KM(n,r,c);return If.set(a,d),d}function R1(e=mp){const t=If.get(e);if(!t&&e===mp&&v1())return A1();if(!t)throw Vs.create("no-app",{appName:e});return t}function ks(e,t,n){var r;let a=(r=GM[e])!==null&&r!==void 0?r:e;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${t}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),jr.warn(d.join(" "));return}sl(new La(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM="firebase-heartbeat-database",QM=1,Zu="firebase-heartbeat-store";let qm=null;function I1(){return qm||(qm=dM(XM,QM,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Zu)}catch(n){console.warn(n)}}}}).catch(e=>{throw Vs.create("idb-open",{originalErrorMessage:e.message})})),qm}async function ZM(e){try{const n=(await I1()).transaction(Zu),r=await n.objectStore(Zu).get(C1(e));return await n.done,r}catch(t){if(t instanceof Xr)jr.warn(t.message);else{const n=Vs.create("idb-get",{originalErrorMessage:t?.message});jr.warn(n.message)}}}async function pT(e,t){try{const r=(await I1()).transaction(Zu,"readwrite");await r.objectStore(Zu).put(t,C1(e)),await r.done}catch(n){if(n instanceof Xr)jr.warn(n.message);else{const r=Vs.create("idb-set",{originalErrorMessage:n?.message});jr.warn(r.message)}}}function C1(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=1024,JM=30;class tV{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=yT();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>JM){const c=iV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){jr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=yT(),{heartbeatsToSend:r,unsentEntries:a}=eV(this._heartbeatsCache.heartbeats),l=Rf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return jr.warn(n),""}}}function yT(){return new Date().toISOString().substring(0,10)}function eV(e,t=WM){const n=[];let r=e.slice();for(const a of e){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),_T(n)>t){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),_T(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class nV{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qO()?FO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZM(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return pT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return pT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function _T(e){return Rf(JSON.stringify({version:2,heartbeats:e})).length}function iV(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(e){sl(new La("platform-logger",t=>new pM(t),"PRIVATE")),sl(new La("heartbeat",t=>new tV(t),"PRIVATE")),ks(gp,gT,e),ks(gp,gT,"esm2017"),ks("fire-js","")}rV("");var sV="firebase",aV="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ks(sV,aV,"app");var vT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ps,x1;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,R){function I(){}I.prototype=R.prototype,D.D=R.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(P,N,U){for(var A=Array(arguments.length-2),k=2;k<arguments.length;k++)A[k-2]=arguments[k];return R.prototype[N].apply(P,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,R,I){I||(I=0);var P=Array(16);if(typeof R=="string")for(var N=0;16>N;++N)P[N]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(N=0;16>N;++N)P[N]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=D.g[0],I=D.g[1],N=D.g[2];var U=D.g[3],A=R+(U^I&(N^U))+P[0]+3614090360&4294967295;R=I+(A<<7&4294967295|A>>>25),A=U+(N^R&(I^N))+P[1]+3905402710&4294967295,U=R+(A<<12&4294967295|A>>>20),A=N+(I^U&(R^I))+P[2]+606105819&4294967295,N=U+(A<<17&4294967295|A>>>15),A=I+(R^N&(U^R))+P[3]+3250441966&4294967295,I=N+(A<<22&4294967295|A>>>10),A=R+(U^I&(N^U))+P[4]+4118548399&4294967295,R=I+(A<<7&4294967295|A>>>25),A=U+(N^R&(I^N))+P[5]+1200080426&4294967295,U=R+(A<<12&4294967295|A>>>20),A=N+(I^U&(R^I))+P[6]+2821735955&4294967295,N=U+(A<<17&4294967295|A>>>15),A=I+(R^N&(U^R))+P[7]+4249261313&4294967295,I=N+(A<<22&4294967295|A>>>10),A=R+(U^I&(N^U))+P[8]+1770035416&4294967295,R=I+(A<<7&4294967295|A>>>25),A=U+(N^R&(I^N))+P[9]+2336552879&4294967295,U=R+(A<<12&4294967295|A>>>20),A=N+(I^U&(R^I))+P[10]+4294925233&4294967295,N=U+(A<<17&4294967295|A>>>15),A=I+(R^N&(U^R))+P[11]+2304563134&4294967295,I=N+(A<<22&4294967295|A>>>10),A=R+(U^I&(N^U))+P[12]+1804603682&4294967295,R=I+(A<<7&4294967295|A>>>25),A=U+(N^R&(I^N))+P[13]+4254626195&4294967295,U=R+(A<<12&4294967295|A>>>20),A=N+(I^U&(R^I))+P[14]+2792965006&4294967295,N=U+(A<<17&4294967295|A>>>15),A=I+(R^N&(U^R))+P[15]+1236535329&4294967295,I=N+(A<<22&4294967295|A>>>10),A=R+(N^U&(I^N))+P[1]+4129170786&4294967295,R=I+(A<<5&4294967295|A>>>27),A=U+(I^N&(R^I))+P[6]+3225465664&4294967295,U=R+(A<<9&4294967295|A>>>23),A=N+(R^I&(U^R))+P[11]+643717713&4294967295,N=U+(A<<14&4294967295|A>>>18),A=I+(U^R&(N^U))+P[0]+3921069994&4294967295,I=N+(A<<20&4294967295|A>>>12),A=R+(N^U&(I^N))+P[5]+3593408605&4294967295,R=I+(A<<5&4294967295|A>>>27),A=U+(I^N&(R^I))+P[10]+38016083&4294967295,U=R+(A<<9&4294967295|A>>>23),A=N+(R^I&(U^R))+P[15]+3634488961&4294967295,N=U+(A<<14&4294967295|A>>>18),A=I+(U^R&(N^U))+P[4]+3889429448&4294967295,I=N+(A<<20&4294967295|A>>>12),A=R+(N^U&(I^N))+P[9]+568446438&4294967295,R=I+(A<<5&4294967295|A>>>27),A=U+(I^N&(R^I))+P[14]+3275163606&4294967295,U=R+(A<<9&4294967295|A>>>23),A=N+(R^I&(U^R))+P[3]+4107603335&4294967295,N=U+(A<<14&4294967295|A>>>18),A=I+(U^R&(N^U))+P[8]+1163531501&4294967295,I=N+(A<<20&4294967295|A>>>12),A=R+(N^U&(I^N))+P[13]+2850285829&4294967295,R=I+(A<<5&4294967295|A>>>27),A=U+(I^N&(R^I))+P[2]+4243563512&4294967295,U=R+(A<<9&4294967295|A>>>23),A=N+(R^I&(U^R))+P[7]+1735328473&4294967295,N=U+(A<<14&4294967295|A>>>18),A=I+(U^R&(N^U))+P[12]+2368359562&4294967295,I=N+(A<<20&4294967295|A>>>12),A=R+(I^N^U)+P[5]+4294588738&4294967295,R=I+(A<<4&4294967295|A>>>28),A=U+(R^I^N)+P[8]+2272392833&4294967295,U=R+(A<<11&4294967295|A>>>21),A=N+(U^R^I)+P[11]+1839030562&4294967295,N=U+(A<<16&4294967295|A>>>16),A=I+(N^U^R)+P[14]+4259657740&4294967295,I=N+(A<<23&4294967295|A>>>9),A=R+(I^N^U)+P[1]+2763975236&4294967295,R=I+(A<<4&4294967295|A>>>28),A=U+(R^I^N)+P[4]+1272893353&4294967295,U=R+(A<<11&4294967295|A>>>21),A=N+(U^R^I)+P[7]+4139469664&4294967295,N=U+(A<<16&4294967295|A>>>16),A=I+(N^U^R)+P[10]+3200236656&4294967295,I=N+(A<<23&4294967295|A>>>9),A=R+(I^N^U)+P[13]+681279174&4294967295,R=I+(A<<4&4294967295|A>>>28),A=U+(R^I^N)+P[0]+3936430074&4294967295,U=R+(A<<11&4294967295|A>>>21),A=N+(U^R^I)+P[3]+3572445317&4294967295,N=U+(A<<16&4294967295|A>>>16),A=I+(N^U^R)+P[6]+76029189&4294967295,I=N+(A<<23&4294967295|A>>>9),A=R+(I^N^U)+P[9]+3654602809&4294967295,R=I+(A<<4&4294967295|A>>>28),A=U+(R^I^N)+P[12]+3873151461&4294967295,U=R+(A<<11&4294967295|A>>>21),A=N+(U^R^I)+P[15]+530742520&4294967295,N=U+(A<<16&4294967295|A>>>16),A=I+(N^U^R)+P[2]+3299628645&4294967295,I=N+(A<<23&4294967295|A>>>9),A=R+(N^(I|~U))+P[0]+4096336452&4294967295,R=I+(A<<6&4294967295|A>>>26),A=U+(I^(R|~N))+P[7]+1126891415&4294967295,U=R+(A<<10&4294967295|A>>>22),A=N+(R^(U|~I))+P[14]+2878612391&4294967295,N=U+(A<<15&4294967295|A>>>17),A=I+(U^(N|~R))+P[5]+4237533241&4294967295,I=N+(A<<21&4294967295|A>>>11),A=R+(N^(I|~U))+P[12]+1700485571&4294967295,R=I+(A<<6&4294967295|A>>>26),A=U+(I^(R|~N))+P[3]+2399980690&4294967295,U=R+(A<<10&4294967295|A>>>22),A=N+(R^(U|~I))+P[10]+4293915773&4294967295,N=U+(A<<15&4294967295|A>>>17),A=I+(U^(N|~R))+P[1]+2240044497&4294967295,I=N+(A<<21&4294967295|A>>>11),A=R+(N^(I|~U))+P[8]+1873313359&4294967295,R=I+(A<<6&4294967295|A>>>26),A=U+(I^(R|~N))+P[15]+4264355552&4294967295,U=R+(A<<10&4294967295|A>>>22),A=N+(R^(U|~I))+P[6]+2734768916&4294967295,N=U+(A<<15&4294967295|A>>>17),A=I+(U^(N|~R))+P[13]+1309151649&4294967295,I=N+(A<<21&4294967295|A>>>11),A=R+(N^(I|~U))+P[4]+4149444226&4294967295,R=I+(A<<6&4294967295|A>>>26),A=U+(I^(R|~N))+P[11]+3174756917&4294967295,U=R+(A<<10&4294967295|A>>>22),A=N+(R^(U|~I))+P[2]+718787259&4294967295,N=U+(A<<15&4294967295|A>>>17),A=I+(U^(N|~R))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(N+(A<<21&4294967295|A>>>11))&4294967295,D.g[2]=D.g[2]+N&4294967295,D.g[3]=D.g[3]+U&4294967295}r.prototype.u=function(D,R){R===void 0&&(R=D.length);for(var I=R-this.blockSize,P=this.B,N=this.h,U=0;U<R;){if(N==0)for(;U<=I;)a(this,D,U),U+=this.blockSize;if(typeof D=="string"){for(;U<R;)if(P[N++]=D.charCodeAt(U++),N==this.blockSize){a(this,P),N=0;break}}else for(;U<R;)if(P[N++]=D[U++],N==this.blockSize){a(this,P),N=0;break}}this.h=N,this.o+=R},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;var I=8*this.o;for(R=D.length-8;R<D.length;++R)D[R]=I&255,I/=256;for(this.u(D),D=Array(16),R=I=0;4>R;++R)for(var P=0;32>P;P+=8)D[I++]=this.g[R]>>>P&255;return D};function l(D,R){var I=d;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=R(D)}function c(D,R){this.h=R;for(var I=[],P=!0,N=D.length-1;0<=N;N--){var U=D[N]|0;P&&U==R||(I[N]=U,P=!1)}this.g=I}var d={};function g(D){return-128<=D&&128>D?l(D,function(R){return new c([R|0],0>R?-1:0)}):new c([D|0],0>D?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return v;if(0>D)return V(m(-D));for(var R=[],I=1,P=0;D>=I;P++)R[P]=D/I|0,I*=4294967296;return new c(R,0)}function y(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return V(y(D.substring(1),R));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=m(Math.pow(R,8)),P=v,N=0;N<D.length;N+=8){var U=Math.min(8,D.length-N),A=parseInt(D.substring(N,N+U),R);8>U?(U=m(Math.pow(R,U)),P=P.j(U).add(m(A))):(P=P.j(I),P=P.add(m(A)))}return P}var v=g(0),E=g(1),S=g(16777216);e=c.prototype,e.m=function(){if(L(this))return-V(this).m();for(var D=0,R=1,I=0;I<this.g.length;I++){var P=this.i(I);D+=(0<=P?P:4294967296+P)*R,R*=4294967296}return D},e.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(M(this))return"0";if(L(this))return"-"+V(this).toString(D);for(var R=m(Math.pow(D,6)),I=this,P="";;){var N=H(I,R).g;I=B(I,N.j(R));var U=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=N,M(I))return U+P;for(;6>U.length;)U="0"+U;P=U+P}},e.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function M(D){if(D.h!=0)return!1;for(var R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function L(D){return D.h==-1}e.l=function(D){return D=B(this,D),L(D)?-1:M(D)?0:1};function V(D){for(var R=D.g.length,I=[],P=0;P<R;P++)I[P]=~D.g[P];return new c(I,~D.h).add(E)}e.abs=function(){return L(this)?V(this):this},e.add=function(D){for(var R=Math.max(this.g.length,D.g.length),I=[],P=0,N=0;N<=R;N++){var U=P+(this.i(N)&65535)+(D.i(N)&65535),A=(U>>>16)+(this.i(N)>>>16)+(D.i(N)>>>16);P=A>>>16,U&=65535,A&=65535,I[N]=A<<16|U}return new c(I,I[I.length-1]&-2147483648?-1:0)};function B(D,R){return D.add(V(R))}e.j=function(D){if(M(this)||M(D))return v;if(L(this))return L(D)?V(this).j(V(D)):V(V(this).j(D));if(L(D))return V(this.j(V(D)));if(0>this.l(S)&&0>D.l(S))return m(this.m()*D.m());for(var R=this.g.length+D.g.length,I=[],P=0;P<2*R;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<D.g.length;N++){var U=this.i(P)>>>16,A=this.i(P)&65535,k=D.i(N)>>>16,tt=D.i(N)&65535;I[2*P+2*N]+=A*tt,F(I,2*P+2*N),I[2*P+2*N+1]+=U*tt,F(I,2*P+2*N+1),I[2*P+2*N+1]+=A*k,F(I,2*P+2*N+1),I[2*P+2*N+2]+=U*k,F(I,2*P+2*N+2)}for(P=0;P<R;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=R;P<2*R;P++)I[P]=0;return new c(I,0)};function F(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function q(D,R){this.g=D,this.h=R}function H(D,R){if(M(R))throw Error("division by zero");if(M(D))return new q(v,v);if(L(D))return R=H(V(D),R),new q(V(R.g),V(R.h));if(L(R))return R=H(D,V(R)),new q(V(R.g),R.h);if(30<D.g.length){if(L(D)||L(R))throw Error("slowDivide_ only works with positive integers.");for(var I=E,P=R;0>=P.l(D);)I=nt(I),P=nt(P);var N=et(I,1),U=et(P,1);for(P=et(P,2),I=et(I,2);!M(P);){var A=U.add(P);0>=A.l(D)&&(N=N.add(I),U=A),P=et(P,1),I=et(I,1)}return R=B(D,N.j(R)),new q(N,R)}for(N=v;0<=D.l(R);){for(I=Math.max(1,Math.floor(D.m()/R.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),U=m(I),A=U.j(R);L(A)||0<A.l(D);)I-=P,U=m(I),A=U.j(R);M(U)&&(U=E),N=N.add(U),D=B(D,A)}return new q(N,D)}e.A=function(D){return H(this,D).h},e.and=function(D){for(var R=Math.max(this.g.length,D.g.length),I=[],P=0;P<R;P++)I[P]=this.i(P)&D.i(P);return new c(I,this.h&D.h)},e.or=function(D){for(var R=Math.max(this.g.length,D.g.length),I=[],P=0;P<R;P++)I[P]=this.i(P)|D.i(P);return new c(I,this.h|D.h)},e.xor=function(D){for(var R=Math.max(this.g.length,D.g.length),I=[],P=0;P<R;P++)I[P]=this.i(P)^D.i(P);return new c(I,this.h^D.h)};function nt(D){for(var R=D.g.length+1,I=[],P=0;P<R;P++)I[P]=D.i(P)<<1|D.i(P-1)>>>31;return new c(I,D.h)}function et(D,R){var I=R>>5;R%=32;for(var P=D.g.length-I,N=[],U=0;U<P;U++)N[U]=0<R?D.i(U+I)>>>R|D.i(U+I+1)<<32-R:D.i(U+I);return new c(N,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,x1=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=y,Ps=c}).apply(typeof vT<"u"?vT:typeof self<"u"?self:typeof window<"u"?window:{});var Kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var N1,Ou,D1,of,yp,O1,M1,V1;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,T){return h==Array.prototype||h==Object.prototype||(h[_]=T.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kh=="object"&&Kh];for(var _=0;_<h.length;++_){var T=h[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function a(h,_){if(_)t:{var T=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var Q=h[C];if(!(Q in T))break t;T=T[Q]}h=h[h.length-1],C=T[h],_=_(C),_!=C&&_!=null&&t(T,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var T=0,C=!1,Q={next:function(){if(!C&&T<h.length){var ot=T++;return{value:_(ot,h[ot]),done:!1}}return C=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function m(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,T){return h.call.apply(h.bind,arguments)}function v(h,_,T){if(!h)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,C),h.apply(_,Q)}}return function(){return h.apply(_,arguments)}}function E(h,_,T){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,E.apply(null,arguments)}function S(h,_){var T=Array.prototype.slice.call(arguments,1);return function(){var C=T.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function M(h,_){function T(){}T.prototype=_.prototype,h.aa=_.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(C,Q,ot){for(var yt=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)yt[Kt-2]=arguments[Kt];return _.prototype[Q].apply(C,yt)}}function L(h){const _=h.length;if(0<_){const T=Array(_);for(let C=0;C<_;C++)T[C]=h[C];return T}return[]}function V(h,_){for(let T=1;T<arguments.length;T++){const C=arguments[T];if(g(C)){const Q=h.length||0,ot=C.length||0;h.length=Q+ot;for(let yt=0;yt<ot;yt++)h[Q+yt]=C[yt]}else h.push(C)}}class B{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function F(h){return/^[\s\xa0]*$/.test(h)}function q(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function H(h){return H[" "](h),h}H[" "]=function(){};var nt=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function et(h,_,T){for(const C in h)_.call(T,h[C],C,h)}function D(h,_){for(const T in h)_.call(void 0,h[T],T,h)}function R(h){const _={};for(const T in h)_[T]=h[T];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,_){let T,C;for(let Q=1;Q<arguments.length;Q++){C=arguments[Q];for(T in C)h[T]=C[T];for(let ot=0;ot<I.length;ot++)T=I[ot],Object.prototype.hasOwnProperty.call(C,T)&&(h[T]=C[T])}}function N(h){var _=1;h=h.split(":");const T=[];for(;0<_&&h.length;)T.push(h.shift()),_--;return h.length&&T.push(h.join(":")),T}function U(h){d.setTimeout(()=>{throw h},0)}function A(){var h=Y;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class k{constructor(){this.h=this.g=null}add(_,T){const C=tt.get();C.set(_,T),this.h?this.h.next=C:this.g=C,this.h=C}}var tt=new B(()=>new O,h=>h.reset());class O{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let $,at=!1,Y=new k,x=()=>{const h=d.Promise.resolve(void 0);$=()=>{h.then(G)}};var G=()=>{for(var h;h=A();){try{h.h.call(h.g)}catch(T){U(T)}var _=tt;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}at=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var ct=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};d.addEventListener("test",T,_),d.removeEventListener("test",T,_)}catch{}return h}();function mt(h,_){if(rt.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(nt){t:{try{H(_.nodeName);var Q=!0;break t}catch{}Q=!1}Q||(_=null)}}else T=="mouseover"?_=h.fromElement:T=="mouseout"&&(_=h.toElement);this.relatedTarget=_,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:pt[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&mt.aa.h.call(this)}}M(mt,rt);var pt={2:"touch",3:"pen",4:"mouse"};mt.prototype.h=function(){mt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var It="closure_listenable_"+(1e6*Math.random()|0),At=0;function kt(h,_,T,C,Q){this.listener=h,this.proxy=null,this.src=_,this.type=T,this.capture=!!C,this.ha=Q,this.key=++At,this.da=this.fa=!1}function Pt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ue(h){this.src=h,this.g={},this.h=0}ue.prototype.add=function(h,_,T,C,Q){var ot=h.toString();h=this.g[ot],h||(h=this.g[ot]=[],this.h++);var yt=ve(h,_,C,Q);return-1<yt?(_=h[yt],T||(_.fa=!1)):(_=new kt(_,this.src,ot,!!C,Q),_.fa=T,h.push(_)),_};function ce(h,_){var T=_.type;if(T in h.g){var C=h.g[T],Q=Array.prototype.indexOf.call(C,_,void 0),ot;(ot=0<=Q)&&Array.prototype.splice.call(C,Q,1),ot&&(Pt(_),h.g[T].length==0&&(delete h.g[T],h.h--))}}function ve(h,_,T,C){for(var Q=0;Q<h.length;++Q){var ot=h[Q];if(!ot.da&&ot.listener==_&&ot.capture==!!T&&ot.ha==C)return Q}return-1}var ye="closure_lm_"+(1e6*Math.random()|0),he={};function Xe(h,_,T,C,Q){if(Array.isArray(_)){for(var ot=0;ot<_.length;ot++)Xe(h,_[ot],T,C,Q);return null}return T=wi(T),h&&h[It]?h.K(_,T,m(C)?!!C.capture:!1,Q):Lt(h,_,T,!1,C,Q)}function Lt(h,_,T,C,Q,ot){if(!_)throw Error("Invalid event type");var yt=m(Q)?!!Q.capture:!!Q,Kt=zn(h);if(Kt||(h[ye]=Kt=new ue(h)),T=Kt.add(_,T,C,yt,ot),T.proxy)return T;if(C=wt(),T.proxy=C,C.src=h,C.listener=T,h.addEventListener)ct||(Q=yt),Q===void 0&&(Q=!1),h.addEventListener(_.toString(),C,Q);else if(h.attachEvent)h.attachEvent(Un(_.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return T}function wt(){function h(T){return _.call(h.src,h.listener,T)}const _=Li;return h}function xe(h,_,T,C,Q){if(Array.isArray(_))for(var ot=0;ot<_.length;ot++)xe(h,_[ot],T,C,Q);else C=m(C)?!!C.capture:!!C,T=wi(T),h&&h[It]?(h=h.i,_=String(_).toString(),_ in h.g&&(ot=h.g[_],T=ve(ot,T,C,Q),-1<T&&(Pt(ot[T]),Array.prototype.splice.call(ot,T,1),ot.length==0&&(delete h.g[_],h.h--)))):h&&(h=zn(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ve(_,T,C,Q)),(T=-1<h?_[h]:null)&&pn(T))}function pn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[It])ce(_.i,h);else{var T=h.type,C=h.proxy;_.removeEventListener?_.removeEventListener(T,C,h.capture):_.detachEvent?_.detachEvent(Un(T),C):_.addListener&&_.removeListener&&_.removeListener(C),(T=zn(_))?(ce(T,h),T.h==0&&(T.src=null,_[ye]=null)):Pt(h)}}}function Un(h){return h in he?he[h]:he[h]="on"+h}function Li(h,_){if(h.da)h=!0;else{_=new mt(_,this);var T=h.listener,C=h.ha||h.src;h.fa&&pn(h),h=T.call(C,_)}return h}function zn(h){return h=h[ye],h instanceof ue?h:null}var Sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function wi(h){return typeof h=="function"?h:(h[Sn]||(h[Sn]=function(_){return h.handleEvent(_)}),h[Sn])}function te(){W.call(this),this.i=new ue(this),this.M=this,this.F=null}M(te,W),te.prototype[It]=!0,te.prototype.removeEventListener=function(h,_,T,C){xe(this,h,_,T,C)};function Ft(h,_){var T,C=h.F;if(C)for(T=[];C;C=C.F)T.push(C);if(h=h.M,C=_.type||_,typeof _=="string")_=new rt(_,h);else if(_ instanceof rt)_.target=_.target||h;else{var Q=_;_=new rt(C,h),P(_,Q)}if(Q=!0,T)for(var ot=T.length-1;0<=ot;ot--){var yt=_.g=T[ot];Q=Ve(yt,C,!0,_)&&Q}if(yt=_.g=h,Q=Ve(yt,C,!0,_)&&Q,Q=Ve(yt,C,!1,_)&&Q,T)for(ot=0;ot<T.length;ot++)yt=_.g=T[ot],Q=Ve(yt,C,!1,_)&&Q}te.prototype.N=function(){if(te.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var T=h.g[_],C=0;C<T.length;C++)Pt(T[C]);delete h.g[_],h.h--}}this.F=null},te.prototype.K=function(h,_,T,C){return this.i.add(String(h),_,!1,T,C)},te.prototype.L=function(h,_,T,C){return this.i.add(String(h),_,!0,T,C)};function Ve(h,_,T,C){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var Q=!0,ot=0;ot<_.length;++ot){var yt=_[ot];if(yt&&!yt.da&&yt.capture==T){var Kt=yt.listener,qe=yt.ha||yt.src;yt.fa&&ce(h.i,yt),Q=Kt.call(qe,C)!==!1&&Q}}return Q&&!C.defaultPrevented}function Ee(h,_,T){if(typeof h=="function")T&&(h=E(h,T));else if(h&&typeof h.handleEvent=="function")h=E(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Ui(h){h.g=Ee(()=>{h.g=null,h.i&&(h.i=!1,Ui(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class ke extends W{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ui(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qe(h){W.call(this),this.h=h,this.g={}}M(Qe,W);var bn=[];function An(h){et(h.g,function(_,T){this.g.hasOwnProperty(T)&&pn(_)},h),h.g={}}Qe.prototype.N=function(){Qe.aa.N.call(this),An(this)},Qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ze=d.JSON.stringify,an=d.JSON.parse,Rn=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function fr(){}fr.prototype.h=null;function dr(h){return h.h||(h.h=h.i())}function Si(){}var Bn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ei(){rt.call(this,"d")}M(ei,rt);function Hn(){rt.call(this,"c")}M(Hn,rt);var ni={},Qs=null;function zi(){return Qs=Qs||new te}ni.La="serverreachability";function Qr(h){rt.call(this,ni.La,h)}M(Qr,rt);function Bi(h){const _=zi();Ft(_,new Qr(_))}ni.STAT_EVENT="statevent";function Ka(h,_){rt.call(this,ni.STAT_EVENT,h),this.stat=_}M(Ka,rt);function de(h){const _=zi();Ft(_,new Ka(_,h))}ni.Ma="timingevent";function Ne(h,_){rt.call(this,ni.Ma,h),this.size=_}M(Ne,rt);function be(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function Nn(){this.g=!0}Nn.prototype.xa=function(){this.g=!1};function Zs(h,_,T,C,Q,ot){h.info(function(){if(h.g)if(ot)for(var yt="",Kt=ot.split("&"),qe=0;qe<Kt.length;qe++){var Xt=Kt[qe].split("=");if(1<Xt.length){var Je=Xt[0];Xt=Xt[1];var Fe=Je.split("_");yt=2<=Fe.length&&Fe[1]=="type"?yt+(Je+"="+Xt+"&"):yt+(Je+"=redacted&")}}else yt=null;else yt=ot;return"XMLHTTP REQ ("+C+") [attempt "+Q+"]: "+_+`
`+T+`
`+yt})}function Tl(h,_,T,C,Q,ot,yt){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+Q+"]: "+_+`
`+T+`
`+ot+" "+yt})}function Hi(h,_,T,C){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+gr(h,T)+(C?" "+C:"")})}function Xa(h,_){h.info(function(){return"TIMEOUT: "+_})}Nn.prototype.info=function(){};function gr(h,_){if(!h.g)return _;if(!_)return null;try{var T=JSON.parse(_);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var C=T[h];if(!(2>C.length)){var Q=C[1];if(Array.isArray(Q)&&!(1>Q.length)){var ot=Q[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var yt=1;yt<Q.length;yt++)Q[yt]=""}}}}return Ze(T)}catch{return _}}var qi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ii={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ri;function si(){}M(si,fr),si.prototype.g=function(){return new XMLHttpRequest},si.prototype.i=function(){return{}},ri=new si;function on(h,_,T,C){this.j=h,this.i=_,this.l=T,this.R=C||1,this.U=new Qe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Te}function Te(){this.i=null,this.g="",this.h=!1}var Ws={},Zr={};function qn(h,_,T){h.L=1,h.v=na(Fn(_)),h.m=T,h.P=!0,bi(h,null)}function bi(h,_){h.F=Date.now(),mr(h),h.A=Fn(h.v);var T=h.A,C=h.R;Array.isArray(C)||(C=[String(C)]),Il(T.i,"t",C),h.C=0,T=h.j.J,h.h=new Te,h.g=kc(h.j,T?_:null,!h.m),0<h.O&&(h.M=new ke(E(h.Y,h,h.g),h.O)),_=h.U,T=h.g,C=h.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(bn[0]=Q.toString()),Q=bn);for(var ot=0;ot<Q.length;ot++){var yt=Xe(T,Q[ot],C||_.handleEvent,!1,_.h||_);if(!yt)break;_.g[yt.key]=yt}_=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Bi(),Zs(h.i,h.u,h.A,h.l,h.R,h.m)}on.prototype.ca=function(h){h=h.target;const _=this.M;_&&ci(h)==3?_.j():this.Y(h)},on.prototype.Y=function(h){try{if(h==this.g)t:{const Fe=ci(this.g);var _=this.g.Ba();const wr=this.g.Z();if(!(3>Fe)&&(Fe!=3||this.g&&(this.h.h||this.g.oa()||Ic(this.g)))){this.J||Fe!=4||_==7||(_==8||0>=wr?Bi(3):Bi(2)),Fi(this);var T=this.g.Z();this.X=T;e:if(Js(this)){var C=Ic(this.g);h="";var Q=C.length,ot=ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){He(this),ai(this);var yt="";break e}this.h.i=new d.TextDecoder}for(_=0;_<Q;_++)this.h.h=!0,h+=this.h.i.decode(C[_],{stream:!(ot&&_==Q-1)});C.length=0,this.h.g+=h,this.C=0,yt=this.h.g}else yt=this.g.oa();if(this.o=T==200,Tl(this.i,this.u,this.A,this.l,this.R,Fe,T),this.o){if(this.T&&!this.K){e:{if(this.g){var Kt,qe=this.g;if((Kt=qe.g?qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Kt)){var Xt=Kt;break e}}Xt=null}if(T=Xt)Hi(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ji(this,T);else{this.o=!1,this.s=3,de(12),He(this),ai(this);break t}}if(this.P){T=!0;let ln;for(;!this.J&&this.C<yt.length;)if(ln=Qa(this,yt),ln==Zr){Fe==4&&(this.s=4,de(14),T=!1),Hi(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==Ws){this.s=4,de(15),Hi(this.i,this.l,yt,"[Invalid Chunk]"),T=!1;break}else Hi(this.i,this.l,ln,null),ji(this,ln);if(Js(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||yt.length!=0||this.h.h||(this.s=1,de(16),T=!1),this.o=this.o&&T,!T)Hi(this.i,this.l,yt,"[Invalid Chunked Response]"),He(this),ai(this);else if(0<yt.length&&!this.W){this.W=!0;var Je=this.j;Je.g==this&&Je.ba&&!Je.M&&(Je.j.info("Great, no buffering proxy detected. Bytes received: "+yt.length),ca(Je),Je.M=!0,de(11))}}else Hi(this.i,this.l,yt,null),ji(this,yt);Fe==4&&He(this),this.o&&!this.J&&(Fe==4?Oc(this.j,this):(this.o=!1,mr(this)))}else Rd(this.g),T==400&&0<yt.indexOf("Unknown SID")?(this.s=3,de(12)):(this.s=0,de(13)),He(this),ai(this)}}}catch{}finally{}};function Js(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Qa(h,_){var T=h.C,C=_.indexOf(`
`,T);return C==-1?Zr:(T=Number(_.substring(T,C)),isNaN(T)?Ws:(C+=1,C+T>_.length?Zr:(_=_.slice(C,C+T),h.C=C+T,_)))}on.prototype.cancel=function(){this.J=!0,He(this)};function mr(h){h.S=Date.now()+h.I,Za(h,h.I)}function Za(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=be(E(h.ba,h),_)}function Fi(h){h.B&&(d.clearTimeout(h.B),h.B=null)}on.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Xa(this.i,this.A),this.L!=2&&(Bi(),de(17)),He(this),this.s=2,ai(this)):Za(this,this.S-h)};function ai(h){h.j.G==0||h.J||Oc(h.j,h)}function He(h){Fi(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,An(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function ji(h,_){try{var T=h.j;if(T.G!=0&&(T.g==h||wl(T.h,h))){if(!h.K&&wl(T.h,h)&&T.G==3){try{var C=T.Da.g.parse(_)}catch{C=null}if(Array.isArray(C)&&C.length==3){var Q=C;if(Q[0]==0){t:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)lo(T),ao(T);else break t;Ol(T),de(18)}}else T.za=Q[1],0<T.za-T.T&&37500>Q[2]&&T.F&&T.v==0&&!T.C&&(T.C=be(E(T.Za,T),6e3));if(1>=Gi(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Tr(T,11)}else if((h.K||T.g==h)&&lo(T),!F(_))for(Q=T.Da.g.parse(_),_=0;_<Q.length;_++){let Xt=Q[_];if(T.T=Xt[0],Xt=Xt[1],T.G==2)if(Xt[0]=="c"){T.K=Xt[1],T.ia=Xt[2];const Je=Xt[3];Je!=null&&(T.la=Je,T.j.info("VER="+T.la));const Fe=Xt[4];Fe!=null&&(T.Aa=Fe,T.j.info("SVER="+T.Aa));const wr=Xt[5];wr!=null&&typeof wr=="number"&&0<wr&&(C=1.5*wr,T.L=C,T.j.info("backChannelRequestTimeoutMs_="+C)),C=T;const ln=h.g;if(ln){const Wi=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wi){var ot=C.h;ot.g||Wi.indexOf("spdy")==-1&&Wi.indexOf("quic")==-1&&Wi.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(Ja(ot,ot.h),ot.h=null))}if(C.D){const Vl=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Vl&&(C.ya=Vl,se(C.I,C.D,Vl))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),C=T;var yt=h;if(C.qa=Vc(C,C.J?C.ia:null,C.W),yt.K){In(C.h,yt);var Kt=yt,qe=C.L;qe&&(Kt.I=qe),Kt.B&&(Fi(Kt),mr(Kt)),C.g=yt}else Nc(C);0<T.i.length&&oo(T)}else Xt[0]!="stop"&&Xt[0]!="close"||Tr(T,7);else T.G==3&&(Xt[0]=="stop"||Xt[0]=="close"?Xt[0]=="stop"?Tr(T,7):Nl(T):Xt[0]!="noop"&&T.l&&T.l.ta(Xt),T.v=0)}}Bi(4)}catch{}}var Wa=class{constructor(h,_){this.g=h,this.map=_}};function Ai(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Gi(h){return h.h?1:h.g?h.g.size:0}function wl(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Ja(h,_){h.g?h.g.add(_):h.h=_}function In(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Ai.prototype.cancel=function(){if(this.i=Sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Sl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const T of h.g.values())_=_.concat(T.D);return _}return L(h.i)}function wd(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var _=[],T=h.length,C=0;C<T;C++)_.push(h[C]);return _}_=[],T=0;for(C in h)_[T++]=h[C];return _}function to(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var _=[];h=h.length;for(var T=0;T<h;T++)_.push(T);return _}_=[],T=0;for(const C in h)_[T++]=C;return _}}}function bl(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var T=to(h),C=wd(h),Q=C.length,ot=0;ot<Q;ot++)_.call(void 0,C[ot],T&&T[ot],h)}var ta=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sd(h,_){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var C=h[T].indexOf("="),Q=null;if(0<=C){var ot=h[T].substring(0,C);Q=h[T].substring(C+1)}else ot=h[T];_(ot,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Pe(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Pe){this.h=h.h,ea(this,h.j),this.o=h.o,this.g=h.g,Jr(this,h.s),this.l=h.l;var _=h.i,T=new yr;T.i=_.i,_.g&&(T.g=new Map(_.g),T.h=_.h),pr(this,T),this.m=h.m}else h&&(_=String(h).match(ta))?(this.h=!1,ea(this,_[1]||"",!0),this.o=oi(_[2]||""),this.g=oi(_[3]||"",!0),Jr(this,_[4]),this.l=oi(_[5]||"",!0),pr(this,_[6]||"",!0),this.m=oi(_[7]||"")):(this.h=!1,this.i=new yr(null,this.h))}Pe.prototype.toString=function(){var h=[],_=this.j;_&&h.push(ia(_,Al,!0),":");var T=this.g;return(T||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ia(_,Al,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(ia(T,T.charAt(0)=="/"?bd:Rl,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",ia(T,eo)),h.join("")};function Fn(h){return new Pe(h)}function ea(h,_,T){h.j=T?oi(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Jr(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function pr(h,_,T){_ instanceof yr?(h.i=_,Ac(h.i,h.h)):(T||(_=ia(_,Ad)),h.i=new yr(_,h.h))}function se(h,_,T){h.i.set(_,T)}function na(h){return se(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function oi(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ia(h,_,T){return typeof h=="string"?(h=encodeURI(h).replace(_,bc),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function bc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Al=/[#\/\?@]/g,Rl=/[#\?:]/g,bd=/[#\?]/g,Ad=/[#\?@]/g,eo=/#/g;function yr(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function li(h){h.g||(h.g=new Map,h.h=0,h.i&&Sd(h.i,function(_,T){h.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}e=yr.prototype,e.add=function(h,_){li(this),this.i=null,h=$i(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(_),this.h+=1,this};function _r(h,_){li(h),_=$i(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function vr(h,_){return li(h),_=$i(h,_),h.g.has(_)}e.forEach=function(h,_){li(this),this.g.forEach(function(T,C){T.forEach(function(Q){h.call(_,Q,C,this)},this)},this)},e.na=function(){li(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),T=[];for(let C=0;C<_.length;C++){const Q=h[C];for(let ot=0;ot<Q.length;ot++)T.push(_[C])}return T},e.V=function(h){li(this);let _=[];if(typeof h=="string")vr(this,h)&&(_=_.concat(this.g.get($i(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)_=_.concat(h[T])}return _},e.set=function(h,_){return li(this),this.i=null,h=$i(this,h),vr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},e.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Il(h,_,T){_r(h,_),0<T.length&&(h.i=null,h.g.set($i(h,_),L(T)),h.h+=T.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var T=0;T<_.length;T++){var C=_[T];const ot=encodeURIComponent(String(C)),yt=this.V(C);for(C=0;C<yt.length;C++){var Q=ot;yt[C]!==""&&(Q+="="+encodeURIComponent(String(yt[C]))),h.push(Q)}}return this.i=h.join("&")};function $i(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Ac(h,_){_&&!h.j&&(li(h),h.i=null,h.g.forEach(function(T,C){var Q=C.toLowerCase();C!=Q&&(_r(this,C),Il(this,Q,T))},h)),h.j=_}function ra(h,_){const T=new Nn;if(d.Image){const C=new Image;C.onload=S(ui,T,"TestLoadImage: loaded",!0,_,C),C.onerror=S(ui,T,"TestLoadImage: error",!1,_,C),C.onabort=S(ui,T,"TestLoadImage: abort",!1,_,C),C.ontimeout=S(ui,T,"TestLoadImage: timeout",!1,_,C),d.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else _(!1)}function Ri(h,_){const T=new Nn,C=new AbortController,Q=setTimeout(()=>{C.abort(),ui(T,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:C.signal}).then(ot=>{clearTimeout(Q),ot.ok?ui(T,"TestPingServer: ok",!0,_):ui(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Q),ui(T,"TestPingServer: error",!1,_)})}function ui(h,_,T,C,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),C(T)}catch{}}function sa(){this.g=new Rn}function Yi(h,_,T){const C=T||"";try{bl(h,function(Q,ot){let yt=Q;m(Q)&&(yt=Ze(Q)),_.push(C+ot+"="+encodeURIComponent(yt))})}catch(Q){throw _.push(C+"type="+encodeURIComponent("_badmap")),Q}}function ts(h){this.l=h.Ub||null,this.j=h.eb||!1}M(ts,fr),ts.prototype.g=function(){return new Er(this.l,this.j)},ts.prototype.i=function(h){return function(){return h}}({});function Er(h,_){te.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Er,te),e=Er.prototype,e.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Xi(this)},e.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ki(this)),this.readyState=0},e.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Xi(this)),this.g&&(this.readyState=3,Xi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}e.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Ki(this):Xi(this),this.readyState==3&&Cl(this)}},e.Ra=function(h){this.g&&(this.response=this.responseText=h,Ki(this))},e.Qa=function(h){this.g&&(this.response=h,Ki(this))},e.ga=function(){this.g&&Ki(this)};function Ki(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Xi(h)}e.setRequestHeader=function(h,_){this.u.append(h,_)},e.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=_.next();return h.join(`\r
`)};function Xi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Er.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function xl(h){let _="";return et(h,function(T,C){_+=C,_+=":",_+=T,_+=`\r
`}),_}function We(h,_,T){t:{for(C in T){var C=!1;break t}C=!0}C||(T=xl(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):se(h,_,T))}function ee(h){te.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(ee,te);var no=/^https?$/i,aa=["POST","PUT"];e=ee.prototype,e.Ha=function(h){this.J=h},e.ea=function(h,_,T,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ri.g(),this.v=this.o?dr(this.o):dr(ri),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ot){Rc(this,ot);return}if(h=T||"",T=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var Q in C)T.set(Q,C[Q]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const ot of C.keys())T.set(ot,C.get(ot));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(T.keys()).find(ot=>ot.toLowerCase()=="content-type"),Q=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(aa,_,void 0))||C||Q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,yt]of T)this.g.setRequestHeader(ot,yt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oa(this),this.u=!0,this.g.send(h),this.u=!1}catch(ot){Rc(this,ot)}};function Rc(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,io(h),Qi(h)}function io(h){h.A||(h.A=!0,Ft(h,"complete"),Ft(h,"error"))}e.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ft(this,"complete"),Ft(this,"abort"),Qi(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qi(this,!0)),ee.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?ro(this):this.bb())},e.bb=function(){ro(this)};function ro(h){if(h.h&&typeof c<"u"&&(!h.v[1]||ci(h)!=4||h.Z()!=2)){if(h.u&&ci(h)==4)Ee(h.Ea,0,h);else if(Ft(h,"readystatechange"),ci(h)==4){h.h=!1;try{const yt=h.Z();t:switch(yt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var T;if(!(T=_)){var C;if(C=yt===0){var Q=String(h.D).match(ta)[1]||null;!Q&&d.self&&d.self.location&&(Q=d.self.location.protocol.slice(0,-1)),C=!no.test(Q?Q.toLowerCase():"")}T=C}if(T)Ft(h,"complete"),Ft(h,"success");else{h.m=6;try{var ot=2<ci(h)?h.g.statusText:""}catch{ot=""}h.l=ot+" ["+h.Z()+"]",io(h)}}finally{Qi(h)}}}}function Qi(h,_){if(h.g){oa(h);const T=h.g,C=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ft(h,"ready");try{T.onreadystatechange=C}catch{}}}function oa(h){h.I&&(d.clearTimeout(h.I),h.I=null)}e.isActive=function(){return!!this.g};function ci(h){return h.g?h.g.readyState:0}e.Z=function(){try{return 2<ci(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),an(_)}};function Ic(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Rd(h){const _={};h=(h.g&&2<=ci(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(F(h[C]))continue;var T=N(h[C]);const Q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ot=_[Q]||[];_[Q]=ot,ot.push(T)}D(_,function(C){return C.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function la(h,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||_}function so(h){this.Aa=0,this.i=[],this.j=new Nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=la("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=la("baseRetryDelayMs",5e3,h),this.cb=la("retryDelaySeedMs",1e4,h),this.Wa=la("forwardChannelMaxRetries",2,h),this.wa=la("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ai(h&&h.concurrentRequestLimit),this.Da=new sa,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=so.prototype,e.la=8,e.G=1,e.connect=function(h,_,T,C){de(0),this.W=h,this.H=_||{},T&&C!==void 0&&(this.H.OSID=T,this.H.OAID=C),this.F=this.X,this.I=Vc(this,null,this.W),oo(this)};function Nl(h){if(Cc(h),h.G==3){var _=h.U++,T=Fn(h.I);if(se(T,"SID",h.K),se(T,"RID",_),se(T,"TYPE","terminate"),ua(h,T),_=new on(h,h.j,_),_.L=2,_.v=na(Fn(T)),T=!1,d.navigator&&d.navigator.sendBeacon)try{T=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!T&&d.Image&&(new Image().src=_.v,T=!0),T||(_.g=kc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),mr(_)}Mc(h)}function ao(h){h.g&&(ca(h),h.g.cancel(),h.g=null)}function Cc(h){ao(h),h.u&&(d.clearTimeout(h.u),h.u=null),lo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function oo(h){if(!Wr(h.h)&&!h.s){h.s=!0;var _=h.Ga;$||x(),at||($(),at=!0),Y.add(_,h),h.B=0}}function Id(h,_){return Gi(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=be(E(h.Ga,h,_),Ml(h,h.B)),h.B++,!0)}e.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const Q=new on(this,this.j,h);let ot=this.o;if(this.S&&(ot?(ot=R(ot),P(ot,this.S)):ot=this.S),this.m!==null||this.O||(Q.H=ot,ot=null),this.P)t:{for(var _=0,T=0;T<this.i.length;T++){e:{var C=this.i[T];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break e}C=void 0}if(C===void 0)break;if(_+=C,4096<_){_=T;break t}if(_===4096||T===this.i.length-1){_=T+1;break t}}_=1e3}else _=1e3;_=xc(this,Q,_),T=Fn(this.I),se(T,"RID",h),se(T,"CVER",22),this.D&&se(T,"X-HTTP-Session-Id",this.D),ua(this,T),ot&&(this.O?_="headers="+encodeURIComponent(String(xl(ot)))+"&"+_:this.m&&We(T,this.m,ot)),Ja(this.h,Q),this.Ua&&se(T,"TYPE","init"),this.P?(se(T,"$req",_),se(T,"SID","null"),Q.T=!0,qn(Q,T,null)):qn(Q,T,_),this.G=2}}else this.G==3&&(h?Dl(this,h):this.i.length==0||Wr(this.h)||Dl(this))};function Dl(h,_){var T;_?T=_.l:T=h.U++;const C=Fn(h.I);se(C,"SID",h.K),se(C,"RID",T),se(C,"AID",h.T),ua(h,C),h.m&&h.o&&We(C,h.m,h.o),T=new on(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),_&&(h.i=_.D.concat(h.i)),_=xc(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ja(h.h,T),qn(T,C,_)}function ua(h,_){h.H&&et(h.H,function(T,C){se(_,C,T)}),h.l&&bl({},function(T,C){se(_,C,T)})}function xc(h,_,T){T=Math.min(h.i.length,T);var C=h.l?E(h.l.Na,h.l,h):null;t:{var Q=h.i;let ot=-1;for(;;){const yt=["count="+T];ot==-1?0<T?(ot=Q[0].g,yt.push("ofs="+ot)):ot=0:yt.push("ofs="+ot);let Kt=!0;for(let qe=0;qe<T;qe++){let Xt=Q[qe].g;const Je=Q[qe].map;if(Xt-=ot,0>Xt)ot=Math.max(0,Q[qe].g-100),Kt=!1;else try{Yi(Je,yt,"req"+Xt+"_")}catch{C&&C(Je)}}if(Kt){C=yt.join("&");break t}}}return h=h.i.splice(0,T),_.D=h,C}function Nc(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;$||x(),at||($(),at=!0),Y.add(_,h),h.v=0}}function Ol(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=be(E(h.Fa,h),Ml(h,h.v)),h.v++,!0)}e.Fa=function(){if(this.u=null,Dc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=be(E(this.ab,this),h)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,de(10),ao(this),Dc(this))};function ca(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Dc(h){h.g=new on(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Fn(h.qa);se(_,"RID","rpc"),se(_,"SID",h.K),se(_,"AID",h.T),se(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&se(_,"TO",h.ja),se(_,"TYPE","xmlhttp"),ua(h,_),h.m&&h.o&&We(_,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=na(Fn(_)),T.m=null,T.P=!0,bi(T,h)}e.Za=function(){this.C!=null&&(this.C=null,ao(this),Ol(this),de(19))};function lo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Oc(h,_){var T=null;if(h.g==_){lo(h),ca(h),h.g=null;var C=2}else if(wl(h.h,_))T=_.D,In(h.h,_),C=1;else return;if(h.G!=0){if(_.o)if(C==1){T=_.m?_.m.length:0,_=Date.now()-_.F;var Q=h.B;C=zi(),Ft(C,new Ne(C,T)),oo(h)}else Nc(h);else if(Q=_.s,Q==3||Q==0&&0<_.X||!(C==1&&Id(h,_)||C==2&&Ol(h)))switch(T&&0<T.length&&(_=h.h,_.i=_.i.concat(T)),Q){case 1:Tr(h,5);break;case 4:Tr(h,10);break;case 3:Tr(h,6);break;default:Tr(h,2)}}}function Ml(h,_){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*_}function Tr(h,_){if(h.j.info("Error code "+_),_==2){var T=E(h.fb,h),C=h.Xa;const Q=!C;C=new Pe(C||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ea(C,"https"),na(C),Q?ra(C.toString(),T):Ri(C.toString(),T)}else de(2);h.G=0,h.l&&h.l.sa(_),Mc(h),Cc(h)}e.fb=function(h){h?(this.j.info("Successfully pinged google.com"),de(2)):(this.j.info("Failed to ping google.com"),de(1))};function Mc(h){if(h.G=0,h.ka=[],h.l){const _=Sl(h.h);(_.length!=0||h.i.length!=0)&&(V(h.ka,_),V(h.ka,h.i),h.h.i.length=0,L(h.i),h.i.length=0),h.l.ra()}}function Vc(h,_,T){var C=T instanceof Pe?Fn(T):new Pe(T);if(C.g!="")_&&(C.g=_+"."+C.g),Jr(C,C.s);else{var Q=d.location;C=Q.protocol,_=_?_+"."+Q.hostname:Q.hostname,Q=+Q.port;var ot=new Pe(null);C&&ea(ot,C),_&&(ot.g=_),Q&&Jr(ot,Q),T&&(ot.l=T),C=ot}return T=h.D,_=h.ya,T&&_&&se(C,T,_),se(C,"VER",h.la),ua(h,C),C}function kc(h,_,T){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new ee(new ts({eb:T})):new ee(h.pa),_.Ha(h.J),_}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pc(){}e=Pc.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function uo(){}uo.prototype.g=function(h,_){return new Cn(h,_)};function Cn(h,_){te.call(this),this.g=new so(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!F(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!F(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Zi(this)}M(Cn,te),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){Nl(this.g)},Cn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=Ze(h),h=T);_.i.push(new Wa(_.Ya++,h)),_.G==3&&oo(_)},Cn.prototype.N=function(){this.g.l=null,delete this.j,Nl(this.g),delete this.g,Cn.aa.N.call(this)};function Lc(h){ei.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){t:{for(const T in _){h=T;break t}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}M(Lc,ei);function Uc(){Hn.call(this),this.status=1}M(Uc,Hn);function Zi(h){this.g=h}M(Zi,Pc),Zi.prototype.ua=function(){Ft(this.g,"a")},Zi.prototype.ta=function(h){Ft(this.g,new Lc(h))},Zi.prototype.sa=function(h){Ft(this.g,new Uc)},Zi.prototype.ra=function(){Ft(this.g,"b")},uo.prototype.createWebChannel=uo.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,V1=function(){return new uo},M1=function(){return zi()},O1=ni,yp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qi.NO_ERROR=0,qi.TIMEOUT=8,qi.HTTP_ERROR=6,of=qi,ii.COMPLETE="complete",D1=ii,Si.EventType=Bn,Bn.OPEN="a",Bn.CLOSE="b",Bn.ERROR="c",Bn.MESSAGE="d",te.prototype.listen=te.prototype.K,Ou=Si,ee.prototype.listenOnce=ee.prototype.L,ee.prototype.getLastError=ee.prototype.Ka,ee.prototype.getLastErrorCode=ee.prototype.Ba,ee.prototype.getStatus=ee.prototype.Z,ee.prototype.getResponseJson=ee.prototype.Oa,ee.prototype.getResponseText=ee.prototype.oa,ee.prototype.send=ee.prototype.ea,ee.prototype.setWithCredentials=ee.prototype.Ha,N1=ee}).apply(typeof Kh<"u"?Kh:typeof self<"u"?self:typeof window<"u"?window:{});const ET="@firebase/firestore",TT="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ml="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=new ny("@firebase/firestore");function Fo(){return Ua.logLevel}function vt(e,...t){if(Ua.logLevel<=$t.DEBUG){const n=t.map(sy);Ua.debug(`Firestore (${ml}): ${e}`,...n)}}function Gr(e,...t){if(Ua.logLevel<=$t.ERROR){const n=t.map(sy);Ua.error(`Firestore (${ml}): ${e}`,...n)}}function al(e,...t){if(Ua.logLevel<=$t.WARN){const n=t.map(sy);Ua.warn(`Firestore (${ml}): ${e}`,...n)}}function sy(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,k1(e,r,n)}function k1(e,t,n){let r=`FIRESTORE (${ml}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Gr(r),new Error(r)}function ne(e,t,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,e||k1(t,a,r)}function Vt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends Xr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class oV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(En.UNAUTHENTICATED))}shutdown(){}}class lV{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uV{constructor(t){this.t=t,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ne(this.o===void 0,42304);let r=this.i;const a=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let l=new Ls;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ls,t.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const g=l;t.enqueueRetryable(async()=>{await g.promise,await a(this.currentUser)})},d=g=>{vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(g=>d(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ls)}},0),c()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne(typeof r.accessToken=="string",31837,{l:r}),new P1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ne(t===null||typeof t=="string",2055,{h:t}),new En(t)}}class cV{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hV{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new cV(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fV{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vi(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ne(this.o===void 0,3512);const r=l=>{l.error!=null&&vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,vt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>r(l))};const a=l=>{vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new wT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new wT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=dV(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<n&&(r+=t.charAt(a[l]%62))}return r}}function Bt(e,t){return e<t?-1:e>t?1:0}function _p(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),a=t.codePointAt(n);if(r!==a){if(r<128&&a<128)return Bt(r,a);{const l=L1(),c=gV(l.encode(ST(e,n)),l.encode(ST(t,n)));return c!==0?c:Bt(r,a)}}n+=r>65535?2:1}return Bt(e.length,t.length)}function ST(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function gV(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Bt(e[n],t[n]);return Bt(e.length,t.length)}function ol(e,t,n){return e.length===t.length&&e.every((r,a)=>n(r,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=-62135596800,AT=1e6;class Ce{static now(){return Ce.fromMillis(Date.now())}static fromDate(t){return Ce.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*AT);return new Ce(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Et(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Et(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<bT)throw new Et(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Et(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/AT}_compareTo(t){return this.seconds===t.seconds?Bt(this.nanoseconds,t.nanoseconds):Bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-bT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{static fromTimestamp(t){return new Mt(t)}static min(){return new Mt(new Ce(0,0))}static max(){return new Mt(new Ce(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="__name__";class rr{constructor(t,n,r){n===void 0?n=0:n>t.length&&Dt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&Dt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return rr.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof rr?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let a=0;a<r;a++){const l=rr.compareSegments(t.get(a),n.get(a));if(l!==0)return l}return Bt(t.length,n.length)}static compareSegments(t,n){const r=rr.isNumericId(t),a=rr.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?rr.extractNumericId(t).compare(rr.extractNumericId(n)):_p(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ps.fromString(t.substring(4,t.length-2))}}class pe extends rr{construct(t,n,r){return new pe(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Et(dt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(a=>a.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const mV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends rr{construct(t,n,r){return new dn(t,n,r)}static isValidIdentifier(t){return mV.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===RT}static keyField(){return new dn([RT])}static fromServerFormat(t){const n=[];let r="",a=0;const l=()=>{if(r.length===0)throw new Et(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;a<t.length;){const d=t[a];if(d==="\\"){if(a+1===t.length)throw new Et(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Et(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new Et(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new dn(n)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t){this.path=t}static fromPath(t){return new Rt(pe.fromString(t))}static fromName(t){return new Rt(pe.fromString(t).popFirst(5))}static empty(){return new Rt(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&pe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return pe.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Rt(new pe(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=-1;function pV(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=Mt.fromTimestamp(r===1e9?new Ce(n+1,0):new Ce(n,r));return new Bs(a,Rt.empty(),t)}function yV(e){return new Bs(e.readTime,e.key,Wu)}class Bs{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Bs(Mt.min(),Rt.empty(),Wu)}static max(){return new Bs(Mt.max(),Rt.empty(),Wu)}}function _V(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Rt.comparator(e.documentKey,t.documentKey),n!==0?n:Bt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(e){if(e.code!==dt.FAILED_PRECONDITION||e.message!==vV)throw e;vt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new gt((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,a)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof gt?n:gt.resolve(n)}catch(n){return gt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):gt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):gt.reject(n)}static resolve(t){return new gt((n,r)=>{n(t)})}static reject(t){return new gt((n,r)=>{r(t)})}static waitFor(t){return new gt((n,r)=>{let a=0,l=0,c=!1;t.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&n()},g=>r(g))}),c=!0,l===a&&n()})}static or(t){let n=gt.resolve(!1);for(const r of t)n=n.next(a=>a?gt.resolve(a):r());return n}static forEach(t,n){const r=[];return t.forEach((a,l)=>{r.push(n.call(this,a,l))}),this.waitFor(r)}static mapArray(t,n){return new gt((r,a)=>{const l=t.length,c=new Array(l);let d=0;for(let g=0;g<l;g++){const m=g;n(t[m]).next(y=>{c[m]=y,++d,d===l&&r(c)},y=>a(y))}})}static doWhile(t,n){return new gt((r,a)=>{const l=()=>{t()===!0?n().next(()=>{l()},a):r()};l()})}}function TV(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yl(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Jf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay=-1;function td(e){return e==null}function Cf(e){return e===0&&1/e==-1/0}function wV(e){return typeof e=="number"&&Number.isInteger(e)&&!Cf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="";function SV(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=IT(t)),t=bV(e.get(n),t);return IT(t)}function bV(e,t){let n=t;const r=e.length;for(let a=0;a<r;a++){const l=e.charAt(a);switch(l){case"\0":n+="";break;case z1:n+="";break;default:n+=l}}return n}function IT(e){return e+z1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $s(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function B1(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(t,n){this.comparator=t,this.root=n||fn.EMPTY}insert(t,n){return new Se(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(t){return new Se(this.comparator,this.root.remove(t,this.comparator).copy(null,null,fn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Xh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Xh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Xh(this.root,t,this.comparator,!0)}}class Xh{constructor(t,n,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=n?r(t.key,n):1,n&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class fn{constructor(t,n,r,a,l){this.key=t,this.value=n,this.color=r??fn.RED,this.left=a??fn.EMPTY,this.right=l??fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,a,l){return new fn(t??this.key,n??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let a=this;const l=r(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,n,r),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(t,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,a=this;if(n(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(t,a.key)===0){if(a.right.isEmpty())return fn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Dt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Dt(27949);return t+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt(57766)}get value(){throw Dt(16141)}get color(){throw Dt(16727)}get left(){throw Dt(29726)}get right(){throw Dt(36894)}copy(t,n,r,a,l){return this}insert(t,n,r){return new fn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.comparator=t,this.data=new Se(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,t[1])>=0)return;n(a.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new xT(this.data.getIterator())}getIteratorFrom(t){return new xT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof $e)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new $e(this.comparator);return n.data=t,n}}class xT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(t){this.fields=t,t.sort(dn.comparator)}static empty(){return new Zn([])}unionWith(t){let n=new $e(dn.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Zn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ol(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new H1("Invalid base64 string: "+l):l}}(t);return new gn(n)}static fromUint8Array(t){const n=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(t);return new gn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const AV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hs(e){if(ne(!!e,39018),typeof e=="string"){let t=0;const n=AV.exec(e);if(ne(!!n,46558,{timestamp:e}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),t=Number(a)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Me(e.seconds),nanos:Me(e.nanos)}}function Me(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function qs(e){return typeof e=="string"?gn.fromBase64String(e):gn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="server_timestamp",F1="__type__",j1="__previous_value__",G1="__local_write_time__";function oy(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[F1])===null||n===void 0?void 0:n.stringValue)===q1}function ed(e){const t=e.mapValue.fields[j1];return oy(t)?ed(t):t}function Ju(e){const t=Hs(e.mapValue.fields[G1].timestampValue);return new Ce(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(t,n,r,a,l,c,d,g,m,y){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=m,this.isUsingEmulator=y}}const xf="(default)";class tc{constructor(t,n){this.projectId=t,this.database=n||xf}static empty(){return new tc("","")}get isDefaultDatabase(){return this.database===xf}isEqual(t){return t instanceof tc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="__type__",IV="__max__",Qh={mapValue:{}},Y1="__vector__",Nf="value";function Fs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?oy(e)?4:xV(e)?9007199254740991:CV(e)?10:11:Dt(28295,{value:e})}function cr(e,t){if(e===t)return!0;const n=Fs(e);if(n!==Fs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ju(e).isEqual(Ju(t));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Hs(a.timestampValue),d=Hs(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,l){return qs(a.bytesValue).isEqual(qs(l.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,l){return Me(a.geoPointValue.latitude)===Me(l.geoPointValue.latitude)&&Me(a.geoPointValue.longitude)===Me(l.geoPointValue.longitude)}(e,t);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Me(a.integerValue)===Me(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Me(a.doubleValue),d=Me(l.doubleValue);return c===d?Cf(c)===Cf(d):isNaN(c)&&isNaN(d)}return!1}(e,t);case 9:return ol(e.arrayValue.values||[],t.arrayValue.values||[],cr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(CT(c)!==CT(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(d[g]===void 0||!cr(c[g],d[g])))return!1;return!0}(e,t);default:return Dt(52216,{left:e})}}function ec(e,t){return(e.values||[]).find(n=>cr(n,t))!==void 0}function ll(e,t){if(e===t)return 0;const n=Fs(e),r=Fs(t);if(n!==r)return Bt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Bt(e.booleanValue,t.booleanValue);case 2:return function(l,c){const d=Me(l.integerValue||l.doubleValue),g=Me(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(e,t);case 3:return NT(e.timestampValue,t.timestampValue);case 4:return NT(Ju(e),Ju(t));case 5:return _p(e.stringValue,t.stringValue);case 6:return function(l,c){const d=qs(l),g=qs(c);return d.compareTo(g)}(e.bytesValue,t.bytesValue);case 7:return function(l,c){const d=l.split("/"),g=c.split("/");for(let m=0;m<d.length&&m<g.length;m++){const y=Bt(d[m],g[m]);if(y!==0)return y}return Bt(d.length,g.length)}(e.referenceValue,t.referenceValue);case 8:return function(l,c){const d=Bt(Me(l.latitude),Me(c.latitude));return d!==0?d:Bt(Me(l.longitude),Me(c.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return DT(e.arrayValue,t.arrayValue);case 10:return function(l,c){var d,g,m,y;const v=l.fields||{},E=c.fields||{},S=(d=v[Nf])===null||d===void 0?void 0:d.arrayValue,M=(g=E[Nf])===null||g===void 0?void 0:g.arrayValue,L=Bt(((m=S?.values)===null||m===void 0?void 0:m.length)||0,((y=M?.values)===null||y===void 0?void 0:y.length)||0);return L!==0?L:DT(S,M)}(e.mapValue,t.mapValue);case 11:return function(l,c){if(l===Qh.mapValue&&c===Qh.mapValue)return 0;if(l===Qh.mapValue)return 1;if(c===Qh.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),m=c.fields||{},y=Object.keys(m);g.sort(),y.sort();for(let v=0;v<g.length&&v<y.length;++v){const E=_p(g[v],y[v]);if(E!==0)return E;const S=ll(d[g[v]],m[y[v]]);if(S!==0)return S}return Bt(g.length,y.length)}(e.mapValue,t.mapValue);default:throw Dt(23264,{Pe:n})}}function NT(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Bt(e,t);const n=Hs(e),r=Hs(t),a=Bt(n.seconds,r.seconds);return a!==0?a:Bt(n.nanos,r.nanos)}function DT(e,t){const n=e.values||[],r=t.values||[];for(let a=0;a<n.length&&a<r.length;++a){const l=ll(n[a],r[a]);if(l)return l}return Bt(n.length,r.length)}function ul(e){return vp(e)}function vp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Hs(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return qs(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Rt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",a=!0;for(const l of n.values||[])a?a=!1:r+=",",r+=vp(l);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${vp(n.fields[c])}`;return a+"}"}(e.mapValue):Dt(61005,{value:e})}function lf(e){switch(Fs(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ed(e);return t?16+lf(t):16;case 5:return 2*e.stringValue.length;case 6:return qs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+lf(l),0)}(e.arrayValue);case 10:case 11:return function(r){let a=0;return $s(r.fields,(l,c)=>{a+=l.length+lf(c)}),a}(e.mapValue);default:throw Dt(13486,{value:e})}}function OT(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ep(e){return!!e&&"integerValue"in e}function ly(e){return!!e&&"arrayValue"in e}function MT(e){return!!e&&"nullValue"in e}function VT(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function uf(e){return!!e&&"mapValue"in e}function CV(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[$1])===null||n===void 0?void 0:n.stringValue)===Y1}function Pu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return $s(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Pu(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Pu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function xV(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===IV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this.value=t}static empty(){return new Pn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!uf(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Pu(n)}setAll(t){let n=dn.emptyPath(),r={},a=[];t.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const g=this.getFieldsMap(n);this.applyChanges(g,r,a),r={},a=[],n=d.popLast()}c?r[d.lastSegment()]=Pu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,r,a)}delete(t){const n=this.field(t.popLast());uf(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return cr(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let a=n.mapValue.fields[t.get(r)];uf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(t,n,r){$s(n,(a,l)=>t[a]=l);for(const a of r)delete t[a]}clone(){return new Pn(Pu(this.value))}}function K1(e){const t=[];return $s(e.fields,(n,r)=>{const a=new dn([n]);if(uf(r)){const l=K1(r.mapValue).fields;if(l.length===0)t.push(a);else for(const c of l)t.push(a.child(c))}else t.push(a)}),new Zn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t,n,r,a,l,c,d){this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(t){return new Tn(t,0,Mt.min(),Mt.min(),Mt.min(),Pn.empty(),0)}static newFoundDocument(t,n,r,a){return new Tn(t,1,n,Mt.min(),r,a,0)}static newNoDocument(t,n){return new Tn(t,2,n,Mt.min(),Mt.min(),Pn.empty(),0)}static newUnknownDocument(t,n){return new Tn(t,3,n,Mt.min(),Mt.min(),Pn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Mt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Tn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(t,n){this.position=t,this.inclusive=n}}function kT(e,t,n){let r=0;for(let a=0;a<e.position.length;a++){const l=t[a],c=e.position[a];if(l.field.isKeyField()?r=Rt.comparator(Rt.fromName(c.referenceValue),n.key):r=ll(c,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function PT(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!cr(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(t,n="asc"){this.field=t,this.dir=n}}function NV(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{}class Be extends X1{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new OV(t,n,r):n==="array-contains"?new kV(t,r):n==="in"?new PV(t,r):n==="not-in"?new LV(t,r):n==="array-contains-any"?new UV(t,r):new Be(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new MV(t,r):new VV(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ll(n,this.value)):n!==null&&Fs(this.value)===Fs(n)&&this.matchesComparison(ll(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vi extends X1{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new Vi(t,n)}matches(t){return Q1(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Q1(e){return e.op==="and"}function Z1(e){return DV(e)&&Q1(e)}function DV(e){for(const t of e.filters)if(t instanceof Vi)return!1;return!0}function Tp(e){if(e instanceof Be)return e.field.canonicalString()+e.op.toString()+ul(e.value);if(Z1(e))return e.filters.map(t=>Tp(t)).join(",");{const t=e.filters.map(n=>Tp(n)).join(",");return`${e.op}(${t})`}}function W1(e,t){return e instanceof Be?function(r,a){return a instanceof Be&&r.op===a.op&&r.field.isEqual(a.field)&&cr(r.value,a.value)}(e,t):e instanceof Vi?function(r,a){return a instanceof Vi&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&W1(c,a.filters[d]),!0):!1}(e,t):void Dt(19439)}function J1(e){return e instanceof Be?function(n){return`${n.field.canonicalString()} ${n.op} ${ul(n.value)}`}(e):e instanceof Vi?function(n){return n.op.toString()+" {"+n.getFilters().map(J1).join(" ,")+"}"}(e):"Filter"}class OV extends Be{constructor(t,n,r){super(t,n,r),this.key=Rt.fromName(r.referenceValue)}matches(t){const n=Rt.comparator(t.key,this.key);return this.matchesComparison(n)}}class MV extends Be{constructor(t,n){super(t,"in",n),this.keys=tb("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class VV extends Be{constructor(t,n){super(t,"not-in",n),this.keys=tb("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function tb(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Rt.fromName(r.referenceValue))}class kV extends Be{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return ly(n)&&ec(n.arrayValue,this.value)}}class PV extends Be{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ec(this.value.arrayValue,n)}}class LV extends Be{constructor(t,n){super(t,"not-in",n)}matches(t){if(ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ec(this.value.arrayValue,n)}}class UV extends Be{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!ly(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ec(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(t,n=null,r=[],a=[],l=null,c=null,d=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function LT(e,t=null,n=[],r=[],a=null,l=null,c=null){return new zV(e,t,n,r,a,l,c)}function uy(e){const t=Vt(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Tp(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),td(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>ul(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>ul(r)).join(",")),t.Ie=n}return t.Ie}function cy(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!NV(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!W1(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!PT(e.startAt,t.startAt)&&PT(e.endAt,t.endAt)}function wp(e){return Rt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(t,n=null,r=[],a=[],l=null,c="F",d=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function BV(e,t,n,r,a,l,c,d){return new _l(e,t,n,r,a,l,c,d)}function eb(e){return new _l(e)}function UT(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function nb(e){return e.collectionGroup!==null}function Lu(e){const t=Vt(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const l of t.explicitOrderBy)t.Ee.push(l),n.add(l.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new $e(dn.comparator);return c.filters.forEach(g=>{g.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(t).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||t.Ee.push(new nc(l,r))}),n.has(dn.keyField().canonicalString())||t.Ee.push(new nc(dn.keyField(),r))}return t.Ee}function ar(e){const t=Vt(e);return t.de||(t.de=HV(t,Lu(e))),t.de}function HV(e,t){if(e.limitType==="F")return LT(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new nc(a.field,l)});const n=e.endAt?new Df(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Df(e.startAt.position,e.startAt.inclusive):null;return LT(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Sp(e,t){const n=e.filters.concat([t]);return new _l(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function bp(e,t,n){return new _l(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function nd(e,t){return cy(ar(e),ar(t))&&e.limitType===t.limitType}function ib(e){return`${uy(ar(e))}|lt:${e.limitType}`}function jo(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(a=>J1(a)).join(", ")}]`),td(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(a=>ul(a)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(a=>ul(a)).join(",")),`Target(${r})`}(ar(e))}; limitType=${e.limitType})`}function id(e,t){return t.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Rt.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(e,t)&&function(r,a){for(const l of Lu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(e,t)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(e,t)&&function(r,a){return!(r.startAt&&!function(c,d,g){const m=kT(c,d,g);return c.inclusive?m<=0:m<0}(r.startAt,Lu(r),a)||r.endAt&&!function(c,d,g){const m=kT(c,d,g);return c.inclusive?m>=0:m>0}(r.endAt,Lu(r),a))}(e,t)}function qV(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function rb(e){return(t,n)=>{let r=!1;for(const a of Lu(e)){const l=FV(a,t,n);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function FV(e,t,n){const r=e.field.isKeyField()?Rt.comparator(t.key,n.key):function(l,c,d){const g=c.data.field(l),m=d.data.field(l);return g!==null&&m!==null?ll(g,m):Dt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Dt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,n]);a.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(t){$s(this.inner,(n,r)=>{for(const[a,l]of r)t(a,l)})}isEmpty(){return B1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=new Se(Rt.comparator);function $r(){return jV}const sb=new Se(Rt.comparator);function Mu(...e){let t=sb;for(const n of e)t=t.insert(n.key,n);return t}function ab(e){let t=sb;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Da(){return Uu()}function ob(){return Uu()}function Uu(){return new Fa(e=>e.toString(),(e,t)=>e.isEqual(t))}const GV=new Se(Rt.comparator),$V=new $e(Rt.comparator);function Yt(...e){let t=$V;for(const n of e)t=t.add(n);return t}const YV=new $e(Bt);function KV(){return YV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cf(t)?"-0":t}}function lb(e){return{integerValue:""+e}}function XV(e,t){return wV(t)?lb(t):hy(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(){this._=void 0}}function QV(e,t,n){return e instanceof Of?function(a,l){const c={fields:{[F1]:{stringValue:q1},[G1]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&oy(l)&&(l=ed(l)),l&&(c.fields[j1]=l),{mapValue:c}}(n,t):e instanceof ic?cb(e,t):e instanceof rc?hb(e,t):function(a,l){const c=ub(a,l),d=zT(c)+zT(a.Re);return Ep(c)&&Ep(a.Re)?lb(d):hy(a.serializer,d)}(e,t)}function ZV(e,t,n){return e instanceof ic?cb(e,t):e instanceof rc?hb(e,t):n}function ub(e,t){return e instanceof Mf?function(r){return Ep(r)||function(l){return!!l&&"doubleValue"in l}(r)}(t)?t:{integerValue:0}:null}class Of extends rd{}class ic extends rd{constructor(t){super(),this.elements=t}}function cb(e,t){const n=fb(t);for(const r of e.elements)n.some(a=>cr(a,r))||n.push(r);return{arrayValue:{values:n}}}class rc extends rd{constructor(t){super(),this.elements=t}}function hb(e,t){let n=fb(t);for(const r of e.elements)n=n.filter(a=>!cr(a,r));return{arrayValue:{values:n}}}class Mf extends rd{constructor(t,n){super(),this.serializer=t,this.Re=n}}function zT(e){return Me(e.integerValue||e.doubleValue)}function fb(e){return ly(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function WV(e,t){return e.field.isEqual(t.field)&&function(r,a){return r instanceof ic&&a instanceof ic||r instanceof rc&&a instanceof rc?ol(r.elements,a.elements,cr):r instanceof Mf&&a instanceof Mf?cr(r.Re,a.Re):r instanceof Of&&a instanceof Of}(e.transform,t.transform)}class JV{constructor(t,n){this.version=t,this.transformResults=n}}class Wn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Wn}static exists(t){return new Wn(void 0,t)}static updateTime(t){return new Wn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function cf(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class sd{}function db(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new ad(e.key,Wn.none()):new dc(e.key,e.data,Wn.none());{const n=e.data,r=Pn.empty();let a=new $e(dn.comparator);for(let l of t.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Ys(e.key,r,new Zn(a.toArray()),Wn.none())}}function t4(e,t,n){e instanceof dc?function(a,l,c){const d=a.value.clone(),g=HT(a.fieldTransforms,l,c.transformResults);d.setAll(g),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(e,t,n):e instanceof Ys?function(a,l,c){if(!cf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=HT(a.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(gb(a)),g.setAll(d),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(e,t,n):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,n)}function zu(e,t,n,r){return e instanceof dc?function(l,c,d,g){if(!cf(l.precondition,c))return d;const m=l.value.clone(),y=qT(l.fieldTransforms,g,c);return m.setAll(y),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ys?function(l,c,d,g){if(!cf(l.precondition,c))return d;const m=qT(l.fieldTransforms,g,c),y=c.data;return y.setAll(gb(l)),y.setAll(m),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(e,t,n,r):function(l,c,d){return cf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(e,t,n)}function e4(e,t){let n=null;for(const r of e.fieldTransforms){const a=t.data.field(r.field),l=ub(r.transform,a||null);l!=null&&(n===null&&(n=Pn.empty()),n.set(r.field,l))}return n||null}function BT(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&ol(r,a,(l,c)=>WV(l,c))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class dc extends sd{constructor(t,n,r,a=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ys extends sd{constructor(t,n,r,a,l=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function gb(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function HT(e,t,n){const r=new Map;ne(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let a=0;a<n.length;a++){const l=e[a],c=l.transform,d=t.data.field(l.field);r.set(l.field,ZV(c,d,n[a]))}return r}function qT(e,t,n){const r=new Map;for(const a of e){const l=a.transform,c=n.data.field(a.field);r.set(a.field,QV(l,c,t))}return r}class ad extends sd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n4 extends sd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(t,n,r,a){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&t4(l,t,r[a])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=zu(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=zu(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=ob();return this.mutations.forEach(a=>{const l=t.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=n.has(a.key)?null:d;const g=db(c,d);g!==null&&r.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Yt())}isEqual(t){return this.batchId===t.batchId&&ol(this.mutations,t.mutations,(n,r)=>BT(n,r))&&ol(this.baseMutations,t.baseMutations,(n,r)=>BT(n,r))}}class fy{constructor(t,n,r,a){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(t,n,r){ne(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let a=function(){return GV}();const l=t.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new fy(t,n,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,Zt;function a4(e){switch(e){case dt.OK:return Dt(64938);case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0;default:return Dt(15467,{code:e})}}function mb(e){if(e===void 0)return Gr("GRPC error has no .code"),dt.UNKNOWN;switch(e){case ze.OK:return dt.OK;case ze.CANCELLED:return dt.CANCELLED;case ze.UNKNOWN:return dt.UNKNOWN;case ze.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case ze.INTERNAL:return dt.INTERNAL;case ze.UNAVAILABLE:return dt.UNAVAILABLE;case ze.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case ze.NOT_FOUND:return dt.NOT_FOUND;case ze.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case ze.ABORTED:return dt.ABORTED;case ze.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case ze.DATA_LOSS:return dt.DATA_LOSS;default:return Dt(39323,{code:e})}}(Zt=ze||(ze={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=new Ps([4294967295,4294967295],0);function FT(e){const t=L1().encode(e),n=new x1;return n.update(t),new Uint8Array(n.digest())}function jT(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Ps([n,r],0),new Ps([a,l],0)]}class dy{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vu(`Invalid padding: ${n}`);if(r<0)throw new Vu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Vu(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Vu(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=Ps.fromNumber(this.pe)}we(t,n,r){let a=t.add(n.multiply(Ps.fromNumber(r)));return a.compare(o4)===1&&(a=new Ps([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=FT(t),[r,a]=jT(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);if(!this.be(c))return!1}return!0}static create(t,n,r){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new dy(l,a,n);return r.forEach(d=>c.insert(d)),c}insert(t){if(this.pe===0)return;const n=FT(t),[r,a]=jT(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);this.Se(c)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Vu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t,n,r,a,l){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const a=new Map;return a.set(t,gc.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new od(Mt.min(),a,new Se(Bt),$r(),Yt())}}class gc{constructor(t,n,r,a,l){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new gc(r,n,Yt(),Yt(),Yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(t,n,r,a){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=a}}class pb{constructor(t,n){this.targetId=t,this.Ce=n}}class yb{constructor(t,n,r=gn.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a}}class GT{constructor(){this.Fe=0,this.Me=$T(),this.xe=gn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Yt(),n=Yt(),r=Yt();return this.Me.forEach((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:Dt(38017,{changeType:l})}}),new gc(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=$T()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,ne(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class l4{constructor(t){this.ze=t,this.je=new Map,this.He=$r(),this.Je=Zh(),this.Ye=Zh(),this.Ze=new Se(Bt)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:Dt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,a)=>{this.it(a)&&n(a)})}ot(t){const n=t.targetId,r=t.Ce.count,a=this._t(n);if(a){const l=a.target;if(wp(l))if(r===0){const c=new Rt(l.path);this.tt(n,c,Tn.newNoDocument(c,Mt.min()))}else ne(r===1,20013,{expectedCount:r});else{const c=this.ut(n);if(c!==r){const d=this.ct(t),g=d?this.lt(d,t,c):1;if(g!==0){this.st(n);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,m)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=n;let c,d;try{c=qs(r).toUint8Array()}catch(g){if(g instanceof H1)return al("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new dy(c,a,l)}catch(g){return al(g instanceof Vu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.pe===0?null:d}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let a=0;return r.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(d)||(this.tt(n,l,null),a++)}),a}It(t){const n=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&wp(d.target)){const g=new Rt(d.target.path);this.Et(g).has(c)||this.dt(c,g)||this.tt(c,g,Tn.newNoDocument(g,t))}l.Le&&(n.set(c,l.qe()),l.Qe())}});let r=Yt();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(g=>{const m=this._t(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.He.forEach((l,c)=>c.setReadTime(t));const a=new od(t,n,this.Ze,this.He,r);return this.He=$r(),this.Je=Zh(),this.Ye=Zh(),this.Ze=new Se(Bt),a}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const a=this.rt(t);this.dt(t,n)?a.$e(n,1):a.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new GT,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new $e(Bt),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new $e(Bt),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||vt("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new GT),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function Zh(){return new Se(Rt.comparator)}function $T(){return new Se(Rt.comparator)}const u4={asc:"ASCENDING",desc:"DESCENDING"},c4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h4={and:"AND",or:"OR"};class f4{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Ap(e,t){return e.useProto3Json||td(t)?t:{value:t}}function Vf(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function _b(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function d4(e,t){return Vf(e,t.toTimestamp())}function or(e){return ne(!!e,49232),Mt.fromTimestamp(function(n){const r=Hs(n);return new Ce(r.seconds,r.nanos)}(e))}function gy(e,t){return Rp(e,t).canonicalString()}function Rp(e,t){const n=function(a){return new pe(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?n:n.child(t)}function vb(e){const t=pe.fromString(e);return ne(bb(t),10190,{key:t.toString()}),t}function Ip(e,t){return gy(e.databaseId,t.path)}function Fm(e,t){const n=vb(t);if(n.get(1)!==e.databaseId.projectId)throw new Et(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Et(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Rt(Tb(n))}function Eb(e,t){return gy(e.databaseId,t)}function g4(e){const t=vb(e);return t.length===4?pe.emptyPath():Tb(t)}function Cp(e){return new pe(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Tb(e){return ne(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function YT(e,t,n){return{name:Ip(e,t),fields:n.value.mapValue.fields}}function m4(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Dt(39313,{state:m})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=function(m,y){return m.useProto3Json?(ne(y===void 0||typeof y=="string",58123),gn.fromBase64String(y||"")):(ne(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),gn.fromUint8Array(y||new Uint8Array))}(e,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(m){const y=m.code===void 0?dt.UNKNOWN:mb(m.code);return new Et(y,m.message||"")}(c);n=new yb(r,a,l,d||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const a=Fm(e,r.document.name),l=or(r.document.updateTime),c=r.document.createTime?or(r.document.createTime):Mt.min(),d=new Pn({mapValue:{fields:r.document.fields}}),g=Tn.newFoundDocument(a,l,c,d),m=r.targetIds||[],y=r.removedTargetIds||[];n=new hf(m,y,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const a=Fm(e,r.document),l=r.readTime?or(r.readTime):Mt.min(),c=Tn.newNoDocument(a,l),d=r.removedTargetIds||[];n=new hf([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const a=Fm(e,r.document),l=r.removedTargetIds||[];n=new hf([],l,a,null)}else{if(!("filter"in t))return Dt(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new s4(a,l),d=r.targetId;n=new pb(d,c)}}return n}function p4(e,t){let n;if(t instanceof dc)n={update:YT(e,t.key,t.value)};else if(t instanceof ad)n={delete:Ip(e,t.key)};else if(t instanceof Ys)n={update:YT(e,t.key,t.data),updateMask:A4(t.fieldMask)};else{if(!(t instanceof n4))return Dt(16599,{ft:t.type});n={verify:Ip(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof Of)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ic)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof rc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Mf)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Dt(20930,{transform:c.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:d4(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Dt(27497)}(e,t.precondition)),n}function y4(e,t){return e&&e.length>0?(ne(t!==void 0,14353),e.map(n=>function(a,l){let c=a.updateTime?or(a.updateTime):or(l);return c.isEqual(Mt.min())&&(c=or(l)),new JV(c,a.transformResults||[])}(n,t))):[]}function _4(e,t){return{documents:[Eb(e,t.path)]}}function v4(e,t){const n={structuredQuery:{}},r=t.path;let a;t.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Eb(e,a);const l=function(m){if(m.length!==0)return Sb(Vi.create(m,"and"))}(t.filters);l&&(n.structuredQuery.where=l);const c=function(m){if(m.length!==0)return m.map(y=>function(E){return{field:Go(E.field),direction:w4(E.dir)}}(y))}(t.orderBy);c&&(n.structuredQuery.orderBy=c);const d=Ap(e,t.limit);return d!==null&&(n.structuredQuery.limit=d),t.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(t.endAt)),{gt:n,parent:a}}function E4(e){let t=g4(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){ne(r===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:t=t.child(y.collectionId)}let l=[];n.where&&(l=function(v){const E=wb(v);return E instanceof Vi&&Z1(E)?E.getFilters():[E]}(n.where));let c=[];n.orderBy&&(c=function(v){return v.map(E=>function(M){return new nc($o(M.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(E))}(n.orderBy));let d=null;n.limit&&(d=function(v){let E;return E=typeof v=="object"?v.value:v,td(E)?null:E}(n.limit));let g=null;n.startAt&&(g=function(v){const E=!!v.before,S=v.values||[];return new Df(S,E)}(n.startAt));let m=null;return n.endAt&&(m=function(v){const E=!v.before,S=v.values||[];return new Df(S,E)}(n.endAt)),BV(t,a,c,l,d,"F",g,m)}function T4(e,t){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt(28987,{purpose:a})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function wb(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$o(n.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=$o(n.unaryFilter.field);return Be.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=$o(n.unaryFilter.field);return Be.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=$o(n.unaryFilter.field);return Be.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Dt(61313);default:return Dt(60726)}}(e):e.fieldFilter!==void 0?function(n){return Be.create($o(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Dt(58110);default:return Dt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Vi.create(n.compositeFilter.filters.map(r=>wb(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Dt(1026)}}(n.compositeFilter.op))}(e):Dt(30097,{filter:e})}function w4(e){return u4[e]}function S4(e){return c4[e]}function b4(e){return h4[e]}function Go(e){return{fieldPath:e.canonicalString()}}function $o(e){return dn.fromServerFormat(e.fieldPath)}function Sb(e){return e instanceof Be?function(n){if(n.op==="=="){if(VT(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NAN"}};if(MT(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(VT(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NAN"}};if(MT(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Go(n.field),op:S4(n.op),value:n.value}}}(e):e instanceof Vi?function(n){const r=n.getFilters().map(a=>Sb(a));return r.length===1?r[0]:{compositeFilter:{op:b4(n.op),filters:r}}}(e):Dt(54877,{filter:e})}function A4(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function bb(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(t,n,r,a,l=Mt.min(),c=Mt.min(),d=gn.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(t){return new Ds(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(t){this.wt=t}}function I4(e){const t=E4({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?bp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(){this.Cn=new x4}addToCollectionParentIndex(t,n){return this.Cn.add(n),gt.resolve()}getCollectionParents(t,n){return gt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return gt.resolve()}deleteFieldIndex(t,n){return gt.resolve()}deleteAllFieldIndexes(t){return gt.resolve()}createTargetIndexes(t,n){return gt.resolve()}getDocumentsMatchingTarget(t,n){return gt.resolve(null)}getIndexType(t,n){return gt.resolve(0)}getFieldIndexes(t,n){return gt.resolve([])}getNextCollectionGroupToUpdate(t){return gt.resolve(null)}getMinOffset(t,n){return gt.resolve(Bs.min())}getMinOffsetFromCollectionGroup(t,n){return gt.resolve(Bs.min())}updateCollectionGroup(t,n,r){return gt.resolve()}updateIndexEntries(t,n){return gt.resolve()}}class x4{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n]||new $e(pe.comparator),l=!a.has(r);return this.index[n]=a.add(r),l}has(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(t){return(this.index[t]||new $e(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ab=41943040;class kn{static withCacheSize(t){return new kn(t,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(Ab,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new cl(0)}static lr(){return new cl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="LruGarbageCollector",N4=1048576;function QT([e,t],[n,r]){const a=Bt(e,n);return a===0?Bt(t,r):a}class D4{constructor(t){this.Er=t,this.buffer=new $e(QT),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();QT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class O4{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){vt(XT,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){yl(n)?vt(XT,"Ignoring IndexedDB error during garbage collection: ",n):await pl(n)}await this.mr(3e5)})}}class M4{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return gt.resolve(Jf.le);const r=new D4(n);return this.gr.forEachTarget(t,a=>r.Rr(a.sequenceNumber)).next(()=>this.gr.yr(t,a=>r.Rr(a))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.gr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(vt("LruGarbageCollector","Garbage collection skipped; disabled"),gt.resolve(KT)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(vt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KT):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let r,a,l,c,d,g,m;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(vt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(t,a))).next(v=>(r=v,d=Date.now(),this.removeTargets(t,r,n))).next(v=>(l=v,g=Date.now(),this.removeOrphanedDocuments(t,r))).next(v=>(m=Date.now(),Fo()<=$t.DEBUG&&vt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${v} documents in `+(m-g)+`ms
Total Duration: ${m-y}ms`),gt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v})))}}function V4(e,t){return new M4(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(){this.changes=new Fa(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Tn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?gt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(t,n,r,a){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(a=>(r=a,this.remoteDocumentCache.getEntry(t,n))).next(a=>(r!==null&&zu(r.mutation,a,Zn.empty(),Ce.now()),a))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Yt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Yt()){const a=Da();return this.populateOverlays(t,a,n).next(()=>this.computeViews(t,n,a,r).next(l=>{let c=Mu();return l.forEach((d,g)=>{c=c.insert(d,g.overlayedDocument)}),c}))}getOverlayedDocuments(t,n){const r=Da();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Yt()))}populateOverlays(t,n,r){const a=[];return r.forEach(l=>{n.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(t,a).next(l=>{l.forEach((c,d)=>{n.set(c,d)})})}computeViews(t,n,r,a){let l=$r();const c=Uu(),d=function(){return Uu()}();return n.forEach((g,m)=>{const y=r.get(m.key);a.has(m.key)&&(y===void 0||y.mutation instanceof Ys)?l=l.insert(m.key,m):y!==void 0?(c.set(m.key,y.mutation.getFieldMask()),zu(y.mutation,m,y.mutation.getFieldMask(),Ce.now())):c.set(m.key,Zn.empty())}),this.recalculateAndSaveOverlays(t,l).next(g=>(g.forEach((m,y)=>c.set(m,y)),n.forEach((m,y)=>{var v;return d.set(m,new P4(y,(v=c.get(m))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(t,n){const r=Uu();let a=new Se((c,d)=>c-d),l=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(c=>{for(const d of c)d.keys().forEach(g=>{const m=n.get(g);if(m===null)return;let y=r.get(g)||Zn.empty();y=d.applyToLocalView(m,y),r.set(g,y);const v=(a.get(d.batchId)||Yt()).add(g);a=a.insert(d.batchId,v)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),m=g.key,y=g.value,v=ob();y.forEach(E=>{if(!l.has(E)){const S=db(n.get(E),r.get(E));S!==null&&v.set(E,S),l=l.add(E)}}),c.push(this.documentOverlayCache.saveOverlays(t,m,v))}return gt.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,a){return function(c){return Rt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):nb(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,a):this.getDocumentsMatchingCollectionQuery(t,n,r,a)}getNextDocuments(t,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,a-l.size):gt.resolve(Da());let d=Wu,g=l;return c.next(m=>gt.forEach(m,(y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(y)?gt.resolve():this.remoteDocumentCache.getEntry(t,y).next(E=>{g=g.insert(y,E)}))).next(()=>this.populateOverlays(t,m,l)).next(()=>this.computeViews(t,g,m,Yt())).next(y=>({batchId:d,changes:ab(y)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Rt(n)).next(r=>{let a=Mu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(t,n,r,a){const l=n.collectionGroup;let c=Mu();return this.indexManager.getCollectionParents(t,l).next(d=>gt.forEach(d,g=>{const m=function(v,E){return new _l(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,g.child(l));return this.getDocumentsMatchingCollectionQuery(t,m,r,a).next(y=>{y.forEach((v,E)=>{c=c.insert(v,E)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,n,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,l,a))).next(c=>{l.forEach((g,m)=>{const y=m.getKey();c.get(y)===null&&(c=c.insert(y,Tn.newInvalidDocument(y)))});let d=Mu();return c.forEach((g,m)=>{const y=l.get(g);y!==void 0&&zu(y.mutation,m,Zn.empty(),Ce.now()),id(n,m)&&(d=d.insert(g,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return gt.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:or(a.createTime)}}(n)),gt.resolve()}getNamedQuery(t,n){return gt.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(a){return{name:a.name,query:I4(a.bundledQuery),readTime:or(a.readTime)}}(n)),gt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(){this.overlays=new Se(Rt.comparator),this.Qr=new Map}getOverlay(t,n){return gt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Da();return gt.forEach(n,a=>this.getOverlay(t,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((a,l)=>{this.St(t,n,l)}),gt.resolve()}removeOverlaysForBatchId(t,n,r){const a=this.Qr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(r)),gt.resolve()}getOverlaysForCollection(t,n,r){const a=Da(),l=n.length+1,c=new Rt(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const g=d.getNext().value,m=g.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===l&&g.largestBatchId>r&&a.set(g.getKey(),g)}return gt.resolve(a)}getOverlaysForCollectionGroup(t,n,r,a){let l=new Se((m,y)=>m-y);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let y=l.get(m.largestBatchId);y===null&&(y=Da(),l=l.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=Da(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((m,y)=>d.set(m,y)),!(d.size()>=a)););return gt.resolve(d)}St(t,n,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Qr.get(a.largestBatchId).delete(r.key);this.Qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new r4(n,r));let l=this.Qr.get(n);l===void 0&&(l=Yt(),this.Qr.set(n,l)),this.Qr.set(n,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(t){return gt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,gt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(){this.$r=new $e(rn.Ur),this.Kr=new $e(rn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const r=new rn(t,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.zr(new rn(t,n))}jr(t,n){t.forEach(r=>this.removeReference(r,n))}Hr(t){const n=new Rt(new pe([])),r=new rn(n,t),a=new rn(n,t+1),l=[];return this.Kr.forEachInRange([r,a],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new Rt(new pe([])),r=new rn(n,t),a=new rn(n,t+1);let l=Yt();return this.Kr.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(t){const n=new rn(t,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class rn{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return Rt.comparator(t.key,n.key)||Bt(t.Zr,n.Zr)}static Wr(t,n){return Bt(t.Zr,n.Zr)||Rt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new $e(rn.Ur)}checkEmpty(t){return gt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new i4(l,n,r,a);this.mutationQueue.push(c);for(const d of a)this.Xr=this.Xr.add(new rn(d.key,l)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return gt.resolve(c)}lookupMutationBatch(t,n){return gt.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,a=this.ti(r),l=a<0?0:a;return gt.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return gt.resolve(this.mutationQueue.length===0?ay:this.nr-1)}getAllMutationBatches(t){return gt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new rn(n,0),a=new rn(n,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([r,a],c=>{const d=this.ei(c.Zr);l.push(d)}),gt.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new $e(Bt);return n.forEach(a=>{const l=new rn(a,0),c=new rn(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],d=>{r=r.add(d.Zr)})}),gt.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,a=r.length+1;let l=r;Rt.isDocumentKey(l)||(l=l.child(""));const c=new rn(new Rt(l),0);let d=new $e(Bt);return this.Xr.forEachWhile(g=>{const m=g.key.path;return!!r.isPrefixOf(m)&&(m.length===a&&(d=d.add(g.Zr)),!0)},c),gt.resolve(this.ni(d))}ni(t){const n=[];return t.forEach(r=>{const a=this.ei(r);a!==null&&n.push(a)}),n}removeMutationBatch(t,n){ne(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return gt.forEach(n.mutations,a=>{const l=new rn(a.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,n){const r=new rn(n,0),a=this.Xr.firstAfterOrEqual(r);return gt.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,gt.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(t){this.ii=t,this.docs=function(){return new Se(Rt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,a=this.docs.get(r),l=a?a.size:0,c=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return gt.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(n))}getEntries(t,n){let r=$r();return n.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():Tn.newInvalidDocument(a))}),gt.resolve(r)}getDocumentsMatchingQuery(t,n,r,a){let l=$r();const c=n.path,d=new Rt(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:m,value:{document:y}}=g.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||_V(yV(y),r)<=0||(a.has(y.key)||id(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return gt.resolve(l)}getAllFromCollectionGroup(t,n,r,a){Dt(9500)}si(t,n){return gt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new F4(this)}getSize(t){return gt.resolve(this.size)}}class F4 extends k4{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?n.push(this.Br.addEntry(t,a)):this.Br.removeEntry(r)}),gt.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(t){this.persistence=t,this.oi=new Fa(n=>uy(n),cy),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this._i=0,this.ai=new my,this.targetCount=0,this.ui=cl.cr()}forEachTarget(t,n){return this.oi.forEach((r,a)=>n(a)),gt.resolve()}getLastRemoteSnapshotVersion(t){return gt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return gt.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),gt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),gt.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new cl(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,gt.resolve()}updateTargetData(t,n){return this.Tr(n),gt.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,gt.resolve()}removeTargets(t,n,r){let a=0;const l=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(t,d.targetId)),a++)}),gt.waitFor(l).next(()=>a)}getTargetCount(t){return gt.resolve(this.targetCount)}getTargetData(t,n){const r=this.oi.get(n)||null;return gt.resolve(r)}addMatchingKeys(t,n,r){return this.ai.Gr(n,r),gt.resolve()}removeMatchingKeys(t,n,r){this.ai.jr(n,r);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach(c=>{l.push(a.markPotentiallyOrphaned(t,c))}),gt.waitFor(l)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),gt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ai.Yr(n);return gt.resolve(r)}containsKey(t,n){return gt.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(t,n){this.ci={},this.overlays={},this.li=new Jf(0),this.hi=!1,this.hi=!0,this.Pi=new B4,this.referenceDelegate=t(this),this.Ti=new j4(this),this.indexManager=new C4,this.remoteDocumentCache=function(a){return new q4(a)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new R4(n),this.Ei=new U4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new z4,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ci[t.toKey()];return r||(r=new H4(n,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,r){vt("MemoryPersistence","Starting transaction:",t);const a=new G4(this.li.next());return this.referenceDelegate.di(),r(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(t,n){return gt.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,n)))}}class G4 extends EV{constructor(t){super(),this.currentSequenceNumber=t}}class py{constructor(t){this.persistence=t,this.Vi=new my,this.mi=null}static fi(t){return new py(t)}get gi(){if(this.mi)return this.mi;throw Dt(60996)}addReference(t,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),gt.resolve()}removeReference(t,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),gt.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),gt.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(a=>this.gi.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>r.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gt.forEach(this.gi,r=>{const a=Rt.fromPath(r);return this.pi(t,a).next(l=>{l||n.removeEntry(a,Mt.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return gt.or([()=>gt.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class kf{constructor(t,n){this.persistence=t,this.yi=new Fa(r=>SV(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=V4(this,n)}static fi(t,n){return new kf(t,n)}di(){}Ai(t){return gt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(a=>r+a))}br(t){let n=0;return this.yr(t,r=>{n++}).next(()=>n)}yr(t,n){return gt.forEach(this.yi,(r,a)=>this.Dr(t,r,a).next(l=>l?gt.resolve():n(a)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(t,c=>this.Dr(t,c,n).next(d=>{d||(r++,l.removeEntry(c,Mt.min()))})).next(()=>l.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),gt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),gt.resolve()}removeReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),gt.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),gt.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=lf(t.data.value)),n}Dr(t,n,r){return gt.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const a=this.yi.get(n);return gt.resolve(a!==void 0&&a>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(t,n,r,a){this.targetId=t,this.fromCache=n,this.ds=r,this.As=a}static Rs(t,n){let r=Yt(),a=Yt();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new yy(t,n.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return HO()?8:TV(wn())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,r,a){const l={result:null};return this.ws(t,n).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(t,n,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new $4;return this.Ss(t,n,c).next(d=>{if(l.result=d,this.fs)return this.Ds(t,n,c,d.size)})}).next(()=>l.result)}Ds(t,n,r,a){return r.documentReadCount<this.gs?(Fo()<=$t.DEBUG&&vt("QueryEngine","SDK will not create cache indexes for query:",jo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),gt.resolve()):(Fo()<=$t.DEBUG&&vt("QueryEngine","Query:",jo(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ps*a?(Fo()<=$t.DEBUG&&vt("QueryEngine","The SDK decides to create cache indexes for query:",jo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ar(n))):gt.resolve())}ws(t,n){if(UT(n))return gt.resolve(null);let r=ar(n);return this.indexManager.getIndexType(t,r).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=bp(n,null,"F"),r=ar(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(l=>{const c=Yt(...l);return this.ys.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,r).next(g=>{const m=this.vs(n,d);return this.Cs(n,m,c,g.readTime)?this.ws(t,bp(n,null,"F")):this.Fs(t,m,n,g)}))})))}bs(t,n,r,a){return UT(n)||a.isEqual(Mt.min())?gt.resolve(null):this.ys.getDocuments(t,r).next(l=>{const c=this.vs(n,l);return this.Cs(n,c,r,a)?gt.resolve(null):(Fo()<=$t.DEBUG&&vt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),jo(n)),this.Fs(t,c,n,pV(a,Wu)).next(d=>d))})}vs(t,n){let r=new $e(rb(t));return n.forEach((a,l)=>{id(t,l)&&(r=r.add(l))}),r}Cs(t,n,r,a){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const l=t.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(t,n,r){return Fo()<=$t.DEBUG&&vt("QueryEngine","Using full collection scan to execute query:",jo(n)),this.ys.getDocumentsMatchingQuery(t,n,Bs.min(),r)}Fs(t,n,r,a){return this.ys.getDocumentsMatchingQuery(t,r,a).next(l=>(n.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="LocalStore",K4=3e8;class X4{constructor(t,n,r,a){this.persistence=t,this.Ms=n,this.serializer=a,this.xs=new Se(Bt),this.Os=new Fa(l=>uy(l),cy),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new L4(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function Q4(e,t,n,r){return new X4(e,t,n,r)}async function Ib(e,t){const n=Vt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,n.Ls(t),n.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let g=Yt();for(const m of a){c.push(m.batchId);for(const y of m.mutations)g=g.add(y.key)}for(const m of l){d.push(m.batchId);for(const y of m.mutations)g=g.add(y.key)}return n.localDocuments.getDocuments(r,g).next(m=>({ks:m,removedBatchIds:c,addedBatchIds:d}))})})}function Z4(e,t){const n=Vt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=t.batch.keys(),l=n.Bs.newChangeBuffer({trackRemovals:!0});return function(d,g,m,y){const v=m.batch,E=v.keys();let S=gt.resolve();return E.forEach(M=>{S=S.next(()=>y.getEntry(g,M)).next(L=>{const V=m.docVersions.get(M);ne(V!==null,48541),L.version.compareTo(V)<0&&(v.applyToRemoteDocument(L,m),L.isValidDocument()&&(L.setReadTime(m.commitVersion),y.addEntry(L)))})}),S.next(()=>d.mutationQueue.removeMutationBatch(g,v))}(n,r,t,l).next(()=>l.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=Yt();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(g=g.add(d.batch.mutations[m].key));return g}(t))).next(()=>n.localDocuments.getDocuments(r,a))})}function Cb(e){const t=Vt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function W4(e,t){const n=Vt(e),r=t.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const d=[];t.targetChanges.forEach((y,v)=>{const E=a.get(v);if(!E)return;d.push(n.Ti.removeMatchingKeys(l,y.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(l,y.addedDocuments,v)));let S=E.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(v)!==null?S=S.withResumeToken(gn.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,r)),a=a.insert(v,S),function(L,V,B){return L.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=K4?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(E,S,y)&&d.push(n.Ti.updateTargetData(l,S))});let g=$r(),m=Yt();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(J4(l,c,t.documentUpdates).next(y=>{g=y.qs,m=y.Qs})),!r.isEqual(Mt.min())){const y=n.Ti.getLastRemoteSnapshotVersion(l).next(v=>n.Ti.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(y)}return gt.waitFor(d).next(()=>c.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,g,m)).next(()=>g)}).then(l=>(n.xs=a,l))}function J4(e,t,n){let r=Yt(),a=Yt();return n.forEach(l=>r=r.add(l)),t.getEntries(e,r).next(l=>{let c=$r();return n.forEach((d,g)=>{const m=l.get(d);g.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(d)),g.isNoDocument()&&g.version.isEqual(Mt.min())?(t.removeEntry(d,g.readTime),c=c.insert(d,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(g),c=c.insert(d,g)):vt(_y,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",g.version)}),{qs:c,Qs:a}})}function t3(e,t){const n=Vt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=ay),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function e3(e,t){const n=Vt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return n.Ti.getTargetData(r,t).next(l=>l?(a=l,gt.resolve(a)):n.Ti.allocateTargetId(r).next(c=>(a=new Ds(t,c,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=n.xs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(t,r.targetId)),r})}async function xp(e,t,n){const r=Vt(e),a=r.xs.get(t),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!yl(c))throw c;vt(_y,`Failed to update sequence numbers for target ${t}: ${c}`)}r.xs=r.xs.remove(t),r.Os.delete(a.target)}function ZT(e,t,n){const r=Vt(e);let a=Mt.min(),l=Yt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(g,m,y){const v=Vt(g),E=v.Os.get(y);return E!==void 0?gt.resolve(v.xs.get(E)):v.Ti.getTargetData(m,y)}(r,c,ar(t)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,d.targetId).next(g=>{l=g})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,t,n?a:Mt.min(),n?l:Yt())).next(d=>(n3(r,qV(t),d),{documents:d,$s:l})))}function n3(e,t,n){let r=e.Ns.get(t)||Mt.min();n.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),e.Ns.set(t,r)}class WT{constructor(){this.activeTargetIds=KV()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class i3{constructor(){this.xo=new WT,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,r){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new WT,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="ConnectivityMonitor";class tw{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){vt(JT,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){vt(JT,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wh=null;function Np(){return Wh===null?Wh=function(){return 268435456+Math.round(2147483648*Math.random())}():Wh++,"0x"+Wh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="RestConnection",s3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class a3{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${r}/databases/${a}`,this.Go=this.databaseId.database===xf?`project_id=${r}`:`project_id=${r}&database_id=${a}`}zo(t,n,r,a,l){const c=Np(),d=this.jo(t,n.toUriEncodedString());vt(jm,`Sending RPC '${t}' ${c}:`,d,r);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,a,l);const{host:m}=new URL(d),y=dl(m);return this.Jo(t,d,g,r,y).then(v=>(vt(jm,`Received RPC '${t}' ${c}: `,v),v),v=>{throw al(jm,`RPC '${t}' ${c} failed with error: `,v,"url: ",d,"request:",r),v})}Yo(t,n,r,a,l,c){return this.zo(t,n,r,a,l)}Ho(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ml}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,l)=>t[l]=a),r&&r.headers.forEach((a,l)=>t[l]=a)}jo(t,n){const r=s3[t];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class l3 extends a3{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,a,l){const c=Np();return new Promise((d,g)=>{const m=new N1;m.setWithCredentials(!0),m.listenOnce(D1.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case of.NO_ERROR:const v=m.getResponseJson();vt(vn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(v)),d(v);break;case of.TIMEOUT:vt(vn,`RPC '${t}' ${c} timed out`),g(new Et(dt.DEADLINE_EXCEEDED,"Request time out"));break;case of.HTTP_ERROR:const E=m.getStatus();if(vt(vn,`RPC '${t}' ${c} failed with status:`,E,"response text:",m.getResponseText()),E>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const M=S?.error;if(M&&M.status&&M.message){const L=function(B){const F=B.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(F)>=0?F:dt.UNKNOWN}(M.status);g(new Et(L,M.message))}else g(new Et(dt.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new Et(dt.UNAVAILABLE,"Connection failed."));break;default:Dt(9055,{h_:t,streamId:c,P_:m.getLastErrorCode(),T_:m.getLastError()})}}finally{vt(vn,`RPC '${t}' ${c} completed.`)}});const y=JSON.stringify(a);vt(vn,`RPC '${t}' ${c} sending request:`,a),m.send(n,"POST",y,r,15)})}I_(t,n,r){const a=Np(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=V1(),d=M1(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(g.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const y=l.join("");vt(vn,`Creating RPC '${t}' stream ${a}: ${y}`,g);const v=c.createWebChannel(y,g);this.E_(v);let E=!1,S=!1;const M=new o3({Zo:V=>{S?vt(vn,`Not sending because RPC '${t}' stream ${a} is closed:`,V):(E||(vt(vn,`Opening RPC '${t}' stream ${a} transport.`),v.open(),E=!0),vt(vn,`RPC '${t}' stream ${a} sending:`,V),v.send(V))},Xo:()=>v.close()}),L=(V,B,F)=>{V.listen(B,q=>{try{F(q)}catch(H){setTimeout(()=>{throw H},0)}})};return L(v,Ou.EventType.OPEN,()=>{S||(vt(vn,`RPC '${t}' stream ${a} transport opened.`),M.__())}),L(v,Ou.EventType.CLOSE,()=>{S||(S=!0,vt(vn,`RPC '${t}' stream ${a} transport closed`),M.u_(),this.d_(v))}),L(v,Ou.EventType.ERROR,V=>{S||(S=!0,al(vn,`RPC '${t}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),M.u_(new Et(dt.UNAVAILABLE,"The operation could not be completed")))}),L(v,Ou.EventType.MESSAGE,V=>{var B;if(!S){const F=V.data[0];ne(!!F,16349);const q=F,H=q?.error||((B=q[0])===null||B===void 0?void 0:B.error);if(H){vt(vn,`RPC '${t}' stream ${a} received error:`,H);const nt=H.status;let et=function(I){const P=ze[I];if(P!==void 0)return mb(P)}(nt),D=H.message;et===void 0&&(et=dt.INTERNAL,D="Unknown error status: "+nt+" with message "+H.message),S=!0,M.u_(new Et(et,D)),v.close()}else vt(vn,`RPC '${t}' stream ${a} received:`,F),M.c_(F)}}),L(d,O1.STAT_EVENT,V=>{V.stat===yp.PROXY?vt(vn,`RPC '${t}' stream ${a} detected buffering proxy`):V.stat===yp.NOPROXY&&vt(vn,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{M.a_()},0),M}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function Gm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(e){return new f4(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(t,n,r=1e3,a=1.5,l=6e4){this.xi=t,this.timerId=n,this.A_=r,this.R_=a,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),a=Math.max(0,n-r);a>0&&vt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="PersistentStream";class Nb{constructor(t,n,r,a,l,c,d,g){this.xi=t,this.S_=r,this.D_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new xb(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===dt.RESOURCE_EXHAUSTED?(Gr(n.toString()),Gr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.v_===n&&this.z_(r,a)},r=>{t(()=>{const a=new Et(dt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(a)})})}z_(t,n){const r=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{r(()=>this.j_(a))}),this.stream.onMessage(a=>{r(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return vt(ew,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(vt(ew,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class u3 extends Nb{constructor(t,n,r,a,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=m4(this.serializer,t),r=function(l){if(!("targetChange"in l))return Mt.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Mt.min():c.readTime?or(c.readTime):Mt.min()}(t);return this.listener.Y_(n,r)}Z_(t){const n={};n.database=Cp(this.serializer),n.addTarget=function(l,c){let d;const g=c.target;if(d=wp(g)?{documents:_4(l,g)}:{query:v4(l,g).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=_b(l,c.resumeToken);const m=Ap(l,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(Mt.min())>0){d.readTime=Vf(l,c.snapshotVersion.toTimestamp());const m=Ap(l,c.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,t);const r=T4(this.serializer,t);r&&(n.labels=r),this.Q_(n)}X_(t){const n={};n.database=Cp(this.serializer),n.removeTarget=t,this.Q_(n)}}class c3 extends Nb{constructor(t,n,r,a,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,n){return this.connection.I_("Write",t,n)}J_(t){return ne(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ne(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){ne(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const n=y4(t.writeResults,t.commitTime),r=or(t.commitTime);return this.listener.ra(r,n)}ia(){const t={};t.database=Cp(this.serializer),this.Q_(t)}ta(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>p4(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{}class f3 extends h3{constructor(t,n,r,a){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new Et(dt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,r,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(t,Rp(n,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Et(dt.UNKNOWN,l.toString())})}Yo(t,n,r,a,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(t,Rp(n,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Et(dt.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class d3{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Gr(n),this.ua=!1):vt("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za="RemoteStore";class g3{constructor(t,n,r,a,l){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{r.enqueueAndForget(async()=>{ja(this)&&(vt(za,"Restarting streams for network reachability change."),await async function(g){const m=Vt(g);m.da.add(4),await mc(m),m.Va.set("Unknown"),m.da.delete(4),await ud(m)}(this))})}),this.Va=new d3(r,a)}}async function ud(e){if(ja(e))for(const t of e.Aa)await t(!0)}async function mc(e){for(const t of e.Aa)await t(!1)}function Db(e,t){const n=Vt(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),wy(n)?Ty(n):vl(n).N_()&&Ey(n,t))}function vy(e,t){const n=Vt(e),r=vl(n);n.Ea.delete(t),r.N_()&&Ob(n,t),n.Ea.size===0&&(r.N_()?r.k_():ja(n)&&n.Va.set("Unknown"))}function Ey(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Mt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}vl(e).Z_(t)}function Ob(e,t){e.ma.Ke(t),vl(e).X_(t)}function Ty(e){e.ma=new l4({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),vl(e).start(),e.Va.ca()}function wy(e){return ja(e)&&!vl(e).O_()&&e.Ea.size>0}function ja(e){return Vt(e).da.size===0}function Mb(e){e.ma=void 0}async function m3(e){e.Va.set("Online")}async function p3(e){e.Ea.forEach((t,n)=>{Ey(e,t)})}async function y3(e,t){Mb(e),wy(e)?(e.Va.Pa(t),Ty(e)):e.Va.set("Unknown")}async function _3(e,t,n){if(e.Va.set("Online"),t instanceof yb&&t.state===2&&t.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ea.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ea.delete(d),a.ma.removeTarget(d))}(e,t)}catch(r){vt(za,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Pf(e,r)}else if(t instanceof hf?e.ma.Xe(t):t instanceof pb?e.ma.ot(t):e.ma.nt(t),!n.isEqual(Mt.min()))try{const r=await Cb(e.localStore);n.compareTo(r)>=0&&await function(l,c){const d=l.ma.It(c);return d.targetChanges.forEach((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const y=l.Ea.get(m);y&&l.Ea.set(m,y.withResumeToken(g.resumeToken,c))}}),d.targetMismatches.forEach((g,m)=>{const y=l.Ea.get(g);if(!y)return;l.Ea.set(g,y.withResumeToken(gn.EMPTY_BYTE_STRING,y.snapshotVersion)),Ob(l,g);const v=new Ds(y.target,g,m,y.sequenceNumber);Ey(l,v)}),l.remoteSyncer.applyRemoteEvent(d)}(e,n)}catch(r){vt(za,"Failed to raise snapshot:",r),await Pf(e,r)}}async function Pf(e,t,n){if(!yl(t))throw t;e.da.add(1),await mc(e),e.Va.set("Offline"),n||(n=()=>Cb(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{vt(za,"Retrying IndexedDB access"),await n(),e.da.delete(1),await ud(e)})}function Vb(e,t){return t().catch(n=>Pf(e,n,t))}async function cd(e){const t=Vt(e),n=js(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:ay;for(;v3(t);)try{const a=await t3(t.localStore,r);if(a===null){t.Ia.length===0&&n.k_();break}r=a.batchId,E3(t,a)}catch(a){await Pf(t,a)}kb(t)&&Pb(t)}function v3(e){return ja(e)&&e.Ia.length<10}function E3(e,t){e.Ia.push(t);const n=js(e);n.N_()&&n.ea&&n.ta(t.mutations)}function kb(e){return ja(e)&&!js(e).O_()&&e.Ia.length>0}function Pb(e){js(e).start()}async function T3(e){js(e).ia()}async function w3(e){const t=js(e);for(const n of e.Ia)t.ta(n.mutations)}async function S3(e,t,n){const r=e.Ia.shift(),a=fy.from(r,t,n);await Vb(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await cd(e)}async function b3(e,t){t&&js(e).ea&&await async function(r,a){if(function(c){return a4(c)&&c!==dt.ABORTED}(a.code)){const l=r.Ia.shift();js(r).L_(),await Vb(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await cd(r)}}(e,t),kb(e)&&Pb(e)}async function nw(e,t){const n=Vt(e);n.asyncQueue.verifyOperationInProgress(),vt(za,"RemoteStore received new credentials");const r=ja(n);n.da.add(3),await mc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await ud(n)}async function A3(e,t){const n=Vt(e);t?(n.da.delete(2),await ud(n)):t||(n.da.add(2),await mc(n),n.Va.set("Unknown"))}function vl(e){return e.fa||(e.fa=function(n,r,a){const l=Vt(n);return l.oa(),new u3(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(e.datastore,e.asyncQueue,{e_:m3.bind(null,e),n_:p3.bind(null,e),i_:y3.bind(null,e),Y_:_3.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),wy(e)?Ty(e):e.Va.set("Unknown")):(await e.fa.stop(),Mb(e))})),e.fa}function js(e){return e.ga||(e.ga=function(n,r,a){const l=Vt(n);return l.oa(),new c3(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:T3.bind(null,e),i_:b3.bind(null,e),na:w3.bind(null,e),ra:S3.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await cd(e)):(await e.ga.stop(),e.Ia.length>0&&(vt(za,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(t,n,r,a,l){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,a,l){const c=Date.now()+r,d=new Sy(t,n,c,a,l);return d.start(r),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Et(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function by(e,t){if(Gr("AsyncQueue",`${t}: ${e}`),yl(e))return new Et(dt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{static emptySet(t){return new Wo(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Rt.comparator(n.key,r.key):(n,r)=>Rt.comparator(n.key,r.key),this.keyedMap=Mu(),this.sortedSet=new Se(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Wo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Wo;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(){this.pa=new Se(Rt.comparator)}track(t){const n=t.doc.key,r=this.pa.get(n);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(n,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(n):t.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):Dt(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,r)=>{t.push(r)}),t}}class hl{constructor(t,n,r,a,l,c,d,g,m){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(t,n,r,a,l){const c=[];return n.forEach(d=>{c.push({type:0,doc:d})}),new hl(t,n,Wo.emptySet(n),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&nd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class I3{constructor(){this.queries=rw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const a=Vt(n),l=a.queries;a.queries=rw(),l.forEach((c,d)=>{for(const g of d.Sa)g.onError(r)})})(this,new Et(dt.ABORTED,"Firestore shutting down"))}}function rw(){return new Fa(e=>ib(e),nd)}async function C3(e,t){const n=Vt(e);let r=3;const a=t.query;let l=n.queries.get(a);l?!l.Da()&&t.va()&&(r=2):(l=new R3,r=t.va()?0:1);try{switch(r){case 0:l.ba=await n.onListen(a,!0);break;case 1:l.ba=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=by(c,`Initialization of query '${jo(t.query)}' failed`);return void t.onError(d)}n.queries.set(a,l),l.Sa.push(t),t.Fa(n.onlineState),l.ba&&t.Ma(l.ba)&&Ay(n)}async function x3(e,t){const n=Vt(e),r=t.query;let a=3;const l=n.queries.get(r);if(l){const c=l.Sa.indexOf(t);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=t.va()?0:1:!l.Da()&&t.va()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function N3(e,t){const n=Vt(e);let r=!1;for(const a of t){const l=a.query,c=n.queries.get(l);if(c){for(const d of c.Sa)d.Ma(a)&&(r=!0);c.ba=a}}r&&Ay(n)}function D3(e,t,n){const r=Vt(e),a=r.queries.get(t);if(a)for(const l of a.Sa)l.onError(n);r.queries.delete(t)}function Ay(e){e.Ca.forEach(t=>{t.next()})}var Dp,sw;(sw=Dp||(Dp={})).xa="default",sw.Cache="cache";class O3{constructor(t,n,r){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const a of t.docChanges)a.type!==3&&r.push(a);t=new hl(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=hl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==Dp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(t){this.key=t}}class Ub{constructor(t){this.key=t}}class M3{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Yt(),this.mutatedKeys=Yt(),this.Za=rb(t),this.Xa=new Wo(this.Za)}get eu(){return this.Ha}tu(t,n){const r=n?n.nu:new iw,a=n?n.Xa:this.Xa;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((y,v)=>{const E=a.get(y),S=id(this.query,v)?v:null,M=!!E&&this.mutatedKeys.has(E.key),L=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let V=!1;E&&S?E.data.isEqual(S.data)?M!==L&&(r.track({type:3,doc:S}),V=!0):this.ru(E,S)||(r.track({type:2,doc:S}),V=!0,(g&&this.Za(S,g)>0||m&&this.Za(S,m)<0)&&(d=!0)):!E&&S?(r.track({type:0,doc:S}),V=!0):E&&!S&&(r.track({type:1,doc:E}),V=!0,(g||m)&&(d=!0)),V&&(S?(c=c.add(S),l=L?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{Xa:c,nu:r,Cs:d,mutatedKeys:l}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,a){const l=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const c=t.nu.wa();c.sort((y,v)=>function(S,M){const L=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt(20277,{Vt:V})}};return L(S)-L(M)}(y.type,v.type)||this.Za(y.doc,v.doc)),this.iu(r),a=a!=null&&a;const d=n&&!a?this.su():[],g=this.Ya.size===0&&this.current&&!a?1:0,m=g!==this.Ja;return this.Ja=g,c.length!==0||m?{snapshot:new hl(this.query,t.Xa,l,c,t.mutatedKeys,g===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new iw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Yt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return t.forEach(r=>{this.Ya.has(r)||n.push(new Ub(r))}),this.Ya.forEach(r=>{t.has(r)||n.push(new Lb(r))}),n}au(t){this.Ha=t.$s,this.Ya=Yt();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return hl.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Ry="SyncEngine";class V3{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class k3{constructor(t){this.key=t,this.cu=!1}}class P3{constructor(t,n,r,a,l,c){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new Fa(d=>ib(d),nd),this.Pu=new Map,this.Tu=new Set,this.Iu=new Se(Rt.comparator),this.Eu=new Map,this.du=new my,this.Au={},this.Ru=new Map,this.Vu=cl.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function L3(e,t,n=!0){const r=jb(e);let a;const l=r.hu.get(t);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.uu()):a=await zb(r,t,n,!0),a}async function U3(e,t){const n=jb(e);await zb(n,t,!0,!1)}async function zb(e,t,n,r){const a=await e3(e.localStore,ar(t)),l=a.targetId,c=e.sharedClientState.addLocalQueryTarget(l,n);let d;return r&&(d=await z3(e,t,l,c==="current",a.resumeToken)),e.isPrimaryClient&&n&&Db(e.remoteStore,a),d}async function z3(e,t,n,r,a){e.fu=(v,E,S)=>async function(L,V,B,F){let q=V.view.tu(B);q.Cs&&(q=await ZT(L.localStore,V.query,!1).then(({documents:D})=>V.view.tu(D,q)));const H=F&&F.targetChanges.get(V.targetId),nt=F&&F.targetMismatches.get(V.targetId)!=null,et=V.view.applyChanges(q,L.isPrimaryClient,H,nt);return ow(L,V.targetId,et.ou),et.snapshot}(e,v,E,S);const l=await ZT(e.localStore,t,!0),c=new M3(t,l.$s),d=c.tu(l.documents),g=gc.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",a),m=c.applyChanges(d,e.isPrimaryClient,g);ow(e,n,m.ou);const y=new V3(t,n,c);return e.hu.set(t,y),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),m.snapshot}async function B3(e,t,n){const r=Vt(e),a=r.hu.get(t),l=r.Pu.get(a.targetId);if(l.length>1)return r.Pu.set(a.targetId,l.filter(c=>!nd(c,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await xp(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),n&&vy(r.remoteStore,a.targetId),Op(r,a.targetId)}).catch(pl)):(Op(r,a.targetId),await xp(r.localStore,a.targetId,!0))}async function H3(e,t){const n=Vt(e),r=n.hu.get(t),a=n.Pu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vy(n.remoteStore,r.targetId))}async function q3(e,t,n){const r=X3(e);try{const a=await function(c,d){const g=Vt(c),m=Ce.now(),y=d.reduce((S,M)=>S.add(M.key),Yt());let v,E;return g.persistence.runTransaction("Locally write mutations","readwrite",S=>{let M=$r(),L=Yt();return g.Bs.getEntries(S,y).next(V=>{M=V,M.forEach((B,F)=>{F.isValidDocument()||(L=L.add(B))})}).next(()=>g.localDocuments.getOverlayedDocuments(S,M)).next(V=>{v=V;const B=[];for(const F of d){const q=e4(F,v.get(F.key).overlayedDocument);q!=null&&B.push(new Ys(F.key,q,K1(q.value.mapValue),Wn.exists(!0)))}return g.mutationQueue.addMutationBatch(S,m,B,d)}).next(V=>{E=V;const B=V.applyToLocalDocumentSet(v,L);return g.documentOverlayCache.saveOverlays(S,V.batchId,B)})}).then(()=>({batchId:E.batchId,changes:ab(v)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,g){let m=c.Au[c.currentUser.toKey()];m||(m=new Se(Bt)),m=m.insert(d,g),c.Au[c.currentUser.toKey()]=m}(r,a.batchId,n),await pc(r,a.changes),await cd(r.remoteStore)}catch(a){const l=by(a,"Failed to persist write");n.reject(l)}}async function Bb(e,t){const n=Vt(e);try{const r=await W4(n.localStore,t);t.targetChanges.forEach((a,l)=>{const c=n.Eu.get(l);c&&(ne(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.cu=!0:a.modifiedDocuments.size>0?ne(c.cu,14607):a.removedDocuments.size>0&&(ne(c.cu,42227),c.cu=!1))}),await pc(n,r,t)}catch(r){await pl(r)}}function aw(e,t,n){const r=Vt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.hu.forEach((l,c)=>{const d=c.view.Fa(t);d.snapshot&&a.push(d.snapshot)}),function(c,d){const g=Vt(c);g.onlineState=d;let m=!1;g.queries.forEach((y,v)=>{for(const E of v.Sa)E.Fa(d)&&(m=!0)}),m&&Ay(g)}(r.eventManager,t),a.length&&r.lu.Y_(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function F3(e,t,n){const r=Vt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const a=r.Eu.get(t),l=a&&a.key;if(l){let c=new Se(Rt.comparator);c=c.insert(l,Tn.newNoDocument(l,Mt.min()));const d=Yt().add(l),g=new od(Mt.min(),new Map,new Se(Bt),c,d);await Bb(r,g),r.Iu=r.Iu.remove(l),r.Eu.delete(t),Iy(r)}else await xp(r.localStore,t,!1).then(()=>Op(r,t,n)).catch(pl)}async function j3(e,t){const n=Vt(e),r=t.batch.batchId;try{const a=await Z4(n.localStore,t);qb(n,r,null),Hb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pc(n,a)}catch(a){await pl(a)}}async function G3(e,t,n){const r=Vt(e);try{const a=await function(c,d){const g=Vt(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return g.mutationQueue.lookupMutationBatch(m,d).next(v=>(ne(v!==null,37113),y=v.keys(),g.mutationQueue.removeMutationBatch(m,v))).next(()=>g.mutationQueue.performConsistencyCheck(m)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(m,y,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>g.localDocuments.getDocuments(m,y))})}(r.localStore,t);qb(r,t,n),Hb(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await pc(r,a)}catch(a){await pl(a)}}function Hb(e,t){(e.Ru.get(t)||[]).forEach(n=>{n.resolve()}),e.Ru.delete(t)}function qb(e,t,n){const r=Vt(e);let a=r.Au[r.currentUser.toKey()];if(a){const l=a.get(t);l&&(n?l.reject(n):l.resolve(),a=a.remove(t)),r.Au[r.currentUser.toKey()]=a}}function Op(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(r=>{e.du.containsKey(r)||Fb(e,r)})}function Fb(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);n!==null&&(vy(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),Iy(e))}function ow(e,t,n){for(const r of n)r instanceof Lb?(e.du.addReference(r.key,t),$3(e,r)):r instanceof Ub?(vt(Ry,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||Fb(e,r.key)):Dt(19791,{pu:r})}function $3(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(vt(Ry,"New document in limbo: "+n),e.Tu.add(r),Iy(e))}function Iy(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new Rt(pe.fromString(t)),r=e.Vu.next();e.Eu.set(r,new k3(n)),e.Iu=e.Iu.insert(n,r),Db(e.remoteStore,new Ds(ar(eb(n.path)),r,"TargetPurposeLimboResolution",Jf.le))}}async function pc(e,t,n){const r=Vt(e),a=[],l=[],c=[];r.hu.isEmpty()||(r.hu.forEach((d,g)=>{c.push(r.fu(g,t,n).then(m=>{var y;if((m||n)&&r.isPrimaryClient){const v=m?!m.fromCache:(y=n?.targetChanges.get(g.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(m){a.push(m);const v=yy.Rs(g.targetId,m);l.push(v)}}))}),await Promise.all(c),r.lu.Y_(a),await async function(g,m){const y=Vt(g);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>gt.forEach(m,E=>gt.forEach(E.ds,S=>y.persistence.referenceDelegate.addReference(v,E.targetId,S)).next(()=>gt.forEach(E.As,S=>y.persistence.referenceDelegate.removeReference(v,E.targetId,S)))))}catch(v){if(!yl(v))throw v;vt(_y,"Failed to update sequence numbers: "+v)}for(const v of m){const E=v.targetId;if(!v.fromCache){const S=y.xs.get(E),M=S.snapshotVersion,L=S.withLastLimboFreeSnapshotVersion(M);y.xs=y.xs.insert(E,L)}}}(r.localStore,l))}async function Y3(e,t){const n=Vt(e);if(!n.currentUser.isEqual(t)){vt(Ry,"User change. New user:",t.toKey());const r=await Ib(n.localStore,t);n.currentUser=t,function(l,c){l.Ru.forEach(d=>{d.forEach(g=>{g.reject(new Et(dt.CANCELLED,c))})}),l.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await pc(n,r.ks)}}function K3(e,t){const n=Vt(e),r=n.Eu.get(t);if(r&&r.cu)return Yt().add(r.key);{let a=Yt();const l=n.Pu.get(t);if(!l)return a;for(const c of l){const d=n.hu.get(c);a=a.unionWith(d.view.eu)}return a}}function jb(e){const t=Vt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=K3.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=F3.bind(null,t),t.lu.Y_=N3.bind(null,t.eventManager),t.lu.gu=D3.bind(null,t.eventManager),t}function X3(e){const t=Vt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=j3.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=G3.bind(null,t),t}class Lf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ld(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return Q4(this.persistence,new Y4,t.initialUser,this.serializer)}Su(t){return new Rb(py.fi,this.serializer)}bu(t){return new i3}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lf.provider={build:()=>new Lf};class Q3 extends Lf{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){ne(this.persistence.referenceDelegate instanceof kf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new O4(r,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new Rb(r=>kf.fi(r,n),this.serializer)}}class Mp{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Y3.bind(null,this.syncEngine),await A3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new I3}()}createDatastore(t){const n=ld(t.databaseInfo.databaseId),r=function(l){return new l3(l)}(t.databaseInfo);return function(l,c,d,g){return new f3(l,c,d,g)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,a,l,c,d){return new g3(r,a,l,c,d)}(this.localStore,this.datastore,t.asyncQueue,n=>aw(this.syncEngine,n,0),function(){return tw.C()?new tw:new r3}())}createSyncEngine(t,n){return function(a,l,c,d,g,m,y){const v=new P3(a,l,c,d,g,m);return y&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(a){const l=Vt(a);vt(za,"RemoteStore shutting down."),l.da.add(5),await mc(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Mp.provider={build:()=>new Mp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):Gr("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="FirestoreClient";class W3{constructor(t,n,r,a,l){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=En.UNAUTHENTICATED,this.clientId=U1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{vt(Gs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(vt(Gs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=by(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function $m(e,t){e.asyncQueue.verifyOperationInProgress(),vt(Gs,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async a=>{r.isEqual(a)||(await Ib(t.localStore,a),r=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function lw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await J3(e);vt(Gs,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>nw(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,a)=>nw(t.remoteStore,a)),e._onlineComponents=t}async function J3(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){vt(Gs,"Using user provided OfflineComponentProvider");try{await $m(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(a){return a.name==="FirebaseError"?a.code===dt.FAILED_PRECONDITION||a.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;al("Error using user provided cache. Falling back to memory cache: "+n),await $m(e,new Lf)}}else vt(Gs,"Using default OfflineComponentProvider"),await $m(e,new Q3(void 0));return e._offlineComponents}async function Gb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(vt(Gs,"Using user provided OnlineComponentProvider"),await lw(e,e._uninitializedComponentsProvider._online)):(vt(Gs,"Using default OnlineComponentProvider"),await lw(e,new Mp))),e._onlineComponents}function tk(e){return Gb(e).then(t=>t.syncEngine)}async function ek(e){const t=await Gb(e),n=t.eventManager;return n.onListen=L3.bind(null,t.syncEngine),n.onUnlisten=B3.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=U3.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=H3.bind(null,t.syncEngine),n}function nk(e,t,n={}){const r=new Ls;return e.asyncQueue.enqueueAndForget(async()=>function(l,c,d,g,m){const y=new Z3({next:E=>{y.xu(),c.enqueueAndForget(()=>x3(l,v)),E.fromCache&&g.source==="server"?m.reject(new Et(dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(E)},error:E=>m.reject(E)}),v=new O3(d,y,{includeMetadataChanges:!0,Qa:!0});return C3(l,v)}(await ek(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(e,t,n){if(!n)throw new Et(dt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ik(e,t,n,r){if(t===!0&&r===!0)throw new Et(dt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function cw(e){if(!Rt.isDocumentKey(e))throw new Et(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function hw(e){if(Rt.isDocumentKey(e))throw new Et(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function hd(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Dt(12329,{type:typeof e})}function Ba(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Et(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hd(e);throw new Et(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="firestore.googleapis.com",fw=!0;class dw{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Et(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Kb,this.ssl=fw}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:fw;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Ab;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<N4)throw new Et(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}ik("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$b((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Et(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Et(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Et(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class fd{constructor(t,n,r,a){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Et(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Et(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dw(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oV;switch(r.type){case"firstParty":return new hV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Et(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=uw.get(n);r&&(vt("ComponentProvider","Removing Datastore"),uw.delete(n),r.terminate())}(this),Promise.resolve()}}function rk(e,t,n,r={}){var a;e=Ba(e,fd);const l=dl(t),c=e._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:e._getEmulatorOptions()}),g=`${t}:${n}`;l&&(T1(`https://${g}`),w1("Firestore",!0)),c.host!==Kb&&c.host!==g&&al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:g,ssl:l,emulatorOptions:r});if(!Pa(m,d)&&(e._setSettings(m),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=En.MOCK_USER;else{y=OO(r.mockUserToken,(a=e._app)===null||a===void 0?void 0:a.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Et(dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new En(E)}e._authCredentials=new lV(new P1(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ga(this.firestore,t,this._query)}}class Jn{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Us(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Jn(this.firestore,t,this._key)}}class Us extends Ga{constructor(t,n,r){super(t,n,eb(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Jn(this.firestore,null,new Rt(t))}withConverter(t){return new Us(this.firestore,t,this._path)}}function dd(e,t,...n){if(e=Ye(e),Yb("collection","path",t),e instanceof fd){const r=pe.fromString(t,...n);return hw(r),new Us(e,null,r)}{if(!(e instanceof Jn||e instanceof Us))throw new Et(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(pe.fromString(t,...n));return hw(r),new Us(e.firestore,null,r)}}function $a(e,t,...n){if(e=Ye(e),arguments.length===1&&(t=U1.newId()),Yb("doc","path",t),e instanceof fd){const r=pe.fromString(t,...n);return cw(r),new Jn(e,null,new Rt(r))}{if(!(e instanceof Jn||e instanceof Us))throw new Et(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(pe.fromString(t,...n));return cw(r),new Jn(e.firestore,e instanceof Us?e.converter:null,new Rt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="AsyncQueue";class mw{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new xb(this,"async_queue_retry"),this.rc=()=>{const r=Gm();r&&vt(gw,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const n=Gm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=Gm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Ls;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!yl(t))throw t;vt(gw,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,Gr("INTERNAL UNHANDLED ERROR: ",pw(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(t,n,r){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const a=Sy.createAndSchedule(this,t,n,r,l=>this.uc(l));return this.Zu.push(a),a}oc(){this.Xu&&Dt(47125,{cc:pw(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function pw(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class yc extends fd{constructor(t,n,r,a){super(t,n,r,a),this.type="firestore",this._queue=new mw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new mw(t),this._firestoreClient=void 0,await t}}}function sk(e,t){const n=typeof e=="object"?e:R1(),r=typeof e=="string"?e:xf,a=ry(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=NO("firestore");l&&rk(a,...l)}return a}function Cy(e){if(e._terminated)throw new Et(dt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||ak(e),e._firestoreClient}function ak(e){var t,n,r;const a=e._freezeSettings(),l=function(d,g,m,y){return new RV(d,g,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,$b(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,a);e._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),e._firestoreClient=new W3(e._authCredentials,e._appCheckCredentials,e._queue,l,e._componentsProvider&&function(d){const g=d?._online.build();return{_offline:d?._offline.build(g),_online:g}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new fl(gn.fromBase64String(t))}catch(n){throw new Et(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new fl(gn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Et(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Et(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Et(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Bt(this._lat,t._lat)||Bt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=/^__.*__$/;class lk{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Ys(t,this.data,this.fieldMask,n,this.fieldTransforms):new dc(t,this.data,n,this.fieldTransforms)}}class Xb{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Ys(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Qb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt(40011,{Ic:e})}}class Oy{constructor(t,n,r,a,l,c){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new Oy(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.dc({path:r,Rc:!1});return a.Vc(t),a}mc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.dc({path:r,Rc:!1});return a.Ec(),a}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return Uf(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(Qb(this.Ic)&&ok.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class uk{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||ld(t)}bc(t,n,r,a=!1){return new Oy({Ic:t,methodName:n,wc:r,path:dn.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function My(e){const t=e._freezeSettings(),n=ld(e._databaseId);return new uk(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Zb(e,t,n,r,a,l={}){const c=e.bc(l.merge||l.mergeFields?2:0,t,n,a);Vy("Data must be an object, but it was:",c,r);const d=Wb(r,c);let g,m;if(l.merge)g=new Zn(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const E=Vp(t,v,n);if(!c.contains(E))throw new Et(dt.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);tA(y,E)||y.push(E)}g=new Zn(y),m=c.fieldTransforms.filter(v=>g.covers(v.field))}else g=null,m=c.fieldTransforms;return new lk(new Pn(d),g,m)}class md extends xy{_toFieldTransform(t){if(t.Ic!==2)throw t.Ic===1?t.gc(`${this._methodName}() can only appear at the top level of your update data`):t.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof md}}function ck(e,t,n,r){const a=e.bc(1,t,n);Vy("Data must be an object, but it was:",a,r);const l=[],c=Pn.empty();$s(r,(g,m)=>{const y=ky(t,g,n);m=Ye(m);const v=a.mc(y);if(m instanceof md)l.push(y);else{const E=_c(m,v);E!=null&&(l.push(y),c.set(y,E))}});const d=new Zn(l);return new Xb(c,d,a.fieldTransforms)}function hk(e,t,n,r,a,l){const c=e.bc(1,t,n),d=[Vp(t,r,n)],g=[a];if(l.length%2!=0)throw new Et(dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)d.push(Vp(t,l[E])),g.push(l[E+1]);const m=[],y=Pn.empty();for(let E=d.length-1;E>=0;--E)if(!tA(m,d[E])){const S=d[E];let M=g[E];M=Ye(M);const L=c.mc(S);if(M instanceof md)m.push(S);else{const V=_c(M,L);V!=null&&(m.push(S),y.set(S,V))}}const v=new Zn(m);return new Xb(y,v,c.fieldTransforms)}function fk(e,t,n,r=!1){return _c(n,e.bc(r?4:3,t))}function _c(e,t){if(Jb(e=Ye(e)))return Vy("Unsupported field value:",t,e),Wb(e,t);if(e instanceof xy)return function(r,a){if(!Qb(a.Ic))throw a.gc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let g=_c(d,a.fc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}}(e,t)}return function(r,a){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XV(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Ce.fromDate(r);return{timestampValue:Vf(a.serializer,l)}}if(r instanceof Ce){const l=new Ce(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vf(a.serializer,l)}}if(r instanceof Ny)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fl)return{bytesValue:_b(a.serializer,r._byteString)};if(r instanceof Jn){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:gy(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Dy)return function(c,d){return{mapValue:{fields:{[$1]:{stringValue:Y1},[Nf]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw d.gc("VectorValues must only contain numeric values.");return hy(d.serializer,m)})}}}}}}(r,a);throw a.gc(`Unsupported field value: ${hd(r)}`)}(e,t)}function Wb(e,t){const n={};return B1(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$s(e,(r,a)=>{const l=_c(a,t.Ac(r));l!=null&&(n[r]=l)}),{mapValue:{fields:n}}}function Jb(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ce||e instanceof Ny||e instanceof fl||e instanceof Jn||e instanceof xy||e instanceof Dy)}function Vy(e,t,n){if(!Jb(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const r=hd(n);throw r==="an object"?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function Vp(e,t,n){if((t=Ye(t))instanceof gd)return t._internalPath;if(typeof t=="string")return ky(e,t);throw Uf("Field path arguments must be of type string or ",e,!1,void 0,n)}const dk=new RegExp("[~\\*/\\[\\]]");function ky(e,t,n){if(t.search(dk)>=0)throw Uf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new gd(...t.split("."))._internalPath}catch{throw Uf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Uf(e,t,n,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${t}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${r}`),c&&(g+=` in document ${a}`),g+=")"),new Et(dt.INVALID_ARGUMENT,d+e+g)}function tA(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(t,n,r,a,l){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new gk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(pd("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gk extends eA{data(){return super.data()}}function pd(e,t){return typeof t=="string"?ky(e,t):t instanceof gd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Et(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Py{}class nA extends Py{}function pk(e,t,...n){let r=[];t instanceof Py&&r.push(t),r=r.concat(n),function(l){const c=l.filter(g=>g instanceof Ly).length,d=l.filter(g=>g instanceof yd).length;if(c>1||c>0&&d>0)throw new Et(dt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)e=a._apply(e);return e}class yd extends nA{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new yd(t,n,r)}_apply(t){const n=this._parse(t);return iA(t._query,n),new Ga(t.firestore,t.converter,Sp(t._query,n))}_parse(t){const n=My(t.firestore);return function(l,c,d,g,m,y,v){let E;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Et(dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){_w(v,y);const M=[];for(const L of v)M.push(yw(g,l,L));E={arrayValue:{values:M}}}else E=yw(g,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||_w(v,y),E=fk(d,c,v,y==="in"||y==="not-in");return Be.create(m,y,E)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function yk(e,t,n){const r=t,a=pd("where",e);return yd._create(a,r,n)}class Ly extends Py{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Ly(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Vi.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const g of d)iA(c,g),c=Sp(c,g)}(t._query,n),new Ga(t.firestore,t.converter,Sp(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Uy extends nA{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Uy(t,n)}_apply(t){const n=function(a,l,c){if(a.startAt!==null)throw new Et(dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Et(dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nc(l,c)}(t._query,this._field,this._direction);return new Ga(t.firestore,t.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new _l(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,n))}}function _k(e,t="asc"){const n=t,r=pd("orderBy",e);return Uy._create(r,n)}function yw(e,t,n){if(typeof(n=Ye(n))=="string"){if(n==="")throw new Et(dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nb(t)&&n.indexOf("/")!==-1)throw new Et(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(pe.fromString(n));if(!Rt.isDocumentKey(r))throw new Et(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return OT(e,new Rt(r))}if(n instanceof Jn)return OT(e,n._key);throw new Et(dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hd(n)}.`)}function _w(e,t){if(!Array.isArray(e)||e.length===0)throw new Et(dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function iA(e,t){const n=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Et(dt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Et(dt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class vk{convertValue(t,n="none"){switch(Fs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Me(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(qs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Dt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return $s(t,(a,l)=>{r[a]=this.convertValue(l,n)}),r}convertVectorValue(t){var n,r,a;const l=(a=(r=(n=t.fields)===null||n===void 0?void 0:n[Nf].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>Me(c.doubleValue));return new Dy(l)}convertGeoPoint(t){return new Ny(Me(t.latitude),Me(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=ed(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ju(t));default:return null}}convertTimestamp(t){const n=Hs(t);return new Ce(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=pe.fromString(t);ne(bb(r),9688,{name:t});const a=new tc(r.get(1),r.get(3)),l=new Rt(r.popFirst(5));return a.isEqual(n)||Gr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ek extends eA{constructor(t,n,r,a,l,c){super(t,n,r,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new ff(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(pd("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ff extends Ek{data(t={}){return super.data(t)}}class Tk{constructor(t,n,r,a){this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new Jh(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new ff(this._firestore,this._userDataWriter,r.key,r,new Jh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Et(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const g=new ff(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Jh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const g=new ff(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Jh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,y=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:wk(d.type),doc:g,oldIndex:m,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function wk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt(61501,{type:e})}}class Sk extends vk{constructor(t){super(),this.firestore=t}convertBytes(t){return new fl(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Jn(this.firestore,null,n)}}function _d(e){e=Ba(e,Ga);const t=Ba(e.firestore,yc),n=Cy(t),r=new Sk(t);return mk(e._query),nk(n,e._query).then(a=>new Tk(t,r,e,a))}function vc(e,t,n){e=Ba(e,Jn);const r=Ba(e.firestore,yc),a=rA(e.converter,t,n);return zy(r,[Zb(My(r),"setDoc",e._key,a,e.converter!==null,n).toMutation(e._key,Wn.none())])}function bk(e){return zy(Ba(e.firestore,yc),[new ad(e._key,Wn.none())])}function zy(e,t){return function(r,a){const l=new Ls;return r.asyncQueue.enqueueAndForget(async()=>q3(await tk(r),a,l)),l.promise}(Cy(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=My(t)}set(t,n,r){this._verifyNotCommitted();const a=Ym(t,this._firestore),l=rA(a.converter,n,r),c=Zb(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,Wn.none())),this}update(t,n,r,...a){this._verifyNotCommitted();const l=Ym(t,this._firestore);let c;return c=typeof(n=Ye(n))=="string"||n instanceof gd?hk(this._dataReader,"WriteBatch.update",l._key,n,r,a):ck(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(c.toMutation(l._key,Wn.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Ym(t,this._firestore);return this._mutations=this._mutations.concat(new ad(n._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Et(dt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ym(e,t){if((e=Ye(e)).firestore!==t)throw new Et(dt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(e){return Cy(e=Ba(e,yc)),new Ak(e,t=>zy(e,t))}(function(t,n=!0){(function(a){ml=a})(gl),sl(new La("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new yc(new uV(r.getProvider("auth-internal")),new fV(c,r.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Et(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tc(m.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),ks(ET,TT,t),ks(ET,TT,"esm2017")})();function By(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function sA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ik=sA,aA=new hc("auth","Firebase",sA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf=new ny("@firebase/auth");function Ck(e,...t){zf.logLevel<=$t.WARN&&zf.warn(`Auth (${gl}): ${e}`,...t)}function df(e,...t){zf.logLevel<=$t.ERROR&&zf.error(`Auth (${gl}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(e,...t){throw Hy(e,...t)}function lr(e,...t){return Hy(e,...t)}function oA(e,t,n){const r=Object.assign(Object.assign({},Ik()),{[t]:n});return new hc("auth","Firebase",r).create(t,{appName:e.name})}function Hr(e){return oA(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hy(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return aA.create(e,...t)}function Nt(e,t,...n){if(!e)throw Hy(t,...n)}function Ur(e){const t="INTERNAL ASSERTION FAILED: "+e;throw df(t),new Error(t)}function Yr(e,t){e||Ur(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function xk(){return vw()==="http:"||vw()==="https:"}function vw(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xk()||UO()||"connection"in navigator)?navigator.onLine:!0}function Dk(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(t,n){this.shortDelay=t,this.longDelay=n,Yr(n>t,"Short delay should be less than long delay!"),this.isMobile=kO()||zO()}get(){return Nk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(e,t){Yr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Vk=new Ec(3e4,6e4);function Ks(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Xs(e,t,n,r,a={}){return uA(e,a,async()=>{let l={},c={};r&&(t==="GET"?c=r:l={body:JSON.stringify(r)});const d=fc(Object.assign({key:e.config.apiKey},c)).slice(1),g=await e._getAdditionalHeaders();g["Content-Type"]="application/json",e.languageCode&&(g["X-Firebase-Locale"]=e.languageCode);const m=Object.assign({method:t,headers:g},l);return LO()||(m.referrerPolicy="no-referrer"),e.emulatorConfig&&dl(e.emulatorConfig.host)&&(m.credentials="include"),lA.fetch()(await cA(e,e.config.apiHost,n,d),m)})}async function uA(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ok),t);try{const a=new Pk(e),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw tf(e,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[g,m]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw tf(e,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw tf(e,"email-already-in-use",c);if(g==="USER_DISABLED")throw tf(e,"user-disabled",c);const y=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw oA(e,y,m);ki(e,y)}}catch(a){if(a instanceof Xr)throw a;ki(e,"network-request-failed",{message:String(a)})}}async function Tc(e,t,n,r,a={}){const l=await Xs(e,t,n,r,a);return"mfaPendingCredential"in l&&ki(e,"multi-factor-auth-required",{_serverResponse:l}),l}async function cA(e,t,n,r){const a=`${t}${n}?${r}`,l=e,c=l.config.emulator?qy(e.config,a):`${e.config.apiScheme}://${a}`;return Mk.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function kk(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Pk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(lr(this.auth,"network-request-failed")),Vk.get())})}}function tf(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=lr(e,t,r);return a.customData._tokenResponse=n,a}function Ew(e){return e!==void 0&&e.enterprise!==void 0}class Lk{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return kk(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Uk(e,t){return Xs(e,"GET","/v2/recaptchaConfig",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(e,t){return Xs(e,"POST","/v1/accounts:delete",t)}async function Bf(e,t){return Xs(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Bk(e,t=!1){const n=Ye(e),r=await n.getIdToken(t),a=Fy(r);Nt(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:Bu(Km(a.auth_time)),issuedAtTime:Bu(Km(a.iat)),expirationTime:Bu(Km(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Km(e){return Number(e)*1e3}function Fy(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return df("JWT malformed, contained fewer than 3 sections"),null;try{const a=y1(n);return a?JSON.parse(a):(df("Failed to decode base64 JWT payload"),null)}catch(a){return df("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Tw(e){const t=Fy(e);return Nt(t,"internal-error"),Nt(typeof t.exp<"u","internal-error"),Nt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Xr&&Hk(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function Hk({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bu(this.lastLoginAt),this.creationTime=Bu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hf(e){var t;const n=e.auth,r=await e.getIdToken(),a=await sc(e,Bf(n,{idToken:r}));Nt(a?.users.length,n,"internal-error");const l=a.users[0];e._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?hA(l.providerUserInfo):[],d=jk(e.providerData,c),g=e.isAnonymous,m=!(e.email&&l.passwordHash)&&!d?.length,y=g?m:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Pp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(e,v)}async function Fk(e){const t=Ye(e);await Hf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function jk(e,t){return[...e.filter(r=>!t.some(a=>a.providerId===r.providerId)),...t]}function hA(e){return e.map(t=>{var{providerId:n}=t,r=By(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gk(e,t){const n=await uA(e,{},async()=>{const r=fc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=e.config,c=await cA(e,a,"/v1/token",`key=${l}`),d=await e._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:d,body:r};return e.emulatorConfig&&dl(e.emulatorConfig.host)&&(g.credentials="include"),lA.fetch()(c,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $k(e,t){return Xs(e,"POST","/v2/accounts:revokeToken",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Nt(t.idToken,"internal-error"),Nt(typeof t.idToken<"u","internal-error"),Nt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Tw(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Nt(t.length!==0,"internal-error");const n=Tw(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Nt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:a,expiresIn:l}=await Gk(t,n);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:a,expirationTime:l}=n,c=new Jo;return r&&(Nt(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),a&&(Nt(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),l&&(Nt(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Jo,this.toJSON())}_performRefresh(){return Ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(e,t){Nt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Oi{constructor(t){var{uid:n,auth:r,stsTokenManager:a}=t,l=By(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Pp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await sc(this,this.stsTokenManager.getToken(this.auth,t));return Nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Bk(this,t)}reload(){return Fk(this)}_assign(t){this!==t&&(Nt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Oi(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await Hf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vi(this.auth.app))return Promise.reject(Hr(this.auth));const t=await this.getIdToken();return await sc(this,zk(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,a,l,c,d,g,m,y;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,E=(a=n.email)!==null&&a!==void 0?a:void 0,S=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,M=(c=n.photoURL)!==null&&c!==void 0?c:void 0,L=(d=n.tenantId)!==null&&d!==void 0?d:void 0,V=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,B=(m=n.createdAt)!==null&&m!==void 0?m:void 0,F=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:q,emailVerified:H,isAnonymous:nt,providerData:et,stsTokenManager:D}=n;Nt(q&&D,t,"internal-error");const R=Jo.fromJSON(this.name,D);Nt(typeof q=="string",t,"internal-error"),Ss(v,t.name),Ss(E,t.name),Nt(typeof H=="boolean",t,"internal-error"),Nt(typeof nt=="boolean",t,"internal-error"),Ss(S,t.name),Ss(M,t.name),Ss(L,t.name),Ss(V,t.name),Ss(B,t.name),Ss(F,t.name);const I=new Oi({uid:q,auth:t,email:E,emailVerified:H,displayName:v,isAnonymous:nt,photoURL:M,phoneNumber:S,tenantId:L,stsTokenManager:R,createdAt:B,lastLoginAt:F});return et&&Array.isArray(et)&&(I.providerData=et.map(P=>Object.assign({},P))),V&&(I._redirectEventId=V),I}static async _fromIdTokenResponse(t,n,r=!1){const a=new Jo;a.updateFromServerResponse(n);const l=new Oi({uid:n.localId,auth:t,stsTokenManager:a,isAnonymous:r});return await Hf(l),l}static async _fromGetAccountInfoResponse(t,n,r){const a=n.users[0];Nt(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?hA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Jo;d.updateFromIdToken(r);const g=new Oi({uid:a.localId,auth:t,stsTokenManager:d,isAnonymous:c}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Pp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(g,m),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=new Map;function zr(e){Yr(e instanceof Function,"Expected a class definition");let t=ww.get(e);return t?(Yr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ww.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}fA.type="NONE";const Sw=fA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(e,t,n){return`firebase:${e}:${t}:${n}`}class tl{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=gf(this.userKey,a.apiKey,l),this.fullPersistenceKey=gf("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Bf(this.auth,{idToken:t}).catch(()=>{});return n?Oi._fromGetAccountInfoResponse(this.auth,n,t):null}return Oi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new tl(zr(Sw),t,r);const a=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=a[0]||zr(Sw);const c=gf(r,t.config.apiKey,t.name);let d=null;for(const m of n)try{const y=await m._get(c);if(y){let v;if(typeof y=="string"){const E=await Bf(t,{idToken:y}).catch(()=>{});if(!E)break;v=await Oi._fromGetAccountInfoResponse(t,E,y)}else v=Oi._fromJSON(t,y);m!==l&&(d=v),l=m;break}}catch{}const g=a.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new tl(l,t,r):(l=g[0],d&&await l._set(c,d.toJSON()),await Promise.all(n.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new tl(l,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(pA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(dA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_A(t))return"Blackberry";if(vA(t))return"Webos";if(gA(t))return"Safari";if((t.includes("chrome/")||mA(t))&&!t.includes("edge/"))return"Chrome";if(yA(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function dA(e=wn()){return/firefox\//i.test(e)}function gA(e=wn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function mA(e=wn()){return/crios\//i.test(e)}function pA(e=wn()){return/iemobile/i.test(e)}function yA(e=wn()){return/android/i.test(e)}function _A(e=wn()){return/blackberry/i.test(e)}function vA(e=wn()){return/webos/i.test(e)}function jy(e=wn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Yk(e=wn()){var t;return jy(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Kk(){return BO()&&document.documentMode===10}function EA(e=wn()){return jy(e)||yA(e)||vA(e)||_A(e)||/windows phone/i.test(e)||pA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(e,t=[]){let n;switch(e){case"Browser":n=bw(wn());break;case"Worker":n=`${bw(wn())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${gl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=l=>new Promise((c,d)=>{try{const g=t(l);c(g)}catch(g){d(g)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk(e,t={}){return Xs(e,"GET","/v2/passwordPolicy",Ks(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=6;class Wk{constructor(t){var n,r,a,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:Zk,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,a,l,c,d;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,g),this.validatePasswordCharacterOptions(t,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(a=g.containsLowercaseLetter)!==null&&a!==void 0?a:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(c=g.containsNumericCharacter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),g}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),a&&(n.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<t.length;a++)r=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(t,n,r,a){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Aw(this),this.idTokenSubscription=new Aw(this),this.beforeStateQueue=new Xk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=zr(n)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await tl.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Bf(this,{idToken:t}),r=await Oi._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(vi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=a?._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===d)&&g?.user&&(a=g.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Hf(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Dk()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(vi(this.app))return Promise.reject(Hr(this));const n=t?Ye(t):null;return n&&Nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Nt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return vi(this.app)?Promise.reject(Hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return vi(this.app)?Promise.reject(Hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Qk(this),n=new Wk(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new hc("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await $k(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&zr(t)||this._popupRedirectResolver;Nt(n,this,"argument-error"),this.redirectPersistenceManager=await tl.create(this,[zr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Nt(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,r,a);return()=>{c=!0,g()}}else{const g=t.addObserver(n);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=TA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var t;if(vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n?.error&&Ck(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Ya(e){return Ye(e)}class Aw{constructor(t){this.auth=t,this.observer=null,this.addObserver=KO(n=>this.observer=n)}get next(){return Nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tP(e){vd=e}function wA(e){return vd.loadJS(e)}function eP(){return vd.recaptchaEnterpriseScript}function nP(){return vd.gapiScript}function iP(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class rP{constructor(){this.enterprise=new sP}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class sP{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const aP="recaptcha-enterprise",SA="NO_RECAPTCHA";class oP{constructor(t){this.type=aP,this.auth=Ya(t)}async verify(t="verify",n=!1){async function r(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{Uk(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new Lk(g);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(g=>{d(g)})})}function a(l,c,d){const g=window.grecaptcha;Ew(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:t}).then(m=>{c(m)}).catch(()=>{c(SA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new rP().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(d=>{if(!n&&Ew(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=eP();g.length!==0&&(g+=d),wA(g).then(()=>{a(d,l,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function Rw(e,t,n,r=!1,a=!1){const l=new oP(e);let c;if(a)c=SA;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const d=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const g=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const g=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Lp(e,t,n,r,a){var l;if(!((l=e._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Rw(e,t,n,n==="getOobCode");return r(e,c)}else return r(e,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Rw(e,t,n,n==="getOobCode");return r(e,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(e,t){const n=ry(e,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(Pa(l,t??{}))return a;ki(a,"already-initialized")}return n.initialize({options:t})}function uP(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(zr);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function cP(e,t,n){const r=Ya(e);Nt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const a=!1,l=bA(t),{host:c,port:d}=hP(t),g=d===null?"":`:${d}`,m={url:`${l}//${c}${g}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Nt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Nt(Pa(m,r.config.emulator)&&Pa(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,dl(c)?(T1(`${l}//${c}${g}`),w1("Auth",!0)):fP()}function bA(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function hP(e){const t=bA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:Iw(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Iw(c)}}}function Iw(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function fP(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Ur("not implemented")}_getIdTokenResponse(t){return Ur("not implemented")}_linkToIdToken(t,n){return Ur("not implemented")}_getReauthenticationResolver(t){return Ur("not implemented")}}async function dP(e,t){return Xs(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP(e,t){return Tc(e,"POST","/v1/accounts:signInWithPassword",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(e,t){return Tc(e,"POST","/v1/accounts:signInWithEmailLink",Ks(e,t))}async function pP(e,t){return Tc(e,"POST","/v1/accounts:signInWithEmailLink",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends Gy{constructor(t,n,r,a=null){super("password",r),this._email=t,this._password=n,this._tenantId=a}static _fromEmailAndPassword(t,n){return new ac(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new ac(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lp(t,n,"signInWithPassword",gP);case"emailLink":return mP(t,{email:this._email,oobCode:this._password});default:ki(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lp(t,r,"signUpPassword",dP);case"emailLink":return pP(t,{idToken:n,email:this._email,oobCode:this._password});default:ki(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(e,t){return Tc(e,"POST","/v1/accounts:signInWithIdp",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="http://localhost";class Ha extends Gy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ha(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ki("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:a}=n,l=By(n,["providerId","signInMethod"]);if(!r||!a)return null;const c=new Ha(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const n=this.buildRequest();return el(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,el(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,el(t,n)}buildRequest(){const t={requestUri:yP,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=fc(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vP(e){const t=Nu(Du(e)).link,n=t?Nu(Du(t)).deep_link_id:null,r=Nu(Du(e)).deep_link_id;return(r?Nu(Du(r)).link:null)||r||n||t||e}class $y{constructor(t){var n,r,a,l,c,d;const g=Nu(Du(t)),m=(n=g.apiKey)!==null&&n!==void 0?n:null,y=(r=g.oobCode)!==null&&r!==void 0?r:null,v=_P((a=g.mode)!==null&&a!==void 0?a:null);Nt(m&&y&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=y,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=g.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=g.tenantId)!==null&&d!==void 0?d:null}static parseLink(t){const n=vP(t);try{return new $y(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.providerId=El.PROVIDER_ID}static credential(t,n){return ac._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=$y.parseLink(n);return Nt(r,"argument-error"),ac._fromEmailAndCode(t,r.code,r.tenantId)}}El.PROVIDER_ID="password";El.EMAIL_PASSWORD_SIGN_IN_METHOD="password";El.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends AA{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends wc{constructor(){super("facebook.com")}static credential(t){return Ha._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Is.credentialFromTaggedObject(t)}static credentialFromError(t){return Is.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Is.credential(t.oauthAccessToken)}catch{return null}}}Is.FACEBOOK_SIGN_IN_METHOD="facebook.com";Is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ha._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Cs.credentialFromTaggedObject(t)}static credentialFromError(t){return Cs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Cs.credential(n,r)}catch{return null}}}Cs.GOOGLE_SIGN_IN_METHOD="google.com";Cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends wc{constructor(){super("github.com")}static credential(t){return Ha._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return xs.credentialFromTaggedObject(t)}static credentialFromError(t){return xs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return xs.credential(t.oauthAccessToken)}catch{return null}}}xs.GITHUB_SIGN_IN_METHOD="github.com";xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends wc{constructor(){super("twitter.com")}static credential(t,n){return Ha._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ns.credentialFromTaggedObject(t)}static credentialFromError(t){return Ns.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ns.credential(n,r)}catch{return null}}}Ns.TWITTER_SIGN_IN_METHOD="twitter.com";Ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EP(e,t){return Tc(e,"POST","/v1/accounts:signUp",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,a=!1){const l=await Oi._fromIdTokenResponse(t,r,a),c=Cw(r);return new qa({user:l,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const a=Cw(r);return new qa({user:t,providerId:a,_tokenResponse:r,operationType:n})}}function Cw(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf extends Xr{constructor(t,n,r,a){var l;super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,qf.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,a){return new qf(t,n,r,a)}}function RA(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?qf._fromErrorAndOperation(e,l,t,r):l})}async function TP(e,t,n=!1){const r=await sc(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return qa._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(e,t,n=!1){const{auth:r}=e;if(vi(r.app))return Promise.reject(Hr(r));const a="reauthenticate";try{const l=await sc(e,RA(r,a,t,e),n);Nt(l.idToken,r,"internal-error");const c=Fy(l.idToken);Nt(c,r,"internal-error");const{sub:d}=c;return Nt(e.uid===d,r,"user-mismatch"),qa._forOperation(e,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&ki(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IA(e,t,n=!1){if(vi(e.app))return Promise.reject(Hr(e));const r="signIn",a=await RA(e,r,t),l=await qa._fromIdTokenResponse(e,r,a);return n||await e._updateCurrentUser(l.user),l}async function SP(e,t){return IA(Ya(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(e){const t=Ya(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function bP(e,t,n){if(vi(e.app))return Promise.reject(Hr(e));const r=Ya(e),c=await Lp(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",EP).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&CA(e),g}),d=await qa._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function AP(e,t,n){return vi(e.app)?Promise.reject(Hr(e)):SP(Ye(e),El.credential(t,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&CA(e),r})}function RP(e,t,n,r){return Ye(e).onIdTokenChanged(t,n,r)}function IP(e,t,n){return Ye(e).beforeAuthStateChanged(t,n)}function xA(e,t,n,r){return Ye(e).onAuthStateChanged(t,n,r)}function NA(e){return Ye(e).signOut()}const Ff="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ff,"1"),this.storage.removeItem(Ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=1e3,xP=10;class OA extends DA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&t(n,a,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((c,d,g)=>{this.notifyListeners(c,g)});return}const r=t.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);Kk()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,xP):a()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},CP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}OA.type="LOCAL";const NP=OA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA extends DA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}MA.type="SESSION";const VA=MA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(a=>a.isListeningto(t));if(n)return n;const r=new Ed(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async m=>m(n.origin,l)),g=await DP(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ed.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,g)=>{const m=Yy("",20);a.port1.start();const y=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(v){const E=v;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(E.data.response);break;default:clearTimeout(y),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:m,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(){return window}function MP(e){ur().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(){return typeof ur().WorkerGlobalScope<"u"&&typeof ur().importScripts=="function"}async function VP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kP(){var e;return((e=navigator?.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function PP(){return kA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="firebaseLocalStorageDb",LP=1,jf="firebaseLocalStorage",LA="fbase_key";class Sc{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Td(e,t){return e.transaction([jf],t?"readwrite":"readonly").objectStore(jf)}function UP(){const e=indexedDB.deleteDatabase(PA);return new Sc(e).toPromise()}function Up(){const e=indexedDB.open(PA,LP);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(jf,{keyPath:LA})}catch(a){n(a)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(jf)?t(r):(r.close(),await UP(),t(await Up()))})})}async function xw(e,t,n){const r=Td(e,!0).put({[LA]:t,value:n});return new Sc(r).toPromise()}async function zP(e,t){const n=Td(e,!1).get(t),r=await new Sc(n).toPromise();return r===void 0?null:r.value}function Nw(e,t){const n=Td(e,!0).delete(t);return new Sc(n).toPromise()}const BP=800,HP=3;class UA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Up(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>HP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ed._getInstance(PP()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await VP(),!this.activeServiceWorker)return;this.sender=new OP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||kP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Up();return await xw(t,Ff,"1"),await Nw(t,Ff),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>xw(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>zP(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Nw(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=Td(a,!1).getAll();return new Sc(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UA.type="LOCAL";const qP=UA;new Ec(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(e,t){return t?zr(t):(Nt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky extends Gy{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return el(t,this._buildIdpRequest())}_linkToIdToken(t,n){return el(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return el(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function jP(e){return IA(e.auth,new Ky(e),e.bypassAuthState)}function GP(e){const{auth:t,user:n}=e;return Nt(n,t,"internal-error"),wP(n,new Ky(e),e.bypassAuthState)}async function $P(e){const{auth:t,user:n}=e;return Nt(n,t,"internal-error"),TP(n,new Ky(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(t,n,r,a,l=!1){this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(m){this.reject(m)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return jP;case"linkViaPopup":case"linkViaRedirect":return $P;case"reauthViaPopup":case"reauthViaRedirect":return GP;default:ki(this.auth,"internal-error")}}resolve(t){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=new Ec(2e3,1e4);class Ko extends zA{constructor(t,n,r,a,l){super(t,n,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Ko.currentPopupAction&&Ko.currentPopupAction.cancel(),Ko.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Nt(t,this.auth,"internal-error"),t}async onExecution(){Yr(this.filter.length===1,"Popup operations only handle one event");const t=Yy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ko.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,YP.get())};t()}}Ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="pendingRedirect",mf=new Map;class XP extends zA{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=mf.get(this.auth._key());if(!t){try{const r=await QP(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}mf.set(this.auth._key(),t)}return this.bypassAuthState||mf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QP(e,t){const n=JP(t),r=WP(e);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function ZP(e,t){mf.set(e._key(),t)}function WP(e){return zr(e._redirectPersistence)}function JP(e){return gf(KP,e.config.apiKey,e.name)}async function t6(e,t,n=!1){if(vi(e.app))return Promise.reject(Hr(e));const r=Ya(e),a=FP(r,t),c=await new XP(r,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=10*60*1e3;class n6{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!i6(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!BA(t)){const a=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(lr(this.auth,a))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=e6&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dw(t))}saveEventToCache(t){this.cachedEventUids.add(Dw(t)),this.lastProcessedEventTime=Date.now()}}function Dw(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function BA({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function i6(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BA(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r6(e,t={}){return Xs(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a6=/^https?/;async function o6(e){if(e.config.emulator)return;const{authorizedDomains:t}=await r6(e);for(const n of t)try{if(l6(n))return}catch{}ki(e,"unauthorized-domain")}function l6(e){const t=kp(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const c=new URL(e);return c.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!a6.test(n))return!1;if(s6.test(e))return r===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=new Ec(3e4,6e4);function Ow(){const e=ur().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function c6(e){return new Promise((t,n)=>{var r,a,l;function c(){Ow(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ow(),n(lr(e,"network-request-failed"))},timeout:u6.get()})}if(!((a=(r=ur().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)t(gapi.iframes.getContext());else if(!((l=ur().gapi)===null||l===void 0)&&l.load)c();else{const d=iP("iframefcb");return ur()[d]=()=>{gapi.load?c():n(lr(e,"network-request-failed"))},wA(`${nP()}?onload=${d}`).catch(g=>n(g))}}).catch(t=>{throw pf=null,t})}let pf=null;function h6(e){return pf=pf||c6(e),pf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=new Ec(5e3,15e3),d6="__/auth/iframe",g6="emulator/auth/iframe",m6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},p6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function y6(e){const t=e.config;Nt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?qy(t,g6):`https://${e.config.authDomain}/${d6}`,r={apiKey:t.apiKey,appName:e.name,v:gl},a=p6.get(e.config.apiHost);a&&(r.eid=a);const l=e._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${fc(r).slice(1)}`}async function _6(e){const t=await h6(e),n=ur().gapi;return Nt(n,e,"internal-error"),t.open({where:document.body,url:y6(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:m6,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=lr(e,"network-request-failed"),d=ur().setTimeout(()=>{l(c)},f6.get());function g(){ur().clearTimeout(d),a(r)}r.ping(g).then(g,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},E6=500,T6=600,w6="_blank",S6="http://localhost";class Mw{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function b6(e,t,n,r=E6,a=T6){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const g=Object.assign(Object.assign({},v6),{width:r.toString(),height:a.toString(),top:l,left:c}),m=wn().toLowerCase();n&&(d=mA(m)?w6:n),dA(m)&&(t=t||S6,g.scrollbars="yes");const y=Object.entries(g).reduce((E,[S,M])=>`${E}${S}=${M},`,"");if(Yk(m)&&d!=="_self")return A6(t||"",d),new Mw(null);const v=window.open(t||"",d,y);Nt(v,e,"popup-blocked");try{v.focus()}catch{}return new Mw(v)}function A6(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6="__/auth/handler",I6="emulator/auth/handler",C6=encodeURIComponent("fac");async function Vw(e,t,n,r,a,l){Nt(e.config.authDomain,e,"auth-domain-config-required"),Nt(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:gl,eventId:a};if(t instanceof AA){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",YO(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(t instanceof wc){const y=t.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}e.tenantId&&(c.tid=e.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const g=await e._getAppCheckToken(),m=g?`#${C6}=${encodeURIComponent(g)}`:"";return`${x6(e)}?${fc(d).slice(1)}${m}`}function x6({config:e}){return e.emulator?qy(e,I6):`https://${e.authDomain}/${R6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="webStorageSupport";class N6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VA,this._completeRedirectFn=t6,this._overrideRedirectResult=ZP}async _openPopup(t,n,r,a){var l;Yr((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await Vw(t,n,r,kp(),a);return b6(t,c,Yy())}async _openRedirect(t,n,r,a){await this._originValidation(t);const l=await Vw(t,n,r,kp(),a);return MP(l),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(Yr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await _6(t),r=new n6(t);return n.register("authEvent",a=>(Nt(a?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Xm,{type:Xm},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[Xm];c!==void 0&&n(!!c),ki(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=o6(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return EA()||gA()||jy()}}const D6=N6;var kw="@firebase/auth",Pw="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function V6(e){sl(new La("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Nt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:d,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TA(e)},m=new Jk(r,a,l,g);return uP(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),sl(new La("auth-internal",t=>{const n=Ya(t.getProvider("auth").getImmediate());return(r=>new O6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ks(kw,Pw,M6(e)),ks(kw,Pw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6=5*60,P6=E1("authIdTokenMaxAge")||k6;let Lw=null;const L6=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>P6)return;const a=n?.token;Lw!==a&&(Lw=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function U6(e=R1()){const t=ry(e,"auth");if(t.isInitialized())return t.getImmediate();const n=lP(e,{popupRedirectResolver:D6,persistence:[qP,NP,VA]}),r=E1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=L6(l.toString());IP(n,c,()=>c(n.currentUser)),RP(n,d=>c(d))}}const a=_1("auth");return a&&cP(n,`http://${a}`),n}function z6(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}tP({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=a=>{const l=lr("internal-error");l.customData=a,n(l)},r.type="text/javascript",r.charset="UTF-8",z6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});V6("Browser");const B6={apiKey:"AIzaSyByTZ08eCsc2wv0VIWUHNtHSdmAA_JI5hM",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},HA=A1(B6),Ti=sk(HA),Ca=U6(HA),Kr={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},Vn={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function H6({onAuthed:e}){const[t,n]=X.useState(!1),[r,a]=X.useState(null),[l,c]=X.useState(""),[d,g]=X.useState(""),[m,y]=X.useState(!1),[v,E]=X.useState(!1),[S,M]=X.useState("");X.useEffect(()=>{const F=xA(Ca,q=>{q?(n(!0),e(Ca.currentUser),a(q)):(n(!1),a(null))});return()=>F()},[e]);const L=async F=>{F.preventDefault(),E(!0),M("");try{if(!l||!d)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l))throw new Error(Vn.INVALID_EMAIL);if(d.length<6)throw new Error(Vn.WEAK_PASSWORD);const H=await bP(Ca,l,d);e(H.user)}catch(q){console.error("Sign up error:",q);let H="Failed to create account";q.code==="auth/email-already-in-use"?H=Vn.EMAIL_IN_USE:q.code==="auth/invalid-email"?H=Vn.INVALID_EMAIL:q.code==="auth/weak-password"?H=Vn.WEAK_PASSWORD:q.code==="auth/operation-not-allowed"?H="Email/password accounts are not enabled. Please contact support.":q.message&&(H=q.message),M(H)}finally{E(!1)}},V=async F=>{F.preventDefault(),E(!0),M("");try{if(!l||!d)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l))throw new Error(Vn.INVALID_EMAIL);const H=await AP(Ca,l,d);e(H.user)}catch(q){console.error("Sign in error:",q);let H="Failed to sign in";q.code==="auth/user-not-found"?H=Vn.USER_NOT_FOUND:q.code==="auth/wrong-password"?H=Vn.WRONG_PASSWORD:q.code==="auth/invalid-email"?H=Vn.INVALID_EMAIL:q.code==="auth/user-disabled"?H="This account has been disabled. Please contact support.":q.code==="auth/too-many-requests"?H=Vn.TOO_MANY_REQUESTS:q.message&&(H=q.message),M(H)}finally{E(!1)}},B=async()=>{try{await NA(Ca)}catch(F){M(F.message)}};return t?_t.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",fontFamily:"Arial, sans-serif"},children:_t.jsxs("div",{style:{padding:"2rem",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"#f9f9f9",textAlign:"center"},children:[_t.jsxs("p",{style:{marginBottom:"1rem"},children:["Welcome, ",r?.email,"!"]}),_t.jsx("button",{onClick:B,style:{padding:"0.5rem 1rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Sign Out"})]})}):_t.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",fontFamily:"Arial, sans-serif",backgroundColor:"#f5f5f5"},children:_t.jsxs("div",{style:{padding:"2rem",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"white",minWidth:"300px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[_t.jsx("h2",{style:{textAlign:"center",marginBottom:"1.5rem"},children:m?"Sign Up":"Sign In"}),_t.jsxs("form",{onSubmit:m?L:V,children:[_t.jsx("input",{type:"email",placeholder:"Email",value:l,onChange:F=>c(F.target.value),required:!0,style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",border:"1px solid #ccc",borderRadius:"4px",fontSize:"1rem",boxSizing:"border-box"}}),_t.jsx("input",{type:"password",placeholder:"Password",value:d,onChange:F=>g(F.target.value),required:!0,style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",border:"1px solid #ccc",borderRadius:"4px",fontSize:"1rem",boxSizing:"border-box"}}),_t.jsx("button",{type:"submit",disabled:v,style:{width:"100%",padding:"0.75rem",backgroundColor:v?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"4px",fontSize:"1rem",cursor:v?"not-allowed":"pointer",marginBottom:"1rem"},children:v?"Loading...":m?"Sign Up":"Sign In"}),S&&_t.jsx("p",{style:{color:"red",textAlign:"center",marginBottom:"1rem",fontSize:"0.9rem"},children:S})]}),_t.jsxs("p",{style:{textAlign:"center",margin:0},children:[m?"Already have an account?":"Don't have an account?",_t.jsx("button",{type:"button",onClick:()=>y(!m),style:{background:"none",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",marginLeft:"0.5rem",fontSize:"1rem"},children:m?"Sign In":"Sign Up"})]})]})})}function q6({allBoards:e,currentBoard:t,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:a,onSignOut:l,isLoading:c}){const[d,g]=X.useState(!1),m=async()=>{try{g(!0),await r()}catch(v){console.error("Error in sidebar create board:",v)}finally{g(!1)}},y=(v,E)=>{v.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&a(E)};return _t.jsx(_t.Fragment,{children:_t.jsxs("div",{className:"sidebar",children:[_t.jsxs("div",{className:"sidebar-header",children:[_t.jsx("h2",{children:"Launch Hacks"}),_t.jsx("button",{onClick:m,disabled:c||d,style:{opacity:c||d?.6:1,cursor:c||d?"not-allowed":"pointer"},children:d?"Creating...":"+ New Board"})]}),_t.jsxs("div",{className:"sidebar-content",children:[c&&_t.jsx("div",{className:"loading-indicator",children:"Switching boards..."}),_t.jsx("ul",{children:e?.map(v=>_t.jsxs("li",{onClick:()=>!c&&n(v.id),className:t?.id===v.id?"active":"",children:[_t.jsx("span",{className:"board-name",children:v.name}),_t.jsxs("div",{className:"board-actions",children:[v.isOpen&&_t.jsx("span",{className:"open-indicator",children:"●"}),e.length>1&&_t.jsx("button",{className:"delete-btn",onClick:E=>y(E,v.id),title:"Delete board",children:"×"})]})]},v.id))})]}),_t.jsx("div",{className:"sidebar-footer",children:_t.jsx("button",{onClick:l,children:"Sign Out"})})]})})}function F6({name:e,onSetName:t,user:n,isSaving:r}){const[a,l]=X.useState(!1),[c,d]=X.useState(e||"");X.useEffect(()=>{d(e||"")},[e]);const g=y=>{y.key==="Enter"&&(t(c),l(!1))},m=()=>{l(!0),d(e||"")};return _t.jsx(_t.Fragment,{children:_t.jsxs("div",{className:"name",children:[_t.jsx("div",{className:"app-container",children:_t.jsxs("header",{className:"app-header",children:[_t.jsx("h1",{children:"Tink Flow Editor"}),_t.jsxs("div",{className:"user-info",children:[_t.jsxs("p",{children:["Welcome,"," ",n?.isAnonymous?"Anonymous User":n?.email||"User"]}),r&&_t.jsx("span",{className:"save-indicator",children:"💾 Saving..."})]})]})}),_t.jsxs("div",{className:"board-title-section",children:[a?_t.jsx("input",{type:"text",value:c,onChange:y=>d(y.target.value),onKeyDown:g,onBlur:()=>{t(c),l(!1)},autoFocus:!0}):_t.jsx("h6",{onClick:m,style:{cursor:"pointer"},children:e||"Untitled Board"}),_t.jsx("div",{className:"keyboard-shortcuts",children:_t.jsx("small",{children:"💡 Tips: Ctrl+N for new board, Ctrl+1-9 to switch boards"})})]})]})})}const j6=({notification:e,onRemove:t})=>{const n=r=>{switch(r){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"📄"}};return _t.jsxs("div",{className:`notification notification-${e.type}`,children:[_t.jsxs("div",{className:"notification-content",children:[_t.jsx("span",{className:"notification-icon",children:n(e.type)}),_t.jsx("span",{className:"notification-message",children:e.message})]}),_t.jsx("button",{className:"notification-close",onClick:()=>t(e.id),children:"×"})]})},G6=({notifications:e,onRemove:t})=>e.length===0?null:_t.jsx("div",{className:"notifications-container",children:e.map(n=>_t.jsx(j6,{notification:n,onRemove:t},n.id))}),$6=async()=>{try{await NA(Ca),console.log("User signed out successfully")}catch(e){throw console.error("Error signing out:",e),e}},Y6=()=>{const[e,t]=X.useState(null);return X.useEffect(()=>{const a=xA(Ca,l=>{l?(t(l),console.log("User signed in:",l.uid)):(t(null),console.log("No user signed in"))});return()=>a()},[]),{user:e,signOut:async()=>{try{await $6(),t(null)}catch(a){console.error("Error in sign out:",a)}},onAuthed:a=>{t(a)}}},qA=e=>e&&e.uid,Hu=[{id:"1",type:"draggableEditable",data:{label:"Node A"},position:{x:250,y:25}},{id:"2",type:"draggableEditable",data:{label:"Node B"},position:{x:100,y:125}},{id:"3",type:"draggableEditable",data:{label:"Node C"},position:{x:400,y:125}},{id:"4",type:"staticEditable",data:{label:"Node D"},position:{x:250,y:200},draggable:!1}],qu=[{id:"e1-2",source:"1",target:"2"},{id:"e1-3",source:"1",target:"3"},{id:"e2-4",source:"2",target:"4"},{id:"e3-4",source:"3",target:"4"}],K6=async e=>{if(!qA({uid:e}))throw new Error(Vn.AUTH_REQUIRED);try{const t=dd(Ti,Kr.BOARDS),n=pk(t,yk("userId","==",e),_k("createdAt","desc")),r=await _d(n);if(r.empty){const l={id:`board_${Date.now()}`,userId:e,name:"Default Board",createdAt:Ce.now(),isOpen:!0};return await vc($a(Ti,Kr.BOARDS,l.id),l),console.log("Created default board:",l),[l]}const a=r.docs.map(l=>({id:l.id,...l.data()}));return console.log("Fetched all boards:",a),a}catch(t){if(console.error("Fetch all boards error:",t),t.code==="failed-precondition"||t.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:e,name:"Fallback Board (Create Index)",createdAt:Ce.now(),isOpen:!0,isFallback:!0}]}throw new Error(Vn.LOAD_FAILED)}},Uw=async e=>{if(!e)return console.warn("No board ID provided for fetching nodes"),Hu;try{const t=dd(Ti,Kr.BOARDS,e,Kr.NODES),n=await _d(t);if(n.empty)return console.log("No nodes found for board, using initial nodes"),Hu;const r=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched nodes from board:",r),r}catch(t){return console.error("Fetch nodes error:",t),Hu}},zw=async e=>{if(!e)return console.warn("No board ID provided for fetching edges"),qu;try{const t=dd(Ti,Kr.BOARDS,e,Kr.EDGES),n=await _d(t);if(n.empty)return console.log("No edges found for board, using initial edges"),qu;const r=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched edges from board:",r),r}catch(t){return console.error("Fetch edges error:",t),qu}},X6=async(e,t)=>{if(!e||!t?.length){console.warn("Invalid parameters for saving nodes:",{boardId:e,nodesCount:t?.length});return}try{const n=Rk(Ti);t.forEach(r=>{const a=$a(Ti,Kr.BOARDS,e,Kr.NODES,r.id);n.set(a,{type:r.type,data:r.data,position:r.position,draggable:r.draggable,updatedAt:Ce.now()})}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(Vn.SAVE_FAILED)}},Q6=async(e,t)=>{try{const n=t.map(r=>vc($a(Ti,"boards",e,"edges",r.id),{source:r.source,target:r.target,sourceHandle:r.sourceHandle,targetHandle:r.targetHandle}));await Promise.all(n),console.log("Edges saved to board")}catch(n){console.error("Save edges error:",n)}},Z6=async(e,t,n)=>{if(!qA({uid:e}))throw new Error(Vn.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:e,name:t||`Board ${n.length+1}`,createdAt:new Date,isOpen:!1};return console.log("Creating board:",r),await vc($a(Ti,Kr.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},W6=async e=>{try{await bk($a(Ti,"boards",e)),console.log("Board deleted successfully")}catch(t){throw console.error("Error deleting board:",t),t}},ef=async(e,t)=>{try{await vc($a(Ti,"boards",e),t,{merge:!0}),console.log("Board status updated:",t)}catch(n){throw console.error("Error updating board status:",n),n}},J6=async e=>{try{console.log("Testing Firestore connection..."),console.log("User:",e);const t=dd(Ti,"boards");console.log("Collection reference created:",t);const n={test:!0,userId:e.uid,timestamp:new Date},r=$a(Ti,"boards",`test_${Date.now()}`);await vc(r,n),console.log("Test document written successfully");const a=await _d(t);return console.log("Documents in collection:",a.size),{success:!0,message:"Firestore connection working"}}catch(t){return console.error("Firestore connection test failed:",t),{success:!1,message:`Firestore error: ${t.code} - ${t.message}`,error:t}}},t9=e=>{console.log("=== USER DEBUG INFO ==="),console.log("User ID:",e?.uid),console.log("Email:",e?.email),console.log("Email verified:",e?.emailVerified),console.log("Provider data:",e?.providerData),console.log("========================")},e9=(e,t={})=>{const[n,r,a]=ZD([]),[l,c,d]=WD([]),[g,m]=X.useState(!0),[y,v]=X.useState(!1),[E,S]=X.useState(!1),[M,L]=X.useState([]),[V,B]=X.useState(null),{showSuccess:F,showError:q,showInfo:H}=t,nt=N=>{const U=N.find(A=>A.isOpen===!0);if(U)return U;if(N.length>0){const A={...N[0],isOpen:!0};return ef(A.id,A),A}return null};X.useEffect(()=>{(async()=>{if(e)try{m(!0);const U=await K6(e.uid);L(U);const A=U.some($=>$.isFallback);A&&q&&q("Database index missing. Please create the required Firestore index. Check console for details.");const k=nt(U);if(!k){console.error("No board found for user"),q&&q("No boards found. Creating a default board..."),r(Hu),c(qu);return}B(k);const[tt,O]=await Promise.all([Uw(k.id),zw(k.id)]);r(tt),c(O),H&&!A&&H("Board loaded successfully!")}catch(U){console.error("Error loading initial data:",U),q&&q("Failed to load board data. Using default board."),r(Hu),c(qu)}finally{m(!1)}})()},[e,r,c]),X.useEffect(()=>{if(!g&&V&&n.length>0){S(!0);const N=setTimeout(()=>{X6(V.id,n).finally(()=>{S(!1)})},1e3);return()=>clearTimeout(N)}},[n,g,V]),X.useEffect(()=>{if(!g&&V&&l.length>0){S(!0);const N=setTimeout(()=>{Q6(V.id,l).finally(()=>{S(!1)})},1e3);return()=>clearTimeout(N)}},[l,g,V]);const et=X.useCallback(async N=>{try{if(V?.id===N)return;if(v(!0),V){const A={...V,isOpen:!1};await ef(V.id,A),L(k=>k.map(tt=>tt.id===V.id?A:tt))}const U=M.find(A=>A.id===N);if(U){const A={...U,isOpen:!0};await ef(N,A),B(A),L(O=>O.map($=>$.id===N?A:$));const[k,tt]=await Promise.all([Uw(N),zw(N)]);r(k),c(tt)}else console.error("Board not found:",N)}catch(U){console.error("Error switching board:",U)}finally{v(!1)}},[V,M,r,c]),D=X.useCallback(async()=>{try{if(!e)return q&&q("You must be logged in to create a board"),null;t9(e),console.log("Current boards count:",M.length),H&&H("Creating new board...");const N=await J6(e);if(!N.success)return console.error("Firestore connection test failed:",N),q&&q(`Database connection failed: ${N.message}`),null;const U=await Z6(e.uid,null,M);return U?(L(A=>[U,...A]),await et(U.id),F&&F("New board created successfully!"),U):(q&&q("Failed to create board. Please try again."),null)}catch(N){return console.error("Error creating new board:",N),q&&q(`Failed to create board: ${N.message}`),null}},[e,M,et,F,q,H]),R=X.useCallback(async N=>{try{if(M.length<=1){q&&q("Cannot delete the last board!");return}if(!M.find(A=>A.id===N)){console.error("Board not found for deletion"),q&&q("Board not found");return}if(H&&H("Deleting board..."),V?.id===N){const A=M.find(k=>k.id!==N);A&&await et(A.id)}await W6(N),L(A=>A.filter(k=>k.id!==N)),F&&F("Board deleted successfully!")}catch(U){console.error("Error deleting board:",U),q&&q("Failed to delete board. Please try again.")}},[M,V,et,F,q,H]),I=X.useCallback(async N=>{if(V&&V.name!==N){const U={...V,name:N};B(U),L(A=>A.map(k=>k.id===V.id?U:k));try{await ef(V.id,U),console.log("Board name updated successfully")}catch(A){console.error("Error updating board name:",A)}}},[V]),P=X.useCallback(()=>{L([]),B(null),r([]),c([]),m(!0),v(!1),S(!1)},[r,c]);return{nodes:n,edges:l,allBoards:M,currentBoard:V,isLoading:g,isSwitchingBoard:y,isSaving:E,onNodesChange:a,onEdgesChange:d,switchToBoard:et,createNewBoard:D,deleteBoard:R,updateBoardName:I,clearBoardState:P}},n9=(e,t,n,r)=>{X.useEffect(()=>{const a=l=>{if((l.ctrlKey||l.metaKey)&&l.key==="n"&&(l.preventDefault(),n()),(l.ctrlKey||l.metaKey)&&l.key>="1"&&l.key<="9"){l.preventDefault();const c=parseInt(l.key)-1;e[c]&&e[c].id!==t?.id&&r(e[c].id)}};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e,t,n,r])},i9=()=>{const[e,t]=X.useState([]),n=X.useCallback(m=>{const y=Date.now().toString(),v={id:y,timestamp:new Date,...m};return t(E=>[...E,v]),m.autoRemove!==!1&&setTimeout(()=>{r(y)},m.duration||5e3),y},[]),r=X.useCallback(m=>{t(y=>y.filter(v=>v.id!==m))},[]),a=X.useCallback(()=>{t([])},[]),l=X.useCallback((m,y={})=>n({type:"success",message:m,...y}),[n]),c=X.useCallback((m,y={})=>n({type:"error",message:m,duration:7e3,...y}),[n]),d=X.useCallback((m,y={})=>n({type:"info",message:m,...y}),[n]),g=X.useCallback((m,y={})=>n({type:"warning",message:m,duration:6e3,...y}),[n]);return{notifications:e,addNotification:n,removeNotification:r,clearAllNotifications:a,showSuccess:l,showError:c,showInfo:d,showWarning:g}};function r9({data:e,id:t}){const[n,r]=X.useState(!1),[a,l]=X.useState(e.label||"Static Node"),[c,d]=X.useState(!1),g=E=>{E.stopPropagation(),r(!0)},m=()=>{r(!1),console.log("Static node text changed to:",a)},y=E=>{E.stopPropagation()},v=E=>{E.stopPropagation(),E.key==="Enter"&&m(),E.key==="Escape"&&(l(e.label||"Static Node"),r(!1))};return _t.jsxs("div",{className:"static-editable-node nodrag",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[_t.jsx(ka,{type:"target",position:bt.Bottom,id:"bottom"}),c&&_t.jsx("div",{className:"node-tooltip",children:_t.jsxs("div",{className:"tooltip-content",children:[_t.jsx("span",{children:"📍 Static Node"}),_t.jsx("span",{children:"Click to edit text"})]})}),n?_t.jsx("input",{type:"text",value:a,onChange:E=>l(E.target.value),onBlur:m,onKeyDown:v,onClick:y,className:"node-input nodrag",autoFocus:!0}):_t.jsx("div",{className:"node-text",onClick:g,children:a}),_t.jsx(ka,{type:"source",position:bt.Bottom,id:"bottom-source"})]})}function s9({data:e,id:t}){const[n,r]=X.useState(!1),[a,l]=X.useState(e.label||"Draggable Node"),[c,d]=X.useState(!1),g=E=>{E.stopPropagation(),r(!0)},m=()=>{r(!1),console.log("Draggable node text changed to:",a)},y=E=>{E.stopPropagation()},v=E=>{E.stopPropagation(),E.key==="Enter"&&m(),E.key==="Escape"&&(l(e.label||"Draggable Node"),r(!1))};return _t.jsxs("div",{className:"draggable-editable-node",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[c&&_t.jsx("div",{className:"node-tooltip",children:_t.jsxs("div",{className:"tooltip-content",children:[_t.jsx("span",{children:"🎯 Draggable Node"}),_t.jsx("span",{children:"Drag me around!"}),_t.jsx("span",{children:"Click to edit text"})]})}),_t.jsx("div",{className:"node-content",onClick:g,children:n?_t.jsx("input",{type:"text",value:a,onChange:E=>l(E.target.value),onBlur:m,onKeyDown:v,onClick:y,className:"node-input nodrag",autoFocus:!0}):_t.jsx("div",{className:"node-text",children:a})}),_t.jsx(ka,{type:"source",position:bt.Bottom,id:"bottom-source"})]})}const a9={staticEditable:r9,draggableEditable:s9};function o9(){const{user:e,signOut:t,onAuthed:n}=Y6(),{notifications:r,removeNotification:a,showSuccess:l,showError:c,showInfo:d}=i9(),{nodes:g,edges:m,allBoards:y,currentBoard:v,isSwitchingBoard:E,isSaving:S,onNodesChange:M,onEdgesChange:L,switchToBoard:V,createNewBoard:B,deleteBoard:F,updateBoardName:q,clearBoardState:H}=e9(e,{showSuccess:l,showError:c,showInfo:d});n9(y,v,B,V);const nt=async()=>{await t(),H()},et=X.useCallback(D=>{L([{type:"add",item:CS(D,m)}])},[L,m]);return e?_t.jsxs(_t.Fragment,{children:[_t.jsx(q6,{allBoards:y,currentBoard:v,onSwitchBoard:V,onCreateBoard:B,onDeleteBoard:F,onSignOut:nt,isLoading:E}),_t.jsx(F6,{name:v?.name||"Loading...",onSetName:q,user:e,isSaving:S}),_t.jsx(G6,{notifications:r,onRemove:a}),_t.jsx("div",{style:{width:"100vw",height:"100vh"},children:_t.jsxs(u1,{nodes:g,edges:m,onNodesChange:M,onEdgesChange:L,onConnect:et,nodeTypes:a9,connectionMode:zs.Loose,fitView:!0,children:[_t.jsx(mO,{}),_t.jsx(lO,{}),_t.jsx(TO,{variant:"dots",gap:12,size:1})]})})]}):_t.jsx(H6,{onAuthed:n})}TI.createRoot(document.getElementById("root")).render(_t.jsx(X.StrictMode,{children:_t.jsx(o9,{})}));
