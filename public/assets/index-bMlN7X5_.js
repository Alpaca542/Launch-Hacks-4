(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function kw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hm={exports:{}},Tu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tE;function rI(){if(tE)return Tu;tE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:e,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Tu.Fragment=t,Tu.jsx=n,Tu.jsxs=n,Tu}var eE;function sI(){return eE||(eE=1,hm.exports=rI()),hm.exports}var Tt=sI(),fm={exports:{}},kt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nE;function aI(){if(nE)return kt;nE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function T(x){return x===null||typeof x!="object"?null:(x=v&&x[v]||x["@@iterator"],typeof x=="function"?x:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,L={};function O(x,$,nt){this.props=x,this.context=$,this.refs=L,this.updater=nt||A}O.prototype.isReactComponent={},O.prototype.setState=function(x,$){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,$,"setState")},O.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function H(){}H.prototype=O.prototype;function q(x,$,nt){this.props=x,this.context=$,this.refs=L,this.updater=nt||A}var G=q.prototype=new H;G.constructor=q,k(G,O.prototype),G.isPureReactComponent=!0;var B=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},rt=Object.prototype.hasOwnProperty;function M(x,$,nt,st,ct,pt){return nt=pt.ref,{$$typeof:e,type:x,key:$,ref:nt!==void 0?nt:null,props:pt}}function b(x,$){return M(x.type,$,void 0,void 0,void 0,x.props)}function R(x){return typeof x=="object"&&x!==null&&x.$$typeof===e}function V(x){var $={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(nt){return $[nt]})}var P=/\/+/g;function U(x,$){return typeof x=="object"&&x!==null&&x.key!=null?V(""+x.key):$.toString(36)}function N(){}function D(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(N,N):(x.status="pending",x.then(function($){x.status==="pending"&&(x.status="fulfilled",x.value=$)},function($){x.status==="pending"&&(x.status="rejected",x.reason=$)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function K(x,$,nt,st,ct){var pt=typeof x;(pt==="undefined"||pt==="boolean")&&(x=null);var yt=!1;if(x===null)yt=!0;else switch(pt){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(x.$$typeof){case e:case t:yt=!0;break;case y:return yt=x._init,K(yt(x._payload),$,nt,st,ct)}}if(yt)return ct=ct(x),yt=st===""?"."+U(x,0):st,B(ct)?(nt="",yt!=null&&(nt=yt.replace(P,"$&/")+"/"),K(ct,$,nt,"",function(Zt){return Zt})):ct!=null&&(R(ct)&&(ct=b(ct,nt+(ct.key==null||x&&x.key===ct.key?"":(""+ct.key).replace(P,"$&/")+"/")+yt)),$.push(ct)),1;yt=0;var Dt=st===""?".":st+":";if(B(x))for(var At=0;At<x.length;At++)st=x[At],pt=Dt+U(st,At),yt+=K(st,$,nt,pt,ct);else if(At=T(x),typeof At=="function")for(x=At.call(x),At=0;!(st=x.next()).done;)st=st.value,pt=Dt+U(st,At++),yt+=K(st,$,nt,pt,ct);else if(pt==="object"){if(typeof x.then=="function")return K(D(x),$,nt,st,ct);throw $=String(x),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return yt}function C(x,$,nt){if(x==null)return x;var st=[],ct=0;return K(x,st,"","",function(pt){return $.call(nt,pt,ct++)}),st}function j(x){if(x._status===-1){var $=x._result;$=$(),$.then(function(nt){(x._status===0||x._status===-1)&&(x._status=1,x._result=nt)},function(nt){(x._status===0||x._status===-1)&&(x._status=2,x._result=nt)}),x._status===-1&&(x._status=0,x._result=$)}if(x._status===1)return x._result.default;throw x._result}var tt=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)};function X(){}return kt.Children={map:C,forEach:function(x,$,nt){C(x,function(){$.apply(this,arguments)},nt)},count:function(x){var $=0;return C(x,function(){$++}),$},toArray:function(x){return C(x,function($){return $})||[]},only:function(x){if(!R(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},kt.Component=O,kt.Fragment=n,kt.Profiler=a,kt.PureComponent=q,kt.StrictMode=r,kt.Suspense=g,kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,kt.__COMPILER_RUNTIME={__proto__:null,c:function(x){return Y.H.useMemoCache(x)}},kt.cache=function(x){return function(){return x.apply(null,arguments)}},kt.cloneElement=function(x,$,nt){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var st=k({},x.props),ct=x.key,pt=void 0;if($!=null)for(yt in $.ref!==void 0&&(pt=void 0),$.key!==void 0&&(ct=""+$.key),$)!rt.call($,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&$.ref===void 0||(st[yt]=$[yt]);var yt=arguments.length-2;if(yt===1)st.children=nt;else if(1<yt){for(var Dt=Array(yt),At=0;At<yt;At++)Dt[At]=arguments[At+2];st.children=Dt}return M(x.type,ct,void 0,void 0,pt,st)},kt.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:l,_context:x},x},kt.createElement=function(x,$,nt){var st,ct={},pt=null;if($!=null)for(st in $.key!==void 0&&(pt=""+$.key),$)rt.call($,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(ct[st]=$[st]);var yt=arguments.length-2;if(yt===1)ct.children=nt;else if(1<yt){for(var Dt=Array(yt),At=0;At<yt;At++)Dt[At]=arguments[At+2];ct.children=Dt}if(x&&x.defaultProps)for(st in yt=x.defaultProps,yt)ct[st]===void 0&&(ct[st]=yt[st]);return M(x,pt,void 0,void 0,null,ct)},kt.createRef=function(){return{current:null}},kt.forwardRef=function(x){return{$$typeof:d,render:x}},kt.isValidElement=R,kt.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:j}},kt.memo=function(x,$){return{$$typeof:m,type:x,compare:$===void 0?null:$}},kt.startTransition=function(x){var $=Y.T,nt={};Y.T=nt;try{var st=x(),ct=Y.S;ct!==null&&ct(nt,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(X,tt)}catch(pt){tt(pt)}finally{Y.T=$}},kt.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},kt.use=function(x){return Y.H.use(x)},kt.useActionState=function(x,$,nt){return Y.H.useActionState(x,$,nt)},kt.useCallback=function(x,$){return Y.H.useCallback(x,$)},kt.useContext=function(x){return Y.H.useContext(x)},kt.useDebugValue=function(){},kt.useDeferredValue=function(x,$){return Y.H.useDeferredValue(x,$)},kt.useEffect=function(x,$,nt){var st=Y.H;if(typeof nt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(x,$)},kt.useId=function(){return Y.H.useId()},kt.useImperativeHandle=function(x,$,nt){return Y.H.useImperativeHandle(x,$,nt)},kt.useInsertionEffect=function(x,$){return Y.H.useInsertionEffect(x,$)},kt.useLayoutEffect=function(x,$){return Y.H.useLayoutEffect(x,$)},kt.useMemo=function(x,$){return Y.H.useMemo(x,$)},kt.useOptimistic=function(x,$){return Y.H.useOptimistic(x,$)},kt.useReducer=function(x,$,nt){return Y.H.useReducer(x,$,nt)},kt.useRef=function(x){return Y.H.useRef(x)},kt.useState=function(x){return Y.H.useState(x)},kt.useSyncExternalStore=function(x,$,nt){return Y.H.useSyncExternalStore(x,$,nt)},kt.useTransition=function(){return Y.H.useTransition()},kt.version="19.1.0",kt}var iE;function rc(){return iE||(iE=1,fm.exports=aI()),fm.exports}var W=rc();const gt=kw(W);var dm={exports:{}},wu={},gm={exports:{}},mm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rE;function oI(){return rE||(rE=1,function(e){function t(C,j){var tt=C.length;C.push(j);t:for(;0<tt;){var X=tt-1>>>1,x=C[X];if(0<a(x,j))C[X]=j,C[tt]=x,tt=X;else break t}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var j=C[0],tt=C.pop();if(tt!==j){C[0]=tt;t:for(var X=0,x=C.length,$=x>>>1;X<$;){var nt=2*(X+1)-1,st=C[nt],ct=nt+1,pt=C[ct];if(0>a(st,tt))ct<x&&0>a(pt,st)?(C[X]=pt,C[ct]=tt,X=ct):(C[X]=st,C[nt]=tt,X=nt);else if(ct<x&&0>a(pt,tt))C[X]=pt,C[ct]=tt,X=ct;else break t}}return j}function a(C,j){var tt=C.sortIndex-j.sortIndex;return tt!==0?tt:C.id-j.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var g=[],m=[],y=1,v=null,T=3,A=!1,k=!1,L=!1,O=!1,H=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function B(C){for(var j=n(m);j!==null;){if(j.callback===null)r(m);else if(j.startTime<=C)r(m),j.sortIndex=j.expirationTime,t(g,j);else break;j=n(m)}}function Y(C){if(L=!1,B(C),!k)if(n(g)!==null)k=!0,rt||(rt=!0,U());else{var j=n(m);j!==null&&K(Y,j.startTime-C)}}var rt=!1,M=-1,b=5,R=-1;function V(){return O?!0:!(e.unstable_now()-R<b)}function P(){if(O=!1,rt){var C=e.unstable_now();R=C;var j=!0;try{t:{k=!1,L&&(L=!1,q(M),M=-1),A=!0;var tt=T;try{e:{for(B(C),v=n(g);v!==null&&!(v.expirationTime>C&&V());){var X=v.callback;if(typeof X=="function"){v.callback=null,T=v.priorityLevel;var x=X(v.expirationTime<=C);if(C=e.unstable_now(),typeof x=="function"){v.callback=x,B(C),j=!0;break e}v===n(g)&&r(g),B(C)}else r(g);v=n(g)}if(v!==null)j=!0;else{var $=n(m);$!==null&&K(Y,$.startTime-C),j=!1}}break t}finally{v=null,T=tt,A=!1}j=void 0}}finally{j?U():rt=!1}}}var U;if(typeof G=="function")U=function(){G(P)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,D=N.port2;N.port1.onmessage=P,U=function(){D.postMessage(null)}}else U=function(){H(P,0)};function K(C,j){M=H(function(){C(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_next=function(C){switch(T){case 1:case 2:case 3:var j=3;break;default:j=T}var tt=T;T=j;try{return C()}finally{T=tt}},e.unstable_requestPaint=function(){O=!0},e.unstable_runWithPriority=function(C,j){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var tt=T;T=C;try{return j()}finally{T=tt}},e.unstable_scheduleCallback=function(C,j,tt){var X=e.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?X+tt:X):tt=X,C){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=tt+x,C={id:y++,callback:j,priorityLevel:C,startTime:tt,expirationTime:x,sortIndex:-1},tt>X?(C.sortIndex=tt,t(m,C),n(g)===null&&C===n(m)&&(L?(q(M),M=-1):L=!0,K(Y,tt-X))):(C.sortIndex=x,t(g,C),k||A||(k=!0,rt||(rt=!0,U()))),C},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(C){var j=T;return function(){var tt=T;T=j;try{return C.apply(this,arguments)}finally{T=tt}}}}(mm)),mm}var sE;function lI(){return sE||(sE=1,gm.exports=oI()),gm.exports}var pm={exports:{}},gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE;function uI(){if(aE)return gn;aE=1;var e=rc();function t(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,m,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:g,containerInfo:m,implementation:y}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,gn.createPortal=function(g,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return l(g,m,null,y)},gn.flushSync=function(g){var m=c.T,y=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=m,r.p=y,r.d.f()}},gn.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(g,m))},gn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},gn.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?r.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:A}):y==="script"&&r.d.X(g,{crossOrigin:v,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},gn.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=d(m.as,m.crossOrigin);r.d.M(g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(g)},gn.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin);r.d.L(g,y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},gn.preloadModule=function(g,m){if(typeof g=="string")if(m){var y=d(m.as,m.crossOrigin);r.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(g)},gn.requestFormReset=function(g){r.d.r(g)},gn.unstable_batchedUpdates=function(g,m){return g(m)},gn.useFormState=function(g,m,y){return c.H.useFormState(g,m,y)},gn.useFormStatus=function(){return c.H.useHostTransitionStatus()},gn.version="19.1.0",gn}var oE;function Pw(){if(oE)return pm.exports;oE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),pm.exports=uI(),pm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lE;function cI(){if(lE)return wu;lE=1;var e=lI(),t=rc(),n=Pw();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(r(188))}function g(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return d(f),i;if(p===u)return d(f),s;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=p;else{for(var w=!1,S=f.child;S;){if(S===o){w=!0,o=f,u=p;break}if(S===u){w=!0,u=f,o=p;break}S=S.sibling}if(!w){for(S=p.child;S;){if(S===o){w=!0,o=p,u=f;break}if(S===u){w=!0,u=p,o=f;break}S=S.sibling}if(!w)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function m(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=m(i),s!==null)return s;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),G=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),rt=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=P&&i[P]||i["@@iterator"],typeof i=="function"?i:null)}var N=Symbol.for("react.client.reference");function D(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===N?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case O:return"Profiler";case L:return"StrictMode";case Y:return"Suspense";case rt:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case G:return(i.displayName||"Context")+".Provider";case q:return(i._context.displayName||"Context")+".Consumer";case B:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return s=i.displayName||null,s!==null?s:D(i.type)||"Memo";case b:s=i._payload,i=i._init;try{return D(i(s))}catch{}}return null}var K=Array.isArray,C=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt={pending:!1,data:null,method:null,action:null},X=[],x=-1;function $(i){return{current:i}}function nt(i){0>x||(i.current=X[x],X[x]=null,x--)}function st(i,s){x++,X[x]=i.current,i.current=s}var ct=$(null),pt=$(null),yt=$(null),Dt=$(null);function At(i,s){switch(st(yt,s),st(pt,i),st(ct,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?C0(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=C0(s),i=x0(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}nt(ct),st(ct,i)}function Zt(){nt(ct),nt(pt),nt(yt)}function $t(i){i.memoizedState!==null&&st(Dt,i);var s=ct.current,o=x0(s,i.type);s!==o&&(st(pt,i),st(ct,o))}function Ae(i){pt.current===i&&(nt(ct),nt(pt)),Dt.current===i&&(nt(Dt),pu._currentValue=tt)}var Ne=Object.prototype.hasOwnProperty,ze=e.unstable_scheduleCallback,De=e.unstable_cancelCallback,fe=e.unstable_shouldYield,vn=e.unstable_requestPaint,Ut=e.unstable_now,St=e.unstable_getCurrentPriorityLevel,Be=e.unstable_ImmediatePriority,Cn=e.unstable_UserBlockingPriority,Ln=e.unstable_NormalPriority,Pi=e.unstable_LowPriority,Un=e.unstable_IdlePriority,En=e.log,Ti=e.unstable_setDisableYieldValue,te=null,Ht=null;function Oe(i){if(typeof En=="function"&&Ti(i),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(te,i)}catch{}}var pe=Math.clz32?Math.clz32:Ke,Li=Math.log,Me=Math.LN2;function Ke(i){return i>>>=0,i===0?32:31-(Li(i)/Me|0)|0}var Tn=256,wn=4194304;function Xe(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function nn(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,p=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var S=u&134217727;return S!==0?(u=S&~p,u!==0?f=Xe(u):(w&=S,w!==0?f=Xe(w):o||(o=S&~i,o!==0&&(f=Xe(o))))):(S=u&~p,S!==0?f=Xe(S):w!==0?f=Xe(w):o||(o=u&~i,o!==0&&(f=Xe(o)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:f}function Sn(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function fr(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dr(){var i=Tn;return Tn<<=1,(Tn&4194048)===0&&(Tn=256),i}function wi(){var i=wn;return wn<<=1,(wn&62914560)===0&&(wn=4194304),i}function zn(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function ei(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Bn(i,s,o,u,f,p){var w=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var S=i.entanglements,z=i.expirationTimes,et=i.hiddenUpdates;for(o=w&~o;0<o;){var lt=31-pe(o),ht=1<<lt;S[lt]=0,z[lt]=-1;var it=et[lt];if(it!==null)for(et[lt]=null,lt=0;lt<it.length;lt++){var at=it[lt];at!==null&&(at.lane&=-536870913)}o&=~ht}u!==0&&ni(i,u,0),p!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=p&~(w&~s))}function ni(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-pe(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&4194090}function Ks(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-pe(o),f=1<<u;f&s|i[u]&s&&(i[u]|=s),o&=~f}}function Ui(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Kr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function zi(){var i=j.p;return i!==0?i:(i=window.event,i===void 0?32:K0(i.type))}function Fa(i,s){var o=j.p;try{return j.p=i,s()}finally{j.p=o}}var ce=Math.random().toString(36).slice(2),be="__reactFiber$"+ce,Ee="__reactProps$"+ce,xn="__reactContainer$"+ce,Xs="__reactEvents$"+ce,wl="__reactListeners$"+ce,Bi="__reactHandles$"+ce,ja="__reactResources$"+ce,gr="__reactMarker$"+ce;function Hi(i){delete i[be],delete i[Ee],delete i[Xs],delete i[wl],delete i[Bi]}function ii(i){var s=i[be];if(s)return s;for(var o=i.parentNode;o;){if(s=o[xn]||o[be]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=M0(i);i!==null;){if(o=i[be])return o;i=M0(i)}return s}i=o,o=i.parentNode}return null}function ri(i){if(i=i[be]||i[xn]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function si(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function rn(i){var s=i[ja];return s||(s=i[ja]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ye(i){i[gr]=!0}var Qs=new Set,Xr={};function Hn(i,s){Si(i,s),Si(i+"Capture",s)}function Si(i,s){for(Xr[i]=s,i=0;i<s.length;i++)Qs.add(s[i])}var Zs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ga={},mr={};function $a(i){return Ne.call(mr,i)?!0:Ne.call(Ga,i)?!1:Zs.test(i)?mr[i]=!0:(Ga[i]=!0,!1)}function qi(i,s,o){if($a(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function ai(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function He(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}var Fi,Ya;function Ai(i){if(Fi===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Fi=s&&s[1]||"",Ya=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fi+i+Ya}var Qr=!1;function ji(i,s){if(!i||Qr)return"";Qr=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ht=function(){throw Error()};if(Object.defineProperty(ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ht,[])}catch(at){var it=at}Reflect.construct(i,[],ht)}else{try{ht.call()}catch(at){it=at}i.call(ht.prototype)}}else{try{throw Error()}catch(at){it=at}(ht=i())&&typeof ht.catch=="function"&&ht.catch(function(){})}}catch(at){if(at&&it&&typeof at.stack=="string")return[at.stack,it.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),w=p[0],S=p[1];if(w&&S){var z=w.split(`
`),et=S.split(`
`);for(f=u=0;u<z.length&&!z[u].includes("DetermineComponentFrameRoot");)u++;for(;f<et.length&&!et[f].includes("DetermineComponentFrameRoot");)f++;if(u===z.length||f===et.length)for(u=z.length-1,f=et.length-1;1<=u&&0<=f&&z[u]!==et[f];)f--;for(;1<=u&&0<=f;u--,f--)if(z[u]!==et[f]){if(u!==1||f!==1)do if(u--,f--,0>f||z[u]!==et[f]){var lt=`
`+z[u].replace(" at new "," at ");return i.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",i.displayName)),lt}while(1<=u&&0<=f);break}}}finally{Qr=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Ai(o):""}function Sl(i){switch(i.tag){case 26:case 27:case 5:return Ai(i.type);case 16:return Ai("Lazy");case 13:return Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 15:return ji(i.type,!1);case 11:return ji(i.type.render,!1);case 1:return ji(i.type,!0);case 31:return Ai("Activity");default:return""}}function Ka(i){try{var s="";do s+=Sl(i),i=i.return;while(i);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function An(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Al(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function md(i){var s=Al(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),u=""+i[s];if(!i.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){u=""+w,p.call(this,w)}}),Object.defineProperty(i,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Xa(i){i._valueTracker||(i._valueTracker=md(i))}function bl(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=Al(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function Ws(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var pd=/[\n"\\]/g;function Ve(i){return i.replace(pd,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function qn(i,s,o,u,f,p,w,S){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),s!=null?w==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+An(s)):i.value!==""+An(s)&&(i.value=""+An(s)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),s!=null?Zr(i,w,An(s)):o!=null?Zr(i,w,An(o)):u!=null&&i.removeAttribute("value"),f==null&&p!=null&&(i.defaultChecked=!!p),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.name=""+An(S):i.removeAttribute("name")}function Js(i,s,o,u,f,p,w,S){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+An(o):"",s=s!=null?""+An(s):o,S||s===i.value||(i.value=s),i.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=S?i.checked:!!u,i.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w)}function Zr(i,s,o){s==="number"&&Ws(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function pr(i,s,o,u){if(i=i.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=s.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+An(o),s=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function se(i,s,o){if(s!=null&&(s=""+An(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+An(o):""}function ta(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(K(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=An(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u)}function oi(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var ea=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ec(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||ea.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function Rl(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&Ec(i,f,u)}else for(var p in s)s.hasOwnProperty(p)&&Ec(i,p,s[p])}function Il(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_d=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qa(i){return _d.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var yr=null;function li(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var _r=null,vr=null;function Cl(i){var s=ri(i);if(s&&(i=s.stateNode)){var o=i[Ee]||null;t:switch(i=s.stateNode,s.type){case"input":if(qn(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ve(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var f=u[Ee]||null;if(!f)throw Error(r(90));qn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&bl(u)}break t;case"textarea":se(i,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&pr(i,!!o.multiple,s,!1)}}}var Gi=!1;function Tc(i,s,o){if(Gi)return i(s,o);Gi=!0;try{var u=i(s);return u}finally{if(Gi=!1,(_r!==null||vr!==null)&&(gh(),_r&&(s=_r,i=vr,vr=_r=null,Cl(s),i)))for(s=0;s<i.length;s++)Cl(i[s])}}function na(i,s){var o=i.stateNode;if(o===null)return null;var u=o[Ee]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ui=!1;if(bi)try{var ia={};Object.defineProperty(ia,"passive",{get:function(){ui=!0}}),window.addEventListener("test",ia,ia),window.removeEventListener("test",ia,ia)}catch{ui=!1}var $i=null,Wr=null,Er=null;function xl(){if(Er)return Er;var i,s=Wr,o=s.length,u,f="value"in $i?$i.value:$i.textContent,p=f.length;for(i=0;i<o&&s[i]===f[i];i++);var w=o-i;for(u=1;u<=w&&s[o-u]===f[p-u];u++);return Er=f.slice(i,1<u?1-u:void 0)}function Yi(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Ki(){return!0}function Nl(){return!1}function Qe(i){function s(o,u,f,p,w){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(o=i[S],this[S]=o?o(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ki:Nl,this.isPropagationStopped=Nl,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),s}var ee={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Za=Qe(ee),ra=y({},ee,{view:0,detail:0}),wc=Qe(ra),Wa,Ja,Xi,sa=y({},ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:la,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Xi&&(Xi&&i.type==="mousemove"?(Wa=i.screenX-Xi.screenX,Ja=i.screenY-Xi.screenY):Ja=Wa=0,Xi=i),Wa)},movementY:function(i){return"movementY"in i?i.movementY:Ja}}),ci=Qe(sa),Sc=y({},sa,{dataTransfer:0}),vd=Qe(Sc),aa=y({},ra,{relatedTarget:0}),to=Qe(aa),Dl=y({},ee,{animationName:0,elapsedTime:0,pseudoElement:0}),eo=Qe(Dl),Ac=y({},ee,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),no=Qe(Ac),Ed=y({},ee,{data:0}),Ol=Qe(Ed),oa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ml(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Rc[i])?!!s[i]:!1}function la(){return Ml}var Ic=y({},ra,{key:function(i){if(i.key){var s=oa[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Yi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?bc[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:la,charCode:function(i){return i.type==="keypress"?Yi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Yi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),io=Qe(Ic),Cc=y({},sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vl=Qe(Cc),Tr=y({},ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:la}),xc=Qe(Tr),Nc=y({},ee,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dc=Qe(Nc),Oc=y({},sa,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ro=Qe(Oc),bn=y({},ee,{newState:0,oldState:0}),Mc=Qe(bn),Vc=[9,13,27,32],Qi=bi&&"CompositionEvent"in window,h=null;bi&&"documentMode"in document&&(h=document.documentMode);var _=bi&&"TextEvent"in window&&!h,E=bi&&(!Qi||h&&8<h&&11>=h),I=" ",Z=!1;function ot(i,s){switch(i){case"keyup":return Vc.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Yt=!1;function qe(i,s){switch(i){case"compositionend":return mt(s);case"keypress":return s.which!==32?null:(Z=!0,I);case"textInput":return i=s.data,i===I&&Z?null:i;default:return null}}function Kt(i,s){if(Yt)return i==="compositionend"||!Qi&&ot(i,s)?(i=xl(),Er=Wr=$i=null,Yt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var Ze={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fe(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Ze[i.type]:s==="textarea"}function wr(i,s,o,u){_r?vr?vr.push(u):vr=[u]:_r=u,s=Eh(s,"onChange"),0<s.length&&(o=new Za("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var sn=null,Zi=null;function kl(i){S0(i,0)}function kc(i){var s=si(i);if(bl(s))return i}function jy(i,s){if(i==="change")return s}var Gy=!1;if(bi){var Td;if(bi){var wd="oninput"in document;if(!wd){var $y=document.createElement("div");$y.setAttribute("oninput","return;"),wd=typeof $y.oninput=="function"}Td=wd}else Td=!1;Gy=Td&&(!document.documentMode||9<document.documentMode)}function Yy(){sn&&(sn.detachEvent("onpropertychange",Ky),Zi=sn=null)}function Ky(i){if(i.propertyName==="value"&&kc(Zi)){var s=[];wr(s,Zi,i,li(i)),Tc(kl,s)}}function V1(i,s,o){i==="focusin"?(Yy(),sn=s,Zi=o,sn.attachEvent("onpropertychange",Ky)):i==="focusout"&&Yy()}function k1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return kc(Zi)}function P1(i,s){if(i==="click")return kc(s)}function L1(i,s){if(i==="input"||i==="change")return kc(s)}function U1(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Fn=typeof Object.is=="function"?Object.is:U1;function Pl(i,s){if(Fn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Ne.call(s,f)||!Fn(i[f],s[f]))return!1}return!0}function Xy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Qy(i,s){var o=Xy(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Xy(o)}}function Zy(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Zy(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Wy(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Ws(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=Ws(i.document)}return s}function Sd(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var z1=bi&&"documentMode"in document&&11>=document.documentMode,so=null,Ad=null,Ll=null,bd=!1;function Jy(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;bd||so==null||so!==Ws(u)||(u=so,"selectionStart"in u&&Sd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ll&&Pl(Ll,u)||(Ll=u,u=Eh(Ad,"onSelect"),0<u.length&&(s=new Za("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=so)))}function ua(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var ao={animationend:ua("Animation","AnimationEnd"),animationiteration:ua("Animation","AnimationIteration"),animationstart:ua("Animation","AnimationStart"),transitionrun:ua("Transition","TransitionRun"),transitionstart:ua("Transition","TransitionStart"),transitioncancel:ua("Transition","TransitionCancel"),transitionend:ua("Transition","TransitionEnd")},Rd={},t_={};bi&&(t_=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function ca(i){if(Rd[i])return Rd[i];if(!ao[i])return i;var s=ao[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in t_)return Rd[i]=s[o];return i}var e_=ca("animationend"),n_=ca("animationiteration"),i_=ca("animationstart"),B1=ca("transitionrun"),H1=ca("transitionstart"),q1=ca("transitioncancel"),r_=ca("transitionend"),s_=new Map,Id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Id.push("scrollEnd");function Ri(i,s){s_.set(i,s),Hn(s,[i])}var a_=new WeakMap;function hi(i,s){if(typeof i=="object"&&i!==null){var o=a_.get(i);return o!==void 0?o:(s={value:i,source:s,stack:Ka(s)},a_.set(i,s),s)}return{value:i,source:s,stack:Ka(s)}}var fi=[],oo=0,Cd=0;function Pc(){for(var i=oo,s=Cd=oo=0;s<i;){var o=fi[s];fi[s++]=null;var u=fi[s];fi[s++]=null;var f=fi[s];fi[s++]=null;var p=fi[s];if(fi[s++]=null,u!==null&&f!==null){var w=u.pending;w===null?f.next=f:(f.next=w.next,w.next=f),u.pending=f}p!==0&&o_(o,f,p)}}function Lc(i,s,o,u){fi[oo++]=i,fi[oo++]=s,fi[oo++]=o,fi[oo++]=u,Cd|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function xd(i,s,o,u){return Lc(i,s,o,u),Uc(i)}function lo(i,s){return Lc(i,null,null,s),Uc(i)}function o_(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=i.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(f=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,f&&s!==null&&(f=31-pe(o),i=p.hiddenUpdates,u=i[f],u===null?i[f]=[s]:u.push(s),s.lane=o|536870912),p):null}function Uc(i){if(50<lu)throw lu=0,kg=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var uo={};function F1(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(i,s,o,u){return new F1(i,s,o,u)}function Nd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Sr(i,s){var o=i.alternate;return o===null?(o=jn(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function l_(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function zc(i,s,o,u,f,p){var w=0;if(u=i,typeof i=="function")Nd(i)&&(w=1);else if(typeof i=="string")w=GR(i,o,ct.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case R:return i=jn(31,o,s,f),i.elementType=R,i.lanes=p,i;case k:return ha(o.children,f,p,s);case L:w=8,f|=24;break;case O:return i=jn(12,o,s,f|2),i.elementType=O,i.lanes=p,i;case Y:return i=jn(13,o,s,f),i.elementType=Y,i.lanes=p,i;case rt:return i=jn(19,o,s,f),i.elementType=rt,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case H:case G:w=10;break t;case q:w=9;break t;case B:w=11;break t;case M:w=14;break t;case b:w=16,u=null;break t}w=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=jn(w,o,s,f),s.elementType=i,s.type=u,s.lanes=p,s}function ha(i,s,o,u){return i=jn(7,i,u,s),i.lanes=o,i}function Dd(i,s,o){return i=jn(6,i,null,s),i.lanes=o,i}function Od(i,s,o){return s=jn(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var co=[],ho=0,Bc=null,Hc=0,di=[],gi=0,fa=null,Ar=1,br="";function da(i,s){co[ho++]=Hc,co[ho++]=Bc,Bc=i,Hc=s}function u_(i,s,o){di[gi++]=Ar,di[gi++]=br,di[gi++]=fa,fa=i;var u=Ar;i=br;var f=32-pe(u)-1;u&=~(1<<f),o+=1;var p=32-pe(s)+f;if(30<p){var w=f-f%5;p=(u&(1<<w)-1).toString(32),u>>=w,f-=w,Ar=1<<32-pe(s)+f|o<<f|u,br=p+i}else Ar=1<<p|o<<f|u,br=i}function Md(i){i.return!==null&&(da(i,1),u_(i,1,0))}function Vd(i){for(;i===Bc;)Bc=co[--ho],co[ho]=null,Hc=co[--ho],co[ho]=null;for(;i===fa;)fa=di[--gi],di[gi]=null,br=di[--gi],di[gi]=null,Ar=di[--gi],di[gi]=null}var Rn=null,Te=null,Jt=!1,ga=null,Wi=!1,kd=Error(r(519));function ma(i){var s=Error(r(418,""));throw Bl(hi(s,i)),kd}function c_(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[be]=i,s[Ee]=u,o){case"dialog":Ft("cancel",s),Ft("close",s);break;case"iframe":case"object":case"embed":Ft("load",s);break;case"video":case"audio":for(o=0;o<cu.length;o++)Ft(cu[o],s);break;case"source":Ft("error",s);break;case"img":case"image":case"link":Ft("error",s),Ft("load",s);break;case"details":Ft("toggle",s);break;case"input":Ft("invalid",s),Js(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Xa(s);break;case"select":Ft("invalid",s);break;case"textarea":Ft("invalid",s),ta(s,u.value,u.defaultValue,u.children),Xa(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||I0(s.textContent,o)?(u.popover!=null&&(Ft("beforetoggle",s),Ft("toggle",s)),u.onScroll!=null&&Ft("scroll",s),u.onScrollEnd!=null&&Ft("scrollend",s),u.onClick!=null&&(s.onclick=Th),s=!0):s=!1,s||ma(i)}function h_(i){for(Rn=i.return;Rn;)switch(Rn.tag){case 5:case 13:Wi=!1;return;case 27:case 3:Wi=!0;return;default:Rn=Rn.return}}function Ul(i){if(i!==Rn)return!1;if(!Jt)return h_(i),Jt=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||Zg(i.type,i.memoizedProps)),o=!o),o&&Te&&ma(i),h_(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(s===0){Te=Ci(i.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;i=i.nextSibling}Te=null}}else s===27?(s=Te,gs(i.type)?(i=em,em=null,Te=i):Te=s):Te=Rn?Ci(i.stateNode.nextSibling):null;return!0}function zl(){Te=Rn=null,Jt=!1}function f_(){var i=ga;return i!==null&&(On===null?On=i:On.push.apply(On,i),ga=null),i}function Bl(i){ga===null?ga=[i]:ga.push(i)}var Pd=$(null),pa=null,Rr=null;function Jr(i,s,o){st(Pd,s._currentValue),s._currentValue=o}function Ir(i){i._currentValue=Pd.current,nt(Pd)}function Ld(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function Ud(i,s,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var p=f.dependencies;if(p!==null){var w=f.child;p=p.firstContext;t:for(;p!==null;){var S=p;p=f;for(var z=0;z<s.length;z++)if(S.context===s[z]){p.lanes|=o,S=p.alternate,S!==null&&(S.lanes|=o),Ld(p.return,o,i),u||(w=null);break t}p=S.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(r(341));w.lanes|=o,p=w.alternate,p!==null&&(p.lanes|=o),Ld(w,o,i),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===i){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function Hl(i,s,o,u){i=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var S=f.type;Fn(f.pendingProps.value,w.value)||(i!==null?i.push(S):i=[S])}}else if(f===Dt.current){if(w=f.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(pu):i=[pu])}f=f.return}i!==null&&Ud(s,i,o,u),s.flags|=262144}function qc(i){for(i=i.firstContext;i!==null;){if(!Fn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ya(i){pa=i,Rr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function dn(i){return d_(pa,i)}function Fc(i,s){return pa===null&&ya(i),d_(i,s)}function d_(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Rr===null){if(i===null)throw Error(r(308));Rr=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Rr=Rr.next=s;return o}var j1=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},G1=e.unstable_scheduleCallback,$1=e.unstable_NormalPriority,je={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zd(){return{controller:new j1,data:new Map,refCount:0}}function ql(i){i.refCount--,i.refCount===0&&G1($1,function(){i.controller.abort()})}var Fl=null,Bd=0,fo=0,go=null;function Y1(i,s){if(Fl===null){var o=Fl=[];Bd=0,fo=qg(),go={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Bd++,s.then(g_,g_),s}function g_(){if(--Bd===0&&Fl!==null){go!==null&&(go.status="fulfilled");var i=Fl;Fl=null,fo=0,go=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function K1(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var m_=C.S;C.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Y1(i,s),m_!==null&&m_(i,s)};var _a=$(null);function Hd(){var i=_a.current;return i!==null?i:he.pooledCache}function jc(i,s){s===null?st(_a,_a.current):st(_a,s.pool)}function p_(){var i=Hd();return i===null?null:{parent:je._currentValue,pool:i}}var jl=Error(r(460)),y_=Error(r(474)),Gc=Error(r(542)),qd={then:function(){}};function __(i){return i=i.status,i==="fulfilled"||i==="rejected"}function $c(){}function v_(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then($c,$c),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,T_(i),i;default:if(typeof s.status=="string")s.then($c,$c);else{if(i=he,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,T_(i),i}throw Gl=s,jl}}var Gl=null;function E_(){if(Gl===null)throw Error(r(459));var i=Gl;return Gl=null,i}function T_(i){if(i===jl||i===Gc)throw Error(r(483))}var ts=!1;function Fd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jd(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function es(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ns(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(ie&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Uc(i),o_(i,null,o),s}return Lc(i,u,s,o),Uc(i)}function $l(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Ks(i,o)}}function Gd(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=w:p=p.next=w,o=o.next}while(o!==null);p===null?f=p=s:p=p.next=s}else f=p=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var $d=!1;function Yl(){if($d){var i=go;if(i!==null)throw i}}function Kl(i,s,o,u){$d=!1;var f=i.updateQueue;ts=!1;var p=f.firstBaseUpdate,w=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var z=S,et=z.next;z.next=null,w===null?p=et:w.next=et,w=z;var lt=i.alternate;lt!==null&&(lt=lt.updateQueue,S=lt.lastBaseUpdate,S!==w&&(S===null?lt.firstBaseUpdate=et:S.next=et,lt.lastBaseUpdate=z))}if(p!==null){var ht=f.baseState;w=0,lt=et=z=null,S=p;do{var it=S.lane&-536870913,at=it!==S.lane;if(at?(Xt&it)===it:(u&it)===it){it!==0&&it===fo&&($d=!0),lt!==null&&(lt=lt.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var Ot=i,It=S;it=s;var le=o;switch(It.tag){case 1:if(Ot=It.payload,typeof Ot=="function"){ht=Ot.call(le,ht,it);break t}ht=Ot;break t;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=It.payload,it=typeof Ot=="function"?Ot.call(le,ht,it):Ot,it==null)break t;ht=y({},ht,it);break t;case 2:ts=!0}}it=S.callback,it!==null&&(i.flags|=64,at&&(i.flags|=8192),at=f.callbacks,at===null?f.callbacks=[it]:at.push(it))}else at={lane:it,tag:S.tag,payload:S.payload,callback:S.callback,next:null},lt===null?(et=lt=at,z=ht):lt=lt.next=at,w|=it;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;at=S,S=at.next,at.next=null,f.lastBaseUpdate=at,f.shared.pending=null}}while(!0);lt===null&&(z=ht),f.baseState=z,f.firstBaseUpdate=et,f.lastBaseUpdate=lt,p===null&&(f.shared.lanes=0),cs|=w,i.lanes=w,i.memoizedState=ht}}function w_(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function S_(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)w_(o[i],s)}var mo=$(null),Yc=$(0);function A_(i,s){i=Vr,st(Yc,i),st(mo,s),Vr=i|s.baseLanes}function Yd(){st(Yc,Vr),st(mo,mo.current)}function Kd(){Vr=Yc.current,nt(mo),nt(Yc)}var is=0,Pt=null,ae=null,ke=null,Kc=!1,po=!1,va=!1,Xc=0,Xl=0,yo=null,X1=0;function Re(){throw Error(r(321))}function Xd(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!Fn(i[o],s[o]))return!1;return!0}function Qd(i,s,o,u,f,p){return is=p,Pt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,C.H=i===null||i.memoizedState===null?ov:lv,va=!1,p=o(u,f),va=!1,po&&(p=R_(s,o,u,f)),b_(i),p}function b_(i){C.H=eh;var s=ae!==null&&ae.next!==null;if(is=0,ke=ae=Pt=null,Kc=!1,Xl=0,yo=null,s)throw Error(r(300));i===null||We||(i=i.dependencies,i!==null&&qc(i)&&(We=!0))}function R_(i,s,o,u){Pt=i;var f=0;do{if(po&&(yo=null),Xl=0,po=!1,25<=f)throw Error(r(301));if(f+=1,ke=ae=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}C.H=nR,p=s(o,u)}while(po);return p}function Q1(){var i=C.H,s=i.useState()[0];return s=typeof s.then=="function"?Ql(s):s,i=i.useState()[0],(ae!==null?ae.memoizedState:null)!==i&&(Pt.flags|=1024),s}function Zd(){var i=Xc!==0;return Xc=0,i}function Wd(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function Jd(i){if(Kc){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Kc=!1}is=0,ke=ae=Pt=null,po=!1,Xl=Xc=0,yo=null}function Nn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?Pt.memoizedState=ke=i:ke=ke.next=i,ke}function Pe(){if(ae===null){var i=Pt.alternate;i=i!==null?i.memoizedState:null}else i=ae.next;var s=ke===null?Pt.memoizedState:ke.next;if(s!==null)ke=s,ae=i;else{if(i===null)throw Pt.alternate===null?Error(r(467)):Error(r(310));ae=i,i={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},ke===null?Pt.memoizedState=ke=i:ke=ke.next=i}return ke}function tg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ql(i){var s=Xl;return Xl+=1,yo===null&&(yo=[]),i=v_(yo,i,s),s=Pt,(ke===null?s.memoizedState:ke.next)===null&&(s=s.alternate,C.H=s===null||s.memoizedState===null?ov:lv),i}function Qc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ql(i);if(i.$$typeof===G)return dn(i)}throw Error(r(438,String(i)))}function eg(i){var s=null,o=Pt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Pt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=tg(),Pt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=V;return s.index++,o}function Cr(i,s){return typeof s=="function"?s(i):s}function Zc(i){var s=Pe();return ng(s,ae,i)}function ng(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=i.baseQueue,p=u.pending;if(p!==null){if(f!==null){var w=f.next;f.next=p.next,p.next=w}s.baseQueue=f=p,u.pending=null}if(p=i.baseState,f===null)i.memoizedState=p;else{s=f.next;var S=w=null,z=null,et=s,lt=!1;do{var ht=et.lane&-536870913;if(ht!==et.lane?(Xt&ht)===ht:(is&ht)===ht){var it=et.revertLane;if(it===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),ht===fo&&(lt=!0);else if((is&it)===it){et=et.next,it===fo&&(lt=!0);continue}else ht={lane:0,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},z===null?(S=z=ht,w=p):z=z.next=ht,Pt.lanes|=it,cs|=it;ht=et.action,va&&o(p,ht),p=et.hasEagerState?et.eagerState:o(p,ht)}else it={lane:ht,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},z===null?(S=z=it,w=p):z=z.next=it,Pt.lanes|=ht,cs|=ht;et=et.next}while(et!==null&&et!==s);if(z===null?w=p:z.next=S,!Fn(p,i.memoizedState)&&(We=!0,lt&&(o=go,o!==null)))throw o;i.memoizedState=p,i.baseState=w,i.baseQueue=z,u.lastRenderedState=p}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function ig(i){var s=Pe(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,p=s.memoizedState;if(f!==null){o.pending=null;var w=f=f.next;do p=i(p,w.action),w=w.next;while(w!==f);Fn(p,s.memoizedState)||(We=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function I_(i,s,o){var u=Pt,f=Pe(),p=Jt;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var w=!Fn((ae||f).memoizedState,o);w&&(f.memoizedState=o,We=!0),f=f.queue;var S=N_.bind(null,u,f,i);if(Zl(2048,8,S,[i]),f.getSnapshot!==s||w||ke!==null&&ke.memoizedState.tag&1){if(u.flags|=2048,_o(9,Wc(),x_.bind(null,u,f,o,s),null),he===null)throw Error(r(349));p||(is&124)!==0||C_(u,s,o)}return o}function C_(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=Pt.updateQueue,s===null?(s=tg(),Pt.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function x_(i,s,o,u){s.value=o,s.getSnapshot=u,D_(s)&&O_(i)}function N_(i,s,o){return o(function(){D_(s)&&O_(i)})}function D_(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!Fn(i,o)}catch{return!0}}function O_(i){var s=lo(i,2);s!==null&&Xn(s,i,2)}function rg(i){var s=Nn();if(typeof i=="function"){var o=i;if(i=o(),va){Oe(!0);try{o()}finally{Oe(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:i},s}function M_(i,s,o,u){return i.baseState=o,ng(i,ae,typeof u=="function"?u:Cr)}function Z1(i,s,o,u,f){if(th(i))throw Error(r(485));if(i=s.action,i!==null){var p={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};C.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,V_(s,p)):(p.next=o.next,s.pending=o.next=p)}}function V_(i,s){var o=s.action,u=s.payload,f=i.state;if(s.isTransition){var p=C.T,w={};C.T=w;try{var S=o(f,u),z=C.S;z!==null&&z(w,S),k_(i,s,S)}catch(et){sg(i,s,et)}finally{C.T=p}}else try{p=o(f,u),k_(i,s,p)}catch(et){sg(i,s,et)}}function k_(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){P_(i,s,u)},function(u){return sg(i,s,u)}):P_(i,s,o)}function P_(i,s,o){s.status="fulfilled",s.value=o,L_(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,V_(i,o)))}function sg(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,L_(s),s=s.next;while(s!==u)}i.action=null}function L_(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function U_(i,s){return s}function z_(i,s){if(Jt){var o=he.formState;if(o!==null){t:{var u=Pt;if(Jt){if(Te){e:{for(var f=Te,p=Wi;f.nodeType!==8;){if(!p){f=null;break e}if(f=Ci(f.nextSibling),f===null){f=null;break e}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Te=Ci(f.nextSibling),u=f.data==="F!";break t}}ma(u)}u=!1}u&&(s=o[0])}}return o=Nn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:U_,lastRenderedState:s},o.queue=u,o=rv.bind(null,Pt,u),u.dispatch=o,u=rg(!1),p=cg.bind(null,Pt,!1,u.queue),u=Nn(),f={state:s,dispatch:null,action:i,pending:null},u.queue=f,o=Z1.bind(null,Pt,f,p,o),f.dispatch=o,u.memoizedState=i,[s,o,!1]}function B_(i){var s=Pe();return H_(s,ae,i)}function H_(i,s,o){if(s=ng(i,s,U_)[0],i=Zc(Cr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Ql(s)}catch(w){throw w===jl?Gc:w}else u=s;s=Pe();var f=s.queue,p=f.dispatch;return o!==s.memoizedState&&(Pt.flags|=2048,_o(9,Wc(),W1.bind(null,f,o),null)),[u,p,i]}function W1(i,s){i.action=s}function q_(i){var s=Pe(),o=ae;if(o!==null)return H_(s,o,i);Pe(),s=s.memoizedState,o=Pe();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function _o(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=Pt.updateQueue,s===null&&(s=tg(),Pt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function Wc(){return{destroy:void 0,resource:void 0}}function F_(){return Pe().memoizedState}function Jc(i,s,o,u){var f=Nn();u=u===void 0?null:u,Pt.flags|=i,f.memoizedState=_o(1|s,Wc(),o,u)}function Zl(i,s,o,u){var f=Pe();u=u===void 0?null:u;var p=f.memoizedState.inst;ae!==null&&u!==null&&Xd(u,ae.memoizedState.deps)?f.memoizedState=_o(s,p,o,u):(Pt.flags|=i,f.memoizedState=_o(1|s,p,o,u))}function j_(i,s){Jc(8390656,8,i,s)}function G_(i,s){Zl(2048,8,i,s)}function $_(i,s){return Zl(4,2,i,s)}function Y_(i,s){return Zl(4,4,i,s)}function K_(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function X_(i,s,o){o=o!=null?o.concat([i]):null,Zl(4,4,K_.bind(null,s,i),o)}function ag(){}function Q_(i,s){var o=Pe();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Xd(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function Z_(i,s){var o=Pe();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Xd(s,u[1]))return u[0];if(u=i(),va){Oe(!0);try{i()}finally{Oe(!1)}}return o.memoizedState=[u,s],u}function og(i,s,o){return o===void 0||(is&1073741824)!==0?i.memoizedState=s:(i.memoizedState=o,i=t0(),Pt.lanes|=i,cs|=i,o)}function W_(i,s,o,u){return Fn(o,s)?o:mo.current!==null?(i=og(i,o,u),Fn(i,s)||(We=!0),i):(is&42)===0?(We=!0,i.memoizedState=o):(i=t0(),Pt.lanes|=i,cs|=i,s)}function J_(i,s,o,u,f){var p=j.p;j.p=p!==0&&8>p?p:8;var w=C.T,S={};C.T=S,cg(i,!1,s,o);try{var z=f(),et=C.S;if(et!==null&&et(S,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var lt=K1(z,u);Wl(i,s,lt,Kn(i))}else Wl(i,s,u,Kn(i))}catch(ht){Wl(i,s,{then:function(){},status:"rejected",reason:ht},Kn())}finally{j.p=p,C.T=w}}function J1(){}function lg(i,s,o,u){if(i.tag!==5)throw Error(r(476));var f=tv(i).queue;J_(i,f,s,tt,o===null?J1:function(){return ev(i),o(u)})}function tv(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:tt,baseState:tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:tt},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function ev(i){var s=tv(i).next.queue;Wl(i,s,{},Kn())}function ug(){return dn(pu)}function nv(){return Pe().memoizedState}function iv(){return Pe().memoizedState}function tR(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=Kn();i=es(o);var u=ns(s,i,o);u!==null&&(Xn(u,s,o),$l(u,s,o)),s={cache:zd()},i.payload=s;return}s=s.return}}function eR(i,s,o){var u=Kn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},th(i)?sv(s,o):(o=xd(i,s,o,u),o!==null&&(Xn(o,i,u),av(o,s,u)))}function rv(i,s,o){var u=Kn();Wl(i,s,o,u)}function Wl(i,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(th(i))sv(s,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var w=s.lastRenderedState,S=p(w,o);if(f.hasEagerState=!0,f.eagerState=S,Fn(S,w))return Lc(i,s,f,0),he===null&&Pc(),!1}catch{}finally{}if(o=xd(i,s,f,u),o!==null)return Xn(o,i,u),av(o,s,u),!0}return!1}function cg(i,s,o,u){if(u={lane:2,revertLane:qg(),action:u,hasEagerState:!1,eagerState:null,next:null},th(i)){if(s)throw Error(r(479))}else s=xd(i,o,u,2),s!==null&&Xn(s,i,2)}function th(i){var s=i.alternate;return i===Pt||s!==null&&s===Pt}function sv(i,s){po=Kc=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function av(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Ks(i,o)}}var eh={readContext:dn,use:Qc,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useLayoutEffect:Re,useInsertionEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useSyncExternalStore:Re,useId:Re,useHostTransitionStatus:Re,useFormState:Re,useActionState:Re,useOptimistic:Re,useMemoCache:Re,useCacheRefresh:Re},ov={readContext:dn,use:Qc,useCallback:function(i,s){return Nn().memoizedState=[i,s===void 0?null:s],i},useContext:dn,useEffect:j_,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,Jc(4194308,4,K_.bind(null,s,i),o)},useLayoutEffect:function(i,s){return Jc(4194308,4,i,s)},useInsertionEffect:function(i,s){Jc(4,2,i,s)},useMemo:function(i,s){var o=Nn();s=s===void 0?null:s;var u=i();if(va){Oe(!0);try{i()}finally{Oe(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=Nn();if(o!==void 0){var f=o(s);if(va){Oe(!0);try{o(s)}finally{Oe(!1)}}}else f=s;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=eR.bind(null,Pt,i),[u.memoizedState,i]},useRef:function(i){var s=Nn();return i={current:i},s.memoizedState=i},useState:function(i){i=rg(i);var s=i.queue,o=rv.bind(null,Pt,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:ag,useDeferredValue:function(i,s){var o=Nn();return og(o,i,s)},useTransition:function(){var i=rg(!1);return i=J_.bind(null,Pt,i.queue,!0,!1),Nn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=Pt,f=Nn();if(Jt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),he===null)throw Error(r(349));(Xt&124)!==0||C_(u,s,o)}f.memoizedState=o;var p={value:o,getSnapshot:s};return f.queue=p,j_(N_.bind(null,u,p,i),[i]),u.flags|=2048,_o(9,Wc(),x_.bind(null,u,p,o,s),null),o},useId:function(){var i=Nn(),s=he.identifierPrefix;if(Jt){var o=br,u=Ar;o=(u&~(1<<32-pe(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=Xc++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=X1++,s="«"+s+"r"+o.toString(32)+"»";return i.memoizedState=s},useHostTransitionStatus:ug,useFormState:z_,useActionState:z_,useOptimistic:function(i){var s=Nn();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=cg.bind(null,Pt,!0,o),o.dispatch=s,[i,s]},useMemoCache:eg,useCacheRefresh:function(){return Nn().memoizedState=tR.bind(null,Pt)}},lv={readContext:dn,use:Qc,useCallback:Q_,useContext:dn,useEffect:G_,useImperativeHandle:X_,useInsertionEffect:$_,useLayoutEffect:Y_,useMemo:Z_,useReducer:Zc,useRef:F_,useState:function(){return Zc(Cr)},useDebugValue:ag,useDeferredValue:function(i,s){var o=Pe();return W_(o,ae.memoizedState,i,s)},useTransition:function(){var i=Zc(Cr)[0],s=Pe().memoizedState;return[typeof i=="boolean"?i:Ql(i),s]},useSyncExternalStore:I_,useId:nv,useHostTransitionStatus:ug,useFormState:B_,useActionState:B_,useOptimistic:function(i,s){var o=Pe();return M_(o,ae,i,s)},useMemoCache:eg,useCacheRefresh:iv},nR={readContext:dn,use:Qc,useCallback:Q_,useContext:dn,useEffect:G_,useImperativeHandle:X_,useInsertionEffect:$_,useLayoutEffect:Y_,useMemo:Z_,useReducer:ig,useRef:F_,useState:function(){return ig(Cr)},useDebugValue:ag,useDeferredValue:function(i,s){var o=Pe();return ae===null?og(o,i,s):W_(o,ae.memoizedState,i,s)},useTransition:function(){var i=ig(Cr)[0],s=Pe().memoizedState;return[typeof i=="boolean"?i:Ql(i),s]},useSyncExternalStore:I_,useId:nv,useHostTransitionStatus:ug,useFormState:q_,useActionState:q_,useOptimistic:function(i,s){var o=Pe();return ae!==null?M_(o,ae,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:eg,useCacheRefresh:iv},vo=null,Jl=0;function nh(i){var s=Jl;return Jl+=1,vo===null&&(vo=[]),v_(vo,i,s)}function tu(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function ih(i,s){throw s.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function uv(i){var s=i._init;return s(i._payload)}function cv(i){function s(Q,F){if(i){var J=Q.deletions;J===null?(Q.deletions=[F],Q.flags|=16):J.push(F)}}function o(Q,F){if(!i)return null;for(;F!==null;)s(Q,F),F=F.sibling;return null}function u(Q){for(var F=new Map;Q!==null;)Q.key!==null?F.set(Q.key,Q):F.set(Q.index,Q),Q=Q.sibling;return F}function f(Q,F){return Q=Sr(Q,F),Q.index=0,Q.sibling=null,Q}function p(Q,F,J){return Q.index=J,i?(J=Q.alternate,J!==null?(J=J.index,J<F?(Q.flags|=67108866,F):J):(Q.flags|=67108866,F)):(Q.flags|=1048576,F)}function w(Q){return i&&Q.alternate===null&&(Q.flags|=67108866),Q}function S(Q,F,J,ut){return F===null||F.tag!==6?(F=Dd(J,Q.mode,ut),F.return=Q,F):(F=f(F,J),F.return=Q,F)}function z(Q,F,J,ut){var Et=J.type;return Et===k?lt(Q,F,J.props.children,ut,J.key):F!==null&&(F.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===b&&uv(Et)===F.type)?(F=f(F,J.props),tu(F,J),F.return=Q,F):(F=zc(J.type,J.key,J.props,null,Q.mode,ut),tu(F,J),F.return=Q,F)}function et(Q,F,J,ut){return F===null||F.tag!==4||F.stateNode.containerInfo!==J.containerInfo||F.stateNode.implementation!==J.implementation?(F=Od(J,Q.mode,ut),F.return=Q,F):(F=f(F,J.children||[]),F.return=Q,F)}function lt(Q,F,J,ut,Et){return F===null||F.tag!==7?(F=ha(J,Q.mode,ut,Et),F.return=Q,F):(F=f(F,J),F.return=Q,F)}function ht(Q,F,J){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Dd(""+F,Q.mode,J),F.return=Q,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case T:return J=zc(F.type,F.key,F.props,null,Q.mode,J),tu(J,F),J.return=Q,J;case A:return F=Od(F,Q.mode,J),F.return=Q,F;case b:var ut=F._init;return F=ut(F._payload),ht(Q,F,J)}if(K(F)||U(F))return F=ha(F,Q.mode,J,null),F.return=Q,F;if(typeof F.then=="function")return ht(Q,nh(F),J);if(F.$$typeof===G)return ht(Q,Fc(Q,F),J);ih(Q,F)}return null}function it(Q,F,J,ut){var Et=F!==null?F.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Et!==null?null:S(Q,F,""+J,ut);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case T:return J.key===Et?z(Q,F,J,ut):null;case A:return J.key===Et?et(Q,F,J,ut):null;case b:return Et=J._init,J=Et(J._payload),it(Q,F,J,ut)}if(K(J)||U(J))return Et!==null?null:lt(Q,F,J,ut,null);if(typeof J.then=="function")return it(Q,F,nh(J),ut);if(J.$$typeof===G)return it(Q,F,Fc(Q,J),ut);ih(Q,J)}return null}function at(Q,F,J,ut,Et){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return Q=Q.get(J)||null,S(F,Q,""+ut,Et);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case T:return Q=Q.get(ut.key===null?J:ut.key)||null,z(F,Q,ut,Et);case A:return Q=Q.get(ut.key===null?J:ut.key)||null,et(F,Q,ut,Et);case b:var zt=ut._init;return ut=zt(ut._payload),at(Q,F,J,ut,Et)}if(K(ut)||U(ut))return Q=Q.get(J)||null,lt(F,Q,ut,Et,null);if(typeof ut.then=="function")return at(Q,F,J,nh(ut),Et);if(ut.$$typeof===G)return at(Q,F,J,Fc(F,ut),Et);ih(F,ut)}return null}function Ot(Q,F,J,ut){for(var Et=null,zt=null,wt=F,Ct=F=0,tn=null;wt!==null&&Ct<J.length;Ct++){wt.index>Ct?(tn=wt,wt=null):tn=wt.sibling;var Wt=it(Q,wt,J[Ct],ut);if(Wt===null){wt===null&&(wt=tn);break}i&&wt&&Wt.alternate===null&&s(Q,wt),F=p(Wt,F,Ct),zt===null?Et=Wt:zt.sibling=Wt,zt=Wt,wt=tn}if(Ct===J.length)return o(Q,wt),Jt&&da(Q,Ct),Et;if(wt===null){for(;Ct<J.length;Ct++)wt=ht(Q,J[Ct],ut),wt!==null&&(F=p(wt,F,Ct),zt===null?Et=wt:zt.sibling=wt,zt=wt);return Jt&&da(Q,Ct),Et}for(wt=u(wt);Ct<J.length;Ct++)tn=at(wt,Q,Ct,J[Ct],ut),tn!==null&&(i&&tn.alternate!==null&&wt.delete(tn.key===null?Ct:tn.key),F=p(tn,F,Ct),zt===null?Et=tn:zt.sibling=tn,zt=tn);return i&&wt.forEach(function(vs){return s(Q,vs)}),Jt&&da(Q,Ct),Et}function It(Q,F,J,ut){if(J==null)throw Error(r(151));for(var Et=null,zt=null,wt=F,Ct=F=0,tn=null,Wt=J.next();wt!==null&&!Wt.done;Ct++,Wt=J.next()){wt.index>Ct?(tn=wt,wt=null):tn=wt.sibling;var vs=it(Q,wt,Wt.value,ut);if(vs===null){wt===null&&(wt=tn);break}i&&wt&&vs.alternate===null&&s(Q,wt),F=p(vs,F,Ct),zt===null?Et=vs:zt.sibling=vs,zt=vs,wt=tn}if(Wt.done)return o(Q,wt),Jt&&da(Q,Ct),Et;if(wt===null){for(;!Wt.done;Ct++,Wt=J.next())Wt=ht(Q,Wt.value,ut),Wt!==null&&(F=p(Wt,F,Ct),zt===null?Et=Wt:zt.sibling=Wt,zt=Wt);return Jt&&da(Q,Ct),Et}for(wt=u(wt);!Wt.done;Ct++,Wt=J.next())Wt=at(wt,Q,Ct,Wt.value,ut),Wt!==null&&(i&&Wt.alternate!==null&&wt.delete(Wt.key===null?Ct:Wt.key),F=p(Wt,F,Ct),zt===null?Et=Wt:zt.sibling=Wt,zt=Wt);return i&&wt.forEach(function(iI){return s(Q,iI)}),Jt&&da(Q,Ct),Et}function le(Q,F,J,ut){if(typeof J=="object"&&J!==null&&J.type===k&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case T:t:{for(var Et=J.key;F!==null;){if(F.key===Et){if(Et=J.type,Et===k){if(F.tag===7){o(Q,F.sibling),ut=f(F,J.props.children),ut.return=Q,Q=ut;break t}}else if(F.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===b&&uv(Et)===F.type){o(Q,F.sibling),ut=f(F,J.props),tu(ut,J),ut.return=Q,Q=ut;break t}o(Q,F);break}else s(Q,F);F=F.sibling}J.type===k?(ut=ha(J.props.children,Q.mode,ut,J.key),ut.return=Q,Q=ut):(ut=zc(J.type,J.key,J.props,null,Q.mode,ut),tu(ut,J),ut.return=Q,Q=ut)}return w(Q);case A:t:{for(Et=J.key;F!==null;){if(F.key===Et)if(F.tag===4&&F.stateNode.containerInfo===J.containerInfo&&F.stateNode.implementation===J.implementation){o(Q,F.sibling),ut=f(F,J.children||[]),ut.return=Q,Q=ut;break t}else{o(Q,F);break}else s(Q,F);F=F.sibling}ut=Od(J,Q.mode,ut),ut.return=Q,Q=ut}return w(Q);case b:return Et=J._init,J=Et(J._payload),le(Q,F,J,ut)}if(K(J))return Ot(Q,F,J,ut);if(U(J)){if(Et=U(J),typeof Et!="function")throw Error(r(150));return J=Et.call(J),It(Q,F,J,ut)}if(typeof J.then=="function")return le(Q,F,nh(J),ut);if(J.$$typeof===G)return le(Q,F,Fc(Q,J),ut);ih(Q,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,F!==null&&F.tag===6?(o(Q,F.sibling),ut=f(F,J),ut.return=Q,Q=ut):(o(Q,F),ut=Dd(J,Q.mode,ut),ut.return=Q,Q=ut),w(Q)):o(Q,F)}return function(Q,F,J,ut){try{Jl=0;var Et=le(Q,F,J,ut);return vo=null,Et}catch(wt){if(wt===jl||wt===Gc)throw wt;var zt=jn(29,wt,null,Q.mode);return zt.lanes=ut,zt.return=Q,zt}finally{}}}var Eo=cv(!0),hv=cv(!1),mi=$(null),Ji=null;function rs(i){var s=i.alternate;st(Ge,Ge.current&1),st(mi,i),Ji===null&&(s===null||mo.current!==null||s.memoizedState!==null)&&(Ji=i)}function fv(i){if(i.tag===22){if(st(Ge,Ge.current),st(mi,i),Ji===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(Ji=i)}}else ss()}function ss(){st(Ge,Ge.current),st(mi,mi.current)}function xr(i){nt(mi),Ji===i&&(Ji=null),nt(Ge)}var Ge=$(0);function rh(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||tm(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function hg(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var fg={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=Kn(),f=es(u);f.payload=s,o!=null&&(f.callback=o),s=ns(i,f,u),s!==null&&(Xn(s,i,u),$l(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=Kn(),f=es(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=ns(i,f,u),s!==null&&(Xn(s,i,u),$l(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=Kn(),u=es(o);u.tag=2,s!=null&&(u.callback=s),s=ns(i,u,o),s!==null&&(Xn(s,i,o),$l(s,i,o))}};function dv(i,s,o,u,f,p,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,p,w):s.prototype&&s.prototype.isPureReactComponent?!Pl(o,u)||!Pl(f,p):!0}function gv(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&fg.enqueueReplaceState(s,s.state,null)}function Ea(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=y({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}var sh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function mv(i){sh(i)}function pv(i){console.error(i)}function yv(i){sh(i)}function ah(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function _v(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function dg(i,s,o){return o=es(o),o.tag=3,o.payload={element:null},o.callback=function(){ah(i,s)},o}function vv(i){return i=es(i),i.tag=3,i}function Ev(i,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;i.payload=function(){return f(p)},i.callback=function(){_v(s,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){_v(s,o,u),typeof f!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function iR(i,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Hl(s,o,f,!0),o=mi.current,o!==null){switch(o.tag){case 13:return Ji===null?Lg():o.alternate===null&&we===0&&(we=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===qd?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),zg(i,u,f)),!1;case 22:return o.flags|=65536,u===qd?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),zg(i,u,f)),!1}throw Error(r(435,o.tag))}return zg(i,u,f),Lg(),!1}if(Jt)return s=mi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==kd&&(i=Error(r(422),{cause:u}),Bl(hi(i,o)))):(u!==kd&&(s=Error(r(423),{cause:u}),Bl(hi(s,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=hi(u,o),f=dg(i.stateNode,u,f),Gd(i,f),we!==4&&(we=2)),!1;var p=Error(r(520),{cause:u});if(p=hi(p,o),ou===null?ou=[p]:ou.push(p),we!==4&&(we=2),s===null)return!0;u=hi(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=dg(o.stateNode,u,i),Gd(o,i),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(hs===null||!hs.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=vv(f),Ev(f,i,o,u),Gd(o,f),!1}o=o.return}while(o!==null);return!1}var Tv=Error(r(461)),We=!1;function an(i,s,o,u){s.child=i===null?hv(s,null,o,u):Eo(s,i.child,o,u)}function wv(i,s,o,u,f){o=o.render;var p=s.ref;if("ref"in u){var w={};for(var S in u)S!=="ref"&&(w[S]=u[S])}else w=u;return ya(s),u=Qd(i,s,o,w,p,f),S=Zd(),i!==null&&!We?(Wd(i,s,f),Nr(i,s,f)):(Jt&&S&&Md(s),s.flags|=1,an(i,s,u,f),s.child)}function Sv(i,s,o,u,f){if(i===null){var p=o.type;return typeof p=="function"&&!Nd(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,Av(i,s,p,u,f)):(i=zc(o.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(p=i.child,!Tg(i,f)){var w=p.memoizedProps;if(o=o.compare,o=o!==null?o:Pl,o(w,u)&&i.ref===s.ref)return Nr(i,s,f)}return s.flags|=1,i=Sr(p,u),i.ref=s.ref,i.return=s,s.child=i}function Av(i,s,o,u,f){if(i!==null){var p=i.memoizedProps;if(Pl(p,u)&&i.ref===s.ref)if(We=!1,s.pendingProps=u=p,Tg(i,f))(i.flags&131072)!==0&&(We=!0);else return s.lanes=i.lanes,Nr(i,s,f)}return gg(i,s,o,u,f)}function bv(i,s,o){var u=s.pendingProps,f=u.children,p=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,i!==null){for(f=s.child=i.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return Rv(i,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&jc(s,p!==null?p.cachePool:null),p!==null?A_(s,p):Yd(),fv(s);else return s.lanes=s.childLanes=536870912,Rv(i,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(jc(s,p.cachePool),A_(s,p),ss(),s.memoizedState=null):(i!==null&&jc(s,null),Yd(),ss());return an(i,s,f,o),s.child}function Rv(i,s,o,u){var f=Hd();return f=f===null?null:{parent:je._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},i!==null&&jc(s,null),Yd(),fv(s),i!==null&&Hl(i,s,u,!0),null}function oh(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function gg(i,s,o,u,f){return ya(s),o=Qd(i,s,o,u,void 0,f),u=Zd(),i!==null&&!We?(Wd(i,s,f),Nr(i,s,f)):(Jt&&u&&Md(s),s.flags|=1,an(i,s,o,f),s.child)}function Iv(i,s,o,u,f,p){return ya(s),s.updateQueue=null,o=R_(s,u,o,f),b_(i),u=Zd(),i!==null&&!We?(Wd(i,s,p),Nr(i,s,p)):(Jt&&u&&Md(s),s.flags|=1,an(i,s,o,p),s.child)}function Cv(i,s,o,u,f){if(ya(s),s.stateNode===null){var p=uo,w=o.contextType;typeof w=="object"&&w!==null&&(p=dn(w)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=fg,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},Fd(s),w=o.contextType,p.context=typeof w=="object"&&w!==null?dn(w):uo,p.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(hg(s,o,w,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&fg.enqueueReplaceState(p,p.state,null),Kl(s,u,p,f),Yl(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){p=s.stateNode;var S=s.memoizedProps,z=Ea(o,S);p.props=z;var et=p.context,lt=o.contextType;w=uo,typeof lt=="object"&&lt!==null&&(w=dn(lt));var ht=o.getDerivedStateFromProps;lt=typeof ht=="function"||typeof p.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,lt||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S||et!==w)&&gv(s,p,u,w),ts=!1;var it=s.memoizedState;p.state=it,Kl(s,u,p,f),Yl(),et=s.memoizedState,S||it!==et||ts?(typeof ht=="function"&&(hg(s,o,ht,u),et=s.memoizedState),(z=ts||dv(s,o,z,u,it,et,w))?(lt||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=et),p.props=u,p.state=et,p.context=w,u=z):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,jd(i,s),w=s.memoizedProps,lt=Ea(o,w),p.props=lt,ht=s.pendingProps,it=p.context,et=o.contextType,z=uo,typeof et=="object"&&et!==null&&(z=dn(et)),S=o.getDerivedStateFromProps,(et=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==ht||it!==z)&&gv(s,p,u,z),ts=!1,it=s.memoizedState,p.state=it,Kl(s,u,p,f),Yl();var at=s.memoizedState;w!==ht||it!==at||ts||i!==null&&i.dependencies!==null&&qc(i.dependencies)?(typeof S=="function"&&(hg(s,o,S,u),at=s.memoizedState),(lt=ts||dv(s,o,lt,u,it,at,z)||i!==null&&i.dependencies!==null&&qc(i.dependencies))?(et||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,at,z),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,at,z)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=at),p.props=u,p.state=at,p.context=z,u=lt):(typeof p.componentDidUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&it===i.memoizedState||(s.flags|=1024),u=!1)}return p=u,oh(i,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,i!==null&&u?(s.child=Eo(s,i.child,null,f),s.child=Eo(s,null,o,f)):an(i,s,o,f),s.memoizedState=p.state,i=s.child):i=Nr(i,s,f),i}function xv(i,s,o,u){return zl(),s.flags|=256,an(i,s,o,u),s.child}var mg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pg(i){return{baseLanes:i,cachePool:p_()}}function yg(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=pi),i}function Nv(i,s,o){var u=s.pendingProps,f=!1,p=(s.flags&128)!==0,w;if((w=p)||(w=i!==null&&i.memoizedState===null?!1:(Ge.current&2)!==0),w&&(f=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,i===null){if(Jt){if(f?rs(s):ss(),Jt){var S=Te,z;if(z=S){t:{for(z=S,S=Wi;z.nodeType!==8;){if(!S){S=null;break t}if(z=Ci(z.nextSibling),z===null){S=null;break t}}S=z}S!==null?(s.memoizedState={dehydrated:S,treeContext:fa!==null?{id:Ar,overflow:br}:null,retryLane:536870912,hydrationErrors:null},z=jn(18,null,null,0),z.stateNode=S,z.return=s,s.child=z,Rn=s,Te=null,z=!0):z=!1}z||ma(s)}if(S=s.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return tm(S)?s.lanes=32:s.lanes=536870912,null;xr(s)}return S=u.children,u=u.fallback,f?(ss(),f=s.mode,S=lh({mode:"hidden",children:S},f),u=ha(u,f,o,null),S.return=s,u.return=s,S.sibling=u,s.child=S,f=s.child,f.memoizedState=pg(o),f.childLanes=yg(i,w,o),s.memoizedState=mg,u):(rs(s),_g(s,S))}if(z=i.memoizedState,z!==null&&(S=z.dehydrated,S!==null)){if(p)s.flags&256?(rs(s),s.flags&=-257,s=vg(i,s,o)):s.memoizedState!==null?(ss(),s.child=i.child,s.flags|=128,s=null):(ss(),f=u.fallback,S=s.mode,u=lh({mode:"visible",children:u.children},S),f=ha(f,S,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,Eo(s,i.child,null,o),u=s.child,u.memoizedState=pg(o),u.childLanes=yg(i,w,o),s.memoizedState=mg,s=f);else if(rs(s),tm(S)){if(w=S.nextSibling&&S.nextSibling.dataset,w)var et=w.dgst;w=et,u=Error(r(419)),u.stack="",u.digest=w,Bl({value:u,source:null,stack:null}),s=vg(i,s,o)}else if(We||Hl(i,s,o,!1),w=(o&i.childLanes)!==0,We||w){if(w=he,w!==null&&(u=o&-o,u=(u&42)!==0?1:Ui(u),u=(u&(w.suspendedLanes|o))!==0?0:u,u!==0&&u!==z.retryLane))throw z.retryLane=u,lo(i,u),Xn(w,i,u),Tv;S.data==="$?"||Lg(),s=vg(i,s,o)}else S.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=z.treeContext,Te=Ci(S.nextSibling),Rn=s,Jt=!0,ga=null,Wi=!1,i!==null&&(di[gi++]=Ar,di[gi++]=br,di[gi++]=fa,Ar=i.id,br=i.overflow,fa=s),s=_g(s,u.children),s.flags|=4096);return s}return f?(ss(),f=u.fallback,S=s.mode,z=i.child,et=z.sibling,u=Sr(z,{mode:"hidden",children:u.children}),u.subtreeFlags=z.subtreeFlags&65011712,et!==null?f=Sr(et,f):(f=ha(f,S,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,S=i.child.memoizedState,S===null?S=pg(o):(z=S.cachePool,z!==null?(et=je._currentValue,z=z.parent!==et?{parent:et,pool:et}:z):z=p_(),S={baseLanes:S.baseLanes|o,cachePool:z}),f.memoizedState=S,f.childLanes=yg(i,w,o),s.memoizedState=mg,u):(rs(s),o=i.child,i=o.sibling,o=Sr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(w=s.deletions,w===null?(s.deletions=[i],s.flags|=16):w.push(i)),s.child=o,s.memoizedState=null,o)}function _g(i,s){return s=lh({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function lh(i,s){return i=jn(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function vg(i,s,o){return Eo(s,i.child,null,o),i=_g(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Dv(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),Ld(i.return,s,o)}function Eg(i,s,o,u,f){var p=i.memoizedState;p===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=f)}function Ov(i,s,o){var u=s.pendingProps,f=u.revealOrder,p=u.tail;if(an(i,s,u.children,o),u=Ge.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Dv(i,o,s);else if(i.tag===19)Dv(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(st(Ge,u),f){case"forwards":for(o=s.child,f=null;o!==null;)i=o.alternate,i!==null&&rh(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Eg(s,!1,f,o,p);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&rh(i)===null){s.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}Eg(s,!0,o,null,p);break;case"together":Eg(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Nr(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),cs|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(Hl(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=Sr(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=Sr(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function Tg(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&qc(i)))}function rR(i,s,o){switch(s.tag){case 3:At(s,s.stateNode.containerInfo),Jr(s,je,i.memoizedState.cache),zl();break;case 27:case 5:$t(s);break;case 4:At(s,s.stateNode.containerInfo);break;case 10:Jr(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(rs(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Nv(i,s,o):(rs(s),i=Nr(i,s,o),i!==null?i.sibling:null);rs(s);break;case 19:var f=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Hl(i,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return Ov(i,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),st(Ge,Ge.current),u)break;return null;case 22:case 23:return s.lanes=0,bv(i,s,o);case 24:Jr(s,je,i.memoizedState.cache)}return Nr(i,s,o)}function Mv(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)We=!0;else{if(!Tg(i,o)&&(s.flags&128)===0)return We=!1,rR(i,s,o);We=(i.flags&131072)!==0}else We=!1,Jt&&(s.flags&1048576)!==0&&u_(s,Hc,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")Nd(u)?(i=Ea(u,i),s.tag=1,s=Cv(null,s,u,i,o)):(s.tag=0,s=gg(null,s,u,i,o));else{if(u!=null){if(f=u.$$typeof,f===B){s.tag=11,s=wv(null,s,u,i,o);break t}else if(f===M){s.tag=14,s=Sv(null,s,u,i,o);break t}}throw s=D(u)||u,Error(r(306,s,""))}}return s;case 0:return gg(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=Ea(u,s.pendingProps),Cv(i,s,u,f,o);case 3:t:{if(At(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;f=p.element,jd(i,s),Kl(s,u,null,o);var w=s.memoizedState;if(u=w.cache,Jr(s,je,u),u!==p.cache&&Ud(s,[je],o,!0),Yl(),u=w.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=xv(i,s,u,o);break t}else if(u!==f){f=hi(Error(r(424)),s),Bl(f),s=xv(i,s,u,o);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Te=Ci(i.firstChild),Rn=s,Jt=!0,ga=null,Wi=!0,o=hv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(zl(),u===f){s=Nr(i,s,o);break t}an(i,s,u,o)}s=s.child}return s;case 26:return oh(i,s),i===null?(o=L0(s.type,null,s.pendingProps,null))?s.memoizedState=o:Jt||(o=s.type,i=s.pendingProps,u=wh(yt.current).createElement(o),u[be]=s,u[Ee]=i,ln(u,o,i),ye(u),s.stateNode=u):s.memoizedState=L0(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return $t(s),i===null&&Jt&&(u=s.stateNode=V0(s.type,s.pendingProps,yt.current),Rn=s,Wi=!0,f=Te,gs(s.type)?(em=f,Te=Ci(u.firstChild)):Te=f),an(i,s,s.pendingProps.children,o),oh(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Jt&&((f=u=Te)&&(u=OR(u,s.type,s.pendingProps,Wi),u!==null?(s.stateNode=u,Rn=s,Te=Ci(u.firstChild),Wi=!1,f=!0):f=!1),f||ma(s)),$t(s),f=s.type,p=s.pendingProps,w=i!==null?i.memoizedProps:null,u=p.children,Zg(f,p)?u=null:w!==null&&Zg(f,w)&&(s.flags|=32),s.memoizedState!==null&&(f=Qd(i,s,Q1,null,null,o),pu._currentValue=f),oh(i,s),an(i,s,u,o),s.child;case 6:return i===null&&Jt&&((i=o=Te)&&(o=MR(o,s.pendingProps,Wi),o!==null?(s.stateNode=o,Rn=s,Te=null,i=!0):i=!1),i||ma(s)),null;case 13:return Nv(i,s,o);case 4:return At(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Eo(s,null,u,o):an(i,s,u,o),s.child;case 11:return wv(i,s,s.type,s.pendingProps,o);case 7:return an(i,s,s.pendingProps,o),s.child;case 8:return an(i,s,s.pendingProps.children,o),s.child;case 12:return an(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Jr(s,s.type,u.value),an(i,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,ya(s),f=dn(f),u=u(f),s.flags|=1,an(i,s,u,o),s.child;case 14:return Sv(i,s,s.type,s.pendingProps,o);case 15:return Av(i,s,s.type,s.pendingProps,o);case 19:return Ov(i,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},i===null?(o=lh(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Sr(i.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return bv(i,s,o);case 24:return ya(s),u=dn(je),i===null?(f=Hd(),f===null&&(f=he,p=zd(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),s.memoizedState={parent:u,cache:f},Fd(s),Jr(s,je,f)):((i.lanes&o)!==0&&(jd(i,s),Kl(s,null,null,o),Yl()),f=i.memoizedState,p=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Jr(s,je,u)):(u=p.cache,Jr(s,je,u),u!==f.cache&&Ud(s,[je],o,!0))),an(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Dr(i){i.flags|=4}function Vv(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!q0(s)){if(s=mi.current,s!==null&&((Xt&4194048)===Xt?Ji!==null:(Xt&62914560)!==Xt&&(Xt&536870912)===0||s!==Ji))throw Gl=qd,y_;i.flags|=8192}}function uh(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?wi():536870912,i.lanes|=s,Ao|=s)}function eu(i,s){if(!Jt)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function _e(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function sR(i,s,o){var u=s.pendingProps;switch(Vd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(s),null;case 1:return _e(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ir(je),Zt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Ul(s)?Dr(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,f_())),_e(s),null;case 26:return o=s.memoizedState,i===null?(Dr(s),o!==null?(_e(s),Vv(s,o)):(_e(s),s.flags&=-16777217)):o?o!==i.memoizedState?(Dr(s),_e(s),Vv(s,o)):(_e(s),s.flags&=-16777217):(i.memoizedProps!==u&&Dr(s),_e(s),s.flags&=-16777217),null;case 27:Ae(s),o=yt.current;var f=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Dr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return _e(s),null}i=ct.current,Ul(s)?c_(s):(i=V0(f,u,o),s.stateNode=i,Dr(s))}return _e(s),null;case 5:if(Ae(s),o=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Dr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return _e(s),null}if(i=ct.current,Ul(s))c_(s);else{switch(f=wh(yt.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}i[be]=s,i[Ee]=u;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=i;t:switch(ln(i,o,u),o){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Dr(s)}}return _e(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Dr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=yt.current,Ul(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,f=Rn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[be]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||I0(i.nodeValue,o)),i||ma(s)}else i=wh(i).createTextNode(u),i[be]=s,s.stateNode=i}return _e(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=Ul(s),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[be]=s}else zl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;_e(s),f=!1}else f=f_(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(xr(s),s):(xr(s),null)}if(xr(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,i=i!==null&&i.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return o!==i&&o&&(s.child.flags|=8192),uh(s,s.updateQueue),_e(s),null;case 4:return Zt(),i===null&&$g(s.stateNode.containerInfo),_e(s),null;case 10:return Ir(s.type),_e(s),null;case 19:if(nt(Ge),f=s.memoizedState,f===null)return _e(s),null;if(u=(s.flags&128)!==0,p=f.rendering,p===null)if(u)eu(f,!1);else{if(we!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(p=rh(i),p!==null){for(s.flags|=128,eu(f,!1),i=p.updateQueue,s.updateQueue=i,uh(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)l_(o,i),o=o.sibling;return st(Ge,Ge.current&1|2),s.child}i=i.sibling}f.tail!==null&&Ut()>fh&&(s.flags|=128,u=!0,eu(f,!1),s.lanes=4194304)}else{if(!u)if(i=rh(p),i!==null){if(s.flags|=128,u=!0,i=i.updateQueue,s.updateQueue=i,uh(s,i),eu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Jt)return _e(s),null}else 2*Ut()-f.renderingStartTime>fh&&o!==536870912&&(s.flags|=128,u=!0,eu(f,!1),s.lanes=4194304);f.isBackwards?(p.sibling=s.child,s.child=p):(i=f.last,i!==null?i.sibling=p:s.child=p,f.last=p)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Ut(),s.sibling=null,i=Ge.current,st(Ge,u?i&1|2:i&1),s):(_e(s),null);case 22:case 23:return xr(s),Kd(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(_e(s),s.subtreeFlags&6&&(s.flags|=8192)):_e(s),o=s.updateQueue,o!==null&&uh(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&nt(_a),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Ir(je),_e(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function aR(i,s){switch(Vd(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Ir(je),Zt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Ae(s),null;case 13:if(xr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));zl()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return nt(Ge),null;case 4:return Zt(),null;case 10:return Ir(s.type),null;case 22:case 23:return xr(s),Kd(),i!==null&&nt(_a),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Ir(je),null;case 25:return null;default:return null}}function kv(i,s){switch(Vd(s),s.tag){case 3:Ir(je),Zt();break;case 26:case 27:case 5:Ae(s);break;case 4:Zt();break;case 13:xr(s);break;case 19:nt(Ge);break;case 10:Ir(s.type);break;case 22:case 23:xr(s),Kd(),i!==null&&nt(_a);break;case 24:Ir(je)}}function nu(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var p=o.create,w=o.inst;u=p(),w.destroy=u}o=o.next}while(o!==f)}}catch(S){ue(s,s.return,S)}}function as(i,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&i)===i){var w=u.inst,S=w.destroy;if(S!==void 0){w.destroy=void 0,f=s;var z=o,et=S;try{et()}catch(lt){ue(f,z,lt)}}}u=u.next}while(u!==p)}}catch(lt){ue(s,s.return,lt)}}function Pv(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{S_(s,o)}catch(u){ue(i,i.return,u)}}}function Lv(i,s,o){o.props=Ea(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){ue(i,s,u)}}function iu(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){ue(i,s,f)}}function tr(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){ue(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ue(i,s,f)}else o.current=null}function Uv(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){ue(i,i.return,f)}}function wg(i,s,o){try{var u=i.stateNode;IR(u,i.type,o,s),u[Ee]=s}catch(f){ue(i,i.return,f)}}function zv(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&gs(i.type)||i.tag===4}function Sg(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||zv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&gs(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ag(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Th));else if(u!==4&&(u===27&&gs(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(Ag(i,s,o),i=i.sibling;i!==null;)Ag(i,s,o),i=i.sibling}function ch(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&gs(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(ch(i,s,o),i=i.sibling;i!==null;)ch(i,s,o),i=i.sibling}function Bv(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);ln(s,u,o),s[be]=i,s[Ee]=o}catch(p){ue(i,i.return,p)}}var Or=!1,Ie=!1,bg=!1,Hv=typeof WeakSet=="function"?WeakSet:Set,Je=null;function oR(i,s){if(i=i.containerInfo,Xg=Ch,i=Wy(i),Sd(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break t}var w=0,S=-1,z=-1,et=0,lt=0,ht=i,it=null;e:for(;;){for(var at;ht!==o||f!==0&&ht.nodeType!==3||(S=w+f),ht!==p||u!==0&&ht.nodeType!==3||(z=w+u),ht.nodeType===3&&(w+=ht.nodeValue.length),(at=ht.firstChild)!==null;)it=ht,ht=at;for(;;){if(ht===i)break e;if(it===o&&++et===f&&(S=w),it===p&&++lt===u&&(z=w),(at=ht.nextSibling)!==null)break;ht=it,it=ht.parentNode}ht=at}o=S===-1||z===-1?null:{start:S,end:z}}else o=null}o=o||{start:0,end:0}}else o=null;for(Qg={focusedElem:i,selectionRange:o},Ch=!1,Je=s;Je!==null;)if(s=Je,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,Je=i;else for(;Je!==null;){switch(s=Je,p=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,o=s,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Ot=Ea(o.type,f,o.elementType===o.type);i=u.getSnapshotBeforeUpdate(Ot,p),u.__reactInternalSnapshotBeforeUpdate=i}catch(It){ue(o,o.return,It)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)Jg(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Jg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,Je=i;break}Je=s.return}}function qv(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:os(i,o),u&4&&nu(5,o);break;case 1:if(os(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(w){ue(o,o.return,w)}else{var f=Ea(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(w){ue(o,o.return,w)}}u&64&&Pv(o),u&512&&iu(o,o.return);break;case 3:if(os(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{S_(i,s)}catch(w){ue(o,o.return,w)}}break;case 27:s===null&&u&4&&Bv(o);case 26:case 5:os(i,o),s===null&&u&4&&Uv(o),u&512&&iu(o,o.return);break;case 12:os(i,o);break;case 13:os(i,o),u&4&&Gv(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=pR.bind(null,o),VR(i,o))));break;case 22:if(u=o.memoizedState!==null||Or,!u){s=s!==null&&s.memoizedState!==null||Ie,f=Or;var p=Ie;Or=u,(Ie=s)&&!p?ls(i,o,(o.subtreeFlags&8772)!==0):os(i,o),Or=f,Ie=p}break;case 30:break;default:os(i,o)}}function Fv(i){var s=i.alternate;s!==null&&(i.alternate=null,Fv(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Hi(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var me=null,Dn=!1;function Mr(i,s,o){for(o=o.child;o!==null;)jv(i,s,o),o=o.sibling}function jv(i,s,o){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(te,o)}catch{}switch(o.tag){case 26:Ie||tr(o,s),Mr(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ie||tr(o,s);var u=me,f=Dn;gs(o.type)&&(me=o.stateNode,Dn=!1),Mr(i,s,o),fu(o.stateNode),me=u,Dn=f;break;case 5:Ie||tr(o,s);case 6:if(u=me,f=Dn,me=null,Mr(i,s,o),me=u,Dn=f,me!==null)if(Dn)try{(me.nodeType===9?me.body:me.nodeName==="HTML"?me.ownerDocument.body:me).removeChild(o.stateNode)}catch(p){ue(o,s,p)}else try{me.removeChild(o.stateNode)}catch(p){ue(o,s,p)}break;case 18:me!==null&&(Dn?(i=me,O0(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Eu(i)):O0(me,o.stateNode));break;case 4:u=me,f=Dn,me=o.stateNode.containerInfo,Dn=!0,Mr(i,s,o),me=u,Dn=f;break;case 0:case 11:case 14:case 15:Ie||as(2,o,s),Ie||as(4,o,s),Mr(i,s,o);break;case 1:Ie||(tr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Lv(o,s,u)),Mr(i,s,o);break;case 21:Mr(i,s,o);break;case 22:Ie=(u=Ie)||o.memoizedState!==null,Mr(i,s,o),Ie=u;break;default:Mr(i,s,o)}}function Gv(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Eu(i)}catch(o){ue(s,s.return,o)}}function lR(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Hv),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Hv),s;default:throw Error(r(435,i.tag))}}function Rg(i,s){var o=lR(i);s.forEach(function(u){var f=yR.bind(null,i,u);o.has(u)||(o.add(u),u.then(f,f))})}function Gn(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=i,w=s,S=w;t:for(;S!==null;){switch(S.tag){case 27:if(gs(S.type)){me=S.stateNode,Dn=!1;break t}break;case 5:me=S.stateNode,Dn=!1;break t;case 3:case 4:me=S.stateNode.containerInfo,Dn=!0;break t}S=S.return}if(me===null)throw Error(r(160));jv(p,w,f),me=null,Dn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)$v(s,i),s=s.sibling}var Ii=null;function $v(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Gn(s,i),$n(i),u&4&&(as(3,i,i.return),nu(3,i),as(5,i,i.return));break;case 1:Gn(s,i),$n(i),u&512&&(Ie||o===null||tr(o,o.return)),u&64&&Or&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Ii;if(Gn(s,i),$n(i),u&512&&(Ie||o===null||tr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){t:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[gr]||p[be]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),ln(p,u,o),p[be]=i,ye(p),u=p;break t;case"link":var w=B0("link","href",f).get(u+(o.href||""));if(w){for(var S=0;S<w.length;S++)if(p=w[S],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(S,1);break e}}p=f.createElement(u),ln(p,u,o),f.head.appendChild(p);break;case"meta":if(w=B0("meta","content",f).get(u+(o.content||""))){for(S=0;S<w.length;S++)if(p=w[S],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(S,1);break e}}p=f.createElement(u),ln(p,u,o),f.head.appendChild(p);break;default:throw Error(r(468,u))}p[be]=i,ye(p),u=p}i.stateNode=u}else H0(f,i.type,i.stateNode);else i.stateNode=z0(f,u,i.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?H0(f,i.type,i.stateNode):z0(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&wg(i,i.memoizedProps,o.memoizedProps)}break;case 27:Gn(s,i),$n(i),u&512&&(Ie||o===null||tr(o,o.return)),o!==null&&u&4&&wg(i,i.memoizedProps,o.memoizedProps);break;case 5:if(Gn(s,i),$n(i),u&512&&(Ie||o===null||tr(o,o.return)),i.flags&32){f=i.stateNode;try{oi(f,"")}catch(at){ue(i,i.return,at)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,wg(i,f,o!==null?o.memoizedProps:f)),u&1024&&(bg=!0);break;case 6:if(Gn(s,i),$n(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(at){ue(i,i.return,at)}}break;case 3:if(bh=null,f=Ii,Ii=Sh(s.containerInfo),Gn(s,i),Ii=f,$n(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Eu(s.containerInfo)}catch(at){ue(i,i.return,at)}bg&&(bg=!1,Yv(i));break;case 4:u=Ii,Ii=Sh(i.stateNode.containerInfo),Gn(s,i),$n(i),Ii=u;break;case 12:Gn(s,i),$n(i);break;case 13:Gn(s,i),$n(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Og=Ut()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Rg(i,u)));break;case 22:f=i.memoizedState!==null;var z=o!==null&&o.memoizedState!==null,et=Or,lt=Ie;if(Or=et||f,Ie=lt||z,Gn(s,i),Ie=lt,Or=et,$n(i),u&8192)t:for(s=i.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||z||Or||Ie||Ta(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){z=o=s;try{if(p=z.stateNode,f)w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{S=z.stateNode;var ht=z.memoizedProps.style,it=ht!=null&&ht.hasOwnProperty("display")?ht.display:null;S.style.display=it==null||typeof it=="boolean"?"":(""+it).trim()}}catch(at){ue(z,z.return,at)}}}else if(s.tag===6){if(o===null){z=s;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(at){ue(z,z.return,at)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Rg(i,o))));break;case 19:Gn(s,i),$n(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Rg(i,u)));break;case 30:break;case 21:break;default:Gn(s,i),$n(i)}}function $n(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(zv(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,p=Sg(i);ch(i,p,f);break;case 5:var w=o.stateNode;o.flags&32&&(oi(w,""),o.flags&=-33);var S=Sg(i);ch(i,S,w);break;case 3:case 4:var z=o.stateNode.containerInfo,et=Sg(i);Ag(i,et,z);break;default:throw Error(r(161))}}catch(lt){ue(i,i.return,lt)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Yv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Yv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function os(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)qv(i,s.alternate,s),s=s.sibling}function Ta(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:as(4,s,s.return),Ta(s);break;case 1:tr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Lv(s,s.return,o),Ta(s);break;case 27:fu(s.stateNode);case 26:case 5:tr(s,s.return),Ta(s);break;case 22:s.memoizedState===null&&Ta(s);break;case 30:Ta(s);break;default:Ta(s)}i=i.sibling}}function ls(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=i,p=s,w=p.flags;switch(p.tag){case 0:case 11:case 15:ls(f,p,o),nu(4,p);break;case 1:if(ls(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(et){ue(u,u.return,et)}if(u=p,f=u.updateQueue,f!==null){var S=u.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)w_(z[f],S)}catch(et){ue(u,u.return,et)}}o&&w&64&&Pv(p),iu(p,p.return);break;case 27:Bv(p);case 26:case 5:ls(f,p,o),o&&u===null&&w&4&&Uv(p),iu(p,p.return);break;case 12:ls(f,p,o);break;case 13:ls(f,p,o),o&&w&4&&Gv(f,p);break;case 22:p.memoizedState===null&&ls(f,p,o),iu(p,p.return);break;case 30:break;default:ls(f,p,o)}s=s.sibling}}function Ig(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&ql(o))}function Cg(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&ql(i))}function er(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Kv(i,s,o,u),s=s.sibling}function Kv(i,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:er(i,s,o,u),f&2048&&nu(9,s);break;case 1:er(i,s,o,u);break;case 3:er(i,s,o,u),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&ql(i)));break;case 12:if(f&2048){er(i,s,o,u),i=s.stateNode;try{var p=s.memoizedProps,w=p.id,S=p.onPostCommit;typeof S=="function"&&S(w,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(z){ue(s,s.return,z)}}else er(i,s,o,u);break;case 13:er(i,s,o,u);break;case 23:break;case 22:p=s.stateNode,w=s.alternate,s.memoizedState!==null?p._visibility&2?er(i,s,o,u):ru(i,s):p._visibility&2?er(i,s,o,u):(p._visibility|=2,To(i,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&Ig(w,s);break;case 24:er(i,s,o,u),f&2048&&Cg(s.alternate,s);break;default:er(i,s,o,u)}}function To(i,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=i,w=s,S=o,z=u,et=w.flags;switch(w.tag){case 0:case 11:case 15:To(p,w,S,z,f),nu(8,w);break;case 23:break;case 22:var lt=w.stateNode;w.memoizedState!==null?lt._visibility&2?To(p,w,S,z,f):ru(p,w):(lt._visibility|=2,To(p,w,S,z,f)),f&&et&2048&&Ig(w.alternate,w);break;case 24:To(p,w,S,z,f),f&&et&2048&&Cg(w.alternate,w);break;default:To(p,w,S,z,f)}s=s.sibling}}function ru(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,f=u.flags;switch(u.tag){case 22:ru(o,u),f&2048&&Ig(u.alternate,u);break;case 24:ru(o,u),f&2048&&Cg(u.alternate,u);break;default:ru(o,u)}s=s.sibling}}var su=8192;function wo(i){if(i.subtreeFlags&su)for(i=i.child;i!==null;)Xv(i),i=i.sibling}function Xv(i){switch(i.tag){case 26:wo(i),i.flags&su&&i.memoizedState!==null&&YR(Ii,i.memoizedState,i.memoizedProps);break;case 5:wo(i);break;case 3:case 4:var s=Ii;Ii=Sh(i.stateNode.containerInfo),wo(i),Ii=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=su,su=16777216,wo(i),su=s):wo(i));break;default:wo(i)}}function Qv(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function au(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Je=u,Wv(u,i)}Qv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Zv(i),i=i.sibling}function Zv(i){switch(i.tag){case 0:case 11:case 15:au(i),i.flags&2048&&as(9,i,i.return);break;case 3:au(i);break;case 12:au(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,hh(i)):au(i);break;default:au(i)}}function hh(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Je=u,Wv(u,i)}Qv(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:as(8,s,s.return),hh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,hh(s));break;default:hh(s)}i=i.sibling}}function Wv(i,s){for(;Je!==null;){var o=Je;switch(o.tag){case 0:case 11:case 15:as(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ql(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Je=u;else t:for(o=i;Je!==null;){u=Je;var f=u.sibling,p=u.return;if(Fv(u),u===o){Je=null;break t}if(f!==null){f.return=p,Je=f;break t}Je=p}}}var uR={getCacheForType:function(i){var s=dn(je),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o}},cR=typeof WeakMap=="function"?WeakMap:Map,ie=0,he=null,qt=null,Xt=0,re=0,Yn=null,us=!1,So=!1,xg=!1,Vr=0,we=0,cs=0,wa=0,Ng=0,pi=0,Ao=0,ou=null,On=null,Dg=!1,Og=0,fh=1/0,dh=null,hs=null,on=0,fs=null,bo=null,Ro=0,Mg=0,Vg=null,Jv=null,lu=0,kg=null;function Kn(){if((ie&2)!==0&&Xt!==0)return Xt&-Xt;if(C.T!==null){var i=fo;return i!==0?i:qg()}return zi()}function t0(){pi===0&&(pi=(Xt&536870912)===0||Jt?dr():536870912);var i=mi.current;return i!==null&&(i.flags|=32),pi}function Xn(i,s,o){(i===he&&(re===2||re===9)||i.cancelPendingCommit!==null)&&(Io(i,0),ds(i,Xt,pi,!1)),ei(i,o),((ie&2)===0||i!==he)&&(i===he&&((ie&2)===0&&(wa|=o),we===4&&ds(i,Xt,pi,!1)),nr(i))}function e0(i,s,o){if((ie&6)!==0)throw Error(r(327));var u=!o&&(s&124)===0&&(s&i.expiredLanes)===0||Sn(i,s),f=u?dR(i,s):Ug(i,s,!0),p=u;do{if(f===0){So&&!u&&ds(i,s,0,!1);break}else{if(o=i.current.alternate,p&&!hR(o)){f=Ug(i,s,!1),p=!1;continue}if(f===2){if(p=s,i.errorRecoveryDisabledLanes&p)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;t:{var S=i;f=ou;var z=S.current.memoizedState.isDehydrated;if(z&&(Io(S,w).flags|=256),w=Ug(S,w,!1),w!==2){if(xg&&!z){S.errorRecoveryDisabledLanes|=p,wa|=p,f=4;break t}p=On,On=f,p!==null&&(On===null?On=p:On.push.apply(On,p))}f=w}if(p=!1,f!==2)continue}}if(f===1){Io(i,0),ds(i,s,0,!0);break}t:{switch(u=i,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:ds(u,s,pi,!us);break t;case 2:On=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Og+300-Ut(),10<f)){if(ds(u,s,pi,!us),nn(u,0,!0)!==0)break t;u.timeoutHandle=N0(n0.bind(null,u,o,On,dh,Dg,s,pi,wa,Ao,us,p,2,-0,0),f);break t}n0(u,o,On,dh,Dg,s,pi,wa,Ao,us,p,0,-0,0)}}break}while(!0);nr(i)}function n0(i,s,o,u,f,p,w,S,z,et,lt,ht,it,at){if(i.timeoutHandle=-1,ht=s.subtreeFlags,(ht&8192||(ht&16785408)===16785408)&&(mu={stylesheets:null,count:0,unsuspend:$R},Xv(s),ht=KR(),ht!==null)){i.cancelPendingCommit=ht(u0.bind(null,i,s,p,o,u,f,w,S,z,lt,1,it,at)),ds(i,p,w,!et);return}u0(i,s,p,o,u,f,w,S,z)}function hR(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!Fn(p(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ds(i,s,o,u){s&=~Ng,s&=~wa,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var f=s;0<f;){var p=31-pe(f),w=1<<p;u[p]=-1,f&=~w}o!==0&&ni(i,o,s)}function gh(){return(ie&6)===0?(uu(0),!1):!0}function Pg(){if(qt!==null){if(re===0)var i=qt.return;else i=qt,Rr=pa=null,Jd(i),vo=null,Jl=0,i=qt;for(;i!==null;)kv(i.alternate,i),i=i.return;qt=null}}function Io(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,xR(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Pg(),he=i,qt=o=Sr(i.current,null),Xt=s,re=0,Yn=null,us=!1,So=Sn(i,s),xg=!1,Ao=pi=Ng=wa=cs=we=0,On=ou=null,Dg=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var f=31-pe(u),p=1<<f;s|=i[f],u&=~p}return Vr=s,Pc(),o}function i0(i,s){Pt=null,C.H=eh,s===jl||s===Gc?(s=E_(),re=3):s===y_?(s=E_(),re=4):re=s===Tv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Yn=s,qt===null&&(we=1,ah(i,hi(s,i.current)))}function r0(){var i=C.H;return C.H=eh,i===null?eh:i}function s0(){var i=C.A;return C.A=uR,i}function Lg(){we=4,us||(Xt&4194048)!==Xt&&mi.current!==null||(So=!0),(cs&134217727)===0&&(wa&134217727)===0||he===null||ds(he,Xt,pi,!1)}function Ug(i,s,o){var u=ie;ie|=2;var f=r0(),p=s0();(he!==i||Xt!==s)&&(dh=null,Io(i,s)),s=!1;var w=we;t:do try{if(re!==0&&qt!==null){var S=qt,z=Yn;switch(re){case 8:Pg(),w=6;break t;case 3:case 2:case 9:case 6:mi.current===null&&(s=!0);var et=re;if(re=0,Yn=null,Co(i,S,z,et),o&&So){w=0;break t}break;default:et=re,re=0,Yn=null,Co(i,S,z,et)}}fR(),w=we;break}catch(lt){i0(i,lt)}while(!0);return s&&i.shellSuspendCounter++,Rr=pa=null,ie=u,C.H=f,C.A=p,qt===null&&(he=null,Xt=0,Pc()),w}function fR(){for(;qt!==null;)a0(qt)}function dR(i,s){var o=ie;ie|=2;var u=r0(),f=s0();he!==i||Xt!==s?(dh=null,fh=Ut()+500,Io(i,s)):So=Sn(i,s);t:do try{if(re!==0&&qt!==null){s=qt;var p=Yn;e:switch(re){case 1:re=0,Yn=null,Co(i,s,p,1);break;case 2:case 9:if(__(p)){re=0,Yn=null,o0(s);break}s=function(){re!==2&&re!==9||he!==i||(re=7),nr(i)},p.then(s,s);break t;case 3:re=7;break t;case 4:re=5;break t;case 7:__(p)?(re=0,Yn=null,o0(s)):(re=0,Yn=null,Co(i,s,p,7));break;case 5:var w=null;switch(qt.tag){case 26:w=qt.memoizedState;case 5:case 27:var S=qt;if(!w||q0(w)){re=0,Yn=null;var z=S.sibling;if(z!==null)qt=z;else{var et=S.return;et!==null?(qt=et,mh(et)):qt=null}break e}}re=0,Yn=null,Co(i,s,p,5);break;case 6:re=0,Yn=null,Co(i,s,p,6);break;case 8:Pg(),we=6;break t;default:throw Error(r(462))}}gR();break}catch(lt){i0(i,lt)}while(!0);return Rr=pa=null,C.H=u,C.A=f,ie=o,qt!==null?0:(he=null,Xt=0,Pc(),we)}function gR(){for(;qt!==null&&!fe();)a0(qt)}function a0(i){var s=Mv(i.alternate,i,Vr);i.memoizedProps=i.pendingProps,s===null?mh(i):qt=s}function o0(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=Iv(o,s,s.pendingProps,s.type,void 0,Xt);break;case 11:s=Iv(o,s,s.pendingProps,s.type.render,s.ref,Xt);break;case 5:Jd(s);default:kv(o,s),s=qt=l_(s,Vr),s=Mv(o,s,Vr)}i.memoizedProps=i.pendingProps,s===null?mh(i):qt=s}function Co(i,s,o,u){Rr=pa=null,Jd(s),vo=null,Jl=0;var f=s.return;try{if(iR(i,f,s,o,Xt)){we=1,ah(i,hi(o,i.current)),qt=null;return}}catch(p){if(f!==null)throw qt=f,p;we=1,ah(i,hi(o,i.current)),qt=null;return}s.flags&32768?(Jt||u===1?i=!0:So||(Xt&536870912)!==0?i=!1:(us=i=!0,(u===2||u===9||u===3||u===6)&&(u=mi.current,u!==null&&u.tag===13&&(u.flags|=16384))),l0(s,i)):mh(s)}function mh(i){var s=i;do{if((s.flags&32768)!==0){l0(s,us);return}i=s.return;var o=sR(s.alternate,s,Vr);if(o!==null){qt=o;return}if(s=s.sibling,s!==null){qt=s;return}qt=s=i}while(s!==null);we===0&&(we=5)}function l0(i,s){do{var o=aR(i.alternate,i);if(o!==null){o.flags&=32767,qt=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){qt=i;return}qt=i=o}while(i!==null);we=6,qt=null}function u0(i,s,o,u,f,p,w,S,z){i.cancelPendingCommit=null;do ph();while(on!==0);if((ie&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=Cd,Bn(i,o,p,w,S,z),i===he&&(qt=he=null,Xt=0),bo=s,fs=i,Ro=o,Mg=p,Vg=f,Jv=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,_R(Ln,function(){return g0(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=C.T,C.T=null,f=j.p,j.p=2,w=ie,ie|=4;try{oR(i,s,o)}finally{ie=w,j.p=f,C.T=u}}on=1,c0(),h0(),f0()}}function c0(){if(on===1){on=0;var i=fs,s=bo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=C.T,C.T=null;var u=j.p;j.p=2;var f=ie;ie|=4;try{$v(s,i);var p=Qg,w=Wy(i.containerInfo),S=p.focusedElem,z=p.selectionRange;if(w!==S&&S&&S.ownerDocument&&Zy(S.ownerDocument.documentElement,S)){if(z!==null&&Sd(S)){var et=z.start,lt=z.end;if(lt===void 0&&(lt=et),"selectionStart"in S)S.selectionStart=et,S.selectionEnd=Math.min(lt,S.value.length);else{var ht=S.ownerDocument||document,it=ht&&ht.defaultView||window;if(it.getSelection){var at=it.getSelection(),Ot=S.textContent.length,It=Math.min(z.start,Ot),le=z.end===void 0?It:Math.min(z.end,Ot);!at.extend&&It>le&&(w=le,le=It,It=w);var Q=Qy(S,It),F=Qy(S,le);if(Q&&F&&(at.rangeCount!==1||at.anchorNode!==Q.node||at.anchorOffset!==Q.offset||at.focusNode!==F.node||at.focusOffset!==F.offset)){var J=ht.createRange();J.setStart(Q.node,Q.offset),at.removeAllRanges(),It>le?(at.addRange(J),at.extend(F.node,F.offset)):(J.setEnd(F.node,F.offset),at.addRange(J))}}}}for(ht=[],at=S;at=at.parentNode;)at.nodeType===1&&ht.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ht.length;S++){var ut=ht[S];ut.element.scrollLeft=ut.left,ut.element.scrollTop=ut.top}}Ch=!!Xg,Qg=Xg=null}finally{ie=f,j.p=u,C.T=o}}i.current=s,on=2}}function h0(){if(on===2){on=0;var i=fs,s=bo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=C.T,C.T=null;var u=j.p;j.p=2;var f=ie;ie|=4;try{qv(i,s.alternate,s)}finally{ie=f,j.p=u,C.T=o}}on=3}}function f0(){if(on===4||on===3){on=0,vn();var i=fs,s=bo,o=Ro,u=Jv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?on=5:(on=0,bo=fs=null,d0(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(hs=null),Kr(o),s=s.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(te,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=C.T,f=j.p,j.p=2,C.T=null;try{for(var p=i.onRecoverableError,w=0;w<u.length;w++){var S=u[w];p(S.value,{componentStack:S.stack})}}finally{C.T=s,j.p=f}}(Ro&3)!==0&&ph(),nr(i),f=i.pendingLanes,(o&4194090)!==0&&(f&42)!==0?i===kg?lu++:(lu=0,kg=i):lu=0,uu(0)}}function d0(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,ql(s)))}function ph(i){return c0(),h0(),f0(),g0()}function g0(){if(on!==5)return!1;var i=fs,s=Mg;Mg=0;var o=Kr(Ro),u=C.T,f=j.p;try{j.p=32>o?32:o,C.T=null,o=Vg,Vg=null;var p=fs,w=Ro;if(on=0,bo=fs=null,Ro=0,(ie&6)!==0)throw Error(r(331));var S=ie;if(ie|=4,Zv(p.current),Kv(p,p.current,w,o),ie=S,uu(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(te,p)}catch{}return!0}finally{j.p=f,C.T=u,d0(i,s)}}function m0(i,s,o){s=hi(o,s),s=dg(i.stateNode,s,2),i=ns(i,s,2),i!==null&&(ei(i,2),nr(i))}function ue(i,s,o){if(i.tag===3)m0(i,i,o);else for(;s!==null;){if(s.tag===3){m0(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(hs===null||!hs.has(u))){i=hi(o,i),o=vv(2),u=ns(s,o,2),u!==null&&(Ev(o,u,s,i),ei(u,2),nr(u));break}}s=s.return}}function zg(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new cR;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(xg=!0,f.add(o),i=mR.bind(null,i,s,o),s.then(i,i))}function mR(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,he===i&&(Xt&o)===o&&(we===4||we===3&&(Xt&62914560)===Xt&&300>Ut()-Og?(ie&2)===0&&Io(i,0):Ng|=o,Ao===Xt&&(Ao=0)),nr(i)}function p0(i,s){s===0&&(s=wi()),i=lo(i,s),i!==null&&(ei(i,s),nr(i))}function pR(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),p0(i,o)}function yR(i,s){var o=0;switch(i.tag){case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),p0(i,o)}function _R(i,s){return ze(i,s)}var yh=null,xo=null,Bg=!1,_h=!1,Hg=!1,Sa=0;function nr(i){i!==xo&&i.next===null&&(xo===null?yh=xo=i:xo=xo.next=i),_h=!0,Bg||(Bg=!0,ER())}function uu(i,s){if(!Hg&&_h){Hg=!0;do for(var o=!1,u=yh;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var w=u.suspendedLanes,S=u.pingedLanes;p=(1<<31-pe(42|i)+1)-1,p&=f&~(w&~S),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,E0(u,p))}else p=Xt,p=nn(u,u===he?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Sn(u,p)||(o=!0,E0(u,p));u=u.next}while(o);Hg=!1}}function vR(){y0()}function y0(){_h=Bg=!1;var i=0;Sa!==0&&(CR()&&(i=Sa),Sa=0);for(var s=Ut(),o=null,u=yh;u!==null;){var f=u.next,p=_0(u,s);p===0?(u.next=null,o===null?yh=f:o.next=f,f===null&&(xo=o)):(o=u,(i!==0||(p&3)!==0)&&(_h=!0)),u=f}uu(i)}function _0(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var w=31-pe(p),S=1<<w,z=f[w];z===-1?((S&o)===0||(S&u)!==0)&&(f[w]=fr(S,s)):z<=s&&(i.expiredLanes|=S),p&=~S}if(s=he,o=Xt,o=nn(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(re===2||re===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&De(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Sn(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&De(u),Kr(o)){case 2:case 8:o=Cn;break;case 32:o=Ln;break;case 268435456:o=Un;break;default:o=Ln}return u=v0.bind(null,i),o=ze(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&De(u),i.callbackPriority=2,i.callbackNode=null,2}function v0(i,s){if(on!==0&&on!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(ph()&&i.callbackNode!==o)return null;var u=Xt;return u=nn(i,i===he?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(e0(i,u,s),_0(i,Ut()),i.callbackNode!=null&&i.callbackNode===o?v0.bind(null,i):null)}function E0(i,s){if(ph())return null;e0(i,s,!0)}function ER(){NR(function(){(ie&6)!==0?ze(Be,vR):y0()})}function qg(){return Sa===0&&(Sa=dr()),Sa}function T0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Qa(""+i)}function w0(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function TR(i,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var p=T0((f[Ee]||null).action),w=u.submitter;w&&(s=(s=w[Ee]||null)?T0(s.formAction):w.getAttribute("formAction"),s!==null&&(p=s,w=null));var S=new Za("action","action",null,u,f);i.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Sa!==0){var z=w?w0(f,w):new FormData(f);lg(o,{pending:!0,data:z,method:f.method,action:p},null,z)}}else typeof p=="function"&&(S.preventDefault(),z=w?w0(f,w):new FormData(f),lg(o,{pending:!0,data:z,method:f.method,action:p},p,z))},currentTarget:f}]})}}for(var Fg=0;Fg<Id.length;Fg++){var jg=Id[Fg],wR=jg.toLowerCase(),SR=jg[0].toUpperCase()+jg.slice(1);Ri(wR,"on"+SR)}Ri(e_,"onAnimationEnd"),Ri(n_,"onAnimationIteration"),Ri(i_,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(B1,"onTransitionRun"),Ri(H1,"onTransitionStart"),Ri(q1,"onTransitionCancel"),Ri(r_,"onTransitionEnd"),Si("onMouseEnter",["mouseout","mouseover"]),Si("onMouseLeave",["mouseout","mouseover"]),Si("onPointerEnter",["pointerout","pointerover"]),Si("onPointerLeave",["pointerout","pointerover"]),Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cu));function S0(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;t:{var p=void 0;if(s)for(var w=u.length-1;0<=w;w--){var S=u[w],z=S.instance,et=S.currentTarget;if(S=S.listener,z!==p&&f.isPropagationStopped())break t;p=S,f.currentTarget=et;try{p(f)}catch(lt){sh(lt)}f.currentTarget=null,p=z}else for(w=0;w<u.length;w++){if(S=u[w],z=S.instance,et=S.currentTarget,S=S.listener,z!==p&&f.isPropagationStopped())break t;p=S,f.currentTarget=et;try{p(f)}catch(lt){sh(lt)}f.currentTarget=null,p=z}}}}function Ft(i,s){var o=s[Xs];o===void 0&&(o=s[Xs]=new Set);var u=i+"__bubble";o.has(u)||(A0(s,i,2,!1),o.add(u))}function Gg(i,s,o){var u=0;s&&(u|=4),A0(o,i,u,s)}var vh="_reactListening"+Math.random().toString(36).slice(2);function $g(i){if(!i[vh]){i[vh]=!0,Qs.forEach(function(o){o!=="selectionchange"&&(AR.has(o)||Gg(o,!1,i),Gg(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[vh]||(s[vh]=!0,Gg("selectionchange",!1,s))}}function A0(i,s,o,u){switch(K0(s)){case 2:var f=ZR;break;case 8:f=WR;break;default:f=am}o=f.bind(null,s,o,i),f=void 0,!ui||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,o,{capture:!0,passive:f}):i.addEventListener(s,o,!0):f!==void 0?i.addEventListener(s,o,{passive:f}):i.addEventListener(s,o,!1)}function Yg(i,s,o,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var S=u.stateNode.containerInfo;if(S===f)break;if(w===4)for(w=u.return;w!==null;){var z=w.tag;if((z===3||z===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;S!==null;){if(w=ii(S),w===null)return;if(z=w.tag,z===5||z===6||z===26||z===27){u=p=w;continue t}S=S.parentNode}}u=u.return}Tc(function(){var et=p,lt=li(o),ht=[];t:{var it=s_.get(i);if(it!==void 0){var at=Za,Ot=i;switch(i){case"keypress":if(Yi(o)===0)break t;case"keydown":case"keyup":at=io;break;case"focusin":Ot="focus",at=to;break;case"focusout":Ot="blur",at=to;break;case"beforeblur":case"afterblur":at=to;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=ci;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=vd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=xc;break;case e_:case n_:case i_:at=eo;break;case r_:at=Dc;break;case"scroll":case"scrollend":at=wc;break;case"wheel":at=ro;break;case"copy":case"cut":case"paste":at=no;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=Vl;break;case"toggle":case"beforetoggle":at=Mc}var It=(s&4)!==0,le=!It&&(i==="scroll"||i==="scrollend"),Q=It?it!==null?it+"Capture":null:it;It=[];for(var F=et,J;F!==null;){var ut=F;if(J=ut.stateNode,ut=ut.tag,ut!==5&&ut!==26&&ut!==27||J===null||Q===null||(ut=na(F,Q),ut!=null&&It.push(hu(F,ut,J))),le)break;F=F.return}0<It.length&&(it=new at(it,Ot,null,o,lt),ht.push({event:it,listeners:It}))}}if((s&7)===0){t:{if(it=i==="mouseover"||i==="pointerover",at=i==="mouseout"||i==="pointerout",it&&o!==yr&&(Ot=o.relatedTarget||o.fromElement)&&(ii(Ot)||Ot[xn]))break t;if((at||it)&&(it=lt.window===lt?lt:(it=lt.ownerDocument)?it.defaultView||it.parentWindow:window,at?(Ot=o.relatedTarget||o.toElement,at=et,Ot=Ot?ii(Ot):null,Ot!==null&&(le=l(Ot),It=Ot.tag,Ot!==le||It!==5&&It!==27&&It!==6)&&(Ot=null)):(at=null,Ot=et),at!==Ot)){if(It=ci,ut="onMouseLeave",Q="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(It=Vl,ut="onPointerLeave",Q="onPointerEnter",F="pointer"),le=at==null?it:si(at),J=Ot==null?it:si(Ot),it=new It(ut,F+"leave",at,o,lt),it.target=le,it.relatedTarget=J,ut=null,ii(lt)===et&&(It=new It(Q,F+"enter",Ot,o,lt),It.target=J,It.relatedTarget=le,ut=It),le=ut,at&&Ot)e:{for(It=at,Q=Ot,F=0,J=It;J;J=No(J))F++;for(J=0,ut=Q;ut;ut=No(ut))J++;for(;0<F-J;)It=No(It),F--;for(;0<J-F;)Q=No(Q),J--;for(;F--;){if(It===Q||Q!==null&&It===Q.alternate)break e;It=No(It),Q=No(Q)}It=null}else It=null;at!==null&&b0(ht,it,at,It,!1),Ot!==null&&le!==null&&b0(ht,le,Ot,It,!0)}}t:{if(it=et?si(et):window,at=it.nodeName&&it.nodeName.toLowerCase(),at==="select"||at==="input"&&it.type==="file")var Et=jy;else if(Fe(it))if(Gy)Et=L1;else{Et=k1;var zt=V1}else at=it.nodeName,!at||at.toLowerCase()!=="input"||it.type!=="checkbox"&&it.type!=="radio"?et&&Il(et.elementType)&&(Et=jy):Et=P1;if(Et&&(Et=Et(i,et))){wr(ht,Et,o,lt);break t}zt&&zt(i,it,et),i==="focusout"&&et&&it.type==="number"&&et.memoizedProps.value!=null&&Zr(it,"number",it.value)}switch(zt=et?si(et):window,i){case"focusin":(Fe(zt)||zt.contentEditable==="true")&&(so=zt,Ad=et,Ll=null);break;case"focusout":Ll=Ad=so=null;break;case"mousedown":bd=!0;break;case"contextmenu":case"mouseup":case"dragend":bd=!1,Jy(ht,o,lt);break;case"selectionchange":if(z1)break;case"keydown":case"keyup":Jy(ht,o,lt)}var wt;if(Qi)t:{switch(i){case"compositionstart":var Ct="onCompositionStart";break t;case"compositionend":Ct="onCompositionEnd";break t;case"compositionupdate":Ct="onCompositionUpdate";break t}Ct=void 0}else Yt?ot(i,o)&&(Ct="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Ct="onCompositionStart");Ct&&(E&&o.locale!=="ko"&&(Yt||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&Yt&&(wt=xl()):($i=lt,Wr="value"in $i?$i.value:$i.textContent,Yt=!0)),zt=Eh(et,Ct),0<zt.length&&(Ct=new Ol(Ct,i,null,o,lt),ht.push({event:Ct,listeners:zt}),wt?Ct.data=wt:(wt=mt(o),wt!==null&&(Ct.data=wt)))),(wt=_?qe(i,o):Kt(i,o))&&(Ct=Eh(et,"onBeforeInput"),0<Ct.length&&(zt=new Ol("onBeforeInput","beforeinput",null,o,lt),ht.push({event:zt,listeners:Ct}),zt.data=wt)),TR(ht,i,et,o,lt)}S0(ht,s)})}function hu(i,s,o){return{instance:i,listener:s,currentTarget:o}}function Eh(i,s){for(var o=s+"Capture",u=[];i!==null;){var f=i,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=na(i,o),f!=null&&u.unshift(hu(i,f,p)),f=na(i,s),f!=null&&u.push(hu(i,f,p))),i.tag===3)return u;i=i.return}return[]}function No(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function b0(i,s,o,u,f){for(var p=s._reactName,w=[];o!==null&&o!==u;){var S=o,z=S.alternate,et=S.stateNode;if(S=S.tag,z!==null&&z===u)break;S!==5&&S!==26&&S!==27||et===null||(z=et,f?(et=na(o,p),et!=null&&w.unshift(hu(o,et,z))):f||(et=na(o,p),et!=null&&w.push(hu(o,et,z)))),o=o.return}w.length!==0&&i.push({event:s,listeners:w})}var bR=/\r\n?/g,RR=/\u0000|\uFFFD/g;function R0(i){return(typeof i=="string"?i:""+i).replace(bR,`
`).replace(RR,"")}function I0(i,s){return s=R0(s),R0(i)===s}function Th(){}function oe(i,s,o,u,f,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||oi(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&oi(i,""+u);break;case"className":ai(i,"class",u);break;case"tabIndex":ai(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ai(i,o,u);break;case"style":Rl(i,u,p);break;case"data":if(s!=="object"){ai(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Qa(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&oe(i,s,"name",f.name,f,null),oe(i,s,"formEncType",f.formEncType,f,null),oe(i,s,"formMethod",f.formMethod,f,null),oe(i,s,"formTarget",f.formTarget,f,null)):(oe(i,s,"encType",f.encType,f,null),oe(i,s,"method",f.method,f,null),oe(i,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Qa(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=Th);break;case"onScroll":u!=null&&Ft("scroll",i);break;case"onScrollEnd":u!=null&&Ft("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Qa(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Ft("beforetoggle",i),Ft("toggle",i),qi(i,"popover",u);break;case"xlinkActuate":He(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":He(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":He(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":He(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":He(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":He(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":He(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":He(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":He(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":qi(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=yd.get(o)||o,qi(i,o,u))}}function Kg(i,s,o,u,f,p){switch(o){case"style":Rl(i,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?oi(i,u):(typeof u=="number"||typeof u=="bigint")&&oi(i,""+u);break;case"onScroll":u!=null&&Ft("scroll",i);break;case"onScrollEnd":u!=null&&Ft("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Th);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xr.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),p=i[Ee]||null,p=p!=null?p[o]:null,typeof p=="function"&&i.removeEventListener(s,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,f);break t}o in i?i[o]=u:u===!0?i.setAttribute(o,""):qi(i,o,u)}}}function ln(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ft("error",i),Ft("load",i);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var w=o[p];if(w!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:oe(i,s,p,w,o,null)}}f&&oe(i,s,"srcSet",o.srcSet,o,null),u&&oe(i,s,"src",o.src,o,null);return;case"input":Ft("invalid",i);var S=p=w=f=null,z=null,et=null;for(u in o)if(o.hasOwnProperty(u)){var lt=o[u];if(lt!=null)switch(u){case"name":f=lt;break;case"type":w=lt;break;case"checked":z=lt;break;case"defaultChecked":et=lt;break;case"value":p=lt;break;case"defaultValue":S=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(r(137,s));break;default:oe(i,s,u,lt,o,null)}}Js(i,p,S,z,et,w,f,!1),Xa(i);return;case"select":Ft("invalid",i),u=w=p=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":p=S;break;case"defaultValue":w=S;break;case"multiple":u=S;default:oe(i,s,f,S,o,null)}s=p,o=w,i.multiple=!!u,s!=null?pr(i,!!u,s,!1):o!=null&&pr(i,!!u,o,!0);return;case"textarea":Ft("invalid",i),p=f=u=null;for(w in o)if(o.hasOwnProperty(w)&&(S=o[w],S!=null))switch(w){case"value":u=S;break;case"defaultValue":f=S;break;case"children":p=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:oe(i,s,w,S,o,null)}ta(i,u,f,p),Xa(i);return;case"option":for(z in o)if(o.hasOwnProperty(z)&&(u=o[z],u!=null))switch(z){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:oe(i,s,z,u,o,null)}return;case"dialog":Ft("beforetoggle",i),Ft("toggle",i),Ft("cancel",i),Ft("close",i);break;case"iframe":case"object":Ft("load",i);break;case"video":case"audio":for(u=0;u<cu.length;u++)Ft(cu[u],i);break;case"image":Ft("error",i),Ft("load",i);break;case"details":Ft("toggle",i);break;case"embed":case"source":case"link":Ft("error",i),Ft("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(et in o)if(o.hasOwnProperty(et)&&(u=o[et],u!=null))switch(et){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:oe(i,s,et,u,o,null)}return;default:if(Il(s)){for(lt in o)o.hasOwnProperty(lt)&&(u=o[lt],u!==void 0&&Kg(i,s,lt,u,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(u=o[S],u!=null&&oe(i,s,S,u,o,null))}function IR(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,w=null,S=null,z=null,et=null,lt=null;for(at in o){var ht=o[at];if(o.hasOwnProperty(at)&&ht!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":z=ht;default:u.hasOwnProperty(at)||oe(i,s,at,null,u,ht)}}for(var it in u){var at=u[it];if(ht=o[it],u.hasOwnProperty(it)&&(at!=null||ht!=null))switch(it){case"type":p=at;break;case"name":f=at;break;case"checked":et=at;break;case"defaultChecked":lt=at;break;case"value":w=at;break;case"defaultValue":S=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(r(137,s));break;default:at!==ht&&oe(i,s,it,at,u,ht)}}qn(i,w,S,z,et,lt,p,f);return;case"select":at=w=S=it=null;for(p in o)if(z=o[p],o.hasOwnProperty(p)&&z!=null)switch(p){case"value":break;case"multiple":at=z;default:u.hasOwnProperty(p)||oe(i,s,p,null,u,z)}for(f in u)if(p=u[f],z=o[f],u.hasOwnProperty(f)&&(p!=null||z!=null))switch(f){case"value":it=p;break;case"defaultValue":S=p;break;case"multiple":w=p;default:p!==z&&oe(i,s,f,p,u,z)}s=S,o=w,u=at,it!=null?pr(i,!!o,it,!1):!!u!=!!o&&(s!=null?pr(i,!!o,s,!0):pr(i,!!o,o?[]:"",!1));return;case"textarea":at=it=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:oe(i,s,S,null,u,f)}for(w in u)if(f=u[w],p=o[w],u.hasOwnProperty(w)&&(f!=null||p!=null))switch(w){case"value":it=f;break;case"defaultValue":at=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&oe(i,s,w,f,u,p)}se(i,it,at);return;case"option":for(var Ot in o)if(it=o[Ot],o.hasOwnProperty(Ot)&&it!=null&&!u.hasOwnProperty(Ot))switch(Ot){case"selected":i.selected=!1;break;default:oe(i,s,Ot,null,u,it)}for(z in u)if(it=u[z],at=o[z],u.hasOwnProperty(z)&&it!==at&&(it!=null||at!=null))switch(z){case"selected":i.selected=it&&typeof it!="function"&&typeof it!="symbol";break;default:oe(i,s,z,it,u,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var It in o)it=o[It],o.hasOwnProperty(It)&&it!=null&&!u.hasOwnProperty(It)&&oe(i,s,It,null,u,it);for(et in u)if(it=u[et],at=o[et],u.hasOwnProperty(et)&&it!==at&&(it!=null||at!=null))switch(et){case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(r(137,s));break;default:oe(i,s,et,it,u,at)}return;default:if(Il(s)){for(var le in o)it=o[le],o.hasOwnProperty(le)&&it!==void 0&&!u.hasOwnProperty(le)&&Kg(i,s,le,void 0,u,it);for(lt in u)it=u[lt],at=o[lt],!u.hasOwnProperty(lt)||it===at||it===void 0&&at===void 0||Kg(i,s,lt,it,u,at);return}}for(var Q in o)it=o[Q],o.hasOwnProperty(Q)&&it!=null&&!u.hasOwnProperty(Q)&&oe(i,s,Q,null,u,it);for(ht in u)it=u[ht],at=o[ht],!u.hasOwnProperty(ht)||it===at||it==null&&at==null||oe(i,s,ht,it,u,at)}var Xg=null,Qg=null;function wh(i){return i.nodeType===9?i:i.ownerDocument}function C0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function x0(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Zg(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Wg=null;function CR(){var i=window.event;return i&&i.type==="popstate"?i===Wg?!1:(Wg=i,!0):(Wg=null,!1)}var N0=typeof setTimeout=="function"?setTimeout:void 0,xR=typeof clearTimeout=="function"?clearTimeout:void 0,D0=typeof Promise=="function"?Promise:void 0,NR=typeof queueMicrotask=="function"?queueMicrotask:typeof D0<"u"?function(i){return D0.resolve(null).then(i).catch(DR)}:N0;function DR(i){setTimeout(function(){throw i})}function gs(i){return i==="head"}function O0(i,s){var o=s,u=0,f=0;do{var p=o.nextSibling;if(i.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var w=i.ownerDocument;if(o&1&&fu(w.documentElement),o&2&&fu(w.body),o&4)for(o=w.head,fu(o),w=o.firstChild;w;){var S=w.nextSibling,z=w.nodeName;w[gr]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=S}}if(f===0){i.removeChild(p),Eu(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);Eu(s)}function Jg(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Jg(o),Hi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function OR(i,s,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[gr])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=Ci(i.nextSibling),i===null)break}return null}function MR(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Ci(i.nextSibling),i===null))return null;return i}function tm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function VR(i,s){var o=i.ownerDocument;if(i.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Ci(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var em=null;function M0(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return i;s--}else o==="/$"&&s++}i=i.previousSibling}return null}function V0(i,s,o){switch(s=wh(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function fu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Hi(i)}var yi=new Map,k0=new Set;function Sh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var kr=j.d;j.d={f:kR,r:PR,D:LR,C:UR,L:zR,m:BR,X:qR,S:HR,M:FR};function kR(){var i=kr.f(),s=gh();return i||s}function PR(i){var s=ri(i);s!==null&&s.tag===5&&s.type==="form"?ev(s):kr.r(i)}var Do=typeof document>"u"?null:document;function P0(i,s,o){var u=Do;if(u&&typeof s=="string"&&s){var f=Ve(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),k0.has(f)||(k0.add(f),i={rel:i,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),ln(s,"link",i),ye(s),u.head.appendChild(s)))}}function LR(i){kr.D(i),P0("dns-prefetch",i,null)}function UR(i,s){kr.C(i,s),P0("preconnect",i,s)}function zR(i,s,o){kr.L(i,s,o);var u=Do;if(u&&i&&s){var f='link[rel="preload"][as="'+Ve(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Ve(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Ve(o.imageSizes)+'"]')):f+='[href="'+Ve(i)+'"]';var p=f;switch(s){case"style":p=Oo(i);break;case"script":p=Mo(i)}yi.has(p)||(i=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),yi.set(p,i),u.querySelector(f)!==null||s==="style"&&u.querySelector(du(p))||s==="script"&&u.querySelector(gu(p))||(s=u.createElement("link"),ln(s,"link",i),ye(s),u.head.appendChild(s)))}}function BR(i,s){kr.m(i,s);var o=Do;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Ve(u)+'"][href="'+Ve(i)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Mo(i)}if(!yi.has(p)&&(i=y({rel:"modulepreload",href:i},s),yi.set(p,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(gu(p)))return}u=o.createElement("link"),ln(u,"link",i),ye(u),o.head.appendChild(u)}}}function HR(i,s,o){kr.S(i,s,o);var u=Do;if(u&&i){var f=rn(u).hoistableStyles,p=Oo(i);s=s||"default";var w=f.get(p);if(!w){var S={loading:0,preload:null};if(w=u.querySelector(du(p)))S.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":s},o),(o=yi.get(p))&&nm(i,o);var z=w=u.createElement("link");ye(z),ln(z,"link",i),z._p=new Promise(function(et,lt){z.onload=et,z.onerror=lt}),z.addEventListener("load",function(){S.loading|=1}),z.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Ah(w,s,u)}w={type:"stylesheet",instance:w,count:1,state:S},f.set(p,w)}}}function qR(i,s){kr.X(i,s);var o=Do;if(o&&i){var u=rn(o).hoistableScripts,f=Mo(i),p=u.get(f);p||(p=o.querySelector(gu(f)),p||(i=y({src:i,async:!0},s),(s=yi.get(f))&&im(i,s),p=o.createElement("script"),ye(p),ln(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function FR(i,s){kr.M(i,s);var o=Do;if(o&&i){var u=rn(o).hoistableScripts,f=Mo(i),p=u.get(f);p||(p=o.querySelector(gu(f)),p||(i=y({src:i,async:!0,type:"module"},s),(s=yi.get(f))&&im(i,s),p=o.createElement("script"),ye(p),ln(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function L0(i,s,o,u){var f=(f=yt.current)?Sh(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Oo(o.href),o=rn(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Oo(o.href);var p=rn(f).hoistableStyles,w=p.get(i);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,w),(p=f.querySelector(du(i)))&&!p._p&&(w.instance=p,w.state.loading=5),yi.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},yi.set(i,o),p||jR(f,i,o,w.state))),s&&u===null)throw Error(r(528,""));return w}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Mo(o),o=rn(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Oo(i){return'href="'+Ve(i)+'"'}function du(i){return'link[rel="stylesheet"]['+i+"]"}function U0(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function jR(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),ln(s,"link",o),ye(s),i.head.appendChild(s))}function Mo(i){return'[src="'+Ve(i)+'"]'}function gu(i){return"script[async]"+i}function z0(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+Ve(o.href)+'"]');if(u)return s.instance=u,ye(u),u;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),ye(u),ln(u,"style",f),Ah(u,o.precedence,i),s.instance=u;case"stylesheet":f=Oo(o.href);var p=i.querySelector(du(f));if(p)return s.state.loading|=4,s.instance=p,ye(p),p;u=U0(o),(f=yi.get(f))&&nm(u,f),p=(i.ownerDocument||i).createElement("link"),ye(p);var w=p;return w._p=new Promise(function(S,z){w.onload=S,w.onerror=z}),ln(p,"link",u),s.state.loading|=4,Ah(p,o.precedence,i),s.instance=p;case"script":return p=Mo(o.src),(f=i.querySelector(gu(p)))?(s.instance=f,ye(f),f):(u=o,(f=yi.get(p))&&(u=y({},o),im(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),ye(f),ln(f,"link",u),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Ah(u,o.precedence,i));return s.instance}function Ah(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,w=0;w<u.length;w++){var S=u[w];if(S.dataset.precedence===s)p=S;else if(p!==f)break}p?p.parentNode.insertBefore(i,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function nm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function im(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var bh=null;function B0(i,s,o){if(bh===null){var u=new Map,f=bh=new Map;f.set(o,u)}else f=bh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var p=o[f];if(!(p[gr]||p[be]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(s)||"";w=i+w;var S=u.get(w);S?S.push(p):u.set(w,[p])}}return u}function H0(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function GR(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function q0(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var mu=null;function $R(){}function YR(i,s,o){if(mu===null)throw Error(r(475));var u=mu;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Oo(o.href),p=i.querySelector(du(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=Rh.bind(u),i.then(u,u)),s.state.loading|=4,s.instance=p,ye(p);return}p=i.ownerDocument||i,o=U0(o),(f=yi.get(f))&&nm(o,f),p=p.createElement("link"),ye(p);var w=p;w._p=new Promise(function(S,z){w.onload=S,w.onerror=z}),ln(p,"link",o),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=Rh.bind(u),i.addEventListener("load",s),i.addEventListener("error",s))}}function KR(){if(mu===null)throw Error(r(475));var i=mu;return i.stylesheets&&i.count===0&&rm(i,i.stylesheets),0<i.count?function(s){var o=setTimeout(function(){if(i.stylesheets&&rm(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(o)}}:null}function Rh(){if(this.count--,this.count===0){if(this.stylesheets)rm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ih=null;function rm(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ih=new Map,s.forEach(XR,i),Ih=null,Rh.call(i))}function XR(i,s){if(!(s.state.loading&4)){var o=Ih.get(i);if(o)var u=o.get(null);else{o=new Map,Ih.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var w=f[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}f=s.instance,w=f.getAttribute("data-precedence"),p=o.get(w)||u,p===u&&o.set(null,f),o.set(w,f),this.count++,u=Rh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var pu={$$typeof:G,Provider:null,Consumer:null,_currentValue:tt,_currentValue2:tt,_threadCount:0};function QR(i,s,o,u,f,p,w,S){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zn(0),this.hiddenUpdates=zn(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function F0(i,s,o,u,f,p,w,S,z,et,lt,ht){return i=new QR(i,s,o,w,S,z,et,ht),s=1,p===!0&&(s|=24),p=jn(3,null,null,s),i.current=p,p.stateNode=i,s=zd(),s.refCount++,i.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},Fd(p),i}function j0(i){return i?(i=uo,i):uo}function G0(i,s,o,u,f,p){f=j0(f),u.context===null?u.context=f:u.pendingContext=f,u=es(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=ns(i,u,s),o!==null&&(Xn(o,i,s),$l(o,i,s))}function $0(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function sm(i,s){$0(i,s),(i=i.alternate)&&$0(i,s)}function Y0(i){if(i.tag===13){var s=lo(i,67108864);s!==null&&Xn(s,i,67108864),sm(i,67108864)}}var Ch=!0;function ZR(i,s,o,u){var f=C.T;C.T=null;var p=j.p;try{j.p=2,am(i,s,o,u)}finally{j.p=p,C.T=f}}function WR(i,s,o,u){var f=C.T;C.T=null;var p=j.p;try{j.p=8,am(i,s,o,u)}finally{j.p=p,C.T=f}}function am(i,s,o,u){if(Ch){var f=om(u);if(f===null)Yg(i,s,u,xh,o),X0(i,u);else if(tI(f,i,s,o,u))u.stopPropagation();else if(X0(i,u),s&4&&-1<JR.indexOf(i)){for(;f!==null;){var p=ri(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=Xe(p.pendingLanes);if(w!==0){var S=p;for(S.pendingLanes|=2,S.entangledLanes|=2;w;){var z=1<<31-pe(w);S.entanglements[1]|=z,w&=~z}nr(p),(ie&6)===0&&(fh=Ut()+500,uu(0))}}break;case 13:S=lo(p,2),S!==null&&Xn(S,p,2),gh(),sm(p,2)}if(p=om(u),p===null&&Yg(i,s,u,xh,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else Yg(i,s,u,null,o)}}function om(i){return i=li(i),lm(i)}var xh=null;function lm(i){if(xh=null,i=ii(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return xh=i,null}function K0(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(St()){case Be:return 2;case Cn:return 8;case Ln:case Pi:return 32;case Un:return 268435456;default:return 32}default:return 32}}var um=!1,ms=null,ps=null,ys=null,yu=new Map,_u=new Map,_s=[],JR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X0(i,s){switch(i){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":ps=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":yu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_u.delete(s.pointerId)}}function vu(i,s,o,u,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=ri(s),s!==null&&Y0(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function tI(i,s,o,u,f){switch(s){case"focusin":return ms=vu(ms,i,s,o,u,f),!0;case"dragenter":return ps=vu(ps,i,s,o,u,f),!0;case"mouseover":return ys=vu(ys,i,s,o,u,f),!0;case"pointerover":var p=f.pointerId;return yu.set(p,vu(yu.get(p)||null,i,s,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,_u.set(p,vu(_u.get(p)||null,i,s,o,u,f)),!0}return!1}function Q0(i){var s=ii(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,Fa(i.priority,function(){if(o.tag===13){var u=Kn();u=Ui(u);var f=lo(o,u);f!==null&&Xn(f,o,u),sm(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Nh(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=om(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);yr=u,o.target.dispatchEvent(u),yr=null}else return s=ri(o),s!==null&&Y0(s),i.blockedOn=o,!1;s.shift()}return!0}function Z0(i,s,o){Nh(i)&&o.delete(s)}function eI(){um=!1,ms!==null&&Nh(ms)&&(ms=null),ps!==null&&Nh(ps)&&(ps=null),ys!==null&&Nh(ys)&&(ys=null),yu.forEach(Z0),_u.forEach(Z0)}function Dh(i,s){i.blockedOn===s&&(i.blockedOn=null,um||(um=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,eI)))}var Oh=null;function W0(i){Oh!==i&&(Oh=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Oh===i&&(Oh=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],f=i[s+2];if(typeof u!="function"){if(lm(u||o)===null)continue;break}var p=ri(o);p!==null&&(i.splice(s,3),s-=3,lg(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Eu(i){function s(z){return Dh(z,i)}ms!==null&&Dh(ms,i),ps!==null&&Dh(ps,i),ys!==null&&Dh(ys,i),yu.forEach(s),_u.forEach(s);for(var o=0;o<_s.length;o++){var u=_s[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<_s.length&&(o=_s[0],o.blockedOn===null);)Q0(o),o.blockedOn===null&&_s.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],w=f[Ee]||null;if(typeof p=="function")w||W0(o);else if(w){var S=null;if(p&&p.hasAttribute("formAction")){if(f=p,w=p[Ee]||null)S=w.formAction;else if(lm(f)!==null)continue}else S=w.action;typeof S=="function"?o[u+1]=S:(o.splice(u,3),u-=3),W0(o)}}}function cm(i){this._internalRoot=i}Mh.prototype.render=cm.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Kn();G0(o,u,i,s,null,null)},Mh.prototype.unmount=cm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;G0(i.current,2,null,i,null,null),gh(),s[xn]=null}};function Mh(i){this._internalRoot=i}Mh.prototype.unstable_scheduleHydration=function(i){if(i){var s=zi();i={blockedOn:null,target:i,priority:s};for(var o=0;o<_s.length&&s!==0&&s<_s[o].priority;o++);_s.splice(o,0,i),o===0&&Q0(i)}};var J0=t.version;if(J0!=="19.1.0")throw Error(r(527,J0,"19.1.0"));j.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=g(s),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var nI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vh.isDisabled&&Vh.supportsFiber)try{te=Vh.inject(nI),Ht=Vh}catch{}}return wu.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",f=mv,p=pv,w=yv,S=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks)),s=F0(i,1,!1,null,null,o,u,f,p,w,S,null),i[xn]=s.current,$g(i),new cm(s)},wu.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,f="",p=mv,w=pv,S=yv,z=null,et=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(z=o.unstable_transitionCallbacks),o.formState!==void 0&&(et=o.formState)),s=F0(i,1,!0,s,o??null,u,f,p,w,S,z,et),s.context=j0(null),o=s.current,u=Kn(),u=Ui(u),f=es(u),f.callback=null,ns(o,f,u),o=u,s.current.lanes=o,ei(s,o),nr(s),i[xn]=s.current,$g(i),new Mh(s)},wu.version="19.1.0",wu}var uE;function hI(){if(uE)return dm.exports;uE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),dm.exports=cI(),dm.exports}var fI=hI();function Ei(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Ei(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var ym={exports:{}},_m={},vm={exports:{}},Em={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cE;function dI(){if(cE)return Em;cE=1;var e=rc();function t(v,T){return v===T&&(v!==0||1/v===1/T)||v!==v&&T!==T}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,a=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function d(v,T){var A=T(),k=r({inst:{value:A,getSnapshot:T}}),L=k[0].inst,O=k[1];return l(function(){L.value=A,L.getSnapshot=T,g(L)&&O({inst:L})},[v,A,T]),a(function(){return g(L)&&O({inst:L}),v(function(){g(L)&&O({inst:L})})},[v]),c(A),A}function g(v){var T=v.getSnapshot;v=v.value;try{var A=T();return!n(v,A)}catch{return!0}}function m(v,T){return T()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return Em.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:y,Em}var hE;function gI(){return hE||(hE=1,vm.exports=dI()),vm.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fE;function mI(){if(fE)return _m;fE=1;var e=rc(),t=gI();function n(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var r=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,l=e.useRef,c=e.useEffect,d=e.useMemo,g=e.useDebugValue;return _m.useSyncExternalStoreWithSelector=function(m,y,v,T,A){var k=l(null);if(k.current===null){var L={hasValue:!1,value:null};k.current=L}else L=k.current;k=d(function(){function H(rt){if(!q){if(q=!0,G=rt,rt=T(rt),A!==void 0&&L.hasValue){var M=L.value;if(A(M,rt))return B=M}return B=rt}if(M=B,r(G,rt))return M;var b=T(rt);return A!==void 0&&A(M,b)?(G=rt,M):(G=rt,B=b)}var q=!1,G,B,Y=v===void 0?null:v;return[function(){return H(y())},Y===null?void 0:function(){return H(Y())}]},[y,v,T,A]);var O=a(m,k[0],k[1]);return c(function(){L.hasValue=!0,L.value=O},[O]),g(O),O},_m}var dE;function pI(){return dE||(dE=1,ym.exports=mI()),ym.exports}var yI=pI();const _I=kw(yI),vI={},gE=e=>{let t;const n=new Set,r=(y,v)=>{const T=typeof y=="function"?y(t):y;if(!Object.is(T,t)){const A=t;t=v??(typeof T!="object"||T===null)?T:Object.assign({},t,T),n.forEach(k=>k(t,A))}},a=()=>t,g={setState:r,getState:a,getInitialState:()=>m,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(vI?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},m=t=e(r,a,g);return g},EI=e=>e?gE(e):gE,{useDebugValue:TI}=gt,{useSyncExternalStoreWithSelector:wI}=_I,SI=e=>e;function Lw(e,t=SI,n){const r=wI(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return TI(r),r}const mE=(e,t)=>{const n=EI(e),r=(a,l=t)=>Lw(n,a,l);return Object.assign(r,n),r},AI=(e,t)=>e?mE(e,t):mE;function Pn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,a]of e)if(!Object.is(a,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var bI={value:()=>{}};function Hf(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Zh(n)}function Zh(e){this._=e}function RI(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Zh.prototype=Hf.prototype={constructor:Zh,on:function(e,t){var n=this._,r=RI(e+"",n),a,l=-1,c=r.length;if(arguments.length<2){for(;++l<c;)if((a=(e=r[l]).type)&&(a=II(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(a=(e=r[l]).type)n[a]=pE(n[a],e.name,t);else if(t==null)for(a in n)n[a]=pE(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Zh(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,l;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],r=0,a=l.length;r<a;++r)l[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,l=r.length;a<l;++a)r[a].value.apply(t,n)}};function II(e,t){for(var n=0,r=e.length,a;n<r;++n)if((a=e[n]).name===t)return a.value}function pE(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=bI,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var qm="http://www.w3.org/1999/xhtml";const yE={svg:"http://www.w3.org/2000/svg",xhtml:qm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qf(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),yE.hasOwnProperty(t)?{space:yE[t],local:e}:e}function CI(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===qm&&t.documentElement.namespaceURI===qm?t.createElement(e):t.createElementNS(n,e)}}function xI(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Uw(e){var t=qf(e);return(t.local?xI:CI)(t)}function NI(){}function Dp(e){return e==null?NI:function(){return this.querySelector(e)}}function DI(e){typeof e!="function"&&(e=Dp(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=new Array(c),g,m,y=0;y<c;++y)(g=l[y])&&(m=e.call(g,g.__data__,y,l))&&("__data__"in g&&(m.__data__=g.__data__),d[y]=m);return new Jn(r,this._parents)}function OI(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function MI(){return[]}function zw(e){return e==null?MI:function(){return this.querySelectorAll(e)}}function VI(e){return function(){return OI(e.apply(this,arguments))}}function kI(e){typeof e=="function"?e=VI(e):e=zw(e);for(var t=this._groups,n=t.length,r=[],a=[],l=0;l<n;++l)for(var c=t[l],d=c.length,g,m=0;m<d;++m)(g=c[m])&&(r.push(e.call(g,g.__data__,m,c)),a.push(g));return new Jn(r,a)}function Bw(e){return function(){return this.matches(e)}}function Hw(e){return function(t){return t.matches(e)}}var PI=Array.prototype.find;function LI(e){return function(){return PI.call(this.children,e)}}function UI(){return this.firstElementChild}function zI(e){return this.select(e==null?UI:LI(typeof e=="function"?e:Hw(e)))}var BI=Array.prototype.filter;function HI(){return Array.from(this.children)}function qI(e){return function(){return BI.call(this.children,e)}}function FI(e){return this.selectAll(e==null?HI:qI(typeof e=="function"?e:Hw(e)))}function jI(e){typeof e!="function"&&(e=Bw(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=[],g,m=0;m<c;++m)(g=l[m])&&e.call(g,g.__data__,m,l)&&d.push(g);return new Jn(r,this._parents)}function qw(e){return new Array(e.length)}function GI(){return new Jn(this._enter||this._groups.map(qw),this._parents)}function ff(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ff.prototype={constructor:ff,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function $I(e){return function(){return e}}function YI(e,t,n,r,a,l){for(var c=0,d,g=t.length,m=l.length;c<m;++c)(d=t[c])?(d.__data__=l[c],r[c]=d):n[c]=new ff(e,l[c]);for(;c<g;++c)(d=t[c])&&(a[c]=d)}function KI(e,t,n,r,a,l,c){var d,g,m=new Map,y=t.length,v=l.length,T=new Array(y),A;for(d=0;d<y;++d)(g=t[d])&&(T[d]=A=c.call(g,g.__data__,d,t)+"",m.has(A)?a[d]=g:m.set(A,g));for(d=0;d<v;++d)A=c.call(e,l[d],d,l)+"",(g=m.get(A))?(r[d]=g,g.__data__=l[d],m.delete(A)):n[d]=new ff(e,l[d]);for(d=0;d<y;++d)(g=t[d])&&m.get(T[d])===g&&(a[d]=g)}function XI(e){return e.__data__}function QI(e,t){if(!arguments.length)return Array.from(this,XI);var n=t?KI:YI,r=this._parents,a=this._groups;typeof e!="function"&&(e=$I(e));for(var l=a.length,c=new Array(l),d=new Array(l),g=new Array(l),m=0;m<l;++m){var y=r[m],v=a[m],T=v.length,A=ZI(e.call(y,y&&y.__data__,m,r)),k=A.length,L=d[m]=new Array(k),O=c[m]=new Array(k),H=g[m]=new Array(T);n(y,v,L,O,H,A,t);for(var q=0,G=0,B,Y;q<k;++q)if(B=L[q]){for(q>=G&&(G=q+1);!(Y=O[G])&&++G<k;);B._next=Y||null}}return c=new Jn(c,r),c._enter=d,c._exit=g,c}function ZI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function WI(){return new Jn(this._exit||this._groups.map(qw),this._parents)}function JI(e,t,n){var r=this.enter(),a=this,l=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?l.remove():n(l),r&&a?r.merge(a).order():a}function tC(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,l=r.length,c=Math.min(a,l),d=new Array(a),g=0;g<c;++g)for(var m=n[g],y=r[g],v=m.length,T=d[g]=new Array(v),A,k=0;k<v;++k)(A=m[k]||y[k])&&(T[k]=A);for(;g<a;++g)d[g]=n[g];return new Jn(d,this._parents)}function eC(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],a=r.length-1,l=r[a],c;--a>=0;)(c=r[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function nC(e){e||(e=iC);function t(v,T){return v&&T?e(v.__data__,T.__data__):!v-!T}for(var n=this._groups,r=n.length,a=new Array(r),l=0;l<r;++l){for(var c=n[l],d=c.length,g=a[l]=new Array(d),m,y=0;y<d;++y)(m=c[y])&&(g[y]=m);g.sort(t)}return new Jn(a,this._parents).order()}function iC(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function rC(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function sC(){return Array.from(this)}function aC(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length;a<l;++a){var c=r[a];if(c)return c}return null}function oC(){let e=0;for(const t of this)++e;return e}function lC(){return!this.node()}function uC(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a=t[n],l=0,c=a.length,d;l<c;++l)(d=a[l])&&e.call(d,d.__data__,l,a);return this}function cC(e){return function(){this.removeAttribute(e)}}function hC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fC(e,t){return function(){this.setAttribute(e,t)}}function dC(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function gC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function mC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function pC(e,t){var n=qf(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?hC:cC:typeof t=="function"?n.local?mC:gC:n.local?dC:fC)(n,t))}function Fw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function yC(e){return function(){this.style.removeProperty(e)}}function _C(e,t,n){return function(){this.style.setProperty(e,t,n)}}function vC(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function EC(e,t,n){return arguments.length>1?this.each((t==null?yC:typeof t=="function"?vC:_C)(e,t,n??"")):nl(this.node(),e)}function nl(e,t){return e.style.getPropertyValue(t)||Fw(e).getComputedStyle(e,null).getPropertyValue(t)}function TC(e){return function(){delete this[e]}}function wC(e,t){return function(){this[e]=t}}function SC(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function AC(e,t){return arguments.length>1?this.each((t==null?TC:typeof t=="function"?SC:wC)(e,t)):this.node()[e]}function jw(e){return e.trim().split(/^|\s+/)}function Op(e){return e.classList||new Gw(e)}function Gw(e){this._node=e,this._names=jw(e.getAttribute("class")||"")}Gw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function $w(e,t){for(var n=Op(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function Yw(e,t){for(var n=Op(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function bC(e){return function(){$w(this,e)}}function RC(e){return function(){Yw(this,e)}}function IC(e,t){return function(){(t.apply(this,arguments)?$w:Yw)(this,e)}}function CC(e,t){var n=jw(e+"");if(arguments.length<2){for(var r=Op(this.node()),a=-1,l=n.length;++a<l;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?IC:t?bC:RC)(n,t))}function xC(){this.textContent=""}function NC(e){return function(){this.textContent=e}}function DC(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function OC(e){return arguments.length?this.each(e==null?xC:(typeof e=="function"?DC:NC)(e)):this.node().textContent}function MC(){this.innerHTML=""}function VC(e){return function(){this.innerHTML=e}}function kC(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function PC(e){return arguments.length?this.each(e==null?MC:(typeof e=="function"?kC:VC)(e)):this.node().innerHTML}function LC(){this.nextSibling&&this.parentNode.appendChild(this)}function UC(){return this.each(LC)}function zC(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function BC(){return this.each(zC)}function HC(e){var t=typeof e=="function"?e:Uw(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function qC(){return null}function FC(e,t){var n=typeof e=="function"?e:Uw(e),r=t==null?qC:typeof t=="function"?t:Dp(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function jC(){var e=this.parentNode;e&&e.removeChild(this)}function GC(){return this.each(jC)}function $C(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function YC(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function KC(e){return this.select(e?YC:$C)}function XC(e){return arguments.length?this.property("__data__",e):this.node().__data__}function QC(e){return function(t){e.call(this,t,this.__data__)}}function ZC(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function WC(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,a=t.length,l;n<a;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++r]=l;++r?t.length=r:delete this.__on}}}function JC(e,t,n){return function(){var r=this.__on,a,l=QC(t);if(r){for(var c=0,d=r.length;c<d;++c)if((a=r[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=t;return}}this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,options:n},r?r.push(a):this.__on=[a]}}function tx(e,t,n){var r=ZC(e+""),a,l=r.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var g=0,m=d.length,y;g<m;++g)for(a=0,y=d[g];a<l;++a)if((c=r[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=t?JC:WC,a=0;a<l;++a)this.each(d(r[a],t,n));return this}function Kw(e,t,n){var r=Fw(e),a=r.CustomEvent;typeof a=="function"?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function ex(e,t){return function(){return Kw(this,e,t)}}function nx(e,t){return function(){return Kw(this,e,t.apply(this,arguments))}}function ix(e,t){return this.each((typeof t=="function"?nx:ex)(e,t))}function*rx(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length,c;a<l;++a)(c=r[a])&&(yield c)}var Xw=[null];function Jn(e,t){this._groups=e,this._parents=t}function sc(){return new Jn([[document.documentElement]],Xw)}function sx(){return this}Jn.prototype=sc.prototype={constructor:Jn,select:DI,selectAll:kI,selectChild:zI,selectChildren:FI,filter:jI,data:QI,enter:GI,exit:WI,join:JI,merge:tC,selection:sx,order:eC,sort:nC,call:rC,nodes:sC,node:aC,size:oC,empty:lC,each:uC,attr:pC,style:EC,property:AC,classed:CC,text:OC,html:PC,raise:UC,lower:BC,append:HC,insert:FC,remove:GC,clone:KC,datum:XC,on:tx,dispatch:ix,[Symbol.iterator]:rx};function xi(e){return typeof e=="string"?new Jn([[document.querySelector(e)]],[document.documentElement]):new Jn([[e]],Xw)}function ax(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ir(e,t){if(e=ax(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const ox={passive:!1},Hu={capture:!0,passive:!1};function Tm(e){e.stopImmediatePropagation()}function $o(e){e.preventDefault(),e.stopImmediatePropagation()}function Qw(e){var t=e.document.documentElement,n=xi(e).on("dragstart.drag",$o,Hu);"onselectstart"in t?n.on("selectstart.drag",$o,Hu):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Zw(e,t){var n=e.document.documentElement,r=xi(e).on("dragstart.drag",null);t&&(r.on("click.drag",$o,Hu),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const kh=e=>()=>e;function Fm(e,{sourceEvent:t,subject:n,target:r,identifier:a,active:l,x:c,y:d,dx:g,dy:m,dispatch:y}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:y}})}Fm.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function lx(e){return!e.ctrlKey&&!e.button}function ux(){return this.parentNode}function cx(e,t){return t??{x:e.x,y:e.y}}function hx(){return navigator.maxTouchPoints||"ontouchstart"in this}function fx(){var e=lx,t=ux,n=cx,r=hx,a={},l=Hf("start","drag","end"),c=0,d,g,m,y,v=0;function T(B){B.on("mousedown.drag",A).filter(r).on("touchstart.drag",O).on("touchmove.drag",H,ox).on("touchend.drag touchcancel.drag",q).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function A(B,Y){if(!(y||!e.call(this,B,Y))){var rt=G(this,t.call(this,B,Y),B,Y,"mouse");rt&&(xi(B.view).on("mousemove.drag",k,Hu).on("mouseup.drag",L,Hu),Qw(B.view),Tm(B),m=!1,d=B.clientX,g=B.clientY,rt("start",B))}}function k(B){if($o(B),!m){var Y=B.clientX-d,rt=B.clientY-g;m=Y*Y+rt*rt>v}a.mouse("drag",B)}function L(B){xi(B.view).on("mousemove.drag mouseup.drag",null),Zw(B.view,m),$o(B),a.mouse("end",B)}function O(B,Y){if(e.call(this,B,Y)){var rt=B.changedTouches,M=t.call(this,B,Y),b=rt.length,R,V;for(R=0;R<b;++R)(V=G(this,M,B,Y,rt[R].identifier,rt[R]))&&(Tm(B),V("start",B,rt[R]))}}function H(B){var Y=B.changedTouches,rt=Y.length,M,b;for(M=0;M<rt;++M)(b=a[Y[M].identifier])&&($o(B),b("drag",B,Y[M]))}function q(B){var Y=B.changedTouches,rt=Y.length,M,b;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),M=0;M<rt;++M)(b=a[Y[M].identifier])&&(Tm(B),b("end",B,Y[M]))}function G(B,Y,rt,M,b,R){var V=l.copy(),P=ir(R||rt,Y),U,N,D;if((D=n.call(B,new Fm("beforestart",{sourceEvent:rt,target:T,identifier:b,active:c,x:P[0],y:P[1],dx:0,dy:0,dispatch:V}),M))!=null)return U=D.x-P[0]||0,N=D.y-P[1]||0,function K(C,j,tt){var X=P,x;switch(C){case"start":a[b]=K,x=c++;break;case"end":delete a[b],--c;case"drag":P=ir(tt||j,Y),x=c;break}V.call(C,B,new Fm(C,{sourceEvent:j,subject:D,target:T,identifier:b,active:x,x:P[0]+U,y:P[1]+N,dx:P[0]-X[0],dy:P[1]-X[1],dispatch:V}),M)}}return T.filter=function(B){return arguments.length?(e=typeof B=="function"?B:kh(!!B),T):e},T.container=function(B){return arguments.length?(t=typeof B=="function"?B:kh(B),T):t},T.subject=function(B){return arguments.length?(n=typeof B=="function"?B:kh(B),T):n},T.touchable=function(B){return arguments.length?(r=typeof B=="function"?B:kh(!!B),T):r},T.on=function(){var B=l.on.apply(l,arguments);return B===l?T:B},T.clickDistance=function(B){return arguments.length?(v=(B=+B)*B,T):Math.sqrt(v)},T}function Mp(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ww(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ac(){}var qu=.7,df=1/qu,Yo="\\s*([+-]?\\d+)\\s*",Fu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dx=/^#([0-9a-f]{3,8})$/,gx=new RegExp(`^rgb\\(${Yo},${Yo},${Yo}\\)$`),mx=new RegExp(`^rgb\\(${sr},${sr},${sr}\\)$`),px=new RegExp(`^rgba\\(${Yo},${Yo},${Yo},${Fu}\\)$`),yx=new RegExp(`^rgba\\(${sr},${sr},${sr},${Fu}\\)$`),_x=new RegExp(`^hsl\\(${Fu},${sr},${sr}\\)$`),vx=new RegExp(`^hsla\\(${Fu},${sr},${sr},${Fu}\\)$`),_E={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mp(ac,ju,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:vE,formatHex:vE,formatHex8:Ex,formatHsl:Tx,formatRgb:EE,toString:EE});function vE(){return this.rgb().formatHex()}function Ex(){return this.rgb().formatHex8()}function Tx(){return Jw(this).formatHsl()}function EE(){return this.rgb().formatRgb()}function ju(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=dx.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?TE(t):n===3?new kn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ph(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ph(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gx.exec(e))?new kn(t[1],t[2],t[3],1):(t=mx.exec(e))?new kn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=px.exec(e))?Ph(t[1],t[2],t[3],t[4]):(t=yx.exec(e))?Ph(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_x.exec(e))?AE(t[1],t[2]/100,t[3]/100,1):(t=vx.exec(e))?AE(t[1],t[2]/100,t[3]/100,t[4]):_E.hasOwnProperty(e)?TE(_E[e]):e==="transparent"?new kn(NaN,NaN,NaN,0):null}function TE(e){return new kn(e>>16&255,e>>8&255,e&255,1)}function Ph(e,t,n,r){return r<=0&&(e=t=n=NaN),new kn(e,t,n,r)}function wx(e){return e instanceof ac||(e=ju(e)),e?(e=e.rgb(),new kn(e.r,e.g,e.b,e.opacity)):new kn}function jm(e,t,n,r){return arguments.length===1?wx(e):new kn(e,t,n,r??1)}function kn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Mp(kn,jm,Ww(ac,{brighter(e){return e=e==null?df:Math.pow(df,e),new kn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qu:Math.pow(qu,e),new kn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new kn(xa(this.r),xa(this.g),xa(this.b),gf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wE,formatHex:wE,formatHex8:Sx,formatRgb:SE,toString:SE}));function wE(){return`#${Ra(this.r)}${Ra(this.g)}${Ra(this.b)}`}function Sx(){return`#${Ra(this.r)}${Ra(this.g)}${Ra(this.b)}${Ra((isNaN(this.opacity)?1:this.opacity)*255)}`}function SE(){const e=gf(this.opacity);return`${e===1?"rgb(":"rgba("}${xa(this.r)}, ${xa(this.g)}, ${xa(this.b)}${e===1?")":`, ${e})`}`}function gf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ra(e){return e=xa(e),(e<16?"0":"")+e.toString(16)}function AE(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ni(e,t,n,r)}function Jw(e){if(e instanceof Ni)return new Ni(e.h,e.s,e.l,e.opacity);if(e instanceof ac||(e=ju(e)),!e)return new Ni;if(e instanceof Ni)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),l=Math.max(t,n,r),c=NaN,d=l-a,g=(l+a)/2;return d?(t===l?c=(n-r)/d+(n<r)*6:n===l?c=(r-t)/d+2:c=(t-n)/d+4,d/=g<.5?l+a:2-l-a,c*=60):d=g>0&&g<1?0:c,new Ni(c,d,g,e.opacity)}function Ax(e,t,n,r){return arguments.length===1?Jw(e):new Ni(e,t,n,r??1)}function Ni(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Mp(Ni,Ax,Ww(ac,{brighter(e){return e=e==null?df:Math.pow(df,e),new Ni(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qu:Math.pow(qu,e),new Ni(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new kn(wm(e>=240?e-240:e+120,a,r),wm(e,a,r),wm(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Ni(bE(this.h),Lh(this.s),Lh(this.l),gf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=gf(this.opacity);return`${e===1?"hsl(":"hsla("}${bE(this.h)}, ${Lh(this.s)*100}%, ${Lh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function bE(e){return e=(e||0)%360,e<0?e+360:e}function Lh(e){return Math.max(0,Math.min(1,e||0))}function wm(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const tS=e=>()=>e;function bx(e,t){return function(n){return e+n*t}}function Rx(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ix(e){return(e=+e)==1?eS:function(t,n){return n-t?Rx(t,n,e):tS(isNaN(t)?n:t)}}function eS(e,t){var n=t-e;return n?bx(e,n):tS(isNaN(e)?t:e)}const RE=function e(t){var n=Ix(t);function r(a,l){var c=n((a=jm(a)).r,(l=jm(l)).r),d=n(a.g,l.g),g=n(a.b,l.b),m=eS(a.opacity,l.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=g(y),a.opacity=m(y),a+""}}return r.gamma=e,r}(1);function ws(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Gm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sm=new RegExp(Gm.source,"g");function Cx(e){return function(){return e}}function xx(e){return function(t){return e(t)+""}}function Nx(e,t){var n=Gm.lastIndex=Sm.lastIndex=0,r,a,l,c=-1,d=[],g=[];for(e=e+"",t=t+"";(r=Gm.exec(e))&&(a=Sm.exec(t));)(l=a.index)>n&&(l=t.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(r=r[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,g.push({i:c,x:ws(r,a)})),n=Sm.lastIndex;return n<t.length&&(l=t.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?g[0]?xx(g[0].x):Cx(t):(t=g.length,function(m){for(var y=0,v;y<t;++y)d[(v=g[y]).i]=v.x(m);return d.join("")})}var IE=180/Math.PI,$m={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function nS(e,t,n,r,a,l){var c,d,g;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(g=e*n+t*r)&&(n-=e*g,r-=t*g),(d=Math.sqrt(n*n+r*r))&&(n/=d,r/=d,g/=d),e*r<t*n&&(e=-e,t=-t,g=-g,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(t,e)*IE,skewX:Math.atan(g)*IE,scaleX:c,scaleY:d}}var Uh;function Dx(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?$m:nS(t.a,t.b,t.c,t.d,t.e,t.f)}function Ox(e){return e==null||(Uh||(Uh=document.createElementNS("http://www.w3.org/2000/svg","g")),Uh.setAttribute("transform",e),!(e=Uh.transform.baseVal.consolidate()))?$m:(e=e.matrix,nS(e.a,e.b,e.c,e.d,e.e,e.f))}function iS(e,t,n,r){function a(m){return m.length?m.pop()+" ":""}function l(m,y,v,T,A,k){if(m!==v||y!==T){var L=A.push("translate(",null,t,null,n);k.push({i:L-4,x:ws(m,v)},{i:L-2,x:ws(y,T)})}else(v||T)&&A.push("translate("+v+t+T+n)}function c(m,y,v,T){m!==y?(m-y>180?y+=360:y-m>180&&(m+=360),T.push({i:v.push(a(v)+"rotate(",null,r)-2,x:ws(m,y)})):y&&v.push(a(v)+"rotate("+y+r)}function d(m,y,v,T){m!==y?T.push({i:v.push(a(v)+"skewX(",null,r)-2,x:ws(m,y)}):y&&v.push(a(v)+"skewX("+y+r)}function g(m,y,v,T,A,k){if(m!==v||y!==T){var L=A.push(a(A)+"scale(",null,",",null,")");k.push({i:L-4,x:ws(m,v)},{i:L-2,x:ws(y,T)})}else(v!==1||T!==1)&&A.push(a(A)+"scale("+v+","+T+")")}return function(m,y){var v=[],T=[];return m=e(m),y=e(y),l(m.translateX,m.translateY,y.translateX,y.translateY,v,T),c(m.rotate,y.rotate,v,T),d(m.skewX,y.skewX,v,T),g(m.scaleX,m.scaleY,y.scaleX,y.scaleY,v,T),m=y=null,function(A){for(var k=-1,L=T.length,O;++k<L;)v[(O=T[k]).i]=O.x(A);return v.join("")}}}var Mx=iS(Dx,"px, ","px)","deg)"),Vx=iS(Ox,", ",")",")"),kx=1e-12;function CE(e){return((e=Math.exp(e))+1/e)/2}function Px(e){return((e=Math.exp(e))-1/e)/2}function Lx(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ux=function e(t,n,r){function a(l,c){var d=l[0],g=l[1],m=l[2],y=c[0],v=c[1],T=c[2],A=y-d,k=v-g,L=A*A+k*k,O,H;if(L<kx)H=Math.log(T/m)/t,O=function(M){return[d+M*A,g+M*k,m*Math.exp(t*M*H)]};else{var q=Math.sqrt(L),G=(T*T-m*m+r*L)/(2*m*n*q),B=(T*T-m*m-r*L)/(2*T*n*q),Y=Math.log(Math.sqrt(G*G+1)-G),rt=Math.log(Math.sqrt(B*B+1)-B);H=(rt-Y)/t,O=function(M){var b=M*H,R=CE(Y),V=m/(n*q)*(R*Lx(t*b+Y)-Px(Y));return[d+V*A,g+V*k,m*R/CE(t*b+Y)]}}return O.duration=H*1e3*t/Math.SQRT2,O}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,g=d*d;return e(c,d,g)},a}(Math.SQRT2,2,4);var il=0,Cu=0,Su=0,rS=1e3,mf,xu,pf=0,Na=0,Ff=0,Gu=typeof performance=="object"&&performance.now?performance:Date,sS=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Vp(){return Na||(sS(zx),Na=Gu.now()+Ff)}function zx(){Na=0}function yf(){this._call=this._time=this._next=null}yf.prototype=aS.prototype={constructor:yf,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Vp():+n)+(t==null?0:+t),!this._next&&xu!==this&&(xu?xu._next=this:mf=this,xu=this),this._call=e,this._time=n,Ym()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ym())}};function aS(e,t,n){var r=new yf;return r.restart(e,t,n),r}function Bx(){Vp(),++il;for(var e=mf,t;e;)(t=Na-e._time)>=0&&e._call.call(void 0,t),e=e._next;--il}function xE(){Na=(pf=Gu.now())+Ff,il=Cu=0;try{Bx()}finally{il=0,qx(),Na=0}}function Hx(){var e=Gu.now(),t=e-pf;t>rS&&(Ff-=t,pf=e)}function qx(){for(var e,t=mf,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:mf=n);xu=e,Ym(r)}function Ym(e){if(!il){Cu&&(Cu=clearTimeout(Cu));var t=e-Na;t>24?(e<1/0&&(Cu=setTimeout(xE,e-Gu.now()-Ff)),Su&&(Su=clearInterval(Su))):(Su||(pf=Gu.now(),Su=setInterval(Hx,rS)),il=1,sS(xE))}}function NE(e,t,n){var r=new yf;return t=t==null?0:+t,r.restart(a=>{r.stop(),e(a+t)},t,n),r}var Fx=Hf("start","end","cancel","interrupt"),jx=[],oS=0,DE=1,Km=2,Wh=3,OE=4,Xm=5,Jh=6;function jf(e,t,n,r,a,l){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;Gx(e,n,{name:t,index:r,group:a,on:Fx,tween:jx,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:oS})}function kp(e,t){var n=ki(e,t);if(n.state>oS)throw new Error("too late; already scheduled");return n}function hr(e,t){var n=ki(e,t);if(n.state>Wh)throw new Error("too late; already running");return n}function ki(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Gx(e,t,n){var r=e.__transition,a;r[t]=n,n.timer=aS(l,0,n.time);function l(m){n.state=DE,n.timer.restart(c,n.delay,n.time),n.delay<=m&&c(m-n.delay)}function c(m){var y,v,T,A;if(n.state!==DE)return g();for(y in r)if(A=r[y],A.name===n.name){if(A.state===Wh)return NE(c);A.state===OE?(A.state=Jh,A.timer.stop(),A.on.call("interrupt",e,e.__data__,A.index,A.group),delete r[y]):+y<t&&(A.state=Jh,A.timer.stop(),A.on.call("cancel",e,e.__data__,A.index,A.group),delete r[y])}if(NE(function(){n.state===Wh&&(n.state=OE,n.timer.restart(d,n.delay,n.time),d(m))}),n.state=Km,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Km){for(n.state=Wh,a=new Array(T=n.tween.length),y=0,v=-1;y<T;++y)(A=n.tween[y].value.call(e,e.__data__,n.index,n.group))&&(a[++v]=A);a.length=v+1}}function d(m){for(var y=m<n.duration?n.ease.call(null,m/n.duration):(n.timer.restart(g),n.state=Xm,1),v=-1,T=a.length;++v<T;)a[v].call(e,y);n.state===Xm&&(n.on.call("end",e,e.__data__,n.index,n.group),g())}function g(){n.state=Jh,n.timer.stop(),delete r[t];for(var m in r)return;delete e.__transition}}function tf(e,t){var n=e.__transition,r,a,l=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((r=n[c]).name!==t){l=!1;continue}a=r.state>Km&&r.state<Xm,r.state=Jh,r.timer.stop(),r.on.call(a?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[c]}l&&delete e.__transition}}function $x(e){return this.each(function(){tf(this,e)})}function Yx(e,t){var n,r;return function(){var a=hr(this,e),l=a.tween;if(l!==n){r=n=l;for(var c=0,d=r.length;c<d;++c)if(r[c].name===t){r=r.slice(),r.splice(c,1);break}}a.tween=r}}function Kx(e,t,n){var r,a;if(typeof n!="function")throw new Error;return function(){var l=hr(this,e),c=l.tween;if(c!==r){a=(r=c).slice();for(var d={name:t,value:n},g=0,m=a.length;g<m;++g)if(a[g].name===t){a[g]=d;break}g===m&&a.push(d)}l.tween=a}}function Xx(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ki(this.node(),n).tween,a=0,l=r.length,c;a<l;++a)if((c=r[a]).name===e)return c.value;return null}return this.each((t==null?Yx:Kx)(n,e,t))}function Pp(e,t,n){var r=e._id;return e.each(function(){var a=hr(this,r);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return ki(a,r).value[t]}}function lS(e,t){var n;return(typeof t=="number"?ws:t instanceof ju?RE:(n=ju(t))?(t=n,RE):Nx)(e,t)}function Qx(e){return function(){this.removeAttribute(e)}}function Zx(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Wx(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttribute(e);return c===a?null:c===r?l:l=t(r=c,n)}}function Jx(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===r?l:l=t(r=c,n)}}function tN(e,t,n){var r,a,l;return function(){var c,d=n(this),g;return d==null?void this.removeAttribute(e):(c=this.getAttribute(e),g=d+"",c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d)))}}function eN(e,t,n){var r,a,l;return function(){var c,d=n(this),g;return d==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),g=d+"",c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d)))}}function nN(e,t){var n=qf(e),r=n==="transform"?Vx:lS;return this.attrTween(e,typeof t=="function"?(n.local?eN:tN)(n,r,Pp(this,"attr."+e,t)):t==null?(n.local?Zx:Qx)(n):(n.local?Jx:Wx)(n,r,t))}function iN(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function rN(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function sN(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&rN(e,l)),n}return a._value=t,a}function aN(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&iN(e,l)),n}return a._value=t,a}function oN(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=qf(e);return this.tween(n,(r.local?sN:aN)(r,t))}function lN(e,t){return function(){kp(this,e).delay=+t.apply(this,arguments)}}function uN(e,t){return t=+t,function(){kp(this,e).delay=t}}function cN(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?lN:uN)(t,e)):ki(this.node(),t).delay}function hN(e,t){return function(){hr(this,e).duration=+t.apply(this,arguments)}}function fN(e,t){return t=+t,function(){hr(this,e).duration=t}}function dN(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?hN:fN)(t,e)):ki(this.node(),t).duration}function gN(e,t){if(typeof t!="function")throw new Error;return function(){hr(this,e).ease=t}}function mN(e){var t=this._id;return arguments.length?this.each(gN(t,e)):ki(this.node(),t).ease}function pN(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;hr(this,e).ease=n}}function yN(e){if(typeof e!="function")throw new Error;return this.each(pN(this._id,e))}function _N(e){typeof e!="function"&&(e=Bw(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=[],g,m=0;m<c;++m)(g=l[m])&&e.call(g,g.__data__,m,l)&&d.push(g);return new Hr(r,this._parents,this._name,this._id)}function vN(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,l=Math.min(r,a),c=new Array(r),d=0;d<l;++d)for(var g=t[d],m=n[d],y=g.length,v=c[d]=new Array(y),T,A=0;A<y;++A)(T=g[A]||m[A])&&(v[A]=T);for(;d<r;++d)c[d]=t[d];return new Hr(c,this._parents,this._name,this._id)}function EN(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function TN(e,t,n){var r,a,l=EN(t)?kp:hr;return function(){var c=l(this,e),d=c.on;d!==r&&(a=(r=d).copy()).on(t,n),c.on=a}}function wN(e,t){var n=this._id;return arguments.length<2?ki(this.node(),n).on.on(e):this.each(TN(n,e,t))}function SN(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function AN(){return this.on("end.remove",SN(this._id))}function bN(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Dp(e));for(var r=this._groups,a=r.length,l=new Array(a),c=0;c<a;++c)for(var d=r[c],g=d.length,m=l[c]=new Array(g),y,v,T=0;T<g;++T)(y=d[T])&&(v=e.call(y,y.__data__,T,d))&&("__data__"in y&&(v.__data__=y.__data__),m[T]=v,jf(m[T],t,n,T,m,ki(y,n)));return new Hr(l,this._parents,t,n)}function RN(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zw(e));for(var r=this._groups,a=r.length,l=[],c=[],d=0;d<a;++d)for(var g=r[d],m=g.length,y,v=0;v<m;++v)if(y=g[v]){for(var T=e.call(y,y.__data__,v,g),A,k=ki(y,n),L=0,O=T.length;L<O;++L)(A=T[L])&&jf(A,t,n,L,T,k);l.push(T),c.push(y)}return new Hr(l,c,t,n)}var IN=sc.prototype.constructor;function CN(){return new IN(this._groups,this._parents)}function xN(e,t){var n,r,a;return function(){var l=nl(this,e),c=(this.style.removeProperty(e),nl(this,e));return l===c?null:l===n&&c===r?a:a=t(n=l,r=c)}}function uS(e){return function(){this.style.removeProperty(e)}}function NN(e,t,n){var r,a=n+"",l;return function(){var c=nl(this,e);return c===a?null:c===r?l:l=t(r=c,n)}}function DN(e,t,n){var r,a,l;return function(){var c=nl(this,e),d=n(this),g=d+"";return d==null&&(g=d=(this.style.removeProperty(e),nl(this,e))),c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d))}}function ON(e,t){var n,r,a,l="style."+t,c="end."+l,d;return function(){var g=hr(this,e),m=g.on,y=g.value[l]==null?d||(d=uS(t)):void 0;(m!==n||a!==y)&&(r=(n=m).copy()).on(c,a=y),g.on=r}}function MN(e,t,n){var r=(e+="")=="transform"?Mx:lS;return t==null?this.styleTween(e,xN(e,r)).on("end.style."+e,uS(e)):typeof t=="function"?this.styleTween(e,DN(e,r,Pp(this,"style."+e,t))).each(ON(this._id,e)):this.styleTween(e,NN(e,r,t),n).on("end.style."+e,null)}function VN(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function kN(e,t,n){var r,a;function l(){var c=t.apply(this,arguments);return c!==a&&(r=(a=c)&&VN(e,c,n)),r}return l._value=t,l}function PN(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,kN(e,t,n??""))}function LN(e){return function(){this.textContent=e}}function UN(e){return function(){var t=e(this);this.textContent=t??""}}function zN(e){return this.tween("text",typeof e=="function"?UN(Pp(this,"text",e)):LN(e==null?"":e+""))}function BN(e){return function(t){this.textContent=e.call(this,t)}}function HN(e){var t,n;function r(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&BN(a)),t}return r._value=e,r}function qN(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,HN(e))}function FN(){for(var e=this._name,t=this._id,n=cS(),r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,g,m=0;m<d;++m)if(g=c[m]){var y=ki(g,t);jf(g,e,n,m,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new Hr(r,this._parents,e,n)}function jN(){var e,t,n=this,r=n._id,a=n.size();return new Promise(function(l,c){var d={value:c},g={value:function(){--a===0&&l()}};n.each(function(){var m=hr(this,r),y=m.on;y!==e&&(t=(e=y).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(g)),m.on=t}),a===0&&l()})}var GN=0;function Hr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function cS(){return++GN}var Pr=sc.prototype;Hr.prototype={constructor:Hr,select:bN,selectAll:RN,selectChild:Pr.selectChild,selectChildren:Pr.selectChildren,filter:_N,merge:vN,selection:CN,transition:FN,call:Pr.call,nodes:Pr.nodes,node:Pr.node,size:Pr.size,empty:Pr.empty,each:Pr.each,on:wN,attr:nN,attrTween:oN,style:MN,styleTween:PN,text:zN,textTween:qN,remove:AN,tween:Xx,delay:cN,duration:dN,ease:mN,easeVarying:yN,end:jN,[Symbol.iterator]:Pr[Symbol.iterator]};function $N(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var YN={time:null,delay:0,duration:250,ease:$N};function KN(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function XN(e){var t,n;e instanceof Hr?(t=e._id,e=e._name):(t=cS(),(n=YN).time=Vp(),e=e==null?null:e+"");for(var r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,g,m=0;m<d;++m)(g=c[m])&&jf(g,e,t,m,c,n||KN(g,t));return new Hr(r,this._parents,e,t)}sc.prototype.interrupt=$x;sc.prototype.transition=XN;const zh=e=>()=>e;function QN(e,{sourceEvent:t,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function Lr(e,t,n){this.k=e,this.x=t,this.y=n}Lr.prototype={constructor:Lr,scale:function(e){return e===1?this:new Lr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Lr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ns=new Lr(1,0,0);Lr.prototype;function Am(e){e.stopImmediatePropagation()}function Au(e){e.preventDefault(),e.stopImmediatePropagation()}function ZN(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function WN(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ME(){return this.__zoom||Ns}function JN(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function t2(){return navigator.maxTouchPoints||"ontouchstart"in this}function e2(e,t,n){var r=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],l=e.invertY(t[0][1])-n[0][1],c=e.invertY(t[1][1])-n[1][1];return e.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function n2(){var e=ZN,t=WN,n=e2,r=JN,a=t2,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,g=Ux,m=Hf("start","zoom","end"),y,v,T,A=500,k=150,L=0,O=10;function H(D){D.property("__zoom",ME).on("wheel.zoom",b,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",V).filter(a).on("touchstart.zoom",P).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}H.transform=function(D,K,C,j){var tt=D.selection?D.selection():D;tt.property("__zoom",ME),D!==tt?Y(D,K,C,j):tt.interrupt().each(function(){rt(this,arguments).event(j).start().zoom(null,typeof K=="function"?K.apply(this,arguments):K).end()})},H.scaleBy=function(D,K,C,j){H.scaleTo(D,function(){var tt=this.__zoom.k,X=typeof K=="function"?K.apply(this,arguments):K;return tt*X},C,j)},H.scaleTo=function(D,K,C,j){H.transform(D,function(){var tt=t.apply(this,arguments),X=this.__zoom,x=C==null?B(tt):typeof C=="function"?C.apply(this,arguments):C,$=X.invert(x),nt=typeof K=="function"?K.apply(this,arguments):K;return n(G(q(X,nt),x,$),tt,c)},C,j)},H.translateBy=function(D,K,C,j){H.transform(D,function(){return n(this.__zoom.translate(typeof K=="function"?K.apply(this,arguments):K,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),c)},null,j)},H.translateTo=function(D,K,C,j,tt){H.transform(D,function(){var X=t.apply(this,arguments),x=this.__zoom,$=j==null?B(X):typeof j=="function"?j.apply(this,arguments):j;return n(Ns.translate($[0],$[1]).scale(x.k).translate(typeof K=="function"?-K.apply(this,arguments):-K,typeof C=="function"?-C.apply(this,arguments):-C),X,c)},j,tt)};function q(D,K){return K=Math.max(l[0],Math.min(l[1],K)),K===D.k?D:new Lr(K,D.x,D.y)}function G(D,K,C){var j=K[0]-C[0]*D.k,tt=K[1]-C[1]*D.k;return j===D.x&&tt===D.y?D:new Lr(D.k,j,tt)}function B(D){return[(+D[0][0]+ +D[1][0])/2,(+D[0][1]+ +D[1][1])/2]}function Y(D,K,C,j){D.on("start.zoom",function(){rt(this,arguments).event(j).start()}).on("interrupt.zoom end.zoom",function(){rt(this,arguments).event(j).end()}).tween("zoom",function(){var tt=this,X=arguments,x=rt(tt,X).event(j),$=t.apply(tt,X),nt=C==null?B($):typeof C=="function"?C.apply(tt,X):C,st=Math.max($[1][0]-$[0][0],$[1][1]-$[0][1]),ct=tt.__zoom,pt=typeof K=="function"?K.apply(tt,X):K,yt=g(ct.invert(nt).concat(st/ct.k),pt.invert(nt).concat(st/pt.k));return function(Dt){if(Dt===1)Dt=pt;else{var At=yt(Dt),Zt=st/At[2];Dt=new Lr(Zt,nt[0]-At[0]*Zt,nt[1]-At[1]*Zt)}x.zoom(null,Dt)}})}function rt(D,K,C){return!C&&D.__zooming||new M(D,K)}function M(D,K){this.that=D,this.args=K,this.active=0,this.sourceEvent=null,this.extent=t.apply(D,K),this.taps=0}M.prototype={event:function(D){return D&&(this.sourceEvent=D),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(D,K){return this.mouse&&D!=="mouse"&&(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&&D!=="touch"&&(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&&D!=="touch"&&(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(D){var K=xi(this.that).datum();m.call(D,this.that,new QN(D,{sourceEvent:this.sourceEvent,target:H,transform:this.that.__zoom,dispatch:m}),K)}};function b(D,...K){if(!e.apply(this,arguments))return;var C=rt(this,K).event(D),j=this.__zoom,tt=Math.max(l[0],Math.min(l[1],j.k*Math.pow(2,r.apply(this,arguments)))),X=ir(D);if(C.wheel)(C.mouse[0][0]!==X[0]||C.mouse[0][1]!==X[1])&&(C.mouse[1]=j.invert(C.mouse[0]=X)),clearTimeout(C.wheel);else{if(j.k===tt)return;C.mouse=[X,j.invert(X)],tf(this),C.start()}Au(D),C.wheel=setTimeout(x,k),C.zoom("mouse",n(G(q(j,tt),C.mouse[0],C.mouse[1]),C.extent,c));function x(){C.wheel=null,C.end()}}function R(D,...K){if(T||!e.apply(this,arguments))return;var C=D.currentTarget,j=rt(this,K,!0).event(D),tt=xi(D.view).on("mousemove.zoom",nt,!0).on("mouseup.zoom",st,!0),X=ir(D,C),x=D.clientX,$=D.clientY;Qw(D.view),Am(D),j.mouse=[X,this.__zoom.invert(X)],tf(this),j.start();function nt(ct){if(Au(ct),!j.moved){var pt=ct.clientX-x,yt=ct.clientY-$;j.moved=pt*pt+yt*yt>L}j.event(ct).zoom("mouse",n(G(j.that.__zoom,j.mouse[0]=ir(ct,C),j.mouse[1]),j.extent,c))}function st(ct){tt.on("mousemove.zoom mouseup.zoom",null),Zw(ct.view,j.moved),Au(ct),j.event(ct).end()}}function V(D,...K){if(e.apply(this,arguments)){var C=this.__zoom,j=ir(D.changedTouches?D.changedTouches[0]:D,this),tt=C.invert(j),X=C.k*(D.shiftKey?.5:2),x=n(G(q(C,X),j,tt),t.apply(this,K),c);Au(D),d>0?xi(this).transition().duration(d).call(Y,x,j,D):xi(this).call(H.transform,x,j,D)}}function P(D,...K){if(e.apply(this,arguments)){var C=D.touches,j=C.length,tt=rt(this,K,D.changedTouches.length===j).event(D),X,x,$,nt;for(Am(D),x=0;x<j;++x)$=C[x],nt=ir($,this),nt=[nt,this.__zoom.invert(nt),$.identifier],tt.touch0?!tt.touch1&&tt.touch0[2]!==nt[2]&&(tt.touch1=nt,tt.taps=0):(tt.touch0=nt,X=!0,tt.taps=1+!!y);y&&(y=clearTimeout(y)),X&&(tt.taps<2&&(v=nt[0],y=setTimeout(function(){y=null},A)),tf(this),tt.start())}}function U(D,...K){if(this.__zooming){var C=rt(this,K).event(D),j=D.changedTouches,tt=j.length,X,x,$,nt;for(Au(D),X=0;X<tt;++X)x=j[X],$=ir(x,this),C.touch0&&C.touch0[2]===x.identifier?C.touch0[0]=$:C.touch1&&C.touch1[2]===x.identifier&&(C.touch1[0]=$);if(x=C.that.__zoom,C.touch1){var st=C.touch0[0],ct=C.touch0[1],pt=C.touch1[0],yt=C.touch1[1],Dt=(Dt=pt[0]-st[0])*Dt+(Dt=pt[1]-st[1])*Dt,At=(At=yt[0]-ct[0])*At+(At=yt[1]-ct[1])*At;x=q(x,Math.sqrt(Dt/At)),$=[(st[0]+pt[0])/2,(st[1]+pt[1])/2],nt=[(ct[0]+yt[0])/2,(ct[1]+yt[1])/2]}else if(C.touch0)$=C.touch0[0],nt=C.touch0[1];else return;C.zoom("touch",n(G(x,$,nt),C.extent,c))}}function N(D,...K){if(this.__zooming){var C=rt(this,K).event(D),j=D.changedTouches,tt=j.length,X,x;for(Am(D),T&&clearTimeout(T),T=setTimeout(function(){T=null},A),X=0;X<tt;++X)x=j[X],C.touch0&&C.touch0[2]===x.identifier?delete C.touch0:C.touch1&&C.touch1[2]===x.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(x=ir(x,this),Math.hypot(v[0]-x[0],v[1]-x[1])<O)){var $=xi(this).on("dblclick.zoom");$&&$.apply(this,arguments)}}}return H.wheelDelta=function(D){return arguments.length?(r=typeof D=="function"?D:zh(+D),H):r},H.filter=function(D){return arguments.length?(e=typeof D=="function"?D:zh(!!D),H):e},H.touchable=function(D){return arguments.length?(a=typeof D=="function"?D:zh(!!D),H):a},H.extent=function(D){return arguments.length?(t=typeof D=="function"?D:zh([[+D[0][0],+D[0][1]],[+D[1][0],+D[1][1]]]),H):t},H.scaleExtent=function(D){return arguments.length?(l[0]=+D[0],l[1]=+D[1],H):[l[0],l[1]]},H.translateExtent=function(D){return arguments.length?(c[0][0]=+D[0][0],c[1][0]=+D[1][0],c[0][1]=+D[0][1],c[1][1]=+D[1][1],H):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},H.constrain=function(D){return arguments.length?(n=D,H):n},H.duration=function(D){return arguments.length?(d=+D,H):d},H.interpolate=function(D){return arguments.length?(g=D,H):g},H.on=function(){var D=m.on.apply(m,arguments);return D===m?H:D},H.clickDistance=function(D){return arguments.length?(L=(D=+D)*D,H):Math.sqrt(L)},H.tapDistance=function(D){return arguments.length?(O=+D,H):O},H}Pw();const Gf=W.createContext(null),i2=Gf.Provider,qr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},hS=qr.error001();function xe(e,t){const n=W.useContext(Gf);if(n===null)throw new Error(hS);return Lw(n,e,t)}const fn=()=>{const e=W.useContext(Gf);if(e===null)throw new Error(hS);return W.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},r2=e=>e.userSelectionActive?"none":"all";function s2({position:e,children:t,className:n,style:r,...a}){const l=xe(r2),c=`${e}`.split("-");return gt.createElement("div",{className:Ei(["react-flow__panel",n,...c]),style:{...r,pointerEvents:l},...a},t)}function a2({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:gt.createElement(s2,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},gt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const o2=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:a=!0,labelBgStyle:l={},labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:g,className:m,...y})=>{const v=W.useRef(null),[T,A]=W.useState({x:0,y:0,width:0,height:0}),k=Ei(["react-flow__edge-textwrapper",m]);return W.useEffect(()=>{if(v.current){const L=v.current.getBBox();A({x:L.x,y:L.y,width:L.width,height:L.height})}},[n]),typeof n>"u"||!n?null:gt.createElement("g",{transform:`translate(${e-T.width/2} ${t-T.height/2})`,className:k,visibility:T.width?"visible":"hidden",...y},a&&gt.createElement("rect",{width:T.width+2*c[0],x:-c[0],y:-c[1],height:T.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),gt.createElement("text",{className:"react-flow__edge-text",y:T.height/2,dy:"0.3em",ref:v,style:r},n),g)};var l2=W.memo(o2);const Lp=e=>({width:e.offsetWidth,height:e.offsetHeight}),rl=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Up=(e={x:0,y:0},t)=>({x:rl(e.x,t[0][0],t[1][0]),y:rl(e.y,t[0][1],t[1][1])}),VE=(e,t,n)=>e<t?rl(Math.abs(e-t),1,50)/50:e>n?-rl(Math.abs(e-n),1,50)/50:0,fS=(e,t)=>{const n=VE(e.x,35,t.width-35)*20,r=VE(e.y,35,t.height-35)*20;return[n,r]},dS=e=>e.getRootNode?.()||window?.document,u2=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),zp=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),c2=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),kE=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Qm=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},h2=e=>vi(e.width)&&vi(e.height)&&vi(e.x)&&vi(e.y),vi=e=>!isNaN(e)&&isFinite(e),Se=Symbol.for("internals"),gS=["Enter"," ","Escape"],f2=(e,t)=>{},d2=e=>"nativeEvent"in e;function Zm(e){const n=(d2(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const mS=e=>"clientX"in e,Ds=(e,t)=>{const n=mS(e),r=n?e.clientX:e.touches?.[0].clientX,a=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:a-(t?.top??0)}},_f=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,oc=({id:e,path:t,labelX:n,labelY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:T,interactionWidth:A=20})=>gt.createElement(gt.Fragment,null,gt.createElement("path",{id:e,style:y,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:T}),A&&gt.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:A,className:"react-flow__edge-interaction"}),a&&vi(n)&&vi(r)?gt.createElement(l2,{x:n,y:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m}):null);oc.displayName="BaseEdge";function bu(e,t,n){return n===void 0?n:r=>{const a=t().edges.find(l=>l.id===e);a&&n(r,{...a})}}function pS({sourceX:e,sourceY:t,targetX:n,targetY:r}){const a=Math.abs(n-e)/2,l=n<e?n+a:n-a,c=Math.abs(r-t)/2,d=r<t?r+c:r-c;return[l,d,a,c]}function yS({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const g=e*.125+a*.375+c*.375+n*.125,m=t*.125+l*.375+d*.375+r*.125,y=Math.abs(g-e),v=Math.abs(m-t);return[g,m,y,v]}var Da;(function(e){e.Strict="strict",e.Loose="loose"})(Da||(Da={}));var Ia;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ia||(Ia={}));var $u;(function(e){e.Partial="partial",e.Full="full"})($u||($u={}));var As;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(As||(As={}));var vf;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(vf||(vf={}));var bt;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(bt||(bt={}));function PE({pos:e,x1:t,y1:n,x2:r,y2:a}){return e===bt.Left||e===bt.Right?[.5*(t+r),n]:[t,.5*(n+a)]}function _S({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:a,targetPosition:l=bt.Top}){const[c,d]=PE({pos:n,x1:e,y1:t,x2:r,y2:a}),[g,m]=PE({pos:l,x1:r,y1:a,x2:e,y2:t}),[y,v,T,A]=yS({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:g,targetControlY:m});return[`M${e},${t} C${c},${d} ${g},${m} ${r},${a}`,y,v,T,A]}const Bp=W.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=bt.Bottom,targetPosition:l=bt.Top,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:T,markerEnd:A,markerStart:k,interactionWidth:L})=>{const[O,H,q]=_S({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:l});return gt.createElement(oc,{path:O,labelX:H,labelY:q,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:T,markerEnd:A,markerStart:k,interactionWidth:L})});Bp.displayName="SimpleBezierEdge";const LE={[bt.Left]:{x:-1,y:0},[bt.Right]:{x:1,y:0},[bt.Top]:{x:0,y:-1},[bt.Bottom]:{x:0,y:1}},g2=({source:e,sourcePosition:t=bt.Bottom,target:n})=>t===bt.Left||t===bt.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},UE=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function m2({source:e,sourcePosition:t=bt.Bottom,target:n,targetPosition:r=bt.Top,center:a,offset:l}){const c=LE[t],d=LE[r],g={x:e.x+c.x*l,y:e.y+c.y*l},m={x:n.x+d.x*l,y:n.y+d.y*l},y=g2({source:g,sourcePosition:t,target:m}),v=y.x!==0?"x":"y",T=y[v];let A=[],k,L;const O={x:0,y:0},H={x:0,y:0},[q,G,B,Y]=pS({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[v]*d[v]===-1){k=a.x??q,L=a.y??G;const M=[{x:k,y:g.y},{x:k,y:m.y}],b=[{x:g.x,y:L},{x:m.x,y:L}];c[v]===T?A=v==="x"?M:b:A=v==="x"?b:M}else{const M=[{x:g.x,y:m.y}],b=[{x:m.x,y:g.y}];if(v==="x"?A=c.x===T?b:M:A=c.y===T?M:b,t===r){const N=Math.abs(e[v]-n[v]);if(N<=l){const D=Math.min(l-1,l-N);c[v]===T?O[v]=(g[v]>e[v]?-1:1)*D:H[v]=(m[v]>n[v]?-1:1)*D}}if(t!==r){const N=v==="x"?"y":"x",D=c[v]===d[N],K=g[N]>m[N],C=g[N]<m[N];(c[v]===1&&(!D&&K||D&&C)||c[v]!==1&&(!D&&C||D&&K))&&(A=v==="x"?M:b)}const R={x:g.x+O.x,y:g.y+O.y},V={x:m.x+H.x,y:m.y+H.y},P=Math.max(Math.abs(R.x-A[0].x),Math.abs(V.x-A[0].x)),U=Math.max(Math.abs(R.y-A[0].y),Math.abs(V.y-A[0].y));P>=U?(k=(R.x+V.x)/2,L=A[0].y):(k=A[0].x,L=(R.y+V.y)/2)}return[[e,{x:g.x+O.x,y:g.y+O.y},...A,{x:m.x+H.x,y:m.y+H.y},n],k,L,B,Y]}function p2(e,t,n,r){const a=Math.min(UE(e,t)/2,UE(t,n)/2,r),{x:l,y:c}=t;if(e.x===l&&l===n.x||e.y===c&&c===n.y)return`L${l} ${c}`;if(e.y===c){const m=e.x<n.x?-1:1,y=e.y<n.y?1:-1;return`L ${l+a*m},${c}Q ${l},${c} ${l},${c+a*y}`}const d=e.x<n.x?1:-1,g=e.y<n.y?-1:1;return`L ${l},${c+a*g}Q ${l},${c} ${l+a*d},${c}`}function Wm({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:a,targetPosition:l=bt.Top,borderRadius:c=5,centerX:d,centerY:g,offset:m=20}){const[y,v,T,A,k]=m2({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:a},targetPosition:l,center:{x:d,y:g},offset:m});return[y.reduce((O,H,q)=>{let G="";return q>0&&q<y.length-1?G=p2(y[q-1],H,y[q+1],c):G=`${q===0?"M":"L"}${H.x} ${H.y}`,O+=G,O},""),v,T,A,k]}const $f=W.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,sourcePosition:v=bt.Bottom,targetPosition:T=bt.Top,markerEnd:A,markerStart:k,pathOptions:L,interactionWidth:O})=>{const[H,q,G]=Wm({sourceX:e,sourceY:t,sourcePosition:v,targetX:n,targetY:r,targetPosition:T,borderRadius:L?.borderRadius,offset:L?.offset});return gt.createElement(oc,{path:H,labelX:q,labelY:G,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:A,markerStart:k,interactionWidth:O})});$f.displayName="SmoothStepEdge";const Hp=W.memo(e=>gt.createElement($f,{...e,pathOptions:W.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));Hp.displayName="StepEdge";function y2({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[a,l,c,d]=pS({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,a,l,c,d]}const qp=W.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:T,interactionWidth:A})=>{const[k,L,O]=y2({sourceX:e,sourceY:t,targetX:n,targetY:r});return gt.createElement(oc,{path:k,labelX:L,labelY:O,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:T,interactionWidth:A})});qp.displayName="StraightEdge";function Bh(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function zE({pos:e,x1:t,y1:n,x2:r,y2:a,c:l}){switch(e){case bt.Left:return[t-Bh(t-r,l),n];case bt.Right:return[t+Bh(r-t,l),n];case bt.Top:return[t,n-Bh(n-a,l)];case bt.Bottom:return[t,n+Bh(a-n,l)]}}function vS({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:a,targetPosition:l=bt.Top,curvature:c=.25}){const[d,g]=zE({pos:n,x1:e,y1:t,x2:r,y2:a,c}),[m,y]=zE({pos:l,x1:r,y1:a,x2:e,y2:t,c}),[v,T,A,k]=yS({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:d,sourceControlY:g,targetControlX:m,targetControlY:y});return[`M${e},${t} C${d},${g} ${m},${y} ${r},${a}`,v,T,A,k]}const Ef=W.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=bt.Bottom,targetPosition:l=bt.Top,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:T,markerEnd:A,markerStart:k,pathOptions:L,interactionWidth:O})=>{const[H,q,G]=vS({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:l,curvature:L?.curvature});return gt.createElement(oc,{path:H,labelX:q,labelY:G,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:T,markerEnd:A,markerStart:k,interactionWidth:O})});Ef.displayName="BezierEdge";const Fp=W.createContext(null),_2=Fp.Provider;Fp.Consumer;const v2=()=>W.useContext(Fp),E2=e=>"id"in e&&"source"in e&&"target"in e,T2=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Jm=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,w2=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),ES=(e,t)=>{if(!e.source||!e.target)return t;let n;return E2(e)?n={...e}:n={...e,id:T2(e)},w2(n,t)?t:t.concat(n)},tp=({x:e,y:t},[n,r,a],l,[c,d])=>{const g={x:(e-n)/a,y:(t-r)/a};return l?{x:c*Math.round(g.x/c),y:d*Math.round(g.y/d)}:g},TS=({x:e,y:t},[n,r,a])=>({x:e*a+n,y:t*a+r}),Ko=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],a={x:e.position.x-n,y:e.position.y-r};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:a}},jp=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,a)=>{const{x:l,y:c}=Ko(a,t).positionAbsolute;return u2(r,zp({x:l,y:c,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return c2(n)},wS=(e,t,[n,r,a]=[0,0,1],l=!1,c=!1,d=[0,0])=>{const g={x:(t.x-n)/a,y:(t.y-r)/a,width:t.width/a,height:t.height/a},m=[];return e.forEach(y=>{const{width:v,height:T,selectable:A=!0,hidden:k=!1}=y;if(c&&!A||k)return!1;const{positionAbsolute:L}=Ko(y,d),O={x:L.x,y:L.y,width:v||0,height:T||0},H=Qm(g,O),q=typeof v>"u"||typeof T>"u"||v===null||T===null,G=l&&H>0,B=(v||0)*(T||0);(q||G||H>=B||y.dragging)&&m.push(y)}),m},SS=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},AS=(e,t,n,r,a,l=.1)=>{const c=t/(e.width*(1+l)),d=n/(e.height*(1+l)),g=Math.min(c,d),m=rl(g,r,a),y=e.x+e.width/2,v=e.y+e.height/2,T=t/2-y*m,A=n/2-v*m;return{x:T,y:A,zoom:m}},Aa=(e,t=0)=>e.transition().duration(t);function BE(e,t,n,r){return(t[n]||[]).reduce((a,l)=>(`${e.id}-${l.id}-${n}`!==r&&a.push({id:l.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+l.x+l.width/2,y:(e.positionAbsolute?.y??0)+l.y+l.height/2}),a),[])}function S2(e,t,n,r,a,l){const{x:c,y:d}=Ds(e),m=t.elementsFromPoint(c,d).find(k=>k.classList.contains("react-flow__handle"));if(m){const k=m.getAttribute("data-nodeid");if(k){const L=Gp(void 0,m),O=m.getAttribute("data-handleid"),H=l({nodeId:k,id:O,type:L});if(H){const q=a.find(G=>G.nodeId===k&&G.type===L&&G.id===O);return{handle:{id:O,type:L,nodeId:k,x:q?.x||n.x,y:q?.y||n.y},validHandleResult:H}}}}let y=[],v=1/0;if(a.forEach(k=>{const L=Math.sqrt((k.x-n.x)**2+(k.y-n.y)**2);if(L<=r){const O=l(k);L<=v&&(L<v?y=[{handle:k,validHandleResult:O}]:L===v&&y.push({handle:k,validHandleResult:O}),v=L)}}),!y.length)return{handle:null,validHandleResult:bS()};if(y.length===1)return y[0];const T=y.some(({validHandleResult:k})=>k.isValid),A=y.some(({handle:k})=>k.type==="target");return y.find(({handle:k,validHandleResult:L})=>A?k.type==="target":T?L.isValid:!0)||y[0]}const A2={source:null,target:null,sourceHandle:null,targetHandle:null},bS=()=>({handleDomNode:null,isValid:!1,connection:A2,endHandle:null});function RS(e,t,n,r,a,l,c){const d=a==="target",g=c.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),m={...bS(),handleDomNode:g};if(g){const y=Gp(void 0,g),v=g.getAttribute("data-nodeid"),T=g.getAttribute("data-handleid"),A=g.classList.contains("connectable"),k=g.classList.contains("connectableend"),L={source:d?v:n,sourceHandle:d?T:r,target:d?n:v,targetHandle:d?r:T};m.connection=L,A&&k&&(t===Da.Strict?d&&y==="source"||!d&&y==="target":v!==n||T!==r)&&(m.endHandle={nodeId:v,handleId:T,type:y},m.isValid=l(L))}return m}function b2({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((a,l)=>{if(l[Se]){const{handleBounds:c}=l[Se];let d=[],g=[];c&&(d=BE(l,c,"source",`${t}-${n}-${r}`),g=BE(l,c,"target",`${t}-${n}-${r}`)),a.push(...d,...g)}return a},[])}function Gp(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function bm(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function R2(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function IS({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:a,getState:l,setState:c,isValidConnection:d,edgeUpdaterType:g,onReconnectEnd:m}){const y=dS(e.target),{connectionMode:v,domNode:T,autoPanOnConnect:A,connectionRadius:k,onConnectStart:L,panBy:O,getNodes:H,cancelConnection:q}=l();let G=0,B;const{x:Y,y:rt}=Ds(e),M=y?.elementFromPoint(Y,rt),b=Gp(g,M),R=T?.getBoundingClientRect();if(!R||!b)return;let V,P=Ds(e,R),U=!1,N=null,D=!1,K=null;const C=b2({nodes:H(),nodeId:n,handleId:t,handleType:b}),j=()=>{if(!A)return;const[x,$]=fS(P,R);O({x,y:$}),G=requestAnimationFrame(j)};c({connectionPosition:P,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:b,connectionStartHandle:{nodeId:n,handleId:t,type:b},connectionEndHandle:null}),L?.(e,{nodeId:n,handleId:t,handleType:b});function tt(x){const{transform:$}=l();P=Ds(x,R);const{handle:nt,validHandleResult:st}=S2(x,y,tp(P,$,!1,[1,1]),k,C,ct=>RS(ct,v,n,t,a?"target":"source",d,y));if(B=nt,U||(j(),U=!0),K=st.handleDomNode,N=st.connection,D=st.isValid,c({connectionPosition:B&&D?TS({x:B.x,y:B.y},$):P,connectionStatus:R2(!!B,D),connectionEndHandle:st.endHandle}),!B&&!D&&!K)return bm(V);N.source!==N.target&&K&&(bm(V),V=K,K.classList.add("connecting","react-flow__handle-connecting"),K.classList.toggle("valid",D),K.classList.toggle("react-flow__handle-valid",D))}function X(x){(B||K)&&N&&D&&r?.(N),l().onConnectEnd?.(x),g&&m?.(x),bm(V),q(),cancelAnimationFrame(G),U=!1,D=!1,N=null,K=null,y.removeEventListener("mousemove",tt),y.removeEventListener("mouseup",X),y.removeEventListener("touchmove",tt),y.removeEventListener("touchend",X)}y.addEventListener("mousemove",tt),y.addEventListener("mouseup",X),y.addEventListener("touchmove",tt),y.addEventListener("touchend",X)}const HE=()=>!0,I2=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),C2=(e,t,n)=>r=>{const{connectionStartHandle:a,connectionEndHandle:l,connectionClickStartHandle:c}=r;return{connecting:a?.nodeId===e&&a?.handleId===t&&a?.type===n||l?.nodeId===e&&l?.handleId===t&&l?.type===n,clickConnecting:c?.nodeId===e&&c?.handleId===t&&c?.type===n}},CS=W.forwardRef(({type:e="source",position:t=bt.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:g,className:m,onMouseDown:y,onTouchStart:v,...T},A)=>{const k=c||null,L=e==="target",O=fn(),H=v2(),{connectOnClick:q,noPanClassName:G}=xe(I2,Pn),{connecting:B,clickConnecting:Y}=xe(C2(H,k,e),Pn);H||O.getState().onError?.("010",qr.error010());const rt=R=>{const{defaultEdgeOptions:V,onConnect:P,hasDefaultEdges:U}=O.getState(),N={...V,...R};if(U){const{edges:D,setEdges:K}=O.getState();K(ES(N,D))}P?.(N),d?.(N)},M=R=>{if(!H)return;const V=mS(R);a&&(V&&R.button===0||!V)&&IS({event:R,handleId:k,nodeId:H,onConnect:rt,isTarget:L,getState:O.getState,setState:O.setState,isValidConnection:n||O.getState().isValidConnection||HE}),V?y?.(R):v?.(R)},b=R=>{const{onClickConnectStart:V,onClickConnectEnd:P,connectionClickStartHandle:U,connectionMode:N,isValidConnection:D}=O.getState();if(!H||!U&&!a)return;if(!U){V?.(R,{nodeId:H,handleId:k,handleType:e}),O.setState({connectionClickStartHandle:{nodeId:H,type:e,handleId:k}});return}const K=dS(R.target),C=n||D||HE,{connection:j,isValid:tt}=RS({nodeId:H,id:k,type:e},N,U.nodeId,U.handleId||null,U.type,C,K);tt&&rt(j),P?.(R),O.setState({connectionClickStartHandle:null})};return gt.createElement("div",{"data-handleid":k,"data-nodeid":H,"data-handlepos":t,"data-id":`${H}-${k}-${e}`,className:Ei(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",G,m,{source:!L,target:L,connectable:r,connectablestart:a,connectableend:l,connecting:Y,connectionindicator:r&&(a&&!B||l&&B)}]),onMouseDown:M,onTouchStart:M,onClick:q?b:void 0,ref:A,...T},g)});CS.displayName="Handle";var Tf=W.memo(CS);const xS=({data:e,isConnectable:t,targetPosition:n=bt.Top,sourcePosition:r=bt.Bottom})=>gt.createElement(gt.Fragment,null,gt.createElement(Tf,{type:"target",position:n,isConnectable:t}),e?.label,gt.createElement(Tf,{type:"source",position:r,isConnectable:t}));xS.displayName="DefaultNode";var ep=W.memo(xS);const NS=({data:e,isConnectable:t,sourcePosition:n=bt.Bottom})=>gt.createElement(gt.Fragment,null,e?.label,gt.createElement(Tf,{type:"source",position:n,isConnectable:t}));NS.displayName="InputNode";var DS=W.memo(NS);const OS=({data:e,isConnectable:t,targetPosition:n=bt.Top})=>gt.createElement(gt.Fragment,null,gt.createElement(Tf,{type:"target",position:n,isConnectable:t}),e?.label);OS.displayName="OutputNode";var MS=W.memo(OS);const $p=()=>null;$p.displayName="GroupNode";const x2=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Hh=e=>e.id;function N2(e,t){return Pn(e.selectedNodes.map(Hh),t.selectedNodes.map(Hh))&&Pn(e.selectedEdges.map(Hh),t.selectedEdges.map(Hh))}const VS=W.memo(({onSelectionChange:e})=>{const t=fn(),{selectedNodes:n,selectedEdges:r}=xe(x2,N2);return W.useEffect(()=>{const a={nodes:n,edges:r};e?.(a),t.getState().onSelectionChange.forEach(l=>l(a))},[n,r,e]),null});VS.displayName="SelectionListener";const D2=e=>!!e.onSelectionChange;function O2({onSelectionChange:e}){const t=xe(D2);return e||t?gt.createElement(VS,{onSelectionChange:e}):null}const M2=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Vo(e,t){W.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Bt(e,t,n){W.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const V2=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:a,onConnectStart:l,onConnectEnd:c,onClickConnectStart:d,onClickConnectEnd:g,nodesDraggable:m,nodesConnectable:y,nodesFocusable:v,edgesFocusable:T,edgesUpdatable:A,elevateNodesOnSelect:k,minZoom:L,maxZoom:O,nodeExtent:H,onNodesChange:q,onEdgesChange:G,elementsSelectable:B,connectionMode:Y,snapGrid:rt,snapToGrid:M,translateExtent:b,connectOnClick:R,defaultEdgeOptions:V,fitView:P,fitViewOptions:U,onNodesDelete:N,onEdgesDelete:D,onNodeDrag:K,onNodeDragStart:C,onNodeDragStop:j,onSelectionDrag:tt,onSelectionDragStart:X,onSelectionDragStop:x,noPanClassName:$,nodeOrigin:nt,rfId:st,autoPanOnConnect:ct,autoPanOnNodeDrag:pt,onError:yt,connectionRadius:Dt,isValidConnection:At,nodeDragThreshold:Zt})=>{const{setNodes:$t,setEdges:Ae,setDefaultNodesAndEdges:Ne,setMinZoom:ze,setMaxZoom:De,setTranslateExtent:fe,setNodeExtent:vn,reset:Ut}=xe(M2,Pn),St=fn();return W.useEffect(()=>{const Be=r?.map(Cn=>({...Cn,...V}));return Ne(n,Be),()=>{Ut()}},[]),Bt("defaultEdgeOptions",V,St.setState),Bt("connectionMode",Y,St.setState),Bt("onConnect",a,St.setState),Bt("onConnectStart",l,St.setState),Bt("onConnectEnd",c,St.setState),Bt("onClickConnectStart",d,St.setState),Bt("onClickConnectEnd",g,St.setState),Bt("nodesDraggable",m,St.setState),Bt("nodesConnectable",y,St.setState),Bt("nodesFocusable",v,St.setState),Bt("edgesFocusable",T,St.setState),Bt("edgesUpdatable",A,St.setState),Bt("elementsSelectable",B,St.setState),Bt("elevateNodesOnSelect",k,St.setState),Bt("snapToGrid",M,St.setState),Bt("snapGrid",rt,St.setState),Bt("onNodesChange",q,St.setState),Bt("onEdgesChange",G,St.setState),Bt("connectOnClick",R,St.setState),Bt("fitViewOnInit",P,St.setState),Bt("fitViewOnInitOptions",U,St.setState),Bt("onNodesDelete",N,St.setState),Bt("onEdgesDelete",D,St.setState),Bt("onNodeDrag",K,St.setState),Bt("onNodeDragStart",C,St.setState),Bt("onNodeDragStop",j,St.setState),Bt("onSelectionDrag",tt,St.setState),Bt("onSelectionDragStart",X,St.setState),Bt("onSelectionDragStop",x,St.setState),Bt("noPanClassName",$,St.setState),Bt("nodeOrigin",nt,St.setState),Bt("rfId",st,St.setState),Bt("autoPanOnConnect",ct,St.setState),Bt("autoPanOnNodeDrag",pt,St.setState),Bt("onError",yt,St.setState),Bt("connectionRadius",Dt,St.setState),Bt("isValidConnection",At,St.setState),Bt("nodeDragThreshold",Zt,St.setState),Vo(e,$t),Vo(t,Ae),Vo(L,ze),Vo(O,De),Vo(b,fe),Vo(H,vn),null},qE={display:"none"},k2={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},kS="react-flow__node-desc",PS="react-flow__edge-desc",P2="react-flow__aria-live",L2=e=>e.ariaLiveMessage;function U2({rfId:e}){const t=xe(L2);return gt.createElement("div",{id:`${P2}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:k2},t)}function z2({rfId:e,disableKeyboardA11y:t}){return gt.createElement(gt.Fragment,null,gt.createElement("div",{id:`${kS}-${e}`,style:qE},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),gt.createElement("div",{id:`${PS}-${e}`,style:qE},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&gt.createElement(U2,{rfId:e}))}var Yu=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=W.useState(!1),a=W.useRef(!1),l=W.useRef(new Set([])),[c,d]=W.useMemo(()=>{if(e!==null){const m=(Array.isArray(e)?e:[e]).filter(v=>typeof v=="string").map(v=>v.split("+")),y=m.reduce((v,T)=>v.concat(...T),[]);return[m,y]}return[[],[]]},[e]);return W.useEffect(()=>{const g=typeof document<"u"?document:null,m=t?.target||g;if(e!==null){const y=A=>{if(a.current=A.ctrlKey||A.metaKey||A.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&Zm(A))return!1;const L=jE(A.code,d);l.current.add(A[L]),FE(c,l.current,!1)&&(A.preventDefault(),r(!0))},v=A=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&Zm(A))return!1;const L=jE(A.code,d);FE(c,l.current,!0)?(r(!1),l.current.clear()):l.current.delete(A[L]),A.key==="Meta"&&l.current.clear(),a.current=!1},T=()=>{l.current.clear(),r(!1)};return m?.addEventListener("keydown",y),m?.addEventListener("keyup",v),window.addEventListener("blur",T),()=>{m?.removeEventListener("keydown",y),m?.removeEventListener("keyup",v),window.removeEventListener("blur",T)}}},[e,r]),n};function FE(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(a=>t.has(a)))}function jE(e,t){return t.includes(e)?"code":"key"}function LS(e,t,n,r){const a=e.parentNode||e.parentId;if(!a)return n;const l=t.get(a),c=Ko(l,r);return LS(l,t,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(l[Se]?.z??0)>(n.z??0)?l[Se]?.z??0:n.z??0},r)}function US(e,t,n){e.forEach(r=>{const a=r.parentNode||r.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||n?.[r.id]){const{x:l,y:c,z:d}=LS(r,e,{...r.position,z:r[Se]?.z??0},t);r.positionAbsolute={x:l,y:c},r[Se].z=d,n?.[r.id]&&(r[Se].isParent=!0)}})}function Rm(e,t,n,r){const a=new Map,l={},c=r?1e3:0;return e.forEach(d=>{const g=(vi(d.zIndex)?d.zIndex:0)+(d.selected?c:0),m=t.get(d.id),y={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},v=d.parentNode||d.parentId;v&&(l[v]=!0);const T=m?.type&&m?.type!==d.type;Object.defineProperty(y,Se,{enumerable:!1,value:{handleBounds:T?void 0:m?.[Se]?.handleBounds,z:g}}),a.set(d.id,y)}),US(a,n,l),a}function zS(e,t={}){const{getNodes:n,width:r,height:a,minZoom:l,maxZoom:c,d3Zoom:d,d3Selection:g,fitViewOnInitDone:m,fitViewOnInit:y,nodeOrigin:v}=e(),T=t.initial&&!m&&y;if(d&&g&&(T||!t.initial)){const k=n().filter(O=>{const H=t.includeHiddenNodes?O.width&&O.height:!O.hidden;return t.nodes?.length?H&&t.nodes.some(q=>q.id===O.id):H}),L=k.every(O=>O.width&&O.height);if(k.length>0&&L){const O=jp(k,v),{x:H,y:q,zoom:G}=AS(O,r,a,t.minZoom??l,t.maxZoom??c,t.padding??.1),B=Ns.translate(H,q).scale(G);return typeof t.duration=="number"&&t.duration>0?d.transform(Aa(g,t.duration),B):d.transform(g,B),!0}}return!1}function B2(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Se]:r[Se],selected:n.selected})}),new Map(t)}function H2(e,t){return t.map(n=>{const r=e.find(a=>a.id===n.id);return r&&(n.selected=r.selected),n})}function qh({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:a,edges:l,onNodesChange:c,onEdgesChange:d,hasDefaultNodes:g,hasDefaultEdges:m}=n();e?.length&&(g&&r({nodeInternals:B2(e,a)}),c?.(e)),t?.length&&(m&&r({edges:H2(t,l)}),d?.(t))}const ko=()=>{},q2={zoomIn:ko,zoomOut:ko,zoomTo:ko,getZoom:()=>1,setViewport:ko,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ko,fitBounds:ko,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},F2=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),j2=()=>{const e=fn(),{d3Zoom:t,d3Selection:n}=xe(F2,Pn);return W.useMemo(()=>n&&t?{zoomIn:a=>t.scaleBy(Aa(n,a?.duration),1.2),zoomOut:a=>t.scaleBy(Aa(n,a?.duration),1/1.2),zoomTo:(a,l)=>t.scaleTo(Aa(n,l?.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,l)=>{const[c,d,g]=e.getState().transform,m=Ns.translate(a.x??c,a.y??d).scale(a.zoom??g);t.transform(Aa(n,l?.duration),m)},getViewport:()=>{const[a,l,c]=e.getState().transform;return{x:a,y:l,zoom:c}},fitView:a=>zS(e.getState,a),setCenter:(a,l,c)=>{const{width:d,height:g,maxZoom:m}=e.getState(),y=typeof c?.zoom<"u"?c.zoom:m,v=d/2-a*y,T=g/2-l*y,A=Ns.translate(v,T).scale(y);t.transform(Aa(n,c?.duration),A)},fitBounds:(a,l)=>{const{width:c,height:d,minZoom:g,maxZoom:m}=e.getState(),{x:y,y:v,zoom:T}=AS(a,c,d,g,m,l?.padding??.1),A=Ns.translate(y,v).scale(T);t.transform(Aa(n,l?.duration),A)},project:a=>{const{transform:l,snapToGrid:c,snapGrid:d}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),tp(a,l,c,d)},screenToFlowPosition:a=>{const{transform:l,snapToGrid:c,snapGrid:d,domNode:g}=e.getState();if(!g)return a;const{x:m,y}=g.getBoundingClientRect(),v={x:a.x-m,y:a.y-y};return tp(v,l,c,d)},flowToScreenPosition:a=>{const{transform:l,domNode:c}=e.getState();if(!c)return a;const{x:d,y:g}=c.getBoundingClientRect(),m=TS(a,l);return{x:m.x+d,y:m.y+g}},viewportInitialized:!0}:q2,[t,n])};function BS(){const e=j2(),t=fn(),n=W.useCallback(()=>t.getState().getNodes().map(L=>({...L})),[]),r=W.useCallback(L=>t.getState().nodeInternals.get(L),[]),a=W.useCallback(()=>{const{edges:L=[]}=t.getState();return L.map(O=>({...O}))},[]),l=W.useCallback(L=>{const{edges:O=[]}=t.getState();return O.find(H=>H.id===L)},[]),c=W.useCallback(L=>{const{getNodes:O,setNodes:H,hasDefaultNodes:q,onNodesChange:G}=t.getState(),B=O(),Y=typeof L=="function"?L(B):L;if(q)H(Y);else if(G){const rt=Y.length===0?B.map(M=>({type:"remove",id:M.id})):Y.map(M=>({item:M,type:"reset"}));G(rt)}},[]),d=W.useCallback(L=>{const{edges:O=[],setEdges:H,hasDefaultEdges:q,onEdgesChange:G}=t.getState(),B=typeof L=="function"?L(O):L;if(q)H(B);else if(G){const Y=B.length===0?O.map(rt=>({type:"remove",id:rt.id})):B.map(rt=>({item:rt,type:"reset"}));G(Y)}},[]),g=W.useCallback(L=>{const O=Array.isArray(L)?L:[L],{getNodes:H,setNodes:q,hasDefaultNodes:G,onNodesChange:B}=t.getState();if(G){const rt=[...H(),...O];q(rt)}else if(B){const Y=O.map(rt=>({item:rt,type:"add"}));B(Y)}},[]),m=W.useCallback(L=>{const O=Array.isArray(L)?L:[L],{edges:H=[],setEdges:q,hasDefaultEdges:G,onEdgesChange:B}=t.getState();if(G)q([...H,...O]);else if(B){const Y=O.map(rt=>({item:rt,type:"add"}));B(Y)}},[]),y=W.useCallback(()=>{const{getNodes:L,edges:O=[],transform:H}=t.getState(),[q,G,B]=H;return{nodes:L().map(Y=>({...Y})),edges:O.map(Y=>({...Y})),viewport:{x:q,y:G,zoom:B}}},[]),v=W.useCallback(({nodes:L,edges:O})=>{const{nodeInternals:H,getNodes:q,edges:G,hasDefaultNodes:B,hasDefaultEdges:Y,onNodesDelete:rt,onEdgesDelete:M,onNodesChange:b,onEdgesChange:R}=t.getState(),V=(L||[]).map(K=>K.id),P=(O||[]).map(K=>K.id),U=q().reduce((K,C)=>{const j=C.parentNode||C.parentId,tt=!V.includes(C.id)&&j&&K.find(x=>x.id===j);return(typeof C.deletable=="boolean"?C.deletable:!0)&&(V.includes(C.id)||tt)&&K.push(C),K},[]),N=G.filter(K=>typeof K.deletable=="boolean"?K.deletable:!0),D=N.filter(K=>P.includes(K.id));if(U||D){const K=SS(U,N),C=[...D,...K],j=C.reduce((tt,X)=>(tt.includes(X.id)||tt.push(X.id),tt),[]);if((Y||B)&&(Y&&t.setState({edges:G.filter(tt=>!j.includes(tt.id))}),B&&(U.forEach(tt=>{H.delete(tt.id)}),t.setState({nodeInternals:new Map(H)}))),j.length>0&&(M?.(C),R&&R(j.map(tt=>({id:tt,type:"remove"})))),U.length>0&&(rt?.(U),b)){const tt=U.map(X=>({id:X.id,type:"remove"}));b(tt)}}},[]),T=W.useCallback(L=>{const O=h2(L),H=O?null:t.getState().nodeInternals.get(L.id);return!O&&!H?[null,null,O]:[O?L:kE(H),H,O]},[]),A=W.useCallback((L,O=!0,H)=>{const[q,G,B]=T(L);return q?(H||t.getState().getNodes()).filter(Y=>{if(!B&&(Y.id===G.id||!Y.positionAbsolute))return!1;const rt=kE(Y),M=Qm(rt,q);return O&&M>0||M>=q.width*q.height}):[]},[]),k=W.useCallback((L,O,H=!0)=>{const[q]=T(L);if(!q)return!1;const G=Qm(q,O);return H&&G>0||G>=q.width*q.height},[]);return W.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:a,getEdge:l,setNodes:c,setEdges:d,addNodes:g,addEdges:m,toObject:y,deleteElements:v,getIntersectingNodes:A,isNodeIntersecting:k}),[e,n,r,a,l,c,d,g,m,y,v,A,k])}const G2={actInsideInputWithModifier:!1};var $2=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=fn(),{deleteElements:r}=BS(),a=Yu(e,G2),l=Yu(t);W.useEffect(()=>{if(a){const{edges:c,getNodes:d}=n.getState(),g=d().filter(y=>y.selected),m=c.filter(y=>y.selected);r({nodes:g,edges:m}),n.setState({nodesSelectionActive:!1})}},[a]),W.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])};function Y2(e){const t=fn();W.useEffect(()=>{let n;const r=()=>{if(!e.current)return;const a=Lp(e.current);(a.height===0||a.width===0)&&t.getState().onError?.("004",qr.error004()),t.setState({width:a.width||500,height:a.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Yp={position:"absolute",width:"100%",height:"100%",top:0,left:0},K2=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Fh=e=>({x:e.x,y:e.y,zoom:e.k}),Po=(e,t)=>e.target.closest(`.${t}`),GE=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),$E=e=>{const t=e.ctrlKey&&_f()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},X2=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Q2=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:a=!0,zoomOnPinch:l=!0,panOnScroll:c=!1,panOnScrollSpeed:d=.5,panOnScrollMode:g=Ia.Free,zoomOnDoubleClick:m=!0,elementsSelectable:y,panOnDrag:v=!0,defaultViewport:T,translateExtent:A,minZoom:k,maxZoom:L,zoomActivationKeyCode:O,preventScrolling:H=!0,children:q,noWheelClassName:G,noPanClassName:B})=>{const Y=W.useRef(),rt=fn(),M=W.useRef(!1),b=W.useRef(!1),R=W.useRef(null),V=W.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:U,d3ZoomHandler:N,userSelectionActive:D}=xe(X2,Pn),K=Yu(O),C=W.useRef(0),j=W.useRef(!1),tt=W.useRef();return Y2(R),W.useEffect(()=>{if(R.current){const X=R.current.getBoundingClientRect(),x=n2().scaleExtent([k,L]).translateExtent(A),$=xi(R.current).call(x),nt=Ns.translate(T.x,T.y).scale(rl(T.zoom,k,L)),st=[[0,0],[X.width,X.height]],ct=x.constrain()(nt,st,A);x.transform($,ct),x.wheelDelta($E),rt.setState({d3Zoom:x,d3Selection:$,d3ZoomHandler:$.on("wheel.zoom"),transform:[ct.x,ct.y,ct.k],domNode:R.current.closest(".react-flow")})}},[]),W.useEffect(()=>{U&&P&&(c&&!K&&!D?U.on("wheel.zoom",X=>{if(Po(X,G))return!1;X.preventDefault(),X.stopImmediatePropagation();const x=U.property("__zoom").k||1;if(X.ctrlKey&&l){const At=ir(X),Zt=$E(X),$t=x*Math.pow(2,Zt);P.scaleTo(U,$t,At,X);return}const $=X.deltaMode===1?20:1;let nt=g===Ia.Vertical?0:X.deltaX*$,st=g===Ia.Horizontal?0:X.deltaY*$;!_f()&&X.shiftKey&&g!==Ia.Vertical&&(nt=X.deltaY*$,st=0),P.translateBy(U,-(nt/x)*d,-(st/x)*d,{internal:!0});const ct=Fh(U.property("__zoom")),{onViewportChangeStart:pt,onViewportChange:yt,onViewportChangeEnd:Dt}=rt.getState();clearTimeout(tt.current),j.current||(j.current=!0,t?.(X,ct),pt?.(ct)),j.current&&(e?.(X,ct),yt?.(ct),tt.current=setTimeout(()=>{n?.(X,ct),Dt?.(ct),j.current=!1},150))},{passive:!1}):typeof N<"u"&&U.on("wheel.zoom",function(X,x){if(!H&&X.type==="wheel"&&!X.ctrlKey||Po(X,G))return null;X.preventDefault(),N.call(this,X,x)},{passive:!1}))},[D,c,g,U,P,N,K,l,H,G,t,e,n]),W.useEffect(()=>{P&&P.on("start",X=>{if(!X.sourceEvent||X.sourceEvent.internal)return null;C.current=X.sourceEvent?.button;const{onViewportChangeStart:x}=rt.getState(),$=Fh(X.transform);M.current=!0,V.current=$,X.sourceEvent?.type==="mousedown"&&rt.setState({paneDragging:!0}),x?.($),t?.(X.sourceEvent,$)})},[P,t]),W.useEffect(()=>{P&&(D&&!M.current?P.on("zoom",null):D||P.on("zoom",X=>{const{onViewportChange:x}=rt.getState();if(rt.setState({transform:[X.transform.x,X.transform.y,X.transform.k]}),b.current=!!(r&&GE(v,C.current??0)),(e||x)&&!X.sourceEvent?.internal){const $=Fh(X.transform);x?.($),e?.(X.sourceEvent,$)}}))},[D,P,e,v,r]),W.useEffect(()=>{P&&P.on("end",X=>{if(!X.sourceEvent||X.sourceEvent.internal)return null;const{onViewportChangeEnd:x}=rt.getState();if(M.current=!1,rt.setState({paneDragging:!1}),r&&GE(v,C.current??0)&&!b.current&&r(X.sourceEvent),b.current=!1,(n||x)&&K2(V.current,X.transform)){const $=Fh(X.transform);V.current=$,clearTimeout(Y.current),Y.current=setTimeout(()=>{x?.($),n?.(X.sourceEvent,$)},c?150:0)}})},[P,c,v,n,r]),W.useEffect(()=>{P&&P.filter(X=>{const x=K||a,$=l&&X.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&X.button===1&&X.type==="mousedown"&&(Po(X,"react-flow__node")||Po(X,"react-flow__edge")))return!0;if(!v&&!x&&!c&&!m&&!l||D||!m&&X.type==="dblclick"||Po(X,G)&&X.type==="wheel"||Po(X,B)&&(X.type!=="wheel"||c&&X.type==="wheel"&&!K)||!l&&X.ctrlKey&&X.type==="wheel"||!x&&!c&&!$&&X.type==="wheel"||!v&&(X.type==="mousedown"||X.type==="touchstart")||Array.isArray(v)&&!v.includes(X.button)&&X.type==="mousedown")return!1;const nt=Array.isArray(v)&&v.includes(X.button)||!X.button||X.button<=1;return(!X.ctrlKey||X.type==="wheel")&&nt})},[D,P,a,l,c,m,v,y,K]),gt.createElement("div",{className:"react-flow__renderer",ref:R,style:Yp},q)},Z2=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function W2(){const{userSelectionActive:e,userSelectionRect:t}=xe(Z2,Pn);return e&&t?gt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function YE(e,t){const n=t.parentNode||t.parentId,r=e.find(a=>a.id===n);if(r){const a=t.position.x+t.width-r.width,l=t.position.y+t.height-r.height;if(a>0||l>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,a>0&&(r.style.width+=a),l>0&&(r.style.height+=l),t.position.x<0){const c=Math.abs(t.position.x);r.position.x=r.position.x-c,r.style.width+=c,t.position.x=0}if(t.position.y<0){const c=Math.abs(t.position.y);r.position.y=r.position.y-c,r.style.height+=c,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function HS(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,a)=>{const l=e.filter(d=>d.id===a.id);if(l.length===0)return r.push(a),r;const c={...a};for(const d of l)if(d)switch(d.type){case"select":{c.selected=d.selected;break}case"position":{typeof d.position<"u"&&(c.position=d.position),typeof d.positionAbsolute<"u"&&(c.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(c.dragging=d.dragging),c.expandParent&&YE(r,c);break}case"dimensions":{typeof d.dimensions<"u"&&(c.width=d.dimensions.width,c.height=d.dimensions.height),typeof d.updateStyle<"u"&&(c.style={...c.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(c.resizing=d.resizing),c.expandParent&&YE(r,c);break}case"remove":return r}return r.push(c),r},n)}function qS(e,t){return HS(e,t)}function J2(e,t){return HS(e,t)}const Ss=(e,t)=>({id:e,type:"select",selected:t});function Fo(e,t){return e.reduce((n,r)=>{const a=t.includes(r.id);return!r.selected&&a?(r.selected=!0,n.push(Ss(r.id,!0))):r.selected&&!a&&(r.selected=!1,n.push(Ss(r.id,!1))),n},[])}const Im=(e,t)=>n=>{n.target===t.current&&e?.(n)},tD=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),FS=W.memo(({isSelecting:e,selectionMode:t=$u.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:g,onPaneMouseMove:m,onPaneMouseLeave:y,children:v})=>{const T=W.useRef(null),A=fn(),k=W.useRef(0),L=W.useRef(0),O=W.useRef(),{userSelectionActive:H,elementsSelectable:q,dragging:G}=xe(tD,Pn),B=()=>{A.setState({userSelectionActive:!1,userSelectionRect:null}),k.current=0,L.current=0},Y=N=>{l?.(N),A.getState().resetSelectedElements(),A.setState({nodesSelectionActive:!1})},rt=N=>{if(Array.isArray(n)&&n?.includes(2)){N.preventDefault();return}c?.(N)},M=d?N=>d(N):void 0,b=N=>{const{resetSelectedElements:D,domNode:K}=A.getState();if(O.current=K?.getBoundingClientRect(),!q||!e||N.button!==0||N.target!==T.current||!O.current)return;const{x:C,y:j}=Ds(N,O.current);D(),A.setState({userSelectionRect:{width:0,height:0,startX:C,startY:j,x:C,y:j}}),r?.(N)},R=N=>{const{userSelectionRect:D,nodeInternals:K,edges:C,transform:j,onNodesChange:tt,onEdgesChange:X,nodeOrigin:x,getNodes:$}=A.getState();if(!e||!O.current||!D)return;A.setState({userSelectionActive:!0,nodesSelectionActive:!1});const nt=Ds(N,O.current),st=D.startX??0,ct=D.startY??0,pt={...D,x:nt.x<st?nt.x:st,y:nt.y<ct?nt.y:ct,width:Math.abs(nt.x-st),height:Math.abs(nt.y-ct)},yt=$(),Dt=wS(K,pt,j,t===$u.Partial,!0,x),At=SS(Dt,C).map($t=>$t.id),Zt=Dt.map($t=>$t.id);if(k.current!==Zt.length){k.current=Zt.length;const $t=Fo(yt,Zt);$t.length&&tt?.($t)}if(L.current!==At.length){L.current=At.length;const $t=Fo(C,At);$t.length&&X?.($t)}A.setState({userSelectionRect:pt})},V=N=>{if(N.button!==0)return;const{userSelectionRect:D}=A.getState();!H&&D&&N.target===T.current&&Y?.(N),A.setState({nodesSelectionActive:k.current>0}),B(),a?.(N)},P=N=>{H&&(A.setState({nodesSelectionActive:k.current>0}),a?.(N)),B()},U=q&&(e||H);return gt.createElement("div",{className:Ei(["react-flow__pane",{dragging:G,selection:e}]),onClick:U?void 0:Im(Y,T),onContextMenu:Im(rt,T),onWheel:Im(M,T),onMouseEnter:U?void 0:g,onMouseDown:U?b:void 0,onMouseMove:U?R:m,onMouseUp:U?V:void 0,onMouseLeave:U?P:y,ref:T,style:Yp},v,gt.createElement(W2,null))});FS.displayName="Pane";function jS(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:jS(r,t):!1}function KE(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function eD(e,t,n,r){return Array.from(e.values()).filter(a=>(a.selected||a.id===r)&&(!a.parentNode||a.parentId||!jS(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(a.positionAbsolute?.x??0),y:n.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}))}function nD(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function GS(e,t,n,r,a=[0,0],l){const c=nD(e,e.extent||r);let d=c;const g=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(g&&e.width&&e.height){const v=n.get(g),{x:T,y:A}=Ko(v,a).positionAbsolute;d=v&&vi(T)&&vi(A)&&vi(v.width)&&vi(v.height)?[[T+e.width*a[0],A+e.height*a[1]],[T+v.width-e.width+e.width*a[0],A+v.height-e.height+e.height*a[1]]]:d}else l?.("005",qr.error005()),d=c;else if(e.extent&&g&&e.extent!=="parent"){const v=n.get(g),{x:T,y:A}=Ko(v,a).positionAbsolute;d=[[e.extent[0][0]+T,e.extent[0][1]+A],[e.extent[1][0]+T,e.extent[1][1]+A]]}let m={x:0,y:0};if(g){const v=n.get(g);m=Ko(v,a).positionAbsolute}const y=d&&d!=="parent"?Up(t,d):t;return{position:{x:y.x-m.x,y:y.y-m.y},positionAbsolute:y}}function Cm({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?r.find(a=>a.id===e):r[0],r]}const XE=(e,t,n,r)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const l=Array.from(a),c=t.getBoundingClientRect(),d={x:c.width*r[0],y:c.height*r[1]};return l.map(g=>{const m=g.getBoundingClientRect();return{id:g.getAttribute("data-handleid"),position:g.getAttribute("data-handlepos"),x:(m.left-c.left-d.x)/n,y:(m.top-c.top-d.y)/n,...Lp(g)}})};function Ru(e,t,n){return n===void 0?n:r=>{const a=t().nodeInternals.get(e);a&&n(r,{...a})}}function np({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeInternals:d,onError:g}=t.getState(),m=d.get(e);if(!m){g?.("012",qr.error012(e));return}t.setState({nodesSelectionActive:!1}),m.selected?(n||m.selected&&c)&&(l({nodes:[m],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):a([e])}function iD(){const e=fn();return W.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:a,snapToGrid:l}=e.getState(),c=n.touches?n.touches[0].clientX:n.clientX,d=n.touches?n.touches[0].clientY:n.clientY,g={x:(c-r[0])/r[2],y:(d-r[1])/r[2]};return{xSnapped:l?a[0]*Math.round(g.x/a[0]):g.x,ySnapped:l?a[1]*Math.round(g.y/a[1]):g.y,...g}},[])}function xm(e){return(t,n,r)=>e?.(t,r)}function $S({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:a,isSelectable:l,selectNodesOnDrag:c}){const d=fn(),[g,m]=W.useState(!1),y=W.useRef([]),v=W.useRef({x:null,y:null}),T=W.useRef(0),A=W.useRef(null),k=W.useRef({x:0,y:0}),L=W.useRef(null),O=W.useRef(!1),H=W.useRef(!1),q=W.useRef(!1),G=iD();return W.useEffect(()=>{if(e?.current){const B=xi(e.current),Y=({x:b,y:R})=>{const{nodeInternals:V,onNodeDrag:P,onSelectionDrag:U,updateNodePositions:N,nodeExtent:D,snapGrid:K,snapToGrid:C,nodeOrigin:j,onError:tt}=d.getState();v.current={x:b,y:R};let X=!1,x={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&D){const nt=jp(y.current,j);x=zp(nt)}if(y.current=y.current.map(nt=>{const st={x:b-nt.distance.x,y:R-nt.distance.y};C&&(st.x=K[0]*Math.round(st.x/K[0]),st.y=K[1]*Math.round(st.y/K[1]));const ct=[[D[0][0],D[0][1]],[D[1][0],D[1][1]]];y.current.length>1&&D&&!nt.extent&&(ct[0][0]=nt.positionAbsolute.x-x.x+D[0][0],ct[1][0]=nt.positionAbsolute.x+(nt.width??0)-x.x2+D[1][0],ct[0][1]=nt.positionAbsolute.y-x.y+D[0][1],ct[1][1]=nt.positionAbsolute.y+(nt.height??0)-x.y2+D[1][1]);const pt=GS(nt,st,V,ct,j,tt);return X=X||nt.position.x!==pt.position.x||nt.position.y!==pt.position.y,nt.position=pt.position,nt.positionAbsolute=pt.positionAbsolute,nt}),!X)return;N(y.current,!0,!0),m(!0);const $=a?P:xm(U);if($&&L.current){const[nt,st]=Cm({nodeId:a,dragItems:y.current,nodeInternals:V});$(L.current,nt,st)}},rt=()=>{if(!A.current)return;const[b,R]=fS(k.current,A.current);if(b!==0||R!==0){const{transform:V,panBy:P}=d.getState();v.current.x=(v.current.x??0)-b/V[2],v.current.y=(v.current.y??0)-R/V[2],P({x:b,y:R})&&Y(v.current)}T.current=requestAnimationFrame(rt)},M=b=>{const{nodeInternals:R,multiSelectionActive:V,nodesDraggable:P,unselectNodesAndEdges:U,onNodeDragStart:N,onSelectionDragStart:D}=d.getState();H.current=!0;const K=a?N:xm(D);(!c||!l)&&!V&&a&&(R.get(a)?.selected||U()),a&&l&&c&&np({id:a,store:d,nodeRef:e});const C=G(b);if(v.current=C,y.current=eD(R,P,C,a),K&&y.current){const[j,tt]=Cm({nodeId:a,dragItems:y.current,nodeInternals:R});K(b.sourceEvent,j,tt)}};if(t)B.on(".drag",null);else{const b=fx().on("start",R=>{const{domNode:V,nodeDragThreshold:P}=d.getState();P===0&&M(R),q.current=!1;const U=G(R);v.current=U,A.current=V?.getBoundingClientRect()||null,k.current=Ds(R.sourceEvent,A.current)}).on("drag",R=>{const V=G(R),{autoPanOnNodeDrag:P,nodeDragThreshold:U}=d.getState();if(R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1&&(q.current=!0),!q.current){if(!O.current&&H.current&&P&&(O.current=!0,rt()),!H.current){const N=V.xSnapped-(v?.current?.x??0),D=V.ySnapped-(v?.current?.y??0);Math.sqrt(N*N+D*D)>U&&M(R)}(v.current.x!==V.xSnapped||v.current.y!==V.ySnapped)&&y.current&&H.current&&(L.current=R.sourceEvent,k.current=Ds(R.sourceEvent,A.current),Y(V))}}).on("end",R=>{if(!(!H.current||q.current)&&(m(!1),O.current=!1,H.current=!1,cancelAnimationFrame(T.current),y.current)){const{updateNodePositions:V,nodeInternals:P,onNodeDragStop:U,onSelectionDragStop:N}=d.getState(),D=a?U:xm(N);if(V(y.current,!1,!1),D){const[K,C]=Cm({nodeId:a,dragItems:y.current,nodeInternals:P});D(R.sourceEvent,K,C)}}}).filter(R=>{const V=R.target;return!R.button&&(!n||!KE(V,`.${n}`,e))&&(!r||KE(V,r,e))});return B.call(b),()=>{B.on(".drag",null)}}}},[e,t,n,r,l,d,a,c,G]),g}function YS(){const e=fn();return W.useCallback(n=>{const{nodeInternals:r,nodeExtent:a,updateNodePositions:l,getNodes:c,snapToGrid:d,snapGrid:g,onError:m,nodesDraggable:y}=e.getState(),v=c().filter(q=>q.selected&&(q.draggable||y&&typeof q.draggable>"u")),T=d?g[0]:5,A=d?g[1]:5,k=n.isShiftPressed?4:1,L=n.x*T*k,O=n.y*A*k,H=v.map(q=>{if(q.positionAbsolute){const G={x:q.positionAbsolute.x+L,y:q.positionAbsolute.y+O};d&&(G.x=g[0]*Math.round(G.x/g[0]),G.y=g[1]*Math.round(G.y/g[1]));const{positionAbsolute:B,position:Y}=GS(q,G,r,a,void 0,m);q.position=Y,q.positionAbsolute=B}return q});l(H,!0,!1)},[])}const Xo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Iu=e=>{const t=({id:n,type:r,data:a,xPos:l,yPos:c,xPosOrigin:d,yPosOrigin:g,selected:m,onClick:y,onMouseEnter:v,onMouseMove:T,onMouseLeave:A,onContextMenu:k,onDoubleClick:L,style:O,className:H,isDraggable:q,isSelectable:G,isConnectable:B,isFocusable:Y,selectNodesOnDrag:rt,sourcePosition:M,targetPosition:b,hidden:R,resizeObserver:V,dragHandle:P,zIndex:U,isParent:N,noDragClassName:D,noPanClassName:K,initialized:C,disableKeyboardA11y:j,ariaLabel:tt,rfId:X,hasHandleBounds:x})=>{const $=fn(),nt=W.useRef(null),st=W.useRef(null),ct=W.useRef(M),pt=W.useRef(b),yt=W.useRef(r),Dt=G||q||y||v||T||A,At=YS(),Zt=Ru(n,$.getState,v),$t=Ru(n,$.getState,T),Ae=Ru(n,$.getState,A),Ne=Ru(n,$.getState,k),ze=Ru(n,$.getState,L),De=Ut=>{const{nodeDragThreshold:St}=$.getState();if(G&&(!rt||!q||St>0)&&np({id:n,store:$,nodeRef:nt}),y){const Be=$.getState().nodeInternals.get(n);Be&&y(Ut,{...Be})}},fe=Ut=>{if(!Zm(Ut)&&!j)if(gS.includes(Ut.key)&&G){const St=Ut.key==="Escape";np({id:n,store:$,unselect:St,nodeRef:nt})}else q&&m&&Object.prototype.hasOwnProperty.call(Xo,Ut.key)&&($.setState({ariaLiveMessage:`Moved selected node ${Ut.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~c}`}),At({x:Xo[Ut.key].x,y:Xo[Ut.key].y,isShiftPressed:Ut.shiftKey}))};W.useEffect(()=>()=>{st.current&&(V?.unobserve(st.current),st.current=null)},[]),W.useEffect(()=>{if(nt.current&&!R){const Ut=nt.current;(!C||!x||st.current!==Ut)&&(st.current&&V?.unobserve(st.current),V?.observe(Ut),st.current=Ut)}},[R,C,x]),W.useEffect(()=>{const Ut=yt.current!==r,St=ct.current!==M,Be=pt.current!==b;nt.current&&(Ut||St||Be)&&(Ut&&(yt.current=r),St&&(ct.current=M),Be&&(pt.current=b),$.getState().updateNodeDimensions([{id:n,nodeElement:nt.current,forceUpdate:!0}]))},[n,r,M,b]);const vn=$S({nodeRef:nt,disabled:R||!q,noDragClassName:D,handleSelector:P,nodeId:n,isSelectable:G,selectNodesOnDrag:rt});return R?null:gt.createElement("div",{className:Ei(["react-flow__node",`react-flow__node-${r}`,{[K]:q},H,{selected:m,selectable:G,parent:N,dragging:vn}]),ref:nt,style:{zIndex:U,transform:`translate(${d}px,${g}px)`,pointerEvents:Dt?"all":"none",visibility:C?"visible":"hidden",...O},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Zt,onMouseMove:$t,onMouseLeave:Ae,onContextMenu:Ne,onClick:De,onDoubleClick:ze,onKeyDown:Y?fe:void 0,tabIndex:Y?0:void 0,role:Y?"button":void 0,"aria-describedby":j?void 0:`${kS}-${X}`,"aria-label":tt},gt.createElement(_2,{value:n},gt.createElement(e,{id:n,data:a,type:r,xPos:l,yPos:c,selected:m,isConnectable:B,sourcePosition:M,targetPosition:b,dragging:vn,dragHandle:P,zIndex:U})))};return t.displayName="NodeWrapper",W.memo(t)};const rD=e=>{const t=e.getNodes().filter(n=>n.selected);return{...jp(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function sD({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=fn(),{width:a,height:l,x:c,y:d,transformString:g,userSelectionActive:m}=xe(rD,Pn),y=YS(),v=W.useRef(null);if(W.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),$S({nodeRef:v}),m||!a||!l)return null;const T=e?k=>{const L=r.getState().getNodes().filter(O=>O.selected);e(k,L)}:void 0,A=k=>{Object.prototype.hasOwnProperty.call(Xo,k.key)&&y({x:Xo[k.key].x,y:Xo[k.key].y,isShiftPressed:k.shiftKey})};return gt.createElement("div",{className:Ei(["react-flow__nodesselection","react-flow__container",t]),style:{transform:g}},gt.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:T,tabIndex:n?void 0:-1,onKeyDown:n?void 0:A,style:{width:a,height:l,top:d,left:c}}))}var aD=W.memo(sD);const oD=e=>e.nodesSelectionActive,KS=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,deleteKeyCode:d,onMove:g,onMoveStart:m,onMoveEnd:y,selectionKeyCode:v,selectionOnDrag:T,selectionMode:A,onSelectionStart:k,onSelectionEnd:L,multiSelectionKeyCode:O,panActivationKeyCode:H,zoomActivationKeyCode:q,elementsSelectable:G,zoomOnScroll:B,zoomOnPinch:Y,panOnScroll:rt,panOnScrollSpeed:M,panOnScrollMode:b,zoomOnDoubleClick:R,panOnDrag:V,defaultViewport:P,translateExtent:U,minZoom:N,maxZoom:D,preventScrolling:K,onSelectionContextMenu:C,noWheelClassName:j,noPanClassName:tt,disableKeyboardA11y:X})=>{const x=xe(oD),$=Yu(v),nt=Yu(H),st=nt||V,ct=nt||rt,pt=$||T&&st!==!0;return $2({deleteKeyCode:d,multiSelectionKeyCode:O}),gt.createElement(Q2,{onMove:g,onMoveStart:m,onMoveEnd:y,onPaneContextMenu:l,elementsSelectable:G,zoomOnScroll:B,zoomOnPinch:Y,panOnScroll:ct,panOnScrollSpeed:M,panOnScrollMode:b,zoomOnDoubleClick:R,panOnDrag:!$&&st,defaultViewport:P,translateExtent:U,minZoom:N,maxZoom:D,zoomActivationKeyCode:q,preventScrolling:K,noWheelClassName:j,noPanClassName:tt},gt.createElement(FS,{onSelectionStart:k,onSelectionEnd:L,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:st,isSelecting:!!pt,selectionMode:A},e,x&&gt.createElement(aD,{onSelectionContextMenu:C,noPanClassName:tt,disableKeyboardA11y:X})))};KS.displayName="FlowRenderer";var lD=W.memo(KS);function uD(e){return xe(W.useCallback(n=>e?wS(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function cD(e){const t={input:Iu(e.input||DS),default:Iu(e.default||ep),output:Iu(e.output||MS),group:Iu(e.group||$p)},n={},r=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,l)=>(a[l]=Iu(e[l]||ep),a),n);return{...t,...r}}const hD=({x:e,y:t,width:n,height:r,origin:a})=>!n||!r?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-n*a[0],y:t-r*a[1]},fD=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),XS=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:a,updateNodeDimensions:l,onError:c}=xe(fD,Pn),d=uD(e.onlyRenderVisibleElements),g=W.useRef(),m=W.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(v=>{const T=v.map(A=>({id:A.target.getAttribute("data-id"),nodeElement:A.target,forceUpdate:!0}));l(T)});return g.current=y,y},[]);return W.useEffect(()=>()=>{g?.current?.disconnect()},[]),gt.createElement("div",{className:"react-flow__nodes",style:Yp},d.map(y=>{let v=y.type||"default";e.nodeTypes[v]||(c?.("003",qr.error003(v)),v="default");const T=e.nodeTypes[v]||e.nodeTypes.default,A=!!(y.draggable||t&&typeof y.draggable>"u"),k=!!(y.selectable||a&&typeof y.selectable>"u"),L=!!(y.connectable||n&&typeof y.connectable>"u"),O=!!(y.focusable||r&&typeof y.focusable>"u"),H=e.nodeExtent?Up(y.positionAbsolute,e.nodeExtent):y.positionAbsolute,q=H?.x??0,G=H?.y??0,B=hD({x:q,y:G,width:y.width??0,height:y.height??0,origin:e.nodeOrigin});return gt.createElement(T,{key:y.id,id:y.id,className:y.className,style:y.style,type:v,data:y.data,sourcePosition:y.sourcePosition||bt.Bottom,targetPosition:y.targetPosition||bt.Top,hidden:y.hidden,xPos:q,yPos:G,xPosOrigin:B.x,yPosOrigin:B.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!y.selected,isDraggable:A,isSelectable:k,isConnectable:L,isFocusable:O,resizeObserver:m,dragHandle:y.dragHandle,zIndex:y[Se]?.z??0,isParent:!!y[Se]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!y.width&&!!y.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[Se]?.handleBounds})}))};XS.displayName="NodeRenderer";var dD=W.memo(XS);const gD=(e,t,n)=>n===bt.Left?e-t:n===bt.Right?e+t:e,mD=(e,t,n)=>n===bt.Top?e-t:n===bt.Bottom?e+t:e,QE="react-flow__edgeupdater",ZE=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d})=>gt.createElement("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:Ei([QE,`${QE}-${d}`]),cx:gD(t,r,e),cy:mD(n,r,e),r,stroke:"transparent",fill:"transparent"}),pD=()=>!0;var Lo=e=>{const t=({id:n,className:r,type:a,data:l,onClick:c,onEdgeDoubleClick:d,selected:g,animated:m,label:y,labelStyle:v,labelShowBg:T,labelBgStyle:A,labelBgPadding:k,labelBgBorderRadius:L,style:O,source:H,target:q,sourceX:G,sourceY:B,targetX:Y,targetY:rt,sourcePosition:M,targetPosition:b,elementsSelectable:R,hidden:V,sourceHandleId:P,targetHandleId:U,onContextMenu:N,onMouseEnter:D,onMouseMove:K,onMouseLeave:C,reconnectRadius:j,onReconnect:tt,onReconnectStart:X,onReconnectEnd:x,markerEnd:$,markerStart:nt,rfId:st,ariaLabel:ct,isFocusable:pt,isReconnectable:yt,pathOptions:Dt,interactionWidth:At,disableKeyboardA11y:Zt})=>{const $t=W.useRef(null),[Ae,Ne]=W.useState(!1),[ze,De]=W.useState(!1),fe=fn(),vn=W.useMemo(()=>`url('#${Jm(nt,st)}')`,[nt,st]),Ut=W.useMemo(()=>`url('#${Jm($,st)}')`,[$,st]);if(V)return null;const St=Me=>{const{edges:Ke,addSelectedEdges:Tn,unselectNodesAndEdges:wn,multiSelectionActive:Xe}=fe.getState(),nn=Ke.find(Sn=>Sn.id===n);nn&&(R&&(fe.setState({nodesSelectionActive:!1}),nn.selected&&Xe?(wn({nodes:[],edges:[nn]}),$t.current?.blur()):Tn([n])),c&&c(Me,nn))},Be=bu(n,fe.getState,d),Cn=bu(n,fe.getState,N),Ln=bu(n,fe.getState,D),Pi=bu(n,fe.getState,K),Un=bu(n,fe.getState,C),En=(Me,Ke)=>{if(Me.button!==0)return;const{edges:Tn,isValidConnection:wn}=fe.getState(),Xe=Ke?q:H,nn=(Ke?U:P)||null,Sn=Ke?"target":"source",fr=wn||pD,dr=Ke,wi=Tn.find(Bn=>Bn.id===n);De(!0),X?.(Me,wi,Sn);const zn=Bn=>{De(!1),x?.(Bn,wi,Sn)};IS({event:Me,handleId:nn,nodeId:Xe,onConnect:Bn=>tt?.(wi,Bn),isTarget:dr,getState:fe.getState,setState:fe.setState,isValidConnection:fr,edgeUpdaterType:Sn,onReconnectEnd:zn})},Ti=Me=>En(Me,!0),te=Me=>En(Me,!1),Ht=()=>Ne(!0),Oe=()=>Ne(!1),pe=!R&&!c,Li=Me=>{if(!Zt&&gS.includes(Me.key)&&R){const{unselectNodesAndEdges:Ke,addSelectedEdges:Tn,edges:wn}=fe.getState();Me.key==="Escape"?($t.current?.blur(),Ke({edges:[wn.find(nn=>nn.id===n)]})):Tn([n])}};return gt.createElement("g",{className:Ei(["react-flow__edge",`react-flow__edge-${a}`,r,{selected:g,animated:m,inactive:pe,updating:Ae}]),onClick:St,onDoubleClick:Be,onContextMenu:Cn,onMouseEnter:Ln,onMouseMove:Pi,onMouseLeave:Un,onKeyDown:pt?Li:void 0,tabIndex:pt?0:void 0,role:pt?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ct===null?void 0:ct||`Edge from ${H} to ${q}`,"aria-describedby":pt?`${PS}-${st}`:void 0,ref:$t},!ze&&gt.createElement(e,{id:n,source:H,target:q,selected:g,animated:m,label:y,labelStyle:v,labelShowBg:T,labelBgStyle:A,labelBgPadding:k,labelBgBorderRadius:L,data:l,style:O,sourceX:G,sourceY:B,targetX:Y,targetY:rt,sourcePosition:M,targetPosition:b,sourceHandleId:P,targetHandleId:U,markerStart:vn,markerEnd:Ut,pathOptions:Dt,interactionWidth:At}),yt&&gt.createElement(gt.Fragment,null,(yt==="source"||yt===!0)&&gt.createElement(ZE,{position:M,centerX:G,centerY:B,radius:j,onMouseDown:Ti,onMouseEnter:Ht,onMouseOut:Oe,type:"source"}),(yt==="target"||yt===!0)&&gt.createElement(ZE,{position:b,centerX:Y,centerY:rt,radius:j,onMouseDown:te,onMouseEnter:Ht,onMouseOut:Oe,type:"target"})))};return t.displayName="EdgeWrapper",W.memo(t)};function yD(e){const t={default:Lo(e.default||Ef),straight:Lo(e.bezier||qp),step:Lo(e.step||Hp),smoothstep:Lo(e.step||$f),simplebezier:Lo(e.simplebezier||Bp)},n={},r=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,l)=>(a[l]=Lo(e[l]||Ef),a),n);return{...t,...r}}function WE(e,t,n=null){const r=(n?.x||0)+t.x,a=(n?.y||0)+t.y,l=n?.width||t.width,c=n?.height||t.height;switch(e){case bt.Top:return{x:r+l/2,y:a};case bt.Right:return{x:r+l,y:a+c/2};case bt.Bottom:return{x:r+l/2,y:a+c};case bt.Left:return{x:r,y:a+c/2}}}function JE(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const _D=(e,t,n,r,a,l)=>{const c=WE(n,e,t),d=WE(l,r,a);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y}};function vD({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:a,targetHeight:l,width:c,height:d,transform:g}){const m={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+a),y2:Math.max(e.y+r,t.y+l)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const y=zp({x:(0-g[0])/g[2],y:(0-g[1])/g[2],width:c/g[2],height:d/g[2]}),v=Math.max(0,Math.min(y.x2,m.x2)-Math.max(y.x,m.x)),T=Math.max(0,Math.min(y.y2,m.y2)-Math.max(y.y,m.y));return Math.ceil(v*T)>0}function tT(e){const t=e?.[Se]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const ED=[{level:0,isMaxLevel:!0,edges:[]}];function TD(e,t,n=!1){let r=-1;const a=e.reduce((c,d)=>{const g=vi(d.zIndex);let m=g?d.zIndex:0;if(n){const y=t.get(d.target),v=t.get(d.source),T=d.selected||y?.selected||v?.selected,A=Math.max(v?.[Se]?.z||0,y?.[Se]?.z||0,1e3);m=(g?d.zIndex:0)+(T?A:0)}return c[m]?c[m].push(d):c[m]=[d],r=m>r?m:r,c},{}),l=Object.entries(a).map(([c,d])=>{const g=+c;return{edges:d,level:g,isMaxLevel:g===r}});return l.length===0?ED:l}function wD(e,t,n){const r=xe(W.useCallback(a=>e?a.edges.filter(l=>{const c=t.get(l.source),d=t.get(l.target);return c?.width&&c?.height&&d?.width&&d?.height&&vD({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:d.width,targetHeight:d.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return TD(r,t,n)}const SD=({color:e="none",strokeWidth:t=1})=>gt.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),AD=({color:e="none",strokeWidth:t=1})=>gt.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),eT={[vf.Arrow]:SD,[vf.ArrowClosed]:AD};function bD(e){const t=fn();return W.useMemo(()=>Object.prototype.hasOwnProperty.call(eT,e)?eT[e]:(t.getState().onError?.("009",qr.error009(e)),null),[e])}const RD=({id:e,type:t,color:n,width:r=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const g=bD(t);return g?gt.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0"},gt.createElement(g,{color:n,strokeWidth:c})):null},ID=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((a,l)=>([l.markerStart,l.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const d=Jm(c,t);r.includes(d)||(a.push({id:d,color:c.color||e,...c}),r.push(d))}}),a),[]).sort((a,l)=>a.id.localeCompare(l.id))},QS=({defaultColor:e,rfId:t})=>{const n=xe(W.useCallback(ID({defaultColor:e,rfId:t}),[e,t]),(r,a)=>!(r.length!==a.length||r.some((l,c)=>l.id!==a[c].id)));return gt.createElement("defs",null,n.map(r=>gt.createElement(RD,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};QS.displayName="MarkerDefinitions";var CD=W.memo(QS);const xD=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),ZS=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:a,noPanClassName:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:g,onEdgeMouseLeave:m,onEdgeClick:y,onEdgeDoubleClick:v,onReconnect:T,onReconnectStart:A,onReconnectEnd:k,reconnectRadius:L,children:O,disableKeyboardA11y:H})=>{const{edgesFocusable:q,edgesUpdatable:G,elementsSelectable:B,width:Y,height:rt,connectionMode:M,nodeInternals:b,onError:R}=xe(xD,Pn),V=wD(t,b,n);return Y?gt.createElement(gt.Fragment,null,V.map(({level:P,edges:U,isMaxLevel:N})=>gt.createElement("svg",{key:P,style:{zIndex:P},width:Y,height:rt,className:"react-flow__edges react-flow__container"},N&&gt.createElement(CD,{defaultColor:e,rfId:r}),gt.createElement("g",null,U.map(D=>{const[K,C,j]=tT(b.get(D.source)),[tt,X,x]=tT(b.get(D.target));if(!j||!x)return null;let $=D.type||"default";a[$]||(R?.("011",qr.error011($)),$="default");const nt=a[$]||a.default,st=M===Da.Strict?X.target:(X.target??[]).concat(X.source??[]),ct=JE(C.source,D.sourceHandle),pt=JE(st,D.targetHandle),yt=ct?.position||bt.Bottom,Dt=pt?.position||bt.Top,At=!!(D.focusable||q&&typeof D.focusable>"u"),Zt=D.reconnectable||D.updatable,$t=typeof T<"u"&&(Zt||G&&typeof Zt>"u");if(!ct||!pt)return R?.("008",qr.error008(ct,D)),null;const{sourceX:Ae,sourceY:Ne,targetX:ze,targetY:De}=_D(K,ct,yt,tt,pt,Dt);return gt.createElement(nt,{key:D.id,id:D.id,className:Ei([D.className,l]),type:$,data:D.data,selected:!!D.selected,animated:!!D.animated,hidden:!!D.hidden,label:D.label,labelStyle:D.labelStyle,labelShowBg:D.labelShowBg,labelBgStyle:D.labelBgStyle,labelBgPadding:D.labelBgPadding,labelBgBorderRadius:D.labelBgBorderRadius,style:D.style,source:D.source,target:D.target,sourceHandleId:D.sourceHandle,targetHandleId:D.targetHandle,markerEnd:D.markerEnd,markerStart:D.markerStart,sourceX:Ae,sourceY:Ne,targetX:ze,targetY:De,sourcePosition:yt,targetPosition:Dt,elementsSelectable:B,onContextMenu:c,onMouseEnter:d,onMouseMove:g,onMouseLeave:m,onClick:y,onEdgeDoubleClick:v,onReconnect:T,onReconnectStart:A,onReconnectEnd:k,reconnectRadius:L,rfId:r,ariaLabel:D.ariaLabel,isFocusable:At,isReconnectable:$t,pathOptions:"pathOptions"in D?D.pathOptions:void 0,interactionWidth:D.interactionWidth,disableKeyboardA11y:H})})))),O):null};ZS.displayName="EdgeRenderer";var ND=W.memo(ZS);const DD=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function OD({children:e}){const t=xe(DD);return gt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function MD(e){const t=BS(),n=W.useRef(!1);W.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const VD={[bt.Left]:bt.Right,[bt.Right]:bt.Left,[bt.Top]:bt.Bottom,[bt.Bottom]:bt.Top},WS=({nodeId:e,handleType:t,style:n,type:r=As.Bezier,CustomComponent:a,connectionStatus:l})=>{const{fromNode:c,handleId:d,toX:g,toY:m,connectionMode:y}=xe(W.useCallback(rt=>({fromNode:rt.nodeInternals.get(e),handleId:rt.connectionHandleId,toX:(rt.connectionPosition.x-rt.transform[0])/rt.transform[2],toY:(rt.connectionPosition.y-rt.transform[1])/rt.transform[2],connectionMode:rt.connectionMode}),[e]),Pn),v=c?.[Se]?.handleBounds;let T=v?.[t];if(y===Da.Loose&&(T=T||v?.[t==="source"?"target":"source"]),!c||!T)return null;const A=d?T.find(rt=>rt.id===d):T[0],k=A?A.x+A.width/2:(c.width??0)/2,L=A?A.y+A.height/2:c.height??0,O=(c.positionAbsolute?.x??0)+k,H=(c.positionAbsolute?.y??0)+L,q=A?.position,G=q?VD[q]:null;if(!q||!G)return null;if(a)return gt.createElement(a,{connectionLineType:r,connectionLineStyle:n,fromNode:c,fromHandle:A,fromX:O,fromY:H,toX:g,toY:m,fromPosition:q,toPosition:G,connectionStatus:l});let B="";const Y={sourceX:O,sourceY:H,sourcePosition:q,targetX:g,targetY:m,targetPosition:G};return r===As.Bezier?[B]=vS(Y):r===As.Step?[B]=Wm({...Y,borderRadius:0}):r===As.SmoothStep?[B]=Wm(Y):r===As.SimpleBezier?[B]=_S(Y):B=`M${O},${H} ${g},${m}`,gt.createElement("path",{d:B,fill:"none",className:"react-flow__connection-path",style:n})};WS.displayName="ConnectionLine";const kD=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function PD({containerStyle:e,style:t,type:n,component:r}){const{nodeId:a,handleType:l,nodesConnectable:c,width:d,height:g,connectionStatus:m}=xe(kD,Pn);return!(a&&l&&d&&c)?null:gt.createElement("svg",{style:e,width:d,height:g,className:"react-flow__edges react-flow__connectionline react-flow__container"},gt.createElement("g",{className:Ei(["react-flow__connection",m])},gt.createElement(WS,{nodeId:a,handleType:l,style:t,type:n,CustomComponent:r,connectionStatus:m})))}function nT(e,t){return W.useRef(null),fn(),W.useMemo(()=>t(e),[e])}const JS=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:a,onInit:l,onNodeClick:c,onEdgeClick:d,onNodeDoubleClick:g,onEdgeDoubleClick:m,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:T,onNodeContextMenu:A,onSelectionContextMenu:k,onSelectionStart:L,onSelectionEnd:O,connectionLineType:H,connectionLineStyle:q,connectionLineComponent:G,connectionLineContainerStyle:B,selectionKeyCode:Y,selectionOnDrag:rt,selectionMode:M,multiSelectionKeyCode:b,panActivationKeyCode:R,zoomActivationKeyCode:V,deleteKeyCode:P,onlyRenderVisibleElements:U,elementsSelectable:N,selectNodesOnDrag:D,defaultViewport:K,translateExtent:C,minZoom:j,maxZoom:tt,preventScrolling:X,defaultMarkerColor:x,zoomOnScroll:$,zoomOnPinch:nt,panOnScroll:st,panOnScrollSpeed:ct,panOnScrollMode:pt,zoomOnDoubleClick:yt,panOnDrag:Dt,onPaneClick:At,onPaneMouseEnter:Zt,onPaneMouseMove:$t,onPaneMouseLeave:Ae,onPaneScroll:Ne,onPaneContextMenu:ze,onEdgeContextMenu:De,onEdgeMouseEnter:fe,onEdgeMouseMove:vn,onEdgeMouseLeave:Ut,onReconnect:St,onReconnectStart:Be,onReconnectEnd:Cn,reconnectRadius:Ln,noDragClassName:Pi,noWheelClassName:Un,noPanClassName:En,elevateEdgesOnSelect:Ti,disableKeyboardA11y:te,nodeOrigin:Ht,nodeExtent:Oe,rfId:pe})=>{const Li=nT(e,cD),Me=nT(t,yD);return MD(l),gt.createElement(lD,{onPaneClick:At,onPaneMouseEnter:Zt,onPaneMouseMove:$t,onPaneMouseLeave:Ae,onPaneContextMenu:ze,onPaneScroll:Ne,deleteKeyCode:P,selectionKeyCode:Y,selectionOnDrag:rt,selectionMode:M,onSelectionStart:L,onSelectionEnd:O,multiSelectionKeyCode:b,panActivationKeyCode:R,zoomActivationKeyCode:V,elementsSelectable:N,onMove:n,onMoveStart:r,onMoveEnd:a,zoomOnScroll:$,zoomOnPinch:nt,zoomOnDoubleClick:yt,panOnScroll:st,panOnScrollSpeed:ct,panOnScrollMode:pt,panOnDrag:Dt,defaultViewport:K,translateExtent:C,minZoom:j,maxZoom:tt,onSelectionContextMenu:k,preventScrolling:X,noDragClassName:Pi,noWheelClassName:Un,noPanClassName:En,disableKeyboardA11y:te},gt.createElement(OD,null,gt.createElement(ND,{edgeTypes:Me,onEdgeClick:d,onEdgeDoubleClick:m,onlyRenderVisibleElements:U,onEdgeContextMenu:De,onEdgeMouseEnter:fe,onEdgeMouseMove:vn,onEdgeMouseLeave:Ut,onReconnect:St,onReconnectStart:Be,onReconnectEnd:Cn,reconnectRadius:Ln,defaultMarkerColor:x,noPanClassName:En,elevateEdgesOnSelect:!!Ti,disableKeyboardA11y:te,rfId:pe},gt.createElement(PD,{style:q,type:H,component:G,containerStyle:B})),gt.createElement("div",{className:"react-flow__edgelabel-renderer"}),gt.createElement(dD,{nodeTypes:Li,onNodeClick:c,onNodeDoubleClick:g,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:T,onNodeContextMenu:A,selectNodesOnDrag:D,onlyRenderVisibleElements:U,noPanClassName:En,noDragClassName:Pi,disableKeyboardA11y:te,nodeOrigin:Ht,nodeExtent:Oe,rfId:pe})))};JS.displayName="GraphView";var LD=W.memo(JS);const ip=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Es={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:ip,nodeExtent:ip,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Da.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:f2,isValidConnection:void 0},UD=()=>AI((e,t)=>({...Es,setNodes:n=>{const{nodeInternals:r,nodeOrigin:a,elevateNodesOnSelect:l}=t();e({nodeInternals:Rm(n,r,a,l)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(a=>({...r,...a}))})},setDefaultNodesAndEdges:(n,r)=>{const a=typeof n<"u",l=typeof r<"u",c=a?Rm(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:c,edges:l?r:[],hasDefaultNodes:a,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:a,fitViewOnInit:l,fitViewOnInitDone:c,fitViewOnInitOptions:d,domNode:g,nodeOrigin:m}=t(),y=g?.querySelector(".react-flow__viewport");if(!y)return;const v=window.getComputedStyle(y),{m22:T}=new window.DOMMatrixReadOnly(v.transform),A=n.reduce((L,O)=>{const H=a.get(O.id);if(H?.hidden)a.set(H.id,{...H,[Se]:{...H[Se],handleBounds:void 0}});else if(H){const q=Lp(O.nodeElement);!!(q.width&&q.height&&(H.width!==q.width||H.height!==q.height||O.forceUpdate))&&(a.set(H.id,{...H,[Se]:{...H[Se],handleBounds:{source:XE(".source",O.nodeElement,T,m),target:XE(".target",O.nodeElement,T,m)}},...q}),L.push({id:H.id,type:"dimensions",dimensions:q}))}return L},[]);US(a,m);const k=c||l&&!c&&zS(t,{initial:!0,...d});e({nodeInternals:new Map(a),fitViewOnInitDone:k}),A?.length>0&&r?.(A)},updateNodePositions:(n,r=!0,a=!1)=>{const{triggerNodeChanges:l}=t(),c=n.map(d=>{const g={id:d.id,type:"position",dragging:a};return r&&(g.positionAbsolute=d.positionAbsolute,g.position=d.position),g});l(c)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:a,hasDefaultNodes:l,nodeOrigin:c,getNodes:d,elevateNodesOnSelect:g}=t();if(n?.length){if(l){const m=qS(n,d()),y=Rm(m,a,c,g);e({nodeInternals:y})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:a,getNodes:l}=t();let c,d=null;r?c=n.map(g=>Ss(g,!0)):(c=Fo(l(),n),d=Fo(a,[])),qh({changedNodes:c,changedEdges:d,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:a,getNodes:l}=t();let c,d=null;r?c=n.map(g=>Ss(g,!0)):(c=Fo(a,n),d=Fo(l(),[])),qh({changedNodes:d,changedEdges:c,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:a,getNodes:l}=t(),c=n||l(),d=r||a,g=c.map(y=>(y.selected=!1,Ss(y.id,!1))),m=d.map(y=>Ss(y.id,!1));qh({changedNodes:g,changedEdges:m,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:a}=t();r?.scaleExtent([n,a]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:a}=t();r?.scaleExtent([a,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),l=r().filter(d=>d.selected).map(d=>Ss(d.id,!1)),c=n.filter(d=>d.selected).map(d=>Ss(d.id,!1));qh({changedNodes:l,changedEdges:c,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(a=>{a.positionAbsolute=Up(a.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:a,height:l,d3Zoom:c,d3Selection:d,translateExtent:g}=t();if(!c||!d||!n.x&&!n.y)return!1;const m=Ns.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),y=[[0,0],[a,l]],v=c?.constrain()(m,y,g);return c.transform(d,v),r[0]!==v.x||r[1]!==v.y||r[2]!==v.k},cancelConnection:()=>e({connectionNodeId:Es.connectionNodeId,connectionHandleId:Es.connectionHandleId,connectionHandleType:Es.connectionHandleType,connectionStatus:Es.connectionStatus,connectionStartHandle:Es.connectionStartHandle,connectionEndHandle:Es.connectionEndHandle}),reset:()=>e({...Es})}),Object.is),tA=({children:e})=>{const t=W.useRef(null);return t.current||(t.current=UD()),gt.createElement(i2,{value:t.current},e)};tA.displayName="ReactFlowProvider";const eA=({children:e})=>W.useContext(Gf)?gt.createElement(gt.Fragment,null,e):gt.createElement(tA,null,e);eA.displayName="ReactFlowWrapper";const zD={input:DS,default:ep,output:MS,group:$p},BD={default:Ef,straight:qp,step:Hp,smoothstep:$f,simplebezier:Bp},HD=[0,0],qD=[15,15],FD={x:0,y:0,zoom:1},jD={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},GD=W.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:a,nodeTypes:l=zD,edgeTypes:c=BD,onNodeClick:d,onEdgeClick:g,onInit:m,onMove:y,onMoveStart:v,onMoveEnd:T,onConnect:A,onConnectStart:k,onConnectEnd:L,onClickConnectStart:O,onClickConnectEnd:H,onNodeMouseEnter:q,onNodeMouseMove:G,onNodeMouseLeave:B,onNodeContextMenu:Y,onNodeDoubleClick:rt,onNodeDragStart:M,onNodeDrag:b,onNodeDragStop:R,onNodesDelete:V,onEdgesDelete:P,onSelectionChange:U,onSelectionDragStart:N,onSelectionDrag:D,onSelectionDragStop:K,onSelectionContextMenu:C,onSelectionStart:j,onSelectionEnd:tt,connectionMode:X=Da.Strict,connectionLineType:x=As.Bezier,connectionLineStyle:$,connectionLineComponent:nt,connectionLineContainerStyle:st,deleteKeyCode:ct="Backspace",selectionKeyCode:pt="Shift",selectionOnDrag:yt=!1,selectionMode:Dt=$u.Full,panActivationKeyCode:At="Space",multiSelectionKeyCode:Zt=_f()?"Meta":"Control",zoomActivationKeyCode:$t=_f()?"Meta":"Control",snapToGrid:Ae=!1,snapGrid:Ne=qD,onlyRenderVisibleElements:ze=!1,selectNodesOnDrag:De=!0,nodesDraggable:fe,nodesConnectable:vn,nodesFocusable:Ut,nodeOrigin:St=HD,edgesFocusable:Be,edgesUpdatable:Cn,elementsSelectable:Ln,defaultViewport:Pi=FD,minZoom:Un=.5,maxZoom:En=2,translateExtent:Ti=ip,preventScrolling:te=!0,nodeExtent:Ht,defaultMarkerColor:Oe="#b1b1b7",zoomOnScroll:pe=!0,zoomOnPinch:Li=!0,panOnScroll:Me=!1,panOnScrollSpeed:Ke=.5,panOnScrollMode:Tn=Ia.Free,zoomOnDoubleClick:wn=!0,panOnDrag:Xe=!0,onPaneClick:nn,onPaneMouseEnter:Sn,onPaneMouseMove:fr,onPaneMouseLeave:dr,onPaneScroll:wi,onPaneContextMenu:zn,children:ei,onEdgeContextMenu:Bn,onEdgeDoubleClick:ni,onEdgeMouseEnter:Ks,onEdgeMouseMove:Ui,onEdgeMouseLeave:Kr,onEdgeUpdate:zi,onEdgeUpdateStart:Fa,onEdgeUpdateEnd:ce,onReconnect:be,onReconnectStart:Ee,onReconnectEnd:xn,reconnectRadius:Xs=10,edgeUpdaterRadius:wl=10,onNodesChange:Bi,onEdgesChange:ja,noDragClassName:gr="nodrag",noWheelClassName:Hi="nowheel",noPanClassName:ii="nopan",fitView:ri=!1,fitViewOptions:si,connectOnClick:rn=!0,attributionPosition:ye,proOptions:Qs,defaultEdgeOptions:Xr,elevateNodesOnSelect:Hn=!0,elevateEdgesOnSelect:Si=!1,disableKeyboardA11y:Zs=!1,autoPanOnConnect:Ga=!0,autoPanOnNodeDrag:mr=!0,connectionRadius:$a=20,isValidConnection:qi,onError:ai,style:He,id:Fi,nodeDragThreshold:Ya,...Ai},Qr)=>{const ji=Fi||"1";return gt.createElement("div",{...Ai,style:{...He,...jD},ref:Qr,className:Ei(["react-flow",a]),"data-testid":"rf__wrapper",id:Fi},gt.createElement(eA,null,gt.createElement(LD,{onInit:m,onMove:y,onMoveStart:v,onMoveEnd:T,onNodeClick:d,onEdgeClick:g,onNodeMouseEnter:q,onNodeMouseMove:G,onNodeMouseLeave:B,onNodeContextMenu:Y,onNodeDoubleClick:rt,nodeTypes:l,edgeTypes:c,connectionLineType:x,connectionLineStyle:$,connectionLineComponent:nt,connectionLineContainerStyle:st,selectionKeyCode:pt,selectionOnDrag:yt,selectionMode:Dt,deleteKeyCode:ct,multiSelectionKeyCode:Zt,panActivationKeyCode:At,zoomActivationKeyCode:$t,onlyRenderVisibleElements:ze,selectNodesOnDrag:De,defaultViewport:Pi,translateExtent:Ti,minZoom:Un,maxZoom:En,preventScrolling:te,zoomOnScroll:pe,zoomOnPinch:Li,zoomOnDoubleClick:wn,panOnScroll:Me,panOnScrollSpeed:Ke,panOnScrollMode:Tn,panOnDrag:Xe,onPaneClick:nn,onPaneMouseEnter:Sn,onPaneMouseMove:fr,onPaneMouseLeave:dr,onPaneScroll:wi,onPaneContextMenu:zn,onSelectionContextMenu:C,onSelectionStart:j,onSelectionEnd:tt,onEdgeContextMenu:Bn,onEdgeDoubleClick:ni,onEdgeMouseEnter:Ks,onEdgeMouseMove:Ui,onEdgeMouseLeave:Kr,onReconnect:be??zi,onReconnectStart:Ee??Fa,onReconnectEnd:xn??ce,reconnectRadius:Xs??wl,defaultMarkerColor:Oe,noDragClassName:gr,noWheelClassName:Hi,noPanClassName:ii,elevateEdgesOnSelect:Si,rfId:ji,disableKeyboardA11y:Zs,nodeOrigin:St,nodeExtent:Ht}),gt.createElement(V2,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:A,onConnectStart:k,onConnectEnd:L,onClickConnectStart:O,onClickConnectEnd:H,nodesDraggable:fe,nodesConnectable:vn,nodesFocusable:Ut,edgesFocusable:Be,edgesUpdatable:Cn,elementsSelectable:Ln,elevateNodesOnSelect:Hn,minZoom:Un,maxZoom:En,nodeExtent:Ht,onNodesChange:Bi,onEdgesChange:ja,snapToGrid:Ae,snapGrid:Ne,connectionMode:X,translateExtent:Ti,connectOnClick:rn,defaultEdgeOptions:Xr,fitView:ri,fitViewOptions:si,onNodesDelete:V,onEdgesDelete:P,onNodeDragStart:M,onNodeDrag:b,onNodeDragStop:R,onSelectionDrag:D,onSelectionDragStart:N,onSelectionDragStop:K,noPanClassName:ii,nodeOrigin:St,rfId:ji,autoPanOnConnect:Ga,autoPanOnNodeDrag:mr,onError:ai,connectionRadius:$a,isValidConnection:qi,nodeDragThreshold:Ya}),gt.createElement(O2,{onSelectionChange:U}),ei,gt.createElement(a2,{proOptions:Qs,position:ye}),gt.createElement(z2,{rfId:ji,disableKeyboardA11y:Zs})))});GD.displayName="ReactFlow";function nA(e){return t=>{const[n,r]=W.useState(t),a=W.useCallback(l=>r(c=>e(l,c)),[]);return[n,r,a]}}const $D=nA(qS),YD=nA(J2),KD=()=>{};var iT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=a&63|128):(a&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=a&63|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=a&63|128)}return t},XD=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=e[n++];t[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=e[n++],c=e[n++],d=e[n++],g=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const l=e[n++],c=e[n++];t[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},rA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<e.length;a+=3){const l=e[a],c=a+1<e.length,d=c?e[a+1]:0,g=a+2<e.length,m=g?e[a+2]:0,y=l>>2,v=(l&3)<<4|d>>4;let T=(d&15)<<2|m>>6,A=m&63;g||(A=64,c||(T=64)),r.push(n[y],n[v],n[T],n[A])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(iA(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):XD(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<e.length;){const l=n[e.charAt(a++)],d=a<e.length?n[e.charAt(a)]:0;++a;const m=a<e.length?n[e.charAt(a)]:64;++a;const v=a<e.length?n[e.charAt(a)]:64;if(++a,l==null||d==null||m==null||v==null)throw new QD;const T=l<<2|d>>4;if(r.push(T),m!==64){const A=d<<4&240|m>>2;if(r.push(A),v!==64){const k=m<<6&192|v;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class QD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZD=function(e){const t=iA(e);return rA.encodeByteArray(t,!0)},wf=function(e){return ZD(e).replace(/\./g,"")},sA=function(e){try{return rA.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=()=>WD().__FIREBASE_DEFAULTS__,tO=()=>{if(typeof process>"u"||typeof iT>"u")return;const e=iT.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},eO=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&sA(e[1]);return t&&JSON.parse(t)},Yf=()=>{try{return KD()||JD()||tO()||eO()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},aA=e=>{var t,n;return(n=(t=Yf())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},nO=e=>{const t=aA(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},oA=()=>{var e;return(e=Yf())===null||e===void 0?void 0:e.config},lA=e=>{var t;return(t=Yf())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(e){return e.endsWith(".cloudworkstations.dev")}async function uA(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",a=e.iat||0,l=e.sub||e.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},e);return[wf(JSON.stringify(n)),wf(JSON.stringify(c)),""].join(".")}const ku={};function sO(){const e={prod:[],emulator:[]};for(const t of Object.keys(ku))ku[t]?e.emulator.push(t):e.prod.push(t);return e}function aO(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let rT=!1;function cA(e,t){if(typeof window>"u"||typeof document>"u"||!dl(window.location.host)||ku[e]===t||ku[e]||rT)return;ku[e]=t;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",l=sO().prod.length>0;function c(){const T=document.getElementById(r);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,A){T.setAttribute("width","24"),T.setAttribute("id",A),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{rT=!0,c()},T}function y(T,A){T.setAttribute("id",A),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=aO(r),A=n("text"),k=document.getElementById(A)||document.createElement("span"),L=n("learnmore"),O=document.getElementById(L)||document.createElement("a"),H=n("preprendIcon"),q=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const G=T.element;d(G),y(O,L);const B=m();g(q,H),G.append(q,k,O,B),document.body.appendChild(G)}l?(k.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function lO(){var e;const t=(e=Yf())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cO(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function hO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fO(){const e=_n();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function dO(){return!lO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gO(){try{return typeof indexedDB=="object"}catch{return!1}}function mO(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;t(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO="FirebaseError";class Yr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=pO,Object.setPrototypeOf(this,Yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lc.prototype.create)}}class lc{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?yO(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Yr(a,d,r)}}function yO(e,t){return e.replace(_O,(n,r)=>{const a=t[r];return a!=null?String(a):`<${r}?>`})}const _O=/\{\$([^}]+)}/g;function vO(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Oa(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const a of n){if(!r.includes(a))return!1;const l=e[a],c=t[a];if(sT(l)&&sT(c)){if(!Oa(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function sT(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(a=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Nu(e){const t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");t[decodeURIComponent(a)]=decodeURIComponent(l)}}),t}function Du(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function EO(e,t){const n=new TO(e,t);return n.subscribe.bind(n)}class TO{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let a;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wO(t,["next","error","complete"])?a=t:a={next:t,error:n,complete:r},a.next===void 0&&(a.next=Nm),a.error===void 0&&(a.error=Nm),a.complete===void 0&&(a.complete=Nm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wO(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Nm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(e){return e&&e._delegate?e._delegate:e}class Ma{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new iO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t?.identifier),a=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(bO(t))try{this.getOrInitializeService({instanceIdentifier:ba})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(t=ba){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ba){return this.instances.has(t)}getOptions(t=ba){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(t,n){var r;const a=this.normalizeInstanceIdentifier(n),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(t),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&t(c,a),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AO(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ba){return this.component?this.component.multipleInstances?t:ba:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AO(e){return e===ba?void 0:e}function bO(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new SO(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(jt||(jt={}));const IO={debug:jt.DEBUG,verbose:jt.VERBOSE,info:jt.INFO,warn:jt.WARN,error:jt.ERROR,silent:jt.SILENT},CO=jt.INFO,xO={[jt.DEBUG]:"log",[jt.VERBOSE]:"log",[jt.INFO]:"info",[jt.WARN]:"warn",[jt.ERROR]:"error"},NO=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),a=xO[t];if(a)console[a](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Kp{constructor(t){this.name=t,this._logLevel=CO,this._logHandler=NO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in jt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?IO[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,jt.DEBUG,...t),this._logHandler(this,jt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,jt.VERBOSE,...t),this._logHandler(this,jt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,jt.INFO,...t),this._logHandler(this,jt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,jt.WARN,...t),this._logHandler(this,jt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,jt.ERROR,...t),this._logHandler(this,jt.ERROR,...t)}}const DO=(e,t)=>t.some(n=>e instanceof n);let aT,oT;function OO(){return aT||(aT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MO(){return oT||(oT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hA=new WeakMap,rp=new WeakMap,fA=new WeakMap,Dm=new WeakMap,Xp=new WeakMap;function VO(e){const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("success",l),e.removeEventListener("error",c)},l=()=>{n(Os(e.result)),a()},c=()=>{r(e.error),a()};e.addEventListener("success",l),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&hA.set(n,e)}).catch(()=>{}),Xp.set(t,e),t}function kO(e){if(rp.has(e))return;const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("complete",l),e.removeEventListener("error",c),e.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",l),e.addEventListener("error",c),e.addEventListener("abort",c)});rp.set(e,t)}let sp={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return rp.get(e);if(t==="objectStoreNames")return e.objectStoreNames||fA.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Os(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function PO(e){sp=e(sp)}function LO(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Om(this),t,...n);return fA.set(r,t.sort?t.sort():[t]),Os(r)}:MO().includes(e)?function(...t){return e.apply(Om(this),t),Os(hA.get(this))}:function(...t){return Os(e.apply(Om(this),t))}}function UO(e){return typeof e=="function"?LO(e):(e instanceof IDBTransaction&&kO(e),DO(e,OO())?new Proxy(e,sp):e)}function Os(e){if(e instanceof IDBRequest)return VO(e);if(Dm.has(e))return Dm.get(e);const t=UO(e);return t!==e&&(Dm.set(e,t),Xp.set(t,e)),t}const Om=e=>Xp.get(e);function zO(e,t,{blocked:n,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(e,t),d=Os(c);return r&&c.addEventListener("upgradeneeded",g=>{r(Os(c.result),g.oldVersion,g.newVersion,Os(c.transaction),g)}),n&&c.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const BO=["get","getKey","getAll","getAllKeys","count"],HO=["put","add","delete","clear"],Mm=new Map;function lT(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Mm.get(t))return Mm.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=HO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||BO.includes(n)))return;const l=async function(c,...d){const g=this.transaction(c,a?"readwrite":"readonly");let m=g.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),a&&g.done]))[0]};return Mm.set(t,l),l}PO(e=>({...e,get:(t,n,r)=>lT(t,n)||e.get(t,n,r),has:(t,n)=>!!lT(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FO(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function FO(e){const t=e.getComponent();return t?.type==="VERSION"}const ap="@firebase/app",uT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new Kp("@firebase/app"),jO="@firebase/app-compat",GO="@firebase/analytics-compat",$O="@firebase/analytics",YO="@firebase/app-check-compat",KO="@firebase/app-check",XO="@firebase/auth",QO="@firebase/auth-compat",ZO="@firebase/database",WO="@firebase/data-connect",JO="@firebase/database-compat",tM="@firebase/functions",eM="@firebase/functions-compat",nM="@firebase/installations",iM="@firebase/installations-compat",rM="@firebase/messaging",sM="@firebase/messaging-compat",aM="@firebase/performance",oM="@firebase/performance-compat",lM="@firebase/remote-config",uM="@firebase/remote-config-compat",cM="@firebase/storage",hM="@firebase/storage-compat",fM="@firebase/firestore",dM="@firebase/ai",gM="@firebase/firestore-compat",mM="firebase",pM="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="[DEFAULT]",yM={[ap]:"fire-core",[jO]:"fire-core-compat",[$O]:"fire-analytics",[GO]:"fire-analytics-compat",[KO]:"fire-app-check",[YO]:"fire-app-check-compat",[XO]:"fire-auth",[QO]:"fire-auth-compat",[ZO]:"fire-rtdb",[WO]:"fire-data-connect",[JO]:"fire-rtdb-compat",[tM]:"fire-fn",[eM]:"fire-fn-compat",[nM]:"fire-iid",[iM]:"fire-iid-compat",[rM]:"fire-fcm",[sM]:"fire-fcm-compat",[aM]:"fire-perf",[oM]:"fire-perf-compat",[lM]:"fire-rc",[uM]:"fire-rc-compat",[cM]:"fire-gcs",[hM]:"fire-gcs-compat",[fM]:"fire-fst",[gM]:"fire-fst-compat",[dM]:"fire-vertex","fire-js":"fire-js",[mM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=new Map,_M=new Map,lp=new Map;function cT(e,t){try{e.container.addComponent(t)}catch(n){Fr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function sl(e){const t=e.name;if(lp.has(t))return Fr.debug(`There were multiple attempts to register component ${t}.`),!1;lp.set(t,e);for(const n of Sf.values())cT(n,e);for(const n of _M.values())cT(n,e);return!0}function Qp(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function _i(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ms=new lc("app","Firebase",vM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=pM;function dA(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:op,automaticDataCollectionEnabled:!0},t),a=r.name;if(typeof a!="string"||!a)throw Ms.create("bad-app-name",{appName:String(a)});if(n||(n=oA()),!n)throw Ms.create("no-options");const l=Sf.get(a);if(l){if(Oa(n,l.options)&&Oa(r,l.config))return l;throw Ms.create("duplicate-app",{appName:a})}const c=new RO(a);for(const g of lp.values())c.addComponent(g);const d=new EM(n,r,c);return Sf.set(a,d),d}function gA(e=op){const t=Sf.get(e);if(!t&&e===op&&oA())return dA();if(!t)throw Ms.create("no-app",{appName:e});return t}function Vs(e,t,n){var r;let a=(r=yM[e])!==null&&r!==void 0?r:e;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${t}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Fr.warn(d.join(" "));return}sl(new Ma(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM="firebase-heartbeat-database",wM=1,Ku="firebase-heartbeat-store";let Vm=null;function mA(){return Vm||(Vm=zO(TM,wM,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ku)}catch(n){console.warn(n)}}}}).catch(e=>{throw Ms.create("idb-open",{originalErrorMessage:e.message})})),Vm}async function SM(e){try{const n=(await mA()).transaction(Ku),r=await n.objectStore(Ku).get(pA(e));return await n.done,r}catch(t){if(t instanceof Yr)Fr.warn(t.message);else{const n=Ms.create("idb-get",{originalErrorMessage:t?.message});Fr.warn(n.message)}}}async function hT(e,t){try{const r=(await mA()).transaction(Ku,"readwrite");await r.objectStore(Ku).put(t,pA(e)),await r.done}catch(n){if(n instanceof Yr)Fr.warn(n.message);else{const r=Ms.create("idb-set",{originalErrorMessage:n?.message});Fr.warn(r.message)}}}function pA(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=1024,bM=30;class RM{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=fT();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>bM){const c=xM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Fr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fT(),{heartbeatsToSend:r,unsentEntries:a}=IM(this._heartbeatsCache.heartbeats),l=wf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Fr.warn(n),""}}}function fT(){return new Date().toISOString().substring(0,10)}function IM(e,t=AM){const n=[];let r=e.slice();for(const a of e){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),dT(n)>t){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),dT(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class CM{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gO()?mO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await SM(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return hT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return hT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function dT(e){return wf(JSON.stringify({version:2,heartbeats:e})).length}function xM(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(e){sl(new Ma("platform-logger",t=>new qO(t),"PRIVATE")),sl(new Ma("heartbeat",t=>new RM(t),"PRIVATE")),Vs(ap,uT,e),Vs(ap,uT,"esm2017"),Vs("fire-js","")}NM("");var DM="firebase",OM="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vs(DM,OM,"app");var gT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ks,yA;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,b){function R(){}R.prototype=b.prototype,M.D=b.prototype,M.prototype=new R,M.prototype.constructor=M,M.C=function(V,P,U){for(var N=Array(arguments.length-2),D=2;D<arguments.length;D++)N[D-2]=arguments[D];return b.prototype[P].apply(V,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(M,b,R){R||(R=0);var V=Array(16);if(typeof b=="string")for(var P=0;16>P;++P)V[P]=b.charCodeAt(R++)|b.charCodeAt(R++)<<8|b.charCodeAt(R++)<<16|b.charCodeAt(R++)<<24;else for(P=0;16>P;++P)V[P]=b[R++]|b[R++]<<8|b[R++]<<16|b[R++]<<24;b=M.g[0],R=M.g[1],P=M.g[2];var U=M.g[3],N=b+(U^R&(P^U))+V[0]+3614090360&4294967295;b=R+(N<<7&4294967295|N>>>25),N=U+(P^b&(R^P))+V[1]+3905402710&4294967295,U=b+(N<<12&4294967295|N>>>20),N=P+(R^U&(b^R))+V[2]+606105819&4294967295,P=U+(N<<17&4294967295|N>>>15),N=R+(b^P&(U^b))+V[3]+3250441966&4294967295,R=P+(N<<22&4294967295|N>>>10),N=b+(U^R&(P^U))+V[4]+4118548399&4294967295,b=R+(N<<7&4294967295|N>>>25),N=U+(P^b&(R^P))+V[5]+1200080426&4294967295,U=b+(N<<12&4294967295|N>>>20),N=P+(R^U&(b^R))+V[6]+2821735955&4294967295,P=U+(N<<17&4294967295|N>>>15),N=R+(b^P&(U^b))+V[7]+4249261313&4294967295,R=P+(N<<22&4294967295|N>>>10),N=b+(U^R&(P^U))+V[8]+1770035416&4294967295,b=R+(N<<7&4294967295|N>>>25),N=U+(P^b&(R^P))+V[9]+2336552879&4294967295,U=b+(N<<12&4294967295|N>>>20),N=P+(R^U&(b^R))+V[10]+4294925233&4294967295,P=U+(N<<17&4294967295|N>>>15),N=R+(b^P&(U^b))+V[11]+2304563134&4294967295,R=P+(N<<22&4294967295|N>>>10),N=b+(U^R&(P^U))+V[12]+1804603682&4294967295,b=R+(N<<7&4294967295|N>>>25),N=U+(P^b&(R^P))+V[13]+4254626195&4294967295,U=b+(N<<12&4294967295|N>>>20),N=P+(R^U&(b^R))+V[14]+2792965006&4294967295,P=U+(N<<17&4294967295|N>>>15),N=R+(b^P&(U^b))+V[15]+1236535329&4294967295,R=P+(N<<22&4294967295|N>>>10),N=b+(P^U&(R^P))+V[1]+4129170786&4294967295,b=R+(N<<5&4294967295|N>>>27),N=U+(R^P&(b^R))+V[6]+3225465664&4294967295,U=b+(N<<9&4294967295|N>>>23),N=P+(b^R&(U^b))+V[11]+643717713&4294967295,P=U+(N<<14&4294967295|N>>>18),N=R+(U^b&(P^U))+V[0]+3921069994&4294967295,R=P+(N<<20&4294967295|N>>>12),N=b+(P^U&(R^P))+V[5]+3593408605&4294967295,b=R+(N<<5&4294967295|N>>>27),N=U+(R^P&(b^R))+V[10]+38016083&4294967295,U=b+(N<<9&4294967295|N>>>23),N=P+(b^R&(U^b))+V[15]+3634488961&4294967295,P=U+(N<<14&4294967295|N>>>18),N=R+(U^b&(P^U))+V[4]+3889429448&4294967295,R=P+(N<<20&4294967295|N>>>12),N=b+(P^U&(R^P))+V[9]+568446438&4294967295,b=R+(N<<5&4294967295|N>>>27),N=U+(R^P&(b^R))+V[14]+3275163606&4294967295,U=b+(N<<9&4294967295|N>>>23),N=P+(b^R&(U^b))+V[3]+4107603335&4294967295,P=U+(N<<14&4294967295|N>>>18),N=R+(U^b&(P^U))+V[8]+1163531501&4294967295,R=P+(N<<20&4294967295|N>>>12),N=b+(P^U&(R^P))+V[13]+2850285829&4294967295,b=R+(N<<5&4294967295|N>>>27),N=U+(R^P&(b^R))+V[2]+4243563512&4294967295,U=b+(N<<9&4294967295|N>>>23),N=P+(b^R&(U^b))+V[7]+1735328473&4294967295,P=U+(N<<14&4294967295|N>>>18),N=R+(U^b&(P^U))+V[12]+2368359562&4294967295,R=P+(N<<20&4294967295|N>>>12),N=b+(R^P^U)+V[5]+4294588738&4294967295,b=R+(N<<4&4294967295|N>>>28),N=U+(b^R^P)+V[8]+2272392833&4294967295,U=b+(N<<11&4294967295|N>>>21),N=P+(U^b^R)+V[11]+1839030562&4294967295,P=U+(N<<16&4294967295|N>>>16),N=R+(P^U^b)+V[14]+4259657740&4294967295,R=P+(N<<23&4294967295|N>>>9),N=b+(R^P^U)+V[1]+2763975236&4294967295,b=R+(N<<4&4294967295|N>>>28),N=U+(b^R^P)+V[4]+1272893353&4294967295,U=b+(N<<11&4294967295|N>>>21),N=P+(U^b^R)+V[7]+4139469664&4294967295,P=U+(N<<16&4294967295|N>>>16),N=R+(P^U^b)+V[10]+3200236656&4294967295,R=P+(N<<23&4294967295|N>>>9),N=b+(R^P^U)+V[13]+681279174&4294967295,b=R+(N<<4&4294967295|N>>>28),N=U+(b^R^P)+V[0]+3936430074&4294967295,U=b+(N<<11&4294967295|N>>>21),N=P+(U^b^R)+V[3]+3572445317&4294967295,P=U+(N<<16&4294967295|N>>>16),N=R+(P^U^b)+V[6]+76029189&4294967295,R=P+(N<<23&4294967295|N>>>9),N=b+(R^P^U)+V[9]+3654602809&4294967295,b=R+(N<<4&4294967295|N>>>28),N=U+(b^R^P)+V[12]+3873151461&4294967295,U=b+(N<<11&4294967295|N>>>21),N=P+(U^b^R)+V[15]+530742520&4294967295,P=U+(N<<16&4294967295|N>>>16),N=R+(P^U^b)+V[2]+3299628645&4294967295,R=P+(N<<23&4294967295|N>>>9),N=b+(P^(R|~U))+V[0]+4096336452&4294967295,b=R+(N<<6&4294967295|N>>>26),N=U+(R^(b|~P))+V[7]+1126891415&4294967295,U=b+(N<<10&4294967295|N>>>22),N=P+(b^(U|~R))+V[14]+2878612391&4294967295,P=U+(N<<15&4294967295|N>>>17),N=R+(U^(P|~b))+V[5]+4237533241&4294967295,R=P+(N<<21&4294967295|N>>>11),N=b+(P^(R|~U))+V[12]+1700485571&4294967295,b=R+(N<<6&4294967295|N>>>26),N=U+(R^(b|~P))+V[3]+2399980690&4294967295,U=b+(N<<10&4294967295|N>>>22),N=P+(b^(U|~R))+V[10]+4293915773&4294967295,P=U+(N<<15&4294967295|N>>>17),N=R+(U^(P|~b))+V[1]+2240044497&4294967295,R=P+(N<<21&4294967295|N>>>11),N=b+(P^(R|~U))+V[8]+1873313359&4294967295,b=R+(N<<6&4294967295|N>>>26),N=U+(R^(b|~P))+V[15]+4264355552&4294967295,U=b+(N<<10&4294967295|N>>>22),N=P+(b^(U|~R))+V[6]+2734768916&4294967295,P=U+(N<<15&4294967295|N>>>17),N=R+(U^(P|~b))+V[13]+1309151649&4294967295,R=P+(N<<21&4294967295|N>>>11),N=b+(P^(R|~U))+V[4]+4149444226&4294967295,b=R+(N<<6&4294967295|N>>>26),N=U+(R^(b|~P))+V[11]+3174756917&4294967295,U=b+(N<<10&4294967295|N>>>22),N=P+(b^(U|~R))+V[2]+718787259&4294967295,P=U+(N<<15&4294967295|N>>>17),N=R+(U^(P|~b))+V[9]+3951481745&4294967295,M.g[0]=M.g[0]+b&4294967295,M.g[1]=M.g[1]+(P+(N<<21&4294967295|N>>>11))&4294967295,M.g[2]=M.g[2]+P&4294967295,M.g[3]=M.g[3]+U&4294967295}r.prototype.u=function(M,b){b===void 0&&(b=M.length);for(var R=b-this.blockSize,V=this.B,P=this.h,U=0;U<b;){if(P==0)for(;U<=R;)a(this,M,U),U+=this.blockSize;if(typeof M=="string"){for(;U<b;)if(V[P++]=M.charCodeAt(U++),P==this.blockSize){a(this,V),P=0;break}}else for(;U<b;)if(V[P++]=M[U++],P==this.blockSize){a(this,V),P=0;break}}this.h=P,this.o+=b},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var b=1;b<M.length-8;++b)M[b]=0;var R=8*this.o;for(b=M.length-8;b<M.length;++b)M[b]=R&255,R/=256;for(this.u(M),M=Array(16),b=R=0;4>b;++b)for(var V=0;32>V;V+=8)M[R++]=this.g[b]>>>V&255;return M};function l(M,b){var R=d;return Object.prototype.hasOwnProperty.call(R,M)?R[M]:R[M]=b(M)}function c(M,b){this.h=b;for(var R=[],V=!0,P=M.length-1;0<=P;P--){var U=M[P]|0;V&&U==b||(R[P]=U,V=!1)}this.g=R}var d={};function g(M){return-128<=M&&128>M?l(M,function(b){return new c([b|0],0>b?-1:0)}):new c([M|0],0>M?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return v;if(0>M)return O(m(-M));for(var b=[],R=1,V=0;M>=R;V++)b[V]=M/R|0,R*=4294967296;return new c(b,0)}function y(M,b){if(M.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(M.charAt(0)=="-")return O(y(M.substring(1),b));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=m(Math.pow(b,8)),V=v,P=0;P<M.length;P+=8){var U=Math.min(8,M.length-P),N=parseInt(M.substring(P,P+U),b);8>U?(U=m(Math.pow(b,U)),V=V.j(U).add(m(N))):(V=V.j(R),V=V.add(m(N)))}return V}var v=g(0),T=g(1),A=g(16777216);e=c.prototype,e.m=function(){if(L(this))return-O(this).m();for(var M=0,b=1,R=0;R<this.g.length;R++){var V=this.i(R);M+=(0<=V?V:4294967296+V)*b,b*=4294967296}return M},e.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(k(this))return"0";if(L(this))return"-"+O(this).toString(M);for(var b=m(Math.pow(M,6)),R=this,V="";;){var P=B(R,b).g;R=H(R,P.j(b));var U=((0<R.g.length?R.g[0]:R.h)>>>0).toString(M);if(R=P,k(R))return U+V;for(;6>U.length;)U="0"+U;V=U+V}},e.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function k(M){if(M.h!=0)return!1;for(var b=0;b<M.g.length;b++)if(M.g[b]!=0)return!1;return!0}function L(M){return M.h==-1}e.l=function(M){return M=H(this,M),L(M)?-1:k(M)?0:1};function O(M){for(var b=M.g.length,R=[],V=0;V<b;V++)R[V]=~M.g[V];return new c(R,~M.h).add(T)}e.abs=function(){return L(this)?O(this):this},e.add=function(M){for(var b=Math.max(this.g.length,M.g.length),R=[],V=0,P=0;P<=b;P++){var U=V+(this.i(P)&65535)+(M.i(P)&65535),N=(U>>>16)+(this.i(P)>>>16)+(M.i(P)>>>16);V=N>>>16,U&=65535,N&=65535,R[P]=N<<16|U}return new c(R,R[R.length-1]&-2147483648?-1:0)};function H(M,b){return M.add(O(b))}e.j=function(M){if(k(this)||k(M))return v;if(L(this))return L(M)?O(this).j(O(M)):O(O(this).j(M));if(L(M))return O(this.j(O(M)));if(0>this.l(A)&&0>M.l(A))return m(this.m()*M.m());for(var b=this.g.length+M.g.length,R=[],V=0;V<2*b;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(var P=0;P<M.g.length;P++){var U=this.i(V)>>>16,N=this.i(V)&65535,D=M.i(P)>>>16,K=M.i(P)&65535;R[2*V+2*P]+=N*K,q(R,2*V+2*P),R[2*V+2*P+1]+=U*K,q(R,2*V+2*P+1),R[2*V+2*P+1]+=N*D,q(R,2*V+2*P+1),R[2*V+2*P+2]+=U*D,q(R,2*V+2*P+2)}for(V=0;V<b;V++)R[V]=R[2*V+1]<<16|R[2*V];for(V=b;V<2*b;V++)R[V]=0;return new c(R,0)};function q(M,b){for(;(M[b]&65535)!=M[b];)M[b+1]+=M[b]>>>16,M[b]&=65535,b++}function G(M,b){this.g=M,this.h=b}function B(M,b){if(k(b))throw Error("division by zero");if(k(M))return new G(v,v);if(L(M))return b=B(O(M),b),new G(O(b.g),O(b.h));if(L(b))return b=B(M,O(b)),new G(O(b.g),b.h);if(30<M.g.length){if(L(M)||L(b))throw Error("slowDivide_ only works with positive integers.");for(var R=T,V=b;0>=V.l(M);)R=Y(R),V=Y(V);var P=rt(R,1),U=rt(V,1);for(V=rt(V,2),R=rt(R,2);!k(V);){var N=U.add(V);0>=N.l(M)&&(P=P.add(R),U=N),V=rt(V,1),R=rt(R,1)}return b=H(M,P.j(b)),new G(P,b)}for(P=v;0<=M.l(b);){for(R=Math.max(1,Math.floor(M.m()/b.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),U=m(R),N=U.j(b);L(N)||0<N.l(M);)R-=V,U=m(R),N=U.j(b);k(U)&&(U=T),P=P.add(U),M=H(M,N)}return new G(P,M)}e.A=function(M){return B(this,M).h},e.and=function(M){for(var b=Math.max(this.g.length,M.g.length),R=[],V=0;V<b;V++)R[V]=this.i(V)&M.i(V);return new c(R,this.h&M.h)},e.or=function(M){for(var b=Math.max(this.g.length,M.g.length),R=[],V=0;V<b;V++)R[V]=this.i(V)|M.i(V);return new c(R,this.h|M.h)},e.xor=function(M){for(var b=Math.max(this.g.length,M.g.length),R=[],V=0;V<b;V++)R[V]=this.i(V)^M.i(V);return new c(R,this.h^M.h)};function Y(M){for(var b=M.g.length+1,R=[],V=0;V<b;V++)R[V]=M.i(V)<<1|M.i(V-1)>>>31;return new c(R,M.h)}function rt(M,b){var R=b>>5;b%=32;for(var V=M.g.length-R,P=[],U=0;U<V;U++)P[U]=0<b?M.i(U+R)>>>b|M.i(U+R+1)<<32-b:M.i(U+R);return new c(P,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,yA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=y,ks=c}).apply(typeof gT<"u"?gT:typeof self<"u"?self:typeof window<"u"?window:{});var jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _A,Ou,vA,ef,up,EA,TA,wA;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof jh=="object"&&jh];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function a(h,_){if(_)t:{var E=r;h=h.split(".");for(var I=0;I<h.length-1;I++){var Z=h[I];if(!(Z in E))break t;E=E[Z]}h=h[h.length-1],I=E[h],_=_(I),_!=I&&_!=null&&t(E,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var E=0,I=!1,Z={next:function(){if(!I&&E<h.length){var ot=E++;return{value:_(ot,h[ot]),done:!1}}return I=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function m(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,E){return h.call.apply(h.bind,arguments)}function v(h,_,E){if(!h)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var Z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Z,I),h.apply(_,Z)}}return function(){return h.apply(_,arguments)}}function T(h,_,E){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,T.apply(null,arguments)}function A(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var I=E.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function k(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(I,Z,ot){for(var mt=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)mt[Yt-2]=arguments[Yt];return _.prototype[Z].apply(I,mt)}}function L(h){const _=h.length;if(0<_){const E=Array(_);for(let I=0;I<_;I++)E[I]=h[I];return E}return[]}function O(h,_){for(let E=1;E<arguments.length;E++){const I=arguments[E];if(g(I)){const Z=h.length||0,ot=I.length||0;h.length=Z+ot;for(let mt=0;mt<ot;mt++)h[Z+mt]=I[mt]}else h.push(I)}}class H{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function q(h){return/^[\s\xa0]*$/.test(h)}function G(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function B(h){return B[" "](h),h}B[" "]=function(){};var Y=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function rt(h,_,E){for(const I in h)_.call(E,h[I],I,h)}function M(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function b(h){const _={};for(const E in h)_[E]=h[E];return _}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(h,_){let E,I;for(let Z=1;Z<arguments.length;Z++){I=arguments[Z];for(E in I)h[E]=I[E];for(let ot=0;ot<R.length;ot++)E=R[ot],Object.prototype.hasOwnProperty.call(I,E)&&(h[E]=I[E])}}function P(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function U(h){d.setTimeout(()=>{throw h},0)}function N(){var h=X;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class D{constructor(){this.h=this.g=null}add(_,E){const I=K.get();I.set(_,E),this.h?this.h.next=I:this.g=I,this.h=I}}var K=new H(()=>new C,h=>h.reset());class C{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let j,tt=!1,X=new D,x=()=>{const h=d.Promise.resolve(void 0);j=()=>{h.then($)}};var $=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(E){U(E)}var _=K;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}tt=!1};function nt(){this.s=this.s,this.C=this.C}nt.prototype.s=!1,nt.prototype.ma=function(){this.s||(this.s=!0,this.N())},nt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var ct=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,_),d.removeEventListener("test",E,_)}catch{}return h}();function pt(h,_){if(st.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Y){t:{try{B(_.nodeName);var Z=!0;break t}catch{}Z=!1}Z||(_=null)}}else E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement);this.relatedTarget=_,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:yt[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&pt.aa.h.call(this)}}k(pt,st);var yt={2:"touch",3:"pen",4:"mouse"};pt.prototype.h=function(){pt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Dt="closure_listenable_"+(1e6*Math.random()|0),At=0;function Zt(h,_,E,I,Z){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!I,this.ha=Z,this.key=++At,this.da=this.fa=!1}function $t(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ae(h){this.src=h,this.g={},this.h=0}Ae.prototype.add=function(h,_,E,I,Z){var ot=h.toString();h=this.g[ot],h||(h=this.g[ot]=[],this.h++);var mt=ze(h,_,I,Z);return-1<mt?(_=h[mt],E||(_.fa=!1)):(_=new Zt(_,this.src,ot,!!I,Z),_.fa=E,h.push(_)),_};function Ne(h,_){var E=_.type;if(E in h.g){var I=h.g[E],Z=Array.prototype.indexOf.call(I,_,void 0),ot;(ot=0<=Z)&&Array.prototype.splice.call(I,Z,1),ot&&($t(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function ze(h,_,E,I){for(var Z=0;Z<h.length;++Z){var ot=h[Z];if(!ot.da&&ot.listener==_&&ot.capture==!!E&&ot.ha==I)return Z}return-1}var De="closure_lm_"+(1e6*Math.random()|0),fe={};function vn(h,_,E,I,Z){if(Array.isArray(_)){for(var ot=0;ot<_.length;ot++)vn(h,_[ot],E,I,Z);return null}return E=Ti(E),h&&h[Dt]?h.K(_,E,m(I)?!!I.capture:!1,Z):Ut(h,_,E,!1,I,Z)}function Ut(h,_,E,I,Z,ot){if(!_)throw Error("Invalid event type");var mt=m(Z)?!!Z.capture:!!Z,Yt=Un(h);if(Yt||(h[De]=Yt=new Ae(h)),E=Yt.add(_,E,I,mt,ot),E.proxy)return E;if(I=St(),E.proxy=I,I.src=h,I.listener=E,h.addEventListener)ct||(Z=mt),Z===void 0&&(Z=!1),h.addEventListener(_.toString(),I,Z);else if(h.attachEvent)h.attachEvent(Ln(_.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return E}function St(){function h(E){return _.call(h.src,h.listener,E)}const _=Pi;return h}function Be(h,_,E,I,Z){if(Array.isArray(_))for(var ot=0;ot<_.length;ot++)Be(h,_[ot],E,I,Z);else I=m(I)?!!I.capture:!!I,E=Ti(E),h&&h[Dt]?(h=h.i,_=String(_).toString(),_ in h.g&&(ot=h.g[_],E=ze(ot,E,I,Z),-1<E&&($t(ot[E]),Array.prototype.splice.call(ot,E,1),ot.length==0&&(delete h.g[_],h.h--)))):h&&(h=Un(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ze(_,E,I,Z)),(E=-1<h?_[h]:null)&&Cn(E))}function Cn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Dt])Ne(_.i,h);else{var E=h.type,I=h.proxy;_.removeEventListener?_.removeEventListener(E,I,h.capture):_.detachEvent?_.detachEvent(Ln(E),I):_.addListener&&_.removeListener&&_.removeListener(I),(E=Un(_))?(Ne(E,h),E.h==0&&(E.src=null,_[De]=null)):$t(h)}}}function Ln(h){return h in fe?fe[h]:fe[h]="on"+h}function Pi(h,_){if(h.da)h=!0;else{_=new pt(_,this);var E=h.listener,I=h.ha||h.src;h.fa&&Cn(h),h=E.call(I,_)}return h}function Un(h){return h=h[De],h instanceof Ae?h:null}var En="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ti(h){return typeof h=="function"?h:(h[En]||(h[En]=function(_){return h.handleEvent(_)}),h[En])}function te(){nt.call(this),this.i=new Ae(this),this.M=this,this.F=null}k(te,nt),te.prototype[Dt]=!0,te.prototype.removeEventListener=function(h,_,E,I){Be(this,h,_,E,I)};function Ht(h,_){var E,I=h.F;if(I)for(E=[];I;I=I.F)E.push(I);if(h=h.M,I=_.type||_,typeof _=="string")_=new st(_,h);else if(_ instanceof st)_.target=_.target||h;else{var Z=_;_=new st(I,h),V(_,Z)}if(Z=!0,E)for(var ot=E.length-1;0<=ot;ot--){var mt=_.g=E[ot];Z=Oe(mt,I,!0,_)&&Z}if(mt=_.g=h,Z=Oe(mt,I,!0,_)&&Z,Z=Oe(mt,I,!1,_)&&Z,E)for(ot=0;ot<E.length;ot++)mt=_.g=E[ot],Z=Oe(mt,I,!1,_)&&Z}te.prototype.N=function(){if(te.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var E=h.g[_],I=0;I<E.length;I++)$t(E[I]);delete h.g[_],h.h--}}this.F=null},te.prototype.K=function(h,_,E,I){return this.i.add(String(h),_,!1,E,I)},te.prototype.L=function(h,_,E,I){return this.i.add(String(h),_,!0,E,I)};function Oe(h,_,E,I){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var Z=!0,ot=0;ot<_.length;++ot){var mt=_[ot];if(mt&&!mt.da&&mt.capture==E){var Yt=mt.listener,qe=mt.ha||mt.src;mt.fa&&Ne(h.i,mt),Z=Yt.call(qe,I)!==!1&&Z}}return Z&&!I.defaultPrevented}function pe(h,_,E){if(typeof h=="function")E&&(h=T(h,E));else if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Li(h){h.g=pe(()=>{h.g=null,h.i&&(h.i=!1,Li(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Me extends nt{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Li(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ke(h){nt.call(this),this.h=h,this.g={}}k(Ke,nt);var Tn=[];function wn(h){rt(h.g,function(_,E){this.g.hasOwnProperty(E)&&Cn(_)},h),h.g={}}Ke.prototype.N=function(){Ke.aa.N.call(this),wn(this)},Ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xe=d.JSON.stringify,nn=d.JSON.parse,Sn=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function fr(){}fr.prototype.h=null;function dr(h){return h.h||(h.h=h.i())}function wi(){}var zn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ei(){st.call(this,"d")}k(ei,st);function Bn(){st.call(this,"c")}k(Bn,st);var ni={},Ks=null;function Ui(){return Ks=Ks||new te}ni.La="serverreachability";function Kr(h){st.call(this,ni.La,h)}k(Kr,st);function zi(h){const _=Ui();Ht(_,new Kr(_))}ni.STAT_EVENT="statevent";function Fa(h,_){st.call(this,ni.STAT_EVENT,h),this.stat=_}k(Fa,st);function ce(h){const _=Ui();Ht(_,new Fa(_,h))}ni.Ma="timingevent";function be(h,_){st.call(this,ni.Ma,h),this.size=_}k(be,st);function Ee(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function xn(){this.g=!0}xn.prototype.xa=function(){this.g=!1};function Xs(h,_,E,I,Z,ot){h.info(function(){if(h.g)if(ot)for(var mt="",Yt=ot.split("&"),qe=0;qe<Yt.length;qe++){var Kt=Yt[qe].split("=");if(1<Kt.length){var Ze=Kt[0];Kt=Kt[1];var Fe=Ze.split("_");mt=2<=Fe.length&&Fe[1]=="type"?mt+(Ze+"="+Kt+"&"):mt+(Ze+"=redacted&")}}else mt=null;else mt=ot;return"XMLHTTP REQ ("+I+") [attempt "+Z+"]: "+_+`
`+E+`
`+mt})}function wl(h,_,E,I,Z,ot,mt){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+Z+"]: "+_+`
`+E+`
`+ot+" "+mt})}function Bi(h,_,E,I){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+gr(h,E)+(I?" "+I:"")})}function ja(h,_){h.info(function(){return"TIMEOUT: "+_})}xn.prototype.info=function(){};function gr(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var I=E[h];if(!(2>I.length)){var Z=I[1];if(Array.isArray(Z)&&!(1>Z.length)){var ot=Z[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var mt=1;mt<Z.length;mt++)Z[mt]=""}}}}return Xe(E)}catch{return _}}var Hi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ii={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ri;function si(){}k(si,fr),si.prototype.g=function(){return new XMLHttpRequest},si.prototype.i=function(){return{}},ri=new si;function rn(h,_,E,I){this.j=h,this.i=_,this.l=E,this.R=I||1,this.U=new Ke(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ye}function ye(){this.i=null,this.g="",this.h=!1}var Qs={},Xr={};function Hn(h,_,E){h.L=1,h.v=ta(qn(_)),h.m=E,h.P=!0,Si(h,null)}function Si(h,_){h.F=Date.now(),mr(h),h.A=qn(h.v);var E=h.A,I=h.R;Array.isArray(I)||(I=[String(I)]),Cl(E.i,"t",I),h.C=0,E=h.j.J,h.h=new ye,h.g=Dc(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Me(T(h.Y,h,h.g),h.O)),_=h.U,E=h.g,I=h.ca;var Z="readystatechange";Array.isArray(Z)||(Z&&(Tn[0]=Z.toString()),Z=Tn);for(var ot=0;ot<Z.length;ot++){var mt=vn(E,Z[ot],I||_.handleEvent,!1,_.h||_);if(!mt)break;_.g[mt.key]=mt}_=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),zi(),Xs(h.i,h.u,h.A,h.l,h.R,h.m)}rn.prototype.ca=function(h){h=h.target;const _=this.M;_&&ci(h)==3?_.j():this.Y(h)},rn.prototype.Y=function(h){try{if(h==this.g)t:{const Fe=ci(this.g);var _=this.g.Ba();const wr=this.g.Z();if(!(3>Fe)&&(Fe!=3||this.g&&(this.h.h||this.g.oa()||Sc(this.g)))){this.J||Fe!=4||_==7||(_==8||0>=wr?zi(3):zi(2)),qi(this);var E=this.g.Z();this.X=E;e:if(Zs(this)){var I=Sc(this.g);h="";var Z=I.length,ot=ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){He(this),ai(this);var mt="";break e}this.h.i=new d.TextDecoder}for(_=0;_<Z;_++)this.h.h=!0,h+=this.h.i.decode(I[_],{stream:!(ot&&_==Z-1)});I.length=0,this.h.g+=h,this.C=0,mt=this.h.g}else mt=this.g.oa();if(this.o=E==200,wl(this.i,this.u,this.A,this.l,this.R,Fe,E),this.o){if(this.T&&!this.K){e:{if(this.g){var Yt,qe=this.g;if((Yt=qe.g?qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Yt)){var Kt=Yt;break e}}Kt=null}if(E=Kt)Bi(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fi(this,E);else{this.o=!1,this.s=3,ce(12),He(this),ai(this);break t}}if(this.P){E=!0;let sn;for(;!this.J&&this.C<mt.length;)if(sn=Ga(this,mt),sn==Xr){Fe==4&&(this.s=4,ce(14),E=!1),Bi(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==Qs){this.s=4,ce(15),Bi(this.i,this.l,mt,"[Invalid Chunk]"),E=!1;break}else Bi(this.i,this.l,sn,null),Fi(this,sn);if(Zs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||mt.length!=0||this.h.h||(this.s=1,ce(16),E=!1),this.o=this.o&&E,!E)Bi(this.i,this.l,mt,"[Invalid Chunked Response]"),He(this),ai(this);else if(0<mt.length&&!this.W){this.W=!0;var Ze=this.j;Ze.g==this&&Ze.ba&&!Ze.M&&(Ze.j.info("Great, no buffering proxy detected. Bytes received: "+mt.length),la(Ze),Ze.M=!0,ce(11))}}else Bi(this.i,this.l,mt,null),Fi(this,mt);Fe==4&&He(this),this.o&&!this.J&&(Fe==4?Cc(this.j,this):(this.o=!1,mr(this)))}else vd(this.g),E==400&&0<mt.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),He(this),ai(this)}}}catch{}finally{}};function Zs(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Ga(h,_){var E=h.C,I=_.indexOf(`
`,E);return I==-1?Xr:(E=Number(_.substring(E,I)),isNaN(E)?Qs:(I+=1,I+E>_.length?Xr:(_=_.slice(I,I+E),h.C=I+E,_)))}rn.prototype.cancel=function(){this.J=!0,He(this)};function mr(h){h.S=Date.now()+h.I,$a(h,h.I)}function $a(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ee(T(h.ba,h),_)}function qi(h){h.B&&(d.clearTimeout(h.B),h.B=null)}rn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(ja(this.i,this.A),this.L!=2&&(zi(),ce(17)),He(this),this.s=2,ai(this)):$a(this,this.S-h)};function ai(h){h.j.G==0||h.J||Cc(h.j,h)}function He(h){qi(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,wn(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Fi(h,_){try{var E=h.j;if(E.G!=0&&(E.g==h||Sl(E.h,h))){if(!h.K&&Sl(E.h,h)&&E.G==3){try{var I=E.Da.g.parse(_)}catch{I=null}if(Array.isArray(I)&&I.length==3){var Z=I;if(Z[0]==0){t:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)io(E),eo(E);else break t;Ml(E),ce(18)}}else E.za=Z[1],0<E.za-E.T&&37500>Z[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ee(T(E.Za,E),6e3));if(1>=ji(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Tr(E,11)}else if((h.K||E.g==h)&&io(E),!q(_))for(Z=E.Da.g.parse(_),_=0;_<Z.length;_++){let Kt=Z[_];if(E.T=Kt[0],Kt=Kt[1],E.G==2)if(Kt[0]=="c"){E.K=Kt[1],E.ia=Kt[2];const Ze=Kt[3];Ze!=null&&(E.la=Ze,E.j.info("VER="+E.la));const Fe=Kt[4];Fe!=null&&(E.Aa=Fe,E.j.info("SVER="+E.Aa));const wr=Kt[5];wr!=null&&typeof wr=="number"&&0<wr&&(I=1.5*wr,E.L=I,E.j.info("backChannelRequestTimeoutMs_="+I)),I=E;const sn=h.g;if(sn){const Zi=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zi){var ot=I.h;ot.g||Zi.indexOf("spdy")==-1&&Zi.indexOf("quic")==-1&&Zi.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(Ka(ot,ot.h),ot.h=null))}if(I.D){const kl=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;kl&&(I.ya=kl,se(I.I,I.D,kl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),I=E;var mt=h;if(I.qa=Nc(I,I.J?I.ia:null,I.W),mt.K){An(I.h,mt);var Yt=mt,qe=I.L;qe&&(Yt.I=qe),Yt.B&&(qi(Yt),mr(Yt)),I.g=mt}else Rc(I);0<E.i.length&&no(E)}else Kt[0]!="stop"&&Kt[0]!="close"||Tr(E,7);else E.G==3&&(Kt[0]=="stop"||Kt[0]=="close"?Kt[0]=="stop"?Tr(E,7):Dl(E):Kt[0]!="noop"&&E.l&&E.l.ta(Kt),E.v=0)}}zi(4)}catch{}}var Ya=class{constructor(h,_){this.g=h,this.map=_}};function Ai(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ji(h){return h.h?1:h.g?h.g.size:0}function Sl(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Ka(h,_){h.g?h.g.add(_):h.h=_}function An(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Ai.prototype.cancel=function(){if(this.i=Al(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Al(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return L(h.i)}function md(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var _=[],E=h.length,I=0;I<E;I++)_.push(h[I]);return _}_=[],E=0;for(I in h)_[E++]=h[I];return _}function Xa(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const I in h)_[E++]=I;return _}}}function bl(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var E=Xa(h),I=md(h),Z=I.length,ot=0;ot<Z;ot++)_.call(void 0,I[ot],E&&E[ot],h)}var Ws=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pd(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var I=h[E].indexOf("="),Z=null;if(0<=I){var ot=h[E].substring(0,I);Z=h[E].substring(I+1)}else ot=h[E];_(ot,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Ve(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ve){this.h=h.h,Js(this,h.j),this.o=h.o,this.g=h.g,Zr(this,h.s),this.l=h.l;var _=h.i,E=new yr;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),pr(this,E),this.m=h.m}else h&&(_=String(h).match(Ws))?(this.h=!1,Js(this,_[1]||"",!0),this.o=oi(_[2]||""),this.g=oi(_[3]||"",!0),Zr(this,_[4]),this.l=oi(_[5]||"",!0),pr(this,_[6]||"",!0),this.m=oi(_[7]||"")):(this.h=!1,this.i=new yr(null,this.h))}Ve.prototype.toString=function(){var h=[],_=this.j;_&&h.push(ea(_,Rl,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ea(_,Rl,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(ea(E,E.charAt(0)=="/"?yd:Il,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",ea(E,Qa)),h.join("")};function qn(h){return new Ve(h)}function Js(h,_,E){h.j=E?oi(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Zr(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function pr(h,_,E){_ instanceof yr?(h.i=_,Tc(h.i,h.h)):(E||(_=ea(_,_d)),h.i=new yr(_,h.h))}function se(h,_,E){h.i.set(_,E)}function ta(h){return se(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function oi(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ea(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,Ec),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Ec(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Rl=/[#\/\?@]/g,Il=/[#\?:]/g,yd=/[#\?]/g,_d=/[#\?@]/g,Qa=/#/g;function yr(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function li(h){h.g||(h.g=new Map,h.h=0,h.i&&pd(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}e=yr.prototype,e.add=function(h,_){li(this),this.i=null,h=Gi(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function _r(h,_){li(h),_=Gi(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function vr(h,_){return li(h),_=Gi(h,_),h.g.has(_)}e.forEach=function(h,_){li(this),this.g.forEach(function(E,I){E.forEach(function(Z){h.call(_,Z,I,this)},this)},this)},e.na=function(){li(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let I=0;I<_.length;I++){const Z=h[I];for(let ot=0;ot<Z.length;ot++)E.push(_[I])}return E},e.V=function(h){li(this);let _=[];if(typeof h=="string")vr(this,h)&&(_=_.concat(this.g.get(Gi(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},e.set=function(h,_){return li(this),this.i=null,h=Gi(this,h),vr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},e.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Cl(h,_,E){_r(h,_),0<E.length&&(h.i=null,h.g.set(Gi(h,_),L(E)),h.h+=E.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var I=_[E];const ot=encodeURIComponent(String(I)),mt=this.V(I);for(I=0;I<mt.length;I++){var Z=ot;mt[I]!==""&&(Z+="="+encodeURIComponent(String(mt[I]))),h.push(Z)}}return this.i=h.join("&")};function Gi(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Tc(h,_){_&&!h.j&&(li(h),h.i=null,h.g.forEach(function(E,I){var Z=I.toLowerCase();I!=Z&&(_r(this,I),Cl(this,Z,E))},h)),h.j=_}function na(h,_){const E=new xn;if(d.Image){const I=new Image;I.onload=A(ui,E,"TestLoadImage: loaded",!0,_,I),I.onerror=A(ui,E,"TestLoadImage: error",!1,_,I),I.onabort=A(ui,E,"TestLoadImage: abort",!1,_,I),I.ontimeout=A(ui,E,"TestLoadImage: timeout",!1,_,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else _(!1)}function bi(h,_){const E=new xn,I=new AbortController,Z=setTimeout(()=>{I.abort(),ui(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:I.signal}).then(ot=>{clearTimeout(Z),ot.ok?ui(E,"TestPingServer: ok",!0,_):ui(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Z),ui(E,"TestPingServer: error",!1,_)})}function ui(h,_,E,I,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),I(E)}catch{}}function ia(){this.g=new Sn}function $i(h,_,E){const I=E||"";try{bl(h,function(Z,ot){let mt=Z;m(Z)&&(mt=Xe(Z)),_.push(I+ot+"="+encodeURIComponent(mt))})}catch(Z){throw _.push(I+"type="+encodeURIComponent("_badmap")),Z}}function Wr(h){this.l=h.Ub||null,this.j=h.eb||!1}k(Wr,fr),Wr.prototype.g=function(){return new Er(this.l,this.j)},Wr.prototype.i=function(h){return function(){return h}}({});function Er(h,_){te.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Er,te),e=Er.prototype,e.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Ki(this)},e.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yi(this)),this.readyState=0},e.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ki(this)),this.g&&(this.readyState=3,Ki(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function xl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}e.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Yi(this):Ki(this),this.readyState==3&&xl(this)}},e.Ra=function(h){this.g&&(this.response=this.responseText=h,Yi(this))},e.Qa=function(h){this.g&&(this.response=h,Yi(this))},e.ga=function(){this.g&&Yi(this)};function Yi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ki(h)}e.setRequestHeader=function(h,_){this.u.append(h,_)},e.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function Ki(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Er.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Nl(h){let _="";return rt(h,function(E,I){_+=I,_+=":",_+=E,_+=`\r
`}),_}function Qe(h,_,E){t:{for(I in E){var I=!1;break t}I=!0}I||(E=Nl(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):se(h,_,E))}function ee(h){te.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(ee,te);var Za=/^https?$/i,ra=["POST","PUT"];e=ee.prototype,e.Ha=function(h){this.J=h},e.ea=function(h,_,E,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ri.g(),this.v=this.o?dr(this.o):dr(ri),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ot){wc(this,ot);return}if(h=E||"",E=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var Z in I)E.set(Z,I[Z]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ot of I.keys())E.set(ot,I.get(ot));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(E.keys()).find(ot=>ot.toLowerCase()=="content-type"),Z=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ra,_,void 0))||I||Z||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,mt]of E)this.g.setRequestHeader(ot,mt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sa(this),this.u=!0,this.g.send(h),this.u=!1}catch(ot){wc(this,ot)}};function wc(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Wa(h),Xi(h)}function Wa(h){h.A||(h.A=!0,Ht(h,"complete"),Ht(h,"error"))}e.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ht(this,"complete"),Ht(this,"abort"),Xi(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xi(this,!0)),ee.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ja(this):this.bb())},e.bb=function(){Ja(this)};function Ja(h){if(h.h&&typeof c<"u"&&(!h.v[1]||ci(h)!=4||h.Z()!=2)){if(h.u&&ci(h)==4)pe(h.Ea,0,h);else if(Ht(h,"readystatechange"),ci(h)==4){h.h=!1;try{const mt=h.Z();t:switch(mt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var E;if(!(E=_)){var I;if(I=mt===0){var Z=String(h.D).match(Ws)[1]||null;!Z&&d.self&&d.self.location&&(Z=d.self.location.protocol.slice(0,-1)),I=!Za.test(Z?Z.toLowerCase():"")}E=I}if(E)Ht(h,"complete"),Ht(h,"success");else{h.m=6;try{var ot=2<ci(h)?h.g.statusText:""}catch{ot=""}h.l=ot+" ["+h.Z()+"]",Wa(h)}}finally{Xi(h)}}}}function Xi(h,_){if(h.g){sa(h);const E=h.g,I=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ht(h,"ready");try{E.onreadystatechange=I}catch{}}}function sa(h){h.I&&(d.clearTimeout(h.I),h.I=null)}e.isActive=function(){return!!this.g};function ci(h){return h.g?h.g.readyState:0}e.Z=function(){try{return 2<ci(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),nn(_)}};function Sc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function vd(h){const _={};h=(h.g&&2<=ci(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(q(h[I]))continue;var E=P(h[I]);const Z=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ot=_[Z]||[];_[Z]=ot,ot.push(E)}M(_,function(I){return I.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function aa(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function to(h){this.Aa=0,this.i=[],this.j=new xn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=aa("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=aa("baseRetryDelayMs",5e3,h),this.cb=aa("retryDelaySeedMs",1e4,h),this.Wa=aa("forwardChannelMaxRetries",2,h),this.wa=aa("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ai(h&&h.concurrentRequestLimit),this.Da=new ia,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=to.prototype,e.la=8,e.G=1,e.connect=function(h,_,E,I){ce(0),this.W=h,this.H=_||{},E&&I!==void 0&&(this.H.OSID=E,this.H.OAID=I),this.F=this.X,this.I=Nc(this,null,this.W),no(this)};function Dl(h){if(Ac(h),h.G==3){var _=h.U++,E=qn(h.I);if(se(E,"SID",h.K),se(E,"RID",_),se(E,"TYPE","terminate"),oa(h,E),_=new rn(h,h.j,_),_.L=2,_.v=ta(qn(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=_.v,E=!0),E||(_.g=Dc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),mr(_)}xc(h)}function eo(h){h.g&&(la(h),h.g.cancel(),h.g=null)}function Ac(h){eo(h),h.u&&(d.clearTimeout(h.u),h.u=null),io(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function no(h){if(!Qr(h.h)&&!h.s){h.s=!0;var _=h.Ga;j||x(),tt||(j(),tt=!0),X.add(_,h),h.B=0}}function Ed(h,_){return ji(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ee(T(h.Ga,h,_),Vl(h,h.B)),h.B++,!0)}e.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const Z=new rn(this,this.j,h);let ot=this.o;if(this.S&&(ot?(ot=b(ot),V(ot,this.S)):ot=this.S),this.m!==null||this.O||(Z.H=ot,ot=null),this.P)t:{for(var _=0,E=0;E<this.i.length;E++){e:{var I=this.i[E];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break e}I=void 0}if(I===void 0)break;if(_+=I,4096<_){_=E;break t}if(_===4096||E===this.i.length-1){_=E+1;break t}}_=1e3}else _=1e3;_=bc(this,Z,_),E=qn(this.I),se(E,"RID",h),se(E,"CVER",22),this.D&&se(E,"X-HTTP-Session-Id",this.D),oa(this,E),ot&&(this.O?_="headers="+encodeURIComponent(String(Nl(ot)))+"&"+_:this.m&&Qe(E,this.m,ot)),Ka(this.h,Z),this.Ua&&se(E,"TYPE","init"),this.P?(se(E,"$req",_),se(E,"SID","null"),Z.T=!0,Hn(Z,E,null)):Hn(Z,E,_),this.G=2}}else this.G==3&&(h?Ol(this,h):this.i.length==0||Qr(this.h)||Ol(this))};function Ol(h,_){var E;_?E=_.l:E=h.U++;const I=qn(h.I);se(I,"SID",h.K),se(I,"RID",E),se(I,"AID",h.T),oa(h,I),h.m&&h.o&&Qe(I,h.m,h.o),E=new rn(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=bc(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ka(h.h,E),Hn(E,I,_)}function oa(h,_){h.H&&rt(h.H,function(E,I){se(_,I,E)}),h.l&&bl({},function(E,I){se(_,I,E)})}function bc(h,_,E){E=Math.min(h.i.length,E);var I=h.l?T(h.l.Na,h.l,h):null;t:{var Z=h.i;let ot=-1;for(;;){const mt=["count="+E];ot==-1?0<E?(ot=Z[0].g,mt.push("ofs="+ot)):ot=0:mt.push("ofs="+ot);let Yt=!0;for(let qe=0;qe<E;qe++){let Kt=Z[qe].g;const Ze=Z[qe].map;if(Kt-=ot,0>Kt)ot=Math.max(0,Z[qe].g-100),Yt=!1;else try{$i(Ze,mt,"req"+Kt+"_")}catch{I&&I(Ze)}}if(Yt){I=mt.join("&");break t}}}return h=h.i.splice(0,E),_.D=h,I}function Rc(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;j||x(),tt||(j(),tt=!0),X.add(_,h),h.v=0}}function Ml(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ee(T(h.Fa,h),Vl(h,h.v)),h.v++,!0)}e.Fa=function(){if(this.u=null,Ic(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ee(T(this.ab,this),h)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),eo(this),Ic(this))};function la(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Ic(h){h.g=new rn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=qn(h.qa);se(_,"RID","rpc"),se(_,"SID",h.K),se(_,"AID",h.T),se(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&se(_,"TO",h.ja),se(_,"TYPE","xmlhttp"),oa(h,_),h.m&&h.o&&Qe(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=ta(qn(_)),E.m=null,E.P=!0,Si(E,h)}e.Za=function(){this.C!=null&&(this.C=null,eo(this),Ml(this),ce(19))};function io(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Cc(h,_){var E=null;if(h.g==_){io(h),la(h),h.g=null;var I=2}else if(Sl(h.h,_))E=_.D,An(h.h,_),I=1;else return;if(h.G!=0){if(_.o)if(I==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var Z=h.B;I=Ui(),Ht(I,new be(I,E)),no(h)}else Rc(h);else if(Z=_.s,Z==3||Z==0&&0<_.X||!(I==1&&Ed(h,_)||I==2&&Ml(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),Z){case 1:Tr(h,5);break;case 4:Tr(h,10);break;case 3:Tr(h,6);break;default:Tr(h,2)}}}function Vl(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function Tr(h,_){if(h.j.info("Error code "+_),_==2){var E=T(h.fb,h),I=h.Xa;const Z=!I;I=new Ve(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Js(I,"https"),ta(I),Z?na(I.toString(),E):bi(I.toString(),E)}else ce(2);h.G=0,h.l&&h.l.sa(_),xc(h),Ac(h)}e.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function xc(h){if(h.G=0,h.ka=[],h.l){const _=Al(h.h);(_.length!=0||h.i.length!=0)&&(O(h.ka,_),O(h.ka,h.i),h.h.i.length=0,L(h.i),h.i.length=0),h.l.ra()}}function Nc(h,_,E){var I=E instanceof Ve?qn(E):new Ve(E);if(I.g!="")_&&(I.g=_+"."+I.g),Zr(I,I.s);else{var Z=d.location;I=Z.protocol,_=_?_+"."+Z.hostname:Z.hostname,Z=+Z.port;var ot=new Ve(null);I&&Js(ot,I),_&&(ot.g=_),Z&&Zr(ot,Z),E&&(ot.l=E),I=ot}return E=h.D,_=h.ya,E&&_&&se(I,E,_),se(I,"VER",h.la),oa(h,I),I}function Dc(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new ee(new Wr({eb:E})):new ee(h.pa),_.Ha(h.J),_}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oc(){}e=Oc.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ro(){}ro.prototype.g=function(h,_){return new bn(h,_)};function bn(h,_){te.call(this),this.g=new to(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!q(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!q(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Qi(this)}k(bn,te),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){Dl(this.g)},bn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=Xe(h),h=E);_.i.push(new Ya(_.Ya++,h)),_.G==3&&no(_)},bn.prototype.N=function(){this.g.l=null,delete this.j,Dl(this.g),delete this.g,bn.aa.N.call(this)};function Mc(h){ei.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){t:{for(const E in _){h=E;break t}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}k(Mc,ei);function Vc(){Bn.call(this),this.status=1}k(Vc,Bn);function Qi(h){this.g=h}k(Qi,Oc),Qi.prototype.ua=function(){Ht(this.g,"a")},Qi.prototype.ta=function(h){Ht(this.g,new Mc(h))},Qi.prototype.sa=function(h){Ht(this.g,new Vc)},Qi.prototype.ra=function(){Ht(this.g,"b")},ro.prototype.createWebChannel=ro.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,wA=function(){return new ro},TA=function(){return Ui()},EA=ni,up={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hi.NO_ERROR=0,Hi.TIMEOUT=8,Hi.HTTP_ERROR=6,ef=Hi,ii.COMPLETE="complete",vA=ii,wi.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",te.prototype.listen=te.prototype.K,Ou=wi,ee.prototype.listenOnce=ee.prototype.L,ee.prototype.getLastError=ee.prototype.Ka,ee.prototype.getLastErrorCode=ee.prototype.Ba,ee.prototype.getStatus=ee.prototype.Z,ee.prototype.getResponseJson=ee.prototype.Oa,ee.prototype.getResponseText=ee.prototype.oa,ee.prototype.send=ee.prototype.ea,ee.prototype.setWithCredentials=ee.prototype.Ha,_A=ee}).apply(typeof jh<"u"?jh:typeof self<"u"?self:typeof window<"u"?window:{});const mT="@firebase/firestore",pT="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ml="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=new Kp("@firebase/firestore");function zo(){return Va.logLevel}function _t(e,...t){if(Va.logLevel<=jt.DEBUG){const n=t.map(Zp);Va.debug(`Firestore (${ml}): ${e}`,...n)}}function jr(e,...t){if(Va.logLevel<=jt.ERROR){const n=t.map(Zp);Va.error(`Firestore (${ml}): ${e}`,...n)}}function al(e,...t){if(Va.logLevel<=jt.WARN){const n=t.map(Zp);Va.warn(`Firestore (${ml}): ${e}`,...n)}}function Zp(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,SA(e,r,n)}function SA(e,t,n){let r=`FIRESTORE (${ml}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw jr(r),new Error(r)}function ne(e,t,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,e||SA(t,a,r)}function Vt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vt extends Yr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class MM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(pn.UNAUTHENTICATED))}shutdown(){}}class VM{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kM{constructor(t){this.t=t,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ne(this.o===void 0,42304);let r=this.i;const a=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let l=new Ps;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ps,t.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const g=l;t.enqueueRetryable(async()=>{await g.promise,await a(this.currentUser)})},d=g=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(g=>d(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ps)}},0),c()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne(typeof r.accessToken=="string",31837,{l:r}),new AA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ne(t===null||typeof t=="string",2055,{h:t}),new pn(t)}}class PM{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LM{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new PM(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UM{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_i(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ne(this.o===void 0,3512);const r=l=>{l.error!=null&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,_t("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>r(l))};const a=l=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new yT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=zM(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<n&&(r+=t.charAt(a[l]%62))}return r}}function Lt(e,t){return e<t?-1:e>t?1:0}function cp(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),a=t.codePointAt(n);if(r!==a){if(r<128&&a<128)return Lt(r,a);{const l=bA(),c=BM(l.encode(_T(e,n)),l.encode(_T(t,n)));return c!==0?c:Lt(r,a)}}n+=r>65535?2:1}return Lt(e.length,t.length)}function _T(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function BM(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Lt(e[n],t[n]);return Lt(e.length,t.length)}function ol(e,t,n){return e.length===t.length&&e.every((r,a)=>n(r,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=-62135596800,ET=1e6;class ge{static now(){return ge.fromMillis(Date.now())}static fromDate(t){return ge.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*ET);return new ge(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new vt(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new vt(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<vT)throw new vt(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new vt(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ET}_compareTo(t){return this.seconds===t.seconds?Lt(this.nanoseconds,t.nanoseconds):Lt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-vT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{static fromTimestamp(t){return new Mt(t)}static min(){return new Mt(new ge(0,0))}static max(){return new Mt(new ge(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="__name__";class rr{constructor(t,n,r){n===void 0?n=0:n>t.length&&Nt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&Nt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return rr.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof rr?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let a=0;a<r;a++){const l=rr.compareSegments(t.get(a),n.get(a));if(l!==0)return l}return Lt(t.length,n.length)}static compareSegments(t,n){const r=rr.isNumericId(t),a=rr.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?rr.extractNumericId(t).compare(rr.extractNumericId(n)):cp(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ks.fromString(t.substring(4,t.length-2))}}class de extends rr{construct(t,n,r){return new de(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new vt(ft.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(a=>a.length>0))}return new de(n)}static emptyPath(){return new de([])}}const HM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends rr{construct(t,n,r){return new cn(t,n,r)}static isValidIdentifier(t){return HM.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===TT}static keyField(){return new cn([TT])}static fromServerFormat(t){const n=[];let r="",a=0;const l=()=>{if(r.length===0)throw new vt(ft.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;a<t.length;){const d=t[a];if(d==="\\"){if(a+1===t.length)throw new vt(ft.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new vt(ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new vt(ft.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new cn(n)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t){this.path=t}static fromPath(t){return new Rt(de.fromString(t))}static fromName(t){return new Rt(de.fromString(t).popFirst(5))}static empty(){return new Rt(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&de.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return de.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Rt(new de(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=-1;function qM(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=Mt.fromTimestamp(r===1e9?new ge(n+1,0):new ge(n,r));return new Us(a,Rt.empty(),t)}function FM(e){return new Us(e.readTime,e.key,Xu)}class Us{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Us(Mt.min(),Rt.empty(),Xu)}static max(){return new Us(Mt.max(),Rt.empty(),Xu)}}function jM(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Rt.comparator(e.documentKey,t.documentKey),n!==0?n:Lt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $M{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(e){if(e.code!==ft.FAILED_PRECONDITION||e.message!==GM)throw e;_t("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Nt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new dt((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,a)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof dt?n:dt.resolve(n)}catch(n){return dt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.reject(n)}static resolve(t){return new dt((n,r)=>{n(t)})}static reject(t){return new dt((n,r)=>{r(t)})}static waitFor(t){return new dt((n,r)=>{let a=0,l=0,c=!1;t.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&n()},g=>r(g))}),c=!0,l===a&&n()})}static or(t){let n=dt.resolve(!1);for(const r of t)n=n.next(a=>a?dt.resolve(a):r());return n}static forEach(t,n){const r=[];return t.forEach((a,l)=>{r.push(n.call(this,a,l))}),this.waitFor(r)}static mapArray(t,n){return new dt((r,a)=>{const l=t.length,c=new Array(l);let d=0;for(let g=0;g<l;g++){const m=g;n(t[m]).next(y=>{c[m]=y,++d,d===l&&r(c)},y=>a(y))}})}static doWhile(t,n){return new dt((r,a)=>{const l=()=>{t()===!0?n().next(()=>{l()},a):r()};l()})}}function YM(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yl(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Kf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp=-1;function Xf(e){return e==null}function Af(e){return e===0&&1/e==-1/0}function KM(e){return typeof e=="number"&&Number.isInteger(e)&&!Af(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="";function XM(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=wT(t)),t=QM(e.get(n),t);return wT(t)}function QM(e,t){let n=t;const r=e.length;for(let a=0;a<r;a++){const l=e.charAt(a);switch(l){case"\0":n+="";break;case IA:n+="";break;default:n+=l}}return n}function wT(e){return e+IA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function js(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function CA(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(t,n){this.comparator=t,this.root=n||un.EMPTY}insert(t,n){return new ve(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,un.BLACK,null,null))}remove(t){return new ve(this.comparator,this.root.remove(t,this.comparator).copy(null,null,un.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Gh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Gh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Gh(this.root,t,this.comparator,!0)}}class Gh{constructor(t,n,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=n?r(t.key,n):1,n&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class un{constructor(t,n,r,a,l){this.key=t,this.value=n,this.color=r??un.RED,this.left=a??un.EMPTY,this.right=l??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,a,l){return new un(t??this.key,n??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let a=this;const l=r(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,n,r),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(t,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,a=this;if(n(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(t,a.key)===0){if(a.right.isEmpty())return un.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Nt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Nt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Nt(27949);return t+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw Nt(57766)}get value(){throw Nt(16141)}get color(){throw Nt(16727)}get left(){throw Nt(29726)}get right(){throw Nt(36894)}copy(t,n,r,a,l){return this}insert(t,n,r){return new un(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.comparator=t,this.data=new ve(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,t[1])>=0)return;n(a.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new AT(this.data.getIterator())}getIteratorFrom(t){return new AT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof $e)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new $e(this.comparator);return n.data=t,n}}class AT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(t){this.fields=t,t.sort(cn.comparator)}static empty(){return new Qn([])}unionWith(t){let n=new $e(cn.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Qn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ol(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new xA("Invalid base64 string: "+l):l}}(t);return new hn(n)}static fromUint8Array(t){const n=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(t);return new hn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Lt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const ZM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zs(e){if(ne(!!e,39018),typeof e=="string"){let t=0;const n=ZM.exec(e);if(ne(!!n,46558,{timestamp:e}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),t=Number(a)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ce(e.seconds),nanos:Ce(e.nanos)}}function Ce(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Bs(e){return typeof e=="string"?hn.fromBase64String(e):hn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="server_timestamp",DA="__type__",OA="__previous_value__",MA="__local_write_time__";function Jp(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[DA])===null||n===void 0?void 0:n.stringValue)===NA}function Qf(e){const t=e.mapValue.fields[OA];return Jp(t)?Qf(t):t}function Qu(e){const t=zs(e.mapValue.fields[MA].timestampValue);return new ge(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(t,n,r,a,l,c,d,g,m,y){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=m,this.isUsingEmulator=y}}const bf="(default)";class Zu{constructor(t,n){this.projectId=t,this.database=n||bf}static empty(){return new Zu("","")}get isDefaultDatabase(){return this.database===bf}isEqual(t){return t instanceof Zu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="__type__",JM="__max__",$h={mapValue:{}},kA="__vector__",Rf="value";function Hs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Jp(e)?4:eV(e)?9007199254740991:tV(e)?10:11:Nt(28295,{value:e})}function cr(e,t){if(e===t)return!0;const n=Hs(e);if(n!==Hs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Qu(e).isEqual(Qu(t));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=zs(a.timestampValue),d=zs(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,l){return Bs(a.bytesValue).isEqual(Bs(l.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,l){return Ce(a.geoPointValue.latitude)===Ce(l.geoPointValue.latitude)&&Ce(a.geoPointValue.longitude)===Ce(l.geoPointValue.longitude)}(e,t);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Ce(a.integerValue)===Ce(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Ce(a.doubleValue),d=Ce(l.doubleValue);return c===d?Af(c)===Af(d):isNaN(c)&&isNaN(d)}return!1}(e,t);case 9:return ol(e.arrayValue.values||[],t.arrayValue.values||[],cr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(ST(c)!==ST(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(d[g]===void 0||!cr(c[g],d[g])))return!1;return!0}(e,t);default:return Nt(52216,{left:e})}}function Wu(e,t){return(e.values||[]).find(n=>cr(n,t))!==void 0}function ll(e,t){if(e===t)return 0;const n=Hs(e),r=Hs(t);if(n!==r)return Lt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Lt(e.booleanValue,t.booleanValue);case 2:return function(l,c){const d=Ce(l.integerValue||l.doubleValue),g=Ce(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(e,t);case 3:return bT(e.timestampValue,t.timestampValue);case 4:return bT(Qu(e),Qu(t));case 5:return cp(e.stringValue,t.stringValue);case 6:return function(l,c){const d=Bs(l),g=Bs(c);return d.compareTo(g)}(e.bytesValue,t.bytesValue);case 7:return function(l,c){const d=l.split("/"),g=c.split("/");for(let m=0;m<d.length&&m<g.length;m++){const y=Lt(d[m],g[m]);if(y!==0)return y}return Lt(d.length,g.length)}(e.referenceValue,t.referenceValue);case 8:return function(l,c){const d=Lt(Ce(l.latitude),Ce(c.latitude));return d!==0?d:Lt(Ce(l.longitude),Ce(c.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return RT(e.arrayValue,t.arrayValue);case 10:return function(l,c){var d,g,m,y;const v=l.fields||{},T=c.fields||{},A=(d=v[Rf])===null||d===void 0?void 0:d.arrayValue,k=(g=T[Rf])===null||g===void 0?void 0:g.arrayValue,L=Lt(((m=A?.values)===null||m===void 0?void 0:m.length)||0,((y=k?.values)===null||y===void 0?void 0:y.length)||0);return L!==0?L:RT(A,k)}(e.mapValue,t.mapValue);case 11:return function(l,c){if(l===$h.mapValue&&c===$h.mapValue)return 0;if(l===$h.mapValue)return 1;if(c===$h.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),m=c.fields||{},y=Object.keys(m);g.sort(),y.sort();for(let v=0;v<g.length&&v<y.length;++v){const T=cp(g[v],y[v]);if(T!==0)return T;const A=ll(d[g[v]],m[y[v]]);if(A!==0)return A}return Lt(g.length,y.length)}(e.mapValue,t.mapValue);default:throw Nt(23264,{Pe:n})}}function bT(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Lt(e,t);const n=zs(e),r=zs(t),a=Lt(n.seconds,r.seconds);return a!==0?a:Lt(n.nanos,r.nanos)}function RT(e,t){const n=e.values||[],r=t.values||[];for(let a=0;a<n.length&&a<r.length;++a){const l=ll(n[a],r[a]);if(l)return l}return Lt(n.length,r.length)}function ul(e){return hp(e)}function hp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=zs(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Bs(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Rt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",a=!0;for(const l of n.values||[])a?a=!1:r+=",",r+=hp(l);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${hp(n.fields[c])}`;return a+"}"}(e.mapValue):Nt(61005,{value:e})}function nf(e){switch(Hs(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Qf(e);return t?16+nf(t):16;case 5:return 2*e.stringValue.length;case 6:return Bs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+nf(l),0)}(e.arrayValue);case 10:case 11:return function(r){let a=0;return js(r.fields,(l,c)=>{a+=l.length+nf(c)}),a}(e.mapValue);default:throw Nt(13486,{value:e})}}function IT(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function fp(e){return!!e&&"integerValue"in e}function ty(e){return!!e&&"arrayValue"in e}function CT(e){return!!e&&"nullValue"in e}function xT(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function rf(e){return!!e&&"mapValue"in e}function tV(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[VA])===null||n===void 0?void 0:n.stringValue)===kA}function Pu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return js(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Pu(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Pu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function eV(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===JM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t){this.value=t}static empty(){return new Vn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!rf(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Pu(n)}setAll(t){let n=cn.emptyPath(),r={},a=[];t.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const g=this.getFieldsMap(n);this.applyChanges(g,r,a),r={},a=[],n=d.popLast()}c?r[d.lastSegment()]=Pu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,r,a)}delete(t){const n=this.field(t.popLast());rf(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return cr(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let a=n.mapValue.fields[t.get(r)];rf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(t,n,r){js(n,(a,l)=>t[a]=l);for(const a of r)delete t[a]}clone(){return new Vn(Pu(this.value))}}function PA(e){const t=[];return js(e.fields,(n,r)=>{const a=new cn([n]);if(rf(r)){const l=PA(r.mapValue).fields;if(l.length===0)t.push(a);else for(const c of l)t.push(a.child(c))}else t.push(a)}),new Qn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t,n,r,a,l,c,d){this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(t){return new yn(t,0,Mt.min(),Mt.min(),Mt.min(),Vn.empty(),0)}static newFoundDocument(t,n,r,a){return new yn(t,1,n,Mt.min(),r,a,0)}static newNoDocument(t,n){return new yn(t,2,n,Mt.min(),Mt.min(),Vn.empty(),0)}static newUnknownDocument(t,n){return new yn(t,3,n,Mt.min(),Mt.min(),Vn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Mt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof yn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(t,n){this.position=t,this.inclusive=n}}function NT(e,t,n){let r=0;for(let a=0;a<e.position.length;a++){const l=t[a],c=e.position[a];if(l.field.isKeyField()?r=Rt.comparator(Rt.fromName(c.referenceValue),n.key):r=ll(c,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function DT(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!cr(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(t,n="asc"){this.field=t,this.dir=n}}function nV(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{}class Ue extends LA{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new rV(t,n,r):n==="array-contains"?new oV(t,r):n==="in"?new lV(t,r):n==="not-in"?new uV(t,r):n==="array-contains-any"?new cV(t,r):new Ue(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new sV(t,r):new aV(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ll(n,this.value)):n!==null&&Hs(this.value)===Hs(n)&&this.matchesComparison(ll(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Nt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oi extends LA{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new Oi(t,n)}matches(t){return UA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function UA(e){return e.op==="and"}function zA(e){return iV(e)&&UA(e)}function iV(e){for(const t of e.filters)if(t instanceof Oi)return!1;return!0}function dp(e){if(e instanceof Ue)return e.field.canonicalString()+e.op.toString()+ul(e.value);if(zA(e))return e.filters.map(t=>dp(t)).join(",");{const t=e.filters.map(n=>dp(n)).join(",");return`${e.op}(${t})`}}function BA(e,t){return e instanceof Ue?function(r,a){return a instanceof Ue&&r.op===a.op&&r.field.isEqual(a.field)&&cr(r.value,a.value)}(e,t):e instanceof Oi?function(r,a){return a instanceof Oi&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&BA(c,a.filters[d]),!0):!1}(e,t):void Nt(19439)}function HA(e){return e instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${ul(n.value)}`}(e):e instanceof Oi?function(n){return n.op.toString()+" {"+n.getFilters().map(HA).join(" ,")+"}"}(e):"Filter"}class rV extends Ue{constructor(t,n,r){super(t,n,r),this.key=Rt.fromName(r.referenceValue)}matches(t){const n=Rt.comparator(t.key,this.key);return this.matchesComparison(n)}}class sV extends Ue{constructor(t,n){super(t,"in",n),this.keys=qA("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class aV extends Ue{constructor(t,n){super(t,"not-in",n),this.keys=qA("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function qA(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Rt.fromName(r.referenceValue))}class oV extends Ue{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return ty(n)&&Wu(n.arrayValue,this.value)}}class lV extends Ue{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Wu(this.value.arrayValue,n)}}class uV extends Ue{constructor(t,n){super(t,"not-in",n)}matches(t){if(Wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Wu(this.value.arrayValue,n)}}class cV extends Ue{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!ty(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Wu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(t,n=null,r=[],a=[],l=null,c=null,d=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function OT(e,t=null,n=[],r=[],a=null,l=null,c=null){return new hV(e,t,n,r,a,l,c)}function ey(e){const t=Vt(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>dp(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),Xf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>ul(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>ul(r)).join(",")),t.Ie=n}return t.Ie}function ny(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!nV(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!BA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!DT(e.startAt,t.startAt)&&DT(e.endAt,t.endAt)}function gp(e){return Rt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(t,n=null,r=[],a=[],l=null,c="F",d=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function fV(e,t,n,r,a,l,c,d){return new _l(e,t,n,r,a,l,c,d)}function FA(e){return new _l(e)}function MT(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function jA(e){return e.collectionGroup!==null}function Lu(e){const t=Vt(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const l of t.explicitOrderBy)t.Ee.push(l),n.add(l.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new $e(cn.comparator);return c.filters.forEach(g=>{g.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(t).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||t.Ee.push(new Ju(l,r))}),n.has(cn.keyField().canonicalString())||t.Ee.push(new Ju(cn.keyField(),r))}return t.Ee}function ar(e){const t=Vt(e);return t.de||(t.de=dV(t,Lu(e))),t.de}function dV(e,t){if(e.limitType==="F")return OT(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Ju(a.field,l)});const n=e.endAt?new If(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new If(e.startAt.position,e.startAt.inclusive):null;return OT(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function mp(e,t){const n=e.filters.concat([t]);return new _l(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function pp(e,t,n){return new _l(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Zf(e,t){return ny(ar(e),ar(t))&&e.limitType===t.limitType}function GA(e){return`${ey(ar(e))}|lt:${e.limitType}`}function Bo(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(a=>HA(a)).join(", ")}]`),Xf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(a=>ul(a)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(a=>ul(a)).join(",")),`Target(${r})`}(ar(e))}; limitType=${e.limitType})`}function Wf(e,t){return t.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Rt.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(e,t)&&function(r,a){for(const l of Lu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(e,t)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(e,t)&&function(r,a){return!(r.startAt&&!function(c,d,g){const m=NT(c,d,g);return c.inclusive?m<=0:m<0}(r.startAt,Lu(r),a)||r.endAt&&!function(c,d,g){const m=NT(c,d,g);return c.inclusive?m>=0:m>0}(r.endAt,Lu(r),a))}(e,t)}function gV(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function $A(e){return(t,n)=>{let r=!1;for(const a of Lu(e)){const l=mV(a,t,n);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function mV(e,t,n){const r=e.field.isKeyField()?Rt.comparator(t.key,n.key):function(l,c,d){const g=c.data.field(l),m=d.data.field(l);return g!==null&&m!==null?ll(g,m):Nt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Nt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,n]);a.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(t){js(this.inner,(n,r)=>{for(const[a,l]of r)t(a,l)})}isEmpty(){return CA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=new ve(Rt.comparator);function Gr(){return pV}const YA=new ve(Rt.comparator);function Mu(...e){let t=YA;for(const n of e)t=t.insert(n.key,n);return t}function KA(e){let t=YA;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Ca(){return Uu()}function XA(){return Uu()}function Uu(){return new za(e=>e.toString(),(e,t)=>e.isEqual(t))}const yV=new ve(Rt.comparator),_V=new $e(Rt.comparator);function Gt(...e){let t=_V;for(const n of e)t=t.add(n);return t}const vV=new $e(Lt);function EV(){return vV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Af(t)?"-0":t}}function QA(e){return{integerValue:""+e}}function TV(e,t){return KM(t)?QA(t):iy(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this._=void 0}}function wV(e,t,n){return e instanceof Cf?function(a,l){const c={fields:{[DA]:{stringValue:NA},[MA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Jp(l)&&(l=Qf(l)),l&&(c.fields[OA]=l),{mapValue:c}}(n,t):e instanceof tc?WA(e,t):e instanceof ec?JA(e,t):function(a,l){const c=ZA(a,l),d=VT(c)+VT(a.Re);return fp(c)&&fp(a.Re)?QA(d):iy(a.serializer,d)}(e,t)}function SV(e,t,n){return e instanceof tc?WA(e,t):e instanceof ec?JA(e,t):n}function ZA(e,t){return e instanceof xf?function(r){return fp(r)||function(l){return!!l&&"doubleValue"in l}(r)}(t)?t:{integerValue:0}:null}class Cf extends Jf{}class tc extends Jf{constructor(t){super(),this.elements=t}}function WA(e,t){const n=tb(t);for(const r of e.elements)n.some(a=>cr(a,r))||n.push(r);return{arrayValue:{values:n}}}class ec extends Jf{constructor(t){super(),this.elements=t}}function JA(e,t){let n=tb(t);for(const r of e.elements)n=n.filter(a=>!cr(a,r));return{arrayValue:{values:n}}}class xf extends Jf{constructor(t,n){super(),this.serializer=t,this.Re=n}}function VT(e){return Ce(e.integerValue||e.doubleValue)}function tb(e){return ty(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function AV(e,t){return e.field.isEqual(t.field)&&function(r,a){return r instanceof tc&&a instanceof tc||r instanceof ec&&a instanceof ec?ol(r.elements,a.elements,cr):r instanceof xf&&a instanceof xf?cr(r.Re,a.Re):r instanceof Cf&&a instanceof Cf}(e.transform,t.transform)}class bV{constructor(t,n){this.version=t,this.transformResults=n}}class Zn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Zn}static exists(t){return new Zn(void 0,t)}static updateTime(t){return new Zn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function sf(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class td{}function eb(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new ed(e.key,Zn.none()):new cc(e.key,e.data,Zn.none());{const n=e.data,r=Vn.empty();let a=new $e(cn.comparator);for(let l of t.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Gs(e.key,r,new Qn(a.toArray()),Zn.none())}}function RV(e,t,n){e instanceof cc?function(a,l,c){const d=a.value.clone(),g=PT(a.fieldTransforms,l,c.transformResults);d.setAll(g),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(e,t,n):e instanceof Gs?function(a,l,c){if(!sf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=PT(a.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(nb(a)),g.setAll(d),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(e,t,n):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,n)}function zu(e,t,n,r){return e instanceof cc?function(l,c,d,g){if(!sf(l.precondition,c))return d;const m=l.value.clone(),y=LT(l.fieldTransforms,g,c);return m.setAll(y),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(e,t,n,r):e instanceof Gs?function(l,c,d,g){if(!sf(l.precondition,c))return d;const m=LT(l.fieldTransforms,g,c),y=c.data;return y.setAll(nb(l)),y.setAll(m),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(e,t,n,r):function(l,c,d){return sf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(e,t,n)}function IV(e,t){let n=null;for(const r of e.fieldTransforms){const a=t.data.field(r.field),l=ZA(r.transform,a||null);l!=null&&(n===null&&(n=Vn.empty()),n.set(r.field,l))}return n||null}function kT(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&ol(r,a,(l,c)=>AV(l,c))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class cc extends td{constructor(t,n,r,a=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Gs extends td{constructor(t,n,r,a,l=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function nb(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function PT(e,t,n){const r=new Map;ne(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let a=0;a<n.length;a++){const l=e[a],c=l.transform,d=t.data.field(l.field);r.set(l.field,SV(c,d,n[a]))}return r}function LT(e,t,n){const r=new Map;for(const a of e){const l=a.transform,c=n.data.field(a.field);r.set(a.field,wV(l,c,t))}return r}class ed extends td{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CV extends td{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(t,n,r,a){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&RV(l,t,r[a])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=zu(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=zu(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=XA();return this.mutations.forEach(a=>{const l=t.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=n.has(a.key)?null:d;const g=eb(c,d);g!==null&&r.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Gt())}isEqual(t){return this.batchId===t.batchId&&ol(this.mutations,t.mutations,(n,r)=>kT(n,r))&&ol(this.baseMutations,t.baseMutations,(n,r)=>kT(n,r))}}class ry{constructor(t,n,r,a){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(t,n,r){ne(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let a=function(){return yV}();const l=t.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new ry(t,n,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,Qt;function OV(e){switch(e){case ft.OK:return Nt(64938);case ft.CANCELLED:case ft.UNKNOWN:case ft.DEADLINE_EXCEEDED:case ft.RESOURCE_EXHAUSTED:case ft.INTERNAL:case ft.UNAVAILABLE:case ft.UNAUTHENTICATED:return!1;case ft.INVALID_ARGUMENT:case ft.NOT_FOUND:case ft.ALREADY_EXISTS:case ft.PERMISSION_DENIED:case ft.FAILED_PRECONDITION:case ft.ABORTED:case ft.OUT_OF_RANGE:case ft.UNIMPLEMENTED:case ft.DATA_LOSS:return!0;default:return Nt(15467,{code:e})}}function ib(e){if(e===void 0)return jr("GRPC error has no .code"),ft.UNKNOWN;switch(e){case Le.OK:return ft.OK;case Le.CANCELLED:return ft.CANCELLED;case Le.UNKNOWN:return ft.UNKNOWN;case Le.DEADLINE_EXCEEDED:return ft.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return ft.RESOURCE_EXHAUSTED;case Le.INTERNAL:return ft.INTERNAL;case Le.UNAVAILABLE:return ft.UNAVAILABLE;case Le.UNAUTHENTICATED:return ft.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return ft.INVALID_ARGUMENT;case Le.NOT_FOUND:return ft.NOT_FOUND;case Le.ALREADY_EXISTS:return ft.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return ft.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return ft.FAILED_PRECONDITION;case Le.ABORTED:return ft.ABORTED;case Le.OUT_OF_RANGE:return ft.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return ft.UNIMPLEMENTED;case Le.DATA_LOSS:return ft.DATA_LOSS;default:return Nt(39323,{code:e})}}(Qt=Le||(Le={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=new ks([4294967295,4294967295],0);function UT(e){const t=bA().encode(e),n=new yA;return n.update(t),new Uint8Array(n.digest())}function zT(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new ks([n,r],0),new ks([a,l],0)]}class sy{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vu(`Invalid padding: ${n}`);if(r<0)throw new Vu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Vu(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Vu(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=ks.fromNumber(this.pe)}we(t,n,r){let a=t.add(n.multiply(ks.fromNumber(r)));return a.compare(MV)===1&&(a=new ks([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=UT(t),[r,a]=zT(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);if(!this.be(c))return!1}return!0}static create(t,n,r){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new sy(l,a,n);return r.forEach(d=>c.insert(d)),c}insert(t){if(this.pe===0)return;const n=UT(t),[r,a]=zT(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);this.Se(c)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Vu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(t,n,r,a,l){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const a=new Map;return a.set(t,hc.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new nd(Mt.min(),a,new ve(Lt),Gr(),Gt())}}class hc{constructor(t,n,r,a,l){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new hc(r,n,Gt(),Gt(),Gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(t,n,r,a){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=a}}class rb{constructor(t,n){this.targetId=t,this.Ce=n}}class sb{constructor(t,n,r=hn.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a}}class BT{constructor(){this.Fe=0,this.Me=HT(),this.xe=hn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Gt(),n=Gt(),r=Gt();return this.Me.forEach((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:Nt(38017,{changeType:l})}}),new hc(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=HT()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,ne(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class VV{constructor(t){this.ze=t,this.je=new Map,this.He=Gr(),this.Je=Yh(),this.Ye=Yh(),this.Ze=new ve(Lt)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:Nt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,a)=>{this.it(a)&&n(a)})}ot(t){const n=t.targetId,r=t.Ce.count,a=this._t(n);if(a){const l=a.target;if(gp(l))if(r===0){const c=new Rt(l.path);this.tt(n,c,yn.newNoDocument(c,Mt.min()))}else ne(r===1,20013,{expectedCount:r});else{const c=this.ut(n);if(c!==r){const d=this.ct(t),g=d?this.lt(d,t,c):1;if(g!==0){this.st(n);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,m)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=n;let c,d;try{c=Bs(r).toUint8Array()}catch(g){if(g instanceof xA)return al("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new sy(c,a,l)}catch(g){return al(g instanceof Vu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.pe===0?null:d}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let a=0;return r.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(d)||(this.tt(n,l,null),a++)}),a}It(t){const n=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&gp(d.target)){const g=new Rt(d.target.path);this.Et(g).has(c)||this.dt(c,g)||this.tt(c,g,yn.newNoDocument(g,t))}l.Le&&(n.set(c,l.qe()),l.Qe())}});let r=Gt();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(g=>{const m=this._t(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.He.forEach((l,c)=>c.setReadTime(t));const a=new nd(t,n,this.Ze,this.He,r);return this.He=Gr(),this.Je=Yh(),this.Ye=Yh(),this.Ze=new ve(Lt),a}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const a=this.rt(t);this.dt(t,n)?a.$e(n,1):a.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new BT,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new $e(Lt),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new $e(Lt),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||_t("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new BT),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function Yh(){return new ve(Rt.comparator)}function HT(){return new ve(Rt.comparator)}const kV={asc:"ASCENDING",desc:"DESCENDING"},PV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LV={and:"AND",or:"OR"};class UV{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function yp(e,t){return e.useProto3Json||Xf(t)?t:{value:t}}function Nf(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ab(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function zV(e,t){return Nf(e,t.toTimestamp())}function or(e){return ne(!!e,49232),Mt.fromTimestamp(function(n){const r=zs(n);return new ge(r.seconds,r.nanos)}(e))}function ay(e,t){return _p(e,t).canonicalString()}function _p(e,t){const n=function(a){return new de(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?n:n.child(t)}function ob(e){const t=de.fromString(e);return ne(fb(t),10190,{key:t.toString()}),t}function vp(e,t){return ay(e.databaseId,t.path)}function km(e,t){const n=ob(t);if(n.get(1)!==e.databaseId.projectId)throw new vt(ft.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new vt(ft.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Rt(ub(n))}function lb(e,t){return ay(e.databaseId,t)}function BV(e){const t=ob(e);return t.length===4?de.emptyPath():ub(t)}function Ep(e){return new de(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ub(e){return ne(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function qT(e,t,n){return{name:vp(e,t),fields:n.value.mapValue.fields}}function HV(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Nt(39313,{state:m})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=function(m,y){return m.useProto3Json?(ne(y===void 0||typeof y=="string",58123),hn.fromBase64String(y||"")):(ne(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),hn.fromUint8Array(y||new Uint8Array))}(e,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(m){const y=m.code===void 0?ft.UNKNOWN:ib(m.code);return new vt(y,m.message||"")}(c);n=new sb(r,a,l,d||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const a=km(e,r.document.name),l=or(r.document.updateTime),c=r.document.createTime?or(r.document.createTime):Mt.min(),d=new Vn({mapValue:{fields:r.document.fields}}),g=yn.newFoundDocument(a,l,c,d),m=r.targetIds||[],y=r.removedTargetIds||[];n=new af(m,y,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const a=km(e,r.document),l=r.readTime?or(r.readTime):Mt.min(),c=yn.newNoDocument(a,l),d=r.removedTargetIds||[];n=new af([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const a=km(e,r.document),l=r.removedTargetIds||[];n=new af([],l,a,null)}else{if(!("filter"in t))return Nt(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new DV(a,l),d=r.targetId;n=new rb(d,c)}}return n}function qV(e,t){let n;if(t instanceof cc)n={update:qT(e,t.key,t.value)};else if(t instanceof ed)n={delete:vp(e,t.key)};else if(t instanceof Gs)n={update:qT(e,t.key,t.data),updateMask:ZV(t.fieldMask)};else{if(!(t instanceof CV))return Nt(16599,{ft:t.type});n={verify:vp(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof Cf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof tc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ec)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof xf)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Nt(20930,{transform:c.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:zV(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Nt(27497)}(e,t.precondition)),n}function FV(e,t){return e&&e.length>0?(ne(t!==void 0,14353),e.map(n=>function(a,l){let c=a.updateTime?or(a.updateTime):or(l);return c.isEqual(Mt.min())&&(c=or(l)),new bV(c,a.transformResults||[])}(n,t))):[]}function jV(e,t){return{documents:[lb(e,t.path)]}}function GV(e,t){const n={structuredQuery:{}},r=t.path;let a;t.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lb(e,a);const l=function(m){if(m.length!==0)return hb(Oi.create(m,"and"))}(t.filters);l&&(n.structuredQuery.where=l);const c=function(m){if(m.length!==0)return m.map(y=>function(T){return{field:Ho(T.field),direction:KV(T.dir)}}(y))}(t.orderBy);c&&(n.structuredQuery.orderBy=c);const d=yp(e,t.limit);return d!==null&&(n.structuredQuery.limit=d),t.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(t.endAt)),{gt:n,parent:a}}function $V(e){let t=BV(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){ne(r===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:t=t.child(y.collectionId)}let l=[];n.where&&(l=function(v){const T=cb(v);return T instanceof Oi&&zA(T)?T.getFilters():[T]}(n.where));let c=[];n.orderBy&&(c=function(v){return v.map(T=>function(k){return new Ju(qo(k.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(T))}(n.orderBy));let d=null;n.limit&&(d=function(v){let T;return T=typeof v=="object"?v.value:v,Xf(T)?null:T}(n.limit));let g=null;n.startAt&&(g=function(v){const T=!!v.before,A=v.values||[];return new If(A,T)}(n.startAt));let m=null;return n.endAt&&(m=function(v){const T=!v.before,A=v.values||[];return new If(A,T)}(n.endAt)),fV(t,a,c,l,d,"F",g,m)}function YV(e,t){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Nt(28987,{purpose:a})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function cb(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=qo(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=qo(n.unaryFilter.field);return Ue.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=qo(n.unaryFilter.field);return Ue.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=qo(n.unaryFilter.field);return Ue.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Nt(61313);default:return Nt(60726)}}(e):e.fieldFilter!==void 0?function(n){return Ue.create(qo(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Nt(58110);default:return Nt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Oi.create(n.compositeFilter.filters.map(r=>cb(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Nt(1026)}}(n.compositeFilter.op))}(e):Nt(30097,{filter:e})}function KV(e){return kV[e]}function XV(e){return PV[e]}function QV(e){return LV[e]}function Ho(e){return{fieldPath:e.canonicalString()}}function qo(e){return cn.fromServerFormat(e.fieldPath)}function hb(e){return e instanceof Ue?function(n){if(n.op==="=="){if(xT(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NAN"}};if(CT(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xT(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NOT_NAN"}};if(CT(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ho(n.field),op:XV(n.op),value:n.value}}}(e):e instanceof Oi?function(n){const r=n.getFilters().map(a=>hb(a));return r.length===1?r[0]:{compositeFilter:{op:QV(n.op),filters:r}}}(e):Nt(54877,{filter:e})}function ZV(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function fb(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(t,n,r,a,l=Mt.min(),c=Mt.min(),d=hn.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(t){return new xs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(t){this.wt=t}}function JV(e){const t=$V({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?pp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(){this.Cn=new e4}addToCollectionParentIndex(t,n){return this.Cn.add(n),dt.resolve()}getCollectionParents(t,n){return dt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return dt.resolve()}deleteFieldIndex(t,n){return dt.resolve()}deleteAllFieldIndexes(t){return dt.resolve()}createTargetIndexes(t,n){return dt.resolve()}getDocumentsMatchingTarget(t,n){return dt.resolve(null)}getIndexType(t,n){return dt.resolve(0)}getFieldIndexes(t,n){return dt.resolve([])}getNextCollectionGroupToUpdate(t){return dt.resolve(null)}getMinOffset(t,n){return dt.resolve(Us.min())}getMinOffsetFromCollectionGroup(t,n){return dt.resolve(Us.min())}updateCollectionGroup(t,n,r){return dt.resolve()}updateIndexEntries(t,n){return dt.resolve()}}class e4{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n]||new $e(de.comparator),l=!a.has(r);return this.index[n]=a.add(r),l}has(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(t){return(this.index[t]||new $e(de.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},db=41943040;class Mn{static withCacheSize(t){return new Mn(t,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(db,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new cl(0)}static lr(){return new cl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="LruGarbageCollector",n4=1048576;function GT([e,t],[n,r]){const a=Lt(e,n);return a===0?Lt(t,r):a}class i4{constructor(t){this.Er=t,this.buffer=new $e(GT),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();GT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class r4{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){_t(jT,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){yl(n)?_t(jT,"Ignoring IndexedDB error during garbage collection: ",n):await pl(n)}await this.mr(3e5)})}}class s4{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return dt.resolve(Kf.le);const r=new i4(n);return this.gr.forEachTarget(t,a=>r.Rr(a.sequenceNumber)).next(()=>this.gr.yr(t,a=>r.Rr(a))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.gr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(_t("LruGarbageCollector","Garbage collection skipped; disabled"),dt.resolve(FT)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FT):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let r,a,l,c,d,g,m;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(_t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(t,a))).next(v=>(r=v,d=Date.now(),this.removeTargets(t,r,n))).next(v=>(l=v,g=Date.now(),this.removeOrphanedDocuments(t,r))).next(v=>(m=Date.now(),zo()<=jt.DEBUG&&_t("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${v} documents in `+(m-g)+`ms
Total Duration: ${m-y}ms`),dt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v})))}}function a4(e,t){return new s4(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(){this.changes=new za(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,yn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?dt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(t,n,r,a){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(a=>(r=a,this.remoteDocumentCache.getEntry(t,n))).next(a=>(r!==null&&zu(r.mutation,a,Qn.empty(),ge.now()),a))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Gt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Gt()){const a=Ca();return this.populateOverlays(t,a,n).next(()=>this.computeViews(t,n,a,r).next(l=>{let c=Mu();return l.forEach((d,g)=>{c=c.insert(d,g.overlayedDocument)}),c}))}getOverlayedDocuments(t,n){const r=Ca();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Gt()))}populateOverlays(t,n,r){const a=[];return r.forEach(l=>{n.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(t,a).next(l=>{l.forEach((c,d)=>{n.set(c,d)})})}computeViews(t,n,r,a){let l=Gr();const c=Uu(),d=function(){return Uu()}();return n.forEach((g,m)=>{const y=r.get(m.key);a.has(m.key)&&(y===void 0||y.mutation instanceof Gs)?l=l.insert(m.key,m):y!==void 0?(c.set(m.key,y.mutation.getFieldMask()),zu(y.mutation,m,y.mutation.getFieldMask(),ge.now())):c.set(m.key,Qn.empty())}),this.recalculateAndSaveOverlays(t,l).next(g=>(g.forEach((m,y)=>c.set(m,y)),n.forEach((m,y)=>{var v;return d.set(m,new l4(y,(v=c.get(m))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(t,n){const r=Uu();let a=new ve((c,d)=>c-d),l=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(c=>{for(const d of c)d.keys().forEach(g=>{const m=n.get(g);if(m===null)return;let y=r.get(g)||Qn.empty();y=d.applyToLocalView(m,y),r.set(g,y);const v=(a.get(d.batchId)||Gt()).add(g);a=a.insert(d.batchId,v)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),m=g.key,y=g.value,v=XA();y.forEach(T=>{if(!l.has(T)){const A=eb(n.get(T),r.get(T));A!==null&&v.set(T,A),l=l.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(t,m,v))}return dt.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,a){return function(c){return Rt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):jA(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,a):this.getDocumentsMatchingCollectionQuery(t,n,r,a)}getNextDocuments(t,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,a-l.size):dt.resolve(Ca());let d=Xu,g=l;return c.next(m=>dt.forEach(m,(y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(y)?dt.resolve():this.remoteDocumentCache.getEntry(t,y).next(T=>{g=g.insert(y,T)}))).next(()=>this.populateOverlays(t,m,l)).next(()=>this.computeViews(t,g,m,Gt())).next(y=>({batchId:d,changes:KA(y)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Rt(n)).next(r=>{let a=Mu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(t,n,r,a){const l=n.collectionGroup;let c=Mu();return this.indexManager.getCollectionParents(t,l).next(d=>dt.forEach(d,g=>{const m=function(v,T){return new _l(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,g.child(l));return this.getDocumentsMatchingCollectionQuery(t,m,r,a).next(y=>{y.forEach((v,T)=>{c=c.insert(v,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,n,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,l,a))).next(c=>{l.forEach((g,m)=>{const y=m.getKey();c.get(y)===null&&(c=c.insert(y,yn.newInvalidDocument(y)))});let d=Mu();return c.forEach((g,m)=>{const y=l.get(g);y!==void 0&&zu(y.mutation,m,Qn.empty(),ge.now()),Wf(n,m)&&(d=d.insert(g,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return dt.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:or(a.createTime)}}(n)),dt.resolve()}getNamedQuery(t,n){return dt.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(a){return{name:a.name,query:JV(a.bundledQuery),readTime:or(a.readTime)}}(n)),dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(){this.overlays=new ve(Rt.comparator),this.Qr=new Map}getOverlay(t,n){return dt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Ca();return dt.forEach(n,a=>this.getOverlay(t,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((a,l)=>{this.St(t,n,l)}),dt.resolve()}removeOverlaysForBatchId(t,n,r){const a=this.Qr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(r)),dt.resolve()}getOverlaysForCollection(t,n,r){const a=Ca(),l=n.length+1,c=new Rt(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const g=d.getNext().value,m=g.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===l&&g.largestBatchId>r&&a.set(g.getKey(),g)}return dt.resolve(a)}getOverlaysForCollectionGroup(t,n,r,a){let l=new ve((m,y)=>m-y);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let y=l.get(m.largestBatchId);y===null&&(y=Ca(),l=l.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=Ca(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((m,y)=>d.set(m,y)),!(d.size()>=a)););return dt.resolve(d)}St(t,n,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Qr.get(a.largestBatchId).delete(r.key);this.Qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new NV(n,r));let l=this.Qr.get(n);l===void 0&&(l=Gt(),this.Qr.set(n,l)),this.Qr.set(n,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(t){return dt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,dt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this.$r=new $e(en.Ur),this.Kr=new $e(en.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const r=new en(t,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.zr(new en(t,n))}jr(t,n){t.forEach(r=>this.removeReference(r,n))}Hr(t){const n=new Rt(new de([])),r=new en(n,t),a=new en(n,t+1),l=[];return this.Kr.forEachInRange([r,a],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new Rt(new de([])),r=new en(n,t),a=new en(n,t+1);let l=Gt();return this.Kr.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(t){const n=new en(t,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class en{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return Rt.comparator(t.key,n.key)||Lt(t.Zr,n.Zr)}static Wr(t,n){return Lt(t.Zr,n.Zr)||Rt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new $e(en.Ur)}checkEmpty(t){return dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new xV(l,n,r,a);this.mutationQueue.push(c);for(const d of a)this.Xr=this.Xr.add(new en(d.key,l)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return dt.resolve(c)}lookupMutationBatch(t,n){return dt.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,a=this.ti(r),l=a<0?0:a;return dt.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return dt.resolve(this.mutationQueue.length===0?Wp:this.nr-1)}getAllMutationBatches(t){return dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new en(n,0),a=new en(n,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([r,a],c=>{const d=this.ei(c.Zr);l.push(d)}),dt.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new $e(Lt);return n.forEach(a=>{const l=new en(a,0),c=new en(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],d=>{r=r.add(d.Zr)})}),dt.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,a=r.length+1;let l=r;Rt.isDocumentKey(l)||(l=l.child(""));const c=new en(new Rt(l),0);let d=new $e(Lt);return this.Xr.forEachWhile(g=>{const m=g.key.path;return!!r.isPrefixOf(m)&&(m.length===a&&(d=d.add(g.Zr)),!0)},c),dt.resolve(this.ni(d))}ni(t){const n=[];return t.forEach(r=>{const a=this.ei(r);a!==null&&n.push(a)}),n}removeMutationBatch(t,n){ne(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return dt.forEach(n.mutations,a=>{const l=new en(a.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,n){const r=new en(n,0),a=this.Xr.firstAfterOrEqual(r);return dt.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,dt.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(t){this.ii=t,this.docs=function(){return new ve(Rt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,a=this.docs.get(r),l=a?a.size:0,c=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return dt.resolve(r?r.document.mutableCopy():yn.newInvalidDocument(n))}getEntries(t,n){let r=Gr();return n.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():yn.newInvalidDocument(a))}),dt.resolve(r)}getDocumentsMatchingQuery(t,n,r,a){let l=Gr();const c=n.path,d=new Rt(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:m,value:{document:y}}=g.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||jM(FM(y),r)<=0||(a.has(y.key)||Wf(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return dt.resolve(l)}getAllFromCollectionGroup(t,n,r,a){Nt(9500)}si(t,n){return dt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new m4(this)}getSize(t){return dt.resolve(this.size)}}class m4 extends o4{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?n.push(this.Br.addEntry(t,a)):this.Br.removeEntry(r)}),dt.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(t){this.persistence=t,this.oi=new za(n=>ey(n),ny),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this._i=0,this.ai=new oy,this.targetCount=0,this.ui=cl.cr()}forEachTarget(t,n){return this.oi.forEach((r,a)=>n(a)),dt.resolve()}getLastRemoteSnapshotVersion(t){return dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return dt.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),dt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),dt.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new cl(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,dt.resolve()}updateTargetData(t,n){return this.Tr(n),dt.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,dt.resolve()}removeTargets(t,n,r){let a=0;const l=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(t,d.targetId)),a++)}),dt.waitFor(l).next(()=>a)}getTargetCount(t){return dt.resolve(this.targetCount)}getTargetData(t,n){const r=this.oi.get(n)||null;return dt.resolve(r)}addMatchingKeys(t,n,r){return this.ai.Gr(n,r),dt.resolve()}removeMatchingKeys(t,n,r){this.ai.jr(n,r);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach(c=>{l.push(a.markPotentiallyOrphaned(t,c))}),dt.waitFor(l)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),dt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ai.Yr(n);return dt.resolve(r)}containsKey(t,n){return dt.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(t,n){this.ci={},this.overlays={},this.li=new Kf(0),this.hi=!1,this.hi=!0,this.Pi=new f4,this.referenceDelegate=t(this),this.Ti=new p4(this),this.indexManager=new t4,this.remoteDocumentCache=function(a){return new g4(a)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new WV(n),this.Ei=new c4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new h4,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ci[t.toKey()];return r||(r=new d4(n,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,r){_t("MemoryPersistence","Starting transaction:",t);const a=new y4(this.li.next());return this.referenceDelegate.di(),r(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(t,n){return dt.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,n)))}}class y4 extends $M{constructor(t){super(),this.currentSequenceNumber=t}}class ly{constructor(t){this.persistence=t,this.Vi=new oy,this.mi=null}static fi(t){return new ly(t)}get gi(){if(this.mi)return this.mi;throw Nt(60996)}addReference(t,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),dt.resolve()}removeReference(t,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),dt.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),dt.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(a=>this.gi.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>r.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dt.forEach(this.gi,r=>{const a=Rt.fromPath(r);return this.pi(t,a).next(l=>{l||n.removeEntry(a,Mt.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return dt.or([()=>dt.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class Df{constructor(t,n){this.persistence=t,this.yi=new za(r=>XM(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=a4(this,n)}static fi(t,n){return new Df(t,n)}di(){}Ai(t){return dt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(a=>r+a))}br(t){let n=0;return this.yr(t,r=>{n++}).next(()=>n)}yr(t,n){return dt.forEach(this.yi,(r,a)=>this.Dr(t,r,a).next(l=>l?dt.resolve():n(a)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(t,c=>this.Dr(t,c,n).next(d=>{d||(r++,l.removeEntry(c,Mt.min()))})).next(()=>l.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),dt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),dt.resolve()}removeReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),dt.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),dt.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=nf(t.data.value)),n}Dr(t,n,r){return dt.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const a=this.yi.get(n);return dt.resolve(a!==void 0&&a>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(t,n,r,a){this.targetId=t,this.fromCache=n,this.ds=r,this.As=a}static Rs(t,n){let r=Gt(),a=Gt();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new uy(t,n.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return dO()?8:YM(_n())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,r,a){const l={result:null};return this.ws(t,n).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(t,n,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new _4;return this.Ss(t,n,c).next(d=>{if(l.result=d,this.fs)return this.Ds(t,n,c,d.size)})}).next(()=>l.result)}Ds(t,n,r,a){return r.documentReadCount<this.gs?(zo()<=jt.DEBUG&&_t("QueryEngine","SDK will not create cache indexes for query:",Bo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),dt.resolve()):(zo()<=jt.DEBUG&&_t("QueryEngine","Query:",Bo(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ps*a?(zo()<=jt.DEBUG&&_t("QueryEngine","The SDK decides to create cache indexes for query:",Bo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ar(n))):dt.resolve())}ws(t,n){if(MT(n))return dt.resolve(null);let r=ar(n);return this.indexManager.getIndexType(t,r).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=pp(n,null,"F"),r=ar(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(l=>{const c=Gt(...l);return this.ys.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,r).next(g=>{const m=this.vs(n,d);return this.Cs(n,m,c,g.readTime)?this.ws(t,pp(n,null,"F")):this.Fs(t,m,n,g)}))})))}bs(t,n,r,a){return MT(n)||a.isEqual(Mt.min())?dt.resolve(null):this.ys.getDocuments(t,r).next(l=>{const c=this.vs(n,l);return this.Cs(n,c,r,a)?dt.resolve(null):(zo()<=jt.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Bo(n)),this.Fs(t,c,n,qM(a,Xu)).next(d=>d))})}vs(t,n){let r=new $e($A(t));return n.forEach((a,l)=>{Wf(t,l)&&(r=r.add(l))}),r}Cs(t,n,r,a){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const l=t.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(t,n,r){return zo()<=jt.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",Bo(n)),this.ys.getDocumentsMatchingQuery(t,n,Us.min(),r)}Fs(t,n,r,a){return this.ys.getDocumentsMatchingQuery(t,r,a).next(l=>(n.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="LocalStore",E4=3e8;class T4{constructor(t,n,r,a){this.persistence=t,this.Ms=n,this.serializer=a,this.xs=new ve(Lt),this.Os=new za(l=>ey(l),ny),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new u4(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function w4(e,t,n,r){return new T4(e,t,n,r)}async function mb(e,t){const n=Vt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,n.Ls(t),n.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let g=Gt();for(const m of a){c.push(m.batchId);for(const y of m.mutations)g=g.add(y.key)}for(const m of l){d.push(m.batchId);for(const y of m.mutations)g=g.add(y.key)}return n.localDocuments.getDocuments(r,g).next(m=>({ks:m,removedBatchIds:c,addedBatchIds:d}))})})}function S4(e,t){const n=Vt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=t.batch.keys(),l=n.Bs.newChangeBuffer({trackRemovals:!0});return function(d,g,m,y){const v=m.batch,T=v.keys();let A=dt.resolve();return T.forEach(k=>{A=A.next(()=>y.getEntry(g,k)).next(L=>{const O=m.docVersions.get(k);ne(O!==null,48541),L.version.compareTo(O)<0&&(v.applyToRemoteDocument(L,m),L.isValidDocument()&&(L.setReadTime(m.commitVersion),y.addEntry(L)))})}),A.next(()=>d.mutationQueue.removeMutationBatch(g,v))}(n,r,t,l).next(()=>l.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=Gt();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(g=g.add(d.batch.mutations[m].key));return g}(t))).next(()=>n.localDocuments.getDocuments(r,a))})}function pb(e){const t=Vt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function A4(e,t){const n=Vt(e),r=t.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const d=[];t.targetChanges.forEach((y,v)=>{const T=a.get(v);if(!T)return;d.push(n.Ti.removeMatchingKeys(l,y.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(l,y.addedDocuments,v)));let A=T.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(v)!==null?A=A.withResumeToken(hn.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,r)),a=a.insert(v,A),function(L,O,H){return L.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=E4?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(T,A,y)&&d.push(n.Ti.updateTargetData(l,A))});let g=Gr(),m=Gt();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(b4(l,c,t.documentUpdates).next(y=>{g=y.qs,m=y.Qs})),!r.isEqual(Mt.min())){const y=n.Ti.getLastRemoteSnapshotVersion(l).next(v=>n.Ti.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(y)}return dt.waitFor(d).next(()=>c.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,g,m)).next(()=>g)}).then(l=>(n.xs=a,l))}function b4(e,t,n){let r=Gt(),a=Gt();return n.forEach(l=>r=r.add(l)),t.getEntries(e,r).next(l=>{let c=Gr();return n.forEach((d,g)=>{const m=l.get(d);g.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(d)),g.isNoDocument()&&g.version.isEqual(Mt.min())?(t.removeEntry(d,g.readTime),c=c.insert(d,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(g),c=c.insert(d,g)):_t(cy,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",g.version)}),{qs:c,Qs:a}})}function R4(e,t){const n=Vt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=Wp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function I4(e,t){const n=Vt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return n.Ti.getTargetData(r,t).next(l=>l?(a=l,dt.resolve(a)):n.Ti.allocateTargetId(r).next(c=>(a=new xs(t,c,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=n.xs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(t,r.targetId)),r})}async function Tp(e,t,n){const r=Vt(e),a=r.xs.get(t),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!yl(c))throw c;_t(cy,`Failed to update sequence numbers for target ${t}: ${c}`)}r.xs=r.xs.remove(t),r.Os.delete(a.target)}function $T(e,t,n){const r=Vt(e);let a=Mt.min(),l=Gt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(g,m,y){const v=Vt(g),T=v.Os.get(y);return T!==void 0?dt.resolve(v.xs.get(T)):v.Ti.getTargetData(m,y)}(r,c,ar(t)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,d.targetId).next(g=>{l=g})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,t,n?a:Mt.min(),n?l:Gt())).next(d=>(C4(r,gV(t),d),{documents:d,$s:l})))}function C4(e,t,n){let r=e.Ns.get(t)||Mt.min();n.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),e.Ns.set(t,r)}class YT{constructor(){this.activeTargetIds=EV()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class x4{constructor(){this.xo=new YT,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,r){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new YT,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="ConnectivityMonitor";class XT{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){_t(KT,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){_t(KT,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kh=null;function wp(){return Kh===null?Kh=function(){return 268435456+Math.round(2147483648*Math.random())}():Kh++,"0x"+Kh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="RestConnection",D4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class O4{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${r}/databases/${a}`,this.Go=this.databaseId.database===bf?`project_id=${r}`:`project_id=${r}&database_id=${a}`}zo(t,n,r,a,l){const c=wp(),d=this.jo(t,n.toUriEncodedString());_t(Pm,`Sending RPC '${t}' ${c}:`,d,r);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,a,l);const{host:m}=new URL(d),y=dl(m);return this.Jo(t,d,g,r,y).then(v=>(_t(Pm,`Received RPC '${t}' ${c}: `,v),v),v=>{throw al(Pm,`RPC '${t}' ${c} failed with error: `,v,"url: ",d,"request:",r),v})}Yo(t,n,r,a,l,c){return this.zo(t,n,r,a,l)}Ho(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ml}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,l)=>t[l]=a),r&&r.headers.forEach((a,l)=>t[l]=a)}jo(t,n){const r=D4[t];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class V4 extends O4{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,a,l){const c=wp();return new Promise((d,g)=>{const m=new _A;m.setWithCredentials(!0),m.listenOnce(vA.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case ef.NO_ERROR:const v=m.getResponseJson();_t(mn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(v)),d(v);break;case ef.TIMEOUT:_t(mn,`RPC '${t}' ${c} timed out`),g(new vt(ft.DEADLINE_EXCEEDED,"Request time out"));break;case ef.HTTP_ERROR:const T=m.getStatus();if(_t(mn,`RPC '${t}' ${c} failed with status:`,T,"response text:",m.getResponseText()),T>0){let A=m.getResponseJson();Array.isArray(A)&&(A=A[0]);const k=A?.error;if(k&&k.status&&k.message){const L=function(H){const q=H.toLowerCase().replace(/_/g,"-");return Object.values(ft).indexOf(q)>=0?q:ft.UNKNOWN}(k.status);g(new vt(L,k.message))}else g(new vt(ft.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new vt(ft.UNAVAILABLE,"Connection failed."));break;default:Nt(9055,{h_:t,streamId:c,P_:m.getLastErrorCode(),T_:m.getLastError()})}}finally{_t(mn,`RPC '${t}' ${c} completed.`)}});const y=JSON.stringify(a);_t(mn,`RPC '${t}' ${c} sending request:`,a),m.send(n,"POST",y,r,15)})}I_(t,n,r){const a=wp(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=wA(),d=TA(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(g.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const y=l.join("");_t(mn,`Creating RPC '${t}' stream ${a}: ${y}`,g);const v=c.createWebChannel(y,g);this.E_(v);let T=!1,A=!1;const k=new M4({Zo:O=>{A?_t(mn,`Not sending because RPC '${t}' stream ${a} is closed:`,O):(T||(_t(mn,`Opening RPC '${t}' stream ${a} transport.`),v.open(),T=!0),_t(mn,`RPC '${t}' stream ${a} sending:`,O),v.send(O))},Xo:()=>v.close()}),L=(O,H,q)=>{O.listen(H,G=>{try{q(G)}catch(B){setTimeout(()=>{throw B},0)}})};return L(v,Ou.EventType.OPEN,()=>{A||(_t(mn,`RPC '${t}' stream ${a} transport opened.`),k.__())}),L(v,Ou.EventType.CLOSE,()=>{A||(A=!0,_t(mn,`RPC '${t}' stream ${a} transport closed`),k.u_(),this.d_(v))}),L(v,Ou.EventType.ERROR,O=>{A||(A=!0,al(mn,`RPC '${t}' stream ${a} transport errored. Name:`,O.name,"Message:",O.message),k.u_(new vt(ft.UNAVAILABLE,"The operation could not be completed")))}),L(v,Ou.EventType.MESSAGE,O=>{var H;if(!A){const q=O.data[0];ne(!!q,16349);const G=q,B=G?.error||((H=G[0])===null||H===void 0?void 0:H.error);if(B){_t(mn,`RPC '${t}' stream ${a} received error:`,B);const Y=B.status;let rt=function(R){const V=Le[R];if(V!==void 0)return ib(V)}(Y),M=B.message;rt===void 0&&(rt=ft.INTERNAL,M="Unknown error status: "+Y+" with message "+B.message),A=!0,k.u_(new vt(rt,M)),v.close()}else _t(mn,`RPC '${t}' stream ${a} received:`,q),k.c_(q)}}),L(d,EA.STAT_EVENT,O=>{O.stat===up.PROXY?_t(mn,`RPC '${t}' stream ${a} detected buffering proxy`):O.stat===up.NOPROXY&&_t(mn,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{k.a_()},0),k}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function Lm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(e){return new UV(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(t,n,r=1e3,a=1.5,l=6e4){this.xi=t,this.timerId=n,this.A_=r,this.R_=a,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),a=Math.max(0,n-r);a>0&&_t("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="PersistentStream";class _b{constructor(t,n,r,a,l,c,d,g){this.xi=t,this.S_=r,this.D_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new yb(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===ft.RESOURCE_EXHAUSTED?(jr(n.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ft.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.v_===n&&this.z_(r,a)},r=>{t(()=>{const a=new vt(ft.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(a)})})}z_(t,n){const r=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{r(()=>this.j_(a))}),this.stream.onMessage(a=>{r(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return _t(QT,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(_t(QT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class k4 extends _b{constructor(t,n,r,a,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=HV(this.serializer,t),r=function(l){if(!("targetChange"in l))return Mt.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Mt.min():c.readTime?or(c.readTime):Mt.min()}(t);return this.listener.Y_(n,r)}Z_(t){const n={};n.database=Ep(this.serializer),n.addTarget=function(l,c){let d;const g=c.target;if(d=gp(g)?{documents:jV(l,g)}:{query:GV(l,g).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=ab(l,c.resumeToken);const m=yp(l,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(Mt.min())>0){d.readTime=Nf(l,c.snapshotVersion.toTimestamp());const m=yp(l,c.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,t);const r=YV(this.serializer,t);r&&(n.labels=r),this.Q_(n)}X_(t){const n={};n.database=Ep(this.serializer),n.removeTarget=t,this.Q_(n)}}class P4 extends _b{constructor(t,n,r,a,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,n){return this.connection.I_("Write",t,n)}J_(t){return ne(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ne(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){ne(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const n=FV(t.writeResults,t.commitTime),r=or(t.commitTime);return this.listener.ra(r,n)}ia(){const t={};t.database=Ep(this.serializer),this.Q_(t)}ta(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>qV(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{}class U4 extends L4{constructor(t,n,r,a){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new vt(ft.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,r,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(t,_p(n,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new vt(ft.UNKNOWN,l.toString())})}Yo(t,n,r,a,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(t,_p(n,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new vt(ft.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class z4{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(jr(n),this.ua=!1):_t("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="RemoteStore";class B4{constructor(t,n,r,a,l){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{r.enqueueAndForget(async()=>{Ba(this)&&(_t(ka,"Restarting streams for network reachability change."),await async function(g){const m=Vt(g);m.da.add(4),await fc(m),m.Va.set("Unknown"),m.da.delete(4),await rd(m)}(this))})}),this.Va=new z4(r,a)}}async function rd(e){if(Ba(e))for(const t of e.Aa)await t(!0)}async function fc(e){for(const t of e.Aa)await t(!1)}function vb(e,t){const n=Vt(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),gy(n)?dy(n):vl(n).N_()&&fy(n,t))}function hy(e,t){const n=Vt(e),r=vl(n);n.Ea.delete(t),r.N_()&&Eb(n,t),n.Ea.size===0&&(r.N_()?r.k_():Ba(n)&&n.Va.set("Unknown"))}function fy(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Mt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}vl(e).Z_(t)}function Eb(e,t){e.ma.Ke(t),vl(e).X_(t)}function dy(e){e.ma=new VV({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),vl(e).start(),e.Va.ca()}function gy(e){return Ba(e)&&!vl(e).O_()&&e.Ea.size>0}function Ba(e){return Vt(e).da.size===0}function Tb(e){e.ma=void 0}async function H4(e){e.Va.set("Online")}async function q4(e){e.Ea.forEach((t,n)=>{fy(e,t)})}async function F4(e,t){Tb(e),gy(e)?(e.Va.Pa(t),dy(e)):e.Va.set("Unknown")}async function j4(e,t,n){if(e.Va.set("Online"),t instanceof sb&&t.state===2&&t.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ea.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ea.delete(d),a.ma.removeTarget(d))}(e,t)}catch(r){_t(ka,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Of(e,r)}else if(t instanceof af?e.ma.Xe(t):t instanceof rb?e.ma.ot(t):e.ma.nt(t),!n.isEqual(Mt.min()))try{const r=await pb(e.localStore);n.compareTo(r)>=0&&await function(l,c){const d=l.ma.It(c);return d.targetChanges.forEach((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const y=l.Ea.get(m);y&&l.Ea.set(m,y.withResumeToken(g.resumeToken,c))}}),d.targetMismatches.forEach((g,m)=>{const y=l.Ea.get(g);if(!y)return;l.Ea.set(g,y.withResumeToken(hn.EMPTY_BYTE_STRING,y.snapshotVersion)),Eb(l,g);const v=new xs(y.target,g,m,y.sequenceNumber);fy(l,v)}),l.remoteSyncer.applyRemoteEvent(d)}(e,n)}catch(r){_t(ka,"Failed to raise snapshot:",r),await Of(e,r)}}async function Of(e,t,n){if(!yl(t))throw t;e.da.add(1),await fc(e),e.Va.set("Offline"),n||(n=()=>pb(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{_t(ka,"Retrying IndexedDB access"),await n(),e.da.delete(1),await rd(e)})}function wb(e,t){return t().catch(n=>Of(e,n,t))}async function sd(e){const t=Vt(e),n=qs(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:Wp;for(;G4(t);)try{const a=await R4(t.localStore,r);if(a===null){t.Ia.length===0&&n.k_();break}r=a.batchId,$4(t,a)}catch(a){await Of(t,a)}Sb(t)&&Ab(t)}function G4(e){return Ba(e)&&e.Ia.length<10}function $4(e,t){e.Ia.push(t);const n=qs(e);n.N_()&&n.ea&&n.ta(t.mutations)}function Sb(e){return Ba(e)&&!qs(e).O_()&&e.Ia.length>0}function Ab(e){qs(e).start()}async function Y4(e){qs(e).ia()}async function K4(e){const t=qs(e);for(const n of e.Ia)t.ta(n.mutations)}async function X4(e,t,n){const r=e.Ia.shift(),a=ry.from(r,t,n);await wb(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await sd(e)}async function Q4(e,t){t&&qs(e).ea&&await async function(r,a){if(function(c){return OV(c)&&c!==ft.ABORTED}(a.code)){const l=r.Ia.shift();qs(r).L_(),await wb(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await sd(r)}}(e,t),Sb(e)&&Ab(e)}async function ZT(e,t){const n=Vt(e);n.asyncQueue.verifyOperationInProgress(),_t(ka,"RemoteStore received new credentials");const r=Ba(n);n.da.add(3),await fc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await rd(n)}async function Z4(e,t){const n=Vt(e);t?(n.da.delete(2),await rd(n)):t||(n.da.add(2),await fc(n),n.Va.set("Unknown"))}function vl(e){return e.fa||(e.fa=function(n,r,a){const l=Vt(n);return l.oa(),new k4(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(e.datastore,e.asyncQueue,{e_:H4.bind(null,e),n_:q4.bind(null,e),i_:F4.bind(null,e),Y_:j4.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),gy(e)?dy(e):e.Va.set("Unknown")):(await e.fa.stop(),Tb(e))})),e.fa}function qs(e){return e.ga||(e.ga=function(n,r,a){const l=Vt(n);return l.oa(),new P4(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:Y4.bind(null,e),i_:Q4.bind(null,e),na:K4.bind(null,e),ra:X4.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await sd(e)):(await e.ga.stop(),e.Ia.length>0&&(_t(ka,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(t,n,r,a,l){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,a,l){const c=Date.now()+r,d=new my(t,n,c,a,l);return d.start(r),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new vt(ft.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function py(e,t){if(jr("AsyncQueue",`${t}: ${e}`),yl(e))return new vt(ft.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{static emptySet(t){return new Qo(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Rt.comparator(n.key,r.key):(n,r)=>Rt.comparator(n.key,r.key),this.keyedMap=Mu(),this.sortedSet=new ve(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Qo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Qo;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.pa=new ve(Rt.comparator)}track(t){const n=t.doc.key,r=this.pa.get(n);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(n,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(n):t.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):Nt(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,r)=>{t.push(r)}),t}}class hl{constructor(t,n,r,a,l,c,d,g,m){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(t,n,r,a,l){const c=[];return n.forEach(d=>{c.push({type:0,doc:d})}),new hl(t,n,Qo.emptySet(n),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Zf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class J4{constructor(){this.queries=JT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const a=Vt(n),l=a.queries;a.queries=JT(),l.forEach((c,d)=>{for(const g of d.Sa)g.onError(r)})})(this,new vt(ft.ABORTED,"Firestore shutting down"))}}function JT(){return new za(e=>GA(e),Zf)}async function tk(e,t){const n=Vt(e);let r=3;const a=t.query;let l=n.queries.get(a);l?!l.Da()&&t.va()&&(r=2):(l=new W4,r=t.va()?0:1);try{switch(r){case 0:l.ba=await n.onListen(a,!0);break;case 1:l.ba=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=py(c,`Initialization of query '${Bo(t.query)}' failed`);return void t.onError(d)}n.queries.set(a,l),l.Sa.push(t),t.Fa(n.onlineState),l.ba&&t.Ma(l.ba)&&yy(n)}async function ek(e,t){const n=Vt(e),r=t.query;let a=3;const l=n.queries.get(r);if(l){const c=l.Sa.indexOf(t);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=t.va()?0:1:!l.Da()&&t.va()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nk(e,t){const n=Vt(e);let r=!1;for(const a of t){const l=a.query,c=n.queries.get(l);if(c){for(const d of c.Sa)d.Ma(a)&&(r=!0);c.ba=a}}r&&yy(n)}function ik(e,t,n){const r=Vt(e),a=r.queries.get(t);if(a)for(const l of a.Sa)l.onError(n);r.queries.delete(t)}function yy(e){e.Ca.forEach(t=>{t.next()})}var Sp,tw;(tw=Sp||(Sp={})).xa="default",tw.Cache="cache";class rk{constructor(t,n,r){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const a of t.docChanges)a.type!==3&&r.push(a);t=new hl(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=hl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==Sp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(t){this.key=t}}class Rb{constructor(t){this.key=t}}class sk{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Gt(),this.mutatedKeys=Gt(),this.Za=$A(t),this.Xa=new Qo(this.Za)}get eu(){return this.Ha}tu(t,n){const r=n?n.nu:new WT,a=n?n.Xa:this.Xa;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((y,v)=>{const T=a.get(y),A=Wf(this.query,v)?v:null,k=!!T&&this.mutatedKeys.has(T.key),L=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let O=!1;T&&A?T.data.isEqual(A.data)?k!==L&&(r.track({type:3,doc:A}),O=!0):this.ru(T,A)||(r.track({type:2,doc:A}),O=!0,(g&&this.Za(A,g)>0||m&&this.Za(A,m)<0)&&(d=!0)):!T&&A?(r.track({type:0,doc:A}),O=!0):T&&!A&&(r.track({type:1,doc:T}),O=!0,(g||m)&&(d=!0)),O&&(A?(c=c.add(A),l=L?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{Xa:c,nu:r,Cs:d,mutatedKeys:l}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,a){const l=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const c=t.nu.wa();c.sort((y,v)=>function(A,k){const L=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nt(20277,{Vt:O})}};return L(A)-L(k)}(y.type,v.type)||this.Za(y.doc,v.doc)),this.iu(r),a=a!=null&&a;const d=n&&!a?this.su():[],g=this.Ya.size===0&&this.current&&!a?1:0,m=g!==this.Ja;return this.Ja=g,c.length!==0||m?{snapshot:new hl(this.query,t.Xa,l,c,t.mutatedKeys,g===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new WT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Gt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return t.forEach(r=>{this.Ya.has(r)||n.push(new Rb(r))}),this.Ya.forEach(r=>{t.has(r)||n.push(new bb(r))}),n}au(t){this.Ha=t.$s,this.Ya=Gt();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return hl.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const _y="SyncEngine";class ak{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class ok{constructor(t){this.key=t,this.cu=!1}}class lk{constructor(t,n,r,a,l,c){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new za(d=>GA(d),Zf),this.Pu=new Map,this.Tu=new Set,this.Iu=new ve(Rt.comparator),this.Eu=new Map,this.du=new oy,this.Au={},this.Ru=new Map,this.Vu=cl.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function uk(e,t,n=!0){const r=Ob(e);let a;const l=r.hu.get(t);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.uu()):a=await Ib(r,t,n,!0),a}async function ck(e,t){const n=Ob(e);await Ib(n,t,!0,!1)}async function Ib(e,t,n,r){const a=await I4(e.localStore,ar(t)),l=a.targetId,c=e.sharedClientState.addLocalQueryTarget(l,n);let d;return r&&(d=await hk(e,t,l,c==="current",a.resumeToken)),e.isPrimaryClient&&n&&vb(e.remoteStore,a),d}async function hk(e,t,n,r,a){e.fu=(v,T,A)=>async function(L,O,H,q){let G=O.view.tu(H);G.Cs&&(G=await $T(L.localStore,O.query,!1).then(({documents:M})=>O.view.tu(M,G)));const B=q&&q.targetChanges.get(O.targetId),Y=q&&q.targetMismatches.get(O.targetId)!=null,rt=O.view.applyChanges(G,L.isPrimaryClient,B,Y);return nw(L,O.targetId,rt.ou),rt.snapshot}(e,v,T,A);const l=await $T(e.localStore,t,!0),c=new sk(t,l.$s),d=c.tu(l.documents),g=hc.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",a),m=c.applyChanges(d,e.isPrimaryClient,g);nw(e,n,m.ou);const y=new ak(t,n,c);return e.hu.set(t,y),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),m.snapshot}async function fk(e,t,n){const r=Vt(e),a=r.hu.get(t),l=r.Pu.get(a.targetId);if(l.length>1)return r.Pu.set(a.targetId,l.filter(c=>!Zf(c,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Tp(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),n&&hy(r.remoteStore,a.targetId),Ap(r,a.targetId)}).catch(pl)):(Ap(r,a.targetId),await Tp(r.localStore,a.targetId,!0))}async function dk(e,t){const n=Vt(e),r=n.hu.get(t),a=n.Pu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hy(n.remoteStore,r.targetId))}async function gk(e,t,n){const r=Tk(e);try{const a=await function(c,d){const g=Vt(c),m=ge.now(),y=d.reduce((A,k)=>A.add(k.key),Gt());let v,T;return g.persistence.runTransaction("Locally write mutations","readwrite",A=>{let k=Gr(),L=Gt();return g.Bs.getEntries(A,y).next(O=>{k=O,k.forEach((H,q)=>{q.isValidDocument()||(L=L.add(H))})}).next(()=>g.localDocuments.getOverlayedDocuments(A,k)).next(O=>{v=O;const H=[];for(const q of d){const G=IV(q,v.get(q.key).overlayedDocument);G!=null&&H.push(new Gs(q.key,G,PA(G.value.mapValue),Zn.exists(!0)))}return g.mutationQueue.addMutationBatch(A,m,H,d)}).next(O=>{T=O;const H=O.applyToLocalDocumentSet(v,L);return g.documentOverlayCache.saveOverlays(A,O.batchId,H)})}).then(()=>({batchId:T.batchId,changes:KA(v)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,g){let m=c.Au[c.currentUser.toKey()];m||(m=new ve(Lt)),m=m.insert(d,g),c.Au[c.currentUser.toKey()]=m}(r,a.batchId,n),await dc(r,a.changes),await sd(r.remoteStore)}catch(a){const l=py(a,"Failed to persist write");n.reject(l)}}async function Cb(e,t){const n=Vt(e);try{const r=await A4(n.localStore,t);t.targetChanges.forEach((a,l)=>{const c=n.Eu.get(l);c&&(ne(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.cu=!0:a.modifiedDocuments.size>0?ne(c.cu,14607):a.removedDocuments.size>0&&(ne(c.cu,42227),c.cu=!1))}),await dc(n,r,t)}catch(r){await pl(r)}}function ew(e,t,n){const r=Vt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.hu.forEach((l,c)=>{const d=c.view.Fa(t);d.snapshot&&a.push(d.snapshot)}),function(c,d){const g=Vt(c);g.onlineState=d;let m=!1;g.queries.forEach((y,v)=>{for(const T of v.Sa)T.Fa(d)&&(m=!0)}),m&&yy(g)}(r.eventManager,t),a.length&&r.lu.Y_(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function mk(e,t,n){const r=Vt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const a=r.Eu.get(t),l=a&&a.key;if(l){let c=new ve(Rt.comparator);c=c.insert(l,yn.newNoDocument(l,Mt.min()));const d=Gt().add(l),g=new nd(Mt.min(),new Map,new ve(Lt),c,d);await Cb(r,g),r.Iu=r.Iu.remove(l),r.Eu.delete(t),vy(r)}else await Tp(r.localStore,t,!1).then(()=>Ap(r,t,n)).catch(pl)}async function pk(e,t){const n=Vt(e),r=t.batch.batchId;try{const a=await S4(n.localStore,t);Nb(n,r,null),xb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await dc(n,a)}catch(a){await pl(a)}}async function yk(e,t,n){const r=Vt(e);try{const a=await function(c,d){const g=Vt(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return g.mutationQueue.lookupMutationBatch(m,d).next(v=>(ne(v!==null,37113),y=v.keys(),g.mutationQueue.removeMutationBatch(m,v))).next(()=>g.mutationQueue.performConsistencyCheck(m)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(m,y,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>g.localDocuments.getDocuments(m,y))})}(r.localStore,t);Nb(r,t,n),xb(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await dc(r,a)}catch(a){await pl(a)}}function xb(e,t){(e.Ru.get(t)||[]).forEach(n=>{n.resolve()}),e.Ru.delete(t)}function Nb(e,t,n){const r=Vt(e);let a=r.Au[r.currentUser.toKey()];if(a){const l=a.get(t);l&&(n?l.reject(n):l.resolve(),a=a.remove(t)),r.Au[r.currentUser.toKey()]=a}}function Ap(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(r=>{e.du.containsKey(r)||Db(e,r)})}function Db(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);n!==null&&(hy(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),vy(e))}function nw(e,t,n){for(const r of n)r instanceof bb?(e.du.addReference(r.key,t),_k(e,r)):r instanceof Rb?(_t(_y,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||Db(e,r.key)):Nt(19791,{pu:r})}function _k(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(_t(_y,"New document in limbo: "+n),e.Tu.add(r),vy(e))}function vy(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new Rt(de.fromString(t)),r=e.Vu.next();e.Eu.set(r,new ok(n)),e.Iu=e.Iu.insert(n,r),vb(e.remoteStore,new xs(ar(FA(n.path)),r,"TargetPurposeLimboResolution",Kf.le))}}async function dc(e,t,n){const r=Vt(e),a=[],l=[],c=[];r.hu.isEmpty()||(r.hu.forEach((d,g)=>{c.push(r.fu(g,t,n).then(m=>{var y;if((m||n)&&r.isPrimaryClient){const v=m?!m.fromCache:(y=n?.targetChanges.get(g.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(m){a.push(m);const v=uy.Rs(g.targetId,m);l.push(v)}}))}),await Promise.all(c),r.lu.Y_(a),await async function(g,m){const y=Vt(g);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>dt.forEach(m,T=>dt.forEach(T.ds,A=>y.persistence.referenceDelegate.addReference(v,T.targetId,A)).next(()=>dt.forEach(T.As,A=>y.persistence.referenceDelegate.removeReference(v,T.targetId,A)))))}catch(v){if(!yl(v))throw v;_t(cy,"Failed to update sequence numbers: "+v)}for(const v of m){const T=v.targetId;if(!v.fromCache){const A=y.xs.get(T),k=A.snapshotVersion,L=A.withLastLimboFreeSnapshotVersion(k);y.xs=y.xs.insert(T,L)}}}(r.localStore,l))}async function vk(e,t){const n=Vt(e);if(!n.currentUser.isEqual(t)){_t(_y,"User change. New user:",t.toKey());const r=await mb(n.localStore,t);n.currentUser=t,function(l,c){l.Ru.forEach(d=>{d.forEach(g=>{g.reject(new vt(ft.CANCELLED,c))})}),l.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await dc(n,r.ks)}}function Ek(e,t){const n=Vt(e),r=n.Eu.get(t);if(r&&r.cu)return Gt().add(r.key);{let a=Gt();const l=n.Pu.get(t);if(!l)return a;for(const c of l){const d=n.hu.get(c);a=a.unionWith(d.view.eu)}return a}}function Ob(e){const t=Vt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Cb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ek.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mk.bind(null,t),t.lu.Y_=nk.bind(null,t.eventManager),t.lu.gu=ik.bind(null,t.eventManager),t}function Tk(e){const t=Vt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pk.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=yk.bind(null,t),t}class Mf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=id(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return w4(this.persistence,new v4,t.initialUser,this.serializer)}Su(t){return new gb(ly.fi,this.serializer)}bu(t){return new x4}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mf.provider={build:()=>new Mf};class wk extends Mf{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){ne(this.persistence.referenceDelegate instanceof Df,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new r4(r,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?Mn.withCacheSize(this.cacheSizeBytes):Mn.DEFAULT;return new gb(r=>Df.fi(r,n),this.serializer)}}class bp{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ew(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vk.bind(null,this.syncEngine),await Z4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new J4}()}createDatastore(t){const n=id(t.databaseInfo.databaseId),r=function(l){return new V4(l)}(t.databaseInfo);return function(l,c,d,g){return new U4(l,c,d,g)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,a,l,c,d){return new B4(r,a,l,c,d)}(this.localStore,this.datastore,t.asyncQueue,n=>ew(this.syncEngine,n,0),function(){return XT.C()?new XT:new N4}())}createSyncEngine(t,n){return function(a,l,c,d,g,m,y){const v=new lk(a,l,c,d,g,m);return y&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(a){const l=Vt(a);_t(ka,"RemoteStore shutting down."),l.da.add(5),await fc(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bp.provider={build:()=>new bp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):jr("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="FirestoreClient";class Ak{constructor(t,n,r,a,l){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=pn.UNAUTHENTICATED,this.clientId=RA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{_t(Fs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(_t(Fs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=py(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Um(e,t){e.asyncQueue.verifyOperationInProgress(),_t(Fs,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async a=>{r.isEqual(a)||(await mb(t.localStore,a),r=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function iw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await bk(e);_t(Fs,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>ZT(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,a)=>ZT(t.remoteStore,a)),e._onlineComponents=t}async function bk(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){_t(Fs,"Using user provided OfflineComponentProvider");try{await Um(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(a){return a.name==="FirebaseError"?a.code===ft.FAILED_PRECONDITION||a.code===ft.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;al("Error using user provided cache. Falling back to memory cache: "+n),await Um(e,new Mf)}}else _t(Fs,"Using default OfflineComponentProvider"),await Um(e,new wk(void 0));return e._offlineComponents}async function Mb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(_t(Fs,"Using user provided OnlineComponentProvider"),await iw(e,e._uninitializedComponentsProvider._online)):(_t(Fs,"Using default OnlineComponentProvider"),await iw(e,new bp))),e._onlineComponents}function Rk(e){return Mb(e).then(t=>t.syncEngine)}async function Ik(e){const t=await Mb(e),n=t.eventManager;return n.onListen=uk.bind(null,t.syncEngine),n.onUnlisten=fk.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ck.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=dk.bind(null,t.syncEngine),n}function Ck(e,t,n={}){const r=new Ps;return e.asyncQueue.enqueueAndForget(async()=>function(l,c,d,g,m){const y=new Sk({next:T=>{y.xu(),c.enqueueAndForget(()=>ek(l,v)),T.fromCache&&g.source==="server"?m.reject(new vt(ft.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),v=new rk(d,y,{includeMetadataChanges:!0,Qa:!0});return tk(l,v)}(await Ik(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(e,t,n){if(!n)throw new vt(ft.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function xk(e,t,n,r){if(t===!0&&r===!0)throw new vt(ft.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function sw(e){if(!Rt.isDocumentKey(e))throw new vt(ft.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function aw(e){if(Rt.isDocumentKey(e))throw new vt(ft.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ad(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Nt(12329,{type:typeof e})}function Pa(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new vt(ft.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ad(e);throw new vt(ft.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="firestore.googleapis.com",ow=!0;class lw{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new vt(ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Pb,this.ssl=ow}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:ow;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=db;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<n4)throw new vt(ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}xk("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vb((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new vt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new vt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new vt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class od{constructor(t,n,r,a){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new vt(ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new vt(ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lw(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new MM;switch(r.type){case"firstParty":return new LM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new vt(ft.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=rw.get(n);r&&(_t("ComponentProvider","Removing Datastore"),rw.delete(n),r.terminate())}(this),Promise.resolve()}}function Nk(e,t,n,r={}){var a;e=Pa(e,od);const l=dl(t),c=e._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:e._getEmulatorOptions()}),g=`${t}:${n}`;l&&(uA(`https://${g}`),cA("Firestore",!0)),c.host!==Pb&&c.host!==g&&al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:g,ssl:l,emulatorOptions:r});if(!Oa(m,d)&&(e._setSettings(m),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=pn.MOCK_USER;else{y=rO(r.mockUserToken,(a=e._app)===null||a===void 0?void 0:a.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new vt(ft.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new pn(T)}e._authCredentials=new VM(new AA(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ha(this.firestore,t,this._query)}}class Wn{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Wn(this.firestore,t,this._key)}}class Ls extends Ha{constructor(t,n,r){super(t,n,FA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Wn(this.firestore,null,new Rt(t))}withConverter(t){return new Ls(this.firestore,t,this._path)}}function Ey(e,t,...n){if(e=Ye(e),kb("collection","path",t),e instanceof od){const r=de.fromString(t,...n);return aw(r),new Ls(e,null,r)}{if(!(e instanceof Wn||e instanceof Ls))throw new vt(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(de.fromString(t,...n));return aw(r),new Ls(e.firestore,null,r)}}function El(e,t,...n){if(e=Ye(e),arguments.length===1&&(t=RA.newId()),kb("doc","path",t),e instanceof od){const r=de.fromString(t,...n);return sw(r),new Wn(e,null,new Rt(r))}{if(!(e instanceof Wn||e instanceof Ls))throw new vt(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(de.fromString(t,...n));return sw(r),new Wn(e.firestore,e instanceof Ls?e.converter:null,new Rt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="AsyncQueue";class cw{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new yb(this,"async_queue_retry"),this.rc=()=>{const r=Lm();r&&_t(uw,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const n=Lm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=Lm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Ps;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!yl(t))throw t;_t(uw,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,jr("INTERNAL UNHANDLED ERROR: ",hw(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(t,n,r){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const a=my.createAndSchedule(this,t,n,r,l=>this.uc(l));return this.Zu.push(a),a}oc(){this.Xu&&Nt(47125,{cc:hw(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function hw(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class gc extends od{constructor(t,n,r,a){super(t,n,r,a),this.type="firestore",this._queue=new cw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new cw(t),this._firestoreClient=void 0,await t}}}function Dk(e,t){const n=typeof e=="object"?e:gA(),r=typeof e=="string"?e:bf,a=Qp(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=nO("firestore");l&&Nk(a,...l)}return a}function Ty(e){if(e._terminated)throw new vt(ft.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Ok(e),e._firestoreClient}function Ok(e){var t,n,r;const a=e._freezeSettings(),l=function(d,g,m,y){return new WM(d,g,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,Vb(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,a);e._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),e._firestoreClient=new Ak(e._authCredentials,e._appCheckCredentials,e._queue,l,e._componentsProvider&&function(d){const g=d?._online.build();return{_offline:d?._offline.build(g),_online:g}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new fl(hn.fromBase64String(t))}catch(n){throw new vt(ft.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new fl(hn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new vt(ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new vt(ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new vt(ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Lt(this._lat,t._lat)||Lt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=/^__.*__$/;class Vk{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Gs(t,this.data,this.fieldMask,n,this.fieldTransforms):new cc(t,this.data,n,this.fieldTransforms)}}class Lb{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Gs(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ub(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nt(40011,{Ic:e})}}class by{constructor(t,n,r,a,l,c){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new by(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.dc({path:r,Rc:!1});return a.Vc(t),a}mc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.dc({path:r,Rc:!1});return a.Ec(),a}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return Vf(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(Ub(this.Ic)&&Mk.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class kk{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||id(t)}bc(t,n,r,a=!1){return new by({Ic:t,methodName:n,wc:r,path:cn.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ry(e){const t=e._freezeSettings(),n=id(e._databaseId);return new kk(e._databaseId,!!t.ignoreUndefinedProperties,n)}function zb(e,t,n,r,a,l={}){const c=e.bc(l.merge||l.mergeFields?2:0,t,n,a);Iy("Data must be an object, but it was:",c,r);const d=Bb(r,c);let g,m;if(l.merge)g=new Qn(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const T=Rp(t,v,n);if(!c.contains(T))throw new vt(ft.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);qb(y,T)||y.push(T)}g=new Qn(y),m=c.fieldTransforms.filter(v=>g.covers(v.field))}else g=null,m=c.fieldTransforms;return new Vk(new Vn(d),g,m)}class ud extends wy{_toFieldTransform(t){if(t.Ic!==2)throw t.Ic===1?t.gc(`${this._methodName}() can only appear at the top level of your update data`):t.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ud}}function Pk(e,t,n,r){const a=e.bc(1,t,n);Iy("Data must be an object, but it was:",a,r);const l=[],c=Vn.empty();js(r,(g,m)=>{const y=Cy(t,g,n);m=Ye(m);const v=a.mc(y);if(m instanceof ud)l.push(y);else{const T=mc(m,v);T!=null&&(l.push(y),c.set(y,T))}});const d=new Qn(l);return new Lb(c,d,a.fieldTransforms)}function Lk(e,t,n,r,a,l){const c=e.bc(1,t,n),d=[Rp(t,r,n)],g=[a];if(l.length%2!=0)throw new vt(ft.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)d.push(Rp(t,l[T])),g.push(l[T+1]);const m=[],y=Vn.empty();for(let T=d.length-1;T>=0;--T)if(!qb(m,d[T])){const A=d[T];let k=g[T];k=Ye(k);const L=c.mc(A);if(k instanceof ud)m.push(A);else{const O=mc(k,L);O!=null&&(m.push(A),y.set(A,O))}}const v=new Qn(m);return new Lb(y,v,c.fieldTransforms)}function Uk(e,t,n,r=!1){return mc(n,e.bc(r?4:3,t))}function mc(e,t){if(Hb(e=Ye(e)))return Iy("Unsupported field value:",t,e),Bb(e,t);if(e instanceof wy)return function(r,a){if(!Ub(a.Ic))throw a.gc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let g=mc(d,a.fc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}}(e,t)}return function(r,a){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TV(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=ge.fromDate(r);return{timestampValue:Nf(a.serializer,l)}}if(r instanceof ge){const l=new ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nf(a.serializer,l)}}if(r instanceof Sy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fl)return{bytesValue:ab(a.serializer,r._byteString)};if(r instanceof Wn){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ay(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Ay)return function(c,d){return{mapValue:{fields:{[VA]:{stringValue:kA},[Rf]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw d.gc("VectorValues must only contain numeric values.");return iy(d.serializer,m)})}}}}}}(r,a);throw a.gc(`Unsupported field value: ${ad(r)}`)}(e,t)}function Bb(e,t){const n={};return CA(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):js(e,(r,a)=>{const l=mc(a,t.Ac(r));l!=null&&(n[r]=l)}),{mapValue:{fields:n}}}function Hb(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ge||e instanceof Sy||e instanceof fl||e instanceof Wn||e instanceof wy||e instanceof Ay)}function Iy(e,t,n){if(!Hb(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const r=ad(n);throw r==="an object"?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function Rp(e,t,n){if((t=Ye(t))instanceof ld)return t._internalPath;if(typeof t=="string")return Cy(e,t);throw Vf("Field path arguments must be of type string or ",e,!1,void 0,n)}const zk=new RegExp("[~\\*/\\[\\]]");function Cy(e,t,n){if(t.search(zk)>=0)throw Vf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ld(...t.split("."))._internalPath}catch{throw Vf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Vf(e,t,n,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${t}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${r}`),c&&(g+=` in document ${a}`),g+=")"),new vt(ft.INVALID_ARGUMENT,d+e+g)}function qb(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(t,n,r,a,l){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Bk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(cd("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Bk extends Fb{data(){return super.data()}}function cd(e,t){return typeof t=="string"?Cy(e,t):t instanceof ld?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new vt(ft.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xy{}class jb extends xy{}function qk(e,t,...n){let r=[];t instanceof xy&&r.push(t),r=r.concat(n),function(l){const c=l.filter(g=>g instanceof Ny).length,d=l.filter(g=>g instanceof hd).length;if(c>1||c>0&&d>0)throw new vt(ft.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)e=a._apply(e);return e}class hd extends jb{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new hd(t,n,r)}_apply(t){const n=this._parse(t);return Gb(t._query,n),new Ha(t.firestore,t.converter,mp(t._query,n))}_parse(t){const n=Ry(t.firestore);return function(l,c,d,g,m,y,v){let T;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new vt(ft.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){dw(v,y);const k=[];for(const L of v)k.push(fw(g,l,L));T={arrayValue:{values:k}}}else T=fw(g,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||dw(v,y),T=Uk(d,c,v,y==="in"||y==="not-in");return Ue.create(m,y,T)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Fk(e,t,n){const r=t,a=cd("where",e);return hd._create(a,r,n)}class Ny extends xy{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Ny(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Oi.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const g of d)Gb(c,g),c=mp(c,g)}(t._query,n),new Ha(t.firestore,t.converter,mp(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Dy extends jb{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Dy(t,n)}_apply(t){const n=function(a,l,c){if(a.startAt!==null)throw new vt(ft.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new vt(ft.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ju(l,c)}(t._query,this._field,this._direction);return new Ha(t.firestore,t.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new _l(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,n))}}function jk(e,t="asc"){const n=t,r=cd("orderBy",e);return Dy._create(r,n)}function fw(e,t,n){if(typeof(n=Ye(n))=="string"){if(n==="")throw new vt(ft.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jA(t)&&n.indexOf("/")!==-1)throw new vt(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(de.fromString(n));if(!Rt.isDocumentKey(r))throw new vt(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return IT(e,new Rt(r))}if(n instanceof Wn)return IT(e,n._key);throw new vt(ft.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ad(n)}.`)}function dw(e,t){if(!Array.isArray(e)||e.length===0)throw new vt(ft.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Gb(e,t){const n=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new vt(ft.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new vt(ft.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Gk{convertValue(t,n="none"){switch(Hs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ce(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Bs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Nt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return js(t,(a,l)=>{r[a]=this.convertValue(l,n)}),r}convertVectorValue(t){var n,r,a;const l=(a=(r=(n=t.fields)===null||n===void 0?void 0:n[Rf].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>Ce(c.doubleValue));return new Ay(l)}convertGeoPoint(t){return new Sy(Ce(t.latitude),Ce(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Qf(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qu(t));default:return null}}convertTimestamp(t){const n=zs(t);return new ge(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=de.fromString(t);ne(fb(r),9688,{name:t});const a=new Zu(r.get(1),r.get(3)),l=new Rt(r.popFirst(5));return a.isEqual(n)||jr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class $k extends Fb{constructor(t,n,r,a,l,c){super(t,n,r,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(cd("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class of extends $k{data(t={}){return super.data(t)}}class Yk{constructor(t,n,r,a){this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new Xh(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new of(this._firestore,this._userDataWriter,r.key,r,new Xh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new vt(ft.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const g=new of(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Xh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const g=new of(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Xh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,y=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:Kk(d.type),doc:g,oldIndex:m,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Kk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nt(61501,{type:e})}}class Xk extends Gk{constructor(t){super(),this.firestore=t}convertBytes(t){return new fl(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Wn(this.firestore,null,n)}}function Oy(e){e=Pa(e,Ha);const t=Pa(e.firestore,gc),n=Ty(t),r=new Xk(t);return Hk(e._query),Ck(n,e._query).then(a=>new Yk(t,r,e,a))}function My(e,t,n){e=Pa(e,Wn);const r=Pa(e.firestore,gc),a=$b(e.converter,t,n);return Vy(r,[zb(Ry(r),"setDoc",e._key,a,e.converter!==null,n).toMutation(e._key,Zn.none())])}function Qk(e){return Vy(Pa(e.firestore,gc),[new ed(e._key,Zn.none())])}function Vy(e,t){return function(r,a){const l=new Ps;return r.asyncQueue.enqueueAndForget(async()=>gk(await Rk(r),a,l)),l.promise}(Ty(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ry(t)}set(t,n,r){this._verifyNotCommitted();const a=zm(t,this._firestore),l=$b(a.converter,n,r),c=zb(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,Zn.none())),this}update(t,n,r,...a){this._verifyNotCommitted();const l=zm(t,this._firestore);let c;return c=typeof(n=Ye(n))=="string"||n instanceof ld?Lk(this._dataReader,"WriteBatch.update",l._key,n,r,a):Pk(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(c.toMutation(l._key,Zn.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=zm(t,this._firestore);return this._mutations=this._mutations.concat(new ed(n._key,Zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new vt(ft.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zm(e,t){if((e=Ye(e)).firestore!==t)throw new vt(ft.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(e){return Ty(e=Pa(e,gc)),new Zk(e,t=>Vy(e,t))}(function(t,n=!0){(function(a){ml=a})(gl),sl(new Ma("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new gc(new kM(r.getProvider("auth-internal")),new UM(c,r.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new vt(ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zu(m.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),Vs(mT,pT,t),Vs(mT,pT,"esm2017")})();function ky(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function Kb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Wk=Kb,Xb=new lc("auth","Firebase",Kb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf=new Kp("@firebase/auth");function Jk(e,...t){kf.logLevel<=jt.WARN&&kf.warn(`Auth (${gl}): ${e}`,...t)}function lf(e,...t){kf.logLevel<=jt.ERROR&&kf.error(`Auth (${gl}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(e,...t){throw Py(e,...t)}function lr(e,...t){return Py(e,...t)}function Qb(e,t,n){const r=Object.assign(Object.assign({},Wk()),{[t]:n});return new lc("auth","Firebase",r).create(t,{appName:e.name})}function Br(e){return Qb(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Py(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Xb.create(e,...t)}function xt(e,t,...n){if(!e)throw Py(t,...n)}function Ur(e){const t="INTERNAL ASSERTION FAILED: "+e;throw lf(t),new Error(t)}function $r(e,t){e||Ur(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function tP(){return gw()==="http:"||gw()==="https:"}function gw(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tP()||cO()||"connection"in navigator)?navigator.onLine:!0}function nP(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(t,n){this.shortDelay=t,this.longDelay=n,$r(n>t,"Short delay should be less than long delay!"),this.isMobile=oO()||hO()}get(){return eP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(e,t){$r(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sP=new pc(3e4,6e4);function $s(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ys(e,t,n,r,a={}){return Wb(e,a,async()=>{let l={},c={};r&&(t==="GET"?c=r:l={body:JSON.stringify(r)});const d=uc(Object.assign({key:e.config.apiKey},c)).slice(1),g=await e._getAdditionalHeaders();g["Content-Type"]="application/json",e.languageCode&&(g["X-Firebase-Locale"]=e.languageCode);const m=Object.assign({method:t,headers:g},l);return uO()||(m.referrerPolicy="no-referrer"),e.emulatorConfig&&dl(e.emulatorConfig.host)&&(m.credentials="include"),Zb.fetch()(await Jb(e,e.config.apiHost,n,d),m)})}async function Wb(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},iP),t);try{const a=new oP(e),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Qh(e,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[g,m]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qh(e,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Qh(e,"email-already-in-use",c);if(g==="USER_DISABLED")throw Qh(e,"user-disabled",c);const y=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Qb(e,y,m);Mi(e,y)}}catch(a){if(a instanceof Yr)throw a;Mi(e,"network-request-failed",{message:String(a)})}}async function yc(e,t,n,r,a={}){const l=await Ys(e,t,n,r,a);return"mfaPendingCredential"in l&&Mi(e,"multi-factor-auth-required",{_serverResponse:l}),l}async function Jb(e,t,n,r){const a=`${t}${n}?${r}`,l=e,c=l.config.emulator?Ly(e.config,a):`${e.config.apiScheme}://${a}`;return rP.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function aP(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(lr(this.auth,"network-request-failed")),sP.get())})}}function Qh(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=lr(e,t,r);return a.customData._tokenResponse=n,a}function mw(e){return e!==void 0&&e.enterprise!==void 0}class lP{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return aP(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uP(e,t){return Ys(e,"GET","/v2/recaptchaConfig",$s(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(e,t){return Ys(e,"POST","/v1/accounts:delete",t)}async function Pf(e,t){return Ys(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function hP(e,t=!1){const n=Ye(e),r=await n.getIdToken(t),a=Uy(r);xt(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:Bu(Bm(a.auth_time)),issuedAtTime:Bu(Bm(a.iat)),expirationTime:Bu(Bm(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Bm(e){return Number(e)*1e3}function Uy(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return lf("JWT malformed, contained fewer than 3 sections"),null;try{const a=sA(n);return a?JSON.parse(a):(lf("Failed to decode base64 JWT payload"),null)}catch(a){return lf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function pw(e){const t=Uy(e);return xt(t,"internal-error"),xt(typeof t.exp<"u","internal-error"),xt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Yr&&fP(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function fP({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bu(this.lastLoginAt),this.creationTime=Bu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lf(e){var t;const n=e.auth,r=await e.getIdToken(),a=await nc(e,Pf(n,{idToken:r}));xt(a?.users.length,n,"internal-error");const l=a.users[0];e._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?t1(l.providerUserInfo):[],d=mP(e.providerData,c),g=e.isAnonymous,m=!(e.email&&l.passwordHash)&&!d?.length,y=g?m:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Cp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(e,v)}async function gP(e){const t=Ye(e);await Lf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function mP(e,t){return[...e.filter(r=>!t.some(a=>a.providerId===r.providerId)),...t]}function t1(e){return e.map(t=>{var{providerId:n}=t,r=ky(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pP(e,t){const n=await Wb(e,{},async()=>{const r=uc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=e.config,c=await Jb(e,a,"/v1/token",`key=${l}`),d=await e._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:d,body:r};return e.emulatorConfig&&dl(e.emulatorConfig.host)&&(g.credentials="include"),Zb.fetch()(c,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yP(e,t){return Ys(e,"POST","/v2/accounts:revokeToken",$s(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){xt(t.idToken,"internal-error"),xt(typeof t.idToken<"u","internal-error"),xt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):pw(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){xt(t.length!==0,"internal-error");const n=pw(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:a,expiresIn:l}=await pP(t,n);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:a,expirationTime:l}=n,c=new Zo;return r&&(xt(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),a&&(xt(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),l&&(xt(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Zo,this.toJSON())}_performRefresh(){return Ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(e,t){xt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Di{constructor(t){var{uid:n,auth:r,stsTokenManager:a}=t,l=ky(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Cp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await nc(this,this.stsTokenManager.getToken(this.auth,t));return xt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return hP(this,t)}reload(){return gP(this)}_assign(t){this!==t&&(xt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Di(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){xt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await Lf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_i(this.auth.app))return Promise.reject(Br(this.auth));const t=await this.getIdToken();return await nc(this,cP(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,a,l,c,d,g,m,y;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,T=(a=n.email)!==null&&a!==void 0?a:void 0,A=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,k=(c=n.photoURL)!==null&&c!==void 0?c:void 0,L=(d=n.tenantId)!==null&&d!==void 0?d:void 0,O=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,H=(m=n.createdAt)!==null&&m!==void 0?m:void 0,q=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:G,emailVerified:B,isAnonymous:Y,providerData:rt,stsTokenManager:M}=n;xt(G&&M,t,"internal-error");const b=Zo.fromJSON(this.name,M);xt(typeof G=="string",t,"internal-error"),Ts(v,t.name),Ts(T,t.name),xt(typeof B=="boolean",t,"internal-error"),xt(typeof Y=="boolean",t,"internal-error"),Ts(A,t.name),Ts(k,t.name),Ts(L,t.name),Ts(O,t.name),Ts(H,t.name),Ts(q,t.name);const R=new Di({uid:G,auth:t,email:T,emailVerified:B,displayName:v,isAnonymous:Y,photoURL:k,phoneNumber:A,tenantId:L,stsTokenManager:b,createdAt:H,lastLoginAt:q});return rt&&Array.isArray(rt)&&(R.providerData=rt.map(V=>Object.assign({},V))),O&&(R._redirectEventId=O),R}static async _fromIdTokenResponse(t,n,r=!1){const a=new Zo;a.updateFromServerResponse(n);const l=new Di({uid:n.localId,auth:t,stsTokenManager:a,isAnonymous:r});return await Lf(l),l}static async _fromGetAccountInfoResponse(t,n,r){const a=n.users[0];xt(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?t1(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Zo;d.updateFromIdToken(r);const g=new Di({uid:a.localId,auth:t,stsTokenManager:d,isAnonymous:c}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Cp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(g,m),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=new Map;function zr(e){$r(e instanceof Function,"Expected a class definition");let t=yw.get(e);return t?($r(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,yw.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}e1.type="NONE";const _w=e1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(e,t,n){return`firebase:${e}:${t}:${n}`}class Wo{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=uf(this.userKey,a.apiKey,l),this.fullPersistenceKey=uf("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Pf(this.auth,{idToken:t}).catch(()=>{});return n?Di._fromGetAccountInfoResponse(this.auth,n,t):null}return Di._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Wo(zr(_w),t,r);const a=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=a[0]||zr(_w);const c=uf(r,t.config.apiKey,t.name);let d=null;for(const m of n)try{const y=await m._get(c);if(y){let v;if(typeof y=="string"){const T=await Pf(t,{idToken:y}).catch(()=>{});if(!T)break;v=await Di._fromGetAccountInfoResponse(t,T,y)}else v=Di._fromJSON(t,y);m!==l&&(d=v),l=m;break}}catch{}const g=a.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Wo(l,t,r):(l=g[0],d&&await l._set(c,d.toJSON()),await Promise.all(n.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new Wo(l,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(s1(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(n1(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(o1(t))return"Blackberry";if(l1(t))return"Webos";if(i1(t))return"Safari";if((t.includes("chrome/")||r1(t))&&!t.includes("edge/"))return"Chrome";if(a1(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function n1(e=_n()){return/firefox\//i.test(e)}function i1(e=_n()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function r1(e=_n()){return/crios\//i.test(e)}function s1(e=_n()){return/iemobile/i.test(e)}function a1(e=_n()){return/android/i.test(e)}function o1(e=_n()){return/blackberry/i.test(e)}function l1(e=_n()){return/webos/i.test(e)}function zy(e=_n()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function _P(e=_n()){var t;return zy(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function vP(){return fO()&&document.documentMode===10}function u1(e=_n()){return zy(e)||a1(e)||l1(e)||o1(e)||/windows phone/i.test(e)||s1(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(e,t=[]){let n;switch(e){case"Browser":n=vw(_n());break;case"Worker":n=`${vw(_n())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${gl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=l=>new Promise((c,d)=>{try{const g=t(l);c(g)}catch(g){d(g)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TP(e,t={}){return Ys(e,"GET","/v2/passwordPolicy",$s(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=6;class SP{constructor(t){var n,r,a,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:wP,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,a,l,c,d;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,g),this.validatePasswordCharacterOptions(t,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(a=g.containsLowercaseLetter)!==null&&a!==void 0?a:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(c=g.containsNumericCharacter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),g}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),a&&(n.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<t.length;a++)r=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(t,n,r,a){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ew(this),this.idTokenSubscription=new Ew(this),this.beforeStateQueue=new EP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=zr(n)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await Wo.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Pf(this,{idToken:t}),r=await Di._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(_i(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=a?._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===d)&&g?.user&&(a=g.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return xt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Lf(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=nP()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(_i(this.app))return Promise.reject(Br(this));const n=t?Ye(t):null;return n&&xt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&xt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return _i(this.app)?Promise.reject(Br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return _i(this.app)?Promise.reject(Br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await TP(this),n=new SP(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new lc("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yP(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&zr(t)||this._popupRedirectResolver;xt(n,this,"argument-error"),this.redirectPersistenceManager=await Wo.create(this,[zr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(xt(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,r,a);return()=>{c=!0,g()}}else{const g=t.addObserver(n);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return xt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=c1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var t;if(_i(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n?.error&&Jk(`Error while retrieving App Check token: ${n.error}`),n?.token}}function qa(e){return Ye(e)}class Ew{constructor(t){this.auth=t,this.observer=null,this.addObserver=EO(n=>this.observer=n)}get next(){return xt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bP(e){fd=e}function h1(e){return fd.loadJS(e)}function RP(){return fd.recaptchaEnterpriseScript}function IP(){return fd.gapiScript}function CP(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class xP{constructor(){this.enterprise=new NP}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class NP{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const DP="recaptcha-enterprise",f1="NO_RECAPTCHA";class OP{constructor(t){this.type=DP,this.auth=qa(t)}async verify(t="verify",n=!1){async function r(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{uP(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new lP(g);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(g=>{d(g)})})}function a(l,c,d){const g=window.grecaptcha;mw(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:t}).then(m=>{c(m)}).catch(()=>{c(f1)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xP().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(d=>{if(!n&&mw(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=RP();g.length!==0&&(g+=d),h1(g).then(()=>{a(d,l,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function Tw(e,t,n,r=!1,a=!1){const l=new OP(e);let c;if(a)c=f1;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const d=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const g=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const g=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function xp(e,t,n,r,a){var l;if(!((l=e._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Tw(e,t,n,n==="getOobCode");return r(e,c)}else return r(e,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Tw(e,t,n,n==="getOobCode");return r(e,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(e,t){const n=Qp(e,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(Oa(l,t??{}))return a;Mi(a,"already-initialized")}return n.initialize({options:t})}function VP(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(zr);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function kP(e,t,n){const r=qa(e);xt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const a=!1,l=d1(t),{host:c,port:d}=PP(t),g=d===null?"":`:${d}`,m={url:`${l}//${c}${g}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){xt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xt(Oa(m,r.config.emulator)&&Oa(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,dl(c)?(uA(`${l}//${c}${g}`),cA("Auth",!0)):LP()}function d1(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function PP(e){const t=d1(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:ww(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:ww(c)}}}function ww(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function LP(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Ur("not implemented")}_getIdTokenResponse(t){return Ur("not implemented")}_linkToIdToken(t,n){return Ur("not implemented")}_getReauthenticationResolver(t){return Ur("not implemented")}}async function UP(e,t){return Ys(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zP(e,t){return yc(e,"POST","/v1/accounts:signInWithPassword",$s(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BP(e,t){return yc(e,"POST","/v1/accounts:signInWithEmailLink",$s(e,t))}async function HP(e,t){return yc(e,"POST","/v1/accounts:signInWithEmailLink",$s(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends By{constructor(t,n,r,a=null){super("password",r),this._email=t,this._password=n,this._tenantId=a}static _fromEmailAndPassword(t,n){return new ic(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new ic(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xp(t,n,"signInWithPassword",zP);case"emailLink":return BP(t,{email:this._email,oobCode:this._password});default:Mi(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xp(t,r,"signUpPassword",UP);case"emailLink":return HP(t,{idToken:n,email:this._email,oobCode:this._password});default:Mi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(e,t){return yc(e,"POST","/v1/accounts:signInWithIdp",$s(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP="http://localhost";class La extends By{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new La(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Mi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:a}=n,l=ky(n,["providerId","signInMethod"]);if(!r||!a)return null;const c=new La(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const n=this.buildRequest();return Jo(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Jo(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Jo(t,n)}buildRequest(){const t={requestUri:qP,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=uc(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jP(e){const t=Nu(Du(e)).link,n=t?Nu(Du(t)).deep_link_id:null,r=Nu(Du(e)).deep_link_id;return(r?Nu(Du(r)).link:null)||r||n||t||e}class Hy{constructor(t){var n,r,a,l,c,d;const g=Nu(Du(t)),m=(n=g.apiKey)!==null&&n!==void 0?n:null,y=(r=g.oobCode)!==null&&r!==void 0?r:null,v=FP((a=g.mode)!==null&&a!==void 0?a:null);xt(m&&y&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=y,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=g.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=g.tenantId)!==null&&d!==void 0?d:null}static parseLink(t){const n=jP(t);try{return new Hy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(){this.providerId=Tl.PROVIDER_ID}static credential(t,n){return ic._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=Hy.parseLink(n);return xt(r,"argument-error"),ic._fromEmailAndCode(t,r.code,r.tenantId)}}Tl.PROVIDER_ID="password";Tl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Tl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends g1{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends _c{constructor(){super("facebook.com")}static credential(t){return La._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bs.credentialFromTaggedObject(t)}static credentialFromError(t){return bs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bs.credential(t.oauthAccessToken)}catch{return null}}}bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";bs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return La._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Rs.credentialFromTaggedObject(t)}static credentialFromError(t){return Rs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Rs.credential(n,r)}catch{return null}}}Rs.GOOGLE_SIGN_IN_METHOD="google.com";Rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends _c{constructor(){super("github.com")}static credential(t){return La._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Is.credentialFromTaggedObject(t)}static credentialFromError(t){return Is.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Is.credential(t.oauthAccessToken)}catch{return null}}}Is.GITHUB_SIGN_IN_METHOD="github.com";Is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends _c{constructor(){super("twitter.com")}static credential(t,n){return La._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Cs.credentialFromTaggedObject(t)}static credentialFromError(t){return Cs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Cs.credential(n,r)}catch{return null}}}Cs.TWITTER_SIGN_IN_METHOD="twitter.com";Cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP(e,t){return yc(e,"POST","/v1/accounts:signUp",$s(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,a=!1){const l=await Di._fromIdTokenResponse(t,r,a),c=Sw(r);return new Ua({user:l,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const a=Sw(r);return new Ua({user:t,providerId:a,_tokenResponse:r,operationType:n})}}function Sw(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf extends Yr{constructor(t,n,r,a){var l;super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Uf.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,a){return new Uf(t,n,r,a)}}function m1(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Uf._fromErrorAndOperation(e,l,t,r):l})}async function $P(e,t,n=!1){const r=await nc(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ua._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YP(e,t,n=!1){const{auth:r}=e;if(_i(r.app))return Promise.reject(Br(r));const a="reauthenticate";try{const l=await nc(e,m1(r,a,t,e),n);xt(l.idToken,r,"internal-error");const c=Uy(l.idToken);xt(c,r,"internal-error");const{sub:d}=c;return xt(e.uid===d,r,"user-mismatch"),Ua._forOperation(e,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Mi(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(e,t,n=!1){if(_i(e.app))return Promise.reject(Br(e));const r="signIn",a=await m1(e,r,t),l=await Ua._fromIdTokenResponse(e,r,a);return n||await e._updateCurrentUser(l.user),l}async function KP(e,t){return p1(qa(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y1(e){const t=qa(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function XP(e,t,n){if(_i(e.app))return Promise.reject(Br(e));const r=qa(e),c=await xp(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GP).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&y1(e),g}),d=await Ua._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function QP(e,t,n){return _i(e.app)?Promise.reject(Br(e)):KP(Ye(e),Tl.credential(t,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&y1(e),r})}function ZP(e,t,n,r){return Ye(e).onIdTokenChanged(t,n,r)}function WP(e,t,n){return Ye(e).beforeAuthStateChanged(t,n)}function _1(e,t,n,r){return Ye(e).onAuthStateChanged(t,n,r)}function v1(e){return Ye(e).signOut()}const zf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zf,"1"),this.storage.removeItem(zf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=1e3,t3=10;class T1 extends E1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=u1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&t(n,a,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((c,d,g)=>{this.notifyListeners(c,g)});return}const r=t.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);vP()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,t3):a()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},JP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}T1.type="LOCAL";const e3=T1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1 extends E1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}w1.type="SESSION";const S1=w1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(a=>a.isListeningto(t));if(n)return n;const r=new dd(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async m=>m(n.origin,l)),g=await n3(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,g)=>{const m=qy("",20);a.port1.start();const y=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(v){const T=v;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(T.data.response);break;default:clearTimeout(y),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:m,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(){return window}function r3(e){ur().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(){return typeof ur().WorkerGlobalScope<"u"&&typeof ur().importScripts=="function"}async function s3(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a3(){var e;return((e=navigator?.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function o3(){return A1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="firebaseLocalStorageDb",l3=1,Bf="firebaseLocalStorage",R1="fbase_key";class vc{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gd(e,t){return e.transaction([Bf],t?"readwrite":"readonly").objectStore(Bf)}function u3(){const e=indexedDB.deleteDatabase(b1);return new vc(e).toPromise()}function Np(){const e=indexedDB.open(b1,l3);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(Bf,{keyPath:R1})}catch(a){n(a)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(Bf)?t(r):(r.close(),await u3(),t(await Np()))})})}async function Aw(e,t,n){const r=gd(e,!0).put({[R1]:t,value:n});return new vc(r).toPromise()}async function c3(e,t){const n=gd(e,!1).get(t),r=await new vc(n).toPromise();return r===void 0?null:r.value}function bw(e,t){const n=gd(e,!0).delete(t);return new vc(n).toPromise()}const h3=800,f3=3;class I1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Np(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>f3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return A1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dd._getInstance(o3()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await s3(),!this.activeServiceWorker)return;this.sender=new i3(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||a3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Np();return await Aw(t,zf,"1"),await bw(t,zf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Aw(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>c3(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>bw(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=gd(a,!1).getAll();return new vc(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),h3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}I1.type="LOCAL";const d3=I1;new pc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(e,t){return t?zr(t):(xt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy extends By{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Jo(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Jo(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Jo(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function m3(e){return p1(e.auth,new Fy(e),e.bypassAuthState)}function p3(e){const{auth:t,user:n}=e;return xt(n,t,"internal-error"),YP(n,new Fy(e),e.bypassAuthState)}async function y3(e){const{auth:t,user:n}=e;return xt(n,t,"internal-error"),$P(n,new Fy(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(t,n,r,a,l=!1){this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(m){this.reject(m)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return m3;case"linkViaPopup":case"linkViaRedirect":return y3;case"reauthViaPopup":case"reauthViaRedirect":return p3;default:Mi(this.auth,"internal-error")}}resolve(t){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3=new pc(2e3,1e4);class jo extends C1{constructor(t,n,r,a,l){super(t,n,a,l),this.provider=r,this.authWindow=null,this.pollId=null,jo.currentPopupAction&&jo.currentPopupAction.cancel(),jo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return xt(t,this.auth,"internal-error"),t}async onExecution(){$r(this.filter.length===1,"Popup operations only handle one event");const t=qy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,_3.get())};t()}}jo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3="pendingRedirect",cf=new Map;class E3 extends C1{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=cf.get(this.auth._key());if(!t){try{const r=await T3(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}cf.set(this.auth._key(),t)}return this.bypassAuthState||cf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T3(e,t){const n=A3(t),r=S3(e);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function w3(e,t){cf.set(e._key(),t)}function S3(e){return zr(e._redirectPersistence)}function A3(e){return uf(v3,e.config.apiKey,e.name)}async function b3(e,t,n=!1){if(_i(e.app))return Promise.reject(Br(e));const r=qa(e),a=g3(r,t),c=await new E3(r,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3=10*60*1e3;class I3{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!C3(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!x1(t)){const a=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(lr(this.auth,a))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=R3&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rw(t))}saveEventToCache(t){this.cachedEventUids.add(Rw(t)),this.lastProcessedEventTime=Date.now()}}function Rw(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function x1({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function C3(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return x1(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x3(e,t={}){return Ys(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,D3=/^https?/;async function O3(e){if(e.config.emulator)return;const{authorizedDomains:t}=await x3(e);for(const n of t)try{if(M3(n))return}catch{}Mi(e,"unauthorized-domain")}function M3(e){const t=Ip(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const c=new URL(e);return c.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!D3.test(n))return!1;if(N3.test(e))return r===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3=new pc(3e4,6e4);function Iw(){const e=ur().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function k3(e){return new Promise((t,n)=>{var r,a,l;function c(){Iw(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Iw(),n(lr(e,"network-request-failed"))},timeout:V3.get()})}if(!((a=(r=ur().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)t(gapi.iframes.getContext());else if(!((l=ur().gapi)===null||l===void 0)&&l.load)c();else{const d=CP("iframefcb");return ur()[d]=()=>{gapi.load?c():n(lr(e,"network-request-failed"))},h1(`${IP()}?onload=${d}`).catch(g=>n(g))}}).catch(t=>{throw hf=null,t})}let hf=null;function P3(e){return hf=hf||k3(e),hf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=new pc(5e3,15e3),U3="__/auth/iframe",z3="emulator/auth/iframe",B3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function q3(e){const t=e.config;xt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ly(t,z3):`https://${e.config.authDomain}/${U3}`,r={apiKey:t.apiKey,appName:e.name,v:gl},a=H3.get(e.config.apiHost);a&&(r.eid=a);const l=e._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${uc(r).slice(1)}`}async function F3(e){const t=await P3(e),n=ur().gapi;return xt(n,e,"internal-error"),t.open({where:document.body,url:q3(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B3,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=lr(e,"network-request-failed"),d=ur().setTimeout(()=>{l(c)},L3.get());function g(){ur().clearTimeout(d),a(r)}r.ping(g).then(g,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G3=500,$3=600,Y3="_blank",K3="http://localhost";class Cw{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function X3(e,t,n,r=G3,a=$3){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const g=Object.assign(Object.assign({},j3),{width:r.toString(),height:a.toString(),top:l,left:c}),m=_n().toLowerCase();n&&(d=r1(m)?Y3:n),n1(m)&&(t=t||K3,g.scrollbars="yes");const y=Object.entries(g).reduce((T,[A,k])=>`${T}${A}=${k},`,"");if(_P(m)&&d!=="_self")return Q3(t||"",d),new Cw(null);const v=window.open(t||"",d,y);xt(v,e,"popup-blocked");try{v.focus()}catch{}return new Cw(v)}function Q3(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3="__/auth/handler",W3="emulator/auth/handler",J3=encodeURIComponent("fac");async function xw(e,t,n,r,a,l){xt(e.config.authDomain,e,"auth-domain-config-required"),xt(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:gl,eventId:a};if(t instanceof g1){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",vO(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(t instanceof _c){const y=t.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}e.tenantId&&(c.tid=e.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const g=await e._getAppCheckToken(),m=g?`#${J3}=${encodeURIComponent(g)}`:"";return`${t6(e)}?${uc(d).slice(1)}${m}`}function t6({config:e}){return e.emulator?Ly(e,W3):`https://${e.authDomain}/${Z3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="webStorageSupport";class e6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S1,this._completeRedirectFn=b3,this._overrideRedirectResult=w3}async _openPopup(t,n,r,a){var l;$r((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await xw(t,n,r,Ip(),a);return X3(t,c,qy())}async _openRedirect(t,n,r,a){await this._originValidation(t);const l=await xw(t,n,r,Ip(),a);return r3(l),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):($r(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await F3(t),r=new I3(t);return n.register("authEvent",a=>(xt(a?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Hm,{type:Hm},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[Hm];c!==void 0&&n(!!c),Mi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=O3(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return u1()||i1()||zy()}}const n6=e6;var Nw="@firebase/auth",Dw="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function s6(e){sl(new Ma("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;xt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:d,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:c1(e)},m=new AP(r,a,l,g);return VP(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),sl(new Ma("auth-internal",t=>{const n=qa(t.getProvider("auth").getImmediate());return(r=>new i6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vs(Nw,Dw,r6(e)),Vs(Nw,Dw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6=5*60,o6=lA("authIdTokenMaxAge")||a6;let Ow=null;const l6=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>o6)return;const a=n?.token;Ow!==a&&(Ow=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function u6(e=gA()){const t=Qp(e,"auth");if(t.isInitialized())return t.getImmediate();const n=MP(e,{popupRedirectResolver:n6,persistence:[d3,e3,S1]}),r=lA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=l6(l.toString());WP(n,c,()=>c(n.currentUser)),ZP(n,d=>c(d))}}const a=aA("auth");return a&&kP(n,`http://${a}`),n}function c6(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}bP({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=a=>{const l=lr("internal-error");l.customData=a,n(l)},r.type="text/javascript",r.charset="UTF-8",c6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});s6("Browser");const h6={apiKey:"AIzaSyByTZ08eCsc2wv0VIWUHNtHSdmAA_JI5hM",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},N1=dA(h6),Vi=Dk(N1),Go=u6(N1),ti={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},In={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function f6({onAuthed:e}){const[t,n]=W.useState(!1),[r,a]=W.useState(null),[l,c]=W.useState(""),[d,g]=W.useState(""),[m,y]=W.useState(!1),[v,T]=W.useState(!1),[A,k]=W.useState("");W.useEffect(()=>{const q=_1(Go,G=>{G?(n(!0),e(G),a(G)):(n(!1),a(null))});return()=>q()},[e]);const L=async q=>{q.preventDefault(),T(!0),k("");try{if(!l||!d)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l))throw new Error(In.INVALID_EMAIL);if(d.length<6)throw new Error(In.WEAK_PASSWORD);const B=await XP(Go,l,d);e(B.user)}catch(G){console.error("Sign up error:",G);let B="Failed to create account";G.code==="auth/email-already-in-use"?B=In.EMAIL_IN_USE:G.code==="auth/invalid-email"?B=In.INVALID_EMAIL:G.code==="auth/weak-password"?B=In.WEAK_PASSWORD:G.code==="auth/operation-not-allowed"?B="Email/password accounts are not enabled. Please contact support.":G.message&&(B=G.message),k(B)}finally{T(!1)}},O=async q=>{q.preventDefault(),T(!0),k("");try{if(!l||!d)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l))throw new Error(In.INVALID_EMAIL);const B=await QP(Go,l,d);e(B.user)}catch(G){console.error("Sign in error:",G);let B="Failed to sign in";G.code==="auth/user-not-found"?B=In.USER_NOT_FOUND:G.code==="auth/wrong-password"?B=In.WRONG_PASSWORD:G.code==="auth/invalid-email"?B=In.INVALID_EMAIL:G.code==="auth/user-disabled"?B="This account has been disabled. Please contact support.":G.code==="auth/too-many-requests"?B=In.TOO_MANY_REQUESTS:G.message&&(B=G.message),k(B)}finally{T(!1)}},H=async()=>{try{await v1(Go)}catch(q){k(q.message)}};return t?Tt.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",fontFamily:"Arial, sans-serif"},children:Tt.jsxs("div",{style:{padding:"2rem",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"#f9f9f9",textAlign:"center"},children:[Tt.jsxs("p",{style:{marginBottom:"1rem"},children:["Welcome, ",r?.email,"!"]}),Tt.jsx("button",{onClick:H,style:{padding:"0.5rem 1rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Sign Out"})]})}):Tt.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",fontFamily:"Arial, sans-serif",backgroundColor:"#f5f5f5"},children:Tt.jsxs("div",{style:{padding:"2rem",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"white",minWidth:"300px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[Tt.jsx("h2",{style:{textAlign:"center",marginBottom:"1.5rem"},children:m?"Sign Up":"Sign In"}),Tt.jsxs("form",{onSubmit:m?L:O,children:[Tt.jsx("input",{type:"email",placeholder:"Email",value:l,onChange:q=>c(q.target.value),required:!0,style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",border:"1px solid #ccc",borderRadius:"4px",fontSize:"1rem",boxSizing:"border-box"}}),Tt.jsx("input",{type:"password",placeholder:"Password",value:d,onChange:q=>g(q.target.value),required:!0,style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",border:"1px solid #ccc",borderRadius:"4px",fontSize:"1rem",boxSizing:"border-box"}}),Tt.jsx("button",{type:"submit",disabled:v,style:{width:"100%",padding:"0.75rem",backgroundColor:v?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"4px",fontSize:"1rem",cursor:v?"not-allowed":"pointer",marginBottom:"1rem"},children:v?"Loading...":m?"Sign Up":"Sign In"}),A&&Tt.jsx("p",{style:{color:"red",textAlign:"center",marginBottom:"1rem",fontSize:"0.9rem"},children:A})]}),Tt.jsxs("p",{style:{textAlign:"center",margin:0},children:[m?"Already have an account?":"Don't have an account?",Tt.jsx("button",{type:"button",onClick:()=>y(!m),style:{background:"none",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",marginLeft:"0.5rem",fontSize:"1rem"},children:m?"Sign In":"Sign Up"})]})]})})}function d6({allBoards:e,currentBoard:t,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:a,onSignOut:l,isLoading:c}){const[d,g]=W.useState(!1),m=async()=>{try{g(!0),await r()}catch(v){console.error("Error in sidebar create board:",v)}finally{g(!1)}},y=(v,T)=>{v.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&a(T)};return Tt.jsx(Tt.Fragment,{children:Tt.jsxs("div",{className:"sidebar",children:[Tt.jsxs("div",{className:"sidebar-header",children:[Tt.jsx("h2",{children:"Launch Hacks"}),Tt.jsx("button",{onClick:m,disabled:c||d,style:{opacity:c||d?.6:1,cursor:c||d?"not-allowed":"pointer"},children:d?"Creating...":"+ New Board"})]}),Tt.jsxs("div",{className:"sidebar-content",children:[c&&Tt.jsx("div",{className:"loading-indicator",children:"Switching boards..."}),Tt.jsxs("div",{style:{padding:"10px",fontSize:"12px",color:"#666"},children:["Boards: ",e?.length||0]}),Tt.jsx("ul",{children:e?.map(v=>(console.log("Rendering board:",v),Tt.jsxs("li",{onClick:()=>!c&&n(v.id),className:t?.id===v.id?"active":"",children:[Tt.jsx("span",{className:"board-name",children:v.name}),Tt.jsxs("div",{className:"board-actions",children:[v.isOpen&&Tt.jsx("span",{className:"open-indicator",children:"●"}),e.length>1&&Tt.jsx("button",{className:"delete-btn",onClick:T=>y(T,v.id),title:"Delete board",children:"×"})]})]},v.id)))})]}),Tt.jsx("div",{className:"sidebar-footer",children:Tt.jsx("button",{onClick:l,children:"Sign Out"})})]})})}function g6({name:e,onSetName:t,user:n,isSaving:r,isConceptMode:a,onToggleMode:l}){const[c,d]=W.useState(!1),[g,m]=W.useState(e||"");W.useEffect(()=>{m(e||"")},[e]);const y=T=>{T.key==="Enter"&&(t(g),d(!1))},v=()=>{d(!0),m(e||"")};return Tt.jsx(Tt.Fragment,{children:Tt.jsxs("div",{className:"name",children:[Tt.jsx("div",{className:"app-container",children:Tt.jsxs("header",{className:"app-header",children:[Tt.jsx("h1",{children:"Tink Flow Editor"}),Tt.jsxs("div",{className:"user-info",children:[Tt.jsxs("p",{children:["Welcome,"," ",n?.isAnonymous?"Anonymous User":n?.email||"User"]}),r&&Tt.jsx("span",{className:"save-indicator",children:"💾 Saving..."}),Tt.jsx("button",{className:"mode-toggle-btn",onClick:l,title:`Switch to ${a?"Word":"Concept"} Mode`,children:a?"📝 Word Mode":"🧠 Concept Mode"})]})]})}),Tt.jsxs("div",{className:"board-title-section",children:[c?Tt.jsx("input",{type:"text",value:g,onChange:T=>m(T.target.value),onKeyDown:y,onBlur:()=>{t(g),d(!1)},autoFocus:!0}):Tt.jsx("h6",{onClick:v,style:{cursor:"pointer"},children:e||"Untitled Board"}),Tt.jsx("div",{className:"keyboard-shortcuts",children:Tt.jsx("small",{children:"💡 Tips: Ctrl+N for new board, Ctrl+1-9 to switch boards"})})]})]})})}const m6=({notification:e,onRemove:t})=>{const n=r=>{switch(r){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"📄"}};return Tt.jsxs("div",{className:`notification notification-${e.type}`,children:[Tt.jsxs("div",{className:"notification-content",children:[Tt.jsx("span",{className:"notification-icon",children:n(e.type)}),Tt.jsx("span",{className:"notification-message",children:e.message})]}),Tt.jsx("button",{className:"notification-close",onClick:()=>t(e.id),children:"×"})]})},p6=({notifications:e,onRemove:t})=>e.length===0?null:Tt.jsx("div",{className:"notifications-container",children:e.map(n=>Tt.jsx(m6,{notification:n,onRemove:t},n.id))}),y6=async()=>{try{await v1(Go),console.log("User signed out successfully")}catch(e){throw console.error("Error signing out:",e),e}},_6=()=>{const[e,t]=W.useState(null);return W.useEffect(()=>{const a=_1(Go,l=>{l?(t(l),console.log("User signed in:",l.uid)):(t(null),console.log("No user signed in"))});return()=>a()},[]),{user:e,signOut:async()=>{try{await y6(),t(null)}catch(a){console.error("Error in sign out:",a)}},onAuthed:a=>{t(a)}}},D1=e=>!!(e&&e.uid),tl=[{id:"1",type:"draggableEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively"},position:{x:250,y:25}},{id:"2",type:"draggableEditable",data:{label:"This is a simple sentence with multiple words to demonstrate word mode functionality"},position:{x:100,y:125}},{id:"3",type:"draggableEditable",data:{label:"_Machine learning_ algorithms can _predict outcomes_ with high accuracy"},position:{x:400,y:125}},{id:"4",type:"staticEditable",data:{label:"Static node with _key concepts_ highlighted"},position:{x:250,y:200},draggable:!1}],el=[{id:"e1-2",source:"1",target:"2"},{id:"e1-3",source:"1",target:"3"},{id:"e2-4",source:"2",target:"4"},{id:"e3-4",source:"3",target:"4"}],v6=async e=>{if(!D1({uid:e}))throw new Error(In.AUTH_REQUIRED);try{const t=Ey(Vi,ti.BOARDS),n=qk(t,Fk("userId","==",e),jk("createdAt","desc")),r=await Oy(n);if(r.empty){const l={id:`board_${Date.now()}`,userId:e,name:"Default Board",createdAt:ge.now(),isOpen:!0};return await My(El(Vi,ti.BOARDS,l.id),l),console.log("Created default board:",l),[l]}const a=r.docs.map(l=>({id:l.id,...l.data()}));return console.log("Fetched all boards:",a),a}catch(t){if(console.error("Fetch all boards error:",t),t.code==="failed-precondition"||t.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:e,name:"Fallback Board (Create Index)",createdAt:ge.now(),isOpen:!0,isFallback:!0}]}throw new Error(In.LOAD_FAILED)}},Mw=async e=>{if(!e)return console.warn("No board ID provided for fetching nodes"),tl;try{const t=Ey(Vi,ti.BOARDS,e,ti.NODES),n=await Oy(t);if(n.empty)return console.log("No nodes found for board, using initial nodes"),tl;const r=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched nodes from board:",r),r}catch(t){return console.error("Fetch nodes error:",t),tl}},Vw=async e=>{if(!e)return console.warn("No board ID provided for fetching edges"),el;try{const t=Ey(Vi,ti.BOARDS,e,ti.EDGES),n=await Oy(t);if(n.empty)return console.log("No edges found for board, using initial edges"),el;const r=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched edges from board:",r),r}catch(t){return console.error("Fetch edges error:",t),el}},E6=async(e,t)=>{if(!e||!t?.length){console.warn("Invalid parameters for saving nodes:",{boardId:e,nodesCount:t?.length});return}try{const n=Yb(Vi);t.forEach(r=>{const a=El(Vi,ti.BOARDS,e,ti.NODES,r.id);n.set(a,{type:r.type,data:r.data,position:r.position,draggable:r.draggable,updatedAt:ge.now()})}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(In.SAVE_FAILED)}},T6=async(e,t)=>{if(!e||!t?.length){console.warn("Invalid parameters for saving edges:",{boardId:e,edgesCount:t?.length});return}try{const n=Yb(Vi);t.forEach(r=>{const a=El(Vi,ti.BOARDS,e,ti.EDGES,r.id);n.set(a,{source:r.source,target:r.target,sourceHandle:r.sourceHandle,targetHandle:r.targetHandle,updatedAt:ge.now()})}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(In.SAVE_FAILED)}},w6=async(e,t,n)=>{if(!D1({uid:e}))throw new Error(In.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:e,name:t||`Board ${n.length+1}`,createdAt:ge.now(),isOpen:!1};return console.log("Creating board:",r),await My(El(Vi,ti.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},S6=async e=>{if(!e)throw new Error("Board ID is required for deletion");try{await Qk(El(Vi,ti.BOARDS,e)),console.log("Board deleted successfully")}catch(t){throw console.error("Error deleting board:",t),t.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):t}},Uo=async(e,t)=>{if(!e||!t)throw new Error("Board ID and updates are required");try{const n={...t,updatedAt:ge.now()};await My(El(Vi,ti.BOARDS,e),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},A6=(e,t={})=>{const[n,r,a]=$D([]),[l,c,d]=YD([]),[g,m]=W.useState(!0),[y,v]=W.useState(!1),[T,A]=W.useState(!1),[k,L]=W.useState([]),[O,H]=W.useState(null),[q,G]=W.useState(null),{showSuccess:B,showError:Y,showInfo:rt}=t,M=D=>{const K=D.find(C=>C.isOpen===!0);if(K)return K;if(D.length>0){const C={...D[0],isOpen:!0};return Uo(C.id,C).catch(console.error),C}return null};W.useEffect(()=>{(async()=>{if(e)try{m(!0);const K=await v6(e.uid);L(K);const C=K.some(x=>x.isFallback);C&&Y&&Y("Database index missing. Please create the required Firestore index. Check console for details.");const j=M(K);if(!j){console.error("No board found for user"),Y&&Y("No boards found. Creating a default board..."),r(tl),c(el);return}H(j);const[tt,X]=await Promise.all([Mw(j.id),Vw(j.id)]);r(tt),c(X),rt&&!C&&rt("Board loaded successfully!")}catch(K){console.error("Error loading initial data:",K),Y&&Y("Failed to load board data. Using default board."),r(tl),c(el)}finally{m(!1)}})()},[e,r,c]);const b=W.useCallback(async(D,K,C)=>{q&&clearTimeout(q);const j=setTimeout(async()=>{try{A(!0);const tt=[];K&&K.length>0&&tt.push(E6(D,K)),C&&C.length>0&&tt.push(T6(D,C)),tt.length>0&&(await Promise.all(tt),console.log("Auto-save completed successfully"))}catch(tt){console.error("Auto-save failed:",tt),Y&&Y("Failed to save changes automatically")}finally{A(!1),G(null)}},1e3);G(j)},[q,Y]);W.useEffect(()=>(!g&&O&&!y&&!O.isFallback&&b(O.id,n,l),()=>{q&&clearTimeout(q)}),[n,l,g,O,y,b,q]);const R=W.useCallback(async D=>{try{if(O?.id===D)return;if(O?.isFallback||k.find(C=>C.id===D)?.isFallback){Y&&Y("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(v(!0),O&&!O.isFallback){const C={...O,isOpen:!1};await Uo(O.id,C),L(j=>j.map(tt=>tt.id===O.id?C:tt))}const K=k.find(C=>C.id===D);if(K){const C={...K,isOpen:!0};await Uo(D,C),H(C),L(X=>X.map(x=>x.id===D?C:x));const[j,tt]=await Promise.all([Mw(D),Vw(D)]);r(j),c(tt),B&&B(`Switched to "${C.name}"`)}else console.error("Board not found:",D),Y&&Y("Board not found")}catch(K){console.error("Error switching board:",K),Y&&Y("Failed to switch board. Please try again.")}finally{v(!1)}},[O,k,r,c,B,Y]),V=W.useCallback(async()=>{try{if(!e)return Y&&Y("You must be logged in to create a board"),null;rt&&rt("Creating new board..."),console.log("Creating new board for user:",e.uid),console.log("Current boards count:",k.length);const D=await w6(e.uid,null,k);if(D){if(console.log("Board created successfully:",D),O&&!O.isFallback){const C={...O,isOpen:!1};Uo(O.id,C).catch(console.error)}const K={...D,isOpen:!0};return L(C=>{const j=C.map(tt=>tt.id===O?.id?{...tt,isOpen:!1}:tt);return[K,...j]}),H(K),Uo(D.id,K).catch(console.error),r(tl),c(el),B&&B("New board created and opened!"),K}else return Y&&Y("Failed to create board. Please try again."),null}catch(D){return console.error("Error creating new board:",D),Y&&Y(`Failed to create board: ${D.message}`),null}},[e,k,O,B,Y,rt,r,c]),P=W.useCallback(async D=>{try{if(k.length<=1){Y&&Y("Cannot delete the last board!");return}if(!k.find(C=>C.id===D)){console.error("Board not found for deletion"),Y&&Y("Board not found");return}if(rt&&rt("Deleting board..."),O?.id===D){const C=k.find(j=>j.id!==D);C&&await R(C.id)}await S6(D),L(C=>C.filter(j=>j.id!==D)),B&&B("Board deleted successfully!")}catch(K){console.error("Error deleting board:",K),Y&&Y("Failed to delete board. Please try again.")}},[k,O,R,B,Y,rt]),U=W.useCallback(async D=>{if(O&&O.name!==D){const K={...O,name:D};H(K),L(C=>C.map(j=>j.id===O.id?K:j));try{await Uo(O.id,K),console.log("Board name updated successfully")}catch(C){console.error("Error updating board name:",C)}}},[O]),N=W.useCallback(()=>{q&&(clearTimeout(q),G(null)),L([]),H(null),r([]),c([]),m(!0),v(!1),A(!1)},[r,c,q]);return{nodes:n,edges:l,allBoards:k,currentBoard:O,isLoading:g,isSwitchingBoard:y,isSaving:T,onNodesChange:a,onEdgesChange:d,switchToBoard:R,createNewBoard:V,deleteBoard:P,updateBoardName:U,clearBoardState:N}},b6=({allBoards:e,currentBoard:t,createNewBoard:n,switchToBoard:r})=>{W.useEffect(()=>{const a=l=>{if((l.ctrlKey||l.metaKey)&&l.key==="n"&&(l.preventDefault(),n()),(l.ctrlKey||l.metaKey)&&l.key>="1"&&l.key<="9"){l.preventDefault();const c=parseInt(l.key)-1;e[c]&&e[c].id!==t?.id&&r(e[c].id)}};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e,t,n,r])},R6=()=>{const[e,t]=W.useState([]),n=W.useCallback(m=>{const y=Date.now().toString(),v={id:y,timestamp:new Date,...m};return t(T=>[...T,v]),m.autoRemove!==!1&&setTimeout(()=>{r(y)},m.duration||5e3),y},[]),r=W.useCallback(m=>{t(y=>y.filter(v=>v.id!==m))},[]),a=W.useCallback(()=>{t([])},[]),l=W.useCallback((m,y={})=>n({type:"success",message:m,...y}),[n]),c=W.useCallback((m,y={})=>n({type:"error",message:m,duration:7e3,...y}),[n]),d=W.useCallback((m,y={})=>n({type:"info",message:m,...y}),[n]),g=W.useCallback((m,y={})=>n({type:"warning",message:m,duration:6e3,...y}),[n]);return{notifications:e,addNotification:n,removeNotification:r,clearAllNotifications:a,showSuccess:l,showError:c,showInfo:d,showWarning:g}},O1=W.createContext(void 0),I6=({children:e})=>{const[t,n]=W.useState("word"),r=W.useCallback(()=>{n(c=>c==="word"?"concept":"word")},[]),a=W.useCallback(c=>{n(c)},[]),l=W.useMemo(()=>({mode:t,toggleMode:r,setMode:a}),[t,r,a]);return Tt.jsx(O1.Provider,{value:l,children:e})},C6=()=>{const e=W.useContext(O1);if(e===void 0)throw new Error("useMode must be used within a ModeProvider");return e};function x6(){const{user:e,signOut:t,onAuthed:n}=_6(),{mode:r,toggleMode:a}=C6(),{notifications:l,removeNotification:c,showSuccess:d,showError:g,showInfo:m}=R6(),{edges:y,allBoards:v,currentBoard:T,isSwitchingBoard:A,isSaving:k,onEdgesChange:L,switchToBoard:O,createNewBoard:H,deleteBoard:q,updateBoardName:G,clearBoardState:B}=A6(e,{showSuccess:d,showError:g,showInfo:m});b6({allBoards:v,currentBoard:T,createNewBoard:H,switchToBoard:O});const Y=async()=>{await t(),B()};return W.useCallback(rt=>{const M=ES(rt,y);L([{type:"reset",items:M}])},[L,y]),e?Tt.jsxs(Tt.Fragment,{children:[Tt.jsx(d6,{allBoards:v,currentBoard:T,onSwitchBoard:O,onCreateBoard:()=>(H(),Promise.resolve()),onDeleteBoard:q,onSignOut:Y,isLoading:A}),Tt.jsx(g6,{name:T?.name||"Loading...",onSetName:G,user:e,isSaving:k,isConceptMode:r==="concept",onToggleMode:a}),Tt.jsx(p6,{notifications:l,onRemove:c})]}):Tt.jsx(f6,{onAuthed:n})}function N6(){return Tt.jsx(I6,{children:Tt.jsx(x6,{})})}const M1=document.getElementById("root");if(!M1)throw new Error("Failed to find the root element");fI.createRoot(M1).render(Tt.jsx(W.StrictMode,{children:Tt.jsx(N6,{})}));
