function dN(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function h1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var im={exports:{}},Bc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dE;function hN(){if(dE)return Bc;dE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:t,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Bc.Fragment=e,Bc.jsx=n,Bc.jsxs=n,Bc}var hE;function fN(){return hE||(hE=1,im.exports=hN()),im.exports}var T=fN(),sm={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fE;function gN(){if(fE)return je;fE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function b(k){return k===null||typeof k!="object"?null:(k=_&&k[_]||k["@@iterator"],typeof k=="function"?k:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,M={};function C(k,F,te){this.props=k,this.context=F,this.refs=M,this.updater=te||w}C.prototype.isReactComponent={},C.prototype.setState=function(k,F){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,F,"setState")},C.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function L(){}L.prototype=C.prototype;function B(k,F,te){this.props=k,this.context=F,this.refs=M,this.updater=te||w}var G=B.prototype=new L;G.constructor=B,S(G,C.prototype),G.isPureReactComponent=!0;var j=Array.isArray,J={H:null,A:null,T:null,S:null,V:null},ee=Object.prototype.hasOwnProperty;function O(k,F,te,X,re,de){return te=de.ref,{$$typeof:t,type:k,key:F,ref:te!==void 0?te:null,props:de}}function A(k,F){return O(k.type,F,void 0,void 0,void 0,k.props)}function R(k){return typeof k=="object"&&k!==null&&k.$$typeof===t}function z(k){var F={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(te){return F[te]})}var U=/\/+/g;function H(k,F){return typeof k=="object"&&k!==null&&k.key!=null?z(""+k.key):F.toString(36)}function I(){}function P(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(I,I):(k.status="pending",k.then(function(F){k.status==="pending"&&(k.status="fulfilled",k.value=F)},function(F){k.status==="pending"&&(k.status="rejected",k.reason=F)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function Y(k,F,te,X,re){var de=typeof k;(de==="undefined"||de==="boolean")&&(k=null);var ue=!1;if(k===null)ue=!0;else switch(de){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(k.$$typeof){case t:case e:ue=!0;break;case y:return ue=k._init,Y(ue(k._payload),F,te,X,re)}}if(ue)return re=re(k),ue=X===""?"."+H(k,0):X,j(re)?(te="",ue!=null&&(te=ue.replace(U,"$&/")+"/"),Y(re,F,te,"",function(Ae){return Ae})):re!=null&&(R(re)&&(re=A(re,te+(re.key==null||k&&k.key===re.key?"":(""+re.key).replace(U,"$&/")+"/")+ue)),F.push(re)),1;ue=0;var ye=X===""?".":X+":";if(j(k))for(var _e=0;_e<k.length;_e++)X=k[_e],de=ye+H(X,_e),ue+=Y(X,F,te,de,re);else if(_e=b(k),typeof _e=="function")for(k=_e.call(k),_e=0;!(X=k.next()).done;)X=X.value,de=ye+H(X,_e++),ue+=Y(X,F,te,de,re);else if(de==="object"){if(typeof k.then=="function")return Y(P(k),F,te,X,re);throw F=String(k),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return ue}function D(k,F,te){if(k==null)return k;var X=[],re=0;return Y(k,X,"","",function(de){return F.call(te,de,re++)}),X}function q(k){if(k._status===-1){var F=k._result;F=F(),F.then(function(te){(k._status===0||k._status===-1)&&(k._status=1,k._result=te)},function(te){(k._status===0||k._status===-1)&&(k._status=2,k._result=te)}),k._status===-1&&(k._status=0,k._result=F)}if(k._status===1)return k._result.default;throw k._result}var W=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function Q(){}return je.Children={map:D,forEach:function(k,F,te){D(k,function(){F.apply(this,arguments)},te)},count:function(k){var F=0;return D(k,function(){F++}),F},toArray:function(k){return D(k,function(F){return F})||[]},only:function(k){if(!R(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},je.Component=C,je.Fragment=n,je.Profiler=a,je.PureComponent=B,je.StrictMode=i,je.Suspense=f,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,je.__COMPILER_RUNTIME={__proto__:null,c:function(k){return J.H.useMemoCache(k)}},je.cache=function(k){return function(){return k.apply(null,arguments)}},je.cloneElement=function(k,F,te){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var X=S({},k.props),re=k.key,de=void 0;if(F!=null)for(ue in F.ref!==void 0&&(de=void 0),F.key!==void 0&&(re=""+F.key),F)!ee.call(F,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&F.ref===void 0||(X[ue]=F[ue]);var ue=arguments.length-2;if(ue===1)X.children=te;else if(1<ue){for(var ye=Array(ue),_e=0;_e<ue;_e++)ye[_e]=arguments[_e+2];X.children=ye}return O(k.type,re,void 0,void 0,de,X)},je.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},je.createElement=function(k,F,te){var X,re={},de=null;if(F!=null)for(X in F.key!==void 0&&(de=""+F.key),F)ee.call(F,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(re[X]=F[X]);var ue=arguments.length-2;if(ue===1)re.children=te;else if(1<ue){for(var ye=Array(ue),_e=0;_e<ue;_e++)ye[_e]=arguments[_e+2];re.children=ye}if(k&&k.defaultProps)for(X in ue=k.defaultProps,ue)re[X]===void 0&&(re[X]=ue[X]);return O(k,de,void 0,void 0,null,re)},je.createRef=function(){return{current:null}},je.forwardRef=function(k){return{$$typeof:d,render:k}},je.isValidElement=R,je.lazy=function(k){return{$$typeof:y,_payload:{_status:-1,_result:k},_init:q}},je.memo=function(k,F){return{$$typeof:p,type:k,compare:F===void 0?null:F}},je.startTransition=function(k){var F=J.T,te={};J.T=te;try{var X=k(),re=J.S;re!==null&&re(te,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(Q,W)}catch(de){W(de)}finally{J.T=F}},je.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},je.use=function(k){return J.H.use(k)},je.useActionState=function(k,F,te){return J.H.useActionState(k,F,te)},je.useCallback=function(k,F){return J.H.useCallback(k,F)},je.useContext=function(k){return J.H.useContext(k)},je.useDebugValue=function(){},je.useDeferredValue=function(k,F){return J.H.useDeferredValue(k,F)},je.useEffect=function(k,F,te){var X=J.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect(k,F)},je.useId=function(){return J.H.useId()},je.useImperativeHandle=function(k,F,te){return J.H.useImperativeHandle(k,F,te)},je.useInsertionEffect=function(k,F){return J.H.useInsertionEffect(k,F)},je.useLayoutEffect=function(k,F){return J.H.useLayoutEffect(k,F)},je.useMemo=function(k,F){return J.H.useMemo(k,F)},je.useOptimistic=function(k,F){return J.H.useOptimistic(k,F)},je.useReducer=function(k,F,te){return J.H.useReducer(k,F,te)},je.useRef=function(k){return J.H.useRef(k)},je.useState=function(k){return J.H.useState(k)},je.useSyncExternalStore=function(k,F,te){return J.H.useSyncExternalStore(k,F,te)},je.useTransition=function(){return J.H.useTransition()},je.version="19.1.0",je}var gE;function Mu(){return gE||(gE=1,sm.exports=gN()),sm.exports}var $=Mu();const he=h1($),pN=dN({__proto__:null,default:he},[$]);var am={exports:{}},Hc={},om={exports:{}},lm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pE;function mN(){return pE||(pE=1,function(t){function e(D,q){var W=D.length;D.push(q);e:for(;0<W;){var Q=W-1>>>1,k=D[Q];if(0<a(k,q))D[Q]=q,D[W]=k,W=Q;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var q=D[0],W=D.pop();if(W!==q){D[0]=W;e:for(var Q=0,k=D.length,F=k>>>1;Q<F;){var te=2*(Q+1)-1,X=D[te],re=te+1,de=D[re];if(0>a(X,W))re<k&&0>a(de,X)?(D[Q]=de,D[re]=W,Q=re):(D[Q]=X,D[te]=W,Q=te);else if(re<k&&0>a(de,W))D[Q]=de,D[re]=W,Q=re;else break e}}return q}function a(D,q){var W=D.sortIndex-q.sortIndex;return W!==0?W:D.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var f=[],p=[],y=1,_=null,b=3,w=!1,S=!1,M=!1,C=!1,L=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function j(D){for(var q=n(p);q!==null;){if(q.callback===null)i(p);else if(q.startTime<=D)i(p),q.sortIndex=q.expirationTime,e(f,q);else break;q=n(p)}}function J(D){if(M=!1,j(D),!S)if(n(f)!==null)S=!0,ee||(ee=!0,H());else{var q=n(p);q!==null&&Y(J,q.startTime-D)}}var ee=!1,O=-1,A=5,R=-1;function z(){return C?!0:!(t.unstable_now()-R<A)}function U(){if(C=!1,ee){var D=t.unstable_now();R=D;var q=!0;try{e:{S=!1,M&&(M=!1,B(O),O=-1),w=!0;var W=b;try{t:{for(j(D),_=n(f);_!==null&&!(_.expirationTime>D&&z());){var Q=_.callback;if(typeof Q=="function"){_.callback=null,b=_.priorityLevel;var k=Q(_.expirationTime<=D);if(D=t.unstable_now(),typeof k=="function"){_.callback=k,j(D),q=!0;break t}_===n(f)&&i(f),j(D)}else i(f);_=n(f)}if(_!==null)q=!0;else{var F=n(p);F!==null&&Y(J,F.startTime-D),q=!1}}break e}finally{_=null,b=W,w=!1}q=void 0}}finally{q?H():ee=!1}}}var H;if(typeof G=="function")H=function(){G(U)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,P=I.port2;I.port1.onmessage=U,H=function(){P.postMessage(null)}}else H=function(){L(U,0)};function Y(D,q){O=L(function(){D(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(D){switch(b){case 1:case 2:case 3:var q=3;break;default:q=b}var W=b;b=q;try{return D()}finally{b=W}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(D,q){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var W=b;b=D;try{return q()}finally{b=W}},t.unstable_scheduleCallback=function(D,q,W){var Q=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Q+W:Q):W=Q,D){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=W+k,D={id:y++,callback:q,priorityLevel:D,startTime:W,expirationTime:k,sortIndex:-1},W>Q?(D.sortIndex=W,e(p,D),n(f)===null&&D===n(p)&&(M?(B(O),O=-1):M=!0,Y(J,W-Q))):(D.sortIndex=k,e(f,D),S||w||(S=!0,ee||(ee=!0,H()))),D},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(D){var q=b;return function(){var W=b;b=q;try{return D.apply(this,arguments)}finally{b=W}}}}(lm)),lm}var mE;function yN(){return mE||(mE=1,om.exports=mN()),om.exports}var cm={exports:{}},bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE;function vN(){if(yE)return bn;yE=1;var t=Mu();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,p,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:f,containerInfo:p,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,bn.createPortal=function(f,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(f,p,null,y)},bn.flushSync=function(f){var p=c.T,y=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=p,i.p=y,i.d.f()}},bn.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},bn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},bn.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var y=p.as,_=d(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:w}):y==="script"&&i.d.X(f,{crossOrigin:_,integrity:b,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},bn.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},bn.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,_=d(y,p.crossOrigin);i.d.L(f,y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},bn.preloadModule=function(f,p){if(typeof f=="string")if(p){var y=d(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},bn.requestFormReset=function(f){i.d.r(f)},bn.unstable_batchedUpdates=function(f,p){return f(p)},bn.useFormState=function(f,p,y){return c.H.useFormState(f,p,y)},bn.useFormStatus=function(){return c.H.useHostTransitionStatus()},bn.version="19.1.0",bn}var vE;function f1(){if(vE)return cm.exports;vE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),cm.exports=vN(),cm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function _N(){if(_E)return Hc;_E=1;var t=yN(),e=Mu(),n=f1();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(i(188))}function f(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var g=o.return;if(g===null)break;var m=g.alternate;if(m===null){if(u=g.return,u!==null){o=u;continue}break}if(g.child===m.child){for(m=g.child;m;){if(m===o)return d(g),r;if(m===u)return d(g),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=g,u=m;else{for(var x=!1,N=g.child;N;){if(N===o){x=!0,o=g,u=m;break}if(N===u){x=!0,u=g,o=m;break}N=N.sibling}if(!x){for(N=m.child;N;){if(N===o){x=!0,o=m,u=g;break}if(N===u){x=!0,u=m,o=g;break}N=N.sibling}if(!x)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function p(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=p(r),s!==null)return s;r=r.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),G=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function H(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var I=Symbol.for("react.client.reference");function P(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===I?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case C:return"Profiler";case M:return"StrictMode";case J:return"Suspense";case ee:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case w:return"Portal";case G:return(r.displayName||"Context")+".Provider";case B:return(r._context.displayName||"Context")+".Consumer";case j:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case O:return s=r.displayName||null,s!==null?s:P(r.type)||"Memo";case A:s=r._payload,r=r._init;try{return P(r(s))}catch{}}return null}var Y=Array.isArray,D=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},Q=[],k=-1;function F(r){return{current:r}}function te(r){0>k||(r.current=Q[k],Q[k]=null,k--)}function X(r,s){k++,Q[k]=r.current,r.current=s}var re=F(null),de=F(null),ue=F(null),ye=F(null);function _e(r,s){switch(X(ue,s),X(de,r),X(re,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?Ub(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=Ub(s),r=jb(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}te(re),X(re,r)}function Ae(){te(re),te(de),te(ue)}function Ne(r){r.memoizedState!==null&&X(ye,r);var s=re.current,o=jb(s,r.type);s!==o&&(X(de,r),X(re,o))}function nt(r){de.current===r&&(te(re),te(de)),ye.current===r&&(te(ye),Vc._currentValue=W)}var rt=Object.prototype.hasOwnProperty,Pe=t.unstable_scheduleCallback,$e=t.unstable_cancelCallback,Ue=t.unstable_shouldYield,Lt=t.unstable_requestPaint,ze=t.unstable_now,Ee=t.unstable_getCurrentPriorityLevel,At=t.unstable_ImmediatePriority,vn=t.unstable_UserBlockingPriority,Gt=t.unstable_NormalPriority,Fn=t.unstable_LowPriority,An=t.unstable_IdlePriority,Rn=t.log,Cr=t.unstable_setDisableYieldValue,at=null,Ye=null;function zt(r){if(typeof Rn=="function"&&Cr(r),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(at,r)}catch{}}var Et=Math.clz32?Math.clz32:Jt,Fr=Math.log,Ut=Math.LN2;function Jt(r){return r>>>=0,r===0?32:31-(Fr(r)/Ut|0)|0}var Nn=256,Cn=4194304;function en(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function cn(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var g=0,m=r.suspendedLanes,x=r.pingedLanes;r=r.warmLanes;var N=u&134217727;return N!==0?(u=N&~m,u!==0?g=en(u):(x&=N,x!==0?g=en(x):o||(o=N&~r,o!==0&&(g=en(o))))):(N=u&~m,N!==0?g=en(N):x!==0?g=en(x):o||(o=u&~r,o!==0&&(g=en(o)))),g===0?0:s!==0&&s!==g&&(s&m)===0&&(m=g&-g,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:g}function In(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function xi(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ti(){var r=Nn;return Nn<<=1,(Nn&4194048)===0&&(Nn=256),r}function Ir(){var r=Cn;return Cn<<=1,(Cn&62914560)===0&&(Cn=4194304),r}function Gn(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function ur(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Yn(r,s,o,u,g,m){var x=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var N=r.entanglements,K=r.expirationTimes,ae=r.hiddenUpdates;for(o=x&~o;0<o;){var fe=31-Et(o),pe=1<<fe;N[fe]=0,K[fe]=-1;var oe=ae[fe];if(oe!==null)for(ae[fe]=null,fe=0;fe<oe.length;fe++){var le=oe[fe];le!==null&&(le.lane&=-536870913)}o&=~pe}u!==0&&dr(r,u,0),m!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=m&~(x&~s))}function dr(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-Et(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function la(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-Et(o),g=1<<u;g&s|r[u]&s&&(r[u]|=s),o&=~g}}function Gr(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ss(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Yr(){var r=q.p;return r!==0?r:(r=window.event,r===void 0?32:sE(r.type))}function oo(r,s){var o=q.p;try{return q.p=r,s()}finally{q.p=o}}var mt=Math.random().toString(36).slice(2),Mt="__reactFiber$"+mt,Rt="__reactProps$"+mt,Ln="__reactContainer$"+mt,ca="__reactEvents$"+mt,Hl="__reactListeners$"+mt,Kr="__reactHandles$"+mt,lo="__reactResources$"+mt,Si="__reactMarker$"+mt;function Xr(r){delete r[Mt],delete r[Rt],delete r[ca],delete r[Hl],delete r[Kr]}function hr(r){var s=r[Mt];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Ln]||o[Mt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=$b(r);r!==null;){if(o=r[Mt])return o;r=$b(r)}return s}r=o,o=r.parentNode}return null}function fr(r){if(r=r[Mt]||r[Ln]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function gr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function un(r){var s=r[lo];return s||(s=r[lo]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function wt(r){r[Si]=!0}var ua=new Set,as={};function Kn(r,s){kr(r,s),kr(r+"Capture",s)}function kr(r,s){for(as[r]=s,r=0;r<s.length;r++)ua.add(s[r])}var da=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),co={},Ai={};function uo(r){return rt.call(Ai,r)?!0:rt.call(co,r)?!1:da.test(r)?Ai[r]=!0:(co[r]=!0,!1)}function Qr(r,s,o){if(uo(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function pr(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Yt(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var Wr,ho;function Dr(r){if(Wr===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Wr=s&&s[1]||"",ho=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wr+r+ho}var os=!1;function Zr(r,s){if(!r||os)return"";os=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(le){var oe=le}Reflect.construct(r,[],pe)}else{try{pe.call()}catch(le){oe=le}r.call(pe.prototype)}}else{try{throw Error()}catch(le){oe=le}(pe=r())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(le){if(le&&oe&&typeof le.stack=="string")return[le.stack,oe.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),x=m[0],N=m[1];if(x&&N){var K=x.split(`
`),ae=N.split(`
`);for(g=u=0;u<K.length&&!K[u].includes("DetermineComponentFrameRoot");)u++;for(;g<ae.length&&!ae[g].includes("DetermineComponentFrameRoot");)g++;if(u===K.length||g===ae.length)for(u=K.length-1,g=ae.length-1;1<=u&&0<=g&&K[u]!==ae[g];)g--;for(;1<=u&&0<=g;u--,g--)if(K[u]!==ae[g]){if(u!==1||g!==1)do if(u--,g--,0>g||K[u]!==ae[g]){var fe=`
`+K[u].replace(" at new "," at ");return r.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",r.displayName)),fe}while(1<=u&&0<=g);break}}}finally{os=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Dr(o):""}function ql(r){switch(r.tag){case 26:case 27:case 5:return Dr(r.type);case 16:return Dr("Lazy");case 13:return Dr("Suspense");case 19:return Dr("SuspenseList");case 0:case 15:return Zr(r.type,!1);case 11:return Zr(r.type.render,!1);case 1:return Zr(r.type,!0);case 31:return Dr("Activity");default:return""}}function fo(r){try{var s="";do s+=ql(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function kn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function $l(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function lg(r){var s=$l(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var g=o.get,m=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return g.call(this)},set:function(x){u=""+x,m.call(this,x)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(x){u=""+x},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function go(r){r._valueTracker||(r._valueTracker=lg(r))}function Fl(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=$l(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function ha(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var cg=/[\n"\\]/g;function jt(r){return r.replace(cg,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Xn(r,s,o,u,g,m,x,N){r.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.type=x:r.removeAttribute("type"),s!=null?x==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+kn(s)):r.value!==""+kn(s)&&(r.value=""+kn(s)):x!=="submit"&&x!=="reset"||r.removeAttribute("value"),s!=null?ls(r,x,kn(s)):o!=null?ls(r,x,kn(o)):u!=null&&r.removeAttribute("value"),g==null&&m!=null&&(r.defaultChecked=!!m),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?r.name=""+kn(N):r.removeAttribute("name")}function fa(r,s,o,u,g,m,x,N){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;o=o!=null?""+kn(o):"",s=s!=null?""+kn(s):o,N||s===r.value||(r.value=s),r.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=N?r.checked:!!u,r.defaultChecked=!!u,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.name=x)}function ls(r,s,o){s==="number"&&ha(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ri(r,s,o,u){if(r=r.options,s){s={};for(var g=0;g<o.length;g++)s["$"+o[g]]=!0;for(o=0;o<r.length;o++)g=s.hasOwnProperty("$"+r[o].value),r[o].selected!==g&&(r[o].selected=g),g&&u&&(r[o].defaultSelected=!0)}else{for(o=""+kn(o),s=null,g=0;g<r.length;g++){if(r[g].value===o){r[g].selected=!0,u&&(r[g].defaultSelected=!0);return}s!==null||r[g].disabled||(s=r[g])}s!==null&&(s.selected=!0)}}function dt(r,s,o){if(s!=null&&(s=""+kn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+kn(o):""}function ga(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(Y(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=kn(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function mr(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var pa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xu(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||pa.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Gl(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&o[g]!==u&&Xu(r,g,u)}else for(var m in s)s.hasOwnProperty(m)&&Xu(r,m,s[m])}function Yl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ug=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function po(r){return dg.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Ni=null;function yr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ci=null,Ii=null;function Kl(r){var s=fr(r);if(s&&(r=s.stateNode)){var o=r[Rt]||null;e:switch(r=s.stateNode,s.type){case"input":if(Xn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+jt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var g=u[Rt]||null;if(!g)throw Error(i(90));Xn(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&Fl(u)}break e;case"textarea":dt(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ri(r,!!o.multiple,s,!1)}}}var Jr=!1;function Qu(r,s,o){if(Jr)return r(s,o);Jr=!0;try{var u=r(s);return u}finally{if(Jr=!1,(Ci!==null||Ii!==null)&&(qd(),Ci&&(s=Ci,r=Ii,Ii=Ci=null,Kl(s),r)))for(s=0;s<r.length;s++)Kl(r[s])}}function ma(r,s){var o=r.stateNode;if(o===null)return null;var u=o[Rt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vr=!1;if(Mr)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){vr=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{vr=!1}var ei=null,cs=null,ki=null;function Xl(){if(ki)return ki;var r,s=cs,o=s.length,u,g="value"in ei?ei.value:ei.textContent,m=g.length;for(r=0;r<o&&s[r]===g[r];r++);var x=o-r;for(u=1;u<=x&&s[o-u]===g[m-u];u++);return ki=g.slice(r,1<u?1-u:void 0)}function ti(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ni(){return!0}function Ql(){return!1}function tn(r){function s(o,u,g,m,x){this._reactName=o,this._targetInst=g,this.type=u,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var N in r)r.hasOwnProperty(N)&&(o=r[N],this[N]=o?o(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ni:Ql,this.isPropagationStopped=Ql,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),s}var ot={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mo=tn(ot),va=y({},ot,{view:0,detail:0}),Wu=tn(va),yo,vo,ri,_a=y({},va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wa,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ri&&(ri&&r.type==="mousemove"?(yo=r.screenX-ri.screenX,vo=r.screenY-ri.screenY):vo=yo=0,ri=r),yo)},movementY:function(r){return"movementY"in r?r.movementY:vo}}),_r=tn(_a),Zu=y({},_a,{dataTransfer:0}),hg=tn(Zu),ba=y({},va,{relatedTarget:0}),_o=tn(ba),Wl=y({},ot,{animationName:0,elapsedTime:0,pseudoElement:0}),bo=tn(Wl),Ju=y({},ot,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Eo=tn(Ju),fg=y({},ot,{data:0}),Zl=tn(fg),Ea={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ed={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},td={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=td[r])?!!s[r]:!1}function wa(){return Jl}var nd=y({},va,{key:function(r){if(r.key){var s=Ea[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=ti(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?ed[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wa,charCode:function(r){return r.type==="keypress"?ti(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ti(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),wo=tn(nd),rd=y({},_a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ec=tn(rd),Di=y({},va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wa}),id=tn(Di),sd=y({},ot,{propertyName:0,elapsedTime:0,pseudoElement:0}),ad=tn(sd),od=y({},_a,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),xo=tn(od),Dn=y({},ot,{newState:0,oldState:0}),ld=tn(Dn),cd=[9,13,27,32],ii=Mr&&"CompositionEvent"in window,h=null;Mr&&"documentMode"in document&&(h=document.documentMode);var v=Mr&&"TextEvent"in window&&!h,E=Mr&&(!ii||h&&8<h&&11>=h),V=" ",ie=!1;function ce(r,s){switch(r){case"keyup":return cd.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function be(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ze=!1;function Kt(r,s){switch(r){case"compositionend":return be(s);case"keypress":return s.which!==32?null:(ie=!0,V);case"textInput":return r=s.data,r===V&&ie?null:r;default:return null}}function Je(r,s){if(Ze)return r==="compositionend"||!ii&&ce(r,s)?(r=Xl(),ki=cs=ei=null,Ze=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xt(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!nn[r.type]:s==="textarea"}function Mi(r,s,o,u){Ci?Ii?Ii.push(u):Ii=[u]:Ci=u,s=Xd(s,"onChange"),0<s.length&&(o=new mo("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var dn=null,si=null;function tc(r){Ob(r,0)}function ud(r){var s=gr(r);if(Fl(s))return r}function tv(r,s){if(r==="change")return s}var nv=!1;if(Mr){var gg;if(Mr){var pg="oninput"in document;if(!pg){var rv=document.createElement("div");rv.setAttribute("oninput","return;"),pg=typeof rv.oninput=="function"}gg=pg}else gg=!1;nv=gg&&(!document.documentMode||9<document.documentMode)}function iv(){dn&&(dn.detachEvent("onpropertychange",sv),si=dn=null)}function sv(r){if(r.propertyName==="value"&&ud(si)){var s=[];Mi(s,si,r,yr(r)),Qu(tc,s)}}function B2(r,s,o){r==="focusin"?(iv(),dn=s,si=o,dn.attachEvent("onpropertychange",sv)):r==="focusout"&&iv()}function H2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ud(si)}function q2(r,s){if(r==="click")return ud(s)}function $2(r,s){if(r==="input"||r==="change")return ud(s)}function F2(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Qn=typeof Object.is=="function"?Object.is:F2;function nc(r,s){if(Qn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var g=o[u];if(!rt.call(s,g)||!Qn(r[g],s[g]))return!1}return!0}function av(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function ov(r,s){var o=av(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=av(o)}}function lv(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?lv(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function cv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=ha(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=ha(r.document)}return s}function mg(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var G2=Mr&&"documentMode"in document&&11>=document.documentMode,To=null,yg=null,rc=null,vg=!1;function uv(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;vg||To==null||To!==ha(u)||(u=To,"selectionStart"in u&&mg(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),rc&&nc(rc,u)||(rc=u,u=Xd(yg,"onSelect"),0<u.length&&(s=new mo("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=To)))}function xa(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var So={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionrun:xa("Transition","TransitionRun"),transitionstart:xa("Transition","TransitionStart"),transitioncancel:xa("Transition","TransitionCancel"),transitionend:xa("Transition","TransitionEnd")},_g={},dv={};Mr&&(dv=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function Ta(r){if(_g[r])return _g[r];if(!So[r])return r;var s=So[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in dv)return _g[r]=s[o];return r}var hv=Ta("animationend"),fv=Ta("animationiteration"),gv=Ta("animationstart"),Y2=Ta("transitionrun"),K2=Ta("transitionstart"),X2=Ta("transitioncancel"),pv=Ta("transitionend"),mv=new Map,bg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bg.push("scrollEnd");function Or(r,s){mv.set(r,s),Kn(s,[r])}var yv=new WeakMap;function br(r,s){if(typeof r=="object"&&r!==null){var o=yv.get(r);return o!==void 0?o:(s={value:r,source:s,stack:fo(s)},yv.set(r,s),s)}return{value:r,source:s,stack:fo(s)}}var Er=[],Ao=0,Eg=0;function dd(){for(var r=Ao,s=Eg=Ao=0;s<r;){var o=Er[s];Er[s++]=null;var u=Er[s];Er[s++]=null;var g=Er[s];Er[s++]=null;var m=Er[s];if(Er[s++]=null,u!==null&&g!==null){var x=u.pending;x===null?g.next=g:(g.next=x.next,x.next=g),u.pending=g}m!==0&&vv(o,g,m)}}function hd(r,s,o,u){Er[Ao++]=r,Er[Ao++]=s,Er[Ao++]=o,Er[Ao++]=u,Eg|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function wg(r,s,o,u){return hd(r,s,o,u),fd(r)}function Ro(r,s){return hd(r,null,null,s),fd(r)}function vv(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var g=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(g=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,g&&s!==null&&(g=31-Et(o),r=m.hiddenUpdates,u=r[g],u===null?r[g]=[s]:u.push(s),s.lane=o|536870912),m):null}function fd(r){if(50<Nc)throw Nc=0,Np=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var No={};function Q2(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(r,s,o,u){return new Q2(r,s,o,u)}function xg(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Oi(r,s){var o=r.alternate;return o===null?(o=Wn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function _v(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function gd(r,s,o,u,g,m){var x=0;if(u=r,typeof r=="function")xg(r)&&(x=1);else if(typeof r=="string")x=ZR(r,o,re.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=Wn(31,o,s,g),r.elementType=R,r.lanes=m,r;case S:return Sa(o.children,g,m,s);case M:x=8,g|=24;break;case C:return r=Wn(12,o,s,g|2),r.elementType=C,r.lanes=m,r;case J:return r=Wn(13,o,s,g),r.elementType=J,r.lanes=m,r;case ee:return r=Wn(19,o,s,g),r.elementType=ee,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:case G:x=10;break e;case B:x=9;break e;case j:x=11;break e;case O:x=14;break e;case A:x=16,u=null;break e}x=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=Wn(x,o,s,g),s.elementType=r,s.type=u,s.lanes=m,s}function Sa(r,s,o,u){return r=Wn(7,r,u,s),r.lanes=o,r}function Tg(r,s,o){return r=Wn(6,r,null,s),r.lanes=o,r}function Sg(r,s,o){return s=Wn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Co=[],Io=0,pd=null,md=0,wr=[],xr=0,Aa=null,Pi=1,Vi="";function Ra(r,s){Co[Io++]=md,Co[Io++]=pd,pd=r,md=s}function bv(r,s,o){wr[xr++]=Pi,wr[xr++]=Vi,wr[xr++]=Aa,Aa=r;var u=Pi;r=Vi;var g=32-Et(u)-1;u&=~(1<<g),o+=1;var m=32-Et(s)+g;if(30<m){var x=g-g%5;m=(u&(1<<x)-1).toString(32),u>>=x,g-=x,Pi=1<<32-Et(s)+g|o<<g|u,Vi=m+r}else Pi=1<<m|o<<g|u,Vi=r}function Ag(r){r.return!==null&&(Ra(r,1),bv(r,1,0))}function Rg(r){for(;r===pd;)pd=Co[--Io],Co[Io]=null,md=Co[--Io],Co[Io]=null;for(;r===Aa;)Aa=wr[--xr],wr[xr]=null,Vi=wr[--xr],wr[xr]=null,Pi=wr[--xr],wr[xr]=null}var Mn=null,Nt=null,st=!1,Na=null,ai=!1,Ng=Error(i(519));function Ca(r){var s=Error(i(418,""));throw ac(br(s,r)),Ng}function Ev(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[Mt]=r,s[Rt]=u,o){case"dialog":Xe("cancel",s),Xe("close",s);break;case"iframe":case"object":case"embed":Xe("load",s);break;case"video":case"audio":for(o=0;o<Ic.length;o++)Xe(Ic[o],s);break;case"source":Xe("error",s);break;case"img":case"image":case"link":Xe("error",s),Xe("load",s);break;case"details":Xe("toggle",s);break;case"input":Xe("invalid",s),fa(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),go(s);break;case"select":Xe("invalid",s);break;case"textarea":Xe("invalid",s),ga(s,u.value,u.defaultValue,u.children),go(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||zb(s.textContent,o)?(u.popover!=null&&(Xe("beforetoggle",s),Xe("toggle",s)),u.onScroll!=null&&Xe("scroll",s),u.onScrollEnd!=null&&Xe("scrollend",s),u.onClick!=null&&(s.onclick=Qd),s=!0):s=!1,s||Ca(r)}function wv(r){for(Mn=r.return;Mn;)switch(Mn.tag){case 5:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:Mn=Mn.return}}function ic(r){if(r!==Mn)return!1;if(!st)return wv(r),st=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||$p(r.type,r.memoizedProps)),o=!o),o&&Nt&&Ca(r),wv(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){Nt=Vr(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}Nt=null}}else s===27?(s=Nt,Ss(r.type)?(r=Kp,Kp=null,Nt=r):Nt=s):Nt=Mn?Vr(r.stateNode.nextSibling):null;return!0}function sc(){Nt=Mn=null,st=!1}function xv(){var r=Na;return r!==null&&(jn===null?jn=r:jn.push.apply(jn,r),Na=null),r}function ac(r){Na===null?Na=[r]:Na.push(r)}var Cg=F(null),Ia=null,Li=null;function us(r,s,o){X(Cg,s._currentValue),s._currentValue=o}function zi(r){r._currentValue=Cg.current,te(Cg)}function Ig(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function kg(r,s,o,u){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var m=g.dependencies;if(m!==null){var x=g.child;m=m.firstContext;e:for(;m!==null;){var N=m;m=g;for(var K=0;K<s.length;K++)if(N.context===s[K]){m.lanes|=o,N=m.alternate,N!==null&&(N.lanes|=o),Ig(m.return,o,r),u||(x=null);break e}m=N.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(i(341));x.lanes|=o,m=x.alternate,m!==null&&(m.lanes|=o),Ig(x,o,r),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===r){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function oc(r,s,o,u){r=null;for(var g=s,m=!1;g!==null;){if(!m){if((g.flags&524288)!==0)m=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var N=g.type;Qn(g.pendingProps.value,x.value)||(r!==null?r.push(N):r=[N])}}else if(g===ye.current){if(x=g.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(Vc):r=[Vc])}g=g.return}r!==null&&kg(s,r,o,u),s.flags|=262144}function yd(r){for(r=r.firstContext;r!==null;){if(!Qn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ka(r){Ia=r,Li=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function _n(r){return Tv(Ia,r)}function vd(r,s){return Ia===null&&ka(r),Tv(r,s)}function Tv(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Li===null){if(r===null)throw Error(i(308));Li=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Li=Li.next=s;return o}var W2=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},Z2=t.unstable_scheduleCallback,J2=t.unstable_NormalPriority,Qt={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dg(){return{controller:new W2,data:new Map,refCount:0}}function lc(r){r.refCount--,r.refCount===0&&Z2(J2,function(){r.controller.abort()})}var cc=null,Mg=0,ko=0,Do=null;function eR(r,s){if(cc===null){var o=cc=[];Mg=0,ko=Pp(),Do={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Mg++,s.then(Sv,Sv),s}function Sv(){if(--Mg===0&&cc!==null){Do!==null&&(Do.status="fulfilled");var r=cc;cc=null,ko=0,Do=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function tR(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<o.length;g++)(0,o[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),u}var Av=D.S;D.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&eR(r,s),Av!==null&&Av(r,s)};var Da=F(null);function Og(){var r=Da.current;return r!==null?r:yt.pooledCache}function _d(r,s){s===null?X(Da,Da.current):X(Da,s.pool)}function Rv(){var r=Og();return r===null?null:{parent:Qt._currentValue,pool:r}}var uc=Error(i(460)),Nv=Error(i(474)),bd=Error(i(542)),Pg={then:function(){}};function Cv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Ed(){}function Iv(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Ed,Ed),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Dv(r),r;default:if(typeof s.status=="string")s.then(Ed,Ed);else{if(r=yt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Dv(r),r}throw dc=s,uc}}var dc=null;function kv(){if(dc===null)throw Error(i(459));var r=dc;return dc=null,r}function Dv(r){if(r===uc||r===bd)throw Error(i(483))}var ds=!1;function Vg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function hs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function fs(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(ct&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=fd(r),vv(r,null,o),s}return hd(r,u,s,o),fd(r)}function hc(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,la(r,o)}}function zg(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var g=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var x={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?g=m=x:m=m.next=x,o=o.next}while(o!==null);m===null?g=m=s:m=m.next=s}else g=m=s;o={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Ug=!1;function fc(){if(Ug){var r=Do;if(r!==null)throw r}}function gc(r,s,o,u){Ug=!1;var g=r.updateQueue;ds=!1;var m=g.firstBaseUpdate,x=g.lastBaseUpdate,N=g.shared.pending;if(N!==null){g.shared.pending=null;var K=N,ae=K.next;K.next=null,x===null?m=ae:x.next=ae,x=K;var fe=r.alternate;fe!==null&&(fe=fe.updateQueue,N=fe.lastBaseUpdate,N!==x&&(N===null?fe.firstBaseUpdate=ae:N.next=ae,fe.lastBaseUpdate=K))}if(m!==null){var pe=g.baseState;x=0,fe=ae=K=null,N=m;do{var oe=N.lane&-536870913,le=oe!==N.lane;if(le?(et&oe)===oe:(u&oe)===oe){oe!==0&&oe===ko&&(Ug=!0),fe!==null&&(fe=fe.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Oe=r,Ie=N;oe=s;var gt=o;switch(Ie.tag){case 1:if(Oe=Ie.payload,typeof Oe=="function"){pe=Oe.call(gt,pe,oe);break e}pe=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ie.payload,oe=typeof Oe=="function"?Oe.call(gt,pe,oe):Oe,oe==null)break e;pe=y({},pe,oe);break e;case 2:ds=!0}}oe=N.callback,oe!==null&&(r.flags|=64,le&&(r.flags|=8192),le=g.callbacks,le===null?g.callbacks=[oe]:le.push(oe))}else le={lane:oe,tag:N.tag,payload:N.payload,callback:N.callback,next:null},fe===null?(ae=fe=le,K=pe):fe=fe.next=le,x|=oe;if(N=N.next,N===null){if(N=g.shared.pending,N===null)break;le=N,N=le.next,le.next=null,g.lastBaseUpdate=le,g.shared.pending=null}}while(!0);fe===null&&(K=pe),g.baseState=K,g.firstBaseUpdate=ae,g.lastBaseUpdate=fe,m===null&&(g.shared.lanes=0),Es|=x,r.lanes=x,r.memoizedState=pe}}function Mv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function Ov(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Mv(o[r],s)}var Mo=F(null),wd=F(0);function Pv(r,s){r=Fi,X(wd,r),X(Mo,s),Fi=r|s.baseLanes}function jg(){X(wd,Fi),X(Mo,Mo.current)}function Bg(){Fi=wd.current,te(Mo),te(wd)}var gs=0,He=null,ht=null,Bt=null,xd=!1,Oo=!1,Ma=!1,Td=0,pc=0,Po=null,nR=0;function Ot(){throw Error(i(321))}function Hg(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Qn(r[o],s[o]))return!1;return!0}function qg(r,s,o,u,g,m){return gs=m,He=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,D.H=r===null||r.memoizedState===null?v_:__,Ma=!1,m=o(u,g),Ma=!1,Oo&&(m=Lv(s,o,u,g)),Vv(r),m}function Vv(r){D.H=Id;var s=ht!==null&&ht.next!==null;if(gs=0,Bt=ht=He=null,xd=!1,pc=0,Po=null,s)throw Error(i(300));r===null||rn||(r=r.dependencies,r!==null&&yd(r)&&(rn=!0))}function Lv(r,s,o,u){He=r;var g=0;do{if(Oo&&(Po=null),pc=0,Oo=!1,25<=g)throw Error(i(301));if(g+=1,Bt=ht=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}D.H=cR,m=s(o,u)}while(Oo);return m}function rR(){var r=D.H,s=r.useState()[0];return s=typeof s.then=="function"?mc(s):s,r=r.useState()[0],(ht!==null?ht.memoizedState:null)!==r&&(He.flags|=1024),s}function $g(){var r=Td!==0;return Td=0,r}function Fg(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function Gg(r){if(xd){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xd=!1}gs=0,Bt=ht=He=null,Oo=!1,pc=Td=0,Po=null}function zn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?He.memoizedState=Bt=r:Bt=Bt.next=r,Bt}function Ht(){if(ht===null){var r=He.alternate;r=r!==null?r.memoizedState:null}else r=ht.next;var s=Bt===null?He.memoizedState:Bt.next;if(s!==null)Bt=s,ht=r;else{if(r===null)throw He.alternate===null?Error(i(467)):Error(i(310));ht=r,r={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Bt===null?He.memoizedState=Bt=r:Bt=Bt.next=r}return Bt}function Yg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mc(r){var s=pc;return pc+=1,Po===null&&(Po=[]),r=Iv(Po,r,s),s=He,(Bt===null?s.memoizedState:Bt.next)===null&&(s=s.alternate,D.H=s===null||s.memoizedState===null?v_:__),r}function Sd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return mc(r);if(r.$$typeof===G)return _n(r)}throw Error(i(438,String(r)))}function Kg(r){var s=null,o=He.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=He.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Yg(),He.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=z;return s.index++,o}function Ui(r,s){return typeof s=="function"?s(r):s}function Ad(r){var s=Ht();return Xg(s,ht,r)}function Xg(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var g=r.baseQueue,m=u.pending;if(m!==null){if(g!==null){var x=g.next;g.next=m.next,m.next=x}s.baseQueue=g=m,u.pending=null}if(m=r.baseState,g===null)r.memoizedState=m;else{s=g.next;var N=x=null,K=null,ae=s,fe=!1;do{var pe=ae.lane&-536870913;if(pe!==ae.lane?(et&pe)===pe:(gs&pe)===pe){var oe=ae.revertLane;if(oe===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),pe===ko&&(fe=!0);else if((gs&oe)===oe){ae=ae.next,oe===ko&&(fe=!0);continue}else pe={lane:0,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},K===null?(N=K=pe,x=m):K=K.next=pe,He.lanes|=oe,Es|=oe;pe=ae.action,Ma&&o(m,pe),m=ae.hasEagerState?ae.eagerState:o(m,pe)}else oe={lane:pe,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},K===null?(N=K=oe,x=m):K=K.next=oe,He.lanes|=pe,Es|=pe;ae=ae.next}while(ae!==null&&ae!==s);if(K===null?x=m:K.next=N,!Qn(m,r.memoizedState)&&(rn=!0,fe&&(o=Do,o!==null)))throw o;r.memoizedState=m,r.baseState=x,r.baseQueue=K,u.lastRenderedState=m}return g===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Qg(r){var s=Ht(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,g=o.pending,m=s.memoizedState;if(g!==null){o.pending=null;var x=g=g.next;do m=r(m,x.action),x=x.next;while(x!==g);Qn(m,s.memoizedState)||(rn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function zv(r,s,o){var u=He,g=Ht(),m=st;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var x=!Qn((ht||g).memoizedState,o);x&&(g.memoizedState=o,rn=!0),g=g.queue;var N=Bv.bind(null,u,g,r);if(yc(2048,8,N,[r]),g.getSnapshot!==s||x||Bt!==null&&Bt.memoizedState.tag&1){if(u.flags|=2048,Vo(9,Rd(),jv.bind(null,u,g,o,s),null),yt===null)throw Error(i(349));m||(gs&124)!==0||Uv(u,s,o)}return o}function Uv(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=He.updateQueue,s===null?(s=Yg(),He.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function jv(r,s,o,u){s.value=o,s.getSnapshot=u,Hv(s)&&qv(r)}function Bv(r,s,o){return o(function(){Hv(s)&&qv(r)})}function Hv(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Qn(r,o)}catch{return!0}}function qv(r){var s=Ro(r,2);s!==null&&nr(s,r,2)}function Wg(r){var s=zn();if(typeof r=="function"){var o=r;if(r=o(),Ma){zt(!0);try{o()}finally{zt(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:r},s}function $v(r,s,o,u){return r.baseState=o,Xg(r,ht,typeof u=="function"?u:Ui)}function iR(r,s,o,u,g){if(Cd(r))throw Error(i(485));if(r=s.action,r!==null){var m={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};D.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,Fv(s,m)):(m.next=o.next,s.pending=o.next=m)}}function Fv(r,s){var o=s.action,u=s.payload,g=r.state;if(s.isTransition){var m=D.T,x={};D.T=x;try{var N=o(g,u),K=D.S;K!==null&&K(x,N),Gv(r,s,N)}catch(ae){Zg(r,s,ae)}finally{D.T=m}}else try{m=o(g,u),Gv(r,s,m)}catch(ae){Zg(r,s,ae)}}function Gv(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Yv(r,s,u)},function(u){return Zg(r,s,u)}):Yv(r,s,o)}function Yv(r,s,o){s.status="fulfilled",s.value=o,Kv(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,Fv(r,o)))}function Zg(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Kv(s),s=s.next;while(s!==u)}r.action=null}function Kv(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Xv(r,s){return s}function Qv(r,s){if(st){var o=yt.formState;if(o!==null){e:{var u=He;if(st){if(Nt){t:{for(var g=Nt,m=ai;g.nodeType!==8;){if(!m){g=null;break t}if(g=Vr(g.nextSibling),g===null){g=null;break t}}m=g.data,g=m==="F!"||m==="F"?g:null}if(g){Nt=Vr(g.nextSibling),u=g.data==="F!";break e}}Ca(u)}u=!1}u&&(s=o[0])}}return o=zn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xv,lastRenderedState:s},o.queue=u,o=p_.bind(null,He,u),u.dispatch=o,u=Wg(!1),m=rp.bind(null,He,!1,u.queue),u=zn(),g={state:s,dispatch:null,action:r,pending:null},u.queue=g,o=iR.bind(null,He,g,m,o),g.dispatch=o,u.memoizedState=r,[s,o,!1]}function Wv(r){var s=Ht();return Zv(s,ht,r)}function Zv(r,s,o){if(s=Xg(r,s,Xv)[0],r=Ad(Ui)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=mc(s)}catch(x){throw x===uc?bd:x}else u=s;s=Ht();var g=s.queue,m=g.dispatch;return o!==s.memoizedState&&(He.flags|=2048,Vo(9,Rd(),sR.bind(null,g,o),null)),[u,m,r]}function sR(r,s){r.action=s}function Jv(r){var s=Ht(),o=ht;if(o!==null)return Zv(s,o,r);Ht(),s=s.memoizedState,o=Ht();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function Vo(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=He.updateQueue,s===null&&(s=Yg(),He.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function Rd(){return{destroy:void 0,resource:void 0}}function e_(){return Ht().memoizedState}function Nd(r,s,o,u){var g=zn();u=u===void 0?null:u,He.flags|=r,g.memoizedState=Vo(1|s,Rd(),o,u)}function yc(r,s,o,u){var g=Ht();u=u===void 0?null:u;var m=g.memoizedState.inst;ht!==null&&u!==null&&Hg(u,ht.memoizedState.deps)?g.memoizedState=Vo(s,m,o,u):(He.flags|=r,g.memoizedState=Vo(1|s,m,o,u))}function t_(r,s){Nd(8390656,8,r,s)}function n_(r,s){yc(2048,8,r,s)}function r_(r,s){return yc(4,2,r,s)}function i_(r,s){return yc(4,4,r,s)}function s_(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function a_(r,s,o){o=o!=null?o.concat([r]):null,yc(4,4,s_.bind(null,s,r),o)}function Jg(){}function o_(r,s){var o=Ht();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Hg(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function l_(r,s){var o=Ht();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Hg(s,u[1]))return u[0];if(u=r(),Ma){zt(!0);try{r()}finally{zt(!1)}}return o.memoizedState=[u,s],u}function ep(r,s,o){return o===void 0||(gs&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=db(),He.lanes|=r,Es|=r,o)}function c_(r,s,o,u){return Qn(o,s)?o:Mo.current!==null?(r=ep(r,o,u),Qn(r,s)||(rn=!0),r):(gs&42)===0?(rn=!0,r.memoizedState=o):(r=db(),He.lanes|=r,Es|=r,s)}function u_(r,s,o,u,g){var m=q.p;q.p=m!==0&&8>m?m:8;var x=D.T,N={};D.T=N,rp(r,!1,s,o);try{var K=g(),ae=D.S;if(ae!==null&&ae(N,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var fe=tR(K,u);vc(r,s,fe,tr(r))}else vc(r,s,u,tr(r))}catch(pe){vc(r,s,{then:function(){},status:"rejected",reason:pe},tr())}finally{q.p=m,D.T=x}}function aR(){}function tp(r,s,o,u){if(r.tag!==5)throw Error(i(476));var g=d_(r).queue;u_(r,g,s,W,o===null?aR:function(){return h_(r),o(u)})}function d_(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:W},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function h_(r){var s=d_(r).next.queue;vc(r,s,{},tr())}function np(){return _n(Vc)}function f_(){return Ht().memoizedState}function g_(){return Ht().memoizedState}function oR(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=tr();r=hs(o);var u=fs(s,r,o);u!==null&&(nr(u,s,o),hc(u,s,o)),s={cache:Dg()},r.payload=s;return}s=s.return}}function lR(r,s,o){var u=tr();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Cd(r)?m_(s,o):(o=wg(r,s,o,u),o!==null&&(nr(o,r,u),y_(o,s,u)))}function p_(r,s,o){var u=tr();vc(r,s,o,u)}function vc(r,s,o,u){var g={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Cd(r))m_(s,g);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var x=s.lastRenderedState,N=m(x,o);if(g.hasEagerState=!0,g.eagerState=N,Qn(N,x))return hd(r,s,g,0),yt===null&&dd(),!1}catch{}finally{}if(o=wg(r,s,g,u),o!==null)return nr(o,r,u),y_(o,s,u),!0}return!1}function rp(r,s,o,u){if(u={lane:2,revertLane:Pp(),action:u,hasEagerState:!1,eagerState:null,next:null},Cd(r)){if(s)throw Error(i(479))}else s=wg(r,o,u,2),s!==null&&nr(s,r,2)}function Cd(r){var s=r.alternate;return r===He||s!==null&&s===He}function m_(r,s){Oo=xd=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function y_(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,la(r,o)}}var Id={readContext:_n,use:Sd,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot},v_={readContext:_n,use:Sd,useCallback:function(r,s){return zn().memoizedState=[r,s===void 0?null:s],r},useContext:_n,useEffect:t_,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Nd(4194308,4,s_.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Nd(4194308,4,r,s)},useInsertionEffect:function(r,s){Nd(4,2,r,s)},useMemo:function(r,s){var o=zn();s=s===void 0?null:s;var u=r();if(Ma){zt(!0);try{r()}finally{zt(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=zn();if(o!==void 0){var g=o(s);if(Ma){zt(!0);try{o(s)}finally{zt(!1)}}}else g=s;return u.memoizedState=u.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},u.queue=r,r=r.dispatch=lR.bind(null,He,r),[u.memoizedState,r]},useRef:function(r){var s=zn();return r={current:r},s.memoizedState=r},useState:function(r){r=Wg(r);var s=r.queue,o=p_.bind(null,He,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Jg,useDeferredValue:function(r,s){var o=zn();return ep(o,r,s)},useTransition:function(){var r=Wg(!1);return r=u_.bind(null,He,r.queue,!0,!1),zn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=He,g=zn();if(st){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),yt===null)throw Error(i(349));(et&124)!==0||Uv(u,s,o)}g.memoizedState=o;var m={value:o,getSnapshot:s};return g.queue=m,t_(Bv.bind(null,u,m,r),[r]),u.flags|=2048,Vo(9,Rd(),jv.bind(null,u,m,o,s),null),o},useId:function(){var r=zn(),s=yt.identifierPrefix;if(st){var o=Vi,u=Pi;o=(u&~(1<<32-Et(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=Td++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=nR++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:np,useFormState:Qv,useActionState:Qv,useOptimistic:function(r){var s=zn();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=rp.bind(null,He,!0,o),o.dispatch=s,[r,s]},useMemoCache:Kg,useCacheRefresh:function(){return zn().memoizedState=oR.bind(null,He)}},__={readContext:_n,use:Sd,useCallback:o_,useContext:_n,useEffect:n_,useImperativeHandle:a_,useInsertionEffect:r_,useLayoutEffect:i_,useMemo:l_,useReducer:Ad,useRef:e_,useState:function(){return Ad(Ui)},useDebugValue:Jg,useDeferredValue:function(r,s){var o=Ht();return c_(o,ht.memoizedState,r,s)},useTransition:function(){var r=Ad(Ui)[0],s=Ht().memoizedState;return[typeof r=="boolean"?r:mc(r),s]},useSyncExternalStore:zv,useId:f_,useHostTransitionStatus:np,useFormState:Wv,useActionState:Wv,useOptimistic:function(r,s){var o=Ht();return $v(o,ht,r,s)},useMemoCache:Kg,useCacheRefresh:g_},cR={readContext:_n,use:Sd,useCallback:o_,useContext:_n,useEffect:n_,useImperativeHandle:a_,useInsertionEffect:r_,useLayoutEffect:i_,useMemo:l_,useReducer:Qg,useRef:e_,useState:function(){return Qg(Ui)},useDebugValue:Jg,useDeferredValue:function(r,s){var o=Ht();return ht===null?ep(o,r,s):c_(o,ht.memoizedState,r,s)},useTransition:function(){var r=Qg(Ui)[0],s=Ht().memoizedState;return[typeof r=="boolean"?r:mc(r),s]},useSyncExternalStore:zv,useId:f_,useHostTransitionStatus:np,useFormState:Jv,useActionState:Jv,useOptimistic:function(r,s){var o=Ht();return ht!==null?$v(o,ht,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Kg,useCacheRefresh:g_},Lo=null,_c=0;function kd(r){var s=_c;return _c+=1,Lo===null&&(Lo=[]),Iv(Lo,r,s)}function bc(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Dd(r,s){throw s.$$typeof===_?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function b_(r){var s=r._init;return s(r._payload)}function E_(r){function s(ne,Z){if(r){var se=ne.deletions;se===null?(ne.deletions=[Z],ne.flags|=16):se.push(Z)}}function o(ne,Z){if(!r)return null;for(;Z!==null;)s(ne,Z),Z=Z.sibling;return null}function u(ne){for(var Z=new Map;ne!==null;)ne.key!==null?Z.set(ne.key,ne):Z.set(ne.index,ne),ne=ne.sibling;return Z}function g(ne,Z){return ne=Oi(ne,Z),ne.index=0,ne.sibling=null,ne}function m(ne,Z,se){return ne.index=se,r?(se=ne.alternate,se!==null?(se=se.index,se<Z?(ne.flags|=67108866,Z):se):(ne.flags|=67108866,Z)):(ne.flags|=1048576,Z)}function x(ne){return r&&ne.alternate===null&&(ne.flags|=67108866),ne}function N(ne,Z,se,ge){return Z===null||Z.tag!==6?(Z=Tg(se,ne.mode,ge),Z.return=ne,Z):(Z=g(Z,se),Z.return=ne,Z)}function K(ne,Z,se,ge){var Se=se.type;return Se===S?fe(ne,Z,se.props.children,ge,se.key):Z!==null&&(Z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===A&&b_(Se)===Z.type)?(Z=g(Z,se.props),bc(Z,se),Z.return=ne,Z):(Z=gd(se.type,se.key,se.props,null,ne.mode,ge),bc(Z,se),Z.return=ne,Z)}function ae(ne,Z,se,ge){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==se.containerInfo||Z.stateNode.implementation!==se.implementation?(Z=Sg(se,ne.mode,ge),Z.return=ne,Z):(Z=g(Z,se.children||[]),Z.return=ne,Z)}function fe(ne,Z,se,ge,Se){return Z===null||Z.tag!==7?(Z=Sa(se,ne.mode,ge,Se),Z.return=ne,Z):(Z=g(Z,se),Z.return=ne,Z)}function pe(ne,Z,se){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=Tg(""+Z,ne.mode,se),Z.return=ne,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return se=gd(Z.type,Z.key,Z.props,null,ne.mode,se),bc(se,Z),se.return=ne,se;case w:return Z=Sg(Z,ne.mode,se),Z.return=ne,Z;case A:var ge=Z._init;return Z=ge(Z._payload),pe(ne,Z,se)}if(Y(Z)||H(Z))return Z=Sa(Z,ne.mode,se,null),Z.return=ne,Z;if(typeof Z.then=="function")return pe(ne,kd(Z),se);if(Z.$$typeof===G)return pe(ne,vd(ne,Z),se);Dd(ne,Z)}return null}function oe(ne,Z,se,ge){var Se=Z!==null?Z.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Se!==null?null:N(ne,Z,""+se,ge);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case b:return se.key===Se?K(ne,Z,se,ge):null;case w:return se.key===Se?ae(ne,Z,se,ge):null;case A:return Se=se._init,se=Se(se._payload),oe(ne,Z,se,ge)}if(Y(se)||H(se))return Se!==null?null:fe(ne,Z,se,ge,null);if(typeof se.then=="function")return oe(ne,Z,kd(se),ge);if(se.$$typeof===G)return oe(ne,Z,vd(ne,se),ge);Dd(ne,se)}return null}function le(ne,Z,se,ge,Se){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ne=ne.get(se)||null,N(Z,ne,""+ge,Se);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case b:return ne=ne.get(ge.key===null?se:ge.key)||null,K(Z,ne,ge,Se);case w:return ne=ne.get(ge.key===null?se:ge.key)||null,ae(Z,ne,ge,Se);case A:var Fe=ge._init;return ge=Fe(ge._payload),le(ne,Z,se,ge,Se)}if(Y(ge)||H(ge))return ne=ne.get(se)||null,fe(Z,ne,ge,Se,null);if(typeof ge.then=="function")return le(ne,Z,se,kd(ge),Se);if(ge.$$typeof===G)return le(ne,Z,se,vd(Z,ge),Se);Dd(Z,ge)}return null}function Oe(ne,Z,se,ge){for(var Se=null,Fe=null,Re=Z,ke=Z=0,an=null;Re!==null&&ke<se.length;ke++){Re.index>ke?(an=Re,Re=null):an=Re.sibling;var it=oe(ne,Re,se[ke],ge);if(it===null){Re===null&&(Re=an);break}r&&Re&&it.alternate===null&&s(ne,Re),Z=m(it,Z,ke),Fe===null?Se=it:Fe.sibling=it,Fe=it,Re=an}if(ke===se.length)return o(ne,Re),st&&Ra(ne,ke),Se;if(Re===null){for(;ke<se.length;ke++)Re=pe(ne,se[ke],ge),Re!==null&&(Z=m(Re,Z,ke),Fe===null?Se=Re:Fe.sibling=Re,Fe=Re);return st&&Ra(ne,ke),Se}for(Re=u(Re);ke<se.length;ke++)an=le(Re,ne,ke,se[ke],ge),an!==null&&(r&&an.alternate!==null&&Re.delete(an.key===null?ke:an.key),Z=m(an,Z,ke),Fe===null?Se=an:Fe.sibling=an,Fe=an);return r&&Re.forEach(function(Is){return s(ne,Is)}),st&&Ra(ne,ke),Se}function Ie(ne,Z,se,ge){if(se==null)throw Error(i(151));for(var Se=null,Fe=null,Re=Z,ke=Z=0,an=null,it=se.next();Re!==null&&!it.done;ke++,it=se.next()){Re.index>ke?(an=Re,Re=null):an=Re.sibling;var Is=oe(ne,Re,it.value,ge);if(Is===null){Re===null&&(Re=an);break}r&&Re&&Is.alternate===null&&s(ne,Re),Z=m(Is,Z,ke),Fe===null?Se=Is:Fe.sibling=Is,Fe=Is,Re=an}if(it.done)return o(ne,Re),st&&Ra(ne,ke),Se;if(Re===null){for(;!it.done;ke++,it=se.next())it=pe(ne,it.value,ge),it!==null&&(Z=m(it,Z,ke),Fe===null?Se=it:Fe.sibling=it,Fe=it);return st&&Ra(ne,ke),Se}for(Re=u(Re);!it.done;ke++,it=se.next())it=le(Re,ne,ke,it.value,ge),it!==null&&(r&&it.alternate!==null&&Re.delete(it.key===null?ke:it.key),Z=m(it,Z,ke),Fe===null?Se=it:Fe.sibling=it,Fe=it);return r&&Re.forEach(function(uN){return s(ne,uN)}),st&&Ra(ne,ke),Se}function gt(ne,Z,se,ge){if(typeof se=="object"&&se!==null&&se.type===S&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case b:e:{for(var Se=se.key;Z!==null;){if(Z.key===Se){if(Se=se.type,Se===S){if(Z.tag===7){o(ne,Z.sibling),ge=g(Z,se.props.children),ge.return=ne,ne=ge;break e}}else if(Z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===A&&b_(Se)===Z.type){o(ne,Z.sibling),ge=g(Z,se.props),bc(ge,se),ge.return=ne,ne=ge;break e}o(ne,Z);break}else s(ne,Z);Z=Z.sibling}se.type===S?(ge=Sa(se.props.children,ne.mode,ge,se.key),ge.return=ne,ne=ge):(ge=gd(se.type,se.key,se.props,null,ne.mode,ge),bc(ge,se),ge.return=ne,ne=ge)}return x(ne);case w:e:{for(Se=se.key;Z!==null;){if(Z.key===Se)if(Z.tag===4&&Z.stateNode.containerInfo===se.containerInfo&&Z.stateNode.implementation===se.implementation){o(ne,Z.sibling),ge=g(Z,se.children||[]),ge.return=ne,ne=ge;break e}else{o(ne,Z);break}else s(ne,Z);Z=Z.sibling}ge=Sg(se,ne.mode,ge),ge.return=ne,ne=ge}return x(ne);case A:return Se=se._init,se=Se(se._payload),gt(ne,Z,se,ge)}if(Y(se))return Oe(ne,Z,se,ge);if(H(se)){if(Se=H(se),typeof Se!="function")throw Error(i(150));return se=Se.call(se),Ie(ne,Z,se,ge)}if(typeof se.then=="function")return gt(ne,Z,kd(se),ge);if(se.$$typeof===G)return gt(ne,Z,vd(ne,se),ge);Dd(ne,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,Z!==null&&Z.tag===6?(o(ne,Z.sibling),ge=g(Z,se),ge.return=ne,ne=ge):(o(ne,Z),ge=Tg(se,ne.mode,ge),ge.return=ne,ne=ge),x(ne)):o(ne,Z)}return function(ne,Z,se,ge){try{_c=0;var Se=gt(ne,Z,se,ge);return Lo=null,Se}catch(Re){if(Re===uc||Re===bd)throw Re;var Fe=Wn(29,Re,null,ne.mode);return Fe.lanes=ge,Fe.return=ne,Fe}finally{}}}var zo=E_(!0),w_=E_(!1),Tr=F(null),oi=null;function ps(r){var s=r.alternate;X(Wt,Wt.current&1),X(Tr,r),oi===null&&(s===null||Mo.current!==null||s.memoizedState!==null)&&(oi=r)}function x_(r){if(r.tag===22){if(X(Wt,Wt.current),X(Tr,r),oi===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(oi=r)}}else ms()}function ms(){X(Wt,Wt.current),X(Tr,Tr.current)}function ji(r){te(Tr),oi===r&&(oi=null),te(Wt)}var Wt=F(0);function Md(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Yp(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function ip(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var sp={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=tr(),g=hs(u);g.payload=s,o!=null&&(g.callback=o),s=fs(r,g,u),s!==null&&(nr(s,r,u),hc(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=tr(),g=hs(u);g.tag=1,g.payload=s,o!=null&&(g.callback=o),s=fs(r,g,u),s!==null&&(nr(s,r,u),hc(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=tr(),u=hs(o);u.tag=2,s!=null&&(u.callback=s),s=fs(r,u,o),s!==null&&(nr(s,r,o),hc(s,r,o))}};function T_(r,s,o,u,g,m,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,x):s.prototype&&s.prototype.isPureReactComponent?!nc(o,u)||!nc(g,m):!0}function S_(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&sp.enqueueReplaceState(s,s.state,null)}function Oa(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=y({},o));for(var g in r)o[g]===void 0&&(o[g]=r[g])}return o}var Od=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function A_(r){Od(r)}function R_(r){console.error(r)}function N_(r){Od(r)}function Pd(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function C_(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function ap(r,s,o){return o=hs(o),o.tag=3,o.payload={element:null},o.callback=function(){Pd(r,s)},o}function I_(r){return r=hs(r),r.tag=3,r}function k_(r,s,o,u){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var m=u.value;r.payload=function(){return g(m)},r.callback=function(){C_(s,o,u)}}var x=o.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(r.callback=function(){C_(s,o,u),typeof g!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var N=u.stack;this.componentDidCatch(u.value,{componentStack:N!==null?N:""})})}function uR(r,s,o,u,g){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&oc(s,o,g,!0),o=Tr.current,o!==null){switch(o.tag){case 13:return oi===null?Ip():o.alternate===null&&Ct===0&&(Ct=3),o.flags&=-257,o.flags|=65536,o.lanes=g,u===Pg?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Dp(r,u,g)),!1;case 22:return o.flags|=65536,u===Pg?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Dp(r,u,g)),!1}throw Error(i(435,o.tag))}return Dp(r,u,g),Ip(),!1}if(st)return s=Tr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==Ng&&(r=Error(i(422),{cause:u}),ac(br(r,o)))):(u!==Ng&&(s=Error(i(423),{cause:u}),ac(br(s,o))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,u=br(u,o),g=ap(r.stateNode,u,g),zg(r,g),Ct!==4&&(Ct=2)),!1;var m=Error(i(520),{cause:u});if(m=br(m,o),Rc===null?Rc=[m]:Rc.push(m),Ct!==4&&(Ct=2),s===null)return!0;u=br(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=g&-g,o.lanes|=r,r=ap(o.stateNode,u,r),zg(o,r),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ws===null||!ws.has(m))))return o.flags|=65536,g&=-g,o.lanes|=g,g=I_(g),k_(g,r,o,u),zg(o,g),!1}o=o.return}while(o!==null);return!1}var D_=Error(i(461)),rn=!1;function hn(r,s,o,u){s.child=r===null?w_(s,null,o,u):zo(s,r.child,o,u)}function M_(r,s,o,u,g){o=o.render;var m=s.ref;if("ref"in u){var x={};for(var N in u)N!=="ref"&&(x[N]=u[N])}else x=u;return ka(s),u=qg(r,s,o,x,m,g),N=$g(),r!==null&&!rn?(Fg(r,s,g),Bi(r,s,g)):(st&&N&&Ag(s),s.flags|=1,hn(r,s,u,g),s.child)}function O_(r,s,o,u,g){if(r===null){var m=o.type;return typeof m=="function"&&!xg(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,P_(r,s,m,u,g)):(r=gd(o.type,null,u,s,s.mode,g),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,!gp(r,g)){var x=m.memoizedProps;if(o=o.compare,o=o!==null?o:nc,o(x,u)&&r.ref===s.ref)return Bi(r,s,g)}return s.flags|=1,r=Oi(m,u),r.ref=s.ref,r.return=s,s.child=r}function P_(r,s,o,u,g){if(r!==null){var m=r.memoizedProps;if(nc(m,u)&&r.ref===s.ref)if(rn=!1,s.pendingProps=u=m,gp(r,g))(r.flags&131072)!==0&&(rn=!0);else return s.lanes=r.lanes,Bi(r,s,g)}return op(r,s,o,u,g)}function V_(r,s,o){var u=s.pendingProps,g=u.children,m=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,r!==null){for(g=s.child=r.child,m=0;g!==null;)m=m|g.lanes|g.childLanes,g=g.sibling;s.childLanes=m&~u}else s.childLanes=0,s.child=null;return L_(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&_d(s,m!==null?m.cachePool:null),m!==null?Pv(s,m):jg(),x_(s);else return s.lanes=s.childLanes=536870912,L_(r,s,m!==null?m.baseLanes|o:o,o)}else m!==null?(_d(s,m.cachePool),Pv(s,m),ms(),s.memoizedState=null):(r!==null&&_d(s,null),jg(),ms());return hn(r,s,g,o),s.child}function L_(r,s,o,u){var g=Og();return g=g===null?null:{parent:Qt._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},r!==null&&_d(s,null),jg(),x_(s),r!==null&&oc(r,s,u,!0),null}function Vd(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function op(r,s,o,u,g){return ka(s),o=qg(r,s,o,u,void 0,g),u=$g(),r!==null&&!rn?(Fg(r,s,g),Bi(r,s,g)):(st&&u&&Ag(s),s.flags|=1,hn(r,s,o,g),s.child)}function z_(r,s,o,u,g,m){return ka(s),s.updateQueue=null,o=Lv(s,u,o,g),Vv(r),u=$g(),r!==null&&!rn?(Fg(r,s,m),Bi(r,s,m)):(st&&u&&Ag(s),s.flags|=1,hn(r,s,o,m),s.child)}function U_(r,s,o,u,g){if(ka(s),s.stateNode===null){var m=No,x=o.contextType;typeof x=="object"&&x!==null&&(m=_n(x)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=sp,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},Vg(s),x=o.contextType,m.context=typeof x=="object"&&x!==null?_n(x):No,m.state=s.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(ip(s,o,x,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&sp.enqueueReplaceState(m,m.state,null),gc(s,u,m,g),fc(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){m=s.stateNode;var N=s.memoizedProps,K=Oa(o,N);m.props=K;var ae=m.context,fe=o.contextType;x=No,typeof fe=="object"&&fe!==null&&(x=_n(fe));var pe=o.getDerivedStateFromProps;fe=typeof pe=="function"||typeof m.getSnapshotBeforeUpdate=="function",N=s.pendingProps!==N,fe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(N||ae!==x)&&S_(s,m,u,x),ds=!1;var oe=s.memoizedState;m.state=oe,gc(s,u,m,g),fc(),ae=s.memoizedState,N||oe!==ae||ds?(typeof pe=="function"&&(ip(s,o,pe,u),ae=s.memoizedState),(K=ds||T_(s,o,K,u,oe,ae,x))?(fe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=ae),m.props=u,m.state=ae,m.context=x,u=K):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,Lg(r,s),x=s.memoizedProps,fe=Oa(o,x),m.props=fe,pe=s.pendingProps,oe=m.context,ae=o.contextType,K=No,typeof ae=="object"&&ae!==null&&(K=_n(ae)),N=o.getDerivedStateFromProps,(ae=typeof N=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==pe||oe!==K)&&S_(s,m,u,K),ds=!1,oe=s.memoizedState,m.state=oe,gc(s,u,m,g),fc();var le=s.memoizedState;x!==pe||oe!==le||ds||r!==null&&r.dependencies!==null&&yd(r.dependencies)?(typeof N=="function"&&(ip(s,o,N,u),le=s.memoizedState),(fe=ds||T_(s,o,fe,u,oe,le,K)||r!==null&&r.dependencies!==null&&yd(r.dependencies))?(ae||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,le,K),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,le,K)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===r.memoizedProps&&oe===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&oe===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=le),m.props=u,m.state=le,m.context=K,u=fe):(typeof m.componentDidUpdate!="function"||x===r.memoizedProps&&oe===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&oe===r.memoizedState||(s.flags|=1024),u=!1)}return m=u,Vd(r,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,r!==null&&u?(s.child=zo(s,r.child,null,g),s.child=zo(s,null,o,g)):hn(r,s,o,g),s.memoizedState=m.state,r=s.child):r=Bi(r,s,g),r}function j_(r,s,o,u){return sc(),s.flags|=256,hn(r,s,o,u),s.child}var lp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cp(r){return{baseLanes:r,cachePool:Rv()}}function up(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Sr),r}function B_(r,s,o){var u=s.pendingProps,g=!1,m=(s.flags&128)!==0,x;if((x=m)||(x=r!==null&&r.memoizedState===null?!1:(Wt.current&2)!==0),x&&(g=!0,s.flags&=-129),x=(s.flags&32)!==0,s.flags&=-33,r===null){if(st){if(g?ps(s):ms(),st){var N=Nt,K;if(K=N){e:{for(K=N,N=ai;K.nodeType!==8;){if(!N){N=null;break e}if(K=Vr(K.nextSibling),K===null){N=null;break e}}N=K}N!==null?(s.memoizedState={dehydrated:N,treeContext:Aa!==null?{id:Pi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},K=Wn(18,null,null,0),K.stateNode=N,K.return=s,s.child=K,Mn=s,Nt=null,K=!0):K=!1}K||Ca(s)}if(N=s.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return Yp(N)?s.lanes=32:s.lanes=536870912,null;ji(s)}return N=u.children,u=u.fallback,g?(ms(),g=s.mode,N=Ld({mode:"hidden",children:N},g),u=Sa(u,g,o,null),N.return=s,u.return=s,N.sibling=u,s.child=N,g=s.child,g.memoizedState=cp(o),g.childLanes=up(r,x,o),s.memoizedState=lp,u):(ps(s),dp(s,N))}if(K=r.memoizedState,K!==null&&(N=K.dehydrated,N!==null)){if(m)s.flags&256?(ps(s),s.flags&=-257,s=hp(r,s,o)):s.memoizedState!==null?(ms(),s.child=r.child,s.flags|=128,s=null):(ms(),g=u.fallback,N=s.mode,u=Ld({mode:"visible",children:u.children},N),g=Sa(g,N,o,null),g.flags|=2,u.return=s,g.return=s,u.sibling=g,s.child=u,zo(s,r.child,null,o),u=s.child,u.memoizedState=cp(o),u.childLanes=up(r,x,o),s.memoizedState=lp,s=g);else if(ps(s),Yp(N)){if(x=N.nextSibling&&N.nextSibling.dataset,x)var ae=x.dgst;x=ae,u=Error(i(419)),u.stack="",u.digest=x,ac({value:u,source:null,stack:null}),s=hp(r,s,o)}else if(rn||oc(r,s,o,!1),x=(o&r.childLanes)!==0,rn||x){if(x=yt,x!==null&&(u=o&-o,u=(u&42)!==0?1:Gr(u),u=(u&(x.suspendedLanes|o))!==0?0:u,u!==0&&u!==K.retryLane))throw K.retryLane=u,Ro(r,u),nr(x,r,u),D_;N.data==="$?"||Ip(),s=hp(r,s,o)}else N.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=K.treeContext,Nt=Vr(N.nextSibling),Mn=s,st=!0,Na=null,ai=!1,r!==null&&(wr[xr++]=Pi,wr[xr++]=Vi,wr[xr++]=Aa,Pi=r.id,Vi=r.overflow,Aa=s),s=dp(s,u.children),s.flags|=4096);return s}return g?(ms(),g=u.fallback,N=s.mode,K=r.child,ae=K.sibling,u=Oi(K,{mode:"hidden",children:u.children}),u.subtreeFlags=K.subtreeFlags&65011712,ae!==null?g=Oi(ae,g):(g=Sa(g,N,o,null),g.flags|=2),g.return=s,u.return=s,u.sibling=g,s.child=u,u=g,g=s.child,N=r.child.memoizedState,N===null?N=cp(o):(K=N.cachePool,K!==null?(ae=Qt._currentValue,K=K.parent!==ae?{parent:ae,pool:ae}:K):K=Rv(),N={baseLanes:N.baseLanes|o,cachePool:K}),g.memoizedState=N,g.childLanes=up(r,x,o),s.memoizedState=lp,u):(ps(s),o=r.child,r=o.sibling,o=Oi(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(x=s.deletions,x===null?(s.deletions=[r],s.flags|=16):x.push(r)),s.child=o,s.memoizedState=null,o)}function dp(r,s){return s=Ld({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Ld(r,s){return r=Wn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function hp(r,s,o){return zo(s,r.child,null,o),r=dp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function H_(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Ig(r.return,s,o)}function fp(r,s,o,u,g){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:g}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=g)}function q_(r,s,o){var u=s.pendingProps,g=u.revealOrder,m=u.tail;if(hn(r,s,u.children,o),u=Wt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&H_(r,o,s);else if(r.tag===19)H_(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(X(Wt,u),g){case"forwards":for(o=s.child,g=null;o!==null;)r=o.alternate,r!==null&&Md(r)===null&&(g=o),o=o.sibling;o=g,o===null?(g=s.child,s.child=null):(g=o.sibling,o.sibling=null),fp(s,!1,g,o,m);break;case"backwards":for(o=null,g=s.child,s.child=null;g!==null;){if(r=g.alternate,r!==null&&Md(r)===null){s.child=g;break}r=g.sibling,g.sibling=o,o=g,g=r}fp(s,!0,o,null,m);break;case"together":fp(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Bi(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Es|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(oc(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Oi(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Oi(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function gp(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&yd(r)))}function dR(r,s,o){switch(s.tag){case 3:_e(s,s.stateNode.containerInfo),us(s,Qt,r.memoizedState.cache),sc();break;case 27:case 5:Ne(s);break;case 4:_e(s,s.stateNode.containerInfo);break;case 10:us(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(ps(s),s.flags|=128,null):(o&s.child.childLanes)!==0?B_(r,s,o):(ps(s),r=Bi(r,s,o),r!==null?r.sibling:null);ps(s);break;case 19:var g=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(oc(r,s,o,!1),u=(o&s.childLanes)!==0),g){if(u)return q_(r,s,o);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),X(Wt,Wt.current),u)break;return null;case 22:case 23:return s.lanes=0,V_(r,s,o);case 24:us(s,Qt,r.memoizedState.cache)}return Bi(r,s,o)}function $_(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)rn=!0;else{if(!gp(r,o)&&(s.flags&128)===0)return rn=!1,dR(r,s,o);rn=(r.flags&131072)!==0}else rn=!1,st&&(s.flags&1048576)!==0&&bv(s,md,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var u=s.elementType,g=u._init;if(u=g(u._payload),s.type=u,typeof u=="function")xg(u)?(r=Oa(u,r),s.tag=1,s=U_(null,s,u,r,o)):(s.tag=0,s=op(null,s,u,r,o));else{if(u!=null){if(g=u.$$typeof,g===j){s.tag=11,s=M_(null,s,u,r,o);break e}else if(g===O){s.tag=14,s=O_(null,s,u,r,o);break e}}throw s=P(u)||u,Error(i(306,s,""))}}return s;case 0:return op(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,g=Oa(u,s.pendingProps),U_(r,s,u,g,o);case 3:e:{if(_e(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;g=m.element,Lg(r,s),gc(s,u,null,o);var x=s.memoizedState;if(u=x.cache,us(s,Qt,u),u!==m.cache&&kg(s,[Qt],o,!0),fc(),u=x.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:x.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=j_(r,s,u,o);break e}else if(u!==g){g=br(Error(i(424)),s),ac(g),s=j_(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Nt=Vr(r.firstChild),Mn=s,st=!0,Na=null,ai=!0,o=w_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(sc(),u===g){s=Bi(r,s,o);break e}hn(r,s,u,o)}s=s.child}return s;case 26:return Vd(r,s),r===null?(o=Kb(s.type,null,s.pendingProps,null))?s.memoizedState=o:st||(o=s.type,r=s.pendingProps,u=Wd(ue.current).createElement(o),u[Mt]=s,u[Rt]=r,gn(u,o,r),wt(u),s.stateNode=u):s.memoizedState=Kb(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ne(s),r===null&&st&&(u=s.stateNode=Fb(s.type,s.pendingProps,ue.current),Mn=s,ai=!0,g=Nt,Ss(s.type)?(Kp=g,Nt=Vr(u.firstChild)):Nt=g),hn(r,s,s.pendingProps.children,o),Vd(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&st&&((g=u=Nt)&&(u=UR(u,s.type,s.pendingProps,ai),u!==null?(s.stateNode=u,Mn=s,Nt=Vr(u.firstChild),ai=!1,g=!0):g=!1),g||Ca(s)),Ne(s),g=s.type,m=s.pendingProps,x=r!==null?r.memoizedProps:null,u=m.children,$p(g,m)?u=null:x!==null&&$p(g,x)&&(s.flags|=32),s.memoizedState!==null&&(g=qg(r,s,rR,null,null,o),Vc._currentValue=g),Vd(r,s),hn(r,s,u,o),s.child;case 6:return r===null&&st&&((r=o=Nt)&&(o=jR(o,s.pendingProps,ai),o!==null?(s.stateNode=o,Mn=s,Nt=null,r=!0):r=!1),r||Ca(s)),null;case 13:return B_(r,s,o);case 4:return _e(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=zo(s,null,u,o):hn(r,s,u,o),s.child;case 11:return M_(r,s,s.type,s.pendingProps,o);case 7:return hn(r,s,s.pendingProps,o),s.child;case 8:return hn(r,s,s.pendingProps.children,o),s.child;case 12:return hn(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,us(s,s.type,u.value),hn(r,s,u.children,o),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,ka(s),g=_n(g),u=u(g),s.flags|=1,hn(r,s,u,o),s.child;case 14:return O_(r,s,s.type,s.pendingProps,o);case 15:return P_(r,s,s.type,s.pendingProps,o);case 19:return q_(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=Ld(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Oi(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return V_(r,s,o);case 24:return ka(s),u=_n(Qt),r===null?(g=Og(),g===null&&(g=yt,m=Dg(),g.pooledCache=m,m.refCount++,m!==null&&(g.pooledCacheLanes|=o),g=m),s.memoizedState={parent:u,cache:g},Vg(s),us(s,Qt,g)):((r.lanes&o)!==0&&(Lg(r,s),gc(s,null,null,o),fc()),g=r.memoizedState,m=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),us(s,Qt,u)):(u=m.cache,us(s,Qt,u),u!==g.cache&&kg(s,[Qt],o,!0))),hn(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Hi(r){r.flags|=4}function F_(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Jb(s)){if(s=Tr.current,s!==null&&((et&4194048)===et?oi!==null:(et&62914560)!==et&&(et&536870912)===0||s!==oi))throw dc=Pg,Nv;r.flags|=8192}}function zd(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Ir():536870912,r.lanes|=s,Ho|=s)}function Ec(r,s){if(!st)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function xt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var g=r.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function hR(r,s,o){var u=s.pendingProps;switch(Rg(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(s),null;case 1:return xt(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),zi(Qt),Ae(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(ic(s)?Hi(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,xv())),xt(s),null;case 26:return o=s.memoizedState,r===null?(Hi(s),o!==null?(xt(s),F_(s,o)):(xt(s),s.flags&=-16777217)):o?o!==r.memoizedState?(Hi(s),xt(s),F_(s,o)):(xt(s),s.flags&=-16777217):(r.memoizedProps!==u&&Hi(s),xt(s),s.flags&=-16777217),null;case 27:nt(s),o=ue.current;var g=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Hi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return xt(s),null}r=re.current,ic(s)?Ev(s):(r=Fb(g,u,o),s.stateNode=r,Hi(s))}return xt(s),null;case 5:if(nt(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Hi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return xt(s),null}if(r=re.current,ic(s))Ev(s);else{switch(g=Wd(ue.current),r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?g.createElement(o,{is:u.is}):g.createElement(o)}}r[Mt]=s,r[Rt]=u;e:for(g=s.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===s)break e;for(;g.sibling===null;){if(g.return===null||g.return===s)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}s.stateNode=r;e:switch(gn(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Hi(s)}}return xt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&Hi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=ue.current,ic(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,g=Mn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}r[Mt]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||zb(r.nodeValue,o)),r||Ca(s)}else r=Wd(r).createTextNode(u),r[Mt]=s,s.stateNode=r}return xt(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=ic(s),u!==null&&u.dehydrated!==null){if(r===null){if(!g)throw Error(i(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Mt]=s}else sc(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;xt(s),g=!1}else g=xv(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(ji(s),s):(ji(s),null)}if(ji(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==g&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),zd(s,s.updateQueue),xt(s),null;case 4:return Ae(),r===null&&Up(s.stateNode.containerInfo),xt(s),null;case 10:return zi(s.type),xt(s),null;case 19:if(te(Wt),g=s.memoizedState,g===null)return xt(s),null;if(u=(s.flags&128)!==0,m=g.rendering,m===null)if(u)Ec(g,!1);else{if(Ct!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(m=Md(r),m!==null){for(s.flags|=128,Ec(g,!1),r=m.updateQueue,s.updateQueue=r,zd(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)_v(o,r),o=o.sibling;return X(Wt,Wt.current&1|2),s.child}r=r.sibling}g.tail!==null&&ze()>Bd&&(s.flags|=128,u=!0,Ec(g,!1),s.lanes=4194304)}else{if(!u)if(r=Md(m),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,zd(s,r),Ec(g,!0),g.tail===null&&g.tailMode==="hidden"&&!m.alternate&&!st)return xt(s),null}else 2*ze()-g.renderingStartTime>Bd&&o!==536870912&&(s.flags|=128,u=!0,Ec(g,!1),s.lanes=4194304);g.isBackwards?(m.sibling=s.child,s.child=m):(r=g.last,r!==null?r.sibling=m:s.child=m,g.last=m)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=ze(),s.sibling=null,r=Wt.current,X(Wt,u?r&1|2:r&1),s):(xt(s),null);case 22:case 23:return ji(s),Bg(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(xt(s),s.subtreeFlags&6&&(s.flags|=8192)):xt(s),o=s.updateQueue,o!==null&&zd(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&te(Da),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),zi(Qt),xt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function fR(r,s){switch(Rg(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return zi(Qt),Ae(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return nt(s),null;case 13:if(ji(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));sc()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return te(Wt),null;case 4:return Ae(),null;case 10:return zi(s.type),null;case 22:case 23:return ji(s),Bg(),r!==null&&te(Da),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return zi(Qt),null;case 25:return null;default:return null}}function G_(r,s){switch(Rg(s),s.tag){case 3:zi(Qt),Ae();break;case 26:case 27:case 5:nt(s);break;case 4:Ae();break;case 13:ji(s);break;case 19:te(Wt);break;case 10:zi(s.type);break;case 22:case 23:ji(s),Bg(),r!==null&&te(Da);break;case 24:zi(Qt)}}function wc(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var g=u.next;o=g;do{if((o.tag&r)===r){u=void 0;var m=o.create,x=o.inst;u=m(),x.destroy=u}o=o.next}while(o!==g)}}catch(N){pt(s,s.return,N)}}function ys(r,s,o){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var m=g.next;u=m;do{if((u.tag&r)===r){var x=u.inst,N=x.destroy;if(N!==void 0){x.destroy=void 0,g=s;var K=o,ae=N;try{ae()}catch(fe){pt(g,K,fe)}}}u=u.next}while(u!==m)}}catch(fe){pt(s,s.return,fe)}}function Y_(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{Ov(s,o)}catch(u){pt(r,r.return,u)}}}function K_(r,s,o){o.props=Oa(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){pt(r,s,u)}}function xc(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(g){pt(r,s,g)}}function li(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(g){pt(r,s,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){pt(r,s,g)}else o.current=null}function X_(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(g){pt(r,r.return,g)}}function pp(r,s,o){try{var u=r.stateNode;OR(u,r.type,o,s),u[Rt]=s}catch(g){pt(r,r.return,g)}}function Q_(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ss(r.type)||r.tag===4}function mp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Q_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ss(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function yp(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Qd));else if(u!==4&&(u===27&&Ss(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(yp(r,s,o),r=r.sibling;r!==null;)yp(r,s,o),r=r.sibling}function Ud(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&Ss(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Ud(r,s,o),r=r.sibling;r!==null;)Ud(r,s,o),r=r.sibling}function W_(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);gn(s,u,o),s[Mt]=r,s[Rt]=o}catch(m){pt(r,r.return,m)}}var qi=!1,Pt=!1,vp=!1,Z_=typeof WeakSet=="function"?WeakSet:Set,sn=null;function gR(r,s){if(r=r.containerInfo,Hp=rh,r=cv(r),mg(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var g=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var x=0,N=-1,K=-1,ae=0,fe=0,pe=r,oe=null;t:for(;;){for(var le;pe!==o||g!==0&&pe.nodeType!==3||(N=x+g),pe!==m||u!==0&&pe.nodeType!==3||(K=x+u),pe.nodeType===3&&(x+=pe.nodeValue.length),(le=pe.firstChild)!==null;)oe=pe,pe=le;for(;;){if(pe===r)break t;if(oe===o&&++ae===g&&(N=x),oe===m&&++fe===u&&(K=x),(le=pe.nextSibling)!==null)break;pe=oe,oe=pe.parentNode}pe=le}o=N===-1||K===-1?null:{start:N,end:K}}else o=null}o=o||{start:0,end:0}}else o=null;for(qp={focusedElem:r,selectionRange:o},rh=!1,sn=s;sn!==null;)if(s=sn,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,sn=r;else for(;sn!==null;){switch(s=sn,m=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=s,g=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var Oe=Oa(o.type,g,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(Oe,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ie){pt(o,o.return,Ie)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)Gp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Gp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,sn=r;break}sn=s.return}}function J_(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:vs(r,o),u&4&&wc(5,o);break;case 1:if(vs(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(x){pt(o,o.return,x)}else{var g=Oa(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(g,s,r.__reactInternalSnapshotBeforeUpdate)}catch(x){pt(o,o.return,x)}}u&64&&Y_(o),u&512&&xc(o,o.return);break;case 3:if(vs(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Ov(r,s)}catch(x){pt(o,o.return,x)}}break;case 27:s===null&&u&4&&W_(o);case 26:case 5:vs(r,o),s===null&&u&4&&X_(o),u&512&&xc(o,o.return);break;case 12:vs(r,o);break;case 13:vs(r,o),u&4&&nb(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=xR.bind(null,o),BR(r,o))));break;case 22:if(u=o.memoizedState!==null||qi,!u){s=s!==null&&s.memoizedState!==null||Pt,g=qi;var m=Pt;qi=u,(Pt=s)&&!m?_s(r,o,(o.subtreeFlags&8772)!==0):vs(r,o),qi=g,Pt=m}break;case 30:break;default:vs(r,o)}}function eb(r){var s=r.alternate;s!==null&&(r.alternate=null,eb(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Xr(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var bt=null,Un=!1;function $i(r,s,o){for(o=o.child;o!==null;)tb(r,s,o),o=o.sibling}function tb(r,s,o){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(at,o)}catch{}switch(o.tag){case 26:Pt||li(o,s),$i(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Pt||li(o,s);var u=bt,g=Un;Ss(o.type)&&(bt=o.stateNode,Un=!1),$i(r,s,o),Dc(o.stateNode),bt=u,Un=g;break;case 5:Pt||li(o,s);case 6:if(u=bt,g=Un,bt=null,$i(r,s,o),bt=u,Un=g,bt!==null)if(Un)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(o.stateNode)}catch(m){pt(o,s,m)}else try{bt.removeChild(o.stateNode)}catch(m){pt(o,s,m)}break;case 18:bt!==null&&(Un?(r=bt,qb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),jc(r)):qb(bt,o.stateNode));break;case 4:u=bt,g=Un,bt=o.stateNode.containerInfo,Un=!0,$i(r,s,o),bt=u,Un=g;break;case 0:case 11:case 14:case 15:Pt||ys(2,o,s),Pt||ys(4,o,s),$i(r,s,o);break;case 1:Pt||(li(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&K_(o,s,u)),$i(r,s,o);break;case 21:$i(r,s,o);break;case 22:Pt=(u=Pt)||o.memoizedState!==null,$i(r,s,o),Pt=u;break;default:$i(r,s,o)}}function nb(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{jc(r)}catch(o){pt(s,s.return,o)}}function pR(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new Z_),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new Z_),s;default:throw Error(i(435,r.tag))}}function _p(r,s){var o=pR(r);s.forEach(function(u){var g=TR.bind(null,r,u);o.has(u)||(o.add(u),u.then(g,g))})}function Zn(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var g=o[u],m=r,x=s,N=x;e:for(;N!==null;){switch(N.tag){case 27:if(Ss(N.type)){bt=N.stateNode,Un=!1;break e}break;case 5:bt=N.stateNode,Un=!1;break e;case 3:case 4:bt=N.stateNode.containerInfo,Un=!0;break e}N=N.return}if(bt===null)throw Error(i(160));tb(m,x,g),bt=null,Un=!1,m=g.alternate,m!==null&&(m.return=null),g.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)rb(s,r),s=s.sibling}var Pr=null;function rb(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Zn(s,r),Jn(r),u&4&&(ys(3,r,r.return),wc(3,r),ys(5,r,r.return));break;case 1:Zn(s,r),Jn(r),u&512&&(Pt||o===null||li(o,o.return)),u&64&&qi&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var g=Pr;if(Zn(s,r),Jn(r),u&512&&(Pt||o===null||li(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":m=g.getElementsByTagName("title")[0],(!m||m[Si]||m[Mt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=g.createElement(u),g.head.insertBefore(m,g.querySelector("head > title"))),gn(m,u,o),m[Mt]=r,wt(m),u=m;break e;case"link":var x=Wb("link","href",g).get(u+(o.href||""));if(x){for(var N=0;N<x.length;N++)if(m=x[N],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){x.splice(N,1);break t}}m=g.createElement(u),gn(m,u,o),g.head.appendChild(m);break;case"meta":if(x=Wb("meta","content",g).get(u+(o.content||""))){for(N=0;N<x.length;N++)if(m=x[N],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){x.splice(N,1);break t}}m=g.createElement(u),gn(m,u,o),g.head.appendChild(m);break;default:throw Error(i(468,u))}m[Mt]=r,wt(m),u=m}r.stateNode=u}else Zb(g,r.type,r.stateNode);else r.stateNode=Qb(g,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?Zb(g,r.type,r.stateNode):Qb(g,u,r.memoizedProps)):u===null&&r.stateNode!==null&&pp(r,r.memoizedProps,o.memoizedProps)}break;case 27:Zn(s,r),Jn(r),u&512&&(Pt||o===null||li(o,o.return)),o!==null&&u&4&&pp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Zn(s,r),Jn(r),u&512&&(Pt||o===null||li(o,o.return)),r.flags&32){g=r.stateNode;try{mr(g,"")}catch(le){pt(r,r.return,le)}}u&4&&r.stateNode!=null&&(g=r.memoizedProps,pp(r,g,o!==null?o.memoizedProps:g)),u&1024&&(vp=!0);break;case 6:if(Zn(s,r),Jn(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(le){pt(r,r.return,le)}}break;case 3:if(eh=null,g=Pr,Pr=Zd(s.containerInfo),Zn(s,r),Pr=g,Jn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{jc(s.containerInfo)}catch(le){pt(r,r.return,le)}vp&&(vp=!1,ib(r));break;case 4:u=Pr,Pr=Zd(r.stateNode.containerInfo),Zn(s,r),Jn(r),Pr=u;break;case 12:Zn(s,r),Jn(r);break;case 13:Zn(s,r),Jn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Sp=ze()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,_p(r,u)));break;case 22:g=r.memoizedState!==null;var K=o!==null&&o.memoizedState!==null,ae=qi,fe=Pt;if(qi=ae||g,Pt=fe||K,Zn(s,r),Pt=fe,qi=ae,Jn(r),u&8192)e:for(s=r.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(o===null||K||qi||Pt||Pa(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){K=o=s;try{if(m=K.stateNode,g)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{N=K.stateNode;var pe=K.memoizedProps.style,oe=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;N.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(le){pt(K,K.return,le)}}}else if(s.tag===6){if(o===null){K=s;try{K.stateNode.nodeValue=g?"":K.memoizedProps}catch(le){pt(K,K.return,le)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,_p(r,o))));break;case 19:Zn(s,r),Jn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,_p(r,u)));break;case 30:break;case 21:break;default:Zn(s,r),Jn(r)}}function Jn(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(Q_(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var g=o.stateNode,m=mp(r);Ud(r,m,g);break;case 5:var x=o.stateNode;o.flags&32&&(mr(x,""),o.flags&=-33);var N=mp(r);Ud(r,N,x);break;case 3:case 4:var K=o.stateNode.containerInfo,ae=mp(r);yp(r,ae,K);break;default:throw Error(i(161))}}catch(fe){pt(r,r.return,fe)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function ib(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;ib(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function vs(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)J_(r,s.alternate,s),s=s.sibling}function Pa(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:ys(4,s,s.return),Pa(s);break;case 1:li(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&K_(s,s.return,o),Pa(s);break;case 27:Dc(s.stateNode);case 26:case 5:li(s,s.return),Pa(s);break;case 22:s.memoizedState===null&&Pa(s);break;case 30:Pa(s);break;default:Pa(s)}r=r.sibling}}function _s(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=r,m=s,x=m.flags;switch(m.tag){case 0:case 11:case 15:_s(g,m,o),wc(4,m);break;case 1:if(_s(g,m,o),u=m,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ae){pt(u,u.return,ae)}if(u=m,g=u.updateQueue,g!==null){var N=u.stateNode;try{var K=g.shared.hiddenCallbacks;if(K!==null)for(g.shared.hiddenCallbacks=null,g=0;g<K.length;g++)Mv(K[g],N)}catch(ae){pt(u,u.return,ae)}}o&&x&64&&Y_(m),xc(m,m.return);break;case 27:W_(m);case 26:case 5:_s(g,m,o),o&&u===null&&x&4&&X_(m),xc(m,m.return);break;case 12:_s(g,m,o);break;case 13:_s(g,m,o),o&&x&4&&nb(g,m);break;case 22:m.memoizedState===null&&_s(g,m,o),xc(m,m.return);break;case 30:break;default:_s(g,m,o)}s=s.sibling}}function bp(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&lc(o))}function Ep(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&lc(r))}function ci(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)sb(r,s,o,u),s=s.sibling}function sb(r,s,o,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:ci(r,s,o,u),g&2048&&wc(9,s);break;case 1:ci(r,s,o,u);break;case 3:ci(r,s,o,u),g&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&lc(r)));break;case 12:if(g&2048){ci(r,s,o,u),r=s.stateNode;try{var m=s.memoizedProps,x=m.id,N=m.onPostCommit;typeof N=="function"&&N(x,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(K){pt(s,s.return,K)}}else ci(r,s,o,u);break;case 13:ci(r,s,o,u);break;case 23:break;case 22:m=s.stateNode,x=s.alternate,s.memoizedState!==null?m._visibility&2?ci(r,s,o,u):Tc(r,s):m._visibility&2?ci(r,s,o,u):(m._visibility|=2,Uo(r,s,o,u,(s.subtreeFlags&10256)!==0)),g&2048&&bp(x,s);break;case 24:ci(r,s,o,u),g&2048&&Ep(s.alternate,s);break;default:ci(r,s,o,u)}}function Uo(r,s,o,u,g){for(g=g&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=r,x=s,N=o,K=u,ae=x.flags;switch(x.tag){case 0:case 11:case 15:Uo(m,x,N,K,g),wc(8,x);break;case 23:break;case 22:var fe=x.stateNode;x.memoizedState!==null?fe._visibility&2?Uo(m,x,N,K,g):Tc(m,x):(fe._visibility|=2,Uo(m,x,N,K,g)),g&&ae&2048&&bp(x.alternate,x);break;case 24:Uo(m,x,N,K,g),g&&ae&2048&&Ep(x.alternate,x);break;default:Uo(m,x,N,K,g)}s=s.sibling}}function Tc(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,g=u.flags;switch(u.tag){case 22:Tc(o,u),g&2048&&bp(u.alternate,u);break;case 24:Tc(o,u),g&2048&&Ep(u.alternate,u);break;default:Tc(o,u)}s=s.sibling}}var Sc=8192;function jo(r){if(r.subtreeFlags&Sc)for(r=r.child;r!==null;)ab(r),r=r.sibling}function ab(r){switch(r.tag){case 26:jo(r),r.flags&Sc&&r.memoizedState!==null&&eN(Pr,r.memoizedState,r.memoizedProps);break;case 5:jo(r);break;case 3:case 4:var s=Pr;Pr=Zd(r.stateNode.containerInfo),jo(r),Pr=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Sc,Sc=16777216,jo(r),Sc=s):jo(r));break;default:jo(r)}}function ob(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Ac(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];sn=u,cb(u,r)}ob(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)lb(r),r=r.sibling}function lb(r){switch(r.tag){case 0:case 11:case 15:Ac(r),r.flags&2048&&ys(9,r,r.return);break;case 3:Ac(r);break;case 12:Ac(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,jd(r)):Ac(r);break;default:Ac(r)}}function jd(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];sn=u,cb(u,r)}ob(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:ys(8,s,s.return),jd(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,jd(s));break;default:jd(s)}r=r.sibling}}function cb(r,s){for(;sn!==null;){var o=sn;switch(o.tag){case 0:case 11:case 15:ys(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:lc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,sn=u;else e:for(o=r;sn!==null;){u=sn;var g=u.sibling,m=u.return;if(eb(u),u===o){sn=null;break e}if(g!==null){g.return=m,sn=g;break e}sn=m}}}var mR={getCacheForType:function(r){var s=_n(Qt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},yR=typeof WeakMap=="function"?WeakMap:Map,ct=0,yt=null,Ke=null,et=0,ut=0,er=null,bs=!1,Bo=!1,wp=!1,Fi=0,Ct=0,Es=0,Va=0,xp=0,Sr=0,Ho=0,Rc=null,jn=null,Tp=!1,Sp=0,Bd=1/0,Hd=null,ws=null,fn=0,xs=null,qo=null,$o=0,Ap=0,Rp=null,ub=null,Nc=0,Np=null;function tr(){if((ct&2)!==0&&et!==0)return et&-et;if(D.T!==null){var r=ko;return r!==0?r:Pp()}return Yr()}function db(){Sr===0&&(Sr=(et&536870912)===0||st?Ti():536870912);var r=Tr.current;return r!==null&&(r.flags|=32),Sr}function nr(r,s,o){(r===yt&&(ut===2||ut===9)||r.cancelPendingCommit!==null)&&(Fo(r,0),Ts(r,et,Sr,!1)),ur(r,o),((ct&2)===0||r!==yt)&&(r===yt&&((ct&2)===0&&(Va|=o),Ct===4&&Ts(r,et,Sr,!1)),ui(r))}function hb(r,s,o){if((ct&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||In(r,s),g=u?bR(r,s):kp(r,s,!0),m=u;do{if(g===0){Bo&&!u&&Ts(r,s,0,!1);break}else{if(o=r.current.alternate,m&&!vR(o)){g=kp(r,s,!1),m=!1;continue}if(g===2){if(m=s,r.errorRecoveryDisabledLanes&m)var x=0;else x=r.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){s=x;e:{var N=r;g=Rc;var K=N.current.memoizedState.isDehydrated;if(K&&(Fo(N,x).flags|=256),x=kp(N,x,!1),x!==2){if(wp&&!K){N.errorRecoveryDisabledLanes|=m,Va|=m,g=4;break e}m=jn,jn=g,m!==null&&(jn===null?jn=m:jn.push.apply(jn,m))}g=x}if(m=!1,g!==2)continue}}if(g===1){Fo(r,0),Ts(r,s,0,!0);break}e:{switch(u=r,m=g,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ts(u,s,Sr,!bs);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(g=Sp+300-ze(),10<g)){if(Ts(u,s,Sr,!bs),cn(u,0,!0)!==0)break e;u.timeoutHandle=Bb(fb.bind(null,u,o,jn,Hd,Tp,s,Sr,Va,Ho,bs,m,2,-0,0),g);break e}fb(u,o,jn,Hd,Tp,s,Sr,Va,Ho,bs,m,0,-0,0)}}break}while(!0);ui(r)}function fb(r,s,o,u,g,m,x,N,K,ae,fe,pe,oe,le){if(r.timeoutHandle=-1,pe=s.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(Pc={stylesheets:null,count:0,unsuspend:JR},ab(s),pe=tN(),pe!==null)){r.cancelPendingCommit=pe(bb.bind(null,r,s,m,o,u,g,x,N,K,fe,1,oe,le)),Ts(r,m,x,!ae);return}bb(r,s,m,o,u,g,x,N,K)}function vR(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var g=o[u],m=g.getSnapshot;g=g.value;try{if(!Qn(m(),g))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ts(r,s,o,u){s&=~xp,s&=~Va,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var g=s;0<g;){var m=31-Et(g),x=1<<m;u[m]=-1,g&=~x}o!==0&&dr(r,o,s)}function qd(){return(ct&6)===0?(Cc(0),!1):!0}function Cp(){if(Ke!==null){if(ut===0)var r=Ke.return;else r=Ke,Li=Ia=null,Gg(r),Lo=null,_c=0,r=Ke;for(;r!==null;)G_(r.alternate,r),r=r.return;Ke=null}}function Fo(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,VR(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Cp(),yt=r,Ke=o=Oi(r.current,null),et=s,ut=0,er=null,bs=!1,Bo=In(r,s),wp=!1,Ho=Sr=xp=Va=Es=Ct=0,jn=Rc=null,Tp=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var g=31-Et(u),m=1<<g;s|=r[g],u&=~m}return Fi=s,dd(),o}function gb(r,s){He=null,D.H=Id,s===uc||s===bd?(s=kv(),ut=3):s===Nv?(s=kv(),ut=4):ut=s===D_?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,er=s,Ke===null&&(Ct=1,Pd(r,br(s,r.current)))}function pb(){var r=D.H;return D.H=Id,r===null?Id:r}function mb(){var r=D.A;return D.A=mR,r}function Ip(){Ct=4,bs||(et&4194048)!==et&&Tr.current!==null||(Bo=!0),(Es&134217727)===0&&(Va&134217727)===0||yt===null||Ts(yt,et,Sr,!1)}function kp(r,s,o){var u=ct;ct|=2;var g=pb(),m=mb();(yt!==r||et!==s)&&(Hd=null,Fo(r,s)),s=!1;var x=Ct;e:do try{if(ut!==0&&Ke!==null){var N=Ke,K=er;switch(ut){case 8:Cp(),x=6;break e;case 3:case 2:case 9:case 6:Tr.current===null&&(s=!0);var ae=ut;if(ut=0,er=null,Go(r,N,K,ae),o&&Bo){x=0;break e}break;default:ae=ut,ut=0,er=null,Go(r,N,K,ae)}}_R(),x=Ct;break}catch(fe){gb(r,fe)}while(!0);return s&&r.shellSuspendCounter++,Li=Ia=null,ct=u,D.H=g,D.A=m,Ke===null&&(yt=null,et=0,dd()),x}function _R(){for(;Ke!==null;)yb(Ke)}function bR(r,s){var o=ct;ct|=2;var u=pb(),g=mb();yt!==r||et!==s?(Hd=null,Bd=ze()+500,Fo(r,s)):Bo=In(r,s);e:do try{if(ut!==0&&Ke!==null){s=Ke;var m=er;t:switch(ut){case 1:ut=0,er=null,Go(r,s,m,1);break;case 2:case 9:if(Cv(m)){ut=0,er=null,vb(s);break}s=function(){ut!==2&&ut!==9||yt!==r||(ut=7),ui(r)},m.then(s,s);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Cv(m)?(ut=0,er=null,vb(s)):(ut=0,er=null,Go(r,s,m,7));break;case 5:var x=null;switch(Ke.tag){case 26:x=Ke.memoizedState;case 5:case 27:var N=Ke;if(!x||Jb(x)){ut=0,er=null;var K=N.sibling;if(K!==null)Ke=K;else{var ae=N.return;ae!==null?(Ke=ae,$d(ae)):Ke=null}break t}}ut=0,er=null,Go(r,s,m,5);break;case 6:ut=0,er=null,Go(r,s,m,6);break;case 8:Cp(),Ct=6;break e;default:throw Error(i(462))}}ER();break}catch(fe){gb(r,fe)}while(!0);return Li=Ia=null,D.H=u,D.A=g,ct=o,Ke!==null?0:(yt=null,et=0,dd(),Ct)}function ER(){for(;Ke!==null&&!Ue();)yb(Ke)}function yb(r){var s=$_(r.alternate,r,Fi);r.memoizedProps=r.pendingProps,s===null?$d(r):Ke=s}function vb(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=z_(o,s,s.pendingProps,s.type,void 0,et);break;case 11:s=z_(o,s,s.pendingProps,s.type.render,s.ref,et);break;case 5:Gg(s);default:G_(o,s),s=Ke=_v(s,Fi),s=$_(o,s,Fi)}r.memoizedProps=r.pendingProps,s===null?$d(r):Ke=s}function Go(r,s,o,u){Li=Ia=null,Gg(s),Lo=null,_c=0;var g=s.return;try{if(uR(r,g,s,o,et)){Ct=1,Pd(r,br(o,r.current)),Ke=null;return}}catch(m){if(g!==null)throw Ke=g,m;Ct=1,Pd(r,br(o,r.current)),Ke=null;return}s.flags&32768?(st||u===1?r=!0:Bo||(et&536870912)!==0?r=!1:(bs=r=!0,(u===2||u===9||u===3||u===6)&&(u=Tr.current,u!==null&&u.tag===13&&(u.flags|=16384))),_b(s,r)):$d(s)}function $d(r){var s=r;do{if((s.flags&32768)!==0){_b(s,bs);return}r=s.return;var o=hR(s.alternate,s,Fi);if(o!==null){Ke=o;return}if(s=s.sibling,s!==null){Ke=s;return}Ke=s=r}while(s!==null);Ct===0&&(Ct=5)}function _b(r,s){do{var o=fR(r.alternate,r);if(o!==null){o.flags&=32767,Ke=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){Ke=r;return}Ke=r=o}while(r!==null);Ct=6,Ke=null}function bb(r,s,o,u,g,m,x,N,K){r.cancelPendingCommit=null;do Fd();while(fn!==0);if((ct&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=Eg,Yn(r,o,m,x,N,K),r===yt&&(Ke=yt=null,et=0),qo=s,xs=r,$o=o,Ap=m,Rp=g,ub=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,SR(Gt,function(){return Sb(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=D.T,D.T=null,g=q.p,q.p=2,x=ct,ct|=4;try{gR(r,s,o)}finally{ct=x,q.p=g,D.T=u}}fn=1,Eb(),wb(),xb()}}function Eb(){if(fn===1){fn=0;var r=xs,s=qo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=D.T,D.T=null;var u=q.p;q.p=2;var g=ct;ct|=4;try{rb(s,r);var m=qp,x=cv(r.containerInfo),N=m.focusedElem,K=m.selectionRange;if(x!==N&&N&&N.ownerDocument&&lv(N.ownerDocument.documentElement,N)){if(K!==null&&mg(N)){var ae=K.start,fe=K.end;if(fe===void 0&&(fe=ae),"selectionStart"in N)N.selectionStart=ae,N.selectionEnd=Math.min(fe,N.value.length);else{var pe=N.ownerDocument||document,oe=pe&&pe.defaultView||window;if(oe.getSelection){var le=oe.getSelection(),Oe=N.textContent.length,Ie=Math.min(K.start,Oe),gt=K.end===void 0?Ie:Math.min(K.end,Oe);!le.extend&&Ie>gt&&(x=gt,gt=Ie,Ie=x);var ne=ov(N,Ie),Z=ov(N,gt);if(ne&&Z&&(le.rangeCount!==1||le.anchorNode!==ne.node||le.anchorOffset!==ne.offset||le.focusNode!==Z.node||le.focusOffset!==Z.offset)){var se=pe.createRange();se.setStart(ne.node,ne.offset),le.removeAllRanges(),Ie>gt?(le.addRange(se),le.extend(Z.node,Z.offset)):(se.setEnd(Z.node,Z.offset),le.addRange(se))}}}}for(pe=[],le=N;le=le.parentNode;)le.nodeType===1&&pe.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<pe.length;N++){var ge=pe[N];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}rh=!!Hp,qp=Hp=null}finally{ct=g,q.p=u,D.T=o}}r.current=s,fn=2}}function wb(){if(fn===2){fn=0;var r=xs,s=qo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=D.T,D.T=null;var u=q.p;q.p=2;var g=ct;ct|=4;try{J_(r,s.alternate,s)}finally{ct=g,q.p=u,D.T=o}}fn=3}}function xb(){if(fn===4||fn===3){fn=0,Lt();var r=xs,s=qo,o=$o,u=ub;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?fn=5:(fn=0,qo=xs=null,Tb(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(ws=null),ss(o),s=s.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(at,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=D.T,g=q.p,q.p=2,D.T=null;try{for(var m=r.onRecoverableError,x=0;x<u.length;x++){var N=u[x];m(N.value,{componentStack:N.stack})}}finally{D.T=s,q.p=g}}($o&3)!==0&&Fd(),ui(r),g=r.pendingLanes,(o&4194090)!==0&&(g&42)!==0?r===Np?Nc++:(Nc=0,Np=r):Nc=0,Cc(0)}}function Tb(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,lc(s)))}function Fd(r){return Eb(),wb(),xb(),Sb()}function Sb(){if(fn!==5)return!1;var r=xs,s=Ap;Ap=0;var o=ss($o),u=D.T,g=q.p;try{q.p=32>o?32:o,D.T=null,o=Rp,Rp=null;var m=xs,x=$o;if(fn=0,qo=xs=null,$o=0,(ct&6)!==0)throw Error(i(331));var N=ct;if(ct|=4,lb(m.current),sb(m,m.current,x,o),ct=N,Cc(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(at,m)}catch{}return!0}finally{q.p=g,D.T=u,Tb(r,s)}}function Ab(r,s,o){s=br(o,s),s=ap(r.stateNode,s,2),r=fs(r,s,2),r!==null&&(ur(r,2),ui(r))}function pt(r,s,o){if(r.tag===3)Ab(r,r,o);else for(;s!==null;){if(s.tag===3){Ab(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ws===null||!ws.has(u))){r=br(o,r),o=I_(2),u=fs(s,o,2),u!==null&&(k_(o,u,s,r),ur(u,2),ui(u));break}}s=s.return}}function Dp(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new yR;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(o)||(wp=!0,g.add(o),r=wR.bind(null,r,s,o),s.then(r,r))}function wR(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,yt===r&&(et&o)===o&&(Ct===4||Ct===3&&(et&62914560)===et&&300>ze()-Sp?(ct&2)===0&&Fo(r,0):xp|=o,Ho===et&&(Ho=0)),ui(r)}function Rb(r,s){s===0&&(s=Ir()),r=Ro(r,s),r!==null&&(ur(r,s),ui(r))}function xR(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),Rb(r,o)}function TR(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,g=r.memoizedState;g!==null&&(o=g.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),Rb(r,o)}function SR(r,s){return Pe(r,s)}var Gd=null,Yo=null,Mp=!1,Yd=!1,Op=!1,La=0;function ui(r){r!==Yo&&r.next===null&&(Yo===null?Gd=Yo=r:Yo=Yo.next=r),Yd=!0,Mp||(Mp=!0,RR())}function Cc(r,s){if(!Op&&Yd){Op=!0;do for(var o=!1,u=Gd;u!==null;){if(r!==0){var g=u.pendingLanes;if(g===0)var m=0;else{var x=u.suspendedLanes,N=u.pingedLanes;m=(1<<31-Et(42|r)+1)-1,m&=g&~(x&~N),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,kb(u,m))}else m=et,m=cn(u,u===yt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||In(u,m)||(o=!0,kb(u,m));u=u.next}while(o);Op=!1}}function AR(){Nb()}function Nb(){Yd=Mp=!1;var r=0;La!==0&&(PR()&&(r=La),La=0);for(var s=ze(),o=null,u=Gd;u!==null;){var g=u.next,m=Cb(u,s);m===0?(u.next=null,o===null?Gd=g:o.next=g,g===null&&(Yo=o)):(o=u,(r!==0||(m&3)!==0)&&(Yd=!0)),u=g}Cc(r)}function Cb(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,g=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var x=31-Et(m),N=1<<x,K=g[x];K===-1?((N&o)===0||(N&u)!==0)&&(g[x]=xi(N,s)):K<=s&&(r.expiredLanes|=N),m&=~N}if(s=yt,o=et,o=cn(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(ut===2||ut===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&$e(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||In(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&$e(u),ss(o)){case 2:case 8:o=vn;break;case 32:o=Gt;break;case 268435456:o=An;break;default:o=Gt}return u=Ib.bind(null,r),o=Pe(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&$e(u),r.callbackPriority=2,r.callbackNode=null,2}function Ib(r,s){if(fn!==0&&fn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Fd()&&r.callbackNode!==o)return null;var u=et;return u=cn(r,r===yt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(hb(r,u,s),Cb(r,ze()),r.callbackNode!=null&&r.callbackNode===o?Ib.bind(null,r):null)}function kb(r,s){if(Fd())return null;hb(r,s,!0)}function RR(){LR(function(){(ct&6)!==0?Pe(At,AR):Nb()})}function Pp(){return La===0&&(La=Ti()),La}function Db(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:po(""+r)}function Mb(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function NR(r,s,o,u,g){if(s==="submit"&&o&&o.stateNode===g){var m=Db((g[Rt]||null).action),x=u.submitter;x&&(s=(s=x[Rt]||null)?Db(s.formAction):x.getAttribute("formAction"),s!==null&&(m=s,x=null));var N=new mo("action","action",null,u,g);r.push({event:N,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(La!==0){var K=x?Mb(g,x):new FormData(g);tp(o,{pending:!0,data:K,method:g.method,action:m},null,K)}}else typeof m=="function"&&(N.preventDefault(),K=x?Mb(g,x):new FormData(g),tp(o,{pending:!0,data:K,method:g.method,action:m},m,K))},currentTarget:g}]})}}for(var Vp=0;Vp<bg.length;Vp++){var Lp=bg[Vp],CR=Lp.toLowerCase(),IR=Lp[0].toUpperCase()+Lp.slice(1);Or(CR,"on"+IR)}Or(hv,"onAnimationEnd"),Or(fv,"onAnimationIteration"),Or(gv,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Y2,"onTransitionRun"),Or(K2,"onTransitionStart"),Or(X2,"onTransitionCancel"),Or(pv,"onTransitionEnd"),kr("onMouseEnter",["mouseout","mouseover"]),kr("onMouseLeave",["mouseout","mouseover"]),kr("onPointerEnter",["pointerout","pointerover"]),kr("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ic));function Ob(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],g=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var x=u.length-1;0<=x;x--){var N=u[x],K=N.instance,ae=N.currentTarget;if(N=N.listener,K!==m&&g.isPropagationStopped())break e;m=N,g.currentTarget=ae;try{m(g)}catch(fe){Od(fe)}g.currentTarget=null,m=K}else for(x=0;x<u.length;x++){if(N=u[x],K=N.instance,ae=N.currentTarget,N=N.listener,K!==m&&g.isPropagationStopped())break e;m=N,g.currentTarget=ae;try{m(g)}catch(fe){Od(fe)}g.currentTarget=null,m=K}}}}function Xe(r,s){var o=s[ca];o===void 0&&(o=s[ca]=new Set);var u=r+"__bubble";o.has(u)||(Pb(s,r,2,!1),o.add(u))}function zp(r,s,o){var u=0;s&&(u|=4),Pb(o,r,u,s)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function Up(r){if(!r[Kd]){r[Kd]=!0,ua.forEach(function(o){o!=="selectionchange"&&(kR.has(o)||zp(o,!1,r),zp(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Kd]||(s[Kd]=!0,zp("selectionchange",!1,s))}}function Pb(r,s,o,u){switch(sE(s)){case 2:var g=iN;break;case 8:g=sN;break;default:g=Jp}o=g.bind(null,s,o,r),g=void 0,!vr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?r.addEventListener(s,o,{capture:!0,passive:g}):r.addEventListener(s,o,!0):g!==void 0?r.addEventListener(s,o,{passive:g}):r.addEventListener(s,o,!1)}function jp(r,s,o,u,g){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var x=u.tag;if(x===3||x===4){var N=u.stateNode.containerInfo;if(N===g)break;if(x===4)for(x=u.return;x!==null;){var K=x.tag;if((K===3||K===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;N!==null;){if(x=hr(N),x===null)return;if(K=x.tag,K===5||K===6||K===26||K===27){u=m=x;continue e}N=N.parentNode}}u=u.return}Qu(function(){var ae=m,fe=yr(o),pe=[];e:{var oe=mv.get(r);if(oe!==void 0){var le=mo,Oe=r;switch(r){case"keypress":if(ti(o)===0)break e;case"keydown":case"keyup":le=wo;break;case"focusin":Oe="focus",le=_o;break;case"focusout":Oe="blur",le=_o;break;case"beforeblur":case"afterblur":le=_o;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=_r;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=hg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=id;break;case hv:case fv:case gv:le=bo;break;case pv:le=ad;break;case"scroll":case"scrollend":le=Wu;break;case"wheel":le=xo;break;case"copy":case"cut":case"paste":le=Eo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=ec;break;case"toggle":case"beforetoggle":le=ld}var Ie=(s&4)!==0,gt=!Ie&&(r==="scroll"||r==="scrollend"),ne=Ie?oe!==null?oe+"Capture":null:oe;Ie=[];for(var Z=ae,se;Z!==null;){var ge=Z;if(se=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||se===null||ne===null||(ge=ma(Z,ne),ge!=null&&Ie.push(kc(Z,ge,se))),gt)break;Z=Z.return}0<Ie.length&&(oe=new le(oe,Oe,null,o,fe),pe.push({event:oe,listeners:Ie}))}}if((s&7)===0){e:{if(oe=r==="mouseover"||r==="pointerover",le=r==="mouseout"||r==="pointerout",oe&&o!==Ni&&(Oe=o.relatedTarget||o.fromElement)&&(hr(Oe)||Oe[Ln]))break e;if((le||oe)&&(oe=fe.window===fe?fe:(oe=fe.ownerDocument)?oe.defaultView||oe.parentWindow:window,le?(Oe=o.relatedTarget||o.toElement,le=ae,Oe=Oe?hr(Oe):null,Oe!==null&&(gt=l(Oe),Ie=Oe.tag,Oe!==gt||Ie!==5&&Ie!==27&&Ie!==6)&&(Oe=null)):(le=null,Oe=ae),le!==Oe)){if(Ie=_r,ge="onMouseLeave",ne="onMouseEnter",Z="mouse",(r==="pointerout"||r==="pointerover")&&(Ie=ec,ge="onPointerLeave",ne="onPointerEnter",Z="pointer"),gt=le==null?oe:gr(le),se=Oe==null?oe:gr(Oe),oe=new Ie(ge,Z+"leave",le,o,fe),oe.target=gt,oe.relatedTarget=se,ge=null,hr(fe)===ae&&(Ie=new Ie(ne,Z+"enter",Oe,o,fe),Ie.target=se,Ie.relatedTarget=gt,ge=Ie),gt=ge,le&&Oe)t:{for(Ie=le,ne=Oe,Z=0,se=Ie;se;se=Ko(se))Z++;for(se=0,ge=ne;ge;ge=Ko(ge))se++;for(;0<Z-se;)Ie=Ko(Ie),Z--;for(;0<se-Z;)ne=Ko(ne),se--;for(;Z--;){if(Ie===ne||ne!==null&&Ie===ne.alternate)break t;Ie=Ko(Ie),ne=Ko(ne)}Ie=null}else Ie=null;le!==null&&Vb(pe,oe,le,Ie,!1),Oe!==null&&gt!==null&&Vb(pe,gt,Oe,Ie,!0)}}e:{if(oe=ae?gr(ae):window,le=oe.nodeName&&oe.nodeName.toLowerCase(),le==="select"||le==="input"&&oe.type==="file")var Se=tv;else if(Xt(oe))if(nv)Se=$2;else{Se=H2;var Fe=B2}else le=oe.nodeName,!le||le.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ae&&Yl(ae.elementType)&&(Se=tv):Se=q2;if(Se&&(Se=Se(r,ae))){Mi(pe,Se,o,fe);break e}Fe&&Fe(r,oe,ae),r==="focusout"&&ae&&oe.type==="number"&&ae.memoizedProps.value!=null&&ls(oe,"number",oe.value)}switch(Fe=ae?gr(ae):window,r){case"focusin":(Xt(Fe)||Fe.contentEditable==="true")&&(To=Fe,yg=ae,rc=null);break;case"focusout":rc=yg=To=null;break;case"mousedown":vg=!0;break;case"contextmenu":case"mouseup":case"dragend":vg=!1,uv(pe,o,fe);break;case"selectionchange":if(G2)break;case"keydown":case"keyup":uv(pe,o,fe)}var Re;if(ii)e:{switch(r){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Ze?ce(r,o)&&(ke="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ke="onCompositionStart");ke&&(E&&o.locale!=="ko"&&(Ze||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Ze&&(Re=Xl()):(ei=fe,cs="value"in ei?ei.value:ei.textContent,Ze=!0)),Fe=Xd(ae,ke),0<Fe.length&&(ke=new Zl(ke,r,null,o,fe),pe.push({event:ke,listeners:Fe}),Re?ke.data=Re:(Re=be(o),Re!==null&&(ke.data=Re)))),(Re=v?Kt(r,o):Je(r,o))&&(ke=Xd(ae,"onBeforeInput"),0<ke.length&&(Fe=new Zl("onBeforeInput","beforeinput",null,o,fe),pe.push({event:Fe,listeners:ke}),Fe.data=Re)),NR(pe,r,ae,o,fe)}Ob(pe,s)})}function kc(r,s,o){return{instance:r,listener:s,currentTarget:o}}function Xd(r,s){for(var o=s+"Capture",u=[];r!==null;){var g=r,m=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||m===null||(g=ma(r,o),g!=null&&u.unshift(kc(r,g,m)),g=ma(r,s),g!=null&&u.push(kc(r,g,m))),r.tag===3)return u;r=r.return}return[]}function Ko(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Vb(r,s,o,u,g){for(var m=s._reactName,x=[];o!==null&&o!==u;){var N=o,K=N.alternate,ae=N.stateNode;if(N=N.tag,K!==null&&K===u)break;N!==5&&N!==26&&N!==27||ae===null||(K=ae,g?(ae=ma(o,m),ae!=null&&x.unshift(kc(o,ae,K))):g||(ae=ma(o,m),ae!=null&&x.push(kc(o,ae,K)))),o=o.return}x.length!==0&&r.push({event:s,listeners:x})}var DR=/\r\n?/g,MR=/\u0000|\uFFFD/g;function Lb(r){return(typeof r=="string"?r:""+r).replace(DR,`
`).replace(MR,"")}function zb(r,s){return s=Lb(s),Lb(r)===s}function Qd(){}function ft(r,s,o,u,g,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||mr(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&mr(r,""+u);break;case"className":pr(r,"class",u);break;case"tabIndex":pr(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":pr(r,o,u);break;case"style":Gl(r,u,m);break;case"data":if(s!=="object"){pr(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=po(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&ft(r,s,"name",g.name,g,null),ft(r,s,"formEncType",g.formEncType,g,null),ft(r,s,"formMethod",g.formMethod,g,null),ft(r,s,"formTarget",g.formTarget,g,null)):(ft(r,s,"encType",g.encType,g,null),ft(r,s,"method",g.method,g,null),ft(r,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=po(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Qd);break;case"onScroll":u!=null&&Xe("scroll",r);break;case"onScrollEnd":u!=null&&Xe("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=po(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Xe("beforetoggle",r),Xe("toggle",r),Qr(r,"popover",u);break;case"xlinkActuate":Yt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Yt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Yt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Yt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Yt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Yt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qr(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ug.get(o)||o,Qr(r,o,u))}}function Bp(r,s,o,u,g,m){switch(o){case"style":Gl(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?mr(r,u):(typeof u=="number"||typeof u=="bigint")&&mr(r,""+u);break;case"onScroll":u!=null&&Xe("scroll",r);break;case"onScrollEnd":u!=null&&Xe("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Qd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!as.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),s=o.slice(2,g?o.length-7:void 0),m=r[Rt]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(s,m,g),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,g);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Qr(r,o,u)}}}function gn(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",r),Xe("load",r);var u=!1,g=!1,m;for(m in o)if(o.hasOwnProperty(m)){var x=o[m];if(x!=null)switch(m){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ft(r,s,m,x,o,null)}}g&&ft(r,s,"srcSet",o.srcSet,o,null),u&&ft(r,s,"src",o.src,o,null);return;case"input":Xe("invalid",r);var N=m=x=g=null,K=null,ae=null;for(u in o)if(o.hasOwnProperty(u)){var fe=o[u];if(fe!=null)switch(u){case"name":g=fe;break;case"type":x=fe;break;case"checked":K=fe;break;case"defaultChecked":ae=fe;break;case"value":m=fe;break;case"defaultValue":N=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(i(137,s));break;default:ft(r,s,u,fe,o,null)}}fa(r,m,N,K,ae,x,g,!1),go(r);return;case"select":Xe("invalid",r),u=x=m=null;for(g in o)if(o.hasOwnProperty(g)&&(N=o[g],N!=null))switch(g){case"value":m=N;break;case"defaultValue":x=N;break;case"multiple":u=N;default:ft(r,s,g,N,o,null)}s=m,o=x,r.multiple=!!u,s!=null?Ri(r,!!u,s,!1):o!=null&&Ri(r,!!u,o,!0);return;case"textarea":Xe("invalid",r),m=g=u=null;for(x in o)if(o.hasOwnProperty(x)&&(N=o[x],N!=null))switch(x){case"value":u=N;break;case"defaultValue":g=N;break;case"children":m=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:ft(r,s,x,N,o,null)}ga(r,u,g,m),go(r);return;case"option":for(K in o)if(o.hasOwnProperty(K)&&(u=o[K],u!=null))switch(K){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ft(r,s,K,u,o,null)}return;case"dialog":Xe("beforetoggle",r),Xe("toggle",r),Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":Xe("load",r);break;case"video":case"audio":for(u=0;u<Ic.length;u++)Xe(Ic[u],r);break;case"image":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"embed":case"source":case"link":Xe("error",r),Xe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in o)if(o.hasOwnProperty(ae)&&(u=o[ae],u!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ft(r,s,ae,u,o,null)}return;default:if(Yl(s)){for(fe in o)o.hasOwnProperty(fe)&&(u=o[fe],u!==void 0&&Bp(r,s,fe,u,o,void 0));return}}for(N in o)o.hasOwnProperty(N)&&(u=o[N],u!=null&&ft(r,s,N,u,o,null))}function OR(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,m=null,x=null,N=null,K=null,ae=null,fe=null;for(le in o){var pe=o[le];if(o.hasOwnProperty(le)&&pe!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":K=pe;default:u.hasOwnProperty(le)||ft(r,s,le,null,u,pe)}}for(var oe in u){var le=u[oe];if(pe=o[oe],u.hasOwnProperty(oe)&&(le!=null||pe!=null))switch(oe){case"type":m=le;break;case"name":g=le;break;case"checked":ae=le;break;case"defaultChecked":fe=le;break;case"value":x=le;break;case"defaultValue":N=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,s));break;default:le!==pe&&ft(r,s,oe,le,u,pe)}}Xn(r,x,N,K,ae,fe,m,g);return;case"select":le=x=N=oe=null;for(m in o)if(K=o[m],o.hasOwnProperty(m)&&K!=null)switch(m){case"value":break;case"multiple":le=K;default:u.hasOwnProperty(m)||ft(r,s,m,null,u,K)}for(g in u)if(m=u[g],K=o[g],u.hasOwnProperty(g)&&(m!=null||K!=null))switch(g){case"value":oe=m;break;case"defaultValue":N=m;break;case"multiple":x=m;default:m!==K&&ft(r,s,g,m,u,K)}s=N,o=x,u=le,oe!=null?Ri(r,!!o,oe,!1):!!u!=!!o&&(s!=null?Ri(r,!!o,s,!0):Ri(r,!!o,o?[]:"",!1));return;case"textarea":le=oe=null;for(N in o)if(g=o[N],o.hasOwnProperty(N)&&g!=null&&!u.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:ft(r,s,N,null,u,g)}for(x in u)if(g=u[x],m=o[x],u.hasOwnProperty(x)&&(g!=null||m!=null))switch(x){case"value":oe=g;break;case"defaultValue":le=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==m&&ft(r,s,x,g,u,m)}dt(r,oe,le);return;case"option":for(var Oe in o)if(oe=o[Oe],o.hasOwnProperty(Oe)&&oe!=null&&!u.hasOwnProperty(Oe))switch(Oe){case"selected":r.selected=!1;break;default:ft(r,s,Oe,null,u,oe)}for(K in u)if(oe=u[K],le=o[K],u.hasOwnProperty(K)&&oe!==le&&(oe!=null||le!=null))switch(K){case"selected":r.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:ft(r,s,K,oe,u,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in o)oe=o[Ie],o.hasOwnProperty(Ie)&&oe!=null&&!u.hasOwnProperty(Ie)&&ft(r,s,Ie,null,u,oe);for(ae in u)if(oe=u[ae],le=o[ae],u.hasOwnProperty(ae)&&oe!==le&&(oe!=null||le!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,s));break;default:ft(r,s,ae,oe,u,le)}return;default:if(Yl(s)){for(var gt in o)oe=o[gt],o.hasOwnProperty(gt)&&oe!==void 0&&!u.hasOwnProperty(gt)&&Bp(r,s,gt,void 0,u,oe);for(fe in u)oe=u[fe],le=o[fe],!u.hasOwnProperty(fe)||oe===le||oe===void 0&&le===void 0||Bp(r,s,fe,oe,u,le);return}}for(var ne in o)oe=o[ne],o.hasOwnProperty(ne)&&oe!=null&&!u.hasOwnProperty(ne)&&ft(r,s,ne,null,u,oe);for(pe in u)oe=u[pe],le=o[pe],!u.hasOwnProperty(pe)||oe===le||oe==null&&le==null||ft(r,s,pe,oe,u,le)}var Hp=null,qp=null;function Wd(r){return r.nodeType===9?r:r.ownerDocument}function Ub(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jb(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function $p(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Fp=null;function PR(){var r=window.event;return r&&r.type==="popstate"?r===Fp?!1:(Fp=r,!0):(Fp=null,!1)}var Bb=typeof setTimeout=="function"?setTimeout:void 0,VR=typeof clearTimeout=="function"?clearTimeout:void 0,Hb=typeof Promise=="function"?Promise:void 0,LR=typeof queueMicrotask=="function"?queueMicrotask:typeof Hb<"u"?function(r){return Hb.resolve(null).then(r).catch(zR)}:Bb;function zR(r){setTimeout(function(){throw r})}function Ss(r){return r==="head"}function qb(r,s){var o=s,u=0,g=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var x=r.ownerDocument;if(o&1&&Dc(x.documentElement),o&2&&Dc(x.body),o&4)for(o=x.head,Dc(o),x=o.firstChild;x;){var N=x.nextSibling,K=x.nodeName;x[Si]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&x.rel.toLowerCase()==="stylesheet"||o.removeChild(x),x=N}}if(g===0){r.removeChild(m),jc(s);return}g--}else o==="$"||o==="$?"||o==="$!"?g++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);jc(s)}function Gp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Gp(o),Xr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function UR(r,s,o,u){for(;r.nodeType===1;){var g=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Si])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var m=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=Vr(r.nextSibling),r===null)break}return null}function jR(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Vr(r.nextSibling),r===null))return null;return r}function Yp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function BR(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Vr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Kp=null;function $b(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function Fb(r,s,o){switch(s=Wd(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Dc(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Xr(r)}var Ar=new Map,Gb=new Set;function Zd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Gi=q.d;q.d={f:HR,r:qR,D:$R,C:FR,L:GR,m:YR,X:XR,S:KR,M:QR};function HR(){var r=Gi.f(),s=qd();return r||s}function qR(r){var s=fr(r);s!==null&&s.tag===5&&s.type==="form"?h_(s):Gi.r(r)}var Xo=typeof document>"u"?null:document;function Yb(r,s,o){var u=Xo;if(u&&typeof s=="string"&&s){var g=jt(s);g='link[rel="'+r+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),Gb.has(g)||(Gb.add(g),r={rel:r,crossOrigin:o,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),gn(s,"link",r),wt(s),u.head.appendChild(s)))}}function $R(r){Gi.D(r),Yb("dns-prefetch",r,null)}function FR(r,s){Gi.C(r,s),Yb("preconnect",r,s)}function GR(r,s,o){Gi.L(r,s,o);var u=Xo;if(u&&r&&s){var g='link[rel="preload"][as="'+jt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+jt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+jt(o.imageSizes)+'"]')):g+='[href="'+jt(r)+'"]';var m=g;switch(s){case"style":m=Qo(r);break;case"script":m=Wo(r)}Ar.has(m)||(r=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Ar.set(m,r),u.querySelector(g)!==null||s==="style"&&u.querySelector(Mc(m))||s==="script"&&u.querySelector(Oc(m))||(s=u.createElement("link"),gn(s,"link",r),wt(s),u.head.appendChild(s)))}}function YR(r,s){Gi.m(r,s);var o=Xo;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+jt(u)+'"][href="'+jt(r)+'"]',m=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Wo(r)}if(!Ar.has(m)&&(r=y({rel:"modulepreload",href:r},s),Ar.set(m,r),o.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Oc(m)))return}u=o.createElement("link"),gn(u,"link",r),wt(u),o.head.appendChild(u)}}}function KR(r,s,o){Gi.S(r,s,o);var u=Xo;if(u&&r){var g=un(u).hoistableStyles,m=Qo(r);s=s||"default";var x=g.get(m);if(!x){var N={loading:0,preload:null};if(x=u.querySelector(Mc(m)))N.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Ar.get(m))&&Xp(r,o);var K=x=u.createElement("link");wt(K),gn(K,"link",r),K._p=new Promise(function(ae,fe){K.onload=ae,K.onerror=fe}),K.addEventListener("load",function(){N.loading|=1}),K.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Jd(x,s,u)}x={type:"stylesheet",instance:x,count:1,state:N},g.set(m,x)}}}function XR(r,s){Gi.X(r,s);var o=Xo;if(o&&r){var u=un(o).hoistableScripts,g=Wo(r),m=u.get(g);m||(m=o.querySelector(Oc(g)),m||(r=y({src:r,async:!0},s),(s=Ar.get(g))&&Qp(r,s),m=o.createElement("script"),wt(m),gn(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function QR(r,s){Gi.M(r,s);var o=Xo;if(o&&r){var u=un(o).hoistableScripts,g=Wo(r),m=u.get(g);m||(m=o.querySelector(Oc(g)),m||(r=y({src:r,async:!0,type:"module"},s),(s=Ar.get(g))&&Qp(r,s),m=o.createElement("script"),wt(m),gn(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function Kb(r,s,o,u){var g=(g=ue.current)?Zd(g):null;if(!g)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Qo(o.href),o=un(g).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Qo(o.href);var m=un(g).hoistableStyles,x=m.get(r);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,x),(m=g.querySelector(Mc(r)))&&!m._p&&(x.instance=m,x.state.loading=5),Ar.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ar.set(r,o),m||WR(g,r,o,x.state))),s&&u===null)throw Error(i(528,""));return x}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Wo(o),o=un(g).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Qo(r){return'href="'+jt(r)+'"'}function Mc(r){return'link[rel="stylesheet"]['+r+"]"}function Xb(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function WR(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),gn(s,"link",o),wt(s),r.head.appendChild(s))}function Wo(r){return'[src="'+jt(r)+'"]'}function Oc(r){return"script[async]"+r}function Qb(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+jt(o.href)+'"]');if(u)return s.instance=u,wt(u),u;var g=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),wt(u),gn(u,"style",g),Jd(u,o.precedence,r),s.instance=u;case"stylesheet":g=Qo(o.href);var m=r.querySelector(Mc(g));if(m)return s.state.loading|=4,s.instance=m,wt(m),m;u=Xb(o),(g=Ar.get(g))&&Xp(u,g),m=(r.ownerDocument||r).createElement("link"),wt(m);var x=m;return x._p=new Promise(function(N,K){x.onload=N,x.onerror=K}),gn(m,"link",u),s.state.loading|=4,Jd(m,o.precedence,r),s.instance=m;case"script":return m=Wo(o.src),(g=r.querySelector(Oc(m)))?(s.instance=g,wt(g),g):(u=o,(g=Ar.get(m))&&(u=y({},o),Qp(u,g)),r=r.ownerDocument||r,g=r.createElement("script"),wt(g),gn(g,"link",u),r.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Jd(u,o.precedence,r));return s.instance}function Jd(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,m=g,x=0;x<u.length;x++){var N=u[x];if(N.dataset.precedence===s)m=N;else if(m!==g)break}m?m.parentNode.insertBefore(r,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Xp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Qp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var eh=null;function Wb(r,s,o){if(eh===null){var u=new Map,g=eh=new Map;g.set(o,u)}else g=eh,u=g.get(o),u||(u=new Map,g.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),g=0;g<o.length;g++){var m=o[g];if(!(m[Si]||m[Mt]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(s)||"";x=r+x;var N=u.get(x);N?N.push(m):u.set(x,[m])}}return u}function Zb(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function ZR(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Jb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Pc=null;function JR(){}function eN(r,s,o){if(Pc===null)throw Error(i(475));var u=Pc;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var g=Qo(o.href),m=r.querySelector(Mc(g));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=th.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=m,wt(m);return}m=r.ownerDocument||r,o=Xb(o),(g=Ar.get(g))&&Xp(o,g),m=m.createElement("link"),wt(m);var x=m;x._p=new Promise(function(N,K){x.onload=N,x.onerror=K}),gn(m,"link",o),s.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=th.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function tN(){if(Pc===null)throw Error(i(475));var r=Pc;return r.stylesheets&&r.count===0&&Wp(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&Wp(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function th(){if(this.count--,this.count===0){if(this.stylesheets)Wp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var nh=null;function Wp(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,nh=new Map,s.forEach(nN,r),nh=null,th.call(r))}function nN(r,s){if(!(s.state.loading&4)){var o=nh.get(r);if(o)var u=o.get(null);else{o=new Map,nh.set(r,o);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<g.length;m++){var x=g[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(o.set(x.dataset.precedence,x),u=x)}u&&o.set(null,u)}g=s.instance,x=g.getAttribute("data-precedence"),m=o.get(x)||u,m===u&&o.set(null,g),o.set(x,g),this.count++,u=th.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),m?m.parentNode.insertBefore(g,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),s.state.loading|=4}}var Vc={$$typeof:G,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function rN(r,s,o,u,g,m,x,N){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gn(0),this.hiddenUpdates=Gn(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function eE(r,s,o,u,g,m,x,N,K,ae,fe,pe){return r=new rN(r,s,o,x,N,K,ae,pe),s=1,m===!0&&(s|=24),m=Wn(3,null,null,s),r.current=m,m.stateNode=r,s=Dg(),s.refCount++,r.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},Vg(m),r}function tE(r){return r?(r=No,r):No}function nE(r,s,o,u,g,m){g=tE(g),u.context===null?u.context=g:u.pendingContext=g,u=hs(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=fs(r,u,s),o!==null&&(nr(o,r,s),hc(o,r,s))}function rE(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Zp(r,s){rE(r,s),(r=r.alternate)&&rE(r,s)}function iE(r){if(r.tag===13){var s=Ro(r,67108864);s!==null&&nr(s,r,67108864),Zp(r,67108864)}}var rh=!0;function iN(r,s,o,u){var g=D.T;D.T=null;var m=q.p;try{q.p=2,Jp(r,s,o,u)}finally{q.p=m,D.T=g}}function sN(r,s,o,u){var g=D.T;D.T=null;var m=q.p;try{q.p=8,Jp(r,s,o,u)}finally{q.p=m,D.T=g}}function Jp(r,s,o,u){if(rh){var g=em(u);if(g===null)jp(r,s,u,ih,o),aE(r,u);else if(oN(g,r,s,o,u))u.stopPropagation();else if(aE(r,u),s&4&&-1<aN.indexOf(r)){for(;g!==null;){var m=fr(g);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=en(m.pendingLanes);if(x!==0){var N=m;for(N.pendingLanes|=2,N.entangledLanes|=2;x;){var K=1<<31-Et(x);N.entanglements[1]|=K,x&=~K}ui(m),(ct&6)===0&&(Bd=ze()+500,Cc(0))}}break;case 13:N=Ro(m,2),N!==null&&nr(N,m,2),qd(),Zp(m,2)}if(m=em(u),m===null&&jp(r,s,u,ih,o),m===g)break;g=m}g!==null&&u.stopPropagation()}else jp(r,s,u,null,o)}}function em(r){return r=yr(r),tm(r)}var ih=null;function tm(r){if(ih=null,r=hr(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return ih=r,null}function sE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ee()){case At:return 2;case vn:return 8;case Gt:case Fn:return 32;case An:return 268435456;default:return 32}default:return 32}}var nm=!1,As=null,Rs=null,Ns=null,Lc=new Map,zc=new Map,Cs=[],aN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function aE(r,s){switch(r){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":Lc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":zc.delete(s.pointerId)}}function Uc(r,s,o,u,g,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[g]},s!==null&&(s=fr(s),s!==null&&iE(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),r)}function oN(r,s,o,u,g){switch(s){case"focusin":return As=Uc(As,r,s,o,u,g),!0;case"dragenter":return Rs=Uc(Rs,r,s,o,u,g),!0;case"mouseover":return Ns=Uc(Ns,r,s,o,u,g),!0;case"pointerover":var m=g.pointerId;return Lc.set(m,Uc(Lc.get(m)||null,r,s,o,u,g)),!0;case"gotpointercapture":return m=g.pointerId,zc.set(m,Uc(zc.get(m)||null,r,s,o,u,g)),!0}return!1}function oE(r){var s=hr(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,oo(r.priority,function(){if(o.tag===13){var u=tr();u=Gr(u);var g=Ro(o,u);g!==null&&nr(g,o,u),Zp(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function sh(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=em(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Ni=u,o.target.dispatchEvent(u),Ni=null}else return s=fr(o),s!==null&&iE(s),r.blockedOn=o,!1;s.shift()}return!0}function lE(r,s,o){sh(r)&&o.delete(s)}function lN(){nm=!1,As!==null&&sh(As)&&(As=null),Rs!==null&&sh(Rs)&&(Rs=null),Ns!==null&&sh(Ns)&&(Ns=null),Lc.forEach(lE),zc.forEach(lE)}function ah(r,s){r.blockedOn===s&&(r.blockedOn=null,nm||(nm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,lN)))}var oh=null;function cE(r){oh!==r&&(oh=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){oh===r&&(oh=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],g=r[s+2];if(typeof u!="function"){if(tm(u||o)===null)continue;break}var m=fr(o);m!==null&&(r.splice(s,3),s-=3,tp(m,{pending:!0,data:g,method:o.method,action:u},u,g))}}))}function jc(r){function s(K){return ah(K,r)}As!==null&&ah(As,r),Rs!==null&&ah(Rs,r),Ns!==null&&ah(Ns,r),Lc.forEach(s),zc.forEach(s);for(var o=0;o<Cs.length;o++){var u=Cs[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Cs.length&&(o=Cs[0],o.blockedOn===null);)oE(o),o.blockedOn===null&&Cs.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var g=o[u],m=o[u+1],x=g[Rt]||null;if(typeof m=="function")x||cE(o);else if(x){var N=null;if(m&&m.hasAttribute("formAction")){if(g=m,x=m[Rt]||null)N=x.formAction;else if(tm(g)!==null)continue}else N=x.action;typeof N=="function"?o[u+1]=N:(o.splice(u,3),u-=3),cE(o)}}}function rm(r){this._internalRoot=r}lh.prototype.render=rm.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=tr();nE(o,u,r,s,null,null)},lh.prototype.unmount=rm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;nE(r.current,2,null,r,null,null),qd(),s[Ln]=null}};function lh(r){this._internalRoot=r}lh.prototype.unstable_scheduleHydration=function(r){if(r){var s=Yr();r={blockedOn:null,target:r,priority:s};for(var o=0;o<Cs.length&&s!==0&&s<Cs[o].priority;o++);Cs.splice(o,0,r),o===0&&oE(r)}};var uE=e.version;if(uE!=="19.1.0")throw Error(i(527,uE,"19.1.0"));q.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(s),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var cN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ch.isDisabled&&ch.supportsFiber)try{at=ch.inject(cN),Ye=ch}catch{}}return Hc.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",g=A_,m=R_,x=N_,N=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(N=s.unstable_transitionCallbacks)),s=eE(r,1,!1,null,null,o,u,g,m,x,N,null),r[Ln]=s.current,Up(r),new rm(s)},Hc.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,g="",m=A_,x=R_,N=N_,K=null,ae=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(N=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(K=o.unstable_transitionCallbacks),o.formState!==void 0&&(ae=o.formState)),s=eE(r,1,!0,s,o??null,u,g,m,x,N,K,ae),s.context=tE(null),o=s.current,u=tr(),u=Gr(u),g=hs(u),g.callback=null,fs(o,g,u),o=u,s.current.lanes=o,ur(s,o),ui(s),r[Ln]=s.current,Up(r),new lh(s)},Hc.version="19.1.0",Hc}var bE;function bN(){if(bE)return am.exports;bE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),am.exports=_N(),am.exports}var EN=bN();function Vn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=Vn(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var um={exports:{}},dm={},hm={exports:{}},fm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE;function wN(){if(EE)return fm;EE=1;var t=Mu();function e(_,b){return _===b&&(_!==0||1/_===1/b)||_!==_&&b!==b}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,a=t.useEffect,l=t.useLayoutEffect,c=t.useDebugValue;function d(_,b){var w=b(),S=i({inst:{value:w,getSnapshot:b}}),M=S[0].inst,C=S[1];return l(function(){M.value=w,M.getSnapshot=b,f(M)&&C({inst:M})},[_,w,b]),a(function(){return f(M)&&C({inst:M}),_(function(){f(M)&&C({inst:M})})},[_]),c(w),w}function f(_){var b=_.getSnapshot;_=_.value;try{var w=b();return!n(_,w)}catch{return!0}}function p(_,b){return b()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return fm.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,fm}var wE;function xN(){return wE||(wE=1,hm.exports=wN()),hm.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xE;function TN(){if(xE)return dm;xE=1;var t=Mu(),e=xN();function n(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var i=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,l=t.useRef,c=t.useEffect,d=t.useMemo,f=t.useDebugValue;return dm.useSyncExternalStoreWithSelector=function(p,y,_,b,w){var S=l(null);if(S.current===null){var M={hasValue:!1,value:null};S.current=M}else M=S.current;S=d(function(){function L(ee){if(!B){if(B=!0,G=ee,ee=b(ee),w!==void 0&&M.hasValue){var O=M.value;if(w(O,ee))return j=O}return j=ee}if(O=j,i(G,ee))return O;var A=b(ee);return w!==void 0&&w(O,A)?(G=ee,O):(G=ee,j=A)}var B=!1,G,j,J=_===void 0?null:_;return[function(){return L(y())},J===null?void 0:function(){return L(J())}]},[y,_,b,w]);var C=a(p,S[0],S[1]);return c(function(){M.hasValue=!0,M.value=C},[C]),f(C),C},dm}var TE;function SN(){return TE||(TE=1,um.exports=TN()),um.exports}var AN=SN();const RN=h1(AN),NN={},SE=t=>{let e;const n=new Set,i=(y,_)=>{const b=typeof y=="function"?y(e):y;if(!Object.is(b,e)){const w=e;e=_??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(S=>S(e,w))}},a=()=>e,f={setState:i,getState:a,getInitialState:()=>p,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(NN?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=e=t(i,a,f);return f},CN=t=>t?SE(t):SE,{useDebugValue:IN}=he,{useSyncExternalStoreWithSelector:kN}=RN,DN=t=>t;function g1(t,e=DN,n){const i=kN(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return IN(i),i}const AE=(t,e)=>{const n=CN(t),i=(a,l=e)=>g1(n,a,l);return Object.assign(i,n),i},MN=(t,e)=>t?AE(t,e):AE;function Tn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[i,a]of t)if(!Object.is(a,e.get(i)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(t[i],e[i]))return!1;return!0}var ON={value:()=>{}};function Nf(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new kh(n)}function kh(t){this._=t}function PN(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}kh.prototype=Nf.prototype={constructor:kh,on:function(t,e){var n=this._,i=PN(t+"",n),a,l=-1,c=i.length;if(arguments.length<2){for(;++l<c;)if((a=(t=i[l]).type)&&(a=VN(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<c;)if(a=(t=i[l]).type)n[a]=RE(n[a],t.name,e);else if(e==null)for(a in n)n[a]=RE(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new kh(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,l;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],i=0,a=l.length;i<a;++i)l[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,l=i.length;a<l;++a)i[a].value.apply(e,n)}};function VN(t,e){for(var n=0,i=t.length,a;n<i;++n)if((a=t[n]).name===e)return a.value}function RE(t,e,n){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=ON,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Bm="http://www.w3.org/1999/xhtml";const NE={svg:"http://www.w3.org/2000/svg",xhtml:Bm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cf(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),NE.hasOwnProperty(e)?{space:NE[e],local:t}:t}function LN(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Bm&&e.documentElement.namespaceURI===Bm?e.createElement(t):e.createElementNS(n,t)}}function zN(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function p1(t){var e=Cf(t);return(e.local?zN:LN)(e)}function UN(){}function M0(t){return t==null?UN:function(){return this.querySelector(t)}}function jN(t){typeof t!="function"&&(t=M0(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=i[a]=new Array(c),f,p,y=0;y<c;++y)(f=l[y])&&(p=t.call(f,f.__data__,y,l))&&("__data__"in f&&(p.__data__=f.__data__),d[y]=p);return new lr(i,this._parents)}function BN(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function HN(){return[]}function m1(t){return t==null?HN:function(){return this.querySelectorAll(t)}}function qN(t){return function(){return BN(t.apply(this,arguments))}}function $N(t){typeof t=="function"?t=qN(t):t=m1(t);for(var e=this._groups,n=e.length,i=[],a=[],l=0;l<n;++l)for(var c=e[l],d=c.length,f,p=0;p<d;++p)(f=c[p])&&(i.push(t.call(f,f.__data__,p,c)),a.push(f));return new lr(i,a)}function y1(t){return function(){return this.matches(t)}}function v1(t){return function(e){return e.matches(t)}}var FN=Array.prototype.find;function GN(t){return function(){return FN.call(this.children,t)}}function YN(){return this.firstElementChild}function KN(t){return this.select(t==null?YN:GN(typeof t=="function"?t:v1(t)))}var XN=Array.prototype.filter;function QN(){return Array.from(this.children)}function WN(t){return function(){return XN.call(this.children,t)}}function ZN(t){return this.selectAll(t==null?QN:WN(typeof t=="function"?t:v1(t)))}function JN(t){typeof t!="function"&&(t=y1(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=i[a]=[],f,p=0;p<c;++p)(f=l[p])&&t.call(f,f.__data__,p,l)&&d.push(f);return new lr(i,this._parents)}function _1(t){return new Array(t.length)}function eC(){return new lr(this._enter||this._groups.map(_1),this._parents)}function Yh(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Yh.prototype={constructor:Yh,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function tC(t){return function(){return t}}function nC(t,e,n,i,a,l){for(var c=0,d,f=e.length,p=l.length;c<p;++c)(d=e[c])?(d.__data__=l[c],i[c]=d):n[c]=new Yh(t,l[c]);for(;c<f;++c)(d=e[c])&&(a[c]=d)}function rC(t,e,n,i,a,l,c){var d,f,p=new Map,y=e.length,_=l.length,b=new Array(y),w;for(d=0;d<y;++d)(f=e[d])&&(b[d]=w=c.call(f,f.__data__,d,e)+"",p.has(w)?a[d]=f:p.set(w,f));for(d=0;d<_;++d)w=c.call(t,l[d],d,l)+"",(f=p.get(w))?(i[d]=f,f.__data__=l[d],p.delete(w)):n[d]=new Yh(t,l[d]);for(d=0;d<y;++d)(f=e[d])&&p.get(b[d])===f&&(a[d]=f)}function iC(t){return t.__data__}function sC(t,e){if(!arguments.length)return Array.from(this,iC);var n=e?rC:nC,i=this._parents,a=this._groups;typeof t!="function"&&(t=tC(t));for(var l=a.length,c=new Array(l),d=new Array(l),f=new Array(l),p=0;p<l;++p){var y=i[p],_=a[p],b=_.length,w=aC(t.call(y,y&&y.__data__,p,i)),S=w.length,M=d[p]=new Array(S),C=c[p]=new Array(S),L=f[p]=new Array(b);n(y,_,M,C,L,w,e);for(var B=0,G=0,j,J;B<S;++B)if(j=M[B]){for(B>=G&&(G=B+1);!(J=C[G])&&++G<S;);j._next=J||null}}return c=new lr(c,i),c._enter=d,c._exit=f,c}function aC(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function oC(){return new lr(this._exit||this._groups.map(_1),this._parents)}function lC(t,e,n){var i=this.enter(),a=this,l=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),n==null?l.remove():n(l),i&&a?i.merge(a).order():a}function cC(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,a=n.length,l=i.length,c=Math.min(a,l),d=new Array(a),f=0;f<c;++f)for(var p=n[f],y=i[f],_=p.length,b=d[f]=new Array(_),w,S=0;S<_;++S)(w=p[S]||y[S])&&(b[S]=w);for(;f<a;++f)d[f]=n[f];return new lr(d,this._parents)}function uC(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],a=i.length-1,l=i[a],c;--a>=0;)(c=i[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function dC(t){t||(t=hC);function e(_,b){return _&&b?t(_.__data__,b.__data__):!_-!b}for(var n=this._groups,i=n.length,a=new Array(i),l=0;l<i;++l){for(var c=n[l],d=c.length,f=a[l]=new Array(d),p,y=0;y<d;++y)(p=c[y])&&(f[y]=p);f.sort(e)}return new lr(a,this._parents).order()}function hC(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function fC(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function gC(){return Array.from(this)}function pC(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,l=i.length;a<l;++a){var c=i[a];if(c)return c}return null}function mC(){let t=0;for(const e of this)++t;return t}function yC(){return!this.node()}function vC(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var a=e[n],l=0,c=a.length,d;l<c;++l)(d=a[l])&&t.call(d,d.__data__,l,a);return this}function _C(t){return function(){this.removeAttribute(t)}}function bC(t){return function(){this.removeAttributeNS(t.space,t.local)}}function EC(t,e){return function(){this.setAttribute(t,e)}}function wC(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function xC(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function TC(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function SC(t,e){var n=Cf(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?bC:_C:typeof e=="function"?n.local?TC:xC:n.local?wC:EC)(n,e))}function b1(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function AC(t){return function(){this.style.removeProperty(t)}}function RC(t,e,n){return function(){this.style.setProperty(t,e,n)}}function NC(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function CC(t,e,n){return arguments.length>1?this.each((e==null?AC:typeof e=="function"?NC:RC)(t,e,n??"")):xl(this.node(),t)}function xl(t,e){return t.style.getPropertyValue(e)||b1(t).getComputedStyle(t,null).getPropertyValue(e)}function IC(t){return function(){delete this[t]}}function kC(t,e){return function(){this[t]=e}}function DC(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function MC(t,e){return arguments.length>1?this.each((e==null?IC:typeof e=="function"?DC:kC)(t,e)):this.node()[t]}function E1(t){return t.trim().split(/^|\s+/)}function O0(t){return t.classList||new w1(t)}function w1(t){this._node=t,this._names=E1(t.getAttribute("class")||"")}w1.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function x1(t,e){for(var n=O0(t),i=-1,a=e.length;++i<a;)n.add(e[i])}function T1(t,e){for(var n=O0(t),i=-1,a=e.length;++i<a;)n.remove(e[i])}function OC(t){return function(){x1(this,t)}}function PC(t){return function(){T1(this,t)}}function VC(t,e){return function(){(e.apply(this,arguments)?x1:T1)(this,t)}}function LC(t,e){var n=E1(t+"");if(arguments.length<2){for(var i=O0(this.node()),a=-1,l=n.length;++a<l;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?VC:e?OC:PC)(n,e))}function zC(){this.textContent=""}function UC(t){return function(){this.textContent=t}}function jC(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function BC(t){return arguments.length?this.each(t==null?zC:(typeof t=="function"?jC:UC)(t)):this.node().textContent}function HC(){this.innerHTML=""}function qC(t){return function(){this.innerHTML=t}}function $C(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function FC(t){return arguments.length?this.each(t==null?HC:(typeof t=="function"?$C:qC)(t)):this.node().innerHTML}function GC(){this.nextSibling&&this.parentNode.appendChild(this)}function YC(){return this.each(GC)}function KC(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function XC(){return this.each(KC)}function QC(t){var e=typeof t=="function"?t:p1(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function WC(){return null}function ZC(t,e){var n=typeof t=="function"?t:p1(t),i=e==null?WC:typeof e=="function"?e:M0(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function JC(){var t=this.parentNode;t&&t.removeChild(this)}function eI(){return this.each(JC)}function tI(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function nI(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function rI(t){return this.select(t?nI:tI)}function iI(t){return arguments.length?this.property("__data__",t):this.node().__data__}function sI(t){return function(e){t.call(this,e,this.__data__)}}function aI(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function oI(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,a=e.length,l;n<a;++n)l=e[n],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.options):e[++i]=l;++i?e.length=i:delete this.__on}}}function lI(t,e,n){return function(){var i=this.__on,a,l=sI(e);if(i){for(var c=0,d=i.length;c<d;++c)if((a=i[c]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=e;return}}this.addEventListener(t.type,l,n),a={type:t.type,name:t.name,value:e,listener:l,options:n},i?i.push(a):this.__on=[a]}}function cI(t,e,n){var i=aI(t+""),a,l=i.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var f=0,p=d.length,y;f<p;++f)for(a=0,y=d[f];a<l;++a)if((c=i[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=e?lI:oI,a=0;a<l;++a)this.each(d(i[a],e,n));return this}function S1(t,e,n){var i=b1(t),a=i.CustomEvent;typeof a=="function"?a=new a(e,n):(a=i.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function uI(t,e){return function(){return S1(this,t,e)}}function dI(t,e){return function(){return S1(this,t,e.apply(this,arguments))}}function hI(t,e){return this.each((typeof e=="function"?dI:uI)(t,e))}function*fI(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,l=i.length,c;a<l;++a)(c=i[a])&&(yield c)}var A1=[null];function lr(t,e){this._groups=t,this._parents=e}function Ou(){return new lr([[document.documentElement]],A1)}function gI(){return this}lr.prototype=Ou.prototype={constructor:lr,select:jN,selectAll:$N,selectChild:KN,selectChildren:ZN,filter:JN,data:sC,enter:eC,exit:oC,join:lC,merge:cC,selection:gI,order:uC,sort:dC,call:fC,nodes:gC,node:pC,size:mC,empty:yC,each:vC,attr:SC,style:CC,property:MC,classed:LC,text:BC,html:FC,raise:YC,lower:XC,append:QC,insert:ZC,remove:eI,clone:rI,datum:iI,on:cI,dispatch:hI,[Symbol.iterator]:fI};function Lr(t){return typeof t=="string"?new lr([[document.querySelector(t)]],[document.documentElement]):new lr([[t]],A1)}function pI(t){let e;for(;e=t.sourceEvent;)t=e;return t}function hi(t,e){if(t=pI(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const mI={passive:!1},gu={capture:!0,passive:!1};function gm(t){t.stopImmediatePropagation()}function fl(t){t.preventDefault(),t.stopImmediatePropagation()}function R1(t){var e=t.document.documentElement,n=Lr(t).on("dragstart.drag",fl,gu);"onselectstart"in e?n.on("selectstart.drag",fl,gu):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function N1(t,e){var n=t.document.documentElement,i=Lr(t).on("dragstart.drag",null);e&&(i.on("click.drag",fl,gu),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const uh=t=>()=>t;function Hm(t,{sourceEvent:e,subject:n,target:i,identifier:a,active:l,x:c,y:d,dx:f,dy:p,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:y}})}Hm.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function yI(t){return!t.ctrlKey&&!t.button}function vI(){return this.parentNode}function _I(t,e){return e??{x:t.x,y:t.y}}function bI(){return navigator.maxTouchPoints||"ontouchstart"in this}function EI(){var t=yI,e=vI,n=_I,i=bI,a={},l=Nf("start","drag","end"),c=0,d,f,p,y,_=0;function b(j){j.on("mousedown.drag",w).filter(i).on("touchstart.drag",C).on("touchmove.drag",L,mI).on("touchend.drag touchcancel.drag",B).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(j,J){if(!(y||!t.call(this,j,J))){var ee=G(this,e.call(this,j,J),j,J,"mouse");ee&&(Lr(j.view).on("mousemove.drag",S,gu).on("mouseup.drag",M,gu),R1(j.view),gm(j),p=!1,d=j.clientX,f=j.clientY,ee("start",j))}}function S(j){if(fl(j),!p){var J=j.clientX-d,ee=j.clientY-f;p=J*J+ee*ee>_}a.mouse("drag",j)}function M(j){Lr(j.view).on("mousemove.drag mouseup.drag",null),N1(j.view,p),fl(j),a.mouse("end",j)}function C(j,J){if(t.call(this,j,J)){var ee=j.changedTouches,O=e.call(this,j,J),A=ee.length,R,z;for(R=0;R<A;++R)(z=G(this,O,j,J,ee[R].identifier,ee[R]))&&(gm(j),z("start",j,ee[R]))}}function L(j){var J=j.changedTouches,ee=J.length,O,A;for(O=0;O<ee;++O)(A=a[J[O].identifier])&&(fl(j),A("drag",j,J[O]))}function B(j){var J=j.changedTouches,ee=J.length,O,A;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),O=0;O<ee;++O)(A=a[J[O].identifier])&&(gm(j),A("end",j,J[O]))}function G(j,J,ee,O,A,R){var z=l.copy(),U=hi(R||ee,J),H,I,P;if((P=n.call(j,new Hm("beforestart",{sourceEvent:ee,target:b,identifier:A,active:c,x:U[0],y:U[1],dx:0,dy:0,dispatch:z}),O))!=null)return H=P.x-U[0]||0,I=P.y-U[1]||0,function Y(D,q,W){var Q=U,k;switch(D){case"start":a[A]=Y,k=c++;break;case"end":delete a[A],--c;case"drag":U=hi(W||q,J),k=c;break}z.call(D,j,new Hm(D,{sourceEvent:q,subject:P,target:b,identifier:A,active:k,x:U[0]+H,y:U[1]+I,dx:U[0]-Q[0],dy:U[1]-Q[1],dispatch:z}),O)}}return b.filter=function(j){return arguments.length?(t=typeof j=="function"?j:uh(!!j),b):t},b.container=function(j){return arguments.length?(e=typeof j=="function"?j:uh(j),b):e},b.subject=function(j){return arguments.length?(n=typeof j=="function"?j:uh(j),b):n},b.touchable=function(j){return arguments.length?(i=typeof j=="function"?j:uh(!!j),b):i},b.on=function(){var j=l.on.apply(l,arguments);return j===l?b:j},b.clickDistance=function(j){return arguments.length?(_=(j=+j)*j,b):Math.sqrt(_)},b}function P0(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function C1(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Pu(){}var pu=.7,Kh=1/pu,gl="\\s*([+-]?\\d+)\\s*",mu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wI=/^#([0-9a-f]{3,8})$/,xI=new RegExp(`^rgb\\(${gl},${gl},${gl}\\)$`),TI=new RegExp(`^rgb\\(${gi},${gi},${gi}\\)$`),SI=new RegExp(`^rgba\\(${gl},${gl},${gl},${mu}\\)$`),AI=new RegExp(`^rgba\\(${gi},${gi},${gi},${mu}\\)$`),RI=new RegExp(`^hsl\\(${mu},${gi},${gi}\\)$`),NI=new RegExp(`^hsla\\(${mu},${gi},${gi},${mu}\\)$`),CE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};P0(Pu,yu,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:IE,formatHex:IE,formatHex8:CI,formatHsl:II,formatRgb:kE,toString:kE});function IE(){return this.rgb().formatHex()}function CI(){return this.rgb().formatHex8()}function II(){return I1(this).formatHsl()}function kE(){return this.rgb().formatRgb()}function yu(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=wI.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?DE(e):n===3?new qn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?dh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?dh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=xI.exec(t))?new qn(e[1],e[2],e[3],1):(e=TI.exec(t))?new qn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=SI.exec(t))?dh(e[1],e[2],e[3],e[4]):(e=AI.exec(t))?dh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=RI.exec(t))?PE(e[1],e[2]/100,e[3]/100,1):(e=NI.exec(t))?PE(e[1],e[2]/100,e[3]/100,e[4]):CE.hasOwnProperty(t)?DE(CE[t]):t==="transparent"?new qn(NaN,NaN,NaN,0):null}function DE(t){return new qn(t>>16&255,t>>8&255,t&255,1)}function dh(t,e,n,i){return i<=0&&(t=e=n=NaN),new qn(t,e,n,i)}function kI(t){return t instanceof Pu||(t=yu(t)),t?(t=t.rgb(),new qn(t.r,t.g,t.b,t.opacity)):new qn}function qm(t,e,n,i){return arguments.length===1?kI(t):new qn(t,e,n,i??1)}function qn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}P0(qn,qm,C1(Pu,{brighter(t){return t=t==null?Kh:Math.pow(Kh,t),new qn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?pu:Math.pow(pu,t),new qn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new qn($a(this.r),$a(this.g),$a(this.b),Xh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ME,formatHex:ME,formatHex8:DI,formatRgb:OE,toString:OE}));function ME(){return`#${Ba(this.r)}${Ba(this.g)}${Ba(this.b)}`}function DI(){return`#${Ba(this.r)}${Ba(this.g)}${Ba(this.b)}${Ba((isNaN(this.opacity)?1:this.opacity)*255)}`}function OE(){const t=Xh(this.opacity);return`${t===1?"rgb(":"rgba("}${$a(this.r)}, ${$a(this.g)}, ${$a(this.b)}${t===1?")":`, ${t})`}`}function Xh(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $a(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ba(t){return t=$a(t),(t<16?"0":"")+t.toString(16)}function PE(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new zr(t,e,n,i)}function I1(t){if(t instanceof zr)return new zr(t.h,t.s,t.l,t.opacity);if(t instanceof Pu||(t=yu(t)),!t)return new zr;if(t instanceof zr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,a=Math.min(e,n,i),l=Math.max(e,n,i),c=NaN,d=l-a,f=(l+a)/2;return d?(e===l?c=(n-i)/d+(n<i)*6:n===l?c=(i-e)/d+2:c=(e-n)/d+4,d/=f<.5?l+a:2-l-a,c*=60):d=f>0&&f<1?0:c,new zr(c,d,f,t.opacity)}function MI(t,e,n,i){return arguments.length===1?I1(t):new zr(t,e,n,i??1)}function zr(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}P0(zr,MI,C1(Pu,{brighter(t){return t=t==null?Kh:Math.pow(Kh,t),new zr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?pu:Math.pow(pu,t),new zr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,a=2*n-i;return new qn(pm(t>=240?t-240:t+120,a,i),pm(t,a,i),pm(t<120?t+240:t-120,a,i),this.opacity)},clamp(){return new zr(VE(this.h),hh(this.s),hh(this.l),Xh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Xh(this.opacity);return`${t===1?"hsl(":"hsla("}${VE(this.h)}, ${hh(this.s)*100}%, ${hh(this.l)*100}%${t===1?")":`, ${t})`}`}}));function VE(t){return t=(t||0)%360,t<0?t+360:t}function hh(t){return Math.max(0,Math.min(1,t||0))}function pm(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const k1=t=>()=>t;function OI(t,e){return function(n){return t+n*e}}function PI(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function VI(t){return(t=+t)==1?D1:function(e,n){return n-e?PI(e,n,t):k1(isNaN(e)?n:e)}}function D1(t,e){var n=e-t;return n?OI(t,n):k1(isNaN(t)?e:t)}const LE=function t(e){var n=VI(e);function i(a,l){var c=n((a=qm(a)).r,(l=qm(l)).r),d=n(a.g,l.g),f=n(a.b,l.b),p=D1(a.opacity,l.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=f(y),a.opacity=p(y),a+""}}return i.gamma=t,i}(1);function Ms(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var $m=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mm=new RegExp($m.source,"g");function LI(t){return function(){return t}}function zI(t){return function(e){return t(e)+""}}function UI(t,e){var n=$m.lastIndex=mm.lastIndex=0,i,a,l,c=-1,d=[],f=[];for(t=t+"",e=e+"";(i=$m.exec(t))&&(a=mm.exec(e));)(l=a.index)>n&&(l=e.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(i=i[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,f.push({i:c,x:Ms(i,a)})),n=mm.lastIndex;return n<e.length&&(l=e.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?f[0]?zI(f[0].x):LI(e):(e=f.length,function(p){for(var y=0,_;y<e;++y)d[(_=f[y]).i]=_.x(p);return d.join("")})}var zE=180/Math.PI,Fm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function M1(t,e,n,i,a,l){var c,d,f;return(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c),(f=t*n+e*i)&&(n-=t*f,i-=e*f),(d=Math.sqrt(n*n+i*i))&&(n/=d,i/=d,f/=d),t*i<e*n&&(t=-t,e=-e,f=-f,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(e,t)*zE,skewX:Math.atan(f)*zE,scaleX:c,scaleY:d}}var fh;function jI(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Fm:M1(e.a,e.b,e.c,e.d,e.e,e.f)}function BI(t){return t==null||(fh||(fh=document.createElementNS("http://www.w3.org/2000/svg","g")),fh.setAttribute("transform",t),!(t=fh.transform.baseVal.consolidate()))?Fm:(t=t.matrix,M1(t.a,t.b,t.c,t.d,t.e,t.f))}function O1(t,e,n,i){function a(p){return p.length?p.pop()+" ":""}function l(p,y,_,b,w,S){if(p!==_||y!==b){var M=w.push("translate(",null,e,null,n);S.push({i:M-4,x:Ms(p,_)},{i:M-2,x:Ms(y,b)})}else(_||b)&&w.push("translate("+_+e+b+n)}function c(p,y,_,b){p!==y?(p-y>180?y+=360:y-p>180&&(p+=360),b.push({i:_.push(a(_)+"rotate(",null,i)-2,x:Ms(p,y)})):y&&_.push(a(_)+"rotate("+y+i)}function d(p,y,_,b){p!==y?b.push({i:_.push(a(_)+"skewX(",null,i)-2,x:Ms(p,y)}):y&&_.push(a(_)+"skewX("+y+i)}function f(p,y,_,b,w,S){if(p!==_||y!==b){var M=w.push(a(w)+"scale(",null,",",null,")");S.push({i:M-4,x:Ms(p,_)},{i:M-2,x:Ms(y,b)})}else(_!==1||b!==1)&&w.push(a(w)+"scale("+_+","+b+")")}return function(p,y){var _=[],b=[];return p=t(p),y=t(y),l(p.translateX,p.translateY,y.translateX,y.translateY,_,b),c(p.rotate,y.rotate,_,b),d(p.skewX,y.skewX,_,b),f(p.scaleX,p.scaleY,y.scaleX,y.scaleY,_,b),p=y=null,function(w){for(var S=-1,M=b.length,C;++S<M;)_[(C=b[S]).i]=C.x(w);return _.join("")}}}var HI=O1(jI,"px, ","px)","deg)"),qI=O1(BI,", ",")",")"),$I=1e-12;function UE(t){return((t=Math.exp(t))+1/t)/2}function FI(t){return((t=Math.exp(t))-1/t)/2}function GI(t){return((t=Math.exp(2*t))-1)/(t+1)}const YI=function t(e,n,i){function a(l,c){var d=l[0],f=l[1],p=l[2],y=c[0],_=c[1],b=c[2],w=y-d,S=_-f,M=w*w+S*S,C,L;if(M<$I)L=Math.log(b/p)/e,C=function(O){return[d+O*w,f+O*S,p*Math.exp(e*O*L)]};else{var B=Math.sqrt(M),G=(b*b-p*p+i*M)/(2*p*n*B),j=(b*b-p*p-i*M)/(2*b*n*B),J=Math.log(Math.sqrt(G*G+1)-G),ee=Math.log(Math.sqrt(j*j+1)-j);L=(ee-J)/e,C=function(O){var A=O*L,R=UE(J),z=p/(n*B)*(R*GI(e*A+J)-FI(J));return[d+z*w,f+z*S,p*R/UE(e*A+J)]}}return C.duration=L*1e3*e/Math.SQRT2,C}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,f=d*d;return t(c,d,f)},a}(Math.SQRT2,2,4);var Tl=0,Wc=0,qc=0,P1=1e3,Qh,Zc,Wh=0,Ga=0,If=0,vu=typeof performance=="object"&&performance.now?performance:Date,V1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function V0(){return Ga||(V1(KI),Ga=vu.now()+If)}function KI(){Ga=0}function Zh(){this._call=this._time=this._next=null}Zh.prototype=L1.prototype={constructor:Zh,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?V0():+n)+(e==null?0:+e),!this._next&&Zc!==this&&(Zc?Zc._next=this:Qh=this,Zc=this),this._call=t,this._time=n,Gm()},stop:function(){this._call&&(this._call=null,this._time=1/0,Gm())}};function L1(t,e,n){var i=new Zh;return i.restart(t,e,n),i}function XI(){V0(),++Tl;for(var t=Qh,e;t;)(e=Ga-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Tl}function jE(){Ga=(Wh=vu.now())+If,Tl=Wc=0;try{XI()}finally{Tl=0,WI(),Ga=0}}function QI(){var t=vu.now(),e=t-Wh;e>P1&&(If-=e,Wh=t)}function WI(){for(var t,e=Qh,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Qh=n);Zc=t,Gm(i)}function Gm(t){if(!Tl){Wc&&(Wc=clearTimeout(Wc));var e=t-Ga;e>24?(t<1/0&&(Wc=setTimeout(jE,t-vu.now()-If)),qc&&(qc=clearInterval(qc))):(qc||(Wh=vu.now(),qc=setInterval(QI,P1)),Tl=1,V1(jE))}}function BE(t,e,n){var i=new Zh;return e=e==null?0:+e,i.restart(a=>{i.stop(),t(a+e)},e,n),i}var ZI=Nf("start","end","cancel","interrupt"),JI=[],z1=0,HE=1,Ym=2,Dh=3,qE=4,Km=5,Mh=6;function kf(t,e,n,i,a,l){var c=t.__transition;if(!c)t.__transition={};else if(n in c)return;ek(t,n,{name:e,index:i,group:a,on:ZI,tween:JI,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:z1})}function L0(t,e){var n=$r(t,e);if(n.state>z1)throw new Error("too late; already scheduled");return n}function Ei(t,e){var n=$r(t,e);if(n.state>Dh)throw new Error("too late; already running");return n}function $r(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ek(t,e,n){var i=t.__transition,a;i[e]=n,n.timer=L1(l,0,n.time);function l(p){n.state=HE,n.timer.restart(c,n.delay,n.time),n.delay<=p&&c(p-n.delay)}function c(p){var y,_,b,w;if(n.state!==HE)return f();for(y in i)if(w=i[y],w.name===n.name){if(w.state===Dh)return BE(c);w.state===qE?(w.state=Mh,w.timer.stop(),w.on.call("interrupt",t,t.__data__,w.index,w.group),delete i[y]):+y<e&&(w.state=Mh,w.timer.stop(),w.on.call("cancel",t,t.__data__,w.index,w.group),delete i[y])}if(BE(function(){n.state===Dh&&(n.state=qE,n.timer.restart(d,n.delay,n.time),d(p))}),n.state=Ym,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ym){for(n.state=Dh,a=new Array(b=n.tween.length),y=0,_=-1;y<b;++y)(w=n.tween[y].value.call(t,t.__data__,n.index,n.group))&&(a[++_]=w);a.length=_+1}}function d(p){for(var y=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(f),n.state=Km,1),_=-1,b=a.length;++_<b;)a[_].call(t,y);n.state===Km&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=Mh,n.timer.stop(),delete i[e];for(var p in i)return;delete t.__transition}}function Oh(t,e){var n=t.__transition,i,a,l=!0,c;if(n){e=e==null?null:e+"";for(c in n){if((i=n[c]).name!==e){l=!1;continue}a=i.state>Ym&&i.state<Km,i.state=Mh,i.timer.stop(),i.on.call(a?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[c]}l&&delete t.__transition}}function tk(t){return this.each(function(){Oh(this,t)})}function nk(t,e){var n,i;return function(){var a=Ei(this,t),l=a.tween;if(l!==n){i=n=l;for(var c=0,d=i.length;c<d;++c)if(i[c].name===e){i=i.slice(),i.splice(c,1);break}}a.tween=i}}function rk(t,e,n){var i,a;if(typeof n!="function")throw new Error;return function(){var l=Ei(this,t),c=l.tween;if(c!==i){a=(i=c).slice();for(var d={name:e,value:n},f=0,p=a.length;f<p;++f)if(a[f].name===e){a[f]=d;break}f===p&&a.push(d)}l.tween=a}}function ik(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=$r(this.node(),n).tween,a=0,l=i.length,c;a<l;++a)if((c=i[a]).name===t)return c.value;return null}return this.each((e==null?nk:rk)(n,t,e))}function z0(t,e,n){var i=t._id;return t.each(function(){var a=Ei(this,i);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return $r(a,i).value[e]}}function U1(t,e){var n;return(typeof e=="number"?Ms:e instanceof yu?LE:(n=yu(e))?(e=n,LE):UI)(t,e)}function sk(t){return function(){this.removeAttribute(t)}}function ak(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ok(t,e,n){var i,a=n+"",l;return function(){var c=this.getAttribute(t);return c===a?null:c===i?l:l=e(i=c,n)}}function lk(t,e,n){var i,a=n+"",l;return function(){var c=this.getAttributeNS(t.space,t.local);return c===a?null:c===i?l:l=e(i=c,n)}}function ck(t,e,n){var i,a,l;return function(){var c,d=n(this),f;return d==null?void this.removeAttribute(t):(c=this.getAttribute(t),f=d+"",c===f?null:c===i&&f===a?l:(a=f,l=e(i=c,d)))}}function uk(t,e,n){var i,a,l;return function(){var c,d=n(this),f;return d==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),f=d+"",c===f?null:c===i&&f===a?l:(a=f,l=e(i=c,d)))}}function dk(t,e){var n=Cf(t),i=n==="transform"?qI:U1;return this.attrTween(t,typeof e=="function"?(n.local?uk:ck)(n,i,z0(this,"attr."+t,e)):e==null?(n.local?ak:sk)(n):(n.local?lk:ok)(n,i,e))}function hk(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function fk(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function gk(t,e){var n,i;function a(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&fk(t,l)),n}return a._value=e,a}function pk(t,e){var n,i;function a(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&hk(t,l)),n}return a._value=e,a}function mk(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Cf(t);return this.tween(n,(i.local?gk:pk)(i,e))}function yk(t,e){return function(){L0(this,t).delay=+e.apply(this,arguments)}}function vk(t,e){return e=+e,function(){L0(this,t).delay=e}}function _k(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?yk:vk)(e,t)):$r(this.node(),e).delay}function bk(t,e){return function(){Ei(this,t).duration=+e.apply(this,arguments)}}function Ek(t,e){return e=+e,function(){Ei(this,t).duration=e}}function wk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?bk:Ek)(e,t)):$r(this.node(),e).duration}function xk(t,e){if(typeof e!="function")throw new Error;return function(){Ei(this,t).ease=e}}function Tk(t){var e=this._id;return arguments.length?this.each(xk(e,t)):$r(this.node(),e).ease}function Sk(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ei(this,t).ease=n}}function Ak(t){if(typeof t!="function")throw new Error;return this.each(Sk(this._id,t))}function Rk(t){typeof t!="function"&&(t=y1(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=i[a]=[],f,p=0;p<c;++p)(f=l[p])&&t.call(f,f.__data__,p,l)&&d.push(f);return new Ji(i,this._parents,this._name,this._id)}function Nk(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,a=n.length,l=Math.min(i,a),c=new Array(i),d=0;d<l;++d)for(var f=e[d],p=n[d],y=f.length,_=c[d]=new Array(y),b,w=0;w<y;++w)(b=f[w]||p[w])&&(_[w]=b);for(;d<i;++d)c[d]=e[d];return new Ji(c,this._parents,this._name,this._id)}function Ck(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ik(t,e,n){var i,a,l=Ck(e)?L0:Ei;return function(){var c=l(this,t),d=c.on;d!==i&&(a=(i=d).copy()).on(e,n),c.on=a}}function kk(t,e){var n=this._id;return arguments.length<2?$r(this.node(),n).on.on(t):this.each(Ik(n,t,e))}function Dk(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Mk(){return this.on("end.remove",Dk(this._id))}function Ok(t){var e=this._name,n=this._id;typeof t!="function"&&(t=M0(t));for(var i=this._groups,a=i.length,l=new Array(a),c=0;c<a;++c)for(var d=i[c],f=d.length,p=l[c]=new Array(f),y,_,b=0;b<f;++b)(y=d[b])&&(_=t.call(y,y.__data__,b,d))&&("__data__"in y&&(_.__data__=y.__data__),p[b]=_,kf(p[b],e,n,b,p,$r(y,n)));return new Ji(l,this._parents,e,n)}function Pk(t){var e=this._name,n=this._id;typeof t!="function"&&(t=m1(t));for(var i=this._groups,a=i.length,l=[],c=[],d=0;d<a;++d)for(var f=i[d],p=f.length,y,_=0;_<p;++_)if(y=f[_]){for(var b=t.call(y,y.__data__,_,f),w,S=$r(y,n),M=0,C=b.length;M<C;++M)(w=b[M])&&kf(w,e,n,M,b,S);l.push(b),c.push(y)}return new Ji(l,c,e,n)}var Vk=Ou.prototype.constructor;function Lk(){return new Vk(this._groups,this._parents)}function zk(t,e){var n,i,a;return function(){var l=xl(this,t),c=(this.style.removeProperty(t),xl(this,t));return l===c?null:l===n&&c===i?a:a=e(n=l,i=c)}}function j1(t){return function(){this.style.removeProperty(t)}}function Uk(t,e,n){var i,a=n+"",l;return function(){var c=xl(this,t);return c===a?null:c===i?l:l=e(i=c,n)}}function jk(t,e,n){var i,a,l;return function(){var c=xl(this,t),d=n(this),f=d+"";return d==null&&(f=d=(this.style.removeProperty(t),xl(this,t))),c===f?null:c===i&&f===a?l:(a=f,l=e(i=c,d))}}function Bk(t,e){var n,i,a,l="style."+e,c="end."+l,d;return function(){var f=Ei(this,t),p=f.on,y=f.value[l]==null?d||(d=j1(e)):void 0;(p!==n||a!==y)&&(i=(n=p).copy()).on(c,a=y),f.on=i}}function Hk(t,e,n){var i=(t+="")=="transform"?HI:U1;return e==null?this.styleTween(t,zk(t,i)).on("end.style."+t,j1(t)):typeof e=="function"?this.styleTween(t,jk(t,i,z0(this,"style."+t,e))).each(Bk(this._id,t)):this.styleTween(t,Uk(t,i,e),n).on("end.style."+t,null)}function qk(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function $k(t,e,n){var i,a;function l(){var c=e.apply(this,arguments);return c!==a&&(i=(a=c)&&qk(t,c,n)),i}return l._value=e,l}function Fk(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,$k(t,e,n??""))}function Gk(t){return function(){this.textContent=t}}function Yk(t){return function(){var e=t(this);this.textContent=e??""}}function Kk(t){return this.tween("text",typeof t=="function"?Yk(z0(this,"text",t)):Gk(t==null?"":t+""))}function Xk(t){return function(e){this.textContent=t.call(this,e)}}function Qk(t){var e,n;function i(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&Xk(a)),e}return i._value=t,i}function Wk(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Qk(t))}function Zk(){for(var t=this._name,e=this._id,n=B1(),i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],d=c.length,f,p=0;p<d;++p)if(f=c[p]){var y=$r(f,e);kf(f,t,n,p,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new Ji(i,this._parents,t,n)}function Jk(){var t,e,n=this,i=n._id,a=n.size();return new Promise(function(l,c){var d={value:c},f={value:function(){--a===0&&l()}};n.each(function(){var p=Ei(this,i),y=p.on;y!==t&&(e=(t=y).copy(),e._.cancel.push(d),e._.interrupt.push(d),e._.end.push(f)),p.on=e}),a===0&&l()})}var e4=0;function Ji(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function B1(){return++e4}var Yi=Ou.prototype;Ji.prototype={constructor:Ji,select:Ok,selectAll:Pk,selectChild:Yi.selectChild,selectChildren:Yi.selectChildren,filter:Rk,merge:Nk,selection:Lk,transition:Zk,call:Yi.call,nodes:Yi.nodes,node:Yi.node,size:Yi.size,empty:Yi.empty,each:Yi.each,on:kk,attr:dk,attrTween:mk,style:Hk,styleTween:Fk,text:Kk,textTween:Wk,remove:Mk,tween:ik,delay:_k,duration:wk,ease:Tk,easeVarying:Ak,end:Jk,[Symbol.iterator]:Yi[Symbol.iterator]};function t4(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var n4={time:null,delay:0,duration:250,ease:t4};function r4(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function i4(t){var e,n;t instanceof Ji?(e=t._id,t=t._name):(e=B1(),(n=n4).time=V0(),t=t==null?null:t+"");for(var i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],d=c.length,f,p=0;p<d;++p)(f=c[p])&&kf(f,t,e,p,c,n||r4(f,e));return new Ji(i,this._parents,t,e)}Ou.prototype.interrupt=tk;Ou.prototype.transition=i4;const gh=t=>()=>t;function s4(t,{sourceEvent:e,target:n,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Xi(t,e,n){this.k=t,this.x=e,this.y=n}Xi.prototype={constructor:Xi,scale:function(t){return t===1?this:new Xi(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Xi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qs=new Xi(1,0,0);Xi.prototype;function ym(t){t.stopImmediatePropagation()}function $c(t){t.preventDefault(),t.stopImmediatePropagation()}function a4(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function o4(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function $E(){return this.__zoom||qs}function l4(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function c4(){return navigator.maxTouchPoints||"ontouchstart"in this}function u4(t,e,n){var i=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],c=t.invertY(e[1][1])-n[1][1];return t.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function d4(){var t=a4,e=o4,n=u4,i=l4,a=c4,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,f=YI,p=Nf("start","zoom","end"),y,_,b,w=500,S=150,M=0,C=10;function L(P){P.property("__zoom",$E).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",z).filter(a).on("touchstart.zoom",U).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}L.transform=function(P,Y,D,q){var W=P.selection?P.selection():P;W.property("__zoom",$E),P!==W?J(P,Y,D,q):W.interrupt().each(function(){ee(this,arguments).event(q).start().zoom(null,typeof Y=="function"?Y.apply(this,arguments):Y).end()})},L.scaleBy=function(P,Y,D,q){L.scaleTo(P,function(){var W=this.__zoom.k,Q=typeof Y=="function"?Y.apply(this,arguments):Y;return W*Q},D,q)},L.scaleTo=function(P,Y,D,q){L.transform(P,function(){var W=e.apply(this,arguments),Q=this.__zoom,k=D==null?j(W):typeof D=="function"?D.apply(this,arguments):D,F=Q.invert(k),te=typeof Y=="function"?Y.apply(this,arguments):Y;return n(G(B(Q,te),k,F),W,c)},D,q)},L.translateBy=function(P,Y,D,q){L.transform(P,function(){return n(this.__zoom.translate(typeof Y=="function"?Y.apply(this,arguments):Y,typeof D=="function"?D.apply(this,arguments):D),e.apply(this,arguments),c)},null,q)},L.translateTo=function(P,Y,D,q,W){L.transform(P,function(){var Q=e.apply(this,arguments),k=this.__zoom,F=q==null?j(Q):typeof q=="function"?q.apply(this,arguments):q;return n(qs.translate(F[0],F[1]).scale(k.k).translate(typeof Y=="function"?-Y.apply(this,arguments):-Y,typeof D=="function"?-D.apply(this,arguments):-D),Q,c)},q,W)};function B(P,Y){return Y=Math.max(l[0],Math.min(l[1],Y)),Y===P.k?P:new Xi(Y,P.x,P.y)}function G(P,Y,D){var q=Y[0]-D[0]*P.k,W=Y[1]-D[1]*P.k;return q===P.x&&W===P.y?P:new Xi(P.k,q,W)}function j(P){return[(+P[0][0]+ +P[1][0])/2,(+P[0][1]+ +P[1][1])/2]}function J(P,Y,D,q){P.on("start.zoom",function(){ee(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){ee(this,arguments).event(q).end()}).tween("zoom",function(){var W=this,Q=arguments,k=ee(W,Q).event(q),F=e.apply(W,Q),te=D==null?j(F):typeof D=="function"?D.apply(W,Q):D,X=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),re=W.__zoom,de=typeof Y=="function"?Y.apply(W,Q):Y,ue=f(re.invert(te).concat(X/re.k),de.invert(te).concat(X/de.k));return function(ye){if(ye===1)ye=de;else{var _e=ue(ye),Ae=X/_e[2];ye=new Xi(Ae,te[0]-_e[0]*Ae,te[1]-_e[1]*Ae)}k.zoom(null,ye)}})}function ee(P,Y,D){return!D&&P.__zooming||new O(P,Y)}function O(P,Y){this.that=P,this.args=Y,this.active=0,this.sourceEvent=null,this.extent=e.apply(P,Y),this.taps=0}O.prototype={event:function(P){return P&&(this.sourceEvent=P),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(P,Y){return this.mouse&&P!=="mouse"&&(this.mouse[1]=Y.invert(this.mouse[0])),this.touch0&&P!=="touch"&&(this.touch0[1]=Y.invert(this.touch0[0])),this.touch1&&P!=="touch"&&(this.touch1[1]=Y.invert(this.touch1[0])),this.that.__zoom=Y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(P){var Y=Lr(this.that).datum();p.call(P,this.that,new s4(P,{sourceEvent:this.sourceEvent,target:L,transform:this.that.__zoom,dispatch:p}),Y)}};function A(P,...Y){if(!t.apply(this,arguments))return;var D=ee(this,Y).event(P),q=this.__zoom,W=Math.max(l[0],Math.min(l[1],q.k*Math.pow(2,i.apply(this,arguments)))),Q=hi(P);if(D.wheel)(D.mouse[0][0]!==Q[0]||D.mouse[0][1]!==Q[1])&&(D.mouse[1]=q.invert(D.mouse[0]=Q)),clearTimeout(D.wheel);else{if(q.k===W)return;D.mouse=[Q,q.invert(Q)],Oh(this),D.start()}$c(P),D.wheel=setTimeout(k,S),D.zoom("mouse",n(G(B(q,W),D.mouse[0],D.mouse[1]),D.extent,c));function k(){D.wheel=null,D.end()}}function R(P,...Y){if(b||!t.apply(this,arguments))return;var D=P.currentTarget,q=ee(this,Y,!0).event(P),W=Lr(P.view).on("mousemove.zoom",te,!0).on("mouseup.zoom",X,!0),Q=hi(P,D),k=P.clientX,F=P.clientY;R1(P.view),ym(P),q.mouse=[Q,this.__zoom.invert(Q)],Oh(this),q.start();function te(re){if($c(re),!q.moved){var de=re.clientX-k,ue=re.clientY-F;q.moved=de*de+ue*ue>M}q.event(re).zoom("mouse",n(G(q.that.__zoom,q.mouse[0]=hi(re,D),q.mouse[1]),q.extent,c))}function X(re){W.on("mousemove.zoom mouseup.zoom",null),N1(re.view,q.moved),$c(re),q.event(re).end()}}function z(P,...Y){if(t.apply(this,arguments)){var D=this.__zoom,q=hi(P.changedTouches?P.changedTouches[0]:P,this),W=D.invert(q),Q=D.k*(P.shiftKey?.5:2),k=n(G(B(D,Q),q,W),e.apply(this,Y),c);$c(P),d>0?Lr(this).transition().duration(d).call(J,k,q,P):Lr(this).call(L.transform,k,q,P)}}function U(P,...Y){if(t.apply(this,arguments)){var D=P.touches,q=D.length,W=ee(this,Y,P.changedTouches.length===q).event(P),Q,k,F,te;for(ym(P),k=0;k<q;++k)F=D[k],te=hi(F,this),te=[te,this.__zoom.invert(te),F.identifier],W.touch0?!W.touch1&&W.touch0[2]!==te[2]&&(W.touch1=te,W.taps=0):(W.touch0=te,Q=!0,W.taps=1+!!y);y&&(y=clearTimeout(y)),Q&&(W.taps<2&&(_=te[0],y=setTimeout(function(){y=null},w)),Oh(this),W.start())}}function H(P,...Y){if(this.__zooming){var D=ee(this,Y).event(P),q=P.changedTouches,W=q.length,Q,k,F,te;for($c(P),Q=0;Q<W;++Q)k=q[Q],F=hi(k,this),D.touch0&&D.touch0[2]===k.identifier?D.touch0[0]=F:D.touch1&&D.touch1[2]===k.identifier&&(D.touch1[0]=F);if(k=D.that.__zoom,D.touch1){var X=D.touch0[0],re=D.touch0[1],de=D.touch1[0],ue=D.touch1[1],ye=(ye=de[0]-X[0])*ye+(ye=de[1]-X[1])*ye,_e=(_e=ue[0]-re[0])*_e+(_e=ue[1]-re[1])*_e;k=B(k,Math.sqrt(ye/_e)),F=[(X[0]+de[0])/2,(X[1]+de[1])/2],te=[(re[0]+ue[0])/2,(re[1]+ue[1])/2]}else if(D.touch0)F=D.touch0[0],te=D.touch0[1];else return;D.zoom("touch",n(G(k,F,te),D.extent,c))}}function I(P,...Y){if(this.__zooming){var D=ee(this,Y).event(P),q=P.changedTouches,W=q.length,Q,k;for(ym(P),b&&clearTimeout(b),b=setTimeout(function(){b=null},w),Q=0;Q<W;++Q)k=q[Q],D.touch0&&D.touch0[2]===k.identifier?delete D.touch0:D.touch1&&D.touch1[2]===k.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),D.taps===2&&(k=hi(k,this),Math.hypot(_[0]-k[0],_[1]-k[1])<C)){var F=Lr(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return L.wheelDelta=function(P){return arguments.length?(i=typeof P=="function"?P:gh(+P),L):i},L.filter=function(P){return arguments.length?(t=typeof P=="function"?P:gh(!!P),L):t},L.touchable=function(P){return arguments.length?(a=typeof P=="function"?P:gh(!!P),L):a},L.extent=function(P){return arguments.length?(e=typeof P=="function"?P:gh([[+P[0][0],+P[0][1]],[+P[1][0],+P[1][1]]]),L):e},L.scaleExtent=function(P){return arguments.length?(l[0]=+P[0],l[1]=+P[1],L):[l[0],l[1]]},L.translateExtent=function(P){return arguments.length?(c[0][0]=+P[0][0],c[1][0]=+P[1][0],c[0][1]=+P[0][1],c[1][1]=+P[1][1],L):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},L.constrain=function(P){return arguments.length?(n=P,L):n},L.duration=function(P){return arguments.length?(d=+P,L):d},L.interpolate=function(P){return arguments.length?(f=P,L):f},L.on=function(){var P=p.on.apply(p,arguments);return P===p?L:P},L.clickDistance=function(P){return arguments.length?(M=(P=+P)*P,L):Math.sqrt(M)},L.tapDistance=function(P){return arguments.length?(C=+P,L):C},L}var H1=f1();const Df=$.createContext(null),h4=Df.Provider,es={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},q1=es.error001();function Tt(t,e){const n=$.useContext(Df);if(n===null)throw new Error(q1);return g1(n,t,e)}const ln=()=>{const t=$.useContext(Df);if(t===null)throw new Error(q1);return $.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},f4=t=>t.userSelectionActive?"none":"all";function $1({position:t,children:e,className:n,style:i,...a}){const l=Tt(f4),c=`${t}`.split("-");return he.createElement("div",{className:Vn(["react-flow__panel",n,...c]),style:{...i,pointerEvents:l},...a},e)}function g4({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:he.createElement($1,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},he.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const p4=({x:t,y:e,label:n,labelStyle:i={},labelShowBg:a=!0,labelBgStyle:l={},labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:f,className:p,...y})=>{const _=$.useRef(null),[b,w]=$.useState({x:0,y:0,width:0,height:0}),S=Vn(["react-flow__edge-textwrapper",p]);return $.useEffect(()=>{if(_.current){const M=_.current.getBBox();w({x:M.x,y:M.y,width:M.width,height:M.height})}},[n]),typeof n>"u"||!n?null:he.createElement("g",{transform:`translate(${t-b.width/2} ${e-b.height/2})`,className:S,visibility:b.width?"visible":"hidden",...y},a&&he.createElement("rect",{width:b.width+2*c[0],x:-c[0],y:-c[1],height:b.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),he.createElement("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:_,style:i},n),f)};var m4=$.memo(p4);const U0=t=>({width:t.offsetWidth,height:t.offsetHeight}),Sl=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),j0=(t={x:0,y:0},e)=>({x:Sl(t.x,e[0][0],e[1][0]),y:Sl(t.y,e[0][1],e[1][1])}),FE=(t,e,n)=>t<e?Sl(Math.abs(t-e),1,50)/50:t>n?-Sl(Math.abs(t-n),1,50)/50:0,F1=(t,e)=>{const n=FE(t.x,35,e.width-35)*20,i=FE(t.y,35,e.height-35)*20;return[n,i]},G1=t=>t.getRootNode?.()||window?.document,y4=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),B0=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),v4=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),GE=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Xm=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},_4=t=>Rr(t.width)&&Rr(t.height)&&Rr(t.x)&&Rr(t.y),Rr=t=>!isNaN(t)&&isFinite(t),kt=Symbol.for("internals"),Y1=["Enter"," ","Escape"],b4=(t,e)=>{},E4=t=>"nativeEvent"in t;function Qm(t){const n=(E4(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const K1=t=>"clientX"in t,$s=(t,e)=>{const n=K1(t),i=n?t.clientX:t.touches?.[0].clientX,a=n?t.clientY:t.touches?.[0].clientY;return{x:i-(e?.left??0),y:a-(e?.top??0)}},Jh=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Vu=({id:t,path:e,labelX:n,labelY:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:_,markerStart:b,interactionWidth:w=20})=>he.createElement(he.Fragment,null,he.createElement("path",{id:t,style:y,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:_,markerStart:b}),w&&he.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:w,className:"react-flow__edge-interaction"}),a&&Rr(n)&&Rr(i)?he.createElement(m4,{x:n,y:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p}):null);Vu.displayName="BaseEdge";function Fc(t,e,n){return n===void 0?n:i=>{const a=e().edges.find(l=>l.id===t);a&&n(i,{...a})}}function X1({sourceX:t,sourceY:e,targetX:n,targetY:i}){const a=Math.abs(n-t)/2,l=n<t?n+a:n-a,c=Math.abs(i-e)/2,d=i<e?i+c:i-c;return[l,d,a,c]}function Q1({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const f=t*.125+a*.375+c*.375+n*.125,p=e*.125+l*.375+d*.375+i*.125,y=Math.abs(f-t),_=Math.abs(p-e);return[f,p,y,_]}var Qs;(function(t){t.Strict="strict",t.Loose="loose"})(Qs||(Qs={}));var Ha;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Ha||(Ha={}));var _u;(function(t){t.Partial="partial",t.Full="full"})(_u||(_u={}));var Ps;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ps||(Ps={}));var Ya;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Ya||(Ya={}));var Te;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Te||(Te={}));function YE({pos:t,x1:e,y1:n,x2:i,y2:a}){return t===Te.Left||t===Te.Right?[.5*(e+i),n]:[e,.5*(n+a)]}function W1({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:i,targetY:a,targetPosition:l=Te.Top}){const[c,d]=YE({pos:n,x1:t,y1:e,x2:i,y2:a}),[f,p]=YE({pos:l,x1:i,y1:a,x2:t,y2:e}),[y,_,b,w]=Q1({sourceX:t,sourceY:e,targetX:i,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:p});return[`M${t},${e} C${c},${d} ${f},${p} ${i},${a}`,y,_,b,w]}const H0=$.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,sourcePosition:a=Te.Bottom,targetPosition:l=Te.Top,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:_,style:b,markerEnd:w,markerStart:S,interactionWidth:M})=>{const[C,L,B]=W1({sourceX:t,sourceY:e,sourcePosition:a,targetX:n,targetY:i,targetPosition:l});return he.createElement(Vu,{path:C,labelX:L,labelY:B,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:_,style:b,markerEnd:w,markerStart:S,interactionWidth:M})});H0.displayName="SimpleBezierEdge";const KE={[Te.Left]:{x:-1,y:0},[Te.Right]:{x:1,y:0},[Te.Top]:{x:0,y:-1},[Te.Bottom]:{x:0,y:1}},w4=({source:t,sourcePosition:e=Te.Bottom,target:n})=>e===Te.Left||e===Te.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},XE=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function x4({source:t,sourcePosition:e=Te.Bottom,target:n,targetPosition:i=Te.Top,center:a,offset:l}){const c=KE[e],d=KE[i],f={x:t.x+c.x*l,y:t.y+c.y*l},p={x:n.x+d.x*l,y:n.y+d.y*l},y=w4({source:f,sourcePosition:e,target:p}),_=y.x!==0?"x":"y",b=y[_];let w=[],S,M;const C={x:0,y:0},L={x:0,y:0},[B,G,j,J]=X1({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(c[_]*d[_]===-1){S=a.x??B,M=a.y??G;const O=[{x:S,y:f.y},{x:S,y:p.y}],A=[{x:f.x,y:M},{x:p.x,y:M}];c[_]===b?w=_==="x"?O:A:w=_==="x"?A:O}else{const O=[{x:f.x,y:p.y}],A=[{x:p.x,y:f.y}];if(_==="x"?w=c.x===b?A:O:w=c.y===b?O:A,e===i){const I=Math.abs(t[_]-n[_]);if(I<=l){const P=Math.min(l-1,l-I);c[_]===b?C[_]=(f[_]>t[_]?-1:1)*P:L[_]=(p[_]>n[_]?-1:1)*P}}if(e!==i){const I=_==="x"?"y":"x",P=c[_]===d[I],Y=f[I]>p[I],D=f[I]<p[I];(c[_]===1&&(!P&&Y||P&&D)||c[_]!==1&&(!P&&D||P&&Y))&&(w=_==="x"?O:A)}const R={x:f.x+C.x,y:f.y+C.y},z={x:p.x+L.x,y:p.y+L.y},U=Math.max(Math.abs(R.x-w[0].x),Math.abs(z.x-w[0].x)),H=Math.max(Math.abs(R.y-w[0].y),Math.abs(z.y-w[0].y));U>=H?(S=(R.x+z.x)/2,M=w[0].y):(S=w[0].x,M=(R.y+z.y)/2)}return[[t,{x:f.x+C.x,y:f.y+C.y},...w,{x:p.x+L.x,y:p.y+L.y},n],S,M,j,J]}function T4(t,e,n,i){const a=Math.min(XE(t,e)/2,XE(e,n)/2,i),{x:l,y:c}=e;if(t.x===l&&l===n.x||t.y===c&&c===n.y)return`L${l} ${c}`;if(t.y===c){const p=t.x<n.x?-1:1,y=t.y<n.y?1:-1;return`L ${l+a*p},${c}Q ${l},${c} ${l},${c+a*y}`}const d=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${l},${c+a*f}Q ${l},${c} ${l+a*d},${c}`}function Wm({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:i,targetY:a,targetPosition:l=Te.Top,borderRadius:c=5,centerX:d,centerY:f,offset:p=20}){const[y,_,b,w,S]=x4({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:a},targetPosition:l,center:{x:d,y:f},offset:p});return[y.reduce((C,L,B)=>{let G="";return B>0&&B<y.length-1?G=T4(y[B-1],L,y[B+1],c):G=`${B===0?"M":"L"}${L.x} ${L.y}`,C+=G,C},""),_,b,w,S]}const Mf=$.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,sourcePosition:_=Te.Bottom,targetPosition:b=Te.Top,markerEnd:w,markerStart:S,pathOptions:M,interactionWidth:C})=>{const[L,B,G]=Wm({sourceX:t,sourceY:e,sourcePosition:_,targetX:n,targetY:i,targetPosition:b,borderRadius:M?.borderRadius,offset:M?.offset});return he.createElement(Vu,{path:L,labelX:B,labelY:G,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:w,markerStart:S,interactionWidth:C})});Mf.displayName="SmoothStepEdge";const q0=$.memo(t=>he.createElement(Mf,{...t,pathOptions:$.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));q0.displayName="StepEdge";function S4({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[a,l,c,d]=X1({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,a,l,c,d]}const $0=$.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:_,markerStart:b,interactionWidth:w})=>{const[S,M,C]=S4({sourceX:t,sourceY:e,targetX:n,targetY:i});return he.createElement(Vu,{path:S,labelX:M,labelY:C,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:_,markerStart:b,interactionWidth:w})});$0.displayName="StraightEdge";function ph(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function QE({pos:t,x1:e,y1:n,x2:i,y2:a,c:l}){switch(t){case Te.Left:return[e-ph(e-i,l),n];case Te.Right:return[e+ph(i-e,l),n];case Te.Top:return[e,n-ph(n-a,l)];case Te.Bottom:return[e,n+ph(a-n,l)]}}function Z1({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:i,targetY:a,targetPosition:l=Te.Top,curvature:c=.25}){const[d,f]=QE({pos:n,x1:t,y1:e,x2:i,y2:a,c}),[p,y]=QE({pos:l,x1:i,y1:a,x2:t,y2:e,c}),[_,b,w,S]=Q1({sourceX:t,sourceY:e,targetX:i,targetY:a,sourceControlX:d,sourceControlY:f,targetControlX:p,targetControlY:y});return[`M${t},${e} C${d},${f} ${p},${y} ${i},${a}`,_,b,w,S]}const ef=$.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,sourcePosition:a=Te.Bottom,targetPosition:l=Te.Top,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:_,style:b,markerEnd:w,markerStart:S,pathOptions:M,interactionWidth:C})=>{const[L,B,G]=Z1({sourceX:t,sourceY:e,sourcePosition:a,targetX:n,targetY:i,targetPosition:l,curvature:M?.curvature});return he.createElement(Vu,{path:L,labelX:B,labelY:G,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:_,style:b,markerEnd:w,markerStart:S,interactionWidth:C})});ef.displayName="BezierEdge";const F0=$.createContext(null),A4=F0.Provider;F0.Consumer;const R4=()=>$.useContext(F0),N4=t=>"id"in t&&"source"in t&&"target"in t,C4=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`reactflow__edge-${t}${e||""}-${n}${i||""}`,Zm=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`,I4=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),k4=(t,e)=>{if(!t.source||!t.target)return e;let n;return N4(t)?n={...t}:n={...t,id:C4(t)},I4(n,e)?e:e.concat(n)},Jm=({x:t,y:e},[n,i,a],l,[c,d])=>{const f={x:(t-n)/a,y:(e-i)/a};return l?{x:c*Math.round(f.x/c),y:d*Math.round(f.y/d)}:f},J1=({x:t,y:e},[n,i,a])=>({x:t*a+n,y:e*a+i}),pl=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],i=(t.height??0)*e[1],a={x:t.position.x-n,y:t.position.y-i};return{...a,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-i}:a}},G0=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,a)=>{const{x:l,y:c}=pl(a,e).positionAbsolute;return y4(i,B0({x:l,y:c,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return v4(n)},eT=(t,e,[n,i,a]=[0,0,1],l=!1,c=!1,d=[0,0])=>{const f={x:(e.x-n)/a,y:(e.y-i)/a,width:e.width/a,height:e.height/a},p=[];return t.forEach(y=>{const{width:_,height:b,selectable:w=!0,hidden:S=!1}=y;if(c&&!w||S)return!1;const{positionAbsolute:M}=pl(y,d),C={x:M.x,y:M.y,width:_||0,height:b||0},L=Xm(f,C),B=typeof _>"u"||typeof b>"u"||_===null||b===null,G=l&&L>0,j=(_||0)*(b||0);(B||G||L>=j||y.dragging)&&p.push(y)}),p},tT=(t,e)=>{const n=t.map(i=>i.id);return e.filter(i=>n.includes(i.source)||n.includes(i.target))},nT=(t,e,n,i,a,l=.1)=>{const c=e/(t.width*(1+l)),d=n/(t.height*(1+l)),f=Math.min(c,d),p=Sl(f,i,a),y=t.x+t.width/2,_=t.y+t.height/2,b=e/2-y*p,w=n/2-_*p;return{x:b,y:w,zoom:p}},Ua=(t,e=0)=>t.transition().duration(e);function WE(t,e,n,i){return(e[n]||[]).reduce((a,l)=>(`${t.id}-${l.id}-${n}`!==i&&a.push({id:l.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+l.x+l.width/2,y:(t.positionAbsolute?.y??0)+l.y+l.height/2}),a),[])}function D4(t,e,n,i,a,l){const{x:c,y:d}=$s(t),p=e.elementsFromPoint(c,d).find(S=>S.classList.contains("react-flow__handle"));if(p){const S=p.getAttribute("data-nodeid");if(S){const M=Y0(void 0,p),C=p.getAttribute("data-handleid"),L=l({nodeId:S,id:C,type:M});if(L){const B=a.find(G=>G.nodeId===S&&G.type===M&&G.id===C);return{handle:{id:C,type:M,nodeId:S,x:B?.x||n.x,y:B?.y||n.y},validHandleResult:L}}}}let y=[],_=1/0;if(a.forEach(S=>{const M=Math.sqrt((S.x-n.x)**2+(S.y-n.y)**2);if(M<=i){const C=l(S);M<=_&&(M<_?y=[{handle:S,validHandleResult:C}]:M===_&&y.push({handle:S,validHandleResult:C}),_=M)}}),!y.length)return{handle:null,validHandleResult:rT()};if(y.length===1)return y[0];const b=y.some(({validHandleResult:S})=>S.isValid),w=y.some(({handle:S})=>S.type==="target");return y.find(({handle:S,validHandleResult:M})=>w?S.type==="target":b?M.isValid:!0)||y[0]}const M4={source:null,target:null,sourceHandle:null,targetHandle:null},rT=()=>({handleDomNode:null,isValid:!1,connection:M4,endHandle:null});function iT(t,e,n,i,a,l,c){const d=a==="target",f=c.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),p={...rT(),handleDomNode:f};if(f){const y=Y0(void 0,f),_=f.getAttribute("data-nodeid"),b=f.getAttribute("data-handleid"),w=f.classList.contains("connectable"),S=f.classList.contains("connectableend"),M={source:d?_:n,sourceHandle:d?b:i,target:d?n:_,targetHandle:d?i:b};p.connection=M,w&&S&&(e===Qs.Strict?d&&y==="source"||!d&&y==="target":_!==n||b!==i)&&(p.endHandle={nodeId:_,handleId:b,type:y},p.isValid=l(M))}return p}function O4({nodes:t,nodeId:e,handleId:n,handleType:i}){return t.reduce((a,l)=>{if(l[kt]){const{handleBounds:c}=l[kt];let d=[],f=[];c&&(d=WE(l,c,"source",`${e}-${n}-${i}`),f=WE(l,c,"target",`${e}-${n}-${i}`)),a.push(...d,...f)}return a},[])}function Y0(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function vm(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function P4(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function sT({event:t,handleId:e,nodeId:n,onConnect:i,isTarget:a,getState:l,setState:c,isValidConnection:d,edgeUpdaterType:f,onReconnectEnd:p}){const y=G1(t.target),{connectionMode:_,domNode:b,autoPanOnConnect:w,connectionRadius:S,onConnectStart:M,panBy:C,getNodes:L,cancelConnection:B}=l();let G=0,j;const{x:J,y:ee}=$s(t),O=y?.elementFromPoint(J,ee),A=Y0(f,O),R=b?.getBoundingClientRect();if(!R||!A)return;let z,U=$s(t,R),H=!1,I=null,P=!1,Y=null;const D=O4({nodes:L(),nodeId:n,handleId:e,handleType:A}),q=()=>{if(!w)return;const[k,F]=F1(U,R);C({x:k,y:F}),G=requestAnimationFrame(q)};c({connectionPosition:U,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:A,connectionStartHandle:{nodeId:n,handleId:e,type:A},connectionEndHandle:null}),M?.(t,{nodeId:n,handleId:e,handleType:A});function W(k){const{transform:F}=l();U=$s(k,R);const{handle:te,validHandleResult:X}=D4(k,y,Jm(U,F,!1,[1,1]),S,D,re=>iT(re,_,n,e,a?"target":"source",d,y));if(j=te,H||(q(),H=!0),Y=X.handleDomNode,I=X.connection,P=X.isValid,c({connectionPosition:j&&P?J1({x:j.x,y:j.y},F):U,connectionStatus:P4(!!j,P),connectionEndHandle:X.endHandle}),!j&&!P&&!Y)return vm(z);I.source!==I.target&&Y&&(vm(z),z=Y,Y.classList.add("connecting","react-flow__handle-connecting"),Y.classList.toggle("valid",P),Y.classList.toggle("react-flow__handle-valid",P))}function Q(k){(j||Y)&&I&&P&&i?.(I),l().onConnectEnd?.(k),f&&p?.(k),vm(z),B(),cancelAnimationFrame(G),H=!1,P=!1,I=null,Y=null,y.removeEventListener("mousemove",W),y.removeEventListener("mouseup",Q),y.removeEventListener("touchmove",W),y.removeEventListener("touchend",Q)}y.addEventListener("mousemove",W),y.addEventListener("mouseup",Q),y.addEventListener("touchmove",W),y.addEventListener("touchend",Q)}const ZE=()=>!0,V4=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),L4=(t,e,n)=>i=>{const{connectionStartHandle:a,connectionEndHandle:l,connectionClickStartHandle:c}=i;return{connecting:a?.nodeId===t&&a?.handleId===e&&a?.type===n||l?.nodeId===t&&l?.handleId===e&&l?.type===n,clickConnecting:c?.nodeId===t&&c?.handleId===e&&c?.type===n}},aT=$.forwardRef(({type:t="source",position:e=Te.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:f,className:p,onMouseDown:y,onTouchStart:_,...b},w)=>{const S=c||null,M=t==="target",C=ln(),L=R4(),{connectOnClick:B,noPanClassName:G}=Tt(V4,Tn),{connecting:j,clickConnecting:J}=Tt(L4(L,S,t),Tn);L||C.getState().onError?.("010",es.error010());const ee=R=>{const{defaultEdgeOptions:z,onConnect:U,hasDefaultEdges:H}=C.getState(),I={...z,...R};if(H){const{edges:P,setEdges:Y}=C.getState();Y(k4(I,P))}U?.(I),d?.(I)},O=R=>{if(!L)return;const z=K1(R);a&&(z&&R.button===0||!z)&&sT({event:R,handleId:S,nodeId:L,onConnect:ee,isTarget:M,getState:C.getState,setState:C.setState,isValidConnection:n||C.getState().isValidConnection||ZE}),z?y?.(R):_?.(R)},A=R=>{const{onClickConnectStart:z,onClickConnectEnd:U,connectionClickStartHandle:H,connectionMode:I,isValidConnection:P}=C.getState();if(!L||!H&&!a)return;if(!H){z?.(R,{nodeId:L,handleId:S,handleType:t}),C.setState({connectionClickStartHandle:{nodeId:L,type:t,handleId:S}});return}const Y=G1(R.target),D=n||P||ZE,{connection:q,isValid:W}=iT({nodeId:L,id:S,type:t},I,H.nodeId,H.handleId||null,H.type,D,Y);W&&ee(q),U?.(R),C.setState({connectionClickStartHandle:null})};return he.createElement("div",{"data-handleid":S,"data-nodeid":L,"data-handlepos":e,"data-id":`${L}-${S}-${t}`,className:Vn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",G,p,{source:!M,target:M,connectable:i,connectablestart:a,connectableend:l,connecting:J,connectionindicator:i&&(a&&!j||l&&j)}]),onMouseDown:O,onTouchStart:O,onClick:B?A:void 0,ref:w,...b},f)});aT.displayName="Handle";var Pn=$.memo(aT);const oT=({data:t,isConnectable:e,targetPosition:n=Te.Top,sourcePosition:i=Te.Bottom})=>he.createElement(he.Fragment,null,he.createElement(Pn,{type:"target",position:n,isConnectable:e}),t?.label,he.createElement(Pn,{type:"source",position:i,isConnectable:e}));oT.displayName="DefaultNode";var e0=$.memo(oT);const lT=({data:t,isConnectable:e,sourcePosition:n=Te.Bottom})=>he.createElement(he.Fragment,null,t?.label,he.createElement(Pn,{type:"source",position:n,isConnectable:e}));lT.displayName="InputNode";var cT=$.memo(lT);const uT=({data:t,isConnectable:e,targetPosition:n=Te.Top})=>he.createElement(he.Fragment,null,he.createElement(Pn,{type:"target",position:n,isConnectable:e}),t?.label);uT.displayName="OutputNode";var dT=$.memo(uT);const K0=()=>null;K0.displayName="GroupNode";const z4=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),mh=t=>t.id;function U4(t,e){return Tn(t.selectedNodes.map(mh),e.selectedNodes.map(mh))&&Tn(t.selectedEdges.map(mh),e.selectedEdges.map(mh))}const hT=$.memo(({onSelectionChange:t})=>{const e=ln(),{selectedNodes:n,selectedEdges:i}=Tt(z4,U4);return $.useEffect(()=>{const a={nodes:n,edges:i};t?.(a),e.getState().onSelectionChange.forEach(l=>l(a))},[n,i,t]),null});hT.displayName="SelectionListener";const j4=t=>!!t.onSelectionChange;function B4({onSelectionChange:t}){const e=Tt(j4);return t||e?he.createElement(hT,{onSelectionChange:t}):null}const H4=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Zo(t,e){$.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function Ge(t,e,n){$.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const q4=({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:a,onConnectStart:l,onConnectEnd:c,onClickConnectStart:d,onClickConnectEnd:f,nodesDraggable:p,nodesConnectable:y,nodesFocusable:_,edgesFocusable:b,edgesUpdatable:w,elevateNodesOnSelect:S,minZoom:M,maxZoom:C,nodeExtent:L,onNodesChange:B,onEdgesChange:G,elementsSelectable:j,connectionMode:J,snapGrid:ee,snapToGrid:O,translateExtent:A,connectOnClick:R,defaultEdgeOptions:z,fitView:U,fitViewOptions:H,onNodesDelete:I,onEdgesDelete:P,onNodeDrag:Y,onNodeDragStart:D,onNodeDragStop:q,onSelectionDrag:W,onSelectionDragStart:Q,onSelectionDragStop:k,noPanClassName:F,nodeOrigin:te,rfId:X,autoPanOnConnect:re,autoPanOnNodeDrag:de,onError:ue,connectionRadius:ye,isValidConnection:_e,nodeDragThreshold:Ae})=>{const{setNodes:Ne,setEdges:nt,setDefaultNodesAndEdges:rt,setMinZoom:Pe,setMaxZoom:$e,setTranslateExtent:Ue,setNodeExtent:Lt,reset:ze}=Tt(H4,Tn),Ee=ln();return $.useEffect(()=>{const At=i?.map(vn=>({...vn,...z}));return rt(n,At),()=>{ze()}},[]),Ge("defaultEdgeOptions",z,Ee.setState),Ge("connectionMode",J,Ee.setState),Ge("onConnect",a,Ee.setState),Ge("onConnectStart",l,Ee.setState),Ge("onConnectEnd",c,Ee.setState),Ge("onClickConnectStart",d,Ee.setState),Ge("onClickConnectEnd",f,Ee.setState),Ge("nodesDraggable",p,Ee.setState),Ge("nodesConnectable",y,Ee.setState),Ge("nodesFocusable",_,Ee.setState),Ge("edgesFocusable",b,Ee.setState),Ge("edgesUpdatable",w,Ee.setState),Ge("elementsSelectable",j,Ee.setState),Ge("elevateNodesOnSelect",S,Ee.setState),Ge("snapToGrid",O,Ee.setState),Ge("snapGrid",ee,Ee.setState),Ge("onNodesChange",B,Ee.setState),Ge("onEdgesChange",G,Ee.setState),Ge("connectOnClick",R,Ee.setState),Ge("fitViewOnInit",U,Ee.setState),Ge("fitViewOnInitOptions",H,Ee.setState),Ge("onNodesDelete",I,Ee.setState),Ge("onEdgesDelete",P,Ee.setState),Ge("onNodeDrag",Y,Ee.setState),Ge("onNodeDragStart",D,Ee.setState),Ge("onNodeDragStop",q,Ee.setState),Ge("onSelectionDrag",W,Ee.setState),Ge("onSelectionDragStart",Q,Ee.setState),Ge("onSelectionDragStop",k,Ee.setState),Ge("noPanClassName",F,Ee.setState),Ge("nodeOrigin",te,Ee.setState),Ge("rfId",X,Ee.setState),Ge("autoPanOnConnect",re,Ee.setState),Ge("autoPanOnNodeDrag",de,Ee.setState),Ge("onError",ue,Ee.setState),Ge("connectionRadius",ye,Ee.setState),Ge("isValidConnection",_e,Ee.setState),Ge("nodeDragThreshold",Ae,Ee.setState),Zo(t,Ne),Zo(e,nt),Zo(M,Pe),Zo(C,$e),Zo(A,Ue),Zo(L,Lt),null},JE={display:"none"},$4={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},fT="react-flow__node-desc",gT="react-flow__edge-desc",F4="react-flow__aria-live",G4=t=>t.ariaLiveMessage;function Y4({rfId:t}){const e=Tt(G4);return he.createElement("div",{id:`${F4}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:$4},e)}function K4({rfId:t,disableKeyboardA11y:e}){return he.createElement(he.Fragment,null,he.createElement("div",{id:`${fT}-${t}`,style:JE},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),he.createElement("div",{id:`${gT}-${t}`,style:JE},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&he.createElement(Y4,{rfId:t}))}var bu=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,i]=$.useState(!1),a=$.useRef(!1),l=$.useRef(new Set([])),[c,d]=$.useMemo(()=>{if(t!==null){const p=(Array.isArray(t)?t:[t]).filter(_=>typeof _=="string").map(_=>_.split("+")),y=p.reduce((_,b)=>_.concat(...b),[]);return[p,y]}return[[],[]]},[t]);return $.useEffect(()=>{const f=typeof document<"u"?document:null,p=e?.target||f;if(t!==null){const y=w=>{if(a.current=w.ctrlKey||w.metaKey||w.shiftKey,(!a.current||a.current&&!e.actInsideInputWithModifier)&&Qm(w))return!1;const M=tw(w.code,d);l.current.add(w[M]),ew(c,l.current,!1)&&(w.preventDefault(),i(!0))},_=w=>{if((!a.current||a.current&&!e.actInsideInputWithModifier)&&Qm(w))return!1;const M=tw(w.code,d);ew(c,l.current,!0)?(i(!1),l.current.clear()):l.current.delete(w[M]),w.key==="Meta"&&l.current.clear(),a.current=!1},b=()=>{l.current.clear(),i(!1)};return p?.addEventListener("keydown",y),p?.addEventListener("keyup",_),window.addEventListener("blur",b),()=>{p?.removeEventListener("keydown",y),p?.removeEventListener("keyup",_),window.removeEventListener("blur",b)}}},[t,i]),n};function ew(t,e,n){return t.filter(i=>n||i.length===e.size).some(i=>i.every(a=>e.has(a)))}function tw(t,e){return e.includes(t)?"code":"key"}function pT(t,e,n,i){const a=t.parentNode||t.parentId;if(!a)return n;const l=e.get(a),c=pl(l,i);return pT(l,e,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(l[kt]?.z??0)>(n.z??0)?l[kt]?.z??0:n.z??0},i)}function mT(t,e,n){t.forEach(i=>{const a=i.parentNode||i.parentId;if(a&&!t.has(a))throw new Error(`Parent node ${a} not found`);if(a||n?.[i.id]){const{x:l,y:c,z:d}=pT(i,t,{...i.position,z:i[kt]?.z??0},e);i.positionAbsolute={x:l,y:c},i[kt].z=d,n?.[i.id]&&(i[kt].isParent=!0)}})}function _m(t,e,n,i){const a=new Map,l={},c=i?1e3:0;return t.forEach(d=>{const f=(Rr(d.zIndex)?d.zIndex:0)+(d.selected?c:0),p=e.get(d.id),y={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},_=d.parentNode||d.parentId;_&&(l[_]=!0);const b=p?.type&&p?.type!==d.type;Object.defineProperty(y,kt,{enumerable:!1,value:{handleBounds:b?void 0:p?.[kt]?.handleBounds,z:f}}),a.set(d.id,y)}),mT(a,n,l),a}function yT(t,e={}){const{getNodes:n,width:i,height:a,minZoom:l,maxZoom:c,d3Zoom:d,d3Selection:f,fitViewOnInitDone:p,fitViewOnInit:y,nodeOrigin:_}=t(),b=e.initial&&!p&&y;if(d&&f&&(b||!e.initial)){const S=n().filter(C=>{const L=e.includeHiddenNodes?C.width&&C.height:!C.hidden;return e.nodes?.length?L&&e.nodes.some(B=>B.id===C.id):L}),M=S.every(C=>C.width&&C.height);if(S.length>0&&M){const C=G0(S,_),{x:L,y:B,zoom:G}=nT(C,i,a,e.minZoom??l,e.maxZoom??c,e.padding??.1),j=qs.translate(L,B).scale(G);return typeof e.duration=="number"&&e.duration>0?d.transform(Ua(f,e.duration),j):d.transform(f,j),!0}}return!1}function X4(t,e){return t.forEach(n=>{const i=e.get(n.id);i&&e.set(i.id,{...i,[kt]:i[kt],selected:n.selected})}),new Map(e)}function Q4(t,e){return e.map(n=>{const i=t.find(a=>a.id===n.id);return i&&(n.selected=i.selected),n})}function yh({changedNodes:t,changedEdges:e,get:n,set:i}){const{nodeInternals:a,edges:l,onNodesChange:c,onEdgesChange:d,hasDefaultNodes:f,hasDefaultEdges:p}=n();t?.length&&(f&&i({nodeInternals:X4(t,a)}),c?.(t)),e?.length&&(p&&i({edges:Q4(e,l)}),d?.(e))}const Jo=()=>{},W4={zoomIn:Jo,zoomOut:Jo,zoomTo:Jo,getZoom:()=>1,setViewport:Jo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Jo,fitBounds:Jo,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},Z4=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),J4=()=>{const t=ln(),{d3Zoom:e,d3Selection:n}=Tt(Z4,Tn);return $.useMemo(()=>n&&e?{zoomIn:a=>e.scaleBy(Ua(n,a?.duration),1.2),zoomOut:a=>e.scaleBy(Ua(n,a?.duration),1/1.2),zoomTo:(a,l)=>e.scaleTo(Ua(n,l?.duration),a),getZoom:()=>t.getState().transform[2],setViewport:(a,l)=>{const[c,d,f]=t.getState().transform,p=qs.translate(a.x??c,a.y??d).scale(a.zoom??f);e.transform(Ua(n,l?.duration),p)},getViewport:()=>{const[a,l,c]=t.getState().transform;return{x:a,y:l,zoom:c}},fitView:a=>yT(t.getState,a),setCenter:(a,l,c)=>{const{width:d,height:f,maxZoom:p}=t.getState(),y=typeof c?.zoom<"u"?c.zoom:p,_=d/2-a*y,b=f/2-l*y,w=qs.translate(_,b).scale(y);e.transform(Ua(n,c?.duration),w)},fitBounds:(a,l)=>{const{width:c,height:d,minZoom:f,maxZoom:p}=t.getState(),{x:y,y:_,zoom:b}=nT(a,c,d,f,p,l?.padding??.1),w=qs.translate(y,_).scale(b);e.transform(Ua(n,l?.duration),w)},project:a=>{const{transform:l,snapToGrid:c,snapGrid:d}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Jm(a,l,c,d)},screenToFlowPosition:a=>{const{transform:l,snapToGrid:c,snapGrid:d,domNode:f}=t.getState();if(!f)return a;const{x:p,y}=f.getBoundingClientRect(),_={x:a.x-p,y:a.y-y};return Jm(_,l,c,d)},flowToScreenPosition:a=>{const{transform:l,domNode:c}=t.getState();if(!c)return a;const{x:d,y:f}=c.getBoundingClientRect(),p=J1(a,l);return{x:p.x+d,y:p.y+f}},viewportInitialized:!0}:W4,[e,n])};function Of(){const t=J4(),e=ln(),n=$.useCallback(()=>e.getState().getNodes().map(M=>({...M})),[]),i=$.useCallback(M=>e.getState().nodeInternals.get(M),[]),a=$.useCallback(()=>{const{edges:M=[]}=e.getState();return M.map(C=>({...C}))},[]),l=$.useCallback(M=>{const{edges:C=[]}=e.getState();return C.find(L=>L.id===M)},[]),c=$.useCallback(M=>{const{getNodes:C,setNodes:L,hasDefaultNodes:B,onNodesChange:G}=e.getState(),j=C(),J=typeof M=="function"?M(j):M;if(B)L(J);else if(G){const ee=J.length===0?j.map(O=>({type:"remove",id:O.id})):J.map(O=>({item:O,type:"reset"}));G(ee)}},[]),d=$.useCallback(M=>{const{edges:C=[],setEdges:L,hasDefaultEdges:B,onEdgesChange:G}=e.getState(),j=typeof M=="function"?M(C):M;if(B)L(j);else if(G){const J=j.length===0?C.map(ee=>({type:"remove",id:ee.id})):j.map(ee=>({item:ee,type:"reset"}));G(J)}},[]),f=$.useCallback(M=>{const C=Array.isArray(M)?M:[M],{getNodes:L,setNodes:B,hasDefaultNodes:G,onNodesChange:j}=e.getState();if(G){const ee=[...L(),...C];B(ee)}else if(j){const J=C.map(ee=>({item:ee,type:"add"}));j(J)}},[]),p=$.useCallback(M=>{const C=Array.isArray(M)?M:[M],{edges:L=[],setEdges:B,hasDefaultEdges:G,onEdgesChange:j}=e.getState();if(G)B([...L,...C]);else if(j){const J=C.map(ee=>({item:ee,type:"add"}));j(J)}},[]),y=$.useCallback(()=>{const{getNodes:M,edges:C=[],transform:L}=e.getState(),[B,G,j]=L;return{nodes:M().map(J=>({...J})),edges:C.map(J=>({...J})),viewport:{x:B,y:G,zoom:j}}},[]),_=$.useCallback(({nodes:M,edges:C})=>{const{nodeInternals:L,getNodes:B,edges:G,hasDefaultNodes:j,hasDefaultEdges:J,onNodesDelete:ee,onEdgesDelete:O,onNodesChange:A,onEdgesChange:R}=e.getState(),z=(M||[]).map(Y=>Y.id),U=(C||[]).map(Y=>Y.id),H=B().reduce((Y,D)=>{const q=D.parentNode||D.parentId,W=!z.includes(D.id)&&q&&Y.find(k=>k.id===q);return(typeof D.deletable=="boolean"?D.deletable:!0)&&(z.includes(D.id)||W)&&Y.push(D),Y},[]),I=G.filter(Y=>typeof Y.deletable=="boolean"?Y.deletable:!0),P=I.filter(Y=>U.includes(Y.id));if(H||P){const Y=tT(H,I),D=[...P,...Y],q=D.reduce((W,Q)=>(W.includes(Q.id)||W.push(Q.id),W),[]);if((J||j)&&(J&&e.setState({edges:G.filter(W=>!q.includes(W.id))}),j&&(H.forEach(W=>{L.delete(W.id)}),e.setState({nodeInternals:new Map(L)}))),q.length>0&&(O?.(D),R&&R(q.map(W=>({id:W,type:"remove"})))),H.length>0&&(ee?.(H),A)){const W=H.map(Q=>({id:Q.id,type:"remove"}));A(W)}}},[]),b=$.useCallback(M=>{const C=_4(M),L=C?null:e.getState().nodeInternals.get(M.id);return!C&&!L?[null,null,C]:[C?M:GE(L),L,C]},[]),w=$.useCallback((M,C=!0,L)=>{const[B,G,j]=b(M);return B?(L||e.getState().getNodes()).filter(J=>{if(!j&&(J.id===G.id||!J.positionAbsolute))return!1;const ee=GE(J),O=Xm(ee,B);return C&&O>0||O>=B.width*B.height}):[]},[]),S=$.useCallback((M,C,L=!0)=>{const[B]=b(M);if(!B)return!1;const G=Xm(B,C);return L&&G>0||G>=B.width*B.height},[]);return $.useMemo(()=>({...t,getNodes:n,getNode:i,getEdges:a,getEdge:l,setNodes:c,setEdges:d,addNodes:f,addEdges:p,toObject:y,deleteElements:_,getIntersectingNodes:w,isNodeIntersecting:S}),[t,n,i,a,l,c,d,f,p,y,_,w,S])}const eD={actInsideInputWithModifier:!1};var tD=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=ln(),{deleteElements:i}=Of(),a=bu(t,eD),l=bu(e);$.useEffect(()=>{if(a){const{edges:c,getNodes:d}=n.getState(),f=d().filter(y=>y.selected),p=c.filter(y=>y.selected);i({nodes:f,edges:p}),n.setState({nodesSelectionActive:!1})}},[a]),$.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])};function nD(t){const e=ln();$.useEffect(()=>{let n;const i=()=>{if(!t.current)return;const a=U0(t.current);(a.height===0||a.width===0)&&e.getState().onError?.("004",es.error004()),e.setState({width:a.width||500,height:a.height||500})};return i(),window.addEventListener("resize",i),t.current&&(n=new ResizeObserver(()=>i()),n.observe(t.current)),()=>{window.removeEventListener("resize",i),n&&t.current&&n.unobserve(t.current)}},[])}const X0={position:"absolute",width:"100%",height:"100%",top:0,left:0},rD=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,vh=t=>({x:t.x,y:t.y,zoom:t.k}),el=(t,e)=>t.target.closest(`.${e}`),nw=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),rw=t=>{const e=t.ctrlKey&&Jh()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},iD=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),sD=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:a=!0,zoomOnPinch:l=!0,panOnScroll:c=!1,panOnScrollSpeed:d=.5,panOnScrollMode:f=Ha.Free,zoomOnDoubleClick:p=!0,elementsSelectable:y,panOnDrag:_=!0,defaultViewport:b,translateExtent:w,minZoom:S,maxZoom:M,zoomActivationKeyCode:C,preventScrolling:L=!0,children:B,noWheelClassName:G,noPanClassName:j})=>{const J=$.useRef(),ee=ln(),O=$.useRef(!1),A=$.useRef(!1),R=$.useRef(null),z=$.useRef({x:0,y:0,zoom:0}),{d3Zoom:U,d3Selection:H,d3ZoomHandler:I,userSelectionActive:P}=Tt(iD,Tn),Y=bu(C),D=$.useRef(0),q=$.useRef(!1),W=$.useRef();return nD(R),$.useEffect(()=>{if(R.current){const Q=R.current.getBoundingClientRect(),k=d4().scaleExtent([S,M]).translateExtent(w),F=Lr(R.current).call(k),te=qs.translate(b.x,b.y).scale(Sl(b.zoom,S,M)),X=[[0,0],[Q.width,Q.height]],re=k.constrain()(te,X,w);k.transform(F,re),k.wheelDelta(rw),ee.setState({d3Zoom:k,d3Selection:F,d3ZoomHandler:F.on("wheel.zoom"),transform:[re.x,re.y,re.k],domNode:R.current.closest(".react-flow")})}},[]),$.useEffect(()=>{H&&U&&(c&&!Y&&!P?H.on("wheel.zoom",Q=>{if(el(Q,G))return!1;Q.preventDefault(),Q.stopImmediatePropagation();const k=H.property("__zoom").k||1;if(Q.ctrlKey&&l){const _e=hi(Q),Ae=rw(Q),Ne=k*Math.pow(2,Ae);U.scaleTo(H,Ne,_e,Q);return}const F=Q.deltaMode===1?20:1;let te=f===Ha.Vertical?0:Q.deltaX*F,X=f===Ha.Horizontal?0:Q.deltaY*F;!Jh()&&Q.shiftKey&&f!==Ha.Vertical&&(te=Q.deltaY*F,X=0),U.translateBy(H,-(te/k)*d,-(X/k)*d,{internal:!0});const re=vh(H.property("__zoom")),{onViewportChangeStart:de,onViewportChange:ue,onViewportChangeEnd:ye}=ee.getState();clearTimeout(W.current),q.current||(q.current=!0,e?.(Q,re),de?.(re)),q.current&&(t?.(Q,re),ue?.(re),W.current=setTimeout(()=>{n?.(Q,re),ye?.(re),q.current=!1},150))},{passive:!1}):typeof I<"u"&&H.on("wheel.zoom",function(Q,k){if(!L&&Q.type==="wheel"&&!Q.ctrlKey||el(Q,G))return null;Q.preventDefault(),I.call(this,Q,k)},{passive:!1}))},[P,c,f,H,U,I,Y,l,L,G,e,t,n]),$.useEffect(()=>{U&&U.on("start",Q=>{if(!Q.sourceEvent||Q.sourceEvent.internal)return null;D.current=Q.sourceEvent?.button;const{onViewportChangeStart:k}=ee.getState(),F=vh(Q.transform);O.current=!0,z.current=F,Q.sourceEvent?.type==="mousedown"&&ee.setState({paneDragging:!0}),k?.(F),e?.(Q.sourceEvent,F)})},[U,e]),$.useEffect(()=>{U&&(P&&!O.current?U.on("zoom",null):P||U.on("zoom",Q=>{const{onViewportChange:k}=ee.getState();if(ee.setState({transform:[Q.transform.x,Q.transform.y,Q.transform.k]}),A.current=!!(i&&nw(_,D.current??0)),(t||k)&&!Q.sourceEvent?.internal){const F=vh(Q.transform);k?.(F),t?.(Q.sourceEvent,F)}}))},[P,U,t,_,i]),$.useEffect(()=>{U&&U.on("end",Q=>{if(!Q.sourceEvent||Q.sourceEvent.internal)return null;const{onViewportChangeEnd:k}=ee.getState();if(O.current=!1,ee.setState({paneDragging:!1}),i&&nw(_,D.current??0)&&!A.current&&i(Q.sourceEvent),A.current=!1,(n||k)&&rD(z.current,Q.transform)){const F=vh(Q.transform);z.current=F,clearTimeout(J.current),J.current=setTimeout(()=>{k?.(F),n?.(Q.sourceEvent,F)},c?150:0)}})},[U,c,_,n,i]),$.useEffect(()=>{U&&U.filter(Q=>{const k=Y||a,F=l&&Q.ctrlKey;if((_===!0||Array.isArray(_)&&_.includes(1))&&Q.button===1&&Q.type==="mousedown"&&(el(Q,"react-flow__node")||el(Q,"react-flow__edge")))return!0;if(!_&&!k&&!c&&!p&&!l||P||!p&&Q.type==="dblclick"||el(Q,G)&&Q.type==="wheel"||el(Q,j)&&(Q.type!=="wheel"||c&&Q.type==="wheel"&&!Y)||!l&&Q.ctrlKey&&Q.type==="wheel"||!k&&!c&&!F&&Q.type==="wheel"||!_&&(Q.type==="mousedown"||Q.type==="touchstart")||Array.isArray(_)&&!_.includes(Q.button)&&Q.type==="mousedown")return!1;const te=Array.isArray(_)&&_.includes(Q.button)||!Q.button||Q.button<=1;return(!Q.ctrlKey||Q.type==="wheel")&&te})},[P,U,a,l,c,p,_,y,Y]),he.createElement("div",{className:"react-flow__renderer",ref:R,style:X0},B)},aD=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function oD(){const{userSelectionActive:t,userSelectionRect:e}=Tt(aD,Tn);return t&&e?he.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function iw(t,e){const n=e.parentNode||e.parentId,i=t.find(a=>a.id===n);if(i){const a=e.position.x+e.width-i.width,l=e.position.y+e.height-i.height;if(a>0||l>0||e.position.x<0||e.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,a>0&&(i.style.width+=a),l>0&&(i.style.height+=l),e.position.x<0){const c=Math.abs(e.position.x);i.position.x=i.position.x-c,i.style.width+=c,e.position.x=0}if(e.position.y<0){const c=Math.abs(e.position.y);i.position.y=i.position.y-c,i.style.height+=c,e.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function vT(t,e){if(t.some(i=>i.type==="reset"))return t.filter(i=>i.type==="reset").map(i=>i.item);const n=t.filter(i=>i.type==="add").map(i=>i.item);return e.reduce((i,a)=>{const l=t.filter(d=>d.id===a.id);if(l.length===0)return i.push(a),i;const c={...a};for(const d of l)if(d)switch(d.type){case"select":{c.selected=d.selected;break}case"position":{typeof d.position<"u"&&(c.position=d.position),typeof d.positionAbsolute<"u"&&(c.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(c.dragging=d.dragging),c.expandParent&&iw(i,c);break}case"dimensions":{typeof d.dimensions<"u"&&(c.width=d.dimensions.width,c.height=d.dimensions.height),typeof d.updateStyle<"u"&&(c.style={...c.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(c.resizing=d.resizing),c.expandParent&&iw(i,c);break}case"remove":return i}return i.push(c),i},n)}function _T(t,e){return vT(t,e)}function lD(t,e){return vT(t,e)}const Os=(t,e)=>({id:t,type:"select",selected:e});function ul(t,e){return t.reduce((n,i)=>{const a=e.includes(i.id);return!i.selected&&a?(i.selected=!0,n.push(Os(i.id,!0))):i.selected&&!a&&(i.selected=!1,n.push(Os(i.id,!1))),n},[])}const bm=(t,e)=>n=>{n.target===e.current&&t?.(n)},cD=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),bT=$.memo(({isSelecting:t,selectionMode:e=_u.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:f,onPaneMouseMove:p,onPaneMouseLeave:y,children:_})=>{const b=$.useRef(null),w=ln(),S=$.useRef(0),M=$.useRef(0),C=$.useRef(),{userSelectionActive:L,elementsSelectable:B,dragging:G}=Tt(cD,Tn),j=()=>{w.setState({userSelectionActive:!1,userSelectionRect:null}),S.current=0,M.current=0},J=I=>{l?.(I),w.getState().resetSelectedElements(),w.setState({nodesSelectionActive:!1})},ee=I=>{if(Array.isArray(n)&&n?.includes(2)){I.preventDefault();return}c?.(I)},O=d?I=>d(I):void 0,A=I=>{const{resetSelectedElements:P,domNode:Y}=w.getState();if(C.current=Y?.getBoundingClientRect(),!B||!t||I.button!==0||I.target!==b.current||!C.current)return;const{x:D,y:q}=$s(I,C.current);P(),w.setState({userSelectionRect:{width:0,height:0,startX:D,startY:q,x:D,y:q}}),i?.(I)},R=I=>{const{userSelectionRect:P,nodeInternals:Y,edges:D,transform:q,onNodesChange:W,onEdgesChange:Q,nodeOrigin:k,getNodes:F}=w.getState();if(!t||!C.current||!P)return;w.setState({userSelectionActive:!0,nodesSelectionActive:!1});const te=$s(I,C.current),X=P.startX??0,re=P.startY??0,de={...P,x:te.x<X?te.x:X,y:te.y<re?te.y:re,width:Math.abs(te.x-X),height:Math.abs(te.y-re)},ue=F(),ye=eT(Y,de,q,e===_u.Partial,!0,k),_e=tT(ye,D).map(Ne=>Ne.id),Ae=ye.map(Ne=>Ne.id);if(S.current!==Ae.length){S.current=Ae.length;const Ne=ul(ue,Ae);Ne.length&&W?.(Ne)}if(M.current!==_e.length){M.current=_e.length;const Ne=ul(D,_e);Ne.length&&Q?.(Ne)}w.setState({userSelectionRect:de})},z=I=>{if(I.button!==0)return;const{userSelectionRect:P}=w.getState();!L&&P&&I.target===b.current&&J?.(I),w.setState({nodesSelectionActive:S.current>0}),j(),a?.(I)},U=I=>{L&&(w.setState({nodesSelectionActive:S.current>0}),a?.(I)),j()},H=B&&(t||L);return he.createElement("div",{className:Vn(["react-flow__pane",{dragging:G,selection:t}]),onClick:H?void 0:bm(J,b),onContextMenu:bm(ee,b),onWheel:bm(O,b),onMouseEnter:H?void 0:f,onMouseDown:H?A:void 0,onMouseMove:H?R:p,onMouseUp:H?z:void 0,onMouseLeave:H?U:y,ref:b,style:X0},_,he.createElement(oD,null))});bT.displayName="Pane";function ET(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const i=e.get(n);return i?i.selected?!0:ET(i,e):!1}function sw(t,e,n){let i=t;do{if(i?.matches(e))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function uD(t,e,n,i){return Array.from(t.values()).filter(a=>(a.selected||a.id===i)&&(!a.parentNode||a.parentId||!ET(a,t))&&(a.draggable||e&&typeof a.draggable>"u")).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(a.positionAbsolute?.x??0),y:n.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}))}function dD(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function wT(t,e,n,i,a=[0,0],l){const c=dD(t,t.extent||i);let d=c;const f=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(f&&t.width&&t.height){const _=n.get(f),{x:b,y:w}=pl(_,a).positionAbsolute;d=_&&Rr(b)&&Rr(w)&&Rr(_.width)&&Rr(_.height)?[[b+t.width*a[0],w+t.height*a[1]],[b+_.width-t.width+t.width*a[0],w+_.height-t.height+t.height*a[1]]]:d}else l?.("005",es.error005()),d=c;else if(t.extent&&f&&t.extent!=="parent"){const _=n.get(f),{x:b,y:w}=pl(_,a).positionAbsolute;d=[[t.extent[0][0]+b,t.extent[0][1]+w],[t.extent[1][0]+b,t.extent[1][1]+w]]}let p={x:0,y:0};if(f){const _=n.get(f);p=pl(_,a).positionAbsolute}const y=d&&d!=="parent"?j0(e,d):e;return{position:{x:y.x-p.x,y:y.y-p.y},positionAbsolute:y}}function Em({nodeId:t,dragItems:e,nodeInternals:n}){const i=e.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[t?i.find(a=>a.id===t):i[0],i]}const aw=(t,e,n,i)=>{const a=e.querySelectorAll(t);if(!a||!a.length)return null;const l=Array.from(a),c=e.getBoundingClientRect(),d={x:c.width*i[0],y:c.height*i[1]};return l.map(f=>{const p=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),position:f.getAttribute("data-handlepos"),x:(p.left-c.left-d.x)/n,y:(p.top-c.top-d.y)/n,...U0(f)}})};function Gc(t,e,n){return n===void 0?n:i=>{const a=e().nodeInternals.get(t);a&&n(i,{...a})}}function t0({id:t,store:e,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeInternals:d,onError:f}=e.getState(),p=d.get(t);if(!p){f?.("012",es.error012(t));return}e.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&c)&&(l({nodes:[p],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):a([t])}function hD(){const t=ln();return $.useCallback(({sourceEvent:n})=>{const{transform:i,snapGrid:a,snapToGrid:l}=t.getState(),c=n.touches?n.touches[0].clientX:n.clientX,d=n.touches?n.touches[0].clientY:n.clientY,f={x:(c-i[0])/i[2],y:(d-i[1])/i[2]};return{xSnapped:l?a[0]*Math.round(f.x/a[0]):f.x,ySnapped:l?a[1]*Math.round(f.y/a[1]):f.y,...f}},[])}function wm(t){return(e,n,i)=>t?.(e,i)}function xT({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:i,nodeId:a,isSelectable:l,selectNodesOnDrag:c}){const d=ln(),[f,p]=$.useState(!1),y=$.useRef([]),_=$.useRef({x:null,y:null}),b=$.useRef(0),w=$.useRef(null),S=$.useRef({x:0,y:0}),M=$.useRef(null),C=$.useRef(!1),L=$.useRef(!1),B=$.useRef(!1),G=hD();return $.useEffect(()=>{if(t?.current){const j=Lr(t.current),J=({x:A,y:R})=>{const{nodeInternals:z,onNodeDrag:U,onSelectionDrag:H,updateNodePositions:I,nodeExtent:P,snapGrid:Y,snapToGrid:D,nodeOrigin:q,onError:W}=d.getState();_.current={x:A,y:R};let Q=!1,k={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&P){const te=G0(y.current,q);k=B0(te)}if(y.current=y.current.map(te=>{const X={x:A-te.distance.x,y:R-te.distance.y};D&&(X.x=Y[0]*Math.round(X.x/Y[0]),X.y=Y[1]*Math.round(X.y/Y[1]));const re=[[P[0][0],P[0][1]],[P[1][0],P[1][1]]];y.current.length>1&&P&&!te.extent&&(re[0][0]=te.positionAbsolute.x-k.x+P[0][0],re[1][0]=te.positionAbsolute.x+(te.width??0)-k.x2+P[1][0],re[0][1]=te.positionAbsolute.y-k.y+P[0][1],re[1][1]=te.positionAbsolute.y+(te.height??0)-k.y2+P[1][1]);const de=wT(te,X,z,re,q,W);return Q=Q||te.position.x!==de.position.x||te.position.y!==de.position.y,te.position=de.position,te.positionAbsolute=de.positionAbsolute,te}),!Q)return;I(y.current,!0,!0),p(!0);const F=a?U:wm(H);if(F&&M.current){const[te,X]=Em({nodeId:a,dragItems:y.current,nodeInternals:z});F(M.current,te,X)}},ee=()=>{if(!w.current)return;const[A,R]=F1(S.current,w.current);if(A!==0||R!==0){const{transform:z,panBy:U}=d.getState();_.current.x=(_.current.x??0)-A/z[2],_.current.y=(_.current.y??0)-R/z[2],U({x:A,y:R})&&J(_.current)}b.current=requestAnimationFrame(ee)},O=A=>{const{nodeInternals:R,multiSelectionActive:z,nodesDraggable:U,unselectNodesAndEdges:H,onNodeDragStart:I,onSelectionDragStart:P}=d.getState();L.current=!0;const Y=a?I:wm(P);(!c||!l)&&!z&&a&&(R.get(a)?.selected||H()),a&&l&&c&&t0({id:a,store:d,nodeRef:t});const D=G(A);if(_.current=D,y.current=uD(R,U,D,a),Y&&y.current){const[q,W]=Em({nodeId:a,dragItems:y.current,nodeInternals:R});Y(A.sourceEvent,q,W)}};if(e)j.on(".drag",null);else{const A=EI().on("start",R=>{const{domNode:z,nodeDragThreshold:U}=d.getState();U===0&&O(R),B.current=!1;const H=G(R);_.current=H,w.current=z?.getBoundingClientRect()||null,S.current=$s(R.sourceEvent,w.current)}).on("drag",R=>{const z=G(R),{autoPanOnNodeDrag:U,nodeDragThreshold:H}=d.getState();if(R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1&&(B.current=!0),!B.current){if(!C.current&&L.current&&U&&(C.current=!0,ee()),!L.current){const I=z.xSnapped-(_?.current?.x??0),P=z.ySnapped-(_?.current?.y??0);Math.sqrt(I*I+P*P)>H&&O(R)}(_.current.x!==z.xSnapped||_.current.y!==z.ySnapped)&&y.current&&L.current&&(M.current=R.sourceEvent,S.current=$s(R.sourceEvent,w.current),J(z))}}).on("end",R=>{if(!(!L.current||B.current)&&(p(!1),C.current=!1,L.current=!1,cancelAnimationFrame(b.current),y.current)){const{updateNodePositions:z,nodeInternals:U,onNodeDragStop:H,onSelectionDragStop:I}=d.getState(),P=a?H:wm(I);if(z(y.current,!1,!1),P){const[Y,D]=Em({nodeId:a,dragItems:y.current,nodeInternals:U});P(R.sourceEvent,Y,D)}}}).filter(R=>{const z=R.target;return!R.button&&(!n||!sw(z,`.${n}`,t))&&(!i||sw(z,i,t))});return j.call(A),()=>{j.on(".drag",null)}}}},[t,e,n,i,l,d,a,c,G]),f}function TT(){const t=ln();return $.useCallback(n=>{const{nodeInternals:i,nodeExtent:a,updateNodePositions:l,getNodes:c,snapToGrid:d,snapGrid:f,onError:p,nodesDraggable:y}=t.getState(),_=c().filter(B=>B.selected&&(B.draggable||y&&typeof B.draggable>"u")),b=d?f[0]:5,w=d?f[1]:5,S=n.isShiftPressed?4:1,M=n.x*b*S,C=n.y*w*S,L=_.map(B=>{if(B.positionAbsolute){const G={x:B.positionAbsolute.x+M,y:B.positionAbsolute.y+C};d&&(G.x=f[0]*Math.round(G.x/f[0]),G.y=f[1]*Math.round(G.y/f[1]));const{positionAbsolute:j,position:J}=wT(B,G,i,a,void 0,p);B.position=J,B.positionAbsolute=j}return B});l(L,!0,!1)},[])}const ml={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Yc=t=>{const e=({id:n,type:i,data:a,xPos:l,yPos:c,xPosOrigin:d,yPosOrigin:f,selected:p,onClick:y,onMouseEnter:_,onMouseMove:b,onMouseLeave:w,onContextMenu:S,onDoubleClick:M,style:C,className:L,isDraggable:B,isSelectable:G,isConnectable:j,isFocusable:J,selectNodesOnDrag:ee,sourcePosition:O,targetPosition:A,hidden:R,resizeObserver:z,dragHandle:U,zIndex:H,isParent:I,noDragClassName:P,noPanClassName:Y,initialized:D,disableKeyboardA11y:q,ariaLabel:W,rfId:Q,hasHandleBounds:k})=>{const F=ln(),te=$.useRef(null),X=$.useRef(null),re=$.useRef(O),de=$.useRef(A),ue=$.useRef(i),ye=G||B||y||_||b||w,_e=TT(),Ae=Gc(n,F.getState,_),Ne=Gc(n,F.getState,b),nt=Gc(n,F.getState,w),rt=Gc(n,F.getState,S),Pe=Gc(n,F.getState,M),$e=ze=>{const{nodeDragThreshold:Ee}=F.getState();if(G&&(!ee||!B||Ee>0)&&t0({id:n,store:F,nodeRef:te}),y){const At=F.getState().nodeInternals.get(n);At&&y(ze,{...At})}},Ue=ze=>{if(!Qm(ze)&&!q)if(Y1.includes(ze.key)&&G){const Ee=ze.key==="Escape";t0({id:n,store:F,unselect:Ee,nodeRef:te})}else B&&p&&Object.prototype.hasOwnProperty.call(ml,ze.key)&&(F.setState({ariaLiveMessage:`Moved selected node ${ze.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~c}`}),_e({x:ml[ze.key].x,y:ml[ze.key].y,isShiftPressed:ze.shiftKey}))};$.useEffect(()=>()=>{X.current&&(z?.unobserve(X.current),X.current=null)},[]),$.useEffect(()=>{if(te.current&&!R){const ze=te.current;(!D||!k||X.current!==ze)&&(X.current&&z?.unobserve(X.current),z?.observe(ze),X.current=ze)}},[R,D,k]),$.useEffect(()=>{const ze=ue.current!==i,Ee=re.current!==O,At=de.current!==A;te.current&&(ze||Ee||At)&&(ze&&(ue.current=i),Ee&&(re.current=O),At&&(de.current=A),F.getState().updateNodeDimensions([{id:n,nodeElement:te.current,forceUpdate:!0}]))},[n,i,O,A]);const Lt=xT({nodeRef:te,disabled:R||!B,noDragClassName:P,handleSelector:U,nodeId:n,isSelectable:G,selectNodesOnDrag:ee});return R?null:he.createElement("div",{className:Vn(["react-flow__node",`react-flow__node-${i}`,{[Y]:B},L,{selected:p,selectable:G,parent:I,dragging:Lt}]),ref:te,style:{zIndex:H,transform:`translate(${d}px,${f}px)`,pointerEvents:ye?"all":"none",visibility:D?"visible":"hidden",...C},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ae,onMouseMove:Ne,onMouseLeave:nt,onContextMenu:rt,onClick:$e,onDoubleClick:Pe,onKeyDown:J?Ue:void 0,tabIndex:J?0:void 0,role:J?"button":void 0,"aria-describedby":q?void 0:`${fT}-${Q}`,"aria-label":W},he.createElement(A4,{value:n},he.createElement(t,{id:n,data:a,type:i,xPos:l,yPos:c,selected:p,isConnectable:j,sourcePosition:O,targetPosition:A,dragging:Lt,dragHandle:U,zIndex:H})))};return e.displayName="NodeWrapper",$.memo(e)};const fD=t=>{const e=t.getNodes().filter(n=>n.selected);return{...G0(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function gD({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const i=ln(),{width:a,height:l,x:c,y:d,transformString:f,userSelectionActive:p}=Tt(fD,Tn),y=TT(),_=$.useRef(null);if($.useEffect(()=>{n||_.current?.focus({preventScroll:!0})},[n]),xT({nodeRef:_}),p||!a||!l)return null;const b=t?S=>{const M=i.getState().getNodes().filter(C=>C.selected);t(S,M)}:void 0,w=S=>{Object.prototype.hasOwnProperty.call(ml,S.key)&&y({x:ml[S.key].x,y:ml[S.key].y,isShiftPressed:S.shiftKey})};return he.createElement("div",{className:Vn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:f}},he.createElement("div",{ref:_,className:"react-flow__nodesselection-rect",onContextMenu:b,tabIndex:n?void 0:-1,onKeyDown:n?void 0:w,style:{width:a,height:l,top:d,left:c}}))}var pD=$.memo(gD);const mD=t=>t.nodesSelectionActive,ST=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,deleteKeyCode:d,onMove:f,onMoveStart:p,onMoveEnd:y,selectionKeyCode:_,selectionOnDrag:b,selectionMode:w,onSelectionStart:S,onSelectionEnd:M,multiSelectionKeyCode:C,panActivationKeyCode:L,zoomActivationKeyCode:B,elementsSelectable:G,zoomOnScroll:j,zoomOnPinch:J,panOnScroll:ee,panOnScrollSpeed:O,panOnScrollMode:A,zoomOnDoubleClick:R,panOnDrag:z,defaultViewport:U,translateExtent:H,minZoom:I,maxZoom:P,preventScrolling:Y,onSelectionContextMenu:D,noWheelClassName:q,noPanClassName:W,disableKeyboardA11y:Q})=>{const k=Tt(mD),F=bu(_),te=bu(L),X=te||z,re=te||ee,de=F||b&&X!==!0;return tD({deleteKeyCode:d,multiSelectionKeyCode:C}),he.createElement(sD,{onMove:f,onMoveStart:p,onMoveEnd:y,onPaneContextMenu:l,elementsSelectable:G,zoomOnScroll:j,zoomOnPinch:J,panOnScroll:re,panOnScrollSpeed:O,panOnScrollMode:A,zoomOnDoubleClick:R,panOnDrag:!F&&X,defaultViewport:U,translateExtent:H,minZoom:I,maxZoom:P,zoomActivationKeyCode:B,preventScrolling:Y,noWheelClassName:q,noPanClassName:W},he.createElement(bT,{onSelectionStart:S,onSelectionEnd:M,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:X,isSelecting:!!de,selectionMode:w},t,k&&he.createElement(pD,{onSelectionContextMenu:D,noPanClassName:W,disableKeyboardA11y:Q})))};ST.displayName="FlowRenderer";var yD=$.memo(ST);function vD(t){return Tt($.useCallback(n=>t?eT(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function _D(t){const e={input:Yc(t.input||cT),default:Yc(t.default||e0),output:Yc(t.output||dT),group:Yc(t.group||K0)},n={},i=Object.keys(t).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,l)=>(a[l]=Yc(t[l]||e0),a),n);return{...e,...i}}const bD=({x:t,y:e,width:n,height:i,origin:a})=>!n||!i?{x:t,y:e}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:t,y:e}:{x:t-n*a[0],y:e-i*a[1]},ED=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),AT=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,updateNodeDimensions:l,onError:c}=Tt(ED,Tn),d=vD(t.onlyRenderVisibleElements),f=$.useRef(),p=$.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(_=>{const b=_.map(w=>({id:w.target.getAttribute("data-id"),nodeElement:w.target,forceUpdate:!0}));l(b)});return f.current=y,y},[]);return $.useEffect(()=>()=>{f?.current?.disconnect()},[]),he.createElement("div",{className:"react-flow__nodes",style:X0},d.map(y=>{let _=y.type||"default";t.nodeTypes[_]||(c?.("003",es.error003(_)),_="default");const b=t.nodeTypes[_]||t.nodeTypes.default,w=!!(y.draggable||e&&typeof y.draggable>"u"),S=!!(y.selectable||a&&typeof y.selectable>"u"),M=!!(y.connectable||n&&typeof y.connectable>"u"),C=!!(y.focusable||i&&typeof y.focusable>"u"),L=t.nodeExtent?j0(y.positionAbsolute,t.nodeExtent):y.positionAbsolute,B=L?.x??0,G=L?.y??0,j=bD({x:B,y:G,width:y.width??0,height:y.height??0,origin:t.nodeOrigin});return he.createElement(b,{key:y.id,id:y.id,className:y.className,style:y.style,type:_,data:y.data,sourcePosition:y.sourcePosition||Te.Bottom,targetPosition:y.targetPosition||Te.Top,hidden:y.hidden,xPos:B,yPos:G,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!y.selected,isDraggable:w,isSelectable:S,isConnectable:M,isFocusable:C,resizeObserver:p,dragHandle:y.dragHandle,zIndex:y[kt]?.z??0,isParent:!!y[kt]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!y.width&&!!y.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[kt]?.handleBounds})}))};AT.displayName="NodeRenderer";var wD=$.memo(AT);const xD=(t,e,n)=>n===Te.Left?t-e:n===Te.Right?t+e:t,TD=(t,e,n)=>n===Te.Top?t-e:n===Te.Bottom?t+e:t,ow="react-flow__edgeupdater",lw=({position:t,centerX:e,centerY:n,radius:i=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d})=>he.createElement("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:Vn([ow,`${ow}-${d}`]),cx:xD(e,i,t),cy:TD(n,i,t),r:i,stroke:"transparent",fill:"transparent"}),SD=()=>!0;var tl=t=>{const e=({id:n,className:i,type:a,data:l,onClick:c,onEdgeDoubleClick:d,selected:f,animated:p,label:y,labelStyle:_,labelShowBg:b,labelBgStyle:w,labelBgPadding:S,labelBgBorderRadius:M,style:C,source:L,target:B,sourceX:G,sourceY:j,targetX:J,targetY:ee,sourcePosition:O,targetPosition:A,elementsSelectable:R,hidden:z,sourceHandleId:U,targetHandleId:H,onContextMenu:I,onMouseEnter:P,onMouseMove:Y,onMouseLeave:D,reconnectRadius:q,onReconnect:W,onReconnectStart:Q,onReconnectEnd:k,markerEnd:F,markerStart:te,rfId:X,ariaLabel:re,isFocusable:de,isReconnectable:ue,pathOptions:ye,interactionWidth:_e,disableKeyboardA11y:Ae})=>{const Ne=$.useRef(null),[nt,rt]=$.useState(!1),[Pe,$e]=$.useState(!1),Ue=ln(),Lt=$.useMemo(()=>`url('#${Zm(te,X)}')`,[te,X]),ze=$.useMemo(()=>`url('#${Zm(F,X)}')`,[F,X]);if(z)return null;const Ee=Ut=>{const{edges:Jt,addSelectedEdges:Nn,unselectNodesAndEdges:Cn,multiSelectionActive:en}=Ue.getState(),cn=Jt.find(In=>In.id===n);cn&&(R&&(Ue.setState({nodesSelectionActive:!1}),cn.selected&&en?(Cn({nodes:[],edges:[cn]}),Ne.current?.blur()):Nn([n])),c&&c(Ut,cn))},At=Fc(n,Ue.getState,d),vn=Fc(n,Ue.getState,I),Gt=Fc(n,Ue.getState,P),Fn=Fc(n,Ue.getState,Y),An=Fc(n,Ue.getState,D),Rn=(Ut,Jt)=>{if(Ut.button!==0)return;const{edges:Nn,isValidConnection:Cn}=Ue.getState(),en=Jt?B:L,cn=(Jt?H:U)||null,In=Jt?"target":"source",xi=Cn||SD,Ti=Jt,Ir=Nn.find(Yn=>Yn.id===n);$e(!0),Q?.(Ut,Ir,In);const Gn=Yn=>{$e(!1),k?.(Yn,Ir,In)};sT({event:Ut,handleId:cn,nodeId:en,onConnect:Yn=>W?.(Ir,Yn),isTarget:Ti,getState:Ue.getState,setState:Ue.setState,isValidConnection:xi,edgeUpdaterType:In,onReconnectEnd:Gn})},Cr=Ut=>Rn(Ut,!0),at=Ut=>Rn(Ut,!1),Ye=()=>rt(!0),zt=()=>rt(!1),Et=!R&&!c,Fr=Ut=>{if(!Ae&&Y1.includes(Ut.key)&&R){const{unselectNodesAndEdges:Jt,addSelectedEdges:Nn,edges:Cn}=Ue.getState();Ut.key==="Escape"?(Ne.current?.blur(),Jt({edges:[Cn.find(cn=>cn.id===n)]})):Nn([n])}};return he.createElement("g",{className:Vn(["react-flow__edge",`react-flow__edge-${a}`,i,{selected:f,animated:p,inactive:Et,updating:nt}]),onClick:Ee,onDoubleClick:At,onContextMenu:vn,onMouseEnter:Gt,onMouseMove:Fn,onMouseLeave:An,onKeyDown:de?Fr:void 0,tabIndex:de?0:void 0,role:de?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":re===null?void 0:re||`Edge from ${L} to ${B}`,"aria-describedby":de?`${gT}-${X}`:void 0,ref:Ne},!Pe&&he.createElement(t,{id:n,source:L,target:B,selected:f,animated:p,label:y,labelStyle:_,labelShowBg:b,labelBgStyle:w,labelBgPadding:S,labelBgBorderRadius:M,data:l,style:C,sourceX:G,sourceY:j,targetX:J,targetY:ee,sourcePosition:O,targetPosition:A,sourceHandleId:U,targetHandleId:H,markerStart:Lt,markerEnd:ze,pathOptions:ye,interactionWidth:_e}),ue&&he.createElement(he.Fragment,null,(ue==="source"||ue===!0)&&he.createElement(lw,{position:O,centerX:G,centerY:j,radius:q,onMouseDown:Cr,onMouseEnter:Ye,onMouseOut:zt,type:"source"}),(ue==="target"||ue===!0)&&he.createElement(lw,{position:A,centerX:J,centerY:ee,radius:q,onMouseDown:at,onMouseEnter:Ye,onMouseOut:zt,type:"target"})))};return e.displayName="EdgeWrapper",$.memo(e)};function AD(t){const e={default:tl(t.default||ef),straight:tl(t.bezier||$0),step:tl(t.step||q0),smoothstep:tl(t.step||Mf),simplebezier:tl(t.simplebezier||H0)},n={},i=Object.keys(t).filter(a=>!["default","bezier"].includes(a)).reduce((a,l)=>(a[l]=tl(t[l]||ef),a),n);return{...e,...i}}function cw(t,e,n=null){const i=(n?.x||0)+e.x,a=(n?.y||0)+e.y,l=n?.width||e.width,c=n?.height||e.height;switch(t){case Te.Top:return{x:i+l/2,y:a};case Te.Right:return{x:i+l,y:a+c/2};case Te.Bottom:return{x:i+l/2,y:a+c};case Te.Left:return{x:i,y:a+c/2}}}function uw(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const RD=(t,e,n,i,a,l)=>{const c=cw(n,t,e),d=cw(l,i,a);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y}};function ND({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:i,targetWidth:a,targetHeight:l,width:c,height:d,transform:f}){const p={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+a),y2:Math.max(t.y+i,e.y+l)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const y=B0({x:(0-f[0])/f[2],y:(0-f[1])/f[2],width:c/f[2],height:d/f[2]}),_=Math.max(0,Math.min(y.x2,p.x2)-Math.max(y.x,p.x)),b=Math.max(0,Math.min(y.y2,p.y2)-Math.max(y.y,p.y));return Math.ceil(_*b)>0}function dw(t){const e=t?.[kt]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const CD=[{level:0,isMaxLevel:!0,edges:[]}];function ID(t,e,n=!1){let i=-1;const a=t.reduce((c,d)=>{const f=Rr(d.zIndex);let p=f?d.zIndex:0;if(n){const y=e.get(d.target),_=e.get(d.source),b=d.selected||y?.selected||_?.selected,w=Math.max(_?.[kt]?.z||0,y?.[kt]?.z||0,1e3);p=(f?d.zIndex:0)+(b?w:0)}return c[p]?c[p].push(d):c[p]=[d],i=p>i?p:i,c},{}),l=Object.entries(a).map(([c,d])=>{const f=+c;return{edges:d,level:f,isMaxLevel:f===i}});return l.length===0?CD:l}function kD(t,e,n){const i=Tt($.useCallback(a=>t?a.edges.filter(l=>{const c=e.get(l.source),d=e.get(l.target);return c?.width&&c?.height&&d?.width&&d?.height&&ND({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:d.width,targetHeight:d.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[t,e]));return ID(i,e,n)}const DD=({color:t="none",strokeWidth:e=1})=>he.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),MD=({color:t="none",strokeWidth:e=1})=>he.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),hw={[Ya.Arrow]:DD,[Ya.ArrowClosed]:MD};function OD(t){const e=ln();return $.useMemo(()=>Object.prototype.hasOwnProperty.call(hw,t)?hw[t]:(e.getState().onError?.("009",es.error009(t)),null),[t])}const PD=({id:t,type:e,color:n,width:i=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const f=OD(e);return f?he.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0"},he.createElement(f,{color:n,strokeWidth:c})):null},VD=({defaultColor:t,rfId:e})=>n=>{const i=[];return n.edges.reduce((a,l)=>([l.markerStart,l.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const d=Zm(c,e);i.includes(d)||(a.push({id:d,color:c.color||t,...c}),i.push(d))}}),a),[]).sort((a,l)=>a.id.localeCompare(l.id))},RT=({defaultColor:t,rfId:e})=>{const n=Tt($.useCallback(VD({defaultColor:t,rfId:e}),[t,e]),(i,a)=>!(i.length!==a.length||i.some((l,c)=>l.id!==a[c].id)));return he.createElement("defs",null,n.map(i=>he.createElement(PD,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};RT.displayName="MarkerDefinitions";var LD=$.memo(RT);const zD=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),NT=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:i,edgeTypes:a,noPanClassName:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:f,onEdgeMouseLeave:p,onEdgeClick:y,onEdgeDoubleClick:_,onReconnect:b,onReconnectStart:w,onReconnectEnd:S,reconnectRadius:M,children:C,disableKeyboardA11y:L})=>{const{edgesFocusable:B,edgesUpdatable:G,elementsSelectable:j,width:J,height:ee,connectionMode:O,nodeInternals:A,onError:R}=Tt(zD,Tn),z=kD(e,A,n);return J?he.createElement(he.Fragment,null,z.map(({level:U,edges:H,isMaxLevel:I})=>he.createElement("svg",{key:U,style:{zIndex:U},width:J,height:ee,className:"react-flow__edges react-flow__container"},I&&he.createElement(LD,{defaultColor:t,rfId:i}),he.createElement("g",null,H.map(P=>{const[Y,D,q]=dw(A.get(P.source)),[W,Q,k]=dw(A.get(P.target));if(!q||!k)return null;let F=P.type||"default";a[F]||(R?.("011",es.error011(F)),F="default");const te=a[F]||a.default,X=O===Qs.Strict?Q.target:(Q.target??[]).concat(Q.source??[]),re=uw(D.source,P.sourceHandle),de=uw(X,P.targetHandle),ue=re?.position||Te.Bottom,ye=de?.position||Te.Top,_e=!!(P.focusable||B&&typeof P.focusable>"u"),Ae=P.reconnectable||P.updatable,Ne=typeof b<"u"&&(Ae||G&&typeof Ae>"u");if(!re||!de)return R?.("008",es.error008(re,P)),null;const{sourceX:nt,sourceY:rt,targetX:Pe,targetY:$e}=RD(Y,re,ue,W,de,ye);return he.createElement(te,{key:P.id,id:P.id,className:Vn([P.className,l]),type:F,data:P.data,selected:!!P.selected,animated:!!P.animated,hidden:!!P.hidden,label:P.label,labelStyle:P.labelStyle,labelShowBg:P.labelShowBg,labelBgStyle:P.labelBgStyle,labelBgPadding:P.labelBgPadding,labelBgBorderRadius:P.labelBgBorderRadius,style:P.style,source:P.source,target:P.target,sourceHandleId:P.sourceHandle,targetHandleId:P.targetHandle,markerEnd:P.markerEnd,markerStart:P.markerStart,sourceX:nt,sourceY:rt,targetX:Pe,targetY:$e,sourcePosition:ue,targetPosition:ye,elementsSelectable:j,onContextMenu:c,onMouseEnter:d,onMouseMove:f,onMouseLeave:p,onClick:y,onEdgeDoubleClick:_,onReconnect:b,onReconnectStart:w,onReconnectEnd:S,reconnectRadius:M,rfId:i,ariaLabel:P.ariaLabel,isFocusable:_e,isReconnectable:Ne,pathOptions:"pathOptions"in P?P.pathOptions:void 0,interactionWidth:P.interactionWidth,disableKeyboardA11y:L})})))),C):null};NT.displayName="EdgeRenderer";var UD=$.memo(NT);const jD=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function BD({children:t}){const e=Tt(jD);return he.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function HD(t){const e=Of(),n=$.useRef(!1);$.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const qD={[Te.Left]:Te.Right,[Te.Right]:Te.Left,[Te.Top]:Te.Bottom,[Te.Bottom]:Te.Top},CT=({nodeId:t,handleType:e,style:n,type:i=Ps.Bezier,CustomComponent:a,connectionStatus:l})=>{const{fromNode:c,handleId:d,toX:f,toY:p,connectionMode:y}=Tt($.useCallback(ee=>({fromNode:ee.nodeInternals.get(t),handleId:ee.connectionHandleId,toX:(ee.connectionPosition.x-ee.transform[0])/ee.transform[2],toY:(ee.connectionPosition.y-ee.transform[1])/ee.transform[2],connectionMode:ee.connectionMode}),[t]),Tn),_=c?.[kt]?.handleBounds;let b=_?.[e];if(y===Qs.Loose&&(b=b||_?.[e==="source"?"target":"source"]),!c||!b)return null;const w=d?b.find(ee=>ee.id===d):b[0],S=w?w.x+w.width/2:(c.width??0)/2,M=w?w.y+w.height/2:c.height??0,C=(c.positionAbsolute?.x??0)+S,L=(c.positionAbsolute?.y??0)+M,B=w?.position,G=B?qD[B]:null;if(!B||!G)return null;if(a)return he.createElement(a,{connectionLineType:i,connectionLineStyle:n,fromNode:c,fromHandle:w,fromX:C,fromY:L,toX:f,toY:p,fromPosition:B,toPosition:G,connectionStatus:l});let j="";const J={sourceX:C,sourceY:L,sourcePosition:B,targetX:f,targetY:p,targetPosition:G};return i===Ps.Bezier?[j]=Z1(J):i===Ps.Step?[j]=Wm({...J,borderRadius:0}):i===Ps.SmoothStep?[j]=Wm(J):i===Ps.SimpleBezier?[j]=W1(J):j=`M${C},${L} ${f},${p}`,he.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:n})};CT.displayName="ConnectionLine";const $D=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function FD({containerStyle:t,style:e,type:n,component:i}){const{nodeId:a,handleType:l,nodesConnectable:c,width:d,height:f,connectionStatus:p}=Tt($D,Tn);return!(a&&l&&d&&c)?null:he.createElement("svg",{style:t,width:d,height:f,className:"react-flow__edges react-flow__connectionline react-flow__container"},he.createElement("g",{className:Vn(["react-flow__connection",p])},he.createElement(CT,{nodeId:a,handleType:l,style:e,type:n,CustomComponent:i,connectionStatus:p})))}function fw(t,e){return $.useRef(null),ln(),$.useMemo(()=>e(t),[t])}const IT=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:i,onMoveEnd:a,onInit:l,onNodeClick:c,onEdgeClick:d,onNodeDoubleClick:f,onEdgeDoubleClick:p,onNodeMouseEnter:y,onNodeMouseMove:_,onNodeMouseLeave:b,onNodeContextMenu:w,onSelectionContextMenu:S,onSelectionStart:M,onSelectionEnd:C,connectionLineType:L,connectionLineStyle:B,connectionLineComponent:G,connectionLineContainerStyle:j,selectionKeyCode:J,selectionOnDrag:ee,selectionMode:O,multiSelectionKeyCode:A,panActivationKeyCode:R,zoomActivationKeyCode:z,deleteKeyCode:U,onlyRenderVisibleElements:H,elementsSelectable:I,selectNodesOnDrag:P,defaultViewport:Y,translateExtent:D,minZoom:q,maxZoom:W,preventScrolling:Q,defaultMarkerColor:k,zoomOnScroll:F,zoomOnPinch:te,panOnScroll:X,panOnScrollSpeed:re,panOnScrollMode:de,zoomOnDoubleClick:ue,panOnDrag:ye,onPaneClick:_e,onPaneMouseEnter:Ae,onPaneMouseMove:Ne,onPaneMouseLeave:nt,onPaneScroll:rt,onPaneContextMenu:Pe,onEdgeContextMenu:$e,onEdgeMouseEnter:Ue,onEdgeMouseMove:Lt,onEdgeMouseLeave:ze,onReconnect:Ee,onReconnectStart:At,onReconnectEnd:vn,reconnectRadius:Gt,noDragClassName:Fn,noWheelClassName:An,noPanClassName:Rn,elevateEdgesOnSelect:Cr,disableKeyboardA11y:at,nodeOrigin:Ye,nodeExtent:zt,rfId:Et})=>{const Fr=fw(t,_D),Ut=fw(e,AD);return HD(l),he.createElement(yD,{onPaneClick:_e,onPaneMouseEnter:Ae,onPaneMouseMove:Ne,onPaneMouseLeave:nt,onPaneContextMenu:Pe,onPaneScroll:rt,deleteKeyCode:U,selectionKeyCode:J,selectionOnDrag:ee,selectionMode:O,onSelectionStart:M,onSelectionEnd:C,multiSelectionKeyCode:A,panActivationKeyCode:R,zoomActivationKeyCode:z,elementsSelectable:I,onMove:n,onMoveStart:i,onMoveEnd:a,zoomOnScroll:F,zoomOnPinch:te,zoomOnDoubleClick:ue,panOnScroll:X,panOnScrollSpeed:re,panOnScrollMode:de,panOnDrag:ye,defaultViewport:Y,translateExtent:D,minZoom:q,maxZoom:W,onSelectionContextMenu:S,preventScrolling:Q,noDragClassName:Fn,noWheelClassName:An,noPanClassName:Rn,disableKeyboardA11y:at},he.createElement(BD,null,he.createElement(UD,{edgeTypes:Ut,onEdgeClick:d,onEdgeDoubleClick:p,onlyRenderVisibleElements:H,onEdgeContextMenu:$e,onEdgeMouseEnter:Ue,onEdgeMouseMove:Lt,onEdgeMouseLeave:ze,onReconnect:Ee,onReconnectStart:At,onReconnectEnd:vn,reconnectRadius:Gt,defaultMarkerColor:k,noPanClassName:Rn,elevateEdgesOnSelect:!!Cr,disableKeyboardA11y:at,rfId:Et},he.createElement(FD,{style:B,type:L,component:G,containerStyle:j})),he.createElement("div",{className:"react-flow__edgelabel-renderer"}),he.createElement(wD,{nodeTypes:Fr,onNodeClick:c,onNodeDoubleClick:f,onNodeMouseEnter:y,onNodeMouseMove:_,onNodeMouseLeave:b,onNodeContextMenu:w,selectNodesOnDrag:P,onlyRenderVisibleElements:H,noPanClassName:Rn,noDragClassName:Fn,disableKeyboardA11y:at,nodeOrigin:Ye,nodeExtent:zt,rfId:Et})))};IT.displayName="GraphView";var GD=$.memo(IT);const n0=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ks={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:n0,nodeExtent:n0,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Qs.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:b4,isValidConnection:void 0},YD=()=>MN((t,e)=>({...ks,setNodes:n=>{const{nodeInternals:i,nodeOrigin:a,elevateNodesOnSelect:l}=e();t({nodeInternals:_m(n,i,a,l)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=e();t({edges:n.map(a=>({...i,...a}))})},setDefaultNodesAndEdges:(n,i)=>{const a=typeof n<"u",l=typeof i<"u",c=a?_m(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:c,edges:l?i:[],hasDefaultNodes:a,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:a,fitViewOnInit:l,fitViewOnInitDone:c,fitViewOnInitOptions:d,domNode:f,nodeOrigin:p}=e(),y=f?.querySelector(".react-flow__viewport");if(!y)return;const _=window.getComputedStyle(y),{m22:b}=new window.DOMMatrixReadOnly(_.transform),w=n.reduce((M,C)=>{const L=a.get(C.id);if(L?.hidden)a.set(L.id,{...L,[kt]:{...L[kt],handleBounds:void 0}});else if(L){const B=U0(C.nodeElement);!!(B.width&&B.height&&(L.width!==B.width||L.height!==B.height||C.forceUpdate))&&(a.set(L.id,{...L,[kt]:{...L[kt],handleBounds:{source:aw(".source",C.nodeElement,b,p),target:aw(".target",C.nodeElement,b,p)}},...B}),M.push({id:L.id,type:"dimensions",dimensions:B}))}return M},[]);mT(a,p);const S=c||l&&!c&&yT(e,{initial:!0,...d});t({nodeInternals:new Map(a),fitViewOnInitDone:S}),w?.length>0&&i?.(w)},updateNodePositions:(n,i=!0,a=!1)=>{const{triggerNodeChanges:l}=e(),c=n.map(d=>{const f={id:d.id,type:"position",dragging:a};return i&&(f.positionAbsolute=d.positionAbsolute,f.position=d.position),f});l(c)},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:a,hasDefaultNodes:l,nodeOrigin:c,getNodes:d,elevateNodesOnSelect:f}=e();if(n?.length){if(l){const p=_T(n,d()),y=_m(p,a,c,f);t({nodeInternals:y})}i?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:a,getNodes:l}=e();let c,d=null;i?c=n.map(f=>Os(f,!0)):(c=ul(l(),n),d=ul(a,[])),yh({changedNodes:c,changedEdges:d,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:a,getNodes:l}=e();let c,d=null;i?c=n.map(f=>Os(f,!0)):(c=ul(a,n),d=ul(l(),[])),yh({changedNodes:d,changedEdges:c,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:a,getNodes:l}=e(),c=n||l(),d=i||a,f=c.map(y=>(y.selected=!1,Os(y.id,!1))),p=d.map(y=>Os(y.id,!1));yh({changedNodes:f,changedEdges:p,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:a}=e();i?.scaleExtent([n,a]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:a}=e();i?.scaleExtent([a,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=e(),l=i().filter(d=>d.selected).map(d=>Os(d.id,!1)),c=n.filter(d=>d.selected).map(d=>Os(d.id,!1));yh({changedNodes:l,changedEdges:c,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:i}=e();i.forEach(a=>{a.positionAbsolute=j0(a.position,n)}),t({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:a,height:l,d3Zoom:c,d3Selection:d,translateExtent:f}=e();if(!c||!d||!n.x&&!n.y)return!1;const p=qs.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),y=[[0,0],[a,l]],_=c?.constrain()(p,y,f);return c.transform(d,_),i[0]!==_.x||i[1]!==_.y||i[2]!==_.k},cancelConnection:()=>t({connectionNodeId:ks.connectionNodeId,connectionHandleId:ks.connectionHandleId,connectionHandleType:ks.connectionHandleType,connectionStatus:ks.connectionStatus,connectionStartHandle:ks.connectionStartHandle,connectionEndHandle:ks.connectionEndHandle}),reset:()=>t({...ks})}),Object.is),kT=({children:t})=>{const e=$.useRef(null);return e.current||(e.current=YD()),he.createElement(h4,{value:e.current},t)};kT.displayName="ReactFlowProvider";const DT=({children:t})=>$.useContext(Df)?he.createElement(he.Fragment,null,t):he.createElement(kT,null,t);DT.displayName="ReactFlowWrapper";const KD={input:cT,default:e0,output:dT,group:K0},XD={default:ef,straight:$0,step:q0,smoothstep:Mf,simplebezier:H0},QD=[0,0],WD=[15,15],ZD={x:0,y:0,zoom:1},JD={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},MT=$.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,className:a,nodeTypes:l=KD,edgeTypes:c=XD,onNodeClick:d,onEdgeClick:f,onInit:p,onMove:y,onMoveStart:_,onMoveEnd:b,onConnect:w,onConnectStart:S,onConnectEnd:M,onClickConnectStart:C,onClickConnectEnd:L,onNodeMouseEnter:B,onNodeMouseMove:G,onNodeMouseLeave:j,onNodeContextMenu:J,onNodeDoubleClick:ee,onNodeDragStart:O,onNodeDrag:A,onNodeDragStop:R,onNodesDelete:z,onEdgesDelete:U,onSelectionChange:H,onSelectionDragStart:I,onSelectionDrag:P,onSelectionDragStop:Y,onSelectionContextMenu:D,onSelectionStart:q,onSelectionEnd:W,connectionMode:Q=Qs.Strict,connectionLineType:k=Ps.Bezier,connectionLineStyle:F,connectionLineComponent:te,connectionLineContainerStyle:X,deleteKeyCode:re="Backspace",selectionKeyCode:de="Shift",selectionOnDrag:ue=!1,selectionMode:ye=_u.Full,panActivationKeyCode:_e="Space",multiSelectionKeyCode:Ae=Jh()?"Meta":"Control",zoomActivationKeyCode:Ne=Jh()?"Meta":"Control",snapToGrid:nt=!1,snapGrid:rt=WD,onlyRenderVisibleElements:Pe=!1,selectNodesOnDrag:$e=!0,nodesDraggable:Ue,nodesConnectable:Lt,nodesFocusable:ze,nodeOrigin:Ee=QD,edgesFocusable:At,edgesUpdatable:vn,elementsSelectable:Gt,defaultViewport:Fn=ZD,minZoom:An=.5,maxZoom:Rn=2,translateExtent:Cr=n0,preventScrolling:at=!0,nodeExtent:Ye,defaultMarkerColor:zt="#b1b1b7",zoomOnScroll:Et=!0,zoomOnPinch:Fr=!0,panOnScroll:Ut=!1,panOnScrollSpeed:Jt=.5,panOnScrollMode:Nn=Ha.Free,zoomOnDoubleClick:Cn=!0,panOnDrag:en=!0,onPaneClick:cn,onPaneMouseEnter:In,onPaneMouseMove:xi,onPaneMouseLeave:Ti,onPaneScroll:Ir,onPaneContextMenu:Gn,children:ur,onEdgeContextMenu:Yn,onEdgeDoubleClick:dr,onEdgeMouseEnter:la,onEdgeMouseMove:Gr,onEdgeMouseLeave:ss,onEdgeUpdate:Yr,onEdgeUpdateStart:oo,onEdgeUpdateEnd:mt,onReconnect:Mt,onReconnectStart:Rt,onReconnectEnd:Ln,reconnectRadius:ca=10,edgeUpdaterRadius:Hl=10,onNodesChange:Kr,onEdgesChange:lo,noDragClassName:Si="nodrag",noWheelClassName:Xr="nowheel",noPanClassName:hr="nopan",fitView:fr=!1,fitViewOptions:gr,connectOnClick:un=!0,attributionPosition:wt,proOptions:ua,defaultEdgeOptions:as,elevateNodesOnSelect:Kn=!0,elevateEdgesOnSelect:kr=!1,disableKeyboardA11y:da=!1,autoPanOnConnect:co=!0,autoPanOnNodeDrag:Ai=!0,connectionRadius:uo=20,isValidConnection:Qr,onError:pr,style:Yt,id:Wr,nodeDragThreshold:ho,...Dr},os)=>{const Zr=Wr||"1";return he.createElement("div",{...Dr,style:{...Yt,...JD},ref:os,className:Vn(["react-flow",a]),"data-testid":"rf__wrapper",id:Wr},he.createElement(DT,null,he.createElement(GD,{onInit:p,onMove:y,onMoveStart:_,onMoveEnd:b,onNodeClick:d,onEdgeClick:f,onNodeMouseEnter:B,onNodeMouseMove:G,onNodeMouseLeave:j,onNodeContextMenu:J,onNodeDoubleClick:ee,nodeTypes:l,edgeTypes:c,connectionLineType:k,connectionLineStyle:F,connectionLineComponent:te,connectionLineContainerStyle:X,selectionKeyCode:de,selectionOnDrag:ue,selectionMode:ye,deleteKeyCode:re,multiSelectionKeyCode:Ae,panActivationKeyCode:_e,zoomActivationKeyCode:Ne,onlyRenderVisibleElements:Pe,selectNodesOnDrag:$e,defaultViewport:Fn,translateExtent:Cr,minZoom:An,maxZoom:Rn,preventScrolling:at,zoomOnScroll:Et,zoomOnPinch:Fr,zoomOnDoubleClick:Cn,panOnScroll:Ut,panOnScrollSpeed:Jt,panOnScrollMode:Nn,panOnDrag:en,onPaneClick:cn,onPaneMouseEnter:In,onPaneMouseMove:xi,onPaneMouseLeave:Ti,onPaneScroll:Ir,onPaneContextMenu:Gn,onSelectionContextMenu:D,onSelectionStart:q,onSelectionEnd:W,onEdgeContextMenu:Yn,onEdgeDoubleClick:dr,onEdgeMouseEnter:la,onEdgeMouseMove:Gr,onEdgeMouseLeave:ss,onReconnect:Mt??Yr,onReconnectStart:Rt??oo,onReconnectEnd:Ln??mt,reconnectRadius:ca??Hl,defaultMarkerColor:zt,noDragClassName:Si,noWheelClassName:Xr,noPanClassName:hr,elevateEdgesOnSelect:kr,rfId:Zr,disableKeyboardA11y:da,nodeOrigin:Ee,nodeExtent:Ye}),he.createElement(q4,{nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:w,onConnectStart:S,onConnectEnd:M,onClickConnectStart:C,onClickConnectEnd:L,nodesDraggable:Ue,nodesConnectable:Lt,nodesFocusable:ze,edgesFocusable:At,edgesUpdatable:vn,elementsSelectable:Gt,elevateNodesOnSelect:Kn,minZoom:An,maxZoom:Rn,nodeExtent:Ye,onNodesChange:Kr,onEdgesChange:lo,snapToGrid:nt,snapGrid:rt,connectionMode:Q,translateExtent:Cr,connectOnClick:un,defaultEdgeOptions:as,fitView:fr,fitViewOptions:gr,onNodesDelete:z,onEdgesDelete:U,onNodeDragStart:O,onNodeDrag:A,onNodeDragStop:R,onSelectionDrag:P,onSelectionDragStart:I,onSelectionDragStop:Y,noPanClassName:hr,nodeOrigin:Ee,rfId:Zr,autoPanOnConnect:co,autoPanOnNodeDrag:Ai,onError:pr,connectionRadius:uo,isValidConnection:Qr,nodeDragThreshold:ho}),he.createElement(B4,{onSelectionChange:H}),ur,he.createElement(g4,{proOptions:ua,position:wt}),he.createElement(K4,{rfId:Zr,disableKeyboardA11y:da})))});MT.displayName="ReactFlow";function OT(t){return e=>{const[n,i]=$.useState(e),a=$.useCallback(l=>i(c=>t(l,c)),[]);return[n,i,a]}}const e3=OT(_T),t3=OT(lD);function n3(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},he.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function r3(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},he.createElement("path",{d:"M0 0h32v4.2H0z"}))}function i3(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},he.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function s3(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},he.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function a3(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},he.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Jc=({children:t,className:e,...n})=>he.createElement("button",{type:"button",className:Vn(["react-flow__controls-button",e]),...n},t);Jc.displayName="ControlButton";const o3=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),PT=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:f,className:p,children:y,position:_="bottom-left"})=>{const b=ln(),[w,S]=$.useState(!1),{isInteractive:M,minZoomReached:C,maxZoomReached:L}=Tt(o3,Tn),{zoomIn:B,zoomOut:G,fitView:j}=Of();if($.useEffect(()=>{S(!0)},[]),!w)return null;const J=()=>{B(),l?.()},ee=()=>{G(),c?.()},O=()=>{j(a),d?.()},A=()=>{b.setState({nodesDraggable:!M,nodesConnectable:!M,elementsSelectable:!M}),f?.(!M)};return he.createElement($1,{className:Vn(["react-flow__controls",p]),position:_,style:t,"data-testid":"rf__controls"},e&&he.createElement(he.Fragment,null,he.createElement(Jc,{onClick:J,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:L},he.createElement(n3,null)),he.createElement(Jc,{onClick:ee,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:C},he.createElement(r3,null))),n&&he.createElement(Jc,{className:"react-flow__controls-fitview",onClick:O,title:"fit view","aria-label":"fit view"},he.createElement(i3,null)),i&&he.createElement(Jc,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity"},M?he.createElement(a3,null):he.createElement(s3,null)),y)};PT.displayName="Controls";var l3=$.memo(PT),Nr;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Nr||(Nr={}));function c3({color:t,dimensions:e,lineWidth:n}){return he.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function u3({color:t,radius:e}){return he.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const d3={[Nr.Dots]:"#91919a",[Nr.Lines]:"#eee",[Nr.Cross]:"#e2e2e2"},h3={[Nr.Dots]:1,[Nr.Lines]:1,[Nr.Cross]:6},f3=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function VT({id:t,variant:e=Nr.Dots,gap:n=20,size:i,lineWidth:a=1,offset:l=2,color:c,style:d,className:f}){const p=$.useRef(null),{transform:y,patternId:_}=Tt(f3,Tn),b=c||d3[e],w=i||h3[e],S=e===Nr.Dots,M=e===Nr.Cross,C=Array.isArray(n)?n:[n,n],L=[C[0]*y[2]||1,C[1]*y[2]||1],B=w*y[2],G=M?[B,B]:L,j=S?[B/l,B/l]:[G[0]/l,G[1]/l];return he.createElement("svg",{className:Vn(["react-flow__background",f]),style:{...d,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:p,"data-testid":"rf__background"},he.createElement("pattern",{id:_+t,x:y[0]%L[0],y:y[1]%L[1],width:L[0],height:L[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},S?he.createElement(u3,{color:b,radius:B/l}):he.createElement(c3,{dimensions:G,color:b,lineWidth:a})),he.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${_+t})`}))}VT.displayName="Background";var g3=$.memo(VT),$t=function(){return $t=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},$t.apply(this,arguments)},gw={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},pw={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},_h={width:"20px",height:"20px",position:"absolute",zIndex:1},p3={top:$t($t({},gw),{top:"-5px"}),right:$t($t({},pw),{left:void 0,right:"-5px"}),bottom:$t($t({},gw),{top:void 0,bottom:"-5px"}),left:$t($t({},pw),{left:"-5px"}),topRight:$t($t({},_h),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:$t($t({},_h),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:$t($t({},_h),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:$t($t({},_h),{left:"-10px",top:"-10px",cursor:"nw-resize"})},m3=$.memo(function(t){var e=t.onResizeStart,n=t.direction,i=t.children,a=t.replaceStyles,l=t.className,c=$.useCallback(function(p){e(p,n)},[e,n]),d=$.useCallback(function(p){e(p,n)},[e,n]),f=$.useMemo(function(){return $t($t({position:"absolute",userSelect:"none"},p3[n]),a??{})},[a,n]);return T.jsx("div",{className:l||void 0,style:f,onMouseDown:c,onTouchStart:d,children:i})}),y3=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),di=function(){return di=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},di.apply(this,arguments)},v3={width:"auto",height:"auto"},bh=function(t,e,n){return Math.max(Math.min(t,n),e)},mw=function(t,e,n){var i=Math.round(t/e);return i*e+n*(i-1)},nl=function(t,e){return new RegExp(t,"i").test(e)},Eh=function(t){return!!(t.touches&&t.touches.length)},_3=function(t){return!!((t.clientX||t.clientX===0)&&(t.clientY||t.clientY===0))},yw=function(t,e,n){n===void 0&&(n=0);var i=e.reduce(function(l,c,d){return Math.abs(c-t)<Math.abs(e[l]-t)?d:l},0),a=Math.abs(e[i]-t);return n===0||a<n?e[i]:t},xm=function(t){return t=t.toString(),t==="auto"||t.endsWith("px")||t.endsWith("%")||t.endsWith("vh")||t.endsWith("vw")||t.endsWith("vmax")||t.endsWith("vmin")?t:"".concat(t,"px")},wh=function(t,e,n,i){if(t&&typeof t=="string"){if(t.endsWith("px"))return Number(t.replace("px",""));if(t.endsWith("%")){var a=Number(t.replace("%",""))/100;return e*a}if(t.endsWith("vw")){var a=Number(t.replace("vw",""))/100;return n*a}if(t.endsWith("vh")){var a=Number(t.replace("vh",""))/100;return i*a}}return t},b3=function(t,e,n,i,a,l,c){return i=wh(i,t.width,e,n),a=wh(a,t.height,e,n),l=wh(l,t.width,e,n),c=wh(c,t.height,e,n),{maxWidth:typeof i>"u"?void 0:Number(i),maxHeight:typeof a>"u"?void 0:Number(a),minWidth:typeof l>"u"?void 0:Number(l),minHeight:typeof c>"u"?void 0:Number(c)}},E3=function(t){return Array.isArray(t)?t:[t,t]},w3=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],vw="__resizable_base__",x3=function(t){y3(e,t);function e(n){var i,a,l,c,d=t.call(this,n)||this;return d.ratio=1,d.resizable=null,d.parentLeft=0,d.parentTop=0,d.resizableLeft=0,d.resizableRight=0,d.resizableTop=0,d.resizableBottom=0,d.targetLeft=0,d.targetTop=0,d.delta={width:0,height:0},d.appendBase=function(){if(!d.resizable||!d.window)return null;var f=d.parentNode;if(!f)return null;var p=d.window.document.createElement("div");return p.style.width="100%",p.style.height="100%",p.style.position="absolute",p.style.transform="scale(0, 0)",p.style.left="0",p.style.flex="0 0 100%",p.classList?p.classList.add(vw):p.className+=vw,f.appendChild(p),p},d.removeBase=function(f){var p=d.parentNode;p&&p.removeChild(f)},d.state={isResizing:!1,width:(a=(i=d.propsSize)===null||i===void 0?void 0:i.width)!==null&&a!==void 0?a:"auto",height:(c=(l=d.propsSize)===null||l===void 0?void 0:l.height)!==null&&c!==void 0?c:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},d.onResizeStart=d.onResizeStart.bind(d),d.onMouseMove=d.onMouseMove.bind(d),d.onMouseUp=d.onMouseUp.bind(d),d}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||v3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var n=0,i=0;if(this.resizable&&this.window){var a=this.resizable.offsetWidth,l=this.resizable.offsetHeight,c=this.resizable.style.position;c!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:a,i=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:l,this.resizable.style.position=c}return{width:n,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var n=this,i=this.props.size,a=function(d){var f;if(typeof n.state[d]>"u"||n.state[d]==="auto")return"auto";if(n.propsSize&&n.propsSize[d]&&(!((f=n.propsSize[d])===null||f===void 0)&&f.toString().endsWith("%"))){if(n.state[d].toString().endsWith("%"))return n.state[d].toString();var p=n.getParentSize(),y=Number(n.state[d].toString().replace("px","")),_=y/p[d]*100;return"".concat(_,"%")}return xm(n.state[d])},l=i&&typeof i.width<"u"&&!this.state.isResizing?xm(i.width):a("width"),c=i&&typeof i.height<"u"&&!this.state.isResizing?xm(i.height):a("height");return{width:l,height:c}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var i=!1,a=this.parentNode.style.flexWrap;a!=="wrap"&&(i=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var l={width:n.offsetWidth,height:n.offsetHeight};return i&&(this.parentNode.style.flexWrap=a),this.removeBase(n),l},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(n,i){var a=this.propsSize&&this.propsSize[i];return this.state[i]==="auto"&&this.state.original[i]===n&&(typeof a>"u"||a==="auto")?"auto":n},e.prototype.calculateNewMaxFromBoundary=function(n,i){var a=this.props.boundsByDirection,l=this.state.direction,c=a&&nl("left",l),d=a&&nl("top",l),f,p;if(this.props.bounds==="parent"){var y=this.parentNode;y&&(f=c?this.resizableRight-this.parentLeft:y.offsetWidth+(this.parentLeft-this.resizableLeft),p=d?this.resizableBottom-this.parentTop:y.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(f=c?this.resizableRight:this.window.innerWidth-this.resizableLeft,p=d?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(f=c?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),p=d?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return f&&Number.isFinite(f)&&(n=n&&n<f?n:f),p&&Number.isFinite(p)&&(i=i&&i<p?i:p),{maxWidth:n,maxHeight:i}},e.prototype.calculateNewSizeFromDirection=function(n,i){var a=this.props.scale||1,l=E3(this.props.resizeRatio||1),c=l[0],d=l[1],f=this.state,p=f.direction,y=f.original,_=this.props,b=_.lockAspectRatio,w=_.lockAspectRatioExtraHeight,S=_.lockAspectRatioExtraWidth,M=y.width,C=y.height,L=w||0,B=S||0;return nl("right",p)&&(M=y.width+(n-y.x)*c/a,b&&(C=(M-B)/this.ratio+L)),nl("left",p)&&(M=y.width-(n-y.x)*c/a,b&&(C=(M-B)/this.ratio+L)),nl("bottom",p)&&(C=y.height+(i-y.y)*d/a,b&&(M=(C-L)*this.ratio+B)),nl("top",p)&&(C=y.height-(i-y.y)*d/a,b&&(M=(C-L)*this.ratio+B)),{newWidth:M,newHeight:C}},e.prototype.calculateNewSizeFromAspectRatio=function(n,i,a,l){var c=this.props,d=c.lockAspectRatio,f=c.lockAspectRatioExtraHeight,p=c.lockAspectRatioExtraWidth,y=typeof l.width>"u"?10:l.width,_=typeof a.width>"u"||a.width<0?n:a.width,b=typeof l.height>"u"?10:l.height,w=typeof a.height>"u"||a.height<0?i:a.height,S=f||0,M=p||0;if(d){var C=(b-S)*this.ratio+M,L=(w-S)*this.ratio+M,B=(y-M)/this.ratio+S,G=(_-M)/this.ratio+S,j=Math.max(y,C),J=Math.min(_,L),ee=Math.max(b,B),O=Math.min(w,G);n=bh(n,j,J),i=bh(i,ee,O)}else n=bh(n,y,_),i=bh(i,b,w);return{newWidth:n,newHeight:i}},e.prototype.setBoundingClientRect=function(){var n=1/(this.props.scale||1);if(this.props.bounds==="parent"){var i=this.parentNode;if(i){var a=i.getBoundingClientRect();this.parentLeft=a.left*n,this.parentTop=a.top*n}}if(this.props.bounds&&typeof this.props.bounds!="string"){var l=this.props.bounds.getBoundingClientRect();this.targetLeft=l.left*n,this.targetTop=l.top*n}if(this.resizable){var c=this.resizable.getBoundingClientRect(),d=c.left,f=c.top,p=c.right,y=c.bottom;this.resizableLeft=d*n,this.resizableRight=p*n,this.resizableTop=f*n,this.resizableBottom=y*n}},e.prototype.onResizeStart=function(n,i){if(!(!this.resizable||!this.window)){var a=0,l=0;if(n.nativeEvent&&_3(n.nativeEvent)?(a=n.nativeEvent.clientX,l=n.nativeEvent.clientY):n.nativeEvent&&Eh(n.nativeEvent)&&(a=n.nativeEvent.touches[0].clientX,l=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var c=this.props.onResizeStart(n,i,this.resizable);if(c===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var d,f=this.window.getComputedStyle(this.resizable);if(f.flexBasis!=="auto"){var p=this.parentNode;if(p){var y=this.window.getComputedStyle(p).flexDirection;this.flexDir=y.startsWith("row")?"row":"column",d=f.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var _={original:{x:a,y:l,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:di(di({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:i,flexBasis:d};this.setState(_)}},e.prototype.onMouseMove=function(n){var i=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&Eh(n))try{n.preventDefault(),n.stopPropagation()}catch{}var a=this.props,l=a.maxWidth,c=a.maxHeight,d=a.minWidth,f=a.minHeight,p=Eh(n)?n.touches[0].clientX:n.clientX,y=Eh(n)?n.touches[0].clientY:n.clientY,_=this.state,b=_.direction,w=_.original,S=_.width,M=_.height,C=this.getParentSize(),L=b3(C,this.window.innerWidth,this.window.innerHeight,l,c,d,f);l=L.maxWidth,c=L.maxHeight,d=L.minWidth,f=L.minHeight;var B=this.calculateNewSizeFromDirection(p,y),G=B.newHeight,j=B.newWidth,J=this.calculateNewMaxFromBoundary(l,c);this.props.snap&&this.props.snap.x&&(j=yw(j,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(G=yw(G,this.props.snap.y,this.props.snapGap));var ee=this.calculateNewSizeFromAspectRatio(j,G,{width:J.maxWidth,height:J.maxHeight},{width:d,height:f});if(j=ee.newWidth,G=ee.newHeight,this.props.grid){var O=mw(j,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),A=mw(G,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),R=this.props.snapGap||0,z=R===0||Math.abs(O-j)<=R?O:j,U=R===0||Math.abs(A-G)<=R?A:G;j=z,G=U}var H={width:j-w.width,height:G-w.height};if(this.delta=H,S&&typeof S=="string"){if(S.endsWith("%")){var I=j/C.width*100;j="".concat(I,"%")}else if(S.endsWith("vw")){var P=j/this.window.innerWidth*100;j="".concat(P,"vw")}else if(S.endsWith("vh")){var Y=j/this.window.innerHeight*100;j="".concat(Y,"vh")}}if(M&&typeof M=="string"){if(M.endsWith("%")){var I=G/C.height*100;G="".concat(I,"%")}else if(M.endsWith("vw")){var P=G/this.window.innerWidth*100;G="".concat(P,"vw")}else if(M.endsWith("vh")){var Y=G/this.window.innerHeight*100;G="".concat(Y,"vh")}}var D={width:this.createSizeForCssProperty(j,"width"),height:this.createSizeForCssProperty(G,"height")};this.flexDir==="row"?D.flexBasis=D.width:this.flexDir==="column"&&(D.flexBasis=D.height);var q=this.state.width!==D.width,W=this.state.height!==D.height,Q=this.state.flexBasis!==D.flexBasis,k=q||W||Q;k&&H1.flushSync(function(){i.setState(D)}),this.props.onResize&&k&&this.props.onResize(n,b,this.resizable,H)}},e.prototype.onMouseUp=function(n){var i,a,l=this.state,c=l.isResizing,d=l.direction;l.original,!(!c||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(n,d,this.resizable,this.delta),this.props.size&&this.setState({width:(i=this.props.size.width)!==null&&i!==void 0?i:"auto",height:(a=this.props.size.height)!==null&&a!==void 0?a:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:di(di({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(n){var i,a;this.setState({width:(i=n.width)!==null&&i!==void 0?i:"auto",height:(a=n.height)!==null&&a!==void 0?a:"auto"})},e.prototype.renderResizer=function(){var n=this,i=this.props,a=i.enable,l=i.handleStyles,c=i.handleClasses,d=i.handleWrapperStyle,f=i.handleWrapperClass,p=i.handleComponent;if(!a)return null;var y=Object.keys(a).map(function(_){return a[_]!==!1?T.jsx(m3,{direction:_,onResizeStart:n.onResizeStart,replaceStyles:l&&l[_],className:c&&c[_],children:p&&p[_]?p[_]:null},_):null});return T.jsx("div",{className:f,style:d,children:y})},e.prototype.render=function(){var n=this,i=Object.keys(this.props).reduce(function(c,d){return w3.indexOf(d)!==-1||(c[d]=n.props[d]),c},{}),a=di(di(di({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(a.flexBasis=this.state.flexBasis);var l=this.props.as||"div";return T.jsxs(l,di({style:a,className:this.props.className},i,{ref:function(c){c&&(n.resizable=c)},children:[this.state.isResizing&&T.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}($.PureComponent);const Pf=$.createContext(null);Pf.displayName="PanelGroupContext";const It={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},Q0=10,Fa=$.useLayoutEffect,_w=pN.useId,T3=typeof _w=="function"?_w:()=>null;let S3=0;function W0(t=null){const e=T3(),n=$.useRef(t||e||null);return n.current===null&&(n.current=""+S3++),t??n.current}function LT({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:a,forwardedRef:l,id:c,maxSize:d,minSize:f,onCollapse:p,onExpand:y,onResize:_,order:b,style:w,tagName:S="div",...M}){const C=$.useContext(Pf);if(C===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:L,expandPanel:B,getPanelSize:G,getPanelStyle:j,groupId:J,isPanelCollapsed:ee,reevaluatePanelConstraints:O,registerPanel:A,resizePanel:R,unregisterPanel:z}=C,U=W0(c),H=$.useRef({callbacks:{onCollapse:p,onExpand:y,onResize:_},constraints:{collapsedSize:n,collapsible:i,defaultSize:a,maxSize:d,minSize:f},id:U,idIsFromProps:c!==void 0,order:b});$.useRef({didLogMissingDefaultSizeWarning:!1}),Fa(()=>{const{callbacks:P,constraints:Y}=H.current,D={...Y};H.current.id=U,H.current.idIsFromProps=c!==void 0,H.current.order=b,P.onCollapse=p,P.onExpand=y,P.onResize=_,Y.collapsedSize=n,Y.collapsible=i,Y.defaultSize=a,Y.maxSize=d,Y.minSize=f,(D.collapsedSize!==Y.collapsedSize||D.collapsible!==Y.collapsible||D.maxSize!==Y.maxSize||D.minSize!==Y.minSize)&&O(H.current,D)}),Fa(()=>{const P=H.current;return A(P),()=>{z(P)}},[b,U,A,z]),$.useImperativeHandle(l,()=>({collapse:()=>{L(H.current)},expand:P=>{B(H.current,P)},getId(){return U},getSize(){return G(H.current)},isCollapsed(){return ee(H.current)},isExpanded(){return!ee(H.current)},resize:P=>{R(H.current,P)}}),[L,B,G,ee,U,R]);const I=j(H.current,a);return $.createElement(S,{...M,children:t,className:e,id:U,style:{...I,...w},[It.groupId]:J,[It.panel]:"",[It.panelCollapsible]:i||void 0,[It.panelId]:U,[It.panelSize]:parseFloat(""+I.flexGrow).toFixed(1)})}const r0=$.forwardRef((t,e)=>$.createElement(LT,{...t,forwardedRef:e}));LT.displayName="Panel";r0.displayName="forwardRef(Panel)";let i0=null,Ph=-1,Vs=null;function A3(t,e){if(e){const n=(e&HT)!==0,i=(e&qT)!==0,a=(e&$T)!==0,l=(e&FT)!==0;if(n)return a?"se-resize":l?"ne-resize":"e-resize";if(i)return a?"sw-resize":l?"nw-resize":"w-resize";if(a)return"s-resize";if(l)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function R3(){Vs!==null&&(document.head.removeChild(Vs),i0=null,Vs=null,Ph=-1)}function Tm(t,e){var n,i;const a=A3(t,e);if(i0!==a){if(i0=a,Vs===null&&(Vs=document.createElement("style"),document.head.appendChild(Vs)),Ph>=0){var l;(l=Vs.sheet)===null||l===void 0||l.removeRule(Ph)}Ph=(n=(i=Vs.sheet)===null||i===void 0?void 0:i.insertRule(`*{cursor: ${a} !important;}`))!==null&&n!==void 0?n:-1}}function zT(t){return t.type==="keydown"}function UT(t){return t.type.startsWith("pointer")}function jT(t){return t.type.startsWith("mouse")}function Vf(t){if(UT(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(jT(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function N3(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function C3(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function I3(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:ww(t),b:ww(e)};let i;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),i=t;Be(i,"Stacking order can only be calculated for elements with a common ancestor");const a={a:Ew(bw(n.a)),b:Ew(bw(n.b))};if(a.a===a.b){const l=i.childNodes,c={a:n.a.at(-1),b:n.b.at(-1)};let d=l.length;for(;d--;){const f=l[d];if(f===c.a)return 1;if(f===c.b)return-1}}return Math.sign(a.a-a.b)}const k3=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function D3(t){var e;const n=getComputedStyle((e=BT(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function M3(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||D3(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||k3.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function bw(t){let e=t.length;for(;e--;){const n=t[e];if(Be(n,"Missing node"),M3(n))return n}return null}function Ew(t){return t&&Number(getComputedStyle(t).zIndex)||0}function ww(t){const e=[];for(;t;)e.push(t),t=BT(t);return e}function BT(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const HT=1,qT=2,$T=4,FT=8,O3=N3()==="coarse";let jr=[],yl=!1,Ls=new Map,Lf=new Map;const Eu=new Set;function P3(t,e,n,i,a){var l;const{ownerDocument:c}=e,d={direction:n,element:e,hitAreaMargins:i,setResizeHandlerState:a},f=(l=Ls.get(c))!==null&&l!==void 0?l:0;return Ls.set(c,f+1),Eu.add(d),tf(),function(){var y;Lf.delete(t),Eu.delete(d);const _=(y=Ls.get(c))!==null&&y!==void 0?y:1;if(Ls.set(c,_-1),tf(),_===1&&Ls.delete(c),jr.includes(d)){const b=jr.indexOf(d);b>=0&&jr.splice(b,1),J0(),a("up",!0,null)}}}function V3(t){const{target:e}=t,{x:n,y:i}=Vf(t);yl=!0,Z0({target:e,x:n,y:i}),tf(),jr.length>0&&(nf("down",t),t.preventDefault(),GT(e)||t.stopImmediatePropagation())}function Sm(t){const{x:e,y:n}=Vf(t);if(yl&&t.buttons===0&&(yl=!1,nf("up",t)),!yl){const{target:i}=t;Z0({target:i,x:e,y:n})}nf("move",t),J0(),jr.length>0&&t.preventDefault()}function Am(t){const{target:e}=t,{x:n,y:i}=Vf(t);Lf.clear(),yl=!1,jr.length>0&&(t.preventDefault(),GT(e)||t.stopImmediatePropagation()),nf("up",t),Z0({target:e,x:n,y:i}),J0(),tf()}function GT(t){let e=t;for(;e;){if(e.hasAttribute(It.resizeHandle))return!0;e=e.parentElement}return!1}function Z0({target:t,x:e,y:n}){jr.splice(0);let i=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(i=t),Eu.forEach(a=>{const{element:l,hitAreaMargins:c}=a,d=l.getBoundingClientRect(),{bottom:f,left:p,right:y,top:_}=d,b=O3?c.coarse:c.fine;if(e>=p-b&&e<=y+b&&n>=_-b&&n<=f+b){if(i!==null&&document.contains(i)&&l!==i&&!l.contains(i)&&!i.contains(l)&&I3(i,l)>0){let S=i,M=!1;for(;S&&!S.contains(l);){if(C3(S.getBoundingClientRect(),d)){M=!0;break}S=S.parentElement}if(M)return}jr.push(a)}})}function Rm(t,e){Lf.set(t,e)}function J0(){let t=!1,e=!1;jr.forEach(i=>{const{direction:a}=i;a==="horizontal"?t=!0:e=!0});let n=0;Lf.forEach(i=>{n|=i}),t&&e?Tm("intersection",n):t?Tm("horizontal",n):e?Tm("vertical",n):R3()}let Nm;function tf(){var t;(t=Nm)===null||t===void 0||t.abort(),Nm=new AbortController;const e={capture:!0,signal:Nm.signal};Eu.size&&(yl?(jr.length>0&&Ls.forEach((n,i)=>{const{body:a}=i;n>0&&(a.addEventListener("contextmenu",Am,e),a.addEventListener("pointerleave",Sm,e),a.addEventListener("pointermove",Sm,e))}),Ls.forEach((n,i)=>{const{body:a}=i;a.addEventListener("pointerup",Am,e),a.addEventListener("pointercancel",Am,e)})):Ls.forEach((n,i)=>{const{body:a}=i;n>0&&(a.addEventListener("pointerdown",V3,e),a.addEventListener("pointermove",Sm,e))}))}function nf(t,e){Eu.forEach(n=>{const{setResizeHandlerState:i}=n,a=jr.includes(n);i(t,a,e)})}function L3(){const[t,e]=$.useState(0);return $.useCallback(()=>e(n=>n+1),[])}function Be(t,e){if(!t)throw console.error(e),Error(e)}function Ka(t,e,n=Q0){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function Ki(t,e,n=Q0){return Ka(t,e,n)===0}function rr(t,e,n){return Ka(t,e,n)===0}function z3(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){const a=t[i],l=e[i];if(!rr(a,l,n))return!1}return!0}function dl({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];Be(i!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:a=0,collapsible:l,maxSize:c=100,minSize:d=0}=i;if(Ka(n,d)<0)if(l){const f=(a+d)/2;Ka(n,f)<0?n=a:n=d}else n=d;return n=Math.min(c,n),n=parseFloat(n.toFixed(Q0)),n}function eu({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:i,prevLayout:a,trigger:l}){if(rr(t,0))return e;const c=[...e],[d,f]=i;Be(d!=null,"Invalid first pivot index"),Be(f!=null,"Invalid second pivot index");let p=0;if(l==="keyboard"){{const _=t<0?f:d,b=n[_];Be(b,`Panel constraints not found for index ${_}`);const{collapsedSize:w=0,collapsible:S,minSize:M=0}=b;if(S){const C=e[_];if(Be(C!=null,`Previous layout not found for panel index ${_}`),rr(C,w)){const L=M-C;Ka(L,Math.abs(t))>0&&(t=t<0?0-L:L)}}}{const _=t<0?d:f,b=n[_];Be(b,`No panel constraints found for index ${_}`);const{collapsedSize:w=0,collapsible:S,minSize:M=0}=b;if(S){const C=e[_];if(Be(C!=null,`Previous layout not found for panel index ${_}`),rr(C,M)){const L=C-w;Ka(L,Math.abs(t))>0&&(t=t<0?0-L:L)}}}}{const _=t<0?1:-1;let b=t<0?f:d,w=0;for(;;){const M=e[b];Be(M!=null,`Previous layout not found for panel index ${b}`);const L=dl({panelConstraints:n,panelIndex:b,size:100})-M;if(w+=L,b+=_,b<0||b>=n.length)break}const S=Math.min(Math.abs(t),Math.abs(w));t=t<0?0-S:S}{let b=t<0?d:f;for(;b>=0&&b<n.length;){const w=Math.abs(t)-Math.abs(p),S=e[b];Be(S!=null,`Previous layout not found for panel index ${b}`);const M=S-w,C=dl({panelConstraints:n,panelIndex:b,size:M});if(!rr(S,C)&&(p+=S-C,c[b]=C,p.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?b--:b++}}if(z3(a,c))return a;{const _=t<0?f:d,b=e[_];Be(b!=null,`Previous layout not found for panel index ${_}`);const w=b+p,S=dl({panelConstraints:n,panelIndex:_,size:w});if(c[_]=S,!rr(S,w)){let M=w-S,L=t<0?f:d;for(;L>=0&&L<n.length;){const B=c[L];Be(B!=null,`Previous layout not found for panel index ${L}`);const G=B+M,j=dl({panelConstraints:n,panelIndex:L,size:G});if(rr(B,j)||(M-=j-B,c[L]=j),rr(M,0))break;t>0?L--:L++}}}const y=c.reduce((_,b)=>b+_,0);return rr(y,100)?c:a}function U3({layout:t,panelsArray:e,pivotIndices:n}){let i=0,a=100,l=0,c=0;const d=n[0];Be(d!=null,"No pivot index found"),e.forEach((_,b)=>{const{constraints:w}=_,{maxSize:S=100,minSize:M=0}=w;b===d?(i=M,a=S):(l+=M,c+=S)});const f=Math.min(a,100-l),p=Math.max(i,100-c),y=t[d];return{valueMax:f,valueMin:p,valueNow:y}}function wu(t,e=document){return Array.from(e.querySelectorAll(`[${It.resizeHandleId}][data-panel-group-id="${t}"]`))}function YT(t,e,n=document){const a=wu(t,n).findIndex(l=>l.getAttribute(It.resizeHandleId)===e);return a??null}function KT(t,e,n){const i=YT(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function j3(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function XT(t,e=document){if(j3(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function zf(t,e=document){const n=e.querySelector(`[${It.resizeHandleId}="${t}"]`);return n||null}function B3(t,e,n,i=document){var a,l,c,d;const f=zf(e,i),p=wu(t,i),y=f?p.indexOf(f):-1,_=(a=(l=n[y])===null||l===void 0?void 0:l.id)!==null&&a!==void 0?a:null,b=(c=(d=n[y+1])===null||d===void 0?void 0:d.id)!==null&&c!==void 0?c:null;return[_,b]}function H3({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:a,panelGroupElement:l,setLayout:c}){$.useRef({didWarnAboutMissingResizeHandle:!1}),Fa(()=>{if(!l)return;const d=wu(n,l);for(let f=0;f<a.length-1;f++){const{valueMax:p,valueMin:y,valueNow:_}=U3({layout:i,panelsArray:a,pivotIndices:[f,f+1]}),b=d[f];if(b!=null){const w=a[f];Be(w,`No panel data found for index "${f}"`),b.setAttribute("aria-controls",w.id),b.setAttribute("aria-valuemax",""+Math.round(p)),b.setAttribute("aria-valuemin",""+Math.round(y)),b.setAttribute("aria-valuenow",_!=null?""+Math.round(_):"")}}return()=>{d.forEach((f,p)=>{f.removeAttribute("aria-controls"),f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow")})}},[n,i,a,l]),$.useEffect(()=>{if(!l)return;const d=e.current;Be(d,"Eager values not found");const{panelDataArray:f}=d,p=XT(n,l);Be(p!=null,`No group found for id "${n}"`);const y=wu(n,l);Be(y,`No resize handles found for group id "${n}"`);const _=y.map(b=>{const w=b.getAttribute(It.resizeHandleId);Be(w,"Resize handle element has no handle id attribute");const[S,M]=B3(n,w,f,l);if(S==null||M==null)return()=>{};const C=L=>{if(!L.defaultPrevented)switch(L.key){case"Enter":{L.preventDefault();const B=f.findIndex(G=>G.id===S);if(B>=0){const G=f[B];Be(G,`No panel data found for index ${B}`);const j=i[B],{collapsedSize:J=0,collapsible:ee,minSize:O=0}=G.constraints;if(j!=null&&ee){const A=eu({delta:rr(j,J)?O-J:J-j,initialLayout:i,panelConstraints:f.map(R=>R.constraints),pivotIndices:KT(n,w,l),prevLayout:i,trigger:"keyboard"});i!==A&&c(A)}}break}}};return b.addEventListener("keydown",C),()=>{b.removeEventListener("keydown",C)}});return()=>{_.forEach(b=>b())}},[l,t,e,n,i,a,c])}function xw(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function QT(t,e){const n=t==="horizontal",{x:i,y:a}=Vf(e);return n?i:a}function q3(t,e,n,i,a){const l=n==="horizontal",c=zf(e,a);Be(c,`No resize handle element found for id "${e}"`);const d=c.getAttribute(It.groupId);Be(d,"Resize handle element has no group id attribute");let{initialCursorPosition:f}=i;const p=QT(n,t),y=XT(d,a);Be(y,`No group element found for id "${d}"`);const _=y.getBoundingClientRect(),b=l?_.width:_.height;return(p-f)/b*100}function $3(t,e,n,i,a,l){if(zT(t)){const c=n==="horizontal";let d=0;t.shiftKey?d=100:a!=null?d=a:d=10;let f=0;switch(t.key){case"ArrowDown":f=c?0:d;break;case"ArrowLeft":f=c?-d:0;break;case"ArrowRight":f=c?d:0;break;case"ArrowUp":f=c?0:-d;break;case"End":f=100;break;case"Home":f=-100;break}return f}else return i==null?0:q3(t,e,n,i,l)}function F3({panelDataArray:t}){const e=Array(t.length),n=t.map(l=>l.constraints);let i=0,a=100;for(let l=0;l<t.length;l++){const c=n[l];Be(c,`Panel constraints not found for index ${l}`);const{defaultSize:d}=c;d!=null&&(i++,e[l]=d,a-=d)}for(let l=0;l<t.length;l++){const c=n[l];Be(c,`Panel constraints not found for index ${l}`);const{defaultSize:d}=c;if(d!=null)continue;const f=t.length-i,p=a/f;i++,e[l]=p,a-=p}return e}function rl(t,e,n){e.forEach((i,a)=>{const l=t[a];Be(l,`Panel data not found for index ${a}`);const{callbacks:c,constraints:d,id:f}=l,{collapsedSize:p=0,collapsible:y}=d,_=n[f];if(_==null||i!==_){n[f]=i;const{onCollapse:b,onExpand:w,onResize:S}=c;S&&S(i,_),y&&(b||w)&&(w&&(_==null||Ki(_,p))&&!Ki(i,p)&&w(),b&&(_==null||!Ki(_,p))&&Ki(i,p)&&b())}})}function xh(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function G3({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:a,precision:l=3}){const c=n[a];let d;return c==null?d=t!=null?t.toPrecision(l):"1":i.length===1?d="1":d=c.toPrecision(l),{flexBasis:0,flexGrow:d,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function Y3(t,e=10){let n=null;return(...a)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...a)},e)}}function Tw(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function WT(t){return`react-resizable-panels:${t}`}function ZT(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:a,order:l}=e;return a?i:l?`${l}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function JT(t,e){try{const n=WT(t),i=e.getItem(n);if(i){const a=JSON.parse(i);if(typeof a=="object"&&a!=null)return a}}catch{}return null}function K3(t,e,n){var i,a;const l=(i=JT(t,n))!==null&&i!==void 0?i:{},c=ZT(e);return(a=l[c])!==null&&a!==void 0?a:null}function X3(t,e,n,i,a){var l;const c=WT(t),d=ZT(e),f=(l=JT(t,a))!==null&&l!==void 0?l:{};f[d]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{a.setItem(c,JSON.stringify(f))}catch(p){console.error(p)}}function Sw({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((l,c)=>l+c,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(l=>`${l}%`).join(", ")}`);if(!rr(i,100)&&n.length>0)for(let l=0;l<e.length;l++){const c=n[l];Be(c!=null,`No layout data found for index ${l}`);const d=100/i*c;n[l]=d}let a=0;for(let l=0;l<e.length;l++){const c=n[l];Be(c!=null,`No layout data found for index ${l}`);const d=dl({panelConstraints:e,panelIndex:l,size:c});c!=d&&(a+=c-d,n[l]=d)}if(!rr(a,0))for(let l=0;l<e.length;l++){const c=n[l];Be(c!=null,`No layout data found for index ${l}`);const d=c+a,f=dl({panelConstraints:e,panelIndex:l,size:d});if(c!==f&&(a-=f-c,n[l]=f,rr(a,0)))break}return n}const Q3=100,tu={getItem:t=>(Tw(tu),tu.getItem(t)),setItem:(t,e)=>{Tw(tu),tu.setItem(t,e)}},Aw={};function eS({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:a,id:l=null,onLayout:c=null,keyboardResizeBy:d=null,storage:f=tu,style:p,tagName:y="div",..._}){const b=W0(l),w=$.useRef(null),[S,M]=$.useState(null),[C,L]=$.useState([]),B=L3(),G=$.useRef({}),j=$.useRef(new Map),J=$.useRef(0),ee=$.useRef({autoSaveId:t,direction:i,dragState:S,id:b,keyboardResizeBy:d,onLayout:c,storage:f}),O=$.useRef({layout:C,panelDataArray:[],panelDataArrayChanged:!1});$.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),$.useImperativeHandle(a,()=>({getId:()=>ee.current.id,getLayout:()=>{const{layout:X}=O.current;return X},setLayout:X=>{const{onLayout:re}=ee.current,{layout:de,panelDataArray:ue}=O.current,ye=Sw({layout:X,panelConstraints:ue.map(_e=>_e.constraints)});xw(de,ye)||(L(ye),O.current.layout=ye,re&&re(ye),rl(ue,ye,G.current))}}),[]),Fa(()=>{ee.current.autoSaveId=t,ee.current.direction=i,ee.current.dragState=S,ee.current.id=b,ee.current.onLayout=c,ee.current.storage=f}),H3({committedValuesRef:ee,eagerValuesRef:O,groupId:b,layout:C,panelDataArray:O.current.panelDataArray,setLayout:L,panelGroupElement:w.current}),$.useEffect(()=>{const{panelDataArray:X}=O.current;if(t){if(C.length===0||C.length!==X.length)return;let re=Aw[t];re==null&&(re=Y3(X3,Q3),Aw[t]=re);const de=[...X],ue=new Map(j.current);re(t,de,ue,C,f)}},[t,C,f]),$.useEffect(()=>{});const A=$.useCallback(X=>{const{onLayout:re}=ee.current,{layout:de,panelDataArray:ue}=O.current;if(X.constraints.collapsible){const ye=ue.map(nt=>nt.constraints),{collapsedSize:_e=0,panelSize:Ae,pivotIndices:Ne}=za(ue,X,de);if(Be(Ae!=null,`Panel size not found for panel "${X.id}"`),!Ki(Ae,_e)){j.current.set(X.id,Ae);const rt=sl(ue,X)===ue.length-1?Ae-_e:_e-Ae,Pe=eu({delta:rt,initialLayout:de,panelConstraints:ye,pivotIndices:Ne,prevLayout:de,trigger:"imperative-api"});xh(de,Pe)||(L(Pe),O.current.layout=Pe,re&&re(Pe),rl(ue,Pe,G.current))}}},[]),R=$.useCallback((X,re)=>{const{onLayout:de}=ee.current,{layout:ue,panelDataArray:ye}=O.current;if(X.constraints.collapsible){const _e=ye.map($e=>$e.constraints),{collapsedSize:Ae=0,panelSize:Ne=0,minSize:nt=0,pivotIndices:rt}=za(ye,X,ue),Pe=re??nt;if(Ki(Ne,Ae)){const $e=j.current.get(X.id),Ue=$e!=null&&$e>=Pe?$e:Pe,ze=sl(ye,X)===ye.length-1?Ne-Ue:Ue-Ne,Ee=eu({delta:ze,initialLayout:ue,panelConstraints:_e,pivotIndices:rt,prevLayout:ue,trigger:"imperative-api"});xh(ue,Ee)||(L(Ee),O.current.layout=Ee,de&&de(Ee),rl(ye,Ee,G.current))}}},[]),z=$.useCallback(X=>{const{layout:re,panelDataArray:de}=O.current,{panelSize:ue}=za(de,X,re);return Be(ue!=null,`Panel size not found for panel "${X.id}"`),ue},[]),U=$.useCallback((X,re)=>{const{panelDataArray:de}=O.current,ue=sl(de,X);return G3({defaultSize:re,dragState:S,layout:C,panelData:de,panelIndex:ue})},[S,C]),H=$.useCallback(X=>{const{layout:re,panelDataArray:de}=O.current,{collapsedSize:ue=0,collapsible:ye,panelSize:_e}=za(de,X,re);return Be(_e!=null,`Panel size not found for panel "${X.id}"`),ye===!0&&Ki(_e,ue)},[]),I=$.useCallback(X=>{const{layout:re,panelDataArray:de}=O.current,{collapsedSize:ue=0,collapsible:ye,panelSize:_e}=za(de,X,re);return Be(_e!=null,`Panel size not found for panel "${X.id}"`),!ye||Ka(_e,ue)>0},[]),P=$.useCallback(X=>{const{panelDataArray:re}=O.current;re.push(X),re.sort((de,ue)=>{const ye=de.order,_e=ue.order;return ye==null&&_e==null?0:ye==null?-1:_e==null?1:ye-_e}),O.current.panelDataArrayChanged=!0,B()},[B]);Fa(()=>{if(O.current.panelDataArrayChanged){O.current.panelDataArrayChanged=!1;const{autoSaveId:X,onLayout:re,storage:de}=ee.current,{layout:ue,panelDataArray:ye}=O.current;let _e=null;if(X){const Ne=K3(X,ye,de);Ne&&(j.current=new Map(Object.entries(Ne.expandToSizes)),_e=Ne.layout)}_e==null&&(_e=F3({panelDataArray:ye}));const Ae=Sw({layout:_e,panelConstraints:ye.map(Ne=>Ne.constraints)});xw(ue,Ae)||(L(Ae),O.current.layout=Ae,re&&re(Ae),rl(ye,Ae,G.current))}}),Fa(()=>{const X=O.current;return()=>{X.layout=[]}},[]);const Y=$.useCallback(X=>{let re=!1;const de=w.current;return de&&window.getComputedStyle(de,null).getPropertyValue("direction")==="rtl"&&(re=!0),function(ye){ye.preventDefault();const _e=w.current;if(!_e)return()=>null;const{direction:Ae,dragState:Ne,id:nt,keyboardResizeBy:rt,onLayout:Pe}=ee.current,{layout:$e,panelDataArray:Ue}=O.current,{initialLayout:Lt}=Ne??{},ze=KT(nt,X,_e);let Ee=$3(ye,X,Ae,Ne,rt,_e);const At=Ae==="horizontal";At&&re&&(Ee=-Ee);const vn=Ue.map(An=>An.constraints),Gt=eu({delta:Ee,initialLayout:Lt??$e,panelConstraints:vn,pivotIndices:ze,prevLayout:$e,trigger:zT(ye)?"keyboard":"mouse-or-touch"}),Fn=!xh($e,Gt);(UT(ye)||jT(ye))&&J.current!=Ee&&(J.current=Ee,!Fn&&Ee!==0?At?Rm(X,Ee<0?HT:qT):Rm(X,Ee<0?$T:FT):Rm(X,0)),Fn&&(L(Gt),O.current.layout=Gt,Pe&&Pe(Gt),rl(Ue,Gt,G.current))}},[]),D=$.useCallback((X,re)=>{const{onLayout:de}=ee.current,{layout:ue,panelDataArray:ye}=O.current,_e=ye.map($e=>$e.constraints),{panelSize:Ae,pivotIndices:Ne}=za(ye,X,ue);Be(Ae!=null,`Panel size not found for panel "${X.id}"`);const rt=sl(ye,X)===ye.length-1?Ae-re:re-Ae,Pe=eu({delta:rt,initialLayout:ue,panelConstraints:_e,pivotIndices:Ne,prevLayout:ue,trigger:"imperative-api"});xh(ue,Pe)||(L(Pe),O.current.layout=Pe,de&&de(Pe),rl(ye,Pe,G.current))},[]),q=$.useCallback((X,re)=>{const{layout:de,panelDataArray:ue}=O.current,{collapsedSize:ye=0,collapsible:_e}=re,{collapsedSize:Ae=0,collapsible:Ne,maxSize:nt=100,minSize:rt=0}=X.constraints,{panelSize:Pe}=za(ue,X,de);Pe!=null&&(_e&&Ne&&Ki(Pe,ye)?Ki(ye,Ae)||D(X,Ae):Pe<rt?D(X,rt):Pe>nt&&D(X,nt))},[D]),W=$.useCallback((X,re)=>{const{direction:de}=ee.current,{layout:ue}=O.current;if(!w.current)return;const ye=zf(X,w.current);Be(ye,`Drag handle element not found for id "${X}"`);const _e=QT(de,re);M({dragHandleId:X,dragHandleRect:ye.getBoundingClientRect(),initialCursorPosition:_e,initialLayout:ue})},[]),Q=$.useCallback(()=>{M(null)},[]),k=$.useCallback(X=>{const{panelDataArray:re}=O.current,de=sl(re,X);de>=0&&(re.splice(de,1),delete G.current[X.id],O.current.panelDataArrayChanged=!0,B())},[B]),F=$.useMemo(()=>({collapsePanel:A,direction:i,dragState:S,expandPanel:R,getPanelSize:z,getPanelStyle:U,groupId:b,isPanelCollapsed:H,isPanelExpanded:I,reevaluatePanelConstraints:q,registerPanel:P,registerResizeHandle:Y,resizePanel:D,startDragging:W,stopDragging:Q,unregisterPanel:k,panelGroupElement:w.current}),[A,S,i,R,z,U,b,H,I,q,P,Y,D,W,Q,k]),te={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return $.createElement(Pf.Provider,{value:F},$.createElement(y,{..._,children:e,className:n,id:l,ref:w,style:{...te,...p},[It.group]:"",[It.groupDirection]:i,[It.groupId]:b}))}const tS=$.forwardRef((t,e)=>$.createElement(eS,{...t,forwardedRef:e}));eS.displayName="PanelGroup";tS.displayName="forwardRef(PanelGroup)";function sl(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function za(t,e,n){const i=sl(t,e),l=i===t.length-1?[i-1,i]:[i,i+1],c=n[i];return{...e.constraints,panelSize:c,pivotIndices:l}}function W3({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){$.useEffect(()=>{if(t||n==null||i==null)return;const a=zf(e,i);if(a==null)return;const l=c=>{if(!c.defaultPrevented)switch(c.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{c.preventDefault(),n(c);break}case"F6":{c.preventDefault();const d=a.getAttribute(It.groupId);Be(d,`No group element found for id "${d}"`);const f=wu(d,i),p=YT(d,e,i);Be(p!==null,`No resize element found for id "${e}"`);const y=c.shiftKey?p>0?p-1:f.length-1:p+1<f.length?p+1:0;f[y].focus();break}}};return a.addEventListener("keydown",l),()=>{a.removeEventListener("keydown",l)}},[i,t,e,n])}function nS({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:i,id:a,onBlur:l,onClick:c,onDragging:d,onFocus:f,onPointerDown:p,onPointerUp:y,style:_={},tabIndex:b=0,tagName:w="div",...S}){var M,C;const L=$.useRef(null),B=$.useRef({onClick:c,onDragging:d,onPointerDown:p,onPointerUp:y});$.useEffect(()=>{B.current.onClick=c,B.current.onDragging=d,B.current.onPointerDown=p,B.current.onPointerUp=y});const G=$.useContext(Pf);if(G===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:j,groupId:J,registerResizeHandle:ee,startDragging:O,stopDragging:A,panelGroupElement:R}=G,z=W0(a),[U,H]=$.useState("inactive"),[I,P]=$.useState(!1),[Y,D]=$.useState(null),q=$.useRef({state:U});Fa(()=>{q.current.state=U}),$.useEffect(()=>{if(n)D(null);else{const F=ee(z);D(()=>F)}},[n,z,ee]);const W=(M=i?.coarse)!==null&&M!==void 0?M:15,Q=(C=i?.fine)!==null&&C!==void 0?C:5;$.useEffect(()=>{if(n||Y==null)return;const F=L.current;Be(F,"Element ref not attached");let te=!1;return P3(z,F,j,{coarse:W,fine:Q},(re,de,ue)=>{if(!de){H("inactive");return}switch(re){case"down":{H("drag"),te=!1,Be(ue,'Expected event to be defined for "down" action'),O(z,ue);const{onDragging:ye,onPointerDown:_e}=B.current;ye?.(!0),_e?.();break}case"move":{const{state:ye}=q.current;te=!0,ye!=="drag"&&H("hover"),Be(ue,'Expected event to be defined for "move" action'),Y(ue);break}case"up":{H("hover"),A();const{onClick:ye,onDragging:_e,onPointerUp:Ae}=B.current;_e?.(!1),Ae?.(),te||ye?.();break}}})},[W,j,n,Q,ee,z,Y,O,A]),W3({disabled:n,handleId:z,resizeHandler:Y,panelGroupElement:R});const k={touchAction:"none",userSelect:"none"};return $.createElement(w,{...S,children:t,className:e,id:a,onBlur:()=>{P(!1),l?.()},onFocus:()=>{P(!0),f?.()},ref:L,role:"separator",style:{...k,..._},tabIndex:b,[It.groupDirection]:j,[It.groupId]:J,[It.resizeHandle]:"",[It.resizeHandleActive]:U==="drag"?"pointer":I?"keyboard":void 0,[It.resizeHandleEnabled]:!n,[It.resizeHandleId]:z,[It.resizeHandleState]:U})}nS.displayName="PanelResizeHandle";const rS=t=>{const e=[],n=t.split("_");for(let i=0;i<n.length;i++)if(i%2===0)n[i].split(/\s+/).filter(l=>l.trim()!=="").forEach(l=>{e.push({word:l.trim()})});else{const a=n[i].trim();a.split(/\s+/).filter(c=>c.trim()!=="").forEach(c=>{e.push({word:c.trim(),myConcept:a})})}return e},Rw=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},Z3=t=>{if(!t)return"#000000";const e=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16);return(e*299+n*587+i*114)/1e3>=128?"#000000":"#ffffff"},Vh=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.slice(1):t,i=parseInt(n.slice(0,2),16),a=parseInt(n.slice(2,4),16),l=parseInt(n.slice(4,6),16);const c=f=>Math.max(0,Math.min(255,f)),d=1-e;return i=c(Math.round(i*d)),a=c(Math.round(a*d)),l=c(Math.round(l*d)),`#${[i,a,l].map(f=>f.toString(16).padStart(2,"0")).join("")}`},J3=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),a=parseInt(e.substr(4,2),16),l=30,c=Math.min(255,Math.max(0,n+(Math.random()-.5)*l*2)),d=Math.min(255,Math.max(0,i+(Math.random()-.5)*l*2)),f=Math.min(255,Math.max(0,a+(Math.random()-.5)*l*2));return`#${Math.round(c).toString(16).padStart(2,"0")}${Math.round(d).toString(16).padStart(2,"0")}${Math.round(f).toString(16).padStart(2,"0")}`},eM=t=>{const i=(Math.random()-.5)*150*2;return{x:t.x+i,y:t.y+200}},tM=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,nM=(t,e)=>`edge_${t}_${e}`,rM=(t,e,n,i,a,l,c)=>({id:tM(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:i,full_text:n,suggestions:[],myColor:a,tokenColors:{},previousNode:c}}),iM=(t,e,n,i)=>({id:nM(t,e),source:t,target:e,sourceHandle:i,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:Ya.ArrowClosed,color:n}}),sM=()=>{};var Nw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},aM=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const a=t[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],c=t[n++],d=t[n++],f=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const l=t[n++],c=t[n++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},sS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<t.length;a+=3){const l=t[a],c=a+1<t.length,d=c?t[a+1]:0,f=a+2<t.length,p=f?t[a+2]:0,y=l>>2,_=(l&3)<<4|d>>4;let b=(d&15)<<2|p>>6,w=p&63;f||(w=64,c||(b=64)),i.push(n[y],n[_],n[b],n[w])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(iS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],d=a<t.length?n[t.charAt(a)]:0;++a;const p=a<t.length?n[t.charAt(a)]:64;++a;const _=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||d==null||p==null||_==null)throw new oM;const b=l<<2|d>>4;if(i.push(b),p!==64){const w=d<<4&240|p>>2;if(i.push(w),_!==64){const S=p<<6&192|_;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lM=function(t){const e=iS(t);return sS.encodeByteArray(e,!0)},rf=function(t){return lM(t).replace(/\./g,"")},aS=function(t){try{return sS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=()=>cM().__FIREBASE_DEFAULTS__,dM=()=>{if(typeof process>"u"||typeof Nw>"u")return;const t=Nw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&aS(t[1]);return e&&JSON.parse(e)},Uf=()=>{try{return sM()||uM()||dM()||hM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oS=t=>{var e,n;return(n=(e=Uf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},lS=t=>{const e=oS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},cS=()=>{var t;return(t=Uf())===null||t===void 0?void 0:t.config},uS=t=>{var e;return(e=Uf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(t){return t.endsWith(".cloudworkstations.dev")}async function ey(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rf(JSON.stringify(n)),rf(JSON.stringify(c)),""].join(".")}const ou={};function pM(){const t={prod:[],emulator:[]};for(const e of Object.keys(ou))ou[e]?t.emulator.push(e):t.prod.push(e);return t}function mM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Cw=!1;function ty(t,e){if(typeof window>"u"||typeof document>"u"||!no(window.location.host)||ou[t]===e||ou[t]||Cw)return;ou[t]=e;function n(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=pM().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,w){b.setAttribute("width","24"),b.setAttribute("id",w),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function p(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Cw=!0,c()},b}function y(b,w){b.setAttribute("id",w),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function _(){const b=mM(i),w=n("text"),S=document.getElementById(w)||document.createElement("span"),M=n("learnmore"),C=document.getElementById(M)||document.createElement("a"),L=n("preprendIcon"),B=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const G=b.element;d(G),y(C,M);const j=p();f(B,L),G.append(B,S,C,j),document.body.appendChild(G)}l?(S.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function vM(){var t;const e=(t=Uf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _M(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function EM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wM(){const t=Sn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xM(){return!vM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TM(){try{return typeof indexedDB=="object"}catch{return!1}}function SM(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM="FirebaseError";class wi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=AM,Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lu.prototype.create)}}class Lu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?RM(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new wi(a,d,i)}}function RM(t,e){return t.replace(NM,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const NM=/\{\$([^}]+)}/g;function CM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xa(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const l=t[a],c=e[a];if(Iw(l)&&Iw(c)){if(!Xa(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function Iw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function nu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function ru(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function IM(t,e){const n=new kM(t,e);return n.subscribe.bind(n)}class kM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let a;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");DM(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:i},a.next===void 0&&(a.next=Cm),a.error===void 0&&(a.error=Cm),a.complete===void 0&&(a.complete=Cm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){return t&&t._delegate?t._delegate:t}class Ws{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new fM;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e?.identifier),a=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PM(e))try{this.getOrInitializeService({instanceIdentifier:ja})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=ja){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ja){return this.instances.has(e)}getOptions(e=ja){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,n){var i;const a=this.normalizeInstanceIdentifier(n),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:OM(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ja){return this.component?this.component.multipleInstances?e:ja:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OM(t){return t===ja?void 0:t}function PM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new MM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qe||(Qe={}));const LM={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},zM=Qe.INFO,UM={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},jM=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),a=UM[e];if(a)console[a](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ny{constructor(e){this.name=e,this._logLevel=zM,this._logHandler=jM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const BM=(t,e)=>e.some(n=>t instanceof n);let kw,Dw;function HM(){return kw||(kw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qM(){return Dw||(Dw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dS=new WeakMap,s0=new WeakMap,hS=new WeakMap,Im=new WeakMap,ry=new WeakMap;function $M(t){const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{n(Fs(t.result)),a()},c=()=>{i(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&dS.set(n,t)}).catch(()=>{}),ry.set(e,t),e}function FM(t){if(s0.has(t))return;const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});s0.set(t,e)}let a0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return s0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GM(t){a0=t(a0)}function YM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(km(this),e,...n);return hS.set(i,e.sort?e.sort():[e]),Fs(i)}:qM().includes(t)?function(...e){return t.apply(km(this),e),Fs(dS.get(this))}:function(...e){return Fs(t.apply(km(this),e))}}function KM(t){return typeof t=="function"?YM(t):(t instanceof IDBTransaction&&FM(t),BM(t,HM())?new Proxy(t,a0):t)}function Fs(t){if(t instanceof IDBRequest)return $M(t);if(Im.has(t))return Im.get(t);const e=KM(t);return e!==t&&(Im.set(t,e),ry.set(e,t)),e}const km=t=>ry.get(t);function XM(t,e,{blocked:n,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(t,e),d=Fs(c);return i&&c.addEventListener("upgradeneeded",f=>{i(Fs(c.result),f.oldVersion,f.newVersion,Fs(c.transaction),f)}),n&&c.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),d.then(f=>{l&&f.addEventListener("close",()=>l()),a&&f.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const QM=["get","getKey","getAll","getAllKeys","count"],WM=["put","add","delete","clear"],Dm=new Map;function Mw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dm.get(e))return Dm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=WM.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||QM.includes(n)))return;const l=async function(c,...d){const f=this.transaction(c,a?"readwrite":"readonly");let p=f.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[n](...d),a&&f.done]))[0]};return Dm.set(e,l),l}GM(t=>({...t,get:(e,n,i)=>Mw(e,n)||t.get(e,n,i),has:(e,n)=>!!Mw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JM(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function JM(t){const e=t.getComponent();return e?.type==="VERSION"}const o0="@firebase/app",Ow="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts=new ny("@firebase/app"),eO="@firebase/app-compat",tO="@firebase/analytics-compat",nO="@firebase/analytics",rO="@firebase/app-check-compat",iO="@firebase/app-check",sO="@firebase/auth",aO="@firebase/auth-compat",oO="@firebase/database",lO="@firebase/data-connect",cO="@firebase/database-compat",uO="@firebase/functions",dO="@firebase/functions-compat",hO="@firebase/installations",fO="@firebase/installations-compat",gO="@firebase/messaging",pO="@firebase/messaging-compat",mO="@firebase/performance",yO="@firebase/performance-compat",vO="@firebase/remote-config",_O="@firebase/remote-config-compat",bO="@firebase/storage",EO="@firebase/storage-compat",wO="@firebase/firestore",xO="@firebase/ai",TO="@firebase/firestore-compat",SO="firebase",AO="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="[DEFAULT]",RO={[o0]:"fire-core",[eO]:"fire-core-compat",[nO]:"fire-analytics",[tO]:"fire-analytics-compat",[iO]:"fire-app-check",[rO]:"fire-app-check-compat",[sO]:"fire-auth",[aO]:"fire-auth-compat",[oO]:"fire-rtdb",[lO]:"fire-data-connect",[cO]:"fire-rtdb-compat",[uO]:"fire-fn",[dO]:"fire-fn-compat",[hO]:"fire-iid",[fO]:"fire-iid-compat",[gO]:"fire-fcm",[pO]:"fire-fcm-compat",[mO]:"fire-perf",[yO]:"fire-perf-compat",[vO]:"fire-rc",[_O]:"fire-rc-compat",[bO]:"fire-gcs",[EO]:"fire-gcs-compat",[wO]:"fire-fst",[TO]:"fire-fst-compat",[xO]:"fire-vertex","fire-js":"fire-js",[SO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=new Map,NO=new Map,c0=new Map;function Pw(t,e){try{t.container.addComponent(e)}catch(n){ts.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qa(t){const e=t.name;if(c0.has(e))return ts.debug(`There were multiple attempts to register component ${e}.`),!1;c0.set(e,t);for(const n of sf.values())Pw(n,t);for(const n of NO.values())Pw(n,t);return!0}function jf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ir(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gs=new Lu("app","Firebase",CO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=AO;function fS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:l0,automaticDataCollectionEnabled:!0},e),a=i.name;if(typeof a!="string"||!a)throw Gs.create("bad-app-name",{appName:String(a)});if(n||(n=cS()),!n)throw Gs.create("no-options");const l=sf.get(a);if(l){if(Xa(n,l.options)&&Xa(i,l.config))return l;throw Gs.create("duplicate-app",{appName:a})}const c=new VM(a);for(const f of c0.values())c.addComponent(f);const d=new IO(n,i,c);return sf.set(a,d),d}function iy(t=l0){const e=sf.get(t);if(!e&&t===l0&&cS())return fS();if(!e)throw Gs.create("no-app",{appName:t});return e}function pi(t,e,n){var i;let a=(i=RO[t])!==null&&i!==void 0?i:t;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ts.warn(d.join(" "));return}Qa(new Ws(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO="firebase-heartbeat-database",DO=1,xu="firebase-heartbeat-store";let Mm=null;function gS(){return Mm||(Mm=XM(kO,DO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gs.create("idb-open",{originalErrorMessage:t.message})})),Mm}async function MO(t){try{const n=(await gS()).transaction(xu),i=await n.objectStore(xu).get(pS(t));return await n.done,i}catch(e){if(e instanceof wi)ts.warn(e.message);else{const n=Gs.create("idb-get",{originalErrorMessage:e?.message});ts.warn(n.message)}}}async function Vw(t,e){try{const i=(await gS()).transaction(xu,"readwrite");await i.objectStore(xu).put(e,pS(t)),await i.done}catch(n){if(n instanceof wi)ts.warn(n.message);else{const i=Gs.create("idb-set",{originalErrorMessage:n?.message});ts.warn(i.message)}}}function pS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=1024,PO=30;class VO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zO(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Lw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>PO){const c=UO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ts.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Lw(),{heartbeatsToSend:i,unsentEntries:a}=LO(this._heartbeatsCache.heartbeats),l=rf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return ts.warn(n),""}}}function Lw(){return new Date().toISOString().substring(0,10)}function LO(t,e=OO){const n=[];let i=t.slice();for(const a of t){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),zw(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),zw(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class zO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TM()?SM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await MO(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Vw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Vw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function zw(t){return rf(JSON.stringify({version:2,heartbeats:t})).length}function UO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(t){Qa(new Ws("platform-logger",e=>new ZM(e),"PRIVATE")),Qa(new Ws("heartbeat",e=>new VO(e),"PRIVATE")),pi(o0,Ow,t),pi(o0,Ow,"esm2017"),pi("fire-js","")}jO("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO="type.googleapis.com/google.protobuf.Int64Value",HO="type.googleapis.com/google.protobuf.UInt64Value";function mS(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function af(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>af(e));if(typeof t=="function"||typeof t=="object")return mS(t,e=>af(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Al(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case BO:case HO:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Al(e)):typeof t=="function"||typeof t=="object"?mS(t,e=>Al(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $n extends wi{constructor(e,n,i){super(`${sy}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,$n.prototype)}}function qO(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function of(t,e){let n=qO(t),i=n,a;try{const l=e&&e.error;if(l){const c=l.status;if(typeof c=="string"){if(!Uw[c])return new $n("internal","internal");n=Uw[c],i=c}const d=l.message;typeof d=="string"&&(i=d),a=l.details,a!==void 0&&(a=Al(a))}}catch{}return n==="ok"?null:new $n(n,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,n,i,a){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ir(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||a?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="us-central1",FO=/^data: (.*?)(?:\n|$)/;function GO(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new $n("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class YO{constructor(e,n,i,a,l=u0,c=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new $O(e,n,i,a),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(l);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=u0}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function KO(t,e,n){const i=no(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(ey(t.emulatorOrigin),ty("Functions",!0))}function XO(t,e,n){const i=a=>WO(t,e,a,{});return i.stream=(a,l)=>JO(t,e,a,l),i}async function QO(t,e,n,i){n["Content-Type"]="application/json";let a;try{a=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let l=null;try{l=await a.json()}catch{}return{status:a.status,json:l}}async function yS(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function WO(t,e,n,i){const a=t._url(e);return ZO(t,a,n,i)}async function ZO(t,e,n,i){n=af(n);const a={data:n},l=await yS(t,i),c=i.timeout||7e4,d=GO(c),f=await Promise.race([QO(e,a,l,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!f)throw new $n("cancelled","Firebase Functions instance was deleted.");const p=of(f.status,f.json);if(p)throw p;if(!f.json)throw new $n("internal","Response is not valid JSON object.");let y=f.json.data;if(typeof y>"u"&&(y=f.json.result),typeof y>"u")throw new $n("internal","Response is missing data field.");return{data:Al(y)}}function JO(t,e,n,i){const a=t._url(e);return e6(t,a,n,i||{})}async function e6(t,e,n,i){var a;n=af(n);const l={data:n},c=await yS(t,i);c["Content-Type"]="application/json",c.Accept="text/event-stream";let d;try{d=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:c,signal:i?.signal})}catch(w){if(w instanceof Error&&w.name==="AbortError"){const M=new $n("cancelled","Request was cancelled.");return{data:Promise.reject(M),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(M)}}}}}}const S=of(0,null);return{data:Promise.reject(S),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(S)}}}}}}let f,p;const y=new Promise((w,S)=>{f=w,p=S});(a=i?.signal)===null||a===void 0||a.addEventListener("abort",()=>{const w=new $n("cancelled","Request was cancelled.");p(w)});const _=d.body.getReader(),b=t6(_,f,p,i?.signal);return{stream:{[Symbol.asyncIterator](){const w=b.getReader();return{async next(){const{value:S,done:M}=await w.read();return{value:S,done:M}},async return(){return await w.cancel(),{done:!0,value:void 0}}}}},data:y}}function t6(t,e,n,i){const a=(c,d)=>{const f=c.match(FO);if(!f)return;const p=f[1];try{const y=JSON.parse(p);if("result"in y){e(Al(y.result));return}if("message"in y){d.enqueue(Al(y.message));return}if("error"in y){const _=of(0,y);d.error(_),n(_);return}}catch(y){if(y instanceof $n){d.error(y),n(y);return}}},l=new TextDecoder;return new ReadableStream({start(c){let d="";return f();async function f(){if(i?.aborted){const p=new $n("cancelled","Request was cancelled");return c.error(p),n(p),Promise.resolve()}try{const{value:p,done:y}=await t.read();if(y){d.trim()&&a(d.trim(),c),c.close();return}if(i?.aborted){const b=new $n("cancelled","Request was cancelled");c.error(b),n(b),await t.cancel();return}d+=l.decode(p,{stream:!0});const _=d.split(`
`);d=_.pop()||"";for(const b of _)b.trim()&&a(b.trim(),c);return f()}catch(p){const y=p instanceof $n?p:of(0,null);c.error(y),n(y)}}},cancel(){return t.cancel()}})}const jw="@firebase/functions",Bw="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6="auth-internal",r6="app-check-internal",i6="messaging-internal";function s6(t){const e=(n,{instanceIdentifier:i})=>{const a=n.getProvider("app").getImmediate(),l=n.getProvider(n6),c=n.getProvider(i6),d=n.getProvider(r6);return new YO(a,l,c,d,i)};Qa(new Ws(sy,e,"PUBLIC").setMultipleInstances(!0)),pi(jw,Bw,t),pi(jw,Bw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(t=iy(),e=u0){const i=jf(Dt(t),sy).getImmediate({identifier:e}),a=lS("functions");return a&&vS(i,...a),i}function vS(t,e,n){KO(Dt(t),e,n)}function _S(t,e,n){return XO(Dt(t),e)}s6();var o6="firebase",l6="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(o6,l6,"app");var Hw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ys,bS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,A){function R(){}R.prototype=A.prototype,O.D=A.prototype,O.prototype=new R,O.prototype.constructor=O,O.C=function(z,U,H){for(var I=Array(arguments.length-2),P=2;P<arguments.length;P++)I[P-2]=arguments[P];return A.prototype[U].apply(z,I)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(O,A,R){R||(R=0);var z=Array(16);if(typeof A=="string")for(var U=0;16>U;++U)z[U]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(U=0;16>U;++U)z[U]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=O.g[0],R=O.g[1],U=O.g[2];var H=O.g[3],I=A+(H^R&(U^H))+z[0]+3614090360&4294967295;A=R+(I<<7&4294967295|I>>>25),I=H+(U^A&(R^U))+z[1]+3905402710&4294967295,H=A+(I<<12&4294967295|I>>>20),I=U+(R^H&(A^R))+z[2]+606105819&4294967295,U=H+(I<<17&4294967295|I>>>15),I=R+(A^U&(H^A))+z[3]+3250441966&4294967295,R=U+(I<<22&4294967295|I>>>10),I=A+(H^R&(U^H))+z[4]+4118548399&4294967295,A=R+(I<<7&4294967295|I>>>25),I=H+(U^A&(R^U))+z[5]+1200080426&4294967295,H=A+(I<<12&4294967295|I>>>20),I=U+(R^H&(A^R))+z[6]+2821735955&4294967295,U=H+(I<<17&4294967295|I>>>15),I=R+(A^U&(H^A))+z[7]+4249261313&4294967295,R=U+(I<<22&4294967295|I>>>10),I=A+(H^R&(U^H))+z[8]+1770035416&4294967295,A=R+(I<<7&4294967295|I>>>25),I=H+(U^A&(R^U))+z[9]+2336552879&4294967295,H=A+(I<<12&4294967295|I>>>20),I=U+(R^H&(A^R))+z[10]+4294925233&4294967295,U=H+(I<<17&4294967295|I>>>15),I=R+(A^U&(H^A))+z[11]+2304563134&4294967295,R=U+(I<<22&4294967295|I>>>10),I=A+(H^R&(U^H))+z[12]+1804603682&4294967295,A=R+(I<<7&4294967295|I>>>25),I=H+(U^A&(R^U))+z[13]+4254626195&4294967295,H=A+(I<<12&4294967295|I>>>20),I=U+(R^H&(A^R))+z[14]+2792965006&4294967295,U=H+(I<<17&4294967295|I>>>15),I=R+(A^U&(H^A))+z[15]+1236535329&4294967295,R=U+(I<<22&4294967295|I>>>10),I=A+(U^H&(R^U))+z[1]+4129170786&4294967295,A=R+(I<<5&4294967295|I>>>27),I=H+(R^U&(A^R))+z[6]+3225465664&4294967295,H=A+(I<<9&4294967295|I>>>23),I=U+(A^R&(H^A))+z[11]+643717713&4294967295,U=H+(I<<14&4294967295|I>>>18),I=R+(H^A&(U^H))+z[0]+3921069994&4294967295,R=U+(I<<20&4294967295|I>>>12),I=A+(U^H&(R^U))+z[5]+3593408605&4294967295,A=R+(I<<5&4294967295|I>>>27),I=H+(R^U&(A^R))+z[10]+38016083&4294967295,H=A+(I<<9&4294967295|I>>>23),I=U+(A^R&(H^A))+z[15]+3634488961&4294967295,U=H+(I<<14&4294967295|I>>>18),I=R+(H^A&(U^H))+z[4]+3889429448&4294967295,R=U+(I<<20&4294967295|I>>>12),I=A+(U^H&(R^U))+z[9]+568446438&4294967295,A=R+(I<<5&4294967295|I>>>27),I=H+(R^U&(A^R))+z[14]+3275163606&4294967295,H=A+(I<<9&4294967295|I>>>23),I=U+(A^R&(H^A))+z[3]+4107603335&4294967295,U=H+(I<<14&4294967295|I>>>18),I=R+(H^A&(U^H))+z[8]+1163531501&4294967295,R=U+(I<<20&4294967295|I>>>12),I=A+(U^H&(R^U))+z[13]+2850285829&4294967295,A=R+(I<<5&4294967295|I>>>27),I=H+(R^U&(A^R))+z[2]+4243563512&4294967295,H=A+(I<<9&4294967295|I>>>23),I=U+(A^R&(H^A))+z[7]+1735328473&4294967295,U=H+(I<<14&4294967295|I>>>18),I=R+(H^A&(U^H))+z[12]+2368359562&4294967295,R=U+(I<<20&4294967295|I>>>12),I=A+(R^U^H)+z[5]+4294588738&4294967295,A=R+(I<<4&4294967295|I>>>28),I=H+(A^R^U)+z[8]+2272392833&4294967295,H=A+(I<<11&4294967295|I>>>21),I=U+(H^A^R)+z[11]+1839030562&4294967295,U=H+(I<<16&4294967295|I>>>16),I=R+(U^H^A)+z[14]+4259657740&4294967295,R=U+(I<<23&4294967295|I>>>9),I=A+(R^U^H)+z[1]+2763975236&4294967295,A=R+(I<<4&4294967295|I>>>28),I=H+(A^R^U)+z[4]+1272893353&4294967295,H=A+(I<<11&4294967295|I>>>21),I=U+(H^A^R)+z[7]+4139469664&4294967295,U=H+(I<<16&4294967295|I>>>16),I=R+(U^H^A)+z[10]+3200236656&4294967295,R=U+(I<<23&4294967295|I>>>9),I=A+(R^U^H)+z[13]+681279174&4294967295,A=R+(I<<4&4294967295|I>>>28),I=H+(A^R^U)+z[0]+3936430074&4294967295,H=A+(I<<11&4294967295|I>>>21),I=U+(H^A^R)+z[3]+3572445317&4294967295,U=H+(I<<16&4294967295|I>>>16),I=R+(U^H^A)+z[6]+76029189&4294967295,R=U+(I<<23&4294967295|I>>>9),I=A+(R^U^H)+z[9]+3654602809&4294967295,A=R+(I<<4&4294967295|I>>>28),I=H+(A^R^U)+z[12]+3873151461&4294967295,H=A+(I<<11&4294967295|I>>>21),I=U+(H^A^R)+z[15]+530742520&4294967295,U=H+(I<<16&4294967295|I>>>16),I=R+(U^H^A)+z[2]+3299628645&4294967295,R=U+(I<<23&4294967295|I>>>9),I=A+(U^(R|~H))+z[0]+4096336452&4294967295,A=R+(I<<6&4294967295|I>>>26),I=H+(R^(A|~U))+z[7]+1126891415&4294967295,H=A+(I<<10&4294967295|I>>>22),I=U+(A^(H|~R))+z[14]+2878612391&4294967295,U=H+(I<<15&4294967295|I>>>17),I=R+(H^(U|~A))+z[5]+4237533241&4294967295,R=U+(I<<21&4294967295|I>>>11),I=A+(U^(R|~H))+z[12]+1700485571&4294967295,A=R+(I<<6&4294967295|I>>>26),I=H+(R^(A|~U))+z[3]+2399980690&4294967295,H=A+(I<<10&4294967295|I>>>22),I=U+(A^(H|~R))+z[10]+4293915773&4294967295,U=H+(I<<15&4294967295|I>>>17),I=R+(H^(U|~A))+z[1]+2240044497&4294967295,R=U+(I<<21&4294967295|I>>>11),I=A+(U^(R|~H))+z[8]+1873313359&4294967295,A=R+(I<<6&4294967295|I>>>26),I=H+(R^(A|~U))+z[15]+4264355552&4294967295,H=A+(I<<10&4294967295|I>>>22),I=U+(A^(H|~R))+z[6]+2734768916&4294967295,U=H+(I<<15&4294967295|I>>>17),I=R+(H^(U|~A))+z[13]+1309151649&4294967295,R=U+(I<<21&4294967295|I>>>11),I=A+(U^(R|~H))+z[4]+4149444226&4294967295,A=R+(I<<6&4294967295|I>>>26),I=H+(R^(A|~U))+z[11]+3174756917&4294967295,H=A+(I<<10&4294967295|I>>>22),I=U+(A^(H|~R))+z[2]+718787259&4294967295,U=H+(I<<15&4294967295|I>>>17),I=R+(H^(U|~A))+z[9]+3951481745&4294967295,O.g[0]=O.g[0]+A&4294967295,O.g[1]=O.g[1]+(U+(I<<21&4294967295|I>>>11))&4294967295,O.g[2]=O.g[2]+U&4294967295,O.g[3]=O.g[3]+H&4294967295}i.prototype.u=function(O,A){A===void 0&&(A=O.length);for(var R=A-this.blockSize,z=this.B,U=this.h,H=0;H<A;){if(U==0)for(;H<=R;)a(this,O,H),H+=this.blockSize;if(typeof O=="string"){for(;H<A;)if(z[U++]=O.charCodeAt(H++),U==this.blockSize){a(this,z),U=0;break}}else for(;H<A;)if(z[U++]=O[H++],U==this.blockSize){a(this,z),U=0;break}}this.h=U,this.o+=A},i.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var A=1;A<O.length-8;++A)O[A]=0;var R=8*this.o;for(A=O.length-8;A<O.length;++A)O[A]=R&255,R/=256;for(this.u(O),O=Array(16),A=R=0;4>A;++A)for(var z=0;32>z;z+=8)O[R++]=this.g[A]>>>z&255;return O};function l(O,A){var R=d;return Object.prototype.hasOwnProperty.call(R,O)?R[O]:R[O]=A(O)}function c(O,A){this.h=A;for(var R=[],z=!0,U=O.length-1;0<=U;U--){var H=O[U]|0;z&&H==A||(R[U]=H,z=!1)}this.g=R}var d={};function f(O){return-128<=O&&128>O?l(O,function(A){return new c([A|0],0>A?-1:0)}):new c([O|0],0>O?-1:0)}function p(O){if(isNaN(O)||!isFinite(O))return _;if(0>O)return C(p(-O));for(var A=[],R=1,z=0;O>=R;z++)A[z]=O/R|0,R*=4294967296;return new c(A,0)}function y(O,A){if(O.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(O.charAt(0)=="-")return C(y(O.substring(1),A));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=p(Math.pow(A,8)),z=_,U=0;U<O.length;U+=8){var H=Math.min(8,O.length-U),I=parseInt(O.substring(U,U+H),A);8>H?(H=p(Math.pow(A,H)),z=z.j(H).add(p(I))):(z=z.j(R),z=z.add(p(I)))}return z}var _=f(0),b=f(1),w=f(16777216);t=c.prototype,t.m=function(){if(M(this))return-C(this).m();for(var O=0,A=1,R=0;R<this.g.length;R++){var z=this.i(R);O+=(0<=z?z:4294967296+z)*A,A*=4294967296}return O},t.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(S(this))return"0";if(M(this))return"-"+C(this).toString(O);for(var A=p(Math.pow(O,6)),R=this,z="";;){var U=j(R,A).g;R=L(R,U.j(A));var H=((0<R.g.length?R.g[0]:R.h)>>>0).toString(O);if(R=U,S(R))return H+z;for(;6>H.length;)H="0"+H;z=H+z}},t.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function S(O){if(O.h!=0)return!1;for(var A=0;A<O.g.length;A++)if(O.g[A]!=0)return!1;return!0}function M(O){return O.h==-1}t.l=function(O){return O=L(this,O),M(O)?-1:S(O)?0:1};function C(O){for(var A=O.g.length,R=[],z=0;z<A;z++)R[z]=~O.g[z];return new c(R,~O.h).add(b)}t.abs=function(){return M(this)?C(this):this},t.add=function(O){for(var A=Math.max(this.g.length,O.g.length),R=[],z=0,U=0;U<=A;U++){var H=z+(this.i(U)&65535)+(O.i(U)&65535),I=(H>>>16)+(this.i(U)>>>16)+(O.i(U)>>>16);z=I>>>16,H&=65535,I&=65535,R[U]=I<<16|H}return new c(R,R[R.length-1]&-2147483648?-1:0)};function L(O,A){return O.add(C(A))}t.j=function(O){if(S(this)||S(O))return _;if(M(this))return M(O)?C(this).j(C(O)):C(C(this).j(O));if(M(O))return C(this.j(C(O)));if(0>this.l(w)&&0>O.l(w))return p(this.m()*O.m());for(var A=this.g.length+O.g.length,R=[],z=0;z<2*A;z++)R[z]=0;for(z=0;z<this.g.length;z++)for(var U=0;U<O.g.length;U++){var H=this.i(z)>>>16,I=this.i(z)&65535,P=O.i(U)>>>16,Y=O.i(U)&65535;R[2*z+2*U]+=I*Y,B(R,2*z+2*U),R[2*z+2*U+1]+=H*Y,B(R,2*z+2*U+1),R[2*z+2*U+1]+=I*P,B(R,2*z+2*U+1),R[2*z+2*U+2]+=H*P,B(R,2*z+2*U+2)}for(z=0;z<A;z++)R[z]=R[2*z+1]<<16|R[2*z];for(z=A;z<2*A;z++)R[z]=0;return new c(R,0)};function B(O,A){for(;(O[A]&65535)!=O[A];)O[A+1]+=O[A]>>>16,O[A]&=65535,A++}function G(O,A){this.g=O,this.h=A}function j(O,A){if(S(A))throw Error("division by zero");if(S(O))return new G(_,_);if(M(O))return A=j(C(O),A),new G(C(A.g),C(A.h));if(M(A))return A=j(O,C(A)),new G(C(A.g),A.h);if(30<O.g.length){if(M(O)||M(A))throw Error("slowDivide_ only works with positive integers.");for(var R=b,z=A;0>=z.l(O);)R=J(R),z=J(z);var U=ee(R,1),H=ee(z,1);for(z=ee(z,2),R=ee(R,2);!S(z);){var I=H.add(z);0>=I.l(O)&&(U=U.add(R),H=I),z=ee(z,1),R=ee(R,1)}return A=L(O,U.j(A)),new G(U,A)}for(U=_;0<=O.l(A);){for(R=Math.max(1,Math.floor(O.m()/A.m())),z=Math.ceil(Math.log(R)/Math.LN2),z=48>=z?1:Math.pow(2,z-48),H=p(R),I=H.j(A);M(I)||0<I.l(O);)R-=z,H=p(R),I=H.j(A);S(H)&&(H=b),U=U.add(H),O=L(O,I)}return new G(U,O)}t.A=function(O){return j(this,O).h},t.and=function(O){for(var A=Math.max(this.g.length,O.g.length),R=[],z=0;z<A;z++)R[z]=this.i(z)&O.i(z);return new c(R,this.h&O.h)},t.or=function(O){for(var A=Math.max(this.g.length,O.g.length),R=[],z=0;z<A;z++)R[z]=this.i(z)|O.i(z);return new c(R,this.h|O.h)},t.xor=function(O){for(var A=Math.max(this.g.length,O.g.length),R=[],z=0;z<A;z++)R[z]=this.i(z)^O.i(z);return new c(R,this.h^O.h)};function J(O){for(var A=O.g.length+1,R=[],z=0;z<A;z++)R[z]=O.i(z)<<1|O.i(z-1)>>>31;return new c(R,O.h)}function ee(O,A){var R=A>>5;A%=32;for(var z=O.g.length-R,U=[],H=0;H<z;H++)U[H]=0<A?O.i(H+R)>>>A|O.i(H+R+1)<<32-A:O.i(H+R);return new c(U,O.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,bS=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,Ys=c}).apply(typeof Hw<"u"?Hw:typeof self<"u"?self:typeof window<"u"?window:{});var Th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ES,iu,wS,Lh,d0,xS,TS,SS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,E){return h==Array.prototype||h==Object.prototype||(h[v]=E.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Th=="object"&&Th];for(var v=0;v<h.length;++v){var E=h[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=n(this);function a(h,v){if(v)e:{var E=i;h=h.split(".");for(var V=0;V<h.length-1;V++){var ie=h[V];if(!(ie in E))break e;E=E[ie]}h=h[h.length-1],V=E[h],v=v(V),v!=V&&v!=null&&e(E,h,{configurable:!0,writable:!0,value:v})}}function l(h,v){h instanceof String&&(h+="");var E=0,V=!1,ie={next:function(){if(!V&&E<h.length){var ce=E++;return{value:v(ce,h[ce]),done:!1}}return V=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}a("Array.prototype.values",function(h){return h||function(){return l(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function y(h,v,E){return h.call.apply(h.bind,arguments)}function _(h,v,E){if(!h)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,V),h.apply(v,ie)}}return function(){return h.apply(v,arguments)}}function b(h,v,E){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:_,b.apply(null,arguments)}function w(h,v){var E=Array.prototype.slice.call(arguments,1);return function(){var V=E.slice();return V.push.apply(V,arguments),h.apply(this,V)}}function S(h,v){function E(){}E.prototype=v.prototype,h.aa=v.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(V,ie,ce){for(var be=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)be[Ze-2]=arguments[Ze];return v.prototype[ie].apply(V,be)}}function M(h){const v=h.length;if(0<v){const E=Array(v);for(let V=0;V<v;V++)E[V]=h[V];return E}return[]}function C(h,v){for(let E=1;E<arguments.length;E++){const V=arguments[E];if(f(V)){const ie=h.length||0,ce=V.length||0;h.length=ie+ce;for(let be=0;be<ce;be++)h[ie+be]=V[be]}else h.push(V)}}class L{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function B(h){return/^[\s\xa0]*$/.test(h)}function G(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function j(h){return j[" "](h),h}j[" "]=function(){};var J=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function ee(h,v,E){for(const V in h)v.call(E,h[V],V,h)}function O(h,v){for(const E in h)v.call(void 0,h[E],E,h)}function A(h){const v={};for(const E in h)v[E]=h[E];return v}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(h,v){let E,V;for(let ie=1;ie<arguments.length;ie++){V=arguments[ie];for(E in V)h[E]=V[E];for(let ce=0;ce<R.length;ce++)E=R[ce],Object.prototype.hasOwnProperty.call(V,E)&&(h[E]=V[E])}}function U(h){var v=1;h=h.split(":");const E=[];for(;0<v&&h.length;)E.push(h.shift()),v--;return h.length&&E.push(h.join(":")),E}function H(h){d.setTimeout(()=>{throw h},0)}function I(){var h=Q;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class P{constructor(){this.h=this.g=null}add(v,E){const V=Y.get();V.set(v,E),this.h?this.h.next=V:this.g=V,this.h=V}}var Y=new L(()=>new D,h=>h.reset());class D{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let q,W=!1,Q=new P,k=()=>{const h=d.Promise.resolve(void 0);q=()=>{h.then(F)}};var F=()=>{for(var h;h=I();){try{h.h.call(h.g)}catch(E){H(E)}var v=Y;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}W=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var re=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,v),d.removeEventListener("test",E,v)}catch{}return h}();function de(h,v){if(X.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,V=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(J){e:{try{j(v.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(v=null)}}else E=="mouseover"?v=h.fromElement:E=="mouseout"&&(v=h.toElement);this.relatedTarget=v,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ue[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&de.aa.h.call(this)}}S(de,X);var ue={2:"touch",3:"pen",4:"mouse"};de.prototype.h=function(){de.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),_e=0;function Ae(h,v,E,V,ie){this.listener=h,this.proxy=null,this.src=v,this.type=E,this.capture=!!V,this.ha=ie,this.key=++_e,this.da=this.fa=!1}function Ne(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function nt(h){this.src=h,this.g={},this.h=0}nt.prototype.add=function(h,v,E,V,ie){var ce=h.toString();h=this.g[ce],h||(h=this.g[ce]=[],this.h++);var be=Pe(h,v,V,ie);return-1<be?(v=h[be],E||(v.fa=!1)):(v=new Ae(v,this.src,ce,!!V,ie),v.fa=E,h.push(v)),v};function rt(h,v){var E=v.type;if(E in h.g){var V=h.g[E],ie=Array.prototype.indexOf.call(V,v,void 0),ce;(ce=0<=ie)&&Array.prototype.splice.call(V,ie,1),ce&&(Ne(v),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Pe(h,v,E,V){for(var ie=0;ie<h.length;++ie){var ce=h[ie];if(!ce.da&&ce.listener==v&&ce.capture==!!E&&ce.ha==V)return ie}return-1}var $e="closure_lm_"+(1e6*Math.random()|0),Ue={};function Lt(h,v,E,V,ie){if(Array.isArray(v)){for(var ce=0;ce<v.length;ce++)Lt(h,v[ce],E,V,ie);return null}return E=Cr(E),h&&h[ye]?h.K(v,E,p(V)?!!V.capture:!1,ie):ze(h,v,E,!1,V,ie)}function ze(h,v,E,V,ie,ce){if(!v)throw Error("Invalid event type");var be=p(ie)?!!ie.capture:!!ie,Ze=An(h);if(Ze||(h[$e]=Ze=new nt(h)),E=Ze.add(v,E,V,be,ce),E.proxy)return E;if(V=Ee(),E.proxy=V,V.src=h,V.listener=E,h.addEventListener)re||(ie=be),ie===void 0&&(ie=!1),h.addEventListener(v.toString(),V,ie);else if(h.attachEvent)h.attachEvent(Gt(v.toString()),V);else if(h.addListener&&h.removeListener)h.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ee(){function h(E){return v.call(h.src,h.listener,E)}const v=Fn;return h}function At(h,v,E,V,ie){if(Array.isArray(v))for(var ce=0;ce<v.length;ce++)At(h,v[ce],E,V,ie);else V=p(V)?!!V.capture:!!V,E=Cr(E),h&&h[ye]?(h=h.i,v=String(v).toString(),v in h.g&&(ce=h.g[v],E=Pe(ce,E,V,ie),-1<E&&(Ne(ce[E]),Array.prototype.splice.call(ce,E,1),ce.length==0&&(delete h.g[v],h.h--)))):h&&(h=An(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Pe(v,E,V,ie)),(E=-1<h?v[h]:null)&&vn(E))}function vn(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[ye])rt(v.i,h);else{var E=h.type,V=h.proxy;v.removeEventListener?v.removeEventListener(E,V,h.capture):v.detachEvent?v.detachEvent(Gt(E),V):v.addListener&&v.removeListener&&v.removeListener(V),(E=An(v))?(rt(E,h),E.h==0&&(E.src=null,v[$e]=null)):Ne(h)}}}function Gt(h){return h in Ue?Ue[h]:Ue[h]="on"+h}function Fn(h,v){if(h.da)h=!0;else{v=new de(v,this);var E=h.listener,V=h.ha||h.src;h.fa&&vn(h),h=E.call(V,v)}return h}function An(h){return h=h[$e],h instanceof nt?h:null}var Rn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cr(h){return typeof h=="function"?h:(h[Rn]||(h[Rn]=function(v){return h.handleEvent(v)}),h[Rn])}function at(){te.call(this),this.i=new nt(this),this.M=this,this.F=null}S(at,te),at.prototype[ye]=!0,at.prototype.removeEventListener=function(h,v,E,V){At(this,h,v,E,V)};function Ye(h,v){var E,V=h.F;if(V)for(E=[];V;V=V.F)E.push(V);if(h=h.M,V=v.type||v,typeof v=="string")v=new X(v,h);else if(v instanceof X)v.target=v.target||h;else{var ie=v;v=new X(V,h),z(v,ie)}if(ie=!0,E)for(var ce=E.length-1;0<=ce;ce--){var be=v.g=E[ce];ie=zt(be,V,!0,v)&&ie}if(be=v.g=h,ie=zt(be,V,!0,v)&&ie,ie=zt(be,V,!1,v)&&ie,E)for(ce=0;ce<E.length;ce++)be=v.g=E[ce],ie=zt(be,V,!1,v)&&ie}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var E=h.g[v],V=0;V<E.length;V++)Ne(E[V]);delete h.g[v],h.h--}}this.F=null},at.prototype.K=function(h,v,E,V){return this.i.add(String(h),v,!1,E,V)},at.prototype.L=function(h,v,E,V){return this.i.add(String(h),v,!0,E,V)};function zt(h,v,E,V){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var ie=!0,ce=0;ce<v.length;++ce){var be=v[ce];if(be&&!be.da&&be.capture==E){var Ze=be.listener,Kt=be.ha||be.src;be.fa&&rt(h.i,be),ie=Ze.call(Kt,V)!==!1&&ie}}return ie&&!V.defaultPrevented}function Et(h,v,E){if(typeof h=="function")E&&(h=b(h,E));else if(h&&typeof h.handleEvent=="function")h=b(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:d.setTimeout(h,v||0)}function Fr(h){h.g=Et(()=>{h.g=null,h.i&&(h.i=!1,Fr(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Ut extends te{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Fr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jt(h){te.call(this),this.h=h,this.g={}}S(Jt,te);var Nn=[];function Cn(h){ee(h.g,function(v,E){this.g.hasOwnProperty(E)&&vn(v)},h),h.g={}}Jt.prototype.N=function(){Jt.aa.N.call(this),Cn(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var en=d.JSON.stringify,cn=d.JSON.parse,In=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function xi(){}xi.prototype.h=null;function Ti(h){return h.h||(h.h=h.i())}function Ir(){}var Gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ur(){X.call(this,"d")}S(ur,X);function Yn(){X.call(this,"c")}S(Yn,X);var dr={},la=null;function Gr(){return la=la||new at}dr.La="serverreachability";function ss(h){X.call(this,dr.La,h)}S(ss,X);function Yr(h){const v=Gr();Ye(v,new ss(v))}dr.STAT_EVENT="statevent";function oo(h,v){X.call(this,dr.STAT_EVENT,h),this.stat=v}S(oo,X);function mt(h){const v=Gr();Ye(v,new oo(v,h))}dr.Ma="timingevent";function Mt(h,v){X.call(this,dr.Ma,h),this.size=v}S(Mt,X);function Rt(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function Ln(){this.g=!0}Ln.prototype.xa=function(){this.g=!1};function ca(h,v,E,V,ie,ce){h.info(function(){if(h.g)if(ce)for(var be="",Ze=ce.split("&"),Kt=0;Kt<Ze.length;Kt++){var Je=Ze[Kt].split("=");if(1<Je.length){var nn=Je[0];Je=Je[1];var Xt=nn.split("_");be=2<=Xt.length&&Xt[1]=="type"?be+(nn+"="+Je+"&"):be+(nn+"=redacted&")}}else be=null;else be=ce;return"XMLHTTP REQ ("+V+") [attempt "+ie+"]: "+v+`
`+E+`
`+be})}function Hl(h,v,E,V,ie,ce,be){h.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+ie+"]: "+v+`
`+E+`
`+ce+" "+be})}function Kr(h,v,E,V){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Si(h,E)+(V?" "+V:"")})}function lo(h,v){h.info(function(){return"TIMEOUT: "+v})}Ln.prototype.info=function(){};function Si(h,v){if(!h.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var V=E[h];if(!(2>V.length)){var ie=V[1];if(Array.isArray(ie)&&!(1>ie.length)){var ce=ie[0];if(ce!="noop"&&ce!="stop"&&ce!="close")for(var be=1;be<ie.length;be++)ie[be]=""}}}}return en(E)}catch{return v}}var Xr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fr;function gr(){}S(gr,xi),gr.prototype.g=function(){return new XMLHttpRequest},gr.prototype.i=function(){return{}},fr=new gr;function un(h,v,E,V){this.j=h,this.i=v,this.l=E,this.R=V||1,this.U=new Jt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wt}function wt(){this.i=null,this.g="",this.h=!1}var ua={},as={};function Kn(h,v,E){h.L=1,h.v=ga(Xn(v)),h.m=E,h.P=!0,kr(h,null)}function kr(h,v){h.F=Date.now(),Ai(h),h.A=Xn(h.v);var E=h.A,V=h.R;Array.isArray(V)||(V=[String(V)]),Kl(E.i,"t",V),h.C=0,E=h.j.J,h.h=new wt,h.g=ad(h.j,E?v:null,!h.m),0<h.O&&(h.M=new Ut(b(h.Y,h,h.g),h.O)),v=h.U,E=h.g,V=h.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(Nn[0]=ie.toString()),ie=Nn);for(var ce=0;ce<ie.length;ce++){var be=Lt(E,ie[ce],V||v.handleEvent,!1,v.h||v);if(!be)break;v.g[be.key]=be}v=h.H?A(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),Yr(),ca(h.i,h.u,h.A,h.l,h.R,h.m)}un.prototype.ca=function(h){h=h.target;const v=this.M;v&&_r(h)==3?v.j():this.Y(h)},un.prototype.Y=function(h){try{if(h==this.g)e:{const Xt=_r(this.g);var v=this.g.Ba();const Mi=this.g.Z();if(!(3>Xt)&&(Xt!=3||this.g&&(this.h.h||this.g.oa()||Zu(this.g)))){this.J||Xt!=4||v==7||(v==8||0>=Mi?Yr(3):Yr(2)),Qr(this);var E=this.g.Z();this.X=E;t:if(da(this)){var V=Zu(this.g);h="";var ie=V.length,ce=_r(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yt(this),pr(this);var be="";break t}this.h.i=new d.TextDecoder}for(v=0;v<ie;v++)this.h.h=!0,h+=this.h.i.decode(V[v],{stream:!(ce&&v==ie-1)});V.length=0,this.h.g+=h,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=E==200,Hl(this.i,this.u,this.A,this.l,this.R,Xt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,Kt=this.g;if((Ze=Kt.g?Kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Ze)){var Je=Ze;break t}}Je=null}if(E=Je)Kr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wr(this,E);else{this.o=!1,this.s=3,mt(12),Yt(this),pr(this);break e}}if(this.P){E=!0;let dn;for(;!this.J&&this.C<be.length;)if(dn=co(this,be),dn==as){Xt==4&&(this.s=4,mt(14),E=!1),Kr(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==ua){this.s=4,mt(15),Kr(this.i,this.l,be,"[Invalid Chunk]"),E=!1;break}else Kr(this.i,this.l,dn,null),Wr(this,dn);if(da(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||be.length!=0||this.h.h||(this.s=1,mt(16),E=!1),this.o=this.o&&E,!E)Kr(this.i,this.l,be,"[Invalid Chunked Response]"),Yt(this),pr(this);else if(0<be.length&&!this.W){this.W=!0;var nn=this.j;nn.g==this&&nn.ba&&!nn.M&&(nn.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),wa(nn),nn.M=!0,mt(11))}}else Kr(this.i,this.l,be,null),Wr(this,be);Xt==4&&Yt(this),this.o&&!this.J&&(Xt==4?rd(this.j,this):(this.o=!1,Ai(this)))}else hg(this.g),E==400&&0<be.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Yt(this),pr(this)}}}catch{}finally{}};function da(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function co(h,v){var E=h.C,V=v.indexOf(`
`,E);return V==-1?as:(E=Number(v.substring(E,V)),isNaN(E)?ua:(V+=1,V+E>v.length?as:(v=v.slice(V,V+E),h.C=V+E,v)))}un.prototype.cancel=function(){this.J=!0,Yt(this)};function Ai(h){h.S=Date.now()+h.I,uo(h,h.I)}function uo(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Rt(b(h.ba,h),v)}function Qr(h){h.B&&(d.clearTimeout(h.B),h.B=null)}un.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(lo(this.i,this.A),this.L!=2&&(Yr(),mt(17)),Yt(this),this.s=2,pr(this)):uo(this,this.S-h)};function pr(h){h.j.G==0||h.J||rd(h.j,h)}function Yt(h){Qr(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,Cn(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Wr(h,v){try{var E=h.j;if(E.G!=0&&(E.g==h||ql(E.h,h))){if(!h.K&&ql(E.h,h)&&E.G==3){try{var V=E.Da.g.parse(v)}catch{V=null}if(Array.isArray(V)&&V.length==3){var ie=V;if(ie[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)wo(E),bo(E);else break e;Jl(E),mt(18)}}else E.za=ie[1],0<E.za-E.T&&37500>ie[2]&&E.F&&E.v==0&&!E.C&&(E.C=Rt(b(E.Za,E),6e3));if(1>=Zr(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Di(E,11)}else if((h.K||E.g==h)&&wo(E),!B(v))for(ie=E.Da.g.parse(v),v=0;v<ie.length;v++){let Je=ie[v];if(E.T=Je[0],Je=Je[1],E.G==2)if(Je[0]=="c"){E.K=Je[1],E.ia=Je[2];const nn=Je[3];nn!=null&&(E.la=nn,E.j.info("VER="+E.la));const Xt=Je[4];Xt!=null&&(E.Aa=Xt,E.j.info("SVER="+E.Aa));const Mi=Je[5];Mi!=null&&typeof Mi=="number"&&0<Mi&&(V=1.5*Mi,E.L=V,E.j.info("backChannelRequestTimeoutMs_="+V)),V=E;const dn=h.g;if(dn){const si=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(si){var ce=V.h;ce.g||si.indexOf("spdy")==-1&&si.indexOf("quic")==-1&&si.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(fo(ce,ce.h),ce.h=null))}if(V.D){const tc=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;tc&&(V.ya=tc,dt(V.I,V.D,tc))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),V=E;var be=h;if(V.qa=sd(V,V.J?V.ia:null,V.W),be.K){kn(V.h,be);var Ze=be,Kt=V.L;Kt&&(Ze.I=Kt),Ze.B&&(Qr(Ze),Ai(Ze)),V.g=be}else td(V);0<E.i.length&&Eo(E)}else Je[0]!="stop"&&Je[0]!="close"||Di(E,7);else E.G==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Di(E,7):Wl(E):Je[0]!="noop"&&E.l&&E.l.ta(Je),E.v=0)}}Yr(4)}catch{}}var ho=class{constructor(h,v){this.g=h,this.map=v}};function Dr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function os(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Zr(h){return h.h?1:h.g?h.g.size:0}function ql(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function fo(h,v){h.g?h.g.add(v):h.h=v}function kn(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Dr.prototype.cancel=function(){if(this.i=$l(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function $l(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const E of h.g.values())v=v.concat(E.D);return v}return M(h.i)}function lg(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(f(h)){for(var v=[],E=h.length,V=0;V<E;V++)v.push(h[V]);return v}v=[],E=0;for(V in h)v[E++]=h[V];return v}function go(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(f(h)||typeof h=="string"){var v=[];h=h.length;for(var E=0;E<h;E++)v.push(E);return v}v=[],E=0;for(const V in h)v[E++]=V;return v}}}function Fl(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(f(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var E=go(h),V=lg(h),ie=V.length,ce=0;ce<ie;ce++)v.call(void 0,V[ce],E&&E[ce],h)}var ha=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cg(h,v){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var V=h[E].indexOf("="),ie=null;if(0<=V){var ce=h[E].substring(0,V);ie=h[E].substring(V+1)}else ce=h[E];v(ce,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function jt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof jt){this.h=h.h,fa(this,h.j),this.o=h.o,this.g=h.g,ls(this,h.s),this.l=h.l;var v=h.i,E=new Ni;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),Ri(this,E),this.m=h.m}else h&&(v=String(h).match(ha))?(this.h=!1,fa(this,v[1]||"",!0),this.o=mr(v[2]||""),this.g=mr(v[3]||"",!0),ls(this,v[4]),this.l=mr(v[5]||"",!0),Ri(this,v[6]||"",!0),this.m=mr(v[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}jt.prototype.toString=function(){var h=[],v=this.j;v&&h.push(pa(v,Gl,!0),":");var E=this.g;return(E||v=="file")&&(h.push("//"),(v=this.o)&&h.push(pa(v,Gl,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(pa(E,E.charAt(0)=="/"?ug:Yl,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",pa(E,po)),h.join("")};function Xn(h){return new jt(h)}function fa(h,v,E){h.j=E?mr(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function ls(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function Ri(h,v,E){v instanceof Ni?(h.i=v,Qu(h.i,h.h)):(E||(v=pa(v,dg)),h.i=new Ni(v,h.h))}function dt(h,v,E){h.i.set(v,E)}function ga(h){return dt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function mr(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function pa(h,v,E){return typeof h=="string"?(h=encodeURI(h).replace(v,Xu),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Xu(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Gl=/[#\/\?@]/g,Yl=/[#\?:]/g,ug=/[#\?]/g,dg=/[#\?@]/g,po=/#/g;function Ni(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function yr(h){h.g||(h.g=new Map,h.h=0,h.i&&cg(h.i,function(v,E){h.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}t=Ni.prototype,t.add=function(h,v){yr(this),this.i=null,h=Jr(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(v),this.h+=1,this};function Ci(h,v){yr(h),v=Jr(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Ii(h,v){return yr(h),v=Jr(h,v),h.g.has(v)}t.forEach=function(h,v){yr(this),this.g.forEach(function(E,V){E.forEach(function(ie){h.call(v,ie,V,this)},this)},this)},t.na=function(){yr(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let V=0;V<v.length;V++){const ie=h[V];for(let ce=0;ce<ie.length;ce++)E.push(v[V])}return E},t.V=function(h){yr(this);let v=[];if(typeof h=="string")Ii(this,h)&&(v=v.concat(this.g.get(Jr(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)v=v.concat(h[E])}return v},t.set=function(h,v){return yr(this),this.i=null,h=Jr(this,h),Ii(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function Kl(h,v,E){Ci(h,v),0<E.length&&(h.i=null,h.g.set(Jr(h,v),M(E)),h.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var V=v[E];const ce=encodeURIComponent(String(V)),be=this.V(V);for(V=0;V<be.length;V++){var ie=ce;be[V]!==""&&(ie+="="+encodeURIComponent(String(be[V]))),h.push(ie)}}return this.i=h.join("&")};function Jr(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Qu(h,v){v&&!h.j&&(yr(h),h.i=null,h.g.forEach(function(E,V){var ie=V.toLowerCase();V!=ie&&(Ci(this,V),Kl(this,ie,E))},h)),h.j=v}function ma(h,v){const E=new Ln;if(d.Image){const V=new Image;V.onload=w(vr,E,"TestLoadImage: loaded",!0,v,V),V.onerror=w(vr,E,"TestLoadImage: error",!1,v,V),V.onabort=w(vr,E,"TestLoadImage: abort",!1,v,V),V.ontimeout=w(vr,E,"TestLoadImage: timeout",!1,v,V),d.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=h}else v(!1)}function Mr(h,v){const E=new Ln,V=new AbortController,ie=setTimeout(()=>{V.abort(),vr(E,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:V.signal}).then(ce=>{clearTimeout(ie),ce.ok?vr(E,"TestPingServer: ok",!0,v):vr(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(ie),vr(E,"TestPingServer: error",!1,v)})}function vr(h,v,E,V,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),V(E)}catch{}}function ya(){this.g=new In}function ei(h,v,E){const V=E||"";try{Fl(h,function(ie,ce){let be=ie;p(ie)&&(be=en(ie)),v.push(V+ce+"="+encodeURIComponent(be))})}catch(ie){throw v.push(V+"type="+encodeURIComponent("_badmap")),ie}}function cs(h){this.l=h.Ub||null,this.j=h.eb||!1}S(cs,xi),cs.prototype.g=function(){return new ki(this.l,this.j)},cs.prototype.i=function(h){return function(){return h}}({});function ki(h,v){at.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(ki,at),t=ki.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,ni(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||d).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ti(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?ti(this):ni(this),this.readyState==3&&Xl(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ti(this))},t.Qa=function(h){this.g&&(this.response=h,ti(this))},t.ga=function(){this.g&&ti(this)};function ti(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ni(h)}t.setRequestHeader=function(h,v){this.u.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=v.next();return h.join(`\r
`)};function ni(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ql(h){let v="";return ee(h,function(E,V){v+=V,v+=":",v+=E,v+=`\r
`}),v}function tn(h,v,E){e:{for(V in E){var V=!1;break e}V=!0}V||(E=Ql(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):dt(h,v,E))}function ot(h){at.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(ot,at);var mo=/^https?$/i,va=["POST","PUT"];t=ot.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,v,E,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fr.g(),this.v=this.o?Ti(this.o):Ti(fr),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ce){Wu(this,ce);return}if(h=E||"",E=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var ie in V)E.set(ie,V[ie]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const ce of V.keys())E.set(ce,V.get(ce));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(E.keys()).find(ce=>ce.toLowerCase()=="content-type"),ie=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(va,v,void 0))||V||ie||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,be]of E)this.g.setRequestHeader(ce,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_a(this),this.u=!0,this.g.send(h),this.u=!1}catch(ce){Wu(this,ce)}};function Wu(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,yo(h),ri(h)}function yo(h){h.A||(h.A=!0,Ye(h,"complete"),Ye(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ye(this,"complete"),Ye(this,"abort"),ri(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ri(this,!0)),ot.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vo(this):this.bb())},t.bb=function(){vo(this)};function vo(h){if(h.h&&typeof c<"u"&&(!h.v[1]||_r(h)!=4||h.Z()!=2)){if(h.u&&_r(h)==4)Et(h.Ea,0,h);else if(Ye(h,"readystatechange"),_r(h)==4){h.h=!1;try{const be=h.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var V;if(V=be===0){var ie=String(h.D).match(ha)[1]||null;!ie&&d.self&&d.self.location&&(ie=d.self.location.protocol.slice(0,-1)),V=!mo.test(ie?ie.toLowerCase():"")}E=V}if(E)Ye(h,"complete"),Ye(h,"success");else{h.m=6;try{var ce=2<_r(h)?h.g.statusText:""}catch{ce=""}h.l=ce+" ["+h.Z()+"]",yo(h)}}finally{ri(h)}}}}function ri(h,v){if(h.g){_a(h);const E=h.g,V=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||Ye(h,"ready");try{E.onreadystatechange=V}catch{}}}function _a(h){h.I&&(d.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function _r(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<_r(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),cn(v)}};function Zu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function hg(h){const v={};h=(h.g&&2<=_r(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<h.length;V++){if(B(h[V]))continue;var E=U(h[V]);const ie=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ce=v[ie]||[];v[ie]=ce,ce.push(E)}O(v,function(V){return V.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ba(h,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||v}function _o(h){this.Aa=0,this.i=[],this.j=new Ln,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ba("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ba("baseRetryDelayMs",5e3,h),this.cb=ba("retryDelaySeedMs",1e4,h),this.Wa=ba("forwardChannelMaxRetries",2,h),this.wa=ba("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Dr(h&&h.concurrentRequestLimit),this.Da=new ya,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_o.prototype,t.la=8,t.G=1,t.connect=function(h,v,E,V){mt(0),this.W=h,this.H=v||{},E&&V!==void 0&&(this.H.OSID=E,this.H.OAID=V),this.F=this.X,this.I=sd(this,null,this.W),Eo(this)};function Wl(h){if(Ju(h),h.G==3){var v=h.U++,E=Xn(h.I);if(dt(E,"SID",h.K),dt(E,"RID",v),dt(E,"TYPE","terminate"),Ea(h,E),v=new un(h,h.j,v),v.L=2,v.v=ga(Xn(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=v.v,E=!0),E||(v.g=ad(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Ai(v)}id(h)}function bo(h){h.g&&(wa(h),h.g.cancel(),h.g=null)}function Ju(h){bo(h),h.u&&(d.clearTimeout(h.u),h.u=null),wo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Eo(h){if(!os(h.h)&&!h.s){h.s=!0;var v=h.Ga;q||k(),W||(q(),W=!0),Q.add(v,h),h.B=0}}function fg(h,v){return Zr(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Rt(b(h.Ga,h,v),ec(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const ie=new un(this,this.j,h);let ce=this.o;if(this.S&&(ce?(ce=A(ce),z(ce,this.S)):ce=this.S),this.m!==null||this.O||(ie.H=ce,ce=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var V=this.i[E];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(v+=V,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=ed(this,ie,v),E=Xn(this.I),dt(E,"RID",h),dt(E,"CVER",22),this.D&&dt(E,"X-HTTP-Session-Id",this.D),Ea(this,E),ce&&(this.O?v="headers="+encodeURIComponent(String(Ql(ce)))+"&"+v:this.m&&tn(E,this.m,ce)),fo(this.h,ie),this.Ua&&dt(E,"TYPE","init"),this.P?(dt(E,"$req",v),dt(E,"SID","null"),ie.T=!0,Kn(ie,E,null)):Kn(ie,E,v),this.G=2}}else this.G==3&&(h?Zl(this,h):this.i.length==0||os(this.h)||Zl(this))};function Zl(h,v){var E;v?E=v.l:E=h.U++;const V=Xn(h.I);dt(V,"SID",h.K),dt(V,"RID",E),dt(V,"AID",h.T),Ea(h,V),h.m&&h.o&&tn(V,h.m,h.o),E=new un(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),v&&(h.i=v.D.concat(h.i)),v=ed(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),fo(h.h,E),Kn(E,V,v)}function Ea(h,v){h.H&&ee(h.H,function(E,V){dt(v,V,E)}),h.l&&Fl({},function(E,V){dt(v,V,E)})}function ed(h,v,E){E=Math.min(h.i.length,E);var V=h.l?b(h.l.Na,h.l,h):null;e:{var ie=h.i;let ce=-1;for(;;){const be=["count="+E];ce==-1?0<E?(ce=ie[0].g,be.push("ofs="+ce)):ce=0:be.push("ofs="+ce);let Ze=!0;for(let Kt=0;Kt<E;Kt++){let Je=ie[Kt].g;const nn=ie[Kt].map;if(Je-=ce,0>Je)ce=Math.max(0,ie[Kt].g-100),Ze=!1;else try{ei(nn,be,"req"+Je+"_")}catch{V&&V(nn)}}if(Ze){V=be.join("&");break e}}}return h=h.i.splice(0,E),v.D=h,V}function td(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;q||k(),W||(q(),W=!0),Q.add(v,h),h.v=0}}function Jl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Rt(b(h.Fa,h),ec(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,nd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Rt(b(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),bo(this),nd(this))};function wa(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function nd(h){h.g=new un(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=Xn(h.qa);dt(v,"RID","rpc"),dt(v,"SID",h.K),dt(v,"AID",h.T),dt(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&dt(v,"TO",h.ja),dt(v,"TYPE","xmlhttp"),Ea(h,v),h.m&&h.o&&tn(v,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=ga(Xn(v)),E.m=null,E.P=!0,kr(E,h)}t.Za=function(){this.C!=null&&(this.C=null,bo(this),Jl(this),mt(19))};function wo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function rd(h,v){var E=null;if(h.g==v){wo(h),wa(h),h.g=null;var V=2}else if(ql(h.h,v))E=v.D,kn(h.h,v),V=1;else return;if(h.G!=0){if(v.o)if(V==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var ie=h.B;V=Gr(),Ye(V,new Mt(V,E)),Eo(h)}else td(h);else if(ie=v.s,ie==3||ie==0&&0<v.X||!(V==1&&fg(h,v)||V==2&&Jl(h)))switch(E&&0<E.length&&(v=h.h,v.i=v.i.concat(E)),ie){case 1:Di(h,5);break;case 4:Di(h,10);break;case 3:Di(h,6);break;default:Di(h,2)}}}function ec(h,v){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*v}function Di(h,v){if(h.j.info("Error code "+v),v==2){var E=b(h.fb,h),V=h.Xa;const ie=!V;V=new jt(V||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||fa(V,"https"),ga(V),ie?ma(V.toString(),E):Mr(V.toString(),E)}else mt(2);h.G=0,h.l&&h.l.sa(v),id(h),Ju(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function id(h){if(h.G=0,h.ka=[],h.l){const v=$l(h.h);(v.length!=0||h.i.length!=0)&&(C(h.ka,v),C(h.ka,h.i),h.h.i.length=0,M(h.i),h.i.length=0),h.l.ra()}}function sd(h,v,E){var V=E instanceof jt?Xn(E):new jt(E);if(V.g!="")v&&(V.g=v+"."+V.g),ls(V,V.s);else{var ie=d.location;V=ie.protocol,v=v?v+"."+ie.hostname:ie.hostname,ie=+ie.port;var ce=new jt(null);V&&fa(ce,V),v&&(ce.g=v),ie&&ls(ce,ie),E&&(ce.l=E),V=ce}return E=h.D,v=h.ya,E&&v&&dt(V,E,v),dt(V,"VER",h.la),Ea(h,V),V}function ad(h,v,E){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new ot(new cs({eb:E})):new ot(h.pa),v.Ha(h.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function od(){}t=od.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xo(){}xo.prototype.g=function(h,v){return new Dn(h,v)};function Dn(h,v){at.call(this),this.g=new _o(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!B(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!B(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new ii(this)}S(Dn,at),Dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Wl(this.g)},Dn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=en(h),h=E);v.i.push(new ho(v.Ya++,h)),v.G==3&&Eo(v)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Wl(this.g),delete this.g,Dn.aa.N.call(this)};function ld(h){ur.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const E in v){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}S(ld,ur);function cd(){Yn.call(this),this.status=1}S(cd,Yn);function ii(h){this.g=h}S(ii,od),ii.prototype.ua=function(){Ye(this.g,"a")},ii.prototype.ta=function(h){Ye(this.g,new ld(h))},ii.prototype.sa=function(h){Ye(this.g,new cd)},ii.prototype.ra=function(){Ye(this.g,"b")},xo.prototype.createWebChannel=xo.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,SS=function(){return new xo},TS=function(){return Gr()},xS=dr,d0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xr.NO_ERROR=0,Xr.TIMEOUT=8,Xr.HTTP_ERROR=6,Lh=Xr,hr.COMPLETE="complete",wS=hr,Ir.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",at.prototype.listen=at.prototype.K,iu=Ir,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,ES=ot}).apply(typeof Th<"u"?Th:typeof self<"u"?self:typeof window<"u"?window:{});const qw="@firebase/firestore",$w="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pl="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=new ny("@firebase/firestore");function al(){return Wa.logLevel}function we(t,...e){if(Wa.logLevel<=Qe.DEBUG){const n=e.map(ay);Wa.debug(`Firestore (${Pl}): ${t}`,...n)}}function ns(t,...e){if(Wa.logLevel<=Qe.ERROR){const n=e.map(ay);Wa.error(`Firestore (${Pl}): ${t}`,...n)}}function Rl(t,...e){if(Wa.logLevel<=Qe.WARN){const n=e.map(ay);Wa.warn(`Firestore (${Pl}): ${t}`,...n)}}function ay(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,AS(t,i,n)}function AS(t,e,n){let i=`FIRESTORE (${Pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ns(i),new Error(i)}function lt(t,e,n,i){let a="Unexpected state";typeof n=="string"?a=n:i=n,t||AS(e,a,i)}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends wi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class c6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wn.UNAUTHENTICATED))}shutdown(){}}class u6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class d6{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){lt(this.o===void 0,42304);let i=this.i;const a=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let l=new Ks;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ks,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const f=l;e.enqueueRetryable(async()=>{await f.promise,await a(this.currentUser)})},d=f=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ks)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(lt(typeof i.accessToken=="string",31837,{l:i}),new RS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string",2055,{h:e}),new wn(e)}}class h6{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class f6{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new h6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(wn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class g6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ir(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){lt(this.o===void 0,3512);const i=l=>{l.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,we("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Fw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(lt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Fw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=p6(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<n&&(i+=e.charAt(a[l]%62))}return i}}function qe(t,e){return t<e?-1:t>e?1:0}function h0(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),a=e.codePointAt(n);if(i!==a){if(i<128&&a<128)return qe(i,a);{const l=NS(),c=m6(l.encode(Gw(t,n)),l.encode(Gw(e,n)));return c!==0?c:qe(i,a)}}n+=i>65535?2:1}return qe(t.length,e.length)}function Gw(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function m6(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return qe(t[n],e[n]);return qe(t.length,e.length)}function Nl(t,e,n){return t.length===e.length&&t.every((i,a)=>n(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw=-62135596800,Kw=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Kw);return new _t(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Yw)throw new xe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Kw}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Yw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new _t(0,0))}static max(){return new Ve(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="__name__";class fi{constructor(e,n,i){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return fi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const l=fi.compareSegments(e.get(a),n.get(a));if(l!==0)return l}return qe(e.length,n.length)}static compareSegments(e,n){const i=fi.isNumericId(e),a=fi.isNumericId(n);return i&&!a?-1:!i&&a?1:i&&a?fi.extractNumericId(e).compare(fi.extractNumericId(n)):h0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ys.fromString(e.substring(4,e.length-2))}}class vt extends fi{construct(e,n,i){return new vt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new xe(me.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(a=>a.length>0))}return new vt(n)}static emptyPath(){return new vt([])}}const y6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends fi{construct(e,n,i){return new mn(e,n,i)}static isValidIdentifier(e){return y6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xw}static keyField(){return new mn([Xw])}static fromServerFormat(e){const n=[];let i="",a=0;const l=()=>{if(i.length===0)throw new xe(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new xe(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[a+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new xe(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new xe(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(n)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(vt.fromString(e))}static fromName(e){return new Ce(vt.fromString(e).popFirst(5))}static empty(){return new Ce(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new vt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=-1;function v6(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,a=Ve.fromTimestamp(i===1e9?new _t(n+1,0):new _t(n,i));return new Zs(a,Ce.empty(),e)}function _6(t){return new Zs(t.readTime,t.key,Tu)}class Zs{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Zs(Ve.min(),Ce.empty(),Tu)}static max(){return new Zs(Ve.max(),Ce.empty(),Tu)}}function b6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(t.documentKey,e.documentKey),n!==0?n:qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class w6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(t){if(t.code!==me.FAILED_PRECONDITION||t.message!==E6)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ve((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(i,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ve?n:ve.resolve(n)}catch(n){return ve.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ve.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ve.reject(n)}static resolve(e){return new ve((n,i)=>{n(e)})}static reject(e){return new ve((n,i)=>{i(e)})}static waitFor(e){return new ve((n,i)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&n()},f=>i(f))}),c=!0,l===a&&n()})}static or(e){let n=ve.resolve(!1);for(const i of e)n=n.next(a=>a?ve.resolve(a):i());return n}static forEach(e,n){const i=[];return e.forEach((a,l)=>{i.push(n.call(this,a,l))}),this.waitFor(i)}static mapArray(e,n){return new ve((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let f=0;f<l;f++){const p=f;n(e[p]).next(y=>{c[p]=y,++d,d===l&&i(c)},y=>a(y))}})}static doWhile(e,n){return new ve((i,a)=>{const l=()=>{e()===!0?n().next(()=>{l()},a):i()};l()})}}function x6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ll(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>n.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Bf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=-1;function Hf(t){return t==null}function lf(t){return t===0&&1/t==-1/0}function T6(t){return typeof t=="number"&&Number.isInteger(t)&&!lf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="";function S6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Qw(e)),e=A6(t.get(n),e);return Qw(e)}function A6(t,e){let n=e;const i=t.length;for(let a=0;a<i;a++){const l=t.charAt(a);switch(l){case"\0":n+="";break;case IS:n+="";break;default:n+=l}}return n}function Qw(t){return t+IS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ia(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new St(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sh(this.root,e,this.comparator,!0)}}class Sh{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?i(e.key,n):1,n&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,n,i,a,l){this.key=e,this.value=n,this.color=i??pn.RED,this.left=a??pn.EMPTY,this.right=l??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,l){return new pn(e??this.key,n??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,n,i),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return pn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,i,a,l){return this}insert(e,n,i){return new pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zw(this.data.getIterator())}getIteratorFrom(e){return new Zw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zt(this.comparator);return n.data=e,n}}class Zw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new sr([])}unionWith(e){let n=new Zt(mn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new sr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Nl(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new DS("Invalid base64 string: "+l):l}}(e);return new yn(n)}static fromUint8Array(e){const n=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new yn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const R6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(t){if(lt(!!t,39018),typeof t=="string"){let e=0;const n=R6.exec(t);if(lt(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ea(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="server_timestamp",OS="__type__",PS="__previous_value__",VS="__local_write_time__";function ly(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[OS])===null||n===void 0?void 0:n.stringValue)===MS}function qf(t){const e=t.mapValue.fields[PS];return ly(e)?qf(e):e}function Su(t){const e=Js(t.mapValue.fields[VS].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e,n,i,a,l,c,d,f,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=y}}const cf="(default)";class Au{constructor(e,n){this.projectId=e,this.database=n||cf}static empty(){return new Au("","")}get isDefaultDatabase(){return this.database===cf}isEqual(e){return e instanceof Au&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="__type__",C6="__max__",Ah={mapValue:{}},zS="__vector__",uf="value";function ta(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ly(t)?4:k6(t)?9007199254740991:I6(t)?10:11:Me(28295,{value:t})}function bi(t,e){if(t===e)return!0;const n=ta(t);if(n!==ta(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Su(t).isEqual(Su(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Js(a.timestampValue),d=Js(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,l){return ea(a.bytesValue).isEqual(ea(l.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,l){return Vt(a.geoPointValue.latitude)===Vt(l.geoPointValue.latitude)&&Vt(a.geoPointValue.longitude)===Vt(l.geoPointValue.longitude)}(t,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Vt(a.integerValue)===Vt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Vt(a.doubleValue),d=Vt(l.doubleValue);return c===d?lf(c)===lf(d):isNaN(c)&&isNaN(d)}return!1}(t,e);case 9:return Nl(t.arrayValue.values||[],e.arrayValue.values||[],bi);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(Ww(c)!==Ww(d))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(d[f]===void 0||!bi(c[f],d[f])))return!1;return!0}(t,e);default:return Me(52216,{left:t})}}function Ru(t,e){return(t.values||[]).find(n=>bi(n,e))!==void 0}function Cl(t,e){if(t===e)return 0;const n=ta(t),i=ta(e);if(n!==i)return qe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(t.booleanValue,e.booleanValue);case 2:return function(l,c){const d=Vt(l.integerValue||l.doubleValue),f=Vt(c.integerValue||c.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(t,e);case 3:return Jw(t.timestampValue,e.timestampValue);case 4:return Jw(Su(t),Su(e));case 5:return h0(t.stringValue,e.stringValue);case 6:return function(l,c){const d=ea(l),f=ea(c);return d.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),f=c.split("/");for(let p=0;p<d.length&&p<f.length;p++){const y=qe(d[p],f[p]);if(y!==0)return y}return qe(d.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(l,c){const d=qe(Vt(l.latitude),Vt(c.latitude));return d!==0?d:qe(Vt(l.longitude),Vt(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ex(t.arrayValue,e.arrayValue);case 10:return function(l,c){var d,f,p,y;const _=l.fields||{},b=c.fields||{},w=(d=_[uf])===null||d===void 0?void 0:d.arrayValue,S=(f=b[uf])===null||f===void 0?void 0:f.arrayValue,M=qe(((p=w?.values)===null||p===void 0?void 0:p.length)||0,((y=S?.values)===null||y===void 0?void 0:y.length)||0);return M!==0?M:ex(w,S)}(t.mapValue,e.mapValue);case 11:return function(l,c){if(l===Ah.mapValue&&c===Ah.mapValue)return 0;if(l===Ah.mapValue)return 1;if(c===Ah.mapValue)return-1;const d=l.fields||{},f=Object.keys(d),p=c.fields||{},y=Object.keys(p);f.sort(),y.sort();for(let _=0;_<f.length&&_<y.length;++_){const b=h0(f[_],y[_]);if(b!==0)return b;const w=Cl(d[f[_]],p[y[_]]);if(w!==0)return w}return qe(f.length,y.length)}(t.mapValue,e.mapValue);default:throw Me(23264,{Pe:n})}}function Jw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return qe(t,e);const n=Js(t),i=Js(e),a=qe(n.seconds,i.seconds);return a!==0?a:qe(n.nanos,i.nanos)}function ex(t,e){const n=t.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const l=Cl(n[a],i[a]);if(l)return l}return qe(n.length,i.length)}function Il(t){return f0(t)}function f0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Js(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ea(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",a=!0;for(const l of n.values||[])a?a=!1:i+=",",i+=f0(l);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${f0(n.fields[c])}`;return a+"}"}(t.mapValue):Me(61005,{value:t})}function zh(t){switch(ta(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qf(t);return e?16+zh(e):16;case 5:return 2*t.stringValue.length;case 6:return ea(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+zh(l),0)}(t.arrayValue);case 10:case 11:return function(i){let a=0;return ia(i.fields,(l,c)=>{a+=l.length+zh(c)}),a}(t.mapValue);default:throw Me(13486,{value:t})}}function tx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function g0(t){return!!t&&"integerValue"in t}function cy(t){return!!t&&"arrayValue"in t}function nx(t){return!!t&&"nullValue"in t}function rx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uh(t){return!!t&&"mapValue"in t}function I6(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[LS])===null||n===void 0?void 0:n.stringValue)===zS}function lu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ia(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=lu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function k6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===C6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Uh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lu(n)}setAll(e){let n=mn.emptyPath(),i={},a=[];e.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const f=this.getFieldsMap(n);this.applyChanges(f,i,a),i={},a=[],n=d.popLast()}c?i[d.lastSegment()]=lu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,i,a)}delete(e){const n=this.field(e.popLast());Uh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];Uh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){ia(n,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new Hn(lu(this.value))}}function US(t){const e=[];return ia(t.fields,(n,i)=>{const a=new mn([n]);if(Uh(i)){const l=US(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n,i,a,l,c,d){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new xn(e,0,Ve.min(),Ve.min(),Ve.min(),Hn.empty(),0)}static newFoundDocument(e,n,i,a){return new xn(e,1,n,Ve.min(),i,a,0)}static newNoDocument(e,n){return new xn(e,2,n,Ve.min(),Ve.min(),Hn.empty(),0)}static newUnknownDocument(e,n){return new xn(e,3,n,Ve.min(),Ve.min(),Hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n){this.position=e,this.inclusive=n}}function ix(t,e,n){let i=0;for(let a=0;a<t.position.length;a++){const l=e[a],c=t.position[a];if(l.field.isKeyField()?i=Ce.comparator(Ce.fromName(c.referenceValue),n.key):i=Cl(c,n.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function sx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n="asc"){this.field=e,this.dir=n}}function D6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{}class Ft extends jS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new O6(e,n,i):n==="array-contains"?new L6(e,i):n==="in"?new z6(e,i):n==="not-in"?new U6(e,i):n==="array-contains-any"?new j6(e,i):new Ft(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new P6(e,i):new V6(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Cl(n,this.value)):n!==null&&ta(this.value)===ta(n)&&this.matchesComparison(Cl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Br extends jS{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Br(e,n)}matches(e){return BS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function BS(t){return t.op==="and"}function HS(t){return M6(t)&&BS(t)}function M6(t){for(const e of t.filters)if(e instanceof Br)return!1;return!0}function p0(t){if(t instanceof Ft)return t.field.canonicalString()+t.op.toString()+Il(t.value);if(HS(t))return t.filters.map(e=>p0(e)).join(",");{const e=t.filters.map(n=>p0(n)).join(",");return`${t.op}(${e})`}}function qS(t,e){return t instanceof Ft?function(i,a){return a instanceof Ft&&i.op===a.op&&i.field.isEqual(a.field)&&bi(i.value,a.value)}(t,e):t instanceof Br?function(i,a){return a instanceof Br&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,c,d)=>l&&qS(c,a.filters[d]),!0):!1}(t,e):void Me(19439)}function $S(t){return t instanceof Ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Il(n.value)}`}(t):t instanceof Br?function(n){return n.op.toString()+" {"+n.getFilters().map($S).join(" ,")+"}"}(t):"Filter"}class O6 extends Ft{constructor(e,n,i){super(e,n,i),this.key=Ce.fromName(i.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class P6 extends Ft{constructor(e,n){super(e,"in",n),this.keys=FS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class V6 extends Ft{constructor(e,n){super(e,"not-in",n),this.keys=FS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function FS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ce.fromName(i.referenceValue))}class L6 extends Ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cy(n)&&Ru(n.arrayValue,this.value)}}class z6 extends Ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ru(this.value.arrayValue,n)}}class U6 extends Ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ru(this.value.arrayValue,n)}}class j6 extends Ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ru(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e,n=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function ax(t,e=null,n=[],i=[],a=null,l=null,c=null){return new B6(t,e,n,i,a,l,c)}function uy(t){const e=Le(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>p0(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Hf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Il(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Il(i)).join(",")),e.Ie=n}return e.Ie}function dy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!D6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sx(t.startAt,e.startAt)&&sx(t.endAt,e.endAt)}function m0(t){return Ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n=null,i=[],a=[],l=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function H6(t,e,n,i,a,l,c,d){return new zl(t,e,n,i,a,l,c,d)}function GS(t){return new zl(t)}function ox(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function YS(t){return t.collectionGroup!==null}function cu(t){const e=Le(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),n.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Zt(mn.comparator);return c.filters.forEach(f=>{f.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Nu(l,i))}),n.has(mn.keyField().canonicalString())||e.Ee.push(new Nu(mn.keyField(),i))}return e.Ee}function mi(t){const e=Le(t);return e.de||(e.de=q6(e,cu(t))),e.de}function q6(t,e){if(t.limitType==="F")return ax(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Nu(a.field,l)});const n=t.endAt?new df(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new df(t.startAt.position,t.startAt.inclusive):null;return ax(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function y0(t,e){const n=t.filters.concat([e]);return new zl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function v0(t,e,n){return new zl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $f(t,e){return dy(mi(t),mi(e))&&t.limitType===e.limitType}function KS(t){return`${uy(mi(t))}|lt:${t.limitType}`}function ol(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(a=>$S(a)).join(", ")}]`),Hf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(a=>Il(a)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(a=>Il(a)).join(",")),`Target(${i})`}(mi(t))}; limitType=${t.limitType})`}function Ff(t,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ce.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(t,e)&&function(i,a){for(const l of cu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(t,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(t,e)&&function(i,a){return!(i.startAt&&!function(c,d,f){const p=ix(c,d,f);return c.inclusive?p<=0:p<0}(i.startAt,cu(i),a)||i.endAt&&!function(c,d,f){const p=ix(c,d,f);return c.inclusive?p>=0:p>0}(i.endAt,cu(i),a))}(t,e)}function $6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function XS(t){return(e,n)=>{let i=!1;for(const a of cu(t)){const l=F6(a,e,n);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function F6(t,e,n){const i=t.field.isKeyField()?Ce.comparator(e.key,n.key):function(l,c,d){const f=c.data.field(l),p=d.data.field(l);return f!==null&&p!==null?Cl(f,p):Me(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[n]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ia(this.inner,(n,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return kS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=new St(Ce.comparator);function rs(){return G6}const QS=new St(Ce.comparator);function su(...t){let e=QS;for(const n of t)e=e.insert(n.key,n);return e}function WS(t){let e=QS;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function qa(){return uu()}function ZS(){return uu()}function uu(){return new ro(t=>t.toString(),(t,e)=>t.isEqual(e))}const Y6=new St(Ce.comparator),K6=new Zt(Ce.comparator);function We(...t){let e=K6;for(const n of t)e=e.add(n);return e}const X6=new Zt(qe);function Q6(){return X6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lf(e)?"-0":e}}function JS(t){return{integerValue:""+t}}function W6(t,e){return T6(e)?JS(e):hy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(){this._=void 0}}function Z6(t,e,n){return t instanceof hf?function(a,l){const c={fields:{[OS]:{stringValue:MS},[VS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&ly(l)&&(l=qf(l)),l&&(c.fields[PS]=l),{mapValue:c}}(n,e):t instanceof Cu?tA(t,e):t instanceof Iu?nA(t,e):function(a,l){const c=eA(a,l),d=lx(c)+lx(a.Re);return g0(c)&&g0(a.Re)?JS(d):hy(a.serializer,d)}(t,e)}function J6(t,e,n){return t instanceof Cu?tA(t,e):t instanceof Iu?nA(t,e):n}function eA(t,e){return t instanceof ff?function(i){return g0(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class hf extends Gf{}class Cu extends Gf{constructor(e){super(),this.elements=e}}function tA(t,e){const n=rA(e);for(const i of t.elements)n.some(a=>bi(a,i))||n.push(i);return{arrayValue:{values:n}}}class Iu extends Gf{constructor(e){super(),this.elements=e}}function nA(t,e){let n=rA(e);for(const i of t.elements)n=n.filter(a=>!bi(a,i));return{arrayValue:{values:n}}}class ff extends Gf{constructor(e,n){super(),this.serializer=e,this.Re=n}}function lx(t){return Vt(t.integerValue||t.doubleValue)}function rA(t){return cy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function e5(t,e){return t.field.isEqual(e.field)&&function(i,a){return i instanceof Cu&&a instanceof Cu||i instanceof Iu&&a instanceof Iu?Nl(i.elements,a.elements,bi):i instanceof ff&&a instanceof ff?bi(i.Re,a.Re):i instanceof hf&&a instanceof hf}(t.transform,e.transform)}class t5{constructor(e,n){this.version=e,this.transformResults=n}}class ar{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Yf{}function iA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Kf(t.key,ar.none()):new Uu(t.key,t.data,ar.none());{const n=t.data,i=Hn.empty();let a=new Zt(mn.comparator);for(let l of e.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new sa(t.key,i,new sr(a.toArray()),ar.none())}}function n5(t,e,n){t instanceof Uu?function(a,l,c){const d=a.value.clone(),f=ux(a.fieldTransforms,l,c.transformResults);d.setAll(f),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(t,e,n):t instanceof sa?function(a,l,c){if(!jh(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=ux(a.fieldTransforms,l,c.transformResults),f=l.data;f.setAll(sA(a)),f.setAll(d),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(t,e,n):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function du(t,e,n,i){return t instanceof Uu?function(l,c,d,f){if(!jh(l.precondition,c))return d;const p=l.value.clone(),y=dx(l.fieldTransforms,f,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof sa?function(l,c,d,f){if(!jh(l.precondition,c))return d;const p=dx(l.fieldTransforms,f,c),y=c.data;return y.setAll(sA(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(_=>_.field))}(t,e,n,i):function(l,c,d){return jh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(t,e,n)}function r5(t,e){let n=null;for(const i of t.fieldTransforms){const a=e.data.field(i.field),l=eA(i.transform,a||null);l!=null&&(n===null&&(n=Hn.empty()),n.set(i.field,l))}return n||null}function cx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Nl(i,a,(l,c)=>e5(l,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Uu extends Yf{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class sa extends Yf{constructor(e,n,i,a,l=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function sA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function ux(t,e,n){const i=new Map;lt(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let a=0;a<n.length;a++){const l=t[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,J6(c,d,n[a]))}return i}function dx(t,e,n){const i=new Map;for(const a of t){const l=a.transform,c=n.data.field(a.field);i.set(a.field,Z6(l,c,e))}return i}class Kf extends Yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class i5 extends Yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,n,i,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&n5(l,e,i[a])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=du(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=du(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=ZS();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=n.has(a.key)?null:d;const f=iA(c,d);f!==null&&i.set(a.key,f),c.isValidDocument()||c.convertToNoDocument(Ve.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),We())}isEqual(e){return this.batchId===e.batchId&&Nl(this.mutations,e.mutations,(n,i)=>cx(n,i))&&Nl(this.baseMutations,e.baseMutations,(n,i)=>cx(n,i))}}class fy{constructor(e,n,i,a){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=a}static from(e,n,i){lt(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let a=function(){return Y6}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new fy(e,n,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,tt;function l5(t){switch(t){case me.OK:return Me(64938);case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0;default:return Me(15467,{code:t})}}function aA(t){if(t===void 0)return ns("GRPC error has no .code"),me.UNKNOWN;switch(t){case qt.OK:return me.OK;case qt.CANCELLED:return me.CANCELLED;case qt.UNKNOWN:return me.UNKNOWN;case qt.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case qt.INTERNAL:return me.INTERNAL;case qt.UNAVAILABLE:return me.UNAVAILABLE;case qt.UNAUTHENTICATED:return me.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case qt.NOT_FOUND:return me.NOT_FOUND;case qt.ALREADY_EXISTS:return me.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return me.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case qt.ABORTED:return me.ABORTED;case qt.OUT_OF_RANGE:return me.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return me.UNIMPLEMENTED;case qt.DATA_LOSS:return me.DATA_LOSS;default:return Me(39323,{code:t})}}(tt=qt||(qt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5=new Ys([4294967295,4294967295],0);function hx(t){const e=NS().encode(t),n=new bS;return n.update(e),new Uint8Array(n.digest())}function fx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ys([n,i],0),new Ys([a,l],0)]}class gy{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new au(`Invalid padding: ${n}`);if(i<0)throw new au(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new au(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new au(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Ys.fromNumber(this.pe)}we(e,n,i){let a=e.add(n.multiply(Ys.fromNumber(i)));return a.compare(c5)===1&&(a=new Ys([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=hx(e),[i,a]=fx(n);for(let l=0;l<this.hashCount;l++){const c=this.we(i,a,l);if(!this.be(c))return!1}return!0}static create(e,n,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new gy(l,a,n);return i.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const n=hx(e),[i,a]=fx(n);for(let l=0;l<this.hashCount;l++){const c=this.we(i,a,l);this.Se(c)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n,i,a,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const a=new Map;return a.set(e,ju.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Xf(Ve.min(),a,new St(qe),rs(),We())}}class ju{constructor(e,n,i,a,l){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new ju(i,n,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,i,a){this.De=e,this.removedTargetIds=n,this.key=i,this.ve=a}}class oA{constructor(e,n){this.targetId=e,this.Ce=n}}class lA{constructor(e,n,i=yn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=a}}class gx{constructor(){this.Fe=0,this.Me=px(),this.xe=yn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=We(),n=We(),i=We();return this.Me.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:i=i.add(a);break;default:Me(38017,{changeType:l})}}),new ju(this.xe,this.Oe,e,n,i)}Qe(){this.Ne=!1,this.Me=px()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,lt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class u5{constructor(e){this.ze=e,this.je=new Map,this.He=rs(),this.Je=Rh(),this.Ye=Rh(),this.Ze=new St(qe)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const i=this.rt(n);switch(e.state){case 0:this.it(n)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(n);break;case 3:this.it(n)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),i.ke(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((i,a)=>{this.it(a)&&n(a)})}ot(e){const n=e.targetId,i=e.Ce.count,a=this._t(n);if(a){const l=a.target;if(m0(l))if(i===0){const c=new Ce(l.path);this.tt(n,c,xn.newNoDocument(c,Ve.min()))}else lt(i===1,20013,{expectedCount:i});else{const c=this.ut(n);if(c!==i){const d=this.ct(e),f=d?this.lt(d,e,c):1;if(f!==0){this.st(n);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,p)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=n;let c,d;try{c=ea(i).toUint8Array()}catch(f){if(f instanceof DS)return Rl("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new gy(c,a,l)}catch(f){return Rl(f instanceof au?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.pe===0?null:d}lt(e,n,i){return n.Ce.count===i-this.Tt(e,n.targetId)?0:2}Tt(e,n){const i=this.ze.getRemoteKeysForTarget(n);let a=0;return i.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.tt(n,l,null),a++)}),a}It(e){const n=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&m0(d.target)){const f=new Ce(d.target.path);this.Et(f).has(c)||this.dt(c,f)||this.tt(c,f,xn.newNoDocument(f,e))}l.Le&&(n.set(c,l.qe()),l.Qe())}});let i=We();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(f=>{const p=this._t(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.He.forEach((l,c)=>c.setReadTime(e));const a=new Xf(e,n,this.Ze,this.He,i);return this.He=rs(),this.Je=Rh(),this.Ye=Rh(),this.Ze=new St(qe),a}et(e,n){if(!this.it(e))return;const i=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,i),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,i){if(!this.it(e))return;const a=this.rt(e);this.dt(e,n)?a.$e(n,1):a.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),i&&(this.He=this.He.insert(n,i))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new gx,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Zt(qe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Zt(qe),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new gx),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Rh(){return new St(Ce.comparator)}function px(){return new St(Ce.comparator)}const d5={asc:"ASCENDING",desc:"DESCENDING"},h5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f5={and:"AND",or:"OR"};class g5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _0(t,e){return t.useProto3Json||Hf(e)?e:{value:e}}function gf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function p5(t,e){return gf(t,e.toTimestamp())}function yi(t){return lt(!!t,49232),Ve.fromTimestamp(function(n){const i=Js(n);return new _t(i.seconds,i.nanos)}(t))}function py(t,e){return b0(t,e).canonicalString()}function b0(t,e){const n=function(a){return new vt(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?n:n.child(e)}function uA(t){const e=vt.fromString(t);return lt(pA(e),10190,{key:e.toString()}),e}function E0(t,e){return py(t.databaseId,e.path)}function Om(t,e){const n=uA(e);if(n.get(1)!==t.databaseId.projectId)throw new xe(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xe(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ce(hA(n))}function dA(t,e){return py(t.databaseId,e)}function m5(t){const e=uA(t);return e.length===4?vt.emptyPath():hA(e)}function w0(t){return new vt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hA(t){return lt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function mx(t,e,n){return{name:E0(t,e),fields:n.value.mapValue.fields}}function y5(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Me(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,y){return p.useProto3Json?(lt(y===void 0||typeof y=="string",58123),yn.fromBase64String(y||"")):(lt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),yn.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(p){const y=p.code===void 0?me.UNKNOWN:aA(p.code);return new xe(y,p.message||"")}(c);n=new lA(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Om(t,i.document.name),l=yi(i.document.updateTime),c=i.document.createTime?yi(i.document.createTime):Ve.min(),d=new Hn({mapValue:{fields:i.document.fields}}),f=xn.newFoundDocument(a,l,c,d),p=i.targetIds||[],y=i.removedTargetIds||[];n=new Bh(p,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Om(t,i.document),l=i.readTime?yi(i.readTime):Ve.min(),c=xn.newNoDocument(a,l),d=i.removedTargetIds||[];n=new Bh([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Om(t,i.document),l=i.removedTargetIds||[];n=new Bh([],l,a,null)}else{if(!("filter"in e))return Me(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new o5(a,l),d=i.targetId;n=new oA(d,c)}}return n}function v5(t,e){let n;if(e instanceof Uu)n={update:mx(t,e.key,e.value)};else if(e instanceof Kf)n={delete:E0(t,e.key)};else if(e instanceof sa)n={update:mx(t,e.key,e.data),updateMask:R5(e.fieldMask)};else{if(!(e instanceof i5))return Me(16599,{ft:e.type});n={verify:E0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const d=c.transform;if(d instanceof hf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Cu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Iu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ff)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Me(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:p5(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Me(27497)}(t,e.precondition)),n}function _5(t,e){return t&&t.length>0?(lt(e!==void 0,14353),t.map(n=>function(a,l){let c=a.updateTime?yi(a.updateTime):yi(l);return c.isEqual(Ve.min())&&(c=yi(l)),new t5(c,a.transformResults||[])}(n,e))):[]}function b5(t,e){return{documents:[dA(t,e.path)]}}function E5(t,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=dA(t,a);const l=function(p){if(p.length!==0)return gA(Br.create(p,"and"))}(e.filters);l&&(n.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(y=>function(b){return{field:ll(b.field),direction:T5(b.dir)}}(y))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const d=_0(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{gt:n,parent:a}}function w5(t){let e=m5(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let a=null;if(i>0){lt(i===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];n.where&&(l=function(_){const b=fA(_);return b instanceof Br&&HS(b)?b.getFilters():[b]}(n.where));let c=[];n.orderBy&&(c=function(_){return _.map(b=>function(S){return new Nu(cl(S.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(b))}(n.orderBy));let d=null;n.limit&&(d=function(_){let b;return b=typeof _=="object"?_.value:_,Hf(b)?null:b}(n.limit));let f=null;n.startAt&&(f=function(_){const b=!!_.before,w=_.values||[];return new df(w,b)}(n.startAt));let p=null;return n.endAt&&(p=function(_){const b=!_.before,w=_.values||[];return new df(w,b)}(n.endAt)),H6(e,a,c,l,d,"F",f,p)}function x5(t,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:a})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=cl(n.unaryFilter.field);return Ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=cl(n.unaryFilter.field);return Ft.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=cl(n.unaryFilter.field);return Ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=cl(n.unaryFilter.field);return Ft.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ft.create(cl(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Br.create(n.compositeFilter.filters.map(i=>fA(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(n.compositeFilter.op))}(t):Me(30097,{filter:t})}function T5(t){return d5[t]}function S5(t){return h5[t]}function A5(t){return f5[t]}function ll(t){return{fieldPath:t.canonicalString()}}function cl(t){return mn.fromServerFormat(t.fieldPath)}function gA(t){return t instanceof Ft?function(n){if(n.op==="=="){if(rx(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NAN"}};if(nx(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rx(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NOT_NAN"}};if(nx(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ll(n.field),op:S5(n.op),value:n.value}}}(t):t instanceof Br?function(n){const i=n.getFilters().map(a=>gA(a));return i.length===1?i[0]:{compositeFilter:{op:A5(n.op),filters:i}}}(t):Me(54877,{filter:t})}function R5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function pA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n,i,a,l=Ve.min(),c=Ve.min(),d=yn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e){this.wt=e}}function C5(t){const e=w5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?v0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(){this.Cn=new k5}addToCollectionParentIndex(e,n){return this.Cn.add(n),ve.resolve()}getCollectionParents(e,n){return ve.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ve.resolve()}deleteFieldIndex(e,n){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,n){return ve.resolve()}getDocumentsMatchingTarget(e,n){return ve.resolve(null)}getIndexType(e,n){return ve.resolve(0)}getFieldIndexes(e,n){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,n){return ve.resolve(Zs.min())}getMinOffsetFromCollectionGroup(e,n){return ve.resolve(Zs.min())}updateCollectionGroup(e,n,i){return ve.resolve()}updateIndexEntries(e,n){return ve.resolve()}}class k5{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n]||new Zt(vt.comparator),l=!a.has(i);return this.index[n]=a.add(i),l}has(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Zt(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mA=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(mA,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new kl(0)}static lr(){return new kl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="LruGarbageCollector",D5=1048576;function _x([t,e],[n,i]){const a=qe(t,n);return a===0?qe(e,i):a}class M5{constructor(e){this.Er=e,this.buffer=new Zt(_x),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();_x(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class O5{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){we(vx,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ll(n)?we(vx,"Ignoring IndexedDB error during garbage collection: ",n):await Vl(n)}await this.mr(3e5)})}}class P5{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return ve.resolve(Bf.le);const i=new M5(n);return this.gr.forEachTarget(e,a=>i.Rr(a.sequenceNumber)).next(()=>this.gr.yr(e,a=>i.Rr(a))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.gr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(yx)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yx):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let i,a,l,c,d,f,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,c=Date.now(),this.nthSequenceNumber(e,a))).next(_=>(i=_,d=Date.now(),this.removeTargets(e,i,n))).next(_=>(l=_,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(_=>(p=Date.now(),al()<=Qe.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(f-d)+`ms
	Removed ${_} documents in `+(p-f)+`ms
Total Duration: ${p-y}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_})))}}function V5(t,e){return new P5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(){this.changes=new ro(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ve.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,n,i,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(i!==null&&du(i.mutation,a,sr.empty(),_t.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,We()).next(()=>i))}getLocalViewOfDocuments(e,n,i=We()){const a=qa();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,i).next(l=>{let c=su();return l.forEach((d,f)=>{c=c.insert(d,f.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const i=qa();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,We()))}populateOverlays(e,n,i){const a=[];return i.forEach(l=>{n.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{n.set(c,d)})})}computeViews(e,n,i,a){let l=rs();const c=uu(),d=function(){return uu()}();return n.forEach((f,p)=>{const y=i.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof sa)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),du(y.mutation,p,y.mutation.getFieldMask(),_t.now())):c.set(p.key,sr.empty())}),this.recalculateAndSaveOverlays(e,l).next(f=>(f.forEach((p,y)=>c.set(p,y)),n.forEach((p,y)=>{var _;return d.set(p,new z5(y,(_=c.get(p))!==null&&_!==void 0?_:null))}),d))}recalculateAndSaveOverlays(e,n){const i=uu();let a=new St((c,d)=>c-d),l=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const d of c)d.keys().forEach(f=>{const p=n.get(f);if(p===null)return;let y=i.get(f)||sr.empty();y=d.applyToLocalView(p,y),i.set(f,y);const _=(a.get(d.batchId)||We()).add(f);a=a.insert(d.batchId,_)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),p=f.key,y=f.value,_=ZS();y.forEach(b=>{if(!l.has(b)){const w=iA(n.get(b),i.get(b));w!==null&&_.set(b,w),l=l.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,_))}return ve.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,a){return function(c){return Ce.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):YS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,a):this.getDocumentsMatchingCollectionQuery(e,n,i,a)}getNextDocuments(e,n,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,a-l.size):ve.resolve(qa());let d=Tu,f=l;return c.next(p=>ve.forEach(p,(y,_)=>(d<_.largestBatchId&&(d=_.largestBatchId),l.get(y)?ve.resolve():this.remoteDocumentCache.getEntry(e,y).next(b=>{f=f.insert(y,b)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,f,p,We())).next(y=>({batchId:d,changes:WS(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next(i=>{let a=su();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,i,a){const l=n.collectionGroup;let c=su();return this.indexManager.getCollectionParents(e,l).next(d=>ve.forEach(d,f=>{const p=function(_,b){return new zl(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next(y=>{y.forEach((_,b)=>{c=c.insert(_,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,l,a))).next(c=>{l.forEach((f,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,xn.newInvalidDocument(y)))});let d=su();return c.forEach((f,p)=>{const y=l.get(f);y!==void 0&&du(y.mutation,p,sr.empty(),_t.now()),Ff(n,p)&&(d=d.insert(f,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ve.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:yi(a.createTime)}}(n)),ve.resolve()}getNamedQuery(e,n){return ve.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(a){return{name:a.name,query:C5(a.bundledQuery),readTime:yi(a.readTime)}}(n)),ve.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(){this.overlays=new St(Ce.comparator),this.Qr=new Map}getOverlay(e,n){return ve.resolve(this.overlays.get(n))}getOverlays(e,n){const i=qa();return ve.forEach(n,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((a,l)=>{this.St(e,n,l)}),ve.resolve()}removeOverlaysForBatchId(e,n,i){const a=this.Qr.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(i)),ve.resolve()}getOverlaysForCollection(e,n,i){const a=qa(),l=n.length+1,c=new Ce(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,p=f.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&f.largestBatchId>i&&a.set(f.getKey(),f)}return ve.resolve(a)}getOverlaysForCollectionGroup(e,n,i,a){let l=new St((p,y)=>p-y);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let y=l.get(p.largestBatchId);y===null&&(y=qa(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const d=qa(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((p,y)=>d.set(p,y)),!(d.size()>=a)););return ve.resolve(d)}St(e,n,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Qr.get(a.largestBatchId).delete(i.key);this.Qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new a5(n,i));let l=this.Qr.get(n);l===void 0&&(l=We(),this.Qr.set(n,l)),this.Qr.set(n,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ve.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(){this.$r=new Zt(on.Ur),this.Kr=new Zt(on.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const i=new on(e,n);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.zr(new on(e,n))}jr(e,n){e.forEach(i=>this.removeReference(i,n))}Hr(e){const n=new Ce(new vt([])),i=new on(n,e),a=new on(n,e+1),l=[];return this.Kr.forEachInRange([i,a],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Ce(new vt([])),i=new on(n,e),a=new on(n,e+1);let l=We();return this.Kr.forEachInRange([i,a],c=>{l=l.add(c.key)}),l}containsKey(e){const n=new on(e,0),i=this.$r.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class on{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Ce.comparator(e.key,n.key)||qe(e.Zr,n.Zr)}static Wr(e,n){return qe(e.Zr,n.Zr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Zt(on.Ur)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new s5(l,n,i,a);this.mutationQueue.push(c);for(const d of a)this.Xr=this.Xr.add(new on(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ve.resolve(c)}lookupMutationBatch(e,n){return ve.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,a=this.ti(i),l=a<0?0:a;return ve.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?oy:this.nr-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new on(n,0),a=new on(n,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([i,a],c=>{const d=this.ei(c.Zr);l.push(d)}),ve.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Zt(qe);return n.forEach(a=>{const l=new on(a,0),c=new on(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],d=>{i=i.add(d.Zr)})}),ve.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,a=i.length+1;let l=i;Ce.isDocumentKey(l)||(l=l.child(""));const c=new on(new Ce(l),0);let d=new Zt(qe);return this.Xr.forEachWhile(f=>{const p=f.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(d=d.add(f.Zr)),!0)},c),ve.resolve(this.ni(d))}ni(e){const n=[];return e.forEach(i=>{const a=this.ei(i);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){lt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return ve.forEach(n.mutations,a=>{const l=new on(a.key,n.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,n){const i=new on(n,0),a=this.Xr.firstAfterOrEqual(i);return ve.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e){this.ii=e,this.docs=function(){return new St(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,a=this.docs.get(i),l=a?a.size:0,c=this.ii(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ve.resolve(i?i.document.mutableCopy():xn.newInvalidDocument(n))}getEntries(e,n){let i=rs();return n.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():xn.newInvalidDocument(a))}),ve.resolve(i)}getDocumentsMatchingQuery(e,n,i,a){let l=rs();const c=n.path,d=new Ce(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:p,value:{document:y}}=f.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||b6(_6(y),i)<=0||(a.has(y.key)||Ff(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return ve.resolve(l)}getAllFromCollectionGroup(e,n,i,a){Me(9500)}si(e,n){return ve.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new F5(this)}getSize(e){return ve.resolve(this.size)}}class F5 extends L5{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?n.push(this.Br.addEntry(e,a)):this.Br.removeEntry(i)}),ve.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e){this.persistence=e,this.oi=new ro(n=>uy(n),dy),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this._i=0,this.ai=new my,this.targetCount=0,this.ui=kl.cr()}forEachTarget(e,n){return this.oi.forEach((i,a)=>n(a)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this._i&&(this._i=n),ve.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new kl(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ve.resolve()}updateTargetData(e,n){return this.Tr(n),ve.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,n,i){let a=0;const l=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),ve.waitFor(l).next(()=>a)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,n){const i=this.oi.get(n)||null;return ve.resolve(i)}addMatchingKeys(e,n,i){return this.ai.Gr(n,i),ve.resolve()}removeMatchingKeys(e,n,i){this.ai.jr(n,i);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),ve.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ve.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ai.Yr(n);return ve.resolve(i)}containsKey(e,n){return ve.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n){this.ci={},this.overlays={},this.li=new Bf(0),this.hi=!1,this.hi=!0,this.Pi=new H5,this.referenceDelegate=e(this),this.Ti=new G5(this),this.indexManager=new I5,this.remoteDocumentCache=function(a){return new $5(a)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new N5(n),this.Ei=new j5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new B5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ci[e.toKey()];return i||(i=new q5(n,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,i){we("MemoryPersistence","Starting transaction:",e);const a=new Y5(this.li.next());return this.referenceDelegate.di(),i(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(e,n){return ve.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,n)))}}class Y5 extends w6{constructor(e){super(),this.currentSequenceNumber=e}}class yy{constructor(e){this.persistence=e,this.Vi=new my,this.mi=null}static fi(e){return new yy(e)}get gi(){if(this.mi)return this.mi;throw Me(60996)}addReference(e,n,i){return this.Vi.addReference(i,n),this.gi.delete(i.toString()),ve.resolve()}removeReference(e,n,i){return this.Vi.removeReference(i,n),this.gi.add(i.toString()),ve.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ve.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(a=>this.gi.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>i.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.gi,i=>{const a=Ce.fromPath(i);return this.pi(e,a).next(l=>{l||n.removeEntry(a,Ve.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(i=>{i?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ve.or([()=>ve.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class pf{constructor(e,n){this.persistence=e,this.yi=new ro(i=>S6(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=V5(this,n)}static fi(e,n){return new pf(e,n)}di(){}Ai(e){return ve.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(a=>i+a))}br(e){let n=0;return this.yr(e,i=>{n++}).next(()=>n)}yr(e,n){return ve.forEach(this.yi,(i,a)=>this.Dr(e,i,a).next(l=>l?ve.resolve():n(a)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(e,c=>this.Dr(e,c,n).next(d=>{d||(i++,l.removeEntry(c,Ve.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ve.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),ve.resolve()}removeReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ve.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zh(e.data.value)),n}Dr(e,n,i){return ve.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.yi.get(n);return ve.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n,i,a){this.targetId=e,this.fromCache=n,this.ds=i,this.As=a}static Rs(e,n){let i=We(),a=We();for(const l of n.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new vy(e,n.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return xM()?8:x6(Sn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,i,a){const l={result:null};return this.ws(e,n).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(e,n,a,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new K5;return this.Ss(e,n,c).next(d=>{if(l.result=d,this.fs)return this.Ds(e,n,c,d.size)})}).next(()=>l.result)}Ds(e,n,i,a){return i.documentReadCount<this.gs?(al()<=Qe.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",ol(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ve.resolve()):(al()<=Qe.DEBUG&&we("QueryEngine","Query:",ol(n),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ps*a?(al()<=Qe.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",ol(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mi(n))):ve.resolve())}ws(e,n){if(ox(n))return ve.resolve(null);let i=mi(n);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=v0(n,null,"F"),i=mi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=We(...l);return this.ys.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(f=>{const p=this.vs(n,d);return this.Cs(n,p,c,f.readTime)?this.ws(e,v0(n,null,"F")):this.Fs(e,p,n,f)}))})))}bs(e,n,i,a){return ox(n)||a.isEqual(Ve.min())?ve.resolve(null):this.ys.getDocuments(e,i).next(l=>{const c=this.vs(n,l);return this.Cs(n,c,i,a)?ve.resolve(null):(al()<=Qe.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ol(n)),this.Fs(e,c,n,v6(a,Tu)).next(d=>d))})}vs(e,n){let i=new Zt(XS(e));return n.forEach((a,l)=>{Ff(e,l)&&(i=i.add(l))}),i}Cs(e,n,i,a){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,n,i){return al()<=Qe.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",ol(n)),this.ys.getDocumentsMatchingQuery(e,n,Zs.min(),i)}Fs(e,n,i,a){return this.ys.getDocumentsMatchingQuery(e,i,a).next(l=>(n.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="LocalStore",Q5=3e8;class W5{constructor(e,n,i,a){this.persistence=e,this.Ms=n,this.serializer=a,this.xs=new St(qe),this.Os=new ro(l=>uy(l),dy),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U5(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function Z5(t,e,n,i){return new W5(t,e,n,i)}async function vA(t,e){const n=Le(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let a;return n.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,n.Ls(e),n.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],d=[];let f=We();for(const p of a){c.push(p.batchId);for(const y of p.mutations)f=f.add(y.key)}for(const p of l){d.push(p.batchId);for(const y of p.mutations)f=f.add(y.key)}return n.localDocuments.getDocuments(i,f).next(p=>({ks:p,removedBatchIds:c,addedBatchIds:d}))})})}function J5(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=n.Bs.newChangeBuffer({trackRemovals:!0});return function(d,f,p,y){const _=p.batch,b=_.keys();let w=ve.resolve();return b.forEach(S=>{w=w.next(()=>y.getEntry(f,S)).next(M=>{const C=p.docVersions.get(S);lt(C!==null,48541),M.version.compareTo(C)<0&&(_.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),y.addEntry(M)))})}),w.next(()=>d.mutationQueue.removeMutationBatch(f,_))}(n,i,e,l).next(()=>l.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let f=We();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(f=f.add(d.batch.mutations[p].key));return f}(e))).next(()=>n.localDocuments.getDocuments(i,a))})}function _A(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function eP(t,e){const n=Le(t),i=e.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const d=[];e.targetChanges.forEach((y,_)=>{const b=a.get(_);if(!b)return;d.push(n.Ti.removeMatchingKeys(l,y.removedDocuments,_).next(()=>n.Ti.addMatchingKeys(l,y.addedDocuments,_)));let w=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?w=w.withResumeToken(yn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):y.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(y.resumeToken,i)),a=a.insert(_,w),function(M,C,L){return M.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=Q5?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(b,w,y)&&d.push(n.Ti.updateTargetData(l,w))});let f=rs(),p=We();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(tP(l,c,e.documentUpdates).next(y=>{f=y.qs,p=y.Qs})),!i.isEqual(Ve.min())){const y=n.Ti.getLastRemoteSnapshotVersion(l).next(_=>n.Ti.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(y)}return ve.waitFor(d).next(()=>c.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,f,p)).next(()=>f)}).then(l=>(n.xs=a,l))}function tP(t,e,n){let i=We(),a=We();return n.forEach(l=>i=i.add(l)),e.getEntries(t,i).next(l=>{let c=rs();return n.forEach((d,f)=>{const p=l.get(d);f.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),f.isNoDocument()&&f.version.isEqual(Ve.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):we(_y,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",f.version)}),{qs:c,Qs:a}})}function nP(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=oy),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function rP(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return n.Ti.getTargetData(i,e).next(l=>l?(a=l,ve.resolve(a)):n.Ti.allocateTargetId(i).next(c=>(a=new Hs(e,c,"TargetPurposeListen",i.currentSequenceNumber),n.Ti.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=n.xs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.xs=n.xs.insert(i.targetId,i),n.Os.set(e,i.targetId)),i})}async function x0(t,e,n){const i=Le(t),a=i.xs.get(e),l=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Ll(c))throw c;we(_y,`Failed to update sequence numbers for target ${e}: ${c}`)}i.xs=i.xs.remove(e),i.Os.delete(a.target)}function bx(t,e,n){const i=Le(t);let a=Ve.min(),l=We();return i.persistence.runTransaction("Execute query","readwrite",c=>function(f,p,y){const _=Le(f),b=_.Os.get(y);return b!==void 0?ve.resolve(_.xs.get(b)):_.Ti.getTargetData(p,y)}(i,c,mi(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(c,d.targetId).next(f=>{l=f})}).next(()=>i.Ms.getDocumentsMatchingQuery(c,e,n?a:Ve.min(),n?l:We())).next(d=>(iP(i,$6(e),d),{documents:d,$s:l})))}function iP(t,e,n){let i=t.Ns.get(e)||Ve.min();n.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),t.Ns.set(e,i)}class Ex{constructor(){this.activeTargetIds=Q6()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sP{constructor(){this.xo=new Ex,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,i){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Ex,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="ConnectivityMonitor";class xx{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){we(wx,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){we(wx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh=null;function T0(){return Nh===null?Nh=function(){return 268435456+Math.round(2147483648*Math.random())}():Nh++,"0x"+Nh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="RestConnection",oP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lP{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${i}/databases/${a}`,this.Go=this.databaseId.database===cf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}zo(e,n,i,a,l){const c=T0(),d=this.jo(e,n.toUriEncodedString());we(Pm,`Sending RPC '${e}' ${c}:`,d,i);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,a,l);const{host:p}=new URL(d),y=no(p);return this.Jo(e,d,f,i,y).then(_=>(we(Pm,`Received RPC '${e}' ${c}: `,_),_),_=>{throw Rl(Pm,`RPC '${e}' ${c} failed with error: `,_,"url: ",d,"request:",i),_})}Yo(e,n,i,a,l,c){return this.zo(e,n,i,a,l)}Ho(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}jo(e,n){const i=oP[e];return`${this.Ko}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class uP extends lP{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,a,l){const c=T0();return new Promise((d,f)=>{const p=new ES;p.setWithCredentials(!0),p.listenOnce(wS.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Lh.NO_ERROR:const _=p.getResponseJson();we(En,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(_)),d(_);break;case Lh.TIMEOUT:we(En,`RPC '${e}' ${c} timed out`),f(new xe(me.DEADLINE_EXCEEDED,"Request time out"));break;case Lh.HTTP_ERROR:const b=p.getStatus();if(we(En,`RPC '${e}' ${c} failed with status:`,b,"response text:",p.getResponseText()),b>0){let w=p.getResponseJson();Array.isArray(w)&&(w=w[0]);const S=w?.error;if(S&&S.status&&S.message){const M=function(L){const B=L.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(B)>=0?B:me.UNKNOWN}(S.status);f(new xe(M,S.message))}else f(new xe(me.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new xe(me.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{h_:e,streamId:c,P_:p.getLastErrorCode(),T_:p.getLastError()})}}finally{we(En,`RPC '${e}' ${c} completed.`)}});const y=JSON.stringify(a);we(En,`RPC '${e}' ${c} sending request:`,a),p.send(n,"POST",y,i,15)})}I_(e,n,i){const a=T0(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=SS(),d=TS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const y=l.join("");we(En,`Creating RPC '${e}' stream ${a}: ${y}`,f);const _=c.createWebChannel(y,f);this.E_(_);let b=!1,w=!1;const S=new cP({Zo:C=>{w?we(En,`Not sending because RPC '${e}' stream ${a} is closed:`,C):(b||(we(En,`Opening RPC '${e}' stream ${a} transport.`),_.open(),b=!0),we(En,`RPC '${e}' stream ${a} sending:`,C),_.send(C))},Xo:()=>_.close()}),M=(C,L,B)=>{C.listen(L,G=>{try{B(G)}catch(j){setTimeout(()=>{throw j},0)}})};return M(_,iu.EventType.OPEN,()=>{w||(we(En,`RPC '${e}' stream ${a} transport opened.`),S.__())}),M(_,iu.EventType.CLOSE,()=>{w||(w=!0,we(En,`RPC '${e}' stream ${a} transport closed`),S.u_(),this.d_(_))}),M(_,iu.EventType.ERROR,C=>{w||(w=!0,Rl(En,`RPC '${e}' stream ${a} transport errored. Name:`,C.name,"Message:",C.message),S.u_(new xe(me.UNAVAILABLE,"The operation could not be completed")))}),M(_,iu.EventType.MESSAGE,C=>{var L;if(!w){const B=C.data[0];lt(!!B,16349);const G=B,j=G?.error||((L=G[0])===null||L===void 0?void 0:L.error);if(j){we(En,`RPC '${e}' stream ${a} received error:`,j);const J=j.status;let ee=function(R){const z=qt[R];if(z!==void 0)return aA(z)}(J),O=j.message;ee===void 0&&(ee=me.INTERNAL,O="Unknown error status: "+J+" with message "+j.message),w=!0,S.u_(new xe(ee,O)),_.close()}else we(En,`RPC '${e}' stream ${a} received:`,B),S.c_(B)}}),M(d,xS.STAT_EVENT,C=>{C.stat===d0.PROXY?we(En,`RPC '${e}' stream ${a} detected buffering proxy`):C.stat===d0.NOPROXY&&we(En,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{S.a_()},0),S}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t){return new g5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,n,i=1e3,a=1.5,l=6e4){this.xi=e,this.timerId=n,this.A_=i,this.R_=a,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),a=Math.max(0,n-i);a>0&&we("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="PersistentStream";class EA{constructor(e,n,i,a,l,c,d,f){this.xi=e,this.S_=i,this.D_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new bA(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===me.RESOURCE_EXHAUSTED?(ns(n.toString()),ns("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.v_===n&&this.z_(i,a)},i=>{e(()=>{const a=new xe(me.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(a)})})}z_(e,n){const i=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{i(()=>this.j_(a))}),this.stream.onMessage(a=>{i(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return we(Tx,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(we(Tx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dP extends EA{constructor(e,n,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,a,c),this.serializer=l}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=y5(this.serializer,e),i=function(l){if(!("targetChange"in l))return Ve.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ve.min():c.readTime?yi(c.readTime):Ve.min()}(e);return this.listener.Y_(n,i)}Z_(e){const n={};n.database=w0(this.serializer),n.addTarget=function(l,c){let d;const f=c.target;if(d=m0(f)?{documents:b5(l,f)}:{query:E5(l,f).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=cA(l,c.resumeToken);const p=_0(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ve.min())>0){d.readTime=gf(l,c.snapshotVersion.toTimestamp());const p=_0(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const i=x5(this.serializer,e);i&&(n.labels=i),this.Q_(n)}X_(e){const n={};n.database=w0(this.serializer),n.removeTarget=e,this.Q_(n)}}class hP extends EA{constructor(e,n,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,a,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=_5(e.writeResults,e.commitTime),i=yi(e.commitTime);return this.listener.ra(i,n)}ia(){const e={};e.database=w0(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>v5(this.serializer,i))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{}class gP extends fP{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new xe(me.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,i,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(e,b0(n,i),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new xe(me.UNKNOWN,l.toString())})}Yo(e,n,i,a,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(e,b0(n,i),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(me.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class pP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ns(n),this.ua=!1):we("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za="RemoteStore";class mP{constructor(e,n,i,a,l){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{i.enqueueAndForget(async()=>{io(this)&&(we(Za,"Restarting streams for network reachability change."),await async function(f){const p=Le(f);p.da.add(4),await Bu(p),p.Va.set("Unknown"),p.da.delete(4),await Wf(p)}(this))})}),this.Va=new pP(i,a)}}async function Wf(t){if(io(t))for(const e of t.Aa)await e(!0)}async function Bu(t){for(const e of t.Aa)await e(!1)}function wA(t,e){const n=Le(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),xy(n)?wy(n):Ul(n).N_()&&Ey(n,e))}function by(t,e){const n=Le(t),i=Ul(n);n.Ea.delete(e),i.N_()&&xA(n,e),n.Ea.size===0&&(i.N_()?i.k_():io(n)&&n.Va.set("Unknown"))}function Ey(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ul(t).Z_(e)}function xA(t,e){t.ma.Ke(e),Ul(t).X_(e)}function wy(t){t.ma=new u5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Ul(t).start(),t.Va.ca()}function xy(t){return io(t)&&!Ul(t).O_()&&t.Ea.size>0}function io(t){return Le(t).da.size===0}function TA(t){t.ma=void 0}async function yP(t){t.Va.set("Online")}async function vP(t){t.Ea.forEach((e,n)=>{Ey(t,e)})}async function _P(t,e){TA(t),xy(t)?(t.Va.Pa(e),wy(t)):t.Va.set("Unknown")}async function bP(t,e,n){if(t.Va.set("Online"),e instanceof lA&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ea.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ea.delete(d),a.ma.removeTarget(d))}(t,e)}catch(i){we(Za,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await mf(t,i)}else if(e instanceof Bh?t.ma.Xe(e):e instanceof oA?t.ma.ot(e):t.ma.nt(e),!n.isEqual(Ve.min()))try{const i=await _A(t.localStore);n.compareTo(i)>=0&&await function(l,c){const d=l.ma.It(c);return d.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const y=l.Ea.get(p);y&&l.Ea.set(p,y.withResumeToken(f.resumeToken,c))}}),d.targetMismatches.forEach((f,p)=>{const y=l.Ea.get(f);if(!y)return;l.Ea.set(f,y.withResumeToken(yn.EMPTY_BYTE_STRING,y.snapshotVersion)),xA(l,f);const _=new Hs(y.target,f,p,y.sequenceNumber);Ey(l,_)}),l.remoteSyncer.applyRemoteEvent(d)}(t,n)}catch(i){we(Za,"Failed to raise snapshot:",i),await mf(t,i)}}async function mf(t,e,n){if(!Ll(e))throw e;t.da.add(1),await Bu(t),t.Va.set("Offline"),n||(n=()=>_A(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{we(Za,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Wf(t)})}function SA(t,e){return e().catch(n=>mf(t,n,e))}async function Zf(t){const e=Le(t),n=na(e);let i=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:oy;for(;EP(e);)try{const a=await nP(e.localStore,i);if(a===null){e.Ia.length===0&&n.k_();break}i=a.batchId,wP(e,a)}catch(a){await mf(e,a)}AA(e)&&RA(e)}function EP(t){return io(t)&&t.Ia.length<10}function wP(t,e){t.Ia.push(e);const n=na(t);n.N_()&&n.ea&&n.ta(e.mutations)}function AA(t){return io(t)&&!na(t).O_()&&t.Ia.length>0}function RA(t){na(t).start()}async function xP(t){na(t).ia()}async function TP(t){const e=na(t);for(const n of t.Ia)e.ta(n.mutations)}async function SP(t,e,n){const i=t.Ia.shift(),a=fy.from(i,e,n);await SA(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Zf(t)}async function AP(t,e){e&&na(t).ea&&await async function(i,a){if(function(c){return l5(c)&&c!==me.ABORTED}(a.code)){const l=i.Ia.shift();na(i).L_(),await SA(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Zf(i)}}(t,e),AA(t)&&RA(t)}async function Sx(t,e){const n=Le(t);n.asyncQueue.verifyOperationInProgress(),we(Za,"RemoteStore received new credentials");const i=io(n);n.da.add(3),await Bu(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Wf(n)}async function RP(t,e){const n=Le(t);e?(n.da.delete(2),await Wf(n)):e||(n.da.add(2),await Bu(n),n.Va.set("Unknown"))}function Ul(t){return t.fa||(t.fa=function(n,i,a){const l=Le(n);return l.oa(),new dP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(t.datastore,t.asyncQueue,{e_:yP.bind(null,t),n_:vP.bind(null,t),i_:_P.bind(null,t),Y_:bP.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),xy(t)?wy(t):t.Va.set("Unknown")):(await t.fa.stop(),TA(t))})),t.fa}function na(t){return t.ga||(t.ga=function(n,i,a){const l=Le(n);return l.oa(),new hP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:xP.bind(null,t),i_:AP.bind(null,t),na:TP.bind(null,t),ra:SP.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Zf(t)):(await t.ga.stop(),t.Ia.length>0&&(we(Za,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,n,i,a,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,a,l){const c=Date.now()+i,d=new Ty(e,n,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sy(t,e){if(ns("AsyncQueue",`${e}: ${t}`),Ll(t))return new xe(me.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{static emptySet(e){return new vl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ce.comparator(n.key,i.key):(n,i)=>Ce.comparator(n.key,i.key),this.keyedMap=su(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new vl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.pa=new St(Ce.comparator)}track(e){const n=e.doc.key,i=this.pa.get(n);i?e.type!==0&&i.type===3?this.pa=this.pa.insert(n,e):e.type===3&&i.type!==1?this.pa=this.pa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.pa=this.pa.remove(n):e.type===1&&i.type===2?this.pa=this.pa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Me(63341,{Vt:e,ya:i}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,i)=>{e.push(i)}),e}}class Dl{constructor(e,n,i,a,l,c,d,f,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,a,l){const c=[];return n.forEach(d=>{c.push({type:0,doc:d})}),new Dl(e,n,vl.emptySet(n),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==i[a].type||!n[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class CP{constructor(){this.queries=Rx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const a=Le(n),l=a.queries;a.queries=Rx(),l.forEach((c,d)=>{for(const f of d.Sa)f.onError(i)})})(this,new xe(me.ABORTED,"Firestore shutting down"))}}function Rx(){return new ro(t=>KS(t),$f)}async function IP(t,e){const n=Le(t);let i=3;const a=e.query;let l=n.queries.get(a);l?!l.Da()&&e.va()&&(i=2):(l=new NP,i=e.va()?0:1);try{switch(i){case 0:l.ba=await n.onListen(a,!0);break;case 1:l.ba=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=Sy(c,`Initialization of query '${ol(e.query)}' failed`);return void e.onError(d)}n.queries.set(a,l),l.Sa.push(e),e.Fa(n.onlineState),l.ba&&e.Ma(l.ba)&&Ay(n)}async function kP(t,e){const n=Le(t),i=e.query;let a=3;const l=n.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.va()?0:1:!l.Da()&&e.va()&&(a=2))}switch(a){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function DP(t,e){const n=Le(t);let i=!1;for(const a of e){const l=a.query,c=n.queries.get(l);if(c){for(const d of c.Sa)d.Ma(a)&&(i=!0);c.ba=a}}i&&Ay(n)}function MP(t,e,n){const i=Le(t),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(n);i.queries.delete(e)}function Ay(t){t.Ca.forEach(e=>{e.next()})}var S0,Nx;(Nx=S0||(S0={})).xa="default",Nx.Cache="cache";class OP{constructor(e,n,i){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Dl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const i=n!=="Offline";return(!this.options.Qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Dl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==S0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.key=e}}class CA{constructor(e){this.key=e}}class PP{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=We(),this.mutatedKeys=We(),this.Za=XS(e),this.Xa=new vl(this.Za)}get eu(){return this.Ha}tu(e,n){const i=n?n.nu:new Ax,a=n?n.Xa:this.Xa;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const f=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,_)=>{const b=a.get(y),w=Ff(this.query,_)?_:null,S=!!b&&this.mutatedKeys.has(b.key),M=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let C=!1;b&&w?b.data.isEqual(w.data)?S!==M&&(i.track({type:3,doc:w}),C=!0):this.ru(b,w)||(i.track({type:2,doc:w}),C=!0,(f&&this.Za(w,f)>0||p&&this.Za(w,p)<0)&&(d=!0)):!b&&w?(i.track({type:0,doc:w}),C=!0):b&&!w&&(i.track({type:1,doc:b}),C=!0,(f||p)&&(d=!0)),C&&(w?(c=c.add(w),l=M?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{Xa:c,nu:i,Cs:d,mutatedKeys:l}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,a){const l=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const c=e.nu.wa();c.sort((y,_)=>function(w,S){const M=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Vt:C})}};return M(w)-M(S)}(y.type,_.type)||this.Za(y.doc,_.doc)),this.iu(i),a=a!=null&&a;const d=n&&!a?this.su():[],f=this.Ya.size===0&&this.current&&!a?1:0,p=f!==this.Ja;return this.Ja=f,c.length!==0||p?{snapshot:new Dl(this.query,e.Xa,l,c,e.mutatedKeys,f===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Ax,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=We(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return e.forEach(i=>{this.Ya.has(i)||n.push(new CA(i))}),this.Ya.forEach(i=>{e.has(i)||n.push(new NA(i))}),n}au(e){this.Ha=e.$s,this.Ya=We();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Dl.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Ry="SyncEngine";class VP{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class LP{constructor(e){this.key=e,this.cu=!1}}class zP{constructor(e,n,i,a,l,c){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new ro(d=>KS(d),$f),this.Pu=new Map,this.Tu=new Set,this.Iu=new St(Ce.comparator),this.Eu=new Map,this.du=new my,this.Au={},this.Ru=new Map,this.Vu=kl.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function UP(t,e,n=!0){const i=PA(t);let a;const l=i.hu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.uu()):a=await IA(i,e,n,!0),a}async function jP(t,e){const n=PA(t);await IA(n,e,!0,!1)}async function IA(t,e,n,i){const a=await rP(t.localStore,mi(e)),l=a.targetId,c=t.sharedClientState.addLocalQueryTarget(l,n);let d;return i&&(d=await BP(t,e,l,c==="current",a.resumeToken)),t.isPrimaryClient&&n&&wA(t.remoteStore,a),d}async function BP(t,e,n,i,a){t.fu=(_,b,w)=>async function(M,C,L,B){let G=C.view.tu(L);G.Cs&&(G=await bx(M.localStore,C.query,!1).then(({documents:O})=>C.view.tu(O,G)));const j=B&&B.targetChanges.get(C.targetId),J=B&&B.targetMismatches.get(C.targetId)!=null,ee=C.view.applyChanges(G,M.isPrimaryClient,j,J);return Ix(M,C.targetId,ee.ou),ee.snapshot}(t,_,b,w);const l=await bx(t.localStore,e,!0),c=new PP(e,l.$s),d=c.tu(l.documents),f=ju.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",a),p=c.applyChanges(d,t.isPrimaryClient,f);Ix(t,n,p.ou);const y=new VP(e,n,c);return t.hu.set(e,y),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),p.snapshot}async function HP(t,e,n){const i=Le(t),a=i.hu.get(e),l=i.Pu.get(a.targetId);if(l.length>1)return i.Pu.set(a.targetId,l.filter(c=>!$f(c,e))),void i.hu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await x0(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),n&&by(i.remoteStore,a.targetId),A0(i,a.targetId)}).catch(Vl)):(A0(i,a.targetId),await x0(i.localStore,a.targetId,!0))}async function qP(t,e){const n=Le(t),i=n.hu.get(e),a=n.Pu.get(i.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),by(n.remoteStore,i.targetId))}async function $P(t,e,n){const i=WP(t);try{const a=await function(c,d){const f=Le(c),p=_t.now(),y=d.reduce((w,S)=>w.add(S.key),We());let _,b;return f.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=rs(),M=We();return f.Bs.getEntries(w,y).next(C=>{S=C,S.forEach((L,B)=>{B.isValidDocument()||(M=M.add(L))})}).next(()=>f.localDocuments.getOverlayedDocuments(w,S)).next(C=>{_=C;const L=[];for(const B of d){const G=r5(B,_.get(B.key).overlayedDocument);G!=null&&L.push(new sa(B.key,G,US(G.value.mapValue),ar.exists(!0)))}return f.mutationQueue.addMutationBatch(w,p,L,d)}).next(C=>{b=C;const L=C.applyToLocalDocumentSet(_,M);return f.documentOverlayCache.saveOverlays(w,C.batchId,L)})}).then(()=>({batchId:b.batchId,changes:WS(_)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,d,f){let p=c.Au[c.currentUser.toKey()];p||(p=new St(qe)),p=p.insert(d,f),c.Au[c.currentUser.toKey()]=p}(i,a.batchId,n),await Hu(i,a.changes),await Zf(i.remoteStore)}catch(a){const l=Sy(a,"Failed to persist write");n.reject(l)}}async function kA(t,e){const n=Le(t);try{const i=await eP(n.localStore,e);e.targetChanges.forEach((a,l)=>{const c=n.Eu.get(l);c&&(lt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.cu=!0:a.modifiedDocuments.size>0?lt(c.cu,14607):a.removedDocuments.size>0&&(lt(c.cu,42227),c.cu=!1))}),await Hu(n,i,e)}catch(i){await Vl(i)}}function Cx(t,e,n){const i=Le(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const a=[];i.hu.forEach((l,c)=>{const d=c.view.Fa(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const f=Le(c);f.onlineState=d;let p=!1;f.queries.forEach((y,_)=>{for(const b of _.Sa)b.Fa(d)&&(p=!0)}),p&&Ay(f)}(i.eventManager,e),a.length&&i.lu.Y_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function FP(t,e,n){const i=Le(t);i.sharedClientState.updateQueryState(e,"rejected",n);const a=i.Eu.get(e),l=a&&a.key;if(l){let c=new St(Ce.comparator);c=c.insert(l,xn.newNoDocument(l,Ve.min()));const d=We().add(l),f=new Xf(Ve.min(),new Map,new St(qe),c,d);await kA(i,f),i.Iu=i.Iu.remove(l),i.Eu.delete(e),Ny(i)}else await x0(i.localStore,e,!1).then(()=>A0(i,e,n)).catch(Vl)}async function GP(t,e){const n=Le(t),i=e.batch.batchId;try{const a=await J5(n.localStore,e);MA(n,i,null),DA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Hu(n,a)}catch(a){await Vl(a)}}async function YP(t,e,n){const i=Le(t);try{const a=await function(c,d){const f=Le(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return f.mutationQueue.lookupMutationBatch(p,d).next(_=>(lt(_!==null,37113),y=_.keys(),f.mutationQueue.removeMutationBatch(p,_))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,y,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>f.localDocuments.getDocuments(p,y))})}(i.localStore,e);MA(i,e,n),DA(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Hu(i,a)}catch(a){await Vl(a)}}function DA(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function MA(t,e,n){const i=Le(t);let a=i.Au[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(n?l.reject(n):l.resolve(),a=a.remove(e)),i.Au[i.currentUser.toKey()]=a}}function A0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Pu.get(e))t.hu.delete(i),n&&t.lu.gu(i,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(i=>{t.du.containsKey(i)||OA(t,i)})}function OA(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(by(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),Ny(t))}function Ix(t,e,n){for(const i of n)i instanceof NA?(t.du.addReference(i.key,e),KP(t,i)):i instanceof CA?(we(Ry,"Document no longer in limbo: "+i.key),t.du.removeReference(i.key,e),t.du.containsKey(i.key)||OA(t,i.key)):Me(19791,{pu:i})}function KP(t,e){const n=e.key,i=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(i)||(we(Ry,"New document in limbo: "+n),t.Tu.add(i),Ny(t))}function Ny(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Ce(vt.fromString(e)),i=t.Vu.next();t.Eu.set(i,new LP(n)),t.Iu=t.Iu.insert(n,i),wA(t.remoteStore,new Hs(mi(GS(n.path)),i,"TargetPurposeLimboResolution",Bf.le))}}async function Hu(t,e,n){const i=Le(t),a=[],l=[],c=[];i.hu.isEmpty()||(i.hu.forEach((d,f)=>{c.push(i.fu(f,e,n).then(p=>{var y;if((p||n)&&i.isPrimaryClient){const _=p?!p.fromCache:(y=n?.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(p){a.push(p);const _=vy.Rs(f.targetId,p);l.push(_)}}))}),await Promise.all(c),i.lu.Y_(a),await async function(f,p){const y=Le(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>ve.forEach(p,b=>ve.forEach(b.ds,w=>y.persistence.referenceDelegate.addReference(_,b.targetId,w)).next(()=>ve.forEach(b.As,w=>y.persistence.referenceDelegate.removeReference(_,b.targetId,w)))))}catch(_){if(!Ll(_))throw _;we(_y,"Failed to update sequence numbers: "+_)}for(const _ of p){const b=_.targetId;if(!_.fromCache){const w=y.xs.get(b),S=w.snapshotVersion,M=w.withLastLimboFreeSnapshotVersion(S);y.xs=y.xs.insert(b,M)}}}(i.localStore,l))}async function XP(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){we(Ry,"User change. New user:",e.toKey());const i=await vA(n.localStore,e);n.currentUser=e,function(l,c){l.Ru.forEach(d=>{d.forEach(f=>{f.reject(new xe(me.CANCELLED,c))})}),l.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Hu(n,i.ks)}}function QP(t,e){const n=Le(t),i=n.Eu.get(e);if(i&&i.cu)return We().add(i.key);{let a=We();const l=n.Pu.get(e);if(!l)return a;for(const c of l){const d=n.hu.get(c);a=a.unionWith(d.view.eu)}return a}}function PA(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FP.bind(null,e),e.lu.Y_=DP.bind(null,e.eventManager),e.lu.gu=MP.bind(null,e.eventManager),e}function WP(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YP.bind(null,e),e}class yf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return Z5(this.persistence,new X5,e.initialUser,this.serializer)}Su(e){return new yA(yy.fi,this.serializer)}bu(e){return new sP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yf.provider={build:()=>new yf};class ZP extends yf{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){lt(this.persistence.referenceDelegate instanceof pf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new O5(i,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new yA(i=>pf.fi(i,n),this.serializer)}}class R0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Cx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=XP.bind(null,this.syncEngine),await RP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new CP}()}createDatastore(e){const n=Qf(e.databaseInfo.databaseId),i=function(l){return new uP(l)}(e.databaseInfo);return function(l,c,d,f){return new gP(l,c,d,f)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,a,l,c,d){return new mP(i,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,n=>Cx(this.syncEngine,n,0),function(){return xx.C()?new xx:new aP}())}createSyncEngine(e,n){return function(a,l,c,d,f,p,y){const _=new zP(a,l,c,d,f,p);return y&&(_.mu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const l=Le(a);we(Za,"RemoteStore shutting down."),l.da.add(5),await Bu(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}R0.provider={build:()=>new R0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):ns("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="FirestoreClient";class eV{constructor(e,n,i,a,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=a,this.user=wn.UNAUTHENTICATED,this.clientId=CS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{we(ra,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(we(ra,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Sy(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Lm(t,e){t.asyncQueue.verifyOperationInProgress(),we(ra,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async a=>{i.isEqual(a)||(await vA(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function kx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tV(t);we(ra,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Sx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,a)=>Sx(e.remoteStore,a)),t._onlineComponents=e}async function tV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we(ra,"Using user provided OfflineComponentProvider");try{await Lm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===me.FAILED_PRECONDITION||a.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;Rl("Error using user provided cache. Falling back to memory cache: "+n),await Lm(t,new yf)}}else we(ra,"Using default OfflineComponentProvider"),await Lm(t,new ZP(void 0));return t._offlineComponents}async function VA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we(ra,"Using user provided OnlineComponentProvider"),await kx(t,t._uninitializedComponentsProvider._online)):(we(ra,"Using default OnlineComponentProvider"),await kx(t,new R0))),t._onlineComponents}function nV(t){return VA(t).then(e=>e.syncEngine)}async function rV(t){const e=await VA(t),n=e.eventManager;return n.onListen=UP.bind(null,e.syncEngine),n.onUnlisten=HP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qP.bind(null,e.syncEngine),n}function iV(t,e,n={}){const i=new Ks;return t.asyncQueue.enqueueAndForget(async()=>function(l,c,d,f,p){const y=new JP({next:b=>{y.xu(),c.enqueueAndForget(()=>kP(l,_)),b.fromCache&&f.source==="server"?p.reject(new xe(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),_=new OP(d,y,{includeMetadataChanges:!0,Qa:!0});return IP(l,_)}(await rV(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(t,e,n){if(!n)throw new xe(me.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sV(t,e,n,i){if(e===!0&&i===!0)throw new xe(me.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Mx(t){if(!Ce.isDocumentKey(t))throw new xe(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ox(t){if(Ce.isDocumentKey(t))throw new xe(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Jf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me(12329,{type:typeof t})}function Ja(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jf(t);throw new xe(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="firestore.googleapis.com",Px=!0;class Vx{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UA,this.ssl=Px}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Px;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<D5)throw new xe(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LA((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new xe(me.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new xe(me.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new xe(me.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eg{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new c6;switch(i.type){case"firstParty":return new f6(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new xe(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Dx.get(n);i&&(we("ComponentProvider","Removing Datastore"),Dx.delete(n),i.terminate())}(this),Promise.resolve()}}function aV(t,e,n,i={}){var a;t=Ja(t,eg);const l=no(e),c=t._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;l&&(ey(`https://${f}`),ty("Firestore",!0)),c.host!==UA&&c.host!==f&&Rl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:f,ssl:l,emulatorOptions:i});if(!Xa(p,d)&&(t._setSettings(p),i.mockUserToken)){let y,_;if(typeof i.mockUserToken=="string")y=i.mockUserToken,_=wn.MOCK_USER;else{y=gM(i.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new xe(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new wn(b)}t._authCredentials=new u6(new RS(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new so(this.firestore,e,this._query)}}class or{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class Xs extends so{constructor(e,n,i){super(e,n,GS(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new Ce(e))}withConverter(e){return new Xs(this.firestore,e,this._path)}}function Cy(t,e,...n){if(t=Dt(t),zA("collection","path",e),t instanceof eg){const i=vt.fromString(e,...n);return Ox(i),new Xs(t,null,i)}{if(!(t instanceof or||t instanceof Xs))throw new xe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(vt.fromString(e,...n));return Ox(i),new Xs(t.firestore,null,i)}}function jl(t,e,...n){if(t=Dt(t),arguments.length===1&&(e=CS.newId()),zA("doc","path",e),t instanceof eg){const i=vt.fromString(e,...n);return Mx(i),new or(t,null,new Ce(i))}{if(!(t instanceof or||t instanceof Xs))throw new xe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(vt.fromString(e,...n));return Mx(i),new or(t.firestore,t instanceof Xs?t.converter:null,new Ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="AsyncQueue";class zx{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new bA(this,"async_queue_retry"),this.rc=()=>{const i=Vm();i&&we(Lx,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=e;const n=Vm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Vm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Ks;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Ll(e))throw e;we(Lx,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(i=>{throw this.Xu=i,this.ec=!1,ns("INTERNAL UNHANDLED ERROR: ",Ux(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=n,n}enqueueAfterDelay(e,n,i){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const a=Ty.createAndSchedule(this,e,n,i,l=>this.uc(l));return this.Zu.push(a),a}oc(){this.Xu&&Me(47125,{cc:Ux(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Ux(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class qu extends eg{constructor(e,n,i,a){super(e,n,i,a),this.type="firestore",this._queue=new zx,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zx(e),this._firestoreClient=void 0,await e}}}function oV(t,e){const n=typeof t=="object"?t:iy(),i=typeof t=="string"?t:cf,a=jf(n,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=lS("firestore");l&&aV(a,...l)}return a}function Iy(t){if(t._terminated)throw new xe(me.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||lV(t),t._firestoreClient}function lV(t){var e,n,i;const a=t._freezeSettings(),l=function(d,f,p,y){return new N6(d,f,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,LA(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new eV(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&function(d){const f=d?._online.build();return{_offline:d?._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ml(yn.fromBase64String(e))}catch(n){throw new xe(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ml(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=/^__.*__$/;class uV{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new sa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Uu(e,this.data,n,this.fieldTransforms)}}class jA{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new sa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ic:t})}}class Oy{constructor(e,n,i,a,l,c){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Oy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:i,Rc:!1});return a.Vc(e),a}mc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:i,Rc:!1});return a.Ec(),a}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return vf(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(BA(this.Ic)&&cV.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class dV{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Qf(e)}bc(e,n,i,a=!1){return new Oy({Ic:e,methodName:n,wc:i,path:mn.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Py(t){const e=t._freezeSettings(),n=Qf(t._databaseId);return new dV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function HA(t,e,n,i,a,l={}){const c=t.bc(l.merge||l.mergeFields?2:0,e,n,a);Vy("Data must be an object, but it was:",c,i);const d=qA(i,c);let f,p;if(l.merge)f=new sr(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const _ of l.mergeFields){const b=N0(e,_,n);if(!c.contains(b))throw new xe(me.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);FA(y,b)||y.push(b)}f=new sr(y),p=c.fieldTransforms.filter(_=>f.covers(_.field))}else f=null,p=c.fieldTransforms;return new uV(new Hn(d),f,p)}class ng extends ky{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ng}}function hV(t,e,n,i){const a=t.bc(1,e,n);Vy("Data must be an object, but it was:",a,i);const l=[],c=Hn.empty();ia(i,(f,p)=>{const y=Ly(e,f,n);p=Dt(p);const _=a.mc(y);if(p instanceof ng)l.push(y);else{const b=$u(p,_);b!=null&&(l.push(y),c.set(y,b))}});const d=new sr(l);return new jA(c,d,a.fieldTransforms)}function fV(t,e,n,i,a,l){const c=t.bc(1,e,n),d=[N0(e,i,n)],f=[a];if(l.length%2!=0)throw new xe(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(N0(e,l[b])),f.push(l[b+1]);const p=[],y=Hn.empty();for(let b=d.length-1;b>=0;--b)if(!FA(p,d[b])){const w=d[b];let S=f[b];S=Dt(S);const M=c.mc(w);if(S instanceof ng)p.push(w);else{const C=$u(S,M);C!=null&&(p.push(w),y.set(w,C))}}const _=new sr(p);return new jA(y,_,c.fieldTransforms)}function gV(t,e,n,i=!1){return $u(n,t.bc(i?4:3,e))}function $u(t,e){if($A(t=Dt(t)))return Vy("Unsupported field value:",e,t),qA(t,e);if(t instanceof ky)return function(i,a){if(!BA(a.Ic))throw a.gc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(i,a){const l=[];let c=0;for(const d of i){let f=$u(d,a.fc(c));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),c++}return{arrayValue:{values:l}}}(t,e)}return function(i,a){if((i=Dt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return W6(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=_t.fromDate(i);return{timestampValue:gf(a.serializer,l)}}if(i instanceof _t){const l=new _t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:gf(a.serializer,l)}}if(i instanceof Dy)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ml)return{bytesValue:cA(a.serializer,i._byteString)};if(i instanceof or){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:py(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof My)return function(c,d){return{mapValue:{fields:{[LS]:{stringValue:zS},[uf]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.gc("VectorValues must only contain numeric values.");return hy(d.serializer,p)})}}}}}}(i,a);throw a.gc(`Unsupported field value: ${Jf(i)}`)}(t,e)}function qA(t,e){const n={};return kS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ia(t,(i,a)=>{const l=$u(a,e.Ac(i));l!=null&&(n[i]=l)}),{mapValue:{fields:n}}}function $A(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof Dy||t instanceof Ml||t instanceof or||t instanceof ky||t instanceof My)}function Vy(t,e,n){if(!$A(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const i=Jf(n);throw i==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+i)}}function N0(t,e,n){if((e=Dt(e))instanceof tg)return e._internalPath;if(typeof e=="string")return Ly(t,e);throw vf("Field path arguments must be of type string or ",t,!1,void 0,n)}const pV=new RegExp("[~\\*/\\[\\]]");function Ly(t,e,n){if(e.search(pV)>=0)throw vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tg(...e.split("."))._internalPath}catch{throw vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vf(t,e,n,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(l||c)&&(f+=" (found",l&&(f+=` in field ${i}`),c&&(f+=` in document ${a}`),f+=")"),new xe(me.INVALID_ARGUMENT,d+t+f)}function FA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,n,i,a,l){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mV extends GA{data(){return super.data()}}function rg(t,e){return typeof e=="string"?Ly(t,e):e instanceof tg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zy{}class YA extends zy{}function vV(t,e,...n){let i=[];e instanceof zy&&i.push(e),i=i.concat(n),function(l){const c=l.filter(f=>f instanceof Uy).length,d=l.filter(f=>f instanceof ig).length;if(c>1||c>0&&d>0)throw new xe(me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)t=a._apply(t);return t}class ig extends YA{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new ig(e,n,i)}_apply(e){const n=this._parse(e);return KA(e._query,n),new so(e.firestore,e.converter,y0(e._query,n))}_parse(e){const n=Py(e.firestore);return function(l,c,d,f,p,y,_){let b;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new xe(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Bx(_,y);const S=[];for(const M of _)S.push(jx(f,l,M));b={arrayValue:{values:S}}}else b=jx(f,l,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Bx(_,y),b=gV(d,c,_,y==="in"||y==="not-in");return Ft.create(p,y,b)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function _V(t,e,n){const i=e,a=rg("where",t);return ig._create(a,i,n)}class Uy extends zy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Uy(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Br.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const f of d)KA(c,f),c=y0(c,f)}(e._query,n),new so(e.firestore,e.converter,y0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jy extends YA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jy(e,n)}_apply(e){const n=function(a,l,c){if(a.startAt!==null)throw new xe(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new xe(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nu(l,c)}(e._query,this._field,this._direction);return new so(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new zl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,n))}}function bV(t,e="asc"){const n=e,i=rg("orderBy",t);return jy._create(i,n)}function jx(t,e,n){if(typeof(n=Dt(n))=="string"){if(n==="")throw new xe(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YS(e)&&n.indexOf("/")!==-1)throw new xe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(vt.fromString(n));if(!Ce.isDocumentKey(i))throw new xe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return tx(t,new Ce(i))}if(n instanceof or)return tx(t,n._key);throw new xe(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jf(n)}.`)}function Bx(t,e){if(!Array.isArray(t)||t.length===0)throw new xe(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KA(t,e){const n=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new xe(me.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(me.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class EV{convertValue(e,n="none"){switch(ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ia(e,(a,l)=>{i[a]=this.convertValue(l,n)}),i}convertVectorValue(e){var n,i,a;const l=(a=(i=(n=e.fields)===null||n===void 0?void 0:n[uf].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(c=>Vt(c.doubleValue));return new My(l)}convertGeoPoint(e){return new Dy(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=qf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){const n=Js(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=vt.fromString(e);lt(pA(i),9688,{name:e});const a=new Au(i.get(1),i.get(3)),l=new Ce(i.popFirst(5));return a.isEqual(n)||ns(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wV extends GA{constructor(e,n,i,a,l,c){super(e,n,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(rg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Hh extends wV{data(e={}){return super.data(e)}}class xV{constructor(e,n,i,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Ch(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Hh(this._firestore,this._userDataWriter,i.key,i,new Ch(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const f=new Hh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ch(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const f=new Hh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ch(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:TV(d.type),doc:f,oldIndex:p,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function TV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:t})}}class SV extends EV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ml(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,n)}}function By(t){t=Ja(t,so);const e=Ja(t.firestore,qu),n=Iy(e),i=new SV(e);return yV(t._query),iV(n,t._query).then(a=>new xV(e,i,t,a))}function Hy(t,e,n){t=Ja(t,or);const i=Ja(t.firestore,qu),a=XA(t.converter,e,n);return qy(i,[HA(Py(i),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,ar.none())])}function AV(t){return qy(Ja(t.firestore,qu),[new Kf(t._key,ar.none())])}function qy(t,e){return function(i,a){const l=new Ks;return i.asyncQueue.enqueueAndForget(async()=>$P(await nV(i),a,l)),l.promise}(Iy(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Py(e)}set(e,n,i){this._verifyNotCommitted();const a=zm(e,this._firestore),l=XA(a.converter,n,i),c=HA(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,ar.none())),this}update(e,n,i,...a){this._verifyNotCommitted();const l=zm(e,this._firestore);let c;return c=typeof(n=Dt(n))=="string"||n instanceof tg?fV(this._dataReader,"WriteBatch.update",l._key,n,i,a):hV(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(c.toMutation(l._key,ar.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=zm(e,this._firestore);return this._mutations=this._mutations.concat(new Kf(n._key,ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zm(t,e){if((t=Dt(t)).firestore!==e)throw new xe(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t){return Iy(t=Ja(t,qu)),new RV(t,e=>qy(t,e))}(function(e,n=!0){(function(a){Pl=a})(Ol),Qa(new Ws("firestore",(i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new qu(new d6(i.getProvider("auth-internal")),new g6(c,i.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new xe(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Au(p.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),pi(qw,$w,e),pi(qw,$w,"esm2017")})();function $y(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n}function WA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NV=WA,ZA=new Lu("auth","Firebase",WA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f=new ny("@firebase/auth");function CV(t,...e){_f.logLevel<=Qe.WARN&&_f.warn(`Auth (${Ol}): ${t}`,...e)}function qh(t,...e){_f.logLevel<=Qe.ERROR&&_f.error(`Auth (${Ol}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t,...e){throw Fy(t,...e)}function vi(t,...e){return Fy(t,...e)}function JA(t,e,n){const i=Object.assign(Object.assign({},NV()),{[e]:n});return new Lu("auth","Firebase",i).create(e,{appName:t.name})}function Zi(t){return JA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fy(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return ZA.create(t,...e)}function De(t,e,...n){if(!t)throw Fy(e,...n)}function Qi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw qh(e),new Error(e)}function is(t,e){t||Qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function IV(){return Hx()==="http:"||Hx()==="https:"}function Hx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IV()||bM()||"connection"in navigator)?navigator.onLine:!0}function DV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n){this.shortDelay=e,this.longDelay=n,is(n>e,"Short delay should be less than long delay!"),this.isMobile=yM()||EM()}get(){return kV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(t,e){is(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PV=new Fu(3e4,6e4);function aa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function oa(t,e,n,i,a={}){return t2(t,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=zu(Object.assign({key:t.config.apiKey},c)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:f},l);return _M()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&no(t.emulatorConfig.host)&&(p.credentials="include"),e2.fetch()(await n2(t,t.config.apiHost,n,d),p)})}async function t2(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},MV),e);try{const a=new LV(t),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Ih(t,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[f,p]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ih(t,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Ih(t,"email-already-in-use",c);if(f==="USER_DISABLED")throw Ih(t,"user-disabled",c);const y=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw JA(t,y,p);Hr(t,y)}}catch(a){if(a instanceof wi)throw a;Hr(t,"network-request-failed",{message:String(a)})}}async function Gu(t,e,n,i,a={}){const l=await oa(t,e,n,i,a);return"mfaPendingCredential"in l&&Hr(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function n2(t,e,n,i){const a=`${e}${n}?${i}`,l=t,c=l.config.emulator?Gy(t.config,a):`${t.config.apiScheme}://${a}`;return OV.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function VV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(vi(this.auth,"network-request-failed")),PV.get())})}}function Ih(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const a=vi(t,e,i);return a.customData._tokenResponse=n,a}function qx(t){return t!==void 0&&t.enterprise!==void 0}class zV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return VV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function UV(t,e){return oa(t,"GET","/v2/recaptchaConfig",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jV(t,e){return oa(t,"POST","/v1/accounts:delete",e)}async function bf(t,e){return oa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BV(t,e=!1){const n=Dt(t),i=await n.getIdToken(e),a=Yy(i);De(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:hu(Um(a.auth_time)),issuedAtTime:hu(Um(a.iat)),expirationTime:hu(Um(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Um(t){return Number(t)*1e3}function Yy(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return qh("JWT malformed, contained fewer than 3 sections"),null;try{const a=aS(n);return a?JSON.parse(a):(qh("Failed to decode base64 JWT payload"),null)}catch(a){return qh("Caught error parsing JWT payload as JSON",a?.toString()),null}}function $x(t){const e=Yy(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ku(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof wi&&HV(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function HV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hu(this.lastLoginAt),this.creationTime=hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ef(t){var e;const n=t.auth,i=await t.getIdToken(),a=await ku(t,bf(n,{idToken:i}));De(a?.users.length,n,"internal-error");const l=a.users[0];t._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?r2(l.providerUserInfo):[],d=FV(t.providerData,c),f=t.isAnonymous,p=!(t.email&&l.passwordHash)&&!d?.length,y=f?p:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new I0(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(t,_)}async function $V(t){const e=Dt(t);await Ef(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FV(t,e){return[...t.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function r2(t){return t.map(e=>{var{providerId:n}=e,i=$y(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GV(t,e){const n=await t2(t,{},async()=>{const i=zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=t.config,c=await n2(t,a,"/v1/token",`key=${l}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:i};return t.emulatorConfig&&no(t.emulatorConfig.host)&&(f.credentials="include"),e2.fetch()(c,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function YV(t,e){return oa(t,"POST","/v2/accounts:revokeToken",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$x(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=$x(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:a,expiresIn:l}=await GV(e,n);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:a,expirationTime:l}=n,c=new _l;return i&&(De(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(De(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(De(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _l,this.toJSON())}_performRefresh(){return Qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ur{constructor(e){var{uid:n,auth:i,stsTokenManager:a}=e,l=$y(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new I0(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await ku(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return BV(this,e)}reload(){return $V(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ur(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Ef(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(Zi(this.auth));const e=await this.getIdToken();return await ku(this,jV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,a,l,c,d,f,p,y;const _=(i=n.displayName)!==null&&i!==void 0?i:void 0,b=(a=n.email)!==null&&a!==void 0?a:void 0,w=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,S=(c=n.photoURL)!==null&&c!==void 0?c:void 0,M=(d=n.tenantId)!==null&&d!==void 0?d:void 0,C=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,L=(p=n.createdAt)!==null&&p!==void 0?p:void 0,B=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:G,emailVerified:j,isAnonymous:J,providerData:ee,stsTokenManager:O}=n;De(G&&O,e,"internal-error");const A=_l.fromJSON(this.name,O);De(typeof G=="string",e,"internal-error"),Ds(_,e.name),Ds(b,e.name),De(typeof j=="boolean",e,"internal-error"),De(typeof J=="boolean",e,"internal-error"),Ds(w,e.name),Ds(S,e.name),Ds(M,e.name),Ds(C,e.name),Ds(L,e.name),Ds(B,e.name);const R=new Ur({uid:G,auth:e,email:b,emailVerified:j,displayName:_,isAnonymous:J,photoURL:S,phoneNumber:w,tenantId:M,stsTokenManager:A,createdAt:L,lastLoginAt:B});return ee&&Array.isArray(ee)&&(R.providerData=ee.map(z=>Object.assign({},z))),C&&(R._redirectEventId=C),R}static async _fromIdTokenResponse(e,n,i=!1){const a=new _l;a.updateFromServerResponse(n);const l=new Ur({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Ef(l),l}static async _fromGetAccountInfoResponse(e,n,i){const a=n.users[0];De(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?r2(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new _l;d.updateFromIdToken(i);const f=new Ur({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new I0(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=new Map;function Wi(t){is(t instanceof Function,"Expected a class definition");let e=Fx.get(t);return e?(is(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Fx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}i2.type="NONE";const Gx=i2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(t,e,n){return`firebase:${t}:${e}:${n}`}class bl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=$h(this.userKey,a.apiKey,l),this.fullPersistenceKey=$h("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await bf(this.auth,{idToken:e}).catch(()=>{});return n?Ur._fromGetAccountInfoResponse(this.auth,n,e):null}return Ur._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new bl(Wi(Gx),e,i);const a=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Wi(Gx);const c=$h(i,e.config.apiKey,e.name);let d=null;for(const p of n)try{const y=await p._get(c);if(y){let _;if(typeof y=="string"){const b=await bf(e,{idToken:y}).catch(()=>{});if(!b)break;_=await Ur._fromGetAccountInfoResponse(e,b,y)}else _=Ur._fromJSON(e,y);p!==l&&(d=_),l=p;break}}catch{}const f=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new bl(l,e,i):(l=f[0],d&&await l._set(c,d.toJSON()),await Promise.all(n.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new bl(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(l2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(s2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(u2(e))return"Blackberry";if(d2(e))return"Webos";if(a2(e))return"Safari";if((e.includes("chrome/")||o2(e))&&!e.includes("edge/"))return"Chrome";if(c2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function s2(t=Sn()){return/firefox\//i.test(t)}function a2(t=Sn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function o2(t=Sn()){return/crios\//i.test(t)}function l2(t=Sn()){return/iemobile/i.test(t)}function c2(t=Sn()){return/android/i.test(t)}function u2(t=Sn()){return/blackberry/i.test(t)}function d2(t=Sn()){return/webos/i.test(t)}function Ky(t=Sn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function KV(t=Sn()){var e;return Ky(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XV(){return wM()&&document.documentMode===10}function h2(t=Sn()){return Ky(t)||c2(t)||d2(t)||u2(t)||/windows phone/i.test(t)||l2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(t,e=[]){let n;switch(t){case"Browser":n=Yx(Sn());break;case"Worker":n=`${Yx(Sn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ol}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=l=>new Promise((c,d)=>{try{const f=e(l);c(f)}catch(f){d(f)}});i.onAbort=n,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WV(t,e={}){return oa(t,"GET","/v2/passwordPolicy",aa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=6;class JV{constructor(e){var n,i,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:ZV,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,a,l,c,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(a=f.containsLowercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsUppercaseLetter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(c=f.containsNumericCharacter)!==null&&c!==void 0?c:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e,n,i,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kx(this),this.idTokenSubscription=new Kx(this),this.beforeStateQueue=new QV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wi(n)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await bl.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bf(this,{idToken:e}),i=await Ur._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ir(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=a?._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===d)&&f?.user&&(a=f.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ef(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(Zi(this));const n=e?Dt(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(Zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(Zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WV(this),n=new JV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await YV(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wi(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await bl.create(this,[Wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,i,a);return()=>{c=!0,f()}}else{const f=e.addObserver(n);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=f2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var e;if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&CV(`Error while retrieving App Check token: ${n.error}`),n?.token}}function ao(t){return Dt(t)}class Kx{constructor(e){this.auth=e,this.observer=null,this.addObserver=IM(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function t9(t){sg=t}function g2(t){return sg.loadJS(t)}function n9(){return sg.recaptchaEnterpriseScript}function r9(){return sg.gapiScript}function i9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class s9{constructor(){this.enterprise=new a9}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class a9{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const o9="recaptcha-enterprise",p2="NO_RECAPTCHA";class l9{constructor(e){this.type=o9,this.auth=ao(e)}async verify(e="verify",n=!1){async function i(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{UV(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new zV(f);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(f=>{d(f)})})}function a(l,c,d){const f=window.grecaptcha;qx(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(p=>{c(p)}).catch(()=>{c(p2)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new s9().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!n&&qx(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=n9();f.length!==0&&(f+=d),g2(f).then(()=>{a(d,l,c)}).catch(p=>{c(p)})}}).catch(d=>{c(d)})})}}async function Xx(t,e,n,i=!1,a=!1){const l=new l9(t);let c;if(a)c=p2;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const d=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function k0(t,e,n,i,a){var l;if(!((l=t._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Xx(t,e,n,n==="getOobCode");return i(t,c)}else return i(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Xx(t,e,n,n==="getOobCode");return i(t,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(t,e){const n=jf(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(Xa(l,e??{}))return a;Hr(a,"already-initialized")}return n.initialize({options:e})}function u9(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Wi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function d9(t,e,n){const i=ao(t);De(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=m2(e),{host:c,port:d}=h9(e),f=d===null?"":`:${d}`,p={url:`${l}//${c}${f}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){De(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),De(Xa(p,i.config.emulator)&&Xa(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,no(c)?(ey(`${l}//${c}${f}`),ty("Auth",!0)):f9()}function m2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function h9(t){const e=m2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:Qx(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:Qx(c)}}}function Qx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function f9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qi("not implemented")}_getIdTokenResponse(e){return Qi("not implemented")}_linkToIdToken(e,n){return Qi("not implemented")}_getReauthenticationResolver(e){return Qi("not implemented")}}async function g9(t,e){return oa(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p9(t,e){return Gu(t,"POST","/v1/accounts:signInWithPassword",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m9(t,e){return Gu(t,"POST","/v1/accounts:signInWithEmailLink",aa(t,e))}async function y9(t,e){return Gu(t,"POST","/v1/accounts:signInWithEmailLink",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends Xy{constructor(e,n,i,a=null){super("password",i),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new Du(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Du(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return k0(e,n,"signInWithPassword",p9);case"emailLink":return m9(e,{email:this._email,oobCode:this._password});default:Hr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return k0(e,i,"signUpPassword",g9);case"emailLink":return y9(e,{idToken:n,email:this._email,oobCode:this._password});default:Hr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(t,e){return Gu(t,"POST","/v1/accounts:signInWithIdp",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9="http://localhost";class eo extends Xy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Hr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=n,l=$y(n,["providerId","signInMethod"]);if(!i||!a)return null;const c=new eo(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return El(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,El(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,El(e,n)}buildRequest(){const e={requestUri:v9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _9(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function b9(t){const e=nu(ru(t)).link,n=e?nu(ru(e)).deep_link_id:null,i=nu(ru(t)).deep_link_id;return(i?nu(ru(i)).link:null)||i||n||e||t}class Qy{constructor(e){var n,i,a,l,c,d;const f=nu(ru(e)),p=(n=f.apiKey)!==null&&n!==void 0?n:null,y=(i=f.oobCode)!==null&&i!==void 0?i:null,_=_9((a=f.mode)!==null&&a!==void 0?a:null);De(p&&y&&_,"argument-error"),this.apiKey=p,this.operation=_,this.code=y,this.continueUrl=(l=f.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=f.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=b9(e);try{return new Qy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this.providerId=Bl.PROVIDER_ID}static credential(e,n){return Du._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Qy.parseLink(n);return De(i,"argument-error"),Du._fromEmailAndCode(e,i.code,i.tenantId)}}Bl.PROVIDER_ID="password";Bl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends y2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends Yu{constructor(){super("facebook.com")}static credential(e){return eo._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";zs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return eo._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Us.credential(n,i)}catch{return null}}}Us.GOOGLE_SIGN_IN_METHOD="google.com";Us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Yu{constructor(){super("github.com")}static credential(e){return eo._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.GITHUB_SIGN_IN_METHOD="github.com";js.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Yu{constructor(){super("twitter.com")}static credential(e,n){return eo._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Bs.credential(n,i)}catch{return null}}}Bs.TWITTER_SIGN_IN_METHOD="twitter.com";Bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E9(t,e){return Gu(t,"POST","/v1/accounts:signUp",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,a=!1){const l=await Ur._fromIdTokenResponse(e,i,a),c=Wx(i);return new to({user:l,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const a=Wx(i);return new to({user:e,providerId:a,_tokenResponse:i,operationType:n})}}function Wx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends wi{constructor(e,n,i,a){var l;super(n.code,n.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,wf.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,a){return new wf(e,n,i,a)}}function v2(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?wf._fromErrorAndOperation(t,l,e,i):l})}async function w9(t,e,n=!1){const i=await ku(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return to._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x9(t,e,n=!1){const{auth:i}=t;if(ir(i.app))return Promise.reject(Zi(i));const a="reauthenticate";try{const l=await ku(t,v2(i,a,e,t),n);De(l.idToken,i,"internal-error");const c=Yy(l.idToken);De(c,i,"internal-error");const{sub:d}=c;return De(t.uid===d,i,"user-mismatch"),to._forOperation(t,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Hr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(t,e,n=!1){if(ir(t.app))return Promise.reject(Zi(t));const i="signIn",a=await v2(t,i,e),l=await to._fromIdTokenResponse(t,i,a);return n||await t._updateCurrentUser(l.user),l}async function T9(t,e){return _2(ao(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b2(t){const e=ao(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function S9(t,e,n){if(ir(t.app))return Promise.reject(Zi(t));const i=ao(t),c=await k0(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",E9).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&b2(t),f}),d=await to._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function A9(t,e,n){return ir(t.app)?Promise.reject(Zi(t)):T9(Dt(t),Bl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&b2(t),i})}function R9(t,e,n,i){return Dt(t).onIdTokenChanged(e,n,i)}function N9(t,e,n){return Dt(t).beforeAuthStateChanged(e,n)}function C9(t,e,n,i){return Dt(t).onAuthStateChanged(e,n,i)}function I9(t){return Dt(t).signOut()}const xf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xf,"1"),this.storage.removeItem(xf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9=1e3,D9=10;class w2 extends E2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=h2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),a=this.localCache[n];i!==a&&e(n,a,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}const i=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);XV()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,D9):a()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},k9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}w2.type="LOCAL";const M9=w2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2 extends E2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}x2.type="SESSION";const T2=x2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const i=new ag(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async p=>p(n.origin,l)),f=await O9(d);n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ag.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,f)=>{const p=Wy("",20);a.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(_){const b=_;if(b.data.eventId===p)switch(b.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(y),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(){return window}function V9(t){_i().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(){return typeof _i().WorkerGlobalScope<"u"&&typeof _i().importScripts=="function"}async function L9(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function z9(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function U9(){return S2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2="firebaseLocalStorageDb",j9=1,Tf="firebaseLocalStorage",R2="fbase_key";class Ku{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function og(t,e){return t.transaction([Tf],e?"readwrite":"readonly").objectStore(Tf)}function B9(){const t=indexedDB.deleteDatabase(A2);return new Ku(t).toPromise()}function D0(){const t=indexedDB.open(A2,j9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Tf,{keyPath:R2})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Tf)?e(i):(i.close(),await B9(),e(await D0()))})})}async function Zx(t,e,n){const i=og(t,!0).put({[R2]:e,value:n});return new Ku(i).toPromise()}async function H9(t,e){const n=og(t,!1).get(e),i=await new Ku(n).toPromise();return i===void 0?null:i.value}function Jx(t,e){const n=og(t,!0).delete(e);return new Ku(n).toPromise()}const q9=800,$9=3;class N2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await D0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>$9)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return S2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ag._getInstance(U9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await L9(),!this.activeServiceWorker)return;this.sender=new P9(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||z9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await D0();return await Zx(e,xf,"1"),await Jx(e,xf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Zx(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>H9(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=og(a,!1).getAll();return new Ku(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),q9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}N2.type="LOCAL";const F9=N2;new Fu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(t,e){return e?Wi(e):(De(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy extends Xy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return El(e,this._buildIdpRequest())}_linkToIdToken(e,n){return El(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return El(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Y9(t){return _2(t.auth,new Zy(t),t.bypassAuthState)}function K9(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),x9(n,new Zy(t),t.bypassAuthState)}async function X9(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),w9(n,new Zy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y9;case"linkViaPopup":case"linkViaRedirect":return X9;case"reauthViaPopup":case"reauthViaRedirect":return K9;default:Hr(this.auth,"internal-error")}}resolve(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9=new Fu(2e3,1e4);class hl extends C2{constructor(e,n,i,a,l){super(e,n,a,l),this.provider=i,this.authWindow=null,this.pollId=null,hl.currentPopupAction&&hl.currentPopupAction.cancel(),hl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){is(this.filter.length===1,"Popup operations only handle one event");const e=Wy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q9.get())};e()}}hl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9="pendingRedirect",Fh=new Map;class Z9 extends C2{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Fh.get(this.auth._key());if(!e){try{const i=await J9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Fh.set(this.auth._key(),e)}return this.bypassAuthState||Fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function J9(t,e){const n=nL(e),i=tL(t);if(!await i._isAvailable())return!1;const a=await i._get(n)==="true";return await i._remove(n),a}function eL(t,e){Fh.set(t._key(),e)}function tL(t){return Wi(t._redirectPersistence)}function nL(t){return $h(W9,t.config.apiKey,t.name)}async function rL(t,e,n=!1){if(ir(t.app))return Promise.reject(Zi(t));const i=ao(t),a=G9(i,e),c=await new Z9(i,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=10*60*1e3;class sL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!I2(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(vi(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iL&&this.cachedEventUids.clear(),this.cachedEventUids.has(e1(e))}saveEventToCache(e){this.cachedEventUids.add(e1(e)),this.lastProcessedEventTime=Date.now()}}function e1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function I2({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function aL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return I2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oL(t,e={}){return oa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cL=/^https?/;async function uL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oL(t);for(const n of e)try{if(dL(n))return}catch{}Hr(t,"unauthorized-domain")}function dL(t){const e=C0(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!cL.test(n))return!1;if(lL.test(t))return i===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=new Fu(3e4,6e4);function t1(){const t=_i().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function fL(t){return new Promise((e,n)=>{var i,a,l;function c(){t1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{t1(),n(vi(t,"network-request-failed"))},timeout:hL.get()})}if(!((a=(i=_i().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=_i().gapi)===null||l===void 0)&&l.load)c();else{const d=i9("iframefcb");return _i()[d]=()=>{gapi.load?c():n(vi(t,"network-request-failed"))},g2(`${r9()}?onload=${d}`).catch(f=>n(f))}}).catch(e=>{throw Gh=null,e})}let Gh=null;function gL(t){return Gh=Gh||fL(t),Gh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=new Fu(5e3,15e3),mL="__/auth/iframe",yL="emulator/auth/iframe",vL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_L=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bL(t){const e=t.config;De(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Gy(e,yL):`https://${t.config.authDomain}/${mL}`,i={apiKey:e.apiKey,appName:t.name,v:Ol},a=_L.get(t.config.apiHost);a&&(i.eid=a);const l=t._getFrameworks();return l.length&&(i.fw=l.join(",")),`${n}?${zu(i).slice(1)}`}async function EL(t){const e=await gL(t),n=_i().gapi;return De(n,t,"internal-error"),e.open({where:document.body,url:bL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vL,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=vi(t,"network-request-failed"),d=_i().setTimeout(()=>{l(c)},pL.get());function f(){_i().clearTimeout(d),a(i)}i.ping(f).then(f,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xL=500,TL=600,SL="_blank",AL="http://localhost";class n1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RL(t,e,n,i=xL,a=TL){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f=Object.assign(Object.assign({},wL),{width:i.toString(),height:a.toString(),top:l,left:c}),p=Sn().toLowerCase();n&&(d=o2(p)?SL:n),s2(p)&&(e=e||AL,f.scrollbars="yes");const y=Object.entries(f).reduce((b,[w,S])=>`${b}${w}=${S},`,"");if(KV(p)&&d!=="_self")return NL(e||"",d),new n1(null);const _=window.open(e||"",d,y);De(_,t,"popup-blocked");try{_.focus()}catch{}return new n1(_)}function NL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="__/auth/handler",IL="emulator/auth/handler",kL=encodeURIComponent("fac");async function r1(t,e,n,i,a,l){De(t.config.authDomain,t,"auth-domain-config-required"),De(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ol,eventId:a};if(e instanceof y2){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",CM(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))c[y]=_}if(e instanceof Yu){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(c.scopes=y.join(","))}t.tenantId&&(c.tid=t.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const f=await t._getAppCheckToken(),p=f?`#${kL}=${encodeURIComponent(f)}`:"";return`${DL(t)}?${zu(d).slice(1)}${p}`}function DL({config:t}){return t.emulator?Gy(t,IL):`https://${t.authDomain}/${CL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="webStorageSupport";class ML{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=T2,this._completeRedirectFn=rL,this._overrideRedirectResult=eL}async _openPopup(e,n,i,a){var l;is((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await r1(e,n,i,C0(),a);return RL(e,c,Wy())}async _openRedirect(e,n,i,a){await this._originValidation(e);const l=await r1(e,n,i,C0(),a);return V9(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(is(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await EL(e),i=new sL(e);return n.register("authEvent",a=>(De(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jm,{type:jm},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[jm];c!==void 0&&n(!!c),Hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return h2()||a2()||Ky()}}const OL=ML;var i1="@firebase/auth",s1="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LL(t){Qa(new Ws("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;De(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:f2(t)},p=new e9(i,a,l,f);return u9(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Qa(new Ws("auth-internal",e=>{const n=ao(e.getProvider("auth").getImmediate());return(i=>new PL(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(i1,s1,VL(t)),pi(i1,s1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=5*60,UL=uS("authIdTokenMaxAge")||zL;let a1=null;const jL=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>UL)return;const a=n?.token;a1!==a&&(a1=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function BL(t=iy()){const e=jf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=c9(t,{popupRedirectResolver:OL,persistence:[F9,M9,T2]}),i=uS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=jL(l.toString());N9(n,c,()=>c(n.currentUser)),R9(n,d=>c(d))}}const a=oS("auth");return a&&d9(n,`http://${a}`),n}function HL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}t9({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=a=>{const l=vi("internal-error");l.customData=a,n(l)},i.type="text/javascript",i.charset="UTF-8",HL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LL("Browser");const qL={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},Jy=fS(qL),qr=oV(Jy),Sf=BL(Jy),ev=a6(Jy,"us-central1");vS(ev,"localhost",5001);const $L="51259393-3a562db01323edade9561b8f0",FL="LIVDSRZULELA",GL=t=>t.replace(/\*\*(.*?)\*\*/g,"<strong class='font-semibold text-gray-900 dark:text-gray-100'>$1</strong>").replace(/\((.*?)\)\[(.*?)\]/g,'<a href="$2" target="_blank" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline transition-colors duration-200">$1</a>'),YL=async t=>{const e=t.map(async i=>{const a=Object.keys(i)[0],l=i[a];switch(a){case"large_header":return`<h1 class="text-4xl lg:text-5xl font-bold my-8 text-gray-900 dark:text-gray-100 leading-tight border-b-4 border-blue-600 dark:border-blue-400 pb-2 transition-colors duration-200">${l}</h1>`;case"small_header":return`<h2 class="text-2xl lg:text-3xl font-semibold mt-6 mb-3 text-gray-800 dark:text-gray-200 leading-snug transition-colors duration-200">${l}</h2>`;case"ul":return`<ul class="my-4 pl-6 space-y-2 list-disc list-inside text-gray-700 dark:text-gray-300 transition-colors duration-200">${l.map(P=>`<li class="text-gray-700 dark:text-gray-300 transition-colors duration-200">${P}</li>`).join("")}</ul>`;case"ol":return`<ol class="my-4 pl-6 space-y-2 list-decimal list-inside text-gray-700 dark:text-gray-300 transition-colors duration-200">${l.map(P=>`<li class="text-gray-700 dark:text-gray-300 transition-colors duration-200">${P}</li>`).join("")}</ol>`;case"quiz":const f=l,p=`quiz-set-${Math.random().toString(36).substr(2,9)}`,y=f.map((P,Y)=>{const D=`${p}-q${Y}`,q=P.answers.map((F,te)=>{const X=Object.keys(F)[0],re=F[X],de=te===P.correctAnswer;return`<button class="quiz-answer w-full bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg p-4 text-left font-medium text-gray-700 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition-all duration-200 transform hover:scale-[1.02] disabled:cursor-not-allowed disabled:opacity-60" onclick="${`
                                        const quiz = document.getElementById('${D}');
                                        const hintDiv = document.getElementById('${D}-hint');
                                        const resultDiv = document.getElementById('${D}-result');
                                        const nextBtn = document.getElementById('${D}-next');
                                        const buttons = quiz.querySelectorAll('.quiz-answer');
                                        const selectedButton = this;
                                        
                                        if (${de}) {
                                            // Correct answer
                                            hintDiv.classList.add('hidden');
                                            resultDiv.classList.remove('hidden');
                                            if (nextBtn) nextBtn.classList.remove('hidden');
                                            buttons.forEach(btn => btn.disabled = true);
                                            selectedButton.classList.add('quiz-correct');
                                            selectedButton.classList.remove('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                        } else {
                                            // Wrong answer - show hint
                                            hintDiv.textContent = '${re.replace(/'/g,"\\'")}';
                                            hintDiv.classList.remove('hidden');
                                            selectedButton.classList.add('quiz-incorrect');
                                            selectedButton.classList.remove('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                            selectedButton.disabled = true;
                                        }
                                    `}">${X}</button>`}).join(""),W=`
                                const quiz = document.getElementById('${D}');
                                const hintDiv = document.getElementById('${D}-hint');
                                const resultDiv = document.getElementById('${D}-result');
                                const nextBtn = document.getElementById('${D}-next');
                                const buttons = quiz.querySelectorAll('.quiz-answer');
                                
                                // Reset all states
                                hintDiv.classList.add('hidden');
                                hintDiv.textContent = '';
                                resultDiv.classList.add('hidden');
                                if (nextBtn) nextBtn.classList.add('hidden');
                                
                                buttons.forEach(btn => {
                                    btn.disabled = false;
                                    btn.classList.remove('quiz-correct', 'quiz-incorrect');
                                    btn.classList.add('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                });
                            `,Q=Y<f.length-1?`
                                document.getElementById('${p}-q${Y}').classList.add('hidden');
                                document.getElementById('${p}-q${Y+1}').classList.remove('hidden');
                            `:`
                                document.getElementById('${p}-completion').classList.remove('hidden');
                                document.getElementById('${D}').classList.add('hidden');
                            `,k=Y<f.length-1?`<button id="${D}-next" class="hidden bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${Q}">Next Question →</button>`:`<button id="${D}-next" class="hidden bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${Q}">Finish Quiz ✓</button>`;return`
                                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 transition-colors duration-200 ${Y===0?"":"hidden"}" id="${D}">
                                    <div class="text-sm font-medium text-blue-600 dark:text-blue-400 mb-2 text-center">Question ${Y+1} of ${f.length}</div>
                                    <div class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6 text-center leading-relaxed">${P.question}</div>
                                    <div class="space-y-3 mb-4">
                                        ${q}
                                    </div>
                                    <div id="${D}-hint" class="hidden bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4 text-yellow-800 dark:text-yellow-200 text-sm italic animate-fade-in"></div>
                                    <div id="${D}-result" class="hidden bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded-lg p-6 text-center">
                                        <p class="text-xl font-bold text-green-800 dark:text-green-200 mb-4">🎉 Excellent! 🎉</p>
                                        <div class="flex flex-col sm:flex-row gap-3 justify-center">
                                            <button class="bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${W}">↻ Try Again</button>
                                            ${k}
                                        </div>
                                    </div>
                                </div>
                            `}).join(""),_=`
                        document.getElementById('${p}-completion').classList.add('hidden');
                        document.getElementById('${p}-q0').classList.remove('hidden');
                        // Reset all questions
                        ${f.map((P,Y)=>`
                            const quiz${Y} = document.getElementById('${p}-q${Y}');
                            if (quiz${Y}) {
                                const hintDiv = document.getElementById('${p}-q${Y}-hint');
                                const resultDiv = document.getElementById('${p}-q${Y}-result');
                                const nextBtn = document.getElementById('${p}-q${Y}-next');
                                const buttons = quiz${Y}.querySelectorAll('.quiz-answer');
                                
                                hintDiv.classList.add('hidden');
                                hintDiv.textContent = '';
                                resultDiv.classList.add('hidden');
                                if (nextBtn) nextBtn.classList.add('hidden');
                                
                                buttons.forEach(btn => {
                                    btn.disabled = false;
                                    btn.classList.remove('quiz-correct', 'quiz-incorrect');
                                    btn.classList.add('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                });
                                
                                if (${Y} > 0) quiz${Y}.classList.add('hidden');
                            }
                        `).join("")}
                    `;return`
                        <div class="my-8" id="${p}">
                            ${y}
                            <div id="${p}-completion" class="hidden bg-gradient-to-br from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border-2 border-green-200 dark:border-green-700 rounded-xl p-8 text-center">
                                <div class="text-4xl mb-4">🎊</div>
                                <h3 class="text-2xl font-bold text-green-800 dark:text-green-200 mb-2">Quiz Completed!</h3>
                                <p class="text-green-700 dark:text-green-300 mb-6">Congratulations! You've successfully completed all ${f.length} questions.</p>
                                <button class="bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white px-8 py-3 rounded-lg font-semibold shadow-lg transform hover:scale-105 transition-all duration-200" onclick="${_}">🔄 Start Over</button>
                            </div>
                        </div>
                    `;case"img":const[b,w]=l;return`<figure class="my-6 text-center">
                    <img src="${await QL(b)}" alt="${w}" 
                         class="max-w-full h-auto rounded-lg shadow-lg mx-auto transition-transform duration-200 hover:scale-105"
                         onerror="this.onerror=null; this.src='https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error'; this.alt='Fallback image (original failed to load)';" />
                    <figcaption class="mt-3 text-sm text-gray-600 dark:text-gray-400">${w}</figcaption>
                    <div class="mt-2 text-xs text-gray-500 dark:text-gray-500 opacity-75">
                        <span class="inline-block mr-2">🔍 ${b}</span>
                        <a href="https://pixabay.com/" target="_blank" class="text-blue-500 dark:text-blue-400 hover:underline">Pixabay</a>
                    </div>
                    </figure>`;case"vid":const[M,C]=l;return`<figure class="my-6 text-center">
                        <div class="relative w-full max-w-4xl mx-auto" style="padding-bottom: 56.25%; height: 0;">
                            <iframe 
                                src="https://www.youtube.com/embed/${await nz(M)}" 
                                class="absolute top-0 left-0 w-full h-full rounded-lg shadow-lg"
                                frameborder="0" 
                                allowfullscreen>
                            </iframe>
                        </div>
                        <figcaption class="mt-2 text-sm italic text-gray-600 dark:text-gray-400">${C}</figcaption>
                        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Search: "${M}" • <a href="https://developers.google.com/youtube/v3" target="_blank" class="text-red-600 dark:text-red-400 hover:underline">Powered by YouTube Data API</a></div>
                    </figure>`;case"gif":const[B,G]=l;return`<figure class="my-6 text-center">
                        <img src="${await JL(B)}" alt="${G}" 
                             class="max-w-full h-auto rounded-lg shadow-lg mx-auto transition-transform duration-200 hover:scale-105"
                             onerror="this.onerror=null; this.src='https://via.placeholder.com/300x200/ef4444/ffffff?text=GIF+Error'; this.alt='Fallback GIF (original failed to load)';" />
                        <figcaption class="mt-2 text-sm italic text-gray-600 dark:text-gray-400">${G}</figcaption>
                        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Search: "${B}" • <a href="https://tenor.com/" target="_blank" class="text-purple-600 dark:text-purple-400 hover:underline">Powered by Tenor</a></div>
                    </figure>`;case"textblock":return`<div class="my-4 leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200">${GL(l)}</div>`;case"codeblock":return`<pre class="my-6 bg-gray-900 dark:bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto border-l-4 border-blue-500 shadow-lg"><code class="font-mono text-sm leading-relaxed">${l}</code></pre>`;case"quote":return`<blockquote class="my-6 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 p-4 rounded-r-lg relative">
                        <div class="text-blue-600 dark:text-blue-400 text-4xl absolute -top-2 -left-1 font-serif">"</div>
                        <div class="italic text-gray-700 dark:text-gray-300 pl-6">${l}</div>
                    </blockquote>`;case"link":return`<a href="${l}" class="inline-block my-2 px-4 py-2 text-blue-600 dark:text-blue-400 border-2 border-blue-600 dark:border-blue-400 rounded-lg hover:bg-blue-600 hover:text-white dark:hover:bg-blue-500 transition-all duration-200 font-medium" target="_blank">${l}</a>`;case"table":const J=l,ee=J[0],O=J.slice(1),A=`<thead><tr>${ee.map(P=>`<th class="bg-blue-600 dark:bg-blue-700 text-white px-4 py-3 text-left font-semibold">${P}</th>`).join("")}</tr></thead>`,R=`<tbody>${O.map((P,Y)=>`<tr class="${Y%2===0?"bg-gray-50 dark:bg-gray-800":"bg-white dark:bg-gray-700"} hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors duration-200">${P.map(D=>`<td class="px-4 py-3 border-b border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300">${D}</td>`).join("")}</tr>`).join("")}</tbody>`;return`<div class="my-6 overflow-x-auto shadow-lg rounded-lg border border-gray-200 dark:border-gray-700">
                        <table class="w-full border-collapse">${A}${R}</table>
                    </div>`;case"purehtml":return`<div class="my-4 p-2 rounded-md bg-gray-50 dark:bg-gray-800 transition-colors duration-200">${l}</div>`;case"sidecontainer":return`<aside class="float-right w-80 max-w-[40%] ml-4 mb-4 p-4 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200 lg:block hidden">
                        ${l}
                    </aside>
                    <div class="lg:hidden my-4 p-4 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200">
                        ${l}
                    </div>`;case"diagram":const z=`diagram${Math.random().toString(36).substr(2,9)}`,U=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");return`
                        <div class="my-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg p-4 text-center transition-colors duration-200" 
                             id="${z}" 
                             data-diagram-code="${U}"
                             data-diagram-id="${z}">
                            <div class="text-gray-600 dark:text-gray-400 italic loading-text">Rendering diagram...</div>
                            <script type="text/javascript">
                                (function() {
                                    function processDiagram() {
                                        const diagramDiv = document.getElementById('${z}');
                                        if (!diagramDiv) {
                                            console.warn('Diagram div not found: ${z}');
                                            return;
                                        }
                                        
                                        const loadingText = diagramDiv.querySelector('.loading-text');
                                        let code = diagramDiv.getAttribute('data-diagram-code');
                                        
                                        if (!code) {
                                            console.error('No diagram code found');
                                            diagramDiv.innerHTML = '<div class="text-red-600 dark:text-red-400 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg"><strong>Error:</strong> No diagram code provided</div>';
                                            return;
                                        }
                                        
                                        // Decode the diagram code
                                        code = code
                                            .replace(/&amp;/g, '&')
                                            .replace(/&lt;/g, '<')
                                            .replace(/&gt;/g, '>')
                                            .replace(/&quot;/g, '"')
                                            .replace(/&#39;/g, "'");
                                        
                                        const id = diagramDiv.getAttribute('data-diagram-id');
                                        
                                        function showError(message) {
                                            console.error('Mermaid diagram error:', message);
                                            diagramDiv.innerHTML = '<div class="text-red-600 dark:text-red-400 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg"><strong>Diagram Error:</strong> ' + message + '</div>';
                                        }
                                        
                                        function initializeMermaid() {
                                            if (window.mermaid) {
                                                try {
                                                    if (!window.mermaidInitialized) {
                                                        window.mermaid.initialize({ 
                                                            startOnLoad: false, 
                                                            theme: 'default', 
                                                            securityLevel: 'loose',
                                                            fontFamily: 'inherit',
                                                            suppressErrorRendering: false
                                                        });
                                                        window.mermaidInitialized = true;
                                                    }
                                                    return true;
                                                } catch (e) {
                                                    showError('Failed to initialize Mermaid: ' + e.message);
                                                    return false;
                                                }
                                            }
                                            return false;
                                        }
                                        
                                        function renderDiagram() {
                                            if (!initializeMermaid()) {
                                                showError('Mermaid library not available');
                                                return;
                                            }
                                            
                                            try {
                                                // Validate the diagram code first
                                                if (!code.trim()) {
                                                    showError('Empty diagram code');
                                                    return;
                                                }
                                                
                                                const svgId = id + '_svg';
                                                
                                                // Use mermaid.render with proper error handling
                                                window.mermaid.render(svgId, code).then(function(result) {
                                                    if (result && result.svg) {
                                                        diagramDiv.innerHTML = result.svg;
                                                    } else {
                                                        showError('Mermaid render returned no SVG');
                                                    }
                                                }).catch(function(error) {
                                                    showError(error.message || 'Unknown render error');
                                                });
                                            } catch (e) {
                                                showError(e.message || 'Unknown execution error');
                                            }
                                        }
                                        
                                        // Load Mermaid if not already loaded
                                        if (!window.mermaid) {
                                            if (loadingText) {
                                                loadingText.textContent = 'Loading Mermaid library...';
                                            }
                                            
                                            const script = document.createElement('script');
                                            script.src = 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js';
                                            script.onload = function() {
                                                if (loadingText) {
                                                    loadingText.textContent = 'Rendering diagram...';
                                                }
                                                // Give the library time to fully load
                                                setTimeout(renderDiagram, 500);
                                            };
                                            script.onerror = function() {
                                                showError('Failed to load Mermaid library from CDN');
                                            };
                                            document.head.appendChild(script);
                                        } else {
                                            renderDiagram();
                                        }
                                    }
                                    
                                    // Wait for DOM to be ready and process the diagram
                                    if (document.readyState === 'loading') {
                                        document.addEventListener('DOMContentLoaded', processDiagram);
                                    } else {
                                        // Use a small delay to ensure the DOM element is fully rendered
                                        setTimeout(processDiagram, 50);
                                    }
                                })();
                            <\/script>
                        </div>
                    `;case"note":return`<div class="my-4 flex items-start p-4 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-blue-600 dark:text-blue-400 text-xl mr-3 flex-shrink-0 mt-0.5">📝</div>
                        <div class="text-blue-800 dark:text-blue-200 leading-relaxed">${l}</div>
                    </div>`;case"warning":return`<div class="my-4 flex items-start p-4 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500 dark:border-yellow-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-yellow-600 dark:text-yellow-400 text-xl mr-3 flex-shrink-0 mt-0.5">⚠️</div>
                        <div class="text-yellow-800 dark:text-yellow-200 leading-relaxed">${l}</div>
                    </div>`;case"tip":return`<div class="my-4 flex items-start p-4 bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 dark:border-green-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-green-600 dark:text-green-400 text-xl mr-3 flex-shrink-0 mt-0.5">💡</div>
                        <div class="text-green-800 dark:text-green-200 leading-relaxed">${l}</div>
                    </div>`;case"htmlCanvas":const H=`canvas_${Math.random().toString(36).substr(2,9)}_${Date.now()}`;return`
                        <div class="my-6 bg-gray-50 dark:bg-gray-800 border-2 border-dashed border-blue-300 dark:border-blue-600 rounded-lg p-6 transition-colors duration-200" data-canvas-code="${l.replace(/"/g,"&quot;").replace(/'/g,"&#39;")}" data-canvas-id="${H}">
                            <canvas id="${H}" width="400" height="300" class="border border-gray-300 dark:border-gray-600 rounded-lg max-w-full mx-auto block bg-white dark:bg-gray-900"></canvas>
                            <div class="flex flex-wrap gap-2 mt-4 justify-center">
                                <button class="bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const code = canvasDiv.getAttribute('data-canvas-code');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        const canvasContext = canvasElement.getContext('2d');
                                        const errorDiv = document.getElementById(canvasId + 'Error');
                                        
                                        errorDiv.classList.add('hidden');
                                        errorDiv.textContent = '';
                                        
                                        try {
                                            canvasContext.clearRect(0, 0, canvasElement.width, canvasElement.height);
                                            const canvasFunction = new Function('canvas', 'ctx', code);
                                            canvasFunction(canvasElement, canvasContext);
                                        } catch (error) {
                                            console.error('Canvas error:', error);
                                            errorDiv.textContent = 'Error: ' + error.message;
                                            errorDiv.classList.remove('hidden');
                                        }
                                    }).call(this);
                                ">▶ Run Code</button>
                                <button class="bg-gray-600 hover:bg-gray-700 dark:bg-gray-500 dark:hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        const canvasContext = canvasElement.getContext('2d');
                                        const errorDiv = document.getElementById(canvasId + 'Error');
                                        
                                        canvasContext.clearRect(0, 0, canvasElement.width, canvasElement.height);
                                        errorDiv.classList.add('hidden');
                                    }).call(this);
                                ">🗑️ Clear</button>
                                <button class="bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        
                                        if (!document.fullscreenElement) {
                                            canvasElement.requestFullscreen().catch(err => {
                                                console.warn('Fullscreen failed:', err);
                                            });
                                        } else {
                                            document.exitFullscreen();
                                        }
                                    }).call(this);
                                ">⛶ Fullscreen</button>
                            </div>
                            <details class="mt-4 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg transition-colors duration-200">
                                <summary class="p-3 font-medium text-gray-700 dark:text-gray-300 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-200">📝 View Code</summary>
                                <pre class="p-4 bg-gray-900 dark:bg-gray-800 text-gray-100 rounded-b-lg overflow-x-auto"><code class="font-mono text-sm">${l}</code></pre>
                            </details>
                            <div id="${H}Error" class="hidden mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200"></div>
                        </div>
                    `;default:return`<div class="my-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200 font-mono text-sm">
                        <div class="font-semibold mb-2">Unknown content type:</div>
                        ${JSON.stringify(i)}
                    </div>`}});return(await Promise.all(e)).join(`
`)},KL=$L,XL="https://pixabay.com/api/",Kc=new Map,QL=async t=>{if(Kc.has(t))return Kc.get(t);try{const e=encodeURIComponent(t),n=`${XL}?key=${KL}&q=${e}&image_type=photo&per_page=3&safesearch=true&order=relevant`,i=await fetch(n);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const a=await i.json();if(a.hits&&a.hits.length>0){const l=a.hits[0].webformatURL;return Kc.set(t,l),l}else{const l=`https://via.placeholder.com/640x360/e5e7eb/6b7280?text=${e}`;return Kc.set(t,l),l}}catch(e){console.error("Error fetching Pixabay image:",e);const n="https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error";return Kc.set(t,n),n}},WL=FL,ZL="https://g.tenor.com/v1/search",Xc=new Map,JL=async t=>{if(Xc.has(t))return Xc.get(t);try{const e=encodeURIComponent("explained "+t),n=`${ZL}?key=${WL}&q=${e}&limit=1&media_filter=basic&contentfilter=medium`,i=await fetch(n);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const a=await i.json();if(a.results&&a.results.length>0){const c=a.results[0],d=c.media[0]?.gif?.url||c.media[0]?.mediumgif?.url||c.media[0]?.tinygif?.url;if(d)return Xc.set(t,d),d}const l=`https://via.placeholder.com/300x200/9333ea/ffffff?text=${e}+GIF`;return Xc.set(t,l),l}catch(e){console.error("Error fetching Tenor GIF:",e);const n="https://via.placeholder.com/300x200/ef4444/ffffff?text=GIF+Error";return Xc.set(t,n),n}},ez="AIzaSyDxTJKoi1S8YjJZD12QTa4F9hV8fN8pNqo",tz="https://www.googleapis.com/youtube/v3/search",Qc=new Map,nz=async t=>{if(Qc.has(t))return Qc.get(t);try{const e=encodeURIComponent(t),n=`${tz}?key=${ez}&q=${e}&part=snippet&type=video&maxResults=1&videoEmbeddable=true&safeSearch=strict`,i=await fetch(n);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const a=await i.json();if(a.items&&a.items.length>0){const c=a.items[0].id.videoId;if(c)return Qc.set(t,c),c}const l="dQw4w9WgXcQ";return Qc.set(t,l),l}catch(e){console.error("Error fetching YouTube video:",e);const n="dQw4w9WgXcQ";return Qc.set(t,n),n}},rz=YL,o1=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const i=await _S(ev,"groqChat")({message:e});return console.log("groqChat response:",i.data),i.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},iz=async(t,e)=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const n=t.trim();if(!n)throw new Error("Message cannot be empty or just whitespace");const i=_S(ev,"groqChat");console.log("Starting streaming request...");const{stream:a,data:l}=await i.stream({message:n});console.log("Stream started, waiting for chunks...");let c="";for await(const f of a)if(console.log("Received chunk:",f),f&&typeof f=="object"&&"type"in f&&"content"in f){const p=f;console.log("Processing chunk:",p),p.type==="chunk"&&p.content&&(c+=p.content,e?.(p.content))}console.log("Waiting for final result...");const d=await l;return console.log("Final result received:",d),d&&typeof d=="object"&&"response"in d?(console.log("Returning final result response"),d.response):(console.log("Returning accumulated response:",c),c)}catch(n){throw console.error("Firebase function streaming error:",n),n}},sz=async(t,e,n)=>{try{const a=`
        Return ONLY a valid JSON array.

        RULES
        • Each object = exactly one tag from SCHEMA; no new tags.
        • Include:
        – Only one of {quiz} with multiple questions
        – At least one of {codeblock or diagram or htmlCanvas or table}
        – At least two of of {img or vid or gif}
        - At least five of of {textblock or ul or ol }
        - ONLY ONE of { tip or note or warning or quote or link}
        • You should educate the user about the concept and then ask the quiz about the material you taught.
        • Use different tags to make the studying experience diverse and engaging
        • Cover, somewhere in the set: definition, deep explanation, worked example, real-world analogy and links at what to look up next.
        • If you have a long explanation, break it into multiple textblocks.
        • Only include tags that genuinely help explain the concept. Don't add tags unnecessarily or just to fill space.
        • Tone: encouraging, professional
        • Make the text of the explanations long and detailed! You need to educate the user
        • You need to have textblocks or lists separating each visual tag, e.g. img, vid, gif, codeblock, diagram, htmlCanvas, table.
        • Make sure to put the concept over the context, not focusing on the context but rather on what actually needs to be explained.

        OUTPUT
        VALID JSON array only — no comments, or extra text. All the braces must be properly closed.

        SCHEMA = ${JSON.stringify([{large_header:"Large Header Text"},{small_header:"Small Header Text"},{ul:["Item one","Item 2","Item 3"]},{quiz:[{question:"What is the capital of France?",answers:[{Berlin:"It's germany!"},{Madrid:"It is spain :("},{Paris:"Correct! It's Paris!"}],correctAnswer:2},{question:"What is the capital of Poland?",answers:[{Berlin:"It's germany!"},{Warshava:"Yahoo! It's Poland!"},{Paris:"No!"}],correctAnswer:1}]},{img:["very short image description(e.g. funny cats)","The image shows a group of cats doing something amusing."]},{vid:["very short video description(e.g. playing footbal)","This video shows a group of people playing football in a park."]},{gif:["very short gif description(e.g. frogs jumping)","This gif shows frogs jumping around in a pond."]},{textblock:"text, **text**, (text)[text.com]"},{ol:["Heyyo","Nice","That's a list"]},{codeblock:"console.log('Hello World');"},{quote:"This is a quote"},{link:"https://example.com"},{table:[["Header1","Header2"],["Row1Col1","Row1Col2"],["Row2Col1","Row2Col2"]]},{diagram:"a mermaid-based diagram: graph TD; A-->B; A-->C; B-->D; C-->D;"},{note:"This is a note."},{warning:"This is a warning note."},{tip:"This is a tip note."},{htmlCanvas:"js code for HTML canvas"}])}

        CONTEXT = ${e}
        CONCEPT = ${t}
        `,l=`Provide a brief explanation in 50 words or less.

        CRITICAL:
        - Highlight EVERY key term with [square-braces], e.g., [artificial intelligence], [mammal], [vector product]
        - NO introductory phrases like "Here is..." or "Summary..."
        - NO bullet points or formatting except [square-braces]
        - Start immediately with explanation content
        - ONLY the explanation text

        Topic to explain: `,c=`You are an expert educator. Respond ONLY with a valid JSON array in the following format: ["concept1", "concept2", "concept3"]. 

        Instructions:
        - Suggest exactly 3-5 topics that are logical next steps for learning the given concept.
        - Each topic must be no more than 5 words.
        - Each topic MUST be enclosed in double quotes, e.g., "example topic".
        - Do NOT include any explanation, commentary, or formatting outside the JSON array.
        - Only output the JSON array as specified.

        Concept: `,d=o1(a),f=o1(c+t);let p="";const y=iz(l+t,B=>{p+=B,n(B)}),[_,b,w]=await Promise.all([d,f,y]);let S=b??"";S=S.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"").replace(/\\/g,"&#92;").replace(/\$/g,"&#36;").replace(/\^/g,"&#94;").replace(/_/g,"&#95;").replace(/~/g,"&#126;").replace(/&/g,"&#38;");let M=[];const C=S.match(/"(.*?)"/g);C&&(M=C.map(B=>B.replace(/"/g,"")));const L={firstResponse:{response:await rz(JSON.parse(_.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"")))},secondResponse:{response:w?.replace(/\[/g,"_").replace(/\]/g,"_")},thirdResponse:{response:M}};return console.log("askAITwice response:",L),L}catch(i){throw console.error("Error in askAITwice:",i),i}},k2=$.createContext(null),D2=(t,e,n,i,a,l,c,d,f,p,y,_,b,w)=>{console.log(1);const S=a.find(B=>B.id===e);if(!S)return null;console.log(2);const M=S.data.tokenColors||{};if(console.log(3),!_){const B=t.myConcept||t.word;if(M[B])return console.log(`Token "${B}" is already colored, ignoring click`),null}console.log(4);let C;i==="staticEditable"?C=Rw():C=f?J3(f):Rw();let L=null;if(_)L=b;else{const B={...M};t.myConcept?B[t.myConcept]=C:B[t.word]=C,l(J=>J.map(ee=>ee.id===e?{...ee,data:{...ee.data,tokenColors:B}}:ee));const G=eM(n);L=rM(G,t.word,"Loading...","",C,i,e);const j=iM(e,L.id,C,y);c([{type:"add",item:L}]),d([{type:"add",item:j}])}return L&&(L.data.isLoading=!0),_&&(console.log(5),l(B=>B.map(G=>G.id===L?.id?{...G,data:{...G.data,label:"Loading...",summary:"",full_text:""}}:G))),sz(t.word,p||"",B=>{l(G=>G.map(j=>{if(j.id===L?.id){const J=j.data.summary||"";return{...j,data:{...j.data,label:J+B,summary:J+B}}}return j}))}).then(B=>{const G=B.firstResponse?.response||t.word,j=B.secondResponse?.response||t.word,J=B.thirdResponse?.response||{};l(ee=>ee.map(O=>O.id===L?.id?{...O,data:{...O.data,label:j,title:t.word,summary:j,full_text:G,suggestions:J,isLoading:!1}}:O))}).catch(()=>{l(B=>B.map(G=>G.id===L?.id?{...G,data:{...G.data,label:t.word,title:t.word,summary:t.word,full_text:t.word,suggestions:[],isLoading:!1}}:G))}),C},az=({children:t,nodes:e,onNodesChange:n,onEdgesChange:i,setNodes:a,showExplanation:l})=>{const c=(d,f,p,y,_,b,w,S,M)=>D2(d,f,p,y,e,a,n,i,_,b,w,S,M);return T.jsx(k2.Provider,{value:{handleTokenClick:c,setNodes:a,showExplanation:l},children:t})},M2=()=>{const t=$.useContext(k2);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t},cr={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},On={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function oz(){const[t,e]=$.useState(""),[n,i]=$.useState(""),[a,l]=$.useState(!1),[c,d]=$.useState(!1),[f,p]=$.useState(""),y=async b=>{b.preventDefault(),d(!0),p("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(On.INVALID_EMAIL);if(n.length<6)throw new Error(On.WEAK_PASSWORD);const S=await S9(Sf,t,n);console.log("User created successfully:",S.user.uid)}catch(w){let S="Failed to create account";w.code==="auth/email-already-in-use"?S=On.EMAIL_IN_USE:w.code==="auth/invalid-email"?S=On.INVALID_EMAIL:w.code==="auth/weak-password"?S=On.WEAK_PASSWORD:w.code==="auth/operation-not-allowed"?S="Email/password accounts are not enabled. Please contact support.":w.message&&(S=w.message),p(S)}finally{d(!1)}},_=async b=>{b.preventDefault(),d(!0),p("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(On.INVALID_EMAIL);const S=await A9(Sf,t,n);console.log("User signed in successfully:",S.user.uid)}catch(w){let S="Failed to sign in";w.code==="auth/user-not-found"?S=On.USER_NOT_FOUND:w.code==="auth/wrong-password"?S=On.WRONG_PASSWORD:w.code==="auth/invalid-email"?S=On.INVALID_EMAIL:w.code==="auth/user-disabled"?S="This account has been disabled. Please contact support.":w.code==="auth/too-many-requests"?S=On.TOO_MANY_REQUESTS:w.message&&(S=w.message),p(S)}finally{d(!1)}};return T.jsx("div",{className:"fixed inset-0 bg-[#1a1a1d]/90 dark:bg-[#1a1a1d]/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:T.jsxs("div",{className:"max-w-md w-full p-8 bg-gradient-to-br from-indigo-900/95 via-purple-900/95 to-indigo-900/95 rounded-3xl shadow-2xl border-2 border-indigo-700/60 dark:border-purple-700/60 backdrop-blur-sm animate-fade-in hover:shadow-3xl hover:shadow-indigo-500/10 transition-all duration-500",children:[T.jsxs("div",{className:"text-center mb-8 animate-slide-in",children:[T.jsx("div",{className:"inline-block p-4 bg-gradient-to-r from-indigo-500/20 to-purple-500/20 rounded-full mb-4 border border-indigo-500/30 animate-pulse-glow",children:T.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center",children:T.jsx("span",{className:"text-white font-bold text-lg",children:"T"})})}),T.jsx("h2",{className:"text-4xl font-bold text-transparent bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text mb-3",children:a?"Join TinkFlow":"Welcome Back"}),T.jsx("p",{className:"text-[#b0b3b8] dark:text-[#b0b3b8] text-sm leading-relaxed",children:a?"Start your AI-powered learning journey":"Continue exploring concepts with AI"})]}),T.jsxs("form",{onSubmit:a?y:_,className:"space-y-6",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsxs("label",{htmlFor:"email",className:"text-sm font-semibold text-indigo-300 dark:text-purple-300 flex items-center gap-2",children:[T.jsx("svg",{className:"w-4 h-4 text-indigo-400 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email Address"]}),T.jsx("input",{id:"email",type:"email",value:t,onChange:b=>e(b.target.value),required:!0,"aria-describedby":"email-hint",className:"w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-indigo-600/30 dark:border-purple-600/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-400/50 dark:focus:ring-purple-400/50 focus:border-indigo-400/50 dark:focus:border-purple-400/50 text-white placeholder-indigo-400 dark:placeholder-purple-400 transition-all duration-300 backdrop-blur-sm shadow-inner hover:border-indigo-500/80 dark:hover:border-purple-500/80 focus:scale-[1.02] active:scale-[0.98]",placeholder:"Enter your email address"})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsxs("label",{htmlFor:"password",className:"text-sm font-semibold text-indigo-300 dark:text-purple-300 flex items-center gap-2",children:[T.jsx("svg",{className:"w-4 h-4 text-indigo-400 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Password"]}),T.jsx("input",{id:"password",type:"password",value:n,onChange:b=>i(b.target.value),required:!0,"aria-describedby":"password-hint",className:"w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-indigo-600/30 dark:border-purple-600/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-400/50 dark:focus:ring-purple-400/50 focus:border-indigo-400/50 dark:focus:border-purple-400/50 text-white placeholder-indigo-400 dark:placeholder-purple-400 transition-all duration-300 backdrop-blur-sm shadow-inner hover:border-indigo-500/80 dark:hover:border-purple-500/80 focus:scale-[1.02] active:scale-[0.98]",placeholder:"Enter your password"})]}),f&&T.jsx("div",{className:"bg-red-900/20 dark:bg-red-900/30 border border-red-500/30 dark:border-red-500/40 rounded-xl p-4 backdrop-blur-sm animate-fade-in",role:"alert","aria-live":"polite",children:T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-6 h-6 bg-red-500/30 rounded-full flex items-center justify-center flex-shrink-0",children:T.jsx("svg",{className:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),T.jsx("div",{className:"text-red-300 text-sm leading-relaxed",children:f})]})}),T.jsx("button",{type:"submit",disabled:c,"aria-label":a?"Create new account":"Sign in to your account",className:"w-full py-4 px-6 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 disabled:from-slate-600 disabled:to-slate-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 disabled:scale-100 shadow-lg shadow-indigo-500/25 hover:shadow-indigo-400/40 disabled:shadow-slate-500/25 disabled:cursor-not-allowed backdrop-blur-sm animate-float active:scale-95",children:c?T.jsxs("div",{className:"flex items-center justify-center gap-3",children:[T.jsx("div",{className:"inline-block w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),T.jsx("span",{children:a?"Creating account...":"Signing in..."})]}):T.jsxs("div",{className:"flex items-center justify-center gap-2",children:[T.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z":"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),T.jsx("span",{children:a?"Create Account":"Sign In"})]})})]}),T.jsxs("div",{className:"mt-8 text-center",children:[T.jsxs("div",{className:"relative",children:[T.jsx("div",{className:"absolute inset-0 flex items-center",children:T.jsx("div",{className:"w-full border-t border-indigo-600/50 dark:border-purple-600/50"})}),T.jsx("div",{className:"relative flex justify-center text-sm",children:T.jsx("span",{className:"px-4 bg-gradient-to-r from-indigo-900/95 via-purple-900/95 to-indigo-900/95 text-indigo-400 dark:text-purple-400",children:a?"Already have an account?":"New to TinkFlow?"})})]}),T.jsx("button",{type:"button",onClick:()=>l(!a),"aria-label":a?"Switch to sign in":"Switch to create new account",className:"mt-4 w-full py-3 px-6 bg-[#2a2a2e] dark:bg-[#2a2a2e] hover:bg-indigo-700/90 dark:hover:bg-purple-700/90 text-indigo-300 dark:text-purple-300 hover:text-white font-semibold rounded-xl transition-all duration-300 border border-indigo-600/60 dark:border-purple-600/60 hover:border-indigo-500/80 dark:hover:border-purple-500/80 backdrop-blur-sm transform hover:scale-105 active:scale-95 shadow-lg",children:T.jsxs("div",{className:"flex items-center justify-center gap-2",children:[T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})}),T.jsx("span",{children:a?"Sign In Instead":"Create New Account"})]})})]})]})})}function lz({show:t,onHide:e,onConfirm:n,isCreating:i=!1}){const[a,l]=$.useState(""),[c,d]=$.useState(!0),f=b=>{const w=b.target.value;l(w),d(w.trim().length>0&&w.trim().length<=50)},p=b=>{b.preventDefault();const w=a.trim();w.length>0&&w.length<=50&&(n(w),l(""),d(!0))},y=()=>{l(""),d(!0),e()},_=b=>{b.key==="Enter"&&p(b)};return t?T.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:T.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-xl shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),T.jsx("button",{onClick:y,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-gray-700/50 dark:bg-gray-800/50 hover:bg-gray-600/50 dark:hover:bg-gray-700/50
                                 border border-gray-600 dark:border-gray-700 rounded-lg w-8 h-8 flex items-center justify-center
                                 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/20`,"aria-label":"Close",children:"×"})]}),T.jsxs("form",{onSubmit:p,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),T.jsx("input",{type:"text",value:a,onChange:f,onKeyDown:_,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-500 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40 
                                       transition-all duration-200 font-medium
                                       ${c?"border-gray-600/50 dark:border-gray-700/50 focus:border-blue-500/60 dark:focus:border-blue-400/60":"border-red-500/60 dark:border-red-500/60 focus:border-red-500/60 dark:focus:border-red-500/60"}`}),!c&&T.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-2",children:"Board name must be between 1 and 50 characters long."}),T.jsxs("p",{className:`text-xs mt-1 ${a.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[a.length,"/50 characters"]})]}),T.jsxs("div",{className:"flex gap-3 pt-4",children:[T.jsx("button",{type:"button",onClick:y,disabled:i,className:`flex-1 px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border border-gray-600/50 dark:border-gray-700/50
                                     text-gray-300 dark:text-gray-300 rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-600/60 dark:hover:bg-gray-700/60 hover:border-gray-500/60 dark:hover:border-gray-600/60
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),T.jsx("button",{type:"submit",disabled:!c||a.trim().length===0||i,className:`flex-1 px-4 py-3 bg-blue-600/80 dark:bg-blue-500/80 border border-blue-500/50 dark:border-blue-400/50
                                     text-white rounded-lg font-medium transition-all duration-200 
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-500/90 dark:hover:bg-blue-400/90 hover:border-blue-400/60 dark:hover:border-blue-300/60
                                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40`,children:i?"Creating...":"Create Board"})]})]})]})}):null}function cz({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:i,onDeleteBoard:a,onSignOut:l,isLoading:c}){const[d,f]=$.useState(!1),[p,y]=$.useState(!1),[_,b]=$.useState(null),w=async L=>{try{f(!0),await i(L),y(!1)}catch(B){console.error("Error in sidebar create board:",B)}finally{f(!1)}},S=()=>{y(!0)},M=()=>{y(!1)},C=(L,B)=>{L.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&a(B)};return T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"left-0 top-0 w-[100%] h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:T.jsxs("div",{className:"flex flex-col h-full",children:[T.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50",children:[T.jsx("h2",{className:"m-0 mb-3 text-sm font-semibold text-gray-900 dark:text-gray-100 tracking-tight",children:"TinkFlow Boards"}),T.jsx("button",{onClick:S,disabled:c||d,className:`w-full bg-blue-600 dark:bg-blue-600 text-white dark:text-white border border-blue-600 dark:border-blue-600 
                                      px-3 py-2 rounded-lg cursor-pointer text-xs font-medium transition-all duration-200 
                                      ${c||d?"cursor-not-allowed opacity-60":"hover:bg-blue-700 dark:hover:bg-blue-700 hover:border-blue-700 dark:hover:border-blue-700 hover:-translate-y-0.5 hover:shadow-md"}`,children:d?"Creating...":"+ New Board"})]}),T.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:t.map(L=>{const B=e?.id===L.id,G=_===L.id;return T.jsxs("div",{onClick:()=>!c&&n(L.id),onMouseEnter:()=>b(L.id),onMouseLeave:()=>b(null),className:`
                                        min-h-[44px] px-3 py-2.5 mb-1 rounded-lg flex justify-between items-center
                                        transition-all duration-200 cursor-pointer border font-medium text-sm leading-tight
                                        ${c?"cursor-not-allowed opacity-60":"cursor-pointer"}
                                        ${B?"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100 font-semibold shadow-sm":G?"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 shadow-sm":"border-transparent bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/30"}
                                    `,role:"button",tabIndex:0,onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&!c&&n(L.id)},children:[T.jsx("span",{className:`
                                        ${B?"font-semibold":"font-medium"} 
                                        flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        text-sm leading-tight
                                    `,children:L.name}),T.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[L.isOpen&&T.jsx("span",{className:"text-green-500 dark:text-green-400 text-xs",children:"●"}),t.length>1&&T.jsx("button",{onClick:j=>{j.stopPropagation(),C(j,L.id)},title:"Delete board",className:`
                                                    w-5 h-5 bg-transparent border-none text-red-500 dark:text-red-400 
                                                    cursor-pointer text-sm leading-none flex items-center justify-center
                                                    rounded transition-all duration-150
                                                    ${G?"opacity-100 visible hover:bg-red-50 dark:hover:bg-red-900/30":"opacity-0 invisible"}
                                                    hover:text-red-600 dark:hover:text-red-300
                                                `,children:"×"})]})]},L.id)})}),c&&T.jsx("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-xs font-medium",children:"Loading boards..."}),T.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:T.jsx("button",{onClick:l,className:`w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 
                                     bg-transparent text-gray-700 dark:text-gray-300 cursor-pointer text-xs font-medium
                                     transition-all duration-200
                                     hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:border-gray-400 dark:hover:border-gray-500 
                                     hover:text-gray-900 dark:hover:text-gray-100`,children:"Sign Out"})})]})}),T.jsx(lz,{show:p,onHide:M,onConfirm:w,isCreating:d})]})}const uz=$.memo(function({explanation:e,onClose:n,isVisible:i}){const[a,l]=$.useState(!1),[c,d]=$.useState(i);$.useEffect(()=>{i?(d(!0),setTimeout(()=>l(!0),10)):(l(!1),setTimeout(()=>d(!1),300))},[i]);const f=()=>{l(!1),setTimeout(()=>n(),300)};return c?T.jsx("div",{className:`bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl
                                   border border-gray-200/50 dark:border-gray-700/50
                                   fade-in
                                   transition-all duration-300 ease-out
                                   ring-1 ring-white/20 dark:ring-white/10 rounded-2xl
                                   before:absolute before:inset-0 before:bg-gradient-to-br 
                                   before:from-white/40 before:to-transparent before:pointer-events-none
                                   dark:before:from-gray-800/40 dark:before:to-transparent
                                   relative overflow-auto
                                   ${a?"transform translate-x-0":"transform translate-x-full"}`,style:{maxHeight:"calc(100vh - 100px)",height:"auto",minHeight:"200px"},children:T.jsxs("div",{className:`w-full h-full flex flex-col fixed top-0 right-0 z-50 transition-all duration-300 ease-out ${a?"transform translate-x-0 opacity-100":"transform translate-x-full opacity-0"}`,children:[T.jsxs("div",{className:`flex justify-between items-center p-6 border-b border-gray-200/50 dark:border-gray-700/50 
                           transition-all duration-400 ease-out ${a?"transform translate-y-0 opacity-100":"transform -translate-y-4 opacity-0"}`,children:[T.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[T.jsx("span",{className:"text-blue-500",children:"📄"}),"Explanation"]}),T.jsx("button",{className:`text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 
                             p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 
                             transition-all duration-200 transform hover:scale-105`,onClick:f,title:"Close explanation","aria-label":"Close explanation sidebar",children:T.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:T.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),T.jsx("div",{className:"p-6 overflow-y-auto flex-1 scrollbar-thin",children:e?T.jsxs(T.Fragment,{children:[T.jsx("div",{className:`mb-6 transition-all duration-500 ease-out ${a?"transform translate-y-0 opacity-100":"transform translate-y-4 opacity-0"}`,children:T.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 leading-tight",children:e.title})}),T.jsx("div",{className:`prose prose-gray dark:prose-invert max-w-none text-gray-700 dark:text-gray-300
                                      [&>h1]:text-gray-900 [&>h1]:dark:text-gray-100 [&>h1]:text-2xl [&>h1]:font-bold [&>h1]:mb-4 [&>h1]:mt-6
                                      [&>h2]:text-gray-900 [&>h2]:dark:text-gray-100 [&>h2]:text-xl [&>h2]:font-semibold [&>h2]:mb-3 [&>h2]:mt-5
                                      [&>h3]:text-gray-900 [&>h3]:dark:text-gray-100 [&>h3]:text-lg [&>h3]:font-medium [&>h3]:mb-2 [&>h3]:mt-4
                                      [&>p]:text-gray-700 [&>p]:dark:text-gray-300 [&>p]:leading-relaxed [&>p]:mb-4
                                      [&>ul]:text-gray-700 [&>ul]:dark:text-gray-300 [&>ul]:mb-4 [&>ul>li]:mb-2
                                      [&>ol]:text-gray-700 [&>ol]:dark:text-gray-300 [&>ol]:mb-4 [&>ol>li]:mb-2
                                      [&>blockquote]:border-l-4 [&>blockquote]:border-blue-400 [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-gray-600 [&>blockquote]:dark:text-gray-400 [&>blockquote]:bg-blue-50 [&>blockquote]:dark:bg-blue-900/20 [&>blockquote]:py-2 [&>blockquote]:rounded-r-lg
                                      [&>code]:bg-gray-100 [&>code]:dark:bg-gray-800 [&>code]:text-blue-600 [&>code]:dark:text-blue-400 [&>code]:px-2 [&>code]:py-1 [&>code]:rounded [&>code]:text-sm [&>code]:font-medium
                                      [&>pre]:bg-gray-100 [&>pre]:dark:bg-gray-800 [&>pre]:text-gray-800 [&>pre]:dark:text-gray-200 [&>pre]:p-4 [&>pre]:rounded-lg [&>pre]:overflow-x-auto [&>pre]:mb-4 [&>pre]:border [&>pre]:border-gray-200 [&>pre]:dark:border-gray-700
                                      transition-all duration-500 ease-out ${a?"transform translate-y-0 opacity-100":"transform translate-y-4 opacity-0"}`,children:T.jsx("div",{dangerouslySetInnerHTML:{__html:e.text}})})]}):T.jsx("div",{className:`flex items-center justify-center h-full text-gray-500 dark:text-gray-400 
                                   transition-all duration-500 ease-out ${a?"transform translate-y-0 opacity-100":"transform translate-y-8 opacity-0"}`,children:T.jsxs("div",{className:"text-center",children:[T.jsx("div",{className:"text-6xl mb-6 opacity-60",children:"📄"}),T.jsx("p",{className:"text-xl font-medium mb-2",children:"No explanation available"}),T.jsx("p",{className:"text-sm opacity-75",children:"Click on a node to see its explanation"})]})})})]})}):null}),O2=$.createContext(void 0),dz=()=>{const t=$.useContext(O2);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},hz=({children:t})=>{const[e,n]=$.useState(()=>{const a=localStorage.getItem("theme");return a||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});$.useEffect(()=>{const a=window.document.documentElement;a.classList.remove("light","dark"),a.classList.add(e),localStorage.setItem("theme",e)},[e]);const i=()=>{n(a=>a==="light"?"dark":"light")};return T.jsx(O2.Provider,{value:{theme:e,toggleTheme:i},children:t})},P2=()=>{const{theme:t,toggleTheme:e}=dz();return T.jsx("button",{onClick:e,className:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 
                     hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600
                     hover:border-gray-300 dark:hover:border-gray-500 transition-all duration-200 
                     focus:outline-none focus:ring-2 focus:ring-blue-500/30 dark:focus:ring-blue-400/30
                     shadow-sm hover:shadow-md`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?T.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:T.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):T.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:T.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function fz({name:t,onSetName:e,user:n,isSaving:i}){const[a,l]=$.useState(!1),[c,d]=$.useState(t||"");$.useEffect(()=>{d(t||"")},[t]);const f=y=>{y.key==="Enter"&&(e(c),l(!1))},p=()=>{l(!0),d(t||"")};return T.jsx(T.Fragment,{children:T.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:T.jsx("div",{className:"max-w-none mx-auto px-4",children:T.jsxs("header",{className:"flex justify-between items-center py-3",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsxs("div",{className:"flex items-center space-x-2",children:[T.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:T.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),T.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"TinkFlow"})]}),T.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"•"}),a?T.jsx("input",{type:"text",value:c,onChange:y=>d(y.target.value),onKeyDown:f,onBlur:()=>{e(c),l(!1)},className:`bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 
                                             rounded-md px-2 py-1 text-gray-900 dark:text-gray-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 focus:ring-blue-500/20`,autoFocus:!0}):T.jsx("button",{onClick:p,className:`bg-transparent border-none text-gray-600 dark:text-gray-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded-md transition-all duration-150 ease-in-out
                                             hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100`,children:t||"Untitled Board"})]}),T.jsxs("div",{className:"flex items-center gap-3",children:[i&&T.jsxs("div",{className:`text-green-600 dark:text-green-400 text-sm flex items-center gap-2 
                                               bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full border border-green-200 dark:border-green-700/50
                                               animate-pulse`,children:[T.jsx("div",{className:"w-2 h-2 bg-green-500 dark:bg-green-400 rounded-full animate-bounce"}),T.jsx("span",{className:"font-medium",children:"Saving..."})]}),T.jsx(P2,{}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center",children:T.jsx("span",{className:"text-white font-medium text-xs",children:n?.isAnonymous?"G":n?.email?.charAt(0).toUpperCase()||"U"})}),T.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"})]})]})]})})})})}const gz=({notification:t,onRemove:e})=>{const n=a=>{switch(a){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"📄"}},i=a=>{switch(a){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-300 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-300 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-300 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-300 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-300 dark:text-gray-400"}};return T.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-xl border shadow-2xl backdrop-blur-sm                         transform transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-3xl                        ${i(t.type)}`,children:[" ",T.jsxs("div",{className:"flex items-start gap-3",children:[" ",T.jsxs("span",{className:"text-lg flex-shrink-0 mt-0.5",children:[" ",n(t.type)," "]})," ",T.jsxs("div",{className:"flex-1 min-w-0",children:[" ",T.jsxs("p",{className:"text-sm font-medium leading-5 break-words",children:[" ",t.message," "]})," "]})," ",T.jsxs("button",{onClick:()=>e(t.id),className:"flex-shrink-0 text-gray-400 dark:text-gray-500 hover:text-gray-200 dark:hover:text-gray-300                              hover:bg-gray-700/50 dark:hover:bg-gray-600/50                              rounded-full p-1 transition-all duration-200                              focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20","aria-label":"Close notification",children:[" ",T.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[" ",T.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})," "]})," "]})," "]})," "]})},pz=({notifications:t,onRemove:e})=>T.jsxs("div",{className:"notification-container fixed top-4 right-4 space-y-3 z-[2000] pointer-events-none",children:[" ",t.map(n=>T.jsxs("div",{className:"pointer-events-auto",children:[" ",T.jsx(gz,{notification:n,onRemove:e})," "]},n.id))," "]});function mz({onLogin:t}){return T.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 antialiased",children:[" "," ",T.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:[" ",T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",T.jsxs("div",{className:"flex justify-between items-center py-4",children:[" ",T.jsxs("div",{className:"flex items-center space-x-3",children:[" ",T.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",T.jsx("span",{className:"text-white font-bold text-lg",children:"T"})," "]})," ",T.jsxs("div",{className:"flex flex-col",children:[" ",T.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"TinkFlow"})," ",T.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"AI Learning Platform"})," "]})," "]})," ",T.jsxs("div",{className:"flex items-center gap-4",children:[" ",T.jsx(P2,{})," ",T.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200",children:[" ","Get Started"," "]})," "]})," "]})," "]})," "]})," "," ",T.jsxs("section",{className:"relative overflow-hidden",children:[" ",T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:[" ",T.jsxs("div",{className:"text-center",children:[" ",T.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full mb-8",children:[" ",T.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})," ",T.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium text-sm",children:"AI-Powered Concept Learning"})," "]})," ",T.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:[" ","Learn & Tinker with"," ",T.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent block",children:[" ","AI-Powered Concepts"," "]})," "]})," ",T.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:[" ","TinkFlow is the ultimate AI-powered platform for exploring, understanding, and experimenting with new concepts. Transform your learning journey with interactive visual flows and intelligent insights."," "]})," ",T.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[" ",T.jsxs("button",{onClick:t,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning Now"," "]})," ",T.jsxs("button",{className:"px-8 py-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[" ","Watch Demo"," "]})," "]})," "]})," "]})," "," ",T.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full opacity-10 blur-3xl"})," ",T.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})," "]})," "," ",T.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",T.jsxs("div",{className:"text-center mb-16",children:[" ",T.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Everything You Need to Learn"," "]})," ",T.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","AI-powered tools and features designed to accelerate your learning and conceptual understanding"," "]})," "]})," ",T.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",T.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-indigo-200 dark:border-indigo-700/50 hover:transform hover:-translate-y-1",children:[" ",T.jsxs("div",{className:"w-14 h-14 bg-indigo-500 rounded-xl flex items-center justify-center mb-6",children:[" ",T.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})," "]})," "]})," ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI-Powered Insights"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Get intelligent explanations and connections between concepts powered by advanced AI that understands your learning style."," "]})," "]})," ",T.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50 hover:transform hover:-translate-y-1",children:[" ",T.jsxs("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-6",children:[" ",T.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})," "]})," "]})," ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Interactive Visual Flows"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Build and explore concept maps with interactive nodes that respond to your curiosity and create dynamic learning pathways."," "]})," "]})," ",T.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50 hover:transform hover:-translate-y-1",children:[" ",T.jsxs("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-6",children:[" ",T.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})," "]})," "]})," ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Experimentation Sandbox"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Tinker with concepts in a safe, guided environment where you can test ideas and see instant results with AI feedback."," "]})," "]})," "]})," "]})," "]})," "," ",T.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",T.jsxs("div",{className:"text-center mb-16",children:[" ",T.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","How TinkFlow Works"," "]})," ",T.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Three simple steps to unlock your learning potential with AI-powered concept exploration"," "]})," "]})," ",T.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",T.jsxs("div",{className:"text-center",children:[" ",T.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",T.jsx("span",{className:"text-white font-bold text-xl",children:"1"})," "]})," ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Input Your Concept"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Start by entering any topic, question, or concept you want to explore. Our AI understands context and complexity."," "]})," "]})," ",T.jsxs("div",{className:"text-center",children:[" ",T.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",T.jsx("span",{className:"text-white font-bold text-xl",children:"2"})," "]})," ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI Generates Flow"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Watch as TinkFlow creates an interactive visual map with connected nodes, each representing key aspects of your concept."," "]})," "]})," ",T.jsxs("div",{className:"text-center",children:[" ",T.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",T.jsx("span",{className:"text-white font-bold text-xl",children:"3"})," "]})," ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Explore & Learn"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Click on any node to dive deeper, ask questions, and watch new connections emerge as you explore your learning path."," "]})," "]})," "]})," "]})," "]})," "," ",T.jsxs("section",{className:"py-20 bg-gradient-to-r from-indigo-500 to-purple-600",children:[" ",T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",T.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[" ",T.jsxs("div",{className:"text-white",children:[" ",T.jsx("div",{className:"text-4xl font-bold mb-2",children:"10K+"})," ",T.jsx("div",{className:"text-indigo-100",children:"Concepts Explored"})," "]})," ",T.jsxs("div",{className:"text-white",children:[" ",T.jsx("div",{className:"text-4xl font-bold mb-2",children:"5K+"})," ",T.jsx("div",{className:"text-indigo-100",children:"Active Learners"})," "]})," ",T.jsxs("div",{className:"text-white",children:[" ",T.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"})," ",T.jsx("div",{className:"text-indigo-100",children:"Learning Success"})," "]})," ",T.jsxs("div",{className:"text-white",children:[" ",T.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"})," ",T.jsx("div",{className:"text-indigo-100",children:"AI Support"})," "]})," "]})," "]})," "]})," "," ",T.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",T.jsxs("div",{className:"text-center mb-16",children:[" ",T.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Perfect for Every Learning Style"," "]})," ",T.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Whether you're a student, researcher, or curious mind, TinkFlow adapts to your learning needs"," "]})," "]})," ",T.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[" ",T.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/10 p-8 rounded-2xl border border-blue-200 dark:border-blue-700/30",children:[" ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🎓 Academic Learning"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Break down complex academic subjects into digestible, interconnected concepts. Perfect for studying sciences, humanities, and technical topics."," "]})," ",T.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",T.jsx("li",{children:"• Research paper analysis"})," ",T.jsx("li",{children:"• Concept mapping for exams"})," ",T.jsx("li",{children:"• Cross-disciplinary connections"})," "]})," "]})," ",T.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/10 dark:to-purple-800/10 p-8 rounded-2xl border border-purple-200 dark:border-purple-700/30",children:[" ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","💡 Creative Exploration"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Explore ideas, brainstorm solutions, and discover unexpected connections. Great for creative professionals and innovators."," "]})," ",T.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",T.jsx("li",{children:"• Idea generation workflows"})," ",T.jsx("li",{children:"• Problem-solving frameworks"})," ",T.jsx("li",{children:"• Innovation mapping"})," "]})," "]})," ",T.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/10 p-8 rounded-2xl border border-green-200 dark:border-green-700/30",children:[" ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🔬 Technical Deep Dives"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Understand complex systems, architectures, and technologies through interactive exploration and AI-guided explanations."," "]})," ",T.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",T.jsx("li",{children:"• System architecture learning"})," ",T.jsx("li",{children:"• Technology stack exploration"})," ",T.jsx("li",{children:"• Code concept mapping"})," "]})," "]})," ",T.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 p-8 rounded-2xl border border-orange-200 dark:border-orange-700/30",children:[" ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🚀 Professional Development"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Build skills, understand industry trends, and create learning paths for career advancement with AI-powered insights."," "]})," ",T.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",T.jsx("li",{children:"• Skill gap analysis"})," ",T.jsx("li",{children:"• Career pathway planning"})," ",T.jsx("li",{children:"• Industry trend mapping"})," "]})," "]})," "]})," "]})," "]})," "," ",T.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",T.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[" ",T.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:[" ","Ready to Transform Your Learning?"," "]})," ",T.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:[" ","Join thousands of learners who are already exploring concepts in revolutionary ways with TinkFlow's AI-powered platform."," "]})," ",T.jsxs("button",{onClick:t,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning for Free"," "]})," ",T.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:[" ","No credit card required • Get started in seconds"," "]})," "]})," "]})," "," ",T.jsxs("footer",{className:"bg-gray-900 text-white py-12",children:[" ",T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",T.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[" ",T.jsxs("div",{className:"col-span-1",children:[" ",T.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[" ",T.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",T.jsx("span",{className:"text-white font-bold text-sm",children:"T"})," "]})," ",T.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})," "]})," ",T.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","AI-powered concept learning platform for curious minds."," "]})," "]})," ",T.jsxs("div",{children:[" ",T.jsx("h4",{className:"font-semibold mb-4",children:"Product"})," ",T.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})})," ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})})," ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})," "]})," "]})," ",T.jsxs("div",{children:[" ",T.jsx("h4",{className:"font-semibold mb-4",children:"Resources"})," ",T.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})," ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Tutorials"})})," ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})," "]})," "]})," ",T.jsxs("div",{children:[" ",T.jsx("h4",{className:"font-semibold mb-4",children:"Company"})," ",T.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})})," ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})," ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})," "]})," "]})," "]})," ",T.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[" ",T.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","© 2024 TinkFlow. All rights reserved."," "]})," ",T.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[" ",T.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",T.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",T.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})," "]})," "]})," ",T.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",T.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",T.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})," "]})," "]})," ",T.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",T.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",T.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.747.099.12.112.225.085.344-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})," "]})," "]})," "]})," "]})," "]})," "]})," "]})}function yz({id:t,data:e}){const[n,i]=$.useState(""),a=$.useRef(null);return $.useEffect(()=>{a.current?.focus()},[a]),T.jsxs("div",{className:"bg-white border border-blue-400 rounded-lg p-3 shadow-md min-w-[180px]",children:[T.jsx("form",{onSubmit:l=>{l.preventDefault(),n.trim()&&e.onSubmit(t,n)},children:T.jsx("input",{ref:a,className:"border rounded px-2 py-1 text-sm w-full",placeholder:`Enter ${e.mode}...`,value:n,onChange:l=>i(l.target.value)})}),T.jsx(Pn,{type:"target",position:Te.Top}),T.jsx(Pn,{type:"source",position:Te.Bottom})]})}const vz=async()=>{try{await I9(Sf),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},_z=()=>{const[t,e]=$.useState(null);return $.useEffect(()=>{const i=C9(Sf,a=>{e(a),a?console.log("User signed in:",a.uid):console.log("No user signed in")});return()=>i()},[]),{user:t,signOut:async()=>{try{await vz(),e(null)}catch(i){console.error("Error in sign out:",i)}}}},V2=t=>!!(t&&t.uid),fu=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],wl=[],bz=async t=>{if(!V2({uid:t}))throw new Error(On.AUTH_REQUIRED);try{const e=Cy(qr,cr.BOARDS),n=vV(e,_V("userId","==",t),bV("createdAt","desc")),i=await By(n);if(i.empty){const l={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:_t.now(),isOpen:!0};return await Hy(jl(qr,cr.BOARDS,l.id),l),console.log("Created default board:",l),[l]}const a=i.docs.map(l=>({id:l.id,...l.data()}));return console.log("Fetched all boards:",a),a}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:_t.now(),isOpen:!0,isFallback:!0}]}throw new Error(On.LOAD_FAILED)}},l1=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),fu;try{const e=Cy(qr,cr.BOARDS,t,cr.NODES),n=await By(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),fu;const i=n.docs.map(a=>{const l=a.data(),c={...l.data,tokenColors:l.data?.tokenColors||{},previousNode:l.data?.previousNode||null};return{id:a.id,type:l.type,position:l.position,data:c,draggable:l.draggable,style:l.style}});return console.log("Fetched nodes from board:",i),i}catch(e){return console.error("Fetch nodes error:",e),fu}},c1=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),wl;try{const e=Cy(qr,cr.BOARDS,t,cr.EDGES),n=await By(e);if(n.empty)return console.log("No edges found for board, using initial edges"),wl;const i=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched edges from board:",i),i}catch(e){return console.error("Fetch edges error:",e),wl}},Ez=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=QA(qr);e.forEach(i=>{const a=jl(qr,cr.BOARDS,t,cr.NODES,i.id),l={type:i.type,data:i.data,position:i.position,updatedAt:_t.now()};i.draggable!=null&&(l.draggable=i.draggable),i.style!=null&&(l.style=i.style),n.set(a,l)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(On.SAVE_FAILED)}},wz=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=QA(qr);e.forEach(i=>{const a=jl(qr,cr.BOARDS,t,cr.EDGES,i.id),l={source:i.source,target:i.target,updatedAt:_t.now()};i.sourceHandle!=null&&(l.sourceHandle=i.sourceHandle),i.targetHandle!=null&&(l.targetHandle=i.targetHandle),i.style!=null&&(l.style=i.style),i.markerEnd!=null&&(l.markerEnd=i.markerEnd),n.set(a,l)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(On.SAVE_FAILED)}},xz=async(t,e,n)=>{if(!V2({uid:t}))throw new Error(On.AUTH_REQUIRED);try{const i={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:_t.now(),isOpen:!1};return console.log("Creating board:",i),await Hy(jl(qr,cr.BOARDS,i.id),i),console.log("Board created successfully:",i),i}catch(i){throw console.error("Error creating new board:",i),i.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):i.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},Tz=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await AV(jl(qr,cr.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},il=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:_t.now()};await Hy(jl(qr,cr.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},Sz=t=>{if(!t||!t.data)return t;const e={...t},n={...t.data};return n.title||(n.title=n.label||n.summary||"Node"),n.suggestions||(n.suggestions=[]),e.draggable===void 0&&(e.draggable=!0),e.data=n,e},Az=t=>Array.isArray(t)?t.map(Sz):[],Rz=(t,e={})=>{const[n,i,a]=e3([]),[l,c,d]=t3([]),[f,p]=$.useState(!0),[y,_]=$.useState(!1),[b,w]=$.useState(!1),[S,M]=$.useState([]),[C,L]=$.useState(null),B=$.useRef(null),{showSuccess:G,showError:j,showInfo:J}=e,ee=I=>{const P=I.find(Y=>Y.isOpen===!0);if(P)return P;if(I.length>0){const Y={...I[0],isOpen:!0};return il(Y.id,Y).catch(console.error),Y}return null};$.useEffect(()=>{(async()=>{if(t)try{p(!0);const P=await bz(t.uid);M(P);const Y=P.some(Q=>Q.isFallback);Y&&j&&j("Database index missing. Please create the required Firestore index. Check console for details.");const D=ee(P);if(!D){console.error("No board found for user"),j&&j("No boards found. Creating a default board..."),i(fu),c(wl);return}L(D);const[q,W]=await Promise.all([l1(D.id),c1(D.id)]);i(q),c(W),J&&!Y&&J("Board loaded successfully!")}catch(P){console.error("Error loading initial data:",P),j&&j("Failed to load board data. Using default board."),i(fu),c(wl)}finally{p(!1)}})()},[t,i,c]);const O=async(I,P,Y)=>{B.current&&clearTimeout(B.current);const D=setTimeout(async()=>{try{w(!0);const q=[];P&&P.length>0&&q.push(Ez(I,P)),Y&&Y.length>0&&q.push(wz(I,Y)),q.length>0&&(await Promise.all(q),console.log("Auto-save completed successfully"))}catch(q){console.error("Auto-save failed:",q),j&&j("Failed to save changes automatically")}finally{w(!1),B.current=null}},1e3);B.current=D};$.useEffect(()=>(!f&&C&&!y&&!C.isFallback&&O(C.id,n,l),()=>{B.current&&clearTimeout(B.current)}),[n,l,f,C,y]);const A=async I=>{try{if(C?.id===I)return;if(C?.isFallback||S.find(Y=>Y.id===I)?.isFallback){j&&j("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(_(!0),C&&!C.isFallback){const Y={...C,isOpen:!1};await il(C.id,Y),M(D=>D.map(q=>q.id===C.id?Y:q))}const P=S.find(Y=>Y.id===I);if(P){const Y={...P,isOpen:!0};await il(I,Y),L(Y),M(Q=>Q.map(k=>k.id===I?Y:k));const[D,q]=await Promise.all([l1(I),c1(I)]),W=Az(D);i(W),c(q),G&&G(`Switched to "${Y.name}"`)}else console.error("Board not found:",I),j&&j("Board not found")}catch(P){console.error("Error switching board:",P),j&&j("Failed to switch board. Please try again.")}finally{_(!1)}};return{nodes:n,edges:l,allBoards:S,currentBoard:C,isLoading:f,isSwitchingBoard:y,isSaving:b,onNodesChange:a,onEdgesChange:d,setNodes:i,switchToBoard:A,createNewBoard:async I=>{try{if(!t)return j&&j("You must be logged in to create a board"),null;J&&J("Creating new board...");const P=await xz(t.uid,I||null,S);if(P){if(C&&!C.isFallback){const D={...C,isOpen:!1};il(C.id,D).catch(console.error)}const Y={...P,isOpen:!0};return M(D=>{const q=D.map(W=>W.id===C?.id?{...W,isOpen:!1}:W);return[Y,...q]}),L(Y),il(P.id,Y).catch(console.error),i([{id:"1",type:"staticEditable",data:{label:I||"New Board"},position:{x:250,y:25},draggable:!1}]),c(wl),G&&G(`Board "${P.name}" created and opened!`),Y}else return j&&j("Failed to create board. Please try again."),null}catch(P){return j&&j(`Failed to create board: ${P.message}`),null}},deleteBoard:async I=>{try{if(S.length<=1){j&&j("Cannot delete the last board!");return}if(!S.find(Y=>Y.id===I)){console.error("Board not found for deletion"),j&&j("Board not found");return}if(J&&J("Deleting board..."),C?.id===I){const Y=S.find(D=>D.id!==I);Y&&await A(Y.id)}await Tz(I),M(Y=>Y.filter(D=>D.id!==I)),G&&G("Board deleted successfully!")}catch(P){console.error("Error deleting board:",P),j&&j("Failed to delete board. Please try again.")}},updateBoardName:async I=>{if(C&&C.name!==I){const P={...C,name:I};L(P),M(Y=>Y.map(D=>D.id===C.id?P:D));try{await il(C.id,P),console.log("Board name updated successfully")}catch(Y){console.error("Error updating board name:",Y)}}},clearBoardState:()=>{B.current&&(clearTimeout(B.current),B.current=null),M([]),L(null),i([]),c([]),p(!0),_(!1),w(!1)}}},Nz=()=>{const[t,e]=$.useState([]),n=p=>{e(y=>y.filter(_=>_.id!==p))},i=p=>{const y=Date.now().toString(),_={id:y,timestamp:new Date,...p};return e(b=>[...b,_]),p.autoRemove!==!1&&setTimeout(()=>{n(y)},p.duration||5e3),y};return{notifications:t,addNotification:i,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(p,y={})=>i({type:"success",message:p,...y}),showError:(p,y={})=>i({type:"error",message:p,duration:7e3,...y}),showInfo:(p,y={})=>i({type:"info",message:p,...y}),showWarning:(p,y={})=>i({type:"warning",message:p,duration:6e3,...y})}},L2=({size:t="medium",color:e="#4f86f7"})=>{const n={small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"};return T.jsx("div",{className:"flex items-center justify-center",children:T.jsx("div",{className:`${n[t]} border-gray-200 dark:border-gray-700 border-t-indigo-500 dark:border-t-indigo-400 rounded-full animate-spin`,style:{borderTopColor:e}})})};function Cz({data:t,id:e,onNodeCallback:n}){const[i,a]=$.useState(t.summary||t.label||"Static Node"),{handleTokenClick:l,showExplanation:c}=M2();$.useEffect(()=>{a(t.summary||t.label||"Static Node")},[t.summary,t.label]);const d=rS(i),f=(w,S)=>{S.stopPropagation(),console.log("Static Token clicked:",w),l(w,e,{x:0,y:0},"staticEditable",t.myColor,t.summary||t.label||"Draggable Node",w.suggestionId)},p=w=>{w.stopPropagation(),c&&c(t.title||"Explanation",t.full_text||"No detailed information available.")},y=(()=>{const w=t.tokenColors||{};return d.map((S,M)=>{const C=S.myConcept||S.word,L=w[C],B=!L;return T.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-200 ease-out
                              ${B?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"} 
                              ${S.myConcept?"bg-blue-500/10 border border-blue-500/30":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:L||"transparent",color:L?t.myColor||"#ffffff":"inherit",border:L?`1px solid ${L}`:""},onClick:G=>B?f(S,G):G.stopPropagation(),children:[S.word,M<d.length-1?" ":""]},M)})})(),_=T.jsx("div",{className:"node-buttons",children:T.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:p,title:"Show full text",children:"📄"})}),b=$.useMemo(()=>t.isLoading?T.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[T.jsx(L2,{size:"small",color:t.myColor||"#6366f1"}),T.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}):T.jsxs("div",{className:"flex flex-col gap-3",children:[T.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[T.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),T.jsx("div",{className:"flex gap-2",children:T.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                     hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                     transition-all duration-150 flex items-center justify-center text-sm`,onClick:p,title:"Show full text",children:"📄"})})]}),T.jsx("div",{className:"flex-1",children:T.jsx("div",{className:"cursor-text leading-relaxed break-words text-lg font-medium",children:y})}),T.jsxs("div",{className:"mt-2",children:[T.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),T.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((w,S)=>{const C=(t.tokenColors||{})[w],L=!C;return T.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                      bg-white/5 border border-white/10 transition-all duration-200 
                                                      ${L?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:C||"transparent",color:C?t.myColor||"#ffffff":"inherit",border:C?`1px solid ${C}`:""},onClick:B=>L?f({word:w,myConcept:w,suggestionId:t.label+w+S},B):B.stopPropagation(),children:[w,S<t.suggestions.length-1?" ":""]},S)}):T.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]}),[i,d.length,y,_]);return T.jsxs("div",{className:`bg-[#1a1a1d] border border-white/[0.1] rounded-[20px] p-7 min-w-[320px] max-w-[500px] 
                       transition-all duration-150 ease-in-out cursor-pointer select-none overflow-hidden
                       opacity-[0.98] border-b-[3px] border-b-white/[0.06]
                       hover:opacity-100 hover:bg-[#28282c] hover:border-white/[0.2]`,style:{backgroundColor:t.myColor,color:t.myColor?Z3(t.myColor):"#f8faff",border:t.myColor?`1px solid ${Vh(t.myColor,20)}`:"1px solid rgba(255, 255, 255, 0.1)"},children:[T.jsx("div",{className:"relative pointer-events-auto text-[#f8faff] text-[18px] leading-[1.7] font-semibold",children:b}),T.jsx(Pn,{type:"source",position:Te.Bottom,id:"bottom-source"}),T.jsx(Pn,{type:"target",position:Te.Bottom,id:"bottom-target"})]})}var z2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},u1=he.createContext&&he.createContext(z2),Iz=["attr","size","title"];function kz(t,e){if(t==null)return{};var n=Dz(t,e),i,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function Dz(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function Af(){return Af=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Af.apply(this,arguments)}function d1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Rf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d1(Object(n),!0).forEach(function(i){Mz(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d1(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Mz(t,e,n){return e=Oz(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oz(t){var e=Pz(t,"string");return typeof e=="symbol"?e:e+""}function Pz(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function U2(t){return t&&t.map((e,n)=>he.createElement(e.tag,Rf({key:n},e.attr),U2(e.child)))}function Vz(t){return e=>he.createElement(Lz,Af({attr:Rf({},t.attr)},e),U2(t.child))}function Lz(t){var e=n=>{var{attr:i,size:a,title:l}=t,c=kz(t,Iz),d=a||n.size||"1em",f;return n.className&&(f=n.className),t.className&&(f=(f?f+" ":"")+t.className),he.createElement("svg",Af({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,c,{className:f,style:Rf(Rf({color:t.color||n.color},n.style),t.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&he.createElement("title",null,l),t.children)};return u1!==void 0?he.createElement(u1.Consumer,null,n=>e(n)):e(z2)}function zz(t){return Vz({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"},child:[]}]})(t)}function Uz(){return T.jsxs(T.Fragment,{children:[T.jsx(Pn,{type:"source",position:Te.Bottom,id:"bottom-source"}),T.jsx(Pn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Top,id:"top-target"}),T.jsx(Pn,{style:{transform:"translateY(100%)"},type:"source",position:Te.Left,id:"left-source"}),T.jsx(Pn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Left,id:"left-target"}),T.jsx(Pn,{style:{transform:"translateY(100%)"},type:"source",position:Te.Right,id:"right-source"}),T.jsx(Pn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Right,id:"right-target"})]})}function jz({data:t,id:e}){const[n,i]=$.useState(t.summary||t.label||"Draggable Node"),{getNodes:a,getNode:l,setViewport:c,screenToFlowPosition:d}=Of(),{handleTokenClick:f,showExplanation:p}=M2(),[y,_]=$.useState(!1),b=$.useRef(null),[w,S]=$.useState({mode:null,x:0,y:0,isDragging:!1}),M=$.useRef(w);$.useEffect(()=>{M.current=w},[w]);const[C,L]=$.useState(null);function B(){_(!0)}function G(){_(!1)}$.useEffect(()=>{i(t.summary||t.label||"Draggable Node")},[t.summary,t.label]);const j=rS(n),J=j,ee=()=>!0,O=(q,W)=>{W.stopPropagation();const k=a().find(te=>te.id===e);if(!k){console.error("Shit went south");return}return f(q,e,k.position,k.type||"draggableEditable",t.myColor,t.summary||t.label||"Draggable Node")},A=q=>{q.stopPropagation(),p&&p(t.title,t.full_text||"No detailed information available.")},R=q=>{if(q.stopPropagation(),t.previousNode){const W=l(t.previousNode);if(W){const{x:Q,y:k}=W.position;c({x:-Q+200,y:-k+100,zoom:1},{duration:500})}}},z=$.useMemo(()=>{const q={};return J.forEach(W=>{const Q=W.myConcept||W.word;q[Q]||(q[Q]=[]),q[Q].push(W)}),q},[J]);function U(q){if(!q)return"#000000";const W=(q??"000000").replace(/^#/,""),Q=parseInt(W.substring(0,2),16),k=parseInt(W.substring(2,4),16),F=parseInt(W.substring(4,6),16),[te,X,re]=[Q,k,F].map(ue=>{const ye=ue/255;return ye<=.03928?ye/12.92:Math.pow((ye+.055)/1.055,2.4)});return .2126*te+.7152*X+.0722*re>.179?"#000000":"#ffffff"}const H=$.useMemo(()=>T.jsxs(T.Fragment,{children:[t.isLoading&&T.jsxs("div",{className:"flex items-center justify-center gap-2 py-5",children:[T.jsx(L2,{size:"small",color:t.myColor||"#6366f1"}),T.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}),T.jsxs("div",{className:"flex flex-col gap-3",children:[T.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[T.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),T.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&T.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                             hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                             transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:R,title:"Go to previous node",children:"←"}),T.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                         hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm`,onClick:A,title:"Show full text",children:"📄"})]})]}),T.jsx("div",{className:"flex-1",children:T.jsx("div",{className:"cursor-text leading-relaxed break-words",children:J.map((q,W)=>{const Q=t.tokenColors||{},k=q.myConcept||q.word,F=Q[k],te=!F;return T.jsxs("span",{className:`inline-block px-1 py-0.5 m-0.5 rounded-lg font-medium transition-all duration-300 ease-out
                                                  ${te?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40 hover:scale-105 hover:-translate-y-0.5 active:scale-95 active:translate-y-0":"cursor-not-allowed opacity-70"} 
                                                  ${q.myConcept?"bg-blue-500/10 border border-blue-500/30 shadow-md":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:F||"transparent",color:U(F||t.myColor),border:F?`1px solid ${Vh(F,20)}`:"",boxShadow:F?`0 0 0 1px ${F}25`:""},onClick:X=>te?O(q,X):X.stopPropagation(),children:[q.word,W<J.length-1?" ":""]},W)})})}),T.jsxs("div",{className:"mt-2",children:[T.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),T.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((q,W)=>{const k=(t.tokenColors||{})[q],F=!k;return T.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                      bg-white/5 border border-white/10 transition-all duration-200 
                                                      ${F?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:k||"transparent",color:U(k||t.myColor),border:k?`1px solid ${Vh(k,20)}`:""},onClick:te=>F?O({word:q,myConcept:q,suggestionId:t.label+q+W},te):te.stopPropagation(),children:[q,T.jsx(Pn,{type:"source",position:Te.Bottom,id:t.label+q+W})]},W)}):T.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]})]}),[n,J,j,z,A,O,ee,t.previousNode,R,t.tokenColors,t.myColor,t.isLoading]),I=(q,W)=>{const k=W.target.getBoundingClientRect();L({x:k.left+k.width/2,y:k.top+k.height/2}),S({mode:q,x:W.clientX,y:W.clientY,isDragging:!0}),document.addEventListener("pointermove",P),document.addEventListener("pointerup",Y)},P=q=>{S(W=>W.isDragging?{...W,x:q.clientX,y:q.clientY}:W)},Y=()=>{const q=M.current;if(console.log("handleDragEnd",q),q.isDragging&&t.onNodeCallback){const W=d({x:q.x,y:q.y});console.log("Calling onNodeCallback",q.mode,W),t.onNodeCallback(q.mode||void 0,e,W)}S({mode:null,x:0,y:0,isDragging:!1}),L(null),document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",Y)},D=()=>{if(!b.current)return{x:0,y:0};const q=b.current.getBoundingClientRect();return{x:q.left+q.width/2,y:q.top+q.height/2}};return T.jsxs("div",{ref:b,className:`bg-[#202023] border border-white/[0.12] rounded-2xl p-5 min-w-[280px] max-w-[600px] 
                       transition-all duration-200 ease-in-out cursor-grab select-none overflow-hidden
                       hover:transform hover:-translate-y-[3px]
                       hover:border-white/[0.18] hover:bg-[#242427]`,style:{background:t.myColor,color:t.myColor?U(t.myColor):"#f0f4f8",border:t.myColor?`2px solid ${Vh(t.myColor,.5)}`:"2px solid rgba(255, 255, 255, 0.12)"},children:[T.jsx("div",{className:"relative pointer-events-auto text-[#f0f4f8] text-[17px] leading-[1.7] font-medium",children:H}),T.jsx(Uz,{}),T.jsx("div",{className:"absolute top-0 right-0 p-2 text-gray-400 hover:text-gray-200 cursor-pointer",onMouseEnter:B,onMouseLeave:G,onClick:q=>q.stopPropagation(),children:T.jsx(zz,{className:"w-20 h-20"})}),T.jsx("div",{className:"input-menu",style:{position:"relative",zIndex:10},children:["explain","answer","argue"].map(q=>T.jsx("div",{style:{cursor:"grab",userSelect:"none",position:"relative",zIndex:11,textAlign:"center"},draggable:!1,onPointerDown:W=>{W.stopPropagation(),W.preventDefault(),W.button===0&&I(q,W.nativeEvent)},children:q.charAt(0).toUpperCase()+q.slice(1)},q))}),w.isDragging&&typeof window<"u"&&H1.createPortal(T.jsxs(T.Fragment,{children:[T.jsx("svg",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",pointerEvents:"none",zIndex:9998},children:T.jsx("line",{x1:C?C.x:D().x,y1:C?C.y:D().y,x2:w.x,y2:w.y,stroke:"#60a5fa",strokeWidth:3,strokeDasharray:"6 4"})}),T.jsx("div",{style:{position:"fixed",left:w.x-40,top:w.y-20,pointerEvents:"none",zIndex:9999},children:T.jsx("div",{style:{background:"#222",color:"#fff",padding:"8px 16px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",fontWeight:600},children:w.mode&&w.mode.charAt(0).toUpperCase()+w.mode.slice(1)})})]}),document.body)]})}const Bz={staticEditable:Cz,draggableEditable:jz},Hz={...Bz,tempInput:yz},qz=$.memo(function({isVisible:e,explanation:n,onClose:i}){return e?T.jsx(x3,{defaultSize:{width:380},style:{background:"transparent",position:"fixed",right:"12px",top:"80px",borderRadius:"16px",zIndex:1e3},enable:{right:!1,top:!1,bottom:!1,left:!0},children:T.jsx("div",{className:"relative z-10 overflow-auto h-full",children:T.jsx(uz,{explanation:n,onClose:i,isVisible:e})})}):null});function $z(){const[t,e]=$.useState(!1),[n,i]=$.useState(!1),[a,l]=$.useState(!1),[c,d]=$.useState(null),f=$.useCallback((F,te)=>{d({title:F,text:te}),e(!0)},[]),p=$.useCallback(()=>{e(!1)},[]),{user:y,signOut:_}=_z(),{notifications:b,removeNotification:w,showSuccess:S,showError:M,showInfo:C}=Nz(),{nodes:L,edges:B,allBoards:G,currentBoard:j,isSwitchingBoard:J,isSaving:ee,onNodesChange:O,onEdgesChange:A,setNodes:R,switchToBoard:z,createNewBoard:U,deleteBoard:H,updateBoardName:I,clearBoardState:P}=Rz(y,{showSuccess:S,showError:M,showInfo:C}),Y=async()=>{await _(),P()},D=()=>{i(!0)},q=$.useCallback(F=>{const te={id:`e${F.source}-${F.target}`,source:F.source,target:F.target,sourceHandle:F.sourceHandle,targetHandle:F.targetHandle};A([{type:"add",item:te}])},[A]),W=$.useCallback((F,te,X,re,de)=>{if(!X||!de){console.warn("handleNodeCallback called without mode or position",X,de);return}const ue=`temp-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;R(ye=>[...ye,{id:ue,type:"tempInput",position:de,data:{mode:X,parent:re}}]),re&&A([{type:"add",item:{id:`e${re}-${ue}`,source:re,target:ue,style:{stroke:"#FFFFFF",strokeWidth:3},markerEnd:{type:Ya.ArrowClosed,color:"#FFFFFF"}}}])},[R]),Q=$.useMemo(()=>L.map(F=>{let te={...F.data};return te.onNodeCallback=(X,re,de)=>W(F.id,F.data,X,re,de),F.type==="tempInput"&&(te.onSubmit=X=>{R($e=>$e.map(Ue=>Ue.id===F.id?{...Ue,type:"draggableEditable",data:{...Ue.data,label:X}}:Ue));const re=L.find($e=>$e.id===F.data.parent),de=re?.data?.color,ue=re?.data?.summary;console.log(re);const ye={word:X},_e=F.data.parent,Ae={x:F.position.x,y:F.position.y},Pe=D2(ye,_e,Ae,"draggableEditable",L,R,O,A,de,ue,void 0,!0,F);R($e=>$e.map(Ue=>Ue.id===F.id?{...Ue,data:{...Ue.data,color:Pe}}:Ue)),F.data.parent&&A([{type:"update",item:{id:`e${F.data.parent}-${F.id}`,style:{stroke:Pe,strokeWidth:3},markerEnd:{type:Ya.ArrowClosed,color:Pe}}}])}),{...F,data:te}}),[L,W,R]),k=$.useMemo(()=>T.jsxs(MT,{nodes:Q,edges:B,onNodesChange:O,onEdgesChange:A,onConnect:q,nodeTypes:Hz,connectionMode:Qs.Loose,fitView:!0,className:"bg-gray-50 dark:bg-gray-900 w-full h-full",children:[T.jsx(l3,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg"}),T.jsx(g3,{variant:Nr.Cross,gap:30,size:10,lineWidth:.5,color:"#94a3b8",className:"bg-gray-50 dark:bg-gray-900"})]}),[Q,B,O,A,q]);return y?T.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 relative",style:{height:"100vh",width:"100vw",overflow:"hidden"},children:[T.jsx(pz,{notifications:b,onRemove:w}),T.jsxs("div",{style:{height:"100%",position:"relative"},children:[T.jsxs(tS,{direction:"horizontal",children:[T.jsx(r0,{defaultSize:15,minSize:10,maxSize:30,children:T.jsx("div",{className:"bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:T.jsx(cz,{allBoards:G,currentBoard:j,onSwitchBoard:z,onCreateBoard:async F=>{await U(F)},onDeleteBoard:H,onSignOut:Y,isLoading:J})})}),T.jsx(nS,{}),T.jsx(r0,{children:T.jsxs("div",{className:"bg-white dark:bg-gray-800",style:{height:"100%",position:"relative"},children:[T.jsx(fz,{name:j?.name||"Loading...",onSetName:I,user:y,isSaving:ee}),T.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",style:{height:"calc(100% - 60px)",width:"100%"},children:T.jsx(az,{nodes:L,onNodesChange:O,onEdgesChange:A,setNodes:R,showExplanation:f,children:k})})]})})]}),T.jsx(qz,{isVisible:t,explanation:c,onClose:p})]})]}):n?T.jsx(oz,{}):T.jsx(mz,{onLogin:D})}function Fz(){return T.jsx(hz,{children:T.jsx($z,{})})}const j2=document.getElementById("root");if(!j2)throw new Error("Failed to find the root element");EN.createRoot(j2).render(T.jsx($.StrictMode,{children:T.jsx(Fz,{})}));
