(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function q0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xg={exports:{}},Bc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _2;function h4(){if(_2)return Bc;_2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var h in s)h!=="key"&&(o[h]=s[h])}else o=s;return s=o.ref,{$$typeof:t,type:r,key:l,ref:s!==void 0?s:null,props:o}}return Bc.Fragment=e,Bc.jsx=n,Bc.jsxs=n,Bc}var T2;function d4(){return T2||(T2=1,xg.exports=h4()),xg.exports}var R=d4(),wg={exports:{}},Je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b2;function f4(){if(b2)return Je;b2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),E=Symbol.iterator;function T(A){return A===null||typeof A!="object"?null:(A=E&&A[E]||A["@@iterator"],typeof A=="function"?A:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,k={};function U(A,J,ae){this.props=A,this.context=J,this.refs=k,this.updater=ae||b}U.prototype.isReactComponent={},U.prototype.setState=function(A,J){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,J,"setState")},U.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function M(){}M.prototype=U.prototype;function Y(A,J,ae){this.props=A,this.context=J,this.refs=k,this.updater=ae||b}var K=Y.prototype=new M;K.constructor=Y,N(K,U.prototype),K.isPureReactComponent=!0;var q=Array.isArray,te={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function H(A,J,ae,O,ge,Ie){return ae=Ie.ref,{$$typeof:t,type:A,key:J,ref:ae!==void 0?ae:null,props:Ie}}function C(A,J){return H(A.type,J,void 0,void 0,void 0,A.props)}function I(A){return typeof A=="object"&&A!==null&&A.$$typeof===t}function B(A){var J={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(ae){return J[ae]})}var P=/\/+/g;function V(A,J){return typeof A=="object"&&A!==null&&A.key!=null?B(""+A.key):J.toString(36)}function w(){}function D(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(w,w):(A.status="pending",A.then(function(J){A.status==="pending"&&(A.status="fulfilled",A.value=J)},function(J){A.status==="pending"&&(A.status="rejected",A.reason=J)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function Q(A,J,ae,O,ge){var Ie=typeof A;(Ie==="undefined"||Ie==="boolean")&&(A=null);var xe=!1;if(A===null)xe=!0;else switch(Ie){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(A.$$typeof){case t:case e:xe=!0;break;case g:return xe=A._init,Q(xe(A._payload),J,ae,O,ge)}}if(xe)return ge=ge(A),xe=O===""?"."+V(A,0):O,q(ge)?(ae="",xe!=null&&(ae=xe.replace(P,"$&/")+"/"),Q(ge,J,ae,"",function(tt){return tt})):ge!=null&&(I(ge)&&(ge=C(ge,ae+(ge.key==null||A&&A.key===ge.key?"":(""+ge.key).replace(P,"$&/")+"/")+xe)),J.push(ge)),1;xe=0;var Ve=O===""?".":O+":";if(q(A))for(var Pe=0;Pe<A.length;Pe++)O=A[Pe],Ie=Ve+V(O,Pe),xe+=Q(O,J,ae,Ie,ge);else if(Pe=T(A),typeof Pe=="function")for(A=Pe.call(A),Pe=0;!(O=A.next()).done;)O=O.value,Ie=Ve+V(O,Pe++),xe+=Q(O,J,ae,Ie,ge);else if(Ie==="object"){if(typeof A.then=="function")return Q(D(A),J,ae,O,ge);throw J=String(A),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return xe}function z(A,J,ae){if(A==null)return A;var O=[],ge=0;return Q(A,O,"","",function(Ie){return J.call(ae,Ie,ge++)}),O}function Z(A){if(A._status===-1){var J=A._result;J=J(),J.then(function(ae){(A._status===0||A._status===-1)&&(A._status=1,A._result=ae)},function(ae){(A._status===0||A._status===-1)&&(A._status=2,A._result=ae)}),A._status===-1&&(A._status=0,A._result=J)}if(A._status===1)return A._result.default;throw A._result}var se=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function ne(){}return Je.Children={map:z,forEach:function(A,J,ae){z(A,function(){J.apply(this,arguments)},ae)},count:function(A){var J=0;return z(A,function(){J++}),J},toArray:function(A){return z(A,function(J){return J})||[]},only:function(A){if(!I(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Je.Component=U,Je.Fragment=n,Je.Profiler=s,Je.PureComponent=Y,Je.StrictMode=r,Je.Suspense=d,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,Je.__COMPILER_RUNTIME={__proto__:null,c:function(A){return te.H.useMemoCache(A)}},Je.cache=function(A){return function(){return A.apply(null,arguments)}},Je.cloneElement=function(A,J,ae){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var O=N({},A.props),ge=A.key,Ie=void 0;if(J!=null)for(xe in J.ref!==void 0&&(Ie=void 0),J.key!==void 0&&(ge=""+J.key),J)!G.call(J,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&J.ref===void 0||(O[xe]=J[xe]);var xe=arguments.length-2;if(xe===1)O.children=ae;else if(1<xe){for(var Ve=Array(xe),Pe=0;Pe<xe;Pe++)Ve[Pe]=arguments[Pe+2];O.children=Ve}return H(A.type,ge,void 0,void 0,Ie,O)},Je.createContext=function(A){return A={$$typeof:l,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:o,_context:A},A},Je.createElement=function(A,J,ae){var O,ge={},Ie=null;if(J!=null)for(O in J.key!==void 0&&(Ie=""+J.key),J)G.call(J,O)&&O!=="key"&&O!=="__self"&&O!=="__source"&&(ge[O]=J[O]);var xe=arguments.length-2;if(xe===1)ge.children=ae;else if(1<xe){for(var Ve=Array(xe),Pe=0;Pe<xe;Pe++)Ve[Pe]=arguments[Pe+2];ge.children=Ve}if(A&&A.defaultProps)for(O in xe=A.defaultProps,xe)ge[O]===void 0&&(ge[O]=xe[O]);return H(A,Ie,void 0,void 0,null,ge)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(A){return{$$typeof:h,render:A}},Je.isValidElement=I,Je.lazy=function(A){return{$$typeof:g,_payload:{_status:-1,_result:A},_init:Z}},Je.memo=function(A,J){return{$$typeof:f,type:A,compare:J===void 0?null:J}},Je.startTransition=function(A){var J=te.T,ae={};te.T=ae;try{var O=A(),ge=te.S;ge!==null&&ge(ae,O),typeof O=="object"&&O!==null&&typeof O.then=="function"&&O.then(ne,se)}catch(Ie){se(Ie)}finally{te.T=J}},Je.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},Je.use=function(A){return te.H.use(A)},Je.useActionState=function(A,J,ae){return te.H.useActionState(A,J,ae)},Je.useCallback=function(A,J){return te.H.useCallback(A,J)},Je.useContext=function(A){return te.H.useContext(A)},Je.useDebugValue=function(){},Je.useDeferredValue=function(A,J){return te.H.useDeferredValue(A,J)},Je.useEffect=function(A,J,ae){var O=te.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return O.useEffect(A,J)},Je.useId=function(){return te.H.useId()},Je.useImperativeHandle=function(A,J,ae){return te.H.useImperativeHandle(A,J,ae)},Je.useInsertionEffect=function(A,J){return te.H.useInsertionEffect(A,J)},Je.useLayoutEffect=function(A,J){return te.H.useLayoutEffect(A,J)},Je.useMemo=function(A,J){return te.H.useMemo(A,J)},Je.useOptimistic=function(A,J){return te.H.useOptimistic(A,J)},Je.useReducer=function(A,J,ae){return te.H.useReducer(A,J,ae)},Je.useRef=function(A){return te.H.useRef(A)},Je.useState=function(A){return te.H.useState(A)},Je.useSyncExternalStore=function(A,J,ae){return te.H.useSyncExternalStore(A,J,ae)},Je.useTransition=function(){return te.H.useTransition()},Je.version="19.1.0",Je}var v2;function Fh(){return v2||(v2=1,wg.exports=f4()),wg.exports}var ie=Fh();const Ee=q0(ie);var Cg={exports:{}},Uc={},Ng={exports:{}},Ig={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A2;function m4(){return A2||(A2=1,function(t){function e(z,Z){var se=z.length;z.push(Z);e:for(;0<se;){var ne=se-1>>>1,A=z[ne];if(0<s(A,Z))z[ne]=Z,z[se]=A,se=ne;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Z=z[0],se=z.pop();if(se!==Z){z[0]=se;e:for(var ne=0,A=z.length,J=A>>>1;ne<J;){var ae=2*(ne+1)-1,O=z[ae],ge=ae+1,Ie=z[ge];if(0>s(O,se))ge<A&&0>s(Ie,O)?(z[ne]=Ie,z[ge]=se,ne=ge):(z[ne]=O,z[ae]=se,ne=ae);else if(ge<A&&0>s(Ie,se))z[ne]=Ie,z[ge]=se,ne=ge;else break e}}return Z}function s(z,Z){var se=z.sortIndex-Z.sortIndex;return se!==0?se:z.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],f=[],g=1,E=null,T=3,b=!1,N=!1,k=!1,U=!1,M=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function q(z){for(var Z=n(f);Z!==null;){if(Z.callback===null)r(f);else if(Z.startTime<=z)r(f),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=n(f)}}function te(z){if(k=!1,q(z),!N)if(n(d)!==null)N=!0,G||(G=!0,V());else{var Z=n(f);Z!==null&&Q(te,Z.startTime-z)}}var G=!1,H=-1,C=5,I=-1;function B(){return U?!0:!(t.unstable_now()-I<C)}function P(){if(U=!1,G){var z=t.unstable_now();I=z;var Z=!0;try{e:{N=!1,k&&(k=!1,Y(H),H=-1),b=!0;var se=T;try{t:{for(q(z),E=n(d);E!==null&&!(E.expirationTime>z&&B());){var ne=E.callback;if(typeof ne=="function"){E.callback=null,T=E.priorityLevel;var A=ne(E.expirationTime<=z);if(z=t.unstable_now(),typeof A=="function"){E.callback=A,q(z),Z=!0;break t}E===n(d)&&r(d),q(z)}else r(d);E=n(d)}if(E!==null)Z=!0;else{var J=n(f);J!==null&&Q(te,J.startTime-z),Z=!1}}break e}finally{E=null,T=se,b=!1}Z=void 0}}finally{Z?V():G=!1}}}var V;if(typeof K=="function")V=function(){K(P)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,D=w.port2;w.port1.onmessage=P,V=function(){D.postMessage(null)}}else V=function(){M(P,0)};function Q(z,Z){H=M(function(){z(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(z){switch(T){case 1:case 2:case 3:var Z=3;break;default:Z=T}var se=T;T=Z;try{return z()}finally{T=se}},t.unstable_requestPaint=function(){U=!0},t.unstable_runWithPriority=function(z,Z){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var se=T;T=z;try{return Z()}finally{T=se}},t.unstable_scheduleCallback=function(z,Z,se){var ne=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ne+se:ne):se=ne,z){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=se+A,z={id:g++,callback:Z,priorityLevel:z,startTime:se,expirationTime:A,sortIndex:-1},se>ne?(z.sortIndex=se,e(f,z),n(d)===null&&z===n(f)&&(k?(Y(H),H=-1):k=!0,Q(te,se-ne))):(z.sortIndex=A,e(d,z),N||b||(N=!0,G||(G=!0,V()))),z},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(z){var Z=T;return function(){var se=T;T=Z;try{return z.apply(this,arguments)}finally{T=se}}}}(Ig)),Ig}var S2;function p4(){return S2||(S2=1,Ng.exports=m4()),Ng.exports}var Rg={exports:{}},Gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x2;function g4(){if(x2)return Gn;x2=1;var t=Fh();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,g){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:d,containerInfo:f,implementation:g}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Gn.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,g)},Gn.flushSync=function(d){var f=l.T,g=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=f,r.p=g,r.d.f()}},Gn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(d,f))},Gn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Gn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,E=h(g,f.crossOrigin),T=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?r.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:b}):g==="script"&&r.d.X(d,{crossOrigin:E,integrity:T,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Gn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=h(f.as,f.crossOrigin);r.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(d)},Gn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,E=h(g,f.crossOrigin);r.d.L(d,g,{crossOrigin:E,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Gn.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=h(f.as,f.crossOrigin);r.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(d)},Gn.requestFormReset=function(d){r.d.r(d)},Gn.unstable_batchedUpdates=function(d,f){return d(f)},Gn.useFormState=function(d,f,g){return l.H.useFormState(d,f,g)},Gn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Gn.version="19.1.0",Gn}var w2;function hx(){if(w2)return Rg.exports;w2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rg.exports=g4(),Rg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C2;function y4(){if(C2)return Uc;C2=1;var t=p4(),e=Fh(),n=hx();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function l(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function h(i){if(o(i)!==i)throw Error(r(188))}function d(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var u=i,c=a;;){var p=u.return;if(p===null)break;var y=p.alternate;if(y===null){if(c=p.return,c!==null){u=c;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===u)return h(p),i;if(y===c)return h(p),a;y=y.sibling}throw Error(r(188))}if(u.return!==c.return)u=p,c=y;else{for(var x=!1,L=p.child;L;){if(L===u){x=!0,u=p,c=y;break}if(L===c){x=!0,c=p,u=y;break}L=L.sibling}if(!x){for(L=y.child;L;){if(L===u){x=!0,u=y,c=p;break}if(L===c){x=!0,c=y,u=p;break}L=L.sibling}if(!x)throw Error(r(189))}}if(u.alternate!==c)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?i:a}function f(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=f(i),a!==null)return a;i=i.sibling}return null}var g=Object.assign,E=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),Y=Symbol.for("react.consumer"),K=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function V(i){return i===null||typeof i!="object"?null:(i=P&&i[P]||i["@@iterator"],typeof i=="function"?i:null)}var w=Symbol.for("react.client.reference");function D(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===w?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case U:return"Profiler";case k:return"StrictMode";case te:return"Suspense";case G:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case K:return(i.displayName||"Context")+".Provider";case Y:return(i._context.displayName||"Context")+".Consumer";case q:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case H:return a=i.displayName||null,a!==null?a:D(i.type)||"Memo";case C:a=i._payload,i=i._init;try{return D(i(a))}catch{}}return null}var Q=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},ne=[],A=-1;function J(i){return{current:i}}function ae(i){0>A||(i.current=ne[A],ne[A]=null,A--)}function O(i,a){A++,ne[A]=i.current,i.current=a}var ge=J(null),Ie=J(null),xe=J(null),Ve=J(null);function Pe(i,a){switch(O(xe,a),O(Ie,i),O(ge,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?$b(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=$b(a),i=Kb(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ae(ge),O(ge,i)}function tt(){ae(ge),ae(Ie),ae(xe)}function We(i){i.memoizedState!==null&&O(Ve,i);var a=ge.current,u=Kb(a,i.type);a!==u&&(O(Ie,i),O(ge,u))}function kt(i){Ie.current===i&&(ae(ge),ae(Ie)),Ve.current===i&&(ae(Ve),Dc._currentValue=se)}var Kt=Object.prototype.hasOwnProperty,rn=t.unstable_scheduleCallback,Qt=t.unstable_cancelCallback,xt=t.unstable_shouldYield,xn=t.unstable_requestPaint,Ze=t.unstable_now,Ue=t.unstable_getCurrentPriorityLevel,Xt=t.unstable_ImmediatePriority,Mn=t.unstable_UserBlockingPriority,er=t.unstable_NormalPriority,Fr=t.unstable_LowPriority,tr=t.unstable_IdlePriority,Pn=t.log,Tr=t.unstable_setDisableYieldValue,de=null,_e=null;function Oe(i){if(typeof Pn=="function"&&Tr(i),_e&&typeof _e.setStrictMode=="function")try{_e.setStrictMode(de,i)}catch{}}var Be=Math.clz32?Math.clz32:Dt,it=Math.log,gt=Math.LN2;function Dt(i){return i>>>=0,i===0?32:31-(it(i)/gt|0)|0}var Ut=256,sn=4194304;function Ft(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Et(i,a,u){var c=i.pendingLanes;if(c===0)return 0;var p=0,y=i.suspendedLanes,x=i.pingedLanes;i=i.warmLanes;var L=c&134217727;return L!==0?(c=L&~y,c!==0?p=Ft(c):(x&=L,x!==0?p=Ft(x):u||(u=L&~i,u!==0&&(p=Ft(u))))):(L=c&~y,L!==0?p=Ft(L):x!==0?p=Ft(x):u||(u=c&~i,u!==0&&(p=Ft(u)))),p===0?0:a!==0&&a!==p&&(a&y)===0&&(y=p&-p,u=a&-a,y>=u||y===32&&(u&4194048)!==0)?a:p}function Wt(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function En(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function as(){var i=Ut;return Ut<<=1,(Ut&4194048)===0&&(Ut=256),i}function ci(){var i=sn;return sn<<=1,(sn&62914560)===0&&(sn=4194304),i}function br(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function zr(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function vr(i,a,u,c,p,y){var x=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var L=i.entanglements,W=i.expirationTimes,ce=i.hiddenUpdates;for(u=x&~u;0<u;){var ye=31-Be(u),be=1<<ye;L[ye]=0,W[ye]=-1;var he=ce[ye];if(he!==null)for(ce[ye]=null,ye=0;ye<he.length;ye++){var fe=he[ye];fe!==null&&(fe.lane&=-536870913)}u&=~be}c!==0&&jr(i,c,0),y!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=y&~(x&~a))}function jr(i,a,u){i.pendingLanes|=a,i.suspendedLanes&=~a;var c=31-Be(a);i.entangledLanes|=a,i.entanglements[c]=i.entanglements[c]|1073741824|u&4194090}function $a(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var c=31-Be(u),p=1<<c;p&a|i[c]&a&&(i[c]|=a),u&=~p}}function xi(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Fs(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function wi(){var i=Z.p;return i!==0?i:(i=window.event,i===void 0?32:f2(i.type))}function Ko(i,a){var u=Z.p;try{return Z.p=i,a()}finally{Z.p=u}}var Ot=Math.random().toString(36).slice(2),an="__reactFiber$"+Ot,Zt="__reactProps$"+Ot,or="__reactContainer$"+Ot,Ka="__reactEvents$"+Ot,Ul="__reactListeners$"+Ot,Ci="__reactHandles$"+Ot,Qo="__reactResources$"+Ot,os="__reactMarker$"+Ot;function Ni(i){delete i[an],delete i[Zt],delete i[Ka],delete i[Ul],delete i[Ci]}function qr(i){var a=i[an];if(a)return a;for(var u=i.parentNode;u;){if(a=u[or]||u[an]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=Zb(i);i!==null;){if(u=i[an])return u;i=Zb(i)}return a}i=u,u=i.parentNode}return null}function Yr(i){if(i=i[an]||i[or]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Gr(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function Bn(i){var a=i[Qo];return a||(a=i[Qo]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function qt(i){i[os]=!0}var Qa=new Set,zs={};function Ar(i,a){hi(i,a),hi(i+"Capture",a)}function hi(i,a){for(zs[i]=a,i=0;i<a.length;i++)Qa.add(a[i])}var Xa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xo={},us={};function Wo(i){return Kt.call(us,i)?!0:Kt.call(Xo,i)?!1:Xa.test(i)?us[i]=!0:(Xo[i]=!0,!1)}function Ii(i,a,u){if(Wo(a))if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+u)}}function $r(i,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+u)}}function _n(i,a,u,c){if(c===null)i.removeAttribute(u);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(a,u,""+c)}}var Ri,Zo;function di(i){if(Ri===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Ri=a&&a[1]||"",Zo=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ri+i+Zo}var js=!1;function ki(i,a){if(!i||js)return"";js=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(fe){var he=fe}Reflect.construct(i,[],be)}else{try{be.call()}catch(fe){he=fe}i.call(be.prototype)}}else{try{throw Error()}catch(fe){he=fe}(be=i())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(fe){if(fe&&he&&typeof fe.stack=="string")return[fe.stack,he.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),x=y[0],L=y[1];if(x&&L){var W=x.split(`
`),ce=L.split(`
`);for(p=c=0;c<W.length&&!W[c].includes("DetermineComponentFrameRoot");)c++;for(;p<ce.length&&!ce[p].includes("DetermineComponentFrameRoot");)p++;if(c===W.length||p===ce.length)for(c=W.length-1,p=ce.length-1;1<=c&&0<=p&&W[c]!==ce[p];)p--;for(;1<=c&&0<=p;c--,p--)if(W[c]!==ce[p]){if(c!==1||p!==1)do if(c--,p--,0>p||W[c]!==ce[p]){var ye=`
`+W[c].replace(" at new "," at ");return i.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",i.displayName)),ye}while(1<=c&&0<=p);break}}}finally{js=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?di(u):""}function Hl(i){switch(i.tag){case 26:case 27:case 5:return di(i.type);case 16:return di("Lazy");case 13:return di("Suspense");case 19:return di("SuspenseList");case 0:case 15:return ki(i.type,!1);case 11:return ki(i.type.render,!1);case 1:return ki(i.type,!0);case 31:return di("Activity");default:return""}}function Jo(i){try{var a="";do a+=Hl(i),i=i.return;while(i);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function nr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Vl(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Im(i){var a=Vl(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),c=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return p.call(this)},set:function(x){c=""+x,y.call(this,x)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function eu(i){i._valueTracker||(i._valueTracker=Im(i))}function Fl(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),c="";return i&&(c=Vl(i)?i.checked?"true":"false":i.value),i=c,i!==u?(a.setValue(i),!0):!1}function Wa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Rm=/[\n"\\]/g;function hn(i){return i.replace(Rm,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Sr(i,a,u,c,p,y,x,L){i.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.type=x:i.removeAttribute("type"),a!=null?x==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+nr(a)):i.value!==""+nr(a)&&(i.value=""+nr(a)):x!=="submit"&&x!=="reset"||i.removeAttribute("value"),a!=null?qs(i,x,nr(a)):u!=null?qs(i,x,nr(u)):c!=null&&i.removeAttribute("value"),p==null&&y!=null&&(i.defaultChecked=!!y),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?i.name=""+nr(L):i.removeAttribute("name")}function Za(i,a,u,c,p,y,x,L){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),a!=null||u!=null){if(!(y!=="submit"&&y!=="reset"||a!=null))return;u=u!=null?""+nr(u):"",a=a!=null?""+nr(a):u,L||a===i.value||(i.value=a),i.defaultValue=a}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=L?i.checked:!!c,i.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.name=x)}function qs(i,a,u){a==="number"&&Wa(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function ls(i,a,u,c){if(i=i.options,a){a={};for(var p=0;p<u.length;p++)a["$"+u[p]]=!0;for(u=0;u<i.length;u++)p=a.hasOwnProperty("$"+i[u].value),i[u].selected!==p&&(i[u].selected=p),p&&c&&(i[u].defaultSelected=!0)}else{for(u=""+nr(u),a=null,p=0;p<i.length;p++){if(i[p].value===u){i[p].selected=!0,c&&(i[p].defaultSelected=!0);return}a!==null||i[p].disabled||(a=i[p])}a!==null&&(a.selected=!0)}}function wt(i,a,u){if(a!=null&&(a=""+nr(a),a!==i.value&&(i.value=a),u==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=u!=null?""+nr(u):""}function Ja(i,a,u,c){if(a==null){if(c!=null){if(u!=null)throw Error(r(92));if(Q(c)){if(1<c.length)throw Error(r(93));c=c[0]}u=c}u==null&&(u=""),a=u}u=nr(a),i.defaultValue=u,c=i.textContent,c===u&&c!==""&&c!==null&&(i.value=c)}function Kr(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var eo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ld(i,a,u){var c=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?c?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":c?i.setProperty(a,u):typeof u!="number"||u===0||eo.has(a)?a==="float"?i.cssFloat=u:i[a]=(""+u).trim():i[a]=u+"px"}function zl(i,a,u){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,u!=null){for(var c in u)!u.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var p in a)c=a[p],a.hasOwnProperty(p)&&u[p]!==c&&ld(i,p,c)}else for(var y in a)a.hasOwnProperty(y)&&ld(i,y,a[y])}function jl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var km=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tu(i){return Dm.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var cs=null;function Qr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var hs=null,ds=null;function ql(i){var a=Yr(i);if(a&&(i=a.stateNode)){var u=i[Zt]||null;e:switch(i=a.stateNode,a.type){case"input":if(Sr(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+hn(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var c=u[a];if(c!==i&&c.form===i.form){var p=c[Zt]||null;if(!p)throw Error(r(90));Sr(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<u.length;a++)c=u[a],c.form===i.form&&Fl(c)}break e;case"textarea":wt(i,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&ls(i,!!u.multiple,a,!1)}}}var Di=!1;function cd(i,a,u){if(Di)return i(a,u);Di=!0;try{var c=i(a);return c}finally{if(Di=!1,(hs!==null||ds!==null)&&(rf(),hs&&(a=hs,i=ds,ds=hs=null,ql(a),i)))for(a=0;a<i.length;a++)ql(i[a])}}function to(i,a){var u=i.stateNode;if(u===null)return null;var c=u[Zt]||null;if(c===null)return null;u=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(r(231,a,typeof u));return u}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xr=!1;if(fi)try{var no={};Object.defineProperty(no,"passive",{get:function(){Xr=!0}}),window.addEventListener("test",no,no),window.removeEventListener("test",no,no)}catch{Xr=!1}var Oi=null,Ys=null,fs=null;function Yl(){if(fs)return fs;var i,a=Ys,u=a.length,c,p="value"in Oi?Oi.value:Oi.textContent,y=p.length;for(i=0;i<u&&a[i]===p[i];i++);var x=u-i;for(c=1;c<=x&&a[u-c]===p[y-c];c++);return fs=p.slice(i,1<c?1-c:void 0)}function Li(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Mi(){return!0}function Gl(){return!1}function wn(i){function a(u,c,p,y,x){this._reactName=u,this._targetInst=p,this.type=c,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(u=i[L],this[L]=u?u(y):y[L]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Mi:Gl,this.isPropagationStopped=Gl,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Mi)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Mi)},persist:function(){},isPersistent:Mi}),a}var bt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nu=wn(bt),ro=g({},bt,{view:0,detail:0}),hd=wn(ro),ru,iu,Pi,io=g({},ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Pi&&(Pi&&i.type==="mousemove"?(ru=i.screenX-Pi.screenX,iu=i.screenY-Pi.screenY):iu=ru=0,Pi=i),ru)},movementY:function(i){return"movementY"in i?i.movementY:iu}}),Wr=wn(io),dd=g({},io,{dataTransfer:0}),Om=wn(dd),so=g({},ro,{relatedTarget:0}),su=wn(so),$l=g({},bt,{animationName:0,elapsedTime:0,pseudoElement:0}),au=wn($l),fd=g({},bt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ou=wn(fd),Lm=g({},bt,{data:0}),Kl=wn(Lm),ao={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},md={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ql(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=pd[i])?!!a[i]:!1}function oo(){return Ql}var gd=g({},ro,{key:function(i){if(i.key){var a=ao[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Li(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?md[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oo,charCode:function(i){return i.type==="keypress"?Li(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Li(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),uu=wn(gd),yd=g({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xl=wn(yd),ms=g({},ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oo}),Ed=wn(ms),_d=g({},bt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Td=wn(_d),bd=g({},io,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),lu=wn(bd),rr=g({},bt,{newState:0,oldState:0}),vd=wn(rr),Ad=[9,13,27,32],Bi=fi&&"CompositionEvent"in window,m=null;fi&&"documentMode"in document&&(m=document.documentMode);var v=fi&&"TextEvent"in window&&!m,S=fi&&(!Bi||m&&8<m&&11>=m),F=" ",oe=!1;function me(i,a){switch(i){case"keyup":return Ad.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Re(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var dt=!1;function Tn(i,a){switch(i){case"compositionend":return Re(a);case"keypress":return a.which!==32?null:(oe=!0,F);case"textInput":return i=a.data,i===F&&oe?null:i;default:return null}}function ft(i,a){if(dt)return i==="compositionend"||!Bi&&me(i,a)?(i=Yl(),fs=Ys=Oi=null,dt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return S&&a.locale!=="ko"?null:a.data;default:return null}}var Cn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bn(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Cn[i.type]:a==="textarea"}function ps(i,a,u,c){hs?ds?ds.push(c):ds=[c]:hs=c,a=cf(a,"onChange"),0<a.length&&(u=new nu("onChange","change",null,u,c),i.push({event:u,listeners:a}))}var Un=null,Ui=null;function Wl(i){zb(i,0)}function Sd(i){var a=Gr(i);if(Fl(a))return i}function l_(i,a){if(i==="change")return a}var c_=!1;if(fi){var Mm;if(fi){var Pm="oninput"in document;if(!Pm){var h_=document.createElement("div");h_.setAttribute("oninput","return;"),Pm=typeof h_.oninput=="function"}Mm=Pm}else Mm=!1;c_=Mm&&(!document.documentMode||9<document.documentMode)}function d_(){Un&&(Un.detachEvent("onpropertychange",f_),Ui=Un=null)}function f_(i){if(i.propertyName==="value"&&Sd(Ui)){var a=[];ps(a,Ui,i,Qr(i)),cd(Wl,a)}}function F3(i,a,u){i==="focusin"?(d_(),Un=a,Ui=u,Un.attachEvent("onpropertychange",f_)):i==="focusout"&&d_()}function z3(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Sd(Ui)}function j3(i,a){if(i==="click")return Sd(a)}function q3(i,a){if(i==="input"||i==="change")return Sd(a)}function Y3(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var xr=typeof Object.is=="function"?Object.is:Y3;function Zl(i,a){if(xr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),c=Object.keys(a);if(u.length!==c.length)return!1;for(c=0;c<u.length;c++){var p=u[c];if(!Kt.call(a,p)||!xr(i[p],a[p]))return!1}return!0}function m_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function p_(i,a){var u=m_(i);i=0;for(var c;u;){if(u.nodeType===3){if(c=i+u.textContent.length,i<=a&&c>=a)return{node:u,offset:a-i};i=c}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=m_(u)}}function g_(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?g_(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function y_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Wa(i.document);a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=Wa(i.document)}return a}function Bm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var G3=fi&&"documentMode"in document&&11>=document.documentMode,cu=null,Um=null,Jl=null,Hm=!1;function E_(i,a,u){var c=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Hm||cu==null||cu!==Wa(c)||(c=cu,"selectionStart"in c&&Bm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Jl&&Zl(Jl,c)||(Jl=c,c=cf(Um,"onSelect"),0<c.length&&(a=new nu("onSelect","select",null,a,u),i.push({event:a,listeners:c}),a.target=cu)))}function uo(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var hu={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionrun:uo("Transition","TransitionRun"),transitionstart:uo("Transition","TransitionStart"),transitioncancel:uo("Transition","TransitionCancel"),transitionend:uo("Transition","TransitionEnd")},Vm={},__={};fi&&(__=document.createElement("div").style,"AnimationEvent"in window||(delete hu.animationend.animation,delete hu.animationiteration.animation,delete hu.animationstart.animation),"TransitionEvent"in window||delete hu.transitionend.transition);function lo(i){if(Vm[i])return Vm[i];if(!hu[i])return i;var a=hu[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in __)return Vm[i]=a[u];return i}var T_=lo("animationend"),b_=lo("animationiteration"),v_=lo("animationstart"),$3=lo("transitionrun"),K3=lo("transitionstart"),Q3=lo("transitioncancel"),A_=lo("transitionend"),S_=new Map,Fm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fm.push("scrollEnd");function mi(i,a){S_.set(i,a),Ar(a,[i])}var x_=new WeakMap;function Zr(i,a){if(typeof i=="object"&&i!==null){var u=x_.get(i);return u!==void 0?u:(a={value:i,source:a,stack:Jo(a)},x_.set(i,a),a)}return{value:i,source:a,stack:Jo(a)}}var Jr=[],du=0,zm=0;function xd(){for(var i=du,a=zm=du=0;a<i;){var u=Jr[a];Jr[a++]=null;var c=Jr[a];Jr[a++]=null;var p=Jr[a];Jr[a++]=null;var y=Jr[a];if(Jr[a++]=null,c!==null&&p!==null){var x=c.pending;x===null?p.next=p:(p.next=x.next,x.next=p),c.pending=p}y!==0&&w_(u,p,y)}}function wd(i,a,u,c){Jr[du++]=i,Jr[du++]=a,Jr[du++]=u,Jr[du++]=c,zm|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function jm(i,a,u,c){return wd(i,a,u,c),Cd(i)}function fu(i,a){return wd(i,null,null,a),Cd(i)}function w_(i,a,u){i.lanes|=u;var c=i.alternate;c!==null&&(c.lanes|=u);for(var p=!1,y=i.return;y!==null;)y.childLanes|=u,c=y.alternate,c!==null&&(c.childLanes|=u),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(p=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,p&&a!==null&&(p=31-Be(u),i=y.hiddenUpdates,c=i[p],c===null?i[p]=[a]:c.push(a),a.lane=u|536870912),y):null}function Cd(i){if(50<Sc)throw Sc=0,Qp=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var mu={};function X3(i,a,u,c){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(i,a,u,c){return new X3(i,a,u,c)}function qm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function gs(i,a){var u=i.alternate;return u===null?(u=wr(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function C_(i,a){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,a=u.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Nd(i,a,u,c,p,y){var x=0;if(c=i,typeof i=="function")qm(i)&&(x=1);else if(typeof i=="string")x=ZR(i,u,ge.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case I:return i=wr(31,u,a,p),i.elementType=I,i.lanes=y,i;case N:return co(u.children,p,y,a);case k:x=8,p|=24;break;case U:return i=wr(12,u,a,p|2),i.elementType=U,i.lanes=y,i;case te:return i=wr(13,u,a,p),i.elementType=te,i.lanes=y,i;case G:return i=wr(19,u,a,p),i.elementType=G,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:case K:x=10;break e;case Y:x=9;break e;case q:x=11;break e;case H:x=14;break e;case C:x=16,c=null;break e}x=29,u=Error(r(130,i===null?"null":typeof i,"")),c=null}return a=wr(x,u,a,p),a.elementType=i,a.type=c,a.lanes=y,a}function co(i,a,u,c){return i=wr(7,i,c,a),i.lanes=u,i}function Ym(i,a,u){return i=wr(6,i,null,a),i.lanes=u,i}function Gm(i,a,u){return a=wr(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var pu=[],gu=0,Id=null,Rd=0,ei=[],ti=0,ho=null,ys=1,Es="";function fo(i,a){pu[gu++]=Rd,pu[gu++]=Id,Id=i,Rd=a}function N_(i,a,u){ei[ti++]=ys,ei[ti++]=Es,ei[ti++]=ho,ho=i;var c=ys;i=Es;var p=32-Be(c)-1;c&=~(1<<p),u+=1;var y=32-Be(a)+p;if(30<y){var x=p-p%5;y=(c&(1<<x)-1).toString(32),c>>=x,p-=x,ys=1<<32-Be(a)+p|u<<p|c,Es=y+i}else ys=1<<y|u<<p|c,Es=i}function $m(i){i.return!==null&&(fo(i,1),N_(i,1,0))}function Km(i){for(;i===Id;)Id=pu[--gu],pu[gu]=null,Rd=pu[--gu],pu[gu]=null;for(;i===ho;)ho=ei[--ti],ei[ti]=null,Es=ei[--ti],ei[ti]=null,ys=ei[--ti],ei[ti]=null}var ir=null,Jt=null,_t=!1,mo=null,Hi=!1,Qm=Error(r(519));function po(i){var a=Error(r(418,""));throw nc(Zr(a,i)),Qm}function I_(i){var a=i.stateNode,u=i.type,c=i.memoizedProps;switch(a[an]=i,a[Zt]=c,u){case"dialog":lt("cancel",a),lt("close",a);break;case"iframe":case"object":case"embed":lt("load",a);break;case"video":case"audio":for(u=0;u<wc.length;u++)lt(wc[u],a);break;case"source":lt("error",a);break;case"img":case"image":case"link":lt("error",a),lt("load",a);break;case"details":lt("toggle",a);break;case"input":lt("invalid",a),Za(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),eu(a);break;case"select":lt("invalid",a);break;case"textarea":lt("invalid",a),Ja(a,c.value,c.defaultValue,c.children),eu(a)}u=c.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||c.suppressHydrationWarning===!0||Gb(a.textContent,u)?(c.popover!=null&&(lt("beforetoggle",a),lt("toggle",a)),c.onScroll!=null&&lt("scroll",a),c.onScrollEnd!=null&&lt("scrollend",a),c.onClick!=null&&(a.onclick=hf),a=!0):a=!1,a||po(i)}function R_(i){for(ir=i.return;ir;)switch(ir.tag){case 5:case 13:Hi=!1;return;case 27:case 3:Hi=!0;return;default:ir=ir.return}}function ec(i){if(i!==ir)return!1;if(!_t)return R_(i),_t=!0,!1;var a=i.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||hg(i.type,i.memoizedProps)),u=!u),u&&Jt&&po(i),R_(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(u=i.data,u==="/$"){if(a===0){Jt=gi(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++;i=i.nextSibling}Jt=null}}else a===27?(a=Jt,oa(i.type)?(i=pg,pg=null,Jt=i):Jt=a):Jt=ir?gi(i.stateNode.nextSibling):null;return!0}function tc(){Jt=ir=null,_t=!1}function k_(){var i=mo;return i!==null&&(cr===null?cr=i:cr.push.apply(cr,i),mo=null),i}function nc(i){mo===null?mo=[i]:mo.push(i)}var Xm=J(null),go=null,_s=null;function Gs(i,a,u){O(Xm,a._currentValue),a._currentValue=u}function Ts(i){i._currentValue=Xm.current,ae(Xm)}function Wm(i,a,u){for(;i!==null;){var c=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),i===u)break;i=i.return}}function Zm(i,a,u,c){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var y=p.dependencies;if(y!==null){var x=p.child;y=y.firstContext;e:for(;y!==null;){var L=y;y=p;for(var W=0;W<a.length;W++)if(L.context===a[W]){y.lanes|=u,L=y.alternate,L!==null&&(L.lanes|=u),Wm(y.return,u,i),c||(x=null);break e}y=L.next}}else if(p.tag===18){if(x=p.return,x===null)throw Error(r(341));x.lanes|=u,y=x.alternate,y!==null&&(y.lanes|=u),Wm(x,u,i),x=null}else x=p.child;if(x!==null)x.return=p;else for(x=p;x!==null;){if(x===i){x=null;break}if(p=x.sibling,p!==null){p.return=x.return,x=p;break}x=x.return}p=x}}function rc(i,a,u,c){i=null;for(var p=a,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var x=p.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var L=p.type;xr(p.pendingProps.value,x.value)||(i!==null?i.push(L):i=[L])}}else if(p===Ve.current){if(x=p.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(Dc):i=[Dc])}p=p.return}i!==null&&Zm(a,i,u,c),a.flags|=262144}function kd(i){for(i=i.firstContext;i!==null;){if(!xr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function yo(i){go=i,_s=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Yn(i){return D_(go,i)}function Dd(i,a){return go===null&&yo(i),D_(i,a)}function D_(i,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},_s===null){if(i===null)throw Error(r(308));_s=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else _s=_s.next=a;return u}var W3=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(u,c){i.push(c)}};this.abort=function(){a.aborted=!0,i.forEach(function(u){return u()})}},Z3=t.unstable_scheduleCallback,J3=t.unstable_NormalPriority,vn={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jm(){return{controller:new W3,data:new Map,refCount:0}}function ic(i){i.refCount--,i.refCount===0&&Z3(J3,function(){i.controller.abort()})}var sc=null,ep=0,yu=0,Eu=null;function eR(i,a){if(sc===null){var u=sc=[];ep=0,yu=ng(),Eu={status:"pending",value:void 0,then:function(c){u.push(c)}}}return ep++,a.then(O_,O_),a}function O_(){if(--ep===0&&sc!==null){Eu!==null&&(Eu.status="fulfilled");var i=sc;sc=null,yu=0,Eu=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function tR(i,a){var u=[],c={status:"pending",value:null,reason:null,then:function(p){u.push(p)}};return i.then(function(){c.status="fulfilled",c.value=a;for(var p=0;p<u.length;p++)(0,u[p])(a)},function(p){for(c.status="rejected",c.reason=p,p=0;p<u.length;p++)(0,u[p])(void 0)}),c}var L_=z.S;z.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&eR(i,a),L_!==null&&L_(i,a)};var Eo=J(null);function tp(){var i=Eo.current;return i!==null?i:Lt.pooledCache}function Od(i,a){a===null?O(Eo,Eo.current):O(Eo,a.pool)}function M_(){var i=tp();return i===null?null:{parent:vn._currentValue,pool:i}}var ac=Error(r(460)),P_=Error(r(474)),Ld=Error(r(542)),np={then:function(){}};function B_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Md(){}function U_(i,a,u){switch(u=i[u],u===void 0?i.push(a):u!==a&&(a.then(Md,Md),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,V_(i),i;default:if(typeof a.status=="string")a.then(Md,Md);else{if(i=Lt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(c){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=c}},function(c){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,V_(i),i}throw oc=a,ac}}var oc=null;function H_(){if(oc===null)throw Error(r(459));var i=oc;return oc=null,i}function V_(i){if(i===ac||i===Ld)throw Error(r(483))}var $s=!1;function rp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ip(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ks(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Qs(i,a,u){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(At&2)!==0){var p=c.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),c.pending=a,a=Cd(i),w_(i,null,u),a}return wd(i,c,a,u),Cd(i)}function uc(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var c=a.lanes;c&=i.pendingLanes,u|=c,a.lanes=u,$a(i,u)}}function sp(i,a){var u=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,u===c)){var p=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var x={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};y===null?p=y=x:y=y.next=x,u=u.next}while(u!==null);y===null?p=y=a:y=y.next=a}else p=y=a;u={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}var ap=!1;function lc(){if(ap){var i=Eu;if(i!==null)throw i}}function cc(i,a,u,c){ap=!1;var p=i.updateQueue;$s=!1;var y=p.firstBaseUpdate,x=p.lastBaseUpdate,L=p.shared.pending;if(L!==null){p.shared.pending=null;var W=L,ce=W.next;W.next=null,x===null?y=ce:x.next=ce,x=W;var ye=i.alternate;ye!==null&&(ye=ye.updateQueue,L=ye.lastBaseUpdate,L!==x&&(L===null?ye.firstBaseUpdate=ce:L.next=ce,ye.lastBaseUpdate=W))}if(y!==null){var be=p.baseState;x=0,ye=ce=W=null,L=y;do{var he=L.lane&-536870913,fe=he!==L.lane;if(fe?(mt&he)===he:(c&he)===he){he!==0&&he===yu&&(ap=!0),ye!==null&&(ye=ye.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Ge=i,ze=L;he=a;var It=u;switch(ze.tag){case 1:if(Ge=ze.payload,typeof Ge=="function"){be=Ge.call(It,be,he);break e}be=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=ze.payload,he=typeof Ge=="function"?Ge.call(It,be,he):Ge,he==null)break e;be=g({},be,he);break e;case 2:$s=!0}}he=L.callback,he!==null&&(i.flags|=64,fe&&(i.flags|=8192),fe=p.callbacks,fe===null?p.callbacks=[he]:fe.push(he))}else fe={lane:he,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ye===null?(ce=ye=fe,W=be):ye=ye.next=fe,x|=he;if(L=L.next,L===null){if(L=p.shared.pending,L===null)break;fe=L,L=fe.next,fe.next=null,p.lastBaseUpdate=fe,p.shared.pending=null}}while(!0);ye===null&&(W=be),p.baseState=W,p.firstBaseUpdate=ce,p.lastBaseUpdate=ye,y===null&&(p.shared.lanes=0),ra|=x,i.lanes=x,i.memoizedState=be}}function F_(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function z_(i,a){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)F_(u[i],a)}var _u=J(null),Pd=J(0);function j_(i,a){i=Cs,O(Pd,i),O(_u,a),Cs=i|a.baseLanes}function op(){O(Pd,Cs),O(_u,_u.current)}function up(){Cs=Pd.current,ae(_u),ae(Pd)}var Xs=0,nt=null,Ct=null,dn=null,Bd=!1,Tu=!1,_o=!1,Ud=0,hc=0,bu=null,nR=0;function on(){throw Error(r(321))}function lp(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!xr(i[u],a[u]))return!1;return!0}function cp(i,a,u,c,p,y){return Xs=y,nt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,z.H=i===null||i.memoizedState===null?wT:CT,_o=!1,y=u(c,p),_o=!1,Tu&&(y=Y_(a,u,c,p)),q_(i),y}function q_(i){z.H=qd;var a=Ct!==null&&Ct.next!==null;if(Xs=0,dn=Ct=nt=null,Bd=!1,hc=0,bu=null,a)throw Error(r(300));i===null||Nn||(i=i.dependencies,i!==null&&kd(i)&&(Nn=!0))}function Y_(i,a,u,c){nt=i;var p=0;do{if(Tu&&(bu=null),hc=0,Tu=!1,25<=p)throw Error(r(301));if(p+=1,dn=Ct=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}z.H=lR,y=a(u,c)}while(Tu);return y}function rR(){var i=z.H,a=i.useState()[0];return a=typeof a.then=="function"?dc(a):a,i=i.useState()[0],(Ct!==null?Ct.memoizedState:null)!==i&&(nt.flags|=1024),a}function hp(){var i=Ud!==0;return Ud=0,i}function dp(i,a,u){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~u}function fp(i){if(Bd){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Bd=!1}Xs=0,dn=Ct=nt=null,Tu=!1,hc=Ud=0,bu=null}function ur(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?nt.memoizedState=dn=i:dn=dn.next=i,dn}function fn(){if(Ct===null){var i=nt.alternate;i=i!==null?i.memoizedState:null}else i=Ct.next;var a=dn===null?nt.memoizedState:dn.next;if(a!==null)dn=a,Ct=i;else{if(i===null)throw nt.alternate===null?Error(r(467)):Error(r(310));Ct=i,i={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},dn===null?nt.memoizedState=dn=i:dn=dn.next=i}return dn}function mp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dc(i){var a=hc;return hc+=1,bu===null&&(bu=[]),i=U_(bu,i,a),a=nt,(dn===null?a.memoizedState:dn.next)===null&&(a=a.alternate,z.H=a===null||a.memoizedState===null?wT:CT),i}function Hd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return dc(i);if(i.$$typeof===K)return Yn(i)}throw Error(r(438,String(i)))}function pp(i){var a=null,u=nt.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var c=nt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=mp(),nt.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(i),c=0;c<i;c++)u[c]=B;return a.index++,u}function bs(i,a){return typeof a=="function"?a(i):a}function Vd(i){var a=fn();return gp(a,Ct,i)}function gp(i,a,u){var c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=u;var p=i.baseQueue,y=c.pending;if(y!==null){if(p!==null){var x=p.next;p.next=y.next,y.next=x}a.baseQueue=p=y,c.pending=null}if(y=i.baseState,p===null)i.memoizedState=y;else{a=p.next;var L=x=null,W=null,ce=a,ye=!1;do{var be=ce.lane&-536870913;if(be!==ce.lane?(mt&be)===be:(Xs&be)===be){var he=ce.revertLane;if(he===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),be===yu&&(ye=!0);else if((Xs&he)===he){ce=ce.next,he===yu&&(ye=!0);continue}else be={lane:0,revertLane:ce.revertLane,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},W===null?(L=W=be,x=y):W=W.next=be,nt.lanes|=he,ra|=he;be=ce.action,_o&&u(y,be),y=ce.hasEagerState?ce.eagerState:u(y,be)}else he={lane:be,revertLane:ce.revertLane,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},W===null?(L=W=he,x=y):W=W.next=he,nt.lanes|=be,ra|=be;ce=ce.next}while(ce!==null&&ce!==a);if(W===null?x=y:W.next=L,!xr(y,i.memoizedState)&&(Nn=!0,ye&&(u=Eu,u!==null)))throw u;i.memoizedState=y,i.baseState=x,i.baseQueue=W,c.lastRenderedState=y}return p===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function yp(i){var a=fn(),u=a.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=i;var c=u.dispatch,p=u.pending,y=a.memoizedState;if(p!==null){u.pending=null;var x=p=p.next;do y=i(y,x.action),x=x.next;while(x!==p);xr(y,a.memoizedState)||(Nn=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),u.lastRenderedState=y}return[y,c]}function G_(i,a,u){var c=nt,p=fn(),y=_t;if(y){if(u===void 0)throw Error(r(407));u=u()}else u=a();var x=!xr((Ct||p).memoizedState,u);x&&(p.memoizedState=u,Nn=!0),p=p.queue;var L=Q_.bind(null,c,p,i);if(fc(2048,8,L,[i]),p.getSnapshot!==a||x||dn!==null&&dn.memoizedState.tag&1){if(c.flags|=2048,vu(9,Fd(),K_.bind(null,c,p,u,a),null),Lt===null)throw Error(r(349));y||(Xs&124)!==0||$_(c,a,u)}return u}function $_(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=nt.updateQueue,a===null?(a=mp(),nt.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function K_(i,a,u,c){a.value=u,a.getSnapshot=c,X_(a)&&W_(i)}function Q_(i,a,u){return u(function(){X_(a)&&W_(i)})}function X_(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!xr(i,u)}catch{return!0}}function W_(i){var a=fu(i,2);a!==null&&kr(a,i,2)}function Ep(i){var a=ur();if(typeof i=="function"){var u=i;if(i=u(),_o){Oe(!0);try{u()}finally{Oe(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:i},a}function Z_(i,a,u,c){return i.baseState=u,gp(i,Ct,typeof c=="function"?c:bs)}function iR(i,a,u,c,p){if(jd(i))throw Error(r(485));if(i=a.action,i!==null){var y={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){y.listeners.push(x)}};z.T!==null?u(!0):y.isTransition=!1,c(y),u=a.pending,u===null?(y.next=a.pending=y,J_(a,y)):(y.next=u.next,a.pending=u.next=y)}}function J_(i,a){var u=a.action,c=a.payload,p=i.state;if(a.isTransition){var y=z.T,x={};z.T=x;try{var L=u(p,c),W=z.S;W!==null&&W(x,L),eT(i,a,L)}catch(ce){_p(i,a,ce)}finally{z.T=y}}else try{y=u(p,c),eT(i,a,y)}catch(ce){_p(i,a,ce)}}function eT(i,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(c){tT(i,a,c)},function(c){return _p(i,a,c)}):tT(i,a,u)}function tT(i,a,u){a.status="fulfilled",a.value=u,nT(a),i.state=u,a=i.pending,a!==null&&(u=a.next,u===a?i.pending=null:(u=u.next,a.next=u,J_(i,u)))}function _p(i,a,u){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=u,nT(a),a=a.next;while(a!==c)}i.action=null}function nT(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function rT(i,a){return a}function iT(i,a){if(_t){var u=Lt.formState;if(u!==null){e:{var c=nt;if(_t){if(Jt){t:{for(var p=Jt,y=Hi;p.nodeType!==8;){if(!y){p=null;break t}if(p=gi(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Jt=gi(p.nextSibling),c=p.data==="F!";break e}}po(c)}c=!1}c&&(a=u[0])}}return u=ur(),u.memoizedState=u.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rT,lastRenderedState:a},u.queue=c,u=AT.bind(null,nt,c),c.dispatch=u,c=Ep(!1),y=Sp.bind(null,nt,!1,c.queue),c=ur(),p={state:a,dispatch:null,action:i,pending:null},c.queue=p,u=iR.bind(null,nt,p,y,u),p.dispatch=u,c.memoizedState=i,[a,u,!1]}function sT(i){var a=fn();return aT(a,Ct,i)}function aT(i,a,u){if(a=gp(i,a,rT)[0],i=Vd(bs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=dc(a)}catch(x){throw x===ac?Ld:x}else c=a;a=fn();var p=a.queue,y=p.dispatch;return u!==a.memoizedState&&(nt.flags|=2048,vu(9,Fd(),sR.bind(null,p,u),null)),[c,y,i]}function sR(i,a){i.action=a}function oT(i){var a=fn(),u=Ct;if(u!==null)return aT(a,u,i);fn(),a=a.memoizedState,u=fn();var c=u.queue.dispatch;return u.memoizedState=i,[a,c,!1]}function vu(i,a,u,c){return i={tag:i,create:u,deps:c,inst:a,next:null},a=nt.updateQueue,a===null&&(a=mp(),nt.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=i.next=i:(c=u.next,u.next=i,i.next=c,a.lastEffect=i),i}function Fd(){return{destroy:void 0,resource:void 0}}function uT(){return fn().memoizedState}function zd(i,a,u,c){var p=ur();c=c===void 0?null:c,nt.flags|=i,p.memoizedState=vu(1|a,Fd(),u,c)}function fc(i,a,u,c){var p=fn();c=c===void 0?null:c;var y=p.memoizedState.inst;Ct!==null&&c!==null&&lp(c,Ct.memoizedState.deps)?p.memoizedState=vu(a,y,u,c):(nt.flags|=i,p.memoizedState=vu(1|a,y,u,c))}function lT(i,a){zd(8390656,8,i,a)}function cT(i,a){fc(2048,8,i,a)}function hT(i,a){return fc(4,2,i,a)}function dT(i,a){return fc(4,4,i,a)}function fT(i,a){if(typeof a=="function"){i=i();var u=a(i);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function mT(i,a,u){u=u!=null?u.concat([i]):null,fc(4,4,fT.bind(null,a,i),u)}function Tp(){}function pT(i,a){var u=fn();a=a===void 0?null:a;var c=u.memoizedState;return a!==null&&lp(a,c[1])?c[0]:(u.memoizedState=[i,a],i)}function gT(i,a){var u=fn();a=a===void 0?null:a;var c=u.memoizedState;if(a!==null&&lp(a,c[1]))return c[0];if(c=i(),_o){Oe(!0);try{i()}finally{Oe(!1)}}return u.memoizedState=[c,a],c}function bp(i,a,u){return u===void 0||(Xs&1073741824)!==0?i.memoizedState=a:(i.memoizedState=u,i=_b(),nt.lanes|=i,ra|=i,u)}function yT(i,a,u,c){return xr(u,a)?u:_u.current!==null?(i=bp(i,u,c),xr(i,a)||(Nn=!0),i):(Xs&42)===0?(Nn=!0,i.memoizedState=u):(i=_b(),nt.lanes|=i,ra|=i,a)}function ET(i,a,u,c,p){var y=Z.p;Z.p=y!==0&&8>y?y:8;var x=z.T,L={};z.T=L,Sp(i,!1,a,u);try{var W=p(),ce=z.S;if(ce!==null&&ce(L,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ye=tR(W,c);mc(i,a,ye,Rr(i))}else mc(i,a,c,Rr(i))}catch(be){mc(i,a,{then:function(){},status:"rejected",reason:be},Rr())}finally{Z.p=y,z.T=x}}function aR(){}function vp(i,a,u,c){if(i.tag!==5)throw Error(r(476));var p=_T(i).queue;ET(i,p,a,se,u===null?aR:function(){return TT(i),u(c)})}function _T(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:se},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:u},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function TT(i){var a=_T(i).next.queue;mc(i,a,{},Rr())}function Ap(){return Yn(Dc)}function bT(){return fn().memoizedState}function vT(){return fn().memoizedState}function oR(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var u=Rr();i=Ks(u);var c=Qs(a,i,u);c!==null&&(kr(c,a,u),uc(c,a,u)),a={cache:Jm()},i.payload=a;return}a=a.return}}function uR(i,a,u){var c=Rr();u={lane:c,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},jd(i)?ST(a,u):(u=jm(i,a,u,c),u!==null&&(kr(u,i,c),xT(u,a,c)))}function AT(i,a,u){var c=Rr();mc(i,a,u,c)}function mc(i,a,u,c){var p={lane:c,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(jd(i))ST(a,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var x=a.lastRenderedState,L=y(x,u);if(p.hasEagerState=!0,p.eagerState=L,xr(L,x))return wd(i,a,p,0),Lt===null&&xd(),!1}catch{}finally{}if(u=jm(i,a,p,c),u!==null)return kr(u,i,c),xT(u,a,c),!0}return!1}function Sp(i,a,u,c){if(c={lane:2,revertLane:ng(),action:c,hasEagerState:!1,eagerState:null,next:null},jd(i)){if(a)throw Error(r(479))}else a=jm(i,u,c,2),a!==null&&kr(a,i,2)}function jd(i){var a=i.alternate;return i===nt||a!==null&&a===nt}function ST(i,a){Tu=Bd=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function xT(i,a,u){if((u&4194048)!==0){var c=a.lanes;c&=i.pendingLanes,u|=c,a.lanes=u,$a(i,u)}}var qd={readContext:Yn,use:Hd,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useLayoutEffect:on,useInsertionEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useSyncExternalStore:on,useId:on,useHostTransitionStatus:on,useFormState:on,useActionState:on,useOptimistic:on,useMemoCache:on,useCacheRefresh:on},wT={readContext:Yn,use:Hd,useCallback:function(i,a){return ur().memoizedState=[i,a===void 0?null:a],i},useContext:Yn,useEffect:lT,useImperativeHandle:function(i,a,u){u=u!=null?u.concat([i]):null,zd(4194308,4,fT.bind(null,a,i),u)},useLayoutEffect:function(i,a){return zd(4194308,4,i,a)},useInsertionEffect:function(i,a){zd(4,2,i,a)},useMemo:function(i,a){var u=ur();a=a===void 0?null:a;var c=i();if(_o){Oe(!0);try{i()}finally{Oe(!1)}}return u.memoizedState=[c,a],c},useReducer:function(i,a,u){var c=ur();if(u!==void 0){var p=u(a);if(_o){Oe(!0);try{u(a)}finally{Oe(!1)}}}else p=a;return c.memoizedState=c.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},c.queue=i,i=i.dispatch=uR.bind(null,nt,i),[c.memoizedState,i]},useRef:function(i){var a=ur();return i={current:i},a.memoizedState=i},useState:function(i){i=Ep(i);var a=i.queue,u=AT.bind(null,nt,a);return a.dispatch=u,[i.memoizedState,u]},useDebugValue:Tp,useDeferredValue:function(i,a){var u=ur();return bp(u,i,a)},useTransition:function(){var i=Ep(!1);return i=ET.bind(null,nt,i.queue,!0,!1),ur().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,u){var c=nt,p=ur();if(_t){if(u===void 0)throw Error(r(407));u=u()}else{if(u=a(),Lt===null)throw Error(r(349));(mt&124)!==0||$_(c,a,u)}p.memoizedState=u;var y={value:u,getSnapshot:a};return p.queue=y,lT(Q_.bind(null,c,y,i),[i]),c.flags|=2048,vu(9,Fd(),K_.bind(null,c,y,u,a),null),u},useId:function(){var i=ur(),a=Lt.identifierPrefix;if(_t){var u=Es,c=ys;u=(c&~(1<<32-Be(c)-1)).toString(32)+u,a=""+a+"R"+u,u=Ud++,0<u&&(a+="H"+u.toString(32)),a+=""}else u=nR++,a=""+a+"r"+u.toString(32)+"";return i.memoizedState=a},useHostTransitionStatus:Ap,useFormState:iT,useActionState:iT,useOptimistic:function(i){var a=ur();a.memoizedState=a.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Sp.bind(null,nt,!0,u),u.dispatch=a,[i,a]},useMemoCache:pp,useCacheRefresh:function(){return ur().memoizedState=oR.bind(null,nt)}},CT={readContext:Yn,use:Hd,useCallback:pT,useContext:Yn,useEffect:cT,useImperativeHandle:mT,useInsertionEffect:hT,useLayoutEffect:dT,useMemo:gT,useReducer:Vd,useRef:uT,useState:function(){return Vd(bs)},useDebugValue:Tp,useDeferredValue:function(i,a){var u=fn();return yT(u,Ct.memoizedState,i,a)},useTransition:function(){var i=Vd(bs)[0],a=fn().memoizedState;return[typeof i=="boolean"?i:dc(i),a]},useSyncExternalStore:G_,useId:bT,useHostTransitionStatus:Ap,useFormState:sT,useActionState:sT,useOptimistic:function(i,a){var u=fn();return Z_(u,Ct,i,a)},useMemoCache:pp,useCacheRefresh:vT},lR={readContext:Yn,use:Hd,useCallback:pT,useContext:Yn,useEffect:cT,useImperativeHandle:mT,useInsertionEffect:hT,useLayoutEffect:dT,useMemo:gT,useReducer:yp,useRef:uT,useState:function(){return yp(bs)},useDebugValue:Tp,useDeferredValue:function(i,a){var u=fn();return Ct===null?bp(u,i,a):yT(u,Ct.memoizedState,i,a)},useTransition:function(){var i=yp(bs)[0],a=fn().memoizedState;return[typeof i=="boolean"?i:dc(i),a]},useSyncExternalStore:G_,useId:bT,useHostTransitionStatus:Ap,useFormState:oT,useActionState:oT,useOptimistic:function(i,a){var u=fn();return Ct!==null?Z_(u,Ct,i,a):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:pp,useCacheRefresh:vT},Au=null,pc=0;function Yd(i){var a=pc;return pc+=1,Au===null&&(Au=[]),U_(Au,i,a)}function gc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Gd(i,a){throw a.$$typeof===E?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function NT(i){var a=i._init;return a(i._payload)}function IT(i){function a(re,ee){if(i){var ue=re.deletions;ue===null?(re.deletions=[ee],re.flags|=16):ue.push(ee)}}function u(re,ee){if(!i)return null;for(;ee!==null;)a(re,ee),ee=ee.sibling;return null}function c(re){for(var ee=new Map;re!==null;)re.key!==null?ee.set(re.key,re):ee.set(re.index,re),re=re.sibling;return ee}function p(re,ee){return re=gs(re,ee),re.index=0,re.sibling=null,re}function y(re,ee,ue){return re.index=ue,i?(ue=re.alternate,ue!==null?(ue=ue.index,ue<ee?(re.flags|=67108866,ee):ue):(re.flags|=67108866,ee)):(re.flags|=1048576,ee)}function x(re){return i&&re.alternate===null&&(re.flags|=67108866),re}function L(re,ee,ue,Te){return ee===null||ee.tag!==6?(ee=Ym(ue,re.mode,Te),ee.return=re,ee):(ee=p(ee,ue),ee.return=re,ee)}function W(re,ee,ue,Te){var Le=ue.type;return Le===N?ye(re,ee,ue.props.children,Te,ue.key):ee!==null&&(ee.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===C&&NT(Le)===ee.type)?(ee=p(ee,ue.props),gc(ee,ue),ee.return=re,ee):(ee=Nd(ue.type,ue.key,ue.props,null,re.mode,Te),gc(ee,ue),ee.return=re,ee)}function ce(re,ee,ue,Te){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ue.containerInfo||ee.stateNode.implementation!==ue.implementation?(ee=Gm(ue,re.mode,Te),ee.return=re,ee):(ee=p(ee,ue.children||[]),ee.return=re,ee)}function ye(re,ee,ue,Te,Le){return ee===null||ee.tag!==7?(ee=co(ue,re.mode,Te,Le),ee.return=re,ee):(ee=p(ee,ue),ee.return=re,ee)}function be(re,ee,ue){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=Ym(""+ee,re.mode,ue),ee.return=re,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case T:return ue=Nd(ee.type,ee.key,ee.props,null,re.mode,ue),gc(ue,ee),ue.return=re,ue;case b:return ee=Gm(ee,re.mode,ue),ee.return=re,ee;case C:var Te=ee._init;return ee=Te(ee._payload),be(re,ee,ue)}if(Q(ee)||V(ee))return ee=co(ee,re.mode,ue,null),ee.return=re,ee;if(typeof ee.then=="function")return be(re,Yd(ee),ue);if(ee.$$typeof===K)return be(re,Dd(re,ee),ue);Gd(re,ee)}return null}function he(re,ee,ue,Te){var Le=ee!==null?ee.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Le!==null?null:L(re,ee,""+ue,Te);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case T:return ue.key===Le?W(re,ee,ue,Te):null;case b:return ue.key===Le?ce(re,ee,ue,Te):null;case C:return Le=ue._init,ue=Le(ue._payload),he(re,ee,ue,Te)}if(Q(ue)||V(ue))return Le!==null?null:ye(re,ee,ue,Te,null);if(typeof ue.then=="function")return he(re,ee,Yd(ue),Te);if(ue.$$typeof===K)return he(re,ee,Dd(re,ue),Te);Gd(re,ue)}return null}function fe(re,ee,ue,Te,Le){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return re=re.get(ue)||null,L(ee,re,""+Te,Le);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case T:return re=re.get(Te.key===null?ue:Te.key)||null,W(ee,re,Te,Le);case b:return re=re.get(Te.key===null?ue:Te.key)||null,ce(ee,re,Te,Le);case C:var st=Te._init;return Te=st(Te._payload),fe(re,ee,ue,Te,Le)}if(Q(Te)||V(Te))return re=re.get(ue)||null,ye(ee,re,Te,Le,null);if(typeof Te.then=="function")return fe(re,ee,ue,Yd(Te),Le);if(Te.$$typeof===K)return fe(re,ee,ue,Dd(ee,Te),Le);Gd(ee,Te)}return null}function Ge(re,ee,ue,Te){for(var Le=null,st=null,He=ee,je=ee=0,Rn=null;He!==null&&je<ue.length;je++){He.index>je?(Rn=He,He=null):Rn=He.sibling;var yt=he(re,He,ue[je],Te);if(yt===null){He===null&&(He=Rn);break}i&&He&&yt.alternate===null&&a(re,He),ee=y(yt,ee,je),st===null?Le=yt:st.sibling=yt,st=yt,He=Rn}if(je===ue.length)return u(re,He),_t&&fo(re,je),Le;if(He===null){for(;je<ue.length;je++)He=be(re,ue[je],Te),He!==null&&(ee=y(He,ee,je),st===null?Le=He:st.sibling=He,st=He);return _t&&fo(re,je),Le}for(He=c(He);je<ue.length;je++)Rn=fe(He,re,je,ue[je],Te),Rn!==null&&(i&&Rn.alternate!==null&&He.delete(Rn.key===null?je:Rn.key),ee=y(Rn,ee,je),st===null?Le=Rn:st.sibling=Rn,st=Rn);return i&&He.forEach(function(da){return a(re,da)}),_t&&fo(re,je),Le}function ze(re,ee,ue,Te){if(ue==null)throw Error(r(151));for(var Le=null,st=null,He=ee,je=ee=0,Rn=null,yt=ue.next();He!==null&&!yt.done;je++,yt=ue.next()){He.index>je?(Rn=He,He=null):Rn=He.sibling;var da=he(re,He,yt.value,Te);if(da===null){He===null&&(He=Rn);break}i&&He&&da.alternate===null&&a(re,He),ee=y(da,ee,je),st===null?Le=da:st.sibling=da,st=da,He=Rn}if(yt.done)return u(re,He),_t&&fo(re,je),Le;if(He===null){for(;!yt.done;je++,yt=ue.next())yt=be(re,yt.value,Te),yt!==null&&(ee=y(yt,ee,je),st===null?Le=yt:st.sibling=yt,st=yt);return _t&&fo(re,je),Le}for(He=c(He);!yt.done;je++,yt=ue.next())yt=fe(He,re,je,yt.value,Te),yt!==null&&(i&&yt.alternate!==null&&He.delete(yt.key===null?je:yt.key),ee=y(yt,ee,je),st===null?Le=yt:st.sibling=yt,st=yt);return i&&He.forEach(function(c4){return a(re,c4)}),_t&&fo(re,je),Le}function It(re,ee,ue,Te){if(typeof ue=="object"&&ue!==null&&ue.type===N&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case T:e:{for(var Le=ue.key;ee!==null;){if(ee.key===Le){if(Le=ue.type,Le===N){if(ee.tag===7){u(re,ee.sibling),Te=p(ee,ue.props.children),Te.return=re,re=Te;break e}}else if(ee.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===C&&NT(Le)===ee.type){u(re,ee.sibling),Te=p(ee,ue.props),gc(Te,ue),Te.return=re,re=Te;break e}u(re,ee);break}else a(re,ee);ee=ee.sibling}ue.type===N?(Te=co(ue.props.children,re.mode,Te,ue.key),Te.return=re,re=Te):(Te=Nd(ue.type,ue.key,ue.props,null,re.mode,Te),gc(Te,ue),Te.return=re,re=Te)}return x(re);case b:e:{for(Le=ue.key;ee!==null;){if(ee.key===Le)if(ee.tag===4&&ee.stateNode.containerInfo===ue.containerInfo&&ee.stateNode.implementation===ue.implementation){u(re,ee.sibling),Te=p(ee,ue.children||[]),Te.return=re,re=Te;break e}else{u(re,ee);break}else a(re,ee);ee=ee.sibling}Te=Gm(ue,re.mode,Te),Te.return=re,re=Te}return x(re);case C:return Le=ue._init,ue=Le(ue._payload),It(re,ee,ue,Te)}if(Q(ue))return Ge(re,ee,ue,Te);if(V(ue)){if(Le=V(ue),typeof Le!="function")throw Error(r(150));return ue=Le.call(ue),ze(re,ee,ue,Te)}if(typeof ue.then=="function")return It(re,ee,Yd(ue),Te);if(ue.$$typeof===K)return It(re,ee,Dd(re,ue),Te);Gd(re,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint"?(ue=""+ue,ee!==null&&ee.tag===6?(u(re,ee.sibling),Te=p(ee,ue),Te.return=re,re=Te):(u(re,ee),Te=Ym(ue,re.mode,Te),Te.return=re,re=Te),x(re)):u(re,ee)}return function(re,ee,ue,Te){try{pc=0;var Le=It(re,ee,ue,Te);return Au=null,Le}catch(He){if(He===ac||He===Ld)throw He;var st=wr(29,He,null,re.mode);return st.lanes=Te,st.return=re,st}finally{}}}var Su=IT(!0),RT=IT(!1),ni=J(null),Vi=null;function Ws(i){var a=i.alternate;O(An,An.current&1),O(ni,i),Vi===null&&(a===null||_u.current!==null||a.memoizedState!==null)&&(Vi=i)}function kT(i){if(i.tag===22){if(O(An,An.current),O(ni,i),Vi===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(Vi=i)}}else Zs()}function Zs(){O(An,An.current),O(ni,ni.current)}function vs(i){ae(ni),Vi===i&&(Vi=null),ae(An)}var An=J(0);function $d(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||mg(u)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function xp(i,a,u,c){a=i.memoizedState,u=u(c,a),u=u==null?a:g({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var wp={enqueueSetState:function(i,a,u){i=i._reactInternals;var c=Rr(),p=Ks(c);p.payload=a,u!=null&&(p.callback=u),a=Qs(i,p,c),a!==null&&(kr(a,i,c),uc(a,i,c))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var c=Rr(),p=Ks(c);p.tag=1,p.payload=a,u!=null&&(p.callback=u),a=Qs(i,p,c),a!==null&&(kr(a,i,c),uc(a,i,c))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=Rr(),c=Ks(u);c.tag=2,a!=null&&(c.callback=a),a=Qs(i,c,u),a!==null&&(kr(a,i,u),uc(a,i,u))}};function DT(i,a,u,c,p,y,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,y,x):a.prototype&&a.prototype.isPureReactComponent?!Zl(u,c)||!Zl(p,y):!0}function OT(i,a,u,c){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,c),a.state!==i&&wp.enqueueReplaceState(a,a.state,null)}function To(i,a){var u=a;if("ref"in a){u={};for(var c in a)c!=="ref"&&(u[c]=a[c])}if(i=i.defaultProps){u===a&&(u=g({},u));for(var p in i)u[p]===void 0&&(u[p]=i[p])}return u}var Kd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function LT(i){Kd(i)}function MT(i){console.error(i)}function PT(i){Kd(i)}function Qd(i,a){try{var u=i.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function BT(i,a,u){try{var c=i.onCaughtError;c(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Cp(i,a,u){return u=Ks(u),u.tag=3,u.payload={element:null},u.callback=function(){Qd(i,a)},u}function UT(i){return i=Ks(i),i.tag=3,i}function HT(i,a,u,c){var p=u.type.getDerivedStateFromError;if(typeof p=="function"){var y=c.value;i.payload=function(){return p(y)},i.callback=function(){BT(a,u,c)}}var x=u.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(i.callback=function(){BT(a,u,c),typeof p!="function"&&(ia===null?ia=new Set([this]):ia.add(this));var L=c.stack;this.componentDidCatch(c.value,{componentStack:L!==null?L:""})})}function cR(i,a,u,c,p){if(u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=u.alternate,a!==null&&rc(a,u,p,!0),u=ni.current,u!==null){switch(u.tag){case 13:return Vi===null?Wp():u.alternate===null&&en===0&&(en=3),u.flags&=-257,u.flags|=65536,u.lanes=p,c===np?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([c]):a.add(c),Jp(i,c,p)),!1;case 22:return u.flags|=65536,c===np?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([c]):u.add(c)),Jp(i,c,p)),!1}throw Error(r(435,u.tag))}return Jp(i,c,p),Wp(),!1}if(_t)return a=ni.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,c!==Qm&&(i=Error(r(422),{cause:c}),nc(Zr(i,u)))):(c!==Qm&&(a=Error(r(423),{cause:c}),nc(Zr(a,u))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,c=Zr(c,u),p=Cp(i.stateNode,c,p),sp(i,p),en!==4&&(en=2)),!1;var y=Error(r(520),{cause:c});if(y=Zr(y,u),Ac===null?Ac=[y]:Ac.push(y),en!==4&&(en=2),a===null)return!0;c=Zr(c,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,i=p&-p,u.lanes|=i,i=Cp(u.stateNode,c,i),sp(u,i),!1;case 1:if(a=u.type,y=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ia===null||!ia.has(y))))return u.flags|=65536,p&=-p,u.lanes|=p,p=UT(p),HT(p,i,u,c),sp(u,p),!1}u=u.return}while(u!==null);return!1}var VT=Error(r(461)),Nn=!1;function Hn(i,a,u,c){a.child=i===null?RT(a,null,u,c):Su(a,i.child,u,c)}function FT(i,a,u,c,p){u=u.render;var y=a.ref;if("ref"in c){var x={};for(var L in c)L!=="ref"&&(x[L]=c[L])}else x=c;return yo(a),c=cp(i,a,u,x,y,p),L=hp(),i!==null&&!Nn?(dp(i,a,p),As(i,a,p)):(_t&&L&&$m(a),a.flags|=1,Hn(i,a,c,p),a.child)}function zT(i,a,u,c,p){if(i===null){var y=u.type;return typeof y=="function"&&!qm(y)&&y.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=y,jT(i,a,y,c,p)):(i=Nd(u.type,null,c,a,a.mode,p),i.ref=a.ref,i.return=a,a.child=i)}if(y=i.child,!Mp(i,p)){var x=y.memoizedProps;if(u=u.compare,u=u!==null?u:Zl,u(x,c)&&i.ref===a.ref)return As(i,a,p)}return a.flags|=1,i=gs(y,c),i.ref=a.ref,i.return=a,a.child=i}function jT(i,a,u,c,p){if(i!==null){var y=i.memoizedProps;if(Zl(y,c)&&i.ref===a.ref)if(Nn=!1,a.pendingProps=c=y,Mp(i,p))(i.flags&131072)!==0&&(Nn=!0);else return a.lanes=i.lanes,As(i,a,p)}return Np(i,a,u,c,p)}function qT(i,a,u){var c=a.pendingProps,p=c.children,y=i!==null?i.memoizedState:null;if(c.mode==="hidden"){if((a.flags&128)!==0){if(c=y!==null?y.baseLanes|u:u,i!==null){for(p=a.child=i.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;a.childLanes=y&~c}else a.childLanes=0,a.child=null;return YT(i,a,c,u)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Od(a,y!==null?y.cachePool:null),y!==null?j_(a,y):op(),kT(a);else return a.lanes=a.childLanes=536870912,YT(i,a,y!==null?y.baseLanes|u:u,u)}else y!==null?(Od(a,y.cachePool),j_(a,y),Zs(),a.memoizedState=null):(i!==null&&Od(a,null),op(),Zs());return Hn(i,a,p,u),a.child}function YT(i,a,u,c){var p=tp();return p=p===null?null:{parent:vn._currentValue,pool:p},a.memoizedState={baseLanes:u,cachePool:p},i!==null&&Od(a,null),op(),kT(a),i!==null&&rc(i,a,c,!0),null}function Xd(i,a){var u=a.ref;if(u===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(i===null||i.ref!==u)&&(a.flags|=4194816)}}function Np(i,a,u,c,p){return yo(a),u=cp(i,a,u,c,void 0,p),c=hp(),i!==null&&!Nn?(dp(i,a,p),As(i,a,p)):(_t&&c&&$m(a),a.flags|=1,Hn(i,a,u,p),a.child)}function GT(i,a,u,c,p,y){return yo(a),a.updateQueue=null,u=Y_(a,c,u,p),q_(i),c=hp(),i!==null&&!Nn?(dp(i,a,y),As(i,a,y)):(_t&&c&&$m(a),a.flags|=1,Hn(i,a,u,y),a.child)}function $T(i,a,u,c,p){if(yo(a),a.stateNode===null){var y=mu,x=u.contextType;typeof x=="object"&&x!==null&&(y=Yn(x)),y=new u(c,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=wp,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=c,y.state=a.memoizedState,y.refs={},rp(a),x=u.contextType,y.context=typeof x=="object"&&x!==null?Yn(x):mu,y.state=a.memoizedState,x=u.getDerivedStateFromProps,typeof x=="function"&&(xp(a,u,x,c),y.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(x=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),x!==y.state&&wp.enqueueReplaceState(y,y.state,null),cc(a,c,y,p),lc(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(i===null){y=a.stateNode;var L=a.memoizedProps,W=To(u,L);y.props=W;var ce=y.context,ye=u.contextType;x=mu,typeof ye=="object"&&ye!==null&&(x=Yn(ye));var be=u.getDerivedStateFromProps;ye=typeof be=="function"||typeof y.getSnapshotBeforeUpdate=="function",L=a.pendingProps!==L,ye||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(L||ce!==x)&&OT(a,y,c,x),$s=!1;var he=a.memoizedState;y.state=he,cc(a,c,y,p),lc(),ce=a.memoizedState,L||he!==ce||$s?(typeof be=="function"&&(xp(a,u,be,c),ce=a.memoizedState),(W=$s||DT(a,u,W,c,he,ce,x))?(ye||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=ce),y.props=c,y.state=ce,y.context=x,c=W):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{y=a.stateNode,ip(i,a),x=a.memoizedProps,ye=To(u,x),y.props=ye,be=a.pendingProps,he=y.context,ce=u.contextType,W=mu,typeof ce=="object"&&ce!==null&&(W=Yn(ce)),L=u.getDerivedStateFromProps,(ce=typeof L=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==be||he!==W)&&OT(a,y,c,W),$s=!1,he=a.memoizedState,y.state=he,cc(a,c,y,p),lc();var fe=a.memoizedState;x!==be||he!==fe||$s||i!==null&&i.dependencies!==null&&kd(i.dependencies)?(typeof L=="function"&&(xp(a,u,L,c),fe=a.memoizedState),(ye=$s||DT(a,u,ye,c,he,fe,W)||i!==null&&i.dependencies!==null&&kd(i.dependencies))?(ce||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,fe,W),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,fe,W)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||x===i.memoizedProps&&he===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&he===i.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=fe),y.props=c,y.state=fe,y.context=W,c=ye):(typeof y.componentDidUpdate!="function"||x===i.memoizedProps&&he===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&he===i.memoizedState||(a.flags|=1024),c=!1)}return y=c,Xd(i,a),c=(a.flags&128)!==0,y||c?(y=a.stateNode,u=c&&typeof u.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,i!==null&&c?(a.child=Su(a,i.child,null,p),a.child=Su(a,null,u,p)):Hn(i,a,u,p),a.memoizedState=y.state,i=a.child):i=As(i,a,p),i}function KT(i,a,u,c){return tc(),a.flags|=256,Hn(i,a,u,c),a.child}var Ip={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rp(i){return{baseLanes:i,cachePool:M_()}}function kp(i,a,u){return i=i!==null?i.childLanes&~u:0,a&&(i|=ri),i}function QT(i,a,u){var c=a.pendingProps,p=!1,y=(a.flags&128)!==0,x;if((x=y)||(x=i!==null&&i.memoizedState===null?!1:(An.current&2)!==0),x&&(p=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,i===null){if(_t){if(p?Ws(a):Zs(),_t){var L=Jt,W;if(W=L){e:{for(W=L,L=Hi;W.nodeType!==8;){if(!L){L=null;break e}if(W=gi(W.nextSibling),W===null){L=null;break e}}L=W}L!==null?(a.memoizedState={dehydrated:L,treeContext:ho!==null?{id:ys,overflow:Es}:null,retryLane:536870912,hydrationErrors:null},W=wr(18,null,null,0),W.stateNode=L,W.return=a,a.child=W,ir=a,Jt=null,W=!0):W=!1}W||po(a)}if(L=a.memoizedState,L!==null&&(L=L.dehydrated,L!==null))return mg(L)?a.lanes=32:a.lanes=536870912,null;vs(a)}return L=c.children,c=c.fallback,p?(Zs(),p=a.mode,L=Wd({mode:"hidden",children:L},p),c=co(c,p,u,null),L.return=a,c.return=a,L.sibling=c,a.child=L,p=a.child,p.memoizedState=Rp(u),p.childLanes=kp(i,x,u),a.memoizedState=Ip,c):(Ws(a),Dp(a,L))}if(W=i.memoizedState,W!==null&&(L=W.dehydrated,L!==null)){if(y)a.flags&256?(Ws(a),a.flags&=-257,a=Op(i,a,u)):a.memoizedState!==null?(Zs(),a.child=i.child,a.flags|=128,a=null):(Zs(),p=c.fallback,L=a.mode,c=Wd({mode:"visible",children:c.children},L),p=co(p,L,u,null),p.flags|=2,c.return=a,p.return=a,c.sibling=p,a.child=c,Su(a,i.child,null,u),c=a.child,c.memoizedState=Rp(u),c.childLanes=kp(i,x,u),a.memoizedState=Ip,a=p);else if(Ws(a),mg(L)){if(x=L.nextSibling&&L.nextSibling.dataset,x)var ce=x.dgst;x=ce,c=Error(r(419)),c.stack="",c.digest=x,nc({value:c,source:null,stack:null}),a=Op(i,a,u)}else if(Nn||rc(i,a,u,!1),x=(u&i.childLanes)!==0,Nn||x){if(x=Lt,x!==null&&(c=u&-u,c=(c&42)!==0?1:xi(c),c=(c&(x.suspendedLanes|u))!==0?0:c,c!==0&&c!==W.retryLane))throw W.retryLane=c,fu(i,c),kr(x,i,c),VT;L.data==="$?"||Wp(),a=Op(i,a,u)}else L.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=W.treeContext,Jt=gi(L.nextSibling),ir=a,_t=!0,mo=null,Hi=!1,i!==null&&(ei[ti++]=ys,ei[ti++]=Es,ei[ti++]=ho,ys=i.id,Es=i.overflow,ho=a),a=Dp(a,c.children),a.flags|=4096);return a}return p?(Zs(),p=c.fallback,L=a.mode,W=i.child,ce=W.sibling,c=gs(W,{mode:"hidden",children:c.children}),c.subtreeFlags=W.subtreeFlags&65011712,ce!==null?p=gs(ce,p):(p=co(p,L,u,null),p.flags|=2),p.return=a,c.return=a,c.sibling=p,a.child=c,c=p,p=a.child,L=i.child.memoizedState,L===null?L=Rp(u):(W=L.cachePool,W!==null?(ce=vn._currentValue,W=W.parent!==ce?{parent:ce,pool:ce}:W):W=M_(),L={baseLanes:L.baseLanes|u,cachePool:W}),p.memoizedState=L,p.childLanes=kp(i,x,u),a.memoizedState=Ip,c):(Ws(a),u=i.child,i=u.sibling,u=gs(u,{mode:"visible",children:c.children}),u.return=a,u.sibling=null,i!==null&&(x=a.deletions,x===null?(a.deletions=[i],a.flags|=16):x.push(i)),a.child=u,a.memoizedState=null,u)}function Dp(i,a){return a=Wd({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Wd(i,a){return i=wr(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Op(i,a,u){return Su(a,i.child,null,u),i=Dp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function XT(i,a,u){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a),Wm(i.return,a,u)}function Lp(i,a,u,c,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:u,tailMode:p}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=u,y.tailMode=p)}function WT(i,a,u){var c=a.pendingProps,p=c.revealOrder,y=c.tail;if(Hn(i,a,c.children,u),c=An.current,(c&2)!==0)c=c&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&XT(i,u,a);else if(i.tag===19)XT(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(O(An,c),p){case"forwards":for(u=a.child,p=null;u!==null;)i=u.alternate,i!==null&&$d(i)===null&&(p=u),u=u.sibling;u=p,u===null?(p=a.child,a.child=null):(p=u.sibling,u.sibling=null),Lp(a,!1,p,u,y);break;case"backwards":for(u=null,p=a.child,a.child=null;p!==null;){if(i=p.alternate,i!==null&&$d(i)===null){a.child=p;break}i=p.sibling,p.sibling=u,u=p,p=i}Lp(a,!0,u,null,y);break;case"together":Lp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function As(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),ra|=a.lanes,(u&a.childLanes)===0)if(i!==null){if(rc(i,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,u=gs(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=gs(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function Mp(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&kd(i)))}function hR(i,a,u){switch(a.tag){case 3:Pe(a,a.stateNode.containerInfo),Gs(a,vn,i.memoizedState.cache),tc();break;case 27:case 5:We(a);break;case 4:Pe(a,a.stateNode.containerInfo);break;case 10:Gs(a,a.type,a.memoizedProps.value);break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(Ws(a),a.flags|=128,null):(u&a.child.childLanes)!==0?QT(i,a,u):(Ws(a),i=As(i,a,u),i!==null?i.sibling:null);Ws(a);break;case 19:var p=(i.flags&128)!==0;if(c=(u&a.childLanes)!==0,c||(rc(i,a,u,!1),c=(u&a.childLanes)!==0),p){if(c)return WT(i,a,u);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),O(An,An.current),c)break;return null;case 22:case 23:return a.lanes=0,qT(i,a,u);case 24:Gs(a,vn,i.memoizedState.cache)}return As(i,a,u)}function ZT(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps)Nn=!0;else{if(!Mp(i,u)&&(a.flags&128)===0)return Nn=!1,hR(i,a,u);Nn=(i.flags&131072)!==0}else Nn=!1,_t&&(a.flags&1048576)!==0&&N_(a,Rd,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var c=a.elementType,p=c._init;if(c=p(c._payload),a.type=c,typeof c=="function")qm(c)?(i=To(c,i),a.tag=1,a=$T(null,a,c,i,u)):(a.tag=0,a=Np(null,a,c,i,u));else{if(c!=null){if(p=c.$$typeof,p===q){a.tag=11,a=FT(null,a,c,i,u);break e}else if(p===H){a.tag=14,a=zT(null,a,c,i,u);break e}}throw a=D(c)||c,Error(r(306,a,""))}}return a;case 0:return Np(i,a,a.type,a.pendingProps,u);case 1:return c=a.type,p=To(c,a.pendingProps),$T(i,a,c,p,u);case 3:e:{if(Pe(a,a.stateNode.containerInfo),i===null)throw Error(r(387));c=a.pendingProps;var y=a.memoizedState;p=y.element,ip(i,a),cc(a,c,null,u);var x=a.memoizedState;if(c=x.cache,Gs(a,vn,c),c!==y.cache&&Zm(a,[vn],u,!0),lc(),c=x.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=KT(i,a,c,u);break e}else if(c!==p){p=Zr(Error(r(424)),a),nc(p),a=KT(i,a,c,u);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Jt=gi(i.firstChild),ir=a,_t=!0,mo=null,Hi=!0,u=RT(a,null,c,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(tc(),c===p){a=As(i,a,u);break e}Hn(i,a,c,u)}a=a.child}return a;case 26:return Xd(i,a),i===null?(u=n2(a.type,null,a.pendingProps,null))?a.memoizedState=u:_t||(u=a.type,i=a.pendingProps,c=df(xe.current).createElement(u),c[an]=a,c[Zt]=i,Fn(c,u,i),qt(c),a.stateNode=c):a.memoizedState=n2(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return We(a),i===null&&_t&&(c=a.stateNode=Jb(a.type,a.pendingProps,xe.current),ir=a,Hi=!0,p=Jt,oa(a.type)?(pg=p,Jt=gi(c.firstChild)):Jt=p),Hn(i,a,a.pendingProps.children,u),Xd(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&_t&&((p=c=Jt)&&(c=HR(c,a.type,a.pendingProps,Hi),c!==null?(a.stateNode=c,ir=a,Jt=gi(c.firstChild),Hi=!1,p=!0):p=!1),p||po(a)),We(a),p=a.type,y=a.pendingProps,x=i!==null?i.memoizedProps:null,c=y.children,hg(p,y)?c=null:x!==null&&hg(p,x)&&(a.flags|=32),a.memoizedState!==null&&(p=cp(i,a,rR,null,null,u),Dc._currentValue=p),Xd(i,a),Hn(i,a,c,u),a.child;case 6:return i===null&&_t&&((i=u=Jt)&&(u=VR(u,a.pendingProps,Hi),u!==null?(a.stateNode=u,ir=a,Jt=null,i=!0):i=!1),i||po(a)),null;case 13:return QT(i,a,u);case 4:return Pe(a,a.stateNode.containerInfo),c=a.pendingProps,i===null?a.child=Su(a,null,c,u):Hn(i,a,c,u),a.child;case 11:return FT(i,a,a.type,a.pendingProps,u);case 7:return Hn(i,a,a.pendingProps,u),a.child;case 8:return Hn(i,a,a.pendingProps.children,u),a.child;case 12:return Hn(i,a,a.pendingProps.children,u),a.child;case 10:return c=a.pendingProps,Gs(a,a.type,c.value),Hn(i,a,c.children,u),a.child;case 9:return p=a.type._context,c=a.pendingProps.children,yo(a),p=Yn(p),c=c(p),a.flags|=1,Hn(i,a,c,u),a.child;case 14:return zT(i,a,a.type,a.pendingProps,u);case 15:return jT(i,a,a.type,a.pendingProps,u);case 19:return WT(i,a,u);case 31:return c=a.pendingProps,u=a.mode,c={mode:c.mode,children:c.children},i===null?(u=Wd(c,u),u.ref=a.ref,a.child=u,u.return=a,a=u):(u=gs(i.child,c),u.ref=a.ref,a.child=u,u.return=a,a=u),a;case 22:return qT(i,a,u);case 24:return yo(a),c=Yn(vn),i===null?(p=tp(),p===null&&(p=Lt,y=Jm(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=u),p=y),a.memoizedState={parent:c,cache:p},rp(a),Gs(a,vn,p)):((i.lanes&u)!==0&&(ip(i,a),cc(a,null,null,u),lc()),p=i.memoizedState,y=a.memoizedState,p.parent!==c?(p={parent:c,cache:c},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Gs(a,vn,c)):(c=y.cache,Gs(a,vn,c),c!==p.cache&&Zm(a,[vn],u,!0))),Hn(i,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Ss(i){i.flags|=4}function JT(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!o2(a)){if(a=ni.current,a!==null&&((mt&4194048)===mt?Vi!==null:(mt&62914560)!==mt&&(mt&536870912)===0||a!==Vi))throw oc=np,P_;i.flags|=8192}}function Zd(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?ci():536870912,i.lanes|=a,Nu|=a)}function yc(i,a){if(!_t)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var c=null;u!==null;)u.alternate!==null&&(c=u),u=u.sibling;c===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Yt(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,c=0;if(a)for(var p=i.child;p!==null;)u|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)u|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=c,i.childLanes=u,a}function dR(i,a,u){var c=a.pendingProps;switch(Km(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(a),null;case 1:return Yt(a),null;case 3:return u=a.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Ts(vn),tt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(ec(a)?Ss(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,k_())),Yt(a),null;case 26:return u=a.memoizedState,i===null?(Ss(a),u!==null?(Yt(a),JT(a,u)):(Yt(a),a.flags&=-16777217)):u?u!==i.memoizedState?(Ss(a),Yt(a),JT(a,u)):(Yt(a),a.flags&=-16777217):(i.memoizedProps!==c&&Ss(a),Yt(a),a.flags&=-16777217),null;case 27:kt(a),u=xe.current;var p=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==c&&Ss(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Yt(a),null}i=ge.current,ec(a)?I_(a):(i=Jb(p,c,u),a.stateNode=i,Ss(a))}return Yt(a),null;case 5:if(kt(a),u=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==c&&Ss(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Yt(a),null}if(i=ge.current,ec(a))I_(a);else{switch(p=df(xe.current),i){case 1:i=p.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:i=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":i=p.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":i=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":i=p.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?p.createElement("select",{is:c.is}):p.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?p.createElement(u,{is:c.is}):p.createElement(u)}}i[an]=a,i[Zt]=c;e:for(p=a.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===a)break e;for(;p.sibling===null;){if(p.return===null||p.return===a)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}a.stateNode=i;e:switch(Fn(i,u,c),u){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ss(a)}}return Yt(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==c&&Ss(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(r(166));if(i=xe.current,ec(a)){if(i=a.stateNode,u=a.memoizedProps,c=null,p=ir,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}i[an]=a,i=!!(i.nodeValue===u||c!==null&&c.suppressHydrationWarning===!0||Gb(i.nodeValue,u)),i||po(a)}else i=df(i).createTextNode(c),i[an]=a,a.stateNode=i}return Yt(a),null;case 13:if(c=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=ec(a),c!==null&&c.dehydrated!==null){if(i===null){if(!p)throw Error(r(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[an]=a}else tc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Yt(a),p=!1}else p=k_(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(vs(a),a):(vs(a),null)}if(vs(a),(a.flags&128)!==0)return a.lanes=u,a;if(u=c!==null,i=i!==null&&i.memoizedState!==null,u){c=a.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool);var y=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048)}return u!==i&&u&&(a.child.flags|=8192),Zd(a,a.updateQueue),Yt(a),null;case 4:return tt(),i===null&&ag(a.stateNode.containerInfo),Yt(a),null;case 10:return Ts(a.type),Yt(a),null;case 19:if(ae(An),p=a.memoizedState,p===null)return Yt(a),null;if(c=(a.flags&128)!==0,y=p.rendering,y===null)if(c)yc(p,!1);else{if(en!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(y=$d(i),y!==null){for(a.flags|=128,yc(p,!1),i=y.updateQueue,a.updateQueue=i,Zd(a,i),a.subtreeFlags=0,i=u,u=a.child;u!==null;)C_(u,i),u=u.sibling;return O(An,An.current&1|2),a.child}i=i.sibling}p.tail!==null&&Ze()>tf&&(a.flags|=128,c=!0,yc(p,!1),a.lanes=4194304)}else{if(!c)if(i=$d(y),i!==null){if(a.flags|=128,c=!0,i=i.updateQueue,a.updateQueue=i,Zd(a,i),yc(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!_t)return Yt(a),null}else 2*Ze()-p.renderingStartTime>tf&&u!==536870912&&(a.flags|=128,c=!0,yc(p,!1),a.lanes=4194304);p.isBackwards?(y.sibling=a.child,a.child=y):(i=p.last,i!==null?i.sibling=y:a.child=y,p.last=y)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=Ze(),a.sibling=null,i=An.current,O(An,c?i&1|2:i&1),a):(Yt(a),null);case 22:case 23:return vs(a),up(),c=a.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(u&536870912)!==0&&(a.flags&128)===0&&(Yt(a),a.subtreeFlags&6&&(a.flags|=8192)):Yt(a),u=a.updateQueue,u!==null&&Zd(a,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==u&&(a.flags|=2048),i!==null&&ae(Eo),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Ts(vn),Yt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function fR(i,a){switch(Km(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ts(vn),tt(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return kt(a),null;case 13:if(vs(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));tc()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ae(An),null;case 4:return tt(),null;case 10:return Ts(a.type),null;case 22:case 23:return vs(a),up(),i!==null&&ae(Eo),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Ts(vn),null;case 25:return null;default:return null}}function eb(i,a){switch(Km(a),a.tag){case 3:Ts(vn),tt();break;case 26:case 27:case 5:kt(a);break;case 4:tt();break;case 13:vs(a);break;case 19:ae(An);break;case 10:Ts(a.type);break;case 22:case 23:vs(a),up(),i!==null&&ae(Eo);break;case 24:Ts(vn)}}function Ec(i,a){try{var u=a.updateQueue,c=u!==null?u.lastEffect:null;if(c!==null){var p=c.next;u=p;do{if((u.tag&i)===i){c=void 0;var y=u.create,x=u.inst;c=y(),x.destroy=c}u=u.next}while(u!==p)}}catch(L){Rt(a,a.return,L)}}function Js(i,a,u){try{var c=a.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var y=p.next;c=y;do{if((c.tag&i)===i){var x=c.inst,L=x.destroy;if(L!==void 0){x.destroy=void 0,p=a;var W=u,ce=L;try{ce()}catch(ye){Rt(p,W,ye)}}}c=c.next}while(c!==y)}}catch(ye){Rt(a,a.return,ye)}}function tb(i){var a=i.updateQueue;if(a!==null){var u=i.stateNode;try{z_(a,u)}catch(c){Rt(i,i.return,c)}}}function nb(i,a,u){u.props=To(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(c){Rt(i,a,c)}}function _c(i,a){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof u=="function"?i.refCleanup=u(c):u.current=c}}catch(p){Rt(i,a,p)}}function Fi(i,a){var u=i.ref,c=i.refCleanup;if(u!==null)if(typeof c=="function")try{c()}catch(p){Rt(i,a,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(p){Rt(i,a,p)}else u.current=null}function rb(i){var a=i.type,u=i.memoizedProps,c=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&c.focus();break e;case"img":u.src?c.src=u.src:u.srcSet&&(c.srcset=u.srcSet)}}catch(p){Rt(i,i.return,p)}}function Pp(i,a,u){try{var c=i.stateNode;LR(c,i.type,u,a),c[Zt]=a}catch(p){Rt(i,i.return,p)}}function ib(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&oa(i.type)||i.tag===4}function Bp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||ib(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&oa(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Up(i,a,u){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(i),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=hf));else if(c!==4&&(c===27&&oa(i.type)&&(u=i.stateNode,a=null),i=i.child,i!==null))for(Up(i,a,u),i=i.sibling;i!==null;)Up(i,a,u),i=i.sibling}function Jd(i,a,u){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(c!==4&&(c===27&&oa(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Jd(i,a,u),i=i.sibling;i!==null;)Jd(i,a,u),i=i.sibling}function sb(i){var a=i.stateNode,u=i.memoizedProps;try{for(var c=i.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Fn(a,c,u),a[an]=i,a[Zt]=u}catch(y){Rt(i,i.return,y)}}var xs=!1,un=!1,Hp=!1,ab=typeof WeakSet=="function"?WeakSet:Set,In=null;function mR(i,a){if(i=i.containerInfo,lg=Ef,i=y_(i),Bm(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var c=u.getSelection&&u.getSelection();if(c&&c.rangeCount!==0){u=c.anchorNode;var p=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var x=0,L=-1,W=-1,ce=0,ye=0,be=i,he=null;t:for(;;){for(var fe;be!==u||p!==0&&be.nodeType!==3||(L=x+p),be!==y||c!==0&&be.nodeType!==3||(W=x+c),be.nodeType===3&&(x+=be.nodeValue.length),(fe=be.firstChild)!==null;)he=be,be=fe;for(;;){if(be===i)break t;if(he===u&&++ce===p&&(L=x),he===y&&++ye===c&&(W=x),(fe=be.nextSibling)!==null)break;be=he,he=be.parentNode}be=fe}u=L===-1||W===-1?null:{start:L,end:W}}else u=null}u=u||{start:0,end:0}}else u=null;for(cg={focusedElem:i,selectionRange:u},Ef=!1,In=a;In!==null;)if(a=In,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,In=i;else for(;In!==null;){switch(a=In,y=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,u=a,p=y.memoizedProps,y=y.memoizedState,c=u.stateNode;try{var Ge=To(u.type,p,u.elementType===u.type);i=c.getSnapshotBeforeUpdate(Ge,y),c.__reactInternalSnapshotBeforeUpdate=i}catch(ze){Rt(u,u.return,ze)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,u=i.nodeType,u===9)fg(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":fg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,In=i;break}In=a.return}}function ob(i,a,u){var c=u.flags;switch(u.tag){case 0:case 11:case 15:ea(i,u),c&4&&Ec(5,u);break;case 1:if(ea(i,u),c&4)if(i=u.stateNode,a===null)try{i.componentDidMount()}catch(x){Rt(u,u.return,x)}else{var p=To(u.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(p,a,i.__reactInternalSnapshotBeforeUpdate)}catch(x){Rt(u,u.return,x)}}c&64&&tb(u),c&512&&_c(u,u.return);break;case 3:if(ea(i,u),c&64&&(i=u.updateQueue,i!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{z_(i,a)}catch(x){Rt(u,u.return,x)}}break;case 27:a===null&&c&4&&sb(u);case 26:case 5:ea(i,u),a===null&&c&4&&rb(u),c&512&&_c(u,u.return);break;case 12:ea(i,u);break;case 13:ea(i,u),c&4&&cb(i,u),c&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=AR.bind(null,u),FR(i,u))));break;case 22:if(c=u.memoizedState!==null||xs,!c){a=a!==null&&a.memoizedState!==null||un,p=xs;var y=un;xs=c,(un=a)&&!y?ta(i,u,(u.subtreeFlags&8772)!==0):ea(i,u),xs=p,un=y}break;case 30:break;default:ea(i,u)}}function ub(i){var a=i.alternate;a!==null&&(i.alternate=null,ub(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Ni(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var zt=null,lr=!1;function ws(i,a,u){for(u=u.child;u!==null;)lb(i,a,u),u=u.sibling}function lb(i,a,u){if(_e&&typeof _e.onCommitFiberUnmount=="function")try{_e.onCommitFiberUnmount(de,u)}catch{}switch(u.tag){case 26:un||Fi(u,a),ws(i,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:un||Fi(u,a);var c=zt,p=lr;oa(u.type)&&(zt=u.stateNode,lr=!1),ws(i,a,u),Nc(u.stateNode),zt=c,lr=p;break;case 5:un||Fi(u,a);case 6:if(c=zt,p=lr,zt=null,ws(i,a,u),zt=c,lr=p,zt!==null)if(lr)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(u.stateNode)}catch(y){Rt(u,a,y)}else try{zt.removeChild(u.stateNode)}catch(y){Rt(u,a,y)}break;case 18:zt!==null&&(lr?(i=zt,Wb(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),Pc(i)):Wb(zt,u.stateNode));break;case 4:c=zt,p=lr,zt=u.stateNode.containerInfo,lr=!0,ws(i,a,u),zt=c,lr=p;break;case 0:case 11:case 14:case 15:un||Js(2,u,a),un||Js(4,u,a),ws(i,a,u);break;case 1:un||(Fi(u,a),c=u.stateNode,typeof c.componentWillUnmount=="function"&&nb(u,a,c)),ws(i,a,u);break;case 21:ws(i,a,u);break;case 22:un=(c=un)||u.memoizedState!==null,ws(i,a,u),un=c;break;default:ws(i,a,u)}}function cb(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Pc(i)}catch(u){Rt(a,a.return,u)}}function pR(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new ab),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new ab),a;default:throw Error(r(435,i.tag))}}function Vp(i,a){var u=pR(i);a.forEach(function(c){var p=SR.bind(null,i,c);u.has(c)||(u.add(c),c.then(p,p))})}function Cr(i,a){var u=a.deletions;if(u!==null)for(var c=0;c<u.length;c++){var p=u[c],y=i,x=a,L=x;e:for(;L!==null;){switch(L.tag){case 27:if(oa(L.type)){zt=L.stateNode,lr=!1;break e}break;case 5:zt=L.stateNode,lr=!1;break e;case 3:case 4:zt=L.stateNode.containerInfo,lr=!0;break e}L=L.return}if(zt===null)throw Error(r(160));lb(y,x,p),zt=null,lr=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)hb(a,i),a=a.sibling}var pi=null;function hb(i,a){var u=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Cr(a,i),Nr(i),c&4&&(Js(3,i,i.return),Ec(3,i),Js(5,i,i.return));break;case 1:Cr(a,i),Nr(i),c&512&&(un||u===null||Fi(u,u.return)),c&64&&xs&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?c:u.concat(c))));break;case 26:var p=pi;if(Cr(a,i),Nr(i),c&512&&(un||u===null||Fi(u,u.return)),c&4){var y=u!==null?u.memoizedState:null;if(c=i.memoizedState,u===null)if(c===null)if(i.stateNode===null){e:{c=i.type,u=i.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":y=p.getElementsByTagName("title")[0],(!y||y[os]||y[an]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(c),p.head.insertBefore(y,p.querySelector("head > title"))),Fn(y,c,u),y[an]=i,qt(y),c=y;break e;case"link":var x=s2("link","href",p).get(c+(u.href||""));if(x){for(var L=0;L<x.length;L++)if(y=x[L],y.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&y.getAttribute("rel")===(u.rel==null?null:u.rel)&&y.getAttribute("title")===(u.title==null?null:u.title)&&y.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){x.splice(L,1);break t}}y=p.createElement(c),Fn(y,c,u),p.head.appendChild(y);break;case"meta":if(x=s2("meta","content",p).get(c+(u.content||""))){for(L=0;L<x.length;L++)if(y=x[L],y.getAttribute("content")===(u.content==null?null:""+u.content)&&y.getAttribute("name")===(u.name==null?null:u.name)&&y.getAttribute("property")===(u.property==null?null:u.property)&&y.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&y.getAttribute("charset")===(u.charSet==null?null:u.charSet)){x.splice(L,1);break t}}y=p.createElement(c),Fn(y,c,u),p.head.appendChild(y);break;default:throw Error(r(468,c))}y[an]=i,qt(y),c=y}i.stateNode=c}else a2(p,i.type,i.stateNode);else i.stateNode=i2(p,c,i.memoizedProps);else y!==c?(y===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):y.count--,c===null?a2(p,i.type,i.stateNode):i2(p,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Pp(i,i.memoizedProps,u.memoizedProps)}break;case 27:Cr(a,i),Nr(i),c&512&&(un||u===null||Fi(u,u.return)),u!==null&&c&4&&Pp(i,i.memoizedProps,u.memoizedProps);break;case 5:if(Cr(a,i),Nr(i),c&512&&(un||u===null||Fi(u,u.return)),i.flags&32){p=i.stateNode;try{Kr(p,"")}catch(fe){Rt(i,i.return,fe)}}c&4&&i.stateNode!=null&&(p=i.memoizedProps,Pp(i,p,u!==null?u.memoizedProps:p)),c&1024&&(Hp=!0);break;case 6:if(Cr(a,i),Nr(i),c&4){if(i.stateNode===null)throw Error(r(162));c=i.memoizedProps,u=i.stateNode;try{u.nodeValue=c}catch(fe){Rt(i,i.return,fe)}}break;case 3:if(pf=null,p=pi,pi=ff(a.containerInfo),Cr(a,i),pi=p,Nr(i),c&4&&u!==null&&u.memoizedState.isDehydrated)try{Pc(a.containerInfo)}catch(fe){Rt(i,i.return,fe)}Hp&&(Hp=!1,db(i));break;case 4:c=pi,pi=ff(i.stateNode.containerInfo),Cr(a,i),Nr(i),pi=c;break;case 12:Cr(a,i),Nr(i);break;case 13:Cr(a,i),Nr(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Gp=Ze()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Vp(i,c)));break;case 22:p=i.memoizedState!==null;var W=u!==null&&u.memoizedState!==null,ce=xs,ye=un;if(xs=ce||p,un=ye||W,Cr(a,i),un=ye,xs=ce,Nr(i),c&8192)e:for(a=i.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(u===null||W||xs||un||bo(i)),u=null,a=i;;){if(a.tag===5||a.tag===26){if(u===null){W=u=a;try{if(y=W.stateNode,p)x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{L=W.stateNode;var be=W.memoizedProps.style,he=be!=null&&be.hasOwnProperty("display")?be.display:null;L.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(fe){Rt(W,W.return,fe)}}}else if(a.tag===6){if(u===null){W=a;try{W.stateNode.nodeValue=p?"":W.memoizedProps}catch(fe){Rt(W,W.return,fe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=i.updateQueue,c!==null&&(u=c.retryQueue,u!==null&&(c.retryQueue=null,Vp(i,u))));break;case 19:Cr(a,i),Nr(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Vp(i,c)));break;case 30:break;case 21:break;default:Cr(a,i),Nr(i)}}function Nr(i){var a=i.flags;if(a&2){try{for(var u,c=i.return;c!==null;){if(ib(c)){u=c;break}c=c.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var p=u.stateNode,y=Bp(i);Jd(i,y,p);break;case 5:var x=u.stateNode;u.flags&32&&(Kr(x,""),u.flags&=-33);var L=Bp(i);Jd(i,L,x);break;case 3:case 4:var W=u.stateNode.containerInfo,ce=Bp(i);Up(i,ce,W);break;default:throw Error(r(161))}}catch(ye){Rt(i,i.return,ye)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function db(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;db(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function ea(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)ob(i,a.alternate,a),a=a.sibling}function bo(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Js(4,a,a.return),bo(a);break;case 1:Fi(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&nb(a,a.return,u),bo(a);break;case 27:Nc(a.stateNode);case 26:case 5:Fi(a,a.return),bo(a);break;case 22:a.memoizedState===null&&bo(a);break;case 30:bo(a);break;default:bo(a)}i=i.sibling}}function ta(i,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,p=i,y=a,x=y.flags;switch(y.tag){case 0:case 11:case 15:ta(p,y,u),Ec(4,y);break;case 1:if(ta(p,y,u),c=y,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(ce){Rt(c,c.return,ce)}if(c=y,p=c.updateQueue,p!==null){var L=c.stateNode;try{var W=p.shared.hiddenCallbacks;if(W!==null)for(p.shared.hiddenCallbacks=null,p=0;p<W.length;p++)F_(W[p],L)}catch(ce){Rt(c,c.return,ce)}}u&&x&64&&tb(y),_c(y,y.return);break;case 27:sb(y);case 26:case 5:ta(p,y,u),u&&c===null&&x&4&&rb(y),_c(y,y.return);break;case 12:ta(p,y,u);break;case 13:ta(p,y,u),u&&x&4&&cb(p,y);break;case 22:y.memoizedState===null&&ta(p,y,u),_c(y,y.return);break;case 30:break;default:ta(p,y,u)}a=a.sibling}}function Fp(i,a){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&ic(u))}function zp(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&ic(i))}function zi(i,a,u,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)fb(i,a,u,c),a=a.sibling}function fb(i,a,u,c){var p=a.flags;switch(a.tag){case 0:case 11:case 15:zi(i,a,u,c),p&2048&&Ec(9,a);break;case 1:zi(i,a,u,c);break;case 3:zi(i,a,u,c),p&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&ic(i)));break;case 12:if(p&2048){zi(i,a,u,c),i=a.stateNode;try{var y=a.memoizedProps,x=y.id,L=y.onPostCommit;typeof L=="function"&&L(x,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(W){Rt(a,a.return,W)}}else zi(i,a,u,c);break;case 13:zi(i,a,u,c);break;case 23:break;case 22:y=a.stateNode,x=a.alternate,a.memoizedState!==null?y._visibility&2?zi(i,a,u,c):Tc(i,a):y._visibility&2?zi(i,a,u,c):(y._visibility|=2,xu(i,a,u,c,(a.subtreeFlags&10256)!==0)),p&2048&&Fp(x,a);break;case 24:zi(i,a,u,c),p&2048&&zp(a.alternate,a);break;default:zi(i,a,u,c)}}function xu(i,a,u,c,p){for(p=p&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var y=i,x=a,L=u,W=c,ce=x.flags;switch(x.tag){case 0:case 11:case 15:xu(y,x,L,W,p),Ec(8,x);break;case 23:break;case 22:var ye=x.stateNode;x.memoizedState!==null?ye._visibility&2?xu(y,x,L,W,p):Tc(y,x):(ye._visibility|=2,xu(y,x,L,W,p)),p&&ce&2048&&Fp(x.alternate,x);break;case 24:xu(y,x,L,W,p),p&&ce&2048&&zp(x.alternate,x);break;default:xu(y,x,L,W,p)}a=a.sibling}}function Tc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=i,c=a,p=c.flags;switch(c.tag){case 22:Tc(u,c),p&2048&&Fp(c.alternate,c);break;case 24:Tc(u,c),p&2048&&zp(c.alternate,c);break;default:Tc(u,c)}a=a.sibling}}var bc=8192;function wu(i){if(i.subtreeFlags&bc)for(i=i.child;i!==null;)mb(i),i=i.sibling}function mb(i){switch(i.tag){case 26:wu(i),i.flags&bc&&i.memoizedState!==null&&e4(pi,i.memoizedState,i.memoizedProps);break;case 5:wu(i);break;case 3:case 4:var a=pi;pi=ff(i.stateNode.containerInfo),wu(i),pi=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=bc,bc=16777216,wu(i),bc=a):wu(i));break;default:wu(i)}}function pb(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function vc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var c=a[u];In=c,yb(c,i)}pb(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)gb(i),i=i.sibling}function gb(i){switch(i.tag){case 0:case 11:case 15:vc(i),i.flags&2048&&Js(9,i,i.return);break;case 3:vc(i);break;case 12:vc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,ef(i)):vc(i);break;default:vc(i)}}function ef(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var c=a[u];In=c,yb(c,i)}pb(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Js(8,a,a.return),ef(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,ef(a));break;default:ef(a)}i=i.sibling}}function yb(i,a){for(;In!==null;){var u=In;switch(u.tag){case 0:case 11:case 15:Js(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var c=u.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ic(u.memoizedState.cache)}if(c=u.child,c!==null)c.return=u,In=c;else e:for(u=i;In!==null;){c=In;var p=c.sibling,y=c.return;if(ub(c),c===u){In=null;break e}if(p!==null){p.return=y,In=p;break e}In=y}}}var gR={getCacheForType:function(i){var a=Yn(vn),u=a.data.get(i);return u===void 0&&(u=i(),a.data.set(i,u)),u}},yR=typeof WeakMap=="function"?WeakMap:Map,At=0,Lt=null,ut=null,mt=0,St=0,Ir=null,na=!1,Cu=!1,jp=!1,Cs=0,en=0,ra=0,vo=0,qp=0,ri=0,Nu=0,Ac=null,cr=null,Yp=!1,Gp=0,tf=1/0,nf=null,ia=null,Vn=0,sa=null,Iu=null,Ru=0,$p=0,Kp=null,Eb=null,Sc=0,Qp=null;function Rr(){if((At&2)!==0&&mt!==0)return mt&-mt;if(z.T!==null){var i=yu;return i!==0?i:ng()}return wi()}function _b(){ri===0&&(ri=(mt&536870912)===0||_t?as():536870912);var i=ni.current;return i!==null&&(i.flags|=32),ri}function kr(i,a,u){(i===Lt&&(St===2||St===9)||i.cancelPendingCommit!==null)&&(ku(i,0),aa(i,mt,ri,!1)),zr(i,u),((At&2)===0||i!==Lt)&&(i===Lt&&((At&2)===0&&(vo|=u),en===4&&aa(i,mt,ri,!1)),ji(i))}function Tb(i,a,u){if((At&6)!==0)throw Error(r(327));var c=!u&&(a&124)===0&&(a&i.expiredLanes)===0||Wt(i,a),p=c?TR(i,a):Zp(i,a,!0),y=c;do{if(p===0){Cu&&!c&&aa(i,a,0,!1);break}else{if(u=i.current.alternate,y&&!ER(u)){p=Zp(i,a,!1),y=!1;continue}if(p===2){if(y=a,i.errorRecoveryDisabledLanes&y)var x=0;else x=i.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var L=i;p=Ac;var W=L.current.memoizedState.isDehydrated;if(W&&(ku(L,x).flags|=256),x=Zp(L,x,!1),x!==2){if(jp&&!W){L.errorRecoveryDisabledLanes|=y,vo|=y,p=4;break e}y=cr,cr=p,y!==null&&(cr===null?cr=y:cr.push.apply(cr,y))}p=x}if(y=!1,p!==2)continue}}if(p===1){ku(i,0),aa(i,a,0,!0);break}e:{switch(c=i,y=p,y){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:aa(c,a,ri,!na);break e;case 2:cr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(p=Gp+300-Ze(),10<p)){if(aa(c,a,ri,!na),Et(c,0,!0)!==0)break e;c.timeoutHandle=Qb(bb.bind(null,c,u,cr,nf,Yp,a,ri,vo,Nu,na,y,2,-0,0),p);break e}bb(c,u,cr,nf,Yp,a,ri,vo,Nu,na,y,0,-0,0)}}break}while(!0);ji(i)}function bb(i,a,u,c,p,y,x,L,W,ce,ye,be,he,fe){if(i.timeoutHandle=-1,be=a.subtreeFlags,(be&8192||(be&16785408)===16785408)&&(kc={stylesheets:null,count:0,unsuspend:JR},mb(a),be=t4(),be!==null)){i.cancelPendingCommit=be(Nb.bind(null,i,a,y,u,c,p,x,L,W,ye,1,he,fe)),aa(i,y,x,!ce);return}Nb(i,a,y,u,c,p,x,L,W)}function ER(i){for(var a=i;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var c=0;c<u.length;c++){var p=u[c],y=p.getSnapshot;p=p.value;try{if(!xr(y(),p))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function aa(i,a,u,c){a&=~qp,a&=~vo,i.suspendedLanes|=a,i.pingedLanes&=~a,c&&(i.warmLanes|=a),c=i.expirationTimes;for(var p=a;0<p;){var y=31-Be(p),x=1<<y;c[y]=-1,p&=~x}u!==0&&jr(i,u,a)}function rf(){return(At&6)===0?(xc(0),!1):!0}function Xp(){if(ut!==null){if(St===0)var i=ut.return;else i=ut,_s=go=null,fp(i),Au=null,pc=0,i=ut;for(;i!==null;)eb(i.alternate,i),i=i.return;ut=null}}function ku(i,a){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,PR(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),Xp(),Lt=i,ut=u=gs(i.current,null),mt=a,St=0,Ir=null,na=!1,Cu=Wt(i,a),jp=!1,Nu=ri=qp=vo=ra=en=0,cr=Ac=null,Yp=!1,(a&8)!==0&&(a|=a&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=a;0<c;){var p=31-Be(c),y=1<<p;a|=i[p],c&=~y}return Cs=a,xd(),u}function vb(i,a){nt=null,z.H=qd,a===ac||a===Ld?(a=H_(),St=3):a===P_?(a=H_(),St=4):St=a===VT?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ir=a,ut===null&&(en=1,Qd(i,Zr(a,i.current)))}function Ab(){var i=z.H;return z.H=qd,i===null?qd:i}function Sb(){var i=z.A;return z.A=gR,i}function Wp(){en=4,na||(mt&4194048)!==mt&&ni.current!==null||(Cu=!0),(ra&134217727)===0&&(vo&134217727)===0||Lt===null||aa(Lt,mt,ri,!1)}function Zp(i,a,u){var c=At;At|=2;var p=Ab(),y=Sb();(Lt!==i||mt!==a)&&(nf=null,ku(i,a)),a=!1;var x=en;e:do try{if(St!==0&&ut!==null){var L=ut,W=Ir;switch(St){case 8:Xp(),x=6;break e;case 3:case 2:case 9:case 6:ni.current===null&&(a=!0);var ce=St;if(St=0,Ir=null,Du(i,L,W,ce),u&&Cu){x=0;break e}break;default:ce=St,St=0,Ir=null,Du(i,L,W,ce)}}_R(),x=en;break}catch(ye){vb(i,ye)}while(!0);return a&&i.shellSuspendCounter++,_s=go=null,At=c,z.H=p,z.A=y,ut===null&&(Lt=null,mt=0,xd()),x}function _R(){for(;ut!==null;)xb(ut)}function TR(i,a){var u=At;At|=2;var c=Ab(),p=Sb();Lt!==i||mt!==a?(nf=null,tf=Ze()+500,ku(i,a)):Cu=Wt(i,a);e:do try{if(St!==0&&ut!==null){a=ut;var y=Ir;t:switch(St){case 1:St=0,Ir=null,Du(i,a,y,1);break;case 2:case 9:if(B_(y)){St=0,Ir=null,wb(a);break}a=function(){St!==2&&St!==9||Lt!==i||(St=7),ji(i)},y.then(a,a);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:B_(y)?(St=0,Ir=null,wb(a)):(St=0,Ir=null,Du(i,a,y,7));break;case 5:var x=null;switch(ut.tag){case 26:x=ut.memoizedState;case 5:case 27:var L=ut;if(!x||o2(x)){St=0,Ir=null;var W=L.sibling;if(W!==null)ut=W;else{var ce=L.return;ce!==null?(ut=ce,sf(ce)):ut=null}break t}}St=0,Ir=null,Du(i,a,y,5);break;case 6:St=0,Ir=null,Du(i,a,y,6);break;case 8:Xp(),en=6;break e;default:throw Error(r(462))}}bR();break}catch(ye){vb(i,ye)}while(!0);return _s=go=null,z.H=c,z.A=p,At=u,ut!==null?0:(Lt=null,mt=0,xd(),en)}function bR(){for(;ut!==null&&!xt();)xb(ut)}function xb(i){var a=ZT(i.alternate,i,Cs);i.memoizedProps=i.pendingProps,a===null?sf(i):ut=a}function wb(i){var a=i,u=a.alternate;switch(a.tag){case 15:case 0:a=GT(u,a,a.pendingProps,a.type,void 0,mt);break;case 11:a=GT(u,a,a.pendingProps,a.type.render,a.ref,mt);break;case 5:fp(a);default:eb(u,a),a=ut=C_(a,Cs),a=ZT(u,a,Cs)}i.memoizedProps=i.pendingProps,a===null?sf(i):ut=a}function Du(i,a,u,c){_s=go=null,fp(a),Au=null,pc=0;var p=a.return;try{if(cR(i,p,a,u,mt)){en=1,Qd(i,Zr(u,i.current)),ut=null;return}}catch(y){if(p!==null)throw ut=p,y;en=1,Qd(i,Zr(u,i.current)),ut=null;return}a.flags&32768?(_t||c===1?i=!0:Cu||(mt&536870912)!==0?i=!1:(na=i=!0,(c===2||c===9||c===3||c===6)&&(c=ni.current,c!==null&&c.tag===13&&(c.flags|=16384))),Cb(a,i)):sf(a)}function sf(i){var a=i;do{if((a.flags&32768)!==0){Cb(a,na);return}i=a.return;var u=dR(a.alternate,a,Cs);if(u!==null){ut=u;return}if(a=a.sibling,a!==null){ut=a;return}ut=a=i}while(a!==null);en===0&&(en=5)}function Cb(i,a){do{var u=fR(i.alternate,i);if(u!==null){u.flags&=32767,ut=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(i=i.sibling,i!==null)){ut=i;return}ut=i=u}while(i!==null);en=6,ut=null}function Nb(i,a,u,c,p,y,x,L,W){i.cancelPendingCommit=null;do af();while(Vn!==0);if((At&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(y=a.lanes|a.childLanes,y|=zm,vr(i,u,y,x,L,W),i===Lt&&(ut=Lt=null,mt=0),Iu=a,sa=i,Ru=u,$p=y,Kp=p,Eb=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,xR(er,function(){return Ob(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=z.T,z.T=null,p=Z.p,Z.p=2,x=At,At|=4;try{mR(i,a,u)}finally{At=x,Z.p=p,z.T=c}}Vn=1,Ib(),Rb(),kb()}}function Ib(){if(Vn===1){Vn=0;var i=sa,a=Iu,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=z.T,z.T=null;var c=Z.p;Z.p=2;var p=At;At|=4;try{hb(a,i);var y=cg,x=y_(i.containerInfo),L=y.focusedElem,W=y.selectionRange;if(x!==L&&L&&L.ownerDocument&&g_(L.ownerDocument.documentElement,L)){if(W!==null&&Bm(L)){var ce=W.start,ye=W.end;if(ye===void 0&&(ye=ce),"selectionStart"in L)L.selectionStart=ce,L.selectionEnd=Math.min(ye,L.value.length);else{var be=L.ownerDocument||document,he=be&&be.defaultView||window;if(he.getSelection){var fe=he.getSelection(),Ge=L.textContent.length,ze=Math.min(W.start,Ge),It=W.end===void 0?ze:Math.min(W.end,Ge);!fe.extend&&ze>It&&(x=It,It=ze,ze=x);var re=p_(L,ze),ee=p_(L,It);if(re&&ee&&(fe.rangeCount!==1||fe.anchorNode!==re.node||fe.anchorOffset!==re.offset||fe.focusNode!==ee.node||fe.focusOffset!==ee.offset)){var ue=be.createRange();ue.setStart(re.node,re.offset),fe.removeAllRanges(),ze>It?(fe.addRange(ue),fe.extend(ee.node,ee.offset)):(ue.setEnd(ee.node,ee.offset),fe.addRange(ue))}}}}for(be=[],fe=L;fe=fe.parentNode;)fe.nodeType===1&&be.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<be.length;L++){var Te=be[L];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}Ef=!!lg,cg=lg=null}finally{At=p,Z.p=c,z.T=u}}i.current=a,Vn=2}}function Rb(){if(Vn===2){Vn=0;var i=sa,a=Iu,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=z.T,z.T=null;var c=Z.p;Z.p=2;var p=At;At|=4;try{ob(i,a.alternate,a)}finally{At=p,Z.p=c,z.T=u}}Vn=3}}function kb(){if(Vn===4||Vn===3){Vn=0,xn();var i=sa,a=Iu,u=Ru,c=Eb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Vn=5:(Vn=0,Iu=sa=null,Db(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(ia=null),Fs(u),a=a.stateNode,_e&&typeof _e.onCommitFiberRoot=="function")try{_e.onCommitFiberRoot(de,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=z.T,p=Z.p,Z.p=2,z.T=null;try{for(var y=i.onRecoverableError,x=0;x<c.length;x++){var L=c[x];y(L.value,{componentStack:L.stack})}}finally{z.T=a,Z.p=p}}(Ru&3)!==0&&af(),ji(i),p=i.pendingLanes,(u&4194090)!==0&&(p&42)!==0?i===Qp?Sc++:(Sc=0,Qp=i):Sc=0,xc(0)}}function Db(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,ic(a)))}function af(i){return Ib(),Rb(),kb(),Ob()}function Ob(){if(Vn!==5)return!1;var i=sa,a=$p;$p=0;var u=Fs(Ru),c=z.T,p=Z.p;try{Z.p=32>u?32:u,z.T=null,u=Kp,Kp=null;var y=sa,x=Ru;if(Vn=0,Iu=sa=null,Ru=0,(At&6)!==0)throw Error(r(331));var L=At;if(At|=4,gb(y.current),fb(y,y.current,x,u),At=L,xc(0,!1),_e&&typeof _e.onPostCommitFiberRoot=="function")try{_e.onPostCommitFiberRoot(de,y)}catch{}return!0}finally{Z.p=p,z.T=c,Db(i,a)}}function Lb(i,a,u){a=Zr(u,a),a=Cp(i.stateNode,a,2),i=Qs(i,a,2),i!==null&&(zr(i,2),ji(i))}function Rt(i,a,u){if(i.tag===3)Lb(i,i,u);else for(;a!==null;){if(a.tag===3){Lb(a,i,u);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ia===null||!ia.has(c))){i=Zr(u,i),u=UT(2),c=Qs(a,u,2),c!==null&&(HT(u,c,a,i),zr(c,2),ji(c));break}}a=a.return}}function Jp(i,a,u){var c=i.pingCache;if(c===null){c=i.pingCache=new yR;var p=new Set;c.set(a,p)}else p=c.get(a),p===void 0&&(p=new Set,c.set(a,p));p.has(u)||(jp=!0,p.add(u),i=vR.bind(null,i,a,u),a.then(i,i))}function vR(i,a,u){var c=i.pingCache;c!==null&&c.delete(a),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,Lt===i&&(mt&u)===u&&(en===4||en===3&&(mt&62914560)===mt&&300>Ze()-Gp?(At&2)===0&&ku(i,0):qp|=u,Nu===mt&&(Nu=0)),ji(i)}function Mb(i,a){a===0&&(a=ci()),i=fu(i,a),i!==null&&(zr(i,a),ji(i))}function AR(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),Mb(i,u)}function SR(i,a){var u=0;switch(i.tag){case 13:var c=i.stateNode,p=i.memoizedState;p!==null&&(u=p.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(a),Mb(i,u)}function xR(i,a){return rn(i,a)}var of=null,Ou=null,eg=!1,uf=!1,tg=!1,Ao=0;function ji(i){i!==Ou&&i.next===null&&(Ou===null?of=Ou=i:Ou=Ou.next=i),uf=!0,eg||(eg=!0,CR())}function xc(i,a){if(!tg&&uf){tg=!0;do for(var u=!1,c=of;c!==null;){if(i!==0){var p=c.pendingLanes;if(p===0)var y=0;else{var x=c.suspendedLanes,L=c.pingedLanes;y=(1<<31-Be(42|i)+1)-1,y&=p&~(x&~L),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(u=!0,Hb(c,y))}else y=mt,y=Et(c,c===Lt?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||Wt(c,y)||(u=!0,Hb(c,y));c=c.next}while(u);tg=!1}}function wR(){Pb()}function Pb(){uf=eg=!1;var i=0;Ao!==0&&(MR()&&(i=Ao),Ao=0);for(var a=Ze(),u=null,c=of;c!==null;){var p=c.next,y=Bb(c,a);y===0?(c.next=null,u===null?of=p:u.next=p,p===null&&(Ou=u)):(u=c,(i!==0||(y&3)!==0)&&(uf=!0)),c=p}xc(i)}function Bb(i,a){for(var u=i.suspendedLanes,c=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var x=31-Be(y),L=1<<x,W=p[x];W===-1?((L&u)===0||(L&c)!==0)&&(p[x]=En(L,a)):W<=a&&(i.expiredLanes|=L),y&=~L}if(a=Lt,u=mt,u=Et(i,i===a?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,u===0||i===a&&(St===2||St===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Qt(c),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||Wt(i,u)){if(a=u&-u,a===i.callbackPriority)return a;switch(c!==null&&Qt(c),Fs(u)){case 2:case 8:u=Mn;break;case 32:u=er;break;case 268435456:u=tr;break;default:u=er}return c=Ub.bind(null,i),u=rn(u,c),i.callbackPriority=a,i.callbackNode=u,a}return c!==null&&c!==null&&Qt(c),i.callbackPriority=2,i.callbackNode=null,2}function Ub(i,a){if(Vn!==0&&Vn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(af()&&i.callbackNode!==u)return null;var c=mt;return c=Et(i,i===Lt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(Tb(i,c,a),Bb(i,Ze()),i.callbackNode!=null&&i.callbackNode===u?Ub.bind(null,i):null)}function Hb(i,a){if(af())return null;Tb(i,a,!0)}function CR(){BR(function(){(At&6)!==0?rn(Xt,wR):Pb()})}function ng(){return Ao===0&&(Ao=as()),Ao}function Vb(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:tu(""+i)}function Fb(i,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,i.id&&u.setAttribute("form",i.id),a.parentNode.insertBefore(u,a),i=new FormData(i),u.parentNode.removeChild(u),i}function NR(i,a,u,c,p){if(a==="submit"&&u&&u.stateNode===p){var y=Vb((p[Zt]||null).action),x=c.submitter;x&&(a=(a=x[Zt]||null)?Vb(a.formAction):x.getAttribute("formAction"),a!==null&&(y=a,x=null));var L=new nu("action","action",null,c,p);i.push({event:L,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ao!==0){var W=x?Fb(p,x):new FormData(p);vp(u,{pending:!0,data:W,method:p.method,action:y},null,W)}}else typeof y=="function"&&(L.preventDefault(),W=x?Fb(p,x):new FormData(p),vp(u,{pending:!0,data:W,method:p.method,action:y},y,W))},currentTarget:p}]})}}for(var rg=0;rg<Fm.length;rg++){var ig=Fm[rg],IR=ig.toLowerCase(),RR=ig[0].toUpperCase()+ig.slice(1);mi(IR,"on"+RR)}mi(T_,"onAnimationEnd"),mi(b_,"onAnimationIteration"),mi(v_,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi($3,"onTransitionRun"),mi(K3,"onTransitionStart"),mi(Q3,"onTransitionCancel"),mi(A_,"onTransitionEnd"),hi("onMouseEnter",["mouseout","mouseover"]),hi("onMouseLeave",["mouseout","mouseover"]),hi("onPointerEnter",["pointerout","pointerover"]),hi("onPointerLeave",["pointerout","pointerover"]),Ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ar("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wc));function zb(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var c=i[u],p=c.event;c=c.listeners;e:{var y=void 0;if(a)for(var x=c.length-1;0<=x;x--){var L=c[x],W=L.instance,ce=L.currentTarget;if(L=L.listener,W!==y&&p.isPropagationStopped())break e;y=L,p.currentTarget=ce;try{y(p)}catch(ye){Kd(ye)}p.currentTarget=null,y=W}else for(x=0;x<c.length;x++){if(L=c[x],W=L.instance,ce=L.currentTarget,L=L.listener,W!==y&&p.isPropagationStopped())break e;y=L,p.currentTarget=ce;try{y(p)}catch(ye){Kd(ye)}p.currentTarget=null,y=W}}}}function lt(i,a){var u=a[Ka];u===void 0&&(u=a[Ka]=new Set);var c=i+"__bubble";u.has(c)||(jb(a,i,2,!1),u.add(c))}function sg(i,a,u){var c=0;a&&(c|=4),jb(u,i,c,a)}var lf="_reactListening"+Math.random().toString(36).slice(2);function ag(i){if(!i[lf]){i[lf]=!0,Qa.forEach(function(u){u!=="selectionchange"&&(kR.has(u)||sg(u,!1,i),sg(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[lf]||(a[lf]=!0,sg("selectionchange",!1,a))}}function jb(i,a,u,c){switch(f2(a)){case 2:var p=i4;break;case 8:p=s4;break;default:p=Tg}u=p.bind(null,a,u,i),p=void 0,!Xr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),c?p!==void 0?i.addEventListener(a,u,{capture:!0,passive:p}):i.addEventListener(a,u,!0):p!==void 0?i.addEventListener(a,u,{passive:p}):i.addEventListener(a,u,!1)}function og(i,a,u,c,p){var y=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var L=c.stateNode.containerInfo;if(L===p)break;if(x===4)for(x=c.return;x!==null;){var W=x.tag;if((W===3||W===4)&&x.stateNode.containerInfo===p)return;x=x.return}for(;L!==null;){if(x=qr(L),x===null)return;if(W=x.tag,W===5||W===6||W===26||W===27){c=y=x;continue e}L=L.parentNode}}c=c.return}cd(function(){var ce=y,ye=Qr(u),be=[];e:{var he=S_.get(i);if(he!==void 0){var fe=nu,Ge=i;switch(i){case"keypress":if(Li(u)===0)break e;case"keydown":case"keyup":fe=uu;break;case"focusin":Ge="focus",fe=su;break;case"focusout":Ge="blur",fe=su;break;case"beforeblur":case"afterblur":fe=su;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Wr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Om;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Ed;break;case T_:case b_:case v_:fe=au;break;case A_:fe=Td;break;case"scroll":case"scrollend":fe=hd;break;case"wheel":fe=lu;break;case"copy":case"cut":case"paste":fe=ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Xl;break;case"toggle":case"beforetoggle":fe=vd}var ze=(a&4)!==0,It=!ze&&(i==="scroll"||i==="scrollend"),re=ze?he!==null?he+"Capture":null:he;ze=[];for(var ee=ce,ue;ee!==null;){var Te=ee;if(ue=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||ue===null||re===null||(Te=to(ee,re),Te!=null&&ze.push(Cc(ee,Te,ue))),It)break;ee=ee.return}0<ze.length&&(he=new fe(he,Ge,null,u,ye),be.push({event:he,listeners:ze}))}}if((a&7)===0){e:{if(he=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",he&&u!==cs&&(Ge=u.relatedTarget||u.fromElement)&&(qr(Ge)||Ge[or]))break e;if((fe||he)&&(he=ye.window===ye?ye:(he=ye.ownerDocument)?he.defaultView||he.parentWindow:window,fe?(Ge=u.relatedTarget||u.toElement,fe=ce,Ge=Ge?qr(Ge):null,Ge!==null&&(It=o(Ge),ze=Ge.tag,Ge!==It||ze!==5&&ze!==27&&ze!==6)&&(Ge=null)):(fe=null,Ge=ce),fe!==Ge)){if(ze=Wr,Te="onMouseLeave",re="onMouseEnter",ee="mouse",(i==="pointerout"||i==="pointerover")&&(ze=Xl,Te="onPointerLeave",re="onPointerEnter",ee="pointer"),It=fe==null?he:Gr(fe),ue=Ge==null?he:Gr(Ge),he=new ze(Te,ee+"leave",fe,u,ye),he.target=It,he.relatedTarget=ue,Te=null,qr(ye)===ce&&(ze=new ze(re,ee+"enter",Ge,u,ye),ze.target=ue,ze.relatedTarget=It,Te=ze),It=Te,fe&&Ge)t:{for(ze=fe,re=Ge,ee=0,ue=ze;ue;ue=Lu(ue))ee++;for(ue=0,Te=re;Te;Te=Lu(Te))ue++;for(;0<ee-ue;)ze=Lu(ze),ee--;for(;0<ue-ee;)re=Lu(re),ue--;for(;ee--;){if(ze===re||re!==null&&ze===re.alternate)break t;ze=Lu(ze),re=Lu(re)}ze=null}else ze=null;fe!==null&&qb(be,he,fe,ze,!1),Ge!==null&&It!==null&&qb(be,It,Ge,ze,!0)}}e:{if(he=ce?Gr(ce):window,fe=he.nodeName&&he.nodeName.toLowerCase(),fe==="select"||fe==="input"&&he.type==="file")var Le=l_;else if(bn(he))if(c_)Le=q3;else{Le=z3;var st=F3}else fe=he.nodeName,!fe||fe.toLowerCase()!=="input"||he.type!=="checkbox"&&he.type!=="radio"?ce&&jl(ce.elementType)&&(Le=l_):Le=j3;if(Le&&(Le=Le(i,ce))){ps(be,Le,u,ye);break e}st&&st(i,he,ce),i==="focusout"&&ce&&he.type==="number"&&ce.memoizedProps.value!=null&&qs(he,"number",he.value)}switch(st=ce?Gr(ce):window,i){case"focusin":(bn(st)||st.contentEditable==="true")&&(cu=st,Um=ce,Jl=null);break;case"focusout":Jl=Um=cu=null;break;case"mousedown":Hm=!0;break;case"contextmenu":case"mouseup":case"dragend":Hm=!1,E_(be,u,ye);break;case"selectionchange":if(G3)break;case"keydown":case"keyup":E_(be,u,ye)}var He;if(Bi)e:{switch(i){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else dt?me(i,u)&&(je="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(je="onCompositionStart");je&&(S&&u.locale!=="ko"&&(dt||je!=="onCompositionStart"?je==="onCompositionEnd"&&dt&&(He=Yl()):(Oi=ye,Ys="value"in Oi?Oi.value:Oi.textContent,dt=!0)),st=cf(ce,je),0<st.length&&(je=new Kl(je,i,null,u,ye),be.push({event:je,listeners:st}),He?je.data=He:(He=Re(u),He!==null&&(je.data=He)))),(He=v?Tn(i,u):ft(i,u))&&(je=cf(ce,"onBeforeInput"),0<je.length&&(st=new Kl("onBeforeInput","beforeinput",null,u,ye),be.push({event:st,listeners:je}),st.data=He)),NR(be,i,ce,u,ye)}zb(be,a)})}function Cc(i,a,u){return{instance:i,listener:a,currentTarget:u}}function cf(i,a){for(var u=a+"Capture",c=[];i!==null;){var p=i,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=to(i,u),p!=null&&c.unshift(Cc(i,p,y)),p=to(i,a),p!=null&&c.push(Cc(i,p,y))),i.tag===3)return c;i=i.return}return[]}function Lu(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function qb(i,a,u,c,p){for(var y=a._reactName,x=[];u!==null&&u!==c;){var L=u,W=L.alternate,ce=L.stateNode;if(L=L.tag,W!==null&&W===c)break;L!==5&&L!==26&&L!==27||ce===null||(W=ce,p?(ce=to(u,y),ce!=null&&x.unshift(Cc(u,ce,W))):p||(ce=to(u,y),ce!=null&&x.push(Cc(u,ce,W)))),u=u.return}x.length!==0&&i.push({event:a,listeners:x})}var DR=/\r\n?/g,OR=/\u0000|\uFFFD/g;function Yb(i){return(typeof i=="string"?i:""+i).replace(DR,`
`).replace(OR,"")}function Gb(i,a){return a=Yb(a),Yb(i)===a}function hf(){}function Nt(i,a,u,c,p,y){switch(u){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Kr(i,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Kr(i,""+c);break;case"className":$r(i,"class",c);break;case"tabIndex":$r(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":$r(i,u,c);break;case"style":zl(i,c,y);break;case"data":if(a!=="object"){$r(i,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||u!=="href")){i.removeAttribute(u);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(u);break}c=tu(""+c),i.setAttribute(u,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(u==="formAction"?(a!=="input"&&Nt(i,a,"name",p.name,p,null),Nt(i,a,"formEncType",p.formEncType,p,null),Nt(i,a,"formMethod",p.formMethod,p,null),Nt(i,a,"formTarget",p.formTarget,p,null)):(Nt(i,a,"encType",p.encType,p,null),Nt(i,a,"method",p.method,p,null),Nt(i,a,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(u);break}c=tu(""+c),i.setAttribute(u,c);break;case"onClick":c!=null&&(i.onclick=hf);break;case"onScroll":c!=null&&lt("scroll",i);break;case"onScrollEnd":c!=null&&lt("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(u=c.__html,u!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}u=tu(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(u,""+c):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":c===!0?i.setAttribute(u,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(u,c):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(u,c):i.removeAttribute(u);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(u):i.setAttribute(u,c);break;case"popover":lt("beforetoggle",i),lt("toggle",i),Ii(i,"popover",c);break;case"xlinkActuate":_n(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":_n(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":_n(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":_n(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":_n(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":_n(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":_n(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":_n(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":_n(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ii(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=km.get(u)||u,Ii(i,u,c))}}function ug(i,a,u,c,p,y){switch(u){case"style":zl(i,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(u=c.__html,u!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"children":typeof c=="string"?Kr(i,c):(typeof c=="number"||typeof c=="bigint")&&Kr(i,""+c);break;case"onScroll":c!=null&&lt("scroll",i);break;case"onScrollEnd":c!=null&&lt("scrollend",i);break;case"onClick":c!=null&&(i.onclick=hf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zs.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(p=u.endsWith("Capture"),a=u.slice(2,p?u.length-7:void 0),y=i[Zt]||null,y=y!=null?y[u]:null,typeof y=="function"&&i.removeEventListener(a,y,p),typeof c=="function")){typeof y!="function"&&y!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(a,c,p);break e}u in i?i[u]=c:c===!0?i.setAttribute(u,""):Ii(i,u,c)}}}function Fn(i,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lt("error",i),lt("load",i);var c=!1,p=!1,y;for(y in u)if(u.hasOwnProperty(y)){var x=u[y];if(x!=null)switch(y){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Nt(i,a,y,x,u,null)}}p&&Nt(i,a,"srcSet",u.srcSet,u,null),c&&Nt(i,a,"src",u.src,u,null);return;case"input":lt("invalid",i);var L=y=x=p=null,W=null,ce=null;for(c in u)if(u.hasOwnProperty(c)){var ye=u[c];if(ye!=null)switch(c){case"name":p=ye;break;case"type":x=ye;break;case"checked":W=ye;break;case"defaultChecked":ce=ye;break;case"value":y=ye;break;case"defaultValue":L=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,a));break;default:Nt(i,a,c,ye,u,null)}}Za(i,y,L,W,ce,x,p,!1),eu(i);return;case"select":lt("invalid",i),c=x=y=null;for(p in u)if(u.hasOwnProperty(p)&&(L=u[p],L!=null))switch(p){case"value":y=L;break;case"defaultValue":x=L;break;case"multiple":c=L;default:Nt(i,a,p,L,u,null)}a=y,u=x,i.multiple=!!c,a!=null?ls(i,!!c,a,!1):u!=null&&ls(i,!!c,u,!0);return;case"textarea":lt("invalid",i),y=p=c=null;for(x in u)if(u.hasOwnProperty(x)&&(L=u[x],L!=null))switch(x){case"value":c=L;break;case"defaultValue":p=L;break;case"children":y=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(91));break;default:Nt(i,a,x,L,u,null)}Ja(i,c,p,y),eu(i);return;case"option":for(W in u)if(u.hasOwnProperty(W)&&(c=u[W],c!=null))switch(W){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Nt(i,a,W,c,u,null)}return;case"dialog":lt("beforetoggle",i),lt("toggle",i),lt("cancel",i),lt("close",i);break;case"iframe":case"object":lt("load",i);break;case"video":case"audio":for(c=0;c<wc.length;c++)lt(wc[c],i);break;case"image":lt("error",i),lt("load",i);break;case"details":lt("toggle",i);break;case"embed":case"source":case"link":lt("error",i),lt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ce in u)if(u.hasOwnProperty(ce)&&(c=u[ce],c!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Nt(i,a,ce,c,u,null)}return;default:if(jl(a)){for(ye in u)u.hasOwnProperty(ye)&&(c=u[ye],c!==void 0&&ug(i,a,ye,c,u,void 0));return}}for(L in u)u.hasOwnProperty(L)&&(c=u[L],c!=null&&Nt(i,a,L,c,u,null))}function LR(i,a,u,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,x=null,L=null,W=null,ce=null,ye=null;for(fe in u){var be=u[fe];if(u.hasOwnProperty(fe)&&be!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":W=be;default:c.hasOwnProperty(fe)||Nt(i,a,fe,null,c,be)}}for(var he in c){var fe=c[he];if(be=u[he],c.hasOwnProperty(he)&&(fe!=null||be!=null))switch(he){case"type":y=fe;break;case"name":p=fe;break;case"checked":ce=fe;break;case"defaultChecked":ye=fe;break;case"value":x=fe;break;case"defaultValue":L=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,a));break;default:fe!==be&&Nt(i,a,he,fe,c,be)}}Sr(i,x,L,W,ce,ye,y,p);return;case"select":fe=x=L=he=null;for(y in u)if(W=u[y],u.hasOwnProperty(y)&&W!=null)switch(y){case"value":break;case"multiple":fe=W;default:c.hasOwnProperty(y)||Nt(i,a,y,null,c,W)}for(p in c)if(y=c[p],W=u[p],c.hasOwnProperty(p)&&(y!=null||W!=null))switch(p){case"value":he=y;break;case"defaultValue":L=y;break;case"multiple":x=y;default:y!==W&&Nt(i,a,p,y,c,W)}a=L,u=x,c=fe,he!=null?ls(i,!!u,he,!1):!!c!=!!u&&(a!=null?ls(i,!!u,a,!0):ls(i,!!u,u?[]:"",!1));return;case"textarea":fe=he=null;for(L in u)if(p=u[L],u.hasOwnProperty(L)&&p!=null&&!c.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Nt(i,a,L,null,c,p)}for(x in c)if(p=c[x],y=u[x],c.hasOwnProperty(x)&&(p!=null||y!=null))switch(x){case"value":he=p;break;case"defaultValue":fe=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==y&&Nt(i,a,x,p,c,y)}wt(i,he,fe);return;case"option":for(var Ge in u)if(he=u[Ge],u.hasOwnProperty(Ge)&&he!=null&&!c.hasOwnProperty(Ge))switch(Ge){case"selected":i.selected=!1;break;default:Nt(i,a,Ge,null,c,he)}for(W in c)if(he=c[W],fe=u[W],c.hasOwnProperty(W)&&he!==fe&&(he!=null||fe!=null))switch(W){case"selected":i.selected=he&&typeof he!="function"&&typeof he!="symbol";break;default:Nt(i,a,W,he,c,fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in u)he=u[ze],u.hasOwnProperty(ze)&&he!=null&&!c.hasOwnProperty(ze)&&Nt(i,a,ze,null,c,he);for(ce in c)if(he=c[ce],fe=u[ce],c.hasOwnProperty(ce)&&he!==fe&&(he!=null||fe!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,a));break;default:Nt(i,a,ce,he,c,fe)}return;default:if(jl(a)){for(var It in u)he=u[It],u.hasOwnProperty(It)&&he!==void 0&&!c.hasOwnProperty(It)&&ug(i,a,It,void 0,c,he);for(ye in c)he=c[ye],fe=u[ye],!c.hasOwnProperty(ye)||he===fe||he===void 0&&fe===void 0||ug(i,a,ye,he,c,fe);return}}for(var re in u)he=u[re],u.hasOwnProperty(re)&&he!=null&&!c.hasOwnProperty(re)&&Nt(i,a,re,null,c,he);for(be in c)he=c[be],fe=u[be],!c.hasOwnProperty(be)||he===fe||he==null&&fe==null||Nt(i,a,be,he,c,fe)}var lg=null,cg=null;function df(i){return i.nodeType===9?i:i.ownerDocument}function $b(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kb(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function hg(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var dg=null;function MR(){var i=window.event;return i&&i.type==="popstate"?i===dg?!1:(dg=i,!0):(dg=null,!1)}var Qb=typeof setTimeout=="function"?setTimeout:void 0,PR=typeof clearTimeout=="function"?clearTimeout:void 0,Xb=typeof Promise=="function"?Promise:void 0,BR=typeof queueMicrotask=="function"?queueMicrotask:typeof Xb<"u"?function(i){return Xb.resolve(null).then(i).catch(UR)}:Qb;function UR(i){setTimeout(function(){throw i})}function oa(i){return i==="head"}function Wb(i,a){var u=a,c=0,p=0;do{var y=u.nextSibling;if(i.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"){if(0<c&&8>c){u=c;var x=i.ownerDocument;if(u&1&&Nc(x.documentElement),u&2&&Nc(x.body),u&4)for(u=x.head,Nc(u),x=u.firstChild;x;){var L=x.nextSibling,W=x.nodeName;x[os]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&x.rel.toLowerCase()==="stylesheet"||u.removeChild(x),x=L}}if(p===0){i.removeChild(y),Pc(a);return}p--}else u==="$"||u==="$?"||u==="$!"?p++:c=u.charCodeAt(0)-48;else c=0;u=y}while(u);Pc(a)}function fg(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":fg(u),Ni(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function HR(i,a,u,c){for(;i.nodeType===1;){var p=u;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[os])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=gi(i.nextSibling),i===null)break}return null}function VR(i,a,u){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=gi(i.nextSibling),i===null))return null;return i}function mg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function FR(i,a){var u=i.ownerDocument;if(i.data!=="$?"||u.readyState==="complete")a();else{var c=function(){a(),u.removeEventListener("DOMContentLoaded",c)};u.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function gi(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var pg=null;function Zb(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}function Jb(i,a,u){switch(a=df(u),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Nc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Ni(i)}var ii=new Map,e2=new Set;function ff(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ns=Z.d;Z.d={f:zR,r:jR,D:qR,C:YR,L:GR,m:$R,X:QR,S:KR,M:XR};function zR(){var i=Ns.f(),a=rf();return i||a}function jR(i){var a=Yr(i);a!==null&&a.tag===5&&a.type==="form"?TT(a):Ns.r(i)}var Mu=typeof document>"u"?null:document;function t2(i,a,u){var c=Mu;if(c&&typeof a=="string"&&a){var p=hn(a);p='link[rel="'+i+'"][href="'+p+'"]',typeof u=="string"&&(p+='[crossorigin="'+u+'"]'),e2.has(p)||(e2.add(p),i={rel:i,crossOrigin:u,href:a},c.querySelector(p)===null&&(a=c.createElement("link"),Fn(a,"link",i),qt(a),c.head.appendChild(a)))}}function qR(i){Ns.D(i),t2("dns-prefetch",i,null)}function YR(i,a){Ns.C(i,a),t2("preconnect",i,a)}function GR(i,a,u){Ns.L(i,a,u);var c=Mu;if(c&&i&&a){var p='link[rel="preload"][as="'+hn(a)+'"]';a==="image"&&u&&u.imageSrcSet?(p+='[imagesrcset="'+hn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(p+='[imagesizes="'+hn(u.imageSizes)+'"]')):p+='[href="'+hn(i)+'"]';var y=p;switch(a){case"style":y=Pu(i);break;case"script":y=Bu(i)}ii.has(y)||(i=g({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:i,as:a},u),ii.set(y,i),c.querySelector(p)!==null||a==="style"&&c.querySelector(Ic(y))||a==="script"&&c.querySelector(Rc(y))||(a=c.createElement("link"),Fn(a,"link",i),qt(a),c.head.appendChild(a)))}}function $R(i,a){Ns.m(i,a);var u=Mu;if(u&&i){var c=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+hn(c)+'"][href="'+hn(i)+'"]',y=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Bu(i)}if(!ii.has(y)&&(i=g({rel:"modulepreload",href:i},a),ii.set(y,i),u.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Rc(y)))return}c=u.createElement("link"),Fn(c,"link",i),qt(c),u.head.appendChild(c)}}}function KR(i,a,u){Ns.S(i,a,u);var c=Mu;if(c&&i){var p=Bn(c).hoistableStyles,y=Pu(i);a=a||"default";var x=p.get(y);if(!x){var L={loading:0,preload:null};if(x=c.querySelector(Ic(y)))L.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":a},u),(u=ii.get(y))&&gg(i,u);var W=x=c.createElement("link");qt(W),Fn(W,"link",i),W._p=new Promise(function(ce,ye){W.onload=ce,W.onerror=ye}),W.addEventListener("load",function(){L.loading|=1}),W.addEventListener("error",function(){L.loading|=2}),L.loading|=4,mf(x,a,c)}x={type:"stylesheet",instance:x,count:1,state:L},p.set(y,x)}}}function QR(i,a){Ns.X(i,a);var u=Mu;if(u&&i){var c=Bn(u).hoistableScripts,p=Bu(i),y=c.get(p);y||(y=u.querySelector(Rc(p)),y||(i=g({src:i,async:!0},a),(a=ii.get(p))&&yg(i,a),y=u.createElement("script"),qt(y),Fn(y,"link",i),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function XR(i,a){Ns.M(i,a);var u=Mu;if(u&&i){var c=Bn(u).hoistableScripts,p=Bu(i),y=c.get(p);y||(y=u.querySelector(Rc(p)),y||(i=g({src:i,async:!0,type:"module"},a),(a=ii.get(p))&&yg(i,a),y=u.createElement("script"),qt(y),Fn(y,"link",i),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function n2(i,a,u,c){var p=(p=xe.current)?ff(p):null;if(!p)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Pu(u.href),u=Bn(p).hoistableStyles,c=u.get(a),c||(c={type:"style",instance:null,count:0,state:null},u.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=Pu(u.href);var y=Bn(p).hoistableStyles,x=y.get(i);if(x||(p=p.ownerDocument||p,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,x),(y=p.querySelector(Ic(i)))&&!y._p&&(x.instance=y,x.state.loading=5),ii.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ii.set(i,u),y||WR(p,i,u,x.state))),a&&c===null)throw Error(r(528,""));return x}if(a&&c!==null)throw Error(r(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Bu(u),u=Bn(p).hoistableScripts,c=u.get(a),c||(c={type:"script",instance:null,count:0,state:null},u.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Pu(i){return'href="'+hn(i)+'"'}function Ic(i){return'link[rel="stylesheet"]['+i+"]"}function r2(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function WR(i,a,u,c){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=i.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),Fn(a,"link",u),qt(a),i.head.appendChild(a))}function Bu(i){return'[src="'+hn(i)+'"]'}function Rc(i){return"script[async]"+i}function i2(i,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var c=i.querySelector('style[data-href~="'+hn(u.href)+'"]');if(c)return a.instance=c,qt(c),c;var p=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),qt(c),Fn(c,"style",p),mf(c,u.precedence,i),a.instance=c;case"stylesheet":p=Pu(u.href);var y=i.querySelector(Ic(p));if(y)return a.state.loading|=4,a.instance=y,qt(y),y;c=r2(u),(p=ii.get(p))&&gg(c,p),y=(i.ownerDocument||i).createElement("link"),qt(y);var x=y;return x._p=new Promise(function(L,W){x.onload=L,x.onerror=W}),Fn(y,"link",c),a.state.loading|=4,mf(y,u.precedence,i),a.instance=y;case"script":return y=Bu(u.src),(p=i.querySelector(Rc(y)))?(a.instance=p,qt(p),p):(c=u,(p=ii.get(y))&&(c=g({},u),yg(c,p)),i=i.ownerDocument||i,p=i.createElement("script"),qt(p),Fn(p,"link",c),i.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,mf(c,u.precedence,i));return a.instance}function mf(i,a,u){for(var c=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,y=p,x=0;x<c.length;x++){var L=c[x];if(L.dataset.precedence===a)y=L;else if(y!==p)break}y?y.parentNode.insertBefore(i,y.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(i,a.firstChild))}function gg(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function yg(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var pf=null;function s2(i,a,u){if(pf===null){var c=new Map,p=pf=new Map;p.set(u,c)}else p=pf,c=p.get(u),c||(c=new Map,p.set(u,c));if(c.has(i))return c;for(c.set(i,null),u=u.getElementsByTagName(i),p=0;p<u.length;p++){var y=u[p];if(!(y[os]||y[an]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var x=y.getAttribute(a)||"";x=i+x;var L=c.get(x);L?L.push(y):c.set(x,[y])}}return c}function a2(i,a,u){i=i.ownerDocument||i,i.head.insertBefore(u,a==="title"?i.querySelector("head > title"):null)}function ZR(i,a,u){if(u===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function o2(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var kc=null;function JR(){}function e4(i,a,u){if(kc===null)throw Error(r(475));var c=kc;if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var p=Pu(u.href),y=i.querySelector(Ic(p));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=gf.bind(c),i.then(c,c)),a.state.loading|=4,a.instance=y,qt(y);return}y=i.ownerDocument||i,u=r2(u),(p=ii.get(p))&&gg(u,p),y=y.createElement("link"),qt(y);var x=y;x._p=new Promise(function(L,W){x.onload=L,x.onerror=W}),Fn(y,"link",u),a.instance=y}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(c.count++,a=gf.bind(c),i.addEventListener("load",a),i.addEventListener("error",a))}}function t4(){if(kc===null)throw Error(r(475));var i=kc;return i.stylesheets&&i.count===0&&Eg(i,i.stylesheets),0<i.count?function(a){var u=setTimeout(function(){if(i.stylesheets&&Eg(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u)}}:null}function gf(){if(this.count--,this.count===0){if(this.stylesheets)Eg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var yf=null;function Eg(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,yf=new Map,a.forEach(n4,i),yf=null,gf.call(i))}function n4(i,a){if(!(a.state.loading&4)){var u=yf.get(i);if(u)var c=u.get(null);else{u=new Map,yf.set(i,u);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var x=p[y];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(u.set(x.dataset.precedence,x),c=x)}c&&u.set(null,c)}p=a.instance,x=p.getAttribute("data-precedence"),y=u.get(x)||c,y===c&&u.set(null,p),u.set(x,p),this.count++,c=gf.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),y?y.parentNode.insertBefore(p,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),a.state.loading|=4}}var Dc={$$typeof:K,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function r4(i,a,u,c,p,y,x,L){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=br(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=br(0),this.hiddenUpdates=br(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function u2(i,a,u,c,p,y,x,L,W,ce,ye,be){return i=new r4(i,a,u,x,L,W,ce,be),a=1,y===!0&&(a|=24),y=wr(3,null,null,a),i.current=y,y.stateNode=i,a=Jm(),a.refCount++,i.pooledCache=a,a.refCount++,y.memoizedState={element:c,isDehydrated:u,cache:a},rp(y),i}function l2(i){return i?(i=mu,i):mu}function c2(i,a,u,c,p,y){p=l2(p),c.context===null?c.context=p:c.pendingContext=p,c=Ks(a),c.payload={element:u},y=y===void 0?null:y,y!==null&&(c.callback=y),u=Qs(i,c,a),u!==null&&(kr(u,i,a),uc(u,i,a))}function h2(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function _g(i,a){h2(i,a),(i=i.alternate)&&h2(i,a)}function d2(i){if(i.tag===13){var a=fu(i,67108864);a!==null&&kr(a,i,67108864),_g(i,67108864)}}var Ef=!0;function i4(i,a,u,c){var p=z.T;z.T=null;var y=Z.p;try{Z.p=2,Tg(i,a,u,c)}finally{Z.p=y,z.T=p}}function s4(i,a,u,c){var p=z.T;z.T=null;var y=Z.p;try{Z.p=8,Tg(i,a,u,c)}finally{Z.p=y,z.T=p}}function Tg(i,a,u,c){if(Ef){var p=bg(c);if(p===null)og(i,a,c,_f,u),m2(i,c);else if(o4(p,i,a,u,c))c.stopPropagation();else if(m2(i,c),a&4&&-1<a4.indexOf(i)){for(;p!==null;){var y=Yr(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var x=Ft(y.pendingLanes);if(x!==0){var L=y;for(L.pendingLanes|=2,L.entangledLanes|=2;x;){var W=1<<31-Be(x);L.entanglements[1]|=W,x&=~W}ji(y),(At&6)===0&&(tf=Ze()+500,xc(0))}}break;case 13:L=fu(y,2),L!==null&&kr(L,y,2),rf(),_g(y,2)}if(y=bg(c),y===null&&og(i,a,c,_f,u),y===p)break;p=y}p!==null&&c.stopPropagation()}else og(i,a,c,null,u)}}function bg(i){return i=Qr(i),vg(i)}var _f=null;function vg(i){if(_f=null,i=qr(i),i!==null){var a=o(i);if(a===null)i=null;else{var u=a.tag;if(u===13){if(i=l(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return _f=i,null}function f2(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ue()){case Xt:return 2;case Mn:return 8;case er:case Fr:return 32;case tr:return 268435456;default:return 32}default:return 32}}var Ag=!1,ua=null,la=null,ca=null,Oc=new Map,Lc=new Map,ha=[],a4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function m2(i,a){switch(i){case"focusin":case"focusout":ua=null;break;case"dragenter":case"dragleave":la=null;break;case"mouseover":case"mouseout":ca=null;break;case"pointerover":case"pointerout":Oc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(a.pointerId)}}function Mc(i,a,u,c,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:a,domEventName:u,eventSystemFlags:c,nativeEvent:y,targetContainers:[p]},a!==null&&(a=Yr(a),a!==null&&d2(a)),i):(i.eventSystemFlags|=c,a=i.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),i)}function o4(i,a,u,c,p){switch(a){case"focusin":return ua=Mc(ua,i,a,u,c,p),!0;case"dragenter":return la=Mc(la,i,a,u,c,p),!0;case"mouseover":return ca=Mc(ca,i,a,u,c,p),!0;case"pointerover":var y=p.pointerId;return Oc.set(y,Mc(Oc.get(y)||null,i,a,u,c,p)),!0;case"gotpointercapture":return y=p.pointerId,Lc.set(y,Mc(Lc.get(y)||null,i,a,u,c,p)),!0}return!1}function p2(i){var a=qr(i.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){i.blockedOn=a,Ko(i.priority,function(){if(u.tag===13){var c=Rr();c=xi(c);var p=fu(u,c);p!==null&&kr(p,u,c),_g(u,c)}});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Tf(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=bg(i.nativeEvent);if(u===null){u=i.nativeEvent;var c=new u.constructor(u.type,u);cs=c,u.target.dispatchEvent(c),cs=null}else return a=Yr(u),a!==null&&d2(a),i.blockedOn=u,!1;a.shift()}return!0}function g2(i,a,u){Tf(i)&&u.delete(a)}function u4(){Ag=!1,ua!==null&&Tf(ua)&&(ua=null),la!==null&&Tf(la)&&(la=null),ca!==null&&Tf(ca)&&(ca=null),Oc.forEach(g2),Lc.forEach(g2)}function bf(i,a){i.blockedOn===a&&(i.blockedOn=null,Ag||(Ag=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,u4)))}var vf=null;function y2(i){vf!==i&&(vf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){vf===i&&(vf=null);for(var a=0;a<i.length;a+=3){var u=i[a],c=i[a+1],p=i[a+2];if(typeof c!="function"){if(vg(c||u)===null)continue;break}var y=Yr(u);y!==null&&(i.splice(a,3),a-=3,vp(y,{pending:!0,data:p,method:u.method,action:c},c,p))}}))}function Pc(i){function a(W){return bf(W,i)}ua!==null&&bf(ua,i),la!==null&&bf(la,i),ca!==null&&bf(ca,i),Oc.forEach(a),Lc.forEach(a);for(var u=0;u<ha.length;u++){var c=ha[u];c.blockedOn===i&&(c.blockedOn=null)}for(;0<ha.length&&(u=ha[0],u.blockedOn===null);)p2(u),u.blockedOn===null&&ha.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(c=0;c<u.length;c+=3){var p=u[c],y=u[c+1],x=p[Zt]||null;if(typeof y=="function")x||y2(u);else if(x){var L=null;if(y&&y.hasAttribute("formAction")){if(p=y,x=y[Zt]||null)L=x.formAction;else if(vg(p)!==null)continue}else L=x.action;typeof L=="function"?u[c+1]=L:(u.splice(c,3),c-=3),y2(u)}}}function Sg(i){this._internalRoot=i}Af.prototype.render=Sg.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var u=a.current,c=Rr();c2(u,c,i,a,null,null)},Af.prototype.unmount=Sg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;c2(i.current,2,null,i,null,null),rf(),a[or]=null}};function Af(i){this._internalRoot=i}Af.prototype.unstable_scheduleHydration=function(i){if(i){var a=wi();i={blockedOn:null,target:i,priority:a};for(var u=0;u<ha.length&&a!==0&&a<ha[u].priority;u++);ha.splice(u,0,i),u===0&&p2(i)}};var E2=e.version;if(E2!=="19.1.0")throw Error(r(527,E2,"19.1.0"));Z.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(a),i=i!==null?f(i):null,i=i===null?null:i.stateNode,i};var l4={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sf.isDisabled&&Sf.supportsFiber)try{de=Sf.inject(l4),_e=Sf}catch{}}return Uc.createRoot=function(i,a){if(!s(i))throw Error(r(299));var u=!1,c="",p=LT,y=MT,x=PT,L=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(L=a.unstable_transitionCallbacks)),a=u2(i,1,!1,null,null,u,c,p,y,x,L,null),i[or]=a.current,ag(i),new Sg(a)},Uc.hydrateRoot=function(i,a,u){if(!s(i))throw Error(r(299));var c=!1,p="",y=LT,x=MT,L=PT,W=null,ce=null;return u!=null&&(u.unstable_strictMode===!0&&(c=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(x=u.onCaughtError),u.onRecoverableError!==void 0&&(L=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(W=u.unstable_transitionCallbacks),u.formState!==void 0&&(ce=u.formState)),a=u2(i,1,!0,a,u??null,c,p,y,x,L,W,ce),a.context=l2(null),u=a.current,c=Rr(),c=xi(c),p=Ks(c),p.callback=null,Qs(u,p,c),u=c,a.current.lanes=u,zr(a,u),ji(a),i[or]=a.current,ag(i),new Af(a)},Uc.version="19.1.0",Uc}var N2;function E4(){if(N2)return Cg.exports;N2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Cg.exports=y4(),Cg.exports}var _4=E4();function ar(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=ar(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var kg={exports:{}},Dg={},Og={exports:{}},Lg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I2;function T4(){if(I2)return Lg;I2=1;var t=Fh();function e(E,T){return E===T&&(E!==0||1/E===1/T)||E!==E&&T!==T}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,o=t.useLayoutEffect,l=t.useDebugValue;function h(E,T){var b=T(),N=r({inst:{value:b,getSnapshot:T}}),k=N[0].inst,U=N[1];return o(function(){k.value=b,k.getSnapshot=T,d(k)&&U({inst:k})},[E,b,T]),s(function(){return d(k)&&U({inst:k}),E(function(){d(k)&&U({inst:k})})},[E]),l(b),b}function d(E){var T=E.getSnapshot;E=E.value;try{var b=T();return!n(E,b)}catch{return!0}}function f(E,T){return T()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:h;return Lg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:g,Lg}var R2;function b4(){return R2||(R2=1,Og.exports=T4()),Og.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k2;function v4(){if(k2)return Dg;k2=1;var t=Fh(),e=b4();function n(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,o=t.useRef,l=t.useEffect,h=t.useMemo,d=t.useDebugValue;return Dg.useSyncExternalStoreWithSelector=function(f,g,E,T,b){var N=o(null);if(N.current===null){var k={hasValue:!1,value:null};N.current=k}else k=N.current;N=h(function(){function M(G){if(!Y){if(Y=!0,K=G,G=T(G),b!==void 0&&k.hasValue){var H=k.value;if(b(H,G))return q=H}return q=G}if(H=q,r(K,G))return H;var C=T(G);return b!==void 0&&b(H,C)?(K=G,H):(K=G,q=C)}var Y=!1,K,q,te=E===void 0?null:E;return[function(){return M(g())},te===null?void 0:function(){return M(te())}]},[g,E,T,b]);var U=s(f,N[0],N[1]);return l(function(){k.hasValue=!0,k.value=U},[U]),d(U),U},Dg}var D2;function A4(){return D2||(D2=1,kg.exports=v4()),kg.exports}var S4=A4();const x4=q0(S4),w4={},O2=t=>{let e;const n=new Set,r=(g,E)=>{const T=typeof g=="function"?g(e):g;if(!Object.is(T,e)){const b=e;e=E??(typeof T!="object"||T===null)?T:Object.assign({},e,T),n.forEach(N=>N(e,b))}},s=()=>e,d={setState:r,getState:s,getInitialState:()=>f,subscribe:g=>(n.add(g),()=>n.delete(g)),destroy:()=>{(w4?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=e=t(r,s,d);return d},C4=t=>t?O2(t):O2,{useDebugValue:N4}=Ee,{useSyncExternalStoreWithSelector:I4}=x4,R4=t=>t;function dx(t,e=R4,n){const r=I4(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return N4(r),r}const L2=(t,e)=>{const n=C4(t),r=(s,o=e)=>dx(n,s,o);return Object.assign(r,n),r},k4=(t,e)=>t?L2(t,e):L2;function Xn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var D4={value:()=>{}};function Y0(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Yf(n)}function Yf(t){this._=t}function O4(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Yf.prototype=Y0.prototype={constructor:Yf,on:function(t,e){var n=this._,r=O4(t+"",n),s,o=-1,l=r.length;if(arguments.length<2){for(;++o<l;)if((s=(t=r[o]).type)&&(s=L4(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<l;)if(s=(t=r[o]).type)n[s]=M2(n[s],t.name,e);else if(e==null)for(s in n)n[s]=M2(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Yf(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,o;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,s=o.length;r<s;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,o=r.length;s<o;++s)r[s].value.apply(e,n)}};function L4(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function M2(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=D4,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Ey="http://www.w3.org/1999/xhtml";const P2={svg:"http://www.w3.org/2000/svg",xhtml:Ey,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function G0(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),P2.hasOwnProperty(e)?{space:P2[e],local:t}:t}function M4(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ey&&e.documentElement.namespaceURI===Ey?e.createElement(t):e.createElementNS(n,t)}}function P4(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function fx(t){var e=G0(t);return(e.local?P4:M4)(e)}function B4(){}function SE(t){return t==null?B4:function(){return this.querySelector(t)}}function U4(t){typeof t!="function"&&(t=SE(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,h=r[s]=new Array(l),d,f,g=0;g<l;++g)(d=o[g])&&(f=t.call(d,d.__data__,g,o))&&("__data__"in d&&(f.__data__=d.__data__),h[g]=f);return new Hr(r,this._parents)}function H4(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function V4(){return[]}function mx(t){return t==null?V4:function(){return this.querySelectorAll(t)}}function F4(t){return function(){return H4(t.apply(this,arguments))}}function z4(t){typeof t=="function"?t=F4(t):t=mx(t);for(var e=this._groups,n=e.length,r=[],s=[],o=0;o<n;++o)for(var l=e[o],h=l.length,d,f=0;f<h;++f)(d=l[f])&&(r.push(t.call(d,d.__data__,f,l)),s.push(d));return new Hr(r,s)}function px(t){return function(){return this.matches(t)}}function gx(t){return function(e){return e.matches(t)}}var j4=Array.prototype.find;function q4(t){return function(){return j4.call(this.children,t)}}function Y4(){return this.firstElementChild}function G4(t){return this.select(t==null?Y4:q4(typeof t=="function"?t:gx(t)))}var $4=Array.prototype.filter;function K4(){return Array.from(this.children)}function Q4(t){return function(){return $4.call(this.children,t)}}function X4(t){return this.selectAll(t==null?K4:Q4(typeof t=="function"?t:gx(t)))}function W4(t){typeof t!="function"&&(t=px(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,h=r[s]=[],d,f=0;f<l;++f)(d=o[f])&&t.call(d,d.__data__,f,o)&&h.push(d);return new Hr(r,this._parents)}function yx(t){return new Array(t.length)}function Z4(){return new Hr(this._enter||this._groups.map(yx),this._parents)}function c0(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}c0.prototype={constructor:c0,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function J4(t){return function(){return t}}function e6(t,e,n,r,s,o){for(var l=0,h,d=e.length,f=o.length;l<f;++l)(h=e[l])?(h.__data__=o[l],r[l]=h):n[l]=new c0(t,o[l]);for(;l<d;++l)(h=e[l])&&(s[l]=h)}function t6(t,e,n,r,s,o,l){var h,d,f=new Map,g=e.length,E=o.length,T=new Array(g),b;for(h=0;h<g;++h)(d=e[h])&&(T[h]=b=l.call(d,d.__data__,h,e)+"",f.has(b)?s[h]=d:f.set(b,d));for(h=0;h<E;++h)b=l.call(t,o[h],h,o)+"",(d=f.get(b))?(r[h]=d,d.__data__=o[h],f.delete(b)):n[h]=new c0(t,o[h]);for(h=0;h<g;++h)(d=e[h])&&f.get(T[h])===d&&(s[h]=d)}function n6(t){return t.__data__}function r6(t,e){if(!arguments.length)return Array.from(this,n6);var n=e?t6:e6,r=this._parents,s=this._groups;typeof t!="function"&&(t=J4(t));for(var o=s.length,l=new Array(o),h=new Array(o),d=new Array(o),f=0;f<o;++f){var g=r[f],E=s[f],T=E.length,b=i6(t.call(g,g&&g.__data__,f,r)),N=b.length,k=h[f]=new Array(N),U=l[f]=new Array(N),M=d[f]=new Array(T);n(g,E,k,U,M,b,e);for(var Y=0,K=0,q,te;Y<N;++Y)if(q=k[Y]){for(Y>=K&&(K=Y+1);!(te=U[K])&&++K<N;);q._next=te||null}}return l=new Hr(l,r),l._enter=h,l._exit=d,l}function i6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function s6(){return new Hr(this._exit||this._groups.map(yx),this._parents)}function a6(t,e,n){var r=this.enter(),s=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?o.remove():n(o),r&&s?r.merge(s).order():s}function o6(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,o=r.length,l=Math.min(s,o),h=new Array(s),d=0;d<l;++d)for(var f=n[d],g=r[d],E=f.length,T=h[d]=new Array(E),b,N=0;N<E;++N)(b=f[N]||g[N])&&(T[N]=b);for(;d<s;++d)h[d]=n[d];return new Hr(h,this._parents)}function u6(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,o=r[s],l;--s>=0;)(l=r[s])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function l6(t){t||(t=c6);function e(E,T){return E&&T?t(E.__data__,T.__data__):!E-!T}for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o){for(var l=n[o],h=l.length,d=s[o]=new Array(h),f,g=0;g<h;++g)(f=l[g])&&(d[g]=f);d.sort(e)}return new Hr(s,this._parents).order()}function c6(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function h6(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function d6(){return Array.from(this)}function f6(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length;s<o;++s){var l=r[s];if(l)return l}return null}function m6(){let t=0;for(const e of this)++t;return t}function p6(){return!this.node()}function g6(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],o=0,l=s.length,h;o<l;++o)(h=s[o])&&t.call(h,h.__data__,o,s);return this}function y6(t){return function(){this.removeAttribute(t)}}function E6(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _6(t,e){return function(){this.setAttribute(t,e)}}function T6(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function b6(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function v6(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function A6(t,e){var n=G0(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?E6:y6:typeof e=="function"?n.local?v6:b6:n.local?T6:_6)(n,e))}function Ex(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function S6(t){return function(){this.style.removeProperty(t)}}function x6(t,e,n){return function(){this.style.setProperty(t,e,n)}}function w6(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function C6(t,e,n){return arguments.length>1?this.each((e==null?S6:typeof e=="function"?w6:x6)(t,e,n??"")):cl(this.node(),t)}function cl(t,e){return t.style.getPropertyValue(e)||Ex(t).getComputedStyle(t,null).getPropertyValue(e)}function N6(t){return function(){delete this[t]}}function I6(t,e){return function(){this[t]=e}}function R6(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function k6(t,e){return arguments.length>1?this.each((e==null?N6:typeof e=="function"?R6:I6)(t,e)):this.node()[t]}function _x(t){return t.trim().split(/^|\s+/)}function xE(t){return t.classList||new Tx(t)}function Tx(t){this._node=t,this._names=_x(t.getAttribute("class")||"")}Tx.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function bx(t,e){for(var n=xE(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function vx(t,e){for(var n=xE(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function D6(t){return function(){bx(this,t)}}function O6(t){return function(){vx(this,t)}}function L6(t,e){return function(){(e.apply(this,arguments)?bx:vx)(this,t)}}function M6(t,e){var n=_x(t+"");if(arguments.length<2){for(var r=xE(this.node()),s=-1,o=n.length;++s<o;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?L6:e?D6:O6)(n,e))}function P6(){this.textContent=""}function B6(t){return function(){this.textContent=t}}function U6(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function H6(t){return arguments.length?this.each(t==null?P6:(typeof t=="function"?U6:B6)(t)):this.node().textContent}function V6(){this.innerHTML=""}function F6(t){return function(){this.innerHTML=t}}function z6(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function j6(t){return arguments.length?this.each(t==null?V6:(typeof t=="function"?z6:F6)(t)):this.node().innerHTML}function q6(){this.nextSibling&&this.parentNode.appendChild(this)}function Y6(){return this.each(q6)}function G6(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $6(){return this.each(G6)}function K6(t){var e=typeof t=="function"?t:fx(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Q6(){return null}function X6(t,e){var n=typeof t=="function"?t:fx(t),r=e==null?Q6:typeof e=="function"?e:SE(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function W6(){var t=this.parentNode;t&&t.removeChild(this)}function Z6(){return this.each(W6)}function J6(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ek(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function tk(t){return this.select(t?ek:J6)}function nk(t){return arguments.length?this.property("__data__",t):this.node().__data__}function rk(t){return function(e){t.call(this,e,this.__data__)}}function ik(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function sk(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,o;n<s;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function ak(t,e,n){return function(){var r=this.__on,s,o=rk(e);if(r){for(var l=0,h=r.length;l<h;++l)if((s=r[l]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=n),s.value=e;return}}this.addEventListener(t.type,o,n),s={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(s):this.__on=[s]}}function ok(t,e,n){var r=ik(t+""),s,o=r.length,l;if(arguments.length<2){var h=this.node().__on;if(h){for(var d=0,f=h.length,g;d<f;++d)for(s=0,g=h[d];s<o;++s)if((l=r[s]).type===g.type&&l.name===g.name)return g.value}return}for(h=e?ak:sk,s=0;s<o;++s)this.each(h(r[s],e,n));return this}function Ax(t,e,n){var r=Ex(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function uk(t,e){return function(){return Ax(this,t,e)}}function lk(t,e){return function(){return Ax(this,t,e.apply(this,arguments))}}function ck(t,e){return this.each((typeof e=="function"?lk:uk)(t,e))}function*hk(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length,l;s<o;++s)(l=r[s])&&(yield l)}var Sx=[null];function Hr(t,e){this._groups=t,this._parents=e}function zh(){return new Hr([[document.documentElement]],Sx)}function dk(){return this}Hr.prototype=zh.prototype={constructor:Hr,select:U4,selectAll:z4,selectChild:G4,selectChildren:X4,filter:W4,data:r6,enter:Z4,exit:s6,join:a6,merge:o6,selection:dk,order:u6,sort:l6,call:h6,nodes:d6,node:f6,size:m6,empty:p6,each:g6,attr:A6,style:C6,property:k6,classed:M6,text:H6,html:j6,raise:Y6,lower:$6,append:K6,insert:X6,remove:Z6,clone:tk,datum:nk,on:ok,dispatch:ck,[Symbol.iterator]:hk};function yi(t){return typeof t=="string"?new Hr([[document.querySelector(t)]],[document.documentElement]):new Hr([[t]],Sx)}function fk(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Yi(t,e){if(t=fk(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const mk={passive:!1},Th={capture:!0,passive:!1};function Mg(t){t.stopImmediatePropagation()}function Zu(t){t.preventDefault(),t.stopImmediatePropagation()}function xx(t){var e=t.document.documentElement,n=yi(t).on("dragstart.drag",Zu,Th);"onselectstart"in e?n.on("selectstart.drag",Zu,Th):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function wx(t,e){var n=t.document.documentElement,r=yi(t).on("dragstart.drag",null);e&&(r.on("click.drag",Zu,Th),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const xf=t=>()=>t;function _y(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:o,x:l,y:h,dx:d,dy:f,dispatch:g}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:h,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:g}})}_y.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function pk(t){return!t.ctrlKey&&!t.button}function gk(){return this.parentNode}function yk(t,e){return e??{x:t.x,y:t.y}}function Ek(){return navigator.maxTouchPoints||"ontouchstart"in this}function _k(){var t=pk,e=gk,n=yk,r=Ek,s={},o=Y0("start","drag","end"),l=0,h,d,f,g,E=0;function T(q){q.on("mousedown.drag",b).filter(r).on("touchstart.drag",U).on("touchmove.drag",M,mk).on("touchend.drag touchcancel.drag",Y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(q,te){if(!(g||!t.call(this,q,te))){var G=K(this,e.call(this,q,te),q,te,"mouse");G&&(yi(q.view).on("mousemove.drag",N,Th).on("mouseup.drag",k,Th),xx(q.view),Mg(q),f=!1,h=q.clientX,d=q.clientY,G("start",q))}}function N(q){if(Zu(q),!f){var te=q.clientX-h,G=q.clientY-d;f=te*te+G*G>E}s.mouse("drag",q)}function k(q){yi(q.view).on("mousemove.drag mouseup.drag",null),wx(q.view,f),Zu(q),s.mouse("end",q)}function U(q,te){if(t.call(this,q,te)){var G=q.changedTouches,H=e.call(this,q,te),C=G.length,I,B;for(I=0;I<C;++I)(B=K(this,H,q,te,G[I].identifier,G[I]))&&(Mg(q),B("start",q,G[I]))}}function M(q){var te=q.changedTouches,G=te.length,H,C;for(H=0;H<G;++H)(C=s[te[H].identifier])&&(Zu(q),C("drag",q,te[H]))}function Y(q){var te=q.changedTouches,G=te.length,H,C;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),H=0;H<G;++H)(C=s[te[H].identifier])&&(Mg(q),C("end",q,te[H]))}function K(q,te,G,H,C,I){var B=o.copy(),P=Yi(I||G,te),V,w,D;if((D=n.call(q,new _y("beforestart",{sourceEvent:G,target:T,identifier:C,active:l,x:P[0],y:P[1],dx:0,dy:0,dispatch:B}),H))!=null)return V=D.x-P[0]||0,w=D.y-P[1]||0,function Q(z,Z,se){var ne=P,A;switch(z){case"start":s[C]=Q,A=l++;break;case"end":delete s[C],--l;case"drag":P=Yi(se||Z,te),A=l;break}B.call(z,q,new _y(z,{sourceEvent:Z,subject:D,target:T,identifier:C,active:A,x:P[0]+V,y:P[1]+w,dx:P[0]-ne[0],dy:P[1]-ne[1],dispatch:B}),H)}}return T.filter=function(q){return arguments.length?(t=typeof q=="function"?q:xf(!!q),T):t},T.container=function(q){return arguments.length?(e=typeof q=="function"?q:xf(q),T):e},T.subject=function(q){return arguments.length?(n=typeof q=="function"?q:xf(q),T):n},T.touchable=function(q){return arguments.length?(r=typeof q=="function"?q:xf(!!q),T):r},T.on=function(){var q=o.on.apply(o,arguments);return q===o?T:q},T.clickDistance=function(q){return arguments.length?(E=(q=+q)*q,T):Math.sqrt(E)},T}function wE(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Cx(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function jh(){}var bh=.7,h0=1/bh,Ju="\\s*([+-]?\\d+)\\s*",vh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tk=/^#([0-9a-f]{3,8})$/,bk=new RegExp(`^rgb\\(${Ju},${Ju},${Ju}\\)$`),vk=new RegExp(`^rgb\\(${Qi},${Qi},${Qi}\\)$`),Ak=new RegExp(`^rgba\\(${Ju},${Ju},${Ju},${vh}\\)$`),Sk=new RegExp(`^rgba\\(${Qi},${Qi},${Qi},${vh}\\)$`),xk=new RegExp(`^hsl\\(${vh},${Qi},${Qi}\\)$`),wk=new RegExp(`^hsla\\(${vh},${Qi},${Qi},${vh}\\)$`),B2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wE(jh,Ah,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:U2,formatHex:U2,formatHex8:Ck,formatHsl:Nk,formatRgb:H2,toString:H2});function U2(){return this.rgb().formatHex()}function Ck(){return this.rgb().formatHex8()}function Nk(){return Nx(this).formatHsl()}function H2(){return this.rgb().formatRgb()}function Ah(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Tk.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?V2(e):n===3?new gr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?wf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?wf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bk.exec(t))?new gr(e[1],e[2],e[3],1):(e=vk.exec(t))?new gr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ak.exec(t))?wf(e[1],e[2],e[3],e[4]):(e=Sk.exec(t))?wf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=xk.exec(t))?j2(e[1],e[2]/100,e[3]/100,1):(e=wk.exec(t))?j2(e[1],e[2]/100,e[3]/100,e[4]):B2.hasOwnProperty(t)?V2(B2[t]):t==="transparent"?new gr(NaN,NaN,NaN,0):null}function V2(t){return new gr(t>>16&255,t>>8&255,t&255,1)}function wf(t,e,n,r){return r<=0&&(t=e=n=NaN),new gr(t,e,n,r)}function Ik(t){return t instanceof jh||(t=Ah(t)),t?(t=t.rgb(),new gr(t.r,t.g,t.b,t.opacity)):new gr}function Ty(t,e,n,r){return arguments.length===1?Ik(t):new gr(t,e,n,r??1)}function gr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}wE(gr,Ty,Cx(jh,{brighter(t){return t=t==null?h0:Math.pow(h0,t),new gr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?bh:Math.pow(bh,t),new gr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new gr(Ro(this.r),Ro(this.g),Ro(this.b),d0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:F2,formatHex:F2,formatHex8:Rk,formatRgb:z2,toString:z2}));function F2(){return`#${wo(this.r)}${wo(this.g)}${wo(this.b)}`}function Rk(){return`#${wo(this.r)}${wo(this.g)}${wo(this.b)}${wo((isNaN(this.opacity)?1:this.opacity)*255)}`}function z2(){const t=d0(this.opacity);return`${t===1?"rgb(":"rgba("}${Ro(this.r)}, ${Ro(this.g)}, ${Ro(this.b)}${t===1?")":`, ${t})`}`}function d0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ro(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function wo(t){return t=Ro(t),(t<16?"0":"")+t.toString(16)}function j2(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ei(t,e,n,r)}function Nx(t){if(t instanceof Ei)return new Ei(t.h,t.s,t.l,t.opacity);if(t instanceof jh||(t=Ah(t)),!t)return new Ei;if(t instanceof Ei)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),o=Math.max(e,n,r),l=NaN,h=o-s,d=(o+s)/2;return h?(e===o?l=(n-r)/h+(n<r)*6:n===o?l=(r-e)/h+2:l=(e-n)/h+4,h/=d<.5?o+s:2-o-s,l*=60):h=d>0&&d<1?0:l,new Ei(l,h,d,t.opacity)}function kk(t,e,n,r){return arguments.length===1?Nx(t):new Ei(t,e,n,r??1)}function Ei(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}wE(Ei,kk,Cx(jh,{brighter(t){return t=t==null?h0:Math.pow(h0,t),new Ei(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bh:Math.pow(bh,t),new Ei(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new gr(Pg(t>=240?t-240:t+120,s,r),Pg(t,s,r),Pg(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Ei(q2(this.h),Cf(this.s),Cf(this.l),d0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=d0(this.opacity);return`${t===1?"hsl(":"hsla("}${q2(this.h)}, ${Cf(this.s)*100}%, ${Cf(this.l)*100}%${t===1?")":`, ${t})`}`}}));function q2(t){return t=(t||0)%360,t<0?t+360:t}function Cf(t){return Math.max(0,Math.min(1,t||0))}function Pg(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ix=t=>()=>t;function Dk(t,e){return function(n){return t+n*e}}function Ok(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Lk(t){return(t=+t)==1?Rx:function(e,n){return n-e?Ok(e,n,t):Ix(isNaN(e)?n:e)}}function Rx(t,e){var n=e-t;return n?Dk(t,n):Ix(isNaN(t)?e:t)}const Y2=function t(e){var n=Lk(e);function r(s,o){var l=n((s=Ty(s)).r,(o=Ty(o)).r),h=n(s.g,o.g),d=n(s.b,o.b),f=Rx(s.opacity,o.opacity);return function(g){return s.r=l(g),s.g=h(g),s.b=d(g),s.opacity=f(g),s+""}}return r.gamma=t,r}(1);function Ea(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var by=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bg=new RegExp(by.source,"g");function Mk(t){return function(){return t}}function Pk(t){return function(e){return t(e)+""}}function Bk(t,e){var n=by.lastIndex=Bg.lastIndex=0,r,s,o,l=-1,h=[],d=[];for(t=t+"",e=e+"";(r=by.exec(t))&&(s=Bg.exec(e));)(o=s.index)>n&&(o=e.slice(n,o),h[l]?h[l]+=o:h[++l]=o),(r=r[0])===(s=s[0])?h[l]?h[l]+=s:h[++l]=s:(h[++l]=null,d.push({i:l,x:Ea(r,s)})),n=Bg.lastIndex;return n<e.length&&(o=e.slice(n),h[l]?h[l]+=o:h[++l]=o),h.length<2?d[0]?Pk(d[0].x):Mk(e):(e=d.length,function(f){for(var g=0,E;g<e;++g)h[(E=d[g]).i]=E.x(f);return h.join("")})}var G2=180/Math.PI,vy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function kx(t,e,n,r,s,o){var l,h,d;return(l=Math.sqrt(t*t+e*e))&&(t/=l,e/=l),(d=t*n+e*r)&&(n-=t*d,r-=e*d),(h=Math.sqrt(n*n+r*r))&&(n/=h,r/=h,d/=h),t*r<e*n&&(t=-t,e=-e,d=-d,l=-l),{translateX:s,translateY:o,rotate:Math.atan2(e,t)*G2,skewX:Math.atan(d)*G2,scaleX:l,scaleY:h}}var Nf;function Uk(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?vy:kx(e.a,e.b,e.c,e.d,e.e,e.f)}function Hk(t){return t==null||(Nf||(Nf=document.createElementNS("http://www.w3.org/2000/svg","g")),Nf.setAttribute("transform",t),!(t=Nf.transform.baseVal.consolidate()))?vy:(t=t.matrix,kx(t.a,t.b,t.c,t.d,t.e,t.f))}function Dx(t,e,n,r){function s(f){return f.length?f.pop()+" ":""}function o(f,g,E,T,b,N){if(f!==E||g!==T){var k=b.push("translate(",null,e,null,n);N.push({i:k-4,x:Ea(f,E)},{i:k-2,x:Ea(g,T)})}else(E||T)&&b.push("translate("+E+e+T+n)}function l(f,g,E,T){f!==g?(f-g>180?g+=360:g-f>180&&(f+=360),T.push({i:E.push(s(E)+"rotate(",null,r)-2,x:Ea(f,g)})):g&&E.push(s(E)+"rotate("+g+r)}function h(f,g,E,T){f!==g?T.push({i:E.push(s(E)+"skewX(",null,r)-2,x:Ea(f,g)}):g&&E.push(s(E)+"skewX("+g+r)}function d(f,g,E,T,b,N){if(f!==E||g!==T){var k=b.push(s(b)+"scale(",null,",",null,")");N.push({i:k-4,x:Ea(f,E)},{i:k-2,x:Ea(g,T)})}else(E!==1||T!==1)&&b.push(s(b)+"scale("+E+","+T+")")}return function(f,g){var E=[],T=[];return f=t(f),g=t(g),o(f.translateX,f.translateY,g.translateX,g.translateY,E,T),l(f.rotate,g.rotate,E,T),h(f.skewX,g.skewX,E,T),d(f.scaleX,f.scaleY,g.scaleX,g.scaleY,E,T),f=g=null,function(b){for(var N=-1,k=T.length,U;++N<k;)E[(U=T[N]).i]=U.x(b);return E.join("")}}}var Vk=Dx(Uk,"px, ","px)","deg)"),Fk=Dx(Hk,", ",")",")"),zk=1e-12;function $2(t){return((t=Math.exp(t))+1/t)/2}function jk(t){return((t=Math.exp(t))-1/t)/2}function qk(t){return((t=Math.exp(2*t))-1)/(t+1)}const Yk=function t(e,n,r){function s(o,l){var h=o[0],d=o[1],f=o[2],g=l[0],E=l[1],T=l[2],b=g-h,N=E-d,k=b*b+N*N,U,M;if(k<zk)M=Math.log(T/f)/e,U=function(H){return[h+H*b,d+H*N,f*Math.exp(e*H*M)]};else{var Y=Math.sqrt(k),K=(T*T-f*f+r*k)/(2*f*n*Y),q=(T*T-f*f-r*k)/(2*T*n*Y),te=Math.log(Math.sqrt(K*K+1)-K),G=Math.log(Math.sqrt(q*q+1)-q);M=(G-te)/e,U=function(H){var C=H*M,I=$2(te),B=f/(n*Y)*(I*qk(e*C+te)-jk(te));return[h+B*b,d+B*N,f*I/$2(e*C+te)]}}return U.duration=M*1e3*e/Math.SQRT2,U}return s.rho=function(o){var l=Math.max(.001,+o),h=l*l,d=h*h;return t(l,h,d)},s}(Math.SQRT2,2,4);var hl=0,Xc=0,Hc=0,Ox=1e3,f0,Wc,m0=0,Do=0,$0=0,Sh=typeof performance=="object"&&performance.now?performance:Date,Lx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function CE(){return Do||(Lx(Gk),Do=Sh.now()+$0)}function Gk(){Do=0}function p0(){this._call=this._time=this._next=null}p0.prototype=Mx.prototype={constructor:p0,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?CE():+n)+(e==null?0:+e),!this._next&&Wc!==this&&(Wc?Wc._next=this:f0=this,Wc=this),this._call=t,this._time=n,Ay()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ay())}};function Mx(t,e,n){var r=new p0;return r.restart(t,e,n),r}function $k(){CE(),++hl;for(var t=f0,e;t;)(e=Do-t._time)>=0&&t._call.call(void 0,e),t=t._next;--hl}function K2(){Do=(m0=Sh.now())+$0,hl=Xc=0;try{$k()}finally{hl=0,Qk(),Do=0}}function Kk(){var t=Sh.now(),e=t-m0;e>Ox&&($0-=e,m0=t)}function Qk(){for(var t,e=f0,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:f0=n);Wc=t,Ay(r)}function Ay(t){if(!hl){Xc&&(Xc=clearTimeout(Xc));var e=t-Do;e>24?(t<1/0&&(Xc=setTimeout(K2,t-Sh.now()-$0)),Hc&&(Hc=clearInterval(Hc))):(Hc||(m0=Sh.now(),Hc=setInterval(Kk,Ox)),hl=1,Lx(K2))}}function Q2(t,e,n){var r=new p0;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var Xk=Y0("start","end","cancel","interrupt"),Wk=[],Px=0,X2=1,Sy=2,Gf=3,W2=4,xy=5,$f=6;function K0(t,e,n,r,s,o){var l=t.__transition;if(!l)t.__transition={};else if(n in l)return;Zk(t,n,{name:e,index:r,group:s,on:Xk,tween:Wk,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Px})}function NE(t,e){var n=Ai(t,e);if(n.state>Px)throw new Error("too late; already scheduled");return n}function rs(t,e){var n=Ai(t,e);if(n.state>Gf)throw new Error("too late; already running");return n}function Ai(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Zk(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=Mx(o,0,n.time);function o(f){n.state=X2,n.timer.restart(l,n.delay,n.time),n.delay<=f&&l(f-n.delay)}function l(f){var g,E,T,b;if(n.state!==X2)return d();for(g in r)if(b=r[g],b.name===n.name){if(b.state===Gf)return Q2(l);b.state===W2?(b.state=$f,b.timer.stop(),b.on.call("interrupt",t,t.__data__,b.index,b.group),delete r[g]):+g<e&&(b.state=$f,b.timer.stop(),b.on.call("cancel",t,t.__data__,b.index,b.group),delete r[g])}if(Q2(function(){n.state===Gf&&(n.state=W2,n.timer.restart(h,n.delay,n.time),h(f))}),n.state=Sy,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Sy){for(n.state=Gf,s=new Array(T=n.tween.length),g=0,E=-1;g<T;++g)(b=n.tween[g].value.call(t,t.__data__,n.index,n.group))&&(s[++E]=b);s.length=E+1}}function h(f){for(var g=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(d),n.state=xy,1),E=-1,T=s.length;++E<T;)s[E].call(t,g);n.state===xy&&(n.on.call("end",t,t.__data__,n.index,n.group),d())}function d(){n.state=$f,n.timer.stop(),delete r[e];for(var f in r)return;delete t.__transition}}function Kf(t,e){var n=t.__transition,r,s,o=!0,l;if(n){e=e==null?null:e+"";for(l in n){if((r=n[l]).name!==e){o=!1;continue}s=r.state>Sy&&r.state<xy,r.state=$f,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[l]}o&&delete t.__transition}}function Jk(t){return this.each(function(){Kf(this,t)})}function eD(t,e){var n,r;return function(){var s=rs(this,t),o=s.tween;if(o!==n){r=n=o;for(var l=0,h=r.length;l<h;++l)if(r[l].name===e){r=r.slice(),r.splice(l,1);break}}s.tween=r}}function tD(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var o=rs(this,t),l=o.tween;if(l!==r){s=(r=l).slice();for(var h={name:e,value:n},d=0,f=s.length;d<f;++d)if(s[d].name===e){s[d]=h;break}d===f&&s.push(h)}o.tween=s}}function nD(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Ai(this.node(),n).tween,s=0,o=r.length,l;s<o;++s)if((l=r[s]).name===t)return l.value;return null}return this.each((e==null?eD:tD)(n,t,e))}function IE(t,e,n){var r=t._id;return t.each(function(){var s=rs(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return Ai(s,r).value[e]}}function Bx(t,e){var n;return(typeof e=="number"?Ea:e instanceof Ah?Y2:(n=Ah(e))?(e=n,Y2):Bk)(t,e)}function rD(t){return function(){this.removeAttribute(t)}}function iD(t){return function(){this.removeAttributeNS(t.space,t.local)}}function sD(t,e,n){var r,s=n+"",o;return function(){var l=this.getAttribute(t);return l===s?null:l===r?o:o=e(r=l,n)}}function aD(t,e,n){var r,s=n+"",o;return function(){var l=this.getAttributeNS(t.space,t.local);return l===s?null:l===r?o:o=e(r=l,n)}}function oD(t,e,n){var r,s,o;return function(){var l,h=n(this),d;return h==null?void this.removeAttribute(t):(l=this.getAttribute(t),d=h+"",l===d?null:l===r&&d===s?o:(s=d,o=e(r=l,h)))}}function uD(t,e,n){var r,s,o;return function(){var l,h=n(this),d;return h==null?void this.removeAttributeNS(t.space,t.local):(l=this.getAttributeNS(t.space,t.local),d=h+"",l===d?null:l===r&&d===s?o:(s=d,o=e(r=l,h)))}}function lD(t,e){var n=G0(t),r=n==="transform"?Fk:Bx;return this.attrTween(t,typeof e=="function"?(n.local?uD:oD)(n,r,IE(this,"attr."+t,e)):e==null?(n.local?iD:rD)(n):(n.local?aD:sD)(n,r,e))}function cD(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function hD(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function dD(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&hD(t,o)),n}return s._value=e,s}function fD(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&cD(t,o)),n}return s._value=e,s}function mD(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=G0(t);return this.tween(n,(r.local?dD:fD)(r,e))}function pD(t,e){return function(){NE(this,t).delay=+e.apply(this,arguments)}}function gD(t,e){return e=+e,function(){NE(this,t).delay=e}}function yD(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?pD:gD)(e,t)):Ai(this.node(),e).delay}function ED(t,e){return function(){rs(this,t).duration=+e.apply(this,arguments)}}function _D(t,e){return e=+e,function(){rs(this,t).duration=e}}function TD(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ED:_D)(e,t)):Ai(this.node(),e).duration}function bD(t,e){if(typeof e!="function")throw new Error;return function(){rs(this,t).ease=e}}function vD(t){var e=this._id;return arguments.length?this.each(bD(e,t)):Ai(this.node(),e).ease}function AD(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;rs(this,t).ease=n}}function SD(t){if(typeof t!="function")throw new Error;return this.each(AD(this._id,t))}function xD(t){typeof t!="function"&&(t=px(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,h=r[s]=[],d,f=0;f<l;++f)(d=o[f])&&t.call(d,d.__data__,f,o)&&h.push(d);return new Ms(r,this._parents,this._name,this._id)}function wD(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,o=Math.min(r,s),l=new Array(r),h=0;h<o;++h)for(var d=e[h],f=n[h],g=d.length,E=l[h]=new Array(g),T,b=0;b<g;++b)(T=d[b]||f[b])&&(E[b]=T);for(;h<r;++h)l[h]=e[h];return new Ms(l,this._parents,this._name,this._id)}function CD(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ND(t,e,n){var r,s,o=CD(e)?NE:rs;return function(){var l=o(this,t),h=l.on;h!==r&&(s=(r=h).copy()).on(e,n),l.on=s}}function ID(t,e){var n=this._id;return arguments.length<2?Ai(this.node(),n).on.on(t):this.each(ND(n,t,e))}function RD(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function kD(){return this.on("end.remove",RD(this._id))}function DD(t){var e=this._name,n=this._id;typeof t!="function"&&(t=SE(t));for(var r=this._groups,s=r.length,o=new Array(s),l=0;l<s;++l)for(var h=r[l],d=h.length,f=o[l]=new Array(d),g,E,T=0;T<d;++T)(g=h[T])&&(E=t.call(g,g.__data__,T,h))&&("__data__"in g&&(E.__data__=g.__data__),f[T]=E,K0(f[T],e,n,T,f,Ai(g,n)));return new Ms(o,this._parents,e,n)}function OD(t){var e=this._name,n=this._id;typeof t!="function"&&(t=mx(t));for(var r=this._groups,s=r.length,o=[],l=[],h=0;h<s;++h)for(var d=r[h],f=d.length,g,E=0;E<f;++E)if(g=d[E]){for(var T=t.call(g,g.__data__,E,d),b,N=Ai(g,n),k=0,U=T.length;k<U;++k)(b=T[k])&&K0(b,e,n,k,T,N);o.push(T),l.push(g)}return new Ms(o,l,e,n)}var LD=zh.prototype.constructor;function MD(){return new LD(this._groups,this._parents)}function PD(t,e){var n,r,s;return function(){var o=cl(this,t),l=(this.style.removeProperty(t),cl(this,t));return o===l?null:o===n&&l===r?s:s=e(n=o,r=l)}}function Ux(t){return function(){this.style.removeProperty(t)}}function BD(t,e,n){var r,s=n+"",o;return function(){var l=cl(this,t);return l===s?null:l===r?o:o=e(r=l,n)}}function UD(t,e,n){var r,s,o;return function(){var l=cl(this,t),h=n(this),d=h+"";return h==null&&(d=h=(this.style.removeProperty(t),cl(this,t))),l===d?null:l===r&&d===s?o:(s=d,o=e(r=l,h))}}function HD(t,e){var n,r,s,o="style."+e,l="end."+o,h;return function(){var d=rs(this,t),f=d.on,g=d.value[o]==null?h||(h=Ux(e)):void 0;(f!==n||s!==g)&&(r=(n=f).copy()).on(l,s=g),d.on=r}}function VD(t,e,n){var r=(t+="")=="transform"?Vk:Bx;return e==null?this.styleTween(t,PD(t,r)).on("end.style."+t,Ux(t)):typeof e=="function"?this.styleTween(t,UD(t,r,IE(this,"style."+t,e))).each(HD(this._id,t)):this.styleTween(t,BD(t,r,e),n).on("end.style."+t,null)}function FD(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function zD(t,e,n){var r,s;function o(){var l=e.apply(this,arguments);return l!==s&&(r=(s=l)&&FD(t,l,n)),r}return o._value=e,o}function jD(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,zD(t,e,n??""))}function qD(t){return function(){this.textContent=t}}function YD(t){return function(){var e=t(this);this.textContent=e??""}}function GD(t){return this.tween("text",typeof t=="function"?YD(IE(this,"text",t)):qD(t==null?"":t+""))}function $D(t){return function(e){this.textContent=t.call(this,e)}}function KD(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&$D(s)),e}return r._value=t,r}function QD(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,KD(t))}function XD(){for(var t=this._name,e=this._id,n=Hx(),r=this._groups,s=r.length,o=0;o<s;++o)for(var l=r[o],h=l.length,d,f=0;f<h;++f)if(d=l[f]){var g=Ai(d,e);K0(d,t,n,f,l,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Ms(r,this._parents,t,n)}function WD(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(o,l){var h={value:l},d={value:function(){--s===0&&o()}};n.each(function(){var f=rs(this,r),g=f.on;g!==t&&(e=(t=g).copy(),e._.cancel.push(h),e._.interrupt.push(h),e._.end.push(d)),f.on=e}),s===0&&o()})}var ZD=0;function Ms(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Hx(){return++ZD}var Is=zh.prototype;Ms.prototype={constructor:Ms,select:DD,selectAll:OD,selectChild:Is.selectChild,selectChildren:Is.selectChildren,filter:xD,merge:wD,selection:MD,transition:XD,call:Is.call,nodes:Is.nodes,node:Is.node,size:Is.size,empty:Is.empty,each:Is.each,on:ID,attr:lD,attrTween:mD,style:VD,styleTween:jD,text:GD,textTween:QD,remove:kD,tween:nD,delay:yD,duration:TD,ease:vD,easeVarying:SD,end:WD,[Symbol.iterator]:Is[Symbol.iterator]};function JD(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var eO={time:null,delay:0,duration:250,ease:JD};function tO(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function nO(t){var e,n;t instanceof Ms?(e=t._id,t=t._name):(e=Hx(),(n=eO).time=CE(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,o=0;o<s;++o)for(var l=r[o],h=l.length,d,f=0;f<h;++f)(d=l[f])&&K0(d,t,e,f,l,n||tO(d,e));return new Ms(r,this._parents,t,e)}zh.prototype.interrupt=Jk;zh.prototype.transition=nO;const If=t=>()=>t;function rO(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function ks(t,e,n){this.k=t,this.x=e,this.y=n}ks.prototype={constructor:ks,scale:function(t){return t===1?this:new ks(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ks(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ca=new ks(1,0,0);ks.prototype;function Ug(t){t.stopImmediatePropagation()}function Vc(t){t.preventDefault(),t.stopImmediatePropagation()}function iO(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function sO(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Z2(){return this.__zoom||Ca}function aO(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function oO(){return navigator.maxTouchPoints||"ontouchstart"in this}function uO(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],l=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),l>o?(o+l)/2:Math.min(0,o)||Math.max(0,l))}function lO(){var t=iO,e=sO,n=uO,r=aO,s=oO,o=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],h=250,d=Yk,f=Y0("start","zoom","end"),g,E,T,b=500,N=150,k=0,U=10;function M(D){D.property("__zoom",Z2).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",B).filter(s).on("touchstart.zoom",P).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",w).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}M.transform=function(D,Q,z,Z){var se=D.selection?D.selection():D;se.property("__zoom",Z2),D!==se?te(D,Q,z,Z):se.interrupt().each(function(){G(this,arguments).event(Z).start().zoom(null,typeof Q=="function"?Q.apply(this,arguments):Q).end()})},M.scaleBy=function(D,Q,z,Z){M.scaleTo(D,function(){var se=this.__zoom.k,ne=typeof Q=="function"?Q.apply(this,arguments):Q;return se*ne},z,Z)},M.scaleTo=function(D,Q,z,Z){M.transform(D,function(){var se=e.apply(this,arguments),ne=this.__zoom,A=z==null?q(se):typeof z=="function"?z.apply(this,arguments):z,J=ne.invert(A),ae=typeof Q=="function"?Q.apply(this,arguments):Q;return n(K(Y(ne,ae),A,J),se,l)},z,Z)},M.translateBy=function(D,Q,z,Z){M.transform(D,function(){return n(this.__zoom.translate(typeof Q=="function"?Q.apply(this,arguments):Q,typeof z=="function"?z.apply(this,arguments):z),e.apply(this,arguments),l)},null,Z)},M.translateTo=function(D,Q,z,Z,se){M.transform(D,function(){var ne=e.apply(this,arguments),A=this.__zoom,J=Z==null?q(ne):typeof Z=="function"?Z.apply(this,arguments):Z;return n(Ca.translate(J[0],J[1]).scale(A.k).translate(typeof Q=="function"?-Q.apply(this,arguments):-Q,typeof z=="function"?-z.apply(this,arguments):-z),ne,l)},Z,se)};function Y(D,Q){return Q=Math.max(o[0],Math.min(o[1],Q)),Q===D.k?D:new ks(Q,D.x,D.y)}function K(D,Q,z){var Z=Q[0]-z[0]*D.k,se=Q[1]-z[1]*D.k;return Z===D.x&&se===D.y?D:new ks(D.k,Z,se)}function q(D){return[(+D[0][0]+ +D[1][0])/2,(+D[0][1]+ +D[1][1])/2]}function te(D,Q,z,Z){D.on("start.zoom",function(){G(this,arguments).event(Z).start()}).on("interrupt.zoom end.zoom",function(){G(this,arguments).event(Z).end()}).tween("zoom",function(){var se=this,ne=arguments,A=G(se,ne).event(Z),J=e.apply(se,ne),ae=z==null?q(J):typeof z=="function"?z.apply(se,ne):z,O=Math.max(J[1][0]-J[0][0],J[1][1]-J[0][1]),ge=se.__zoom,Ie=typeof Q=="function"?Q.apply(se,ne):Q,xe=d(ge.invert(ae).concat(O/ge.k),Ie.invert(ae).concat(O/Ie.k));return function(Ve){if(Ve===1)Ve=Ie;else{var Pe=xe(Ve),tt=O/Pe[2];Ve=new ks(tt,ae[0]-Pe[0]*tt,ae[1]-Pe[1]*tt)}A.zoom(null,Ve)}})}function G(D,Q,z){return!z&&D.__zooming||new H(D,Q)}function H(D,Q){this.that=D,this.args=Q,this.active=0,this.sourceEvent=null,this.extent=e.apply(D,Q),this.taps=0}H.prototype={event:function(D){return D&&(this.sourceEvent=D),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(D,Q){return this.mouse&&D!=="mouse"&&(this.mouse[1]=Q.invert(this.mouse[0])),this.touch0&&D!=="touch"&&(this.touch0[1]=Q.invert(this.touch0[0])),this.touch1&&D!=="touch"&&(this.touch1[1]=Q.invert(this.touch1[0])),this.that.__zoom=Q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(D){var Q=yi(this.that).datum();f.call(D,this.that,new rO(D,{sourceEvent:this.sourceEvent,target:M,transform:this.that.__zoom,dispatch:f}),Q)}};function C(D,...Q){if(!t.apply(this,arguments))return;var z=G(this,Q).event(D),Z=this.__zoom,se=Math.max(o[0],Math.min(o[1],Z.k*Math.pow(2,r.apply(this,arguments)))),ne=Yi(D);if(z.wheel)(z.mouse[0][0]!==ne[0]||z.mouse[0][1]!==ne[1])&&(z.mouse[1]=Z.invert(z.mouse[0]=ne)),clearTimeout(z.wheel);else{if(Z.k===se)return;z.mouse=[ne,Z.invert(ne)],Kf(this),z.start()}Vc(D),z.wheel=setTimeout(A,N),z.zoom("mouse",n(K(Y(Z,se),z.mouse[0],z.mouse[1]),z.extent,l));function A(){z.wheel=null,z.end()}}function I(D,...Q){if(T||!t.apply(this,arguments))return;var z=D.currentTarget,Z=G(this,Q,!0).event(D),se=yi(D.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",O,!0),ne=Yi(D,z),A=D.clientX,J=D.clientY;xx(D.view),Ug(D),Z.mouse=[ne,this.__zoom.invert(ne)],Kf(this),Z.start();function ae(ge){if(Vc(ge),!Z.moved){var Ie=ge.clientX-A,xe=ge.clientY-J;Z.moved=Ie*Ie+xe*xe>k}Z.event(ge).zoom("mouse",n(K(Z.that.__zoom,Z.mouse[0]=Yi(ge,z),Z.mouse[1]),Z.extent,l))}function O(ge){se.on("mousemove.zoom mouseup.zoom",null),wx(ge.view,Z.moved),Vc(ge),Z.event(ge).end()}}function B(D,...Q){if(t.apply(this,arguments)){var z=this.__zoom,Z=Yi(D.changedTouches?D.changedTouches[0]:D,this),se=z.invert(Z),ne=z.k*(D.shiftKey?.5:2),A=n(K(Y(z,ne),Z,se),e.apply(this,Q),l);Vc(D),h>0?yi(this).transition().duration(h).call(te,A,Z,D):yi(this).call(M.transform,A,Z,D)}}function P(D,...Q){if(t.apply(this,arguments)){var z=D.touches,Z=z.length,se=G(this,Q,D.changedTouches.length===Z).event(D),ne,A,J,ae;for(Ug(D),A=0;A<Z;++A)J=z[A],ae=Yi(J,this),ae=[ae,this.__zoom.invert(ae),J.identifier],se.touch0?!se.touch1&&se.touch0[2]!==ae[2]&&(se.touch1=ae,se.taps=0):(se.touch0=ae,ne=!0,se.taps=1+!!g);g&&(g=clearTimeout(g)),ne&&(se.taps<2&&(E=ae[0],g=setTimeout(function(){g=null},b)),Kf(this),se.start())}}function V(D,...Q){if(this.__zooming){var z=G(this,Q).event(D),Z=D.changedTouches,se=Z.length,ne,A,J,ae;for(Vc(D),ne=0;ne<se;++ne)A=Z[ne],J=Yi(A,this),z.touch0&&z.touch0[2]===A.identifier?z.touch0[0]=J:z.touch1&&z.touch1[2]===A.identifier&&(z.touch1[0]=J);if(A=z.that.__zoom,z.touch1){var O=z.touch0[0],ge=z.touch0[1],Ie=z.touch1[0],xe=z.touch1[1],Ve=(Ve=Ie[0]-O[0])*Ve+(Ve=Ie[1]-O[1])*Ve,Pe=(Pe=xe[0]-ge[0])*Pe+(Pe=xe[1]-ge[1])*Pe;A=Y(A,Math.sqrt(Ve/Pe)),J=[(O[0]+Ie[0])/2,(O[1]+Ie[1])/2],ae=[(ge[0]+xe[0])/2,(ge[1]+xe[1])/2]}else if(z.touch0)J=z.touch0[0],ae=z.touch0[1];else return;z.zoom("touch",n(K(A,J,ae),z.extent,l))}}function w(D,...Q){if(this.__zooming){var z=G(this,Q).event(D),Z=D.changedTouches,se=Z.length,ne,A;for(Ug(D),T&&clearTimeout(T),T=setTimeout(function(){T=null},b),ne=0;ne<se;++ne)A=Z[ne],z.touch0&&z.touch0[2]===A.identifier?delete z.touch0:z.touch1&&z.touch1[2]===A.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(A=Yi(A,this),Math.hypot(E[0]-A[0],E[1]-A[1])<U)){var J=yi(this).on("dblclick.zoom");J&&J.apply(this,arguments)}}}return M.wheelDelta=function(D){return arguments.length?(r=typeof D=="function"?D:If(+D),M):r},M.filter=function(D){return arguments.length?(t=typeof D=="function"?D:If(!!D),M):t},M.touchable=function(D){return arguments.length?(s=typeof D=="function"?D:If(!!D),M):s},M.extent=function(D){return arguments.length?(e=typeof D=="function"?D:If([[+D[0][0],+D[0][1]],[+D[1][0],+D[1][1]]]),M):e},M.scaleExtent=function(D){return arguments.length?(o[0]=+D[0],o[1]=+D[1],M):[o[0],o[1]]},M.translateExtent=function(D){return arguments.length?(l[0][0]=+D[0][0],l[1][0]=+D[1][0],l[0][1]=+D[0][1],l[1][1]=+D[1][1],M):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},M.constrain=function(D){return arguments.length?(n=D,M):n},M.duration=function(D){return arguments.length?(h=+D,M):h},M.interpolate=function(D){return arguments.length?(d=D,M):d},M.on=function(){var D=f.on.apply(f,arguments);return D===f?M:D},M.clickDistance=function(D){return arguments.length?(k=(D=+D)*D,M):Math.sqrt(k)},M.tapDistance=function(D){return arguments.length?(U=+D,M):U},M}hx();const Q0=ie.createContext(null),cO=Q0.Provider,Ps={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Vx=Ps.error001();function Gt(t,e){const n=ie.useContext(Q0);if(n===null)throw new Error(Vx);return dx(n,t,e)}const Ln=()=>{const t=ie.useContext(Q0);if(t===null)throw new Error(Vx);return ie.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},hO=t=>t.userSelectionActive?"none":"all";function Fx({position:t,children:e,className:n,style:r,...s}){const o=Gt(hO),l=`${t}`.split("-");return Ee.createElement("div",{className:ar(["react-flow__panel",n,...l]),style:{...r,pointerEvents:o},...s},e)}function dO({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:Ee.createElement(Fx,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},Ee.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const fO=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:o={},labelBgPadding:l=[2,4],labelBgBorderRadius:h=2,children:d,className:f,...g})=>{const E=ie.useRef(null),[T,b]=ie.useState({x:0,y:0,width:0,height:0}),N=ar(["react-flow__edge-textwrapper",f]);return ie.useEffect(()=>{if(E.current){const k=E.current.getBBox();b({x:k.x,y:k.y,width:k.width,height:k.height})}},[n]),typeof n>"u"||!n?null:Ee.createElement("g",{transform:`translate(${t-T.width/2} ${e-T.height/2})`,className:N,visibility:T.width?"visible":"hidden",...g},s&&Ee.createElement("rect",{width:T.width+2*l[0],x:-l[0],y:-l[1],height:T.height+2*l[1],className:"react-flow__edge-textbg",style:o,rx:h,ry:h}),Ee.createElement("text",{className:"react-flow__edge-text",y:T.height/2,dy:"0.3em",ref:E,style:r},n),d)};var mO=ie.memo(fO);const RE=t=>({width:t.offsetWidth,height:t.offsetHeight}),dl=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),kE=(t={x:0,y:0},e)=>({x:dl(t.x,e[0][0],e[1][0]),y:dl(t.y,e[0][1],e[1][1])}),J2=(t,e,n)=>t<e?dl(Math.abs(t-e),1,50)/50:t>n?-dl(Math.abs(t-n),1,50)/50:0,zx=(t,e)=>{const n=J2(t.x,35,e.width-35)*20,r=J2(t.y,35,e.height-35)*20;return[n,r]},jx=t=>t.getRootNode?.()||window?.document,pO=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),DE=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),gO=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),ev=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),wy=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},yO=t=>oi(t.width)&&oi(t.height)&&oi(t.x)&&oi(t.y),oi=t=>!isNaN(t)&&isFinite(t),tn=Symbol.for("internals"),qx=["Enter"," ","Escape"],EO=(t,e)=>{},_O=t=>"nativeEvent"in t;function Cy(t){const n=(_O(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const Yx=t=>"clientX"in t,Na=(t,e)=>{const n=Yx(t),r=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:s-(e?.top??0)}},g0=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,qh=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:h,labelBgPadding:d,labelBgBorderRadius:f,style:g,markerEnd:E,markerStart:T,interactionWidth:b=20})=>Ee.createElement(Ee.Fragment,null,Ee.createElement("path",{id:t,style:g,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:E,markerStart:T}),b&&Ee.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:b,className:"react-flow__edge-interaction"}),s&&oi(n)&&oi(r)?Ee.createElement(mO,{x:n,y:r,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:h,labelBgPadding:d,labelBgBorderRadius:f}):null);qh.displayName="BaseEdge";function Fc(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(o=>o.id===t);s&&n(r,{...s})}}function Gx({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,o=n<t?n+s:n-s,l=Math.abs(r-e)/2,h=r<e?r+l:r-l;return[o,h,s,l]}function $x({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:o,targetControlX:l,targetControlY:h}){const d=t*.125+s*.375+l*.375+n*.125,f=e*.125+o*.375+h*.375+r*.125,g=Math.abs(d-t),E=Math.abs(f-e);return[d,f,g,E]}var La;(function(t){t.Strict="strict",t.Loose="loose"})(La||(La={}));var Co;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Co||(Co={}));var xh;(function(t){t.Partial="partial",t.Full="full"})(xh||(xh={}));var Ta;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ta||(Ta={}));var wh;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(wh||(wh={}));var Me;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Me||(Me={}));function tv({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===Me.Left||t===Me.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function Kx({sourceX:t,sourceY:e,sourcePosition:n=Me.Bottom,targetX:r,targetY:s,targetPosition:o=Me.Top}){const[l,h]=tv({pos:n,x1:t,y1:e,x2:r,y2:s}),[d,f]=tv({pos:o,x1:r,y1:s,x2:t,y2:e}),[g,E,T,b]=$x({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:l,sourceControlY:h,targetControlX:d,targetControlY:f});return[`M${t},${e} C${l},${h} ${d},${f} ${r},${s}`,g,E,T,b]}const OE=ie.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Me.Bottom,targetPosition:o=Me.Top,label:l,labelStyle:h,labelShowBg:d,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:E,style:T,markerEnd:b,markerStart:N,interactionWidth:k})=>{const[U,M,Y]=Kx({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o});return Ee.createElement(qh,{path:U,labelX:M,labelY:Y,label:l,labelStyle:h,labelShowBg:d,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:E,style:T,markerEnd:b,markerStart:N,interactionWidth:k})});OE.displayName="SimpleBezierEdge";const nv={[Me.Left]:{x:-1,y:0},[Me.Right]:{x:1,y:0},[Me.Top]:{x:0,y:-1},[Me.Bottom]:{x:0,y:1}},TO=({source:t,sourcePosition:e=Me.Bottom,target:n})=>e===Me.Left||e===Me.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},rv=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function bO({source:t,sourcePosition:e=Me.Bottom,target:n,targetPosition:r=Me.Top,center:s,offset:o}){const l=nv[e],h=nv[r],d={x:t.x+l.x*o,y:t.y+l.y*o},f={x:n.x+h.x*o,y:n.y+h.y*o},g=TO({source:d,sourcePosition:e,target:f}),E=g.x!==0?"x":"y",T=g[E];let b=[],N,k;const U={x:0,y:0},M={x:0,y:0},[Y,K,q,te]=Gx({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(l[E]*h[E]===-1){N=s.x??Y,k=s.y??K;const H=[{x:N,y:d.y},{x:N,y:f.y}],C=[{x:d.x,y:k},{x:f.x,y:k}];l[E]===T?b=E==="x"?H:C:b=E==="x"?C:H}else{const H=[{x:d.x,y:f.y}],C=[{x:f.x,y:d.y}];if(E==="x"?b=l.x===T?C:H:b=l.y===T?H:C,e===r){const w=Math.abs(t[E]-n[E]);if(w<=o){const D=Math.min(o-1,o-w);l[E]===T?U[E]=(d[E]>t[E]?-1:1)*D:M[E]=(f[E]>n[E]?-1:1)*D}}if(e!==r){const w=E==="x"?"y":"x",D=l[E]===h[w],Q=d[w]>f[w],z=d[w]<f[w];(l[E]===1&&(!D&&Q||D&&z)||l[E]!==1&&(!D&&z||D&&Q))&&(b=E==="x"?H:C)}const I={x:d.x+U.x,y:d.y+U.y},B={x:f.x+M.x,y:f.y+M.y},P=Math.max(Math.abs(I.x-b[0].x),Math.abs(B.x-b[0].x)),V=Math.max(Math.abs(I.y-b[0].y),Math.abs(B.y-b[0].y));P>=V?(N=(I.x+B.x)/2,k=b[0].y):(N=b[0].x,k=(I.y+B.y)/2)}return[[t,{x:d.x+U.x,y:d.y+U.y},...b,{x:f.x+M.x,y:f.y+M.y},n],N,k,q,te]}function vO(t,e,n,r){const s=Math.min(rv(t,e)/2,rv(e,n)/2,r),{x:o,y:l}=e;if(t.x===o&&o===n.x||t.y===l&&l===n.y)return`L${o} ${l}`;if(t.y===l){const f=t.x<n.x?-1:1,g=t.y<n.y?1:-1;return`L ${o+s*f},${l}Q ${o},${l} ${o},${l+s*g}`}const h=t.x<n.x?1:-1,d=t.y<n.y?-1:1;return`L ${o},${l+s*d}Q ${o},${l} ${o+s*h},${l}`}function Ny({sourceX:t,sourceY:e,sourcePosition:n=Me.Bottom,targetX:r,targetY:s,targetPosition:o=Me.Top,borderRadius:l=5,centerX:h,centerY:d,offset:f=20}){const[g,E,T,b,N]=bO({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:o,center:{x:h,y:d},offset:f});return[g.reduce((U,M,Y)=>{let K="";return Y>0&&Y<g.length-1?K=vO(g[Y-1],M,g[Y+1],l):K=`${Y===0?"M":"L"}${M.x} ${M.y}`,U+=K,U},""),E,T,b,N]}const X0=ie.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:h,labelBgPadding:d,labelBgBorderRadius:f,style:g,sourcePosition:E=Me.Bottom,targetPosition:T=Me.Top,markerEnd:b,markerStart:N,pathOptions:k,interactionWidth:U})=>{const[M,Y,K]=Ny({sourceX:t,sourceY:e,sourcePosition:E,targetX:n,targetY:r,targetPosition:T,borderRadius:k?.borderRadius,offset:k?.offset});return Ee.createElement(qh,{path:M,labelX:Y,labelY:K,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:h,labelBgPadding:d,labelBgBorderRadius:f,style:g,markerEnd:b,markerStart:N,interactionWidth:U})});X0.displayName="SmoothStepEdge";const LE=ie.memo(t=>Ee.createElement(X0,{...t,pathOptions:ie.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));LE.displayName="StepEdge";function AO({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,o,l,h]=Gx({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,o,l,h]}const ME=ie.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:h,labelBgPadding:d,labelBgBorderRadius:f,style:g,markerEnd:E,markerStart:T,interactionWidth:b})=>{const[N,k,U]=AO({sourceX:t,sourceY:e,targetX:n,targetY:r});return Ee.createElement(qh,{path:N,labelX:k,labelY:U,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:h,labelBgPadding:d,labelBgBorderRadius:f,style:g,markerEnd:E,markerStart:T,interactionWidth:b})});ME.displayName="StraightEdge";function Rf(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function iv({pos:t,x1:e,y1:n,x2:r,y2:s,c:o}){switch(t){case Me.Left:return[e-Rf(e-r,o),n];case Me.Right:return[e+Rf(r-e,o),n];case Me.Top:return[e,n-Rf(n-s,o)];case Me.Bottom:return[e,n+Rf(s-n,o)]}}function Qx({sourceX:t,sourceY:e,sourcePosition:n=Me.Bottom,targetX:r,targetY:s,targetPosition:o=Me.Top,curvature:l=.25}){const[h,d]=iv({pos:n,x1:t,y1:e,x2:r,y2:s,c:l}),[f,g]=iv({pos:o,x1:r,y1:s,x2:t,y2:e,c:l}),[E,T,b,N]=$x({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:h,sourceControlY:d,targetControlX:f,targetControlY:g});return[`M${t},${e} C${h},${d} ${f},${g} ${r},${s}`,E,T,b,N]}const y0=ie.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Me.Bottom,targetPosition:o=Me.Top,label:l,labelStyle:h,labelShowBg:d,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:E,style:T,markerEnd:b,markerStart:N,pathOptions:k,interactionWidth:U})=>{const[M,Y,K]=Qx({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o,curvature:k?.curvature});return Ee.createElement(qh,{path:M,labelX:Y,labelY:K,label:l,labelStyle:h,labelShowBg:d,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:E,style:T,markerEnd:b,markerStart:N,interactionWidth:U})});y0.displayName="BezierEdge";const PE=ie.createContext(null),SO=PE.Provider;PE.Consumer;const xO=()=>ie.useContext(PE),wO=t=>"id"in t&&"source"in t&&"target"in t,CO=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,Iy=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,NO=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),IO=(t,e)=>{if(!t.source||!t.target)return e;let n;return wO(t)?n={...t}:n={...t,id:CO(t)},NO(n,e)?e:e.concat(n)},Ry=({x:t,y:e},[n,r,s],o,[l,h])=>{const d={x:(t-n)/s,y:(e-r)/s};return o?{x:l*Math.round(d.x/l),y:h*Math.round(d.y/h)}:d},Xx=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),el=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},BE=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:o,y:l}=el(s,e).positionAbsolute;return pO(r,DE({x:o,y:l,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return gO(n)},Wx=(t,e,[n,r,s]=[0,0,1],o=!1,l=!1,h=[0,0])=>{const d={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},f=[];return t.forEach(g=>{const{width:E,height:T,selectable:b=!0,hidden:N=!1}=g;if(l&&!b||N)return!1;const{positionAbsolute:k}=el(g,h),U={x:k.x,y:k.y,width:E||0,height:T||0},M=wy(d,U),Y=typeof E>"u"||typeof T>"u"||E===null||T===null,K=o&&M>0,q=(E||0)*(T||0);(Y||K||M>=q||g.dragging)&&f.push(g)}),f},Zx=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},Jx=(t,e,n,r,s,o=.1)=>{const l=e/(t.width*(1+o)),h=n/(t.height*(1+o)),d=Math.min(l,h),f=dl(d,r,s),g=t.x+t.width/2,E=t.y+t.height/2,T=e/2-g*f,b=n/2-E*f;return{x:T,y:b,zoom:f}},So=(t,e=0)=>t.transition().duration(e);function sv(t,e,n,r){return(e[n]||[]).reduce((s,o)=>(`${t.id}-${o.id}-${n}`!==r&&s.push({id:o.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+o.x+o.width/2,y:(t.positionAbsolute?.y??0)+o.y+o.height/2}),s),[])}function RO(t,e,n,r,s,o){const{x:l,y:h}=Na(t),f=e.elementsFromPoint(l,h).find(N=>N.classList.contains("react-flow__handle"));if(f){const N=f.getAttribute("data-nodeid");if(N){const k=UE(void 0,f),U=f.getAttribute("data-handleid"),M=o({nodeId:N,id:U,type:k});if(M){const Y=s.find(K=>K.nodeId===N&&K.type===k&&K.id===U);return{handle:{id:U,type:k,nodeId:N,x:Y?.x||n.x,y:Y?.y||n.y},validHandleResult:M}}}}let g=[],E=1/0;if(s.forEach(N=>{const k=Math.sqrt((N.x-n.x)**2+(N.y-n.y)**2);if(k<=r){const U=o(N);k<=E&&(k<E?g=[{handle:N,validHandleResult:U}]:k===E&&g.push({handle:N,validHandleResult:U}),E=k)}}),!g.length)return{handle:null,validHandleResult:ew()};if(g.length===1)return g[0];const T=g.some(({validHandleResult:N})=>N.isValid),b=g.some(({handle:N})=>N.type==="target");return g.find(({handle:N,validHandleResult:k})=>b?N.type==="target":T?k.isValid:!0)||g[0]}const kO={source:null,target:null,sourceHandle:null,targetHandle:null},ew=()=>({handleDomNode:null,isValid:!1,connection:kO,endHandle:null});function tw(t,e,n,r,s,o,l){const h=s==="target",d=l.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),f={...ew(),handleDomNode:d};if(d){const g=UE(void 0,d),E=d.getAttribute("data-nodeid"),T=d.getAttribute("data-handleid"),b=d.classList.contains("connectable"),N=d.classList.contains("connectableend"),k={source:h?E:n,sourceHandle:h?T:r,target:h?n:E,targetHandle:h?r:T};f.connection=k,b&&N&&(e===La.Strict?h&&g==="source"||!h&&g==="target":E!==n||T!==r)&&(f.endHandle={nodeId:E,handleId:T,type:g},f.isValid=o(k))}return f}function DO({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,o)=>{if(o[tn]){const{handleBounds:l}=o[tn];let h=[],d=[];l&&(h=sv(o,l,"source",`${e}-${n}-${r}`),d=sv(o,l,"target",`${e}-${n}-${r}`)),s.push(...h,...d)}return s},[])}function UE(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function Hg(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function OO(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function nw({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:o,setState:l,isValidConnection:h,edgeUpdaterType:d,onReconnectEnd:f}){const g=jx(t.target),{connectionMode:E,domNode:T,autoPanOnConnect:b,connectionRadius:N,onConnectStart:k,panBy:U,getNodes:M,cancelConnection:Y}=o();let K=0,q;const{x:te,y:G}=Na(t),H=g?.elementFromPoint(te,G),C=UE(d,H),I=T?.getBoundingClientRect();if(!I||!C)return;let B,P=Na(t,I),V=!1,w=null,D=!1,Q=null;const z=DO({nodes:M(),nodeId:n,handleId:e,handleType:C}),Z=()=>{if(!b)return;const[A,J]=zx(P,I);U({x:A,y:J}),K=requestAnimationFrame(Z)};l({connectionPosition:P,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:C,connectionStartHandle:{nodeId:n,handleId:e,type:C},connectionEndHandle:null}),k?.(t,{nodeId:n,handleId:e,handleType:C});function se(A){const{transform:J}=o();P=Na(A,I);const{handle:ae,validHandleResult:O}=RO(A,g,Ry(P,J,!1,[1,1]),N,z,ge=>tw(ge,E,n,e,s?"target":"source",h,g));if(q=ae,V||(Z(),V=!0),Q=O.handleDomNode,w=O.connection,D=O.isValid,l({connectionPosition:q&&D?Xx({x:q.x,y:q.y},J):P,connectionStatus:OO(!!q,D),connectionEndHandle:O.endHandle}),!q&&!D&&!Q)return Hg(B);w.source!==w.target&&Q&&(Hg(B),B=Q,Q.classList.add("connecting","react-flow__handle-connecting"),Q.classList.toggle("valid",D),Q.classList.toggle("react-flow__handle-valid",D))}function ne(A){(q||Q)&&w&&D&&r?.(w),o().onConnectEnd?.(A),d&&f?.(A),Hg(B),Y(),cancelAnimationFrame(K),V=!1,D=!1,w=null,Q=null,g.removeEventListener("mousemove",se),g.removeEventListener("mouseup",ne),g.removeEventListener("touchmove",se),g.removeEventListener("touchend",ne)}g.addEventListener("mousemove",se),g.addEventListener("mouseup",ne),g.addEventListener("touchmove",se),g.addEventListener("touchend",ne)}const av=()=>!0,LO=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),MO=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:o,connectionClickStartHandle:l}=r;return{connecting:s?.nodeId===t&&s?.handleId===e&&s?.type===n||o?.nodeId===t&&o?.handleId===e&&o?.type===n,clickConnecting:l?.nodeId===t&&l?.handleId===e&&l?.type===n}},rw=ie.forwardRef(({type:t="source",position:e=Me.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:l,onConnect:h,children:d,className:f,onMouseDown:g,onTouchStart:E,...T},b)=>{const N=l||null,k=t==="target",U=Ln(),M=xO(),{connectOnClick:Y,noPanClassName:K}=Gt(LO,Xn),{connecting:q,clickConnecting:te}=Gt(MO(M,N,t),Xn);M||U.getState().onError?.("010",Ps.error010());const G=I=>{const{defaultEdgeOptions:B,onConnect:P,hasDefaultEdges:V}=U.getState(),w={...B,...I};if(V){const{edges:D,setEdges:Q}=U.getState();Q(IO(w,D))}P?.(w),h?.(w)},H=I=>{if(!M)return;const B=Yx(I);s&&(B&&I.button===0||!B)&&nw({event:I,handleId:N,nodeId:M,onConnect:G,isTarget:k,getState:U.getState,setState:U.setState,isValidConnection:n||U.getState().isValidConnection||av}),B?g?.(I):E?.(I)},C=I=>{const{onClickConnectStart:B,onClickConnectEnd:P,connectionClickStartHandle:V,connectionMode:w,isValidConnection:D}=U.getState();if(!M||!V&&!s)return;if(!V){B?.(I,{nodeId:M,handleId:N,handleType:t}),U.setState({connectionClickStartHandle:{nodeId:M,type:t,handleId:N}});return}const Q=jx(I.target),z=n||D||av,{connection:Z,isValid:se}=tw({nodeId:M,id:N,type:t},w,V.nodeId,V.handleId||null,V.type,z,Q);se&&G(Z),P?.(I),U.setState({connectionClickStartHandle:null})};return Ee.createElement("div",{"data-handleid":N,"data-nodeid":M,"data-handlepos":e,"data-id":`${M}-${N}-${t}`,className:ar(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",K,f,{source:!k,target:k,connectable:r,connectablestart:s,connectableend:o,connecting:te,connectionindicator:r&&(s&&!q||o&&q)}]),onMouseDown:H,onTouchStart:H,onClick:Y?C:void 0,ref:b,...T},d)});rw.displayName="Handle";var mr=ie.memo(rw);const iw=({data:t,isConnectable:e,targetPosition:n=Me.Top,sourcePosition:r=Me.Bottom})=>Ee.createElement(Ee.Fragment,null,Ee.createElement(mr,{type:"target",position:n,isConnectable:e}),t?.label,Ee.createElement(mr,{type:"source",position:r,isConnectable:e}));iw.displayName="DefaultNode";var ky=ie.memo(iw);const sw=({data:t,isConnectable:e,sourcePosition:n=Me.Bottom})=>Ee.createElement(Ee.Fragment,null,t?.label,Ee.createElement(mr,{type:"source",position:n,isConnectable:e}));sw.displayName="InputNode";var aw=ie.memo(sw);const ow=({data:t,isConnectable:e,targetPosition:n=Me.Top})=>Ee.createElement(Ee.Fragment,null,Ee.createElement(mr,{type:"target",position:n,isConnectable:e}),t?.label);ow.displayName="OutputNode";var uw=ie.memo(ow);const HE=()=>null;HE.displayName="GroupNode";const PO=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),kf=t=>t.id;function BO(t,e){return Xn(t.selectedNodes.map(kf),e.selectedNodes.map(kf))&&Xn(t.selectedEdges.map(kf),e.selectedEdges.map(kf))}const lw=ie.memo(({onSelectionChange:t})=>{const e=Ln(),{selectedNodes:n,selectedEdges:r}=Gt(PO,BO);return ie.useEffect(()=>{const s={nodes:n,edges:r};t?.(s),e.getState().onSelectionChange.forEach(o=>o(s))},[n,r,t]),null});lw.displayName="SelectionListener";const UO=t=>!!t.onSelectionChange;function HO({onSelectionChange:t}){const e=Gt(UO);return t||e?Ee.createElement(lw,{onSelectionChange:t}):null}const VO=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Uu(t,e){ie.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function at(t,e,n){ie.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const FO=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:o,onConnectEnd:l,onClickConnectStart:h,onClickConnectEnd:d,nodesDraggable:f,nodesConnectable:g,nodesFocusable:E,edgesFocusable:T,edgesUpdatable:b,elevateNodesOnSelect:N,minZoom:k,maxZoom:U,nodeExtent:M,onNodesChange:Y,onEdgesChange:K,elementsSelectable:q,connectionMode:te,snapGrid:G,snapToGrid:H,translateExtent:C,connectOnClick:I,defaultEdgeOptions:B,fitView:P,fitViewOptions:V,onNodesDelete:w,onEdgesDelete:D,onNodeDrag:Q,onNodeDragStart:z,onNodeDragStop:Z,onSelectionDrag:se,onSelectionDragStart:ne,onSelectionDragStop:A,noPanClassName:J,nodeOrigin:ae,rfId:O,autoPanOnConnect:ge,autoPanOnNodeDrag:Ie,onError:xe,connectionRadius:Ve,isValidConnection:Pe,nodeDragThreshold:tt})=>{const{setNodes:We,setEdges:kt,setDefaultNodesAndEdges:Kt,setMinZoom:rn,setMaxZoom:Qt,setTranslateExtent:xt,setNodeExtent:xn,reset:Ze}=Gt(VO,Xn),Ue=Ln();return ie.useEffect(()=>{const Xt=r?.map(Mn=>({...Mn,...B}));return Kt(n,Xt),()=>{Ze()}},[]),at("defaultEdgeOptions",B,Ue.setState),at("connectionMode",te,Ue.setState),at("onConnect",s,Ue.setState),at("onConnectStart",o,Ue.setState),at("onConnectEnd",l,Ue.setState),at("onClickConnectStart",h,Ue.setState),at("onClickConnectEnd",d,Ue.setState),at("nodesDraggable",f,Ue.setState),at("nodesConnectable",g,Ue.setState),at("nodesFocusable",E,Ue.setState),at("edgesFocusable",T,Ue.setState),at("edgesUpdatable",b,Ue.setState),at("elementsSelectable",q,Ue.setState),at("elevateNodesOnSelect",N,Ue.setState),at("snapToGrid",H,Ue.setState),at("snapGrid",G,Ue.setState),at("onNodesChange",Y,Ue.setState),at("onEdgesChange",K,Ue.setState),at("connectOnClick",I,Ue.setState),at("fitViewOnInit",P,Ue.setState),at("fitViewOnInitOptions",V,Ue.setState),at("onNodesDelete",w,Ue.setState),at("onEdgesDelete",D,Ue.setState),at("onNodeDrag",Q,Ue.setState),at("onNodeDragStart",z,Ue.setState),at("onNodeDragStop",Z,Ue.setState),at("onSelectionDrag",se,Ue.setState),at("onSelectionDragStart",ne,Ue.setState),at("onSelectionDragStop",A,Ue.setState),at("noPanClassName",J,Ue.setState),at("nodeOrigin",ae,Ue.setState),at("rfId",O,Ue.setState),at("autoPanOnConnect",ge,Ue.setState),at("autoPanOnNodeDrag",Ie,Ue.setState),at("onError",xe,Ue.setState),at("connectionRadius",Ve,Ue.setState),at("isValidConnection",Pe,Ue.setState),at("nodeDragThreshold",tt,Ue.setState),Uu(t,We),Uu(e,kt),Uu(k,rn),Uu(U,Qt),Uu(C,xt),Uu(M,xn),null},ov={display:"none"},zO={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},cw="react-flow__node-desc",hw="react-flow__edge-desc",jO="react-flow__aria-live",qO=t=>t.ariaLiveMessage;function YO({rfId:t}){const e=Gt(qO);return Ee.createElement("div",{id:`${jO}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:zO},e)}function GO({rfId:t,disableKeyboardA11y:e}){return Ee.createElement(Ee.Fragment,null,Ee.createElement("div",{id:`${cw}-${t}`,style:ov},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),Ee.createElement("div",{id:`${hw}-${t}`,style:ov},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&Ee.createElement(YO,{rfId:t}))}var Ch=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=ie.useState(!1),s=ie.useRef(!1),o=ie.useRef(new Set([])),[l,h]=ie.useMemo(()=>{if(t!==null){const f=(Array.isArray(t)?t:[t]).filter(E=>typeof E=="string").map(E=>E.split("+")),g=f.reduce((E,T)=>E.concat(...T),[]);return[f,g]}return[[],[]]},[t]);return ie.useEffect(()=>{const d=typeof document<"u"?document:null,f=e?.target||d;if(t!==null){const g=b=>{if(s.current=b.ctrlKey||b.metaKey||b.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&Cy(b))return!1;const k=lv(b.code,h);o.current.add(b[k]),uv(l,o.current,!1)&&(b.preventDefault(),r(!0))},E=b=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&Cy(b))return!1;const k=lv(b.code,h);uv(l,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(b[k]),b.key==="Meta"&&o.current.clear(),s.current=!1},T=()=>{o.current.clear(),r(!1)};return f?.addEventListener("keydown",g),f?.addEventListener("keyup",E),window.addEventListener("blur",T),()=>{f?.removeEventListener("keydown",g),f?.removeEventListener("keyup",E),window.removeEventListener("blur",T)}}},[t,r]),n};function uv(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function lv(t,e){return e.includes(t)?"code":"key"}function dw(t,e,n,r){const s=t.parentNode||t.parentId;if(!s)return n;const o=e.get(s),l=el(o,r);return dw(o,e,{x:(n.x??0)+l.x,y:(n.y??0)+l.y,z:(o[tn]?.z??0)>(n.z??0)?o[tn]?.z??0:n.z??0},r)}function fw(t,e,n){t.forEach(r=>{const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[r.id]){const{x:o,y:l,z:h}=dw(r,t,{...r.position,z:r[tn]?.z??0},e);r.positionAbsolute={x:o,y:l},r[tn].z=h,n?.[r.id]&&(r[tn].isParent=!0)}})}function Vg(t,e,n,r){const s=new Map,o={},l=r?1e3:0;return t.forEach(h=>{const d=(oi(h.zIndex)?h.zIndex:0)+(h.selected?l:0),f=e.get(h.id),g={...h,positionAbsolute:{x:h.position.x,y:h.position.y}},E=h.parentNode||h.parentId;E&&(o[E]=!0);const T=f?.type&&f?.type!==h.type;Object.defineProperty(g,tn,{enumerable:!1,value:{handleBounds:T?void 0:f?.[tn]?.handleBounds,z:d}}),s.set(h.id,g)}),fw(s,n,o),s}function mw(t,e={}){const{getNodes:n,width:r,height:s,minZoom:o,maxZoom:l,d3Zoom:h,d3Selection:d,fitViewOnInitDone:f,fitViewOnInit:g,nodeOrigin:E}=t(),T=e.initial&&!f&&g;if(h&&d&&(T||!e.initial)){const N=n().filter(U=>{const M=e.includeHiddenNodes?U.width&&U.height:!U.hidden;return e.nodes?.length?M&&e.nodes.some(Y=>Y.id===U.id):M}),k=N.every(U=>U.width&&U.height);if(N.length>0&&k){const U=BE(N,E),{x:M,y:Y,zoom:K}=Jx(U,r,s,e.minZoom??o,e.maxZoom??l,e.padding??.1),q=Ca.translate(M,Y).scale(K);return typeof e.duration=="number"&&e.duration>0?h.transform(So(d,e.duration),q):h.transform(d,q),!0}}return!1}function $O(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[tn]:r[tn],selected:n.selected})}),new Map(e)}function KO(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function Df({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:o,onNodesChange:l,onEdgesChange:h,hasDefaultNodes:d,hasDefaultEdges:f}=n();t?.length&&(d&&r({nodeInternals:$O(t,s)}),l?.(t)),e?.length&&(f&&r({edges:KO(e,o)}),h?.(e))}const Hu=()=>{},QO={zoomIn:Hu,zoomOut:Hu,zoomTo:Hu,getZoom:()=>1,setViewport:Hu,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Hu,fitBounds:Hu,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},XO=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),WO=()=>{const t=Ln(),{d3Zoom:e,d3Selection:n}=Gt(XO,Xn);return ie.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(So(n,s?.duration),1.2),zoomOut:s=>e.scaleBy(So(n,s?.duration),1/1.2),zoomTo:(s,o)=>e.scaleTo(So(n,o?.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,o)=>{const[l,h,d]=t.getState().transform,f=Ca.translate(s.x??l,s.y??h).scale(s.zoom??d);e.transform(So(n,o?.duration),f)},getViewport:()=>{const[s,o,l]=t.getState().transform;return{x:s,y:o,zoom:l}},fitView:s=>mw(t.getState,s),setCenter:(s,o,l)=>{const{width:h,height:d,maxZoom:f}=t.getState(),g=typeof l?.zoom<"u"?l.zoom:f,E=h/2-s*g,T=d/2-o*g,b=Ca.translate(E,T).scale(g);e.transform(So(n,l?.duration),b)},fitBounds:(s,o)=>{const{width:l,height:h,minZoom:d,maxZoom:f}=t.getState(),{x:g,y:E,zoom:T}=Jx(s,l,h,d,f,o?.padding??.1),b=Ca.translate(g,E).scale(T);e.transform(So(n,o?.duration),b)},project:s=>{const{transform:o,snapToGrid:l,snapGrid:h}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Ry(s,o,l,h)},screenToFlowPosition:s=>{const{transform:o,snapToGrid:l,snapGrid:h,domNode:d}=t.getState();if(!d)return s;const{x:f,y:g}=d.getBoundingClientRect(),E={x:s.x-f,y:s.y-g};return Ry(E,o,l,h)},flowToScreenPosition:s=>{const{transform:o,domNode:l}=t.getState();if(!l)return s;const{x:h,y:d}=l.getBoundingClientRect(),f=Xx(s,o);return{x:f.x+h,y:f.y+d}},viewportInitialized:!0}:QO,[e,n])};function Yh(){const t=WO(),e=Ln(),n=ie.useCallback(()=>e.getState().getNodes().map(k=>({...k})),[]),r=ie.useCallback(k=>e.getState().nodeInternals.get(k),[]),s=ie.useCallback(()=>{const{edges:k=[]}=e.getState();return k.map(U=>({...U}))},[]),o=ie.useCallback(k=>{const{edges:U=[]}=e.getState();return U.find(M=>M.id===k)},[]),l=ie.useCallback(k=>{const{getNodes:U,setNodes:M,hasDefaultNodes:Y,onNodesChange:K}=e.getState(),q=U(),te=typeof k=="function"?k(q):k;if(Y)M(te);else if(K){const G=te.length===0?q.map(H=>({type:"remove",id:H.id})):te.map(H=>({item:H,type:"reset"}));K(G)}},[]),h=ie.useCallback(k=>{const{edges:U=[],setEdges:M,hasDefaultEdges:Y,onEdgesChange:K}=e.getState(),q=typeof k=="function"?k(U):k;if(Y)M(q);else if(K){const te=q.length===0?U.map(G=>({type:"remove",id:G.id})):q.map(G=>({item:G,type:"reset"}));K(te)}},[]),d=ie.useCallback(k=>{const U=Array.isArray(k)?k:[k],{getNodes:M,setNodes:Y,hasDefaultNodes:K,onNodesChange:q}=e.getState();if(K){const G=[...M(),...U];Y(G)}else if(q){const te=U.map(G=>({item:G,type:"add"}));q(te)}},[]),f=ie.useCallback(k=>{const U=Array.isArray(k)?k:[k],{edges:M=[],setEdges:Y,hasDefaultEdges:K,onEdgesChange:q}=e.getState();if(K)Y([...M,...U]);else if(q){const te=U.map(G=>({item:G,type:"add"}));q(te)}},[]),g=ie.useCallback(()=>{const{getNodes:k,edges:U=[],transform:M}=e.getState(),[Y,K,q]=M;return{nodes:k().map(te=>({...te})),edges:U.map(te=>({...te})),viewport:{x:Y,y:K,zoom:q}}},[]),E=ie.useCallback(({nodes:k,edges:U})=>{const{nodeInternals:M,getNodes:Y,edges:K,hasDefaultNodes:q,hasDefaultEdges:te,onNodesDelete:G,onEdgesDelete:H,onNodesChange:C,onEdgesChange:I}=e.getState(),B=(k||[]).map(Q=>Q.id),P=(U||[]).map(Q=>Q.id),V=Y().reduce((Q,z)=>{const Z=z.parentNode||z.parentId,se=!B.includes(z.id)&&Z&&Q.find(A=>A.id===Z);return(typeof z.deletable=="boolean"?z.deletable:!0)&&(B.includes(z.id)||se)&&Q.push(z),Q},[]),w=K.filter(Q=>typeof Q.deletable=="boolean"?Q.deletable:!0),D=w.filter(Q=>P.includes(Q.id));if(V||D){const Q=Zx(V,w),z=[...D,...Q],Z=z.reduce((se,ne)=>(se.includes(ne.id)||se.push(ne.id),se),[]);if((te||q)&&(te&&e.setState({edges:K.filter(se=>!Z.includes(se.id))}),q&&(V.forEach(se=>{M.delete(se.id)}),e.setState({nodeInternals:new Map(M)}))),Z.length>0&&(H?.(z),I&&I(Z.map(se=>({id:se,type:"remove"})))),V.length>0&&(G?.(V),C)){const se=V.map(ne=>({id:ne.id,type:"remove"}));C(se)}}},[]),T=ie.useCallback(k=>{const U=yO(k),M=U?null:e.getState().nodeInternals.get(k.id);return!U&&!M?[null,null,U]:[U?k:ev(M),M,U]},[]),b=ie.useCallback((k,U=!0,M)=>{const[Y,K,q]=T(k);return Y?(M||e.getState().getNodes()).filter(te=>{if(!q&&(te.id===K.id||!te.positionAbsolute))return!1;const G=ev(te),H=wy(G,Y);return U&&H>0||H>=Y.width*Y.height}):[]},[]),N=ie.useCallback((k,U,M=!0)=>{const[Y]=T(k);if(!Y)return!1;const K=wy(Y,U);return M&&K>0||K>=Y.width*Y.height},[]);return ie.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:o,setNodes:l,setEdges:h,addNodes:d,addEdges:f,toObject:g,deleteElements:E,getIntersectingNodes:b,isNodeIntersecting:N}),[t,n,r,s,o,l,h,d,f,g,E,b,N])}const ZO={actInsideInputWithModifier:!1};var JO=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=Ln(),{deleteElements:r}=Yh(),s=Ch(t,ZO),o=Ch(e);ie.useEffect(()=>{if(s){const{edges:l,getNodes:h}=n.getState(),d=h().filter(g=>g.selected),f=l.filter(g=>g.selected);r({nodes:d,edges:f}),n.setState({nodesSelectionActive:!1})}},[s]),ie.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function e5(t){const e=Ln();ie.useEffect(()=>{let n;const r=()=>{if(!t.current)return;const s=RE(t.current);(s.height===0||s.width===0)&&e.getState().onError?.("004",Ps.error004()),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const VE={position:"absolute",width:"100%",height:"100%",top:0,left:0},t5=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Of=t=>({x:t.x,y:t.y,zoom:t.k}),Vu=(t,e)=>t.target.closest(`.${e}`),cv=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),hv=t=>{const e=t.ctrlKey&&g0()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},n5=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),r5=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:o=!0,panOnScroll:l=!1,panOnScrollSpeed:h=.5,panOnScrollMode:d=Co.Free,zoomOnDoubleClick:f=!0,elementsSelectable:g,panOnDrag:E=!0,defaultViewport:T,translateExtent:b,minZoom:N,maxZoom:k,zoomActivationKeyCode:U,preventScrolling:M=!0,children:Y,noWheelClassName:K,noPanClassName:q})=>{const te=ie.useRef(),G=Ln(),H=ie.useRef(!1),C=ie.useRef(!1),I=ie.useRef(null),B=ie.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:V,d3ZoomHandler:w,userSelectionActive:D}=Gt(n5,Xn),Q=Ch(U),z=ie.useRef(0),Z=ie.useRef(!1),se=ie.useRef();return e5(I),ie.useEffect(()=>{if(I.current){const ne=I.current.getBoundingClientRect(),A=lO().scaleExtent([N,k]).translateExtent(b),J=yi(I.current).call(A),ae=Ca.translate(T.x,T.y).scale(dl(T.zoom,N,k)),O=[[0,0],[ne.width,ne.height]],ge=A.constrain()(ae,O,b);A.transform(J,ge),A.wheelDelta(hv),G.setState({d3Zoom:A,d3Selection:J,d3ZoomHandler:J.on("wheel.zoom"),transform:[ge.x,ge.y,ge.k],domNode:I.current.closest(".react-flow")})}},[]),ie.useEffect(()=>{V&&P&&(l&&!Q&&!D?V.on("wheel.zoom",ne=>{if(Vu(ne,K))return!1;ne.preventDefault(),ne.stopImmediatePropagation();const A=V.property("__zoom").k||1;if(ne.ctrlKey&&o){const Pe=Yi(ne),tt=hv(ne),We=A*Math.pow(2,tt);P.scaleTo(V,We,Pe,ne);return}const J=ne.deltaMode===1?20:1;let ae=d===Co.Vertical?0:ne.deltaX*J,O=d===Co.Horizontal?0:ne.deltaY*J;!g0()&&ne.shiftKey&&d!==Co.Vertical&&(ae=ne.deltaY*J,O=0),P.translateBy(V,-(ae/A)*h,-(O/A)*h,{internal:!0});const ge=Of(V.property("__zoom")),{onViewportChangeStart:Ie,onViewportChange:xe,onViewportChangeEnd:Ve}=G.getState();clearTimeout(se.current),Z.current||(Z.current=!0,e?.(ne,ge),Ie?.(ge)),Z.current&&(t?.(ne,ge),xe?.(ge),se.current=setTimeout(()=>{n?.(ne,ge),Ve?.(ge),Z.current=!1},150))},{passive:!1}):typeof w<"u"&&V.on("wheel.zoom",function(ne,A){if(!M&&ne.type==="wheel"&&!ne.ctrlKey||Vu(ne,K))return null;ne.preventDefault(),w.call(this,ne,A)},{passive:!1}))},[D,l,d,V,P,w,Q,o,M,K,e,t,n]),ie.useEffect(()=>{P&&P.on("start",ne=>{if(!ne.sourceEvent||ne.sourceEvent.internal)return null;z.current=ne.sourceEvent?.button;const{onViewportChangeStart:A}=G.getState(),J=Of(ne.transform);H.current=!0,B.current=J,ne.sourceEvent?.type==="mousedown"&&G.setState({paneDragging:!0}),A?.(J),e?.(ne.sourceEvent,J)})},[P,e]),ie.useEffect(()=>{P&&(D&&!H.current?P.on("zoom",null):D||P.on("zoom",ne=>{const{onViewportChange:A}=G.getState();if(G.setState({transform:[ne.transform.x,ne.transform.y,ne.transform.k]}),C.current=!!(r&&cv(E,z.current??0)),(t||A)&&!ne.sourceEvent?.internal){const J=Of(ne.transform);A?.(J),t?.(ne.sourceEvent,J)}}))},[D,P,t,E,r]),ie.useEffect(()=>{P&&P.on("end",ne=>{if(!ne.sourceEvent||ne.sourceEvent.internal)return null;const{onViewportChangeEnd:A}=G.getState();if(H.current=!1,G.setState({paneDragging:!1}),r&&cv(E,z.current??0)&&!C.current&&r(ne.sourceEvent),C.current=!1,(n||A)&&t5(B.current,ne.transform)){const J=Of(ne.transform);B.current=J,clearTimeout(te.current),te.current=setTimeout(()=>{A?.(J),n?.(ne.sourceEvent,J)},l?150:0)}})},[P,l,E,n,r]),ie.useEffect(()=>{P&&P.filter(ne=>{const A=Q||s,J=o&&ne.ctrlKey;if((E===!0||Array.isArray(E)&&E.includes(1))&&ne.button===1&&ne.type==="mousedown"&&(Vu(ne,"react-flow__node")||Vu(ne,"react-flow__edge")))return!0;if(!E&&!A&&!l&&!f&&!o||D||!f&&ne.type==="dblclick"||Vu(ne,K)&&ne.type==="wheel"||Vu(ne,q)&&(ne.type!=="wheel"||l&&ne.type==="wheel"&&!Q)||!o&&ne.ctrlKey&&ne.type==="wheel"||!A&&!l&&!J&&ne.type==="wheel"||!E&&(ne.type==="mousedown"||ne.type==="touchstart")||Array.isArray(E)&&!E.includes(ne.button)&&ne.type==="mousedown")return!1;const ae=Array.isArray(E)&&E.includes(ne.button)||!ne.button||ne.button<=1;return(!ne.ctrlKey||ne.type==="wheel")&&ae})},[D,P,s,o,l,f,E,g,Q]),Ee.createElement("div",{className:"react-flow__renderer",ref:I,style:VE},Y)},i5=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function s5(){const{userSelectionActive:t,userSelectionRect:e}=Gt(i5,Xn);return t&&e?Ee.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function dv(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,o=e.position.y+e.height-r.height;if(s>0||o>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),o>0&&(r.style.height+=o),e.position.x<0){const l=Math.abs(e.position.x);r.position.x=r.position.x-l,r.style.width+=l,e.position.x=0}if(e.position.y<0){const l=Math.abs(e.position.y);r.position.y=r.position.y-l,r.style.height+=l,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function pw(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const o=t.filter(h=>h.id===s.id);if(o.length===0)return r.push(s),r;const l={...s};for(const h of o)if(h)switch(h.type){case"select":{l.selected=h.selected;break}case"position":{typeof h.position<"u"&&(l.position=h.position),typeof h.positionAbsolute<"u"&&(l.positionAbsolute=h.positionAbsolute),typeof h.dragging<"u"&&(l.dragging=h.dragging),l.expandParent&&dv(r,l);break}case"dimensions":{typeof h.dimensions<"u"&&(l.width=h.dimensions.width,l.height=h.dimensions.height),typeof h.updateStyle<"u"&&(l.style={...l.style||{},...h.dimensions}),typeof h.resizing=="boolean"&&(l.resizing=h.resizing),l.expandParent&&dv(r,l);break}case"remove":return r}return r.push(l),r},n)}function gw(t,e){return pw(t,e)}function a5(t,e){return pw(t,e)}const _a=(t,e)=>({id:t,type:"select",selected:e});function Qu(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(_a(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(_a(r.id,!1))),n},[])}const Fg=(t,e)=>n=>{n.target===e.current&&t?.(n)},o5=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),yw=ie.memo(({isSelecting:t,selectionMode:e=xh.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:o,onPaneContextMenu:l,onPaneScroll:h,onPaneMouseEnter:d,onPaneMouseMove:f,onPaneMouseLeave:g,children:E})=>{const T=ie.useRef(null),b=Ln(),N=ie.useRef(0),k=ie.useRef(0),U=ie.useRef(),{userSelectionActive:M,elementsSelectable:Y,dragging:K}=Gt(o5,Xn),q=()=>{b.setState({userSelectionActive:!1,userSelectionRect:null}),N.current=0,k.current=0},te=w=>{o?.(w),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},G=w=>{if(Array.isArray(n)&&n?.includes(2)){w.preventDefault();return}l?.(w)},H=h?w=>h(w):void 0,C=w=>{const{resetSelectedElements:D,domNode:Q}=b.getState();if(U.current=Q?.getBoundingClientRect(),!Y||!t||w.button!==0||w.target!==T.current||!U.current)return;const{x:z,y:Z}=Na(w,U.current);D(),b.setState({userSelectionRect:{width:0,height:0,startX:z,startY:Z,x:z,y:Z}}),r?.(w)},I=w=>{const{userSelectionRect:D,nodeInternals:Q,edges:z,transform:Z,onNodesChange:se,onEdgesChange:ne,nodeOrigin:A,getNodes:J}=b.getState();if(!t||!U.current||!D)return;b.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ae=Na(w,U.current),O=D.startX??0,ge=D.startY??0,Ie={...D,x:ae.x<O?ae.x:O,y:ae.y<ge?ae.y:ge,width:Math.abs(ae.x-O),height:Math.abs(ae.y-ge)},xe=J(),Ve=Wx(Q,Ie,Z,e===xh.Partial,!0,A),Pe=Zx(Ve,z).map(We=>We.id),tt=Ve.map(We=>We.id);if(N.current!==tt.length){N.current=tt.length;const We=Qu(xe,tt);We.length&&se?.(We)}if(k.current!==Pe.length){k.current=Pe.length;const We=Qu(z,Pe);We.length&&ne?.(We)}b.setState({userSelectionRect:Ie})},B=w=>{if(w.button!==0)return;const{userSelectionRect:D}=b.getState();!M&&D&&w.target===T.current&&te?.(w),b.setState({nodesSelectionActive:N.current>0}),q(),s?.(w)},P=w=>{M&&(b.setState({nodesSelectionActive:N.current>0}),s?.(w)),q()},V=Y&&(t||M);return Ee.createElement("div",{className:ar(["react-flow__pane",{dragging:K,selection:t}]),onClick:V?void 0:Fg(te,T),onContextMenu:Fg(G,T),onWheel:Fg(H,T),onMouseEnter:V?void 0:d,onMouseDown:V?C:void 0,onMouseMove:V?I:f,onMouseUp:V?B:void 0,onMouseLeave:V?P:g,ref:T,style:VE},E,Ee.createElement(s5,null))});yw.displayName="Pane";function Ew(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:Ew(r,e):!1}function fv(t,e,n){let r=t;do{if(r?.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function u5(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!Ew(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function l5(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function _w(t,e,n,r,s=[0,0],o){const l=l5(t,t.extent||r);let h=l;const d=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(d&&t.width&&t.height){const E=n.get(d),{x:T,y:b}=el(E,s).positionAbsolute;h=E&&oi(T)&&oi(b)&&oi(E.width)&&oi(E.height)?[[T+t.width*s[0],b+t.height*s[1]],[T+E.width-t.width+t.width*s[0],b+E.height-t.height+t.height*s[1]]]:h}else o?.("005",Ps.error005()),h=l;else if(t.extent&&d&&t.extent!=="parent"){const E=n.get(d),{x:T,y:b}=el(E,s).positionAbsolute;h=[[t.extent[0][0]+T,t.extent[0][1]+b],[t.extent[1][0]+T,t.extent[1][1]+b]]}let f={x:0,y:0};if(d){const E=n.get(d);f=el(E,s).positionAbsolute}const g=h&&h!=="parent"?kE(e,h):e;return{position:{x:g.x-f.x,y:g.y-f.y},positionAbsolute:g}}function zg({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const mv=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const o=Array.from(s),l=e.getBoundingClientRect(),h={x:l.width*r[0],y:l.height*r[1]};return o.map(d=>{const f=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),position:d.getAttribute("data-handlepos"),x:(f.left-l.left-h.x)/n,y:(f.top-l.top-h.y)/n,...RE(d)}})};function zc(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function Dy({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:l,nodeInternals:h,onError:d}=e.getState(),f=h.get(t);if(!f){d?.("012",Ps.error012(t));return}e.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&l)&&(o({nodes:[f],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):s([t])}function c5(){const t=Ln();return ie.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:o}=t.getState(),l=n.touches?n.touches[0].clientX:n.clientX,h=n.touches?n.touches[0].clientY:n.clientY,d={x:(l-r[0])/r[2],y:(h-r[1])/r[2]};return{xSnapped:o?s[0]*Math.round(d.x/s[0]):d.x,ySnapped:o?s[1]*Math.round(d.y/s[1]):d.y,...d}},[])}function jg(t){return(e,n,r)=>t?.(e,r)}function Tw({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:o,selectNodesOnDrag:l}){const h=Ln(),[d,f]=ie.useState(!1),g=ie.useRef([]),E=ie.useRef({x:null,y:null}),T=ie.useRef(0),b=ie.useRef(null),N=ie.useRef({x:0,y:0}),k=ie.useRef(null),U=ie.useRef(!1),M=ie.useRef(!1),Y=ie.useRef(!1),K=c5();return ie.useEffect(()=>{if(t?.current){const q=yi(t.current),te=({x:C,y:I})=>{const{nodeInternals:B,onNodeDrag:P,onSelectionDrag:V,updateNodePositions:w,nodeExtent:D,snapGrid:Q,snapToGrid:z,nodeOrigin:Z,onError:se}=h.getState();E.current={x:C,y:I};let ne=!1,A={x:0,y:0,x2:0,y2:0};if(g.current.length>1&&D){const ae=BE(g.current,Z);A=DE(ae)}if(g.current=g.current.map(ae=>{const O={x:C-ae.distance.x,y:I-ae.distance.y};z&&(O.x=Q[0]*Math.round(O.x/Q[0]),O.y=Q[1]*Math.round(O.y/Q[1]));const ge=[[D[0][0],D[0][1]],[D[1][0],D[1][1]]];g.current.length>1&&D&&!ae.extent&&(ge[0][0]=ae.positionAbsolute.x-A.x+D[0][0],ge[1][0]=ae.positionAbsolute.x+(ae.width??0)-A.x2+D[1][0],ge[0][1]=ae.positionAbsolute.y-A.y+D[0][1],ge[1][1]=ae.positionAbsolute.y+(ae.height??0)-A.y2+D[1][1]);const Ie=_w(ae,O,B,ge,Z,se);return ne=ne||ae.position.x!==Ie.position.x||ae.position.y!==Ie.position.y,ae.position=Ie.position,ae.positionAbsolute=Ie.positionAbsolute,ae}),!ne)return;w(g.current,!0,!0),f(!0);const J=s?P:jg(V);if(J&&k.current){const[ae,O]=zg({nodeId:s,dragItems:g.current,nodeInternals:B});J(k.current,ae,O)}},G=()=>{if(!b.current)return;const[C,I]=zx(N.current,b.current);if(C!==0||I!==0){const{transform:B,panBy:P}=h.getState();E.current.x=(E.current.x??0)-C/B[2],E.current.y=(E.current.y??0)-I/B[2],P({x:C,y:I})&&te(E.current)}T.current=requestAnimationFrame(G)},H=C=>{const{nodeInternals:I,multiSelectionActive:B,nodesDraggable:P,unselectNodesAndEdges:V,onNodeDragStart:w,onSelectionDragStart:D}=h.getState();M.current=!0;const Q=s?w:jg(D);(!l||!o)&&!B&&s&&(I.get(s)?.selected||V()),s&&o&&l&&Dy({id:s,store:h,nodeRef:t});const z=K(C);if(E.current=z,g.current=u5(I,P,z,s),Q&&g.current){const[Z,se]=zg({nodeId:s,dragItems:g.current,nodeInternals:I});Q(C.sourceEvent,Z,se)}};if(e)q.on(".drag",null);else{const C=_k().on("start",I=>{const{domNode:B,nodeDragThreshold:P}=h.getState();P===0&&H(I),Y.current=!1;const V=K(I);E.current=V,b.current=B?.getBoundingClientRect()||null,N.current=Na(I.sourceEvent,b.current)}).on("drag",I=>{const B=K(I),{autoPanOnNodeDrag:P,nodeDragThreshold:V}=h.getState();if(I.sourceEvent.type==="touchmove"&&I.sourceEvent.touches.length>1&&(Y.current=!0),!Y.current){if(!U.current&&M.current&&P&&(U.current=!0,G()),!M.current){const w=B.xSnapped-(E?.current?.x??0),D=B.ySnapped-(E?.current?.y??0);Math.sqrt(w*w+D*D)>V&&H(I)}(E.current.x!==B.xSnapped||E.current.y!==B.ySnapped)&&g.current&&M.current&&(k.current=I.sourceEvent,N.current=Na(I.sourceEvent,b.current),te(B))}}).on("end",I=>{if(!(!M.current||Y.current)&&(f(!1),U.current=!1,M.current=!1,cancelAnimationFrame(T.current),g.current)){const{updateNodePositions:B,nodeInternals:P,onNodeDragStop:V,onSelectionDragStop:w}=h.getState(),D=s?V:jg(w);if(B(g.current,!1,!1),D){const[Q,z]=zg({nodeId:s,dragItems:g.current,nodeInternals:P});D(I.sourceEvent,Q,z)}}}).filter(I=>{const B=I.target;return!I.button&&(!n||!fv(B,`.${n}`,t))&&(!r||fv(B,r,t))});return q.call(C),()=>{q.on(".drag",null)}}}},[t,e,n,r,o,h,s,l,K]),d}function bw(){const t=Ln();return ie.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:o,getNodes:l,snapToGrid:h,snapGrid:d,onError:f,nodesDraggable:g}=t.getState(),E=l().filter(Y=>Y.selected&&(Y.draggable||g&&typeof Y.draggable>"u")),T=h?d[0]:5,b=h?d[1]:5,N=n.isShiftPressed?4:1,k=n.x*T*N,U=n.y*b*N,M=E.map(Y=>{if(Y.positionAbsolute){const K={x:Y.positionAbsolute.x+k,y:Y.positionAbsolute.y+U};h&&(K.x=d[0]*Math.round(K.x/d[0]),K.y=d[1]*Math.round(K.y/d[1]));const{positionAbsolute:q,position:te}=_w(Y,K,r,s,void 0,f);Y.position=te,Y.positionAbsolute=q}return Y});o(M,!0,!1)},[])}const tl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var jc=t=>{const e=({id:n,type:r,data:s,xPos:o,yPos:l,xPosOrigin:h,yPosOrigin:d,selected:f,onClick:g,onMouseEnter:E,onMouseMove:T,onMouseLeave:b,onContextMenu:N,onDoubleClick:k,style:U,className:M,isDraggable:Y,isSelectable:K,isConnectable:q,isFocusable:te,selectNodesOnDrag:G,sourcePosition:H,targetPosition:C,hidden:I,resizeObserver:B,dragHandle:P,zIndex:V,isParent:w,noDragClassName:D,noPanClassName:Q,initialized:z,disableKeyboardA11y:Z,ariaLabel:se,rfId:ne,hasHandleBounds:A})=>{const J=Ln(),ae=ie.useRef(null),O=ie.useRef(null),ge=ie.useRef(H),Ie=ie.useRef(C),xe=ie.useRef(r),Ve=K||Y||g||E||T||b,Pe=bw(),tt=zc(n,J.getState,E),We=zc(n,J.getState,T),kt=zc(n,J.getState,b),Kt=zc(n,J.getState,N),rn=zc(n,J.getState,k),Qt=Ze=>{const{nodeDragThreshold:Ue}=J.getState();if(K&&(!G||!Y||Ue>0)&&Dy({id:n,store:J,nodeRef:ae}),g){const Xt=J.getState().nodeInternals.get(n);Xt&&g(Ze,{...Xt})}},xt=Ze=>{if(!Cy(Ze)&&!Z)if(qx.includes(Ze.key)&&K){const Ue=Ze.key==="Escape";Dy({id:n,store:J,unselect:Ue,nodeRef:ae})}else Y&&f&&Object.prototype.hasOwnProperty.call(tl,Ze.key)&&(J.setState({ariaLiveMessage:`Moved selected node ${Ze.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~l}`}),Pe({x:tl[Ze.key].x,y:tl[Ze.key].y,isShiftPressed:Ze.shiftKey}))};ie.useEffect(()=>()=>{O.current&&(B?.unobserve(O.current),O.current=null)},[]),ie.useEffect(()=>{if(ae.current&&!I){const Ze=ae.current;(!z||!A||O.current!==Ze)&&(O.current&&B?.unobserve(O.current),B?.observe(Ze),O.current=Ze)}},[I,z,A]),ie.useEffect(()=>{const Ze=xe.current!==r,Ue=ge.current!==H,Xt=Ie.current!==C;ae.current&&(Ze||Ue||Xt)&&(Ze&&(xe.current=r),Ue&&(ge.current=H),Xt&&(Ie.current=C),J.getState().updateNodeDimensions([{id:n,nodeElement:ae.current,forceUpdate:!0}]))},[n,r,H,C]);const xn=Tw({nodeRef:ae,disabled:I||!Y,noDragClassName:D,handleSelector:P,nodeId:n,isSelectable:K,selectNodesOnDrag:G});return I?null:Ee.createElement("div",{className:ar(["react-flow__node",`react-flow__node-${r}`,{[Q]:Y},M,{selected:f,selectable:K,parent:w,dragging:xn}]),ref:ae,style:{zIndex:V,transform:`translate(${h}px,${d}px)`,pointerEvents:Ve?"all":"none",visibility:z?"visible":"hidden",...U},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:tt,onMouseMove:We,onMouseLeave:kt,onContextMenu:Kt,onClick:Qt,onDoubleClick:rn,onKeyDown:te?xt:void 0,tabIndex:te?0:void 0,role:te?"button":void 0,"aria-describedby":Z?void 0:`${cw}-${ne}`,"aria-label":se},Ee.createElement(SO,{value:n},Ee.createElement(t,{id:n,data:s,type:r,xPos:o,yPos:l,selected:f,isConnectable:q,sourcePosition:H,targetPosition:C,dragging:xn,dragHandle:P,zIndex:V})))};return e.displayName="NodeWrapper",ie.memo(e)};const h5=t=>{const e=t.getNodes().filter(n=>n.selected);return{...BE(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function d5({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=Ln(),{width:s,height:o,x:l,y:h,transformString:d,userSelectionActive:f}=Gt(h5,Xn),g=bw(),E=ie.useRef(null);if(ie.useEffect(()=>{n||E.current?.focus({preventScroll:!0})},[n]),Tw({nodeRef:E}),f||!s||!o)return null;const T=t?N=>{const k=r.getState().getNodes().filter(U=>U.selected);t(N,k)}:void 0,b=N=>{Object.prototype.hasOwnProperty.call(tl,N.key)&&g({x:tl[N.key].x,y:tl[N.key].y,isShiftPressed:N.shiftKey})};return Ee.createElement("div",{className:ar(["react-flow__nodesselection","react-flow__container",e]),style:{transform:d}},Ee.createElement("div",{ref:E,className:"react-flow__nodesselection-rect",onContextMenu:T,tabIndex:n?void 0:-1,onKeyDown:n?void 0:b,style:{width:s,height:o,top:h,left:l}}))}var f5=ie.memo(d5);const m5=t=>t.nodesSelectionActive,vw=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:l,deleteKeyCode:h,onMove:d,onMoveStart:f,onMoveEnd:g,selectionKeyCode:E,selectionOnDrag:T,selectionMode:b,onSelectionStart:N,onSelectionEnd:k,multiSelectionKeyCode:U,panActivationKeyCode:M,zoomActivationKeyCode:Y,elementsSelectable:K,zoomOnScroll:q,zoomOnPinch:te,panOnScroll:G,panOnScrollSpeed:H,panOnScrollMode:C,zoomOnDoubleClick:I,panOnDrag:B,defaultViewport:P,translateExtent:V,minZoom:w,maxZoom:D,preventScrolling:Q,onSelectionContextMenu:z,noWheelClassName:Z,noPanClassName:se,disableKeyboardA11y:ne})=>{const A=Gt(m5),J=Ch(E),ae=Ch(M),O=ae||B,ge=ae||G,Ie=J||T&&O!==!0;return JO({deleteKeyCode:h,multiSelectionKeyCode:U}),Ee.createElement(r5,{onMove:d,onMoveStart:f,onMoveEnd:g,onPaneContextMenu:o,elementsSelectable:K,zoomOnScroll:q,zoomOnPinch:te,panOnScroll:ge,panOnScrollSpeed:H,panOnScrollMode:C,zoomOnDoubleClick:I,panOnDrag:!J&&O,defaultViewport:P,translateExtent:V,minZoom:w,maxZoom:D,zoomActivationKeyCode:Y,preventScrolling:Q,noWheelClassName:Z,noPanClassName:se},Ee.createElement(yw,{onSelectionStart:N,onSelectionEnd:k,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:l,panOnDrag:O,isSelecting:!!Ie,selectionMode:b},t,A&&Ee.createElement(f5,{onSelectionContextMenu:z,noPanClassName:se,disableKeyboardA11y:ne})))};vw.displayName="FlowRenderer";var p5=ie.memo(vw);function g5(t){return Gt(ie.useCallback(n=>t?Wx(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function y5(t){const e={input:jc(t.input||aw),default:jc(t.default||ky),output:jc(t.output||uw),group:jc(t.group||HE)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,o)=>(s[o]=jc(t[o]||ky),s),n);return{...e,...r}}const E5=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},_5=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),Aw=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:o,onError:l}=Gt(_5,Xn),h=g5(t.onlyRenderVisibleElements),d=ie.useRef(),f=ie.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const g=new ResizeObserver(E=>{const T=E.map(b=>({id:b.target.getAttribute("data-id"),nodeElement:b.target,forceUpdate:!0}));o(T)});return d.current=g,g},[]);return ie.useEffect(()=>()=>{d?.current?.disconnect()},[]),Ee.createElement("div",{className:"react-flow__nodes",style:VE},h.map(g=>{let E=g.type||"default";t.nodeTypes[E]||(l?.("003",Ps.error003(E)),E="default");const T=t.nodeTypes[E]||t.nodeTypes.default,b=!!(g.draggable||e&&typeof g.draggable>"u"),N=!!(g.selectable||s&&typeof g.selectable>"u"),k=!!(g.connectable||n&&typeof g.connectable>"u"),U=!!(g.focusable||r&&typeof g.focusable>"u"),M=t.nodeExtent?kE(g.positionAbsolute,t.nodeExtent):g.positionAbsolute,Y=M?.x??0,K=M?.y??0,q=E5({x:Y,y:K,width:g.width??0,height:g.height??0,origin:t.nodeOrigin});return Ee.createElement(T,{key:g.id,id:g.id,className:g.className,style:g.style,type:E,data:g.data,sourcePosition:g.sourcePosition||Me.Bottom,targetPosition:g.targetPosition||Me.Top,hidden:g.hidden,xPos:Y,yPos:K,xPosOrigin:q.x,yPosOrigin:q.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!g.selected,isDraggable:b,isSelectable:N,isConnectable:k,isFocusable:U,resizeObserver:f,dragHandle:g.dragHandle,zIndex:g[tn]?.z??0,isParent:!!g[tn]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!g.width&&!!g.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:g.ariaLabel,hasHandleBounds:!!g[tn]?.handleBounds})}))};Aw.displayName="NodeRenderer";var T5=ie.memo(Aw);const b5=(t,e,n)=>n===Me.Left?t-e:n===Me.Right?t+e:t,v5=(t,e,n)=>n===Me.Top?t-e:n===Me.Bottom?t+e:t,pv="react-flow__edgeupdater",gv=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:o,onMouseOut:l,type:h})=>Ee.createElement("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:l,className:ar([pv,`${pv}-${h}`]),cx:b5(e,r,t),cy:v5(n,r,t),r,stroke:"transparent",fill:"transparent"}),A5=()=>!0;var Fu=t=>{const e=({id:n,className:r,type:s,data:o,onClick:l,onEdgeDoubleClick:h,selected:d,animated:f,label:g,labelStyle:E,labelShowBg:T,labelBgStyle:b,labelBgPadding:N,labelBgBorderRadius:k,style:U,source:M,target:Y,sourceX:K,sourceY:q,targetX:te,targetY:G,sourcePosition:H,targetPosition:C,elementsSelectable:I,hidden:B,sourceHandleId:P,targetHandleId:V,onContextMenu:w,onMouseEnter:D,onMouseMove:Q,onMouseLeave:z,reconnectRadius:Z,onReconnect:se,onReconnectStart:ne,onReconnectEnd:A,markerEnd:J,markerStart:ae,rfId:O,ariaLabel:ge,isFocusable:Ie,isReconnectable:xe,pathOptions:Ve,interactionWidth:Pe,disableKeyboardA11y:tt})=>{const We=ie.useRef(null),[kt,Kt]=ie.useState(!1),[rn,Qt]=ie.useState(!1),xt=Ln(),xn=ie.useMemo(()=>`url('#${Iy(ae,O)}')`,[ae,O]),Ze=ie.useMemo(()=>`url('#${Iy(J,O)}')`,[J,O]);if(B)return null;const Ue=gt=>{const{edges:Dt,addSelectedEdges:Ut,unselectNodesAndEdges:sn,multiSelectionActive:Ft}=xt.getState(),Et=Dt.find(Wt=>Wt.id===n);Et&&(I&&(xt.setState({nodesSelectionActive:!1}),Et.selected&&Ft?(sn({nodes:[],edges:[Et]}),We.current?.blur()):Ut([n])),l&&l(gt,Et))},Xt=Fc(n,xt.getState,h),Mn=Fc(n,xt.getState,w),er=Fc(n,xt.getState,D),Fr=Fc(n,xt.getState,Q),tr=Fc(n,xt.getState,z),Pn=(gt,Dt)=>{if(gt.button!==0)return;const{edges:Ut,isValidConnection:sn}=xt.getState(),Ft=Dt?Y:M,Et=(Dt?V:P)||null,Wt=Dt?"target":"source",En=sn||A5,as=Dt,ci=Ut.find(vr=>vr.id===n);Qt(!0),ne?.(gt,ci,Wt);const br=vr=>{Qt(!1),A?.(vr,ci,Wt)};nw({event:gt,handleId:Et,nodeId:Ft,onConnect:vr=>se?.(ci,vr),isTarget:as,getState:xt.getState,setState:xt.setState,isValidConnection:En,edgeUpdaterType:Wt,onReconnectEnd:br})},Tr=gt=>Pn(gt,!0),de=gt=>Pn(gt,!1),_e=()=>Kt(!0),Oe=()=>Kt(!1),Be=!I&&!l,it=gt=>{if(!tt&&qx.includes(gt.key)&&I){const{unselectNodesAndEdges:Dt,addSelectedEdges:Ut,edges:sn}=xt.getState();gt.key==="Escape"?(We.current?.blur(),Dt({edges:[sn.find(Et=>Et.id===n)]})):Ut([n])}};return Ee.createElement("g",{className:ar(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:d,animated:f,inactive:Be,updating:kt}]),onClick:Ue,onDoubleClick:Xt,onContextMenu:Mn,onMouseEnter:er,onMouseMove:Fr,onMouseLeave:tr,onKeyDown:Ie?it:void 0,tabIndex:Ie?0:void 0,role:Ie?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ge===null?void 0:ge||`Edge from ${M} to ${Y}`,"aria-describedby":Ie?`${hw}-${O}`:void 0,ref:We},!rn&&Ee.createElement(t,{id:n,source:M,target:Y,selected:d,animated:f,label:g,labelStyle:E,labelShowBg:T,labelBgStyle:b,labelBgPadding:N,labelBgBorderRadius:k,data:o,style:U,sourceX:K,sourceY:q,targetX:te,targetY:G,sourcePosition:H,targetPosition:C,sourceHandleId:P,targetHandleId:V,markerStart:xn,markerEnd:Ze,pathOptions:Ve,interactionWidth:Pe}),xe&&Ee.createElement(Ee.Fragment,null,(xe==="source"||xe===!0)&&Ee.createElement(gv,{position:H,centerX:K,centerY:q,radius:Z,onMouseDown:Tr,onMouseEnter:_e,onMouseOut:Oe,type:"source"}),(xe==="target"||xe===!0)&&Ee.createElement(gv,{position:C,centerX:te,centerY:G,radius:Z,onMouseDown:de,onMouseEnter:_e,onMouseOut:Oe,type:"target"})))};return e.displayName="EdgeWrapper",ie.memo(e)};function S5(t){const e={default:Fu(t.default||y0),straight:Fu(t.bezier||ME),step:Fu(t.step||LE),smoothstep:Fu(t.step||X0),simplebezier:Fu(t.simplebezier||OE)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,o)=>(s[o]=Fu(t[o]||y0),s),n);return{...e,...r}}function yv(t,e,n=null){const r=(n?.x||0)+e.x,s=(n?.y||0)+e.y,o=n?.width||e.width,l=n?.height||e.height;switch(t){case Me.Top:return{x:r+o/2,y:s};case Me.Right:return{x:r+o,y:s+l/2};case Me.Bottom:return{x:r+o/2,y:s+l};case Me.Left:return{x:r,y:s+l/2}}}function Ev(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const x5=(t,e,n,r,s,o)=>{const l=yv(n,t,e),h=yv(o,r,s);return{sourceX:l.x,sourceY:l.y,targetX:h.x,targetY:h.y}};function w5({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:o,width:l,height:h,transform:d}){const f={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+o)};f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const g=DE({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:l/d[2],height:h/d[2]}),E=Math.max(0,Math.min(g.x2,f.x2)-Math.max(g.x,f.x)),T=Math.max(0,Math.min(g.y2,f.y2)-Math.max(g.y,f.y));return Math.ceil(E*T)>0}function _v(t){const e=t?.[tn]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const C5=[{level:0,isMaxLevel:!0,edges:[]}];function N5(t,e,n=!1){let r=-1;const s=t.reduce((l,h)=>{const d=oi(h.zIndex);let f=d?h.zIndex:0;if(n){const g=e.get(h.target),E=e.get(h.source),T=h.selected||g?.selected||E?.selected,b=Math.max(E?.[tn]?.z||0,g?.[tn]?.z||0,1e3);f=(d?h.zIndex:0)+(T?b:0)}return l[f]?l[f].push(h):l[f]=[h],r=f>r?f:r,l},{}),o=Object.entries(s).map(([l,h])=>{const d=+l;return{edges:h,level:d,isMaxLevel:d===r}});return o.length===0?C5:o}function I5(t,e,n){const r=Gt(ie.useCallback(s=>t?s.edges.filter(o=>{const l=e.get(o.source),h=e.get(o.target);return l?.width&&l?.height&&h?.width&&h?.height&&w5({sourcePos:l.positionAbsolute||{x:0,y:0},targetPos:h.positionAbsolute||{x:0,y:0},sourceWidth:l.width,sourceHeight:l.height,targetWidth:h.width,targetHeight:h.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return N5(r,e,n)}const R5=({color:t="none",strokeWidth:e=1})=>Ee.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),k5=({color:t="none",strokeWidth:e=1})=>Ee.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Tv={[wh.Arrow]:R5,[wh.ArrowClosed]:k5};function D5(t){const e=Ln();return ie.useMemo(()=>Object.prototype.hasOwnProperty.call(Tv,t)?Tv[t]:(e.getState().onError?.("009",Ps.error009(t)),null),[t])}const O5=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:l,orient:h="auto-start-reverse"})=>{const d=D5(e);return d?Ee.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:h,refX:"0",refY:"0"},Ee.createElement(d,{color:n,strokeWidth:l})):null},L5=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,o)=>([o.markerStart,o.markerEnd].forEach(l=>{if(l&&typeof l=="object"){const h=Iy(l,e);r.includes(h)||(s.push({id:h,color:l.color||t,...l}),r.push(h))}}),s),[]).sort((s,o)=>s.id.localeCompare(o.id))},Sw=({defaultColor:t,rfId:e})=>{const n=Gt(ie.useCallback(L5({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((o,l)=>o.id!==s[l].id)));return Ee.createElement("defs",null,n.map(r=>Ee.createElement(O5,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Sw.displayName="MarkerDefinitions";var M5=ie.memo(Sw);const P5=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),xw=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:o,onEdgeContextMenu:l,onEdgeMouseEnter:h,onEdgeMouseMove:d,onEdgeMouseLeave:f,onEdgeClick:g,onEdgeDoubleClick:E,onReconnect:T,onReconnectStart:b,onReconnectEnd:N,reconnectRadius:k,children:U,disableKeyboardA11y:M})=>{const{edgesFocusable:Y,edgesUpdatable:K,elementsSelectable:q,width:te,height:G,connectionMode:H,nodeInternals:C,onError:I}=Gt(P5,Xn),B=I5(e,C,n);return te?Ee.createElement(Ee.Fragment,null,B.map(({level:P,edges:V,isMaxLevel:w})=>Ee.createElement("svg",{key:P,style:{zIndex:P},width:te,height:G,className:"react-flow__edges react-flow__container"},w&&Ee.createElement(M5,{defaultColor:t,rfId:r}),Ee.createElement("g",null,V.map(D=>{const[Q,z,Z]=_v(C.get(D.source)),[se,ne,A]=_v(C.get(D.target));if(!Z||!A)return null;let J=D.type||"default";s[J]||(I?.("011",Ps.error011(J)),J="default");const ae=s[J]||s.default,O=H===La.Strict?ne.target:(ne.target??[]).concat(ne.source??[]),ge=Ev(z.source,D.sourceHandle),Ie=Ev(O,D.targetHandle),xe=ge?.position||Me.Bottom,Ve=Ie?.position||Me.Top,Pe=!!(D.focusable||Y&&typeof D.focusable>"u"),tt=D.reconnectable||D.updatable,We=typeof T<"u"&&(tt||K&&typeof tt>"u");if(!ge||!Ie)return I?.("008",Ps.error008(ge,D)),null;const{sourceX:kt,sourceY:Kt,targetX:rn,targetY:Qt}=x5(Q,ge,xe,se,Ie,Ve);return Ee.createElement(ae,{key:D.id,id:D.id,className:ar([D.className,o]),type:J,data:D.data,selected:!!D.selected,animated:!!D.animated,hidden:!!D.hidden,label:D.label,labelStyle:D.labelStyle,labelShowBg:D.labelShowBg,labelBgStyle:D.labelBgStyle,labelBgPadding:D.labelBgPadding,labelBgBorderRadius:D.labelBgBorderRadius,style:D.style,source:D.source,target:D.target,sourceHandleId:D.sourceHandle,targetHandleId:D.targetHandle,markerEnd:D.markerEnd,markerStart:D.markerStart,sourceX:kt,sourceY:Kt,targetX:rn,targetY:Qt,sourcePosition:xe,targetPosition:Ve,elementsSelectable:q,onContextMenu:l,onMouseEnter:h,onMouseMove:d,onMouseLeave:f,onClick:g,onEdgeDoubleClick:E,onReconnect:T,onReconnectStart:b,onReconnectEnd:N,reconnectRadius:k,rfId:r,ariaLabel:D.ariaLabel,isFocusable:Pe,isReconnectable:We,pathOptions:"pathOptions"in D?D.pathOptions:void 0,interactionWidth:D.interactionWidth,disableKeyboardA11y:M})})))),U):null};xw.displayName="EdgeRenderer";var B5=ie.memo(xw);const U5=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function H5({children:t}){const e=Gt(U5);return Ee.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function V5(t){const e=Yh(),n=ie.useRef(!1);ie.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const F5={[Me.Left]:Me.Right,[Me.Right]:Me.Left,[Me.Top]:Me.Bottom,[Me.Bottom]:Me.Top},ww=({nodeId:t,handleType:e,style:n,type:r=Ta.Bezier,CustomComponent:s,connectionStatus:o})=>{const{fromNode:l,handleId:h,toX:d,toY:f,connectionMode:g}=Gt(ie.useCallback(G=>({fromNode:G.nodeInternals.get(t),handleId:G.connectionHandleId,toX:(G.connectionPosition.x-G.transform[0])/G.transform[2],toY:(G.connectionPosition.y-G.transform[1])/G.transform[2],connectionMode:G.connectionMode}),[t]),Xn),E=l?.[tn]?.handleBounds;let T=E?.[e];if(g===La.Loose&&(T=T||E?.[e==="source"?"target":"source"]),!l||!T)return null;const b=h?T.find(G=>G.id===h):T[0],N=b?b.x+b.width/2:(l.width??0)/2,k=b?b.y+b.height/2:l.height??0,U=(l.positionAbsolute?.x??0)+N,M=(l.positionAbsolute?.y??0)+k,Y=b?.position,K=Y?F5[Y]:null;if(!Y||!K)return null;if(s)return Ee.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:l,fromHandle:b,fromX:U,fromY:M,toX:d,toY:f,fromPosition:Y,toPosition:K,connectionStatus:o});let q="";const te={sourceX:U,sourceY:M,sourcePosition:Y,targetX:d,targetY:f,targetPosition:K};return r===Ta.Bezier?[q]=Qx(te):r===Ta.Step?[q]=Ny({...te,borderRadius:0}):r===Ta.SmoothStep?[q]=Ny(te):r===Ta.SimpleBezier?[q]=Kx(te):q=`M${U},${M} ${d},${f}`,Ee.createElement("path",{d:q,fill:"none",className:"react-flow__connection-path",style:n})};ww.displayName="ConnectionLine";const z5=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function j5({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:o,nodesConnectable:l,width:h,height:d,connectionStatus:f}=Gt(z5,Xn);return!(s&&o&&h&&l)?null:Ee.createElement("svg",{style:t,width:h,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container"},Ee.createElement("g",{className:ar(["react-flow__connection",f])},Ee.createElement(ww,{nodeId:s,handleType:o,style:e,type:n,CustomComponent:r,connectionStatus:f})))}function bv(t,e){return ie.useRef(null),Ln(),ie.useMemo(()=>e(t),[t])}const Cw=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:o,onNodeClick:l,onEdgeClick:h,onNodeDoubleClick:d,onEdgeDoubleClick:f,onNodeMouseEnter:g,onNodeMouseMove:E,onNodeMouseLeave:T,onNodeContextMenu:b,onSelectionContextMenu:N,onSelectionStart:k,onSelectionEnd:U,connectionLineType:M,connectionLineStyle:Y,connectionLineComponent:K,connectionLineContainerStyle:q,selectionKeyCode:te,selectionOnDrag:G,selectionMode:H,multiSelectionKeyCode:C,panActivationKeyCode:I,zoomActivationKeyCode:B,deleteKeyCode:P,onlyRenderVisibleElements:V,elementsSelectable:w,selectNodesOnDrag:D,defaultViewport:Q,translateExtent:z,minZoom:Z,maxZoom:se,preventScrolling:ne,defaultMarkerColor:A,zoomOnScroll:J,zoomOnPinch:ae,panOnScroll:O,panOnScrollSpeed:ge,panOnScrollMode:Ie,zoomOnDoubleClick:xe,panOnDrag:Ve,onPaneClick:Pe,onPaneMouseEnter:tt,onPaneMouseMove:We,onPaneMouseLeave:kt,onPaneScroll:Kt,onPaneContextMenu:rn,onEdgeContextMenu:Qt,onEdgeMouseEnter:xt,onEdgeMouseMove:xn,onEdgeMouseLeave:Ze,onReconnect:Ue,onReconnectStart:Xt,onReconnectEnd:Mn,reconnectRadius:er,noDragClassName:Fr,noWheelClassName:tr,noPanClassName:Pn,elevateEdgesOnSelect:Tr,disableKeyboardA11y:de,nodeOrigin:_e,nodeExtent:Oe,rfId:Be})=>{const it=bv(t,y5),gt=bv(e,S5);return V5(o),Ee.createElement(p5,{onPaneClick:Pe,onPaneMouseEnter:tt,onPaneMouseMove:We,onPaneMouseLeave:kt,onPaneContextMenu:rn,onPaneScroll:Kt,deleteKeyCode:P,selectionKeyCode:te,selectionOnDrag:G,selectionMode:H,onSelectionStart:k,onSelectionEnd:U,multiSelectionKeyCode:C,panActivationKeyCode:I,zoomActivationKeyCode:B,elementsSelectable:w,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:J,zoomOnPinch:ae,zoomOnDoubleClick:xe,panOnScroll:O,panOnScrollSpeed:ge,panOnScrollMode:Ie,panOnDrag:Ve,defaultViewport:Q,translateExtent:z,minZoom:Z,maxZoom:se,onSelectionContextMenu:N,preventScrolling:ne,noDragClassName:Fr,noWheelClassName:tr,noPanClassName:Pn,disableKeyboardA11y:de},Ee.createElement(H5,null,Ee.createElement(B5,{edgeTypes:gt,onEdgeClick:h,onEdgeDoubleClick:f,onlyRenderVisibleElements:V,onEdgeContextMenu:Qt,onEdgeMouseEnter:xt,onEdgeMouseMove:xn,onEdgeMouseLeave:Ze,onReconnect:Ue,onReconnectStart:Xt,onReconnectEnd:Mn,reconnectRadius:er,defaultMarkerColor:A,noPanClassName:Pn,elevateEdgesOnSelect:!!Tr,disableKeyboardA11y:de,rfId:Be},Ee.createElement(j5,{style:Y,type:M,component:K,containerStyle:q})),Ee.createElement("div",{className:"react-flow__edgelabel-renderer"}),Ee.createElement(T5,{nodeTypes:it,onNodeClick:l,onNodeDoubleClick:d,onNodeMouseEnter:g,onNodeMouseMove:E,onNodeMouseLeave:T,onNodeContextMenu:b,selectNodesOnDrag:D,onlyRenderVisibleElements:V,noPanClassName:Pn,noDragClassName:Fr,disableKeyboardA11y:de,nodeOrigin:_e,nodeExtent:Oe,rfId:Be})))};Cw.displayName="GraphView";var q5=ie.memo(Cw);const Oy=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],fa={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Oy,nodeExtent:Oy,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:La.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:EO,isValidConnection:void 0},Y5=()=>k4((t,e)=>({...fa,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:o}=e();t({nodeInternals:Vg(n,r,s,o)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",o=typeof r<"u",l=s?Vg(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:l,edges:o?r:[],hasDefaultNodes:s,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:o,fitViewOnInitDone:l,fitViewOnInitOptions:h,domNode:d,nodeOrigin:f}=e(),g=d?.querySelector(".react-flow__viewport");if(!g)return;const E=window.getComputedStyle(g),{m22:T}=new window.DOMMatrixReadOnly(E.transform),b=n.reduce((k,U)=>{const M=s.get(U.id);if(M?.hidden)s.set(M.id,{...M,[tn]:{...M[tn],handleBounds:void 0}});else if(M){const Y=RE(U.nodeElement);!!(Y.width&&Y.height&&(M.width!==Y.width||M.height!==Y.height||U.forceUpdate))&&(s.set(M.id,{...M,[tn]:{...M[tn],handleBounds:{source:mv(".source",U.nodeElement,T,f),target:mv(".target",U.nodeElement,T,f)}},...Y}),k.push({id:M.id,type:"dimensions",dimensions:Y}))}return k},[]);fw(s,f);const N=l||o&&!l&&mw(e,{initial:!0,...h});t({nodeInternals:new Map(s),fitViewOnInitDone:N}),b?.length>0&&r?.(b)},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:o}=e(),l=n.map(h=>{const d={id:h.id,type:"position",dragging:s};return r&&(d.positionAbsolute=h.positionAbsolute,d.position=h.position),d});o(l)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:o,nodeOrigin:l,getNodes:h,elevateNodesOnSelect:d}=e();if(n?.length){if(o){const f=gw(n,h()),g=Vg(f,s,l,d);t({nodeInternals:g})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let l,h=null;r?l=n.map(d=>_a(d,!0)):(l=Qu(o(),n),h=Qu(s,[])),Df({changedNodes:l,changedEdges:h,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let l,h=null;r?l=n.map(d=>_a(d,!0)):(l=Qu(s,n),h=Qu(o(),[])),Df({changedNodes:h,changedEdges:l,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:o}=e(),l=n||o(),h=r||s,d=l.map(g=>(g.selected=!1,_a(g.id,!1))),f=h.map(g=>_a(g.id,!1));Df({changedNodes:d,changedEdges:f,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r?.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r?.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),o=r().filter(h=>h.selected).map(h=>_a(h.id,!1)),l=n.filter(h=>h.selected).map(h=>_a(h.id,!1));Df({changedNodes:o,changedEdges:l,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=kE(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:o,d3Zoom:l,d3Selection:h,translateExtent:d}=e();if(!l||!h||!n.x&&!n.y)return!1;const f=Ca.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),g=[[0,0],[s,o]],E=l?.constrain()(f,g,d);return l.transform(h,E),r[0]!==E.x||r[1]!==E.y||r[2]!==E.k},cancelConnection:()=>t({connectionNodeId:fa.connectionNodeId,connectionHandleId:fa.connectionHandleId,connectionHandleType:fa.connectionHandleType,connectionStatus:fa.connectionStatus,connectionStartHandle:fa.connectionStartHandle,connectionEndHandle:fa.connectionEndHandle}),reset:()=>t({...fa})}),Object.is),Nw=({children:t})=>{const e=ie.useRef(null);return e.current||(e.current=Y5()),Ee.createElement(cO,{value:e.current},t)};Nw.displayName="ReactFlowProvider";const Iw=({children:t})=>ie.useContext(Q0)?Ee.createElement(Ee.Fragment,null,t):Ee.createElement(Nw,null,t);Iw.displayName="ReactFlowWrapper";const G5={input:aw,default:ky,output:uw,group:HE},$5={default:y0,straight:ME,step:LE,smoothstep:X0,simplebezier:OE},K5=[0,0],Q5=[15,15],X5={x:0,y:0,zoom:1},W5={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Rw=ie.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:o=G5,edgeTypes:l=$5,onNodeClick:h,onEdgeClick:d,onInit:f,onMove:g,onMoveStart:E,onMoveEnd:T,onConnect:b,onConnectStart:N,onConnectEnd:k,onClickConnectStart:U,onClickConnectEnd:M,onNodeMouseEnter:Y,onNodeMouseMove:K,onNodeMouseLeave:q,onNodeContextMenu:te,onNodeDoubleClick:G,onNodeDragStart:H,onNodeDrag:C,onNodeDragStop:I,onNodesDelete:B,onEdgesDelete:P,onSelectionChange:V,onSelectionDragStart:w,onSelectionDrag:D,onSelectionDragStop:Q,onSelectionContextMenu:z,onSelectionStart:Z,onSelectionEnd:se,connectionMode:ne=La.Strict,connectionLineType:A=Ta.Bezier,connectionLineStyle:J,connectionLineComponent:ae,connectionLineContainerStyle:O,deleteKeyCode:ge="Backspace",selectionKeyCode:Ie="Shift",selectionOnDrag:xe=!1,selectionMode:Ve=xh.Full,panActivationKeyCode:Pe="Space",multiSelectionKeyCode:tt=g0()?"Meta":"Control",zoomActivationKeyCode:We=g0()?"Meta":"Control",snapToGrid:kt=!1,snapGrid:Kt=Q5,onlyRenderVisibleElements:rn=!1,selectNodesOnDrag:Qt=!0,nodesDraggable:xt,nodesConnectable:xn,nodesFocusable:Ze,nodeOrigin:Ue=K5,edgesFocusable:Xt,edgesUpdatable:Mn,elementsSelectable:er,defaultViewport:Fr=X5,minZoom:tr=.5,maxZoom:Pn=2,translateExtent:Tr=Oy,preventScrolling:de=!0,nodeExtent:_e,defaultMarkerColor:Oe="#b1b1b7",zoomOnScroll:Be=!0,zoomOnPinch:it=!0,panOnScroll:gt=!1,panOnScrollSpeed:Dt=.5,panOnScrollMode:Ut=Co.Free,zoomOnDoubleClick:sn=!0,panOnDrag:Ft=!0,onPaneClick:Et,onPaneMouseEnter:Wt,onPaneMouseMove:En,onPaneMouseLeave:as,onPaneScroll:ci,onPaneContextMenu:br,children:zr,onEdgeContextMenu:vr,onEdgeDoubleClick:jr,onEdgeMouseEnter:$a,onEdgeMouseMove:xi,onEdgeMouseLeave:Fs,onEdgeUpdate:wi,onEdgeUpdateStart:Ko,onEdgeUpdateEnd:Ot,onReconnect:an,onReconnectStart:Zt,onReconnectEnd:or,reconnectRadius:Ka=10,edgeUpdaterRadius:Ul=10,onNodesChange:Ci,onEdgesChange:Qo,noDragClassName:os="nodrag",noWheelClassName:Ni="nowheel",noPanClassName:qr="nopan",fitView:Yr=!1,fitViewOptions:Gr,connectOnClick:Bn=!0,attributionPosition:qt,proOptions:Qa,defaultEdgeOptions:zs,elevateNodesOnSelect:Ar=!0,elevateEdgesOnSelect:hi=!1,disableKeyboardA11y:Xa=!1,autoPanOnConnect:Xo=!0,autoPanOnNodeDrag:us=!0,connectionRadius:Wo=20,isValidConnection:Ii,onError:$r,style:_n,id:Ri,nodeDragThreshold:Zo,...di},js)=>{const ki=Ri||"1";return Ee.createElement("div",{...di,style:{..._n,...W5},ref:js,className:ar(["react-flow",s]),"data-testid":"rf__wrapper",id:Ri},Ee.createElement(Iw,null,Ee.createElement(q5,{onInit:f,onMove:g,onMoveStart:E,onMoveEnd:T,onNodeClick:h,onEdgeClick:d,onNodeMouseEnter:Y,onNodeMouseMove:K,onNodeMouseLeave:q,onNodeContextMenu:te,onNodeDoubleClick:G,nodeTypes:o,edgeTypes:l,connectionLineType:A,connectionLineStyle:J,connectionLineComponent:ae,connectionLineContainerStyle:O,selectionKeyCode:Ie,selectionOnDrag:xe,selectionMode:Ve,deleteKeyCode:ge,multiSelectionKeyCode:tt,panActivationKeyCode:Pe,zoomActivationKeyCode:We,onlyRenderVisibleElements:rn,selectNodesOnDrag:Qt,defaultViewport:Fr,translateExtent:Tr,minZoom:tr,maxZoom:Pn,preventScrolling:de,zoomOnScroll:Be,zoomOnPinch:it,zoomOnDoubleClick:sn,panOnScroll:gt,panOnScrollSpeed:Dt,panOnScrollMode:Ut,panOnDrag:Ft,onPaneClick:Et,onPaneMouseEnter:Wt,onPaneMouseMove:En,onPaneMouseLeave:as,onPaneScroll:ci,onPaneContextMenu:br,onSelectionContextMenu:z,onSelectionStart:Z,onSelectionEnd:se,onEdgeContextMenu:vr,onEdgeDoubleClick:jr,onEdgeMouseEnter:$a,onEdgeMouseMove:xi,onEdgeMouseLeave:Fs,onReconnect:an??wi,onReconnectStart:Zt??Ko,onReconnectEnd:or??Ot,reconnectRadius:Ka??Ul,defaultMarkerColor:Oe,noDragClassName:os,noWheelClassName:Ni,noPanClassName:qr,elevateEdgesOnSelect:hi,rfId:ki,disableKeyboardA11y:Xa,nodeOrigin:Ue,nodeExtent:_e}),Ee.createElement(FO,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:b,onConnectStart:N,onConnectEnd:k,onClickConnectStart:U,onClickConnectEnd:M,nodesDraggable:xt,nodesConnectable:xn,nodesFocusable:Ze,edgesFocusable:Xt,edgesUpdatable:Mn,elementsSelectable:er,elevateNodesOnSelect:Ar,minZoom:tr,maxZoom:Pn,nodeExtent:_e,onNodesChange:Ci,onEdgesChange:Qo,snapToGrid:kt,snapGrid:Kt,connectionMode:ne,translateExtent:Tr,connectOnClick:Bn,defaultEdgeOptions:zs,fitView:Yr,fitViewOptions:Gr,onNodesDelete:B,onEdgesDelete:P,onNodeDragStart:H,onNodeDrag:C,onNodeDragStop:I,onSelectionDrag:D,onSelectionDragStart:w,onSelectionDragStop:Q,noPanClassName:qr,nodeOrigin:Ue,rfId:ki,autoPanOnConnect:Xo,autoPanOnNodeDrag:us,onError:$r,connectionRadius:Wo,isValidConnection:Ii,nodeDragThreshold:Zo}),Ee.createElement(HO,{onSelectionChange:V}),zr,Ee.createElement(dO,{proOptions:Qa,position:qt}),Ee.createElement(GO,{rfId:ki,disableKeyboardA11y:Xa})))});Rw.displayName="ReactFlow";function kw(t){return e=>{const[n,r]=ie.useState(e),s=ie.useCallback(o=>r(l=>t(o,l)),[]);return[n,r,s]}}const Z5=kw(gw),J5=kw(a5);function eL(){return Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Ee.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function tL(){return Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Ee.createElement("path",{d:"M0 0h32v4.2H0z"}))}function nL(){return Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Ee.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function rL(){return Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Ee.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function iL(){return Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Ee.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Zc=({children:t,className:e,...n})=>Ee.createElement("button",{type:"button",className:ar(["react-flow__controls-button",e]),...n},t);Zc.displayName="ControlButton";const sL=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),Dw=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:l,onFitView:h,onInteractiveChange:d,className:f,children:g,position:E="bottom-left"})=>{const T=Ln(),[b,N]=ie.useState(!1),{isInteractive:k,minZoomReached:U,maxZoomReached:M}=Gt(sL,Xn),{zoomIn:Y,zoomOut:K,fitView:q}=Yh();if(ie.useEffect(()=>{N(!0)},[]),!b)return null;const te=()=>{Y(),o?.()},G=()=>{K(),l?.()},H=()=>{q(s),h?.()},C=()=>{T.setState({nodesDraggable:!k,nodesConnectable:!k,elementsSelectable:!k}),d?.(!k)};return Ee.createElement(Fx,{className:ar(["react-flow__controls",f]),position:E,style:t,"data-testid":"rf__controls"},e&&Ee.createElement(Ee.Fragment,null,Ee.createElement(Zc,{onClick:te,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:M},Ee.createElement(eL,null)),Ee.createElement(Zc,{onClick:G,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:U},Ee.createElement(tL,null))),n&&Ee.createElement(Zc,{className:"react-flow__controls-fitview",onClick:H,title:"fit view","aria-label":"fit view"},Ee.createElement(nL,null)),r&&Ee.createElement(Zc,{className:"react-flow__controls-interactive",onClick:C,title:"toggle interactivity","aria-label":"toggle interactivity"},k?Ee.createElement(iL,null):Ee.createElement(rL,null)),g)};Dw.displayName="Controls";var aL=ie.memo(Dw),ui;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ui||(ui={}));function oL({color:t,dimensions:e,lineWidth:n}){return Ee.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function uL({color:t,radius:e}){return Ee.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const lL={[ui.Dots]:"#91919a",[ui.Lines]:"#eee",[ui.Cross]:"#e2e2e2"},cL={[ui.Dots]:1,[ui.Lines]:1,[ui.Cross]:6},hL=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Ow({id:t,variant:e=ui.Dots,gap:n=20,size:r,lineWidth:s=1,offset:o=2,color:l,style:h,className:d}){const f=ie.useRef(null),{transform:g,patternId:E}=Gt(hL,Xn),T=l||lL[e],b=r||cL[e],N=e===ui.Dots,k=e===ui.Cross,U=Array.isArray(n)?n:[n,n],M=[U[0]*g[2]||1,U[1]*g[2]||1],Y=b*g[2],K=k?[Y,Y]:M,q=N?[Y/o,Y/o]:[K[0]/o,K[1]/o];return Ee.createElement("svg",{className:ar(["react-flow__background",d]),style:{...h,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:f,"data-testid":"rf__background"},Ee.createElement("pattern",{id:E+t,x:g[0]%M[0],y:g[1]%M[1],width:M[0],height:M[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${q[0]},-${q[1]})`},N?Ee.createElement(uL,{color:T,radius:Y/o}):Ee.createElement(oL,{dimensions:K,color:T,lineWidth:s})),Ee.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${E+t})`}))}Ow.displayName="Background";var dL=ie.memo(Ow);const fL=()=>{};var vv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},mL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Mw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,f=d?t[s+2]:0,g=o>>2,E=(o&3)<<4|h>>4;let T=(h&15)<<2|f>>6,b=f&63;d||(b=64,l||(T=64)),r.push(n[g],n[E],n[T],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const E=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||f==null||E==null)throw new pL;const T=o<<2|h>>4;if(r.push(T),f!==64){const b=h<<4&240|f>>2;if(r.push(b),E!==64){const N=f<<6&192|E;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gL=function(t){const e=Lw(t);return Mw.encodeByteArray(e,!0)},E0=function(t){return gL(t).replace(/\./g,"")},Pw=function(t){try{return Mw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=()=>yL().__FIREBASE_DEFAULTS__,_L=()=>{if(typeof process>"u"||typeof vv>"u")return;const t=vv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Pw(t[1]);return e&&JSON.parse(e)},W0=()=>{try{return fL()||EL()||_L()||TL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bw=t=>{var e,n;return(n=(e=W0())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Uw=t=>{const e=Bw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Hw=()=>{var t;return(t=W0())===null||t===void 0?void 0:t.config},Vw=t=>{var e;return(e=W0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(t){return t.endsWith(".cloudworkstations.dev")}async function FE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[E0(JSON.stringify(n)),E0(JSON.stringify(l)),""].join(".")}const sh={};function AL(){const t={prod:[],emulator:[]};for(const e of Object.keys(sh))sh[e]?t.emulator.push(e):t.prod.push(e);return t}function SL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Av=!1;function zE(t,e){if(typeof window>"u"||typeof document>"u"||!Vo(window.location.host)||sh[t]===e||sh[t]||Av)return;sh[t]=e;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",o=AL().prod.length>0;function l(){const T=document.getElementById(r);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,b){T.setAttribute("width","24"),T.setAttribute("id",b),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function f(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Av=!0,l()},T}function g(T,b){T.setAttribute("id",b),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=SL(r),b=n("text"),N=document.getElementById(b)||document.createElement("span"),k=n("learnmore"),U=document.getElementById(k)||document.createElement("a"),M=n("preprendIcon"),Y=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const K=T.element;h(K),g(U,k);const q=f();d(Y,M),K.append(Y,N,U,q),document.body.appendChild(K)}o?(N.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wn())}function wL(){var t;const e=(t=W0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function IL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RL(){const t=Wn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kL(){return!wL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DL(){try{return typeof indexedDB=="object"}catch{return!1}}function OL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL="FirebaseError";class is extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=LL,Object.setPrototypeOf(this,is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gh.prototype.create)}}class Gh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?ML(o,r):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new is(s,h,r)}}function ML(t,e){return t.replace(PL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const PL=/\{\$([^}]+)}/g;function BL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Oo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],l=e[s];if(Sv(o)&&Sv(l)){if(!Oo(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Sv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Jc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function eh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function UL(t,e){const n=new HL(t,e);return n.subscribe.bind(n)}class HL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");VL(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=qg),s.error===void 0&&(s.error=qg),s.complete===void 0&&(s.complete=qg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(t){return t&&t._delegate?t._delegate:t}class Ma{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new bL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jL(e))try{this.getOrInitializeService({instanceIdentifier:xo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xo){return this.instances.has(e)}getOptions(e=xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&l.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xo){return this.component?this.component.multipleInstances?e:xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zL(t){return t===xo?void 0:t}function jL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ct||(ct={}));const YL={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},GL=ct.INFO,$L={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},KL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=$L[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jE{constructor(e){this.name=e,this._logLevel=GL,this._logHandler=KL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const QL=(t,e)=>e.some(n=>t instanceof n);let xv,wv;function XL(){return xv||(xv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WL(){return wv||(wv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fw=new WeakMap,Ly=new WeakMap,zw=new WeakMap,Yg=new WeakMap,qE=new WeakMap;function ZL(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Ia(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Fw.set(n,t)}).catch(()=>{}),qE.set(e,t),e}function JL(t){if(Ly.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Ly.set(t,e)}let My={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ly.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ia(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eM(t){My=t(My)}function tM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Gg(this),e,...n);return zw.set(r,e.sort?e.sort():[e]),Ia(r)}:WL().includes(t)?function(...e){return t.apply(Gg(this),e),Ia(Fw.get(this))}:function(...e){return Ia(t.apply(Gg(this),e))}}function nM(t){return typeof t=="function"?tM(t):(t instanceof IDBTransaction&&JL(t),QL(t,XL())?new Proxy(t,My):t)}function Ia(t){if(t instanceof IDBRequest)return ZL(t);if(Yg.has(t))return Yg.get(t);const e=nM(t);return e!==t&&(Yg.set(t,e),qE.set(e,t)),e}const Gg=t=>qE.get(t);function rM(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=Ia(l);return r&&l.addEventListener("upgradeneeded",d=>{r(Ia(l.result),d.oldVersion,d.newVersion,Ia(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),h}const iM=["get","getKey","getAll","getAllKeys","count"],sM=["put","add","delete","clear"],$g=new Map;function Cv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($g.get(e))return $g.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=sM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||iM.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(h.shift())),(await Promise.all([f[n](...h),s&&d.done]))[0]};return $g.set(e,o),o}eM(t=>({...t,get:(e,n,r)=>Cv(e,n)||t.get(e,n,r),has:(e,n)=>!!Cv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oM(t){const e=t.getComponent();return e?.type==="VERSION"}const Py="@firebase/app",Nv="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new jE("@firebase/app"),uM="@firebase/app-compat",lM="@firebase/analytics-compat",cM="@firebase/analytics",hM="@firebase/app-check-compat",dM="@firebase/app-check",fM="@firebase/auth",mM="@firebase/auth-compat",pM="@firebase/database",gM="@firebase/data-connect",yM="@firebase/database-compat",EM="@firebase/functions",_M="@firebase/functions-compat",TM="@firebase/installations",bM="@firebase/installations-compat",vM="@firebase/messaging",AM="@firebase/messaging-compat",SM="@firebase/performance",xM="@firebase/performance-compat",wM="@firebase/remote-config",CM="@firebase/remote-config-compat",NM="@firebase/storage",IM="@firebase/storage-compat",RM="@firebase/firestore",kM="@firebase/ai",DM="@firebase/firestore-compat",OM="firebase",LM="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="[DEFAULT]",MM={[Py]:"fire-core",[uM]:"fire-core-compat",[cM]:"fire-analytics",[lM]:"fire-analytics-compat",[dM]:"fire-app-check",[hM]:"fire-app-check-compat",[fM]:"fire-auth",[mM]:"fire-auth-compat",[pM]:"fire-rtdb",[gM]:"fire-data-connect",[yM]:"fire-rtdb-compat",[EM]:"fire-fn",[_M]:"fire-fn-compat",[TM]:"fire-iid",[bM]:"fire-iid-compat",[vM]:"fire-fcm",[AM]:"fire-fcm-compat",[SM]:"fire-perf",[xM]:"fire-perf-compat",[wM]:"fire-rc",[CM]:"fire-rc-compat",[NM]:"fire-gcs",[IM]:"fire-gcs-compat",[RM]:"fire-fst",[DM]:"fire-fst-compat",[kM]:"fire-vertex","fire-js":"fire-js",[OM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=new Map,PM=new Map,Uy=new Map;function Iv(t,e){try{t.container.addComponent(e)}catch(n){Bs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Lo(t){const e=t.name;if(Uy.has(e))return Bs.debug(`There were multiple attempts to register component ${e}.`),!1;Uy.set(e,t);for(const n of _0.values())Iv(n,t);for(const n of PM.values())Iv(n,t);return!0}function Z0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Lr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ra=new Gh("app","Firebase",BM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ra.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=LM;function jw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:By,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Ra.create("bad-app-name",{appName:String(s)});if(n||(n=Hw()),!n)throw Ra.create("no-options");const o=_0.get(s);if(o){if(Oo(n,o.options)&&Oo(r,o.config))return o;throw Ra.create("duplicate-app",{appName:s})}const l=new qL(s);for(const d of Uy.values())l.addComponent(d);const h=new UM(n,r,l);return _0.set(s,h),h}function YE(t=By){const e=_0.get(t);if(!e&&t===By&&Hw())return jw();if(!e)throw Ra.create("no-app",{appName:t});return e}function Xi(t,e,n){var r;let s=(r=MM[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bs.warn(h.join(" "));return}Lo(new Ma(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM="firebase-heartbeat-database",VM=1,Nh="firebase-heartbeat-store";let Kg=null;function qw(){return Kg||(Kg=rM(HM,VM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ra.create("idb-open",{originalErrorMessage:t.message})})),Kg}async function FM(t){try{const n=(await qw()).transaction(Nh),r=await n.objectStore(Nh).get(Yw(t));return await n.done,r}catch(e){if(e instanceof is)Bs.warn(e.message);else{const n=Ra.create("idb-get",{originalErrorMessage:e?.message});Bs.warn(n.message)}}}async function Rv(t,e){try{const r=(await qw()).transaction(Nh,"readwrite");await r.objectStore(Nh).put(e,Yw(t)),await r.done}catch(n){if(n instanceof is)Bs.warn(n.message);else{const r=Ra.create("idb-set",{originalErrorMessage:n?.message});Bs.warn(r.message)}}}function Yw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=1024,jM=30;class qM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=kv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>jM){const l=$M(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Bs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=kv(),{heartbeatsToSend:r,unsentEntries:s}=YM(this._heartbeatsCache.heartbeats),o=E0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Bs.warn(n),""}}}function kv(){return new Date().toISOString().substring(0,10)}function YM(t,e=zM){const n=[];let r=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),Dv(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Dv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class GM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DL()?OL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FM(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Rv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Rv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Dv(t){return E0(JSON.stringify({version:2,heartbeats:t})).length}function $M(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(t){Lo(new Ma("platform-logger",e=>new aM(e),"PRIVATE")),Lo(new Ma("heartbeat",e=>new qM(e),"PRIVATE")),Xi(Py,Nv,t),Xi(Py,Nv,"esm2017"),Xi("fire-js","")}KM("");var QM="firebase",XM="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi(QM,XM,"app");var Ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ka,Gw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(H,C){function I(){}I.prototype=C.prototype,H.D=C.prototype,H.prototype=new I,H.prototype.constructor=H,H.C=function(B,P,V){for(var w=Array(arguments.length-2),D=2;D<arguments.length;D++)w[D-2]=arguments[D];return C.prototype[P].apply(B,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(H,C,I){I||(I=0);var B=Array(16);if(typeof C=="string")for(var P=0;16>P;++P)B[P]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(P=0;16>P;++P)B[P]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=H.g[0],I=H.g[1],P=H.g[2];var V=H.g[3],w=C+(V^I&(P^V))+B[0]+3614090360&4294967295;C=I+(w<<7&4294967295|w>>>25),w=V+(P^C&(I^P))+B[1]+3905402710&4294967295,V=C+(w<<12&4294967295|w>>>20),w=P+(I^V&(C^I))+B[2]+606105819&4294967295,P=V+(w<<17&4294967295|w>>>15),w=I+(C^P&(V^C))+B[3]+3250441966&4294967295,I=P+(w<<22&4294967295|w>>>10),w=C+(V^I&(P^V))+B[4]+4118548399&4294967295,C=I+(w<<7&4294967295|w>>>25),w=V+(P^C&(I^P))+B[5]+1200080426&4294967295,V=C+(w<<12&4294967295|w>>>20),w=P+(I^V&(C^I))+B[6]+2821735955&4294967295,P=V+(w<<17&4294967295|w>>>15),w=I+(C^P&(V^C))+B[7]+4249261313&4294967295,I=P+(w<<22&4294967295|w>>>10),w=C+(V^I&(P^V))+B[8]+1770035416&4294967295,C=I+(w<<7&4294967295|w>>>25),w=V+(P^C&(I^P))+B[9]+2336552879&4294967295,V=C+(w<<12&4294967295|w>>>20),w=P+(I^V&(C^I))+B[10]+4294925233&4294967295,P=V+(w<<17&4294967295|w>>>15),w=I+(C^P&(V^C))+B[11]+2304563134&4294967295,I=P+(w<<22&4294967295|w>>>10),w=C+(V^I&(P^V))+B[12]+1804603682&4294967295,C=I+(w<<7&4294967295|w>>>25),w=V+(P^C&(I^P))+B[13]+4254626195&4294967295,V=C+(w<<12&4294967295|w>>>20),w=P+(I^V&(C^I))+B[14]+2792965006&4294967295,P=V+(w<<17&4294967295|w>>>15),w=I+(C^P&(V^C))+B[15]+1236535329&4294967295,I=P+(w<<22&4294967295|w>>>10),w=C+(P^V&(I^P))+B[1]+4129170786&4294967295,C=I+(w<<5&4294967295|w>>>27),w=V+(I^P&(C^I))+B[6]+3225465664&4294967295,V=C+(w<<9&4294967295|w>>>23),w=P+(C^I&(V^C))+B[11]+643717713&4294967295,P=V+(w<<14&4294967295|w>>>18),w=I+(V^C&(P^V))+B[0]+3921069994&4294967295,I=P+(w<<20&4294967295|w>>>12),w=C+(P^V&(I^P))+B[5]+3593408605&4294967295,C=I+(w<<5&4294967295|w>>>27),w=V+(I^P&(C^I))+B[10]+38016083&4294967295,V=C+(w<<9&4294967295|w>>>23),w=P+(C^I&(V^C))+B[15]+3634488961&4294967295,P=V+(w<<14&4294967295|w>>>18),w=I+(V^C&(P^V))+B[4]+3889429448&4294967295,I=P+(w<<20&4294967295|w>>>12),w=C+(P^V&(I^P))+B[9]+568446438&4294967295,C=I+(w<<5&4294967295|w>>>27),w=V+(I^P&(C^I))+B[14]+3275163606&4294967295,V=C+(w<<9&4294967295|w>>>23),w=P+(C^I&(V^C))+B[3]+4107603335&4294967295,P=V+(w<<14&4294967295|w>>>18),w=I+(V^C&(P^V))+B[8]+1163531501&4294967295,I=P+(w<<20&4294967295|w>>>12),w=C+(P^V&(I^P))+B[13]+2850285829&4294967295,C=I+(w<<5&4294967295|w>>>27),w=V+(I^P&(C^I))+B[2]+4243563512&4294967295,V=C+(w<<9&4294967295|w>>>23),w=P+(C^I&(V^C))+B[7]+1735328473&4294967295,P=V+(w<<14&4294967295|w>>>18),w=I+(V^C&(P^V))+B[12]+2368359562&4294967295,I=P+(w<<20&4294967295|w>>>12),w=C+(I^P^V)+B[5]+4294588738&4294967295,C=I+(w<<4&4294967295|w>>>28),w=V+(C^I^P)+B[8]+2272392833&4294967295,V=C+(w<<11&4294967295|w>>>21),w=P+(V^C^I)+B[11]+1839030562&4294967295,P=V+(w<<16&4294967295|w>>>16),w=I+(P^V^C)+B[14]+4259657740&4294967295,I=P+(w<<23&4294967295|w>>>9),w=C+(I^P^V)+B[1]+2763975236&4294967295,C=I+(w<<4&4294967295|w>>>28),w=V+(C^I^P)+B[4]+1272893353&4294967295,V=C+(w<<11&4294967295|w>>>21),w=P+(V^C^I)+B[7]+4139469664&4294967295,P=V+(w<<16&4294967295|w>>>16),w=I+(P^V^C)+B[10]+3200236656&4294967295,I=P+(w<<23&4294967295|w>>>9),w=C+(I^P^V)+B[13]+681279174&4294967295,C=I+(w<<4&4294967295|w>>>28),w=V+(C^I^P)+B[0]+3936430074&4294967295,V=C+(w<<11&4294967295|w>>>21),w=P+(V^C^I)+B[3]+3572445317&4294967295,P=V+(w<<16&4294967295|w>>>16),w=I+(P^V^C)+B[6]+76029189&4294967295,I=P+(w<<23&4294967295|w>>>9),w=C+(I^P^V)+B[9]+3654602809&4294967295,C=I+(w<<4&4294967295|w>>>28),w=V+(C^I^P)+B[12]+3873151461&4294967295,V=C+(w<<11&4294967295|w>>>21),w=P+(V^C^I)+B[15]+530742520&4294967295,P=V+(w<<16&4294967295|w>>>16),w=I+(P^V^C)+B[2]+3299628645&4294967295,I=P+(w<<23&4294967295|w>>>9),w=C+(P^(I|~V))+B[0]+4096336452&4294967295,C=I+(w<<6&4294967295|w>>>26),w=V+(I^(C|~P))+B[7]+1126891415&4294967295,V=C+(w<<10&4294967295|w>>>22),w=P+(C^(V|~I))+B[14]+2878612391&4294967295,P=V+(w<<15&4294967295|w>>>17),w=I+(V^(P|~C))+B[5]+4237533241&4294967295,I=P+(w<<21&4294967295|w>>>11),w=C+(P^(I|~V))+B[12]+1700485571&4294967295,C=I+(w<<6&4294967295|w>>>26),w=V+(I^(C|~P))+B[3]+2399980690&4294967295,V=C+(w<<10&4294967295|w>>>22),w=P+(C^(V|~I))+B[10]+4293915773&4294967295,P=V+(w<<15&4294967295|w>>>17),w=I+(V^(P|~C))+B[1]+2240044497&4294967295,I=P+(w<<21&4294967295|w>>>11),w=C+(P^(I|~V))+B[8]+1873313359&4294967295,C=I+(w<<6&4294967295|w>>>26),w=V+(I^(C|~P))+B[15]+4264355552&4294967295,V=C+(w<<10&4294967295|w>>>22),w=P+(C^(V|~I))+B[6]+2734768916&4294967295,P=V+(w<<15&4294967295|w>>>17),w=I+(V^(P|~C))+B[13]+1309151649&4294967295,I=P+(w<<21&4294967295|w>>>11),w=C+(P^(I|~V))+B[4]+4149444226&4294967295,C=I+(w<<6&4294967295|w>>>26),w=V+(I^(C|~P))+B[11]+3174756917&4294967295,V=C+(w<<10&4294967295|w>>>22),w=P+(C^(V|~I))+B[2]+718787259&4294967295,P=V+(w<<15&4294967295|w>>>17),w=I+(V^(P|~C))+B[9]+3951481745&4294967295,H.g[0]=H.g[0]+C&4294967295,H.g[1]=H.g[1]+(P+(w<<21&4294967295|w>>>11))&4294967295,H.g[2]=H.g[2]+P&4294967295,H.g[3]=H.g[3]+V&4294967295}r.prototype.u=function(H,C){C===void 0&&(C=H.length);for(var I=C-this.blockSize,B=this.B,P=this.h,V=0;V<C;){if(P==0)for(;V<=I;)s(this,H,V),V+=this.blockSize;if(typeof H=="string"){for(;V<C;)if(B[P++]=H.charCodeAt(V++),P==this.blockSize){s(this,B),P=0;break}}else for(;V<C;)if(B[P++]=H[V++],P==this.blockSize){s(this,B),P=0;break}}this.h=P,this.o+=C},r.prototype.v=function(){var H=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);H[0]=128;for(var C=1;C<H.length-8;++C)H[C]=0;var I=8*this.o;for(C=H.length-8;C<H.length;++C)H[C]=I&255,I/=256;for(this.u(H),H=Array(16),C=I=0;4>C;++C)for(var B=0;32>B;B+=8)H[I++]=this.g[C]>>>B&255;return H};function o(H,C){var I=h;return Object.prototype.hasOwnProperty.call(I,H)?I[H]:I[H]=C(H)}function l(H,C){this.h=C;for(var I=[],B=!0,P=H.length-1;0<=P;P--){var V=H[P]|0;B&&V==C||(I[P]=V,B=!1)}this.g=I}var h={};function d(H){return-128<=H&&128>H?o(H,function(C){return new l([C|0],0>C?-1:0)}):new l([H|0],0>H?-1:0)}function f(H){if(isNaN(H)||!isFinite(H))return E;if(0>H)return U(f(-H));for(var C=[],I=1,B=0;H>=I;B++)C[B]=H/I|0,I*=4294967296;return new l(C,0)}function g(H,C){if(H.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(H.charAt(0)=="-")return U(g(H.substring(1),C));if(0<=H.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=f(Math.pow(C,8)),B=E,P=0;P<H.length;P+=8){var V=Math.min(8,H.length-P),w=parseInt(H.substring(P,P+V),C);8>V?(V=f(Math.pow(C,V)),B=B.j(V).add(f(w))):(B=B.j(I),B=B.add(f(w)))}return B}var E=d(0),T=d(1),b=d(16777216);t=l.prototype,t.m=function(){if(k(this))return-U(this).m();for(var H=0,C=1,I=0;I<this.g.length;I++){var B=this.i(I);H+=(0<=B?B:4294967296+B)*C,C*=4294967296}return H},t.toString=function(H){if(H=H||10,2>H||36<H)throw Error("radix out of range: "+H);if(N(this))return"0";if(k(this))return"-"+U(this).toString(H);for(var C=f(Math.pow(H,6)),I=this,B="";;){var P=q(I,C).g;I=M(I,P.j(C));var V=((0<I.g.length?I.g[0]:I.h)>>>0).toString(H);if(I=P,N(I))return V+B;for(;6>V.length;)V="0"+V;B=V+B}},t.i=function(H){return 0>H?0:H<this.g.length?this.g[H]:this.h};function N(H){if(H.h!=0)return!1;for(var C=0;C<H.g.length;C++)if(H.g[C]!=0)return!1;return!0}function k(H){return H.h==-1}t.l=function(H){return H=M(this,H),k(H)?-1:N(H)?0:1};function U(H){for(var C=H.g.length,I=[],B=0;B<C;B++)I[B]=~H.g[B];return new l(I,~H.h).add(T)}t.abs=function(){return k(this)?U(this):this},t.add=function(H){for(var C=Math.max(this.g.length,H.g.length),I=[],B=0,P=0;P<=C;P++){var V=B+(this.i(P)&65535)+(H.i(P)&65535),w=(V>>>16)+(this.i(P)>>>16)+(H.i(P)>>>16);B=w>>>16,V&=65535,w&=65535,I[P]=w<<16|V}return new l(I,I[I.length-1]&-2147483648?-1:0)};function M(H,C){return H.add(U(C))}t.j=function(H){if(N(this)||N(H))return E;if(k(this))return k(H)?U(this).j(U(H)):U(U(this).j(H));if(k(H))return U(this.j(U(H)));if(0>this.l(b)&&0>H.l(b))return f(this.m()*H.m());for(var C=this.g.length+H.g.length,I=[],B=0;B<2*C;B++)I[B]=0;for(B=0;B<this.g.length;B++)for(var P=0;P<H.g.length;P++){var V=this.i(B)>>>16,w=this.i(B)&65535,D=H.i(P)>>>16,Q=H.i(P)&65535;I[2*B+2*P]+=w*Q,Y(I,2*B+2*P),I[2*B+2*P+1]+=V*Q,Y(I,2*B+2*P+1),I[2*B+2*P+1]+=w*D,Y(I,2*B+2*P+1),I[2*B+2*P+2]+=V*D,Y(I,2*B+2*P+2)}for(B=0;B<C;B++)I[B]=I[2*B+1]<<16|I[2*B];for(B=C;B<2*C;B++)I[B]=0;return new l(I,0)};function Y(H,C){for(;(H[C]&65535)!=H[C];)H[C+1]+=H[C]>>>16,H[C]&=65535,C++}function K(H,C){this.g=H,this.h=C}function q(H,C){if(N(C))throw Error("division by zero");if(N(H))return new K(E,E);if(k(H))return C=q(U(H),C),new K(U(C.g),U(C.h));if(k(C))return C=q(H,U(C)),new K(U(C.g),C.h);if(30<H.g.length){if(k(H)||k(C))throw Error("slowDivide_ only works with positive integers.");for(var I=T,B=C;0>=B.l(H);)I=te(I),B=te(B);var P=G(I,1),V=G(B,1);for(B=G(B,2),I=G(I,2);!N(B);){var w=V.add(B);0>=w.l(H)&&(P=P.add(I),V=w),B=G(B,1),I=G(I,1)}return C=M(H,P.j(C)),new K(P,C)}for(P=E;0<=H.l(C);){for(I=Math.max(1,Math.floor(H.m()/C.m())),B=Math.ceil(Math.log(I)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),V=f(I),w=V.j(C);k(w)||0<w.l(H);)I-=B,V=f(I),w=V.j(C);N(V)&&(V=T),P=P.add(V),H=M(H,w)}return new K(P,H)}t.A=function(H){return q(this,H).h},t.and=function(H){for(var C=Math.max(this.g.length,H.g.length),I=[],B=0;B<C;B++)I[B]=this.i(B)&H.i(B);return new l(I,this.h&H.h)},t.or=function(H){for(var C=Math.max(this.g.length,H.g.length),I=[],B=0;B<C;B++)I[B]=this.i(B)|H.i(B);return new l(I,this.h|H.h)},t.xor=function(H){for(var C=Math.max(this.g.length,H.g.length),I=[],B=0;B<C;B++)I[B]=this.i(B)^H.i(B);return new l(I,this.h^H.h)};function te(H){for(var C=H.g.length+1,I=[],B=0;B<C;B++)I[B]=H.i(B)<<1|H.i(B-1)>>>31;return new l(I,H.h)}function G(H,C){var I=C>>5;C%=32;for(var B=H.g.length-I,P=[],V=0;V<B;V++)P[V]=0<C?H.i(V+I)>>>C|H.i(V+I+1)<<32-C:H.i(V+I);return new l(P,H.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Gw=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=g,ka=l}).apply(typeof Ov<"u"?Ov:typeof self<"u"?self:typeof window<"u"?window:{});var Lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $w,th,Kw,Qf,Hy,Qw,Xw,Ww;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,v,S){return m==Array.prototype||m==Object.prototype||(m[v]=S.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lf=="object"&&Lf];for(var v=0;v<m.length;++v){var S=m[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function s(m,v){if(v)e:{var S=r;m=m.split(".");for(var F=0;F<m.length-1;F++){var oe=m[F];if(!(oe in S))break e;S=S[oe]}m=m[m.length-1],F=S[m],v=v(F),v!=F&&v!=null&&e(S,m,{configurable:!0,writable:!0,value:v})}}function o(m,v){m instanceof String&&(m+="");var S=0,F=!1,oe={next:function(){if(!F&&S<m.length){var me=S++;return{value:v(me,m[me]),done:!1}}return F=!0,{done:!0,value:void 0}}};return oe[Symbol.iterator]=function(){return oe},oe}s("Array.prototype.values",function(m){return m||function(){return o(this,function(v,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function d(m){var v=typeof m;return v=v!="object"?v:m?Array.isArray(m)?"array":v:"null",v=="array"||v=="object"&&typeof m.length=="number"}function f(m){var v=typeof m;return v=="object"&&m!=null||v=="function"}function g(m,v,S){return m.call.apply(m.bind,arguments)}function E(m,v,S){if(!m)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(oe,F),m.apply(v,oe)}}return function(){return m.apply(v,arguments)}}function T(m,v,S){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:E,T.apply(null,arguments)}function b(m,v){var S=Array.prototype.slice.call(arguments,1);return function(){var F=S.slice();return F.push.apply(F,arguments),m.apply(this,F)}}function N(m,v){function S(){}S.prototype=v.prototype,m.aa=v.prototype,m.prototype=new S,m.prototype.constructor=m,m.Qb=function(F,oe,me){for(var Re=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)Re[dt-2]=arguments[dt];return v.prototype[oe].apply(F,Re)}}function k(m){const v=m.length;if(0<v){const S=Array(v);for(let F=0;F<v;F++)S[F]=m[F];return S}return[]}function U(m,v){for(let S=1;S<arguments.length;S++){const F=arguments[S];if(d(F)){const oe=m.length||0,me=F.length||0;m.length=oe+me;for(let Re=0;Re<me;Re++)m[oe+Re]=F[Re]}else m.push(F)}}class M{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function Y(m){return/^[\s\xa0]*$/.test(m)}function K(){var m=h.navigator;return m&&(m=m.userAgent)?m:""}function q(m){return q[" "](m),m}q[" "]=function(){};var te=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function G(m,v,S){for(const F in m)v.call(S,m[F],F,m)}function H(m,v){for(const S in m)v.call(void 0,m[S],S,m)}function C(m){const v={};for(const S in m)v[S]=m[S];return v}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(m,v){let S,F;for(let oe=1;oe<arguments.length;oe++){F=arguments[oe];for(S in F)m[S]=F[S];for(let me=0;me<I.length;me++)S=I[me],Object.prototype.hasOwnProperty.call(F,S)&&(m[S]=F[S])}}function P(m){var v=1;m=m.split(":");const S=[];for(;0<v&&m.length;)S.push(m.shift()),v--;return m.length&&S.push(m.join(":")),S}function V(m){h.setTimeout(()=>{throw m},0)}function w(){var m=ne;let v=null;return m.g&&(v=m.g,m.g=m.g.next,m.g||(m.h=null),v.next=null),v}class D{constructor(){this.h=this.g=null}add(v,S){const F=Q.get();F.set(v,S),this.h?this.h.next=F:this.g=F,this.h=F}}var Q=new M(()=>new z,m=>m.reset());class z{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,se=!1,ne=new D,A=()=>{const m=h.Promise.resolve(void 0);Z=()=>{m.then(J)}};var J=()=>{for(var m;m=w();){try{m.h.call(m.g)}catch(S){V(S)}var v=Q;v.j(m),100>v.h&&(v.h++,m.next=v.g,v.g=m)}se=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(m,v){this.type=m,this.g=this.target=v,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var m=!1,v=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const S=()=>{};h.addEventListener("test",S,v),h.removeEventListener("test",S,v)}catch{}return m}();function Ie(m,v){if(O.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var S=this.type=m.type,F=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=v,v=m.relatedTarget){if(te){e:{try{q(v.nodeName);var oe=!0;break e}catch{}oe=!1}oe||(v=null)}}else S=="mouseover"?v=m.fromElement:S=="mouseout"&&(v=m.toElement);this.relatedTarget=v,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:xe[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ie.aa.h.call(this)}}N(Ie,O);var xe={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),Pe=0;function tt(m,v,S,F,oe){this.listener=m,this.proxy=null,this.src=v,this.type=S,this.capture=!!F,this.ha=oe,this.key=++Pe,this.da=this.fa=!1}function We(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function kt(m){this.src=m,this.g={},this.h=0}kt.prototype.add=function(m,v,S,F,oe){var me=m.toString();m=this.g[me],m||(m=this.g[me]=[],this.h++);var Re=rn(m,v,F,oe);return-1<Re?(v=m[Re],S||(v.fa=!1)):(v=new tt(v,this.src,me,!!F,oe),v.fa=S,m.push(v)),v};function Kt(m,v){var S=v.type;if(S in m.g){var F=m.g[S],oe=Array.prototype.indexOf.call(F,v,void 0),me;(me=0<=oe)&&Array.prototype.splice.call(F,oe,1),me&&(We(v),m.g[S].length==0&&(delete m.g[S],m.h--))}}function rn(m,v,S,F){for(var oe=0;oe<m.length;++oe){var me=m[oe];if(!me.da&&me.listener==v&&me.capture==!!S&&me.ha==F)return oe}return-1}var Qt="closure_lm_"+(1e6*Math.random()|0),xt={};function xn(m,v,S,F,oe){if(Array.isArray(v)){for(var me=0;me<v.length;me++)xn(m,v[me],S,F,oe);return null}return S=Tr(S),m&&m[Ve]?m.K(v,S,f(F)?!!F.capture:!1,oe):Ze(m,v,S,!1,F,oe)}function Ze(m,v,S,F,oe,me){if(!v)throw Error("Invalid event type");var Re=f(oe)?!!oe.capture:!!oe,dt=tr(m);if(dt||(m[Qt]=dt=new kt(m)),S=dt.add(v,S,F,Re,me),S.proxy)return S;if(F=Ue(),S.proxy=F,F.src=m,F.listener=S,m.addEventListener)ge||(oe=Re),oe===void 0&&(oe=!1),m.addEventListener(v.toString(),F,oe);else if(m.attachEvent)m.attachEvent(er(v.toString()),F);else if(m.addListener&&m.removeListener)m.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Ue(){function m(S){return v.call(m.src,m.listener,S)}const v=Fr;return m}function Xt(m,v,S,F,oe){if(Array.isArray(v))for(var me=0;me<v.length;me++)Xt(m,v[me],S,F,oe);else F=f(F)?!!F.capture:!!F,S=Tr(S),m&&m[Ve]?(m=m.i,v=String(v).toString(),v in m.g&&(me=m.g[v],S=rn(me,S,F,oe),-1<S&&(We(me[S]),Array.prototype.splice.call(me,S,1),me.length==0&&(delete m.g[v],m.h--)))):m&&(m=tr(m))&&(v=m.g[v.toString()],m=-1,v&&(m=rn(v,S,F,oe)),(S=-1<m?v[m]:null)&&Mn(S))}function Mn(m){if(typeof m!="number"&&m&&!m.da){var v=m.src;if(v&&v[Ve])Kt(v.i,m);else{var S=m.type,F=m.proxy;v.removeEventListener?v.removeEventListener(S,F,m.capture):v.detachEvent?v.detachEvent(er(S),F):v.addListener&&v.removeListener&&v.removeListener(F),(S=tr(v))?(Kt(S,m),S.h==0&&(S.src=null,v[Qt]=null)):We(m)}}}function er(m){return m in xt?xt[m]:xt[m]="on"+m}function Fr(m,v){if(m.da)m=!0;else{v=new Ie(v,this);var S=m.listener,F=m.ha||m.src;m.fa&&Mn(m),m=S.call(F,v)}return m}function tr(m){return m=m[Qt],m instanceof kt?m:null}var Pn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tr(m){return typeof m=="function"?m:(m[Pn]||(m[Pn]=function(v){return m.handleEvent(v)}),m[Pn])}function de(){ae.call(this),this.i=new kt(this),this.M=this,this.F=null}N(de,ae),de.prototype[Ve]=!0,de.prototype.removeEventListener=function(m,v,S,F){Xt(this,m,v,S,F)};function _e(m,v){var S,F=m.F;if(F)for(S=[];F;F=F.F)S.push(F);if(m=m.M,F=v.type||v,typeof v=="string")v=new O(v,m);else if(v instanceof O)v.target=v.target||m;else{var oe=v;v=new O(F,m),B(v,oe)}if(oe=!0,S)for(var me=S.length-1;0<=me;me--){var Re=v.g=S[me];oe=Oe(Re,F,!0,v)&&oe}if(Re=v.g=m,oe=Oe(Re,F,!0,v)&&oe,oe=Oe(Re,F,!1,v)&&oe,S)for(me=0;me<S.length;me++)Re=v.g=S[me],oe=Oe(Re,F,!1,v)&&oe}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var m=this.i,v;for(v in m.g){for(var S=m.g[v],F=0;F<S.length;F++)We(S[F]);delete m.g[v],m.h--}}this.F=null},de.prototype.K=function(m,v,S,F){return this.i.add(String(m),v,!1,S,F)},de.prototype.L=function(m,v,S,F){return this.i.add(String(m),v,!0,S,F)};function Oe(m,v,S,F){if(v=m.i.g[String(v)],!v)return!0;v=v.concat();for(var oe=!0,me=0;me<v.length;++me){var Re=v[me];if(Re&&!Re.da&&Re.capture==S){var dt=Re.listener,Tn=Re.ha||Re.src;Re.fa&&Kt(m.i,Re),oe=dt.call(Tn,F)!==!1&&oe}}return oe&&!F.defaultPrevented}function Be(m,v,S){if(typeof m=="function")S&&(m=T(m,S));else if(m&&typeof m.handleEvent=="function")m=T(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:h.setTimeout(m,v||0)}function it(m){m.g=Be(()=>{m.g=null,m.i&&(m.i=!1,it(m))},m.l);const v=m.h;m.h=null,m.m.apply(null,v)}class gt extends ae{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:it(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dt(m){ae.call(this),this.h=m,this.g={}}N(Dt,ae);var Ut=[];function sn(m){G(m.g,function(v,S){this.g.hasOwnProperty(S)&&Mn(v)},m),m.g={}}Dt.prototype.N=function(){Dt.aa.N.call(this),sn(this)},Dt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ft=h.JSON.stringify,Et=h.JSON.parse,Wt=class{stringify(m){return h.JSON.stringify(m,void 0)}parse(m){return h.JSON.parse(m,void 0)}};function En(){}En.prototype.h=null;function as(m){return m.h||(m.h=m.i())}function ci(){}var br={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zr(){O.call(this,"d")}N(zr,O);function vr(){O.call(this,"c")}N(vr,O);var jr={},$a=null;function xi(){return $a=$a||new de}jr.La="serverreachability";function Fs(m){O.call(this,jr.La,m)}N(Fs,O);function wi(m){const v=xi();_e(v,new Fs(v))}jr.STAT_EVENT="statevent";function Ko(m,v){O.call(this,jr.STAT_EVENT,m),this.stat=v}N(Ko,O);function Ot(m){const v=xi();_e(v,new Ko(v,m))}jr.Ma="timingevent";function an(m,v){O.call(this,jr.Ma,m),this.size=v}N(an,O);function Zt(m,v){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){m()},v)}function or(){this.g=!0}or.prototype.xa=function(){this.g=!1};function Ka(m,v,S,F,oe,me){m.info(function(){if(m.g)if(me)for(var Re="",dt=me.split("&"),Tn=0;Tn<dt.length;Tn++){var ft=dt[Tn].split("=");if(1<ft.length){var Cn=ft[0];ft=ft[1];var bn=Cn.split("_");Re=2<=bn.length&&bn[1]=="type"?Re+(Cn+"="+ft+"&"):Re+(Cn+"=redacted&")}}else Re=null;else Re=me;return"XMLHTTP REQ ("+F+") [attempt "+oe+"]: "+v+`
`+S+`
`+Re})}function Ul(m,v,S,F,oe,me,Re){m.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+oe+"]: "+v+`
`+S+`
`+me+" "+Re})}function Ci(m,v,S,F){m.info(function(){return"XMLHTTP TEXT ("+v+"): "+os(m,S)+(F?" "+F:"")})}function Qo(m,v){m.info(function(){return"TIMEOUT: "+v})}or.prototype.info=function(){};function os(m,v){if(!m.g)return v;if(!v)return null;try{var S=JSON.parse(v);if(S){for(m=0;m<S.length;m++)if(Array.isArray(S[m])){var F=S[m];if(!(2>F.length)){var oe=F[1];if(Array.isArray(oe)&&!(1>oe.length)){var me=oe[0];if(me!="noop"&&me!="stop"&&me!="close")for(var Re=1;Re<oe.length;Re++)oe[Re]=""}}}}return Ft(S)}catch{return v}}var Ni={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yr;function Gr(){}N(Gr,En),Gr.prototype.g=function(){return new XMLHttpRequest},Gr.prototype.i=function(){return{}},Yr=new Gr;function Bn(m,v,S,F){this.j=m,this.i=v,this.l=S,this.R=F||1,this.U=new Dt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qt}function qt(){this.i=null,this.g="",this.h=!1}var Qa={},zs={};function Ar(m,v,S){m.L=1,m.v=Ja(Sr(v)),m.m=S,m.P=!0,hi(m,null)}function hi(m,v){m.F=Date.now(),us(m),m.A=Sr(m.v);var S=m.A,F=m.R;Array.isArray(F)||(F=[String(F)]),ql(S.i,"t",F),m.C=0,S=m.j.J,m.h=new qt,m.g=Td(m.j,S?v:null,!m.m),0<m.O&&(m.M=new gt(T(m.Y,m,m.g),m.O)),v=m.U,S=m.g,F=m.ca;var oe="readystatechange";Array.isArray(oe)||(oe&&(Ut[0]=oe.toString()),oe=Ut);for(var me=0;me<oe.length;me++){var Re=xn(S,oe[me],F||v.handleEvent,!1,v.h||v);if(!Re)break;v.g[Re.key]=Re}v=m.H?C(m.H):{},m.m?(m.u||(m.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,v)):(m.u="GET",m.g.ea(m.A,m.u,null,v)),wi(),Ka(m.i,m.u,m.A,m.l,m.R,m.m)}Bn.prototype.ca=function(m){m=m.target;const v=this.M;v&&Wr(m)==3?v.j():this.Y(m)},Bn.prototype.Y=function(m){try{if(m==this.g)e:{const bn=Wr(this.g);var v=this.g.Ba();const ps=this.g.Z();if(!(3>bn)&&(bn!=3||this.g&&(this.h.h||this.g.oa()||dd(this.g)))){this.J||bn!=4||v==7||(v==8||0>=ps?wi(3):wi(2)),Ii(this);var S=this.g.Z();this.X=S;t:if(Xa(this)){var F=dd(this.g);m="";var oe=F.length,me=Wr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_n(this),$r(this);var Re="";break t}this.h.i=new h.TextDecoder}for(v=0;v<oe;v++)this.h.h=!0,m+=this.h.i.decode(F[v],{stream:!(me&&v==oe-1)});F.length=0,this.h.g+=m,this.C=0,Re=this.h.g}else Re=this.g.oa();if(this.o=S==200,Ul(this.i,this.u,this.A,this.l,this.R,bn,S),this.o){if(this.T&&!this.K){t:{if(this.g){var dt,Tn=this.g;if((dt=Tn.g?Tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(dt)){var ft=dt;break t}}ft=null}if(S=ft)Ci(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ri(this,S);else{this.o=!1,this.s=3,Ot(12),_n(this),$r(this);break e}}if(this.P){S=!0;let Un;for(;!this.J&&this.C<Re.length;)if(Un=Xo(this,Re),Un==zs){bn==4&&(this.s=4,Ot(14),S=!1),Ci(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==Qa){this.s=4,Ot(15),Ci(this.i,this.l,Re,"[Invalid Chunk]"),S=!1;break}else Ci(this.i,this.l,Un,null),Ri(this,Un);if(Xa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bn!=4||Re.length!=0||this.h.h||(this.s=1,Ot(16),S=!1),this.o=this.o&&S,!S)Ci(this.i,this.l,Re,"[Invalid Chunked Response]"),_n(this),$r(this);else if(0<Re.length&&!this.W){this.W=!0;var Cn=this.j;Cn.g==this&&Cn.ba&&!Cn.M&&(Cn.j.info("Great, no buffering proxy detected. Bytes received: "+Re.length),oo(Cn),Cn.M=!0,Ot(11))}}else Ci(this.i,this.l,Re,null),Ri(this,Re);bn==4&&_n(this),this.o&&!this.J&&(bn==4?yd(this.j,this):(this.o=!1,us(this)))}else Om(this.g),S==400&&0<Re.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),_n(this),$r(this)}}}catch{}finally{}};function Xa(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Xo(m,v){var S=m.C,F=v.indexOf(`
`,S);return F==-1?zs:(S=Number(v.substring(S,F)),isNaN(S)?Qa:(F+=1,F+S>v.length?zs:(v=v.slice(F,F+S),m.C=F+S,v)))}Bn.prototype.cancel=function(){this.J=!0,_n(this)};function us(m){m.S=Date.now()+m.I,Wo(m,m.I)}function Wo(m,v){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Zt(T(m.ba,m),v)}function Ii(m){m.B&&(h.clearTimeout(m.B),m.B=null)}Bn.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Qo(this.i,this.A),this.L!=2&&(wi(),Ot(17)),_n(this),this.s=2,$r(this)):Wo(this,this.S-m)};function $r(m){m.j.G==0||m.J||yd(m.j,m)}function _n(m){Ii(m);var v=m.M;v&&typeof v.ma=="function"&&v.ma(),m.M=null,sn(m.U),m.g&&(v=m.g,m.g=null,v.abort(),v.ma())}function Ri(m,v){try{var S=m.j;if(S.G!=0&&(S.g==m||Hl(S.h,m))){if(!m.K&&Hl(S.h,m)&&S.G==3){try{var F=S.Da.g.parse(v)}catch{F=null}if(Array.isArray(F)&&F.length==3){var oe=F;if(oe[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<m.F)uu(S),au(S);else break e;Ql(S),Ot(18)}}else S.za=oe[1],0<S.za-S.T&&37500>oe[2]&&S.F&&S.v==0&&!S.C&&(S.C=Zt(T(S.Za,S),6e3));if(1>=ki(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else ms(S,11)}else if((m.K||S.g==m)&&uu(S),!Y(v))for(oe=S.Da.g.parse(v),v=0;v<oe.length;v++){let ft=oe[v];if(S.T=ft[0],ft=ft[1],S.G==2)if(ft[0]=="c"){S.K=ft[1],S.ia=ft[2];const Cn=ft[3];Cn!=null&&(S.la=Cn,S.j.info("VER="+S.la));const bn=ft[4];bn!=null&&(S.Aa=bn,S.j.info("SVER="+S.Aa));const ps=ft[5];ps!=null&&typeof ps=="number"&&0<ps&&(F=1.5*ps,S.L=F,S.j.info("backChannelRequestTimeoutMs_="+F)),F=S;const Un=m.g;if(Un){const Ui=Un.g?Un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ui){var me=F.h;me.g||Ui.indexOf("spdy")==-1&&Ui.indexOf("quic")==-1&&Ui.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(Jo(me,me.h),me.h=null))}if(F.D){const Wl=Un.g?Un.g.getResponseHeader("X-HTTP-Session-Id"):null;Wl&&(F.ya=Wl,wt(F.I,F.D,Wl))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-m.F,S.j.info("Handshake RTT: "+S.R+"ms")),F=S;var Re=m;if(F.qa=_d(F,F.J?F.ia:null,F.W),Re.K){nr(F.h,Re);var dt=Re,Tn=F.L;Tn&&(dt.I=Tn),dt.B&&(Ii(dt),us(dt)),F.g=Re}else pd(F);0<S.i.length&&ou(S)}else ft[0]!="stop"&&ft[0]!="close"||ms(S,7);else S.G==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?ms(S,7):$l(S):ft[0]!="noop"&&S.l&&S.l.ta(ft),S.v=0)}}wi(4)}catch{}}var Zo=class{constructor(m,v){this.g=m,this.map=v}};function di(m){this.l=m||10,h.PerformanceNavigationTiming?(m=h.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function js(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function ki(m){return m.h?1:m.g?m.g.size:0}function Hl(m,v){return m.h?m.h==v:m.g?m.g.has(v):!1}function Jo(m,v){m.g?m.g.add(v):m.h=v}function nr(m,v){m.h&&m.h==v?m.h=null:m.g&&m.g.has(v)&&m.g.delete(v)}di.prototype.cancel=function(){if(this.i=Vl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Vl(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let v=m.i;for(const S of m.g.values())v=v.concat(S.D);return v}return k(m.i)}function Im(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var v=[],S=m.length,F=0;F<S;F++)v.push(m[F]);return v}v=[],S=0;for(F in m)v[S++]=m[F];return v}function eu(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var v=[];m=m.length;for(var S=0;S<m;S++)v.push(S);return v}v=[],S=0;for(const F in m)v[S++]=F;return v}}}function Fl(m,v){if(m.forEach&&typeof m.forEach=="function")m.forEach(v,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,v,void 0);else for(var S=eu(m),F=Im(m),oe=F.length,me=0;me<oe;me++)v.call(void 0,F[me],S&&S[me],m)}var Wa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rm(m,v){if(m){m=m.split("&");for(var S=0;S<m.length;S++){var F=m[S].indexOf("="),oe=null;if(0<=F){var me=m[S].substring(0,F);oe=m[S].substring(F+1)}else me=m[S];v(me,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}function hn(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof hn){this.h=m.h,Za(this,m.j),this.o=m.o,this.g=m.g,qs(this,m.s),this.l=m.l;var v=m.i,S=new cs;S.i=v.i,v.g&&(S.g=new Map(v.g),S.h=v.h),ls(this,S),this.m=m.m}else m&&(v=String(m).match(Wa))?(this.h=!1,Za(this,v[1]||"",!0),this.o=Kr(v[2]||""),this.g=Kr(v[3]||"",!0),qs(this,v[4]),this.l=Kr(v[5]||"",!0),ls(this,v[6]||"",!0),this.m=Kr(v[7]||"")):(this.h=!1,this.i=new cs(null,this.h))}hn.prototype.toString=function(){var m=[],v=this.j;v&&m.push(eo(v,zl,!0),":");var S=this.g;return(S||v=="file")&&(m.push("//"),(v=this.o)&&m.push(eo(v,zl,!0),"@"),m.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&m.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&m.push("/"),m.push(eo(S,S.charAt(0)=="/"?km:jl,!0))),(S=this.i.toString())&&m.push("?",S),(S=this.m)&&m.push("#",eo(S,tu)),m.join("")};function Sr(m){return new hn(m)}function Za(m,v,S){m.j=S?Kr(v,!0):v,m.j&&(m.j=m.j.replace(/:$/,""))}function qs(m,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);m.s=v}else m.s=null}function ls(m,v,S){v instanceof cs?(m.i=v,cd(m.i,m.h)):(S||(v=eo(v,Dm)),m.i=new cs(v,m.h))}function wt(m,v,S){m.i.set(v,S)}function Ja(m){return wt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Kr(m,v){return m?v?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function eo(m,v,S){return typeof m=="string"?(m=encodeURI(m).replace(v,ld),S&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function ld(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var zl=/[#\/\?@]/g,jl=/[#\?:]/g,km=/[#\?]/g,Dm=/[#\?@]/g,tu=/#/g;function cs(m,v){this.h=this.g=null,this.i=m||null,this.j=!!v}function Qr(m){m.g||(m.g=new Map,m.h=0,m.i&&Rm(m.i,function(v,S){m.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}t=cs.prototype,t.add=function(m,v){Qr(this),this.i=null,m=Di(this,m);var S=this.g.get(m);return S||this.g.set(m,S=[]),S.push(v),this.h+=1,this};function hs(m,v){Qr(m),v=Di(m,v),m.g.has(v)&&(m.i=null,m.h-=m.g.get(v).length,m.g.delete(v))}function ds(m,v){return Qr(m),v=Di(m,v),m.g.has(v)}t.forEach=function(m,v){Qr(this),this.g.forEach(function(S,F){S.forEach(function(oe){m.call(v,oe,F,this)},this)},this)},t.na=function(){Qr(this);const m=Array.from(this.g.values()),v=Array.from(this.g.keys()),S=[];for(let F=0;F<v.length;F++){const oe=m[F];for(let me=0;me<oe.length;me++)S.push(v[F])}return S},t.V=function(m){Qr(this);let v=[];if(typeof m=="string")ds(this,m)&&(v=v.concat(this.g.get(Di(this,m))));else{m=Array.from(this.g.values());for(let S=0;S<m.length;S++)v=v.concat(m[S])}return v},t.set=function(m,v){return Qr(this),this.i=null,m=Di(this,m),ds(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[v]),this.h+=1,this},t.get=function(m,v){return m?(m=this.V(m),0<m.length?String(m[0]):v):v};function ql(m,v,S){hs(m,v),0<S.length&&(m.i=null,m.g.set(Di(m,v),k(S)),m.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],v=Array.from(this.g.keys());for(var S=0;S<v.length;S++){var F=v[S];const me=encodeURIComponent(String(F)),Re=this.V(F);for(F=0;F<Re.length;F++){var oe=me;Re[F]!==""&&(oe+="="+encodeURIComponent(String(Re[F]))),m.push(oe)}}return this.i=m.join("&")};function Di(m,v){return v=String(v),m.j&&(v=v.toLowerCase()),v}function cd(m,v){v&&!m.j&&(Qr(m),m.i=null,m.g.forEach(function(S,F){var oe=F.toLowerCase();F!=oe&&(hs(this,F),ql(this,oe,S))},m)),m.j=v}function to(m,v){const S=new or;if(h.Image){const F=new Image;F.onload=b(Xr,S,"TestLoadImage: loaded",!0,v,F),F.onerror=b(Xr,S,"TestLoadImage: error",!1,v,F),F.onabort=b(Xr,S,"TestLoadImage: abort",!1,v,F),F.ontimeout=b(Xr,S,"TestLoadImage: timeout",!1,v,F),h.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=m}else v(!1)}function fi(m,v){const S=new or,F=new AbortController,oe=setTimeout(()=>{F.abort(),Xr(S,"TestPingServer: timeout",!1,v)},1e4);fetch(m,{signal:F.signal}).then(me=>{clearTimeout(oe),me.ok?Xr(S,"TestPingServer: ok",!0,v):Xr(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(oe),Xr(S,"TestPingServer: error",!1,v)})}function Xr(m,v,S,F,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),F(S)}catch{}}function no(){this.g=new Wt}function Oi(m,v,S){const F=S||"";try{Fl(m,function(oe,me){let Re=oe;f(oe)&&(Re=Ft(oe)),v.push(F+me+"="+encodeURIComponent(Re))})}catch(oe){throw v.push(F+"type="+encodeURIComponent("_badmap")),oe}}function Ys(m){this.l=m.Ub||null,this.j=m.eb||!1}N(Ys,En),Ys.prototype.g=function(){return new fs(this.l,this.j)},Ys.prototype.i=function(m){return function(){return m}}({});function fs(m,v){de.call(this),this.D=m,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(fs,de),t=fs.prototype,t.open=function(m,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=v,this.readyState=1,Mi(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(v.body=m),(this.D||h).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Li(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Mi(this)),this.g&&(this.readyState=3,Mi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yl(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yl(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var v=m.value?m.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!m.done}))&&(this.response=this.responseText+=v)}m.done?Li(this):Mi(this),this.readyState==3&&Yl(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,Li(this))},t.Qa=function(m){this.g&&(this.response=m,Li(this))},t.ga=function(){this.g&&Li(this)};function Li(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Mi(m)}t.setRequestHeader=function(m,v){this.u.append(m,v)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,m.push(S[0]+": "+S[1]),S=v.next();return m.join(`\r
`)};function Mi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Gl(m){let v="";return G(m,function(S,F){v+=F,v+=":",v+=S,v+=`\r
`}),v}function wn(m,v,S){e:{for(F in S){var F=!1;break e}F=!0}F||(S=Gl(S),typeof m=="string"?S!=null&&encodeURIComponent(String(S)):wt(m,v,S))}function bt(m){de.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(bt,de);var nu=/^https?$/i,ro=["POST","PUT"];t=bt.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,v,S,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);v=v?v.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yr.g(),this.v=this.o?as(this.o):as(Yr),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(v,String(m),!0),this.B=!1}catch(me){hd(this,me);return}if(m=S||"",S=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var oe in F)S.set(oe,F[oe]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const me of F.keys())S.set(me,F.get(me));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(S.keys()).find(me=>me.toLowerCase()=="content-type"),oe=h.FormData&&m instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ro,v,void 0))||F||oe||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Re]of S)this.g.setRequestHeader(me,Re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{io(this),this.u=!0,this.g.send(m),this.u=!1}catch(me){hd(this,me)}};function hd(m,v){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=v,m.m=5,ru(m),Pi(m)}function ru(m){m.A||(m.A=!0,_e(m,"complete"),_e(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,_e(this,"complete"),_e(this,"abort"),Pi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pi(this,!0)),bt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?iu(this):this.bb())},t.bb=function(){iu(this)};function iu(m){if(m.h&&typeof l<"u"&&(!m.v[1]||Wr(m)!=4||m.Z()!=2)){if(m.u&&Wr(m)==4)Be(m.Ea,0,m);else if(_e(m,"readystatechange"),Wr(m)==4){m.h=!1;try{const Re=m.Z();e:switch(Re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var F;if(F=Re===0){var oe=String(m.D).match(Wa)[1]||null;!oe&&h.self&&h.self.location&&(oe=h.self.location.protocol.slice(0,-1)),F=!nu.test(oe?oe.toLowerCase():"")}S=F}if(S)_e(m,"complete"),_e(m,"success");else{m.m=6;try{var me=2<Wr(m)?m.g.statusText:""}catch{me=""}m.l=me+" ["+m.Z()+"]",ru(m)}}finally{Pi(m)}}}}function Pi(m,v){if(m.g){io(m);const S=m.g,F=m.v[0]?()=>{}:null;m.g=null,m.v=null,v||_e(m,"ready");try{S.onreadystatechange=F}catch{}}}function io(m){m.I&&(h.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Wr(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Wr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var v=this.g.responseText;return m&&v.indexOf(m)==0&&(v=v.substring(m.length)),Et(v)}};function dd(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Om(m){const v={};m=(m.g&&2<=Wr(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<m.length;F++){if(Y(m[F]))continue;var S=P(m[F]);const oe=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const me=v[oe]||[];v[oe]=me,me.push(S)}H(v,function(F){return F.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function so(m,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[m]||v}function su(m){this.Aa=0,this.i=[],this.j=new or,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=so("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=so("baseRetryDelayMs",5e3,m),this.cb=so("retryDelaySeedMs",1e4,m),this.Wa=so("forwardChannelMaxRetries",2,m),this.wa=so("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new di(m&&m.concurrentRequestLimit),this.Da=new no,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=su.prototype,t.la=8,t.G=1,t.connect=function(m,v,S,F){Ot(0),this.W=m,this.H=v||{},S&&F!==void 0&&(this.H.OSID=S,this.H.OAID=F),this.F=this.X,this.I=_d(this,null,this.W),ou(this)};function $l(m){if(fd(m),m.G==3){var v=m.U++,S=Sr(m.I);if(wt(S,"SID",m.K),wt(S,"RID",v),wt(S,"TYPE","terminate"),ao(m,S),v=new Bn(m,m.j,v),v.L=2,v.v=Ja(Sr(S)),S=!1,h.navigator&&h.navigator.sendBeacon)try{S=h.navigator.sendBeacon(v.v.toString(),"")}catch{}!S&&h.Image&&(new Image().src=v.v,S=!0),S||(v.g=Td(v.j,null),v.g.ea(v.v)),v.F=Date.now(),us(v)}Ed(m)}function au(m){m.g&&(oo(m),m.g.cancel(),m.g=null)}function fd(m){au(m),m.u&&(h.clearTimeout(m.u),m.u=null),uu(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&h.clearTimeout(m.s),m.s=null)}function ou(m){if(!js(m.h)&&!m.s){m.s=!0;var v=m.Ga;Z||A(),se||(Z(),se=!0),ne.add(v,m),m.B=0}}function Lm(m,v){return ki(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=v.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Zt(T(m.Ga,m,v),Xl(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const oe=new Bn(this,this.j,m);let me=this.o;if(this.S&&(me?(me=C(me),B(me,this.S)):me=this.S),this.m!==null||this.O||(oe.H=me,me=null),this.P)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var F=this.i[S];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(v+=F,4096<v){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=md(this,oe,v),S=Sr(this.I),wt(S,"RID",m),wt(S,"CVER",22),this.D&&wt(S,"X-HTTP-Session-Id",this.D),ao(this,S),me&&(this.O?v="headers="+encodeURIComponent(String(Gl(me)))+"&"+v:this.m&&wn(S,this.m,me)),Jo(this.h,oe),this.Ua&&wt(S,"TYPE","init"),this.P?(wt(S,"$req",v),wt(S,"SID","null"),oe.T=!0,Ar(oe,S,null)):Ar(oe,S,v),this.G=2}}else this.G==3&&(m?Kl(this,m):this.i.length==0||js(this.h)||Kl(this))};function Kl(m,v){var S;v?S=v.l:S=m.U++;const F=Sr(m.I);wt(F,"SID",m.K),wt(F,"RID",S),wt(F,"AID",m.T),ao(m,F),m.m&&m.o&&wn(F,m.m,m.o),S=new Bn(m,m.j,S,m.B+1),m.m===null&&(S.H=m.o),v&&(m.i=v.D.concat(m.i)),v=md(m,S,1e3),S.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Jo(m.h,S),Ar(S,F,v)}function ao(m,v){m.H&&G(m.H,function(S,F){wt(v,F,S)}),m.l&&Fl({},function(S,F){wt(v,F,S)})}function md(m,v,S){S=Math.min(m.i.length,S);var F=m.l?T(m.l.Na,m.l,m):null;e:{var oe=m.i;let me=-1;for(;;){const Re=["count="+S];me==-1?0<S?(me=oe[0].g,Re.push("ofs="+me)):me=0:Re.push("ofs="+me);let dt=!0;for(let Tn=0;Tn<S;Tn++){let ft=oe[Tn].g;const Cn=oe[Tn].map;if(ft-=me,0>ft)me=Math.max(0,oe[Tn].g-100),dt=!1;else try{Oi(Cn,Re,"req"+ft+"_")}catch{F&&F(Cn)}}if(dt){F=Re.join("&");break e}}}return m=m.i.splice(0,S),v.D=m,F}function pd(m){if(!m.g&&!m.u){m.Y=1;var v=m.Fa;Z||A(),se||(Z(),se=!0),ne.add(v,m),m.v=0}}function Ql(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Zt(T(m.Fa,m),Xl(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,gd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Zt(T(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ot(10),au(this),gd(this))};function oo(m){m.A!=null&&(h.clearTimeout(m.A),m.A=null)}function gd(m){m.g=new Bn(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var v=Sr(m.qa);wt(v,"RID","rpc"),wt(v,"SID",m.K),wt(v,"AID",m.T),wt(v,"CI",m.F?"0":"1"),!m.F&&m.ja&&wt(v,"TO",m.ja),wt(v,"TYPE","xmlhttp"),ao(m,v),m.m&&m.o&&wn(v,m.m,m.o),m.L&&(m.g.I=m.L);var S=m.g;m=m.ia,S.L=1,S.v=Ja(Sr(v)),S.m=null,S.P=!0,hi(S,m)}t.Za=function(){this.C!=null&&(this.C=null,au(this),Ql(this),Ot(19))};function uu(m){m.C!=null&&(h.clearTimeout(m.C),m.C=null)}function yd(m,v){var S=null;if(m.g==v){uu(m),oo(m),m.g=null;var F=2}else if(Hl(m.h,v))S=v.D,nr(m.h,v),F=1;else return;if(m.G!=0){if(v.o)if(F==1){S=v.m?v.m.length:0,v=Date.now()-v.F;var oe=m.B;F=xi(),_e(F,new an(F,S)),ou(m)}else pd(m);else if(oe=v.s,oe==3||oe==0&&0<v.X||!(F==1&&Lm(m,v)||F==2&&Ql(m)))switch(S&&0<S.length&&(v=m.h,v.i=v.i.concat(S)),oe){case 1:ms(m,5);break;case 4:ms(m,10);break;case 3:ms(m,6);break;default:ms(m,2)}}}function Xl(m,v){let S=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(S*=2),S*v}function ms(m,v){if(m.j.info("Error code "+v),v==2){var S=T(m.fb,m),F=m.Xa;const oe=!F;F=new hn(F||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Za(F,"https"),Ja(F),oe?to(F.toString(),S):fi(F.toString(),S)}else Ot(2);m.G=0,m.l&&m.l.sa(v),Ed(m),fd(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function Ed(m){if(m.G=0,m.ka=[],m.l){const v=Vl(m.h);(v.length!=0||m.i.length!=0)&&(U(m.ka,v),U(m.ka,m.i),m.h.i.length=0,k(m.i),m.i.length=0),m.l.ra()}}function _d(m,v,S){var F=S instanceof hn?Sr(S):new hn(S);if(F.g!="")v&&(F.g=v+"."+F.g),qs(F,F.s);else{var oe=h.location;F=oe.protocol,v=v?v+"."+oe.hostname:oe.hostname,oe=+oe.port;var me=new hn(null);F&&Za(me,F),v&&(me.g=v),oe&&qs(me,oe),S&&(me.l=S),F=me}return S=m.D,v=m.ya,S&&v&&wt(F,S,v),wt(F,"VER",m.la),ao(m,F),F}function Td(m,v,S){if(v&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=m.Ca&&!m.pa?new bt(new Ys({eb:S})):new bt(m.pa),v.Ha(m.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function bd(){}t=bd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function lu(){}lu.prototype.g=function(m,v){return new rr(m,v)};function rr(m,v){de.call(this),this.g=new su(v),this.l=m,this.h=v&&v.messageUrlParams||null,m=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(m?m["X-WebChannel-Content-Type"]=v.messageContentType:m={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(m?m["X-WebChannel-Client-Profile"]=v.va:m={"X-WebChannel-Client-Profile":v.va}),this.g.S=m,(m=v&&v.Sb)&&!Y(m)&&(this.g.m=m),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!Y(v)&&(this.g.D=v,m=this.h,m!==null&&v in m&&(m=this.h,v in m&&delete m[v])),this.j=new Bi(this)}N(rr,de),rr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rr.prototype.close=function(){$l(this.g)},rr.prototype.o=function(m){var v=this.g;if(typeof m=="string"){var S={};S.__data__=m,m=S}else this.u&&(S={},S.__data__=Ft(m),m=S);v.i.push(new Zo(v.Ya++,m)),v.G==3&&ou(v)},rr.prototype.N=function(){this.g.l=null,delete this.j,$l(this.g),delete this.g,rr.aa.N.call(this)};function vd(m){zr.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var v=m.__sm__;if(v){e:{for(const S in v){m=S;break e}m=void 0}(this.i=m)&&(m=this.i,v=v!==null&&m in v?v[m]:void 0),this.data=v}else this.data=m}N(vd,zr);function Ad(){vr.call(this),this.status=1}N(Ad,vr);function Bi(m){this.g=m}N(Bi,bd),Bi.prototype.ua=function(){_e(this.g,"a")},Bi.prototype.ta=function(m){_e(this.g,new vd(m))},Bi.prototype.sa=function(m){_e(this.g,new Ad)},Bi.prototype.ra=function(){_e(this.g,"b")},lu.prototype.createWebChannel=lu.prototype.g,rr.prototype.send=rr.prototype.o,rr.prototype.open=rr.prototype.m,rr.prototype.close=rr.prototype.close,Ww=function(){return new lu},Xw=function(){return xi()},Qw=jr,Hy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ni.NO_ERROR=0,Ni.TIMEOUT=8,Ni.HTTP_ERROR=6,Qf=Ni,qr.COMPLETE="complete",Kw=qr,ci.EventType=br,br.OPEN="a",br.CLOSE="b",br.ERROR="c",br.MESSAGE="d",de.prototype.listen=de.prototype.K,th=ci,bt.prototype.listenOnce=bt.prototype.L,bt.prototype.getLastError=bt.prototype.Ka,bt.prototype.getLastErrorCode=bt.prototype.Ba,bt.prototype.getStatus=bt.prototype.Z,bt.prototype.getResponseJson=bt.prototype.Oa,bt.prototype.getResponseText=bt.prototype.oa,bt.prototype.send=bt.prototype.ea,bt.prototype.setWithCredentials=bt.prototype.Ha,$w=bt}).apply(typeof Lf<"u"?Lf:typeof self<"u"?self:typeof window<"u"?window:{});const Lv="@firebase/firestore",Mv="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kn.UNAUTHENTICATED=new Kn(null),Kn.GOOGLE_CREDENTIALS=new Kn("google-credentials-uid"),Kn.FIRST_PARTY=new Kn("first-party-uid"),Kn.MOCK_USER=new Kn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=new jE("@firebase/firestore");function Yu(){return Mo.logLevel}function ke(t,...e){if(Mo.logLevel<=ct.DEBUG){const n=e.map(GE);Mo.debug(`Firestore (${Sl}): ${t}`,...n)}}function Us(t,...e){if(Mo.logLevel<=ct.ERROR){const n=e.map(GE);Mo.error(`Firestore (${Sl}): ${t}`,...n)}}function fl(t,...e){if(Mo.logLevel<=ct.WARN){const n=e.map(GE);Mo.warn(`Firestore (${Sl}): ${t}`,...n)}}function GE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Zw(t,r,n)}function Zw(t,e,n){let r=`FIRESTORE (${Sl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Us(r),new Error(r)}function vt(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Zw(e,s,r)}function Qe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends is{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Kn.UNAUTHENTICATED))}shutdown(){}}class ZM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class JM{constructor(e){this.t=e,this.currentUser=Kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){vt(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new Da;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Da,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Da)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt(typeof r.accessToken=="string",31837,{l:r}),new Jw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vt(e===null||typeof e=="string",2055,{h:e}),new Kn(e)}}class eP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Kn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new eP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Kn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Lr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){vt(this.o===void 0,3512);const r=o=>{o.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ke("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Pv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(vt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Pv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=rP(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function rt(t,e){return t<e?-1:t>e?1:0}function Vy(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return rt(r,s);{const o=eC(),l=iP(o.encode(Bv(t,n)),o.encode(Bv(e,n)));return l!==0?l:rt(r,s)}}n+=r>65535?2:1}return rt(t.length,e.length)}function Bv(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function iP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return rt(t[n],e[n]);return rt(t.length,e.length)}function ml(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=-62135596800,Hv=1e6;class Vt{static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Hv);return new Vt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new De(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new De(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Uv)throw new De(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Hv}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Uv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{static fromTimestamp(e){return new Ke(e)}static min(){return new Ke(new Vt(0,0))}static max(){return new Ke(new Vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="__name__";class Gi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ye(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ye(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=Gi.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return rt(e.length,n.length)}static compareSegments(e,n){const r=Gi.isNumericId(e),s=Gi.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Gi.extractNumericId(e).compare(Gi.extractNumericId(n)):Vy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ka.fromString(e.substring(4,e.length-2))}}class Ht extends Gi{construct(e,n,r){return new Ht(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new De(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ht(n)}static emptyPath(){return new Ht([])}}const sP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jn extends Gi{construct(e,n,r){return new jn(e,n,r)}static isValidIdentifier(e){return sP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vv}static keyField(){return new jn([Vv])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new De(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new De(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new De(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(r+=h,s++):(o(),s++)}if(o(),l)throw new De(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jn(n)}static emptyPath(){return new jn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(Ht.fromString(e))}static fromName(e){return new Fe(Ht.fromString(e).popFirst(5))}static empty(){return new Fe(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ht.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new Ht(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=-1;function aP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ke.fromTimestamp(r===1e9?new Vt(n+1,0):new Vt(n,r));return new Pa(s,Fe.empty(),e)}function oP(t){return new Pa(t.readTime,t.key,Ih)}class Pa{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Pa(Ke.min(),Fe.empty(),Ih)}static max(){return new Pa(Ke.max(),Fe.empty(),Ih)}}function uP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Fe.comparator(t.documentKey,e.documentKey),n!==0?n:rt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==lP)throw t;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ae((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ae?n:Ae.resolve(n)}catch(n){return Ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ae.reject(n)}static resolve(e){return new Ae((n,r)=>{n(e)})}static reject(e){return new Ae((n,r)=>{r(e)})}static waitFor(e){return new Ae((n,r)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>r(d))}),l=!0,o===s&&n()})}static or(e){let n=Ae.resolve(!1);for(const r of e)n=n.next(s=>s?Ae.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new Ae((r,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next(g=>{l[f]=g,++h,h===o&&r(l)},g=>s(g))}})}static doWhile(e,n){return new Ae((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function hP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}J0.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=-1;function em(t){return t==null}function T0(t){return t===0&&1/t==-1/0}function dP(t){return typeof t=="number"&&Number.isInteger(t)&&!T0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="";function fP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Fv(e)),e=mP(t.get(n),e);return Fv(e)}function mP(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case nC:n+="";break;default:n+=o}}return n}function Fv(t){return t+nC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function za(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n){this.comparator=e,this.root=n||zn.EMPTY}insert(e,n){return new $t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zn.BLACK,null,null))}remove(e){return new $t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mf(this.root,e,this.comparator,!0)}}class Mf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zn{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??zn.RED,this.left=s??zn.EMPTY,this.right=o??zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new zn(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return zn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return zn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ye(27949);return e+(this.isRed()?0:1)}}zn.EMPTY=null,zn.RED=!0,zn.BLACK=!1;zn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye(57766)}get value(){throw Ye(16141)}get color(){throw Ye(16727)}get left(){throw Ye(29726)}get right(){throw Ye(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new zn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jv(this.data.getIterator())}getIteratorFrom(e){return new jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Sn(this.comparator);return n.data=e,n}}class jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.fields=e,e.sort(jn.comparator)}static empty(){return new Mr([])}unionWith(e){let n=new Sn(jn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Mr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ml(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new iC("Invalid base64 string: "+o):o}}(e);return new qn(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new qn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qn.EMPTY_BYTE_STRING=new qn("");const pP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ba(t){if(vt(!!t,39018),typeof t=="string"){let e=0;const n=pP.exec(t);if(vt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ln(t.seconds),nanos:ln(t.nanos)}}function ln(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ua(t){return typeof t=="string"?qn.fromBase64String(t):qn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="server_timestamp",aC="__type__",oC="__previous_value__",uC="__local_write_time__";function KE(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[aC])===null||n===void 0?void 0:n.stringValue)===sC}function tm(t){const e=t.mapValue.fields[oC];return KE(e)?tm(e):e}function Rh(t){const e=Ba(t.mapValue.fields[uC].timestampValue);return new Vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n,r,s,o,l,h,d,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const b0="(default)";class kh{constructor(e,n){this.projectId=e,this.database=n||b0}static empty(){return new kh("","")}get isDefaultDatabase(){return this.database===b0}isEqual(e){return e instanceof kh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="__type__",yP="__max__",Pf={mapValue:{}},cC="__vector__",v0="value";function Ha(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?KE(t)?4:_P(t)?9007199254740991:EP(t)?10:11:Ye(28295,{value:t})}function ts(t,e){if(t===e)return!0;const n=Ha(t);if(n!==Ha(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rh(t).isEqual(Rh(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Ba(s.timestampValue),h=Ba(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Ua(s.bytesValue).isEqual(Ua(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return ln(s.geoPointValue.latitude)===ln(o.geoPointValue.latitude)&&ln(s.geoPointValue.longitude)===ln(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return ln(s.integerValue)===ln(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=ln(s.doubleValue),h=ln(o.doubleValue);return l===h?T0(l)===T0(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return ml(t.arrayValue.values||[],e.arrayValue.values||[],ts);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(zv(l)!==zv(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!ts(l[d],h[d])))return!1;return!0}(t,e);default:return Ye(52216,{left:t})}}function Dh(t,e){return(t.values||[]).find(n=>ts(n,e))!==void 0}function pl(t,e){if(t===e)return 0;const n=Ha(t),r=Ha(e);if(n!==r)return rt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rt(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=ln(o.integerValue||o.doubleValue),d=ln(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return qv(t.timestampValue,e.timestampValue);case 4:return qv(Rh(t),Rh(e));case 5:return Vy(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Ua(o),d=Ua(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let f=0;f<h.length&&f<d.length;f++){const g=rt(h[f],d[f]);if(g!==0)return g}return rt(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=rt(ln(o.latitude),ln(l.latitude));return h!==0?h:rt(ln(o.longitude),ln(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Yv(t.arrayValue,e.arrayValue);case 10:return function(o,l){var h,d,f,g;const E=o.fields||{},T=l.fields||{},b=(h=E[v0])===null||h===void 0?void 0:h.arrayValue,N=(d=T[v0])===null||d===void 0?void 0:d.arrayValue,k=rt(((f=b?.values)===null||f===void 0?void 0:f.length)||0,((g=N?.values)===null||g===void 0?void 0:g.length)||0);return k!==0?k:Yv(b,N)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Pf.mapValue&&l===Pf.mapValue)return 0;if(o===Pf.mapValue)return 1;if(l===Pf.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),f=l.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let E=0;E<d.length&&E<g.length;++E){const T=Vy(d[E],g[E]);if(T!==0)return T;const b=pl(h[d[E]],f[g[E]]);if(b!==0)return b}return rt(d.length,g.length)}(t.mapValue,e.mapValue);default:throw Ye(23264,{Pe:n})}}function qv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rt(t,e);const n=Ba(t),r=Ba(e),s=rt(n.seconds,r.seconds);return s!==0?s:rt(n.nanos,r.nanos)}function Yv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=pl(n[s],r[s]);if(o)return o}return rt(n.length,r.length)}function gl(t){return Fy(t)}function Fy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ba(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ua(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=Fy(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${Fy(n.fields[l])}`;return s+"}"}(t.mapValue):Ye(61005,{value:t})}function Xf(t){switch(Ha(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tm(t);return e?16+Xf(e):16;case 5:return 2*t.stringValue.length;case 6:return Ua(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Xf(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return za(r.fields,(o,l)=>{s+=o.length+Xf(l)}),s}(t.mapValue);default:throw Ye(13486,{value:t})}}function Gv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function zy(t){return!!t&&"integerValue"in t}function QE(t){return!!t&&"arrayValue"in t}function $v(t){return!!t&&"nullValue"in t}function Kv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wf(t){return!!t&&"mapValue"in t}function EP(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[lC])===null||n===void 0?void 0:n.stringValue)===cC}function ah(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return za(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ah(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ah(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _P(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===yP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.value=e}static empty(){return new pr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ah(n)}setAll(e){let n=jn.emptyPath(),r={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,r,s),r={},s=[],n=h.popLast()}l?r[h.lastSegment()]=ah(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Wf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ts(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Wf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){za(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new pr(ah(this.value))}}function hC(t){const e=[];return za(t.fields,(n,r)=>{const s=new jn([n]);if(Wf(r)){const o=hC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new Mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n,r,s,o,l,h){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Qn(e,0,Ke.min(),Ke.min(),Ke.min(),pr.empty(),0)}static newFoundDocument(e,n,r,s){return new Qn(e,1,n,Ke.min(),r,s,0)}static newNoDocument(e,n){return new Qn(e,2,n,Ke.min(),Ke.min(),pr.empty(),0)}static newUnknownDocument(e,n){return new Qn(e,3,n,Ke.min(),Ke.min(),pr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,n){this.position=e,this.inclusive=n}}function Qv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?r=Fe.comparator(Fe.fromName(l.referenceValue),n.key):r=pl(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Xv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ts(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n="asc"){this.field=e,this.dir=n}}function TP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{}class yn extends dC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vP(e,n,r):n==="array-contains"?new xP(e,r):n==="in"?new wP(e,r):n==="not-in"?new CP(e,r):n==="array-contains-any"?new NP(e,r):new yn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new AP(e,r):new SP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(pl(n,this.value)):n!==null&&Ha(this.value)===Ha(n)&&this.matchesComparison(pl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ti extends dC{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Ti(e,n)}matches(e){return fC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function fC(t){return t.op==="and"}function mC(t){return bP(t)&&fC(t)}function bP(t){for(const e of t.filters)if(e instanceof Ti)return!1;return!0}function jy(t){if(t instanceof yn)return t.field.canonicalString()+t.op.toString()+gl(t.value);if(mC(t))return t.filters.map(e=>jy(e)).join(",");{const e=t.filters.map(n=>jy(n)).join(",");return`${t.op}(${e})`}}function pC(t,e){return t instanceof yn?function(r,s){return s instanceof yn&&r.op===s.op&&r.field.isEqual(s.field)&&ts(r.value,s.value)}(t,e):t instanceof Ti?function(r,s){return s instanceof Ti&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,h)=>o&&pC(l,s.filters[h]),!0):!1}(t,e):void Ye(19439)}function gC(t){return t instanceof yn?function(n){return`${n.field.canonicalString()} ${n.op} ${gl(n.value)}`}(t):t instanceof Ti?function(n){return n.op.toString()+" {"+n.getFilters().map(gC).join(" ,")+"}"}(t):"Filter"}class vP extends yn{constructor(e,n,r){super(e,n,r),this.key=Fe.fromName(r.referenceValue)}matches(e){const n=Fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class AP extends yn{constructor(e,n){super(e,"in",n),this.keys=yC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class SP extends yn{constructor(e,n){super(e,"not-in",n),this.keys=yC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Fe.fromName(r.referenceValue))}class xP extends yn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return QE(n)&&Dh(n.arrayValue,this.value)}}class wP extends yn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dh(this.value.arrayValue,n)}}class CP extends yn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Dh(this.value.arrayValue,n)}}class NP extends yn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!QE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Dh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,n=null,r=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Ie=null}}function Wv(t,e=null,n=[],r=[],s=null,o=null,l=null){return new IP(t,e,n,r,s,o,l)}function XE(t){const e=Qe(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),em(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>gl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>gl(r)).join(",")),e.Ie=n}return e.Ie}function WE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!TP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Xv(t.startAt,e.startAt)&&Xv(t.endAt,e.endAt)}function qy(t){return Fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n=null,r=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function RP(t,e,n,r,s,o,l,h){return new Cl(t,e,n,r,s,o,l,h)}function EC(t){return new Cl(t)}function Zv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _C(t){return t.collectionGroup!==null}function oh(t){const e=Qe(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new Sn(jn.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(h=h.add(f.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Oh(o,r))}),n.has(jn.keyField().canonicalString())||e.Ee.push(new Oh(jn.keyField(),r))}return e.Ee}function Wi(t){const e=Qe(t);return e.de||(e.de=kP(e,oh(t))),e.de}function kP(t,e){if(t.limitType==="F")return Wv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Oh(s.field,o)});const n=t.endAt?new A0(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new A0(t.startAt.position,t.startAt.inclusive):null;return Wv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Yy(t,e){const n=t.filters.concat([e]);return new Cl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gy(t,e,n){return new Cl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function nm(t,e){return WE(Wi(t),Wi(e))&&t.limitType===e.limitType}function TC(t){return`${XE(Wi(t))}|lt:${t.limitType}`}function Gu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>gC(s)).join(", ")}]`),em(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>gl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>gl(s)).join(",")),`Target(${r})`}(Wi(t))}; limitType=${t.limitType})`}function rm(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Fe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of oh(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(l,h,d){const f=Qv(l,h,d);return l.inclusive?f<=0:f<0}(r.startAt,oh(r),s)||r.endAt&&!function(l,h,d){const f=Qv(l,h,d);return l.inclusive?f>=0:f>0}(r.endAt,oh(r),s))}(t,e)}function DP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bC(t){return(e,n)=>{let r=!1;for(const s of oh(t)){const o=OP(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function OP(t,e,n){const r=t.field.isKeyField()?Fe.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),f=h.data.field(o);return d!==null&&f!==null?pl(d,f):Ye(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ye(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){za(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return rC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=new $t(Fe.comparator);function Hs(){return LP}const vC=new $t(Fe.comparator);function nh(...t){let e=vC;for(const n of t)e=e.insert(n.key,n);return e}function AC(t){let e=vC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function No(){return uh()}function SC(){return uh()}function uh(){return new Fo(t=>t.toString(),(t,e)=>t.isEqual(e))}const MP=new $t(Fe.comparator),PP=new Sn(Fe.comparator);function ht(...t){let e=PP;for(const n of t)e=e.add(n);return e}const BP=new Sn(rt);function UP(){return BP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:T0(e)?"-0":e}}function xC(t){return{integerValue:""+t}}function HP(t,e){return dP(e)?xC(e):ZE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(){this._=void 0}}function VP(t,e,n){return t instanceof S0?function(s,o){const l={fields:{[aC]:{stringValue:sC},[uC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&KE(o)&&(o=tm(o)),o&&(l.fields[oC]=o),{mapValue:l}}(n,e):t instanceof Lh?CC(t,e):t instanceof Mh?NC(t,e):function(s,o){const l=wC(s,o),h=Jv(l)+Jv(s.Re);return zy(l)&&zy(s.Re)?xC(h):ZE(s.serializer,h)}(t,e)}function FP(t,e,n){return t instanceof Lh?CC(t,e):t instanceof Mh?NC(t,e):n}function wC(t,e){return t instanceof x0?function(r){return zy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class S0 extends im{}class Lh extends im{constructor(e){super(),this.elements=e}}function CC(t,e){const n=IC(e);for(const r of t.elements)n.some(s=>ts(s,r))||n.push(r);return{arrayValue:{values:n}}}class Mh extends im{constructor(e){super(),this.elements=e}}function NC(t,e){let n=IC(e);for(const r of t.elements)n=n.filter(s=>!ts(s,r));return{arrayValue:{values:n}}}class x0 extends im{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Jv(t){return ln(t.integerValue||t.doubleValue)}function IC(t){return QE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function zP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Lh&&s instanceof Lh||r instanceof Mh&&s instanceof Mh?ml(r.elements,s.elements,ts):r instanceof x0&&s instanceof x0?ts(r.Re,s.Re):r instanceof S0&&s instanceof S0}(t.transform,e.transform)}class jP{constructor(e,n){this.version=e,this.transformResults=n}}class Br{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Br}static exists(e){return new Br(void 0,e)}static updateTime(e){return new Br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class sm{}function RC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new am(t.key,Br.none()):new Kh(t.key,t.data,Br.none());{const n=t.data,r=pr.empty();let s=new Sn(jn.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new ja(t.key,r,new Mr(s.toArray()),Br.none())}}function qP(t,e,n){t instanceof Kh?function(s,o,l){const h=s.value.clone(),d=tA(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof ja?function(s,o,l){if(!Zf(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=tA(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(kC(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function lh(t,e,n,r){return t instanceof Kh?function(o,l,h,d){if(!Zf(o.precondition,l))return h;const f=o.value.clone(),g=nA(o.fieldTransforms,d,l);return f.setAll(g),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof ja?function(o,l,h,d){if(!Zf(o.precondition,l))return h;const f=nA(o.fieldTransforms,d,l),g=l.data;return g.setAll(kC(o)),g.setAll(f),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(E=>E.field))}(t,e,n,r):function(o,l,h){return Zf(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function YP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=wC(r.transform,s||null);o!=null&&(n===null&&(n=pr.empty()),n.set(r.field,o))}return n||null}function eA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ml(r,s,(o,l)=>zP(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Kh extends sm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ja extends sm{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function kC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function tA(t,e,n){const r=new Map;vt(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);r.set(o.field,FP(l,h,n[s]))}return r}function nA(t,e,n){const r=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);r.set(s.field,VP(o,l,e))}return r}class am extends sm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GP extends sm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&qP(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=SC();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=RC(l,h);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Ke.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ht())}isEqual(e){return this.batchId===e.batchId&&ml(this.mutations,e.mutations,(n,r)=>eA(n,r))&&ml(this.baseMutations,e.baseMutations,(n,r)=>eA(n,r))}}class JE{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){vt(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return MP}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new JE(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn,pt;function XP(t){switch(t){case ve.OK:return Ye(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return Ye(15467,{code:t})}}function DC(t){if(t===void 0)return Us("GRPC error has no .code"),ve.UNKNOWN;switch(t){case mn.OK:return ve.OK;case mn.CANCELLED:return ve.CANCELLED;case mn.UNKNOWN:return ve.UNKNOWN;case mn.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case mn.INTERNAL:return ve.INTERNAL;case mn.UNAVAILABLE:return ve.UNAVAILABLE;case mn.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case mn.NOT_FOUND:return ve.NOT_FOUND;case mn.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case mn.ABORTED:return ve.ABORTED;case mn.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case mn.DATA_LOSS:return ve.DATA_LOSS;default:return Ye(39323,{code:t})}}(pt=mn||(mn={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=new ka([4294967295,4294967295],0);function rA(t){const e=eC().encode(t),n=new Gw;return n.update(e),new Uint8Array(n.digest())}function iA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ka([n,r],0),new ka([s,o],0)]}class e1{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new rh(`Invalid padding: ${n}`);if(r<0)throw new rh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new rh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new rh(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ka.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(ka.fromNumber(r)));return s.compare(WP)===1&&(s=new ka([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=rA(e),[r,s]=iA(n);for(let o=0;o<this.hashCount;o++){const l=this.we(r,s,o);if(!this.be(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new e1(o,s,n);return r.forEach(h=>l.insert(h)),l}insert(e){if(this.pe===0)return;const n=rA(e),[r,s]=iA(n);for(let o=0;o<this.hashCount;o++){const l=this.we(r,s,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class rh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Qh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new om(Ke.min(),s,new $t(rt),Hs(),ht())}}class Qh{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Qh(r,n,ht(),ht(),ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class OC{constructor(e,n){this.targetId=e,this.Ce=n}}class LC{constructor(e,n,r=qn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class sA{constructor(){this.Fe=0,this.Me=aA(),this.xe=qn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ht(),n=ht(),r=ht();return this.Me.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ye(38017,{changeType:o})}}),new Qh(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=aA()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,vt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class ZP{constructor(e){this.ze=e,this.je=new Map,this.He=Hs(),this.Je=Bf(),this.Ye=Bf(),this.Ze=new $t(rt)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Ye(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const o=s.target;if(qy(o))if(r===0){const l=new Fe(o.path);this.tt(n,l,Qn.newNoDocument(l,Ke.min()))}else vt(r===1,20013,{expectedCount:r});else{const l=this.ut(n);if(l!==r){const h=this.ct(e),d=h?this.lt(h,e,l):1;if(d!==0){this.st(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,f)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=Ua(r).toUint8Array()}catch(d){if(d instanceof iC)return fl("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new e1(l,s,o)}catch(d){return fl(d instanceof rh?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.pe===0?null:h}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const l=this.ze.Pt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.tt(n,o,null),s++)}),s}It(e){const n=new Map;this.je.forEach((o,l)=>{const h=this._t(l);if(h){if(o.current&&qy(h.target)){const d=new Fe(h.target.path);this.Et(d).has(l)||this.dt(l,d)||this.tt(l,d,Qn.newNoDocument(d,e))}o.Le&&(n.set(l,o.qe()),o.Qe())}});let r=ht();this.Ye.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const f=this._t(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.He.forEach((o,l)=>l.setReadTime(e));const s=new om(e,n,this.Ze,this.He,r);return this.He=Hs(),this.Je=Bf(),this.Ye=Bf(),this.Ze=new $t(rt),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new sA,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Sn(rt),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Sn(rt),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ke("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new sA),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Bf(){return new $t(Fe.comparator)}function aA(){return new $t(Fe.comparator)}const JP={asc:"ASCENDING",desc:"DESCENDING"},e8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},t8={and:"AND",or:"OR"};class n8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $y(t,e){return t.useProto3Json||em(e)?e:{value:e}}function w0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function r8(t,e){return w0(t,e.toTimestamp())}function Zi(t){return vt(!!t,49232),Ke.fromTimestamp(function(n){const r=Ba(n);return new Vt(r.seconds,r.nanos)}(t))}function t1(t,e){return Ky(t,e).canonicalString()}function Ky(t,e){const n=function(s){return new Ht(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function PC(t){const e=Ht.fromString(t);return vt(FC(e),10190,{key:e.toString()}),e}function Qy(t,e){return t1(t.databaseId,e.path)}function Qg(t,e){const n=PC(e);if(n.get(1)!==t.databaseId.projectId)throw new De(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new De(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Fe(UC(n))}function BC(t,e){return t1(t.databaseId,e)}function i8(t){const e=PC(t);return e.length===4?Ht.emptyPath():UC(e)}function Xy(t){return new Ht(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function UC(t){return vt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function oA(t,e,n){return{name:Qy(t,e),fields:n.value.mapValue.fields}}function s8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ye(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(f,g){return f.useProto3Json?(vt(g===void 0||typeof g=="string",58123),qn.fromBase64String(g||"")):(vt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),qn.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(f){const g=f.code===void 0?ve.UNKNOWN:DC(f.code);return new De(g,f.message||"")}(l);n=new LC(r,s,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Qg(t,r.document.name),o=Zi(r.document.updateTime),l=r.document.createTime?Zi(r.document.createTime):Ke.min(),h=new pr({mapValue:{fields:r.document.fields}}),d=Qn.newFoundDocument(s,o,l,h),f=r.targetIds||[],g=r.removedTargetIds||[];n=new Jf(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Qg(t,r.document),o=r.readTime?Zi(r.readTime):Ke.min(),l=Qn.newNoDocument(s,o),h=r.removedTargetIds||[];n=new Jf([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Qg(t,r.document),o=r.removedTargetIds||[];n=new Jf([],o,s,null)}else{if(!("filter"in e))return Ye(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new QP(s,o),h=r.targetId;n=new OC(h,l)}}return n}function a8(t,e){let n;if(e instanceof Kh)n={update:oA(t,e.key,e.value)};else if(e instanceof am)n={delete:Qy(t,e.key)};else if(e instanceof ja)n={update:oA(t,e.key,e.data),updateMask:p8(e.fieldMask)};else{if(!(e instanceof GP))return Ye(16599,{ft:e.type});n={verify:Qy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const h=l.transform;if(h instanceof S0)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Lh)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Mh)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof x0)return{fieldPath:l.field.canonicalString(),increment:h.Re};throw Ye(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:r8(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ye(27497)}(t,e.precondition)),n}function o8(t,e){return t&&t.length>0?(vt(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?Zi(s.updateTime):Zi(o);return l.isEqual(Ke.min())&&(l=Zi(o)),new jP(l,s.transformResults||[])}(n,e))):[]}function u8(t,e){return{documents:[BC(t,e.path)]}}function l8(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=BC(t,s);const o=function(f){if(f.length!==0)return VC(Ti.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(f){if(f.length!==0)return f.map(g=>function(T){return{field:$u(T.field),direction:d8(T.dir)}}(g))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=$y(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:n,parent:s}}function c8(t){let e=i8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){vt(r===1,65062);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(E){const T=HC(E);return T instanceof Ti&&mC(T)?T.getFilters():[T]}(n.where));let l=[];n.orderBy&&(l=function(E){return E.map(T=>function(N){return new Oh(Ku(N.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(T))}(n.orderBy));let h=null;n.limit&&(h=function(E){let T;return T=typeof E=="object"?E.value:E,em(T)?null:T}(n.limit));let d=null;n.startAt&&(d=function(E){const T=!!E.before,b=E.values||[];return new A0(b,T)}(n.startAt));let f=null;return n.endAt&&(f=function(E){const T=!E.before,b=E.values||[];return new A0(b,T)}(n.endAt)),RP(e,s,l,o,h,"F",d,f)}function h8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function HC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ku(n.unaryFilter.field);return yn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ku(n.unaryFilter.field);return yn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ku(n.unaryFilter.field);return yn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ku(n.unaryFilter.field);return yn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ye(61313);default:return Ye(60726)}}(t):t.fieldFilter!==void 0?function(n){return yn.create(Ku(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ye(58110);default:return Ye(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ti.create(n.compositeFilter.filters.map(r=>HC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ye(1026)}}(n.compositeFilter.op))}(t):Ye(30097,{filter:t})}function d8(t){return JP[t]}function f8(t){return e8[t]}function m8(t){return t8[t]}function $u(t){return{fieldPath:t.canonicalString()}}function Ku(t){return jn.fromServerFormat(t.fieldPath)}function VC(t){return t instanceof yn?function(n){if(n.op==="=="){if(Kv(n.value))return{unaryFilter:{field:$u(n.field),op:"IS_NAN"}};if($v(n.value))return{unaryFilter:{field:$u(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kv(n.value))return{unaryFilter:{field:$u(n.field),op:"IS_NOT_NAN"}};if($v(n.value))return{unaryFilter:{field:$u(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$u(n.field),op:f8(n.op),value:n.value}}}(t):t instanceof Ti?function(n){const r=n.getFilters().map(s=>VC(s));return r.length===1?r[0]:{compositeFilter:{op:m8(n.op),filters:r}}}(t):Ye(54877,{filter:t})}function p8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function FC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n,r,s,o=Ke.min(),l=Ke.min(),h=qn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e){this.wt=e}}function y8(t){const e=c8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(){this.Cn=new _8}addToCollectionParentIndex(e,n){return this.Cn.add(n),Ae.resolve()}getCollectionParents(e,n){return Ae.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Ae.resolve()}deleteFieldIndex(e,n){return Ae.resolve()}deleteAllFieldIndexes(e){return Ae.resolve()}createTargetIndexes(e,n){return Ae.resolve()}getDocumentsMatchingTarget(e,n){return Ae.resolve(null)}getIndexType(e,n){return Ae.resolve(0)}getFieldIndexes(e,n){return Ae.resolve([])}getNextCollectionGroupToUpdate(e){return Ae.resolve(null)}getMinOffset(e,n){return Ae.resolve(Pa.min())}getMinOffsetFromCollectionGroup(e,n){return Ae.resolve(Pa.min())}updateCollectionGroup(e,n,r){return Ae.resolve()}updateIndexEntries(e,n){return Ae.resolve()}}class _8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Sn(Ht.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Sn(Ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zC=41943040;class fr{static withCacheSize(e){return new fr(e,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr.DEFAULT_COLLECTION_PERCENTILE=10,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fr.DEFAULT=new fr(zC,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fr.DISABLED=new fr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new yl(0)}static lr(){return new yl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="LruGarbageCollector",T8=1048576;function cA([t,e],[n,r]){const s=rt(t,n);return s===0?rt(e,r):s}class b8{constructor(e){this.Er=e,this.buffer=new Sn(cA),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();cA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class v8{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ke(lA,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){wl(n)?ke(lA,"Ignoring IndexedDB error during garbage collection: ",n):await xl(n)}await this.mr(3e5)})}}class A8{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Ae.resolve(J0.le);const r=new b8(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),Ae.resolve(uA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uA):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,o,l,h,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,l=Date.now(),this.nthSequenceNumber(e,s))).next(E=>(r=E,h=Date.now(),this.removeTargets(e,r,n))).next(E=>(o=E,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(E=>(f=Date.now(),Yu()<=ct.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${E} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),Ae.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:E})))}}function S8(t,e){return new A8(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(){this.changes=new Fo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ae.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&lh(r.mutation,s,Mr.empty(),Vt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ht()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ht()){const s=No();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let l=nh();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=No();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ht()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,r,s){let o=Hs();const l=uh(),h=function(){return uh()}();return n.forEach((d,f)=>{const g=r.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof ja)?o=o.insert(f.key,f):g!==void 0?(l.set(f.key,g.mutation.getFieldMask()),lh(g.mutation,f,g.mutation.getFieldMask(),Vt.now())):l.set(f.key,Mr.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,g)=>l.set(f,g)),n.forEach((f,g)=>{var E;return h.set(f,new w8(g,(E=l.get(f))!==null&&E!==void 0?E:null))}),h))}recalculateAndSaveOverlays(e,n){const r=uh();let s=new $t((l,h)=>l-h),o=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const f=n.get(d);if(f===null)return;let g=r.get(d)||Mr.empty();g=h.applyToLocalView(f,g),r.set(d,g);const E=(s.get(h.batchId)||ht()).add(d);s=s.insert(h.batchId,E)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),f=d.key,g=d.value,E=SC();g.forEach(T=>{if(!o.has(T)){const b=RC(n.get(T),r.get(T));b!==null&&E.set(T,b),o=o.add(T)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,E))}return Ae.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(l){return Fe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_C(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):Ae.resolve(No());let h=Ih,d=o;return l.next(f=>Ae.forEach(f,(g,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),o.get(g)?Ae.resolve():this.remoteDocumentCache.getEntry(e,g).next(T=>{d=d.insert(g,T)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,ht())).next(g=>({batchId:h,changes:AC(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Fe(n)).next(r=>{let s=nh();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let l=nh();return this.indexManager.getCollectionParents(e,o).next(h=>Ae.forEach(h,d=>{const f=function(E,T){return new Cl(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(g=>{g.forEach((E,T)=>{l=l.insert(E,T)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(l=>{o.forEach((d,f)=>{const g=f.getKey();l.get(g)===null&&(l=l.insert(g,Qn.newInvalidDocument(g)))});let h=nh();return l.forEach((d,f)=>{const g=o.get(d);g!==void 0&&lh(g.mutation,f,Mr.empty(),Vt.now()),rm(n,f)&&(h=h.insert(d,f))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return Ae.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Zi(s.createTime)}}(n)),Ae.resolve()}getNamedQuery(e,n){return Ae.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:y8(s.bundledQuery),readTime:Zi(s.readTime)}}(n)),Ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(){this.overlays=new $t(Fe.comparator),this.Qr=new Map}getOverlay(e,n){return Ae.resolve(this.overlays.get(n))}getOverlays(e,n){const r=No();return Ae.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.St(e,n,o)}),Ae.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),Ae.resolve()}getOverlaysForCollection(e,n,r){const s=No(),o=n.length+1,l=new Fe(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return Ae.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new $t((f,g)=>f-g);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let g=o.get(f.largestBatchId);g===null&&(g=No(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const h=No(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,g)=>h.set(f,g)),!(h.size()>=s)););return Ae.resolve(h)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new KP(n,r));let o=this.Qr.get(n);o===void 0&&(o=ht(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(){this.sessionToken=qn.EMPTY_BYTE_STRING}getSessionToken(e){return Ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(){this.$r=new Sn(Dn.Ur),this.Kr=new Sn(Dn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new Dn(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Dn(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new Fe(new Ht([])),r=new Dn(n,e),s=new Dn(n,e+1),o=[];return this.Kr.forEachInRange([r,s],l=>{this.zr(l),o.push(l.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Fe(new Ht([])),r=new Dn(n,e),s=new Dn(n,e+1);let o=ht();return this.Kr.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new Dn(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Dn{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Fe.comparator(e.key,n.key)||rt(e.Zr,n.Zr)}static Wr(e,n){return rt(e.Zr,n.Zr)||Fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Sn(Dn.Ur)}checkEmpty(e){return Ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new $P(o,n,r,s);this.mutationQueue.push(l);for(const h of s)this.Xr=this.Xr.add(new Dn(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Ae.resolve(l)}lookupMutationBatch(e,n){return Ae.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),o=s<0?0:s;return Ae.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Ae.resolve(this.mutationQueue.length===0?$E:this.nr-1)}getAllMutationBatches(e){return Ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Dn(n,0),s=new Dn(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,s],l=>{const h=this.ei(l.Zr);o.push(h)}),Ae.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Sn(rt);return n.forEach(s=>{const o=new Dn(s,0),l=new Dn(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,l],h=>{r=r.add(h.Zr)})}),Ae.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;Fe.isDocumentKey(o)||(o=o.child(""));const l=new Dn(new Fe(o),0);let h=new Sn(rt);return this.Xr.forEachWhile(d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(h=h.add(d.Zr)),!0)},l),Ae.resolve(this.ni(h))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){vt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return Ae.forEach(n.mutations,s=>{const o=new Dn(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new Dn(n,0),s=this.Xr.firstAfterOrEqual(r);return Ae.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ae.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e){this.ii=e,this.docs=function(){return new $t(Fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,l=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ae.resolve(r?r.document.mutableCopy():Qn.newInvalidDocument(n))}getEntries(e,n){let r=Hs();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Qn.newInvalidDocument(s))}),Ae.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=Hs();const l=n.path,h=new Fe(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||uP(oP(g),r)<=0||(s.has(g.key)||rm(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return Ae.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Ye(9500)}si(e,n){return Ae.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new O8(this)}getSize(e){return Ae.resolve(this.size)}}class O8 extends x8{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),Ae.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e){this.persistence=e,this.oi=new Fo(n=>XE(n),WE),this.lastRemoteSnapshotVersion=Ke.min(),this.highestTargetId=0,this._i=0,this.ai=new n1,this.targetCount=0,this.ui=yl.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),Ae.resolve()}getLastRemoteSnapshotVersion(e){return Ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ae.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),Ae.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new yl(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,Ae.resolve()}updateTargetData(e,n){return this.Tr(n),Ae.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,Ae.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.oi.forEach((l,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.oi.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),Ae.waitFor(o).next(()=>s)}getTargetCount(e){return Ae.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return Ae.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),Ae.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),Ae.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),Ae.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return Ae.resolve(r)}containsKey(e,n){return Ae.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n){this.ci={},this.overlays={},this.li=new J0(0),this.hi=!1,this.hi=!0,this.Pi=new R8,this.referenceDelegate=e(this),this.Ti=new L8(this),this.indexManager=new E8,this.remoteDocumentCache=function(s){return new D8(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new g8(n),this.Ei=new N8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new I8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new k8(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){ke("MemoryPersistence","Starting transaction:",e);const s=new M8(this.li.next());return this.referenceDelegate.di(),r(s).next(o=>this.referenceDelegate.Ai(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ri(e,n){return Ae.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class M8 extends cP{constructor(e){super(),this.currentSequenceNumber=e}}class r1{constructor(e){this.persistence=e,this.Vi=new n1,this.mi=null}static fi(e){return new r1(e)}get gi(){if(this.mi)return this.mi;throw Ye(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),Ae.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),Ae.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),Ae.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ae.forEach(this.gi,r=>{const s=Fe.fromPath(r);return this.pi(e,s).next(o=>{o||n.removeEntry(s,Ke.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return Ae.or([()=>Ae.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class C0{constructor(e,n){this.persistence=e,this.yi=new Fo(r=>fP(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=S8(this,n)}static fi(e,n){return new C0(e,n)}di(){}Ai(e){return Ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return Ae.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(o=>o?Ae.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.si(e,l=>this.Dr(e,l,n).next(h=>{h||(r++,o.removeEntry(l,Ke.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),Ae.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),Ae.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),Ae.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),Ae.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Xf(e.data.value)),n}Dr(e,n,r){return Ae.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return Ae.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=ht(),s=ht();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new i1(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return kL()?8:hP(Wn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ws(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.bs(e,n,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new P8;return this.Ss(e,n,l).next(h=>{if(o.result=h,this.fs)return this.Ds(e,n,l,h.size)})}).next(()=>o.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(Yu()<=ct.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",Gu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Ae.resolve()):(Yu()<=ct.DEBUG&&ke("QueryEngine","Query:",Gu(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(Yu()<=ct.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",Gu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wi(n))):Ae.resolve())}ws(e,n){if(Zv(n))return Ae.resolve(null);let r=Wi(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Gy(n,null,"F"),r=Wi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=ht(...o);return this.ys.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(d=>{const f=this.vs(n,h);return this.Cs(n,f,l,d.readTime)?this.ws(e,Gy(n,null,"F")):this.Fs(e,f,n,d)}))})))}bs(e,n,r,s){return Zv(n)||s.isEqual(Ke.min())?Ae.resolve(null):this.ys.getDocuments(e,r).next(o=>{const l=this.vs(n,o);return this.Cs(n,l,r,s)?Ae.resolve(null):(Yu()<=ct.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Gu(n)),this.Fs(e,l,n,aP(s,Ih)).next(h=>h))})}vs(e,n){let r=new Sn(bC(e));return n.forEach((s,o)=>{rm(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return Yu()<=ct.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",Gu(n)),this.ys.getDocumentsMatchingQuery(e,n,Pa.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="LocalStore",U8=3e8;class H8{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new $t(rt),this.Os=new Fo(o=>XE(o),WE),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new C8(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function V8(t,e,n,r){return new H8(t,e,n,r)}async function qC(t,e){const n=Qe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],h=[];let d=ht();for(const f of s){l.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){h.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(r,d).next(f=>({ks:f,removedBatchIds:l,addedBatchIds:h}))})})}function F8(t,e){const n=Qe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(h,d,f,g){const E=f.batch,T=E.keys();let b=Ae.resolve();return T.forEach(N=>{b=b.next(()=>g.getEntry(d,N)).next(k=>{const U=f.docVersions.get(N);vt(U!==null,48541),k.version.compareTo(U)<0&&(E.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),g.addEntry(k)))})}),b.next(()=>h.mutationQueue.removeMutationBatch(d,E))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let d=ht();for(let f=0;f<h.mutationResults.length;++f)h.mutationResults[f].transformResults.length>0&&(d=d.add(h.batch.mutations[f].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function YC(t){const e=Qe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function z8(t,e){const n=Qe(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const h=[];e.targetChanges.forEach((g,E)=>{const T=s.get(E);if(!T)return;h.push(n.Ti.removeMatchingKeys(o,g.removedDocuments,E).next(()=>n.Ti.addMatchingKeys(o,g.addedDocuments,E)));let b=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(E)!==null?b=b.withResumeToken(qn.EMPTY_BYTE_STRING,Ke.min()).withLastLimboFreeSnapshotVersion(Ke.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),s=s.insert(E,b),function(k,U,M){return k.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=U8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(T,b,g)&&h.push(n.Ti.updateTargetData(o,b))});let d=Hs(),f=ht();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),h.push(j8(o,l,e.documentUpdates).next(g=>{d=g.qs,f=g.Qs})),!r.isEqual(Ke.min())){const g=n.Ti.getLastRemoteSnapshotVersion(o).next(E=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(g)}return Ae.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(n.xs=s,o))}function j8(t,e,n){let r=ht(),s=ht();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=Hs();return n.forEach((h,d)=>{const f=o.get(h);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(Ke.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):ke(s1,"Ignoring outdated watch update for ",h,". Current version:",f.version," Watch version:",d.version)}),{qs:l,Qs:s}})}function q8(t,e){const n=Qe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=$E),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Y8(t,e){const n=Qe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(o=>o?(s=o,Ae.resolve(s)):n.Ti.allocateTargetId(r).next(l=>(s=new xa(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function Wy(t,e,n){const r=Qe(t),s=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!wl(l))throw l;ke(s1,`Failed to update sequence numbers for target ${e}: ${l}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function hA(t,e,n){const r=Qe(t);let s=Ke.min(),o=ht();return r.persistence.runTransaction("Execute query","readwrite",l=>function(d,f,g){const E=Qe(d),T=E.Os.get(g);return T!==void 0?Ae.resolve(E.xs.get(T)):E.Ti.getTargetData(f,g)}(r,l,Wi(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>r.Ms.getDocumentsMatchingQuery(l,e,n?s:Ke.min(),n?o:ht())).next(h=>(G8(r,DP(e),h),{documents:h,$s:o})))}function G8(t,e,n){let r=t.Ns.get(e)||Ke.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}class dA{constructor(){this.activeTargetIds=UP()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $8{constructor(){this.xo=new dA,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new dA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="ConnectivityMonitor";class mA{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ke(fA,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ke(fA,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uf=null;function Zy(){return Uf===null?Uf=function(){return 268435456+Math.round(2147483648*Math.random())}():Uf++,"0x"+Uf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="RestConnection",Q8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class X8{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===b0?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,o){const l=Zy(),h=this.jo(e,n.toUriEncodedString());ke(Xg,`Sending RPC '${e}' ${l}:`,h,r);const d={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(d,s,o);const{host:f}=new URL(h),g=Vo(f);return this.Jo(e,h,d,r,g).then(E=>(ke(Xg,`Received RPC '${e}' ${l}: `,E),E),E=>{throw fl(Xg,`RPC '${e}' ${l} failed with error: `,E,"url: ",h,"request:",r),E})}Yo(e,n,r,s,o,l){return this.zo(e,n,r,s,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}jo(e,n){const r=Q8[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="WebChannelConnection";class Z8 extends X8{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const l=Zy();return new Promise((h,d)=>{const f=new $w;f.setWithCredentials(!0),f.listenOnce(Kw.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Qf.NO_ERROR:const E=f.getResponseJson();ke($n,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),h(E);break;case Qf.TIMEOUT:ke($n,`RPC '${e}' ${l} timed out`),d(new De(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Qf.HTTP_ERROR:const T=f.getStatus();if(ke($n,`RPC '${e}' ${l} failed with status:`,T,"response text:",f.getResponseText()),T>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const N=b?.error;if(N&&N.status&&N.message){const k=function(M){const Y=M.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(Y)>=0?Y:ve.UNKNOWN}(N.status);d(new De(k,N.message))}else d(new De(ve.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new De(ve.UNAVAILABLE,"Connection failed."));break;default:Ye(9055,{h_:e,streamId:l,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{ke($n,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(s);ke($n,`RPC '${e}' ${l} sending request:`,s),f.send(n,"POST",g,r,15)})}I_(e,n,r){const s=Zy(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Ww(),h=Xw(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Ho(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const g=o.join("");ke($n,`Creating RPC '${e}' stream ${s}: ${g}`,d);const E=l.createWebChannel(g,d);this.E_(E);let T=!1,b=!1;const N=new W8({Zo:U=>{b?ke($n,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(T||(ke($n,`Opening RPC '${e}' stream ${s} transport.`),E.open(),T=!0),ke($n,`RPC '${e}' stream ${s} sending:`,U),E.send(U))},Xo:()=>E.close()}),k=(U,M,Y)=>{U.listen(M,K=>{try{Y(K)}catch(q){setTimeout(()=>{throw q},0)}})};return k(E,th.EventType.OPEN,()=>{b||(ke($n,`RPC '${e}' stream ${s} transport opened.`),N.__())}),k(E,th.EventType.CLOSE,()=>{b||(b=!0,ke($n,`RPC '${e}' stream ${s} transport closed`),N.u_(),this.d_(E))}),k(E,th.EventType.ERROR,U=>{b||(b=!0,fl($n,`RPC '${e}' stream ${s} transport errored. Name:`,U.name,"Message:",U.message),N.u_(new De(ve.UNAVAILABLE,"The operation could not be completed")))}),k(E,th.EventType.MESSAGE,U=>{var M;if(!b){const Y=U.data[0];vt(!!Y,16349);const K=Y,q=K?.error||((M=K[0])===null||M===void 0?void 0:M.error);if(q){ke($n,`RPC '${e}' stream ${s} received error:`,q);const te=q.status;let G=function(I){const B=mn[I];if(B!==void 0)return DC(B)}(te),H=q.message;G===void 0&&(G=ve.INTERNAL,H="Unknown error status: "+te+" with message "+q.message),b=!0,N.u_(new De(G,H)),E.close()}else ke($n,`RPC '${e}' stream ${s} received:`,Y),N.c_(Y)}}),k(h,Qw.STAT_EVENT,U=>{U.stat===Hy.PROXY?ke($n,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===Hy.NOPROXY&&ke($n,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.a_()},0),N}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Wg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(t){return new n8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n,r=1e3,s=1.5,o=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="PersistentStream";class $C{constructor(e,n,r,s,o,l,h,d){this.xi=e,this.S_=r,this.D_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new GC(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(Us(n.toString()),Us("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new De(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return ke(pA,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(ke(pA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class J8 extends $C{constructor(e,n,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=s8(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ke.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Ke.min():l.readTime?Zi(l.readTime):Ke.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=Xy(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=qy(d)?{documents:u8(o,d)}:{query:l8(o,d).gt},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=MC(o,l.resumeToken);const f=$y(o,l.expectedCount);f!==null&&(h.expectedCount=f)}else if(l.snapshotVersion.compareTo(Ke.min())>0){h.readTime=w0(o,l.snapshotVersion.toTimestamp());const f=$y(o,l.expectedCount);f!==null&&(h.expectedCount=f)}return h}(this.serializer,e);const r=h8(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=Xy(this.serializer),n.removeTarget=e,this.Q_(n)}}class e9 extends $C{constructor(e,n,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=o8(e.writeResults,e.commitTime),r=Zi(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=Xy(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>a8(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{}class n9 extends t9{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new De(ve.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.zo(e,Ky(n,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new De(ve.UNKNOWN,o.toString())})}Yo(e,n,r,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Yo(e,Ky(n,r),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new De(ve.UNKNOWN,l.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class r9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Us(n),this.ua=!1):ke("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po="RemoteStore";class i9{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(l=>{r.enqueueAndForget(async()=>{zo(this)&&(ke(Po,"Restarting streams for network reachability change."),await async function(d){const f=Qe(d);f.da.add(4),await Xh(f),f.Va.set("Unknown"),f.da.delete(4),await lm(f)}(this))})}),this.Va=new r9(r,s)}}async function lm(t){if(zo(t))for(const e of t.Aa)await e(!0)}async function Xh(t){for(const e of t.Aa)await e(!1)}function KC(t,e){const n=Qe(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),l1(n)?u1(n):Nl(n).N_()&&o1(n,e))}function a1(t,e){const n=Qe(t),r=Nl(n);n.Ea.delete(e),r.N_()&&QC(n,e),n.Ea.size===0&&(r.N_()?r.k_():zo(n)&&n.Va.set("Unknown"))}function o1(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ke.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Nl(t).Z_(e)}function QC(t,e){t.ma.Ke(e),Nl(t).X_(e)}function u1(t){t.ma=new ZP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Nl(t).start(),t.Va.ca()}function l1(t){return zo(t)&&!Nl(t).O_()&&t.Ea.size>0}function zo(t){return Qe(t).da.size===0}function XC(t){t.ma=void 0}async function s9(t){t.Va.set("Online")}async function a9(t){t.Ea.forEach((e,n)=>{o1(t,e)})}async function o9(t,e){XC(t),l1(t)?(t.Va.Pa(e),u1(t)):t.Va.set("Unknown")}async function u9(t,e,n){if(t.Va.set("Online"),e instanceof LC&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ea.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ea.delete(h),s.ma.removeTarget(h))}(t,e)}catch(r){ke(Po,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await N0(t,r)}else if(e instanceof Jf?t.ma.Xe(e):e instanceof OC?t.ma.ot(e):t.ma.nt(e),!n.isEqual(Ke.min()))try{const r=await YC(t.localStore);n.compareTo(r)>=0&&await function(o,l){const h=o.ma.It(l);return h.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ea.get(f);g&&o.Ea.set(f,g.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,f)=>{const g=o.Ea.get(d);if(!g)return;o.Ea.set(d,g.withResumeToken(qn.EMPTY_BYTE_STRING,g.snapshotVersion)),QC(o,d);const E=new xa(g.target,d,f,g.sequenceNumber);o1(o,E)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(r){ke(Po,"Failed to raise snapshot:",r),await N0(t,r)}}async function N0(t,e,n){if(!wl(e))throw e;t.da.add(1),await Xh(t),t.Va.set("Offline"),n||(n=()=>YC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ke(Po,"Retrying IndexedDB access"),await n(),t.da.delete(1),await lm(t)})}function WC(t,e){return e().catch(n=>N0(t,n,e))}async function cm(t){const e=Qe(t),n=Va(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:$E;for(;l9(e);)try{const s=await q8(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,c9(e,s)}catch(s){await N0(e,s)}ZC(e)&&JC(e)}function l9(t){return zo(t)&&t.Ia.length<10}function c9(t,e){t.Ia.push(e);const n=Va(t);n.N_()&&n.ea&&n.ta(e.mutations)}function ZC(t){return zo(t)&&!Va(t).O_()&&t.Ia.length>0}function JC(t){Va(t).start()}async function h9(t){Va(t).ia()}async function d9(t){const e=Va(t);for(const n of t.Ia)e.ta(n.mutations)}async function f9(t,e,n){const r=t.Ia.shift(),s=JE.from(r,e,n);await WC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await cm(t)}async function m9(t,e){e&&Va(t).ea&&await async function(r,s){if(function(l){return XP(l)&&l!==ve.ABORTED}(s.code)){const o=r.Ia.shift();Va(r).L_(),await WC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await cm(r)}}(t,e),ZC(t)&&JC(t)}async function gA(t,e){const n=Qe(t);n.asyncQueue.verifyOperationInProgress(),ke(Po,"RemoteStore received new credentials");const r=zo(n);n.da.add(3),await Xh(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await lm(n)}async function p9(t,e){const n=Qe(t);e?(n.da.delete(2),await lm(n)):e||(n.da.add(2),await Xh(n),n.Va.set("Unknown"))}function Nl(t){return t.fa||(t.fa=function(n,r,s){const o=Qe(n);return o.oa(),new J8(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:s9.bind(null,t),n_:a9.bind(null,t),i_:o9.bind(null,t),Y_:u9.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),l1(t)?u1(t):t.Va.set("Unknown")):(await t.fa.stop(),XC(t))})),t.fa}function Va(t){return t.ga||(t.ga=function(n,r,s){const o=Qe(n);return o.oa(),new e9(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:h9.bind(null,t),i_:m9.bind(null,t),na:d9.bind(null,t),ra:f9.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await cm(t)):(await t.ga.stop(),t.Ia.length>0&&(ke(Po,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Da,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const l=Date.now()+r,h=new c1(e,n,l,s,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new De(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function h1(t,e){if(Us("AsyncQueue",`${e}: ${t}`),wl(t))return new De(ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{static emptySet(e){return new nl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Fe.comparator(n.key,r.key):(n,r)=>Fe.comparator(n.key,r.key),this.keyedMap=nh(),this.sortedSet=new $t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof nl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new nl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this.pa=new $t(Fe.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Ye(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class El{constructor(e,n,r,s,o,l,h,d,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new El(e,n,nl.emptySet(n),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class y9{constructor(){this.queries=EA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Qe(n),o=s.queries;s.queries=EA(),o.forEach((l,h)=>{for(const d of h.Sa)d.onError(r)})})(this,new De(ve.ABORTED,"Firestore shutting down"))}}function EA(){return new Fo(t=>TC(t),nm)}async function E9(t,e){const n=Qe(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.Da()&&e.va()&&(r=2):(o=new g9,r=e.va()?0:1);try{switch(r){case 0:o.ba=await n.onListen(s,!0);break;case 1:o.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=h1(l,`Initialization of query '${Gu(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.Sa.push(e),e.Fa(n.onlineState),o.ba&&e.Ma(o.ba)&&d1(n)}async function _9(t,e){const n=Qe(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.va()?0:1:!o.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function T9(t,e){const n=Qe(t);let r=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.Sa)h.Ma(s)&&(r=!0);l.ba=s}}r&&d1(n)}function b9(t,e,n){const r=Qe(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function d1(t){t.Ca.forEach(e=>{e.next()})}var Jy,_A;(_A=Jy||(Jy={})).xa="default",_A.Cache="cache";class v9{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new El(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=El.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Jy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.key=e}}class tN{constructor(e){this.key=e}}class A9{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ht(),this.mutatedKeys=ht(),this.Za=bC(e),this.Xa=new nl(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new yA,s=n?n.Xa:this.Xa;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,E)=>{const T=s.get(g),b=rm(this.query,E)?E:null,N=!!T&&this.mutatedKeys.has(T.key),k=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let U=!1;T&&b?T.data.isEqual(b.data)?N!==k&&(r.track({type:3,doc:b}),U=!0):this.ru(T,b)||(r.track({type:2,doc:b}),U=!0,(d&&this.Za(b,d)>0||f&&this.Za(b,f)<0)&&(h=!0)):!T&&b?(r.track({type:0,doc:b}),U=!0):T&&!b&&(r.track({type:1,doc:T}),U=!0,(d||f)&&(h=!0)),U&&(b?(l=l.add(b),o=k?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{Xa:l,nu:r,Cs:h,mutatedKeys:o}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const l=e.nu.wa();l.sort((g,E)=>function(b,N){const k=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye(20277,{Vt:U})}};return k(b)-k(N)}(g.type,E.type)||this.Za(g.doc,E.doc)),this.iu(r),s=s!=null&&s;const h=n&&!s?this.su():[],d=this.Ya.size===0&&this.current&&!s?1:0,f=d!==this.Ja;return this.Ja=d,l.length!==0||f?{snapshot:new El(this.query,e.Xa,o,l,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:h}:{ou:h}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new yA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=ht(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new tN(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new eN(r))}),n}au(e){this.Ha=e.$s,this.Ya=ht();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return El.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const f1="SyncEngine";class S9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class x9{constructor(e){this.key=e,this.cu=!1}}class w9{constructor(e,n,r,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.lu={},this.hu=new Fo(h=>TC(h),nm),this.Pu=new Map,this.Tu=new Set,this.Iu=new $t(Fe.comparator),this.Eu=new Map,this.du=new n1,this.Au={},this.Ru=new Map,this.Vu=yl.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function C9(t,e,n=!0){const r=oN(t);let s;const o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.uu()):s=await nN(r,e,n,!0),s}async function N9(t,e){const n=oN(t);await nN(n,e,!0,!1)}async function nN(t,e,n,r){const s=await Y8(t.localStore,Wi(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return r&&(h=await I9(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&KC(t.remoteStore,s),h}async function I9(t,e,n,r,s){t.fu=(E,T,b)=>async function(k,U,M,Y){let K=U.view.tu(M);K.Cs&&(K=await hA(k.localStore,U.query,!1).then(({documents:H})=>U.view.tu(H,K)));const q=Y&&Y.targetChanges.get(U.targetId),te=Y&&Y.targetMismatches.get(U.targetId)!=null,G=U.view.applyChanges(K,k.isPrimaryClient,q,te);return bA(k,U.targetId,G.ou),G.snapshot}(t,E,T,b);const o=await hA(t.localStore,e,!0),l=new A9(e,o.$s),h=l.tu(o.documents),d=Qh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=l.applyChanges(h,t.isPrimaryClient,d);bA(t,n,f.ou);const g=new S9(e,n,l);return t.hu.set(e,g),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),f.snapshot}async function R9(t,e,n){const r=Qe(t),s=r.hu.get(e),o=r.Pu.get(s.targetId);if(o.length>1)return r.Pu.set(s.targetId,o.filter(l=>!nm(l,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Wy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&a1(r.remoteStore,s.targetId),eE(r,s.targetId)}).catch(xl)):(eE(r,s.targetId),await Wy(r.localStore,s.targetId,!0))}async function k9(t,e){const n=Qe(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),a1(n.remoteStore,r.targetId))}async function D9(t,e,n){const r=H9(t);try{const s=await function(l,h){const d=Qe(l),f=Vt.now(),g=h.reduce((b,N)=>b.add(N.key),ht());let E,T;return d.persistence.runTransaction("Locally write mutations","readwrite",b=>{let N=Hs(),k=ht();return d.Bs.getEntries(b,g).next(U=>{N=U,N.forEach((M,Y)=>{Y.isValidDocument()||(k=k.add(M))})}).next(()=>d.localDocuments.getOverlayedDocuments(b,N)).next(U=>{E=U;const M=[];for(const Y of h){const K=YP(Y,E.get(Y.key).overlayedDocument);K!=null&&M.push(new ja(Y.key,K,hC(K.value.mapValue),Br.exists(!0)))}return d.mutationQueue.addMutationBatch(b,f,M,h)}).next(U=>{T=U;const M=U.applyToLocalDocumentSet(E,k);return d.documentOverlayCache.saveOverlays(b,U.batchId,M)})}).then(()=>({batchId:T.batchId,changes:AC(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let f=l.Au[l.currentUser.toKey()];f||(f=new $t(rt)),f=f.insert(h,d),l.Au[l.currentUser.toKey()]=f}(r,s.batchId,n),await Wh(r,s.changes),await cm(r.remoteStore)}catch(s){const o=h1(s,"Failed to persist write");n.reject(o)}}async function rN(t,e){const n=Qe(t);try{const r=await z8(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Eu.get(o);l&&(vt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.cu=!0:s.modifiedDocuments.size>0?vt(l.cu,14607):s.removedDocuments.size>0&&(vt(l.cu,42227),l.cu=!1))}),await Wh(n,r,e)}catch(r){await xl(r)}}function TA(t,e,n){const r=Qe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((o,l)=>{const h=l.view.Fa(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=Qe(l);d.onlineState=h;let f=!1;d.queries.forEach((g,E)=>{for(const T of E.Sa)T.Fa(h)&&(f=!0)}),f&&d1(d)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function O9(t,e,n){const r=Qe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),o=s&&s.key;if(o){let l=new $t(Fe.comparator);l=l.insert(o,Qn.newNoDocument(o,Ke.min()));const h=ht().add(o),d=new om(Ke.min(),new Map,new $t(rt),l,h);await rN(r,d),r.Iu=r.Iu.remove(o),r.Eu.delete(e),m1(r)}else await Wy(r.localStore,e,!1).then(()=>eE(r,e,n)).catch(xl)}async function L9(t,e){const n=Qe(t),r=e.batch.batchId;try{const s=await F8(n.localStore,e);sN(n,r,null),iN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wh(n,s)}catch(s){await xl(s)}}async function M9(t,e,n){const r=Qe(t);try{const s=await function(l,h){const d=Qe(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return d.mutationQueue.lookupMutationBatch(f,h).next(E=>(vt(E!==null,37113),g=E.keys(),d.mutationQueue.removeMutationBatch(f,E))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>d.localDocuments.getDocuments(f,g))})}(r.localStore,e);sN(r,e,n),iN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Wh(r,s)}catch(s){await xl(s)}}function iN(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function sN(t,e,n){const r=Qe(t);let s=r.Au[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function eE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||aN(t,r)})}function aN(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(a1(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),m1(t))}function bA(t,e,n){for(const r of n)r instanceof eN?(t.du.addReference(r.key,e),P9(t,r)):r instanceof tN?(ke(f1,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||aN(t,r.key)):Ye(19791,{pu:r})}function P9(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(ke(f1,"New document in limbo: "+n),t.Tu.add(r),m1(t))}function m1(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Fe(Ht.fromString(e)),r=t.Vu.next();t.Eu.set(r,new x9(n)),t.Iu=t.Iu.insert(n,r),KC(t.remoteStore,new xa(Wi(EC(n.path)),r,"TargetPurposeLimboResolution",J0.le))}}async function Wh(t,e,n){const r=Qe(t),s=[],o=[],l=[];r.hu.isEmpty()||(r.hu.forEach((h,d)=>{l.push(r.fu(d,e,n).then(f=>{var g;if((f||n)&&r.isPrimaryClient){const E=f?!f.fromCache:(g=n?.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,E?"current":"not-current")}if(f){s.push(f);const E=i1.Rs(d.targetId,f);o.push(E)}}))}),await Promise.all(l),r.lu.Y_(s),await async function(d,f){const g=Qe(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>Ae.forEach(f,T=>Ae.forEach(T.ds,b=>g.persistence.referenceDelegate.addReference(E,T.targetId,b)).next(()=>Ae.forEach(T.As,b=>g.persistence.referenceDelegate.removeReference(E,T.targetId,b)))))}catch(E){if(!wl(E))throw E;ke(s1,"Failed to update sequence numbers: "+E)}for(const E of f){const T=E.targetId;if(!E.fromCache){const b=g.xs.get(T),N=b.snapshotVersion,k=b.withLastLimboFreeSnapshotVersion(N);g.xs=g.xs.insert(T,k)}}}(r.localStore,o))}async function B9(t,e){const n=Qe(t);if(!n.currentUser.isEqual(e)){ke(f1,"User change. New user:",e.toKey());const r=await qC(n.localStore,e);n.currentUser=e,function(o,l){o.Ru.forEach(h=>{h.forEach(d=>{d.reject(new De(ve.CANCELLED,l))})}),o.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Wh(n,r.ks)}}function U9(t,e){const n=Qe(t),r=n.Eu.get(e);if(r&&r.cu)return ht().add(r.key);{let s=ht();const o=n.Pu.get(e);if(!o)return s;for(const l of o){const h=n.hu.get(l);s=s.unionWith(h.view.eu)}return s}}function oN(t){const e=Qe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O9.bind(null,e),e.lu.Y_=T9.bind(null,e.eventManager),e.lu.gu=b9.bind(null,e.eventManager),e}function H9(t){const e=Qe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M9.bind(null,e),e}class I0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=um(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return V8(this.persistence,new B8,e.initialUser,this.serializer)}Su(e){return new jC(r1.fi,this.serializer)}bu(e){return new $8}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}I0.provider={build:()=>new I0};class V9 extends I0{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){vt(this.persistence.referenceDelegate instanceof C0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new v8(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?fr.withCacheSize(this.cacheSizeBytes):fr.DEFAULT;return new jC(r=>C0.fi(r,n),this.serializer)}}class tE{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>TA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=B9.bind(null,this.syncEngine),await p9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new y9}()}createDatastore(e){const n=um(e.databaseInfo.databaseId),r=function(o){return new Z8(o)}(e.databaseInfo);return function(o,l,h,d){return new n9(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,l,h){return new i9(r,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>TA(this.syncEngine,n,0),function(){return mA.C()?new mA:new K8}())}createSyncEngine(e,n){return function(s,o,l,h,d,f,g){const E=new w9(s,o,l,h,d,f);return g&&(E.mu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=Qe(s);ke(Po,"RemoteStore shutting down."),o.da.add(5),await Xh(o),o.Ra.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}tE.provider={build:()=>new tE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Us("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="FirestoreClient";class z9{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Kn.UNAUTHENTICATED,this.clientId=tC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{ke(Fa,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ke(Fa,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Da;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=h1(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Zg(t,e){t.asyncQueue.verifyOperationInProgress(),ke(Fa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await qC(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await j9(t);ke(Fa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>gA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>gA(e.remoteStore,s)),t._onlineComponents=e}async function j9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ke(Fa,"Using user provided OfflineComponentProvider");try{await Zg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ve.FAILED_PRECONDITION||s.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;fl("Error using user provided cache. Falling back to memory cache: "+n),await Zg(t,new I0)}}else ke(Fa,"Using default OfflineComponentProvider"),await Zg(t,new V9(void 0));return t._offlineComponents}async function uN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ke(Fa,"Using user provided OnlineComponentProvider"),await vA(t,t._uninitializedComponentsProvider._online)):(ke(Fa,"Using default OnlineComponentProvider"),await vA(t,new tE))),t._onlineComponents}function q9(t){return uN(t).then(e=>e.syncEngine)}async function Y9(t){const e=await uN(t),n=e.eventManager;return n.onListen=C9.bind(null,e.syncEngine),n.onUnlisten=R9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=N9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=k9.bind(null,e.syncEngine),n}function G9(t,e,n={}){const r=new Da;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,f){const g=new F9({next:T=>{g.xu(),l.enqueueAndForget(()=>_9(o,E)),T.fromCache&&d.source==="server"?f.reject(new De(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(T)},error:T=>f.reject(T)}),E=new v9(h,g,{includeMetadataChanges:!0,Qa:!0});return E9(o,E)}(await Y9(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(t,e,n){if(!n)throw new De(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $9(t,e,n,r){if(e===!0&&r===!0)throw new De(ve.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function SA(t){if(!Fe.isDocumentKey(t))throw new De(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xA(t){if(Fe.isDocumentKey(t))throw new De(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ye(12329,{type:typeof t})}function Bo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new De(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hm(t);throw new De(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="firestore.googleapis.com",wA=!0;class CA{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new De(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hN,this.ssl=wA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:wA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T8)throw new De(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new De(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new De(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new De(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new De(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new De(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new WM;switch(r.type){case"firstParty":return new tP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new De(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=AA.get(n);r&&(ke("ComponentProvider","Removing Datastore"),AA.delete(n),r.terminate())}(this),Promise.resolve()}}function K9(t,e,n,r={}){var s;t=Bo(t,dm);const o=Vo(e),l=t._getSettings(),h=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;o&&(FE(`https://${d}`),zE("Firestore",!0)),l.host!==hN&&l.host!==d&&fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},l),{host:d,ssl:o,emulatorOptions:r});if(!Oo(f,h)&&(t._setSettings(f),r.mockUserToken)){let g,E;if(typeof r.mockUserToken=="string")g=r.mockUserToken,E=Kn.MOCK_USER;else{g=vL(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new De(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Kn(T)}t._authCredentials=new ZM(new Jw(g,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jo(this.firestore,e,this._query)}}class Ur{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ur(this.firestore,e,this._key)}}class Oa extends jo{constructor(e,n,r){super(e,n,EC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ur(this.firestore,null,new Fe(e))}withConverter(e){return new Oa(this.firestore,e,this._path)}}function p1(t,e,...n){if(t=nn(t),cN("collection","path",e),t instanceof dm){const r=Ht.fromString(e,...n);return xA(r),new Oa(t,null,r)}{if(!(t instanceof Ur||t instanceof Oa))throw new De(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ht.fromString(e,...n));return xA(r),new Oa(t.firestore,null,r)}}function Il(t,e,...n){if(t=nn(t),arguments.length===1&&(e=tC.newId()),cN("doc","path",e),t instanceof dm){const r=Ht.fromString(e,...n);return SA(r),new Ur(t,null,new Fe(r))}{if(!(t instanceof Ur||t instanceof Oa))throw new De(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ht.fromString(e,...n));return SA(r),new Ur(t.firestore,t instanceof Oa?t.converter:null,new Fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="AsyncQueue";class IA{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new GC(this,"async_queue_retry"),this.rc=()=>{const r=Wg();r&&ke(NA,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=Wg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Wg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Da;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!wl(e))throw e;ke(NA,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Us("INTERNAL UNHANDLED ERROR: ",RA(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=c1.createAndSchedule(this,e,n,r,o=>this.uc(o));return this.Zu.push(s),s}oc(){this.Xu&&Ye(47125,{cc:RA(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function RA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Zh extends dm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new IA,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new IA(e),this._firestoreClient=void 0,await e}}}function Q9(t,e){const n=typeof t=="object"?t:YE(),r=typeof t=="string"?t:b0,s=Z0(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=Uw("firestore");o&&K9(s,...o)}return s}function g1(t){if(t._terminated)throw new De(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||X9(t),t._firestoreClient}function X9(t){var e,n,r;const s=t._freezeSettings(),o=function(h,d,f,g){return new gP(h,d,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,lN(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new z9(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(h){const d=h?._online.build();return{_offline:h?._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _l(qn.fromBase64String(e))}catch(n){throw new De(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _l(qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new De(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new De(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new De(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=/^__.*__$/;class Z9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ja(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kh(e,this.data,n,this.fieldTransforms)}}class dN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ja(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye(40011,{Ic:t})}}class T1{constructor(e,n,r,s,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new T1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return R0(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(fN(this.Ic)&&W9.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class J9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||um(e)}bc(e,n,r,s=!1){return new T1({Ic:e,methodName:n,wc:r,path:jn.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function b1(t){const e=t._freezeSettings(),n=um(t._databaseId);return new J9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mN(t,e,n,r,s,o={}){const l=t.bc(o.merge||o.mergeFields?2:0,e,n,s);v1("Data must be an object, but it was:",l,r);const h=pN(r,l);let d,f;if(o.merge)d=new Mr(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const E of o.mergeFields){const T=nE(e,E,n);if(!l.contains(T))throw new De(ve.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);yN(g,T)||g.push(T)}d=new Mr(g),f=l.fieldTransforms.filter(E=>d.covers(E.field))}else d=null,f=l.fieldTransforms;return new Z9(new pr(h),d,f)}class mm extends y1{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mm}}function e7(t,e,n,r){const s=t.bc(1,e,n);v1("Data must be an object, but it was:",s,r);const o=[],l=pr.empty();za(r,(d,f)=>{const g=A1(e,d,n);f=nn(f);const E=s.mc(g);if(f instanceof mm)o.push(g);else{const T=Jh(f,E);T!=null&&(o.push(g),l.set(g,T))}});const h=new Mr(o);return new dN(l,h,s.fieldTransforms)}function t7(t,e,n,r,s,o){const l=t.bc(1,e,n),h=[nE(e,r,n)],d=[s];if(o.length%2!=0)throw new De(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(nE(e,o[T])),d.push(o[T+1]);const f=[],g=pr.empty();for(let T=h.length-1;T>=0;--T)if(!yN(f,h[T])){const b=h[T];let N=d[T];N=nn(N);const k=l.mc(b);if(N instanceof mm)f.push(b);else{const U=Jh(N,k);U!=null&&(f.push(b),g.set(b,U))}}const E=new Mr(f);return new dN(g,E,l.fieldTransforms)}function n7(t,e,n,r=!1){return Jh(n,t.bc(r?4:3,e))}function Jh(t,e){if(gN(t=nn(t)))return v1("Unsupported field value:",e,t),pN(t,e);if(t instanceof y1)return function(r,s){if(!fN(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const h of r){let d=Jh(h,s.fc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=nn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Vt.fromDate(r);return{timestampValue:w0(s.serializer,o)}}if(r instanceof Vt){const o=new Vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:w0(s.serializer,o)}}if(r instanceof E1)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _l)return{bytesValue:MC(s.serializer,r._byteString)};if(r instanceof Ur){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.gc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:t1(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof _1)return function(l,h){return{mapValue:{fields:{[lC]:{stringValue:cC},[v0]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw h.gc("VectorValues must only contain numeric values.");return ZE(h.serializer,f)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${hm(r)}`)}(t,e)}function pN(t,e){const n={};return rC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):za(t,(r,s)=>{const o=Jh(s,e.Ac(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function gN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Vt||t instanceof E1||t instanceof _l||t instanceof Ur||t instanceof y1||t instanceof _1)}function v1(t,e,n){if(!gN(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=hm(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function nE(t,e,n){if((e=nn(e))instanceof fm)return e._internalPath;if(typeof e=="string")return A1(t,e);throw R0("Field path arguments must be of type string or ",t,!1,void 0,n)}const r7=new RegExp("[~\\*/\\[\\]]");function A1(t,e,n){if(e.search(r7)>=0)throw R0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fm(...e.split("."))._internalPath}catch{throw R0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function R0(t,e,n,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new De(ve.INVALID_ARGUMENT,h+t+d)}function yN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ur(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new i7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(pm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class i7 extends EN{data(){return super.data()}}function pm(t,e){return typeof e=="string"?A1(t,e):e instanceof fm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new De(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class S1{}class _N extends S1{}function a7(t,e,...n){let r=[];e instanceof S1&&r.push(e),r=r.concat(n),function(o){const l=o.filter(d=>d instanceof x1).length,h=o.filter(d=>d instanceof gm).length;if(l>1||l>0&&h>0)throw new De(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class gm extends _N{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new gm(e,n,r)}_apply(e){const n=this._parse(e);return TN(e._query,n),new jo(e.firestore,e.converter,Yy(e._query,n))}_parse(e){const n=b1(e.firestore);return function(o,l,h,d,f,g,E){let T;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new De(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){DA(E,g);const N=[];for(const k of E)N.push(kA(d,o,k));T={arrayValue:{values:N}}}else T=kA(d,o,E)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||DA(E,g),T=n7(h,l,E,g==="in"||g==="not-in");return yn.create(f,g,T)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function o7(t,e,n){const r=e,s=pm("where",t);return gm._create(s,r,n)}class x1 extends S1{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new x1(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ti.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)TN(l,d),l=Yy(l,d)}(e._query,n),new jo(e.firestore,e.converter,Yy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class w1 extends _N{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new w1(e,n)}_apply(e){const n=function(s,o,l){if(s.startAt!==null)throw new De(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new De(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Oh(o,l)}(e._query,this._field,this._direction);return new jo(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new Cl(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function u7(t,e="asc"){const n=e,r=pm("orderBy",t);return w1._create(r,n)}function kA(t,e,n){if(typeof(n=nn(n))=="string"){if(n==="")throw new De(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_C(e)&&n.indexOf("/")!==-1)throw new De(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ht.fromString(n));if(!Fe.isDocumentKey(r))throw new De(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gv(t,new Fe(r))}if(n instanceof Ur)return Gv(t,n._key);throw new De(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hm(n)}.`)}function DA(t,e){if(!Array.isArray(t)||t.length===0)throw new De(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TN(t,e){const n=function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new De(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new De(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class l7{convertValue(e,n="none"){switch(Ha(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ua(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ye(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return za(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[v0].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>ln(l.doubleValue));return new _1(o)}convertGeoPoint(e){return new E1(ln(e.latitude),ln(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=tm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Rh(e));default:return null}}convertTimestamp(e){const n=Ba(e);return new Vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ht.fromString(e);vt(FC(r),9688,{name:e});const s=new kh(r.get(1),r.get(3)),o=new Fe(r.popFirst(5));return s.isEqual(n)||Us(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class c7 extends EN{constructor(e,n,r,s,o,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new e0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(pm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class e0 extends c7{data(e={}){return super.data(e)}}class h7{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Hf(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new e0(this._firestore,this._userDataWriter,r.key,r,new Hf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new De(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const d=new e0(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Hf(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new e0(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Hf(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return h.type!==0&&(f=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),g=l.indexOf(h.doc.key)),{type:d7(h.type),doc:d,oldIndex:f,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function d7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye(61501,{type:t})}}class f7 extends l7{constructor(e){super(),this.firestore=e}convertBytes(e){return new _l(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ur(this.firestore,null,n)}}function C1(t){t=Bo(t,jo);const e=Bo(t.firestore,Zh),n=g1(e),r=new f7(e);return s7(t._query),G9(n,t._query).then(s=>new h7(e,r,t,s))}function N1(t,e,n){t=Bo(t,Ur);const r=Bo(t.firestore,Zh),s=bN(t.converter,e,n);return I1(r,[mN(b1(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Br.none())])}function m7(t){return I1(Bo(t.firestore,Zh),[new am(t._key,Br.none())])}function I1(t,e){return function(r,s){const o=new Da;return r.asyncQueue.enqueueAndForget(async()=>D9(await q9(r),s,o)),o.promise}(g1(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=b1(e)}set(e,n,r){this._verifyNotCommitted();const s=Jg(e,this._firestore),o=bN(s.converter,n,r),l=mN(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(l.toMutation(s._key,Br.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const o=Jg(e,this._firestore);let l;return l=typeof(n=nn(n))=="string"||n instanceof fm?t7(this._dataReader,"WriteBatch.update",o._key,n,r,s):e7(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(l.toMutation(o._key,Br.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Jg(e,this._firestore);return this._mutations=this._mutations.concat(new am(n._key,Br.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new De(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jg(t,e){if((t=nn(t)).firestore!==e)throw new De(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t){return g1(t=Bo(t,Zh)),new p7(t,e=>I1(t,e))}(function(e,n=!0){(function(s){Sl=s})(Al),Lo(new Ma("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),h=new Zh(new JM(r.getProvider("auth-internal")),new nP(l,r.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new De(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kh(f.options.projectId,g)}(l,s),l);return o=Object.assign({useFetchStreams:n},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Xi(Lv,Mv,e),Xi(Lv,Mv,"esm2017")})();function R1(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function AN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g7=AN,SN=new Gh("auth","Firebase",AN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=new jE("@firebase/auth");function y7(t,...e){k0.logLevel<=ct.WARN&&k0.warn(`Auth (${Al}): ${t}`,...e)}function t0(t,...e){k0.logLevel<=ct.ERROR&&k0.error(`Auth (${Al}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t,...e){throw k1(t,...e)}function Ji(t,...e){return k1(t,...e)}function xN(t,e,n){const r=Object.assign(Object.assign({},g7()),{[e]:n});return new Gh("auth","Firebase",r).create(e,{appName:t.name})}function Ls(t){return xN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function k1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return SN.create(t,...e)}function qe(t,e,...n){if(!t)throw k1(e,...n)}function Ds(t){const e="INTERNAL ASSERTION FAILED: "+t;throw t0(e),new Error(e)}function Vs(t,e){t||Ds(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function E7(){return OA()==="http:"||OA()==="https:"}function OA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(E7()||NL()||"connection"in navigator)?navigator.onLine:!0}function T7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vs(n>e,"Short delay should be less than long delay!"),this.isMobile=xL()||IL()}get(){return _7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(t,e){Vs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],A7=new ed(3e4,6e4);function qa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ya(t,e,n,r,s={}){return CN(t,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const h=$h(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},o);return CL()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Vo(t.emulatorConfig.host)&&(f.credentials="include"),wN.fetch()(await NN(t,t.config.apiHost,n,h),f)})}async function CN(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},b7),e);try{const s=new x7(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Vf(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,f]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vf(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Vf(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Vf(t,"user-disabled",l);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw xN(t,g,f);bi(t,g)}}catch(s){if(s instanceof is)throw s;bi(t,"network-request-failed",{message:String(s)})}}async function td(t,e,n,r,s={}){const o=await Ya(t,e,n,r,s);return"mfaPendingCredential"in o&&bi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function NN(t,e,n,r){const s=`${e}${n}?${r}`,o=t,l=o.config.emulator?D1(t.config,s):`${t.config.apiScheme}://${s}`;return v7.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function S7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class x7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ji(this.auth,"network-request-failed")),A7.get())})}}function Vf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ji(t,e,r);return s.customData._tokenResponse=n,s}function LA(t){return t!==void 0&&t.enterprise!==void 0}class w7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return S7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function C7(t,e){return Ya(t,"GET","/v2/recaptchaConfig",qa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N7(t,e){return Ya(t,"POST","/v1/accounts:delete",e)}async function D0(t,e){return Ya(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function I7(t,e=!1){const n=nn(t),r=await n.getIdToken(e),s=O1(r);qe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:r,authTime:ch(ey(s.auth_time)),issuedAtTime:ch(ey(s.iat)),expirationTime:ch(ey(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function ey(t){return Number(t)*1e3}function O1(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return t0("JWT malformed, contained fewer than 3 sections"),null;try{const s=Pw(n);return s?JSON.parse(s):(t0("Failed to decode base64 JWT payload"),null)}catch(s){return t0("Caught error parsing JWT payload as JSON",s?.toString()),null}}function MA(t){const e=O1(t);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ph(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof is&&R7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function R7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ch(this.lastLoginAt),this.creationTime=ch(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O0(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ph(t,D0(n,{idToken:r}));qe(s?.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?IN(o.providerUserInfo):[],h=O7(t.providerData,l),d=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!h?.length,g=d?f:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new iE(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(t,E)}async function D7(t){const e=nn(t);await O0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function O7(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function IN(t){return t.map(e=>{var{providerId:n}=e,r=R1(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L7(t,e){const n=await CN(t,{},async()=>{const r=$h({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await NN(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:r};return t.emulatorConfig&&Vo(t.emulatorConfig.host)&&(d.credentials="include"),wN.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function M7(t,e){return Ya(t,"POST","/v2/accounts:revokeToken",qa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):MA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const n=MA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await L7(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,l=new rl;return r&&(qe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(qe(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(qe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rl,this.toJSON())}_performRefresh(){return Ds("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(t,e){qe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _i{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=R1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new k7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new iE(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ph(this,this.stsTokenManager.getToken(this.auth,e));return qe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return I7(this,e)}reload(){return D7(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _i(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await O0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Lr(this.auth.app))return Promise.reject(Ls(this.auth));const e=await this.getIdToken();return await Ph(this,N7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,l,h,d,f,g;const E=(r=n.displayName)!==null&&r!==void 0?r:void 0,T=(s=n.email)!==null&&s!==void 0?s:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,N=(l=n.photoURL)!==null&&l!==void 0?l:void 0,k=(h=n.tenantId)!==null&&h!==void 0?h:void 0,U=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,M=(f=n.createdAt)!==null&&f!==void 0?f:void 0,Y=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:K,emailVerified:q,isAnonymous:te,providerData:G,stsTokenManager:H}=n;qe(K&&H,e,"internal-error");const C=rl.fromJSON(this.name,H);qe(typeof K=="string",e,"internal-error"),ma(E,e.name),ma(T,e.name),qe(typeof q=="boolean",e,"internal-error"),qe(typeof te=="boolean",e,"internal-error"),ma(b,e.name),ma(N,e.name),ma(k,e.name),ma(U,e.name),ma(M,e.name),ma(Y,e.name);const I=new _i({uid:K,auth:e,email:T,emailVerified:q,displayName:E,isAnonymous:te,photoURL:N,phoneNumber:b,tenantId:k,stsTokenManager:C,createdAt:M,lastLoginAt:Y});return G&&Array.isArray(G)&&(I.providerData=G.map(B=>Object.assign({},B))),U&&(I._redirectEventId=U),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new rl;s.updateFromServerResponse(n);const o=new _i({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await O0(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];qe(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?IN(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,h=new rl;h.updateFromIdToken(r);const d=new _i({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new iE(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=new Map;function Os(t){Vs(t instanceof Function,"Expected a class definition");let e=PA.get(t);return e?(Vs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,PA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}RN.type="NONE";const BA=RN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t,e,n){return`firebase:${t}:${e}:${n}`}class il{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=n0(this.userKey,s.apiKey,o),this.fullPersistenceKey=n0("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await D0(this.auth,{idToken:e}).catch(()=>{});return n?_i._fromGetAccountInfoResponse(this.auth,n,e):null}return _i._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new il(Os(BA),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||Os(BA);const l=n0(r,e.config.apiKey,e.name);let h=null;for(const f of n)try{const g=await f._get(l);if(g){let E;if(typeof g=="string"){const T=await D0(e,{idToken:g}).catch(()=>{});if(!T)break;E=await _i._fromGetAccountInfoResponse(e,T,g)}else E=_i._fromJSON(e,g);f!==o&&(h=E),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new il(o,e,r):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new il(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PN(e))return"Blackberry";if(BN(e))return"Webos";if(DN(e))return"Safari";if((e.includes("chrome/")||ON(e))&&!e.includes("edge/"))return"Chrome";if(MN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function kN(t=Wn()){return/firefox\//i.test(t)}function DN(t=Wn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ON(t=Wn()){return/crios\//i.test(t)}function LN(t=Wn()){return/iemobile/i.test(t)}function MN(t=Wn()){return/android/i.test(t)}function PN(t=Wn()){return/blackberry/i.test(t)}function BN(t=Wn()){return/webos/i.test(t)}function L1(t=Wn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function P7(t=Wn()){var e;return L1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function B7(){return RL()&&document.documentMode===10}function UN(t=Wn()){return L1(t)||MN(t)||BN(t)||PN(t)||/windows phone/i.test(t)||LN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t,e=[]){let n;switch(t){case"Browser":n=UA(Wn());break;case"Worker":n=`${UA(Wn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Al}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H7(t,e={}){return Ya(t,"GET","/v2/passwordPolicy",qa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7=6;class F7{constructor(e){var n,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:V7,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,l,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new HA(this),this.idTokenSubscription=new HA(this),this.beforeStateQueue=new U7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Os(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await il.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await D0(this,{idToken:e}),r=await _i._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Lr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&d?.user&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await O0(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=T7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Lr(this.app))return Promise.reject(Ls(this));const n=e?nn(e):null;return n&&qe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Lr(this.app)?Promise.reject(Ls(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Lr(this.app)?Promise.reject(Ls(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Os(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await H7(this),n=new F7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await M7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Os(e)||this._popupRedirectResolver;qe(n,this,"argument-error"),this.redirectPersistenceManager=await il.create(this,[Os(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&y7(`Error while retrieving App Check token: ${n.error}`),n?.token}}function qo(t){return nn(t)}class HA{constructor(e){this.auth=e,this.observer=null,this.addObserver=UL(n=>this.observer=n)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ym={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function j7(t){ym=t}function VN(t){return ym.loadJS(t)}function q7(){return ym.recaptchaEnterpriseScript}function Y7(){return ym.gapiScript}function G7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class $7{constructor(){this.enterprise=new K7}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class K7{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Q7="recaptcha-enterprise",FN="NO_RECAPTCHA";class X7{constructor(e){this.type=Q7,this.auth=qo(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{C7(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const f=new w7(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(d=>{h(d)})})}function s(o,l,h){const d=window.grecaptcha;LA(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(FN)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $7().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(h=>{if(!n&&LA(window.grecaptcha))s(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=q7();d.length!==0&&(d+=h),VN(d).then(()=>{s(h,o,l)}).catch(f=>{l(f)})}}).catch(h=>{l(h)})})}}async function VA(t,e,n,r=!1,s=!1){const o=new X7(t);let l;if(s)l=FN;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const h=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,f=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function sE(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await VA(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await VA(t,e,n,n==="getOobCode");return r(t,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W7(t,e){const n=Z0(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Oo(o,e??{}))return s;bi(s,"already-initialized")}return n.initialize({options:e})}function Z7(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Os);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function J7(t,e,n){const r=qo(t);qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=zN(e),{host:l,port:h}=eB(e),d=h===null?"":`:${h}`,f={url:`${o}//${l}${d}/`},g=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),qe(Oo(f,r.config.emulator)&&Oo(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Vo(l)?(FE(`${o}//${l}${d}`),zE("Auth",!0)):tB()}function zN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function eB(t){const e=zN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:FA(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:FA(l)}}}function FA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function tB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ds("not implemented")}_getIdTokenResponse(e){return Ds("not implemented")}_linkToIdToken(e,n){return Ds("not implemented")}_getReauthenticationResolver(e){return Ds("not implemented")}}async function nB(t,e){return Ya(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rB(t,e){return td(t,"POST","/v1/accounts:signInWithPassword",qa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iB(t,e){return td(t,"POST","/v1/accounts:signInWithEmailLink",qa(t,e))}async function sB(t,e){return td(t,"POST","/v1/accounts:signInWithEmailLink",qa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh extends M1{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Bh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Bh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sE(e,n,"signInWithPassword",rB);case"emailLink":return iB(e,{email:this._email,oobCode:this._password});default:bi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sE(e,r,"signUpPassword",nB);case"emailLink":return sB(e,{idToken:n,email:this._email,oobCode:this._password});default:bi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(t,e){return td(t,"POST","/v1/accounts:signInWithIdp",qa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB="http://localhost";class Uo extends M1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=R1(n,["providerId","signInMethod"]);if(!r||!s)return null;const l=new Uo(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return sl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,sl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,sl(e,n)}buildRequest(){const e={requestUri:aB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$h(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uB(t){const e=Jc(eh(t)).link,n=e?Jc(eh(e)).deep_link_id:null,r=Jc(eh(t)).deep_link_id;return(r?Jc(eh(r)).link:null)||r||n||e||t}class P1{constructor(e){var n,r,s,o,l,h;const d=Jc(eh(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,g=(r=d.oobCode)!==null&&r!==void 0?r:null,E=oB((s=d.mode)!==null&&s!==void 0?s:null);qe(f&&g&&E,"argument-error"),this.apiKey=f,this.operation=E,this.code=g,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.lang)!==null&&l!==void 0?l:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const n=uB(e);try{return new P1(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.providerId=Rl.PROVIDER_ID}static credential(e,n){return Bh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=P1.parseLink(n);return qe(r,"argument-error"),Bh._fromEmailAndCode(e,r.code,r.tenantId)}}Rl.PROVIDER_ID="password";Rl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Rl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd extends jN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends nd{constructor(){super("facebook.com")}static credential(e){return Uo._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ba.credential(e.oauthAccessToken)}catch{return null}}}ba.FACEBOOK_SIGN_IN_METHOD="facebook.com";ba.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends nd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Uo._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return va.credential(n,r)}catch{return null}}}va.GOOGLE_SIGN_IN_METHOD="google.com";va.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends nd{constructor(){super("github.com")}static credential(e){return Uo._fromParams({providerId:Aa.PROVIDER_ID,signInMethod:Aa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Aa.credentialFromTaggedObject(e)}static credentialFromError(e){return Aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Aa.credential(e.oauthAccessToken)}catch{return null}}}Aa.GITHUB_SIGN_IN_METHOD="github.com";Aa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends nd{constructor(){super("twitter.com")}static credential(e,n){return Uo._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Sa.credentialFromTaggedObject(e)}static credentialFromError(e){return Sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Sa.credential(n,r)}catch{return null}}}Sa.TWITTER_SIGN_IN_METHOD="twitter.com";Sa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lB(t,e){return td(t,"POST","/v1/accounts:signUp",qa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await _i._fromIdTokenResponse(e,r,s),l=zA(r);return new Ho({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=zA(r);return new Ho({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function zA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0 extends is{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,L0.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new L0(e,n,r,s)}}function qN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?L0._fromErrorAndOperation(t,o,e,r):o})}async function cB(t,e,n=!1){const r=await Ph(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ho._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hB(t,e,n=!1){const{auth:r}=t;if(Lr(r.app))return Promise.reject(Ls(r));const s="reauthenticate";try{const o=await Ph(t,qN(r,s,e,t),n);qe(o.idToken,r,"internal-error");const l=O1(o.idToken);qe(l,r,"internal-error");const{sub:h}=l;return qe(t.uid===h,r,"user-mismatch"),Ho._forOperation(t,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&bi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(t,e,n=!1){if(Lr(t.app))return Promise.reject(Ls(t));const r="signIn",s=await qN(t,r,e),o=await Ho._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function dB(t,e){return YN(qo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t){const e=qo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fB(t,e,n){if(Lr(t.app))return Promise.reject(Ls(t));const r=qo(t),l=await sE(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lB).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&GN(t),d}),h=await Ho._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(h.user),h}function mB(t,e,n){return Lr(t.app)?Promise.reject(Ls(t)):dB(nn(t),Rl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&GN(t),r})}function pB(t,e,n,r){return nn(t).onIdTokenChanged(e,n,r)}function gB(t,e,n){return nn(t).beforeAuthStateChanged(e,n)}function yB(t,e,n,r){return nn(t).onAuthStateChanged(e,n,r)}function EB(t){return nn(t).signOut()}const M0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(M0,"1"),this.storage.removeItem(M0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B=1e3,TB=10;class KN extends $N{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);B7()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,TB):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},_B)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}KN.type="LOCAL";const bB=KN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN extends $N{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}QN.type="SESSION";const XN=QN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Em(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(l).map(async f=>f(n.origin,o)),d=await vB(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Em.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const f=B1("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(E){const T=E;if(T.data.eventId===f)switch(T.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(){return window}function SB(t){es().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(){return typeof es().WorkerGlobalScope<"u"&&typeof es().importScripts=="function"}async function xB(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wB(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function CB(){return WN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="firebaseLocalStorageDb",NB=1,P0="firebaseLocalStorage",JN="fbase_key";class rd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _m(t,e){return t.transaction([P0],e?"readwrite":"readonly").objectStore(P0)}function IB(){const t=indexedDB.deleteDatabase(ZN);return new rd(t).toPromise()}function aE(){const t=indexedDB.open(ZN,NB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(P0,{keyPath:JN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(P0)?e(r):(r.close(),await IB(),e(await aE()))})})}async function jA(t,e,n){const r=_m(t,!0).put({[JN]:e,value:n});return new rd(r).toPromise()}async function RB(t,e){const n=_m(t,!1).get(e),r=await new rd(n).toPromise();return r===void 0?null:r.value}function qA(t,e){const n=_m(t,!0).delete(e);return new rd(n).toPromise()}const kB=800,DB=3;class eI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await aE(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>DB)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Em._getInstance(CB()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await xB(),!this.activeServiceWorker)return;this.sender=new AB(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await aE();return await jA(e,M0,"1"),await qA(e,M0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jA(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>RB(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>qA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=_m(s,!1).getAll();return new rd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eI.type="LOCAL";const OB=eI;new ed(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LB(t,e){return e?Os(e):(qe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1 extends M1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return sl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return sl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MB(t){return YN(t.auth,new U1(t),t.bypassAuthState)}function PB(t){const{auth:e,user:n}=t;return qe(n,e,"internal-error"),hB(n,new U1(t),t.bypassAuthState)}async function BB(t){const{auth:e,user:n}=t;return qe(n,e,"internal-error"),cB(n,new U1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MB;case"linkViaPopup":case"linkViaRedirect":return BB;case"reauthViaPopup":case"reauthViaRedirect":return PB;default:bi(this.auth,"internal-error")}}resolve(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UB=new ed(2e3,1e4);class Xu extends tI{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Xu.currentPopupAction&&Xu.currentPopupAction.cancel(),Xu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){Vs(this.filter.length===1,"Popup operations only handle one event");const e=B1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,UB.get())};e()}}Xu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB="pendingRedirect",r0=new Map;class VB extends tI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=r0.get(this.auth._key());if(!e){try{const r=await FB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}r0.set(this.auth._key(),e)}return this.bypassAuthState||r0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FB(t,e){const n=qB(e),r=jB(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function zB(t,e){r0.set(t._key(),e)}function jB(t){return Os(t._redirectPersistence)}function qB(t){return n0(HB,t.config.apiKey,t.name)}async function YB(t,e,n=!1){if(Lr(t.app))return Promise.reject(Ls(t));const r=qo(t),s=LB(r,e),l=await new VB(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB=10*60*1e3;class $B{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!nI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ji(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GB&&this.cachedEventUids.clear(),this.cachedEventUids.has(YA(e))}saveEventToCache(e){this.cachedEventUids.add(YA(e)),this.lastProcessedEventTime=Date.now()}}function YA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nI({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function KB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QB(t,e={}){return Ya(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WB=/^https?/;async function ZB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await QB(t);for(const n of e)try{if(JB(n))return}catch{}bi(t,"unauthorized-domain")}function JB(t){const e=rE(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!WB.test(n))return!1;if(XB.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU=new ed(3e4,6e4);function GA(){const t=es().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function tU(t){return new Promise((e,n)=>{var r,s,o;function l(){GA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{GA(),n(Ji(t,"network-request-failed"))},timeout:eU.get()})}if(!((s=(r=es().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=es().gapi)===null||o===void 0)&&o.load)l();else{const h=G7("iframefcb");return es()[h]=()=>{gapi.load?l():n(Ji(t,"network-request-failed"))},VN(`${Y7()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw i0=null,e})}let i0=null;function nU(t){return i0=i0||tU(t),i0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rU=new ed(5e3,15e3),iU="__/auth/iframe",sU="emulator/auth/iframe",aU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uU(t){const e=t.config;qe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?D1(e,sU):`https://${t.config.authDomain}/${iU}`,r={apiKey:e.apiKey,appName:t.name,v:Al},s=oU.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${$h(r).slice(1)}`}async function lU(t){const e=await nU(t),n=es().gapi;return qe(n,t,"internal-error"),e.open({where:document.body,url:uU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aU,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Ji(t,"network-request-failed"),h=es().setTimeout(()=>{o(l)},rU.get());function d(){es().clearTimeout(h),s(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hU=500,dU=600,fU="_blank",mU="http://localhost";class $A{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pU(t,e,n,r=hU,s=dU){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const d=Object.assign(Object.assign({},cU),{width:r.toString(),height:s.toString(),top:o,left:l}),f=Wn().toLowerCase();n&&(h=ON(f)?fU:n),kN(f)&&(e=e||mU,d.scrollbars="yes");const g=Object.entries(d).reduce((T,[b,N])=>`${T}${b}=${N},`,"");if(P7(f)&&h!=="_self")return gU(e||"",h),new $A(null);const E=window.open(e||"",h,g);qe(E,t,"popup-blocked");try{E.focus()}catch{}return new $A(E)}function gU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU="__/auth/handler",EU="emulator/auth/handler",_U=encodeURIComponent("fac");async function KA(t,e,n,r,s,o){qe(t.config.authDomain,t,"auth-domain-config-required"),qe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Al,eventId:s};if(e instanceof jN){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",BL(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,E]of Object.entries({}))l[g]=E}if(e instanceof nd){const g=e.getScopes().filter(E=>E!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const d=await t._getAppCheckToken(),f=d?`#${_U}=${encodeURIComponent(d)}`:"";return`${TU(t)}?${$h(h).slice(1)}${f}`}function TU({config:t}){return t.emulator?D1(t,EU):`https://${t.authDomain}/${yU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="webStorageSupport";class bU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=XN,this._completeRedirectFn=YB,this._overrideRedirectResult=zB}async _openPopup(e,n,r,s){var o;Vs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await KA(e,n,r,rE(),s);return pU(e,l,B1())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await KA(e,n,r,rE(),s);return SB(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Vs(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await lU(e),r=new $B(e);return n.register("authEvent",s=>(qe(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ty,{type:ty},s=>{var o;const l=(o=s?.[0])===null||o===void 0?void 0:o[ty];l!==void 0&&n(!!l),bi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return UN()||DN()||L1()}}const vU=bU;var QA="@firebase/auth",XA="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xU(t){Lo(new Ma("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;qe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HN(t)},f=new z7(r,s,o,d);return Z7(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Lo(new Ma("auth-internal",e=>{const n=qo(e.getProvider("auth").getImmediate());return(r=>new AU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xi(QA,XA,SU(t)),Xi(QA,XA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU=5*60,CU=Vw("authIdTokenMaxAge")||wU;let WA=null;const NU=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>CU)return;const s=n?.token;WA!==s&&(WA=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function IU(t=YE()){const e=Z0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=W7(t,{popupRedirectResolver:vU,persistence:[OB,bB,XN]}),r=Vw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=NU(o.toString());gB(n,l,()=>l(n.currentUser)),pB(n,h=>l(h))}}const s=Bw("auth");return s&&J7(n,`http://${s}`),n}function RU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}j7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=Ji("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",RU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xU("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU="type.googleapis.com/google.protobuf.Int64Value",DU="type.googleapis.com/google.protobuf.UInt64Value";function rI(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function B0(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>B0(e));if(typeof t=="function"||typeof t=="object")return rI(t,e=>B0(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Tl(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case kU:case DU:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Tl(e)):typeof t=="function"||typeof t=="object"?rI(t,e=>Tl(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yr extends is{constructor(e,n,r){super(`${H1}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,yr.prototype)}}function OU(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function U0(t,e){let n=OU(t),r=n,s;try{const o=e&&e.error;if(o){const l=o.status;if(typeof l=="string"){if(!ZA[l])return new yr("internal","internal");n=ZA[l],r=l}const h=o.message;typeof h=="string"&&(r=h),s=o.details,s!==void 0&&(s=Tl(s))}}catch{}return n==="ok"?null:new yr(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Lr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="us-central1",MU=/^data: (.*?)(?:\n|$)/;function PU(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new yr("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class BU{constructor(e,n,r,s,o=oE,l=(...h)=>fetch(...h)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new LU(e,n,r,s),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(o);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=oE}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function UU(t,e,n){const r=Vo(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(FE(t.emulatorOrigin),zE("Functions",!0))}function HU(t,e,n){const r=s=>FU(t,e,s,{});return r.stream=(s,o)=>jU(t,e,s,o),r}async function VU(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function iI(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function FU(t,e,n,r){const s=t._url(e);return zU(t,s,n,r)}async function zU(t,e,n,r){n=B0(n);const s={data:n},o=await iI(t,r),l=r.timeout||7e4,h=PU(l),d=await Promise.race([VU(e,s,o,t.fetchImpl),h.promise,t.cancelAllRequests]);if(h.cancel(),!d)throw new yr("cancelled","Firebase Functions instance was deleted.");const f=U0(d.status,d.json);if(f)throw f;if(!d.json)throw new yr("internal","Response is not valid JSON object.");let g=d.json.data;if(typeof g>"u"&&(g=d.json.result),typeof g>"u")throw new yr("internal","Response is missing data field.");return{data:Tl(g)}}function jU(t,e,n,r){const s=t._url(e);return qU(t,s,n,r||{})}async function qU(t,e,n,r){var s;n=B0(n);const o={data:n},l=await iI(t,r);l["Content-Type"]="application/json",l.Accept="text/event-stream";let h;try{h=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:l,signal:r?.signal})}catch(b){if(b instanceof Error&&b.name==="AbortError"){const k=new yr("cancelled","Request was cancelled.");return{data:Promise.reject(k),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(k)}}}}}}const N=U0(0,null);return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}let d,f;const g=new Promise((b,N)=>{d=b,f=N});(s=r?.signal)===null||s===void 0||s.addEventListener("abort",()=>{const b=new yr("cancelled","Request was cancelled.");f(b)});const E=h.body.getReader(),T=YU(E,d,f,r?.signal);return{stream:{[Symbol.asyncIterator](){const b=T.getReader();return{async next(){const{value:N,done:k}=await b.read();return{value:N,done:k}},async return(){return await b.cancel(),{done:!0,value:void 0}}}}},data:g}}function YU(t,e,n,r){const s=(l,h)=>{const d=l.match(MU);if(!d)return;const f=d[1];try{const g=JSON.parse(f);if("result"in g){e(Tl(g.result));return}if("message"in g){h.enqueue(Tl(g.message));return}if("error"in g){const E=U0(0,g);h.error(E),n(E);return}}catch(g){if(g instanceof yr){h.error(g),n(g);return}}},o=new TextDecoder;return new ReadableStream({start(l){let h="";return d();async function d(){if(r?.aborted){const f=new yr("cancelled","Request was cancelled");return l.error(f),n(f),Promise.resolve()}try{const{value:f,done:g}=await t.read();if(g){h.trim()&&s(h.trim(),l),l.close();return}if(r?.aborted){const T=new yr("cancelled","Request was cancelled");l.error(T),n(T),await t.cancel();return}h+=o.decode(f,{stream:!0});const E=h.split(`
`);h=E.pop()||"";for(const T of E)T.trim()&&s(T.trim(),l);return d()}catch(f){const g=f instanceof yr?f:U0(0,null);l.error(g),n(g)}}},cancel(){return t.cancel()}})}const JA="@firebase/functions",eS="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU="auth-internal",$U="app-check-internal",KU="messaging-internal";function QU(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider(GU),l=n.getProvider(KU),h=n.getProvider($U);return new BU(s,o,l,h,r)};Lo(new Ma(H1,e,"PUBLIC").setMultipleInstances(!0)),Xi(JA,eS,t),Xi(JA,eS,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XU(t=YE(),e=oE){const r=Z0(nn(t),H1).getImmediate({identifier:e}),s=Uw("functions");return s&&sI(r,...s),r}function sI(t,e,n){UU(nn(t),e,n)}function aI(t,e,n){return HU(nn(t),e)}QU();const WU={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},V1=jw(WU),vi=Q9(V1),H0=IU(V1),F1=XU(V1,"us-central1");sI(F1,"localhost",5001);const Vr={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},sr={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function ZU(){const[t,e]=ie.useState(""),[n,r]=ie.useState(""),[s,o]=ie.useState(!1),[l,h]=ie.useState(!1),[d,f]=ie.useState(""),g=async T=>{T.preventDefault(),h(!0),f("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(sr.INVALID_EMAIL);if(n.length<6)throw new Error(sr.WEAK_PASSWORD);const N=await fB(H0,t,n);console.log("User created successfully:",N.user.uid)}catch(b){console.error("Sign up error:",b);let N="Failed to create account";b.code==="auth/email-already-in-use"?N=sr.EMAIL_IN_USE:b.code==="auth/invalid-email"?N=sr.INVALID_EMAIL:b.code==="auth/weak-password"?N=sr.WEAK_PASSWORD:b.code==="auth/operation-not-allowed"?N="Email/password accounts are not enabled. Please contact support.":b.message&&(N=b.message),f(N)}finally{h(!1)}},E=async T=>{T.preventDefault(),h(!0),f("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(sr.INVALID_EMAIL);const N=await mB(H0,t,n);console.log("User signed in successfully:",N.user.uid)}catch(b){console.error("Sign in error:",b);let N="Failed to sign in";b.code==="auth/user-not-found"?N=sr.USER_NOT_FOUND:b.code==="auth/wrong-password"?N=sr.WRONG_PASSWORD:b.code==="auth/invalid-email"?N=sr.INVALID_EMAIL:b.code==="auth/user-disabled"?N="This account has been disabled. Please contact support.":b.code==="auth/too-many-requests"?N=sr.TOO_MANY_REQUESTS:b.message&&(N=b.message),f(N)}finally{h(!1)}};return R.jsx("div",{className:"fixed inset-0 bg-[#1a1a1d]/90 dark:bg-[#1a1a1d]/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:R.jsxs("div",{className:`bg-[#222226] dark:bg-[#222226] rounded-2xl shadow-[0_24px_48px_rgba(0,0,0,0.7),0_10px_20px_rgba(0,0,0,0.5)] 
                          p-8 w-full max-w-md border border-white/12 dark:border-white/12`,children:[R.jsxs("div",{className:"text-center mb-8",children:[R.jsx("div",{className:"flex items-center justify-center mb-4",children:R.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:R.jsx("span",{className:"text-white font-bold text-lg",children:"T"})})}),R.jsx("h2",{className:"text-2xl font-bold text-[#f8faff] dark:text-[#f8faff] mb-2",children:s?"Join TinkFlow":"Welcome Back"}),R.jsx("p",{className:"text-[#b0b3b8] dark:text-[#b0b3b8] text-sm",children:s?"Start your AI-powered learning journey":"Continue exploring concepts with AI"})]}),R.jsxs("form",{onSubmit:s?g:E,className:"space-y-6",children:[R.jsx("div",{children:R.jsx("input",{type:"email",placeholder:"Email address",value:t,onChange:T=>e(T.target.value),required:!0,className:`w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-white/15 dark:border-white/15 
                                     rounded-lg text-[#f8faff] dark:text-[#f8faff] placeholder-[#8b949e] dark:placeholder-[#8b949e] 
                                     focus:outline-none focus:border-[#5a9cf8] dark:focus:border-[#5a9cf8] focus:shadow-[0_0_0_3px_rgba(90,156,248,0.25)]
                                     transition-all duration-200`})}),R.jsx("div",{children:R.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:T=>r(T.target.value),required:!0,className:`w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-white/15 dark:border-white/15 
                                     rounded-lg text-[#f8faff] dark:text-[#f8faff] placeholder-[#8b949e] dark:placeholder-[#8b949e] 
                                     focus:outline-none focus:border-[#5a9cf8] dark:focus:border-[#5a9cf8] focus:shadow-[0_0_0_3px_rgba(90,156,248,0.25)]
                                     transition-all duration-200`})}),R.jsx("button",{type:"submit",disabled:l,className:`w-full py-3 px-4 rounded-lg font-semibold text-white transition-all duration-200 
                                   ${l?"bg-[#3a3a3e] dark:bg-[#3a3a3e] cursor-not-allowed opacity-60":"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 active:from-indigo-700 active:to-purple-800 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}
                                   focus:outline-none focus:shadow-[0_0_0_3px_rgba(99,102,241,0.4)]`,children:l?R.jsx("div",{className:"inline-block w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s?"Create Account":"Sign In"}),d&&R.jsx("div",{className:`bg-red-900/20 dark:bg-red-900/30 border border-red-500/30 dark:border-red-500/40 
                                       rounded-lg p-3 text-red-400 dark:text-red-400 text-sm`,children:d})]}),R.jsxs("div",{className:"auth-switch text-center mt-6",children:[R.jsx("span",{className:"auth-switch-text text-gray-400 dark:text-gray-400 text-sm",children:s?"Already have an account?":"Don't have an account?"}),R.jsx("button",{type:"button",onClick:()=>o(!s),className:`auth-switch-btn ml-2 text-blue-400 dark:text-blue-400 hover:text-blue-300 dark:hover:text-blue-300 
                                 text-sm font-medium transition-colors duration-200 bg-transparent border-none cursor-pointer`,children:s?"Sign In":"Sign Up"})]})]})})}function JU({show:t,onHide:e,onConfirm:n,isCreating:r=!1}){const[s,o]=ie.useState(""),[l,h]=ie.useState(!0),d=T=>{const b=T.target.value;o(b),h(b.trim().length>0&&b.trim().length<=50)},f=T=>{T.preventDefault();const b=s.trim();b.length>0&&b.length<=50&&(n(b),o(""),h(!0))},g=()=>{o(""),h(!0),e()},E=T=>{T.key==="Enter"&&f(T)};return t?R.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:R.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-xl shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[R.jsxs("div",{className:"flex justify-between items-center mb-6",children:[R.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),R.jsx("button",{onClick:g,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-gray-700/50 dark:bg-gray-800/50 hover:bg-gray-600/50 dark:hover:bg-gray-700/50
                                 border border-gray-600 dark:border-gray-700 rounded-lg w-8 h-8 flex items-center justify-center
                                 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/20`,"aria-label":"Close",children:""})]}),R.jsxs("form",{onSubmit:f,className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),R.jsx("input",{type:"text",value:s,onChange:d,onKeyDown:E,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-500 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40 
                                       transition-all duration-200 font-medium
                                       ${l?"border-gray-600/50 dark:border-gray-700/50 focus:border-blue-500/60 dark:focus:border-blue-400/60":"border-red-500/60 dark:border-red-500/60 focus:border-red-500/60 dark:focus:border-red-500/60"}`}),!l&&R.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-2",children:"Board name must be between 1 and 50 characters long."}),R.jsxs("p",{className:`text-xs mt-1 ${s.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[s.length,"/50 characters"]})]}),R.jsxs("div",{className:"flex gap-3 pt-4",children:[R.jsx("button",{type:"button",onClick:g,disabled:r,className:`flex-1 px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border border-gray-600/50 dark:border-gray-700/50
                                     text-gray-300 dark:text-gray-300 rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-600/60 dark:hover:bg-gray-700/60 hover:border-gray-500/60 dark:hover:border-gray-600/60
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),R.jsx("button",{type:"submit",disabled:!l||s.trim().length===0||r,className:`flex-1 px-4 py-3 bg-blue-600/80 dark:bg-blue-500/80 border border-blue-500/50 dark:border-blue-400/50
                                     text-white rounded-lg font-medium transition-all duration-200 
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-500/90 dark:hover:bg-blue-400/90 hover:border-blue-400/60 dark:hover:border-blue-300/60
                                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40`,children:r?"Creating...":"Create Board"})]})]})]})}):null}function eH({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:s,onSignOut:o,isLoading:l}){const[h,d]=ie.useState(!1),[f,g]=ie.useState(!1),[E,T]=ie.useState(null),b=async M=>{try{d(!0),await r(M),g(!1)}catch(Y){console.error("Error in sidebar create board:",Y)}finally{d(!1)}},N=()=>{g(!0)},k=()=>{g(!1)},U=(M,Y)=>{M.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&s(Y)};return R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"fixed left-0 top-0 w-[440px] h-screen bg-[#222226] dark:bg-[#222226] border-r border-white/10 dark:border-white/10 flex flex-col z-[1001] transition-transform duration-[0.35s] ease-[cubic-bezier(0.4,0,0.2,1)]",children:R.jsxs("div",{className:"flex flex-col h-full",children:[R.jsxs("div",{className:"p-[22px] border-b border-white/[0.08] dark:border-white/[0.08] bg-white/[0.03] dark:bg-white/[0.03]",children:[R.jsx("h2",{className:"m-0 mb-[18px] text-[18px] font-semibold text-[#f8faff] dark:text-[#f8faff] tracking-[-0.012em]",children:"TinkFlow Boards"}),R.jsx("button",{onClick:N,disabled:l||h,className:`w-full bg-[#2f2f33] dark:bg-[#2f2f33] text-[#f8faff] dark:text-[#f8faff] border border-white/12 dark:border-white/12 
                                      px-4 py-[10px] rounded-md cursor-pointer text-[13px] font-semibold transition-all duration-200 
                                      tracking-[0.015em] uppercase
                                      ${l||h?"cursor-not-allowed opacity-60":"hover:bg-[#3a3a3e] dark:hover:bg-[#3a3a3e] hover:border-white/18 dark:hover:border-white/18 hover:-translate-y-0.5"}`,children:h?"Creating...":"+ New Board"})]}),R.jsx("div",{className:"flex-1 overflow-y-auto p-[14px] scrollbar-thin scrollbar-track-[#2a2a2e] scrollbar-thumb-[#4a4a4e] hover:scrollbar-thumb-[#5a5a5e]",children:t.map(M=>{const Y=e?.id===M.id,K=E===M.id;return R.jsxs("div",{onClick:()=>!l&&n(M.id),onMouseEnter:()=>T(M.id),onMouseLeave:()=>T(null),className:`
                                        min-h-[54px] px-[18px] py-[14px] mb-[8px] rounded-[12px] flex justify-between items-center
                                        transition-all duration-200 cursor-pointer border font-medium text-[14px] leading-[1.4]
                                        ${l?"cursor-not-allowed opacity-60":"cursor-pointer"}
                                        ${Y?"border-[#4a90e2] bg-[#2a3850] dark:bg-[#2a3850] text-[#f8faff] dark:text-[#f8faff] font-semibold shadow-[0_2px_8px_rgba(74,144,226,0.3)] transform translate-y-[-1px]":K?"border-white/20 dark:border-white/20 bg-[#2a2a2e] dark:bg-[#2a2a2e] text-[#e8eaed] dark:text-[#e8eaed] shadow-[0_2px_8px_rgba(0,0,0,0.3)] transform translate-y-[-1px]":"border-white/10 dark:border-white/10 bg-[#1e1e22] dark:bg-[#1e1e22] text-[#b0b3b8] dark:text-[#b0b3b8]"}
                                    `,role:"button",tabIndex:0,onKeyDown:q=>{(q.key==="Enter"||q.key===" ")&&!l&&n(M.id)},children:[R.jsx("span",{className:`
                                        ${Y?"font-bold":"font-medium"} 
                                        text-lg flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        tracking-wide leading-5
                                    `,children:M.name}),R.jsxs("div",{className:"flex items-center gap-2",children:[M.isOpen&&R.jsx("span",{className:"text-blue-400 dark:text-blue-400 text-lg",children:""}),t.length>1&&R.jsx("button",{onClick:q=>{q.stopPropagation(),U(q,M.id)},title:"Delete board",className:`
                                                    bg-transparent border-none text-red-400 dark:text-red-400 
                                                    cursor-pointer text-xl leading-none px-1 transition-opacity duration-150
                                                    ${K?"opacity-100 visible":"opacity-0 invisible"}
                                                    hover:text-red-300 dark:hover:text-red-300
                                                `,children:""})]})]},M.id)})}),l&&R.jsx("div",{className:"p-4 text-center text-[#b0b3b8] dark:text-[#b0b3b8] text-[13px] font-medium",children:"Loading boards..."}),R.jsx("div",{className:"p-[22px] border-t border-white/[0.08] dark:border-white/[0.08]",children:R.jsx("button",{onClick:o,className:`w-full px-4 py-[10px] rounded-md border border-white/12 dark:border-white/12 
                                     bg-transparent text-[#b0b3b8] dark:text-[#b0b3b8] cursor-pointer text-[13px] font-semibold
                                     transition-all duration-200 tracking-[0.015em] uppercase
                                     hover:bg-[#2a2a2e] dark:hover:bg-[#2a2a2e] hover:border-white/18 dark:hover:border-white/18 
                                     hover:text-[#e8eaed] dark:hover:text-[#e8eaed] hover:-translate-y-0.5`,children:"Sign Out"})})]})}),R.jsx(JU,{show:f,onHide:k,onConfirm:b,isCreating:h})]})}function tS(t){const e=[],n=String(t||"");let r=n.indexOf(","),s=0,o=!1;for(;!o;){r===-1&&(r=n.length,o=!0);const l=n.slice(s,r).trim();(l||!o)&&e.push(l),s=r+1,r=n.indexOf(",",s)}return e}function oI(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const tH=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nH=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,rH={};function nS(t,e){return(rH.jsx?nH:tH).test(t)}const iH=/[ \t\n\f\r]/g;function sH(t){return typeof t=="object"?t.type==="text"?rS(t.value):!1:rS(t)}function rS(t){return t.replace(iH,"")===""}let id=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};id.prototype.normal={};id.prototype.property={};id.prototype.space=void 0;function uI(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new id(n,r,e)}function Uh(t){return t.toLowerCase()}let _r=class{constructor(e,n){this.attribute=n,this.property=e}};_r.prototype.attribute="";_r.prototype.booleanish=!1;_r.prototype.boolean=!1;_r.prototype.commaOrSpaceSeparated=!1;_r.prototype.commaSeparated=!1;_r.prototype.defined=!1;_r.prototype.mustUseProperty=!1;_r.prototype.number=!1;_r.prototype.overloadedBoolean=!1;_r.prototype.property="";_r.prototype.spaceSeparated=!1;_r.prototype.space=void 0;let aH=0;const et=Yo(),pn=Yo(),uE=Yo(),Ce=Yo(),Mt=Yo(),al=Yo(),Dr=Yo();function Yo(){return 2**++aH}const lE=Object.freeze(Object.defineProperty({__proto__:null,boolean:et,booleanish:pn,commaOrSpaceSeparated:Dr,commaSeparated:al,number:Ce,overloadedBoolean:uE,spaceSeparated:Mt},Symbol.toStringTag,{value:"Module"})),ny=Object.keys(lE);let z1=class extends _r{constructor(e,n,r,s){let o=-1;if(super(e,n),iS(this,"space",s),typeof r=="number")for(;++o<ny.length;){const l=ny[o];iS(this,ny[o],(r&lE[l])===lE[l])}}};z1.prototype.defined=!0;function iS(t,e,n){n&&(t[e]=n)}function kl(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const o=new z1(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),e[r]=o,n[Uh(r)]=r,n[Uh(o.attribute)]=r}return new id(e,n,t.space)}const lI=kl({properties:{ariaActiveDescendant:null,ariaAtomic:pn,ariaAutoComplete:null,ariaBusy:pn,ariaChecked:pn,ariaColCount:Ce,ariaColIndex:Ce,ariaColSpan:Ce,ariaControls:Mt,ariaCurrent:null,ariaDescribedBy:Mt,ariaDetails:null,ariaDisabled:pn,ariaDropEffect:Mt,ariaErrorMessage:null,ariaExpanded:pn,ariaFlowTo:Mt,ariaGrabbed:pn,ariaHasPopup:null,ariaHidden:pn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Mt,ariaLevel:Ce,ariaLive:null,ariaModal:pn,ariaMultiLine:pn,ariaMultiSelectable:pn,ariaOrientation:null,ariaOwns:Mt,ariaPlaceholder:null,ariaPosInSet:Ce,ariaPressed:pn,ariaReadOnly:pn,ariaRelevant:null,ariaRequired:pn,ariaRoleDescription:Mt,ariaRowCount:Ce,ariaRowIndex:Ce,ariaRowSpan:Ce,ariaSelected:pn,ariaSetSize:Ce,ariaSort:null,ariaValueMax:Ce,ariaValueMin:Ce,ariaValueNow:Ce,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function cI(t,e){return e in t?t[e]:e}function hI(t,e){return cI(t,e.toLowerCase())}const oH=kl({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:al,acceptCharset:Mt,accessKey:Mt,action:null,allow:null,allowFullScreen:et,allowPaymentRequest:et,allowUserMedia:et,alt:null,as:null,async:et,autoCapitalize:null,autoComplete:Mt,autoFocus:et,autoPlay:et,blocking:Mt,capture:null,charSet:null,checked:et,cite:null,className:Mt,cols:Ce,colSpan:null,content:null,contentEditable:pn,controls:et,controlsList:Mt,coords:Ce|al,crossOrigin:null,data:null,dateTime:null,decoding:null,default:et,defer:et,dir:null,dirName:null,disabled:et,download:uE,draggable:pn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:et,formTarget:null,headers:Mt,height:Ce,hidden:uE,high:Ce,href:null,hrefLang:null,htmlFor:Mt,httpEquiv:Mt,id:null,imageSizes:null,imageSrcSet:null,inert:et,inputMode:null,integrity:null,is:null,isMap:et,itemId:null,itemProp:Mt,itemRef:Mt,itemScope:et,itemType:Mt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:et,low:Ce,manifest:null,max:null,maxLength:Ce,media:null,method:null,min:null,minLength:Ce,multiple:et,muted:et,name:null,nonce:null,noModule:et,noValidate:et,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:et,optimum:Ce,pattern:null,ping:Mt,placeholder:null,playsInline:et,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:et,referrerPolicy:null,rel:Mt,required:et,reversed:et,rows:Ce,rowSpan:Ce,sandbox:Mt,scope:null,scoped:et,seamless:et,selected:et,shadowRootClonable:et,shadowRootDelegatesFocus:et,shadowRootMode:null,shape:null,size:Ce,sizes:null,slot:null,span:Ce,spellCheck:pn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ce,step:null,style:null,tabIndex:Ce,target:null,title:null,translate:null,type:null,typeMustMatch:et,useMap:null,value:pn,width:Ce,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Mt,axis:null,background:null,bgColor:null,border:Ce,borderColor:null,bottomMargin:Ce,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:et,declare:et,event:null,face:null,frame:null,frameBorder:null,hSpace:Ce,leftMargin:Ce,link:null,longDesc:null,lowSrc:null,marginHeight:Ce,marginWidth:Ce,noResize:et,noHref:et,noShade:et,noWrap:et,object:null,profile:null,prompt:null,rev:null,rightMargin:Ce,rules:null,scheme:null,scrolling:pn,standby:null,summary:null,text:null,topMargin:Ce,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ce,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:et,disableRemotePlayback:et,prefix:null,property:null,results:Ce,security:null,unselectable:null},space:"html",transform:hI}),uH=kl({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Dr,accentHeight:Ce,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ce,amplitude:Ce,arabicForm:null,ascent:Ce,attributeName:null,attributeType:null,azimuth:Ce,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ce,by:null,calcMode:null,capHeight:Ce,className:Mt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ce,diffuseConstant:Ce,direction:null,display:null,dur:null,divisor:Ce,dominantBaseline:null,download:et,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ce,enableBackground:null,end:null,event:null,exponent:Ce,externalResourcesRequired:null,fill:null,fillOpacity:Ce,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:al,g2:al,glyphName:al,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ce,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ce,horizOriginX:Ce,horizOriginY:Ce,id:null,ideographic:Ce,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ce,k:Ce,k1:Ce,k2:Ce,k3:Ce,k4:Ce,kernelMatrix:Dr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ce,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ce,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ce,overlineThickness:Ce,paintOrder:null,panose1:null,path:null,pathLength:Ce,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Mt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ce,pointsAtY:Ce,pointsAtZ:Ce,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Dr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Dr,rev:Dr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Dr,requiredFeatures:Dr,requiredFonts:Dr,requiredFormats:Dr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ce,specularExponent:Ce,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ce,strikethroughThickness:Ce,string:null,stroke:null,strokeDashArray:Dr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ce,strokeOpacity:Ce,strokeWidth:null,style:null,surfaceScale:Ce,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Dr,tabIndex:Ce,tableValues:null,target:null,targetX:Ce,targetY:Ce,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Dr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ce,underlineThickness:Ce,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ce,values:null,vAlphabetic:Ce,vMathematical:Ce,vectorEffect:null,vHanging:Ce,vIdeographic:Ce,version:null,vertAdvY:Ce,vertOriginX:Ce,vertOriginY:Ce,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ce,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:cI}),dI=kl({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),fI=kl({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:hI}),mI=kl({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),lH={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},cH=/[A-Z]/g,sS=/-[a-z]/g,hH=/^data[-\w.:]+$/i;function j1(t,e){const n=Uh(e);let r=e,s=_r;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&hH.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(sS,fH);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!sS.test(o)){let l=o.replace(cH,dH);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}s=z1}return new s(r,e)}function dH(t){return"-"+t.toLowerCase()}function fH(t){return t.charAt(1).toUpperCase()}const Tm=uI([lI,oH,dI,fI,mI],"html"),Dl=uI([lI,uH,dI,fI,mI],"svg");function aS(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function pI(t){return t.join(" ").trim()}var zu={},ry,oS;function mH(){if(oS)return ry;oS=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,h=/^\s+|\s+$/g,d=`
`,f="/",g="*",E="",T="comment",b="declaration";ry=function(k,U){if(typeof k!="string")throw new TypeError("First argument must be a string");if(!k)return[];U=U||{};var M=1,Y=1;function K(w){var D=w.match(e);D&&(M+=D.length);var Q=w.lastIndexOf(d);Y=~Q?w.length-Q:Y+w.length}function q(){var w={line:M,column:Y};return function(D){return D.position=new te(w),C(),D}}function te(w){this.start=w,this.end={line:M,column:Y},this.source=U.source}te.prototype.content=k;function G(w){var D=new Error(U.source+":"+M+":"+Y+": "+w);if(D.reason=w,D.filename=U.source,D.line=M,D.column=Y,D.source=k,!U.silent)throw D}function H(w){var D=w.exec(k);if(D){var Q=D[0];return K(Q),k=k.slice(Q.length),D}}function C(){H(n)}function I(w){var D;for(w=w||[];D=B();)D!==!1&&w.push(D);return w}function B(){var w=q();if(!(f!=k.charAt(0)||g!=k.charAt(1))){for(var D=2;E!=k.charAt(D)&&(g!=k.charAt(D)||f!=k.charAt(D+1));)++D;if(D+=2,E===k.charAt(D-1))return G("End of comment missing");var Q=k.slice(2,D-2);return Y+=2,K(Q),k=k.slice(D),Y+=2,w({type:T,comment:Q})}}function P(){var w=q(),D=H(r);if(D){if(B(),!H(s))return G("property missing ':'");var Q=H(o),z=w({type:b,property:N(D[0].replace(t,E)),value:Q?N(Q[0].replace(t,E)):E});return H(l),z}}function V(){var w=[];I(w);for(var D;D=P();)D!==!1&&(w.push(D),I(w));return w}return C(),V()};function N(k){return k?k.replace(h,E):E}return ry}var uS;function pH(){if(uS)return zu;uS=1;var t=zu&&zu.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zu,"__esModule",{value:!0}),zu.default=n;var e=t(mH());function n(r,s){var o=null;if(!r||typeof r!="string")return o;var l=(0,e.default)(r),h=typeof s=="function";return l.forEach(function(d){if(d.type==="declaration"){var f=d.property,g=d.value;h?s(f,g,d):g&&(o=o||{},o[f]=g)}}),o}return zu}var qc={},lS;function gH(){if(lS)return qc;lS=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,o=function(f){return!f||n.test(f)||t.test(f)},l=function(f,g){return g.toUpperCase()},h=function(f,g){return"".concat(g,"-")},d=function(f,g){return g===void 0&&(g={}),o(f)?f:(f=f.toLowerCase(),g.reactCompat?f=f.replace(s,h):f=f.replace(r,h),f.replace(e,l))};return qc.camelCase=d,qc}var Yc,cS;function yH(){if(cS)return Yc;cS=1;var t=Yc&&Yc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(pH()),n=gH();function r(s,o){var l={};return!s||typeof s!="string"||(0,e.default)(s,function(h,d){h&&d&&(l[(0,n.camelCase)(h,o)]=d)}),l}return r.default=r,Yc=r,Yc}var EH=yH();const _H=q0(EH),bm=gI("end"),ss=gI("start");function gI(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function TH(t){const e=ss(t),n=bm(t);if(e&&n)return{start:e,end:n}}function hh(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?hS(t.position):"start"in t||"end"in t?hS(t):"line"in t||"column"in t?cE(t):""}function cE(t){return dS(t&&t.line)+":"+dS(t&&t.column)}function hS(t){return cE(t&&t.start)+"-"+cE(t&&t.end)}function dS(t){return t&&typeof t=="number"?t:1}class Zn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",o={},l=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof e=="string"?s=e:!o.cause&&e&&(l=!0,s=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof r=="string"){const d=r.indexOf(":");d===-1?o.ruleId=r:(o.source=r.slice(0,d),o.ruleId=r.slice(d+1))}if(!o.place&&o.ancestors&&o.ancestors){const d=o.ancestors[o.ancestors.length-1];d&&(o.place=d.position)}const h=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=h?h.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=h?h.line:void 0,this.name=hh(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=l&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}Zn.prototype.file="";Zn.prototype.name="";Zn.prototype.reason="";Zn.prototype.message="";Zn.prototype.stack="";Zn.prototype.column=void 0;Zn.prototype.line=void 0;Zn.prototype.ancestors=void 0;Zn.prototype.cause=void 0;Zn.prototype.fatal=void 0;Zn.prototype.place=void 0;Zn.prototype.ruleId=void 0;Zn.prototype.source=void 0;const q1={}.hasOwnProperty,bH=new Map,vH=/[A-Z]/g,AH=new Set(["table","tbody","thead","tfoot","tr"]),SH=new Set(["td","th"]),yI="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function xH(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=OH(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=DH(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Dl:Tm,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=EI(s,t,void 0);return o&&typeof o!="string"?o:s.create(t,s.Fragment,{children:o||void 0},void 0)}function EI(t,e,n){if(e.type==="element")return wH(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return CH(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return IH(t,e,n);if(e.type==="mdxjsEsm")return NH(t,e);if(e.type==="root")return RH(t,e,n);if(e.type==="text")return kH(t,e)}function wH(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Dl,t.schema=s),t.ancestors.push(e);const o=TI(t,e.tagName,!1),l=LH(t,e);let h=G1(t,e);return AH.has(e.tagName)&&(h=h.filter(function(d){return typeof d=="string"?!sH(d):!0})),_I(t,l,o,e),Y1(l,h),t.ancestors.pop(),t.schema=r,t.create(e,o,l,n)}function CH(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Hh(t,e.position)}function NH(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Hh(t,e.position)}function IH(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=Dl,t.schema=s),t.ancestors.push(e);const o=e.name===null?t.Fragment:TI(t,e.name,!0),l=MH(t,e),h=G1(t,e);return _I(t,l,o,e),Y1(l,h),t.ancestors.pop(),t.schema=r,t.create(e,o,l,n)}function RH(t,e,n){const r={};return Y1(r,G1(t,e)),t.create(e,t.Fragment,r,n)}function kH(t,e){return e.value}function _I(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function Y1(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function DH(t,e,n){return r;function r(s,o,l,h){const f=Array.isArray(l.children)?n:e;return h?f(o,l,h):f(o,l)}}function OH(t,e){return n;function n(r,s,o,l){const h=Array.isArray(o.children),d=ss(r);return e(s,o,l,h,{columnNumber:d?d.column-1:void 0,fileName:t,lineNumber:d?d.line:void 0},void 0)}}function LH(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&q1.call(e.properties,s)){const o=PH(t,s,e.properties[s]);if(o){const[l,h]=o;t.tableCellAlignToStyle&&l==="align"&&typeof h=="string"&&SH.has(e.tagName)?r=h:n[l]=h}}if(r){const o=n.style||(n.style={});o[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function MH(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const o=r.data.estree.body[0];o.type;const l=o.expression;l.type;const h=l.properties[0];h.type,Object.assign(n,t.evaluater.evaluateExpression(h.argument))}else Hh(t,e.position);else{const s=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const h=r.value.data.estree.body[0];h.type,o=t.evaluater.evaluateExpression(h.expression)}else Hh(t,e.position);else o=r.value===null?!0:r.value;n[s]=o}return n}function G1(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:bH;for(;++r<e.children.length;){const o=e.children[r];let l;if(t.passKeys){const d=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(d){const f=s.get(d)||0;l=d+"-"+f,s.set(d,f+1)}}const h=EI(t,o,l);h!==void 0&&n.push(h)}return n}function PH(t,e,n){const r=j1(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?oI(n):pI(n)),r.property==="style"){let s=typeof n=="object"?n:BH(t,String(n));return t.stylePropertyNameCase==="css"&&(s=UH(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?lH[r.property]||r.property:r.attribute,n]}}function BH(t,e){try{return _H(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new Zn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=yI+"#cannot-parse-style-attribute",s}}function TI(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let o=-1,l;for(;++o<s.length;){const h=nS(s[o])?{type:"Identifier",name:s[o]}:{type:"Literal",value:s[o]};l=l?{type:"MemberExpression",object:l,property:h,computed:!!(o&&h.type==="Literal"),optional:!1}:h}r=l}else r=nS(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return q1.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);Hh(t)}function Hh(t,e){const n=new Zn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=yI+"#cannot-handle-mdx-estrees-without-createevaluater",n}function UH(t){const e={};let n;for(n in t)q1.call(t,n)&&(e[HH(n)]=t[n]);return e}function HH(t){let e=t.replace(vH,VH);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function VH(t){return"-"+t.toLowerCase()}const iy={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},FH={};function zH(t,e){const n=FH,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return bI(t,r,s)}function bI(t,e,n){if(jH(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return fS(t.children,e,n)}return Array.isArray(t)?fS(t,e,n):""}function fS(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=bI(t[s],e,n);return r.join("")}function jH(t){return!!(t&&typeof t=="object")}const mS=document.createElement("i");function $1(t){const e="&"+t+";";mS.innerHTML=e;const n=mS.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function ns(t,e,n,r){const s=t.length;let o=0,l;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(e,n),t.splice(...l);else for(n&&t.splice(e,n);o<r.length;)l=r.slice(o,o+1e4),l.unshift(e,0),t.splice(...l),o+=1e4,e+=1e4}function si(t,e){return t.length>0?(ns(t,t.length,0,e),t):e}const pS={}.hasOwnProperty;function qH(t){const e={};let n=-1;for(;++n<t.length;)YH(e,t[n]);return e}function YH(t,e){let n;for(n in e){const s=(pS.call(t,n)?t[n]:void 0)||(t[n]={}),o=e[n];let l;if(o)for(l in o){pS.call(s,l)||(s[l]=[]);const h=o[l];GH(s[l],Array.isArray(h)?h:h?[h]:[])}}}function GH(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);ns(t,0,0,r)}function vI(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function ol(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ki=Ga(/[A-Za-z]/),Pr=Ga(/[\dA-Za-z]/),$H=Ga(/[#-'*+\--9=?A-Z^-~]/);function hE(t){return t!==null&&(t<32||t===127)}const dE=Ga(/\d/),KH=Ga(/[\dA-Fa-f]/),QH=Ga(/[!-/:-@[-`{-~]/);function $e(t){return t!==null&&t<-2}function Er(t){return t!==null&&(t<0||t===32)}function Tt(t){return t===-2||t===-1||t===32}const XH=Ga(new RegExp("\\p{P}|\\p{S}","u")),WH=Ga(/\s/);function Ga(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Ol(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const o=t.charCodeAt(n);let l="";if(o===37&&Pr(t.charCodeAt(n+1))&&Pr(t.charCodeAt(n+2)))s=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(l=String.fromCharCode(o));else if(o>55295&&o<57344){const h=t.charCodeAt(n+1);o<56320&&h>56319&&h<57344?(l=String.fromCharCode(o,h),s=1):l=""}else l=String.fromCharCode(o);l&&(e.push(t.slice(r,n),encodeURIComponent(l)),r=n+s+1,l=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function Bt(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let o=0;return l;function l(d){return Tt(d)?(t.enter(n),h(d)):e(d)}function h(d){return Tt(d)&&o++<s?(t.consume(d),h):(t.exit(n),e(d))}}const ZH={tokenize:JH};function JH(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(h){if(h===null){t.consume(h);return}return t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),Bt(t,e,"linePrefix")}function s(h){return t.enter("paragraph"),o(h)}function o(h){const d=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=d),n=d,l(h)}function l(h){if(h===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(h);return}return $e(h)?(t.consume(h),t.exit("chunkText"),o):(t.consume(h),l)}}const eV={tokenize:tV},gS={tokenize:nV};function tV(t){const e=this,n=[];let r=0,s,o,l;return h;function h(K){if(r<n.length){const q=n[r];return e.containerState=q[1],t.attempt(q[0].continuation,d,f)(K)}return f(K)}function d(K){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&Y();const q=e.events.length;let te=q,G;for(;te--;)if(e.events[te][0]==="exit"&&e.events[te][1].type==="chunkFlow"){G=e.events[te][1].end;break}M(r);let H=q;for(;H<e.events.length;)e.events[H][1].end={...G},H++;return ns(e.events,te+1,0,e.events.slice(q)),e.events.length=H,f(K)}return h(K)}function f(K){if(r===n.length){if(!s)return T(K);if(s.currentConstruct&&s.currentConstruct.concrete)return N(K);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(gS,g,E)(K)}function g(K){return s&&Y(),M(r),T(K)}function E(K){return e.parser.lazy[e.now().line]=r!==n.length,l=e.now().offset,N(K)}function T(K){return e.containerState={},t.attempt(gS,b,N)(K)}function b(K){return r++,n.push([e.currentConstruct,e.containerState]),T(K)}function N(K){if(K===null){s&&Y(),M(0),t.consume(K);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:o}),k(K)}function k(K){if(K===null){U(t.exit("chunkFlow"),!0),M(0),t.consume(K);return}return $e(K)?(t.consume(K),U(t.exit("chunkFlow")),r=0,e.interrupt=void 0,h):(t.consume(K),k)}function U(K,q){const te=e.sliceStream(K);if(q&&te.push(null),K.previous=o,o&&(o.next=K),o=K,s.defineSkip(K.start),s.write(te),e.parser.lazy[K.start.line]){let G=s.events.length;for(;G--;)if(s.events[G][1].start.offset<l&&(!s.events[G][1].end||s.events[G][1].end.offset>l))return;const H=e.events.length;let C=H,I,B;for(;C--;)if(e.events[C][0]==="exit"&&e.events[C][1].type==="chunkFlow"){if(I){B=e.events[C][1].end;break}I=!0}for(M(r),G=H;G<e.events.length;)e.events[G][1].end={...B},G++;ns(e.events,C+1,0,e.events.slice(H)),e.events.length=G}}function M(K){let q=n.length;for(;q-- >K;){const te=n[q];e.containerState=te[1],te[0].exit.call(e,t)}n.length=K}function Y(){s.write([null]),o=void 0,s=void 0,e.containerState._closeFlow=void 0}}function nV(t,e,n){return Bt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function yS(t){if(t===null||Er(t)||WH(t))return 1;if(XH(t))return 2}function K1(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const o=t[s].resolveAll;o&&!r.includes(o)&&(e=o(e,n),r.push(o))}return e}const fE={name:"attention",resolveAll:rV,tokenize:iV};function rV(t,e){let n=-1,r,s,o,l,h,d,f,g;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;d=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const E={...t[r][1].end},T={...t[n][1].start};ES(E,-d),ES(T,d),l={type:d>1?"strongSequence":"emphasisSequence",start:E,end:{...t[r][1].end}},h={type:d>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:T},o={type:d>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:d>1?"strong":"emphasis",start:{...l.start},end:{...h.end}},t[r][1].end={...l.start},t[n][1].start={...h.end},f=[],t[r][1].end.offset-t[r][1].start.offset&&(f=si(f,[["enter",t[r][1],e],["exit",t[r][1],e]])),f=si(f,[["enter",s,e],["enter",l,e],["exit",l,e],["enter",o,e]]),f=si(f,K1(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),f=si(f,[["exit",o,e],["enter",h,e],["exit",h,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(g=2,f=si(f,[["enter",t[n][1],e],["exit",t[n][1],e]])):g=0,ns(t,r-1,n-r+3,f),n=r+f.length-g-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function iV(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=yS(r);let o;return l;function l(d){return o=d,t.enter("attentionSequence"),h(d)}function h(d){if(d===o)return t.consume(d),h;const f=t.exit("attentionSequence"),g=yS(d),E=!g||g===2&&s||n.includes(d),T=!s||s===2&&g||n.includes(r);return f._open=!!(o===42?E:E&&(s||!T)),f._close=!!(o===42?T:T&&(g||!E)),e(d)}}function ES(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const sV={name:"autolink",tokenize:aV};function aV(t,e,n){let r=0;return s;function s(b){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(b),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(b){return Ki(b)?(t.consume(b),l):b===64?n(b):f(b)}function l(b){return b===43||b===45||b===46||Pr(b)?(r=1,h(b)):f(b)}function h(b){return b===58?(t.consume(b),r=0,d):(b===43||b===45||b===46||Pr(b))&&r++<32?(t.consume(b),h):(r=0,f(b))}function d(b){return b===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(b),t.exit("autolinkMarker"),t.exit("autolink"),e):b===null||b===32||b===60||hE(b)?n(b):(t.consume(b),d)}function f(b){return b===64?(t.consume(b),g):$H(b)?(t.consume(b),f):n(b)}function g(b){return Pr(b)?E(b):n(b)}function E(b){return b===46?(t.consume(b),r=0,g):b===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(b),t.exit("autolinkMarker"),t.exit("autolink"),e):T(b)}function T(b){if((b===45||Pr(b))&&r++<63){const N=b===45?T:E;return t.consume(b),N}return n(b)}}const vm={partial:!0,tokenize:oV};function oV(t,e,n){return r;function r(o){return Tt(o)?Bt(t,s,"linePrefix")(o):s(o)}function s(o){return o===null||$e(o)?e(o):n(o)}}const AI={continuation:{tokenize:lV},exit:cV,name:"blockQuote",tokenize:uV};function uV(t,e,n){const r=this;return s;function s(l){if(l===62){const h=r.containerState;return h.open||(t.enter("blockQuote",{_container:!0}),h.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),o}return n(l)}function o(l){return Tt(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(l))}}function lV(t,e,n){const r=this;return s;function s(l){return Tt(l)?Bt(t,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):o(l)}function o(l){return t.attempt(AI,e,n)(l)}}function cV(t){t.exit("blockQuote")}const SI={name:"characterEscape",tokenize:hV};function hV(t,e,n){return r;function r(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),s}function s(o){return QH(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(o)}}const xI={name:"characterReference",tokenize:dV};function dV(t,e,n){const r=this;let s=0,o,l;return h;function h(E){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(E),t.exit("characterReferenceMarker"),d}function d(E){return E===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(E),t.exit("characterReferenceMarkerNumeric"),f):(t.enter("characterReferenceValue"),o=31,l=Pr,g(E))}function f(E){return E===88||E===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(E),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,l=KH,g):(t.enter("characterReferenceValue"),o=7,l=dE,g(E))}function g(E){if(E===59&&s){const T=t.exit("characterReferenceValue");return l===Pr&&!$1(r.sliceSerialize(T))?n(E):(t.enter("characterReferenceMarker"),t.consume(E),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return l(E)&&s++<o?(t.consume(E),g):n(E)}}const _S={partial:!0,tokenize:mV},TS={concrete:!0,name:"codeFenced",tokenize:fV};function fV(t,e,n){const r=this,s={partial:!0,tokenize:te};let o=0,l=0,h;return d;function d(G){return f(G)}function f(G){const H=r.events[r.events.length-1];return o=H&&H[1].type==="linePrefix"?H[2].sliceSerialize(H[1],!0).length:0,h=G,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),g(G)}function g(G){return G===h?(l++,t.consume(G),g):l<3?n(G):(t.exit("codeFencedFenceSequence"),Tt(G)?Bt(t,E,"whitespace")(G):E(G))}function E(G){return G===null||$e(G)?(t.exit("codeFencedFence"),r.interrupt?e(G):t.check(_S,k,q)(G)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),T(G))}function T(G){return G===null||$e(G)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),E(G)):Tt(G)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Bt(t,b,"whitespace")(G)):G===96&&G===h?n(G):(t.consume(G),T)}function b(G){return G===null||$e(G)?E(G):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),N(G))}function N(G){return G===null||$e(G)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),E(G)):G===96&&G===h?n(G):(t.consume(G),N)}function k(G){return t.attempt(s,q,U)(G)}function U(G){return t.enter("lineEnding"),t.consume(G),t.exit("lineEnding"),M}function M(G){return o>0&&Tt(G)?Bt(t,Y,"linePrefix",o+1)(G):Y(G)}function Y(G){return G===null||$e(G)?t.check(_S,k,q)(G):(t.enter("codeFlowValue"),K(G))}function K(G){return G===null||$e(G)?(t.exit("codeFlowValue"),Y(G)):(t.consume(G),K)}function q(G){return t.exit("codeFenced"),e(G)}function te(G,H,C){let I=0;return B;function B(Q){return G.enter("lineEnding"),G.consume(Q),G.exit("lineEnding"),P}function P(Q){return G.enter("codeFencedFence"),Tt(Q)?Bt(G,V,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Q):V(Q)}function V(Q){return Q===h?(G.enter("codeFencedFenceSequence"),w(Q)):C(Q)}function w(Q){return Q===h?(I++,G.consume(Q),w):I>=l?(G.exit("codeFencedFenceSequence"),Tt(Q)?Bt(G,D,"whitespace")(Q):D(Q)):C(Q)}function D(Q){return Q===null||$e(Q)?(G.exit("codeFencedFence"),H(Q)):C(Q)}}}function mV(t,e,n){const r=this;return s;function s(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),o)}function o(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}const sy={name:"codeIndented",tokenize:gV},pV={partial:!0,tokenize:yV};function gV(t,e,n){const r=this;return s;function s(f){return t.enter("codeIndented"),Bt(t,o,"linePrefix",5)(f)}function o(f){const g=r.events[r.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?l(f):n(f)}function l(f){return f===null?d(f):$e(f)?t.attempt(pV,l,d)(f):(t.enter("codeFlowValue"),h(f))}function h(f){return f===null||$e(f)?(t.exit("codeFlowValue"),l(f)):(t.consume(f),h)}function d(f){return t.exit("codeIndented"),e(f)}}function yV(t,e,n){const r=this;return s;function s(l){return r.parser.lazy[r.now().line]?n(l):$e(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s):Bt(t,o,"linePrefix",5)(l)}function o(l){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?e(l):$e(l)?s(l):n(l)}}const EV={name:"codeText",previous:TV,resolve:_V,tokenize:bV};function _V(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function TV(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function bV(t,e,n){let r=0,s,o;return l;function l(E){return t.enter("codeText"),t.enter("codeTextSequence"),h(E)}function h(E){return E===96?(t.consume(E),r++,h):(t.exit("codeTextSequence"),d(E))}function d(E){return E===null?n(E):E===32?(t.enter("space"),t.consume(E),t.exit("space"),d):E===96?(o=t.enter("codeTextSequence"),s=0,g(E)):$e(E)?(t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),d):(t.enter("codeTextData"),f(E))}function f(E){return E===null||E===32||E===96||$e(E)?(t.exit("codeTextData"),d(E)):(t.consume(E),f)}function g(E){return E===96?(t.consume(E),s++,g):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(E)):(o.type="codeTextData",f(E))}}class vV{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&Gc(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Gc(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Gc(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Gc(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Gc(this.left,n.reverse())}}}function Gc(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function wI(t){const e={};let n=-1,r,s,o,l,h,d,f;const g=new vV(t);for(;++n<g.length;){for(;n in e;)n=e[n];if(r=g.get(n),n&&r[1].type==="chunkFlow"&&g.get(n-1)[1].type==="listItemPrefix"&&(d=r[1]._tokenizer.events,o=0,o<d.length&&d[o][1].type==="lineEndingBlank"&&(o+=2),o<d.length&&d[o][1].type==="content"))for(;++o<d.length&&d[o][1].type!=="content";)d[o][1].type==="chunkText"&&(d[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,AV(g,n)),n=e[n],f=!0);else if(r[1]._container){for(o=n,s=void 0;o--;)if(l=g.get(o),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(s&&(g.get(s)[1].type="lineEndingBlank"),l[1].type="lineEnding",s=o);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;s&&(r[1].end={...g.get(s)[1].start},h=g.slice(s,n),h.unshift(r),g.splice(s,n-s+1,h))}}return ns(t,0,Number.POSITIVE_INFINITY,g.slice(0)),!f}function AV(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const o=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const h=l.events,d=[],f={};let g,E,T=-1,b=n,N=0,k=0;const U=[k];for(;b;){for(;t.get(++s)[1]!==b;);o.push(s),b._tokenizer||(g=r.sliceStream(b),b.next||g.push(null),E&&l.defineSkip(b.start),b._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(g),b._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),E=b,b=b.next}for(b=n;++T<h.length;)h[T][0]==="exit"&&h[T-1][0]==="enter"&&h[T][1].type===h[T-1][1].type&&h[T][1].start.line!==h[T][1].end.line&&(k=T+1,U.push(k),b._tokenizer=void 0,b.previous=void 0,b=b.next);for(l.events=[],b?(b._tokenizer=void 0,b.previous=void 0):U.pop(),T=U.length;T--;){const M=h.slice(U[T],U[T+1]),Y=o.pop();d.push([Y,Y+M.length-1]),t.splice(Y,2,M)}for(d.reverse(),T=-1;++T<d.length;)f[N+d[T][0]]=N+d[T][1],N+=d[T][1]-d[T][0]-1;return f}const SV={resolve:wV,tokenize:CV},xV={partial:!0,tokenize:NV};function wV(t){return wI(t),t}function CV(t,e){let n;return r;function r(h){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(h)}function s(h){return h===null?o(h):$e(h)?t.check(xV,l,o)(h):(t.consume(h),s)}function o(h){return t.exit("chunkContent"),t.exit("content"),e(h)}function l(h){return t.consume(h),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function NV(t,e,n){const r=this;return s;function s(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),Bt(t,o,"linePrefix")}function o(l){if(l===null||$e(l))return n(l);const h=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?e(l):t.interrupt(r.parser.constructs.flow,n,e)(l)}}function CI(t,e,n,r,s,o,l,h,d){const f=d||Number.POSITIVE_INFINITY;let g=0;return E;function E(M){return M===60?(t.enter(r),t.enter(s),t.enter(o),t.consume(M),t.exit(o),T):M===null||M===32||M===41||hE(M)?n(M):(t.enter(r),t.enter(l),t.enter(h),t.enter("chunkString",{contentType:"string"}),k(M))}function T(M){return M===62?(t.enter(o),t.consume(M),t.exit(o),t.exit(s),t.exit(r),e):(t.enter(h),t.enter("chunkString",{contentType:"string"}),b(M))}function b(M){return M===62?(t.exit("chunkString"),t.exit(h),T(M)):M===null||M===60||$e(M)?n(M):(t.consume(M),M===92?N:b)}function N(M){return M===60||M===62||M===92?(t.consume(M),b):b(M)}function k(M){return!g&&(M===null||M===41||Er(M))?(t.exit("chunkString"),t.exit(h),t.exit(l),t.exit(r),e(M)):g<f&&M===40?(t.consume(M),g++,k):M===41?(t.consume(M),g--,k):M===null||M===32||M===40||hE(M)?n(M):(t.consume(M),M===92?U:k)}function U(M){return M===40||M===41||M===92?(t.consume(M),k):k(M)}}function NI(t,e,n,r,s,o){const l=this;let h=0,d;return f;function f(b){return t.enter(r),t.enter(s),t.consume(b),t.exit(s),t.enter(o),g}function g(b){return h>999||b===null||b===91||b===93&&!d||b===94&&!h&&"_hiddenFootnoteSupport"in l.parser.constructs?n(b):b===93?(t.exit(o),t.enter(s),t.consume(b),t.exit(s),t.exit(r),e):$e(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),g):(t.enter("chunkString",{contentType:"string"}),E(b))}function E(b){return b===null||b===91||b===93||$e(b)||h++>999?(t.exit("chunkString"),g(b)):(t.consume(b),d||(d=!Tt(b)),b===92?T:E)}function T(b){return b===91||b===92||b===93?(t.consume(b),h++,E):E(b)}}function II(t,e,n,r,s,o){let l;return h;function h(T){return T===34||T===39||T===40?(t.enter(r),t.enter(s),t.consume(T),t.exit(s),l=T===40?41:T,d):n(T)}function d(T){return T===l?(t.enter(s),t.consume(T),t.exit(s),t.exit(r),e):(t.enter(o),f(T))}function f(T){return T===l?(t.exit(o),d(l)):T===null?n(T):$e(T)?(t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),Bt(t,f,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),g(T))}function g(T){return T===l||T===null||$e(T)?(t.exit("chunkString"),f(T)):(t.consume(T),T===92?E:g)}function E(T){return T===l||T===92?(t.consume(T),g):g(T)}}function dh(t,e){let n;return r;function r(s){return $e(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):Tt(s)?Bt(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const IV={name:"definition",tokenize:kV},RV={partial:!0,tokenize:DV};function kV(t,e,n){const r=this;let s;return o;function o(b){return t.enter("definition"),l(b)}function l(b){return NI.call(r,t,h,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(b)}function h(b){return s=ol(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),b===58?(t.enter("definitionMarker"),t.consume(b),t.exit("definitionMarker"),d):n(b)}function d(b){return Er(b)?dh(t,f)(b):f(b)}function f(b){return CI(t,g,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(b)}function g(b){return t.attempt(RV,E,E)(b)}function E(b){return Tt(b)?Bt(t,T,"whitespace")(b):T(b)}function T(b){return b===null||$e(b)?(t.exit("definition"),r.parser.defined.push(s),e(b)):n(b)}}function DV(t,e,n){return r;function r(h){return Er(h)?dh(t,s)(h):n(h)}function s(h){return II(t,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(h)}function o(h){return Tt(h)?Bt(t,l,"whitespace")(h):l(h)}function l(h){return h===null||$e(h)?e(h):n(h)}}const OV={name:"hardBreakEscape",tokenize:LV};function LV(t,e,n){return r;function r(o){return t.enter("hardBreakEscape"),t.consume(o),s}function s(o){return $e(o)?(t.exit("hardBreakEscape"),e(o)):n(o)}}const MV={name:"headingAtx",resolve:PV,tokenize:BV};function PV(t,e){let n=t.length-2,r=3,s,o;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},o={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},ns(t,r,n-r+1,[["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e]])),t}function BV(t,e,n){let r=0;return s;function s(g){return t.enter("atxHeading"),o(g)}function o(g){return t.enter("atxHeadingSequence"),l(g)}function l(g){return g===35&&r++<6?(t.consume(g),l):g===null||Er(g)?(t.exit("atxHeadingSequence"),h(g)):n(g)}function h(g){return g===35?(t.enter("atxHeadingSequence"),d(g)):g===null||$e(g)?(t.exit("atxHeading"),e(g)):Tt(g)?Bt(t,h,"whitespace")(g):(t.enter("atxHeadingText"),f(g))}function d(g){return g===35?(t.consume(g),d):(t.exit("atxHeadingSequence"),h(g))}function f(g){return g===null||g===35||Er(g)?(t.exit("atxHeadingText"),h(g)):(t.consume(g),f)}}const UV=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],bS=["pre","script","style","textarea"],HV={concrete:!0,name:"htmlFlow",resolveTo:zV,tokenize:jV},VV={partial:!0,tokenize:YV},FV={partial:!0,tokenize:qV};function zV(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function jV(t,e,n){const r=this;let s,o,l,h,d;return f;function f(O){return g(O)}function g(O){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(O),E}function E(O){return O===33?(t.consume(O),T):O===47?(t.consume(O),o=!0,k):O===63?(t.consume(O),s=3,r.interrupt?e:A):Ki(O)?(t.consume(O),l=String.fromCharCode(O),U):n(O)}function T(O){return O===45?(t.consume(O),s=2,b):O===91?(t.consume(O),s=5,h=0,N):Ki(O)?(t.consume(O),s=4,r.interrupt?e:A):n(O)}function b(O){return O===45?(t.consume(O),r.interrupt?e:A):n(O)}function N(O){const ge="CDATA[";return O===ge.charCodeAt(h++)?(t.consume(O),h===ge.length?r.interrupt?e:V:N):n(O)}function k(O){return Ki(O)?(t.consume(O),l=String.fromCharCode(O),U):n(O)}function U(O){if(O===null||O===47||O===62||Er(O)){const ge=O===47,Ie=l.toLowerCase();return!ge&&!o&&bS.includes(Ie)?(s=1,r.interrupt?e(O):V(O)):UV.includes(l.toLowerCase())?(s=6,ge?(t.consume(O),M):r.interrupt?e(O):V(O)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(O):o?Y(O):K(O))}return O===45||Pr(O)?(t.consume(O),l+=String.fromCharCode(O),U):n(O)}function M(O){return O===62?(t.consume(O),r.interrupt?e:V):n(O)}function Y(O){return Tt(O)?(t.consume(O),Y):B(O)}function K(O){return O===47?(t.consume(O),B):O===58||O===95||Ki(O)?(t.consume(O),q):Tt(O)?(t.consume(O),K):B(O)}function q(O){return O===45||O===46||O===58||O===95||Pr(O)?(t.consume(O),q):te(O)}function te(O){return O===61?(t.consume(O),G):Tt(O)?(t.consume(O),te):K(O)}function G(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(t.consume(O),d=O,H):Tt(O)?(t.consume(O),G):C(O)}function H(O){return O===d?(t.consume(O),d=null,I):O===null||$e(O)?n(O):(t.consume(O),H)}function C(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||Er(O)?te(O):(t.consume(O),C)}function I(O){return O===47||O===62||Tt(O)?K(O):n(O)}function B(O){return O===62?(t.consume(O),P):n(O)}function P(O){return O===null||$e(O)?V(O):Tt(O)?(t.consume(O),P):n(O)}function V(O){return O===45&&s===2?(t.consume(O),z):O===60&&s===1?(t.consume(O),Z):O===62&&s===4?(t.consume(O),J):O===63&&s===3?(t.consume(O),A):O===93&&s===5?(t.consume(O),ne):$e(O)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(VV,ae,w)(O)):O===null||$e(O)?(t.exit("htmlFlowData"),w(O)):(t.consume(O),V)}function w(O){return t.check(FV,D,ae)(O)}function D(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),Q}function Q(O){return O===null||$e(O)?w(O):(t.enter("htmlFlowData"),V(O))}function z(O){return O===45?(t.consume(O),A):V(O)}function Z(O){return O===47?(t.consume(O),l="",se):V(O)}function se(O){if(O===62){const ge=l.toLowerCase();return bS.includes(ge)?(t.consume(O),J):V(O)}return Ki(O)&&l.length<8?(t.consume(O),l+=String.fromCharCode(O),se):V(O)}function ne(O){return O===93?(t.consume(O),A):V(O)}function A(O){return O===62?(t.consume(O),J):O===45&&s===2?(t.consume(O),A):V(O)}function J(O){return O===null||$e(O)?(t.exit("htmlFlowData"),ae(O)):(t.consume(O),J)}function ae(O){return t.exit("htmlFlow"),e(O)}}function qV(t,e,n){const r=this;return s;function s(l){return $e(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),o):n(l)}function o(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}function YV(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(vm,e,n)}}const GV={name:"htmlText",tokenize:$V};function $V(t,e,n){const r=this;let s,o,l;return h;function h(A){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(A),d}function d(A){return A===33?(t.consume(A),f):A===47?(t.consume(A),te):A===63?(t.consume(A),K):Ki(A)?(t.consume(A),C):n(A)}function f(A){return A===45?(t.consume(A),g):A===91?(t.consume(A),o=0,N):Ki(A)?(t.consume(A),Y):n(A)}function g(A){return A===45?(t.consume(A),b):n(A)}function E(A){return A===null?n(A):A===45?(t.consume(A),T):$e(A)?(l=E,Z(A)):(t.consume(A),E)}function T(A){return A===45?(t.consume(A),b):E(A)}function b(A){return A===62?z(A):A===45?T(A):E(A)}function N(A){const J="CDATA[";return A===J.charCodeAt(o++)?(t.consume(A),o===J.length?k:N):n(A)}function k(A){return A===null?n(A):A===93?(t.consume(A),U):$e(A)?(l=k,Z(A)):(t.consume(A),k)}function U(A){return A===93?(t.consume(A),M):k(A)}function M(A){return A===62?z(A):A===93?(t.consume(A),M):k(A)}function Y(A){return A===null||A===62?z(A):$e(A)?(l=Y,Z(A)):(t.consume(A),Y)}function K(A){return A===null?n(A):A===63?(t.consume(A),q):$e(A)?(l=K,Z(A)):(t.consume(A),K)}function q(A){return A===62?z(A):K(A)}function te(A){return Ki(A)?(t.consume(A),G):n(A)}function G(A){return A===45||Pr(A)?(t.consume(A),G):H(A)}function H(A){return $e(A)?(l=H,Z(A)):Tt(A)?(t.consume(A),H):z(A)}function C(A){return A===45||Pr(A)?(t.consume(A),C):A===47||A===62||Er(A)?I(A):n(A)}function I(A){return A===47?(t.consume(A),z):A===58||A===95||Ki(A)?(t.consume(A),B):$e(A)?(l=I,Z(A)):Tt(A)?(t.consume(A),I):z(A)}function B(A){return A===45||A===46||A===58||A===95||Pr(A)?(t.consume(A),B):P(A)}function P(A){return A===61?(t.consume(A),V):$e(A)?(l=P,Z(A)):Tt(A)?(t.consume(A),P):I(A)}function V(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(t.consume(A),s=A,w):$e(A)?(l=V,Z(A)):Tt(A)?(t.consume(A),V):(t.consume(A),D)}function w(A){return A===s?(t.consume(A),s=void 0,Q):A===null?n(A):$e(A)?(l=w,Z(A)):(t.consume(A),w)}function D(A){return A===null||A===34||A===39||A===60||A===61||A===96?n(A):A===47||A===62||Er(A)?I(A):(t.consume(A),D)}function Q(A){return A===47||A===62||Er(A)?I(A):n(A)}function z(A){return A===62?(t.consume(A),t.exit("htmlTextData"),t.exit("htmlText"),e):n(A)}function Z(A){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),se}function se(A){return Tt(A)?Bt(t,ne,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):ne(A)}function ne(A){return t.enter("htmlTextData"),l(A)}}const Q1={name:"labelEnd",resolveAll:WV,resolveTo:ZV,tokenize:JV},KV={tokenize:eF},QV={tokenize:tF},XV={tokenize:nF};function WV(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&ns(t,0,t.length,n),t}function ZV(t,e){let n=t.length,r=0,s,o,l,h;for(;n--;)if(s=t[n][1],o){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(o=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(l=n);const d={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},f={type:"label",start:{...t[o][1].start},end:{...t[l][1].end}},g={type:"labelText",start:{...t[o+r+2][1].end},end:{...t[l-2][1].start}};return h=[["enter",d,e],["enter",f,e]],h=si(h,t.slice(o+1,o+r+3)),h=si(h,[["enter",g,e]]),h=si(h,K1(e.parser.constructs.insideSpan.null,t.slice(o+r+4,l-3),e)),h=si(h,[["exit",g,e],t[l-2],t[l-1],["exit",f,e]]),h=si(h,t.slice(l+1)),h=si(h,[["exit",d,e]]),ns(t,o,t.length,h),t}function JV(t,e,n){const r=this;let s=r.events.length,o,l;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){o=r.events[s][1];break}return h;function h(T){return o?o._inactive?E(T):(l=r.parser.defined.includes(ol(r.sliceSerialize({start:o.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(T),t.exit("labelMarker"),t.exit("labelEnd"),d):n(T)}function d(T){return T===40?t.attempt(KV,g,l?g:E)(T):T===91?t.attempt(QV,g,l?f:E)(T):l?g(T):E(T)}function f(T){return t.attempt(XV,g,E)(T)}function g(T){return e(T)}function E(T){return o._balanced=!0,n(T)}}function eF(t,e,n){return r;function r(E){return t.enter("resource"),t.enter("resourceMarker"),t.consume(E),t.exit("resourceMarker"),s}function s(E){return Er(E)?dh(t,o)(E):o(E)}function o(E){return E===41?g(E):CI(t,l,h,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(E)}function l(E){return Er(E)?dh(t,d)(E):g(E)}function h(E){return n(E)}function d(E){return E===34||E===39||E===40?II(t,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(E):g(E)}function f(E){return Er(E)?dh(t,g)(E):g(E)}function g(E){return E===41?(t.enter("resourceMarker"),t.consume(E),t.exit("resourceMarker"),t.exit("resource"),e):n(E)}}function tF(t,e,n){const r=this;return s;function s(h){return NI.call(r,t,o,l,"reference","referenceMarker","referenceString")(h)}function o(h){return r.parser.defined.includes(ol(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(h):n(h)}function l(h){return n(h)}}function nF(t,e,n){return r;function r(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),s}function s(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),e):n(o)}}const rF={name:"labelStartImage",resolveAll:Q1.resolveAll,tokenize:iF};function iF(t,e,n){const r=this;return s;function s(h){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(h),t.exit("labelImageMarker"),o}function o(h){return h===91?(t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelImage"),l):n(h)}function l(h){return h===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(h):e(h)}}const sF={name:"labelStartLink",resolveAll:Q1.resolveAll,tokenize:aF};function aF(t,e,n){const r=this;return s;function s(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),o}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const ay={name:"lineEnding",tokenize:oF};function oF(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Bt(t,e,"linePrefix")}}const s0={name:"thematicBreak",tokenize:uF};function uF(t,e,n){let r=0,s;return o;function o(f){return t.enter("thematicBreak"),l(f)}function l(f){return s=f,h(f)}function h(f){return f===s?(t.enter("thematicBreakSequence"),d(f)):r>=3&&(f===null||$e(f))?(t.exit("thematicBreak"),e(f)):n(f)}function d(f){return f===s?(t.consume(f),r++,d):(t.exit("thematicBreakSequence"),Tt(f)?Bt(t,h,"whitespace")(f):h(f))}}const dr={continuation:{tokenize:dF},exit:mF,name:"list",tokenize:hF},lF={partial:!0,tokenize:pF},cF={partial:!0,tokenize:fF};function hF(t,e,n){const r=this,s=r.events[r.events.length-1];let o=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,l=0;return h;function h(b){const N=r.containerState.type||(b===42||b===43||b===45?"listUnordered":"listOrdered");if(N==="listUnordered"?!r.containerState.marker||b===r.containerState.marker:dE(b)){if(r.containerState.type||(r.containerState.type=N,t.enter(N,{_container:!0})),N==="listUnordered")return t.enter("listItemPrefix"),b===42||b===45?t.check(s0,n,f)(b):f(b);if(!r.interrupt||b===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),d(b)}return n(b)}function d(b){return dE(b)&&++l<10?(t.consume(b),d):(!r.interrupt||l<2)&&(r.containerState.marker?b===r.containerState.marker:b===41||b===46)?(t.exit("listItemValue"),f(b)):n(b)}function f(b){return t.enter("listItemMarker"),t.consume(b),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||b,t.check(vm,r.interrupt?n:g,t.attempt(lF,T,E))}function g(b){return r.containerState.initialBlankLine=!0,o++,T(b)}function E(b){return Tt(b)?(t.enter("listItemPrefixWhitespace"),t.consume(b),t.exit("listItemPrefixWhitespace"),T):n(b)}function T(b){return r.containerState.size=o+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(b)}}function dF(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(vm,s,o);function s(h){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Bt(t,e,"listItemIndent",r.containerState.size+1)(h)}function o(h){return r.containerState.furtherBlankLines||!Tt(h)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(h)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(cF,e,l)(h))}function l(h){return r.containerState._closeFlow=!0,r.interrupt=void 0,Bt(t,t.attempt(dr,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(h)}}function fF(t,e,n){const r=this;return Bt(t,s,"listItemIndent",r.containerState.size+1);function s(o){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(o):n(o)}}function mF(t){t.exit(this.containerState.type)}function pF(t,e,n){const r=this;return Bt(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(o){const l=r.events[r.events.length-1];return!Tt(o)&&l&&l[1].type==="listItemPrefixWhitespace"?e(o):n(o)}}const vS={name:"setextUnderline",resolveTo:gF,tokenize:yF};function gF(t,e){let n=t.length,r,s,o;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!o&&t[n][1].type==="definition"&&(o=n);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",o?(t.splice(s,0,["enter",l,e]),t.splice(o+1,0,["exit",t[r][1],e]),t[r][1].end={...t[o][1].end}):t[r][1]=l,t.push(["exit",l,e]),t}function yF(t,e,n){const r=this;let s;return o;function o(f){let g=r.events.length,E;for(;g--;)if(r.events[g][1].type!=="lineEnding"&&r.events[g][1].type!=="linePrefix"&&r.events[g][1].type!=="content"){E=r.events[g][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||E)?(t.enter("setextHeadingLine"),s=f,l(f)):n(f)}function l(f){return t.enter("setextHeadingLineSequence"),h(f)}function h(f){return f===s?(t.consume(f),h):(t.exit("setextHeadingLineSequence"),Tt(f)?Bt(t,d,"lineSuffix")(f):d(f))}function d(f){return f===null||$e(f)?(t.exit("setextHeadingLine"),e(f)):n(f)}}const EF={tokenize:_F};function _F(t){const e=this,n=t.attempt(vm,r,t.attempt(this.parser.constructs.flowInitial,s,Bt(t,t.attempt(this.parser.constructs.flow,s,t.attempt(SV,s)),"linePrefix")));return n;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const TF={resolveAll:kI()},bF=RI("string"),vF=RI("text");function RI(t){return{resolveAll:kI(t==="text"?AF:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],o=n.attempt(s,l,h);return l;function l(g){return f(g)?o(g):h(g)}function h(g){if(g===null){n.consume(g);return}return n.enter("data"),n.consume(g),d}function d(g){return f(g)?(n.exit("data"),o(g)):(n.consume(g),d)}function f(g){if(g===null)return!0;const E=s[g];let T=-1;if(E)for(;++T<E.length;){const b=E[T];if(!b.previous||b.previous.call(r,r.previous))return!0}return!1}}}function kI(t){return e;function e(n,r){let s=-1,o;for(;++s<=n.length;)o===void 0?n[s]&&n[s][1].type==="data"&&(o=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==o+2&&(n[o][1].end=n[s-1][1].end,n.splice(o+2,s-o-2),s=o+2),o=void 0);return t?t(n,r):n}}function AF(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let o=s.length,l=-1,h=0,d;for(;o--;){const f=s[o];if(typeof f=="string"){for(l=f.length;f.charCodeAt(l-1)===32;)h++,l--;if(l)break;l=-1}else if(f===-2)d=!0,h++;else if(f!==-1){o++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(h=0),h){const f={type:n===t.length||d||h<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?l:r.start._bufferIndex+l,_index:r.start._index+o,line:r.end.line,column:r.end.column-h,offset:r.end.offset-h},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(t.splice(n,0,["enter",f,e],["exit",f,e]),n+=2)}n++}return t}const SF={42:dr,43:dr,45:dr,48:dr,49:dr,50:dr,51:dr,52:dr,53:dr,54:dr,55:dr,56:dr,57:dr,62:AI},xF={91:IV},wF={[-2]:sy,[-1]:sy,32:sy},CF={35:MV,42:s0,45:[vS,s0],60:HV,61:vS,95:s0,96:TS,126:TS},NF={38:xI,92:SI},IF={[-5]:ay,[-4]:ay,[-3]:ay,33:rF,38:xI,42:fE,60:[sV,GV],91:sF,92:[OV,SI],93:Q1,95:fE,96:EV},RF={null:[fE,TF]},kF={null:[42,95]},DF={null:[]},OF=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:kF,contentInitial:xF,disable:DF,document:SF,flow:CF,flowInitial:wF,insideSpan:RF,string:NF,text:IF},Symbol.toStringTag,{value:"Module"}));function LF(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},o=[];let l=[],h=[];const d={attempt:H(te),check:H(G),consume:Y,enter:K,exit:q,interrupt:H(G,{interrupt:!0})},f={code:null,containerState:{},defineSkip:k,events:[],now:N,parser:t,previous:null,sliceSerialize:T,sliceStream:b,write:E};let g=e.tokenize.call(f,d);return e.resolveAll&&o.push(e),f;function E(P){return l=si(l,P),U(),l[l.length-1]!==null?[]:(C(e,0),f.events=K1(o,f.events,f),f.events)}function T(P,V){return PF(b(P),V)}function b(P){return MF(l,P)}function N(){const{_bufferIndex:P,_index:V,line:w,column:D,offset:Q}=r;return{_bufferIndex:P,_index:V,line:w,column:D,offset:Q}}function k(P){s[P.line]=P.column,B()}function U(){let P;for(;r._index<l.length;){const V=l[r._index];if(typeof V=="string")for(P=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===P&&r._bufferIndex<V.length;)M(V.charCodeAt(r._bufferIndex));else M(V)}}function M(P){g=g(P)}function Y(P){$e(P)?(r.line++,r.column=1,r.offset+=P===-3?2:1,B()):P!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=P}function K(P,V){const w=V||{};return w.type=P,w.start=N(),f.events.push(["enter",w,f]),h.push(w),w}function q(P){const V=h.pop();return V.end=N(),f.events.push(["exit",V,f]),V}function te(P,V){C(P,V.from)}function G(P,V){V.restore()}function H(P,V){return w;function w(D,Q,z){let Z,se,ne,A;return Array.isArray(D)?ae(D):"tokenize"in D?ae([D]):J(D);function J(xe){return Ve;function Ve(Pe){const tt=Pe!==null&&xe[Pe],We=Pe!==null&&xe.null,kt=[...Array.isArray(tt)?tt:tt?[tt]:[],...Array.isArray(We)?We:We?[We]:[]];return ae(kt)(Pe)}}function ae(xe){return Z=xe,se=0,xe.length===0?z:O(xe[se])}function O(xe){return Ve;function Ve(Pe){return A=I(),ne=xe,xe.partial||(f.currentConstruct=xe),xe.name&&f.parser.constructs.disable.null.includes(xe.name)?Ie():xe.tokenize.call(V?Object.assign(Object.create(f),V):f,d,ge,Ie)(Pe)}}function ge(xe){return P(ne,A),Q}function Ie(xe){return A.restore(),++se<Z.length?O(Z[se]):z}}}function C(P,V){P.resolveAll&&!o.includes(P)&&o.push(P),P.resolve&&ns(f.events,V,f.events.length-V,P.resolve(f.events.slice(V),f)),P.resolveTo&&(f.events=P.resolveTo(f.events,f))}function I(){const P=N(),V=f.previous,w=f.currentConstruct,D=f.events.length,Q=Array.from(h);return{from:D,restore:z};function z(){r=P,f.previous=V,f.currentConstruct=w,f.events.length=D,h=Q,B()}}function B(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function MF(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,o=e.end._bufferIndex;let l;if(n===s)l=[t[n].slice(r,o)];else{if(l=t.slice(n,s),r>-1){const h=l[0];typeof h=="string"?l[0]=h.slice(r):l.shift()}o>0&&l.push(t[s].slice(0,o))}return l}function PF(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const o=t[n];let l;if(typeof o=="string")l=o;else switch(o){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&s)continue;l=" ";break}default:l=String.fromCharCode(o)}s=o===-2,r.push(l)}return r.join("")}function BF(t){const r={constructs:qH([OF,...(t||{}).extensions||[]]),content:s(ZH),defined:[],document:s(eV),flow:s(EF),lazy:{},string:s(bF),text:s(vF)};return r;function s(o){return l;function l(h){return LF(r,o,h)}}}function UF(t){for(;!wI(t););return t}const AS=/[\0\t\n\r]/g;function HF(){let t=1,e="",n=!0,r;return s;function s(o,l,h){const d=[];let f,g,E,T,b;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(l||void 0).decode(o)),E=0,e="",n&&(o.charCodeAt(0)===65279&&E++,n=void 0);E<o.length;){if(AS.lastIndex=E,f=AS.exec(o),T=f&&f.index!==void 0?f.index:o.length,b=o.charCodeAt(T),!f){e=o.slice(E);break}if(b===10&&E===T&&r)d.push(-3),r=void 0;else switch(r&&(d.push(-5),r=void 0),E<T&&(d.push(o.slice(E,T)),t+=T-E),b){case 0:{d.push(65533),t++;break}case 9:{for(g=Math.ceil(t/4)*4,d.push(-2);t++<g;)d.push(-1);break}case 10:{d.push(-4),t=1;break}default:r=!0,t=1}E=T+1}return h&&(r&&d.push(-5),e&&d.push(e),d.push(null)),d}}const VF=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function FF(t){return t.replace(VF,zF)}function zF(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),o=s===120||s===88;return vI(n.slice(o?2:1),o?16:10)}return $1(n)||t}const DI={}.hasOwnProperty;function jF(t,e,n){return typeof e!="string"&&(n=e,e=void 0),qF(n)(UF(BF(n).document().write(HF()(t,e,!0))))}function qF(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Xt),autolinkProtocol:I,autolinkEmail:I,atxHeading:o(xt),blockQuote:o(We),characterEscape:I,characterReference:I,codeFenced:o(kt),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:o(kt,l),codeText:o(Kt,l),codeTextData:I,data:I,codeFlowValue:I,definition:o(rn),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:o(Qt),hardBreakEscape:o(xn),hardBreakTrailing:o(xn),htmlFlow:o(Ze,l),htmlFlowData:I,htmlText:o(Ze,l),htmlTextData:I,image:o(Ue),label:l,link:o(Xt),listItem:o(er),listItemValue:T,listOrdered:o(Mn,E),listUnordered:o(Mn),paragraph:o(Fr),reference:O,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:o(xt),strong:o(tr),thematicBreak:o(Tr)},exit:{atxHeading:d(),atxHeadingSequence:te,autolink:d(),autolinkEmail:tt,autolinkProtocol:Pe,blockQuote:d(),characterEscapeValue:B,characterReferenceMarkerHexadecimal:Ie,characterReferenceMarkerNumeric:Ie,characterReferenceValue:xe,characterReference:Ve,codeFenced:d(U),codeFencedFence:k,codeFencedFenceInfo:b,codeFencedFenceMeta:N,codeFlowValue:B,codeIndented:d(M),codeText:d(Q),codeTextData:B,data:B,definition:d(),definitionDestinationString:q,definitionLabelString:Y,definitionTitleString:K,emphasis:d(),hardBreakEscape:d(V),hardBreakTrailing:d(V),htmlFlow:d(w),htmlFlowData:B,htmlText:d(D),htmlTextData:B,image:d(Z),label:ne,labelText:se,lineEnding:P,link:d(z),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:ge,resourceDestinationString:A,resourceTitleString:J,resource:ae,setextHeading:d(C),setextHeadingLineSequence:H,setextHeadingText:G,strong:d(),thematicBreak:d()}};OI(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(de){let _e={type:"root",children:[]};const Oe={stack:[_e],tokenStack:[],config:e,enter:h,exit:f,buffer:l,resume:g,data:n},Be=[];let it=-1;for(;++it<de.length;)if(de[it][1].type==="listOrdered"||de[it][1].type==="listUnordered")if(de[it][0]==="enter")Be.push(it);else{const gt=Be.pop();it=s(de,gt,it)}for(it=-1;++it<de.length;){const gt=e[de[it][0]];DI.call(gt,de[it][1].type)&&gt[de[it][1].type].call(Object.assign({sliceSerialize:de[it][2].sliceSerialize},Oe),de[it][1])}if(Oe.tokenStack.length>0){const gt=Oe.tokenStack[Oe.tokenStack.length-1];(gt[1]||SS).call(Oe,void 0,gt[0])}for(_e.position={start:pa(de.length>0?de[0][1].start:{line:1,column:1,offset:0}),end:pa(de.length>0?de[de.length-2][1].end:{line:1,column:1,offset:0})},it=-1;++it<e.transforms.length;)_e=e.transforms[it](_e)||_e;return _e}function s(de,_e,Oe){let Be=_e-1,it=-1,gt=!1,Dt,Ut,sn,Ft;for(;++Be<=Oe;){const Et=de[Be];switch(Et[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Et[0]==="enter"?it++:it--,Ft=void 0;break}case"lineEndingBlank":{Et[0]==="enter"&&(Dt&&!Ft&&!it&&!sn&&(sn=Be),Ft=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ft=void 0}if(!it&&Et[0]==="enter"&&Et[1].type==="listItemPrefix"||it===-1&&Et[0]==="exit"&&(Et[1].type==="listUnordered"||Et[1].type==="listOrdered")){if(Dt){let Wt=Be;for(Ut=void 0;Wt--;){const En=de[Wt];if(En[1].type==="lineEnding"||En[1].type==="lineEndingBlank"){if(En[0]==="exit")continue;Ut&&(de[Ut][1].type="lineEndingBlank",gt=!0),En[1].type="lineEnding",Ut=Wt}else if(!(En[1].type==="linePrefix"||En[1].type==="blockQuotePrefix"||En[1].type==="blockQuotePrefixWhitespace"||En[1].type==="blockQuoteMarker"||En[1].type==="listItemIndent"))break}sn&&(!Ut||sn<Ut)&&(Dt._spread=!0),Dt.end=Object.assign({},Ut?de[Ut][1].start:Et[1].end),de.splice(Ut||Be,0,["exit",Dt,Et[2]]),Be++,Oe++}if(Et[1].type==="listItemPrefix"){const Wt={type:"listItem",_spread:!1,start:Object.assign({},Et[1].start),end:void 0};Dt=Wt,de.splice(Be,0,["enter",Wt,Et[2]]),Be++,Oe++,sn=void 0,Ft=!0}}}return de[_e][1]._spread=gt,Oe}function o(de,_e){return Oe;function Oe(Be){h.call(this,de(Be),Be),_e&&_e.call(this,Be)}}function l(){this.stack.push({type:"fragment",children:[]})}function h(de,_e,Oe){this.stack[this.stack.length-1].children.push(de),this.stack.push(de),this.tokenStack.push([_e,Oe||void 0]),de.position={start:pa(_e.start),end:void 0}}function d(de){return _e;function _e(Oe){de&&de.call(this,Oe),f.call(this,Oe)}}function f(de,_e){const Oe=this.stack.pop(),Be=this.tokenStack.pop();if(Be)Be[0].type!==de.type&&(_e?_e.call(this,de,Be[0]):(Be[1]||SS).call(this,de,Be[0]));else throw new Error("Cannot close `"+de.type+"` ("+hh({start:de.start,end:de.end})+"): its not open");Oe.position.end=pa(de.end)}function g(){return zH(this.stack.pop())}function E(){this.data.expectingFirstListItemValue=!0}function T(de){if(this.data.expectingFirstListItemValue){const _e=this.stack[this.stack.length-2];_e.start=Number.parseInt(this.sliceSerialize(de),10),this.data.expectingFirstListItemValue=void 0}}function b(){const de=this.resume(),_e=this.stack[this.stack.length-1];_e.lang=de}function N(){const de=this.resume(),_e=this.stack[this.stack.length-1];_e.meta=de}function k(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function U(){const de=this.resume(),_e=this.stack[this.stack.length-1];_e.value=de.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function M(){const de=this.resume(),_e=this.stack[this.stack.length-1];_e.value=de.replace(/(\r?\n|\r)$/g,"")}function Y(de){const _e=this.resume(),Oe=this.stack[this.stack.length-1];Oe.label=_e,Oe.identifier=ol(this.sliceSerialize(de)).toLowerCase()}function K(){const de=this.resume(),_e=this.stack[this.stack.length-1];_e.title=de}function q(){const de=this.resume(),_e=this.stack[this.stack.length-1];_e.url=de}function te(de){const _e=this.stack[this.stack.length-1];if(!_e.depth){const Oe=this.sliceSerialize(de).length;_e.depth=Oe}}function G(){this.data.setextHeadingSlurpLineEnding=!0}function H(de){const _e=this.stack[this.stack.length-1];_e.depth=this.sliceSerialize(de).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function I(de){const Oe=this.stack[this.stack.length-1].children;let Be=Oe[Oe.length-1];(!Be||Be.type!=="text")&&(Be=Pn(),Be.position={start:pa(de.start),end:void 0},Oe.push(Be)),this.stack.push(Be)}function B(de){const _e=this.stack.pop();_e.value+=this.sliceSerialize(de),_e.position.end=pa(de.end)}function P(de){const _e=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Oe=_e.children[_e.children.length-1];Oe.position.end=pa(de.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(_e.type)&&(I.call(this,de),B.call(this,de))}function V(){this.data.atHardBreak=!0}function w(){const de=this.resume(),_e=this.stack[this.stack.length-1];_e.value=de}function D(){const de=this.resume(),_e=this.stack[this.stack.length-1];_e.value=de}function Q(){const de=this.resume(),_e=this.stack[this.stack.length-1];_e.value=de}function z(){const de=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";de.type+="Reference",de.referenceType=_e,delete de.url,delete de.title}else delete de.identifier,delete de.label;this.data.referenceType=void 0}function Z(){const de=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";de.type+="Reference",de.referenceType=_e,delete de.url,delete de.title}else delete de.identifier,delete de.label;this.data.referenceType=void 0}function se(de){const _e=this.sliceSerialize(de),Oe=this.stack[this.stack.length-2];Oe.label=FF(_e),Oe.identifier=ol(_e).toLowerCase()}function ne(){const de=this.stack[this.stack.length-1],_e=this.resume(),Oe=this.stack[this.stack.length-1];if(this.data.inReference=!0,Oe.type==="link"){const Be=de.children;Oe.children=Be}else Oe.alt=_e}function A(){const de=this.resume(),_e=this.stack[this.stack.length-1];_e.url=de}function J(){const de=this.resume(),_e=this.stack[this.stack.length-1];_e.title=de}function ae(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function ge(de){const _e=this.resume(),Oe=this.stack[this.stack.length-1];Oe.label=_e,Oe.identifier=ol(this.sliceSerialize(de)).toLowerCase(),this.data.referenceType="full"}function Ie(de){this.data.characterReferenceType=de.type}function xe(de){const _e=this.sliceSerialize(de),Oe=this.data.characterReferenceType;let Be;Oe?(Be=vI(_e,Oe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Be=$1(_e);const it=this.stack[this.stack.length-1];it.value+=Be}function Ve(de){const _e=this.stack.pop();_e.position.end=pa(de.end)}function Pe(de){B.call(this,de);const _e=this.stack[this.stack.length-1];_e.url=this.sliceSerialize(de)}function tt(de){B.call(this,de);const _e=this.stack[this.stack.length-1];_e.url="mailto:"+this.sliceSerialize(de)}function We(){return{type:"blockquote",children:[]}}function kt(){return{type:"code",lang:null,meta:null,value:""}}function Kt(){return{type:"inlineCode",value:""}}function rn(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Qt(){return{type:"emphasis",children:[]}}function xt(){return{type:"heading",depth:0,children:[]}}function xn(){return{type:"break"}}function Ze(){return{type:"html",value:""}}function Ue(){return{type:"image",title:null,url:"",alt:null}}function Xt(){return{type:"link",title:null,url:"",children:[]}}function Mn(de){return{type:"list",ordered:de.type==="listOrdered",start:null,spread:de._spread,children:[]}}function er(de){return{type:"listItem",spread:de._spread,checked:null,children:[]}}function Fr(){return{type:"paragraph",children:[]}}function tr(){return{type:"strong",children:[]}}function Pn(){return{type:"text",value:""}}function Tr(){return{type:"thematicBreak"}}}function pa(t){return{line:t.line,column:t.column,offset:t.offset}}function OI(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?OI(t,r):YF(t,r)}}function YF(t,e){let n;for(n in e)if(DI.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function SS(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+hh({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+hh({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+hh({start:e.start,end:e.end})+") is still open")}function GF(t){const e=this;e.parser=n;function n(r){return jF(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function $F(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function KF(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function QF(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function XF(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function WF(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function ZF(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=Ol(r.toLowerCase()),o=t.footnoteOrder.indexOf(r);let l,h=t.footnoteCounts.get(r);h===void 0?(h=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=o+1,h+=1,t.footnoteCounts.set(r,h);const d={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(h>1?"-"+h:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,d);const f={type:"element",tagName:"sup",properties:{},children:[d]};return t.patch(e,f),t.applyData(e,f)}function JF(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function ez(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function LI(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),o=s[0];o&&o.type==="text"?o.value="["+o.value:s.unshift({type:"text",value:"["});const l=s[s.length-1];return l&&l.type==="text"?l.value+=r:s.push({type:"text",value:r}),s}function tz(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return LI(t,e);const s={src:Ol(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,o),t.applyData(e,o)}function nz(t,e){const n={src:Ol(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function rz(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function iz(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return LI(t,e);const s={href:Ol(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)}function sz(t,e){const n={href:Ol(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function az(t,e,n){const r=t.all(e),s=n?oz(n):MI(e),o={},l=[];if(typeof e.checked=="boolean"){const g=r[0];let E;g&&g.type==="element"&&g.tagName==="p"?E=g:(E={type:"element",tagName:"p",properties:{},children:[]},r.unshift(E)),E.children.length>0&&E.children.unshift({type:"text",value:" "}),E.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let h=-1;for(;++h<r.length;){const g=r[h];(s||h!==0||g.type!=="element"||g.tagName!=="p")&&l.push({type:"text",value:`
`}),g.type==="element"&&g.tagName==="p"&&!s?l.push(...g.children):l.push(g)}const d=r[r.length-1];d&&(s||d.type!=="element"||d.tagName!=="p")&&l.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:o,children:l};return t.patch(e,f),t.applyData(e,f)}function oz(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=MI(n[r])}return e}function MI(t){const e=t.spread;return e??t.children.length>1}function uz(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const l=r[s];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,o),t.applyData(e,o)}function lz(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function cz(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function hz(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function dz(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],l),s.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},h=ss(e.children[1]),d=bm(e.children[e.children.length-1]);h&&d&&(l.position={start:h,end:d}),s.push(l)}const o={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,o),t.applyData(e,o)}function fz(t,e,n){const r=n?n.children:void 0,o=(r?r.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,h=l?l.length:e.children.length;let d=-1;const f=[];for(;++d<h;){const E=e.children[d],T={},b=l?l[d]:void 0;b&&(T.align=b);let N={type:"element",tagName:o,properties:T,children:[]};E&&(N.children=t.all(E),t.patch(E,N),N=t.applyData(E,N)),f.push(N)}const g={type:"element",tagName:"tr",properties:{},children:t.wrap(f,!0)};return t.patch(e,g),t.applyData(e,g)}function mz(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const xS=9,wS=32;function pz(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const o=[];for(;r;)o.push(CS(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return o.push(CS(e.slice(s),s>0,!1)),o.join("")}function CS(t,e,n){let r=0,s=t.length;if(e){let o=t.codePointAt(r);for(;o===xS||o===wS;)r++,o=t.codePointAt(r)}if(n){let o=t.codePointAt(s-1);for(;o===xS||o===wS;)s--,o=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function gz(t,e){const n={type:"text",value:pz(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function yz(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Ez={blockquote:$F,break:KF,code:QF,delete:XF,emphasis:WF,footnoteReference:ZF,heading:JF,html:ez,imageReference:tz,image:nz,inlineCode:rz,linkReference:iz,link:sz,listItem:az,list:uz,paragraph:lz,root:cz,strong:hz,table:dz,tableCell:mz,tableRow:fz,text:gz,thematicBreak:yz,toml:Ff,yaml:Ff,definition:Ff,footnoteDefinition:Ff};function Ff(){}const PI=-1,Am=0,fh=1,V0=2,X1=3,W1=4,Z1=5,J1=6,BI=7,UI=8,NS=typeof self=="object"?self:globalThis,_z=(t,e)=>{const n=(s,o)=>(t.set(o,s),s),r=s=>{if(t.has(s))return t.get(s);const[o,l]=e[s];switch(o){case Am:case PI:return n(l,s);case fh:{const h=n([],s);for(const d of l)h.push(r(d));return h}case V0:{const h=n({},s);for(const[d,f]of l)h[r(d)]=r(f);return h}case X1:return n(new Date(l),s);case W1:{const{source:h,flags:d}=l;return n(new RegExp(h,d),s)}case Z1:{const h=n(new Map,s);for(const[d,f]of l)h.set(r(d),r(f));return h}case J1:{const h=n(new Set,s);for(const d of l)h.add(r(d));return h}case BI:{const{name:h,message:d}=l;return n(new NS[h](d),s)}case UI:return n(BigInt(l),s);case"BigInt":return n(Object(BigInt(l)),s);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:h}=new Uint8Array(l);return n(new DataView(h),l)}}return n(new NS[o](l),s)};return r},IS=t=>_z(new Map,t)(0),ju="",{toString:Tz}={},{keys:bz}=Object,$c=t=>{const e=typeof t;if(e!=="object"||!t)return[Am,e];const n=Tz.call(t).slice(8,-1);switch(n){case"Array":return[fh,ju];case"Object":return[V0,ju];case"Date":return[X1,ju];case"RegExp":return[W1,ju];case"Map":return[Z1,ju];case"Set":return[J1,ju];case"DataView":return[fh,n]}return n.includes("Array")?[fh,n]:n.includes("Error")?[BI,n]:[V0,n]},zf=([t,e])=>t===Am&&(e==="function"||e==="symbol"),vz=(t,e,n,r)=>{const s=(l,h)=>{const d=r.push(l)-1;return n.set(h,d),d},o=l=>{if(n.has(l))return n.get(l);let[h,d]=$c(l);switch(h){case Am:{let g=l;switch(d){case"bigint":h=UI,g=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+d);g=null;break;case"undefined":return s([PI],l)}return s([h,g],l)}case fh:{if(d){let T=l;return d==="DataView"?T=new Uint8Array(l.buffer):d==="ArrayBuffer"&&(T=new Uint8Array(l)),s([d,[...T]],l)}const g=[],E=s([h,g],l);for(const T of l)g.push(o(T));return E}case V0:{if(d)switch(d){case"BigInt":return s([d,l.toString()],l);case"Boolean":case"Number":case"String":return s([d,l.valueOf()],l)}if(e&&"toJSON"in l)return o(l.toJSON());const g=[],E=s([h,g],l);for(const T of bz(l))(t||!zf($c(l[T])))&&g.push([o(T),o(l[T])]);return E}case X1:return s([h,l.toISOString()],l);case W1:{const{source:g,flags:E}=l;return s([h,{source:g,flags:E}],l)}case Z1:{const g=[],E=s([h,g],l);for(const[T,b]of l)(t||!(zf($c(T))||zf($c(b))))&&g.push([o(T),o(b)]);return E}case J1:{const g=[],E=s([h,g],l);for(const T of l)(t||!zf($c(T)))&&g.push(o(T));return E}}const{message:f}=l;return s([h,{name:d,message:f}],l)};return o},RS=(t,{json:e,lossy:n}={})=>{const r=[];return vz(!(e||n),!!e,new Map,r)(t),r},bl=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?IS(RS(t,e)):structuredClone(t):(t,e)=>IS(RS(t,e));function Az(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Sz(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function xz(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Az,r=t.options.footnoteBackLabel||Sz,s=t.options.footnoteLabel||"Footnotes",o=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},h=[];let d=-1;for(;++d<t.footnoteOrder.length;){const f=t.footnoteById.get(t.footnoteOrder[d]);if(!f)continue;const g=t.all(f),E=String(f.identifier).toUpperCase(),T=Ol(E.toLowerCase());let b=0;const N=[],k=t.footnoteCounts.get(E);for(;k!==void 0&&++b<=k;){N.length>0&&N.push({type:"text",value:" "});let Y=typeof n=="string"?n:n(d,b);typeof Y=="string"&&(Y={type:"text",value:Y}),N.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+T+(b>1?"-"+b:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(d,b),className:["data-footnote-backref"]},children:Array.isArray(Y)?Y:[Y]})}const U=g[g.length-1];if(U&&U.type==="element"&&U.tagName==="p"){const Y=U.children[U.children.length-1];Y&&Y.type==="text"?Y.value+=" ":U.children.push({type:"text",value:" "}),U.children.push(...N)}else g.push(...N);const M={type:"element",tagName:"li",properties:{id:e+"fn-"+T},children:t.wrap(g,!0)};t.patch(f,M),h.push(M)}if(h.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...bl(l),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(h,!0)},{type:"text",value:`
`}]}}const HI=function(t){if(t==null)return Iz;if(typeof t=="function")return Sm(t);if(typeof t=="object")return Array.isArray(t)?wz(t):Cz(t);if(typeof t=="string")return Nz(t);throw new Error("Expected function, string, or object as test")};function wz(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=HI(t[n]);return Sm(r);function r(...s){let o=-1;for(;++o<e.length;)if(e[o].apply(this,s))return!0;return!1}}function Cz(t){const e=t;return Sm(n);function n(r){const s=r;let o;for(o in t)if(s[o]!==e[o])return!1;return!0}}function Nz(t){return Sm(e);function e(n){return n&&n.type===t}}function Sm(t){return e;function e(n,r,s){return!!(Rz(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function Iz(){return!0}function Rz(t){return t!==null&&typeof t=="object"&&"type"in t}const VI=[],kz=!0,kS=!1,Dz="skip";function Oz(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const o=HI(s),l=r?-1:1;h(t,void 0,[])();function h(d,f,g){const E=d&&typeof d=="object"?d:{};if(typeof E.type=="string"){const b=typeof E.tagName=="string"?E.tagName:typeof E.name=="string"?E.name:void 0;Object.defineProperty(T,"name",{value:"node ("+(d.type+(b?"<"+b+">":""))+")"})}return T;function T(){let b=VI,N,k,U;if((!e||o(d,f,g[g.length-1]||void 0))&&(b=Lz(n(d,g)),b[0]===kS))return b;if("children"in d&&d.children){const M=d;if(M.children&&b[0]!==Dz)for(k=(r?M.children.length:-1)+l,U=g.concat(M);k>-1&&k<M.children.length;){const Y=M.children[k];if(N=h(Y,k,U)(),N[0]===kS)return N;k=typeof N[1]=="number"?N[1]:k+l}}return b}}}function Lz(t){return Array.isArray(t)?t:typeof t=="number"?[kz,t]:t==null?VI:[t]}function e_(t,e,n,r){let s,o,l;typeof e=="function"&&typeof n!="function"?(o=void 0,l=e,s=n):(o=e,l=n,s=r),Oz(t,o,h,s);function h(d,f){const g=f[f.length-1],E=g?g.children.indexOf(d):void 0;return l(d,E,g)}}const mE={}.hasOwnProperty,Mz={};function Pz(t,e){const n=e||Mz,r=new Map,s=new Map,o=new Map,l={...Ez,...n.handlers},h={all:f,applyData:Uz,definitionById:r,footnoteById:s,footnoteCounts:o,footnoteOrder:[],handlers:l,one:d,options:n,patch:Bz,wrap:Vz};return e_(t,function(g){if(g.type==="definition"||g.type==="footnoteDefinition"){const E=g.type==="definition"?r:s,T=String(g.identifier).toUpperCase();E.has(T)||E.set(T,g)}}),h;function d(g,E){const T=g.type,b=h.handlers[T];if(mE.call(h.handlers,T)&&b)return b(h,g,E);if(h.options.passThrough&&h.options.passThrough.includes(T)){if("children"in g){const{children:k,...U}=g,M=bl(U);return M.children=h.all(g),M}return bl(g)}return(h.options.unknownHandler||Hz)(h,g,E)}function f(g){const E=[];if("children"in g){const T=g.children;let b=-1;for(;++b<T.length;){const N=h.one(T[b],g);if(N){if(b&&T[b-1].type==="break"&&(!Array.isArray(N)&&N.type==="text"&&(N.value=DS(N.value)),!Array.isArray(N)&&N.type==="element")){const k=N.children[0];k&&k.type==="text"&&(k.value=DS(k.value))}Array.isArray(N)?E.push(...N):E.push(N)}}}return E}}function Bz(t,e){t.position&&(e.position=TH(t))}function Uz(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,o=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&o&&Object.assign(n.properties,bl(o)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function Hz(t,e){const n=e.data||{},r="value"in e&&!(mE.call(n,"hProperties")||mE.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Vz(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function DS(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function OS(t,e){const n=Pz(t,e),r=n.one(t,void 0),s=xz(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&o.children.push({type:"text",value:`
`},s),o}function Fz(t,e){return t&&"run"in t?async function(n,r){const s=OS(n,{file:r,...e});await t.run(s,r)}:function(n,r){return OS(n,{file:r,...t||e})}}function LS(t){if(t)throw t}var oy,MS;function zz(){if(MS)return oy;MS=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(f){return typeof Array.isArray=="function"?Array.isArray(f):e.call(f)==="[object Array]"},o=function(f){if(!f||e.call(f)!=="[object Object]")return!1;var g=t.call(f,"constructor"),E=f.constructor&&f.constructor.prototype&&t.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!g&&!E)return!1;var T;for(T in f);return typeof T>"u"||t.call(f,T)},l=function(f,g){n&&g.name==="__proto__"?n(f,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):f[g.name]=g.newValue},h=function(f,g){if(g==="__proto__")if(t.call(f,g)){if(r)return r(f,g).value}else return;return f[g]};return oy=function d(){var f,g,E,T,b,N,k=arguments[0],U=1,M=arguments.length,Y=!1;for(typeof k=="boolean"&&(Y=k,k=arguments[1]||{},U=2),(k==null||typeof k!="object"&&typeof k!="function")&&(k={});U<M;++U)if(f=arguments[U],f!=null)for(g in f)E=h(k,g),T=h(f,g),k!==T&&(Y&&T&&(o(T)||(b=s(T)))?(b?(b=!1,N=E&&s(E)?E:[]):N=E&&o(E)?E:{},l(k,{name:g,newValue:d(Y,N,T)})):typeof T<"u"&&l(k,{name:g,newValue:T}));return k},oy}var jz=zz();const uy=q0(jz);function pE(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function qz(){const t=[],e={run:n,use:r};return e;function n(...s){let o=-1;const l=s.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);h(null,...s);function h(d,...f){const g=t[++o];let E=-1;if(d){l(d);return}for(;++E<s.length;)(f[E]===null||f[E]===void 0)&&(f[E]=s[E]);s=f,g?Yz(g,h)(...f):l(null,...f)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function Yz(t,e){let n;return r;function r(...l){const h=t.length>l.length;let d;h&&l.push(s);try{d=t.apply(this,l)}catch(f){const g=f;if(h&&n)throw g;return s(g)}h||(d&&d.then&&typeof d.then=="function"?d.then(o,s):d instanceof Error?s(d):o(d))}function s(l,...h){n||(n=!0,e(l,...h))}function o(l){s(null,l)}}const qi={basename:Gz,dirname:$z,extname:Kz,join:Qz,sep:"/"};function Gz(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');sd(t);let n=0,r=-1,s=t.length,o;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(o){n=s+1;break}}else r<0&&(o=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let l=-1,h=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(o){n=s+1;break}}else l<0&&(o=!0,l=s+1),h>-1&&(t.codePointAt(s)===e.codePointAt(h--)?h<0&&(r=s):(h=-1,r=l));return n===r?r=l:r<0&&(r=t.length),t.slice(n,r)}function $z(t){if(sd(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Kz(t){sd(t);let e=t.length,n=-1,r=0,s=-1,o=0,l;for(;e--;){const h=t.codePointAt(e);if(h===47){if(l){r=e+1;break}continue}n<0&&(l=!0,n=e+1),h===46?s<0?s=e:o!==1&&(o=1):s>-1&&(o=-1)}return s<0||n<0||o===0||o===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function Qz(...t){let e=-1,n;for(;++e<t.length;)sd(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Xz(n)}function Xz(t){sd(t);const e=t.codePointAt(0)===47;let n=Wz(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Wz(t,e){let n="",r=0,s=-1,o=0,l=-1,h,d;for(;++l<=t.length;){if(l<t.length)h=t.codePointAt(l);else{if(h===47)break;h=47}if(h===47){if(!(s===l-1||o===1))if(s!==l-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(d=n.lastIndexOf("/"),d!==n.length-1){d<0?(n="",r=0):(n=n.slice(0,d),r=n.length-1-n.lastIndexOf("/")),s=l,o=0;continue}}else if(n.length>0){n="",r=0,s=l,o=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,l):n=t.slice(s+1,l),r=l-s-1;s=l,o=0}else h===46&&o>-1?o++:o=-1}return n}function sd(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Zz={cwd:Jz};function Jz(){return"/"}function gE(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function ej(t){if(typeof t=="string")t=new URL(t);else if(!gE(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return tj(t)}function tj(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const ly=["history","path","basename","stem","extname","dirname"];class FI{constructor(e){let n;e?gE(e)?n={path:e}:typeof e=="string"||nj(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Zz.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<ly.length;){const o=ly[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let s;for(s in n)ly.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?qi.basename(this.path):void 0}set basename(e){hy(e,"basename"),cy(e,"basename"),this.path=qi.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?qi.dirname(this.path):void 0}set dirname(e){PS(this.basename,"dirname"),this.path=qi.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?qi.extname(this.path):void 0}set extname(e){if(cy(e,"extname"),PS(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=qi.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){gE(e)&&(e=ej(e)),hy(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?qi.basename(this.path,this.extname):void 0}set stem(e){hy(e,"stem"),cy(e,"stem"),this.path=qi.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new Zn(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function cy(t,e){if(t&&t.includes(qi.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+qi.sep+"`")}function hy(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function PS(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function nj(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const rj=function(t){const r=this.constructor.prototype,s=r[t],o=function(){return s.apply(o,arguments)};return Object.setPrototypeOf(o,r),o},ij={}.hasOwnProperty;class t_ extends rj{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=qz()}copy(){const e=new t_;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(uy(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(my("data",this.frozen),this.namespace[e]=n,this):ij.call(this.namespace,e)&&this.namespace[e]||void 0:e?(my("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=jf(e),r=this.parser||this.Parser;return dy("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),dy("process",this.parser||this.Parser),fy("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(o,l){const h=jf(e),d=r.parse(h);r.run(d,h,function(g,E,T){if(g||!E||!T)return f(g);const b=E,N=r.stringify(b,T);oj(N)?T.value=N:T.result=N,f(g,T)});function f(g,E){g||!E?l(g):o?o(E):n(void 0,E)}}}processSync(e){let n=!1,r;return this.freeze(),dy("processSync",this.parser||this.Parser),fy("processSync",this.compiler||this.Compiler),this.process(e,s),US("processSync","process",n),r;function s(o,l){n=!0,LS(o),r=l}}run(e,n,r){BS(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(l,h){const d=jf(n);s.run(e,d,f);function f(g,E,T){const b=E||e;g?h(g):l?l(b):r(void 0,b,T)}}}runSync(e,n){let r=!1,s;return this.run(e,n,o),US("runSync","run",r),s;function o(l,h){LS(l),s=h,r=!0}}stringify(e,n){this.freeze();const r=jf(n),s=this.compiler||this.Compiler;return fy("stringify",s),BS(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(my("use",this.frozen),e!=null)if(typeof e=="function")d(e,n);else if(typeof e=="object")Array.isArray(e)?h(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(f){if(typeof f=="function")d(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[g,...E]=f;d(g,E)}else l(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function l(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");h(f.plugins),f.settings&&(s.settings=uy(!0,s.settings,f.settings))}function h(f){let g=-1;if(f!=null)if(Array.isArray(f))for(;++g<f.length;){const E=f[g];o(E)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function d(f,g){let E=-1,T=-1;for(;++E<r.length;)if(r[E][0]===f){T=E;break}if(T===-1)r.push([f,...g]);else if(g.length>0){let[b,...N]=g;const k=r[T][1];pE(k)&&pE(b)&&(b=uy(!0,k,b)),r[T]=[f,b,...N]}}}}const sj=new t_().freeze();function dy(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function fy(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function my(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function BS(t){if(!pE(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function US(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function jf(t){return aj(t)?t:new FI(t)}function aj(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function oj(t){return typeof t=="string"||uj(t)}function uj(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const lj="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",HS=[],VS={allowDangerousHtml:!0},cj=/^(https?|ircs?|mailto|xmpp)$/i,hj=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function dj(t){const e=fj(t),n=mj(t);return pj(e.runSync(e.parse(n),n),t)}function fj(t){const e=t.rehypePlugins||HS,n=t.remarkPlugins||HS,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...VS}:VS;return sj().use(GF).use(n).use(Fz,r).use(e)}function mj(t){const e=t.children||"",n=new FI;return typeof e=="string"&&(n.value=e),n}function pj(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,o=e.disallowedElements,l=e.skipHtml,h=e.unwrapDisallowed,d=e.urlTransform||gj;for(const g of hj)Object.hasOwn(e,g.from)&&(""+g.from+(g.to?"use `"+g.to+"` instead":"remove it")+lj+g.id,void 0);return e_(t,f),xH(t,{Fragment:R.Fragment,components:s,ignoreInvalidStyle:!0,jsx:R.jsx,jsxs:R.jsxs,passKeys:!0,passNode:!0});function f(g,E,T){if(g.type==="raw"&&T&&typeof E=="number")return l?T.children.splice(E,1):T.children[E]={type:"text",value:g.value},E;if(g.type==="element"){let b;for(b in iy)if(Object.hasOwn(iy,b)&&Object.hasOwn(g.properties,b)){const N=g.properties[b],k=iy[b];(k===null||k.includes(g.tagName))&&(g.properties[b]=d(String(N||""),b,g))}}if(g.type==="element"){let b=n?!n.includes(g.tagName):o?o.includes(g.tagName):!1;if(!b&&r&&typeof E=="number"&&(b=!r(g,E,T)),b&&T&&typeof E=="number")return h&&g.children?T.children.splice(E,1,...g.children):T.children.splice(E,1),E}}}function gj(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||cj.test(t.slice(0,e))?t:""}const FS=/[#.]/g;function yj(t,e){const n=t||"",r={};let s=0,o,l;for(;s<n.length;){FS.lastIndex=s;const h=FS.exec(n),d=n.slice(s,h?h.index:n.length);d&&(o?o==="#"?r.id=d:Array.isArray(r.className)?r.className.push(d):r.className=[d]:l=d,s+=d.length),h&&(o=h[0],s++)}return{type:"element",tagName:l||e||"div",properties:r,children:[]}}function zI(t,e,n){const r=n?bj(n):void 0;function s(o,l,...h){let d;if(o==null){d={type:"root",children:[]};const f=l;h.unshift(f)}else{d=yj(o,e);const f=d.tagName.toLowerCase(),g=r?r.get(f):void 0;if(d.tagName=g||f,Ej(l))h.unshift(l);else for(const[E,T]of Object.entries(l))_j(t,d.properties,E,T)}for(const f of h)yE(d.children,f);return d.type==="element"&&d.tagName==="template"&&(d.content={type:"root",children:d.children},d.children=[]),d}return s}function Ej(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const r of n){const s=e[r];if(s&&typeof s=="object"){if(!Array.isArray(s))return!0;const o=s;for(const l of o)if(typeof l!="number"&&typeof l!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function _j(t,e,n,r){const s=j1(t,n);let o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?s.spaceSeparated?o=aS(r):s.commaSeparated?o=tS(r):s.commaOrSpaceSeparated?o=aS(tS(r).join(" ")):o=zS(s,s.property,r):Array.isArray(r)?o=[...r]:o=s.property==="style"?Tj(r):String(r);if(Array.isArray(o)){const l=[];for(const h of o)l.push(zS(s,s.property,h));o=l}s.property==="className"&&Array.isArray(e.className)&&(o=e.className.concat(o)),e[s.property]=o}}function yE(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const n of e)yE(t,n);else if(typeof e=="object"&&"type"in e)e.type==="root"?yE(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function zS(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||Uh(n)===Uh(e)))return!0}return n}function Tj(t){const e=[];for(const[n,r]of Object.entries(t))e.push([n,r].join(": "));return e.join("; ")}function bj(t){const e=new Map;for(const n of t)e.set(n.toLowerCase(),n);return e}const vj=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Aj=zI(Tm,"div"),Sj=zI(Dl,"g",vj);function xj(t){const e=String(t),n=[];return{toOffset:s,toPoint:r};function r(o){if(typeof o=="number"&&o>-1&&o<=e.length){let l=0;for(;;){let h=n[l];if(h===void 0){const d=jS(e,n[l-1]);h=d===-1?e.length+1:d+1,n[l]=h}if(h>o)return{line:l+1,column:o-(l>0?n[l-1]:0)+1,offset:o};l++}}}function s(o){if(o&&typeof o.line=="number"&&typeof o.column=="number"&&!Number.isNaN(o.line)&&!Number.isNaN(o.column)){for(;n.length<o.line;){const h=n[n.length-1],d=jS(e,h),f=d===-1?e.length+1:d+1;if(h===f)break;n.push(f)}const l=(o.line>1?n[o.line-2]:0)+o.column-1;if(l<n[o.line-1])return l}}}function jS(t,e){const n=t.indexOf("\r",e),r=t.indexOf(`
`,e);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const Io={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},jI={}.hasOwnProperty,wj=Object.prototype;function Cj(t,e){const n=e||{};return n_({file:n.file||void 0,location:!1,schema:n.space==="svg"?Dl:Tm,verbose:n.verbose||!1},t)}function n_(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},a0(t,r,n),n}case"#document":case"#document-fragment":{const r=e,s="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:qI(t,e.childNodes),data:{quirksMode:s}},t.file&&t.location){const o=String(t.file),l=xj(o),h=l.toPoint(0),d=l.toPoint(o.length);n.position={start:h,end:d}}return n}case"#documentType":{const r=e;return n={type:"doctype"},a0(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},a0(t,r,n),n}default:return n=Nj(t,e),n}}function qI(t,e){let n=-1;const r=[];for(;++n<e.length;){const s=n_(t,e[n]);r.push(s)}return r}function Nj(t,e){const n=t.schema;t.schema=e.namespaceURI===Io.svg?Dl:Tm;let r=-1;const s={};for(;++r<e.attrs.length;){const h=e.attrs[r],d=(h.prefix?h.prefix+":":"")+h.name;jI.call(wj,d)||(s[d]=h.value)}const l=(t.schema.space==="svg"?Sj:Aj)(e.tagName,s,qI(t,e.childNodes));if(a0(t,e,l),l.tagName==="template"){const h=e,d=h.sourceCodeLocation,f=d&&d.startTag&&Wu(d.startTag),g=d&&d.endTag&&Wu(d.endTag),E=n_(t,h.content);f&&g&&t.file&&(E.position={start:f.end,end:g.start}),l.content=E}return t.schema=n,l}function a0(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=Ij(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function Ij(t,e,n){const r=Wu(n);if(e.type==="element"){const s=e.children[e.children.length-1];if(r&&!n.endTag&&s&&s.position&&s.position.end&&(r.end=Object.assign({},s.position.end)),t.verbose){const o={};let l;if(n.attrs)for(l in n.attrs)jI.call(n.attrs,l)&&(o[j1(t.schema,l).property]=Wu(n.attrs[l]));n.startTag;const h=Wu(n.startTag),d=n.endTag?Wu(n.endTag):void 0,f={opening:h};d&&(f.closing=d),f.properties=o,e.data={position:f}}}return r}function Wu(t){const e=qS({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=qS({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function qS(t){return t.line&&t.column?t:void 0}class ad{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}}ad.prototype.property={};ad.prototype.normal={};ad.prototype.space=null;function YI(t,e){const n={},r={};let s=-1;for(;++s<t.length;)Object.assign(n,t[s].property),Object.assign(r,t[s].normal);return new ad(n,r,e)}function EE(t){return t.toLowerCase()}class li{constructor(e,n){this.property=e,this.attribute=n}}li.prototype.space=null;li.prototype.boolean=!1;li.prototype.booleanish=!1;li.prototype.overloadedBoolean=!1;li.prototype.number=!1;li.prototype.commaSeparated=!1;li.prototype.spaceSeparated=!1;li.prototype.commaOrSpaceSeparated=!1;li.prototype.mustUseProperty=!1;li.prototype.defined=!1;let Rj=0;const Xe=Go(),gn=Go(),GI=Go(),Ne=Go(),Pt=Go(),ul=Go(),Or=Go();function Go(){return 2**++Rj}const _E=Object.freeze(Object.defineProperty({__proto__:null,boolean:Xe,booleanish:gn,commaOrSpaceSeparated:Or,commaSeparated:ul,number:Ne,overloadedBoolean:GI,spaceSeparated:Pt},Symbol.toStringTag,{value:"Module"})),py=Object.keys(_E);class r_ extends li{constructor(e,n,r,s){let o=-1;if(super(e,n),YS(this,"space",s),typeof r=="number")for(;++o<py.length;){const l=py[o];YS(this,py[o],(r&_E[l])===_E[l])}}}r_.prototype.defined=!0;function YS(t,e,n){n&&(t[e]=n)}const kj={}.hasOwnProperty;function Ll(t){const e={},n={};let r;for(r in t.properties)if(kj.call(t.properties,r)){const s=t.properties[r],o=new r_(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),e[r]=o,n[EE(r)]=r,n[EE(o.attribute)]=r}return new ad(e,n,t.space)}const $I=Ll({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),KI=Ll({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function QI(t,e){return e in t?t[e]:e}function XI(t,e){return QI(t,e.toLowerCase())}const WI=Ll({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:XI,properties:{xmlns:null,xmlnsXLink:null}}),ZI=Ll({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:gn,ariaAutoComplete:null,ariaBusy:gn,ariaChecked:gn,ariaColCount:Ne,ariaColIndex:Ne,ariaColSpan:Ne,ariaControls:Pt,ariaCurrent:null,ariaDescribedBy:Pt,ariaDetails:null,ariaDisabled:gn,ariaDropEffect:Pt,ariaErrorMessage:null,ariaExpanded:gn,ariaFlowTo:Pt,ariaGrabbed:gn,ariaHasPopup:null,ariaHidden:gn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Pt,ariaLevel:Ne,ariaLive:null,ariaModal:gn,ariaMultiLine:gn,ariaMultiSelectable:gn,ariaOrientation:null,ariaOwns:Pt,ariaPlaceholder:null,ariaPosInSet:Ne,ariaPressed:gn,ariaReadOnly:gn,ariaRelevant:null,ariaRequired:gn,ariaRoleDescription:Pt,ariaRowCount:Ne,ariaRowIndex:Ne,ariaRowSpan:Ne,ariaSelected:gn,ariaSetSize:Ne,ariaSort:null,ariaValueMax:Ne,ariaValueMin:Ne,ariaValueNow:Ne,ariaValueText:null,role:null}}),Dj=Ll({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:XI,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ul,acceptCharset:Pt,accessKey:Pt,action:null,allow:null,allowFullScreen:Xe,allowPaymentRequest:Xe,allowUserMedia:Xe,alt:null,as:null,async:Xe,autoCapitalize:null,autoComplete:Pt,autoFocus:Xe,autoPlay:Xe,blocking:Pt,capture:null,charSet:null,checked:Xe,cite:null,className:Pt,cols:Ne,colSpan:null,content:null,contentEditable:gn,controls:Xe,controlsList:Pt,coords:Ne|ul,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Xe,defer:Xe,dir:null,dirName:null,disabled:Xe,download:GI,draggable:gn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Xe,formTarget:null,headers:Pt,height:Ne,hidden:Xe,high:Ne,href:null,hrefLang:null,htmlFor:Pt,httpEquiv:Pt,id:null,imageSizes:null,imageSrcSet:null,inert:Xe,inputMode:null,integrity:null,is:null,isMap:Xe,itemId:null,itemProp:Pt,itemRef:Pt,itemScope:Xe,itemType:Pt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Xe,low:Ne,manifest:null,max:null,maxLength:Ne,media:null,method:null,min:null,minLength:Ne,multiple:Xe,muted:Xe,name:null,nonce:null,noModule:Xe,noValidate:Xe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Xe,optimum:Ne,pattern:null,ping:Pt,placeholder:null,playsInline:Xe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Xe,referrerPolicy:null,rel:Pt,required:Xe,reversed:Xe,rows:Ne,rowSpan:Ne,sandbox:Pt,scope:null,scoped:Xe,seamless:Xe,selected:Xe,shadowRootClonable:Xe,shadowRootDelegatesFocus:Xe,shadowRootMode:null,shape:null,size:Ne,sizes:null,slot:null,span:Ne,spellCheck:gn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ne,step:null,style:null,tabIndex:Ne,target:null,title:null,translate:null,type:null,typeMustMatch:Xe,useMap:null,value:gn,width:Ne,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Pt,axis:null,background:null,bgColor:null,border:Ne,borderColor:null,bottomMargin:Ne,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Xe,declare:Xe,event:null,face:null,frame:null,frameBorder:null,hSpace:Ne,leftMargin:Ne,link:null,longDesc:null,lowSrc:null,marginHeight:Ne,marginWidth:Ne,noResize:Xe,noHref:Xe,noShade:Xe,noWrap:Xe,object:null,profile:null,prompt:null,rev:null,rightMargin:Ne,rules:null,scheme:null,scrolling:gn,standby:null,summary:null,text:null,topMargin:Ne,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ne,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Xe,disableRemotePlayback:Xe,prefix:null,property:null,results:Ne,security:null,unselectable:null}}),Oj=Ll({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:QI,properties:{about:Or,accentHeight:Ne,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ne,amplitude:Ne,arabicForm:null,ascent:Ne,attributeName:null,attributeType:null,azimuth:Ne,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ne,by:null,calcMode:null,capHeight:Ne,className:Pt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ne,diffuseConstant:Ne,direction:null,display:null,dur:null,divisor:Ne,dominantBaseline:null,download:Xe,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ne,enableBackground:null,end:null,event:null,exponent:Ne,externalResourcesRequired:null,fill:null,fillOpacity:Ne,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ul,g2:ul,glyphName:ul,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ne,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ne,horizOriginX:Ne,horizOriginY:Ne,id:null,ideographic:Ne,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ne,k:Ne,k1:Ne,k2:Ne,k3:Ne,k4:Ne,kernelMatrix:Or,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ne,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ne,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ne,overlineThickness:Ne,paintOrder:null,panose1:null,path:null,pathLength:Ne,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Pt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ne,pointsAtY:Ne,pointsAtZ:Ne,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Or,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Or,rev:Or,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Or,requiredFeatures:Or,requiredFonts:Or,requiredFormats:Or,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ne,specularExponent:Ne,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ne,strikethroughThickness:Ne,string:null,stroke:null,strokeDashArray:Or,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ne,strokeOpacity:Ne,strokeWidth:null,style:null,surfaceScale:Ne,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Or,tabIndex:Ne,tableValues:null,target:null,targetX:Ne,targetY:Ne,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Or,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ne,underlineThickness:Ne,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ne,values:null,vAlphabetic:Ne,vMathematical:Ne,vectorEffect:null,vHanging:Ne,vIdeographic:Ne,version:null,vertAdvY:Ne,vertOriginX:Ne,vertOriginY:Ne,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ne,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Lj=/^data[-\w.:]+$/i,GS=/-[a-z]/g,Mj=/[A-Z]/g;function Pj(t,e){const n=EE(e);let r=e,s=li;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Lj.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(GS,Uj);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!GS.test(o)){let l=o.replace(Mj,Bj);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}s=r_}return new s(r,e)}function Bj(t){return"-"+t.toLowerCase()}function Uj(t){return t.charAt(1).toUpperCase()}const Hj=YI([KI,$I,WI,ZI,Dj],"html"),JI=YI([KI,$I,WI,ZI,Oj],"svg"),$S={}.hasOwnProperty;function e3(t,e){const n=e||{};function r(s,...o){let l=r.invalid;const h=r.handlers;if(s&&$S.call(s,t)){const d=String(s[t]);l=$S.call(h,d)?h[d]:r.unknown}if(l)return l.call(this,s,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Vj={},Fj={}.hasOwnProperty,t3=e3("type",{handlers:{root:jj,element:Kj,text:Gj,comment:$j,doctype:Yj}});function zj(t,e){const r=(e||Vj).space;return t3(t,r==="svg"?JI:Hj)}function jj(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=i_(t.children,n,e),Ml(t,n),n}function qj(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=i_(t.children,n,e),Ml(t,n),n}function Yj(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Ml(t,e),e}function Gj(t){const e={nodeName:"#text",value:t.value,parentNode:null};return Ml(t,e),e}function $j(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return Ml(t,e),e}function Kj(t,e){const n=e;let r=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=JI);const s=[];let o;if(t.properties){for(o in t.properties)if(o!=="children"&&Fj.call(t.properties,o)){const d=Qj(r,o,t.properties[o]);d&&s.push(d)}}const l=r.space,h={nodeName:t.tagName,tagName:t.tagName,attrs:s,namespaceURI:Io[l],childNodes:[],parentNode:null};return h.childNodes=i_(t.children,h,r),Ml(t,h),t.tagName==="template"&&t.content&&(h.content=qj(t.content,r)),h}function Qj(t,e,n){const r=Pj(t,e);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?oI(n):pI(n));const s={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const o=s.name.indexOf(":");o<0?s.prefix="":(s.name=s.name.slice(o+1),s.prefix=r.attribute.slice(0,o)),s.namespace=Io[r.space]}return s}function i_(t,e,n){let r=-1;const s=[];if(t)for(;++r<t.length;){const o=t3(t[r],n);o.parentNode=e,s.push(o)}return s}function Ml(t,e){const n=t.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Xj=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Wj=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),jt="";var j;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(j||(j={}));const hr={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function n3(t){return t>=55296&&t<=57343}function Zj(t){return t>=56320&&t<=57343}function Jj(t,e){return(t-55296)*1024+9216+e}function r3(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function i3(t){return t>=64976&&t<=65007||Wj.has(t)}var pe;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(pe||(pe={}));const eq=65536;class tq{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=eq,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,n){const{line:r,col:s,offset:o}=this,l=s+n,h=o+n;return{code:e,startLine:r,endLine:r,startCol:l,endCol:l,startOffset:h,endOffset:h}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Zj(n))return this.pos++,this._addGap(),Jj(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,j.EOF;return this._err(pe.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,j.EOF;const r=this.html.charCodeAt(n);return r===j.CARRIAGE_RETURN?j.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,j.EOF;let e=this.html.charCodeAt(this.pos);return e===j.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,j.LINE_FEED):e===j.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,n3(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===j.LINE_FEED||e===j.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){r3(e)?this._err(pe.controlCharacterInInputStream):i3(e)&&this._err(pe.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var ot;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(ot||(ot={}));function s3(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const nq=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),rq=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function iq(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=rq.get(t))!==null&&e!==void 0?e:t}var On;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(On||(On={}));const sq=32;var wa;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(wa||(wa={}));function TE(t){return t>=On.ZERO&&t<=On.NINE}function aq(t){return t>=On.UPPER_A&&t<=On.UPPER_F||t>=On.LOWER_A&&t<=On.LOWER_F}function oq(t){return t>=On.UPPER_A&&t<=On.UPPER_Z||t>=On.LOWER_A&&t<=On.LOWER_Z||TE(t)}function uq(t){return t===On.EQUALS||oq(t)}var kn;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(kn||(kn={}));var Rs;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Rs||(Rs={}));class lq{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=kn.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Rs.Strict}startEntity(e){this.decodeMode=e,this.state=kn.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case kn.EntityStart:return e.charCodeAt(n)===On.NUM?(this.state=kn.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=kn.NamedEntity,this.stateNamedEntity(e,n));case kn.NumericStart:return this.stateNumericStart(e,n);case kn.NumericDecimal:return this.stateNumericDecimal(e,n);case kn.NumericHex:return this.stateNumericHex(e,n);case kn.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|sq)===On.LOWER_X?(this.state=kn.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=kn.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,s){if(n!==r){const o=r-n;this.result=this.result*Math.pow(s,o)+Number.parseInt(e.substr(n,o),s),this.consumed+=o}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(TE(s)||aq(s))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(TE(s))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===On.SEMI)this.consumed+=1;else if(this.decodeMode===Rs.Strict)return 0;return this.emitCodePoint(iq(this.result),this.consumed),this.errors&&(e!==On.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let s=r[this.treeIndex],o=(s&wa.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const l=e.charCodeAt(n);if(this.treeIndex=cq(r,s,this.treeIndex+Math.max(1,o),l),this.treeIndex<0)return this.result===0||this.decodeMode===Rs.Attribute&&(o===0||uq(l))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],o=(s&wa.VALUE_LENGTH)>>14,o!==0){if(l===On.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==Rs.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,s=(r[n]&wa.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[e]&~wa.VALUE_LENGTH:s[e+1],r),n===3&&this.emitCodePoint(s[e+2],r),r}end(){var e;switch(this.state){case kn.NamedEntity:return this.result!==0&&(this.decodeMode!==Rs.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case kn.NumericDecimal:return this.emitNumericEntity(0,2);case kn.NumericHex:return this.emitNumericEntity(0,3);case kn.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case kn.EntityStart:return 0}}}function cq(t,e,n,r){const s=(e&wa.BRANCH_LENGTH)>>7,o=e&wa.JUMP_TABLE;if(s===0)return o!==0&&r===o?n:-1;if(o){const d=r-o;return d<0||d>=s?-1:t[n+d]-1}let l=n,h=l+s-1;for(;l<=h;){const d=l+h>>>1,f=t[d];if(f<r)l=d+1;else if(f>r)h=d-1;else return t[d+s]}return-1}var Se;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(Se||(Se={}));var ko;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(ko||(ko={}));var ai;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(ai||(ai={}));var le;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(le||(le={}));var _;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(_||(_={}));const hq=new Map([[le.A,_.A],[le.ADDRESS,_.ADDRESS],[le.ANNOTATION_XML,_.ANNOTATION_XML],[le.APPLET,_.APPLET],[le.AREA,_.AREA],[le.ARTICLE,_.ARTICLE],[le.ASIDE,_.ASIDE],[le.B,_.B],[le.BASE,_.BASE],[le.BASEFONT,_.BASEFONT],[le.BGSOUND,_.BGSOUND],[le.BIG,_.BIG],[le.BLOCKQUOTE,_.BLOCKQUOTE],[le.BODY,_.BODY],[le.BR,_.BR],[le.BUTTON,_.BUTTON],[le.CAPTION,_.CAPTION],[le.CENTER,_.CENTER],[le.CODE,_.CODE],[le.COL,_.COL],[le.COLGROUP,_.COLGROUP],[le.DD,_.DD],[le.DESC,_.DESC],[le.DETAILS,_.DETAILS],[le.DIALOG,_.DIALOG],[le.DIR,_.DIR],[le.DIV,_.DIV],[le.DL,_.DL],[le.DT,_.DT],[le.EM,_.EM],[le.EMBED,_.EMBED],[le.FIELDSET,_.FIELDSET],[le.FIGCAPTION,_.FIGCAPTION],[le.FIGURE,_.FIGURE],[le.FONT,_.FONT],[le.FOOTER,_.FOOTER],[le.FOREIGN_OBJECT,_.FOREIGN_OBJECT],[le.FORM,_.FORM],[le.FRAME,_.FRAME],[le.FRAMESET,_.FRAMESET],[le.H1,_.H1],[le.H2,_.H2],[le.H3,_.H3],[le.H4,_.H4],[le.H5,_.H5],[le.H6,_.H6],[le.HEAD,_.HEAD],[le.HEADER,_.HEADER],[le.HGROUP,_.HGROUP],[le.HR,_.HR],[le.HTML,_.HTML],[le.I,_.I],[le.IMG,_.IMG],[le.IMAGE,_.IMAGE],[le.INPUT,_.INPUT],[le.IFRAME,_.IFRAME],[le.KEYGEN,_.KEYGEN],[le.LABEL,_.LABEL],[le.LI,_.LI],[le.LINK,_.LINK],[le.LISTING,_.LISTING],[le.MAIN,_.MAIN],[le.MALIGNMARK,_.MALIGNMARK],[le.MARQUEE,_.MARQUEE],[le.MATH,_.MATH],[le.MENU,_.MENU],[le.META,_.META],[le.MGLYPH,_.MGLYPH],[le.MI,_.MI],[le.MO,_.MO],[le.MN,_.MN],[le.MS,_.MS],[le.MTEXT,_.MTEXT],[le.NAV,_.NAV],[le.NOBR,_.NOBR],[le.NOFRAMES,_.NOFRAMES],[le.NOEMBED,_.NOEMBED],[le.NOSCRIPT,_.NOSCRIPT],[le.OBJECT,_.OBJECT],[le.OL,_.OL],[le.OPTGROUP,_.OPTGROUP],[le.OPTION,_.OPTION],[le.P,_.P],[le.PARAM,_.PARAM],[le.PLAINTEXT,_.PLAINTEXT],[le.PRE,_.PRE],[le.RB,_.RB],[le.RP,_.RP],[le.RT,_.RT],[le.RTC,_.RTC],[le.RUBY,_.RUBY],[le.S,_.S],[le.SCRIPT,_.SCRIPT],[le.SEARCH,_.SEARCH],[le.SECTION,_.SECTION],[le.SELECT,_.SELECT],[le.SOURCE,_.SOURCE],[le.SMALL,_.SMALL],[le.SPAN,_.SPAN],[le.STRIKE,_.STRIKE],[le.STRONG,_.STRONG],[le.STYLE,_.STYLE],[le.SUB,_.SUB],[le.SUMMARY,_.SUMMARY],[le.SUP,_.SUP],[le.TABLE,_.TABLE],[le.TBODY,_.TBODY],[le.TEMPLATE,_.TEMPLATE],[le.TEXTAREA,_.TEXTAREA],[le.TFOOT,_.TFOOT],[le.TD,_.TD],[le.TH,_.TH],[le.THEAD,_.THEAD],[le.TITLE,_.TITLE],[le.TR,_.TR],[le.TRACK,_.TRACK],[le.TT,_.TT],[le.U,_.U],[le.UL,_.UL],[le.SVG,_.SVG],[le.VAR,_.VAR],[le.WBR,_.WBR],[le.XMP,_.XMP]]);function Pl(t){var e;return(e=hq.get(t))!==null&&e!==void 0?e:_.UNKNOWN}const we=_,dq={[Se.HTML]:new Set([we.ADDRESS,we.APPLET,we.AREA,we.ARTICLE,we.ASIDE,we.BASE,we.BASEFONT,we.BGSOUND,we.BLOCKQUOTE,we.BODY,we.BR,we.BUTTON,we.CAPTION,we.CENTER,we.COL,we.COLGROUP,we.DD,we.DETAILS,we.DIR,we.DIV,we.DL,we.DT,we.EMBED,we.FIELDSET,we.FIGCAPTION,we.FIGURE,we.FOOTER,we.FORM,we.FRAME,we.FRAMESET,we.H1,we.H2,we.H3,we.H4,we.H5,we.H6,we.HEAD,we.HEADER,we.HGROUP,we.HR,we.HTML,we.IFRAME,we.IMG,we.INPUT,we.LI,we.LINK,we.LISTING,we.MAIN,we.MARQUEE,we.MENU,we.META,we.NAV,we.NOEMBED,we.NOFRAMES,we.NOSCRIPT,we.OBJECT,we.OL,we.P,we.PARAM,we.PLAINTEXT,we.PRE,we.SCRIPT,we.SECTION,we.SELECT,we.SOURCE,we.STYLE,we.SUMMARY,we.TABLE,we.TBODY,we.TD,we.TEMPLATE,we.TEXTAREA,we.TFOOT,we.TH,we.THEAD,we.TITLE,we.TR,we.TRACK,we.UL,we.WBR,we.XMP]),[Se.MATHML]:new Set([we.MI,we.MO,we.MN,we.MS,we.MTEXT,we.ANNOTATION_XML]),[Se.SVG]:new Set([we.TITLE,we.FOREIGN_OBJECT,we.DESC]),[Se.XLINK]:new Set,[Se.XML]:new Set,[Se.XMLNS]:new Set},bE=new Set([we.H1,we.H2,we.H3,we.H4,we.H5,we.H6]);le.STYLE,le.SCRIPT,le.XMP,le.IFRAME,le.NOEMBED,le.NOFRAMES,le.PLAINTEXT;var $;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})($||($={}));const cn={DATA:$.DATA,RCDATA:$.RCDATA,RAWTEXT:$.RAWTEXT,SCRIPT_DATA:$.SCRIPT_DATA,PLAINTEXT:$.PLAINTEXT,CDATA_SECTION:$.CDATA_SECTION};function fq(t){return t>=j.DIGIT_0&&t<=j.DIGIT_9}function ih(t){return t>=j.LATIN_CAPITAL_A&&t<=j.LATIN_CAPITAL_Z}function mq(t){return t>=j.LATIN_SMALL_A&&t<=j.LATIN_SMALL_Z}function ga(t){return mq(t)||ih(t)}function KS(t){return ga(t)||fq(t)}function qf(t){return t+32}function a3(t){return t===j.SPACE||t===j.LINE_FEED||t===j.TABULATION||t===j.FORM_FEED}function QS(t){return a3(t)||t===j.SOLIDUS||t===j.GREATER_THAN_SIGN}function pq(t){return t===j.NULL?pe.nullCharacterReference:t>1114111?pe.characterReferenceOutsideUnicodeRange:n3(t)?pe.surrogateCharacterReference:i3(t)?pe.noncharacterCharacterReference:r3(t)||t===j.CARRIAGE_RETURN?pe.controlCharacterReference:null}class gq{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=$.DATA,this.returnState=$.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new tq(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new lq(nq,(r,s)=>{this.preprocessor.pos=this.entityStartPos+s-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(pe.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(pe.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const s=pq(r);s&&this._err(s,1)}}:void 0)}_err(e,n=0){var r,s;(s=(r=this.handler).onParseError)===null||s===void 0||s.call(r,this.preprocessor.getError(e,n))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,n,r){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||r?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:ot.START_TAG,tagName:"",tagID:_.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:ot.END_TAG,tagName:"",tagID:_.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:ot.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:ot.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const r=this.currentToken;if(s3(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const s=(e=(n=r.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(pe.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=Pl(e.tagName),e.type===ot.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(pe.endTagWithAttributes),e.selfClosing&&this._err(pe.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case ot.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case ot.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case ot.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:ot.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,n)}_emitCodePoint(e){const n=a3(e)?ot.WHITESPACE_CHARACTER:e===j.NULL?ot.NULL_CHARACTER:ot.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(ot.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=$.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Rs.Attribute:Rs.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===$.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===$.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===$.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case $.DATA:{this._stateData(e);break}case $.RCDATA:{this._stateRcdata(e);break}case $.RAWTEXT:{this._stateRawtext(e);break}case $.SCRIPT_DATA:{this._stateScriptData(e);break}case $.PLAINTEXT:{this._statePlaintext(e);break}case $.TAG_OPEN:{this._stateTagOpen(e);break}case $.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case $.TAG_NAME:{this._stateTagName(e);break}case $.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case $.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case $.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case $.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case $.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case $.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case $.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case $.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case $.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case $.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case $.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case $.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case $.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case $.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case $.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case $.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case $.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case $.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case $.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case $.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case $.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case $.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case $.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case $.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case $.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case $.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case $.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case $.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case $.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case $.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case $.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case $.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case $.BOGUS_COMMENT:{this._stateBogusComment(e);break}case $.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case $.COMMENT_START:{this._stateCommentStart(e);break}case $.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case $.COMMENT:{this._stateComment(e);break}case $.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case $.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case $.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case $.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case $.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case $.COMMENT_END:{this._stateCommentEnd(e);break}case $.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case $.DOCTYPE:{this._stateDoctype(e);break}case $.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case $.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case $.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case $.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case $.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case $.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case $.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case $.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case $.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case $.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case $.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case $.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case $.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case $.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case $.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case $.CDATA_SECTION:{this._stateCdataSection(e);break}case $.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case $.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case $.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case $.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case j.LESS_THAN_SIGN:{this.state=$.TAG_OPEN;break}case j.AMPERSAND:{this._startCharacterReference();break}case j.NULL:{this._err(pe.unexpectedNullCharacter),this._emitCodePoint(e);break}case j.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case j.AMPERSAND:{this._startCharacterReference();break}case j.LESS_THAN_SIGN:{this.state=$.RCDATA_LESS_THAN_SIGN;break}case j.NULL:{this._err(pe.unexpectedNullCharacter),this._emitChars(jt);break}case j.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case j.LESS_THAN_SIGN:{this.state=$.RAWTEXT_LESS_THAN_SIGN;break}case j.NULL:{this._err(pe.unexpectedNullCharacter),this._emitChars(jt);break}case j.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case j.LESS_THAN_SIGN:{this.state=$.SCRIPT_DATA_LESS_THAN_SIGN;break}case j.NULL:{this._err(pe.unexpectedNullCharacter),this._emitChars(jt);break}case j.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case j.NULL:{this._err(pe.unexpectedNullCharacter),this._emitChars(jt);break}case j.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(ga(e))this._createStartTagToken(),this.state=$.TAG_NAME,this._stateTagName(e);else switch(e){case j.EXCLAMATION_MARK:{this.state=$.MARKUP_DECLARATION_OPEN;break}case j.SOLIDUS:{this.state=$.END_TAG_OPEN;break}case j.QUESTION_MARK:{this._err(pe.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=$.BOGUS_COMMENT,this._stateBogusComment(e);break}case j.EOF:{this._err(pe.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(pe.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=$.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(ga(e))this._createEndTagToken(),this.state=$.TAG_NAME,this._stateTagName(e);else switch(e){case j.GREATER_THAN_SIGN:{this._err(pe.missingEndTagName),this.state=$.DATA;break}case j.EOF:{this._err(pe.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(pe.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=$.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:{this.state=$.BEFORE_ATTRIBUTE_NAME;break}case j.SOLIDUS:{this.state=$.SELF_CLOSING_START_TAG;break}case j.GREATER_THAN_SIGN:{this.state=$.DATA,this.emitCurrentTagToken();break}case j.NULL:{this._err(pe.unexpectedNullCharacter),n.tagName+=jt;break}case j.EOF:{this._err(pe.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(ih(e)?qf(e):e)}}_stateRcdataLessThanSign(e){e===j.SOLIDUS?this.state=$.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=$.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){ga(e)?(this.state=$.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=$.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=$.BEFORE_ATTRIBUTE_NAME,!1;case j.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=$.SELF_CLOSING_START_TAG,!1;case j.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=$.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=$.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===j.SOLIDUS?this.state=$.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=$.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){ga(e)?(this.state=$.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=$.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=$.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case j.SOLIDUS:{this.state=$.SCRIPT_DATA_END_TAG_OPEN;break}case j.EXCLAMATION_MARK:{this.state=$.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=$.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){ga(e)?(this.state=$.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=$.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=$.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===j.HYPHEN_MINUS?(this.state=$.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=$.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===j.HYPHEN_MINUS?(this.state=$.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=$.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case j.HYPHEN_MINUS:{this.state=$.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case j.LESS_THAN_SIGN:{this.state=$.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case j.NULL:{this._err(pe.unexpectedNullCharacter),this._emitChars(jt);break}case j.EOF:{this._err(pe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case j.HYPHEN_MINUS:{this.state=$.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case j.LESS_THAN_SIGN:{this.state=$.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case j.NULL:{this._err(pe.unexpectedNullCharacter),this.state=$.SCRIPT_DATA_ESCAPED,this._emitChars(jt);break}case j.EOF:{this._err(pe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=$.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case j.HYPHEN_MINUS:{this._emitChars("-");break}case j.LESS_THAN_SIGN:{this.state=$.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case j.GREATER_THAN_SIGN:{this.state=$.SCRIPT_DATA,this._emitChars(">");break}case j.NULL:{this._err(pe.unexpectedNullCharacter),this.state=$.SCRIPT_DATA_ESCAPED,this._emitChars(jt);break}case j.EOF:{this._err(pe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=$.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===j.SOLIDUS?this.state=$.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:ga(e)?(this._emitChars("<"),this.state=$.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=$.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){ga(e)?(this.state=$.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=$.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=$.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(hr.SCRIPT,!1)&&QS(this.preprocessor.peek(hr.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<hr.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=$.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=$.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case j.HYPHEN_MINUS:{this.state=$.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case j.LESS_THAN_SIGN:{this.state=$.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case j.NULL:{this._err(pe.unexpectedNullCharacter),this._emitChars(jt);break}case j.EOF:{this._err(pe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case j.HYPHEN_MINUS:{this.state=$.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case j.LESS_THAN_SIGN:{this.state=$.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case j.NULL:{this._err(pe.unexpectedNullCharacter),this.state=$.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(jt);break}case j.EOF:{this._err(pe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=$.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case j.HYPHEN_MINUS:{this._emitChars("-");break}case j.LESS_THAN_SIGN:{this.state=$.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case j.GREATER_THAN_SIGN:{this.state=$.SCRIPT_DATA,this._emitChars(">");break}case j.NULL:{this._err(pe.unexpectedNullCharacter),this.state=$.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(jt);break}case j.EOF:{this._err(pe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=$.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===j.SOLIDUS?(this.state=$.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=$.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(hr.SCRIPT,!1)&&QS(this.preprocessor.peek(hr.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<hr.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=$.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=$.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:break;case j.SOLIDUS:case j.GREATER_THAN_SIGN:case j.EOF:{this.state=$.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case j.EQUALS_SIGN:{this._err(pe.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=$.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=$.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:case j.SOLIDUS:case j.GREATER_THAN_SIGN:case j.EOF:{this._leaveAttrName(),this.state=$.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case j.EQUALS_SIGN:{this._leaveAttrName(),this.state=$.BEFORE_ATTRIBUTE_VALUE;break}case j.QUOTATION_MARK:case j.APOSTROPHE:case j.LESS_THAN_SIGN:{this._err(pe.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case j.NULL:{this._err(pe.unexpectedNullCharacter),this.currentAttr.name+=jt;break}default:this.currentAttr.name+=String.fromCodePoint(ih(e)?qf(e):e)}}_stateAfterAttributeName(e){switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:break;case j.SOLIDUS:{this.state=$.SELF_CLOSING_START_TAG;break}case j.EQUALS_SIGN:{this.state=$.BEFORE_ATTRIBUTE_VALUE;break}case j.GREATER_THAN_SIGN:{this.state=$.DATA,this.emitCurrentTagToken();break}case j.EOF:{this._err(pe.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=$.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:break;case j.QUOTATION_MARK:{this.state=$.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case j.APOSTROPHE:{this.state=$.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case j.GREATER_THAN_SIGN:{this._err(pe.missingAttributeValue),this.state=$.DATA,this.emitCurrentTagToken();break}default:this.state=$.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case j.QUOTATION_MARK:{this.state=$.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case j.AMPERSAND:{this._startCharacterReference();break}case j.NULL:{this._err(pe.unexpectedNullCharacter),this.currentAttr.value+=jt;break}case j.EOF:{this._err(pe.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case j.APOSTROPHE:{this.state=$.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case j.AMPERSAND:{this._startCharacterReference();break}case j.NULL:{this._err(pe.unexpectedNullCharacter),this.currentAttr.value+=jt;break}case j.EOF:{this._err(pe.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:{this._leaveAttrValue(),this.state=$.BEFORE_ATTRIBUTE_NAME;break}case j.AMPERSAND:{this._startCharacterReference();break}case j.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=$.DATA,this.emitCurrentTagToken();break}case j.NULL:{this._err(pe.unexpectedNullCharacter),this.currentAttr.value+=jt;break}case j.QUOTATION_MARK:case j.APOSTROPHE:case j.LESS_THAN_SIGN:case j.EQUALS_SIGN:case j.GRAVE_ACCENT:{this._err(pe.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case j.EOF:{this._err(pe.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:{this._leaveAttrValue(),this.state=$.BEFORE_ATTRIBUTE_NAME;break}case j.SOLIDUS:{this._leaveAttrValue(),this.state=$.SELF_CLOSING_START_TAG;break}case j.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=$.DATA,this.emitCurrentTagToken();break}case j.EOF:{this._err(pe.eofInTag),this._emitEOFToken();break}default:this._err(pe.missingWhitespaceBetweenAttributes),this.state=$.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case j.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=$.DATA,this.emitCurrentTagToken();break}case j.EOF:{this._err(pe.eofInTag),this._emitEOFToken();break}default:this._err(pe.unexpectedSolidusInTag),this.state=$.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case j.GREATER_THAN_SIGN:{this.state=$.DATA,this.emitCurrentComment(n);break}case j.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case j.NULL:{this._err(pe.unexpectedNullCharacter),n.data+=jt;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(hr.DASH_DASH,!0)?(this._createCommentToken(hr.DASH_DASH.length+1),this.state=$.COMMENT_START):this._consumeSequenceIfMatch(hr.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(hr.DOCTYPE.length+1),this.state=$.DOCTYPE):this._consumeSequenceIfMatch(hr.CDATA_START,!0)?this.inForeignNode?this.state=$.CDATA_SECTION:(this._err(pe.cdataInHtmlContent),this._createCommentToken(hr.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=$.BOGUS_COMMENT):this._ensureHibernation()||(this._err(pe.incorrectlyOpenedComment),this._createCommentToken(2),this.state=$.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case j.HYPHEN_MINUS:{this.state=$.COMMENT_START_DASH;break}case j.GREATER_THAN_SIGN:{this._err(pe.abruptClosingOfEmptyComment),this.state=$.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=$.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case j.HYPHEN_MINUS:{this.state=$.COMMENT_END;break}case j.GREATER_THAN_SIGN:{this._err(pe.abruptClosingOfEmptyComment),this.state=$.DATA,this.emitCurrentComment(n);break}case j.EOF:{this._err(pe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=$.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case j.HYPHEN_MINUS:{this.state=$.COMMENT_END_DASH;break}case j.LESS_THAN_SIGN:{n.data+="<",this.state=$.COMMENT_LESS_THAN_SIGN;break}case j.NULL:{this._err(pe.unexpectedNullCharacter),n.data+=jt;break}case j.EOF:{this._err(pe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case j.EXCLAMATION_MARK:{n.data+="!",this.state=$.COMMENT_LESS_THAN_SIGN_BANG;break}case j.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=$.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===j.HYPHEN_MINUS?this.state=$.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=$.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===j.HYPHEN_MINUS?this.state=$.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=$.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==j.GREATER_THAN_SIGN&&e!==j.EOF&&this._err(pe.nestedComment),this.state=$.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case j.HYPHEN_MINUS:{this.state=$.COMMENT_END;break}case j.EOF:{this._err(pe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=$.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case j.GREATER_THAN_SIGN:{this.state=$.DATA,this.emitCurrentComment(n);break}case j.EXCLAMATION_MARK:{this.state=$.COMMENT_END_BANG;break}case j.HYPHEN_MINUS:{n.data+="-";break}case j.EOF:{this._err(pe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=$.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case j.HYPHEN_MINUS:{n.data+="--!",this.state=$.COMMENT_END_DASH;break}case j.GREATER_THAN_SIGN:{this._err(pe.incorrectlyClosedComment),this.state=$.DATA,this.emitCurrentComment(n);break}case j.EOF:{this._err(pe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=$.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:{this.state=$.BEFORE_DOCTYPE_NAME;break}case j.GREATER_THAN_SIGN:{this.state=$.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case j.EOF:{this._err(pe.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(pe.missingWhitespaceBeforeDoctypeName),this.state=$.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(ih(e))this._createDoctypeToken(String.fromCharCode(qf(e))),this.state=$.DOCTYPE_NAME;else switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:break;case j.NULL:{this._err(pe.unexpectedNullCharacter),this._createDoctypeToken(jt),this.state=$.DOCTYPE_NAME;break}case j.GREATER_THAN_SIGN:{this._err(pe.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=$.DATA;break}case j.EOF:{this._err(pe.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=$.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:{this.state=$.AFTER_DOCTYPE_NAME;break}case j.GREATER_THAN_SIGN:{this.state=$.DATA,this.emitCurrentDoctype(n);break}case j.NULL:{this._err(pe.unexpectedNullCharacter),n.name+=jt;break}case j.EOF:{this._err(pe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(ih(e)?qf(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:break;case j.GREATER_THAN_SIGN:{this.state=$.DATA,this.emitCurrentDoctype(n);break}case j.EOF:{this._err(pe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(hr.PUBLIC,!1)?this.state=$.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(hr.SYSTEM,!1)?this.state=$.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(pe.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=$.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:{this.state=$.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case j.QUOTATION_MARK:{this._err(pe.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=$.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case j.APOSTROPHE:{this._err(pe.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=$.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case j.GREATER_THAN_SIGN:{this._err(pe.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=$.DATA,this.emitCurrentDoctype(n);break}case j.EOF:{this._err(pe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(pe.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=$.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:break;case j.QUOTATION_MARK:{n.publicId="",this.state=$.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case j.APOSTROPHE:{n.publicId="",this.state=$.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case j.GREATER_THAN_SIGN:{this._err(pe.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=$.DATA,this.emitCurrentDoctype(n);break}case j.EOF:{this._err(pe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(pe.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=$.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case j.QUOTATION_MARK:{this.state=$.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case j.NULL:{this._err(pe.unexpectedNullCharacter),n.publicId+=jt;break}case j.GREATER_THAN_SIGN:{this._err(pe.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=$.DATA;break}case j.EOF:{this._err(pe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case j.APOSTROPHE:{this.state=$.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case j.NULL:{this._err(pe.unexpectedNullCharacter),n.publicId+=jt;break}case j.GREATER_THAN_SIGN:{this._err(pe.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=$.DATA;break}case j.EOF:{this._err(pe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:{this.state=$.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case j.GREATER_THAN_SIGN:{this.state=$.DATA,this.emitCurrentDoctype(n);break}case j.QUOTATION_MARK:{this._err(pe.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=$.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case j.APOSTROPHE:{this._err(pe.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=$.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case j.EOF:{this._err(pe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(pe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=$.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:break;case j.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=$.DATA;break}case j.QUOTATION_MARK:{n.systemId="",this.state=$.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case j.APOSTROPHE:{n.systemId="",this.state=$.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case j.EOF:{this._err(pe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(pe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=$.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:{this.state=$.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case j.QUOTATION_MARK:{this._err(pe.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=$.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case j.APOSTROPHE:{this._err(pe.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=$.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case j.GREATER_THAN_SIGN:{this._err(pe.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=$.DATA,this.emitCurrentDoctype(n);break}case j.EOF:{this._err(pe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(pe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=$.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:break;case j.QUOTATION_MARK:{n.systemId="",this.state=$.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case j.APOSTROPHE:{n.systemId="",this.state=$.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case j.GREATER_THAN_SIGN:{this._err(pe.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=$.DATA,this.emitCurrentDoctype(n);break}case j.EOF:{this._err(pe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(pe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=$.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case j.QUOTATION_MARK:{this.state=$.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case j.NULL:{this._err(pe.unexpectedNullCharacter),n.systemId+=jt;break}case j.GREATER_THAN_SIGN:{this._err(pe.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=$.DATA;break}case j.EOF:{this._err(pe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case j.APOSTROPHE:{this.state=$.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case j.NULL:{this._err(pe.unexpectedNullCharacter),n.systemId+=jt;break}case j.GREATER_THAN_SIGN:{this._err(pe.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=$.DATA;break}case j.EOF:{this._err(pe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case j.SPACE:case j.LINE_FEED:case j.TABULATION:case j.FORM_FEED:break;case j.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=$.DATA;break}case j.EOF:{this._err(pe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(pe.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=$.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case j.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=$.DATA;break}case j.NULL:{this._err(pe.unexpectedNullCharacter);break}case j.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case j.RIGHT_SQUARE_BRACKET:{this.state=$.CDATA_SECTION_BRACKET;break}case j.EOF:{this._err(pe.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===j.RIGHT_SQUARE_BRACKET?this.state=$.CDATA_SECTION_END:(this._emitChars("]"),this.state=$.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case j.GREATER_THAN_SIGN:{this.state=$.DATA;break}case j.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=$.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(j.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&KS(this.preprocessor.peek(1))?$.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){KS(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===j.SEMICOLON&&this._err(pe.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const o3=new Set([_.DD,_.DT,_.LI,_.OPTGROUP,_.OPTION,_.P,_.RB,_.RP,_.RT,_.RTC]),XS=new Set([...o3,_.CAPTION,_.COLGROUP,_.TBODY,_.TD,_.TFOOT,_.TH,_.THEAD,_.TR]),F0=new Set([_.APPLET,_.CAPTION,_.HTML,_.MARQUEE,_.OBJECT,_.TABLE,_.TD,_.TEMPLATE,_.TH]),yq=new Set([...F0,_.OL,_.UL]),Eq=new Set([...F0,_.BUTTON]),WS=new Set([_.ANNOTATION_XML,_.MI,_.MN,_.MO,_.MS,_.MTEXT]),ZS=new Set([_.DESC,_.FOREIGN_OBJECT,_.TITLE]),_q=new Set([_.TR,_.TEMPLATE,_.HTML]),Tq=new Set([_.TBODY,_.TFOOT,_.THEAD,_.TEMPLATE,_.HTML]),bq=new Set([_.TABLE,_.TEMPLATE,_.HTML]),vq=new Set([_.TD,_.TH]);class Aq{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=_.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===_.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Se.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(e,n,r){const s=this._indexOf(e)+1;this.items.splice(s,0,n),this.tagIDs.splice(s,0,r),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Se.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(Math.max(n,0))}popUntilPopped(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(bE,Se.HTML)}popUntilTableCellPopped(){this.popUntilPopped(vq,Se.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(bq,Se.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Tq,Se.HTML)}clearBackToTableRowContext(){this.clearBackTo(_q,Se.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===_.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===_.HTML}hasInDynamicScope(e,n){for(let r=this.stackTop;r>=0;r--){const s=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case Se.HTML:{if(s===e)return!0;if(n.has(s))return!1;break}case Se.SVG:{if(ZS.has(s))return!1;break}case Se.MATHML:{if(WS.has(s))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,F0)}hasInListItemScope(e){return this.hasInDynamicScope(e,yq)}hasInButtonScope(e){return this.hasInDynamicScope(e,Eq)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case Se.HTML:{if(bE.has(n))return!0;if(F0.has(n))return!1;break}case Se.SVG:{if(ZS.has(n))return!1;break}case Se.MATHML:{if(WS.has(n))return!1;break}}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===Se.HTML)switch(this.tagIDs[n]){case e:return!0;case _.TABLE:case _.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===Se.HTML)switch(this.tagIDs[e]){case _.TBODY:case _.THEAD:case _.TFOOT:return!0;case _.TABLE:case _.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===Se.HTML)switch(this.tagIDs[n]){case e:return!0;case _.OPTION:case _.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&o3.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&XS.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&XS.has(this.currentTagId);)this.pop()}}const gy=3;var $i;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})($i||($i={}));const JS={type:$i.Marker};class Sq{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const r=[],s=n.length,o=this.treeAdapter.getTagName(e),l=this.treeAdapter.getNamespaceURI(e);for(let h=0;h<this.entries.length;h++){const d=this.entries[h];if(d.type===$i.Marker)break;const{element:f}=d;if(this.treeAdapter.getTagName(f)===o&&this.treeAdapter.getNamespaceURI(f)===l){const g=this.treeAdapter.getAttrList(f);g.length===s&&r.push({idx:h,attrs:g})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<gy)return;const n=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,n);if(r.length<gy)return;const s=new Map(n.map(l=>[l.name,l.value]));let o=0;for(let l=0;l<r.length;l++){const h=r[l];h.attrs.every(d=>s.get(d.name)===d.value)&&(o+=1,o>=gy&&this.entries.splice(h.idx,1))}}insertMarker(){this.entries.unshift(JS)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:$i.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:$i.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(JS);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const n=this.entries.find(r=>r.type===$i.Marker||this.treeAdapter.getTagName(r.element)===e);return n&&n.type===$i.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===$i.Element&&n.element===e)}}const ya={createDocument(){return{nodeName:"#document",mode:ai.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,r){const s=t.childNodes.find(o=>o.nodeName==="#documentType");if(s)s.name=e,s.publicId=n,s.systemId=r;else{const o={nodeName:"#documentType",name:e,publicId:n,systemId:r,parentNode:null};ya.appendChild(t,o)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(ya.isTextNode(n)){n.value+=e;return}}ya.appendChild(t,ya.createTextNode(e))},insertTextBefore(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&ya.isTextNode(r)?r.value+=e:ya.insertBefore(t,ya.createTextNode(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)n.has(e[r].name)||t.attrs.push(e[r])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},u3="html",xq="about:legacy-compat",wq="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",l3=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Cq=[...l3,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Nq=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),c3=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Iq=[...c3,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function ex(t,e){return e.some(n=>t.startsWith(n))}function Rq(t){return t.name===u3&&t.publicId===null&&(t.systemId===null||t.systemId===xq)}function kq(t){if(t.name!==u3)return ai.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===wq)return ai.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),Nq.has(n))return ai.QUIRKS;let r=e===null?Cq:l3;if(ex(n,r))return ai.QUIRKS;if(r=e===null?c3:Iq,ex(n,r))return ai.LIMITED_QUIRKS}return ai.NO_QUIRKS}const tx={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Dq="definitionurl",Oq="definitionURL",Lq=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),Mq=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Se.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Se.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Se.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Se.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Se.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Se.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Se.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:Se.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Se.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Se.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Se.XMLNS}]]),Pq=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),Bq=new Set([_.B,_.BIG,_.BLOCKQUOTE,_.BODY,_.BR,_.CENTER,_.CODE,_.DD,_.DIV,_.DL,_.DT,_.EM,_.EMBED,_.H1,_.H2,_.H3,_.H4,_.H5,_.H6,_.HEAD,_.HR,_.I,_.IMG,_.LI,_.LISTING,_.MENU,_.META,_.NOBR,_.OL,_.P,_.PRE,_.RUBY,_.S,_.SMALL,_.SPAN,_.STRONG,_.STRIKE,_.SUB,_.SUP,_.TABLE,_.TT,_.U,_.UL,_.VAR]);function Uq(t){const e=t.tagID;return e===_.FONT&&t.attrs.some(({name:r})=>r===ko.COLOR||r===ko.SIZE||r===ko.FACE)||Bq.has(e)}function h3(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===Dq){t.attrs[e].name=Oq;break}}function d3(t){for(let e=0;e<t.attrs.length;e++){const n=Lq.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function s_(t){for(let e=0;e<t.attrs.length;e++){const n=Mq.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function Hq(t){const e=Pq.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=Pl(t.tagName))}function Vq(t,e){return e===Se.MATHML&&(t===_.MI||t===_.MO||t===_.MN||t===_.MS||t===_.MTEXT)}function Fq(t,e,n){if(e===Se.MATHML&&t===_.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===ko.ENCODING){const s=n[r].value.toLowerCase();return s===tx.TEXT_HTML||s===tx.APPLICATION_XML}}return e===Se.SVG&&(t===_.FOREIGN_OBJECT||t===_.DESC||t===_.TITLE)}function zq(t,e,n,r){return(!r||r===Se.HTML)&&Fq(t,e,n)||(!r||r===Se.MATHML)&&Vq(t,e)}const jq="hidden",qq=8,Yq=3;var X;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(X||(X={}));const Gq={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},f3=new Set([_.TABLE,_.TBODY,_.TFOOT,_.THEAD,_.TR]),nx={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:ya,onParseError:null};class rx{constructor(e,n,r=null,s=null){this.fragmentContext=r,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=X.INITIAL,this.originalInsertionMode=X.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...nx,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new gq(this.options,this),this.activeFormattingElements=new Sq(this.treeAdapter),this.fragmentContextID=r?Pl(this.treeAdapter.getTagName(r)):_.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Aq(this.document,this.treeAdapter,this)}static parse(e,n){const r=new this(n);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,n){const r={...nx,...n};e??(e=r.treeAdapter.createElement(le.TEMPLATE,Se.HTML,[]));const s=r.treeAdapter.createElement("documentmock",Se.HTML,[]),o=new this(r,s,e);return o.fragmentContextID===_.TEMPLATE&&o.tmplInsertionModeStack.unshift(X.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,r){var s;if(!this.onParseError)return;const o=(s=e.location)!==null&&s!==void 0?s:Gq,l={code:n,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:r?o.startLine:o.endLine,endCol:r?o.startCol:o.endCol,endOffset:r?o.startOffset:o.endOffset};this.onParseError(l)}onItemPush(e,n,r){var s,o;(o=(s=this.treeAdapter).onItemPush)===null||o===void 0||o.call(s,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var r,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(s=(r=this.treeAdapter).onItemPop)===null||s===void 0||s.call(r,e,this.openElements.current),n){let o,l;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,l=this.fragmentContextID):{current:o,currentTagId:l}=this.openElements,this._setContextModes(o,l)}}_setContextModes(e,n){const r=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===Se.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&e!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,Se.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=X.TEXT}switchToPlaintextParsing(){this.insertionMode=X.TEXT,this.originalInsertionMode=X.IN_BODY,this.tokenizer.state=cn.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===le.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Se.HTML))switch(this.fragmentContextID){case _.TITLE:case _.TEXTAREA:{this.tokenizer.state=cn.RCDATA;break}case _.STYLE:case _.XMP:case _.IFRAME:case _.NOEMBED:case _.NOFRAMES:case _.NOSCRIPT:{this.tokenizer.state=cn.RAWTEXT;break}case _.SCRIPT:{this.tokenizer.state=cn.SCRIPT_DATA;break}case _.PLAINTEXT:{this.tokenizer.state=cn.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",s=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,s),e.location){const l=this.treeAdapter.getChildNodes(this.document).find(h=>this.treeAdapter.isDocumentTypeNode(h));l&&this.treeAdapter.setNodeSourceCodeLocation(l,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,n){const r=this.treeAdapter.createElement(e,Se.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,Se.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(le.HTML,Se.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,_.HTML)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,e.chars,r):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const s=this.treeAdapter.getChildNodes(n),o=r?s.lastIndexOf(r):s.length,l=s[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(l)){const{endLine:d,endCol:f,endOffset:g}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(l,{endLine:d,endCol:f,endOffset:g})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(l,e.location)}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const r=n.location,s=this.treeAdapter.getTagName(e),o=n.type===ot.END_TAG&&s===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,o)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,e.tagID===_.SVG&&this.treeAdapter.getTagName(n)===le.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Se.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===_.MGLYPH||e.tagID===_.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,Se.HTML)}_processToken(e){switch(e.type){case ot.CHARACTER:{this.onCharacter(e);break}case ot.NULL_CHARACTER:{this.onNullCharacter(e);break}case ot.COMMENT:{this.onComment(e);break}case ot.DOCTYPE:{this.onDoctype(e);break}case ot.START_TAG:{this._processStartTag(e);break}case ot.END_TAG:{this.onEndTag(e);break}case ot.EOF:{this.onEof(e);break}case ot.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,r){const s=this.treeAdapter.getNamespaceURI(n),o=this.treeAdapter.getAttrList(n);return zq(e,s,o,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(s=>s.type===$i.Marker||this.openElements.contains(s.element)),r=n===-1?e-1:n-1;for(let s=r;s>=0;s--){const o=this.activeFormattingElements.entries[s];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=X.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(_.P),this.openElements.popUntilTagNamePopped(_.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case _.TR:{this.insertionMode=X.IN_ROW;return}case _.TBODY:case _.THEAD:case _.TFOOT:{this.insertionMode=X.IN_TABLE_BODY;return}case _.CAPTION:{this.insertionMode=X.IN_CAPTION;return}case _.COLGROUP:{this.insertionMode=X.IN_COLUMN_GROUP;return}case _.TABLE:{this.insertionMode=X.IN_TABLE;return}case _.BODY:{this.insertionMode=X.IN_BODY;return}case _.FRAMESET:{this.insertionMode=X.IN_FRAMESET;return}case _.SELECT:{this._resetInsertionModeForSelect(e);return}case _.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case _.HTML:{this.insertionMode=this.headElement?X.AFTER_HEAD:X.BEFORE_HEAD;return}case _.TD:case _.TH:{if(e>0){this.insertionMode=X.IN_CELL;return}break}case _.HEAD:{if(e>0){this.insertionMode=X.IN_HEAD;return}break}}this.insertionMode=X.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===_.TEMPLATE)break;if(r===_.TABLE){this.insertionMode=X.IN_SELECT_IN_TABLE;return}}this.insertionMode=X.IN_SELECT}_isElementCausesFosterParenting(e){return f3.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case _.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Se.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case _.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const r=this.treeAdapter.getNamespaceURI(e);return dq[r].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){vG(this,e);return}switch(this.insertionMode){case X.INITIAL:{Kc(this,e);break}case X.BEFORE_HTML:{mh(this,e);break}case X.BEFORE_HEAD:{ph(this,e);break}case X.IN_HEAD:{gh(this,e);break}case X.IN_HEAD_NO_SCRIPT:{yh(this,e);break}case X.AFTER_HEAD:{Eh(this,e);break}case X.IN_BODY:case X.IN_CAPTION:case X.IN_CELL:case X.IN_TEMPLATE:{p3(this,e);break}case X.TEXT:case X.IN_SELECT:case X.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case X.IN_TABLE:case X.IN_TABLE_BODY:case X.IN_ROW:{yy(this,e);break}case X.IN_TABLE_TEXT:{b3(this,e);break}case X.IN_COLUMN_GROUP:{z0(this,e);break}case X.AFTER_BODY:{j0(this,e);break}case X.AFTER_AFTER_BODY:{o0(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){bG(this,e);return}switch(this.insertionMode){case X.INITIAL:{Kc(this,e);break}case X.BEFORE_HTML:{mh(this,e);break}case X.BEFORE_HEAD:{ph(this,e);break}case X.IN_HEAD:{gh(this,e);break}case X.IN_HEAD_NO_SCRIPT:{yh(this,e);break}case X.AFTER_HEAD:{Eh(this,e);break}case X.TEXT:{this._insertCharacters(e);break}case X.IN_TABLE:case X.IN_TABLE_BODY:case X.IN_ROW:{yy(this,e);break}case X.IN_COLUMN_GROUP:{z0(this,e);break}case X.AFTER_BODY:{j0(this,e);break}case X.AFTER_AFTER_BODY:{o0(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){vE(this,e);return}switch(this.insertionMode){case X.INITIAL:case X.BEFORE_HTML:case X.BEFORE_HEAD:case X.IN_HEAD:case X.IN_HEAD_NO_SCRIPT:case X.AFTER_HEAD:case X.IN_BODY:case X.IN_TABLE:case X.IN_CAPTION:case X.IN_COLUMN_GROUP:case X.IN_TABLE_BODY:case X.IN_ROW:case X.IN_CELL:case X.IN_SELECT:case X.IN_SELECT_IN_TABLE:case X.IN_TEMPLATE:case X.IN_FRAMESET:case X.AFTER_FRAMESET:{vE(this,e);break}case X.IN_TABLE_TEXT:{Qc(this,e);break}case X.AFTER_BODY:{Jq(this,e);break}case X.AFTER_AFTER_BODY:case X.AFTER_AFTER_FRAMESET:{eY(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case X.INITIAL:{tY(this,e);break}case X.BEFORE_HEAD:case X.IN_HEAD:case X.IN_HEAD_NO_SCRIPT:case X.AFTER_HEAD:{this._err(e,pe.misplacedDoctype);break}case X.IN_TABLE_TEXT:{Qc(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,pe.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?AG(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case X.INITIAL:{Kc(this,e);break}case X.BEFORE_HTML:{nY(this,e);break}case X.BEFORE_HEAD:{iY(this,e);break}case X.IN_HEAD:{Si(this,e);break}case X.IN_HEAD_NO_SCRIPT:{oY(this,e);break}case X.AFTER_HEAD:{lY(this,e);break}case X.IN_BODY:{Jn(this,e);break}case X.IN_TABLE:{vl(this,e);break}case X.IN_TABLE_TEXT:{Qc(this,e);break}case X.IN_CAPTION:{sG(this,e);break}case X.IN_COLUMN_GROUP:{u_(this,e);break}case X.IN_TABLE_BODY:{Cm(this,e);break}case X.IN_ROW:{Nm(this,e);break}case X.IN_CELL:{uG(this,e);break}case X.IN_SELECT:{S3(this,e);break}case X.IN_SELECT_IN_TABLE:{cG(this,e);break}case X.IN_TEMPLATE:{dG(this,e);break}case X.AFTER_BODY:{mG(this,e);break}case X.IN_FRAMESET:{pG(this,e);break}case X.AFTER_FRAMESET:{yG(this,e);break}case X.AFTER_AFTER_BODY:{_G(this,e);break}case X.AFTER_AFTER_FRAMESET:{TG(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?SG(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case X.INITIAL:{Kc(this,e);break}case X.BEFORE_HTML:{rY(this,e);break}case X.BEFORE_HEAD:{sY(this,e);break}case X.IN_HEAD:{aY(this,e);break}case X.IN_HEAD_NO_SCRIPT:{uY(this,e);break}case X.AFTER_HEAD:{cY(this,e);break}case X.IN_BODY:{wm(this,e);break}case X.TEXT:{QY(this,e);break}case X.IN_TABLE:{Vh(this,e);break}case X.IN_TABLE_TEXT:{Qc(this,e);break}case X.IN_CAPTION:{aG(this,e);break}case X.IN_COLUMN_GROUP:{oG(this,e);break}case X.IN_TABLE_BODY:{AE(this,e);break}case X.IN_ROW:{A3(this,e);break}case X.IN_CELL:{lG(this,e);break}case X.IN_SELECT:{x3(this,e);break}case X.IN_SELECT_IN_TABLE:{hG(this,e);break}case X.IN_TEMPLATE:{fG(this,e);break}case X.AFTER_BODY:{C3(this,e);break}case X.IN_FRAMESET:{gG(this,e);break}case X.AFTER_FRAMESET:{EG(this,e);break}case X.AFTER_AFTER_BODY:{o0(this,e);break}}}onEof(e){switch(this.insertionMode){case X.INITIAL:{Kc(this,e);break}case X.BEFORE_HTML:{mh(this,e);break}case X.BEFORE_HEAD:{ph(this,e);break}case X.IN_HEAD:{gh(this,e);break}case X.IN_HEAD_NO_SCRIPT:{yh(this,e);break}case X.AFTER_HEAD:{Eh(this,e);break}case X.IN_BODY:case X.IN_TABLE:case X.IN_CAPTION:case X.IN_COLUMN_GROUP:case X.IN_TABLE_BODY:case X.IN_ROW:case X.IN_CELL:case X.IN_SELECT:case X.IN_SELECT_IN_TABLE:{_3(this,e);break}case X.TEXT:{XY(this,e);break}case X.IN_TABLE_TEXT:{Qc(this,e);break}case X.IN_TEMPLATE:{w3(this,e);break}case X.AFTER_BODY:case X.IN_FRAMESET:case X.AFTER_FRAMESET:case X.AFTER_AFTER_BODY:case X.AFTER_AFTER_FRAMESET:{o_(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===j.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case X.IN_HEAD:case X.IN_HEAD_NO_SCRIPT:case X.AFTER_HEAD:case X.TEXT:case X.IN_COLUMN_GROUP:case X.IN_SELECT:case X.IN_SELECT_IN_TABLE:case X.IN_FRAMESET:case X.AFTER_FRAMESET:{this._insertCharacters(e);break}case X.IN_BODY:case X.IN_CAPTION:case X.IN_CELL:case X.IN_TEMPLATE:case X.AFTER_BODY:case X.AFTER_AFTER_BODY:case X.AFTER_AFTER_FRAMESET:{m3(this,e);break}case X.IN_TABLE:case X.IN_TABLE_BODY:case X.IN_ROW:{yy(this,e);break}case X.IN_TABLE_TEXT:{T3(this,e);break}}}}function $q(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):E3(t,e),n}function Kq(t,e){let n=null,r=t.openElements.stackTop;for(;r>=0;r--){const s=t.openElements.items[r];if(s===e.element)break;t._isSpecialElement(s,t.openElements.tagIDs[r])&&(n=s)}return n||(t.openElements.shortenToLength(Math.max(r,0)),t.activeFormattingElements.removeEntry(e)),n}function Qq(t,e,n){let r=e,s=t.openElements.getCommonAncestor(e);for(let o=0,l=s;l!==n;o++,l=s){s=t.openElements.getCommonAncestor(l);const h=t.activeFormattingElements.getElementEntry(l),d=h&&o>=Yq;!h||d?(d&&t.activeFormattingElements.removeEntry(h),t.openElements.remove(l)):(l=Xq(t,h),r===e&&(t.activeFormattingElements.bookmark=h),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(l,r),r=l)}return r}function Xq(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function Wq(t,e,n){const r=t.treeAdapter.getTagName(e),s=Pl(r);if(t._isElementCausesFosterParenting(s))t._fosterParentElement(n);else{const o=t.treeAdapter.getNamespaceURI(e);s===_.TEMPLATE&&o===Se.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function Zq(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),{token:s}=n,o=t.treeAdapter.createElement(s.tagName,r,s.attrs);t._adoptNodes(e,o),t.treeAdapter.appendChild(e,o),t.activeFormattingElements.insertElementAfterBookmark(o,s),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,o,s.tagID)}function a_(t,e){for(let n=0;n<qq;n++){const r=$q(t,e);if(!r)break;const s=Kq(t,r);if(!s)break;t.activeFormattingElements.bookmark=r;const o=Qq(t,s,r.element),l=t.openElements.getCommonAncestor(r.element);t.treeAdapter.detachNode(o),l&&Wq(t,l,o),Zq(t,s,r)}}function vE(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function Jq(t,e){t._appendCommentNode(e,t.openElements.items[0])}function eY(t,e){t._appendCommentNode(e,t.document)}function o_(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let r=t.openElements.stackTop;r>=n;r--)t._setEndLocation(t.openElements.items[r],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const r=t.openElements.items[0],s=t.treeAdapter.getNodeSourceCodeLocation(r);if(s&&!s.endTag&&(t._setEndLocation(r,e),t.openElements.stackTop>=1)){const o=t.openElements.items[1],l=t.treeAdapter.getNodeSourceCodeLocation(o);l&&!l.endTag&&t._setEndLocation(o,e)}}}}function tY(t,e){t._setDocumentType(e);const n=e.forceQuirks?ai.QUIRKS:kq(e);Rq(e)||t._err(e,pe.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=X.BEFORE_HTML}function Kc(t,e){t._err(e,pe.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,ai.QUIRKS),t.insertionMode=X.BEFORE_HTML,t._processToken(e)}function nY(t,e){e.tagID===_.HTML?(t._insertElement(e,Se.HTML),t.insertionMode=X.BEFORE_HEAD):mh(t,e)}function rY(t,e){const n=e.tagID;(n===_.HTML||n===_.HEAD||n===_.BODY||n===_.BR)&&mh(t,e)}function mh(t,e){t._insertFakeRootElement(),t.insertionMode=X.BEFORE_HEAD,t._processToken(e)}function iY(t,e){switch(e.tagID){case _.HTML:{Jn(t,e);break}case _.HEAD:{t._insertElement(e,Se.HTML),t.headElement=t.openElements.current,t.insertionMode=X.IN_HEAD;break}default:ph(t,e)}}function sY(t,e){const n=e.tagID;n===_.HEAD||n===_.BODY||n===_.HTML||n===_.BR?ph(t,e):t._err(e,pe.endTagWithoutMatchingOpenElement)}function ph(t,e){t._insertFakeElement(le.HEAD,_.HEAD),t.headElement=t.openElements.current,t.insertionMode=X.IN_HEAD,t._processToken(e)}function Si(t,e){switch(e.tagID){case _.HTML:{Jn(t,e);break}case _.BASE:case _.BASEFONT:case _.BGSOUND:case _.LINK:case _.META:{t._appendElement(e,Se.HTML),e.ackSelfClosing=!0;break}case _.TITLE:{t._switchToTextParsing(e,cn.RCDATA);break}case _.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,cn.RAWTEXT):(t._insertElement(e,Se.HTML),t.insertionMode=X.IN_HEAD_NO_SCRIPT);break}case _.NOFRAMES:case _.STYLE:{t._switchToTextParsing(e,cn.RAWTEXT);break}case _.SCRIPT:{t._switchToTextParsing(e,cn.SCRIPT_DATA);break}case _.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=X.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(X.IN_TEMPLATE);break}case _.HEAD:{t._err(e,pe.misplacedStartTagForHeadElement);break}default:gh(t,e)}}function aY(t,e){switch(e.tagID){case _.HEAD:{t.openElements.pop(),t.insertionMode=X.AFTER_HEAD;break}case _.BODY:case _.BR:case _.HTML:{gh(t,e);break}case _.TEMPLATE:{$o(t,e);break}default:t._err(e,pe.endTagWithoutMatchingOpenElement)}}function $o(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==_.TEMPLATE&&t._err(e,pe.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(_.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,pe.endTagWithoutMatchingOpenElement)}function gh(t,e){t.openElements.pop(),t.insertionMode=X.AFTER_HEAD,t._processToken(e)}function oY(t,e){switch(e.tagID){case _.HTML:{Jn(t,e);break}case _.BASEFONT:case _.BGSOUND:case _.HEAD:case _.LINK:case _.META:case _.NOFRAMES:case _.STYLE:{Si(t,e);break}case _.NOSCRIPT:{t._err(e,pe.nestedNoscriptInHead);break}default:yh(t,e)}}function uY(t,e){switch(e.tagID){case _.NOSCRIPT:{t.openElements.pop(),t.insertionMode=X.IN_HEAD;break}case _.BR:{yh(t,e);break}default:t._err(e,pe.endTagWithoutMatchingOpenElement)}}function yh(t,e){const n=e.type===ot.EOF?pe.openElementsLeftAfterEof:pe.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=X.IN_HEAD,t._processToken(e)}function lY(t,e){switch(e.tagID){case _.HTML:{Jn(t,e);break}case _.BODY:{t._insertElement(e,Se.HTML),t.framesetOk=!1,t.insertionMode=X.IN_BODY;break}case _.FRAMESET:{t._insertElement(e,Se.HTML),t.insertionMode=X.IN_FRAMESET;break}case _.BASE:case _.BASEFONT:case _.BGSOUND:case _.LINK:case _.META:case _.NOFRAMES:case _.SCRIPT:case _.STYLE:case _.TEMPLATE:case _.TITLE:{t._err(e,pe.abandonedHeadElementChild),t.openElements.push(t.headElement,_.HEAD),Si(t,e),t.openElements.remove(t.headElement);break}case _.HEAD:{t._err(e,pe.misplacedStartTagForHeadElement);break}default:Eh(t,e)}}function cY(t,e){switch(e.tagID){case _.BODY:case _.HTML:case _.BR:{Eh(t,e);break}case _.TEMPLATE:{$o(t,e);break}default:t._err(e,pe.endTagWithoutMatchingOpenElement)}}function Eh(t,e){t._insertFakeElement(le.BODY,_.BODY),t.insertionMode=X.IN_BODY,xm(t,e)}function xm(t,e){switch(e.type){case ot.CHARACTER:{p3(t,e);break}case ot.WHITESPACE_CHARACTER:{m3(t,e);break}case ot.COMMENT:{vE(t,e);break}case ot.START_TAG:{Jn(t,e);break}case ot.END_TAG:{wm(t,e);break}case ot.EOF:{_3(t,e);break}}}function m3(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function p3(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function hY(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function dY(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function fY(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,Se.HTML),t.insertionMode=X.IN_FRAMESET)}function mY(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Se.HTML)}function pY(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t.openElements.currentTagId!==void 0&&bE.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,Se.HTML)}function gY(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Se.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function yY(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Se.HTML),n||(t.formElement=t.openElements.current))}function EY(t,e){t.framesetOk=!1;const n=e.tagID;for(let r=t.openElements.stackTop;r>=0;r--){const s=t.openElements.tagIDs[r];if(n===_.LI&&s===_.LI||(n===_.DD||n===_.DT)&&(s===_.DD||s===_.DT)){t.openElements.generateImpliedEndTagsWithExclusion(s),t.openElements.popUntilTagNamePopped(s);break}if(s!==_.ADDRESS&&s!==_.DIV&&s!==_.P&&t._isSpecialElement(t.openElements.items[r],s))break}t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Se.HTML)}function _Y(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Se.HTML),t.tokenizer.state=cn.PLAINTEXT}function TY(t,e){t.openElements.hasInScope(_.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,Se.HTML),t.framesetOk=!1}function bY(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(le.A);n&&(a_(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,Se.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function vY(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Se.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function AY(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(_.NOBR)&&(a_(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,Se.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function SY(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Se.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function xY(t,e){t.treeAdapter.getDocumentMode(t.document)!==ai.QUIRKS&&t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Se.HTML),t.framesetOk=!1,t.insertionMode=X.IN_TABLE}function g3(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Se.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function y3(t){const e=s3(t,ko.TYPE);return e!=null&&e.toLowerCase()===jq}function wY(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Se.HTML),y3(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function CY(t,e){t._appendElement(e,Se.HTML),e.ackSelfClosing=!0}function NY(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._appendElement(e,Se.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function IY(t,e){e.tagName=le.IMG,e.tagID=_.IMG,g3(t,e)}function RY(t,e){t._insertElement(e,Se.HTML),t.skipNextNewLine=!0,t.tokenizer.state=cn.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=X.TEXT}function kY(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,cn.RAWTEXT)}function DY(t,e){t.framesetOk=!1,t._switchToTextParsing(e,cn.RAWTEXT)}function ix(t,e){t._switchToTextParsing(e,cn.RAWTEXT)}function OY(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Se.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===X.IN_TABLE||t.insertionMode===X.IN_CAPTION||t.insertionMode===X.IN_TABLE_BODY||t.insertionMode===X.IN_ROW||t.insertionMode===X.IN_CELL?X.IN_SELECT_IN_TABLE:X.IN_SELECT}function LY(t,e){t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,Se.HTML)}function MY(t,e){t.openElements.hasInScope(_.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,Se.HTML)}function PY(t,e){t.openElements.hasInScope(_.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(_.RTC),t._insertElement(e,Se.HTML)}function BY(t,e){t._reconstructActiveFormattingElements(),h3(e),s_(e),e.selfClosing?t._appendElement(e,Se.MATHML):t._insertElement(e,Se.MATHML),e.ackSelfClosing=!0}function UY(t,e){t._reconstructActiveFormattingElements(),d3(e),s_(e),e.selfClosing?t._appendElement(e,Se.SVG):t._insertElement(e,Se.SVG),e.ackSelfClosing=!0}function sx(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Se.HTML)}function Jn(t,e){switch(e.tagID){case _.I:case _.S:case _.B:case _.U:case _.EM:case _.TT:case _.BIG:case _.CODE:case _.FONT:case _.SMALL:case _.STRIKE:case _.STRONG:{vY(t,e);break}case _.A:{bY(t,e);break}case _.H1:case _.H2:case _.H3:case _.H4:case _.H5:case _.H6:{pY(t,e);break}case _.P:case _.DL:case _.OL:case _.UL:case _.DIV:case _.DIR:case _.NAV:case _.MAIN:case _.MENU:case _.ASIDE:case _.CENTER:case _.FIGURE:case _.FOOTER:case _.HEADER:case _.HGROUP:case _.DIALOG:case _.DETAILS:case _.ADDRESS:case _.ARTICLE:case _.SEARCH:case _.SECTION:case _.SUMMARY:case _.FIELDSET:case _.BLOCKQUOTE:case _.FIGCAPTION:{mY(t,e);break}case _.LI:case _.DD:case _.DT:{EY(t,e);break}case _.BR:case _.IMG:case _.WBR:case _.AREA:case _.EMBED:case _.KEYGEN:{g3(t,e);break}case _.HR:{NY(t,e);break}case _.RB:case _.RTC:{MY(t,e);break}case _.RT:case _.RP:{PY(t,e);break}case _.PRE:case _.LISTING:{gY(t,e);break}case _.XMP:{kY(t,e);break}case _.SVG:{UY(t,e);break}case _.HTML:{hY(t,e);break}case _.BASE:case _.LINK:case _.META:case _.STYLE:case _.TITLE:case _.SCRIPT:case _.BGSOUND:case _.BASEFONT:case _.TEMPLATE:{Si(t,e);break}case _.BODY:{dY(t,e);break}case _.FORM:{yY(t,e);break}case _.NOBR:{AY(t,e);break}case _.MATH:{BY(t,e);break}case _.TABLE:{xY(t,e);break}case _.INPUT:{wY(t,e);break}case _.PARAM:case _.TRACK:case _.SOURCE:{CY(t,e);break}case _.IMAGE:{IY(t,e);break}case _.BUTTON:{TY(t,e);break}case _.APPLET:case _.OBJECT:case _.MARQUEE:{SY(t,e);break}case _.IFRAME:{DY(t,e);break}case _.SELECT:{OY(t,e);break}case _.OPTION:case _.OPTGROUP:{LY(t,e);break}case _.NOEMBED:case _.NOFRAMES:{ix(t,e);break}case _.FRAMESET:{fY(t,e);break}case _.TEXTAREA:{RY(t,e);break}case _.NOSCRIPT:{t.options.scriptingEnabled?ix(t,e):sx(t,e);break}case _.PLAINTEXT:{_Y(t,e);break}case _.COL:case _.TH:case _.TD:case _.TR:case _.HEAD:case _.FRAME:case _.TBODY:case _.TFOOT:case _.THEAD:case _.CAPTION:case _.COLGROUP:break;default:sx(t,e)}}function HY(t,e){if(t.openElements.hasInScope(_.BODY)&&(t.insertionMode=X.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function VY(t,e){t.openElements.hasInScope(_.BODY)&&(t.insertionMode=X.AFTER_BODY,C3(t,e))}function FY(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function zY(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(_.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(_.FORM):n&&t.openElements.remove(n))}function jY(t){t.openElements.hasInButtonScope(_.P)||t._insertFakeElement(le.P,_.P),t._closePElement()}function qY(t){t.openElements.hasInListItemScope(_.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(_.LI),t.openElements.popUntilTagNamePopped(_.LI))}function YY(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function GY(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function $Y(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function KY(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(le.BR,_.BR),t.openElements.pop(),t.framesetOk=!1}function E3(t,e){const n=e.tagName,r=e.tagID;for(let s=t.openElements.stackTop;s>0;s--){const o=t.openElements.items[s],l=t.openElements.tagIDs[s];if(r===l&&(r!==_.UNKNOWN||t.treeAdapter.getTagName(o)===n)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.stackTop>=s&&t.openElements.shortenToLength(s);break}if(t._isSpecialElement(o,l))break}}function wm(t,e){switch(e.tagID){case _.A:case _.B:case _.I:case _.S:case _.U:case _.EM:case _.TT:case _.BIG:case _.CODE:case _.FONT:case _.NOBR:case _.SMALL:case _.STRIKE:case _.STRONG:{a_(t,e);break}case _.P:{jY(t);break}case _.DL:case _.UL:case _.OL:case _.DIR:case _.DIV:case _.NAV:case _.PRE:case _.MAIN:case _.MENU:case _.ASIDE:case _.BUTTON:case _.CENTER:case _.FIGURE:case _.FOOTER:case _.HEADER:case _.HGROUP:case _.DIALOG:case _.ADDRESS:case _.ARTICLE:case _.DETAILS:case _.SEARCH:case _.SECTION:case _.SUMMARY:case _.LISTING:case _.FIELDSET:case _.BLOCKQUOTE:case _.FIGCAPTION:{FY(t,e);break}case _.LI:{qY(t);break}case _.DD:case _.DT:{YY(t,e);break}case _.H1:case _.H2:case _.H3:case _.H4:case _.H5:case _.H6:{GY(t);break}case _.BR:{KY(t);break}case _.BODY:{HY(t,e);break}case _.HTML:{VY(t,e);break}case _.FORM:{zY(t);break}case _.APPLET:case _.OBJECT:case _.MARQUEE:{$Y(t,e);break}case _.TEMPLATE:{$o(t,e);break}default:E3(t,e)}}function _3(t,e){t.tmplInsertionModeStack.length>0?w3(t,e):o_(t,e)}function QY(t,e){var n;e.tagID===_.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function XY(t,e){t._err(e,pe.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function yy(t,e){if(t.openElements.currentTagId!==void 0&&f3.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=X.IN_TABLE_TEXT,e.type){case ot.CHARACTER:{b3(t,e);break}case ot.WHITESPACE_CHARACTER:{T3(t,e);break}}else od(t,e)}function WY(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,Se.HTML),t.insertionMode=X.IN_CAPTION}function ZY(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Se.HTML),t.insertionMode=X.IN_COLUMN_GROUP}function JY(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(le.COLGROUP,_.COLGROUP),t.insertionMode=X.IN_COLUMN_GROUP,u_(t,e)}function eG(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Se.HTML),t.insertionMode=X.IN_TABLE_BODY}function tG(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(le.TBODY,_.TBODY),t.insertionMode=X.IN_TABLE_BODY,Cm(t,e)}function nG(t,e){t.openElements.hasInTableScope(_.TABLE)&&(t.openElements.popUntilTagNamePopped(_.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function rG(t,e){y3(e)?t._appendElement(e,Se.HTML):od(t,e),e.ackSelfClosing=!0}function iG(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,Se.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function vl(t,e){switch(e.tagID){case _.TD:case _.TH:case _.TR:{tG(t,e);break}case _.STYLE:case _.SCRIPT:case _.TEMPLATE:{Si(t,e);break}case _.COL:{JY(t,e);break}case _.FORM:{iG(t,e);break}case _.TABLE:{nG(t,e);break}case _.TBODY:case _.TFOOT:case _.THEAD:{eG(t,e);break}case _.INPUT:{rG(t,e);break}case _.CAPTION:{WY(t,e);break}case _.COLGROUP:{ZY(t,e);break}default:od(t,e)}}function Vh(t,e){switch(e.tagID){case _.TABLE:{t.openElements.hasInTableScope(_.TABLE)&&(t.openElements.popUntilTagNamePopped(_.TABLE),t._resetInsertionMode());break}case _.TEMPLATE:{$o(t,e);break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:case _.TBODY:case _.TD:case _.TFOOT:case _.TH:case _.THEAD:case _.TR:break;default:od(t,e)}}function od(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,xm(t,e),t.fosterParentingEnabled=n}function T3(t,e){t.pendingCharacterTokens.push(e)}function b3(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function Qc(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)od(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const v3=new Set([_.CAPTION,_.COL,_.COLGROUP,_.TBODY,_.TD,_.TFOOT,_.TH,_.THEAD,_.TR]);function sG(t,e){const n=e.tagID;v3.has(n)?t.openElements.hasInTableScope(_.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=X.IN_TABLE,vl(t,e)):Jn(t,e)}function aG(t,e){const n=e.tagID;switch(n){case _.CAPTION:case _.TABLE:{t.openElements.hasInTableScope(_.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=X.IN_TABLE,n===_.TABLE&&Vh(t,e));break}case _.BODY:case _.COL:case _.COLGROUP:case _.HTML:case _.TBODY:case _.TD:case _.TFOOT:case _.TH:case _.THEAD:case _.TR:break;default:wm(t,e)}}function u_(t,e){switch(e.tagID){case _.HTML:{Jn(t,e);break}case _.COL:{t._appendElement(e,Se.HTML),e.ackSelfClosing=!0;break}case _.TEMPLATE:{Si(t,e);break}default:z0(t,e)}}function oG(t,e){switch(e.tagID){case _.COLGROUP:{t.openElements.currentTagId===_.COLGROUP&&(t.openElements.pop(),t.insertionMode=X.IN_TABLE);break}case _.TEMPLATE:{$o(t,e);break}case _.COL:break;default:z0(t,e)}}function z0(t,e){t.openElements.currentTagId===_.COLGROUP&&(t.openElements.pop(),t.insertionMode=X.IN_TABLE,t._processToken(e))}function Cm(t,e){switch(e.tagID){case _.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,Se.HTML),t.insertionMode=X.IN_ROW;break}case _.TH:case _.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(le.TR,_.TR),t.insertionMode=X.IN_ROW,Nm(t,e);break}case _.CAPTION:case _.COL:case _.COLGROUP:case _.TBODY:case _.TFOOT:case _.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=X.IN_TABLE,vl(t,e));break}default:vl(t,e)}}function AE(t,e){const n=e.tagID;switch(e.tagID){case _.TBODY:case _.TFOOT:case _.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=X.IN_TABLE);break}case _.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=X.IN_TABLE,Vh(t,e));break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:case _.TD:case _.TH:case _.TR:break;default:Vh(t,e)}}function Nm(t,e){switch(e.tagID){case _.TH:case _.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,Se.HTML),t.insertionMode=X.IN_CELL,t.activeFormattingElements.insertMarker();break}case _.CAPTION:case _.COL:case _.COLGROUP:case _.TBODY:case _.TFOOT:case _.THEAD:case _.TR:{t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=X.IN_TABLE_BODY,Cm(t,e));break}default:vl(t,e)}}function A3(t,e){switch(e.tagID){case _.TR:{t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=X.IN_TABLE_BODY);break}case _.TABLE:{t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=X.IN_TABLE_BODY,AE(t,e));break}case _.TBODY:case _.TFOOT:case _.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(_.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=X.IN_TABLE_BODY,AE(t,e));break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:case _.TD:case _.TH:break;default:Vh(t,e)}}function uG(t,e){const n=e.tagID;v3.has(n)?(t.openElements.hasInTableScope(_.TD)||t.openElements.hasInTableScope(_.TH))&&(t._closeTableCell(),Nm(t,e)):Jn(t,e)}function lG(t,e){const n=e.tagID;switch(n){case _.TD:case _.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=X.IN_ROW);break}case _.TABLE:case _.TBODY:case _.TFOOT:case _.THEAD:case _.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),A3(t,e));break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:break;default:wm(t,e)}}function S3(t,e){switch(e.tagID){case _.HTML:{Jn(t,e);break}case _.OPTION:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t._insertElement(e,Se.HTML);break}case _.OPTGROUP:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t.openElements.currentTagId===_.OPTGROUP&&t.openElements.pop(),t._insertElement(e,Se.HTML);break}case _.HR:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t.openElements.currentTagId===_.OPTGROUP&&t.openElements.pop(),t._appendElement(e,Se.HTML),e.ackSelfClosing=!0;break}case _.INPUT:case _.KEYGEN:case _.TEXTAREA:case _.SELECT:{t.openElements.hasInSelectScope(_.SELECT)&&(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),e.tagID!==_.SELECT&&t._processStartTag(e));break}case _.SCRIPT:case _.TEMPLATE:{Si(t,e);break}}}function x3(t,e){switch(e.tagID){case _.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===_.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===_.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===_.OPTGROUP&&t.openElements.pop();break}case _.OPTION:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop();break}case _.SELECT:{t.openElements.hasInSelectScope(_.SELECT)&&(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode());break}case _.TEMPLATE:{$o(t,e);break}}}function cG(t,e){const n=e.tagID;n===_.CAPTION||n===_.TABLE||n===_.TBODY||n===_.TFOOT||n===_.THEAD||n===_.TR||n===_.TD||n===_.TH?(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),t._processStartTag(e)):S3(t,e)}function hG(t,e){const n=e.tagID;n===_.CAPTION||n===_.TABLE||n===_.TBODY||n===_.TFOOT||n===_.THEAD||n===_.TR||n===_.TD||n===_.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),t.onEndTag(e)):x3(t,e)}function dG(t,e){switch(e.tagID){case _.BASE:case _.BASEFONT:case _.BGSOUND:case _.LINK:case _.META:case _.NOFRAMES:case _.SCRIPT:case _.STYLE:case _.TEMPLATE:case _.TITLE:{Si(t,e);break}case _.CAPTION:case _.COLGROUP:case _.TBODY:case _.TFOOT:case _.THEAD:{t.tmplInsertionModeStack[0]=X.IN_TABLE,t.insertionMode=X.IN_TABLE,vl(t,e);break}case _.COL:{t.tmplInsertionModeStack[0]=X.IN_COLUMN_GROUP,t.insertionMode=X.IN_COLUMN_GROUP,u_(t,e);break}case _.TR:{t.tmplInsertionModeStack[0]=X.IN_TABLE_BODY,t.insertionMode=X.IN_TABLE_BODY,Cm(t,e);break}case _.TD:case _.TH:{t.tmplInsertionModeStack[0]=X.IN_ROW,t.insertionMode=X.IN_ROW,Nm(t,e);break}default:t.tmplInsertionModeStack[0]=X.IN_BODY,t.insertionMode=X.IN_BODY,Jn(t,e)}}function fG(t,e){e.tagID===_.TEMPLATE&&$o(t,e)}function w3(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(_.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):o_(t,e)}function mG(t,e){e.tagID===_.HTML?Jn(t,e):j0(t,e)}function C3(t,e){var n;if(e.tagID===_.HTML){if(t.fragmentContext||(t.insertionMode=X.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===_.HTML){t._setEndLocation(t.openElements.items[0],e);const r=t.openElements.items[1];r&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&t._setEndLocation(r,e)}}else j0(t,e)}function j0(t,e){t.insertionMode=X.IN_BODY,xm(t,e)}function pG(t,e){switch(e.tagID){case _.HTML:{Jn(t,e);break}case _.FRAMESET:{t._insertElement(e,Se.HTML);break}case _.FRAME:{t._appendElement(e,Se.HTML),e.ackSelfClosing=!0;break}case _.NOFRAMES:{Si(t,e);break}}}function gG(t,e){e.tagID===_.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==_.FRAMESET&&(t.insertionMode=X.AFTER_FRAMESET))}function yG(t,e){switch(e.tagID){case _.HTML:{Jn(t,e);break}case _.NOFRAMES:{Si(t,e);break}}}function EG(t,e){e.tagID===_.HTML&&(t.insertionMode=X.AFTER_AFTER_FRAMESET)}function _G(t,e){e.tagID===_.HTML?Jn(t,e):o0(t,e)}function o0(t,e){t.insertionMode=X.IN_BODY,xm(t,e)}function TG(t,e){switch(e.tagID){case _.HTML:{Jn(t,e);break}case _.NOFRAMES:{Si(t,e);break}}}function bG(t,e){e.chars=jt,t._insertCharacters(e)}function vG(t,e){t._insertCharacters(e),t.framesetOk=!1}function N3(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==Se.HTML&&t.openElements.currentTagId!==void 0&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function AG(t,e){if(Uq(e))N3(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===Se.MATHML?h3(e):r===Se.SVG&&(Hq(e),d3(e)),s_(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function SG(t,e){if(e.tagID===_.P||e.tagID===_.BR){N3(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===Se.HTML){t._endTagOutsideForeignContent(e);break}const s=t.treeAdapter.getTagName(r);if(s.toLowerCase()===e.tagName){e.tagName=s,t.openElements.shortenToLength(n);break}}}le.AREA,le.BASE,le.BASEFONT,le.BGSOUND,le.BR,le.COL,le.EMBED,le.FRAME,le.HR,le.IMG,le.INPUT,le.KEYGEN,le.LINK,le.META,le.PARAM,le.SOURCE,le.TRACK,le.WBR;const xG=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,wG=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),ax={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function I3(t,e){const n=PG(t),r=e3("type",{handlers:{root:CG,element:NG,text:IG,comment:k3,doctype:RG,raw:DG},unknown:OG}),s={parser:n?new rx(ax):rx.getFragmentParser(void 0,ax),handle(h){r(h,s)},stitches:!1,options:e||{}};r(t,s),Bl(s,ss());const o=n?s.parser.document:s.parser.getFragment(),l=Cj(o,{file:s.options.file});return s.stitches&&e_(l,"comment",function(h,d,f){const g=h;if(g.value.stitch&&f&&d!==void 0){const E=f.children;return E[d]=g.value.stitch,d}}),l.type==="root"&&l.children.length===1&&l.children[0].type===t.type?l.children[0]:l}function R3(t,e){let n=-1;if(t)for(;++n<t.length;)e.handle(t[n])}function CG(t,e){R3(t.children,e)}function NG(t,e){LG(t,e),R3(t.children,e),MG(t,e)}function IG(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const n={type:ot.CHARACTER,chars:t.value,location:ud(t)};Bl(e,ss(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function RG(t,e){const n={type:ot.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:ud(t)};Bl(e,ss(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function kG(t,e){e.stitches=!0;const n=BG(t);if("children"in t&&"children"in n){const r=I3({type:"root",children:t.children},e.options);n.children=r.children}k3({type:"comment",value:{stitch:n}},e)}function k3(t,e){const n=t.value,r={type:ot.COMMENT,data:n,location:ud(t)};Bl(e,ss(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function DG(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,D3(e,ss(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(xG,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=e.parser.tokenizer._consume();e.parser.tokenizer._callState(n)}}function OG(t,e){const n=t;if(e.options.passThrough&&e.options.passThrough.includes(n.type))kG(n,e);else{let r="";throw wG.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Bl(t,e){D3(t,e);const n=t.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=t.parser.tokenizer.preprocessor.line,n.location.endCol=t.parser.tokenizer.preprocessor.col+1,n.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=cn.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function D3(t,e){if(e&&e.offset!==void 0){const n={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=n}}function LG(t,e){const n=t.tagName.toLowerCase();if(e.parser.tokenizer.state===cn.PLAINTEXT)return;Bl(e,ss(t));const r=e.parser.openElements.current;let s="namespaceURI"in r?r.namespaceURI:Io.html;s===Io.html&&n==="svg"&&(s=Io.svg);const o=zj({...t,children:[]},{space:s===Io.svg?"svg":"html"}),l={type:ot.START_TAG,tagName:n,tagID:Pl(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in o?o.attrs:[],location:ud(t)};e.parser.currentToken=l,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=n}function MG(t,e){const n=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&Xj.includes(n)||e.parser.tokenizer.state===cn.PLAINTEXT)return;Bl(e,bm(t));const r={type:ot.END_TAG,tagName:n,tagID:Pl(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:ud(t)};e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken),n===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===cn.RCDATA||e.parser.tokenizer.state===cn.RAWTEXT||e.parser.tokenizer.state===cn.SCRIPT_DATA)&&(e.parser.tokenizer.state=cn.DATA)}function PG(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function ud(t){const e=ss(t)||{line:void 0,column:void 0,offset:void 0},n=bm(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function BG(t){return"children"in t?bl({...t,children:[]}):bl(t)}function UG(t){return function(e,n){return I3(e,{...t,file:n})}}function HG({explanation:t,onClose:e,isVisible:n}){return n?R.jsxs("div",{className:"h-full flex flex-col",children:[R.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200/50 dark:border-gray-700/50",children:[R.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[R.jsx("span",{className:"text-blue-500",children:""}),"Explanation"]}),R.jsx("button",{className:`text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 
                             p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 
                             transition-all duration-200 transform hover:scale-105`,onClick:e,title:"Close explanation","aria-label":"Close explanation sidebar",children:R.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:R.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),R.jsx("div",{className:"p-6 overflow-y-auto flex-1 scrollbar-thin",children:t?R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"mb-6",children:R.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 leading-tight",children:t.title})}),R.jsx("div",{className:`prose prose-gray dark:prose-invert max-w-none text-gray-700 dark:text-gray-300
                                      [&>h1]:text-gray-900 [&>h1]:dark:text-gray-100 [&>h1]:text-2xl [&>h1]:font-bold [&>h1]:mb-4 [&>h1]:mt-6
                                      [&>h2]:text-gray-900 [&>h2]:dark:text-gray-100 [&>h2]:text-xl [&>h2]:font-semibold [&>h2]:mb-3 [&>h2]:mt-5
                                      [&>h3]:text-gray-900 [&>h3]:dark:text-gray-100 [&>h3]:text-lg [&>h3]:font-medium [&>h3]:mb-2 [&>h3]:mt-4
                                      [&>p]:text-gray-700 [&>p]:dark:text-gray-300 [&>p]:leading-relaxed [&>p]:mb-4
                                      [&>ul]:text-gray-700 [&>ul]:dark:text-gray-300 [&>ul]:mb-4 [&>ul>li]:mb-2
                                      [&>ol]:text-gray-700 [&>ol]:dark:text-gray-300 [&>ol]:mb-4 [&>ol>li]:mb-2
                                      [&>blockquote]:border-l-4 [&>blockquote]:border-blue-400 [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-gray-600 [&>blockquote]:dark:text-gray-400 [&>blockquote]:bg-blue-50 [&>blockquote]:dark:bg-blue-900/20 [&>blockquote]:py-2 [&>blockquote]:rounded-r-lg
                                      [&>code]:bg-gray-100 [&>code]:dark:bg-gray-800 [&>code]:text-blue-600 [&>code]:dark:text-blue-400 [&>code]:px-2 [&>code]:py-1 [&>code]:rounded [&>code]:text-sm [&>code]:font-medium
                                      [&>pre]:bg-gray-100 [&>pre]:dark:bg-gray-800 [&>pre]:text-gray-800 [&>pre]:dark:text-gray-200 [&>pre]:p-4 [&>pre]:rounded-lg [&>pre]:overflow-x-auto [&>pre]:mb-4 [&>pre]:border [&>pre]:border-gray-200 [&>pre]:dark:border-gray-700`,children:R.jsx(dj,{rehypePlugins:[UG],children:t.text})})]}):R.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"text-6xl mb-6 opacity-60",children:""}),R.jsx("p",{className:"text-xl font-medium mb-2",children:"No explanation available"}),R.jsx("p",{className:"text-sm opacity-75",children:"Click on a node to see its explanation"})]})})})]}):null}const O3=ie.createContext(void 0),VG=()=>{const t=ie.useContext(O3);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},FG=({children:t})=>{const[e,n]=ie.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});ie.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return R.jsx(O3.Provider,{value:{theme:e,toggleTheme:r},children:t})},L3=()=>{const{theme:t,toggleTheme:e}=VG();return R.jsx("button",{onClick:e,className:`p-2.5 rounded-xl bg-gray-200/80 dark:bg-gray-800/80 text-gray-700 dark:text-gray-300 
                     hover:bg-gray-300/80 dark:hover:bg-gray-700/80 border border-gray-300/60 dark:border-gray-700/60
                     hover:border-gray-400/60 dark:hover:border-gray-600/60 transition-all duration-200 
                     focus:outline-none focus:ring-2 focus:ring-indigo-500/30 dark:focus:ring-indigo-400/30
                     backdrop-blur-sm shadow-sm hover:shadow-md`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?R.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:R.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):R.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:R.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function zG({name:t,onSetName:e,user:n,isSaving:r}){const[s,o]=ie.useState(!1),[l,h]=ie.useState(t||"");ie.useEffect(()=>{h(t||"")},[t]);const d=g=>{g.key==="Enter"&&(e(l),o(!1))},f=()=>{o(!0),h(t||"")};return R.jsx(R.Fragment,{children:R.jsx("div",{className:"name bg-gray-900 dark:bg-gray-950 border-b border-gray-700 dark:border-gray-800",children:R.jsx("div",{className:"app-container max-w-7xl mx-auto px-4",children:R.jsxs("header",{className:"app-header flex justify-between items-center py-4",children:[R.jsxs("div",{className:"flex items-center gap-4",children:[R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:R.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),R.jsx("h1",{className:"text-xl font-bold text-white dark:text-white",children:"TinkFlow"})]}),R.jsx("span",{className:"text-slate-500 dark:text-slate-500 text-sm",children:""}),s?R.jsx("input",{type:"text",value:l,onChange:g=>h(g.target.value),onKeyDown:d,onBlur:()=>{e(l),o(!1)},className:`bg-gray-800 dark:bg-gray-800 border border-white/20 dark:border-white/20 
                                             rounded px-2 py-1 text-slate-100 dark:text-slate-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-400 dark:focus:border-blue-400`,autoFocus:!0}):R.jsx("button",{onClick:f,className:`bg-transparent border-none text-slate-400 dark:text-slate-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded transition-all duration-150 ease-in-out
                                             hover:bg-white/5 dark:hover:bg-white/5 hover:text-slate-100 dark:hover:text-slate-100`,children:t||"Untitled Board"})]}),R.jsxs("div",{className:"user-info flex items-center gap-3",children:[R.jsx(L3,{}),R.jsx("p",{className:"text-slate-700 dark:text-slate-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"}),r&&R.jsxs("div",{className:`text-emerald-500 dark:text-emerald-400 text-sm flex items-center gap-2 
                                               bg-emerald-50 dark:bg-emerald-900/20 px-3 py-1.5 rounded-full border border-emerald-200 dark:border-emerald-700/50
                                               animate-pulse`,children:[R.jsx("div",{className:"w-2 h-2 bg-emerald-500 dark:bg-emerald-400 rounded-full animate-bounce"}),R.jsx("span",{className:"font-medium",children:"Saving..."})]})]})]})})})})}const jG=({notification:t,onRemove:e})=>{const n=s=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";default:return""}},r=s=>{switch(s){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-300 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-300 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-300 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-300 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-300 dark:text-gray-400"}};return R.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-xl border shadow-2xl backdrop-blur-sm                         transform transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-3xl                        ${r(t.type)}`,children:[" ",R.jsxs("div",{className:"flex items-start gap-3",children:[" ",R.jsxs("span",{className:"text-lg flex-shrink-0 mt-0.5",children:[" ",n(t.type)," "]})," ",R.jsxs("div",{className:"flex-1 min-w-0",children:[" ",R.jsxs("p",{className:"text-sm font-medium leading-5 break-words",children:[" ",t.message," "]})," "]})," ",R.jsxs("button",{onClick:()=>e(t.id),className:"flex-shrink-0 text-gray-400 dark:text-gray-500 hover:text-gray-200 dark:hover:text-gray-300                              hover:bg-gray-700/50 dark:hover:bg-gray-600/50                              rounded-full p-1 transition-all duration-200                              focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20","aria-label":"Close notification",children:[" ",R.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[" ",R.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})," "]})," "]})," "]})," "]})},qG=({notifications:t,onRemove:e})=>R.jsxs("div",{className:"notification-container fixed top-4 right-4 space-y-3 z-[2000] pointer-events-none",children:[" ",t.map(n=>R.jsxs("div",{className:"pointer-events-auto",children:[" ",R.jsx(jG,{notification:n,onRemove:e})," "]},n.id))," "]});function YG({onLogin:t}){return R.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 antialiased",children:[" "," ",R.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:[" ",R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",R.jsxs("div",{className:"flex justify-between items-center py-4",children:[" ",R.jsxs("div",{className:"flex items-center space-x-3",children:[" ",R.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",R.jsx("span",{className:"text-white font-bold text-lg",children:"T"})," "]})," ",R.jsxs("div",{className:"flex flex-col",children:[" ",R.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"TinkFlow"})," ",R.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"AI Learning Platform"})," "]})," "]})," ",R.jsxs("div",{className:"flex items-center gap-4",children:[" ",R.jsx(L3,{})," ",R.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200",children:[" ","Get Started"," "]})," "]})," "]})," "]})," "]})," "," ",R.jsxs("section",{className:"relative overflow-hidden",children:[" ",R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:[" ",R.jsxs("div",{className:"text-center",children:[" ",R.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full mb-8",children:[" ",R.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})," ",R.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium text-sm",children:"AI-Powered Concept Learning"})," "]})," ",R.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:[" ","Learn & Tinker with"," ",R.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent block",children:[" ","AI-Powered Concepts"," "]})," "]})," ",R.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:[" ","TinkFlow is the ultimate AI-powered platform for exploring, understanding, and experimenting with new concepts. Transform your learning journey with interactive visual flows and intelligent insights."," "]})," ",R.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[" ",R.jsxs("button",{onClick:t,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning Now"," "]})," ",R.jsxs("button",{className:"px-8 py-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[" ","Watch Demo"," "]})," "]})," "]})," "]})," "," ",R.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full opacity-10 blur-3xl"})," ",R.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})," "]})," "," ",R.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",R.jsxs("div",{className:"text-center mb-16",children:[" ",R.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Everything You Need to Learn"," "]})," ",R.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","AI-powered tools and features designed to accelerate your learning and conceptual understanding"," "]})," "]})," ",R.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",R.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-indigo-200 dark:border-indigo-700/50 hover:transform hover:-translate-y-1",children:[" ",R.jsxs("div",{className:"w-14 h-14 bg-indigo-500 rounded-xl flex items-center justify-center mb-6",children:[" ",R.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})," "]})," "]})," ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI-Powered Insights"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Get intelligent explanations and connections between concepts powered by advanced AI that understands your learning style."," "]})," "]})," ",R.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50 hover:transform hover:-translate-y-1",children:[" ",R.jsxs("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-6",children:[" ",R.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})," "]})," "]})," ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Interactive Visual Flows"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Build and explore concept maps with interactive nodes that respond to your curiosity and create dynamic learning pathways."," "]})," "]})," ",R.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50 hover:transform hover:-translate-y-1",children:[" ",R.jsxs("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-6",children:[" ",R.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})," "]})," "]})," ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Experimentation Sandbox"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Tinker with concepts in a safe, guided environment where you can test ideas and see instant results with AI feedback."," "]})," "]})," "]})," "]})," "]})," "," ",R.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",R.jsxs("div",{className:"text-center mb-16",children:[" ",R.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","How TinkFlow Works"," "]})," ",R.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Three simple steps to unlock your learning potential with AI-powered concept exploration"," "]})," "]})," ",R.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",R.jsxs("div",{className:"text-center",children:[" ",R.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",R.jsx("span",{className:"text-white font-bold text-xl",children:"1"})," "]})," ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Input Your Concept"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Start by entering any topic, question, or concept you want to explore. Our AI understands context and complexity."," "]})," "]})," ",R.jsxs("div",{className:"text-center",children:[" ",R.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",R.jsx("span",{className:"text-white font-bold text-xl",children:"2"})," "]})," ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI Generates Flow"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Watch as TinkFlow creates an interactive visual map with connected nodes, each representing key aspects of your concept."," "]})," "]})," ",R.jsxs("div",{className:"text-center",children:[" ",R.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",R.jsx("span",{className:"text-white font-bold text-xl",children:"3"})," "]})," ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Explore & Learn"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Click on any node to dive deeper, ask questions, and watch new connections emerge as you explore your learning path."," "]})," "]})," "]})," "]})," "]})," "," ",R.jsxs("section",{className:"py-20 bg-gradient-to-r from-indigo-500 to-purple-600",children:[" ",R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",R.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[" ",R.jsxs("div",{className:"text-white",children:[" ",R.jsx("div",{className:"text-4xl font-bold mb-2",children:"10K+"})," ",R.jsx("div",{className:"text-indigo-100",children:"Concepts Explored"})," "]})," ",R.jsxs("div",{className:"text-white",children:[" ",R.jsx("div",{className:"text-4xl font-bold mb-2",children:"5K+"})," ",R.jsx("div",{className:"text-indigo-100",children:"Active Learners"})," "]})," ",R.jsxs("div",{className:"text-white",children:[" ",R.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"})," ",R.jsx("div",{className:"text-indigo-100",children:"Learning Success"})," "]})," ",R.jsxs("div",{className:"text-white",children:[" ",R.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"})," ",R.jsx("div",{className:"text-indigo-100",children:"AI Support"})," "]})," "]})," "]})," "]})," "," ",R.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",R.jsxs("div",{className:"text-center mb-16",children:[" ",R.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Perfect for Every Learning Style"," "]})," ",R.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Whether you're a student, researcher, or curious mind, TinkFlow adapts to your learning needs"," "]})," "]})," ",R.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[" ",R.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/10 p-8 rounded-2xl border border-blue-200 dark:border-blue-700/30",children:[" ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Academic Learning"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Break down complex academic subjects into digestible, interconnected concepts. Perfect for studying sciences, humanities, and technical topics."," "]})," ",R.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",R.jsx("li",{children:" Research paper analysis"})," ",R.jsx("li",{children:" Concept mapping for exams"})," ",R.jsx("li",{children:" Cross-disciplinary connections"})," "]})," "]})," ",R.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/10 dark:to-purple-800/10 p-8 rounded-2xl border border-purple-200 dark:border-purple-700/30",children:[" ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Creative Exploration"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Explore ideas, brainstorm solutions, and discover unexpected connections. Great for creative professionals and innovators."," "]})," ",R.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",R.jsx("li",{children:" Idea generation workflows"})," ",R.jsx("li",{children:" Problem-solving frameworks"})," ",R.jsx("li",{children:" Innovation mapping"})," "]})," "]})," ",R.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/10 p-8 rounded-2xl border border-green-200 dark:border-green-700/30",children:[" ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Technical Deep Dives"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Understand complex systems, architectures, and technologies through interactive exploration and AI-guided explanations."," "]})," ",R.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",R.jsx("li",{children:" System architecture learning"})," ",R.jsx("li",{children:" Technology stack exploration"})," ",R.jsx("li",{children:" Code concept mapping"})," "]})," "]})," ",R.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 p-8 rounded-2xl border border-orange-200 dark:border-orange-700/30",children:[" ",R.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Professional Development"," "]})," ",R.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Build skills, understand industry trends, and create learning paths for career advancement with AI-powered insights."," "]})," ",R.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",R.jsx("li",{children:" Skill gap analysis"})," ",R.jsx("li",{children:" Career pathway planning"})," ",R.jsx("li",{children:" Industry trend mapping"})," "]})," "]})," "]})," "]})," "]})," "," ",R.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",R.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[" ",R.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:[" ","Ready to Transform Your Learning?"," "]})," ",R.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:[" ","Join thousands of learners who are already exploring concepts in revolutionary ways with TinkFlow's AI-powered platform."," "]})," ",R.jsxs("button",{onClick:t,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning for Free"," "]})," ",R.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:[" ","No credit card required  Get started in seconds"," "]})," "]})," "]})," "," ",R.jsxs("footer",{className:"bg-gray-900 text-white py-12",children:[" ",R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",R.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[" ",R.jsxs("div",{className:"col-span-1",children:[" ",R.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[" ",R.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",R.jsx("span",{className:"text-white font-bold text-sm",children:"T"})," "]})," ",R.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})," "]})," ",R.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","AI-powered concept learning platform for curious minds."," "]})," "]})," ",R.jsxs("div",{children:[" ",R.jsx("h4",{className:"font-semibold mb-4",children:"Product"})," ",R.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})})," ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})})," ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})," "]})," "]})," ",R.jsxs("div",{children:[" ",R.jsx("h4",{className:"font-semibold mb-4",children:"Resources"})," ",R.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})," ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Tutorials"})})," ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})," "]})," "]})," ",R.jsxs("div",{children:[" ",R.jsx("h4",{className:"font-semibold mb-4",children:"Company"})," ",R.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})})," ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})," ",R.jsx("li",{children:R.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})," "]})," "]})," "]})," ",R.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[" ",R.jsxs("p",{className:"text-gray-400 text-sm",children:[" "," 2024 TinkFlow. All rights reserved."," "]})," ",R.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[" ",R.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",R.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",R.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})," "]})," "]})," ",R.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",R.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",R.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})," "]})," "]})," ",R.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",R.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",R.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.747.099.12.112.225.085.344-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})," "]})," "]})," "]})," "]})," "]})," "]})," "]})}const GG=async()=>{try{await EB(H0),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},$G=()=>{const[t,e]=ie.useState(null);return ie.useEffect(()=>{const r=yB(H0,s=>{e(s),s?console.log("User signed in:",s.uid):console.log("No user signed in")});return()=>r()},[]),{user:t,signOut:async()=>{try{await GG(),e(null)}catch(r){console.error("Error in sign out:",r)}}}},M3=t=>!!(t&&t.uid),_h=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],ll=[],KG=async t=>{if(!M3({uid:t}))throw new Error(sr.AUTH_REQUIRED);try{const e=p1(vi,Vr.BOARDS),n=a7(e,o7("userId","==",t),u7("createdAt","desc")),r=await C1(n);if(r.empty){const o={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:Vt.now(),isOpen:!0};return await N1(Il(vi,Vr.BOARDS,o.id),o),console.log("Created default board:",o),[o]}const s=r.docs.map(o=>({id:o.id,...o.data()}));return console.log("Fetched all boards:",s),s}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:Vt.now(),isOpen:!0,isFallback:!0}]}throw new Error(sr.LOAD_FAILED)}},ox=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),_h;try{const e=p1(vi,Vr.BOARDS,t,Vr.NODES),n=await C1(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),_h;const r=n.docs.map(s=>{const o=s.data(),l={...o.data,tokenColors:o.data?.tokenColors||{},previousNode:o.data?.previousNode||null};return{id:s.id,type:o.type,position:o.position,data:l,draggable:o.draggable,style:o.style}});return console.log("Fetched nodes from board:",r),r}catch(e){return console.error("Fetch nodes error:",e),_h}},ux=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),ll;try{const e=p1(vi,Vr.BOARDS,t,Vr.EDGES),n=await C1(e);if(n.empty)return console.log("No edges found for board, using initial edges"),ll;const r=n.docs.map(s=>({id:s.id,...s.data()}));return console.log("Fetched edges from board:",r),r}catch(e){return console.error("Fetch edges error:",e),ll}},QG=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=vN(vi);e.forEach(r=>{const s=Il(vi,Vr.BOARDS,t,Vr.NODES,r.id),o={type:r.type,data:r.data,position:r.position,updatedAt:Vt.now()};r.draggable!=null&&(o.draggable=r.draggable),r.style!=null&&(o.style=r.style),n.set(s,o)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(sr.SAVE_FAILED)}},XG=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=vN(vi);e.forEach(r=>{const s=Il(vi,Vr.BOARDS,t,Vr.EDGES,r.id),o={source:r.source,target:r.target,updatedAt:Vt.now()};r.sourceHandle!=null&&(o.sourceHandle=r.sourceHandle),r.targetHandle!=null&&(o.targetHandle=r.targetHandle),r.style!=null&&(o.style=r.style),r.markerEnd!=null&&(o.markerEnd=r.markerEnd),n.set(s,o)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(sr.SAVE_FAILED)}},WG=async(t,e,n)=>{if(!M3({uid:t}))throw new Error(sr.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:Vt.now(),isOpen:!1};return console.log("Creating board:",r),await N1(Il(vi,Vr.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},ZG=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await m7(Il(vi,Vr.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},qu=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:Vt.now()};await N1(Il(vi,Vr.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},JG=t=>{if(!t||!t.data)return t;const e={...t},n={...t.data};return n.title||(n.title=n.label||n.summary||"Node"),n.suggestions||(n.suggestions=[]),e.draggable===void 0&&(e.draggable=!0),e.data=n,e},e$=t=>Array.isArray(t)?t.map(JG):[],t$=(t,e={})=>{const[n,r,s]=Z5([]),[o,l,h]=J5([]),[d,f]=ie.useState(!0),[g,E]=ie.useState(!1),[T,b]=ie.useState(!1),[N,k]=ie.useState([]),[U,M]=ie.useState(null),Y=ie.useRef(null),{showSuccess:K,showError:q,showInfo:te}=e,G=w=>{const D=w.find(Q=>Q.isOpen===!0);if(D)return D;if(w.length>0){const Q={...w[0],isOpen:!0};return qu(Q.id,Q).catch(console.error),Q}return null};ie.useEffect(()=>{(async()=>{if(t)try{f(!0);const D=await KG(t.uid);k(D);const Q=D.some(ne=>ne.isFallback);Q&&q&&q("Database index missing. Please create the required Firestore index. Check console for details.");const z=G(D);if(!z){console.error("No board found for user"),q&&q("No boards found. Creating a default board..."),r(_h),l(ll);return}M(z);const[Z,se]=await Promise.all([ox(z.id),ux(z.id)]);r(Z),l(se),te&&!Q&&te("Board loaded successfully!")}catch(D){console.error("Error loading initial data:",D),q&&q("Failed to load board data. Using default board."),r(_h),l(ll)}finally{f(!1)}})()},[t,r,l]);const H=async(w,D,Q)=>{Y.current&&clearTimeout(Y.current);const z=setTimeout(async()=>{try{b(!0);const Z=[];D&&D.length>0&&Z.push(QG(w,D)),Q&&Q.length>0&&Z.push(XG(w,Q)),Z.length>0&&(await Promise.all(Z),console.log("Auto-save completed successfully"))}catch(Z){console.error("Auto-save failed:",Z),q&&q("Failed to save changes automatically")}finally{b(!1),Y.current=null}},1e3);Y.current=z};ie.useEffect(()=>(!d&&U&&!g&&!U.isFallback&&H(U.id,n,o),()=>{Y.current&&clearTimeout(Y.current)}),[n,o,d,U,g]);const C=async w=>{try{if(U?.id===w)return;if(U?.isFallback||N.find(Q=>Q.id===w)?.isFallback){q&&q("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(E(!0),U&&!U.isFallback){const Q={...U,isOpen:!1};await qu(U.id,Q),k(z=>z.map(Z=>Z.id===U.id?Q:Z))}const D=N.find(Q=>Q.id===w);if(D){const Q={...D,isOpen:!0};await qu(w,Q),M(Q),k(ne=>ne.map(A=>A.id===w?Q:A));const[z,Z]=await Promise.all([ox(w),ux(w)]),se=e$(z);r(se),l(Z),K&&K(`Switched to "${Q.name}"`)}else console.error("Board not found:",w),q&&q("Board not found")}catch(D){console.error("Error switching board:",D),q&&q("Failed to switch board. Please try again.")}finally{E(!1)}};return{nodes:n,edges:o,allBoards:N,currentBoard:U,isLoading:d,isSwitchingBoard:g,isSaving:T,onNodesChange:s,onEdgesChange:h,setNodes:r,switchToBoard:C,createNewBoard:async w=>{try{if(!t)return q&&q("You must be logged in to create a board"),null;te&&te("Creating new board...");const D=await WG(t.uid,w||null,N);if(D){if(U&&!U.isFallback){const z={...U,isOpen:!1};qu(U.id,z).catch(console.error)}const Q={...D,isOpen:!0};return k(z=>{const Z=z.map(se=>se.id===U?.id?{...se,isOpen:!1}:se);return[Q,...Z]}),M(Q),qu(D.id,Q).catch(console.error),r([{id:"1",type:"staticEditable",data:{label:w||"New Board"},position:{x:250,y:25},draggable:!1}]),l(ll),K&&K(`Board "${D.name}" created and opened!`),Q}else return q&&q("Failed to create board. Please try again."),null}catch(D){return q&&q(`Failed to create board: ${D.message}`),null}},deleteBoard:async w=>{try{if(N.length<=1){q&&q("Cannot delete the last board!");return}if(!N.find(Q=>Q.id===w)){console.error("Board not found for deletion"),q&&q("Board not found");return}if(te&&te("Deleting board..."),U?.id===w){const Q=N.find(z=>z.id!==w);Q&&await C(Q.id)}await ZG(w),k(Q=>Q.filter(z=>z.id!==w)),K&&K("Board deleted successfully!")}catch(D){console.error("Error deleting board:",D),q&&q("Failed to delete board. Please try again.")}},updateBoardName:async w=>{if(U&&U.name!==w){const D={...U,name:w};M(D),k(Q=>Q.map(z=>z.id===U.id?D:z));try{await qu(U.id,D),console.log("Board name updated successfully")}catch(Q){console.error("Error updating board name:",Q)}}},clearBoardState:()=>{Y.current&&(clearTimeout(Y.current),Y.current=null),k([]),M(null),r([]),l([]),f(!0),E(!1),b(!1)}}},n$=()=>{const[t,e]=ie.useState([]),n=f=>{e(g=>g.filter(E=>E.id!==f))},r=f=>{const g=Date.now().toString(),E={id:g,timestamp:new Date,...f};return e(T=>[...T,E]),f.autoRemove!==!1&&setTimeout(()=>{n(g)},f.duration||5e3),g};return{notifications:t,addNotification:r,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(f,g={})=>r({type:"success",message:f,...g}),showError:(f,g={})=>r({type:"error",message:f,duration:7e3,...g}),showInfo:(f,g={})=>r({type:"info",message:f,...g}),showWarning:(f,g={})=>r({type:"warning",message:f,duration:6e3,...g})}},P3=t=>{const e=[],n=t.split("_");for(let r=0;r<n.length;r++)if(r%2===0)n[r].split(/\s+/).filter(o=>o.trim()!=="").forEach(o=>{e.push({word:o.trim()})});else{const s=n[r].trim();s.split(/\s+/).filter(l=>l.trim()!=="").forEach(l=>{e.push({word:l.trim(),myConcept:s})})}return e},lx=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},u0=t=>{if(!t)return"#000000";const e=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),r=parseInt(t.substring(5,7),16);return(e*299+n*587+r*114)/1e3>=128?"#000000":"#ffffff"},l0=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.substring(1):t;const r=parseInt(n,16),s=255,o=e,l=r>>16,h=r>>8&255,d=r&255,f=Math.round((s-l)*o)+l,g=Math.round((s-h)*o)+h,E=Math.round((s-d)*o)+d;return`#${(16777216+f*65536+g*256+E).toString(16).slice(1)}`},r$=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16),o=30,l=Math.min(255,Math.max(0,n+(Math.random()-.5)*o*2)),h=Math.min(255,Math.max(0,r+(Math.random()-.5)*o*2)),d=Math.min(255,Math.max(0,s+(Math.random()-.5)*o*2));return`#${Math.round(l).toString(16).padStart(2,"0")}${Math.round(h).toString(16).padStart(2,"0")}${Math.round(d).toString(16).padStart(2,"0")}`},i$=t=>{const r=(Math.random()-.5)*150*2;return{x:t.x+r,y:t.y+200}},s$=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,a$=(t,e)=>`edge_${t}_${e}`,o$=(t,e,n,r,s,o,l)=>({id:s$(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:r,full_text:n,suggestions:[],myColor:s,tokenColors:{},previousNode:l}}),u$=(t,e,n,r)=>({id:a$(t,e),source:t,target:e,sourceHandle:r,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:wh.ArrowClosed,color:n}}),cx=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const r=await aI(F1,"groqChat")({message:e});return console.log("groqChat response:",r.data),r.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},l$=async(t,e)=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const n=t.trim();if(!n)throw new Error("Message cannot be empty or just whitespace");const r=aI(F1,"groqChat");console.log("Starting streaming request...");const{stream:s,data:o}=await r.stream({message:n});console.log("Stream started, waiting for chunks...");let l="";for await(const d of s)if(console.log("Received chunk:",d),d&&typeof d=="object"&&"type"in d&&"content"in d){const f=d;console.log("Processing chunk:",f),f.type==="chunk"&&f.content&&(l+=f.content,e?.(f.content))}console.log("Waiting for final result...");const h=await o;return console.log("Final result received:",h),h&&typeof h=="object"&&"response"in h?(console.log("Returning final result response"),h.response):(console.log("Returning accumulated response:",l),l)}catch(n){throw console.error("Firebase function streaming error:",n),n}},c$=async(t,e,n)=>{try{const r=`You are an expert educator. Explain the following concept to a beginner.

        Context: ${e}

        Instructions:
        - Highlight every key term with [square-braces], e.g., [variable].
        - Use simple language and practical examples or analogies.
        - Use only correct HTML or MARKDOWN for all formatting (headings, lists, tables, images, code).
        - All HTML elements (including headings, lists, tables, images, code) MUST use inline CSS for styling.
        - For inline CSS, use: <span style="color:#fff;background:#222;padding:4px;border-radius:4px;">example</span>
        - For images: <img src="IMAGE_URL" alt="desc" style="max-width:100%;border-radius:8px;">
        - For code: <pre style="background:#222;color:#fff;padding:8px;border-radius:6px;"><code>console.log("Hello World");</code></pre>
        - For tables: <table style="border-collapse:collapse;width:100%;"><tr><th style="background:#222;color:#fff;padding:6px;">Header</th></tr><tr><td style="padding:6px;">Data</td></tr></table>
        - For lists: <ul style="padding-left:20px;"><li style="margin-bottom:4px;">Item 1</li></ul>
        - No introductions, conclusions, or extra commentary.
        - Start directly with the explanation.

        Concept: `,s=`Summarize in exactly 40 words or less.

        CRITICAL:
        - Preserve ALL [square-braces] concepts exactly
        - Every key concept MUST use [square-braces]
        - NO introductory phrases like "Here is..." or "Summary..."
        - NO bullet points or formatting except [square-braces]
        - Start immediately with summary content
        - ONLY the summary text

        Text to summarize: `,o=`You are an expert educator. Respond ONLY with a valid JSON object in the following format: {"topics": ["[concept1]", "[concept2]", "[concept3]"]}. 

        Instructions:
        - Suggest exactly 3 topics that are logical next steps for learning the given concept.
        - Each topic must be no more than 5 words.
        - Each topic MUST be enclosed in double quotes, e.g., "example topic".
        - Do NOT include any explanation, commentary, or formatting outside the JSON object.
        - Only output the JSON object as specified.

        Concept: `,l=cx(r+t),h=cx(o+t);let d="";const f=l$(s+t,M=>{d+=M,n(M)}),[g,E,T]=await Promise.all([l,h,f]);let b=E??"";b=b.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"");let N=[];const k=b.match(/"(.*?)"/g);k&&(N=k.map(M=>M.replace(/"/g,"")));const U={firstResponse:{response:g?.replace(/\[/g,"_").replace(/\]/g,"_").replace(/```/g,"").replace(/markdown/g,"")},secondResponse:{response:T?.replace(/\[/g,"_").replace(/\]/g,"_").replace(/Here is a summary of the text in exactly 40 words or less:/g,"").replace("/Here is a summary of the text in 40 words or less:/g","")},thirdResponse:{response:N}};return console.log("askAITwice response:",U),U}catch(r){throw console.error("Error in askAITwice:",r),r}},B3=ie.createContext(null),h$=({children:t,nodes:e,onNodesChange:n,onEdgesChange:r,setNodes:s,showExplanation:o})=>{const l=(h,d,f,g,E,T,b)=>{const N=e.find(G=>G.id===d);if(!N)return null;const k=N.data.tokenColors||{},U=h.myConcept||h.word;if(k[U])return console.log(`Token "${U}" is already colored, ignoring click`),null;let M;g==="staticEditable"?M=lx():M=E?r$(E):lx();const Y={...k};h.myConcept?Y[h.myConcept]=M:Y[h.word]=M,s(G=>G.map(H=>H.id===d?{...H,data:{...H.data,tokenColors:Y}}:H));const K=i$(f),q=o$(K,h.word,"Loading...","",M,g,d);q.data.isLoading=!0;const te=u$(d,q.id,M,b);return n([{type:"add",item:q}]),r([{type:"add",item:te}]),c$(h.word,T||"",G=>{s(H=>H.map(C=>{if(C.id===q.id){const I=C.data.summary||"";return{...C,data:{...C.data,label:I+G,summary:I+G}}}return C}))}).then(G=>{const H=G.firstResponse?.response||h.word,C=G.secondResponse?.response||h.word,I=G.thirdResponse?.response||{};s(B=>B.map(P=>P.id===q.id?{...P,data:{...P.data,label:C,title:h.word,summary:C,full_text:H,suggestions:I,isLoading:!1}}:P))}).catch(()=>{s(G=>G.map(H=>H.id===q.id?{...H,data:{...H.data,label:h.word,title:h.word,summary:h.word,full_text:h.word,suggestions:[],isLoading:!1}}:H))}),M};return R.jsx(B3.Provider,{value:{handleTokenClick:l,setNodes:s,showExplanation:o},children:t})},U3=()=>{const t=ie.useContext(B3);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t},H3=({size:t="medium",color:e="#4f86f7"})=>{const n={small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"};return R.jsx("div",{className:"flex items-center justify-center",children:R.jsx("div",{className:`${n[t]} border-gray-200 dark:border-gray-700 border-t-indigo-500 dark:border-t-indigo-400 rounded-full animate-spin`,style:{borderTopColor:e}})})};function d$({data:t,id:e}){const[n,r]=ie.useState(!1),[s,o]=ie.useState(t.summary||t.label||"Static Node"),[l,h]=ie.useState(!1),{handleTokenClick:d,showExplanation:f}=U3(),{getNode:g,setViewport:E}=Yh();ie.useEffect(()=>{n||o(t.summary||t.label||"Static Node")},[t.summary,t.label,n]);const T=P3(s),b=(C,I)=>{I.stopPropagation(),console.log("Static Token clicked:",C),d(C,e,{x:0,y:0},"staticEditable",t.myColor,t.summary||t.label||"Draggable Node",C.suggestionId)},N=C=>{C.stopPropagation(),r(!0)},k=()=>{r(!1)},U=C=>{C.stopPropagation()},M=C=>{C.stopPropagation(),C.key==="Enter"&&k(),C.key==="Escape"&&(o(t.summary||t.label||"Static Node"),r(!1))},Y=C=>{C.stopPropagation(),h(!l)},K=C=>{C.stopPropagation(),f&&f(t.title||"Explanation",t.full_text||"No detailed information available.")},q=C=>{if(C.stopPropagation(),t.previousNode){const I=g(t.previousNode);if(I){const{x:B,y:P}=I.position;E({x:-B+200,y:-P+100,zoom:1},{duration:500})}}},te=(()=>{const C=t.tokenColors||{};return T.map((I,B)=>{const P=I.myConcept||I.word,V=C[P],w=!V;return R.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-300 ease-out
                              ${w?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40 hover:shadow-lg hover:shadow-blue-500/25 hover:scale-105 hover:-translate-y-0.5 active:scale-95 active:translate-y-0":"cursor-not-allowed opacity-70"} 
                              ${I.myConcept?"bg-blue-500/10 border border-blue-500/30 shadow-md":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:V||"transparent",color:V?t.myColor||"#ffffff":"inherit",border:V?`1px solid ${V}`:"",boxShadow:V?`0 0 0 1px ${V}25`:""},onClick:D=>w?b(I,D):D.stopPropagation(),children:[I.word,B<T.length-1?" ":""]},B)})})(),G=R.jsxs("div",{className:"node-buttons",children:[t.previousNode&&R.jsx("button",{className:"node-expand-btn previous-node-btn",onClick:q,title:"Go to previous node",children:""}),T.length>5&&R.jsx("button",{className:"node-expand-btn",onClick:Y,title:l?"Show less":"Show more",children:l?"":"+"}),R.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:K,title:"Show full text",children:""})]}),H=ie.useMemo(()=>t.isLoading?R.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[R.jsx(H3,{size:"small",color:t.myColor||"#6366f1"}),R.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}):n?R.jsx("input",{type:"text",value:s,onChange:C=>o(C.target.value),onBlur:k,onKeyDown:M,onClick:U,className:`w-full bg-gray-700/50 border border-white/15 rounded-lg px-4 py-3 text-gray-100 
                             placeholder-gray-500 focus:outline-none focus:border-blue-500/60 focus:bg-gray-600/50 
                             focus:ring-2 focus:ring-blue-500/25 transition-all duration-200 nodrag`,placeholder:"Enter node content...",autoFocus:!0}):R.jsxs("div",{className:"flex flex-col gap-3",children:[R.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[R.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),R.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&R.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                         hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:q,title:"Go to previous node",children:""}),T.length>5&&R.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                         hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:Y,title:l?"Show less":"Show more",children:l?"":"+"}),R.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                     hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                     transition-all duration-150 flex items-center justify-center text-sm`,onClick:K,title:"Show full text",children:""})]})]}),R.jsx("div",{className:"flex-1",children:R.jsxs("div",{className:"cursor-text leading-relaxed break-words text-lg font-medium",onClick:N,children:[te,T.length>5&&!l&&R.jsx("span",{className:"text-slate-500 font-normal",children:"..."})]})}),R.jsxs("div",{className:"mt-2",children:[R.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),R.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((C,I)=>{const P=(t.tokenColors||{})[C],V=!P;return R.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                  bg-white/5 border border-white/10 transition-all duration-200 
                                                  ${V?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:P||"transparent",color:P?t.myColor||"#ffffff":"inherit",border:P?`1px solid ${P}`:""},onClick:w=>V?b({word:C,myConcept:C,suggestionId:t.label+C+I},w):w.stopPropagation(),children:[C,I<t.suggestions.length-1?" ":"",R.jsx(mr,{type:"source",position:Me.Right,id:t.label+C+I})]},I)}):R.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]}),[n,s,l,T.length,N,k,M,U,te,G]);return R.jsxs("div",{className:`bg-[#1a1a1d] border border-white/[0.1] rounded-[20px] p-7 min-w-[320px] max-w-[500px] 
                       shadow-[0_14px_36px_rgba(0,0,0,0.6),0_2px_6px_rgba(0,0,0,0.8)] 
                       transition-all duration-150 ease-in-out cursor-pointer select-none overflow-hidden
                       opacity-[0.98] border-b-[3px] border-b-white/[0.06]
                       hover:opacity-100 hover:bg-[#28282c] hover:border-white/[0.2] 
                       hover:transform hover:scale-[1.03] hover:shadow-[0_14px_36px_rgba(0,0,0,0.6),0_4px_8px_rgba(0,0,0,0.8)]`,style:{backgroundColor:t.myColor,color:t.myColor?u0(t.myColor):"#f8faff",border:t.myColor?`1px solid ${l0(t.myColor,20)}`:"1px solid rgba(255, 255, 255, 0.1)"},children:[R.jsx("div",{className:"relative pointer-events-auto text-[#f8faff] text-[18px] leading-[1.7] font-semibold",children:H}),R.jsx(mr,{type:"source",position:Me.Bottom,id:"bottom-source"}),R.jsx(mr,{type:"target",position:Me.Bottom,id:"bottom-target"})]})}function f$({data:t,id:e}){const[n,r]=ie.useState(!1),[s,o]=ie.useState(t.summary||t.label||"Draggable Node"),[l,h]=ie.useState(t.expanded||!1),{getNodes:d,getNode:f,setViewport:g}=Yh(),{handleTokenClick:E,showExplanation:T}=U3();ie.useEffect(()=>{n||o(t.summary||t.label||"Draggable Node")},[t.summary,t.label,n]);const b=P3(s),N=l||b.length<=5?b:b.slice(0,5),k=()=>!0,U=(B,P)=>{P.stopPropagation();const w=d().find(Q=>Q.id===e);return w?E(B,e,w.position,w.type||"draggableEditable",t.myColor,t.summary||t.label||"Draggable Node"):void 0},M=B=>{B.stopPropagation(),r(!0)},Y=()=>{r(!1)},K=B=>{B.stopPropagation()},q=B=>{B.stopPropagation(),B.key==="Enter"&&Y(),B.key==="Escape"&&(o(t.summary||t.label||"Draggable Node"),r(!1))},te=B=>{B.stopPropagation(),h(!l),!l&&t.onExpand&&t.onExpand()},G=B=>{B.stopPropagation(),T&&T(t.title,t.full_text||"No detailed information available.")},H=B=>{if(B.stopPropagation(),t.previousNode){const P=f(t.previousNode);if(P){const{x:V,y:w}=P.position;g({x:-V+200,y:-w+100,zoom:1},{duration:500})}}},C=ie.useMemo(()=>{const B={};return N.forEach(P=>{const V=P.myConcept||P.word;B[V]||(B[V]=[]),B[V].push(P)}),B},[N]),I=ie.useMemo(()=>n?R.jsx("input",{type:"text",value:s,onChange:B=>o(B.target.value),onBlur:Y,onKeyDown:q,onClick:K,className:`w-full bg-gray-700/50 border border-white/15 rounded-lg px-4 py-3 text-gray-100 
                             placeholder-gray-500 focus:outline-none focus:border-blue-500/60 focus:bg-gray-600/50 
                             focus:ring-2 focus:ring-blue-500/25 transition-all duration-200 nodrag`,placeholder:"Enter node content...",autoFocus:!0}):R.jsxs(R.Fragment,{children:[t.isLoading&&R.jsxs("div",{className:"flex items-center justify-center gap-2 py-5",children:[R.jsx(H3,{size:"small",color:t.myColor||"#6366f1"}),R.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}),R.jsxs("div",{className:"flex flex-col gap-3",children:[R.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[R.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),R.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&R.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                             hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                             transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:H,title:"Go to previous node",children:""}),b.length>5&&R.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                             hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                             transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:te,title:l?"Show less":"Show more",children:l?"":"+"}),R.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                         hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm`,onClick:G,title:"Show full text",children:""})]})]}),R.jsx("div",{className:"flex-1",children:R.jsxs("div",{className:"cursor-text leading-relaxed break-words",onClick:M,children:[N.map((B,P)=>{const V=t.tokenColors||{},w=B.myConcept||B.word,D=V[w],Q=!D;return R.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-300 ease-out
                                                  ${Q?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40 hover:shadow-lg hover:shadow-blue-500/25 hover:scale-105 hover:-translate-y-0.5 active:scale-95 active:translate-y-0":"cursor-not-allowed opacity-70"} 
                                                  ${B.myConcept?"bg-blue-500/10 border border-blue-500/30 shadow-md":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:D||"transparent",color:D?u0(D):"inherit",border:D?`1px solid ${l0(D,20)}`:"",boxShadow:D?`0 0 0 1px ${D}25`:""},onClick:z=>Q?U(B,z):z.stopPropagation(),children:[B.word,P<N.length-1?" ":""]},P)}),b.length>5&&!l&&R.jsx("span",{className:"text-slate-500 font-normal",children:"..."})]})}),R.jsxs("div",{className:"mt-2",children:[R.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),R.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((B,P)=>{const w=(t.tokenColors||{})[B],D=!w;return R.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                      bg-white/5 border border-white/10 transition-all duration-200 
                                                      ${D?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:w||"transparent",color:w?u0(w):"inherit",border:w?`1px solid ${l0(w,20)}`:""},onClick:Q=>D?U({word:B,myConcept:B,suggestionId:t.label+B+P},Q):Q.stopPropagation(),children:[B,R.jsx(mr,{type:"source",position:Me.Bottom,id:t.label+B+P})]},P)}):R.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]})]}),[n,s,N,b,l,C,M,Y,q,K,te,G,U,k,t.previousNode,H,t.tokenColors,t.myColor,t.isLoading]);return R.jsxs("div",{className:`bg-[#202023] border border-white/[0.12] rounded-2xl p-5 min-w-[280px] max-w-[450px] 
                       shadow-[0_10px_30px_rgba(0,0,0,0.5),0_1px_4px_rgba(0,0,0,0.7)] 
                       transition-all duration-200 ease-in-out cursor-grab select-none overflow-hidden
                       hover:transform hover:-translate-y-[3px] hover:shadow-[0_12px_35px_rgba(0,0,0,0.6),0_2px_6px_rgba(0,0,0,0.8)] 
                       hover:border-white/[0.18] hover:bg-[#242427]`,style:{background:t.myColor,color:t.myColor?u0(t.myColor):"#f0f4f8",border:t.myColor?`1px solid ${l0(t.myColor,20)}`:"1px solid rgba(255, 255, 255, 0.12)"},children:[R.jsx("div",{className:"relative pointer-events-auto text-[#f0f4f8] text-[17px] leading-[1.7] font-medium",children:I}),R.jsx(mr,{type:"source",position:Me.Bottom,id:"bottom-source"}),R.jsx(mr,{type:"target",position:Me.Top,id:"top-target"}),R.jsx(mr,{type:"source",position:Me.Left,id:"left-source"}),R.jsx(mr,{type:"target",position:Me.Left,id:"left-target"}),R.jsx(mr,{type:"source",position:Me.Right,id:"right-source"}),R.jsx(mr,{type:"target",position:Me.Right,id:"right-target"})]})}const m$={staticEditable:d$,draggableEditable:f$};function p$(){const[t,e]=ie.useState(!1),[n,r]=ie.useState(!1),[s,o]=ie.useState(null),l=ie.useCallback((Z,se)=>{o({title:Z,text:se}),e(!0)},[]),h=ie.useCallback(()=>{e(!1)},[]),{user:d,signOut:f}=$G(),{notifications:g,removeNotification:E,showSuccess:T,showError:b,showInfo:N}=n$(),{nodes:k,edges:U,allBoards:M,currentBoard:Y,isSwitchingBoard:K,isSaving:q,onNodesChange:te,onEdgesChange:G,setNodes:H,switchToBoard:C,createNewBoard:I,deleteBoard:B,updateBoardName:P,clearBoardState:V}=t$(d,{showSuccess:T,showError:b,showInfo:N}),w=async()=>{await f(),V()},D=()=>{r(!0)},Q=ie.useCallback(Z=>{const se={id:`e${Z.source}-${Z.target}`,source:Z.source,target:Z.target,sourceHandle:Z.sourceHandle,targetHandle:Z.targetHandle};G([{type:"add",item:se}])},[G]),z=ie.useMemo(()=>R.jsxs(Rw,{nodes:k,edges:U,onNodesChange:te,onEdgesChange:G,onConnect:Q,nodeTypes:m$,connectionMode:La.Loose,fitView:!0,className:"bg-gray-50 dark:bg-gray-900 w-full h-full",children:[R.jsx(aL,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg"}),R.jsx(dL,{variant:ui.Cross,gap:30,size:10,lineWidth:.5,color:"#94a3b8",className:"bg-gray-50 dark:bg-gray-900"})]}),[k,U,te,G,Q]);return d?R.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 relative",style:{height:"100vh",width:"100vw",overflow:"hidden"},children:[R.jsx(qG,{notifications:g,onRemove:E}),R.jsx("div",{style:{height:"100%",position:"relative"},children:R.jsxs("div",{className:"flex h-full",children:[R.jsx("div",{className:"w-80 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:R.jsx(eH,{allBoards:M,currentBoard:Y,onSwitchBoard:C,onCreateBoard:async Z=>{await I(Z)},onDeleteBoard:B,onSignOut:w,isLoading:K})}),R.jsx("div",{className:"flex-1 bg-white dark:bg-gray-800",children:R.jsxs("div",{className:"bg-white dark:bg-gray-800",style:{height:"100%",position:"relative"},children:[R.jsx(zG,{name:Y?.name||"Loading...",onSetName:P,user:d,isSaving:q}),R.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",style:{height:"calc(100% - 60px)"},children:R.jsx(h$,{nodes:k,onNodesChange:te,onEdgesChange:G,setNodes:H,showExplanation:l,children:z})})]})}),t&&R.jsx("div",{className:`w-96 bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl
                                       border-l border-gray-200/50 dark:border-gray-700/50 
                                       shadow-2xl
                                       animate-in slide-in-from-right-5 fade-in duration-300
                                       transition-all ease-out`,children:R.jsx("div",{className:"h-full overflow-hidden bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900",children:R.jsx(HG,{explanation:s,onClose:h,isVisible:t})})})]})})]}):n?R.jsx(ZU,{}):R.jsx(YG,{onLogin:D})}function g$(){return R.jsx(FG,{children:R.jsx(p$,{})})}const V3=document.getElementById("root");if(!V3)throw new Error("Failed to find the root element");_4.createRoot(V3).render(R.jsx(ie.StrictMode,{children:R.jsx(g$,{})}));
