function VN(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Ix(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lp={exports:{}},Fc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function LN(){if(_E)return Fc;_E=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:t,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Fc.Fragment=e,Fc.jsx=n,Fc.jsxs=n,Fc}var bE;function zN(){return bE||(bE=1,lp.exports=LN()),lp.exports}var T=zN(),cp={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE;function UN(){if(EE)return Be;EE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function b(S){return S===null||typeof S!="object"?null:(S=v&&S[v]||S["@@iterator"],typeof S=="function"?S:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,k={};function M(S,Q,ne){this.props=S,this.context=Q,this.refs=k,this.updater=ne||x}M.prototype.isReactComponent={},M.prototype.setState=function(S,Q){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,Q,"setState")},M.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function V(){}V.prototype=M.prototype;function q(S,Q,ne){this.props=S,this.context=Q,this.refs=k,this.updater=ne||x}var F=q.prototype=new V;F.constructor=q,O(F,M.prototype),F.isPureReactComponent=!0;var j=Array.isArray,ee={H:null,A:null,T:null,S:null,V:null},Z=Object.prototype.hasOwnProperty;function N(S,Q,ne,K,te,le){return ne=le.ref,{$$typeof:t,type:S,key:Q,ref:ne!==void 0?ne:null,props:le}}function A(S,Q){return N(S.type,Q,void 0,void 0,void 0,S.props)}function C(S){return typeof S=="object"&&S!==null&&S.$$typeof===t}function z(S){var Q={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(ne){return Q[ne]})}var U=/\/+/g;function H(S,Q){return typeof S=="object"&&S!==null&&S.key!=null?z(""+S.key):Q.toString(36)}function I(){}function P(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(I,I):(S.status="pending",S.then(function(Q){S.status==="pending"&&(S.status="fulfilled",S.value=Q)},function(Q){S.status==="pending"&&(S.status="rejected",S.reason=Q)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function $(S,Q,ne,K,te){var le=typeof S;(le==="undefined"||le==="boolean")&&(S=null);var de=!1;if(S===null)de=!0;else switch(le){case"bigint":case"string":case"number":de=!0;break;case"object":switch(S.$$typeof){case t:case e:de=!0;break;case y:return de=S._init,$(de(S._payload),Q,ne,K,te)}}if(de)return te=te(S),de=K===""?"."+H(S,0):K,j(te)?(ne="",de!=null&&(ne=de.replace(U,"$&/")+"/"),$(te,Q,ne,"",function(Ae){return Ae})):te!=null&&(C(te)&&(te=A(te,ne+(te.key==null||S&&S.key===te.key?"":(""+te.key).replace(U,"$&/")+"/")+de)),Q.push(te)),1;de=0;var ge=K===""?".":K+":";if(j(S))for(var _e=0;_e<S.length;_e++)K=S[_e],le=ge+H(K,_e),de+=$(K,Q,ne,le,te);else if(_e=b(S),typeof _e=="function")for(S=_e.call(S),_e=0;!(K=S.next()).done;)K=K.value,le=ge+H(K,_e++),de+=$(K,Q,ne,le,te);else if(le==="object"){if(typeof S.then=="function")return $(P(S),Q,ne,K,te);throw Q=String(S),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return de}function R(S,Q,ne){if(S==null)return S;var K=[],te=0;return $(S,K,"","",function(le){return Q.call(ne,le,te++)}),K}function W(S){if(S._status===-1){var Q=S._result;Q=Q(),Q.then(function(ne){(S._status===0||S._status===-1)&&(S._status=1,S._result=ne)},function(ne){(S._status===0||S._status===-1)&&(S._status=2,S._result=ne)}),S._status===-1&&(S._status=0,S._result=Q)}if(S._status===1)return S._result.default;throw S._result}var G=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)};function Y(){}return Be.Children={map:R,forEach:function(S,Q,ne){R(S,function(){Q.apply(this,arguments)},ne)},count:function(S){var Q=0;return R(S,function(){Q++}),Q},toArray:function(S){return R(S,function(Q){return Q})||[]},only:function(S){if(!C(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},Be.Component=M,Be.Fragment=n,Be.Profiler=a,Be.PureComponent=q,Be.StrictMode=i,Be.Suspense=f,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,Be.__COMPILER_RUNTIME={__proto__:null,c:function(S){return ee.H.useMemoCache(S)}},Be.cache=function(S){return function(){return S.apply(null,arguments)}},Be.cloneElement=function(S,Q,ne){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var K=O({},S.props),te=S.key,le=void 0;if(Q!=null)for(de in Q.ref!==void 0&&(le=void 0),Q.key!==void 0&&(te=""+Q.key),Q)!Z.call(Q,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&Q.ref===void 0||(K[de]=Q[de]);var de=arguments.length-2;if(de===1)K.children=ne;else if(1<de){for(var ge=Array(de),_e=0;_e<de;_e++)ge[_e]=arguments[_e+2];K.children=ge}return N(S.type,te,void 0,void 0,le,K)},Be.createContext=function(S){return S={$$typeof:c,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:l,_context:S},S},Be.createElement=function(S,Q,ne){var K,te={},le=null;if(Q!=null)for(K in Q.key!==void 0&&(le=""+Q.key),Q)Z.call(Q,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(te[K]=Q[K]);var de=arguments.length-2;if(de===1)te.children=ne;else if(1<de){for(var ge=Array(de),_e=0;_e<de;_e++)ge[_e]=arguments[_e+2];te.children=ge}if(S&&S.defaultProps)for(K in de=S.defaultProps,de)te[K]===void 0&&(te[K]=de[K]);return N(S,le,void 0,void 0,null,te)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(S){return{$$typeof:d,render:S}},Be.isValidElement=C,Be.lazy=function(S){return{$$typeof:y,_payload:{_status:-1,_result:S},_init:W}},Be.memo=function(S,Q){return{$$typeof:m,type:S,compare:Q===void 0?null:Q}},Be.startTransition=function(S){var Q=ee.T,ne={};ee.T=ne;try{var K=S(),te=ee.S;te!==null&&te(ne,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(Y,G)}catch(le){G(le)}finally{ee.T=Q}},Be.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},Be.use=function(S){return ee.H.use(S)},Be.useActionState=function(S,Q,ne){return ee.H.useActionState(S,Q,ne)},Be.useCallback=function(S,Q){return ee.H.useCallback(S,Q)},Be.useContext=function(S){return ee.H.useContext(S)},Be.useDebugValue=function(){},Be.useDeferredValue=function(S,Q){return ee.H.useDeferredValue(S,Q)},Be.useEffect=function(S,Q,ne){var K=ee.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(S,Q)},Be.useId=function(){return ee.H.useId()},Be.useImperativeHandle=function(S,Q,ne){return ee.H.useImperativeHandle(S,Q,ne)},Be.useInsertionEffect=function(S,Q){return ee.H.useInsertionEffect(S,Q)},Be.useLayoutEffect=function(S,Q){return ee.H.useLayoutEffect(S,Q)},Be.useMemo=function(S,Q){return ee.H.useMemo(S,Q)},Be.useOptimistic=function(S,Q){return ee.H.useOptimistic(S,Q)},Be.useReducer=function(S,Q,ne){return ee.H.useReducer(S,Q,ne)},Be.useRef=function(S){return ee.H.useRef(S)},Be.useState=function(S){return ee.H.useState(S)},Be.useSyncExternalStore=function(S,Q,ne){return ee.H.useSyncExternalStore(S,Q,ne)},Be.useTransition=function(){return ee.H.useTransition()},Be.version="19.1.0",Be}var wE;function Uu(){return wE||(wE=1,cp.exports=UN()),cp.exports}var B=Uu();const fe=Ix(B),BN=VN({__proto__:null,default:fe},[B]);var up={exports:{}},Gc={},dp={exports:{}},hp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xE;function jN(){return xE||(xE=1,function(t){function e(R,W){var G=R.length;R.push(W);e:for(;0<G;){var Y=G-1>>>1,S=R[Y];if(0<a(S,W))R[Y]=W,R[G]=S,G=Y;else break e}}function n(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var W=R[0],G=R.pop();if(G!==W){R[0]=G;e:for(var Y=0,S=R.length,Q=S>>>1;Y<Q;){var ne=2*(Y+1)-1,K=R[ne],te=ne+1,le=R[te];if(0>a(K,G))te<S&&0>a(le,K)?(R[Y]=le,R[te]=G,Y=te):(R[Y]=K,R[ne]=G,Y=ne);else if(te<S&&0>a(le,G))R[Y]=le,R[te]=G,Y=te;else break e}}return W}function a(R,W){var G=R.sortIndex-W.sortIndex;return G!==0?G:R.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var f=[],m=[],y=1,v=null,b=3,x=!1,O=!1,k=!1,M=!1,V=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function j(R){for(var W=n(m);W!==null;){if(W.callback===null)i(m);else if(W.startTime<=R)i(m),W.sortIndex=W.expirationTime,e(f,W);else break;W=n(m)}}function ee(R){if(k=!1,j(R),!O)if(n(f)!==null)O=!0,Z||(Z=!0,H());else{var W=n(m);W!==null&&$(ee,W.startTime-R)}}var Z=!1,N=-1,A=5,C=-1;function z(){return M?!0:!(t.unstable_now()-C<A)}function U(){if(M=!1,Z){var R=t.unstable_now();C=R;var W=!0;try{e:{O=!1,k&&(k=!1,q(N),N=-1),x=!0;var G=b;try{t:{for(j(R),v=n(f);v!==null&&!(v.expirationTime>R&&z());){var Y=v.callback;if(typeof Y=="function"){v.callback=null,b=v.priorityLevel;var S=Y(v.expirationTime<=R);if(R=t.unstable_now(),typeof S=="function"){v.callback=S,j(R),W=!0;break t}v===n(f)&&i(f),j(R)}else i(f);v=n(f)}if(v!==null)W=!0;else{var Q=n(m);Q!==null&&$(ee,Q.startTime-R),W=!1}}break e}finally{v=null,b=G,x=!1}W=void 0}}finally{W?H():Z=!1}}}var H;if(typeof F=="function")H=function(){F(U)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,P=I.port2;I.port1.onmessage=U,H=function(){P.postMessage(null)}}else H=function(){V(U,0)};function $(R,W){N=V(function(){R(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(R){switch(b){case 1:case 2:case 3:var W=3;break;default:W=b}var G=b;b=W;try{return R()}finally{b=G}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(R,W){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var G=b;b=R;try{return W()}finally{b=G}},t.unstable_scheduleCallback=function(R,W,G){var Y=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Y+G:Y):G=Y,R){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=G+S,R={id:y++,callback:W,priorityLevel:R,startTime:G,expirationTime:S,sortIndex:-1},G>Y?(R.sortIndex=G,e(m,R),n(f)===null&&R===n(m)&&(k?(q(N),N=-1):k=!0,$(ee,G-Y))):(R.sortIndex=S,e(f,R),O||x||(O=!0,Z||(Z=!0,H()))),R},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(R){var W=b;return function(){var G=b;b=W;try{return R.apply(this,arguments)}finally{b=G}}}}(hp)),hp}var TE;function HN(){return TE||(TE=1,dp.exports=jN()),dp.exports}var fp={exports:{}},bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE;function $N(){if(SE)return bn;SE=1;var t=Uu();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,m,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:f,containerInfo:m,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,bn.createPortal=function(f,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(f,m,null,y)},bn.flushSync=function(f){var m=c.T,y=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=m,i.p=y,i.d.f()}},bn.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(f,m))},bn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},bn.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,x=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?i.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:x}):y==="script"&&i.d.X(f,{crossOrigin:v,integrity:b,fetchPriority:x,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},bn.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=d(m.as,m.crossOrigin);i.d.M(f,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(f)},bn.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin);i.d.L(f,y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},bn.preloadModule=function(f,m){if(typeof f=="string")if(m){var y=d(m.as,m.crossOrigin);i.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(f)},bn.requestFormReset=function(f){i.d.r(f)},bn.unstable_batchedUpdates=function(f,m){return f(m)},bn.useFormState=function(f,m,y){return c.H.useFormState(f,m,y)},bn.useFormStatus=function(){return c.H.useHostTransitionStatus()},bn.version="19.1.0",bn}var AE;function kx(){if(AE)return fp.exports;AE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),fp.exports=$N(),fp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RE;function qN(){if(RE)return Gc;RE=1;var t=HN(),e=Uu(),n=kx();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(i(188))}function f(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var g=o.return;if(g===null)break;var p=g.alternate;if(p===null){if(u=g.return,u!==null){o=u;continue}break}if(g.child===p.child){for(p=g.child;p;){if(p===o)return d(g),r;if(p===u)return d(g),s;p=p.sibling}throw Error(i(188))}if(o.return!==u.return)o=g,u=p;else{for(var w=!1,D=g.child;D;){if(D===o){w=!0,o=g,u=p;break}if(D===u){w=!0,u=g,o=p;break}D=D.sibling}if(!w){for(D=p.child;D;){if(D===o){w=!0,o=p,u=g;break}if(D===u){w=!0,u=p,o=g;break}D=D.sibling}if(!w)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function m(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=m(r),s!==null)return s;r=r.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),F=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function H(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var I=Symbol.for("react.client.reference");function P(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===I?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case O:return"Fragment";case M:return"Profiler";case k:return"StrictMode";case ee:return"Suspense";case Z:return"SuspenseList";case C:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case x:return"Portal";case F:return(r.displayName||"Context")+".Provider";case q:return(r._context.displayName||"Context")+".Consumer";case j:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case N:return s=r.displayName||null,s!==null?s:P(r.type)||"Memo";case A:s=r._payload,r=r._init;try{return P(r(s))}catch{}}return null}var $=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},Y=[],S=-1;function Q(r){return{current:r}}function ne(r){0>S||(r.current=Y[S],Y[S]=null,S--)}function K(r,s){S++,Y[S]=r.current,r.current=s}var te=Q(null),le=Q(null),de=Q(null),ge=Q(null);function _e(r,s){switch(K(de,s),K(le,r),K(te,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?Yb(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=Yb(s),r=Xb(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ne(te),K(te,r)}function Ae(){ne(te),ne(le),ne(de)}function Ne(r){r.memoizedState!==null&&K(ge,r);var s=te.current,o=Xb(s,r.type);s!==o&&(K(le,r),K(te,o))}function nt(r){le.current===r&&(ne(te),ne(le)),ge.current===r&&(ne(ge),Bc._currentValue=G)}var Ge=Object.prototype.hasOwnProperty,ke=t.unstable_scheduleCallback,Ve=t.unstable_cancelCallback,it=t.unstable_shouldYield,Lt=t.unstable_requestPaint,Ue=t.unstable_now,Ee=t.unstable_getCurrentPriorityLevel,At=t.unstable_ImmediatePriority,vn=t.unstable_UserBlockingPriority,Gt=t.unstable_NormalPriority,qn=t.unstable_LowPriority,Rn=t.unstable_IdlePriority,Nn=t.log,Cr=t.unstable_setDisableYieldValue,at=null,Ye=null;function zt(r){if(typeof Nn=="function"&&Cr(r),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(at,r)}catch{}}var Et=Math.clz32?Math.clz32:Jt,Gr=Math.log,Ut=Math.LN2;function Jt(r){return r>>>=0,r===0?32:31-(Gr(r)/Ut|0)|0}var Cn=256,In=4194304;function en(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function cn(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var g=0,p=r.suspendedLanes,w=r.pingedLanes;r=r.warmLanes;var D=u&134217727;return D!==0?(u=D&~p,u!==0?g=en(u):(w&=D,w!==0?g=en(w):o||(o=D&~r,o!==0&&(g=en(o))))):(D=u&~p,D!==0?g=en(D):w!==0?g=en(w):o||(o=u&~r,o!==0&&(g=en(o)))),g===0?0:s!==0&&s!==g&&(s&p)===0&&(p=g&-g,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:g}function kn(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Ti(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Si(){var r=Cn;return Cn<<=1,(Cn&4194048)===0&&(Cn=256),r}function Ir(){var r=In;return In<<=1,(In&62914560)===0&&(In=4194304),r}function Fn(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function ur(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Gn(r,s,o,u,g,p){var w=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var D=r.entanglements,X=r.expirationTimes,ae=r.hiddenUpdates;for(o=w&~o;0<o;){var he=31-Et(o),pe=1<<he;D[he]=0,X[he]=-1;var oe=ae[he];if(oe!==null)for(ae[he]=null,he=0;he<oe.length;he++){var ce=oe[he];ce!==null&&(ce.lane&=-536870913)}o&=~pe}u!==0&&dr(r,u,0),p!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=p&~(w&~s))}function dr(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-Et(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function ca(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-Et(o),g=1<<u;g&s|r[u]&s&&(r[u]|=s),o&=~g}}function Yr(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function as(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Xr(){var r=W.p;return r!==0?r:(r=window.event,r===void 0?32:fE(r.type))}function uo(r,s){var o=W.p;try{return W.p=r,s()}finally{W.p=o}}var pt=Math.random().toString(36).slice(2),Ot="__reactFiber$"+pt,Rt="__reactProps$"+pt,Vn="__reactContainer$"+pt,ua="__reactEvents$"+pt,Gl="__reactListeners$"+pt,Kr="__reactHandles$"+pt,ho="__reactResources$"+pt,Ai="__reactMarker$"+pt;function Qr(r){delete r[Ot],delete r[Rt],delete r[ua],delete r[Gl],delete r[Kr]}function hr(r){var s=r[Ot];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Vn]||o[Ot]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=Zb(r);r!==null;){if(o=r[Ot])return o;r=Zb(r)}return s}r=o,o=r.parentNode}return null}function fr(r){if(r=r[Ot]||r[Vn]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function gr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function un(r){var s=r[ho];return s||(s=r[ho]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function wt(r){r[Ai]=!0}var da=new Set,os={};function Yn(r,s){kr(r,s),kr(r+"Capture",s)}function kr(r,s){for(os[r]=s,r=0;r<s.length;r++)da.add(s[r])}var ha=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fo={},Ri={};function go(r){return Ge.call(Ri,r)?!0:Ge.call(fo,r)?!1:ha.test(r)?Ri[r]=!0:(fo[r]=!0,!1)}function Wr(r,s,o){if(go(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function mr(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Yt(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var Zr,mo;function Dr(r){if(Zr===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Zr=s&&s[1]||"",mo=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zr+r+mo}var ls=!1;function Jr(r,s){if(!r||ls)return"";ls=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ce){var oe=ce}Reflect.construct(r,[],pe)}else{try{pe.call()}catch(ce){oe=ce}r.call(pe.prototype)}}else{try{throw Error()}catch(ce){oe=ce}(pe=r())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ce){if(ce&&oe&&typeof ce.stack=="string")return[ce.stack,oe.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),w=p[0],D=p[1];if(w&&D){var X=w.split(`
`),ae=D.split(`
`);for(g=u=0;u<X.length&&!X[u].includes("DetermineComponentFrameRoot");)u++;for(;g<ae.length&&!ae[g].includes("DetermineComponentFrameRoot");)g++;if(u===X.length||g===ae.length)for(u=X.length-1,g=ae.length-1;1<=u&&0<=g&&X[u]!==ae[g];)g--;for(;1<=u&&0<=g;u--,g--)if(X[u]!==ae[g]){if(u!==1||g!==1)do if(u--,g--,0>g||X[u]!==ae[g]){var he=`
`+X[u].replace(" at new "," at ");return r.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",r.displayName)),he}while(1<=u&&0<=g);break}}}finally{ls=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Dr(o):""}function Yl(r){switch(r.tag){case 26:case 27:case 5:return Dr(r.type);case 16:return Dr("Lazy");case 13:return Dr("Suspense");case 19:return Dr("SuspenseList");case 0:case 15:return Jr(r.type,!1);case 11:return Jr(r.type.render,!1);case 1:return Jr(r.type,!0);case 31:return Dr("Activity");default:return""}}function po(r){try{var s="";do s+=Yl(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Dn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Xl(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function hg(r){var s=Xl(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var g=o.get,p=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return g.call(this)},set:function(w){u=""+w,p.call(this,w)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function yo(r){r._valueTracker||(r._valueTracker=hg(r))}function Kl(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=Xl(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function fa(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var fg=/[\n"\\]/g;function Bt(r){return r.replace(fg,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Xn(r,s,o,u,g,p,w,D){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),s!=null?w==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Dn(s)):r.value!==""+Dn(s)&&(r.value=""+Dn(s)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),s!=null?cs(r,w,Dn(s)):o!=null?cs(r,w,Dn(o)):u!=null&&r.removeAttribute("value"),g==null&&p!=null&&(r.defaultChecked=!!p),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?r.name=""+Dn(D):r.removeAttribute("name")}function ga(r,s,o,u,g,p,w,D){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(r.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+Dn(o):"",s=s!=null?""+Dn(s):o,D||s===r.value||(r.value=s),r.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=D?r.checked:!!u,r.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w)}function cs(r,s,o){s==="number"&&fa(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ni(r,s,o,u){if(r=r.options,s){s={};for(var g=0;g<o.length;g++)s["$"+o[g]]=!0;for(o=0;o<r.length;o++)g=s.hasOwnProperty("$"+r[o].value),r[o].selected!==g&&(r[o].selected=g),g&&u&&(r[o].defaultSelected=!0)}else{for(o=""+Dn(o),s=null,g=0;g<r.length;g++){if(r[g].value===o){r[g].selected=!0,u&&(r[g].defaultSelected=!0);return}s!==null||r[g].disabled||(s=r[g])}s!==null&&(s.selected=!0)}}function dt(r,s,o){if(s!=null&&(s=""+Dn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+Dn(o):""}function ma(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if($(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Dn(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function pr(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var pa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function td(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||pa.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Ql(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&o[g]!==u&&td(r,g,u)}else for(var p in s)s.hasOwnProperty(p)&&td(r,p,s[p])}function Wl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vo(r){return mg.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Ci=null;function yr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ii=null,ki=null;function Zl(r){var s=fr(r);if(s&&(r=s.stateNode)){var o=r[Rt]||null;e:switch(r=s.stateNode,s.type){case"input":if(Xn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Bt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var g=u[Rt]||null;if(!g)throw Error(i(90));Xn(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&Kl(u)}break e;case"textarea":dt(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ni(r,!!o.multiple,s,!1)}}}var ei=!1;function nd(r,s,o){if(ei)return r(s,o);ei=!0;try{var u=r(s);return u}finally{if(ei=!1,(Ii!==null||ki!==null)&&(Kd(),Ii&&(s=Ii,r=ki,ki=Ii=null,Zl(s),r)))for(s=0;s<r.length;s++)Zl(r[s])}}function ya(r,s){var o=r.stateNode;if(o===null)return null;var u=o[Rt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vr=!1;if(Or)try{var va={};Object.defineProperty(va,"passive",{get:function(){vr=!0}}),window.addEventListener("test",va,va),window.removeEventListener("test",va,va)}catch{vr=!1}var ti=null,us=null,Di=null;function Jl(){if(Di)return Di;var r,s=us,o=s.length,u,g="value"in ti?ti.value:ti.textContent,p=g.length;for(r=0;r<o&&s[r]===g[r];r++);var w=o-r;for(u=1;u<=w&&s[o-u]===g[p-u];u++);return Di=g.slice(r,1<u?1-u:void 0)}function ni(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ri(){return!0}function ec(){return!1}function tn(r){function s(o,u,g,p,w){this._reactName=o,this._targetInst=g,this.type=u,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var D in r)r.hasOwnProperty(D)&&(o=r[D],this[D]=o?o(p):p[D]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ri:ec,this.isPropagationStopped=ec,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),s}var ot={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_o=tn(ot),_a=y({},ot,{view:0,detail:0}),rd=tn(_a),bo,Eo,ii,ba=y({},_a,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xa,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ii&&(ii&&r.type==="mousemove"?(bo=r.screenX-ii.screenX,Eo=r.screenY-ii.screenY):Eo=bo=0,ii=r),bo)},movementY:function(r){return"movementY"in r?r.movementY:Eo}}),_r=tn(ba),id=y({},ba,{dataTransfer:0}),pg=tn(id),Ea=y({},_a,{relatedTarget:0}),wo=tn(Ea),tc=y({},ot,{animationName:0,elapsedTime:0,pseudoElement:0}),xo=tn(tc),sd=y({},ot,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),To=tn(sd),yg=y({},ot,{data:0}),nc=tn(yg),wa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ad={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rc(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=od[r])?!!s[r]:!1}function xa(){return rc}var ld=y({},_a,{key:function(r){if(r.key){var s=wa[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=ni(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?ad[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xa,charCode:function(r){return r.type==="keypress"?ni(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ni(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),So=tn(ld),cd=y({},ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ic=tn(cd),Oi=y({},_a,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xa}),ud=tn(Oi),dd=y({},ot,{propertyName:0,elapsedTime:0,pseudoElement:0}),hd=tn(dd),fd=y({},ba,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ao=tn(fd),On=y({},ot,{newState:0,oldState:0}),gd=tn(On),md=[9,13,27,32],si=Or&&"CompositionEvent"in window,h=null;Or&&"documentMode"in document&&(h=document.documentMode);var _=Or&&"TextEvent"in window&&!h,E=Or&&(!si||h&&8<h&&11>=h),L=" ",ie=!1;function ue(r,s){switch(r){case"keyup":return md.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function be(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ze=!1;function Xt(r,s){switch(r){case"compositionend":return be(s);case"keypress":return s.which!==32?null:(ie=!0,L);case"textInput":return r=s.data,r===L&&ie?null:r;default:return null}}function Je(r,s){if(Ze)return r==="compositionend"||!si&&ue(r,s)?(r=Jl(),Di=us=ti=null,Ze=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kt(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!nn[r.type]:s==="textarea"}function Mi(r,s,o,u){Ii?ki?ki.push(u):ki=[u]:Ii=u,s=th(s,"onChange"),0<s.length&&(o=new _o("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var dn=null,ai=null;function sc(r){Hb(r,0)}function pd(r){var s=gr(r);if(Kl(s))return r}function cv(r,s){if(r==="change")return s}var uv=!1;if(Or){var vg;if(Or){var _g="oninput"in document;if(!_g){var dv=document.createElement("div");dv.setAttribute("oninput","return;"),_g=typeof dv.oninput=="function"}vg=_g}else vg=!1;uv=vg&&(!document.documentMode||9<document.documentMode)}function hv(){dn&&(dn.detachEvent("onpropertychange",fv),ai=dn=null)}function fv(r){if(r.propertyName==="value"&&pd(ai)){var s=[];Mi(s,ai,r,yr(r)),nd(sc,s)}}function hR(r,s,o){r==="focusin"?(hv(),dn=s,ai=o,dn.attachEvent("onpropertychange",fv)):r==="focusout"&&hv()}function fR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return pd(ai)}function gR(r,s){if(r==="click")return pd(s)}function mR(r,s){if(r==="input"||r==="change")return pd(s)}function pR(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Kn=typeof Object.is=="function"?Object.is:pR;function ac(r,s){if(Kn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var g=o[u];if(!Ge.call(s,g)||!Kn(r[g],s[g]))return!1}return!0}function gv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function mv(r,s){var o=gv(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=gv(o)}}function pv(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?pv(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function yv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=fa(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=fa(r.document)}return s}function bg(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var yR=Or&&"documentMode"in document&&11>=document.documentMode,Ro=null,Eg=null,oc=null,wg=!1;function vv(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;wg||Ro==null||Ro!==fa(u)||(u=Ro,"selectionStart"in u&&bg(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),oc&&ac(oc,u)||(oc=u,u=th(Eg,"onSelect"),0<u.length&&(s=new _o("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=Ro)))}function Ta(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var No={animationend:Ta("Animation","AnimationEnd"),animationiteration:Ta("Animation","AnimationIteration"),animationstart:Ta("Animation","AnimationStart"),transitionrun:Ta("Transition","TransitionRun"),transitionstart:Ta("Transition","TransitionStart"),transitioncancel:Ta("Transition","TransitionCancel"),transitionend:Ta("Transition","TransitionEnd")},xg={},_v={};Or&&(_v=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function Sa(r){if(xg[r])return xg[r];if(!No[r])return r;var s=No[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in _v)return xg[r]=s[o];return r}var bv=Sa("animationend"),Ev=Sa("animationiteration"),wv=Sa("animationstart"),vR=Sa("transitionrun"),_R=Sa("transitionstart"),bR=Sa("transitioncancel"),xv=Sa("transitionend"),Tv=new Map,Tg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tg.push("scrollEnd");function Mr(r,s){Tv.set(r,s),Yn(s,[r])}var Sv=new WeakMap;function br(r,s){if(typeof r=="object"&&r!==null){var o=Sv.get(r);return o!==void 0?o:(s={value:r,source:s,stack:po(s)},Sv.set(r,s),s)}return{value:r,source:s,stack:po(s)}}var Er=[],Co=0,Sg=0;function yd(){for(var r=Co,s=Sg=Co=0;s<r;){var o=Er[s];Er[s++]=null;var u=Er[s];Er[s++]=null;var g=Er[s];Er[s++]=null;var p=Er[s];if(Er[s++]=null,u!==null&&g!==null){var w=u.pending;w===null?g.next=g:(g.next=w.next,w.next=g),u.pending=g}p!==0&&Av(o,g,p)}}function vd(r,s,o,u){Er[Co++]=r,Er[Co++]=s,Er[Co++]=o,Er[Co++]=u,Sg|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Ag(r,s,o,u){return vd(r,s,o,u),_d(r)}function Io(r,s){return vd(r,null,null,s),_d(r)}function Av(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var g=!1,p=r.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(r=p.stateNode,r===null||r._visibility&1||(g=!0)),r=p,p=p.return;return r.tag===3?(p=r.stateNode,g&&s!==null&&(g=31-Et(o),r=p.hiddenUpdates,u=r[g],u===null?r[g]=[s]:u.push(s),s.lane=o|536870912),p):null}function _d(r){if(50<Dc)throw Dc=0,Dm=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var ko={};function ER(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(r,s,o,u){return new ER(r,s,o,u)}function Rg(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Pi(r,s){var o=r.alternate;return o===null?(o=Qn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Rv(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function bd(r,s,o,u,g,p){var w=0;if(u=r,typeof r=="function")Rg(r)&&(w=1);else if(typeof r=="string")w=xN(r,o,te.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case C:return r=Qn(31,o,s,g),r.elementType=C,r.lanes=p,r;case O:return Aa(o.children,g,p,s);case k:w=8,g|=24;break;case M:return r=Qn(12,o,s,g|2),r.elementType=M,r.lanes=p,r;case ee:return r=Qn(13,o,s,g),r.elementType=ee,r.lanes=p,r;case Z:return r=Qn(19,o,s,g),r.elementType=Z,r.lanes=p,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case V:case F:w=10;break e;case q:w=9;break e;case j:w=11;break e;case N:w=14;break e;case A:w=16,u=null;break e}w=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=Qn(w,o,s,g),s.elementType=r,s.type=u,s.lanes=p,s}function Aa(r,s,o,u){return r=Qn(7,r,u,s),r.lanes=o,r}function Ng(r,s,o){return r=Qn(6,r,null,s),r.lanes=o,r}function Cg(r,s,o){return s=Qn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Do=[],Oo=0,Ed=null,wd=0,wr=[],xr=0,Ra=null,Vi=1,Li="";function Na(r,s){Do[Oo++]=wd,Do[Oo++]=Ed,Ed=r,wd=s}function Nv(r,s,o){wr[xr++]=Vi,wr[xr++]=Li,wr[xr++]=Ra,Ra=r;var u=Vi;r=Li;var g=32-Et(u)-1;u&=~(1<<g),o+=1;var p=32-Et(s)+g;if(30<p){var w=g-g%5;p=(u&(1<<w)-1).toString(32),u>>=w,g-=w,Vi=1<<32-Et(s)+g|o<<g|u,Li=p+r}else Vi=1<<p|o<<g|u,Li=r}function Ig(r){r.return!==null&&(Na(r,1),Nv(r,1,0))}function kg(r){for(;r===Ed;)Ed=Do[--Oo],Do[Oo]=null,wd=Do[--Oo],Do[Oo]=null;for(;r===Ra;)Ra=wr[--xr],wr[xr]=null,Li=wr[--xr],wr[xr]=null,Vi=wr[--xr],wr[xr]=null}var Mn=null,Nt=null,st=!1,Ca=null,oi=!1,Dg=Error(i(519));function Ia(r){var s=Error(i(418,""));throw uc(br(s,r)),Dg}function Cv(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[Ot]=r,s[Rt]=u,o){case"dialog":Ke("cancel",s),Ke("close",s);break;case"iframe":case"object":case"embed":Ke("load",s);break;case"video":case"audio":for(o=0;o<Mc.length;o++)Ke(Mc[o],s);break;case"source":Ke("error",s);break;case"img":case"image":case"link":Ke("error",s),Ke("load",s);break;case"details":Ke("toggle",s);break;case"input":Ke("invalid",s),ga(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),yo(s);break;case"select":Ke("invalid",s);break;case"textarea":Ke("invalid",s),ma(s,u.value,u.defaultValue,u.children),yo(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||Gb(s.textContent,o)?(u.popover!=null&&(Ke("beforetoggle",s),Ke("toggle",s)),u.onScroll!=null&&Ke("scroll",s),u.onScrollEnd!=null&&Ke("scrollend",s),u.onClick!=null&&(s.onclick=nh),s=!0):s=!1,s||Ia(r)}function Iv(r){for(Mn=r.return;Mn;)switch(Mn.tag){case 5:case 13:oi=!1;return;case 27:case 3:oi=!0;return;default:Mn=Mn.return}}function lc(r){if(r!==Mn)return!1;if(!st)return Iv(r),st=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Xm(r.type,r.memoizedProps)),o=!o),o&&Nt&&Ia(r),Iv(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){Nt=Vr(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}Nt=null}}else s===27?(s=Nt,As(r.type)?(r=Zm,Zm=null,Nt=r):Nt=s):Nt=Mn?Vr(r.stateNode.nextSibling):null;return!0}function cc(){Nt=Mn=null,st=!1}function kv(){var r=Ca;return r!==null&&(Un===null?Un=r:Un.push.apply(Un,r),Ca=null),r}function uc(r){Ca===null?Ca=[r]:Ca.push(r)}var Og=Q(null),ka=null,zi=null;function ds(r,s,o){K(Og,s._currentValue),s._currentValue=o}function Ui(r){r._currentValue=Og.current,ne(Og)}function Mg(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function Pg(r,s,o,u){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var p=g.dependencies;if(p!==null){var w=g.child;p=p.firstContext;e:for(;p!==null;){var D=p;p=g;for(var X=0;X<s.length;X++)if(D.context===s[X]){p.lanes|=o,D=p.alternate,D!==null&&(D.lanes|=o),Mg(p.return,o,r),u||(w=null);break e}p=D.next}}else if(g.tag===18){if(w=g.return,w===null)throw Error(i(341));w.lanes|=o,p=w.alternate,p!==null&&(p.lanes|=o),Mg(w,o,r),w=null}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===r){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}}function dc(r,s,o,u){r=null;for(var g=s,p=!1;g!==null;){if(!p){if((g.flags&524288)!==0)p=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var w=g.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var D=g.type;Kn(g.pendingProps.value,w.value)||(r!==null?r.push(D):r=[D])}}else if(g===ge.current){if(w=g.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(Bc):r=[Bc])}g=g.return}r!==null&&Pg(s,r,o,u),s.flags|=262144}function xd(r){for(r=r.firstContext;r!==null;){if(!Kn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Da(r){ka=r,zi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function _n(r){return Dv(ka,r)}function Td(r,s){return ka===null&&Da(r),Dv(r,s)}function Dv(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},zi===null){if(r===null)throw Error(i(308));zi=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else zi=zi.next=s;return o}var wR=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},xR=t.unstable_scheduleCallback,TR=t.unstable_NormalPriority,Qt={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vg(){return{controller:new wR,data:new Map,refCount:0}}function hc(r){r.refCount--,r.refCount===0&&xR(TR,function(){r.controller.abort()})}var fc=null,Lg=0,Mo=0,Po=null;function SR(r,s){if(fc===null){var o=fc=[];Lg=0,Mo=Um(),Po={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Lg++,s.then(Ov,Ov),s}function Ov(){if(--Lg===0&&fc!==null){Po!==null&&(Po.status="fulfilled");var r=fc;fc=null,Mo=0,Po=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function AR(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<o.length;g++)(0,o[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),u}var Mv=R.S;R.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&SR(r,s),Mv!==null&&Mv(r,s)};var Oa=Q(null);function zg(){var r=Oa.current;return r!==null?r:yt.pooledCache}function Sd(r,s){s===null?K(Oa,Oa.current):K(Oa,s.pool)}function Pv(){var r=zg();return r===null?null:{parent:Qt._currentValue,pool:r}}var gc=Error(i(460)),Vv=Error(i(474)),Ad=Error(i(542)),Ug={then:function(){}};function Lv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Rd(){}function zv(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Rd,Rd),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Bv(r),r;default:if(typeof s.status=="string")s.then(Rd,Rd);else{if(r=yt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Bv(r),r}throw mc=s,gc}}var mc=null;function Uv(){if(mc===null)throw Error(i(459));var r=mc;return mc=null,r}function Bv(r){if(r===gc||r===Ad)throw Error(i(483))}var hs=!1;function Bg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function fs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function gs(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(ct&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=_d(r),Av(r,null,o),s}return vd(r,u,s,o),_d(r)}function pc(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,ca(r,o)}}function Hg(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var g=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?g=p=w:p=p.next=w,o=o.next}while(o!==null);p===null?g=p=s:p=p.next=s}else g=p=s;o={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var $g=!1;function yc(){if($g){var r=Po;if(r!==null)throw r}}function vc(r,s,o,u){$g=!1;var g=r.updateQueue;hs=!1;var p=g.firstBaseUpdate,w=g.lastBaseUpdate,D=g.shared.pending;if(D!==null){g.shared.pending=null;var X=D,ae=X.next;X.next=null,w===null?p=ae:w.next=ae,w=X;var he=r.alternate;he!==null&&(he=he.updateQueue,D=he.lastBaseUpdate,D!==w&&(D===null?he.firstBaseUpdate=ae:D.next=ae,he.lastBaseUpdate=X))}if(p!==null){var pe=g.baseState;w=0,he=ae=X=null,D=p;do{var oe=D.lane&-536870913,ce=oe!==D.lane;if(ce?(et&oe)===oe:(u&oe)===oe){oe!==0&&oe===Mo&&($g=!0),he!==null&&(he=he.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Pe=r,Ie=D;oe=s;var gt=o;switch(Ie.tag){case 1:if(Pe=Ie.payload,typeof Pe=="function"){pe=Pe.call(gt,pe,oe);break e}pe=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ie.payload,oe=typeof Pe=="function"?Pe.call(gt,pe,oe):Pe,oe==null)break e;pe=y({},pe,oe);break e;case 2:hs=!0}}oe=D.callback,oe!==null&&(r.flags|=64,ce&&(r.flags|=8192),ce=g.callbacks,ce===null?g.callbacks=[oe]:ce.push(oe))}else ce={lane:oe,tag:D.tag,payload:D.payload,callback:D.callback,next:null},he===null?(ae=he=ce,X=pe):he=he.next=ce,w|=oe;if(D=D.next,D===null){if(D=g.shared.pending,D===null)break;ce=D,D=ce.next,ce.next=null,g.lastBaseUpdate=ce,g.shared.pending=null}}while(!0);he===null&&(X=pe),g.baseState=X,g.firstBaseUpdate=ae,g.lastBaseUpdate=he,p===null&&(g.shared.lanes=0),ws|=w,r.lanes=w,r.memoizedState=pe}}function jv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function Hv(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)jv(o[r],s)}var Vo=Q(null),Nd=Q(0);function $v(r,s){r=Gi,K(Nd,r),K(Vo,s),Gi=r|s.baseLanes}function qg(){K(Nd,Gi),K(Vo,Vo.current)}function Fg(){Gi=Nd.current,ne(Vo),ne(Nd)}var ms=0,He=null,ht=null,jt=null,Cd=!1,Lo=!1,Ma=!1,Id=0,_c=0,zo=null,RR=0;function Mt(){throw Error(i(321))}function Gg(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Kn(r[o],s[o]))return!1;return!0}function Yg(r,s,o,u,g,p){return ms=p,He=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,R.H=r===null||r.memoizedState===null?A_:R_,Ma=!1,p=o(u,g),Ma=!1,Lo&&(p=Fv(s,o,u,g)),qv(r),p}function qv(r){R.H=Vd;var s=ht!==null&&ht.next!==null;if(ms=0,jt=ht=He=null,Cd=!1,_c=0,zo=null,s)throw Error(i(300));r===null||rn||(r=r.dependencies,r!==null&&xd(r)&&(rn=!0))}function Fv(r,s,o,u){He=r;var g=0;do{if(Lo&&(zo=null),_c=0,Lo=!1,25<=g)throw Error(i(301));if(g+=1,jt=ht=null,r.updateQueue!=null){var p=r.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}R.H=MR,p=s(o,u)}while(Lo);return p}function NR(){var r=R.H,s=r.useState()[0];return s=typeof s.then=="function"?bc(s):s,r=r.useState()[0],(ht!==null?ht.memoizedState:null)!==r&&(He.flags|=1024),s}function Xg(){var r=Id!==0;return Id=0,r}function Kg(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function Qg(r){if(Cd){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Cd=!1}ms=0,jt=ht=He=null,Lo=!1,_c=Id=0,zo=null}function Ln(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?He.memoizedState=jt=r:jt=jt.next=r,jt}function Ht(){if(ht===null){var r=He.alternate;r=r!==null?r.memoizedState:null}else r=ht.next;var s=jt===null?He.memoizedState:jt.next;if(s!==null)jt=s,ht=r;else{if(r===null)throw He.alternate===null?Error(i(467)):Error(i(310));ht=r,r={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},jt===null?He.memoizedState=jt=r:jt=jt.next=r}return jt}function Wg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bc(r){var s=_c;return _c+=1,zo===null&&(zo=[]),r=zv(zo,r,s),s=He,(jt===null?s.memoizedState:jt.next)===null&&(s=s.alternate,R.H=s===null||s.memoizedState===null?A_:R_),r}function kd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return bc(r);if(r.$$typeof===F)return _n(r)}throw Error(i(438,String(r)))}function Zg(r){var s=null,o=He.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=He.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Wg(),He.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=z;return s.index++,o}function Bi(r,s){return typeof s=="function"?s(r):s}function Dd(r){var s=Ht();return Jg(s,ht,r)}function Jg(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var g=r.baseQueue,p=u.pending;if(p!==null){if(g!==null){var w=g.next;g.next=p.next,p.next=w}s.baseQueue=g=p,u.pending=null}if(p=r.baseState,g===null)r.memoizedState=p;else{s=g.next;var D=w=null,X=null,ae=s,he=!1;do{var pe=ae.lane&-536870913;if(pe!==ae.lane?(et&pe)===pe:(ms&pe)===pe){var oe=ae.revertLane;if(oe===0)X!==null&&(X=X.next={lane:0,revertLane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),pe===Mo&&(he=!0);else if((ms&oe)===oe){ae=ae.next,oe===Mo&&(he=!0);continue}else pe={lane:0,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},X===null?(D=X=pe,w=p):X=X.next=pe,He.lanes|=oe,ws|=oe;pe=ae.action,Ma&&o(p,pe),p=ae.hasEagerState?ae.eagerState:o(p,pe)}else oe={lane:pe,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},X===null?(D=X=oe,w=p):X=X.next=oe,He.lanes|=pe,ws|=pe;ae=ae.next}while(ae!==null&&ae!==s);if(X===null?w=p:X.next=D,!Kn(p,r.memoizedState)&&(rn=!0,he&&(o=Po,o!==null)))throw o;r.memoizedState=p,r.baseState=w,r.baseQueue=X,u.lastRenderedState=p}return g===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function em(r){var s=Ht(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,g=o.pending,p=s.memoizedState;if(g!==null){o.pending=null;var w=g=g.next;do p=r(p,w.action),w=w.next;while(w!==g);Kn(p,s.memoizedState)||(rn=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function Gv(r,s,o){var u=He,g=Ht(),p=st;if(p){if(o===void 0)throw Error(i(407));o=o()}else o=s();var w=!Kn((ht||g).memoizedState,o);w&&(g.memoizedState=o,rn=!0),g=g.queue;var D=Kv.bind(null,u,g,r);if(Ec(2048,8,D,[r]),g.getSnapshot!==s||w||jt!==null&&jt.memoizedState.tag&1){if(u.flags|=2048,Uo(9,Od(),Xv.bind(null,u,g,o,s),null),yt===null)throw Error(i(349));p||(ms&124)!==0||Yv(u,s,o)}return o}function Yv(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=He.updateQueue,s===null?(s=Wg(),He.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function Xv(r,s,o,u){s.value=o,s.getSnapshot=u,Qv(s)&&Wv(r)}function Kv(r,s,o){return o(function(){Qv(s)&&Wv(r)})}function Qv(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Kn(r,o)}catch{return!0}}function Wv(r){var s=Io(r,2);s!==null&&tr(s,r,2)}function tm(r){var s=Ln();if(typeof r=="function"){var o=r;if(r=o(),Ma){zt(!0);try{o()}finally{zt(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:r},s}function Zv(r,s,o,u){return r.baseState=o,Jg(r,ht,typeof u=="function"?u:Bi)}function CR(r,s,o,u,g){if(Pd(r))throw Error(i(485));if(r=s.action,r!==null){var p={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};R.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,Jv(s,p)):(p.next=o.next,s.pending=o.next=p)}}function Jv(r,s){var o=s.action,u=s.payload,g=r.state;if(s.isTransition){var p=R.T,w={};R.T=w;try{var D=o(g,u),X=R.S;X!==null&&X(w,D),e_(r,s,D)}catch(ae){nm(r,s,ae)}finally{R.T=p}}else try{p=o(g,u),e_(r,s,p)}catch(ae){nm(r,s,ae)}}function e_(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){t_(r,s,u)},function(u){return nm(r,s,u)}):t_(r,s,o)}function t_(r,s,o){s.status="fulfilled",s.value=o,n_(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,Jv(r,o)))}function nm(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,n_(s),s=s.next;while(s!==u)}r.action=null}function n_(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function r_(r,s){return s}function i_(r,s){if(st){var o=yt.formState;if(o!==null){e:{var u=He;if(st){if(Nt){t:{for(var g=Nt,p=oi;g.nodeType!==8;){if(!p){g=null;break t}if(g=Vr(g.nextSibling),g===null){g=null;break t}}p=g.data,g=p==="F!"||p==="F"?g:null}if(g){Nt=Vr(g.nextSibling),u=g.data==="F!";break e}}Ia(u)}u=!1}u&&(s=o[0])}}return o=Ln(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r_,lastRenderedState:s},o.queue=u,o=x_.bind(null,He,u),u.dispatch=o,u=tm(!1),p=om.bind(null,He,!1,u.queue),u=Ln(),g={state:s,dispatch:null,action:r,pending:null},u.queue=g,o=CR.bind(null,He,g,p,o),g.dispatch=o,u.memoizedState=r,[s,o,!1]}function s_(r){var s=Ht();return a_(s,ht,r)}function a_(r,s,o){if(s=Jg(r,s,r_)[0],r=Dd(Bi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=bc(s)}catch(w){throw w===gc?Ad:w}else u=s;s=Ht();var g=s.queue,p=g.dispatch;return o!==s.memoizedState&&(He.flags|=2048,Uo(9,Od(),IR.bind(null,g,o),null)),[u,p,r]}function IR(r,s){r.action=s}function o_(r){var s=Ht(),o=ht;if(o!==null)return a_(s,o,r);Ht(),s=s.memoizedState,o=Ht();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function Uo(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=He.updateQueue,s===null&&(s=Wg(),He.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function Od(){return{destroy:void 0,resource:void 0}}function l_(){return Ht().memoizedState}function Md(r,s,o,u){var g=Ln();u=u===void 0?null:u,He.flags|=r,g.memoizedState=Uo(1|s,Od(),o,u)}function Ec(r,s,o,u){var g=Ht();u=u===void 0?null:u;var p=g.memoizedState.inst;ht!==null&&u!==null&&Gg(u,ht.memoizedState.deps)?g.memoizedState=Uo(s,p,o,u):(He.flags|=r,g.memoizedState=Uo(1|s,p,o,u))}function c_(r,s){Md(8390656,8,r,s)}function u_(r,s){Ec(2048,8,r,s)}function d_(r,s){return Ec(4,2,r,s)}function h_(r,s){return Ec(4,4,r,s)}function f_(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function g_(r,s,o){o=o!=null?o.concat([r]):null,Ec(4,4,f_.bind(null,s,r),o)}function rm(){}function m_(r,s){var o=Ht();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Gg(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function p_(r,s){var o=Ht();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Gg(s,u[1]))return u[0];if(u=r(),Ma){zt(!0);try{r()}finally{zt(!1)}}return o.memoizedState=[u,s],u}function im(r,s,o){return o===void 0||(ms&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=_b(),He.lanes|=r,ws|=r,o)}function y_(r,s,o,u){return Kn(o,s)?o:Vo.current!==null?(r=im(r,o,u),Kn(r,s)||(rn=!0),r):(ms&42)===0?(rn=!0,r.memoizedState=o):(r=_b(),He.lanes|=r,ws|=r,s)}function v_(r,s,o,u,g){var p=W.p;W.p=p!==0&&8>p?p:8;var w=R.T,D={};R.T=D,om(r,!1,s,o);try{var X=g(),ae=R.S;if(ae!==null&&ae(D,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var he=AR(X,u);wc(r,s,he,er(r))}else wc(r,s,u,er(r))}catch(pe){wc(r,s,{then:function(){},status:"rejected",reason:pe},er())}finally{W.p=p,R.T=w}}function kR(){}function sm(r,s,o,u){if(r.tag!==5)throw Error(i(476));var g=__(r).queue;v_(r,g,s,G,o===null?kR:function(){return b_(r),o(u)})}function __(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:G},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function b_(r){var s=__(r).next.queue;wc(r,s,{},er())}function am(){return _n(Bc)}function E_(){return Ht().memoizedState}function w_(){return Ht().memoizedState}function DR(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=er();r=fs(o);var u=gs(s,r,o);u!==null&&(tr(u,s,o),pc(u,s,o)),s={cache:Vg()},r.payload=s;return}s=s.return}}function OR(r,s,o){var u=er();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Pd(r)?T_(s,o):(o=Ag(r,s,o,u),o!==null&&(tr(o,r,u),S_(o,s,u)))}function x_(r,s,o){var u=er();wc(r,s,o,u)}function wc(r,s,o,u){var g={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Pd(r))T_(s,g);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var w=s.lastRenderedState,D=p(w,o);if(g.hasEagerState=!0,g.eagerState=D,Kn(D,w))return vd(r,s,g,0),yt===null&&yd(),!1}catch{}finally{}if(o=Ag(r,s,g,u),o!==null)return tr(o,r,u),S_(o,s,u),!0}return!1}function om(r,s,o,u){if(u={lane:2,revertLane:Um(),action:u,hasEagerState:!1,eagerState:null,next:null},Pd(r)){if(s)throw Error(i(479))}else s=Ag(r,o,u,2),s!==null&&tr(s,r,2)}function Pd(r){var s=r.alternate;return r===He||s!==null&&s===He}function T_(r,s){Lo=Cd=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function S_(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,ca(r,o)}}var Vd={readContext:_n,use:kd,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt},A_={readContext:_n,use:kd,useCallback:function(r,s){return Ln().memoizedState=[r,s===void 0?null:s],r},useContext:_n,useEffect:c_,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Md(4194308,4,f_.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Md(4194308,4,r,s)},useInsertionEffect:function(r,s){Md(4,2,r,s)},useMemo:function(r,s){var o=Ln();s=s===void 0?null:s;var u=r();if(Ma){zt(!0);try{r()}finally{zt(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=Ln();if(o!==void 0){var g=o(s);if(Ma){zt(!0);try{o(s)}finally{zt(!1)}}}else g=s;return u.memoizedState=u.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},u.queue=r,r=r.dispatch=OR.bind(null,He,r),[u.memoizedState,r]},useRef:function(r){var s=Ln();return r={current:r},s.memoizedState=r},useState:function(r){r=tm(r);var s=r.queue,o=x_.bind(null,He,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:rm,useDeferredValue:function(r,s){var o=Ln();return im(o,r,s)},useTransition:function(){var r=tm(!1);return r=v_.bind(null,He,r.queue,!0,!1),Ln().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=He,g=Ln();if(st){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),yt===null)throw Error(i(349));(et&124)!==0||Yv(u,s,o)}g.memoizedState=o;var p={value:o,getSnapshot:s};return g.queue=p,c_(Kv.bind(null,u,p,r),[r]),u.flags|=2048,Uo(9,Od(),Xv.bind(null,u,p,o,s),null),o},useId:function(){var r=Ln(),s=yt.identifierPrefix;if(st){var o=Li,u=Vi;o=(u&~(1<<32-Et(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=Id++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=RR++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:am,useFormState:i_,useActionState:i_,useOptimistic:function(r){var s=Ln();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=om.bind(null,He,!0,o),o.dispatch=s,[r,s]},useMemoCache:Zg,useCacheRefresh:function(){return Ln().memoizedState=DR.bind(null,He)}},R_={readContext:_n,use:kd,useCallback:m_,useContext:_n,useEffect:u_,useImperativeHandle:g_,useInsertionEffect:d_,useLayoutEffect:h_,useMemo:p_,useReducer:Dd,useRef:l_,useState:function(){return Dd(Bi)},useDebugValue:rm,useDeferredValue:function(r,s){var o=Ht();return y_(o,ht.memoizedState,r,s)},useTransition:function(){var r=Dd(Bi)[0],s=Ht().memoizedState;return[typeof r=="boolean"?r:bc(r),s]},useSyncExternalStore:Gv,useId:E_,useHostTransitionStatus:am,useFormState:s_,useActionState:s_,useOptimistic:function(r,s){var o=Ht();return Zv(o,ht,r,s)},useMemoCache:Zg,useCacheRefresh:w_},MR={readContext:_n,use:kd,useCallback:m_,useContext:_n,useEffect:u_,useImperativeHandle:g_,useInsertionEffect:d_,useLayoutEffect:h_,useMemo:p_,useReducer:em,useRef:l_,useState:function(){return em(Bi)},useDebugValue:rm,useDeferredValue:function(r,s){var o=Ht();return ht===null?im(o,r,s):y_(o,ht.memoizedState,r,s)},useTransition:function(){var r=em(Bi)[0],s=Ht().memoizedState;return[typeof r=="boolean"?r:bc(r),s]},useSyncExternalStore:Gv,useId:E_,useHostTransitionStatus:am,useFormState:o_,useActionState:o_,useOptimistic:function(r,s){var o=Ht();return ht!==null?Zv(o,ht,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Zg,useCacheRefresh:w_},Bo=null,xc=0;function Ld(r){var s=xc;return xc+=1,Bo===null&&(Bo=[]),zv(Bo,r,s)}function Tc(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function zd(r,s){throw s.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function N_(r){var s=r._init;return s(r._payload)}function C_(r){function s(re,J){if(r){var se=re.deletions;se===null?(re.deletions=[J],re.flags|=16):se.push(J)}}function o(re,J){if(!r)return null;for(;J!==null;)s(re,J),J=J.sibling;return null}function u(re){for(var J=new Map;re!==null;)re.key!==null?J.set(re.key,re):J.set(re.index,re),re=re.sibling;return J}function g(re,J){return re=Pi(re,J),re.index=0,re.sibling=null,re}function p(re,J,se){return re.index=se,r?(se=re.alternate,se!==null?(se=se.index,se<J?(re.flags|=67108866,J):se):(re.flags|=67108866,J)):(re.flags|=1048576,J)}function w(re){return r&&re.alternate===null&&(re.flags|=67108866),re}function D(re,J,se,me){return J===null||J.tag!==6?(J=Ng(se,re.mode,me),J.return=re,J):(J=g(J,se),J.return=re,J)}function X(re,J,se,me){var Se=se.type;return Se===O?he(re,J,se.props.children,me,se.key):J!==null&&(J.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===A&&N_(Se)===J.type)?(J=g(J,se.props),Tc(J,se),J.return=re,J):(J=bd(se.type,se.key,se.props,null,re.mode,me),Tc(J,se),J.return=re,J)}function ae(re,J,se,me){return J===null||J.tag!==4||J.stateNode.containerInfo!==se.containerInfo||J.stateNode.implementation!==se.implementation?(J=Cg(se,re.mode,me),J.return=re,J):(J=g(J,se.children||[]),J.return=re,J)}function he(re,J,se,me,Se){return J===null||J.tag!==7?(J=Aa(se,re.mode,me,Se),J.return=re,J):(J=g(J,se),J.return=re,J)}function pe(re,J,se){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=Ng(""+J,re.mode,se),J.return=re,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return se=bd(J.type,J.key,J.props,null,re.mode,se),Tc(se,J),se.return=re,se;case x:return J=Cg(J,re.mode,se),J.return=re,J;case A:var me=J._init;return J=me(J._payload),pe(re,J,se)}if($(J)||H(J))return J=Aa(J,re.mode,se,null),J.return=re,J;if(typeof J.then=="function")return pe(re,Ld(J),se);if(J.$$typeof===F)return pe(re,Td(re,J),se);zd(re,J)}return null}function oe(re,J,se,me){var Se=J!==null?J.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Se!==null?null:D(re,J,""+se,me);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case b:return se.key===Se?X(re,J,se,me):null;case x:return se.key===Se?ae(re,J,se,me):null;case A:return Se=se._init,se=Se(se._payload),oe(re,J,se,me)}if($(se)||H(se))return Se!==null?null:he(re,J,se,me,null);if(typeof se.then=="function")return oe(re,J,Ld(se),me);if(se.$$typeof===F)return oe(re,J,Td(re,se),me);zd(re,se)}return null}function ce(re,J,se,me,Se){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return re=re.get(se)||null,D(J,re,""+me,Se);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case b:return re=re.get(me.key===null?se:me.key)||null,X(J,re,me,Se);case x:return re=re.get(me.key===null?se:me.key)||null,ae(J,re,me,Se);case A:var qe=me._init;return me=qe(me._payload),ce(re,J,se,me,Se)}if($(me)||H(me))return re=re.get(se)||null,he(J,re,me,Se,null);if(typeof me.then=="function")return ce(re,J,se,Ld(me),Se);if(me.$$typeof===F)return ce(re,J,se,Td(J,me),Se);zd(J,me)}return null}function Pe(re,J,se,me){for(var Se=null,qe=null,Re=J,De=J=0,an=null;Re!==null&&De<se.length;De++){Re.index>De?(an=Re,Re=null):an=Re.sibling;var rt=oe(re,Re,se[De],me);if(rt===null){Re===null&&(Re=an);break}r&&Re&&rt.alternate===null&&s(re,Re),J=p(rt,J,De),qe===null?Se=rt:qe.sibling=rt,qe=rt,Re=an}if(De===se.length)return o(re,Re),st&&Na(re,De),Se;if(Re===null){for(;De<se.length;De++)Re=pe(re,se[De],me),Re!==null&&(J=p(Re,J,De),qe===null?Se=Re:qe.sibling=Re,qe=Re);return st&&Na(re,De),Se}for(Re=u(Re);De<se.length;De++)an=ce(Re,re,De,se[De],me),an!==null&&(r&&an.alternate!==null&&Re.delete(an.key===null?De:an.key),J=p(an,J,De),qe===null?Se=an:qe.sibling=an,qe=an);return r&&Re.forEach(function(ks){return s(re,ks)}),st&&Na(re,De),Se}function Ie(re,J,se,me){if(se==null)throw Error(i(151));for(var Se=null,qe=null,Re=J,De=J=0,an=null,rt=se.next();Re!==null&&!rt.done;De++,rt=se.next()){Re.index>De?(an=Re,Re=null):an=Re.sibling;var ks=oe(re,Re,rt.value,me);if(ks===null){Re===null&&(Re=an);break}r&&Re&&ks.alternate===null&&s(re,Re),J=p(ks,J,De),qe===null?Se=ks:qe.sibling=ks,qe=ks,Re=an}if(rt.done)return o(re,Re),st&&Na(re,De),Se;if(Re===null){for(;!rt.done;De++,rt=se.next())rt=pe(re,rt.value,me),rt!==null&&(J=p(rt,J,De),qe===null?Se=rt:qe.sibling=rt,qe=rt);return st&&Na(re,De),Se}for(Re=u(Re);!rt.done;De++,rt=se.next())rt=ce(Re,re,De,rt.value,me),rt!==null&&(r&&rt.alternate!==null&&Re.delete(rt.key===null?De:rt.key),J=p(rt,J,De),qe===null?Se=rt:qe.sibling=rt,qe=rt);return r&&Re.forEach(function(PN){return s(re,PN)}),st&&Na(re,De),Se}function gt(re,J,se,me){if(typeof se=="object"&&se!==null&&se.type===O&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case b:e:{for(var Se=se.key;J!==null;){if(J.key===Se){if(Se=se.type,Se===O){if(J.tag===7){o(re,J.sibling),me=g(J,se.props.children),me.return=re,re=me;break e}}else if(J.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===A&&N_(Se)===J.type){o(re,J.sibling),me=g(J,se.props),Tc(me,se),me.return=re,re=me;break e}o(re,J);break}else s(re,J);J=J.sibling}se.type===O?(me=Aa(se.props.children,re.mode,me,se.key),me.return=re,re=me):(me=bd(se.type,se.key,se.props,null,re.mode,me),Tc(me,se),me.return=re,re=me)}return w(re);case x:e:{for(Se=se.key;J!==null;){if(J.key===Se)if(J.tag===4&&J.stateNode.containerInfo===se.containerInfo&&J.stateNode.implementation===se.implementation){o(re,J.sibling),me=g(J,se.children||[]),me.return=re,re=me;break e}else{o(re,J);break}else s(re,J);J=J.sibling}me=Cg(se,re.mode,me),me.return=re,re=me}return w(re);case A:return Se=se._init,se=Se(se._payload),gt(re,J,se,me)}if($(se))return Pe(re,J,se,me);if(H(se)){if(Se=H(se),typeof Se!="function")throw Error(i(150));return se=Se.call(se),Ie(re,J,se,me)}if(typeof se.then=="function")return gt(re,J,Ld(se),me);if(se.$$typeof===F)return gt(re,J,Td(re,se),me);zd(re,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,J!==null&&J.tag===6?(o(re,J.sibling),me=g(J,se),me.return=re,re=me):(o(re,J),me=Ng(se,re.mode,me),me.return=re,re=me),w(re)):o(re,J)}return function(re,J,se,me){try{xc=0;var Se=gt(re,J,se,me);return Bo=null,Se}catch(Re){if(Re===gc||Re===Ad)throw Re;var qe=Qn(29,Re,null,re.mode);return qe.lanes=me,qe.return=re,qe}finally{}}}var jo=C_(!0),I_=C_(!1),Tr=Q(null),li=null;function ps(r){var s=r.alternate;K(Wt,Wt.current&1),K(Tr,r),li===null&&(s===null||Vo.current!==null||s.memoizedState!==null)&&(li=r)}function k_(r){if(r.tag===22){if(K(Wt,Wt.current),K(Tr,r),li===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(li=r)}}else ys()}function ys(){K(Wt,Wt.current),K(Tr,Tr.current)}function ji(r){ne(Tr),li===r&&(li=null),ne(Wt)}var Wt=Q(0);function Ud(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Wm(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function lm(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var cm={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=er(),g=fs(u);g.payload=s,o!=null&&(g.callback=o),s=gs(r,g,u),s!==null&&(tr(s,r,u),pc(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=er(),g=fs(u);g.tag=1,g.payload=s,o!=null&&(g.callback=o),s=gs(r,g,u),s!==null&&(tr(s,r,u),pc(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=er(),u=fs(o);u.tag=2,s!=null&&(u.callback=s),s=gs(r,u,o),s!==null&&(tr(s,r,o),pc(s,r,o))}};function D_(r,s,o,u,g,p,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,p,w):s.prototype&&s.prototype.isPureReactComponent?!ac(o,u)||!ac(g,p):!0}function O_(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&cm.enqueueReplaceState(s,s.state,null)}function Pa(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=y({},o));for(var g in r)o[g]===void 0&&(o[g]=r[g])}return o}var Bd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function M_(r){Bd(r)}function P_(r){console.error(r)}function V_(r){Bd(r)}function jd(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function L_(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function um(r,s,o){return o=fs(o),o.tag=3,o.payload={element:null},o.callback=function(){jd(r,s)},o}function z_(r){return r=fs(r),r.tag=3,r}function U_(r,s,o,u){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var p=u.value;r.payload=function(){return g(p)},r.callback=function(){L_(s,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){L_(s,o,u),typeof g!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var D=u.stack;this.componentDidCatch(u.value,{componentStack:D!==null?D:""})})}function PR(r,s,o,u,g){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&dc(s,o,g,!0),o=Tr.current,o!==null){switch(o.tag){case 13:return li===null?Mm():o.alternate===null&&Ct===0&&(Ct=3),o.flags&=-257,o.flags|=65536,o.lanes=g,u===Ug?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Vm(r,u,g)),!1;case 22:return o.flags|=65536,u===Ug?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Vm(r,u,g)),!1}throw Error(i(435,o.tag))}return Vm(r,u,g),Mm(),!1}if(st)return s=Tr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==Dg&&(r=Error(i(422),{cause:u}),uc(br(r,o)))):(u!==Dg&&(s=Error(i(423),{cause:u}),uc(br(s,o))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,u=br(u,o),g=um(r.stateNode,u,g),Hg(r,g),Ct!==4&&(Ct=2)),!1;var p=Error(i(520),{cause:u});if(p=br(p,o),kc===null?kc=[p]:kc.push(p),Ct!==4&&(Ct=2),s===null)return!0;u=br(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=g&-g,o.lanes|=r,r=um(o.stateNode,u,r),Hg(o,r),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(xs===null||!xs.has(p))))return o.flags|=65536,g&=-g,o.lanes|=g,g=z_(g),U_(g,r,o,u),Hg(o,g),!1}o=o.return}while(o!==null);return!1}var B_=Error(i(461)),rn=!1;function hn(r,s,o,u){s.child=r===null?I_(s,null,o,u):jo(s,r.child,o,u)}function j_(r,s,o,u,g){o=o.render;var p=s.ref;if("ref"in u){var w={};for(var D in u)D!=="ref"&&(w[D]=u[D])}else w=u;return Da(s),u=Yg(r,s,o,w,p,g),D=Xg(),r!==null&&!rn?(Kg(r,s,g),Hi(r,s,g)):(st&&D&&Ig(s),s.flags|=1,hn(r,s,u,g),s.child)}function H_(r,s,o,u,g){if(r===null){var p=o.type;return typeof p=="function"&&!Rg(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,$_(r,s,p,u,g)):(r=bd(o.type,null,u,s,s.mode,g),r.ref=s.ref,r.return=s,s.child=r)}if(p=r.child,!vm(r,g)){var w=p.memoizedProps;if(o=o.compare,o=o!==null?o:ac,o(w,u)&&r.ref===s.ref)return Hi(r,s,g)}return s.flags|=1,r=Pi(p,u),r.ref=s.ref,r.return=s,s.child=r}function $_(r,s,o,u,g){if(r!==null){var p=r.memoizedProps;if(ac(p,u)&&r.ref===s.ref)if(rn=!1,s.pendingProps=u=p,vm(r,g))(r.flags&131072)!==0&&(rn=!0);else return s.lanes=r.lanes,Hi(r,s,g)}return dm(r,s,o,u,g)}function q_(r,s,o){var u=s.pendingProps,g=u.children,p=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,r!==null){for(g=s.child=r.child,p=0;g!==null;)p=p|g.lanes|g.childLanes,g=g.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return F_(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Sd(s,p!==null?p.cachePool:null),p!==null?$v(s,p):qg(),k_(s);else return s.lanes=s.childLanes=536870912,F_(r,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(Sd(s,p.cachePool),$v(s,p),ys(),s.memoizedState=null):(r!==null&&Sd(s,null),qg(),ys());return hn(r,s,g,o),s.child}function F_(r,s,o,u){var g=zg();return g=g===null?null:{parent:Qt._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},r!==null&&Sd(s,null),qg(),k_(s),r!==null&&dc(r,s,u,!0),null}function Hd(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function dm(r,s,o,u,g){return Da(s),o=Yg(r,s,o,u,void 0,g),u=Xg(),r!==null&&!rn?(Kg(r,s,g),Hi(r,s,g)):(st&&u&&Ig(s),s.flags|=1,hn(r,s,o,g),s.child)}function G_(r,s,o,u,g,p){return Da(s),s.updateQueue=null,o=Fv(s,u,o,g),qv(r),u=Xg(),r!==null&&!rn?(Kg(r,s,p),Hi(r,s,p)):(st&&u&&Ig(s),s.flags|=1,hn(r,s,o,p),s.child)}function Y_(r,s,o,u,g){if(Da(s),s.stateNode===null){var p=ko,w=o.contextType;typeof w=="object"&&w!==null&&(p=_n(w)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=cm,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},Bg(s),w=o.contextType,p.context=typeof w=="object"&&w!==null?_n(w):ko,p.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(lm(s,o,w,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&cm.enqueueReplaceState(p,p.state,null),vc(s,u,p,g),yc(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){p=s.stateNode;var D=s.memoizedProps,X=Pa(o,D);p.props=X;var ae=p.context,he=o.contextType;w=ko,typeof he=="object"&&he!==null&&(w=_n(he));var pe=o.getDerivedStateFromProps;he=typeof pe=="function"||typeof p.getSnapshotBeforeUpdate=="function",D=s.pendingProps!==D,he||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(D||ae!==w)&&O_(s,p,u,w),hs=!1;var oe=s.memoizedState;p.state=oe,vc(s,u,p,g),yc(),ae=s.memoizedState,D||oe!==ae||hs?(typeof pe=="function"&&(lm(s,o,pe,u),ae=s.memoizedState),(X=hs||D_(s,o,X,u,oe,ae,w))?(he||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=ae),p.props=u,p.state=ae,p.context=w,u=X):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,jg(r,s),w=s.memoizedProps,he=Pa(o,w),p.props=he,pe=s.pendingProps,oe=p.context,ae=o.contextType,X=ko,typeof ae=="object"&&ae!==null&&(X=_n(ae)),D=o.getDerivedStateFromProps,(ae=typeof D=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==pe||oe!==X)&&O_(s,p,u,X),hs=!1,oe=s.memoizedState,p.state=oe,vc(s,u,p,g),yc();var ce=s.memoizedState;w!==pe||oe!==ce||hs||r!==null&&r.dependencies!==null&&xd(r.dependencies)?(typeof D=="function"&&(lm(s,o,D,u),ce=s.memoizedState),(he=hs||D_(s,o,he,u,oe,ce,X)||r!==null&&r.dependencies!==null&&xd(r.dependencies))?(ae||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,ce,X),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,ce,X)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===r.memoizedProps&&oe===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&oe===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=ce),p.props=u,p.state=ce,p.context=X,u=he):(typeof p.componentDidUpdate!="function"||w===r.memoizedProps&&oe===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&oe===r.memoizedState||(s.flags|=1024),u=!1)}return p=u,Hd(r,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,r!==null&&u?(s.child=jo(s,r.child,null,g),s.child=jo(s,null,o,g)):hn(r,s,o,g),s.memoizedState=p.state,r=s.child):r=Hi(r,s,g),r}function X_(r,s,o,u){return cc(),s.flags|=256,hn(r,s,o,u),s.child}var hm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fm(r){return{baseLanes:r,cachePool:Pv()}}function gm(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Sr),r}function K_(r,s,o){var u=s.pendingProps,g=!1,p=(s.flags&128)!==0,w;if((w=p)||(w=r!==null&&r.memoizedState===null?!1:(Wt.current&2)!==0),w&&(g=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,r===null){if(st){if(g?ps(s):ys(),st){var D=Nt,X;if(X=D){e:{for(X=D,D=oi;X.nodeType!==8;){if(!D){D=null;break e}if(X=Vr(X.nextSibling),X===null){D=null;break e}}D=X}D!==null?(s.memoizedState={dehydrated:D,treeContext:Ra!==null?{id:Vi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},X=Qn(18,null,null,0),X.stateNode=D,X.return=s,s.child=X,Mn=s,Nt=null,X=!0):X=!1}X||Ia(s)}if(D=s.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return Wm(D)?s.lanes=32:s.lanes=536870912,null;ji(s)}return D=u.children,u=u.fallback,g?(ys(),g=s.mode,D=$d({mode:"hidden",children:D},g),u=Aa(u,g,o,null),D.return=s,u.return=s,D.sibling=u,s.child=D,g=s.child,g.memoizedState=fm(o),g.childLanes=gm(r,w,o),s.memoizedState=hm,u):(ps(s),mm(s,D))}if(X=r.memoizedState,X!==null&&(D=X.dehydrated,D!==null)){if(p)s.flags&256?(ps(s),s.flags&=-257,s=pm(r,s,o)):s.memoizedState!==null?(ys(),s.child=r.child,s.flags|=128,s=null):(ys(),g=u.fallback,D=s.mode,u=$d({mode:"visible",children:u.children},D),g=Aa(g,D,o,null),g.flags|=2,u.return=s,g.return=s,u.sibling=g,s.child=u,jo(s,r.child,null,o),u=s.child,u.memoizedState=fm(o),u.childLanes=gm(r,w,o),s.memoizedState=hm,s=g);else if(ps(s),Wm(D)){if(w=D.nextSibling&&D.nextSibling.dataset,w)var ae=w.dgst;w=ae,u=Error(i(419)),u.stack="",u.digest=w,uc({value:u,source:null,stack:null}),s=pm(r,s,o)}else if(rn||dc(r,s,o,!1),w=(o&r.childLanes)!==0,rn||w){if(w=yt,w!==null&&(u=o&-o,u=(u&42)!==0?1:Yr(u),u=(u&(w.suspendedLanes|o))!==0?0:u,u!==0&&u!==X.retryLane))throw X.retryLane=u,Io(r,u),tr(w,r,u),B_;D.data==="$?"||Mm(),s=pm(r,s,o)}else D.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=X.treeContext,Nt=Vr(D.nextSibling),Mn=s,st=!0,Ca=null,oi=!1,r!==null&&(wr[xr++]=Vi,wr[xr++]=Li,wr[xr++]=Ra,Vi=r.id,Li=r.overflow,Ra=s),s=mm(s,u.children),s.flags|=4096);return s}return g?(ys(),g=u.fallback,D=s.mode,X=r.child,ae=X.sibling,u=Pi(X,{mode:"hidden",children:u.children}),u.subtreeFlags=X.subtreeFlags&65011712,ae!==null?g=Pi(ae,g):(g=Aa(g,D,o,null),g.flags|=2),g.return=s,u.return=s,u.sibling=g,s.child=u,u=g,g=s.child,D=r.child.memoizedState,D===null?D=fm(o):(X=D.cachePool,X!==null?(ae=Qt._currentValue,X=X.parent!==ae?{parent:ae,pool:ae}:X):X=Pv(),D={baseLanes:D.baseLanes|o,cachePool:X}),g.memoizedState=D,g.childLanes=gm(r,w,o),s.memoizedState=hm,u):(ps(s),o=r.child,r=o.sibling,o=Pi(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(w=s.deletions,w===null?(s.deletions=[r],s.flags|=16):w.push(r)),s.child=o,s.memoizedState=null,o)}function mm(r,s){return s=$d({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function $d(r,s){return r=Qn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function pm(r,s,o){return jo(s,r.child,null,o),r=mm(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Q_(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Mg(r.return,s,o)}function ym(r,s,o,u,g){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:g}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=g)}function W_(r,s,o){var u=s.pendingProps,g=u.revealOrder,p=u.tail;if(hn(r,s,u.children,o),u=Wt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Q_(r,o,s);else if(r.tag===19)Q_(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(K(Wt,u),g){case"forwards":for(o=s.child,g=null;o!==null;)r=o.alternate,r!==null&&Ud(r)===null&&(g=o),o=o.sibling;o=g,o===null?(g=s.child,s.child=null):(g=o.sibling,o.sibling=null),ym(s,!1,g,o,p);break;case"backwards":for(o=null,g=s.child,s.child=null;g!==null;){if(r=g.alternate,r!==null&&Ud(r)===null){s.child=g;break}r=g.sibling,g.sibling=o,o=g,g=r}ym(s,!0,o,null,p);break;case"together":ym(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Hi(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),ws|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(dc(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Pi(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Pi(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function vm(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&xd(r)))}function VR(r,s,o){switch(s.tag){case 3:_e(s,s.stateNode.containerInfo),ds(s,Qt,r.memoizedState.cache),cc();break;case 27:case 5:Ne(s);break;case 4:_e(s,s.stateNode.containerInfo);break;case 10:ds(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(ps(s),s.flags|=128,null):(o&s.child.childLanes)!==0?K_(r,s,o):(ps(s),r=Hi(r,s,o),r!==null?r.sibling:null);ps(s);break;case 19:var g=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(dc(r,s,o,!1),u=(o&s.childLanes)!==0),g){if(u)return W_(r,s,o);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),K(Wt,Wt.current),u)break;return null;case 22:case 23:return s.lanes=0,q_(r,s,o);case 24:ds(s,Qt,r.memoizedState.cache)}return Hi(r,s,o)}function Z_(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)rn=!0;else{if(!vm(r,o)&&(s.flags&128)===0)return rn=!1,VR(r,s,o);rn=(r.flags&131072)!==0}else rn=!1,st&&(s.flags&1048576)!==0&&Nv(s,wd,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var u=s.elementType,g=u._init;if(u=g(u._payload),s.type=u,typeof u=="function")Rg(u)?(r=Pa(u,r),s.tag=1,s=Y_(null,s,u,r,o)):(s.tag=0,s=dm(null,s,u,r,o));else{if(u!=null){if(g=u.$$typeof,g===j){s.tag=11,s=j_(null,s,u,r,o);break e}else if(g===N){s.tag=14,s=H_(null,s,u,r,o);break e}}throw s=P(u)||u,Error(i(306,s,""))}}return s;case 0:return dm(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,g=Pa(u,s.pendingProps),Y_(r,s,u,g,o);case 3:e:{if(_e(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var p=s.memoizedState;g=p.element,jg(r,s),vc(s,u,null,o);var w=s.memoizedState;if(u=w.cache,ds(s,Qt,u),u!==p.cache&&Pg(s,[Qt],o,!0),yc(),u=w.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=X_(r,s,u,o);break e}else if(u!==g){g=br(Error(i(424)),s),uc(g),s=X_(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Nt=Vr(r.firstChild),Mn=s,st=!0,Ca=null,oi=!0,o=I_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(cc(),u===g){s=Hi(r,s,o);break e}hn(r,s,u,o)}s=s.child}return s;case 26:return Hd(r,s),r===null?(o=nE(s.type,null,s.pendingProps,null))?s.memoizedState=o:st||(o=s.type,r=s.pendingProps,u=rh(de.current).createElement(o),u[Ot]=s,u[Rt]=r,gn(u,o,r),wt(u),s.stateNode=u):s.memoizedState=nE(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ne(s),r===null&&st&&(u=s.stateNode=Jb(s.type,s.pendingProps,de.current),Mn=s,oi=!0,g=Nt,As(s.type)?(Zm=g,Nt=Vr(u.firstChild)):Nt=g),hn(r,s,s.pendingProps.children,o),Hd(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&st&&((g=u=Nt)&&(u=uN(u,s.type,s.pendingProps,oi),u!==null?(s.stateNode=u,Mn=s,Nt=Vr(u.firstChild),oi=!1,g=!0):g=!1),g||Ia(s)),Ne(s),g=s.type,p=s.pendingProps,w=r!==null?r.memoizedProps:null,u=p.children,Xm(g,p)?u=null:w!==null&&Xm(g,w)&&(s.flags|=32),s.memoizedState!==null&&(g=Yg(r,s,NR,null,null,o),Bc._currentValue=g),Hd(r,s),hn(r,s,u,o),s.child;case 6:return r===null&&st&&((r=o=Nt)&&(o=dN(o,s.pendingProps,oi),o!==null?(s.stateNode=o,Mn=s,Nt=null,r=!0):r=!1),r||Ia(s)),null;case 13:return K_(r,s,o);case 4:return _e(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=jo(s,null,u,o):hn(r,s,u,o),s.child;case 11:return j_(r,s,s.type,s.pendingProps,o);case 7:return hn(r,s,s.pendingProps,o),s.child;case 8:return hn(r,s,s.pendingProps.children,o),s.child;case 12:return hn(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,ds(s,s.type,u.value),hn(r,s,u.children,o),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,Da(s),g=_n(g),u=u(g),s.flags|=1,hn(r,s,u,o),s.child;case 14:return H_(r,s,s.type,s.pendingProps,o);case 15:return $_(r,s,s.type,s.pendingProps,o);case 19:return W_(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=$d(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Pi(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return q_(r,s,o);case 24:return Da(s),u=_n(Qt),r===null?(g=zg(),g===null&&(g=yt,p=Vg(),g.pooledCache=p,p.refCount++,p!==null&&(g.pooledCacheLanes|=o),g=p),s.memoizedState={parent:u,cache:g},Bg(s),ds(s,Qt,g)):((r.lanes&o)!==0&&(jg(r,s),vc(s,null,null,o),yc()),g=r.memoizedState,p=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),ds(s,Qt,u)):(u=p.cache,ds(s,Qt,u),u!==g.cache&&Pg(s,[Qt],o,!0))),hn(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function $i(r){r.flags|=4}function J_(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!oE(s)){if(s=Tr.current,s!==null&&((et&4194048)===et?li!==null:(et&62914560)!==et&&(et&536870912)===0||s!==li))throw mc=Ug,Vv;r.flags|=8192}}function qd(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Ir():536870912,r.lanes|=s,Fo|=s)}function Sc(r,s){if(!st)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function xt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var g=r.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function LR(r,s,o){var u=s.pendingProps;switch(kg(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(s),null;case 1:return xt(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ui(Qt),Ae(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(lc(s)?$i(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,kv())),xt(s),null;case 26:return o=s.memoizedState,r===null?($i(s),o!==null?(xt(s),J_(s,o)):(xt(s),s.flags&=-16777217)):o?o!==r.memoizedState?($i(s),xt(s),J_(s,o)):(xt(s),s.flags&=-16777217):(r.memoizedProps!==u&&$i(s),xt(s),s.flags&=-16777217),null;case 27:nt(s),o=de.current;var g=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&$i(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return xt(s),null}r=te.current,lc(s)?Cv(s):(r=Jb(g,u,o),s.stateNode=r,$i(s))}return xt(s),null;case 5:if(nt(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&$i(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return xt(s),null}if(r=te.current,lc(s))Cv(s);else{switch(g=rh(de.current),r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?g.createElement(o,{is:u.is}):g.createElement(o)}}r[Ot]=s,r[Rt]=u;e:for(g=s.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===s)break e;for(;g.sibling===null;){if(g.return===null||g.return===s)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}s.stateNode=r;e:switch(gn(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&$i(s)}}return xt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&$i(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=de.current,lc(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,g=Mn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}r[Ot]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Gb(r.nodeValue,o)),r||Ia(s)}else r=rh(r).createTextNode(u),r[Ot]=s,s.stateNode=r}return xt(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=lc(s),u!==null&&u.dehydrated!==null){if(r===null){if(!g)throw Error(i(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Ot]=s}else cc(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;xt(s),g=!1}else g=kv(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(ji(s),s):(ji(s),null)}if(ji(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==g&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),qd(s,s.updateQueue),xt(s),null;case 4:return Ae(),r===null&&$m(s.stateNode.containerInfo),xt(s),null;case 10:return Ui(s.type),xt(s),null;case 19:if(ne(Wt),g=s.memoizedState,g===null)return xt(s),null;if(u=(s.flags&128)!==0,p=g.rendering,p===null)if(u)Sc(g,!1);else{if(Ct!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(p=Ud(r),p!==null){for(s.flags|=128,Sc(g,!1),r=p.updateQueue,s.updateQueue=r,qd(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Rv(o,r),o=o.sibling;return K(Wt,Wt.current&1|2),s.child}r=r.sibling}g.tail!==null&&Ue()>Yd&&(s.flags|=128,u=!0,Sc(g,!1),s.lanes=4194304)}else{if(!u)if(r=Ud(p),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,qd(s,r),Sc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!p.alternate&&!st)return xt(s),null}else 2*Ue()-g.renderingStartTime>Yd&&o!==536870912&&(s.flags|=128,u=!0,Sc(g,!1),s.lanes=4194304);g.isBackwards?(p.sibling=s.child,s.child=p):(r=g.last,r!==null?r.sibling=p:s.child=p,g.last=p)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Ue(),s.sibling=null,r=Wt.current,K(Wt,u?r&1|2:r&1),s):(xt(s),null);case 22:case 23:return ji(s),Fg(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(xt(s),s.subtreeFlags&6&&(s.flags|=8192)):xt(s),o=s.updateQueue,o!==null&&qd(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&ne(Oa),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Ui(Qt),xt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function zR(r,s){switch(kg(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ui(Qt),Ae(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return nt(s),null;case 13:if(ji(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));cc()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return ne(Wt),null;case 4:return Ae(),null;case 10:return Ui(s.type),null;case 22:case 23:return ji(s),Fg(),r!==null&&ne(Oa),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Ui(Qt),null;case 25:return null;default:return null}}function eb(r,s){switch(kg(s),s.tag){case 3:Ui(Qt),Ae();break;case 26:case 27:case 5:nt(s);break;case 4:Ae();break;case 13:ji(s);break;case 19:ne(Wt);break;case 10:Ui(s.type);break;case 22:case 23:ji(s),Fg(),r!==null&&ne(Oa);break;case 24:Ui(Qt)}}function Ac(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var g=u.next;o=g;do{if((o.tag&r)===r){u=void 0;var p=o.create,w=o.inst;u=p(),w.destroy=u}o=o.next}while(o!==g)}}catch(D){mt(s,s.return,D)}}function vs(r,s,o){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var p=g.next;u=p;do{if((u.tag&r)===r){var w=u.inst,D=w.destroy;if(D!==void 0){w.destroy=void 0,g=s;var X=o,ae=D;try{ae()}catch(he){mt(g,X,he)}}}u=u.next}while(u!==p)}}catch(he){mt(s,s.return,he)}}function tb(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{Hv(s,o)}catch(u){mt(r,r.return,u)}}}function nb(r,s,o){o.props=Pa(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){mt(r,s,u)}}function Rc(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(g){mt(r,s,g)}}function ci(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(g){mt(r,s,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){mt(r,s,g)}else o.current=null}function rb(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(g){mt(r,r.return,g)}}function _m(r,s,o){try{var u=r.stateNode;sN(u,r.type,o,s),u[Rt]=s}catch(g){mt(r,r.return,g)}}function ib(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&As(r.type)||r.tag===4}function bm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ib(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&As(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Em(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=nh));else if(u!==4&&(u===27&&As(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Em(r,s,o),r=r.sibling;r!==null;)Em(r,s,o),r=r.sibling}function Fd(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&As(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Fd(r,s,o),r=r.sibling;r!==null;)Fd(r,s,o),r=r.sibling}function sb(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);gn(s,u,o),s[Ot]=r,s[Rt]=o}catch(p){mt(r,r.return,p)}}var qi=!1,Pt=!1,wm=!1,ab=typeof WeakSet=="function"?WeakSet:Set,sn=null;function UR(r,s){if(r=r.containerInfo,Gm=ch,r=yv(r),bg(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var g=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var w=0,D=-1,X=-1,ae=0,he=0,pe=r,oe=null;t:for(;;){for(var ce;pe!==o||g!==0&&pe.nodeType!==3||(D=w+g),pe!==p||u!==0&&pe.nodeType!==3||(X=w+u),pe.nodeType===3&&(w+=pe.nodeValue.length),(ce=pe.firstChild)!==null;)oe=pe,pe=ce;for(;;){if(pe===r)break t;if(oe===o&&++ae===g&&(D=w),oe===p&&++he===u&&(X=w),(ce=pe.nextSibling)!==null)break;pe=oe,oe=pe.parentNode}pe=ce}o=D===-1||X===-1?null:{start:D,end:X}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ym={focusedElem:r,selectionRange:o},ch=!1,sn=s;sn!==null;)if(s=sn,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,sn=r;else for(;sn!==null;){switch(s=sn,p=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&p!==null){r=void 0,o=s,g=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Pe=Pa(o.type,g,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(Pe,p),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ie){mt(o,o.return,Ie)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)Qm(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Qm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,sn=r;break}sn=s.return}}function ob(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:_s(r,o),u&4&&Ac(5,o);break;case 1:if(_s(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(w){mt(o,o.return,w)}else{var g=Pa(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(g,s,r.__reactInternalSnapshotBeforeUpdate)}catch(w){mt(o,o.return,w)}}u&64&&tb(o),u&512&&Rc(o,o.return);break;case 3:if(_s(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Hv(r,s)}catch(w){mt(o,o.return,w)}}break;case 27:s===null&&u&4&&sb(o);case 26:case 5:_s(r,o),s===null&&u&4&&rb(o),u&512&&Rc(o,o.return);break;case 12:_s(r,o);break;case 13:_s(r,o),u&4&&ub(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=XR.bind(null,o),hN(r,o))));break;case 22:if(u=o.memoizedState!==null||qi,!u){s=s!==null&&s.memoizedState!==null||Pt,g=qi;var p=Pt;qi=u,(Pt=s)&&!p?bs(r,o,(o.subtreeFlags&8772)!==0):_s(r,o),qi=g,Pt=p}break;case 30:break;default:_s(r,o)}}function lb(r){var s=r.alternate;s!==null&&(r.alternate=null,lb(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Qr(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var bt=null,zn=!1;function Fi(r,s,o){for(o=o.child;o!==null;)cb(r,s,o),o=o.sibling}function cb(r,s,o){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(at,o)}catch{}switch(o.tag){case 26:Pt||ci(o,s),Fi(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Pt||ci(o,s);var u=bt,g=zn;As(o.type)&&(bt=o.stateNode,zn=!1),Fi(r,s,o),Vc(o.stateNode),bt=u,zn=g;break;case 5:Pt||ci(o,s);case 6:if(u=bt,g=zn,bt=null,Fi(r,s,o),bt=u,zn=g,bt!==null)if(zn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(o.stateNode)}catch(p){mt(o,s,p)}else try{bt.removeChild(o.stateNode)}catch(p){mt(o,s,p)}break;case 18:bt!==null&&(zn?(r=bt,Wb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),qc(r)):Wb(bt,o.stateNode));break;case 4:u=bt,g=zn,bt=o.stateNode.containerInfo,zn=!0,Fi(r,s,o),bt=u,zn=g;break;case 0:case 11:case 14:case 15:Pt||vs(2,o,s),Pt||vs(4,o,s),Fi(r,s,o);break;case 1:Pt||(ci(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&nb(o,s,u)),Fi(r,s,o);break;case 21:Fi(r,s,o);break;case 22:Pt=(u=Pt)||o.memoizedState!==null,Fi(r,s,o),Pt=u;break;default:Fi(r,s,o)}}function ub(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{qc(r)}catch(o){mt(s,s.return,o)}}function BR(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new ab),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new ab),s;default:throw Error(i(435,r.tag))}}function xm(r,s){var o=BR(r);s.forEach(function(u){var g=KR.bind(null,r,u);o.has(u)||(o.add(u),u.then(g,g))})}function Wn(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var g=o[u],p=r,w=s,D=w;e:for(;D!==null;){switch(D.tag){case 27:if(As(D.type)){bt=D.stateNode,zn=!1;break e}break;case 5:bt=D.stateNode,zn=!1;break e;case 3:case 4:bt=D.stateNode.containerInfo,zn=!0;break e}D=D.return}if(bt===null)throw Error(i(160));cb(p,w,g),bt=null,zn=!1,p=g.alternate,p!==null&&(p.return=null),g.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)db(s,r),s=s.sibling}var Pr=null;function db(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Wn(s,r),Zn(r),u&4&&(vs(3,r,r.return),Ac(3,r),vs(5,r,r.return));break;case 1:Wn(s,r),Zn(r),u&512&&(Pt||o===null||ci(o,o.return)),u&64&&qi&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var g=Pr;if(Wn(s,r),Zn(r),u&512&&(Pt||o===null||ci(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":p=g.getElementsByTagName("title")[0],(!p||p[Ai]||p[Ot]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=g.createElement(u),g.head.insertBefore(p,g.querySelector("head > title"))),gn(p,u,o),p[Ot]=r,wt(p),u=p;break e;case"link":var w=sE("link","href",g).get(u+(o.href||""));if(w){for(var D=0;D<w.length;D++)if(p=w[D],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(D,1);break t}}p=g.createElement(u),gn(p,u,o),g.head.appendChild(p);break;case"meta":if(w=sE("meta","content",g).get(u+(o.content||""))){for(D=0;D<w.length;D++)if(p=w[D],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(D,1);break t}}p=g.createElement(u),gn(p,u,o),g.head.appendChild(p);break;default:throw Error(i(468,u))}p[Ot]=r,wt(p),u=p}r.stateNode=u}else aE(g,r.type,r.stateNode);else r.stateNode=iE(g,u,r.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?aE(g,r.type,r.stateNode):iE(g,u,r.memoizedProps)):u===null&&r.stateNode!==null&&_m(r,r.memoizedProps,o.memoizedProps)}break;case 27:Wn(s,r),Zn(r),u&512&&(Pt||o===null||ci(o,o.return)),o!==null&&u&4&&_m(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Wn(s,r),Zn(r),u&512&&(Pt||o===null||ci(o,o.return)),r.flags&32){g=r.stateNode;try{pr(g,"")}catch(ce){mt(r,r.return,ce)}}u&4&&r.stateNode!=null&&(g=r.memoizedProps,_m(r,g,o!==null?o.memoizedProps:g)),u&1024&&(wm=!0);break;case 6:if(Wn(s,r),Zn(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(ce){mt(r,r.return,ce)}}break;case 3:if(ah=null,g=Pr,Pr=ih(s.containerInfo),Wn(s,r),Pr=g,Zn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{qc(s.containerInfo)}catch(ce){mt(r,r.return,ce)}wm&&(wm=!1,hb(r));break;case 4:u=Pr,Pr=ih(r.stateNode.containerInfo),Wn(s,r),Zn(r),Pr=u;break;case 12:Wn(s,r),Zn(r);break;case 13:Wn(s,r),Zn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Cm=Ue()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,xm(r,u)));break;case 22:g=r.memoizedState!==null;var X=o!==null&&o.memoizedState!==null,ae=qi,he=Pt;if(qi=ae||g,Pt=he||X,Wn(s,r),Pt=he,qi=ae,Zn(r),u&8192)e:for(s=r.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(o===null||X||qi||Pt||Va(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){X=o=s;try{if(p=X.stateNode,g)w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{D=X.stateNode;var pe=X.memoizedProps.style,oe=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;D.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(ce){mt(X,X.return,ce)}}}else if(s.tag===6){if(o===null){X=s;try{X.stateNode.nodeValue=g?"":X.memoizedProps}catch(ce){mt(X,X.return,ce)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,xm(r,o))));break;case 19:Wn(s,r),Zn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,xm(r,u)));break;case 30:break;case 21:break;default:Wn(s,r),Zn(r)}}function Zn(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(ib(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var g=o.stateNode,p=bm(r);Fd(r,p,g);break;case 5:var w=o.stateNode;o.flags&32&&(pr(w,""),o.flags&=-33);var D=bm(r);Fd(r,D,w);break;case 3:case 4:var X=o.stateNode.containerInfo,ae=bm(r);Em(r,ae,X);break;default:throw Error(i(161))}}catch(he){mt(r,r.return,he)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function hb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;hb(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function _s(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)ob(r,s.alternate,s),s=s.sibling}function Va(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:vs(4,s,s.return),Va(s);break;case 1:ci(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&nb(s,s.return,o),Va(s);break;case 27:Vc(s.stateNode);case 26:case 5:ci(s,s.return),Va(s);break;case 22:s.memoizedState===null&&Va(s);break;case 30:Va(s);break;default:Va(s)}r=r.sibling}}function bs(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=r,p=s,w=p.flags;switch(p.tag){case 0:case 11:case 15:bs(g,p,o),Ac(4,p);break;case 1:if(bs(g,p,o),u=p,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ae){mt(u,u.return,ae)}if(u=p,g=u.updateQueue,g!==null){var D=u.stateNode;try{var X=g.shared.hiddenCallbacks;if(X!==null)for(g.shared.hiddenCallbacks=null,g=0;g<X.length;g++)jv(X[g],D)}catch(ae){mt(u,u.return,ae)}}o&&w&64&&tb(p),Rc(p,p.return);break;case 27:sb(p);case 26:case 5:bs(g,p,o),o&&u===null&&w&4&&rb(p),Rc(p,p.return);break;case 12:bs(g,p,o);break;case 13:bs(g,p,o),o&&w&4&&ub(g,p);break;case 22:p.memoizedState===null&&bs(g,p,o),Rc(p,p.return);break;case 30:break;default:bs(g,p,o)}s=s.sibling}}function Tm(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&hc(o))}function Sm(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&hc(r))}function ui(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)fb(r,s,o,u),s=s.sibling}function fb(r,s,o,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:ui(r,s,o,u),g&2048&&Ac(9,s);break;case 1:ui(r,s,o,u);break;case 3:ui(r,s,o,u),g&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&hc(r)));break;case 12:if(g&2048){ui(r,s,o,u),r=s.stateNode;try{var p=s.memoizedProps,w=p.id,D=p.onPostCommit;typeof D=="function"&&D(w,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(X){mt(s,s.return,X)}}else ui(r,s,o,u);break;case 13:ui(r,s,o,u);break;case 23:break;case 22:p=s.stateNode,w=s.alternate,s.memoizedState!==null?p._visibility&2?ui(r,s,o,u):Nc(r,s):p._visibility&2?ui(r,s,o,u):(p._visibility|=2,Ho(r,s,o,u,(s.subtreeFlags&10256)!==0)),g&2048&&Tm(w,s);break;case 24:ui(r,s,o,u),g&2048&&Sm(s.alternate,s);break;default:ui(r,s,o,u)}}function Ho(r,s,o,u,g){for(g=g&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=r,w=s,D=o,X=u,ae=w.flags;switch(w.tag){case 0:case 11:case 15:Ho(p,w,D,X,g),Ac(8,w);break;case 23:break;case 22:var he=w.stateNode;w.memoizedState!==null?he._visibility&2?Ho(p,w,D,X,g):Nc(p,w):(he._visibility|=2,Ho(p,w,D,X,g)),g&&ae&2048&&Tm(w.alternate,w);break;case 24:Ho(p,w,D,X,g),g&&ae&2048&&Sm(w.alternate,w);break;default:Ho(p,w,D,X,g)}s=s.sibling}}function Nc(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,g=u.flags;switch(u.tag){case 22:Nc(o,u),g&2048&&Tm(u.alternate,u);break;case 24:Nc(o,u),g&2048&&Sm(u.alternate,u);break;default:Nc(o,u)}s=s.sibling}}var Cc=8192;function $o(r){if(r.subtreeFlags&Cc)for(r=r.child;r!==null;)gb(r),r=r.sibling}function gb(r){switch(r.tag){case 26:$o(r),r.flags&Cc&&r.memoizedState!==null&&SN(Pr,r.memoizedState,r.memoizedProps);break;case 5:$o(r);break;case 3:case 4:var s=Pr;Pr=ih(r.stateNode.containerInfo),$o(r),Pr=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Cc,Cc=16777216,$o(r),Cc=s):$o(r));break;default:$o(r)}}function mb(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Ic(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];sn=u,yb(u,r)}mb(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)pb(r),r=r.sibling}function pb(r){switch(r.tag){case 0:case 11:case 15:Ic(r),r.flags&2048&&vs(9,r,r.return);break;case 3:Ic(r);break;case 12:Ic(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Gd(r)):Ic(r);break;default:Ic(r)}}function Gd(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];sn=u,yb(u,r)}mb(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:vs(8,s,s.return),Gd(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Gd(s));break;default:Gd(s)}r=r.sibling}}function yb(r,s){for(;sn!==null;){var o=sn;switch(o.tag){case 0:case 11:case 15:vs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:hc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,sn=u;else e:for(o=r;sn!==null;){u=sn;var g=u.sibling,p=u.return;if(lb(u),u===o){sn=null;break e}if(g!==null){g.return=p,sn=g;break e}sn=p}}}var jR={getCacheForType:function(r){var s=_n(Qt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},HR=typeof WeakMap=="function"?WeakMap:Map,ct=0,yt=null,Xe=null,et=0,ut=0,Jn=null,Es=!1,qo=!1,Am=!1,Gi=0,Ct=0,ws=0,La=0,Rm=0,Sr=0,Fo=0,kc=null,Un=null,Nm=!1,Cm=0,Yd=1/0,Xd=null,xs=null,fn=0,Ts=null,Go=null,Yo=0,Im=0,km=null,vb=null,Dc=0,Dm=null;function er(){if((ct&2)!==0&&et!==0)return et&-et;if(R.T!==null){var r=Mo;return r!==0?r:Um()}return Xr()}function _b(){Sr===0&&(Sr=(et&536870912)===0||st?Si():536870912);var r=Tr.current;return r!==null&&(r.flags|=32),Sr}function tr(r,s,o){(r===yt&&(ut===2||ut===9)||r.cancelPendingCommit!==null)&&(Xo(r,0),Ss(r,et,Sr,!1)),ur(r,o),((ct&2)===0||r!==yt)&&(r===yt&&((ct&2)===0&&(La|=o),Ct===4&&Ss(r,et,Sr,!1)),di(r))}function bb(r,s,o){if((ct&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||kn(r,s),g=u?FR(r,s):Pm(r,s,!0),p=u;do{if(g===0){qo&&!u&&Ss(r,s,0,!1);break}else{if(o=r.current.alternate,p&&!$R(o)){g=Pm(r,s,!1),p=!1;continue}if(g===2){if(p=s,r.errorRecoveryDisabledLanes&p)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var D=r;g=kc;var X=D.current.memoizedState.isDehydrated;if(X&&(Xo(D,w).flags|=256),w=Pm(D,w,!1),w!==2){if(Am&&!X){D.errorRecoveryDisabledLanes|=p,La|=p,g=4;break e}p=Un,Un=g,p!==null&&(Un===null?Un=p:Un.push.apply(Un,p))}g=w}if(p=!1,g!==2)continue}}if(g===1){Xo(r,0),Ss(r,s,0,!0);break}e:{switch(u=r,p=g,p){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ss(u,s,Sr,!Es);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(g=Cm+300-Ue(),10<g)){if(Ss(u,s,Sr,!Es),cn(u,0,!0)!==0)break e;u.timeoutHandle=Kb(Eb.bind(null,u,o,Un,Xd,Nm,s,Sr,La,Fo,Es,p,2,-0,0),g);break e}Eb(u,o,Un,Xd,Nm,s,Sr,La,Fo,Es,p,0,-0,0)}}break}while(!0);di(r)}function Eb(r,s,o,u,g,p,w,D,X,ae,he,pe,oe,ce){if(r.timeoutHandle=-1,pe=s.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(Uc={stylesheets:null,count:0,unsuspend:TN},gb(s),pe=AN(),pe!==null)){r.cancelPendingCommit=pe(Nb.bind(null,r,s,p,o,u,g,w,D,X,he,1,oe,ce)),Ss(r,p,w,!ae);return}Nb(r,s,p,o,u,g,w,D,X)}function $R(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var g=o[u],p=g.getSnapshot;g=g.value;try{if(!Kn(p(),g))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ss(r,s,o,u){s&=~Rm,s&=~La,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var g=s;0<g;){var p=31-Et(g),w=1<<p;u[p]=-1,g&=~w}o!==0&&dr(r,o,s)}function Kd(){return(ct&6)===0?(Oc(0),!1):!0}function Om(){if(Xe!==null){if(ut===0)var r=Xe.return;else r=Xe,zi=ka=null,Qg(r),Bo=null,xc=0,r=Xe;for(;r!==null;)eb(r.alternate,r),r=r.return;Xe=null}}function Xo(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,oN(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Om(),yt=r,Xe=o=Pi(r.current,null),et=s,ut=0,Jn=null,Es=!1,qo=kn(r,s),Am=!1,Fo=Sr=Rm=La=ws=Ct=0,Un=kc=null,Nm=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var g=31-Et(u),p=1<<g;s|=r[g],u&=~p}return Gi=s,yd(),o}function wb(r,s){He=null,R.H=Vd,s===gc||s===Ad?(s=Uv(),ut=3):s===Vv?(s=Uv(),ut=4):ut=s===B_?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Jn=s,Xe===null&&(Ct=1,jd(r,br(s,r.current)))}function xb(){var r=R.H;return R.H=Vd,r===null?Vd:r}function Tb(){var r=R.A;return R.A=jR,r}function Mm(){Ct=4,Es||(et&4194048)!==et&&Tr.current!==null||(qo=!0),(ws&134217727)===0&&(La&134217727)===0||yt===null||Ss(yt,et,Sr,!1)}function Pm(r,s,o){var u=ct;ct|=2;var g=xb(),p=Tb();(yt!==r||et!==s)&&(Xd=null,Xo(r,s)),s=!1;var w=Ct;e:do try{if(ut!==0&&Xe!==null){var D=Xe,X=Jn;switch(ut){case 8:Om(),w=6;break e;case 3:case 2:case 9:case 6:Tr.current===null&&(s=!0);var ae=ut;if(ut=0,Jn=null,Ko(r,D,X,ae),o&&qo){w=0;break e}break;default:ae=ut,ut=0,Jn=null,Ko(r,D,X,ae)}}qR(),w=Ct;break}catch(he){wb(r,he)}while(!0);return s&&r.shellSuspendCounter++,zi=ka=null,ct=u,R.H=g,R.A=p,Xe===null&&(yt=null,et=0,yd()),w}function qR(){for(;Xe!==null;)Sb(Xe)}function FR(r,s){var o=ct;ct|=2;var u=xb(),g=Tb();yt!==r||et!==s?(Xd=null,Yd=Ue()+500,Xo(r,s)):qo=kn(r,s);e:do try{if(ut!==0&&Xe!==null){s=Xe;var p=Jn;t:switch(ut){case 1:ut=0,Jn=null,Ko(r,s,p,1);break;case 2:case 9:if(Lv(p)){ut=0,Jn=null,Ab(s);break}s=function(){ut!==2&&ut!==9||yt!==r||(ut=7),di(r)},p.then(s,s);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Lv(p)?(ut=0,Jn=null,Ab(s)):(ut=0,Jn=null,Ko(r,s,p,7));break;case 5:var w=null;switch(Xe.tag){case 26:w=Xe.memoizedState;case 5:case 27:var D=Xe;if(!w||oE(w)){ut=0,Jn=null;var X=D.sibling;if(X!==null)Xe=X;else{var ae=D.return;ae!==null?(Xe=ae,Qd(ae)):Xe=null}break t}}ut=0,Jn=null,Ko(r,s,p,5);break;case 6:ut=0,Jn=null,Ko(r,s,p,6);break;case 8:Om(),Ct=6;break e;default:throw Error(i(462))}}GR();break}catch(he){wb(r,he)}while(!0);return zi=ka=null,R.H=u,R.A=g,ct=o,Xe!==null?0:(yt=null,et=0,yd(),Ct)}function GR(){for(;Xe!==null&&!it();)Sb(Xe)}function Sb(r){var s=Z_(r.alternate,r,Gi);r.memoizedProps=r.pendingProps,s===null?Qd(r):Xe=s}function Ab(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=G_(o,s,s.pendingProps,s.type,void 0,et);break;case 11:s=G_(o,s,s.pendingProps,s.type.render,s.ref,et);break;case 5:Qg(s);default:eb(o,s),s=Xe=Rv(s,Gi),s=Z_(o,s,Gi)}r.memoizedProps=r.pendingProps,s===null?Qd(r):Xe=s}function Ko(r,s,o,u){zi=ka=null,Qg(s),Bo=null,xc=0;var g=s.return;try{if(PR(r,g,s,o,et)){Ct=1,jd(r,br(o,r.current)),Xe=null;return}}catch(p){if(g!==null)throw Xe=g,p;Ct=1,jd(r,br(o,r.current)),Xe=null;return}s.flags&32768?(st||u===1?r=!0:qo||(et&536870912)!==0?r=!1:(Es=r=!0,(u===2||u===9||u===3||u===6)&&(u=Tr.current,u!==null&&u.tag===13&&(u.flags|=16384))),Rb(s,r)):Qd(s)}function Qd(r){var s=r;do{if((s.flags&32768)!==0){Rb(s,Es);return}r=s.return;var o=LR(s.alternate,s,Gi);if(o!==null){Xe=o;return}if(s=s.sibling,s!==null){Xe=s;return}Xe=s=r}while(s!==null);Ct===0&&(Ct=5)}function Rb(r,s){do{var o=zR(r.alternate,r);if(o!==null){o.flags&=32767,Xe=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){Xe=r;return}Xe=r=o}while(r!==null);Ct=6,Xe=null}function Nb(r,s,o,u,g,p,w,D,X){r.cancelPendingCommit=null;do Wd();while(fn!==0);if((ct&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(p=s.lanes|s.childLanes,p|=Sg,Gn(r,o,p,w,D,X),r===yt&&(Xe=yt=null,et=0),Go=s,Ts=r,Yo=o,Im=p,km=g,vb=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,QR(Gt,function(){return Ob(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=R.T,R.T=null,g=W.p,W.p=2,w=ct,ct|=4;try{UR(r,s,o)}finally{ct=w,W.p=g,R.T=u}}fn=1,Cb(),Ib(),kb()}}function Cb(){if(fn===1){fn=0;var r=Ts,s=Go,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=R.T,R.T=null;var u=W.p;W.p=2;var g=ct;ct|=4;try{db(s,r);var p=Ym,w=yv(r.containerInfo),D=p.focusedElem,X=p.selectionRange;if(w!==D&&D&&D.ownerDocument&&pv(D.ownerDocument.documentElement,D)){if(X!==null&&bg(D)){var ae=X.start,he=X.end;if(he===void 0&&(he=ae),"selectionStart"in D)D.selectionStart=ae,D.selectionEnd=Math.min(he,D.value.length);else{var pe=D.ownerDocument||document,oe=pe&&pe.defaultView||window;if(oe.getSelection){var ce=oe.getSelection(),Pe=D.textContent.length,Ie=Math.min(X.start,Pe),gt=X.end===void 0?Ie:Math.min(X.end,Pe);!ce.extend&&Ie>gt&&(w=gt,gt=Ie,Ie=w);var re=mv(D,Ie),J=mv(D,gt);if(re&&J&&(ce.rangeCount!==1||ce.anchorNode!==re.node||ce.anchorOffset!==re.offset||ce.focusNode!==J.node||ce.focusOffset!==J.offset)){var se=pe.createRange();se.setStart(re.node,re.offset),ce.removeAllRanges(),Ie>gt?(ce.addRange(se),ce.extend(J.node,J.offset)):(se.setEnd(J.node,J.offset),ce.addRange(se))}}}}for(pe=[],ce=D;ce=ce.parentNode;)ce.nodeType===1&&pe.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<pe.length;D++){var me=pe[D];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}ch=!!Gm,Ym=Gm=null}finally{ct=g,W.p=u,R.T=o}}r.current=s,fn=2}}function Ib(){if(fn===2){fn=0;var r=Ts,s=Go,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=R.T,R.T=null;var u=W.p;W.p=2;var g=ct;ct|=4;try{ob(r,s.alternate,s)}finally{ct=g,W.p=u,R.T=o}}fn=3}}function kb(){if(fn===4||fn===3){fn=0,Lt();var r=Ts,s=Go,o=Yo,u=vb;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?fn=5:(fn=0,Go=Ts=null,Db(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(xs=null),as(o),s=s.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(at,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=R.T,g=W.p,W.p=2,R.T=null;try{for(var p=r.onRecoverableError,w=0;w<u.length;w++){var D=u[w];p(D.value,{componentStack:D.stack})}}finally{R.T=s,W.p=g}}(Yo&3)!==0&&Wd(),di(r),g=r.pendingLanes,(o&4194090)!==0&&(g&42)!==0?r===Dm?Dc++:(Dc=0,Dm=r):Dc=0,Oc(0)}}function Db(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,hc(s)))}function Wd(r){return Cb(),Ib(),kb(),Ob()}function Ob(){if(fn!==5)return!1;var r=Ts,s=Im;Im=0;var o=as(Yo),u=R.T,g=W.p;try{W.p=32>o?32:o,R.T=null,o=km,km=null;var p=Ts,w=Yo;if(fn=0,Go=Ts=null,Yo=0,(ct&6)!==0)throw Error(i(331));var D=ct;if(ct|=4,pb(p.current),fb(p,p.current,w,o),ct=D,Oc(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(at,p)}catch{}return!0}finally{W.p=g,R.T=u,Db(r,s)}}function Mb(r,s,o){s=br(o,s),s=um(r.stateNode,s,2),r=gs(r,s,2),r!==null&&(ur(r,2),di(r))}function mt(r,s,o){if(r.tag===3)Mb(r,r,o);else for(;s!==null;){if(s.tag===3){Mb(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(xs===null||!xs.has(u))){r=br(o,r),o=z_(2),u=gs(s,o,2),u!==null&&(U_(o,u,s,r),ur(u,2),di(u));break}}s=s.return}}function Vm(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new HR;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(o)||(Am=!0,g.add(o),r=YR.bind(null,r,s,o),s.then(r,r))}function YR(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,yt===r&&(et&o)===o&&(Ct===4||Ct===3&&(et&62914560)===et&&300>Ue()-Cm?(ct&2)===0&&Xo(r,0):Rm|=o,Fo===et&&(Fo=0)),di(r)}function Pb(r,s){s===0&&(s=Ir()),r=Io(r,s),r!==null&&(ur(r,s),di(r))}function XR(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),Pb(r,o)}function KR(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,g=r.memoizedState;g!==null&&(o=g.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),Pb(r,o)}function QR(r,s){return ke(r,s)}var Zd=null,Qo=null,Lm=!1,Jd=!1,zm=!1,za=0;function di(r){r!==Qo&&r.next===null&&(Qo===null?Zd=Qo=r:Qo=Qo.next=r),Jd=!0,Lm||(Lm=!0,ZR())}function Oc(r,s){if(!zm&&Jd){zm=!0;do for(var o=!1,u=Zd;u!==null;){if(r!==0){var g=u.pendingLanes;if(g===0)var p=0;else{var w=u.suspendedLanes,D=u.pingedLanes;p=(1<<31-Et(42|r)+1)-1,p&=g&~(w&~D),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,Ub(u,p))}else p=et,p=cn(u,u===yt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||kn(u,p)||(o=!0,Ub(u,p));u=u.next}while(o);zm=!1}}function WR(){Vb()}function Vb(){Jd=Lm=!1;var r=0;za!==0&&(aN()&&(r=za),za=0);for(var s=Ue(),o=null,u=Zd;u!==null;){var g=u.next,p=Lb(u,s);p===0?(u.next=null,o===null?Zd=g:o.next=g,g===null&&(Qo=o)):(o=u,(r!==0||(p&3)!==0)&&(Jd=!0)),u=g}Oc(r)}function Lb(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,g=r.expirationTimes,p=r.pendingLanes&-62914561;0<p;){var w=31-Et(p),D=1<<w,X=g[w];X===-1?((D&o)===0||(D&u)!==0)&&(g[w]=Ti(D,s)):X<=s&&(r.expiredLanes|=D),p&=~D}if(s=yt,o=et,o=cn(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(ut===2||ut===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Ve(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||kn(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&Ve(u),as(o)){case 2:case 8:o=vn;break;case 32:o=Gt;break;case 268435456:o=Rn;break;default:o=Gt}return u=zb.bind(null,r),o=ke(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&Ve(u),r.callbackPriority=2,r.callbackNode=null,2}function zb(r,s){if(fn!==0&&fn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Wd()&&r.callbackNode!==o)return null;var u=et;return u=cn(r,r===yt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(bb(r,u,s),Lb(r,Ue()),r.callbackNode!=null&&r.callbackNode===o?zb.bind(null,r):null)}function Ub(r,s){if(Wd())return null;bb(r,s,!0)}function ZR(){lN(function(){(ct&6)!==0?ke(At,WR):Vb()})}function Um(){return za===0&&(za=Si()),za}function Bb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:vo(""+r)}function jb(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function JR(r,s,o,u,g){if(s==="submit"&&o&&o.stateNode===g){var p=Bb((g[Rt]||null).action),w=u.submitter;w&&(s=(s=w[Rt]||null)?Bb(s.formAction):w.getAttribute("formAction"),s!==null&&(p=s,w=null));var D=new _o("action","action",null,u,g);r.push({event:D,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(za!==0){var X=w?jb(g,w):new FormData(g);sm(o,{pending:!0,data:X,method:g.method,action:p},null,X)}}else typeof p=="function"&&(D.preventDefault(),X=w?jb(g,w):new FormData(g),sm(o,{pending:!0,data:X,method:g.method,action:p},p,X))},currentTarget:g}]})}}for(var Bm=0;Bm<Tg.length;Bm++){var jm=Tg[Bm],eN=jm.toLowerCase(),tN=jm[0].toUpperCase()+jm.slice(1);Mr(eN,"on"+tN)}Mr(bv,"onAnimationEnd"),Mr(Ev,"onAnimationIteration"),Mr(wv,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(vR,"onTransitionRun"),Mr(_R,"onTransitionStart"),Mr(bR,"onTransitionCancel"),Mr(xv,"onTransitionEnd"),kr("onMouseEnter",["mouseout","mouseover"]),kr("onMouseLeave",["mouseout","mouseover"]),kr("onPointerEnter",["pointerout","pointerover"]),kr("onPointerLeave",["pointerout","pointerover"]),Yn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mc));function Hb(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],g=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var w=u.length-1;0<=w;w--){var D=u[w],X=D.instance,ae=D.currentTarget;if(D=D.listener,X!==p&&g.isPropagationStopped())break e;p=D,g.currentTarget=ae;try{p(g)}catch(he){Bd(he)}g.currentTarget=null,p=X}else for(w=0;w<u.length;w++){if(D=u[w],X=D.instance,ae=D.currentTarget,D=D.listener,X!==p&&g.isPropagationStopped())break e;p=D,g.currentTarget=ae;try{p(g)}catch(he){Bd(he)}g.currentTarget=null,p=X}}}}function Ke(r,s){var o=s[ua];o===void 0&&(o=s[ua]=new Set);var u=r+"__bubble";o.has(u)||($b(s,r,2,!1),o.add(u))}function Hm(r,s,o){var u=0;s&&(u|=4),$b(o,r,u,s)}var eh="_reactListening"+Math.random().toString(36).slice(2);function $m(r){if(!r[eh]){r[eh]=!0,da.forEach(function(o){o!=="selectionchange"&&(nN.has(o)||Hm(o,!1,r),Hm(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[eh]||(s[eh]=!0,Hm("selectionchange",!1,s))}}function $b(r,s,o,u){switch(fE(s)){case 2:var g=CN;break;case 8:g=IN;break;default:g=rp}o=g.bind(null,s,o,r),g=void 0,!vr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?r.addEventListener(s,o,{capture:!0,passive:g}):r.addEventListener(s,o,!0):g!==void 0?r.addEventListener(s,o,{passive:g}):r.addEventListener(s,o,!1)}function qm(r,s,o,u,g){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var D=u.stateNode.containerInfo;if(D===g)break;if(w===4)for(w=u.return;w!==null;){var X=w.tag;if((X===3||X===4)&&w.stateNode.containerInfo===g)return;w=w.return}for(;D!==null;){if(w=hr(D),w===null)return;if(X=w.tag,X===5||X===6||X===26||X===27){u=p=w;continue e}D=D.parentNode}}u=u.return}nd(function(){var ae=p,he=yr(o),pe=[];e:{var oe=Tv.get(r);if(oe!==void 0){var ce=_o,Pe=r;switch(r){case"keypress":if(ni(o)===0)break e;case"keydown":case"keyup":ce=So;break;case"focusin":Pe="focus",ce=wo;break;case"focusout":Pe="blur",ce=wo;break;case"beforeblur":case"afterblur":ce=wo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=_r;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=pg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=ud;break;case bv:case Ev:case wv:ce=xo;break;case xv:ce=hd;break;case"scroll":case"scrollend":ce=rd;break;case"wheel":ce=Ao;break;case"copy":case"cut":case"paste":ce=To;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=ic;break;case"toggle":case"beforetoggle":ce=gd}var Ie=(s&4)!==0,gt=!Ie&&(r==="scroll"||r==="scrollend"),re=Ie?oe!==null?oe+"Capture":null:oe;Ie=[];for(var J=ae,se;J!==null;){var me=J;if(se=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||se===null||re===null||(me=ya(J,re),me!=null&&Ie.push(Pc(J,me,se))),gt)break;J=J.return}0<Ie.length&&(oe=new ce(oe,Pe,null,o,he),pe.push({event:oe,listeners:Ie}))}}if((s&7)===0){e:{if(oe=r==="mouseover"||r==="pointerover",ce=r==="mouseout"||r==="pointerout",oe&&o!==Ci&&(Pe=o.relatedTarget||o.fromElement)&&(hr(Pe)||Pe[Vn]))break e;if((ce||oe)&&(oe=he.window===he?he:(oe=he.ownerDocument)?oe.defaultView||oe.parentWindow:window,ce?(Pe=o.relatedTarget||o.toElement,ce=ae,Pe=Pe?hr(Pe):null,Pe!==null&&(gt=l(Pe),Ie=Pe.tag,Pe!==gt||Ie!==5&&Ie!==27&&Ie!==6)&&(Pe=null)):(ce=null,Pe=ae),ce!==Pe)){if(Ie=_r,me="onMouseLeave",re="onMouseEnter",J="mouse",(r==="pointerout"||r==="pointerover")&&(Ie=ic,me="onPointerLeave",re="onPointerEnter",J="pointer"),gt=ce==null?oe:gr(ce),se=Pe==null?oe:gr(Pe),oe=new Ie(me,J+"leave",ce,o,he),oe.target=gt,oe.relatedTarget=se,me=null,hr(he)===ae&&(Ie=new Ie(re,J+"enter",Pe,o,he),Ie.target=se,Ie.relatedTarget=gt,me=Ie),gt=me,ce&&Pe)t:{for(Ie=ce,re=Pe,J=0,se=Ie;se;se=Wo(se))J++;for(se=0,me=re;me;me=Wo(me))se++;for(;0<J-se;)Ie=Wo(Ie),J--;for(;0<se-J;)re=Wo(re),se--;for(;J--;){if(Ie===re||re!==null&&Ie===re.alternate)break t;Ie=Wo(Ie),re=Wo(re)}Ie=null}else Ie=null;ce!==null&&qb(pe,oe,ce,Ie,!1),Pe!==null&&gt!==null&&qb(pe,gt,Pe,Ie,!0)}}e:{if(oe=ae?gr(ae):window,ce=oe.nodeName&&oe.nodeName.toLowerCase(),ce==="select"||ce==="input"&&oe.type==="file")var Se=cv;else if(Kt(oe))if(uv)Se=mR;else{Se=fR;var qe=hR}else ce=oe.nodeName,!ce||ce.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ae&&Wl(ae.elementType)&&(Se=cv):Se=gR;if(Se&&(Se=Se(r,ae))){Mi(pe,Se,o,he);break e}qe&&qe(r,oe,ae),r==="focusout"&&ae&&oe.type==="number"&&ae.memoizedProps.value!=null&&cs(oe,"number",oe.value)}switch(qe=ae?gr(ae):window,r){case"focusin":(Kt(qe)||qe.contentEditable==="true")&&(Ro=qe,Eg=ae,oc=null);break;case"focusout":oc=Eg=Ro=null;break;case"mousedown":wg=!0;break;case"contextmenu":case"mouseup":case"dragend":wg=!1,vv(pe,o,he);break;case"selectionchange":if(yR)break;case"keydown":case"keyup":vv(pe,o,he)}var Re;if(si)e:{switch(r){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Ze?ue(r,o)&&(De="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(De="onCompositionStart");De&&(E&&o.locale!=="ko"&&(Ze||De!=="onCompositionStart"?De==="onCompositionEnd"&&Ze&&(Re=Jl()):(ti=he,us="value"in ti?ti.value:ti.textContent,Ze=!0)),qe=th(ae,De),0<qe.length&&(De=new nc(De,r,null,o,he),pe.push({event:De,listeners:qe}),Re?De.data=Re:(Re=be(o),Re!==null&&(De.data=Re)))),(Re=_?Xt(r,o):Je(r,o))&&(De=th(ae,"onBeforeInput"),0<De.length&&(qe=new nc("onBeforeInput","beforeinput",null,o,he),pe.push({event:qe,listeners:De}),qe.data=Re)),JR(pe,r,ae,o,he)}Hb(pe,s)})}function Pc(r,s,o){return{instance:r,listener:s,currentTarget:o}}function th(r,s){for(var o=s+"Capture",u=[];r!==null;){var g=r,p=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||p===null||(g=ya(r,o),g!=null&&u.unshift(Pc(r,g,p)),g=ya(r,s),g!=null&&u.push(Pc(r,g,p))),r.tag===3)return u;r=r.return}return[]}function Wo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function qb(r,s,o,u,g){for(var p=s._reactName,w=[];o!==null&&o!==u;){var D=o,X=D.alternate,ae=D.stateNode;if(D=D.tag,X!==null&&X===u)break;D!==5&&D!==26&&D!==27||ae===null||(X=ae,g?(ae=ya(o,p),ae!=null&&w.unshift(Pc(o,ae,X))):g||(ae=ya(o,p),ae!=null&&w.push(Pc(o,ae,X)))),o=o.return}w.length!==0&&r.push({event:s,listeners:w})}var rN=/\r\n?/g,iN=/\u0000|\uFFFD/g;function Fb(r){return(typeof r=="string"?r:""+r).replace(rN,`
`).replace(iN,"")}function Gb(r,s){return s=Fb(s),Fb(r)===s}function nh(){}function ft(r,s,o,u,g,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||pr(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&pr(r,""+u);break;case"className":mr(r,"class",u);break;case"tabIndex":mr(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":mr(r,o,u);break;case"style":Ql(r,u,p);break;case"data":if(s!=="object"){mr(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=vo(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&ft(r,s,"name",g.name,g,null),ft(r,s,"formEncType",g.formEncType,g,null),ft(r,s,"formMethod",g.formMethod,g,null),ft(r,s,"formTarget",g.formTarget,g,null)):(ft(r,s,"encType",g.encType,g,null),ft(r,s,"method",g.method,g,null),ft(r,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=vo(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=nh);break;case"onScroll":u!=null&&Ke("scroll",r);break;case"onScrollEnd":u!=null&&Ke("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=vo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ke("beforetoggle",r),Ke("toggle",r),Wr(r,"popover",u);break;case"xlinkActuate":Yt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Yt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Yt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Yt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Yt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Yt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Wr(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=gg.get(o)||o,Wr(r,o,u))}}function Fm(r,s,o,u,g,p){switch(o){case"style":Ql(r,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?pr(r,u):(typeof u=="number"||typeof u=="bigint")&&pr(r,""+u);break;case"onScroll":u!=null&&Ke("scroll",r);break;case"onScrollEnd":u!=null&&Ke("scrollend",r);break;case"onClick":u!=null&&(r.onclick=nh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!os.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),s=o.slice(2,g?o.length-7:void 0),p=r[Rt]||null,p=p!=null?p[o]:null,typeof p=="function"&&r.removeEventListener(s,p,g),typeof u=="function")){typeof p!="function"&&p!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,g);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Wr(r,o,u)}}}function gn(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",r),Ke("load",r);var u=!1,g=!1,p;for(p in o)if(o.hasOwnProperty(p)){var w=o[p];if(w!=null)switch(p){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ft(r,s,p,w,o,null)}}g&&ft(r,s,"srcSet",o.srcSet,o,null),u&&ft(r,s,"src",o.src,o,null);return;case"input":Ke("invalid",r);var D=p=w=g=null,X=null,ae=null;for(u in o)if(o.hasOwnProperty(u)){var he=o[u];if(he!=null)switch(u){case"name":g=he;break;case"type":w=he;break;case"checked":X=he;break;case"defaultChecked":ae=he;break;case"value":p=he;break;case"defaultValue":D=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,s));break;default:ft(r,s,u,he,o,null)}}ga(r,p,D,X,ae,w,g,!1),yo(r);return;case"select":Ke("invalid",r),u=w=p=null;for(g in o)if(o.hasOwnProperty(g)&&(D=o[g],D!=null))switch(g){case"value":p=D;break;case"defaultValue":w=D;break;case"multiple":u=D;default:ft(r,s,g,D,o,null)}s=p,o=w,r.multiple=!!u,s!=null?Ni(r,!!u,s,!1):o!=null&&Ni(r,!!u,o,!0);return;case"textarea":Ke("invalid",r),p=g=u=null;for(w in o)if(o.hasOwnProperty(w)&&(D=o[w],D!=null))switch(w){case"value":u=D;break;case"defaultValue":g=D;break;case"children":p=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(91));break;default:ft(r,s,w,D,o,null)}ma(r,u,g,p),yo(r);return;case"option":for(X in o)if(o.hasOwnProperty(X)&&(u=o[X],u!=null))switch(X){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ft(r,s,X,u,o,null)}return;case"dialog":Ke("beforetoggle",r),Ke("toggle",r),Ke("cancel",r),Ke("close",r);break;case"iframe":case"object":Ke("load",r);break;case"video":case"audio":for(u=0;u<Mc.length;u++)Ke(Mc[u],r);break;case"image":Ke("error",r),Ke("load",r);break;case"details":Ke("toggle",r);break;case"embed":case"source":case"link":Ke("error",r),Ke("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in o)if(o.hasOwnProperty(ae)&&(u=o[ae],u!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ft(r,s,ae,u,o,null)}return;default:if(Wl(s)){for(he in o)o.hasOwnProperty(he)&&(u=o[he],u!==void 0&&Fm(r,s,he,u,o,void 0));return}}for(D in o)o.hasOwnProperty(D)&&(u=o[D],u!=null&&ft(r,s,D,u,o,null))}function sN(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,p=null,w=null,D=null,X=null,ae=null,he=null;for(ce in o){var pe=o[ce];if(o.hasOwnProperty(ce)&&pe!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":X=pe;default:u.hasOwnProperty(ce)||ft(r,s,ce,null,u,pe)}}for(var oe in u){var ce=u[oe];if(pe=o[oe],u.hasOwnProperty(oe)&&(ce!=null||pe!=null))switch(oe){case"type":p=ce;break;case"name":g=ce;break;case"checked":ae=ce;break;case"defaultChecked":he=ce;break;case"value":w=ce;break;case"defaultValue":D=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,s));break;default:ce!==pe&&ft(r,s,oe,ce,u,pe)}}Xn(r,w,D,X,ae,he,p,g);return;case"select":ce=w=D=oe=null;for(p in o)if(X=o[p],o.hasOwnProperty(p)&&X!=null)switch(p){case"value":break;case"multiple":ce=X;default:u.hasOwnProperty(p)||ft(r,s,p,null,u,X)}for(g in u)if(p=u[g],X=o[g],u.hasOwnProperty(g)&&(p!=null||X!=null))switch(g){case"value":oe=p;break;case"defaultValue":D=p;break;case"multiple":w=p;default:p!==X&&ft(r,s,g,p,u,X)}s=D,o=w,u=ce,oe!=null?Ni(r,!!o,oe,!1):!!u!=!!o&&(s!=null?Ni(r,!!o,s,!0):Ni(r,!!o,o?[]:"",!1));return;case"textarea":ce=oe=null;for(D in o)if(g=o[D],o.hasOwnProperty(D)&&g!=null&&!u.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:ft(r,s,D,null,u,g)}for(w in u)if(g=u[w],p=o[w],u.hasOwnProperty(w)&&(g!=null||p!=null))switch(w){case"value":oe=g;break;case"defaultValue":ce=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==p&&ft(r,s,w,g,u,p)}dt(r,oe,ce);return;case"option":for(var Pe in o)if(oe=o[Pe],o.hasOwnProperty(Pe)&&oe!=null&&!u.hasOwnProperty(Pe))switch(Pe){case"selected":r.selected=!1;break;default:ft(r,s,Pe,null,u,oe)}for(X in u)if(oe=u[X],ce=o[X],u.hasOwnProperty(X)&&oe!==ce&&(oe!=null||ce!=null))switch(X){case"selected":r.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:ft(r,s,X,oe,u,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in o)oe=o[Ie],o.hasOwnProperty(Ie)&&oe!=null&&!u.hasOwnProperty(Ie)&&ft(r,s,Ie,null,u,oe);for(ae in u)if(oe=u[ae],ce=o[ae],u.hasOwnProperty(ae)&&oe!==ce&&(oe!=null||ce!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,s));break;default:ft(r,s,ae,oe,u,ce)}return;default:if(Wl(s)){for(var gt in o)oe=o[gt],o.hasOwnProperty(gt)&&oe!==void 0&&!u.hasOwnProperty(gt)&&Fm(r,s,gt,void 0,u,oe);for(he in u)oe=u[he],ce=o[he],!u.hasOwnProperty(he)||oe===ce||oe===void 0&&ce===void 0||Fm(r,s,he,oe,u,ce);return}}for(var re in o)oe=o[re],o.hasOwnProperty(re)&&oe!=null&&!u.hasOwnProperty(re)&&ft(r,s,re,null,u,oe);for(pe in u)oe=u[pe],ce=o[pe],!u.hasOwnProperty(pe)||oe===ce||oe==null&&ce==null||ft(r,s,pe,oe,u,ce)}var Gm=null,Ym=null;function rh(r){return r.nodeType===9?r:r.ownerDocument}function Yb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xb(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Xm(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Km=null;function aN(){var r=window.event;return r&&r.type==="popstate"?r===Km?!1:(Km=r,!0):(Km=null,!1)}var Kb=typeof setTimeout=="function"?setTimeout:void 0,oN=typeof clearTimeout=="function"?clearTimeout:void 0,Qb=typeof Promise=="function"?Promise:void 0,lN=typeof queueMicrotask=="function"?queueMicrotask:typeof Qb<"u"?function(r){return Qb.resolve(null).then(r).catch(cN)}:Kb;function cN(r){setTimeout(function(){throw r})}function As(r){return r==="head"}function Wb(r,s){var o=s,u=0,g=0;do{var p=o.nextSibling;if(r.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var w=r.ownerDocument;if(o&1&&Vc(w.documentElement),o&2&&Vc(w.body),o&4)for(o=w.head,Vc(o),w=o.firstChild;w;){var D=w.nextSibling,X=w.nodeName;w[Ai]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=D}}if(g===0){r.removeChild(p),qc(s);return}g--}else o==="$"||o==="$?"||o==="$!"?g++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);qc(s)}function Qm(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Qm(o),Qr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function uN(r,s,o,u){for(;r.nodeType===1;){var g=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Ai])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(p=r.getAttribute("rel"),p==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(p!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(p=r.getAttribute("src"),(p!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&p&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var p=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===p)return r}else return r;if(r=Vr(r.nextSibling),r===null)break}return null}function dN(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Vr(r.nextSibling),r===null))return null;return r}function Wm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function hN(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Vr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Zm=null;function Zb(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function Jb(r,s,o){switch(s=rh(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Vc(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Qr(r)}var Ar=new Map,eE=new Set;function ih(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Yi=W.d;W.d={f:fN,r:gN,D:mN,C:pN,L:yN,m:vN,X:bN,S:_N,M:EN};function fN(){var r=Yi.f(),s=Kd();return r||s}function gN(r){var s=fr(r);s!==null&&s.tag===5&&s.type==="form"?b_(s):Yi.r(r)}var Zo=typeof document>"u"?null:document;function tE(r,s,o){var u=Zo;if(u&&typeof s=="string"&&s){var g=Bt(s);g='link[rel="'+r+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),eE.has(g)||(eE.add(g),r={rel:r,crossOrigin:o,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),gn(s,"link",r),wt(s),u.head.appendChild(s)))}}function mN(r){Yi.D(r),tE("dns-prefetch",r,null)}function pN(r,s){Yi.C(r,s),tE("preconnect",r,s)}function yN(r,s,o){Yi.L(r,s,o);var u=Zo;if(u&&r&&s){var g='link[rel="preload"][as="'+Bt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+Bt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+Bt(o.imageSizes)+'"]')):g+='[href="'+Bt(r)+'"]';var p=g;switch(s){case"style":p=Jo(r);break;case"script":p=el(r)}Ar.has(p)||(r=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Ar.set(p,r),u.querySelector(g)!==null||s==="style"&&u.querySelector(Lc(p))||s==="script"&&u.querySelector(zc(p))||(s=u.createElement("link"),gn(s,"link",r),wt(s),u.head.appendChild(s)))}}function vN(r,s){Yi.m(r,s);var o=Zo;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Bt(u)+'"][href="'+Bt(r)+'"]',p=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=el(r)}if(!Ar.has(p)&&(r=y({rel:"modulepreload",href:r},s),Ar.set(p,r),o.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(zc(p)))return}u=o.createElement("link"),gn(u,"link",r),wt(u),o.head.appendChild(u)}}}function _N(r,s,o){Yi.S(r,s,o);var u=Zo;if(u&&r){var g=un(u).hoistableStyles,p=Jo(r);s=s||"default";var w=g.get(p);if(!w){var D={loading:0,preload:null};if(w=u.querySelector(Lc(p)))D.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Ar.get(p))&&Jm(r,o);var X=w=u.createElement("link");wt(X),gn(X,"link",r),X._p=new Promise(function(ae,he){X.onload=ae,X.onerror=he}),X.addEventListener("load",function(){D.loading|=1}),X.addEventListener("error",function(){D.loading|=2}),D.loading|=4,sh(w,s,u)}w={type:"stylesheet",instance:w,count:1,state:D},g.set(p,w)}}}function bN(r,s){Yi.X(r,s);var o=Zo;if(o&&r){var u=un(o).hoistableScripts,g=el(r),p=u.get(g);p||(p=o.querySelector(zc(g)),p||(r=y({src:r,async:!0},s),(s=Ar.get(g))&&ep(r,s),p=o.createElement("script"),wt(p),gn(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(g,p))}}function EN(r,s){Yi.M(r,s);var o=Zo;if(o&&r){var u=un(o).hoistableScripts,g=el(r),p=u.get(g);p||(p=o.querySelector(zc(g)),p||(r=y({src:r,async:!0,type:"module"},s),(s=Ar.get(g))&&ep(r,s),p=o.createElement("script"),wt(p),gn(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(g,p))}}function nE(r,s,o,u){var g=(g=de.current)?ih(g):null;if(!g)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Jo(o.href),o=un(g).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Jo(o.href);var p=un(g).hoistableStyles,w=p.get(r);if(w||(g=g.ownerDocument||g,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(r,w),(p=g.querySelector(Lc(r)))&&!p._p&&(w.instance=p,w.state.loading=5),Ar.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ar.set(r,o),p||wN(g,r,o,w.state))),s&&u===null)throw Error(i(528,""));return w}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=el(o),o=un(g).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Jo(r){return'href="'+Bt(r)+'"'}function Lc(r){return'link[rel="stylesheet"]['+r+"]"}function rE(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function wN(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),gn(s,"link",o),wt(s),r.head.appendChild(s))}function el(r){return'[src="'+Bt(r)+'"]'}function zc(r){return"script[async]"+r}function iE(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Bt(o.href)+'"]');if(u)return s.instance=u,wt(u),u;var g=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),wt(u),gn(u,"style",g),sh(u,o.precedence,r),s.instance=u;case"stylesheet":g=Jo(o.href);var p=r.querySelector(Lc(g));if(p)return s.state.loading|=4,s.instance=p,wt(p),p;u=rE(o),(g=Ar.get(g))&&Jm(u,g),p=(r.ownerDocument||r).createElement("link"),wt(p);var w=p;return w._p=new Promise(function(D,X){w.onload=D,w.onerror=X}),gn(p,"link",u),s.state.loading|=4,sh(p,o.precedence,r),s.instance=p;case"script":return p=el(o.src),(g=r.querySelector(zc(p)))?(s.instance=g,wt(g),g):(u=o,(g=Ar.get(p))&&(u=y({},o),ep(u,g)),r=r.ownerDocument||r,g=r.createElement("script"),wt(g),gn(g,"link",u),r.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,sh(u,o.precedence,r));return s.instance}function sh(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,p=g,w=0;w<u.length;w++){var D=u[w];if(D.dataset.precedence===s)p=D;else if(p!==g)break}p?p.parentNode.insertBefore(r,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Jm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function ep(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var ah=null;function sE(r,s,o){if(ah===null){var u=new Map,g=ah=new Map;g.set(o,u)}else g=ah,u=g.get(o),u||(u=new Map,g.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),g=0;g<o.length;g++){var p=o[g];if(!(p[Ai]||p[Ot]||r==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(s)||"";w=r+w;var D=u.get(w);D?D.push(p):u.set(w,[p])}}return u}function aE(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function xN(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function oE(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Uc=null;function TN(){}function SN(r,s,o){if(Uc===null)throw Error(i(475));var u=Uc;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var g=Jo(o.href),p=r.querySelector(Lc(g));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=oh.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=p,wt(p);return}p=r.ownerDocument||r,o=rE(o),(g=Ar.get(g))&&Jm(o,g),p=p.createElement("link"),wt(p);var w=p;w._p=new Promise(function(D,X){w.onload=D,w.onerror=X}),gn(p,"link",o),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=oh.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function AN(){if(Uc===null)throw Error(i(475));var r=Uc;return r.stylesheets&&r.count===0&&tp(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&tp(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function oh(){if(this.count--,this.count===0){if(this.stylesheets)tp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var lh=null;function tp(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,lh=new Map,s.forEach(RN,r),lh=null,oh.call(r))}function RN(r,s){if(!(s.state.loading&4)){var o=lh.get(r);if(o)var u=o.get(null);else{o=new Map,lh.set(r,o);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<g.length;p++){var w=g[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}g=s.instance,w=g.getAttribute("data-precedence"),p=o.get(w)||u,p===u&&o.set(null,g),o.set(w,g),this.count++,u=oh.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),p?p.parentNode.insertBefore(g,p.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),s.state.loading|=4}}var Bc={$$typeof:F,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function NN(r,s,o,u,g,p,w,D){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fn(0),this.hiddenUpdates=Fn(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function lE(r,s,o,u,g,p,w,D,X,ae,he,pe){return r=new NN(r,s,o,w,D,X,ae,pe),s=1,p===!0&&(s|=24),p=Qn(3,null,null,s),r.current=p,p.stateNode=r,s=Vg(),s.refCount++,r.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},Bg(p),r}function cE(r){return r?(r=ko,r):ko}function uE(r,s,o,u,g,p){g=cE(g),u.context===null?u.context=g:u.pendingContext=g,u=fs(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=gs(r,u,s),o!==null&&(tr(o,r,s),pc(o,r,s))}function dE(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function np(r,s){dE(r,s),(r=r.alternate)&&dE(r,s)}function hE(r){if(r.tag===13){var s=Io(r,67108864);s!==null&&tr(s,r,67108864),np(r,67108864)}}var ch=!0;function CN(r,s,o,u){var g=R.T;R.T=null;var p=W.p;try{W.p=2,rp(r,s,o,u)}finally{W.p=p,R.T=g}}function IN(r,s,o,u){var g=R.T;R.T=null;var p=W.p;try{W.p=8,rp(r,s,o,u)}finally{W.p=p,R.T=g}}function rp(r,s,o,u){if(ch){var g=ip(u);if(g===null)qm(r,s,u,uh,o),gE(r,u);else if(DN(g,r,s,o,u))u.stopPropagation();else if(gE(r,u),s&4&&-1<kN.indexOf(r)){for(;g!==null;){var p=fr(g);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=en(p.pendingLanes);if(w!==0){var D=p;for(D.pendingLanes|=2,D.entangledLanes|=2;w;){var X=1<<31-Et(w);D.entanglements[1]|=X,w&=~X}di(p),(ct&6)===0&&(Yd=Ue()+500,Oc(0))}}break;case 13:D=Io(p,2),D!==null&&tr(D,p,2),Kd(),np(p,2)}if(p=ip(u),p===null&&qm(r,s,u,uh,o),p===g)break;g=p}g!==null&&u.stopPropagation()}else qm(r,s,u,null,o)}}function ip(r){return r=yr(r),sp(r)}var uh=null;function sp(r){if(uh=null,r=hr(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return uh=r,null}function fE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ee()){case At:return 2;case vn:return 8;case Gt:case qn:return 32;case Rn:return 268435456;default:return 32}default:return 32}}var ap=!1,Rs=null,Ns=null,Cs=null,jc=new Map,Hc=new Map,Is=[],kN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gE(r,s){switch(r){case"focusin":case"focusout":Rs=null;break;case"dragenter":case"dragleave":Ns=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":jc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hc.delete(s.pointerId)}}function $c(r,s,o,u,g,p){return r===null||r.nativeEvent!==p?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[g]},s!==null&&(s=fr(s),s!==null&&hE(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),r)}function DN(r,s,o,u,g){switch(s){case"focusin":return Rs=$c(Rs,r,s,o,u,g),!0;case"dragenter":return Ns=$c(Ns,r,s,o,u,g),!0;case"mouseover":return Cs=$c(Cs,r,s,o,u,g),!0;case"pointerover":var p=g.pointerId;return jc.set(p,$c(jc.get(p)||null,r,s,o,u,g)),!0;case"gotpointercapture":return p=g.pointerId,Hc.set(p,$c(Hc.get(p)||null,r,s,o,u,g)),!0}return!1}function mE(r){var s=hr(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,uo(r.priority,function(){if(o.tag===13){var u=er();u=Yr(u);var g=Io(o,u);g!==null&&tr(g,o,u),np(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function dh(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=ip(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Ci=u,o.target.dispatchEvent(u),Ci=null}else return s=fr(o),s!==null&&hE(s),r.blockedOn=o,!1;s.shift()}return!0}function pE(r,s,o){dh(r)&&o.delete(s)}function ON(){ap=!1,Rs!==null&&dh(Rs)&&(Rs=null),Ns!==null&&dh(Ns)&&(Ns=null),Cs!==null&&dh(Cs)&&(Cs=null),jc.forEach(pE),Hc.forEach(pE)}function hh(r,s){r.blockedOn===s&&(r.blockedOn=null,ap||(ap=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ON)))}var fh=null;function yE(r){fh!==r&&(fh=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){fh===r&&(fh=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],g=r[s+2];if(typeof u!="function"){if(sp(u||o)===null)continue;break}var p=fr(o);p!==null&&(r.splice(s,3),s-=3,sm(p,{pending:!0,data:g,method:o.method,action:u},u,g))}}))}function qc(r){function s(X){return hh(X,r)}Rs!==null&&hh(Rs,r),Ns!==null&&hh(Ns,r),Cs!==null&&hh(Cs,r),jc.forEach(s),Hc.forEach(s);for(var o=0;o<Is.length;o++){var u=Is[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Is.length&&(o=Is[0],o.blockedOn===null);)mE(o),o.blockedOn===null&&Is.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var g=o[u],p=o[u+1],w=g[Rt]||null;if(typeof p=="function")w||yE(o);else if(w){var D=null;if(p&&p.hasAttribute("formAction")){if(g=p,w=p[Rt]||null)D=w.formAction;else if(sp(g)!==null)continue}else D=w.action;typeof D=="function"?o[u+1]=D:(o.splice(u,3),u-=3),yE(o)}}}function op(r){this._internalRoot=r}gh.prototype.render=op.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=er();uE(o,u,r,s,null,null)},gh.prototype.unmount=op.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;uE(r.current,2,null,r,null,null),Kd(),s[Vn]=null}};function gh(r){this._internalRoot=r}gh.prototype.unstable_scheduleHydration=function(r){if(r){var s=Xr();r={blockedOn:null,target:r,priority:s};for(var o=0;o<Is.length&&s!==0&&s<Is[o].priority;o++);Is.splice(o,0,r),o===0&&mE(r)}};var vE=e.version;if(vE!=="19.1.0")throw Error(i(527,vE,"19.1.0"));W.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(s),r=r!==null?m(r):null,r=r===null?null:r.stateNode,r};var MN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mh.isDisabled&&mh.supportsFiber)try{at=mh.inject(MN),Ye=mh}catch{}}return Gc.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",g=M_,p=P_,w=V_,D=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(D=s.unstable_transitionCallbacks)),s=lE(r,1,!1,null,null,o,u,g,p,w,D,null),r[Vn]=s.current,$m(r),new op(s)},Gc.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,g="",p=M_,w=P_,D=V_,X=null,ae=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(D=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(X=o.unstable_transitionCallbacks),o.formState!==void 0&&(ae=o.formState)),s=lE(r,1,!0,s,o??null,u,g,p,w,D,X,ae),s.context=cE(null),o=s.current,u=er(),u=Yr(u),g=fs(u),g.callback=null,gs(o,g,u),o=u,s.current.lanes=o,ur(s,o),di(s),r[Vn]=s.current,$m(r),new gh(s)},Gc.version="19.1.0",Gc}var NE;function FN(){if(NE)return up.exports;NE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),up.exports=qN(),up.exports}var GN=FN();function Pn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=Pn(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var gp={exports:{}},mp={},pp={exports:{}},yp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE;function YN(){if(CE)return yp;CE=1;var t=Uu();function e(v,b){return v===b&&(v!==0||1/v===1/b)||v!==v&&b!==b}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,a=t.useEffect,l=t.useLayoutEffect,c=t.useDebugValue;function d(v,b){var x=b(),O=i({inst:{value:x,getSnapshot:b}}),k=O[0].inst,M=O[1];return l(function(){k.value=x,k.getSnapshot=b,f(k)&&M({inst:k})},[v,x,b]),a(function(){return f(k)&&M({inst:k}),v(function(){f(k)&&M({inst:k})})},[v]),c(x),x}function f(v){var b=v.getSnapshot;v=v.value;try{var x=b();return!n(v,x)}catch{return!0}}function m(v,b){return b()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return yp.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,yp}var IE;function XN(){return IE||(IE=1,pp.exports=YN()),pp.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE;function KN(){if(kE)return mp;kE=1;var t=Uu(),e=XN();function n(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var i=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,l=t.useRef,c=t.useEffect,d=t.useMemo,f=t.useDebugValue;return mp.useSyncExternalStoreWithSelector=function(m,y,v,b,x){var O=l(null);if(O.current===null){var k={hasValue:!1,value:null};O.current=k}else k=O.current;O=d(function(){function V(Z){if(!q){if(q=!0,F=Z,Z=b(Z),x!==void 0&&k.hasValue){var N=k.value;if(x(N,Z))return j=N}return j=Z}if(N=j,i(F,Z))return N;var A=b(Z);return x!==void 0&&x(N,A)?(F=Z,N):(F=Z,j=A)}var q=!1,F,j,ee=v===void 0?null:v;return[function(){return V(y())},ee===null?void 0:function(){return V(ee())}]},[y,v,b,x]);var M=a(m,O[0],O[1]);return c(function(){k.hasValue=!0,k.value=M},[M]),f(M),M},mp}var DE;function QN(){return DE||(DE=1,gp.exports=KN()),gp.exports}var WN=QN();const ZN=Ix(WN),JN={},OE=t=>{let e;const n=new Set,i=(y,v)=>{const b=typeof y=="function"?y(e):y;if(!Object.is(b,e)){const x=e;e=v??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(O=>O(e,x))}},a=()=>e,f={setState:i,getState:a,getInitialState:()=>m,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(JN?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},m=e=t(i,a,f);return f},eC=t=>t?OE(t):OE,{useDebugValue:tC}=fe,{useSyncExternalStoreWithSelector:nC}=ZN,rC=t=>t;function Dx(t,e=rC,n){const i=nC(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return tC(i),i}const ME=(t,e)=>{const n=eC(t),i=(a,l=e)=>Dx(n,a,l);return Object.assign(i,n),i},iC=(t,e)=>t?ME(t,e):ME;function Sn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[i,a]of t)if(!Object.is(a,e.get(i)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(t[i],e[i]))return!1;return!0}var sC={value:()=>{}};function Df(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new zh(n)}function zh(t){this._=t}function aC(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}zh.prototype=Df.prototype={constructor:zh,on:function(t,e){var n=this._,i=aC(t+"",n),a,l=-1,c=i.length;if(arguments.length<2){for(;++l<c;)if((a=(t=i[l]).type)&&(a=oC(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<c;)if(a=(t=i[l]).type)n[a]=PE(n[a],t.name,e);else if(e==null)for(a in n)n[a]=PE(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new zh(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,l;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],i=0,a=l.length;i<a;++i)l[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,l=i.length;a<l;++a)i[a].value.apply(e,n)}};function oC(t,e){for(var n=0,i=t.length,a;n<i;++n)if((a=t[n]).name===e)return a.value}function PE(t,e,n){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=sC,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Gp="http://www.w3.org/1999/xhtml";const VE={svg:"http://www.w3.org/2000/svg",xhtml:Gp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Of(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),VE.hasOwnProperty(e)?{space:VE[e],local:t}:t}function lC(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Gp&&e.documentElement.namespaceURI===Gp?e.createElement(t):e.createElementNS(n,t)}}function cC(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ox(t){var e=Of(t);return(e.local?cC:lC)(e)}function uC(){}function U0(t){return t==null?uC:function(){return this.querySelector(t)}}function dC(t){typeof t!="function"&&(t=U0(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=i[a]=new Array(c),f,m,y=0;y<c;++y)(f=l[y])&&(m=t.call(f,f.__data__,y,l))&&("__data__"in f&&(m.__data__=f.__data__),d[y]=m);return new lr(i,this._parents)}function hC(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function fC(){return[]}function Mx(t){return t==null?fC:function(){return this.querySelectorAll(t)}}function gC(t){return function(){return hC(t.apply(this,arguments))}}function mC(t){typeof t=="function"?t=gC(t):t=Mx(t);for(var e=this._groups,n=e.length,i=[],a=[],l=0;l<n;++l)for(var c=e[l],d=c.length,f,m=0;m<d;++m)(f=c[m])&&(i.push(t.call(f,f.__data__,m,c)),a.push(f));return new lr(i,a)}function Px(t){return function(){return this.matches(t)}}function Vx(t){return function(e){return e.matches(t)}}var pC=Array.prototype.find;function yC(t){return function(){return pC.call(this.children,t)}}function vC(){return this.firstElementChild}function _C(t){return this.select(t==null?vC:yC(typeof t=="function"?t:Vx(t)))}var bC=Array.prototype.filter;function EC(){return Array.from(this.children)}function wC(t){return function(){return bC.call(this.children,t)}}function xC(t){return this.selectAll(t==null?EC:wC(typeof t=="function"?t:Vx(t)))}function TC(t){typeof t!="function"&&(t=Px(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=i[a]=[],f,m=0;m<c;++m)(f=l[m])&&t.call(f,f.__data__,m,l)&&d.push(f);return new lr(i,this._parents)}function Lx(t){return new Array(t.length)}function SC(){return new lr(this._enter||this._groups.map(Lx),this._parents)}function ef(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ef.prototype={constructor:ef,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function AC(t){return function(){return t}}function RC(t,e,n,i,a,l){for(var c=0,d,f=e.length,m=l.length;c<m;++c)(d=e[c])?(d.__data__=l[c],i[c]=d):n[c]=new ef(t,l[c]);for(;c<f;++c)(d=e[c])&&(a[c]=d)}function NC(t,e,n,i,a,l,c){var d,f,m=new Map,y=e.length,v=l.length,b=new Array(y),x;for(d=0;d<y;++d)(f=e[d])&&(b[d]=x=c.call(f,f.__data__,d,e)+"",m.has(x)?a[d]=f:m.set(x,f));for(d=0;d<v;++d)x=c.call(t,l[d],d,l)+"",(f=m.get(x))?(i[d]=f,f.__data__=l[d],m.delete(x)):n[d]=new ef(t,l[d]);for(d=0;d<y;++d)(f=e[d])&&m.get(b[d])===f&&(a[d]=f)}function CC(t){return t.__data__}function IC(t,e){if(!arguments.length)return Array.from(this,CC);var n=e?NC:RC,i=this._parents,a=this._groups;typeof t!="function"&&(t=AC(t));for(var l=a.length,c=new Array(l),d=new Array(l),f=new Array(l),m=0;m<l;++m){var y=i[m],v=a[m],b=v.length,x=kC(t.call(y,y&&y.__data__,m,i)),O=x.length,k=d[m]=new Array(O),M=c[m]=new Array(O),V=f[m]=new Array(b);n(y,v,k,M,V,x,e);for(var q=0,F=0,j,ee;q<O;++q)if(j=k[q]){for(q>=F&&(F=q+1);!(ee=M[F])&&++F<O;);j._next=ee||null}}return c=new lr(c,i),c._enter=d,c._exit=f,c}function kC(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function DC(){return new lr(this._exit||this._groups.map(Lx),this._parents)}function OC(t,e,n){var i=this.enter(),a=this,l=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),n==null?l.remove():n(l),i&&a?i.merge(a).order():a}function MC(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,a=n.length,l=i.length,c=Math.min(a,l),d=new Array(a),f=0;f<c;++f)for(var m=n[f],y=i[f],v=m.length,b=d[f]=new Array(v),x,O=0;O<v;++O)(x=m[O]||y[O])&&(b[O]=x);for(;f<a;++f)d[f]=n[f];return new lr(d,this._parents)}function PC(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],a=i.length-1,l=i[a],c;--a>=0;)(c=i[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function VC(t){t||(t=LC);function e(v,b){return v&&b?t(v.__data__,b.__data__):!v-!b}for(var n=this._groups,i=n.length,a=new Array(i),l=0;l<i;++l){for(var c=n[l],d=c.length,f=a[l]=new Array(d),m,y=0;y<d;++y)(m=c[y])&&(f[y]=m);f.sort(e)}return new lr(a,this._parents).order()}function LC(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function zC(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function UC(){return Array.from(this)}function BC(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,l=i.length;a<l;++a){var c=i[a];if(c)return c}return null}function jC(){let t=0;for(const e of this)++t;return t}function HC(){return!this.node()}function $C(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var a=e[n],l=0,c=a.length,d;l<c;++l)(d=a[l])&&t.call(d,d.__data__,l,a);return this}function qC(t){return function(){this.removeAttribute(t)}}function FC(t){return function(){this.removeAttributeNS(t.space,t.local)}}function GC(t,e){return function(){this.setAttribute(t,e)}}function YC(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function XC(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function KC(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function QC(t,e){var n=Of(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?FC:qC:typeof e=="function"?n.local?KC:XC:n.local?YC:GC)(n,e))}function zx(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function WC(t){return function(){this.style.removeProperty(t)}}function ZC(t,e,n){return function(){this.style.setProperty(t,e,n)}}function JC(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function eI(t,e,n){return arguments.length>1?this.each((e==null?WC:typeof e=="function"?JC:ZC)(t,e,n??"")):Rl(this.node(),t)}function Rl(t,e){return t.style.getPropertyValue(e)||zx(t).getComputedStyle(t,null).getPropertyValue(e)}function tI(t){return function(){delete this[t]}}function nI(t,e){return function(){this[t]=e}}function rI(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function iI(t,e){return arguments.length>1?this.each((e==null?tI:typeof e=="function"?rI:nI)(t,e)):this.node()[t]}function Ux(t){return t.trim().split(/^|\s+/)}function B0(t){return t.classList||new Bx(t)}function Bx(t){this._node=t,this._names=Ux(t.getAttribute("class")||"")}Bx.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function jx(t,e){for(var n=B0(t),i=-1,a=e.length;++i<a;)n.add(e[i])}function Hx(t,e){for(var n=B0(t),i=-1,a=e.length;++i<a;)n.remove(e[i])}function sI(t){return function(){jx(this,t)}}function aI(t){return function(){Hx(this,t)}}function oI(t,e){return function(){(e.apply(this,arguments)?jx:Hx)(this,t)}}function lI(t,e){var n=Ux(t+"");if(arguments.length<2){for(var i=B0(this.node()),a=-1,l=n.length;++a<l;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?oI:e?sI:aI)(n,e))}function cI(){this.textContent=""}function uI(t){return function(){this.textContent=t}}function dI(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function hI(t){return arguments.length?this.each(t==null?cI:(typeof t=="function"?dI:uI)(t)):this.node().textContent}function fI(){this.innerHTML=""}function gI(t){return function(){this.innerHTML=t}}function mI(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function pI(t){return arguments.length?this.each(t==null?fI:(typeof t=="function"?mI:gI)(t)):this.node().innerHTML}function yI(){this.nextSibling&&this.parentNode.appendChild(this)}function vI(){return this.each(yI)}function _I(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bI(){return this.each(_I)}function EI(t){var e=typeof t=="function"?t:Ox(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function wI(){return null}function xI(t,e){var n=typeof t=="function"?t:Ox(t),i=e==null?wI:typeof e=="function"?e:U0(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function TI(){var t=this.parentNode;t&&t.removeChild(this)}function SI(){return this.each(TI)}function AI(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function RI(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function NI(t){return this.select(t?RI:AI)}function CI(t){return arguments.length?this.property("__data__",t):this.node().__data__}function II(t){return function(e){t.call(this,e,this.__data__)}}function kI(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function DI(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,a=e.length,l;n<a;++n)l=e[n],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.options):e[++i]=l;++i?e.length=i:delete this.__on}}}function OI(t,e,n){return function(){var i=this.__on,a,l=II(e);if(i){for(var c=0,d=i.length;c<d;++c)if((a=i[c]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=e;return}}this.addEventListener(t.type,l,n),a={type:t.type,name:t.name,value:e,listener:l,options:n},i?i.push(a):this.__on=[a]}}function MI(t,e,n){var i=kI(t+""),a,l=i.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var f=0,m=d.length,y;f<m;++f)for(a=0,y=d[f];a<l;++a)if((c=i[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=e?OI:DI,a=0;a<l;++a)this.each(d(i[a],e,n));return this}function $x(t,e,n){var i=zx(t),a=i.CustomEvent;typeof a=="function"?a=new a(e,n):(a=i.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function PI(t,e){return function(){return $x(this,t,e)}}function VI(t,e){return function(){return $x(this,t,e.apply(this,arguments))}}function LI(t,e){return this.each((typeof e=="function"?VI:PI)(t,e))}function*zI(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,l=i.length,c;a<l;++a)(c=i[a])&&(yield c)}var qx=[null];function lr(t,e){this._groups=t,this._parents=e}function Bu(){return new lr([[document.documentElement]],qx)}function UI(){return this}lr.prototype=Bu.prototype={constructor:lr,select:dC,selectAll:mC,selectChild:_C,selectChildren:xC,filter:TC,data:IC,enter:SC,exit:DC,join:OC,merge:MC,selection:UI,order:PC,sort:VC,call:zC,nodes:UC,node:BC,size:jC,empty:HC,each:$C,attr:QC,style:eI,property:iI,classed:lI,text:hI,html:pI,raise:vI,lower:bI,append:EI,insert:xI,remove:SI,clone:NI,datum:CI,on:MI,dispatch:LI,[Symbol.iterator]:zI};function zr(t){return typeof t=="string"?new lr([[document.querySelector(t)]],[document.documentElement]):new lr([[t]],qx)}function BI(t){let e;for(;e=t.sourceEvent;)t=e;return t}function fi(t,e){if(t=BI(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const jI={passive:!1},bu={capture:!0,passive:!1};function vp(t){t.stopImmediatePropagation()}function yl(t){t.preventDefault(),t.stopImmediatePropagation()}function Fx(t){var e=t.document.documentElement,n=zr(t).on("dragstart.drag",yl,bu);"onselectstart"in e?n.on("selectstart.drag",yl,bu):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Gx(t,e){var n=t.document.documentElement,i=zr(t).on("dragstart.drag",null);e&&(i.on("click.drag",yl,bu),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ph=t=>()=>t;function Yp(t,{sourceEvent:e,subject:n,target:i,identifier:a,active:l,x:c,y:d,dx:f,dy:m,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:y}})}Yp.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function HI(t){return!t.ctrlKey&&!t.button}function $I(){return this.parentNode}function qI(t,e){return e??{x:t.x,y:t.y}}function FI(){return navigator.maxTouchPoints||"ontouchstart"in this}function GI(){var t=HI,e=$I,n=qI,i=FI,a={},l=Df("start","drag","end"),c=0,d,f,m,y,v=0;function b(j){j.on("mousedown.drag",x).filter(i).on("touchstart.drag",M).on("touchmove.drag",V,jI).on("touchend.drag touchcancel.drag",q).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(j,ee){if(!(y||!t.call(this,j,ee))){var Z=F(this,e.call(this,j,ee),j,ee,"mouse");Z&&(zr(j.view).on("mousemove.drag",O,bu).on("mouseup.drag",k,bu),Fx(j.view),vp(j),m=!1,d=j.clientX,f=j.clientY,Z("start",j))}}function O(j){if(yl(j),!m){var ee=j.clientX-d,Z=j.clientY-f;m=ee*ee+Z*Z>v}a.mouse("drag",j)}function k(j){zr(j.view).on("mousemove.drag mouseup.drag",null),Gx(j.view,m),yl(j),a.mouse("end",j)}function M(j,ee){if(t.call(this,j,ee)){var Z=j.changedTouches,N=e.call(this,j,ee),A=Z.length,C,z;for(C=0;C<A;++C)(z=F(this,N,j,ee,Z[C].identifier,Z[C]))&&(vp(j),z("start",j,Z[C]))}}function V(j){var ee=j.changedTouches,Z=ee.length,N,A;for(N=0;N<Z;++N)(A=a[ee[N].identifier])&&(yl(j),A("drag",j,ee[N]))}function q(j){var ee=j.changedTouches,Z=ee.length,N,A;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),N=0;N<Z;++N)(A=a[ee[N].identifier])&&(vp(j),A("end",j,ee[N]))}function F(j,ee,Z,N,A,C){var z=l.copy(),U=fi(C||Z,ee),H,I,P;if((P=n.call(j,new Yp("beforestart",{sourceEvent:Z,target:b,identifier:A,active:c,x:U[0],y:U[1],dx:0,dy:0,dispatch:z}),N))!=null)return H=P.x-U[0]||0,I=P.y-U[1]||0,function $(R,W,G){var Y=U,S;switch(R){case"start":a[A]=$,S=c++;break;case"end":delete a[A],--c;case"drag":U=fi(G||W,ee),S=c;break}z.call(R,j,new Yp(R,{sourceEvent:W,subject:P,target:b,identifier:A,active:S,x:U[0]+H,y:U[1]+I,dx:U[0]-Y[0],dy:U[1]-Y[1],dispatch:z}),N)}}return b.filter=function(j){return arguments.length?(t=typeof j=="function"?j:ph(!!j),b):t},b.container=function(j){return arguments.length?(e=typeof j=="function"?j:ph(j),b):e},b.subject=function(j){return arguments.length?(n=typeof j=="function"?j:ph(j),b):n},b.touchable=function(j){return arguments.length?(i=typeof j=="function"?j:ph(!!j),b):i},b.on=function(){var j=l.on.apply(l,arguments);return j===l?b:j},b.clickDistance=function(j){return arguments.length?(v=(j=+j)*j,b):Math.sqrt(v)},b}function j0(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Yx(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function ju(){}var Eu=.7,tf=1/Eu,vl="\\s*([+-]?\\d+)\\s*",wu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",YI=/^#([0-9a-f]{3,8})$/,XI=new RegExp(`^rgb\\(${vl},${vl},${vl}\\)$`),KI=new RegExp(`^rgb\\(${mi},${mi},${mi}\\)$`),QI=new RegExp(`^rgba\\(${vl},${vl},${vl},${wu}\\)$`),WI=new RegExp(`^rgba\\(${mi},${mi},${mi},${wu}\\)$`),ZI=new RegExp(`^hsl\\(${wu},${mi},${mi}\\)$`),JI=new RegExp(`^hsla\\(${wu},${mi},${mi},${wu}\\)$`),LE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};j0(ju,xu,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:zE,formatHex:zE,formatHex8:ek,formatHsl:tk,formatRgb:UE,toString:UE});function zE(){return this.rgb().formatHex()}function ek(){return this.rgb().formatHex8()}function tk(){return Xx(this).formatHsl()}function UE(){return this.rgb().formatRgb()}function xu(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=YI.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?BE(e):n===3?new Hn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?yh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?yh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=XI.exec(t))?new Hn(e[1],e[2],e[3],1):(e=KI.exec(t))?new Hn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=QI.exec(t))?yh(e[1],e[2],e[3],e[4]):(e=WI.exec(t))?yh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ZI.exec(t))?$E(e[1],e[2]/100,e[3]/100,1):(e=JI.exec(t))?$E(e[1],e[2]/100,e[3]/100,e[4]):LE.hasOwnProperty(t)?BE(LE[t]):t==="transparent"?new Hn(NaN,NaN,NaN,0):null}function BE(t){return new Hn(t>>16&255,t>>8&255,t&255,1)}function yh(t,e,n,i){return i<=0&&(t=e=n=NaN),new Hn(t,e,n,i)}function nk(t){return t instanceof ju||(t=xu(t)),t?(t=t.rgb(),new Hn(t.r,t.g,t.b,t.opacity)):new Hn}function Xp(t,e,n,i){return arguments.length===1?nk(t):new Hn(t,e,n,i??1)}function Hn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}j0(Hn,Xp,Yx(ju,{brighter(t){return t=t==null?tf:Math.pow(tf,t),new Hn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Eu:Math.pow(Eu,t),new Hn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Hn(Ya(this.r),Ya(this.g),Ya(this.b),nf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jE,formatHex:jE,formatHex8:rk,formatRgb:HE,toString:HE}));function jE(){return`#${qa(this.r)}${qa(this.g)}${qa(this.b)}`}function rk(){return`#${qa(this.r)}${qa(this.g)}${qa(this.b)}${qa((isNaN(this.opacity)?1:this.opacity)*255)}`}function HE(){const t=nf(this.opacity);return`${t===1?"rgb(":"rgba("}${Ya(this.r)}, ${Ya(this.g)}, ${Ya(this.b)}${t===1?")":`, ${t})`}`}function nf(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ya(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qa(t){return t=Ya(t),(t<16?"0":"")+t.toString(16)}function $E(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ur(t,e,n,i)}function Xx(t){if(t instanceof Ur)return new Ur(t.h,t.s,t.l,t.opacity);if(t instanceof ju||(t=xu(t)),!t)return new Ur;if(t instanceof Ur)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,a=Math.min(e,n,i),l=Math.max(e,n,i),c=NaN,d=l-a,f=(l+a)/2;return d?(e===l?c=(n-i)/d+(n<i)*6:n===l?c=(i-e)/d+2:c=(e-n)/d+4,d/=f<.5?l+a:2-l-a,c*=60):d=f>0&&f<1?0:c,new Ur(c,d,f,t.opacity)}function ik(t,e,n,i){return arguments.length===1?Xx(t):new Ur(t,e,n,i??1)}function Ur(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}j0(Ur,ik,Yx(ju,{brighter(t){return t=t==null?tf:Math.pow(tf,t),new Ur(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Eu:Math.pow(Eu,t),new Ur(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,a=2*n-i;return new Hn(_p(t>=240?t-240:t+120,a,i),_p(t,a,i),_p(t<120?t+240:t-120,a,i),this.opacity)},clamp(){return new Ur(qE(this.h),vh(this.s),vh(this.l),nf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=nf(this.opacity);return`${t===1?"hsl(":"hsla("}${qE(this.h)}, ${vh(this.s)*100}%, ${vh(this.l)*100}%${t===1?")":`, ${t})`}`}}));function qE(t){return t=(t||0)%360,t<0?t+360:t}function vh(t){return Math.max(0,Math.min(1,t||0))}function _p(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Kx=t=>()=>t;function sk(t,e){return function(n){return t+n*e}}function ak(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function ok(t){return(t=+t)==1?Qx:function(e,n){return n-e?ak(e,n,t):Kx(isNaN(e)?n:e)}}function Qx(t,e){var n=e-t;return n?sk(t,n):Kx(isNaN(t)?e:t)}const FE=function t(e){var n=ok(e);function i(a,l){var c=n((a=Xp(a)).r,(l=Xp(l)).r),d=n(a.g,l.g),f=n(a.b,l.b),m=Qx(a.opacity,l.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=f(y),a.opacity=m(y),a+""}}return i.gamma=t,i}(1);function Ms(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Kp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bp=new RegExp(Kp.source,"g");function lk(t){return function(){return t}}function ck(t){return function(e){return t(e)+""}}function uk(t,e){var n=Kp.lastIndex=bp.lastIndex=0,i,a,l,c=-1,d=[],f=[];for(t=t+"",e=e+"";(i=Kp.exec(t))&&(a=bp.exec(e));)(l=a.index)>n&&(l=e.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(i=i[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,f.push({i:c,x:Ms(i,a)})),n=bp.lastIndex;return n<e.length&&(l=e.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?f[0]?ck(f[0].x):lk(e):(e=f.length,function(m){for(var y=0,v;y<e;++y)d[(v=f[y]).i]=v.x(m);return d.join("")})}var GE=180/Math.PI,Qp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Wx(t,e,n,i,a,l){var c,d,f;return(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c),(f=t*n+e*i)&&(n-=t*f,i-=e*f),(d=Math.sqrt(n*n+i*i))&&(n/=d,i/=d,f/=d),t*i<e*n&&(t=-t,e=-e,f=-f,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(e,t)*GE,skewX:Math.atan(f)*GE,scaleX:c,scaleY:d}}var _h;function dk(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Qp:Wx(e.a,e.b,e.c,e.d,e.e,e.f)}function hk(t){return t==null||(_h||(_h=document.createElementNS("http://www.w3.org/2000/svg","g")),_h.setAttribute("transform",t),!(t=_h.transform.baseVal.consolidate()))?Qp:(t=t.matrix,Wx(t.a,t.b,t.c,t.d,t.e,t.f))}function Zx(t,e,n,i){function a(m){return m.length?m.pop()+" ":""}function l(m,y,v,b,x,O){if(m!==v||y!==b){var k=x.push("translate(",null,e,null,n);O.push({i:k-4,x:Ms(m,v)},{i:k-2,x:Ms(y,b)})}else(v||b)&&x.push("translate("+v+e+b+n)}function c(m,y,v,b){m!==y?(m-y>180?y+=360:y-m>180&&(m+=360),b.push({i:v.push(a(v)+"rotate(",null,i)-2,x:Ms(m,y)})):y&&v.push(a(v)+"rotate("+y+i)}function d(m,y,v,b){m!==y?b.push({i:v.push(a(v)+"skewX(",null,i)-2,x:Ms(m,y)}):y&&v.push(a(v)+"skewX("+y+i)}function f(m,y,v,b,x,O){if(m!==v||y!==b){var k=x.push(a(x)+"scale(",null,",",null,")");O.push({i:k-4,x:Ms(m,v)},{i:k-2,x:Ms(y,b)})}else(v!==1||b!==1)&&x.push(a(x)+"scale("+v+","+b+")")}return function(m,y){var v=[],b=[];return m=t(m),y=t(y),l(m.translateX,m.translateY,y.translateX,y.translateY,v,b),c(m.rotate,y.rotate,v,b),d(m.skewX,y.skewX,v,b),f(m.scaleX,m.scaleY,y.scaleX,y.scaleY,v,b),m=y=null,function(x){for(var O=-1,k=b.length,M;++O<k;)v[(M=b[O]).i]=M.x(x);return v.join("")}}}var fk=Zx(dk,"px, ","px)","deg)"),gk=Zx(hk,", ",")",")"),mk=1e-12;function YE(t){return((t=Math.exp(t))+1/t)/2}function pk(t){return((t=Math.exp(t))-1/t)/2}function yk(t){return((t=Math.exp(2*t))-1)/(t+1)}const vk=function t(e,n,i){function a(l,c){var d=l[0],f=l[1],m=l[2],y=c[0],v=c[1],b=c[2],x=y-d,O=v-f,k=x*x+O*O,M,V;if(k<mk)V=Math.log(b/m)/e,M=function(N){return[d+N*x,f+N*O,m*Math.exp(e*N*V)]};else{var q=Math.sqrt(k),F=(b*b-m*m+i*k)/(2*m*n*q),j=(b*b-m*m-i*k)/(2*b*n*q),ee=Math.log(Math.sqrt(F*F+1)-F),Z=Math.log(Math.sqrt(j*j+1)-j);V=(Z-ee)/e,M=function(N){var A=N*V,C=YE(ee),z=m/(n*q)*(C*yk(e*A+ee)-pk(ee));return[d+z*x,f+z*O,m*C/YE(e*A+ee)]}}return M.duration=V*1e3*e/Math.SQRT2,M}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,f=d*d;return t(c,d,f)},a}(Math.SQRT2,2,4);var Nl=0,nu=0,Yc=0,Jx=1e3,rf,ru,sf=0,Ka=0,Mf=0,Tu=typeof performance=="object"&&performance.now?performance:Date,eT=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function H0(){return Ka||(eT(_k),Ka=Tu.now()+Mf)}function _k(){Ka=0}function af(){this._call=this._time=this._next=null}af.prototype=tT.prototype={constructor:af,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?H0():+n)+(e==null?0:+e),!this._next&&ru!==this&&(ru?ru._next=this:rf=this,ru=this),this._call=t,this._time=n,Wp()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wp())}};function tT(t,e,n){var i=new af;return i.restart(t,e,n),i}function bk(){H0(),++Nl;for(var t=rf,e;t;)(e=Ka-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Nl}function XE(){Ka=(sf=Tu.now())+Mf,Nl=nu=0;try{bk()}finally{Nl=0,wk(),Ka=0}}function Ek(){var t=Tu.now(),e=t-sf;e>Jx&&(Mf-=e,sf=t)}function wk(){for(var t,e=rf,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:rf=n);ru=t,Wp(i)}function Wp(t){if(!Nl){nu&&(nu=clearTimeout(nu));var e=t-Ka;e>24?(t<1/0&&(nu=setTimeout(XE,t-Tu.now()-Mf)),Yc&&(Yc=clearInterval(Yc))):(Yc||(sf=Tu.now(),Yc=setInterval(Ek,Jx)),Nl=1,eT(XE))}}function KE(t,e,n){var i=new af;return e=e==null?0:+e,i.restart(a=>{i.stop(),t(a+e)},e,n),i}var xk=Df("start","end","cancel","interrupt"),Tk=[],nT=0,QE=1,Zp=2,Uh=3,WE=4,Jp=5,Bh=6;function Pf(t,e,n,i,a,l){var c=t.__transition;if(!c)t.__transition={};else if(n in c)return;Sk(t,n,{name:e,index:i,group:a,on:xk,tween:Tk,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:nT})}function $0(t,e){var n=Fr(t,e);if(n.state>nT)throw new Error("too late; already scheduled");return n}function wi(t,e){var n=Fr(t,e);if(n.state>Uh)throw new Error("too late; already running");return n}function Fr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Sk(t,e,n){var i=t.__transition,a;i[e]=n,n.timer=tT(l,0,n.time);function l(m){n.state=QE,n.timer.restart(c,n.delay,n.time),n.delay<=m&&c(m-n.delay)}function c(m){var y,v,b,x;if(n.state!==QE)return f();for(y in i)if(x=i[y],x.name===n.name){if(x.state===Uh)return KE(c);x.state===WE?(x.state=Bh,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete i[y]):+y<e&&(x.state=Bh,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete i[y])}if(KE(function(){n.state===Uh&&(n.state=WE,n.timer.restart(d,n.delay,n.time),d(m))}),n.state=Zp,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Zp){for(n.state=Uh,a=new Array(b=n.tween.length),y=0,v=-1;y<b;++y)(x=n.tween[y].value.call(t,t.__data__,n.index,n.group))&&(a[++v]=x);a.length=v+1}}function d(m){for(var y=m<n.duration?n.ease.call(null,m/n.duration):(n.timer.restart(f),n.state=Jp,1),v=-1,b=a.length;++v<b;)a[v].call(t,y);n.state===Jp&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=Bh,n.timer.stop(),delete i[e];for(var m in i)return;delete t.__transition}}function jh(t,e){var n=t.__transition,i,a,l=!0,c;if(n){e=e==null?null:e+"";for(c in n){if((i=n[c]).name!==e){l=!1;continue}a=i.state>Zp&&i.state<Jp,i.state=Bh,i.timer.stop(),i.on.call(a?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[c]}l&&delete t.__transition}}function Ak(t){return this.each(function(){jh(this,t)})}function Rk(t,e){var n,i;return function(){var a=wi(this,t),l=a.tween;if(l!==n){i=n=l;for(var c=0,d=i.length;c<d;++c)if(i[c].name===e){i=i.slice(),i.splice(c,1);break}}a.tween=i}}function Nk(t,e,n){var i,a;if(typeof n!="function")throw new Error;return function(){var l=wi(this,t),c=l.tween;if(c!==i){a=(i=c).slice();for(var d={name:e,value:n},f=0,m=a.length;f<m;++f)if(a[f].name===e){a[f]=d;break}f===m&&a.push(d)}l.tween=a}}function Ck(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=Fr(this.node(),n).tween,a=0,l=i.length,c;a<l;++a)if((c=i[a]).name===t)return c.value;return null}return this.each((e==null?Rk:Nk)(n,t,e))}function q0(t,e,n){var i=t._id;return t.each(function(){var a=wi(this,i);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return Fr(a,i).value[e]}}function rT(t,e){var n;return(typeof e=="number"?Ms:e instanceof xu?FE:(n=xu(e))?(e=n,FE):uk)(t,e)}function Ik(t){return function(){this.removeAttribute(t)}}function kk(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Dk(t,e,n){var i,a=n+"",l;return function(){var c=this.getAttribute(t);return c===a?null:c===i?l:l=e(i=c,n)}}function Ok(t,e,n){var i,a=n+"",l;return function(){var c=this.getAttributeNS(t.space,t.local);return c===a?null:c===i?l:l=e(i=c,n)}}function Mk(t,e,n){var i,a,l;return function(){var c,d=n(this),f;return d==null?void this.removeAttribute(t):(c=this.getAttribute(t),f=d+"",c===f?null:c===i&&f===a?l:(a=f,l=e(i=c,d)))}}function Pk(t,e,n){var i,a,l;return function(){var c,d=n(this),f;return d==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),f=d+"",c===f?null:c===i&&f===a?l:(a=f,l=e(i=c,d)))}}function Vk(t,e){var n=Of(t),i=n==="transform"?gk:rT;return this.attrTween(t,typeof e=="function"?(n.local?Pk:Mk)(n,i,q0(this,"attr."+t,e)):e==null?(n.local?kk:Ik)(n):(n.local?Ok:Dk)(n,i,e))}function Lk(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function zk(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Uk(t,e){var n,i;function a(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&zk(t,l)),n}return a._value=e,a}function Bk(t,e){var n,i;function a(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&Lk(t,l)),n}return a._value=e,a}function jk(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Of(t);return this.tween(n,(i.local?Uk:Bk)(i,e))}function Hk(t,e){return function(){$0(this,t).delay=+e.apply(this,arguments)}}function $k(t,e){return e=+e,function(){$0(this,t).delay=e}}function qk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Hk:$k)(e,t)):Fr(this.node(),e).delay}function Fk(t,e){return function(){wi(this,t).duration=+e.apply(this,arguments)}}function Gk(t,e){return e=+e,function(){wi(this,t).duration=e}}function Yk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Fk:Gk)(e,t)):Fr(this.node(),e).duration}function Xk(t,e){if(typeof e!="function")throw new Error;return function(){wi(this,t).ease=e}}function Kk(t){var e=this._id;return arguments.length?this.each(Xk(e,t)):Fr(this.node(),e).ease}function Qk(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;wi(this,t).ease=n}}function Wk(t){if(typeof t!="function")throw new Error;return this.each(Qk(this._id,t))}function Zk(t){typeof t!="function"&&(t=Px(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=i[a]=[],f,m=0;m<c;++m)(f=l[m])&&t.call(f,f.__data__,m,l)&&d.push(f);return new es(i,this._parents,this._name,this._id)}function Jk(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,a=n.length,l=Math.min(i,a),c=new Array(i),d=0;d<l;++d)for(var f=e[d],m=n[d],y=f.length,v=c[d]=new Array(y),b,x=0;x<y;++x)(b=f[x]||m[x])&&(v[x]=b);for(;d<i;++d)c[d]=e[d];return new es(c,this._parents,this._name,this._id)}function e4(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function t4(t,e,n){var i,a,l=e4(e)?$0:wi;return function(){var c=l(this,t),d=c.on;d!==i&&(a=(i=d).copy()).on(e,n),c.on=a}}function n4(t,e){var n=this._id;return arguments.length<2?Fr(this.node(),n).on.on(t):this.each(t4(n,t,e))}function r4(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function i4(){return this.on("end.remove",r4(this._id))}function s4(t){var e=this._name,n=this._id;typeof t!="function"&&(t=U0(t));for(var i=this._groups,a=i.length,l=new Array(a),c=0;c<a;++c)for(var d=i[c],f=d.length,m=l[c]=new Array(f),y,v,b=0;b<f;++b)(y=d[b])&&(v=t.call(y,y.__data__,b,d))&&("__data__"in y&&(v.__data__=y.__data__),m[b]=v,Pf(m[b],e,n,b,m,Fr(y,n)));return new es(l,this._parents,e,n)}function a4(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Mx(t));for(var i=this._groups,a=i.length,l=[],c=[],d=0;d<a;++d)for(var f=i[d],m=f.length,y,v=0;v<m;++v)if(y=f[v]){for(var b=t.call(y,y.__data__,v,f),x,O=Fr(y,n),k=0,M=b.length;k<M;++k)(x=b[k])&&Pf(x,e,n,k,b,O);l.push(b),c.push(y)}return new es(l,c,e,n)}var o4=Bu.prototype.constructor;function l4(){return new o4(this._groups,this._parents)}function c4(t,e){var n,i,a;return function(){var l=Rl(this,t),c=(this.style.removeProperty(t),Rl(this,t));return l===c?null:l===n&&c===i?a:a=e(n=l,i=c)}}function iT(t){return function(){this.style.removeProperty(t)}}function u4(t,e,n){var i,a=n+"",l;return function(){var c=Rl(this,t);return c===a?null:c===i?l:l=e(i=c,n)}}function d4(t,e,n){var i,a,l;return function(){var c=Rl(this,t),d=n(this),f=d+"";return d==null&&(f=d=(this.style.removeProperty(t),Rl(this,t))),c===f?null:c===i&&f===a?l:(a=f,l=e(i=c,d))}}function h4(t,e){var n,i,a,l="style."+e,c="end."+l,d;return function(){var f=wi(this,t),m=f.on,y=f.value[l]==null?d||(d=iT(e)):void 0;(m!==n||a!==y)&&(i=(n=m).copy()).on(c,a=y),f.on=i}}function f4(t,e,n){var i=(t+="")=="transform"?fk:rT;return e==null?this.styleTween(t,c4(t,i)).on("end.style."+t,iT(t)):typeof e=="function"?this.styleTween(t,d4(t,i,q0(this,"style."+t,e))).each(h4(this._id,t)):this.styleTween(t,u4(t,i,e),n).on("end.style."+t,null)}function g4(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function m4(t,e,n){var i,a;function l(){var c=e.apply(this,arguments);return c!==a&&(i=(a=c)&&g4(t,c,n)),i}return l._value=e,l}function p4(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,m4(t,e,n??""))}function y4(t){return function(){this.textContent=t}}function v4(t){return function(){var e=t(this);this.textContent=e??""}}function _4(t){return this.tween("text",typeof t=="function"?v4(q0(this,"text",t)):y4(t==null?"":t+""))}function b4(t){return function(e){this.textContent=t.call(this,e)}}function E4(t){var e,n;function i(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&b4(a)),e}return i._value=t,i}function w4(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,E4(t))}function x4(){for(var t=this._name,e=this._id,n=sT(),i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],d=c.length,f,m=0;m<d;++m)if(f=c[m]){var y=Fr(f,e);Pf(f,t,n,m,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new es(i,this._parents,t,n)}function T4(){var t,e,n=this,i=n._id,a=n.size();return new Promise(function(l,c){var d={value:c},f={value:function(){--a===0&&l()}};n.each(function(){var m=wi(this,i),y=m.on;y!==t&&(e=(t=y).copy(),e._.cancel.push(d),e._.interrupt.push(d),e._.end.push(f)),m.on=e}),a===0&&l()})}var S4=0;function es(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function sT(){return++S4}var Xi=Bu.prototype;es.prototype={constructor:es,select:s4,selectAll:a4,selectChild:Xi.selectChild,selectChildren:Xi.selectChildren,filter:Zk,merge:Jk,selection:l4,transition:x4,call:Xi.call,nodes:Xi.nodes,node:Xi.node,size:Xi.size,empty:Xi.empty,each:Xi.each,on:n4,attr:Vk,attrTween:jk,style:f4,styleTween:p4,text:_4,textTween:w4,remove:i4,tween:Ck,delay:qk,duration:Yk,ease:Kk,easeVarying:Wk,end:T4,[Symbol.iterator]:Xi[Symbol.iterator]};function A4(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var R4={time:null,delay:0,duration:250,ease:A4};function N4(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function C4(t){var e,n;t instanceof es?(e=t._id,t=t._name):(e=sT(),(n=R4).time=H0(),t=t==null?null:t+"");for(var i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],d=c.length,f,m=0;m<d;++m)(f=c[m])&&Pf(f,t,e,m,c,n||N4(f,e));return new es(i,this._parents,t,e)}Bu.prototype.interrupt=Ak;Bu.prototype.transition=C4;const bh=t=>()=>t;function I4(t,{sourceEvent:e,target:n,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Qi(t,e,n){this.k=t,this.x=e,this.y=n}Qi.prototype={constructor:Qi,scale:function(t){return t===1?this:new Qi(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Qi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qs=new Qi(1,0,0);Qi.prototype;function Ep(t){t.stopImmediatePropagation()}function Xc(t){t.preventDefault(),t.stopImmediatePropagation()}function k4(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function D4(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ZE(){return this.__zoom||qs}function O4(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function M4(){return navigator.maxTouchPoints||"ontouchstart"in this}function P4(t,e,n){var i=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],c=t.invertY(e[1][1])-n[1][1];return t.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function V4(){var t=k4,e=D4,n=P4,i=O4,a=M4,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,f=vk,m=Df("start","zoom","end"),y,v,b,x=500,O=150,k=0,M=10;function V(P){P.property("__zoom",ZE).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",z).filter(a).on("touchstart.zoom",U).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}V.transform=function(P,$,R,W){var G=P.selection?P.selection():P;G.property("__zoom",ZE),P!==G?ee(P,$,R,W):G.interrupt().each(function(){Z(this,arguments).event(W).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},V.scaleBy=function(P,$,R,W){V.scaleTo(P,function(){var G=this.__zoom.k,Y=typeof $=="function"?$.apply(this,arguments):$;return G*Y},R,W)},V.scaleTo=function(P,$,R,W){V.transform(P,function(){var G=e.apply(this,arguments),Y=this.__zoom,S=R==null?j(G):typeof R=="function"?R.apply(this,arguments):R,Q=Y.invert(S),ne=typeof $=="function"?$.apply(this,arguments):$;return n(F(q(Y,ne),S,Q),G,c)},R,W)},V.translateBy=function(P,$,R,W){V.transform(P,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof R=="function"?R.apply(this,arguments):R),e.apply(this,arguments),c)},null,W)},V.translateTo=function(P,$,R,W,G){V.transform(P,function(){var Y=e.apply(this,arguments),S=this.__zoom,Q=W==null?j(Y):typeof W=="function"?W.apply(this,arguments):W;return n(qs.translate(Q[0],Q[1]).scale(S.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof R=="function"?-R.apply(this,arguments):-R),Y,c)},W,G)};function q(P,$){return $=Math.max(l[0],Math.min(l[1],$)),$===P.k?P:new Qi($,P.x,P.y)}function F(P,$,R){var W=$[0]-R[0]*P.k,G=$[1]-R[1]*P.k;return W===P.x&&G===P.y?P:new Qi(P.k,W,G)}function j(P){return[(+P[0][0]+ +P[1][0])/2,(+P[0][1]+ +P[1][1])/2]}function ee(P,$,R,W){P.on("start.zoom",function(){Z(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){Z(this,arguments).event(W).end()}).tween("zoom",function(){var G=this,Y=arguments,S=Z(G,Y).event(W),Q=e.apply(G,Y),ne=R==null?j(Q):typeof R=="function"?R.apply(G,Y):R,K=Math.max(Q[1][0]-Q[0][0],Q[1][1]-Q[0][1]),te=G.__zoom,le=typeof $=="function"?$.apply(G,Y):$,de=f(te.invert(ne).concat(K/te.k),le.invert(ne).concat(K/le.k));return function(ge){if(ge===1)ge=le;else{var _e=de(ge),Ae=K/_e[2];ge=new Qi(Ae,ne[0]-_e[0]*Ae,ne[1]-_e[1]*Ae)}S.zoom(null,ge)}})}function Z(P,$,R){return!R&&P.__zooming||new N(P,$)}function N(P,$){this.that=P,this.args=$,this.active=0,this.sourceEvent=null,this.extent=e.apply(P,$),this.taps=0}N.prototype={event:function(P){return P&&(this.sourceEvent=P),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(P,$){return this.mouse&&P!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&P!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&P!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(P){var $=zr(this.that).datum();m.call(P,this.that,new I4(P,{sourceEvent:this.sourceEvent,target:V,transform:this.that.__zoom,dispatch:m}),$)}};function A(P,...$){if(!t.apply(this,arguments))return;var R=Z(this,$).event(P),W=this.__zoom,G=Math.max(l[0],Math.min(l[1],W.k*Math.pow(2,i.apply(this,arguments)))),Y=fi(P);if(R.wheel)(R.mouse[0][0]!==Y[0]||R.mouse[0][1]!==Y[1])&&(R.mouse[1]=W.invert(R.mouse[0]=Y)),clearTimeout(R.wheel);else{if(W.k===G)return;R.mouse=[Y,W.invert(Y)],jh(this),R.start()}Xc(P),R.wheel=setTimeout(S,O),R.zoom("mouse",n(F(q(W,G),R.mouse[0],R.mouse[1]),R.extent,c));function S(){R.wheel=null,R.end()}}function C(P,...$){if(b||!t.apply(this,arguments))return;var R=P.currentTarget,W=Z(this,$,!0).event(P),G=zr(P.view).on("mousemove.zoom",ne,!0).on("mouseup.zoom",K,!0),Y=fi(P,R),S=P.clientX,Q=P.clientY;Fx(P.view),Ep(P),W.mouse=[Y,this.__zoom.invert(Y)],jh(this),W.start();function ne(te){if(Xc(te),!W.moved){var le=te.clientX-S,de=te.clientY-Q;W.moved=le*le+de*de>k}W.event(te).zoom("mouse",n(F(W.that.__zoom,W.mouse[0]=fi(te,R),W.mouse[1]),W.extent,c))}function K(te){G.on("mousemove.zoom mouseup.zoom",null),Gx(te.view,W.moved),Xc(te),W.event(te).end()}}function z(P,...$){if(t.apply(this,arguments)){var R=this.__zoom,W=fi(P.changedTouches?P.changedTouches[0]:P,this),G=R.invert(W),Y=R.k*(P.shiftKey?.5:2),S=n(F(q(R,Y),W,G),e.apply(this,$),c);Xc(P),d>0?zr(this).transition().duration(d).call(ee,S,W,P):zr(this).call(V.transform,S,W,P)}}function U(P,...$){if(t.apply(this,arguments)){var R=P.touches,W=R.length,G=Z(this,$,P.changedTouches.length===W).event(P),Y,S,Q,ne;for(Ep(P),S=0;S<W;++S)Q=R[S],ne=fi(Q,this),ne=[ne,this.__zoom.invert(ne),Q.identifier],G.touch0?!G.touch1&&G.touch0[2]!==ne[2]&&(G.touch1=ne,G.taps=0):(G.touch0=ne,Y=!0,G.taps=1+!!y);y&&(y=clearTimeout(y)),Y&&(G.taps<2&&(v=ne[0],y=setTimeout(function(){y=null},x)),jh(this),G.start())}}function H(P,...$){if(this.__zooming){var R=Z(this,$).event(P),W=P.changedTouches,G=W.length,Y,S,Q,ne;for(Xc(P),Y=0;Y<G;++Y)S=W[Y],Q=fi(S,this),R.touch0&&R.touch0[2]===S.identifier?R.touch0[0]=Q:R.touch1&&R.touch1[2]===S.identifier&&(R.touch1[0]=Q);if(S=R.that.__zoom,R.touch1){var K=R.touch0[0],te=R.touch0[1],le=R.touch1[0],de=R.touch1[1],ge=(ge=le[0]-K[0])*ge+(ge=le[1]-K[1])*ge,_e=(_e=de[0]-te[0])*_e+(_e=de[1]-te[1])*_e;S=q(S,Math.sqrt(ge/_e)),Q=[(K[0]+le[0])/2,(K[1]+le[1])/2],ne=[(te[0]+de[0])/2,(te[1]+de[1])/2]}else if(R.touch0)Q=R.touch0[0],ne=R.touch0[1];else return;R.zoom("touch",n(F(S,Q,ne),R.extent,c))}}function I(P,...$){if(this.__zooming){var R=Z(this,$).event(P),W=P.changedTouches,G=W.length,Y,S;for(Ep(P),b&&clearTimeout(b),b=setTimeout(function(){b=null},x),Y=0;Y<G;++Y)S=W[Y],R.touch0&&R.touch0[2]===S.identifier?delete R.touch0:R.touch1&&R.touch1[2]===S.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(S=fi(S,this),Math.hypot(v[0]-S[0],v[1]-S[1])<M)){var Q=zr(this).on("dblclick.zoom");Q&&Q.apply(this,arguments)}}}return V.wheelDelta=function(P){return arguments.length?(i=typeof P=="function"?P:bh(+P),V):i},V.filter=function(P){return arguments.length?(t=typeof P=="function"?P:bh(!!P),V):t},V.touchable=function(P){return arguments.length?(a=typeof P=="function"?P:bh(!!P),V):a},V.extent=function(P){return arguments.length?(e=typeof P=="function"?P:bh([[+P[0][0],+P[0][1]],[+P[1][0],+P[1][1]]]),V):e},V.scaleExtent=function(P){return arguments.length?(l[0]=+P[0],l[1]=+P[1],V):[l[0],l[1]]},V.translateExtent=function(P){return arguments.length?(c[0][0]=+P[0][0],c[1][0]=+P[1][0],c[0][1]=+P[0][1],c[1][1]=+P[1][1],V):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},V.constrain=function(P){return arguments.length?(n=P,V):n},V.duration=function(P){return arguments.length?(d=+P,V):d},V.interpolate=function(P){return arguments.length?(f=P,V):f},V.on=function(){var P=m.on.apply(m,arguments);return P===m?V:P},V.clickDistance=function(P){return arguments.length?(k=(P=+P)*P,V):Math.sqrt(k)},V.tapDistance=function(P){return arguments.length?(M=+P,V):M},V}var aT=kx();const Vf=B.createContext(null),L4=Vf.Provider,ts={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},oT=ts.error001();function Tt(t,e){const n=B.useContext(Vf);if(n===null)throw new Error(oT);return Dx(n,t,e)}const ln=()=>{const t=B.useContext(Vf);if(t===null)throw new Error(oT);return B.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},z4=t=>t.userSelectionActive?"none":"all";function lT({position:t,children:e,className:n,style:i,...a}){const l=Tt(z4),c=`${t}`.split("-");return fe.createElement("div",{className:Pn(["react-flow__panel",n,...c]),style:{...i,pointerEvents:l},...a},e)}function U4({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:fe.createElement(lT,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},fe.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const B4=({x:t,y:e,label:n,labelStyle:i={},labelShowBg:a=!0,labelBgStyle:l={},labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:f,className:m,...y})=>{const v=B.useRef(null),[b,x]=B.useState({x:0,y:0,width:0,height:0}),O=Pn(["react-flow__edge-textwrapper",m]);return B.useEffect(()=>{if(v.current){const k=v.current.getBBox();x({x:k.x,y:k.y,width:k.width,height:k.height})}},[n]),typeof n>"u"||!n?null:fe.createElement("g",{transform:`translate(${t-b.width/2} ${e-b.height/2})`,className:O,visibility:b.width?"visible":"hidden",...y},a&&fe.createElement("rect",{width:b.width+2*c[0],x:-c[0],y:-c[1],height:b.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),fe.createElement("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:v,style:i},n),f)};var j4=B.memo(B4);const F0=t=>({width:t.offsetWidth,height:t.offsetHeight}),Cl=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),G0=(t={x:0,y:0},e)=>({x:Cl(t.x,e[0][0],e[1][0]),y:Cl(t.y,e[0][1],e[1][1])}),JE=(t,e,n)=>t<e?Cl(Math.abs(t-e),1,50)/50:t>n?-Cl(Math.abs(t-n),1,50)/50:0,cT=(t,e)=>{const n=JE(t.x,35,e.width-35)*20,i=JE(t.y,35,e.height-35)*20;return[n,i]},uT=t=>t.getRootNode?.()||window?.document,H4=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Y0=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),$4=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),ew=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),e0=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},q4=t=>Rr(t.width)&&Rr(t.height)&&Rr(t.x)&&Rr(t.y),Rr=t=>!isNaN(t)&&isFinite(t),kt=Symbol.for("internals"),dT=["Enter"," ","Escape"],F4=(t,e)=>{},G4=t=>"nativeEvent"in t;function t0(t){const n=(G4(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const hT=t=>"clientX"in t,Fs=(t,e)=>{const n=hT(t),i=n?t.clientX:t.touches?.[0].clientX,a=n?t.clientY:t.touches?.[0].clientY;return{x:i-(e?.left??0),y:a-(e?.top??0)}},of=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Hu=({id:t,path:e,labelX:n,labelY:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:b,interactionWidth:x=20})=>fe.createElement(fe.Fragment,null,fe.createElement("path",{id:t,style:y,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:b}),x&&fe.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:x,className:"react-flow__edge-interaction"}),a&&Rr(n)&&Rr(i)?fe.createElement(j4,{x:n,y:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:m}):null);Hu.displayName="BaseEdge";function Kc(t,e,n){return n===void 0?n:i=>{const a=e().edges.find(l=>l.id===t);a&&n(i,{...a})}}function fT({sourceX:t,sourceY:e,targetX:n,targetY:i}){const a=Math.abs(n-t)/2,l=n<t?n+a:n-a,c=Math.abs(i-e)/2,d=i<e?i+c:i-c;return[l,d,a,c]}function gT({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const f=t*.125+a*.375+c*.375+n*.125,m=e*.125+l*.375+d*.375+i*.125,y=Math.abs(f-t),v=Math.abs(m-e);return[f,m,y,v]}var Ws;(function(t){t.Strict="strict",t.Loose="loose"})(Ws||(Ws={}));var Fa;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Fa||(Fa={}));var Su;(function(t){t.Partial="partial",t.Full="full"})(Su||(Su={}));var Vs;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Vs||(Vs={}));var Qa;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Qa||(Qa={}));var Te;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Te||(Te={}));function tw({pos:t,x1:e,y1:n,x2:i,y2:a}){return t===Te.Left||t===Te.Right?[.5*(e+i),n]:[e,.5*(n+a)]}function mT({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:i,targetY:a,targetPosition:l=Te.Top}){const[c,d]=tw({pos:n,x1:t,y1:e,x2:i,y2:a}),[f,m]=tw({pos:l,x1:i,y1:a,x2:t,y2:e}),[y,v,b,x]=gT({sourceX:t,sourceY:e,targetX:i,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:m});return[`M${t},${e} C${c},${d} ${f},${m} ${i},${a}`,y,v,b,x]}const X0=B.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,sourcePosition:a=Te.Bottom,targetPosition:l=Te.Top,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:x,markerStart:O,interactionWidth:k})=>{const[M,V,q]=mT({sourceX:t,sourceY:e,sourcePosition:a,targetX:n,targetY:i,targetPosition:l});return fe.createElement(Hu,{path:M,labelX:V,labelY:q,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:x,markerStart:O,interactionWidth:k})});X0.displayName="SimpleBezierEdge";const nw={[Te.Left]:{x:-1,y:0},[Te.Right]:{x:1,y:0},[Te.Top]:{x:0,y:-1},[Te.Bottom]:{x:0,y:1}},Y4=({source:t,sourcePosition:e=Te.Bottom,target:n})=>e===Te.Left||e===Te.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},rw=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function X4({source:t,sourcePosition:e=Te.Bottom,target:n,targetPosition:i=Te.Top,center:a,offset:l}){const c=nw[e],d=nw[i],f={x:t.x+c.x*l,y:t.y+c.y*l},m={x:n.x+d.x*l,y:n.y+d.y*l},y=Y4({source:f,sourcePosition:e,target:m}),v=y.x!==0?"x":"y",b=y[v];let x=[],O,k;const M={x:0,y:0},V={x:0,y:0},[q,F,j,ee]=fT({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(c[v]*d[v]===-1){O=a.x??q,k=a.y??F;const N=[{x:O,y:f.y},{x:O,y:m.y}],A=[{x:f.x,y:k},{x:m.x,y:k}];c[v]===b?x=v==="x"?N:A:x=v==="x"?A:N}else{const N=[{x:f.x,y:m.y}],A=[{x:m.x,y:f.y}];if(v==="x"?x=c.x===b?A:N:x=c.y===b?N:A,e===i){const I=Math.abs(t[v]-n[v]);if(I<=l){const P=Math.min(l-1,l-I);c[v]===b?M[v]=(f[v]>t[v]?-1:1)*P:V[v]=(m[v]>n[v]?-1:1)*P}}if(e!==i){const I=v==="x"?"y":"x",P=c[v]===d[I],$=f[I]>m[I],R=f[I]<m[I];(c[v]===1&&(!P&&$||P&&R)||c[v]!==1&&(!P&&R||P&&$))&&(x=v==="x"?N:A)}const C={x:f.x+M.x,y:f.y+M.y},z={x:m.x+V.x,y:m.y+V.y},U=Math.max(Math.abs(C.x-x[0].x),Math.abs(z.x-x[0].x)),H=Math.max(Math.abs(C.y-x[0].y),Math.abs(z.y-x[0].y));U>=H?(O=(C.x+z.x)/2,k=x[0].y):(O=x[0].x,k=(C.y+z.y)/2)}return[[t,{x:f.x+M.x,y:f.y+M.y},...x,{x:m.x+V.x,y:m.y+V.y},n],O,k,j,ee]}function K4(t,e,n,i){const a=Math.min(rw(t,e)/2,rw(e,n)/2,i),{x:l,y:c}=e;if(t.x===l&&l===n.x||t.y===c&&c===n.y)return`L${l} ${c}`;if(t.y===c){const m=t.x<n.x?-1:1,y=t.y<n.y?1:-1;return`L ${l+a*m},${c}Q ${l},${c} ${l},${c+a*y}`}const d=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${l},${c+a*f}Q ${l},${c} ${l+a*d},${c}`}function n0({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:i,targetY:a,targetPosition:l=Te.Top,borderRadius:c=5,centerX:d,centerY:f,offset:m=20}){const[y,v,b,x,O]=X4({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:a},targetPosition:l,center:{x:d,y:f},offset:m});return[y.reduce((M,V,q)=>{let F="";return q>0&&q<y.length-1?F=K4(y[q-1],V,y[q+1],c):F=`${q===0?"M":"L"}${V.x} ${V.y}`,M+=F,M},""),v,b,x,O]}const Lf=B.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:m,style:y,sourcePosition:v=Te.Bottom,targetPosition:b=Te.Top,markerEnd:x,markerStart:O,pathOptions:k,interactionWidth:M})=>{const[V,q,F]=n0({sourceX:t,sourceY:e,sourcePosition:v,targetX:n,targetY:i,targetPosition:b,borderRadius:k?.borderRadius,offset:k?.offset});return fe.createElement(Hu,{path:V,labelX:q,labelY:F,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:m,style:y,markerEnd:x,markerStart:O,interactionWidth:M})});Lf.displayName="SmoothStepEdge";const K0=B.memo(t=>fe.createElement(Lf,{...t,pathOptions:B.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));K0.displayName="StepEdge";function Q4({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[a,l,c,d]=fT({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,a,l,c,d]}const Q0=B.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:b,interactionWidth:x})=>{const[O,k,M]=Q4({sourceX:t,sourceY:e,targetX:n,targetY:i});return fe.createElement(Hu,{path:O,labelX:k,labelY:M,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:b,interactionWidth:x})});Q0.displayName="StraightEdge";function Eh(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function iw({pos:t,x1:e,y1:n,x2:i,y2:a,c:l}){switch(t){case Te.Left:return[e-Eh(e-i,l),n];case Te.Right:return[e+Eh(i-e,l),n];case Te.Top:return[e,n-Eh(n-a,l)];case Te.Bottom:return[e,n+Eh(a-n,l)]}}function pT({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:i,targetY:a,targetPosition:l=Te.Top,curvature:c=.25}){const[d,f]=iw({pos:n,x1:t,y1:e,x2:i,y2:a,c}),[m,y]=iw({pos:l,x1:i,y1:a,x2:t,y2:e,c}),[v,b,x,O]=gT({sourceX:t,sourceY:e,targetX:i,targetY:a,sourceControlX:d,sourceControlY:f,targetControlX:m,targetControlY:y});return[`M${t},${e} C${d},${f} ${m},${y} ${i},${a}`,v,b,x,O]}const lf=B.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,sourcePosition:a=Te.Bottom,targetPosition:l=Te.Top,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:x,markerStart:O,pathOptions:k,interactionWidth:M})=>{const[V,q,F]=pT({sourceX:t,sourceY:e,sourcePosition:a,targetX:n,targetY:i,targetPosition:l,curvature:k?.curvature});return fe.createElement(Hu,{path:V,labelX:q,labelY:F,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:x,markerStart:O,interactionWidth:M})});lf.displayName="BezierEdge";const W0=B.createContext(null),W4=W0.Provider;W0.Consumer;const Z4=()=>B.useContext(W0),J4=t=>"id"in t&&"source"in t&&"target"in t,eD=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`reactflow__edge-${t}${e||""}-${n}${i||""}`,r0=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`,tD=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),nD=(t,e)=>{if(!t.source||!t.target)return e;let n;return J4(t)?n={...t}:n={...t,id:eD(t)},tD(n,e)?e:e.concat(n)},i0=({x:t,y:e},[n,i,a],l,[c,d])=>{const f={x:(t-n)/a,y:(e-i)/a};return l?{x:c*Math.round(f.x/c),y:d*Math.round(f.y/d)}:f},yT=({x:t,y:e},[n,i,a])=>({x:t*a+n,y:e*a+i}),_l=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],i=(t.height??0)*e[1],a={x:t.position.x-n,y:t.position.y-i};return{...a,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-i}:a}},Z0=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,a)=>{const{x:l,y:c}=_l(a,e).positionAbsolute;return H4(i,Y0({x:l,y:c,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return $4(n)},vT=(t,e,[n,i,a]=[0,0,1],l=!1,c=!1,d=[0,0])=>{const f={x:(e.x-n)/a,y:(e.y-i)/a,width:e.width/a,height:e.height/a},m=[];return t.forEach(y=>{const{width:v,height:b,selectable:x=!0,hidden:O=!1}=y;if(c&&!x||O)return!1;const{positionAbsolute:k}=_l(y,d),M={x:k.x,y:k.y,width:v||0,height:b||0},V=e0(f,M),q=typeof v>"u"||typeof b>"u"||v===null||b===null,F=l&&V>0,j=(v||0)*(b||0);(q||F||V>=j||y.dragging)&&m.push(y)}),m},_T=(t,e)=>{const n=t.map(i=>i.id);return e.filter(i=>n.includes(i.source)||n.includes(i.target))},bT=(t,e,n,i,a,l=.1)=>{const c=e/(t.width*(1+l)),d=n/(t.height*(1+l)),f=Math.min(c,d),m=Cl(f,i,a),y=t.x+t.width/2,v=t.y+t.height/2,b=e/2-y*m,x=n/2-v*m;return{x:b,y:x,zoom:m}},ja=(t,e=0)=>t.transition().duration(e);function sw(t,e,n,i){return(e[n]||[]).reduce((a,l)=>(`${t.id}-${l.id}-${n}`!==i&&a.push({id:l.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+l.x+l.width/2,y:(t.positionAbsolute?.y??0)+l.y+l.height/2}),a),[])}function rD(t,e,n,i,a,l){const{x:c,y:d}=Fs(t),m=e.elementsFromPoint(c,d).find(O=>O.classList.contains("react-flow__handle"));if(m){const O=m.getAttribute("data-nodeid");if(O){const k=J0(void 0,m),M=m.getAttribute("data-handleid"),V=l({nodeId:O,id:M,type:k});if(V){const q=a.find(F=>F.nodeId===O&&F.type===k&&F.id===M);return{handle:{id:M,type:k,nodeId:O,x:q?.x||n.x,y:q?.y||n.y},validHandleResult:V}}}}let y=[],v=1/0;if(a.forEach(O=>{const k=Math.sqrt((O.x-n.x)**2+(O.y-n.y)**2);if(k<=i){const M=l(O);k<=v&&(k<v?y=[{handle:O,validHandleResult:M}]:k===v&&y.push({handle:O,validHandleResult:M}),v=k)}}),!y.length)return{handle:null,validHandleResult:ET()};if(y.length===1)return y[0];const b=y.some(({validHandleResult:O})=>O.isValid),x=y.some(({handle:O})=>O.type==="target");return y.find(({handle:O,validHandleResult:k})=>x?O.type==="target":b?k.isValid:!0)||y[0]}const iD={source:null,target:null,sourceHandle:null,targetHandle:null},ET=()=>({handleDomNode:null,isValid:!1,connection:iD,endHandle:null});function wT(t,e,n,i,a,l,c){const d=a==="target",f=c.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),m={...ET(),handleDomNode:f};if(f){const y=J0(void 0,f),v=f.getAttribute("data-nodeid"),b=f.getAttribute("data-handleid"),x=f.classList.contains("connectable"),O=f.classList.contains("connectableend"),k={source:d?v:n,sourceHandle:d?b:i,target:d?n:v,targetHandle:d?i:b};m.connection=k,x&&O&&(e===Ws.Strict?d&&y==="source"||!d&&y==="target":v!==n||b!==i)&&(m.endHandle={nodeId:v,handleId:b,type:y},m.isValid=l(k))}return m}function sD({nodes:t,nodeId:e,handleId:n,handleType:i}){return t.reduce((a,l)=>{if(l[kt]){const{handleBounds:c}=l[kt];let d=[],f=[];c&&(d=sw(l,c,"source",`${e}-${n}-${i}`),f=sw(l,c,"target",`${e}-${n}-${i}`)),a.push(...d,...f)}return a},[])}function J0(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function wp(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function aD(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function xT({event:t,handleId:e,nodeId:n,onConnect:i,isTarget:a,getState:l,setState:c,isValidConnection:d,edgeUpdaterType:f,onReconnectEnd:m}){const y=uT(t.target),{connectionMode:v,domNode:b,autoPanOnConnect:x,connectionRadius:O,onConnectStart:k,panBy:M,getNodes:V,cancelConnection:q}=l();let F=0,j;const{x:ee,y:Z}=Fs(t),N=y?.elementFromPoint(ee,Z),A=J0(f,N),C=b?.getBoundingClientRect();if(!C||!A)return;let z,U=Fs(t,C),H=!1,I=null,P=!1,$=null;const R=sD({nodes:V(),nodeId:n,handleId:e,handleType:A}),W=()=>{if(!x)return;const[S,Q]=cT(U,C);M({x:S,y:Q}),F=requestAnimationFrame(W)};c({connectionPosition:U,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:A,connectionStartHandle:{nodeId:n,handleId:e,type:A},connectionEndHandle:null}),k?.(t,{nodeId:n,handleId:e,handleType:A});function G(S){const{transform:Q}=l();U=Fs(S,C);const{handle:ne,validHandleResult:K}=rD(S,y,i0(U,Q,!1,[1,1]),O,R,te=>wT(te,v,n,e,a?"target":"source",d,y));if(j=ne,H||(W(),H=!0),$=K.handleDomNode,I=K.connection,P=K.isValid,c({connectionPosition:j&&P?yT({x:j.x,y:j.y},Q):U,connectionStatus:aD(!!j,P),connectionEndHandle:K.endHandle}),!j&&!P&&!$)return wp(z);I.source!==I.target&&$&&(wp(z),z=$,$.classList.add("connecting","react-flow__handle-connecting"),$.classList.toggle("valid",P),$.classList.toggle("react-flow__handle-valid",P))}function Y(S){(j||$)&&I&&P&&i?.(I),l().onConnectEnd?.(S),f&&m?.(S),wp(z),q(),cancelAnimationFrame(F),H=!1,P=!1,I=null,$=null,y.removeEventListener("mousemove",G),y.removeEventListener("mouseup",Y),y.removeEventListener("touchmove",G),y.removeEventListener("touchend",Y)}y.addEventListener("mousemove",G),y.addEventListener("mouseup",Y),y.addEventListener("touchmove",G),y.addEventListener("touchend",Y)}const aw=()=>!0,oD=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),lD=(t,e,n)=>i=>{const{connectionStartHandle:a,connectionEndHandle:l,connectionClickStartHandle:c}=i;return{connecting:a?.nodeId===t&&a?.handleId===e&&a?.type===n||l?.nodeId===t&&l?.handleId===e&&l?.type===n,clickConnecting:c?.nodeId===t&&c?.handleId===e&&c?.type===n}},TT=B.forwardRef(({type:t="source",position:e=Te.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:f,className:m,onMouseDown:y,onTouchStart:v,...b},x)=>{const O=c||null,k=t==="target",M=ln(),V=Z4(),{connectOnClick:q,noPanClassName:F}=Tt(oD,Sn),{connecting:j,clickConnecting:ee}=Tt(lD(V,O,t),Sn);V||M.getState().onError?.("010",ts.error010());const Z=C=>{const{defaultEdgeOptions:z,onConnect:U,hasDefaultEdges:H}=M.getState(),I={...z,...C};if(H){const{edges:P,setEdges:$}=M.getState();$(nD(I,P))}U?.(I),d?.(I)},N=C=>{if(!V)return;const z=hT(C);a&&(z&&C.button===0||!z)&&xT({event:C,handleId:O,nodeId:V,onConnect:Z,isTarget:k,getState:M.getState,setState:M.setState,isValidConnection:n||M.getState().isValidConnection||aw}),z?y?.(C):v?.(C)},A=C=>{const{onClickConnectStart:z,onClickConnectEnd:U,connectionClickStartHandle:H,connectionMode:I,isValidConnection:P}=M.getState();if(!V||!H&&!a)return;if(!H){z?.(C,{nodeId:V,handleId:O,handleType:t}),M.setState({connectionClickStartHandle:{nodeId:V,type:t,handleId:O}});return}const $=uT(C.target),R=n||P||aw,{connection:W,isValid:G}=wT({nodeId:V,id:O,type:t},I,H.nodeId,H.handleId||null,H.type,R,$);G&&Z(W),U?.(C),M.setState({connectionClickStartHandle:null})};return fe.createElement("div",{"data-handleid":O,"data-nodeid":V,"data-handlepos":e,"data-id":`${V}-${O}-${t}`,className:Pn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",F,m,{source:!k,target:k,connectable:i,connectablestart:a,connectableend:l,connecting:ee,connectionindicator:i&&(a&&!j||l&&j)}]),onMouseDown:N,onTouchStart:N,onClick:q?A:void 0,ref:x,...b},f)});TT.displayName="Handle";var xn=B.memo(TT);const ST=({data:t,isConnectable:e,targetPosition:n=Te.Top,sourcePosition:i=Te.Bottom})=>fe.createElement(fe.Fragment,null,fe.createElement(xn,{type:"target",position:n,isConnectable:e}),t?.label,fe.createElement(xn,{type:"source",position:i,isConnectable:e}));ST.displayName="DefaultNode";var s0=B.memo(ST);const AT=({data:t,isConnectable:e,sourcePosition:n=Te.Bottom})=>fe.createElement(fe.Fragment,null,t?.label,fe.createElement(xn,{type:"source",position:n,isConnectable:e}));AT.displayName="InputNode";var RT=B.memo(AT);const NT=({data:t,isConnectable:e,targetPosition:n=Te.Top})=>fe.createElement(fe.Fragment,null,fe.createElement(xn,{type:"target",position:n,isConnectable:e}),t?.label);NT.displayName="OutputNode";var CT=B.memo(NT);const ey=()=>null;ey.displayName="GroupNode";const cD=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),wh=t=>t.id;function uD(t,e){return Sn(t.selectedNodes.map(wh),e.selectedNodes.map(wh))&&Sn(t.selectedEdges.map(wh),e.selectedEdges.map(wh))}const IT=B.memo(({onSelectionChange:t})=>{const e=ln(),{selectedNodes:n,selectedEdges:i}=Tt(cD,uD);return B.useEffect(()=>{const a={nodes:n,edges:i};t?.(a),e.getState().onSelectionChange.forEach(l=>l(a))},[n,i,t]),null});IT.displayName="SelectionListener";const dD=t=>!!t.onSelectionChange;function hD({onSelectionChange:t}){const e=Tt(dD);return t||e?fe.createElement(IT,{onSelectionChange:t}):null}const fD=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function tl(t,e){B.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function Fe(t,e,n){B.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const gD=({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:a,onConnectStart:l,onConnectEnd:c,onClickConnectStart:d,onClickConnectEnd:f,nodesDraggable:m,nodesConnectable:y,nodesFocusable:v,edgesFocusable:b,edgesUpdatable:x,elevateNodesOnSelect:O,minZoom:k,maxZoom:M,nodeExtent:V,onNodesChange:q,onEdgesChange:F,elementsSelectable:j,connectionMode:ee,snapGrid:Z,snapToGrid:N,translateExtent:A,connectOnClick:C,defaultEdgeOptions:z,fitView:U,fitViewOptions:H,onNodesDelete:I,onEdgesDelete:P,onNodeDrag:$,onNodeDragStart:R,onNodeDragStop:W,onSelectionDrag:G,onSelectionDragStart:Y,onSelectionDragStop:S,noPanClassName:Q,nodeOrigin:ne,rfId:K,autoPanOnConnect:te,autoPanOnNodeDrag:le,onError:de,connectionRadius:ge,isValidConnection:_e,nodeDragThreshold:Ae})=>{const{setNodes:Ne,setEdges:nt,setDefaultNodesAndEdges:Ge,setMinZoom:ke,setMaxZoom:Ve,setTranslateExtent:it,setNodeExtent:Lt,reset:Ue}=Tt(fD,Sn),Ee=ln();return B.useEffect(()=>{const At=i?.map(vn=>({...vn,...z}));return Ge(n,At),()=>{Ue()}},[]),Fe("defaultEdgeOptions",z,Ee.setState),Fe("connectionMode",ee,Ee.setState),Fe("onConnect",a,Ee.setState),Fe("onConnectStart",l,Ee.setState),Fe("onConnectEnd",c,Ee.setState),Fe("onClickConnectStart",d,Ee.setState),Fe("onClickConnectEnd",f,Ee.setState),Fe("nodesDraggable",m,Ee.setState),Fe("nodesConnectable",y,Ee.setState),Fe("nodesFocusable",v,Ee.setState),Fe("edgesFocusable",b,Ee.setState),Fe("edgesUpdatable",x,Ee.setState),Fe("elementsSelectable",j,Ee.setState),Fe("elevateNodesOnSelect",O,Ee.setState),Fe("snapToGrid",N,Ee.setState),Fe("snapGrid",Z,Ee.setState),Fe("onNodesChange",q,Ee.setState),Fe("onEdgesChange",F,Ee.setState),Fe("connectOnClick",C,Ee.setState),Fe("fitViewOnInit",U,Ee.setState),Fe("fitViewOnInitOptions",H,Ee.setState),Fe("onNodesDelete",I,Ee.setState),Fe("onEdgesDelete",P,Ee.setState),Fe("onNodeDrag",$,Ee.setState),Fe("onNodeDragStart",R,Ee.setState),Fe("onNodeDragStop",W,Ee.setState),Fe("onSelectionDrag",G,Ee.setState),Fe("onSelectionDragStart",Y,Ee.setState),Fe("onSelectionDragStop",S,Ee.setState),Fe("noPanClassName",Q,Ee.setState),Fe("nodeOrigin",ne,Ee.setState),Fe("rfId",K,Ee.setState),Fe("autoPanOnConnect",te,Ee.setState),Fe("autoPanOnNodeDrag",le,Ee.setState),Fe("onError",de,Ee.setState),Fe("connectionRadius",ge,Ee.setState),Fe("isValidConnection",_e,Ee.setState),Fe("nodeDragThreshold",Ae,Ee.setState),tl(t,Ne),tl(e,nt),tl(k,ke),tl(M,Ve),tl(A,it),tl(V,Lt),null},ow={display:"none"},mD={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},kT="react-flow__node-desc",DT="react-flow__edge-desc",pD="react-flow__aria-live",yD=t=>t.ariaLiveMessage;function vD({rfId:t}){const e=Tt(yD);return fe.createElement("div",{id:`${pD}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:mD},e)}function _D({rfId:t,disableKeyboardA11y:e}){return fe.createElement(fe.Fragment,null,fe.createElement("div",{id:`${kT}-${t}`,style:ow},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),fe.createElement("div",{id:`${DT}-${t}`,style:ow},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&fe.createElement(vD,{rfId:t}))}var Au=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,i]=B.useState(!1),a=B.useRef(!1),l=B.useRef(new Set([])),[c,d]=B.useMemo(()=>{if(t!==null){const m=(Array.isArray(t)?t:[t]).filter(v=>typeof v=="string").map(v=>v.split("+")),y=m.reduce((v,b)=>v.concat(...b),[]);return[m,y]}return[[],[]]},[t]);return B.useEffect(()=>{const f=typeof document<"u"?document:null,m=e?.target||f;if(t!==null){const y=x=>{if(a.current=x.ctrlKey||x.metaKey||x.shiftKey,(!a.current||a.current&&!e.actInsideInputWithModifier)&&t0(x))return!1;const k=cw(x.code,d);l.current.add(x[k]),lw(c,l.current,!1)&&(x.preventDefault(),i(!0))},v=x=>{if((!a.current||a.current&&!e.actInsideInputWithModifier)&&t0(x))return!1;const k=cw(x.code,d);lw(c,l.current,!0)?(i(!1),l.current.clear()):l.current.delete(x[k]),x.key==="Meta"&&l.current.clear(),a.current=!1},b=()=>{l.current.clear(),i(!1)};return m?.addEventListener("keydown",y),m?.addEventListener("keyup",v),window.addEventListener("blur",b),()=>{m?.removeEventListener("keydown",y),m?.removeEventListener("keyup",v),window.removeEventListener("blur",b)}}},[t,i]),n};function lw(t,e,n){return t.filter(i=>n||i.length===e.size).some(i=>i.every(a=>e.has(a)))}function cw(t,e){return e.includes(t)?"code":"key"}function OT(t,e,n,i){const a=t.parentNode||t.parentId;if(!a)return n;const l=e.get(a),c=_l(l,i);return OT(l,e,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(l[kt]?.z??0)>(n.z??0)?l[kt]?.z??0:n.z??0},i)}function MT(t,e,n){t.forEach(i=>{const a=i.parentNode||i.parentId;if(a&&!t.has(a))throw new Error(`Parent node ${a} not found`);if(a||n?.[i.id]){const{x:l,y:c,z:d}=OT(i,t,{...i.position,z:i[kt]?.z??0},e);i.positionAbsolute={x:l,y:c},i[kt].z=d,n?.[i.id]&&(i[kt].isParent=!0)}})}function xp(t,e,n,i){const a=new Map,l={},c=i?1e3:0;return t.forEach(d=>{const f=(Rr(d.zIndex)?d.zIndex:0)+(d.selected?c:0),m=e.get(d.id),y={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},v=d.parentNode||d.parentId;v&&(l[v]=!0);const b=m?.type&&m?.type!==d.type;Object.defineProperty(y,kt,{enumerable:!1,value:{handleBounds:b?void 0:m?.[kt]?.handleBounds,z:f}}),a.set(d.id,y)}),MT(a,n,l),a}function PT(t,e={}){const{getNodes:n,width:i,height:a,minZoom:l,maxZoom:c,d3Zoom:d,d3Selection:f,fitViewOnInitDone:m,fitViewOnInit:y,nodeOrigin:v}=t(),b=e.initial&&!m&&y;if(d&&f&&(b||!e.initial)){const O=n().filter(M=>{const V=e.includeHiddenNodes?M.width&&M.height:!M.hidden;return e.nodes?.length?V&&e.nodes.some(q=>q.id===M.id):V}),k=O.every(M=>M.width&&M.height);if(O.length>0&&k){const M=Z0(O,v),{x:V,y:q,zoom:F}=bT(M,i,a,e.minZoom??l,e.maxZoom??c,e.padding??.1),j=qs.translate(V,q).scale(F);return typeof e.duration=="number"&&e.duration>0?d.transform(ja(f,e.duration),j):d.transform(f,j),!0}}return!1}function bD(t,e){return t.forEach(n=>{const i=e.get(n.id);i&&e.set(i.id,{...i,[kt]:i[kt],selected:n.selected})}),new Map(e)}function ED(t,e){return e.map(n=>{const i=t.find(a=>a.id===n.id);return i&&(n.selected=i.selected),n})}function xh({changedNodes:t,changedEdges:e,get:n,set:i}){const{nodeInternals:a,edges:l,onNodesChange:c,onEdgesChange:d,hasDefaultNodes:f,hasDefaultEdges:m}=n();t?.length&&(f&&i({nodeInternals:bD(t,a)}),c?.(t)),e?.length&&(m&&i({edges:ED(e,l)}),d?.(e))}const nl=()=>{},wD={zoomIn:nl,zoomOut:nl,zoomTo:nl,getZoom:()=>1,setViewport:nl,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:nl,fitBounds:nl,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},xD=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),TD=()=>{const t=ln(),{d3Zoom:e,d3Selection:n}=Tt(xD,Sn);return B.useMemo(()=>n&&e?{zoomIn:a=>e.scaleBy(ja(n,a?.duration),1.2),zoomOut:a=>e.scaleBy(ja(n,a?.duration),1/1.2),zoomTo:(a,l)=>e.scaleTo(ja(n,l?.duration),a),getZoom:()=>t.getState().transform[2],setViewport:(a,l)=>{const[c,d,f]=t.getState().transform,m=qs.translate(a.x??c,a.y??d).scale(a.zoom??f);e.transform(ja(n,l?.duration),m)},getViewport:()=>{const[a,l,c]=t.getState().transform;return{x:a,y:l,zoom:c}},fitView:a=>PT(t.getState,a),setCenter:(a,l,c)=>{const{width:d,height:f,maxZoom:m}=t.getState(),y=typeof c?.zoom<"u"?c.zoom:m,v=d/2-a*y,b=f/2-l*y,x=qs.translate(v,b).scale(y);e.transform(ja(n,c?.duration),x)},fitBounds:(a,l)=>{const{width:c,height:d,minZoom:f,maxZoom:m}=t.getState(),{x:y,y:v,zoom:b}=bT(a,c,d,f,m,l?.padding??.1),x=qs.translate(y,v).scale(b);e.transform(ja(n,l?.duration),x)},project:a=>{const{transform:l,snapToGrid:c,snapGrid:d}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),i0(a,l,c,d)},screenToFlowPosition:a=>{const{transform:l,snapToGrid:c,snapGrid:d,domNode:f}=t.getState();if(!f)return a;const{x:m,y}=f.getBoundingClientRect(),v={x:a.x-m,y:a.y-y};return i0(v,l,c,d)},flowToScreenPosition:a=>{const{transform:l,domNode:c}=t.getState();if(!c)return a;const{x:d,y:f}=c.getBoundingClientRect(),m=yT(a,l);return{x:m.x+d,y:m.y+f}},viewportInitialized:!0}:wD,[e,n])};function zf(){const t=TD(),e=ln(),n=B.useCallback(()=>e.getState().getNodes().map(k=>({...k})),[]),i=B.useCallback(k=>e.getState().nodeInternals.get(k),[]),a=B.useCallback(()=>{const{edges:k=[]}=e.getState();return k.map(M=>({...M}))},[]),l=B.useCallback(k=>{const{edges:M=[]}=e.getState();return M.find(V=>V.id===k)},[]),c=B.useCallback(k=>{const{getNodes:M,setNodes:V,hasDefaultNodes:q,onNodesChange:F}=e.getState(),j=M(),ee=typeof k=="function"?k(j):k;if(q)V(ee);else if(F){const Z=ee.length===0?j.map(N=>({type:"remove",id:N.id})):ee.map(N=>({item:N,type:"reset"}));F(Z)}},[]),d=B.useCallback(k=>{const{edges:M=[],setEdges:V,hasDefaultEdges:q,onEdgesChange:F}=e.getState(),j=typeof k=="function"?k(M):k;if(q)V(j);else if(F){const ee=j.length===0?M.map(Z=>({type:"remove",id:Z.id})):j.map(Z=>({item:Z,type:"reset"}));F(ee)}},[]),f=B.useCallback(k=>{const M=Array.isArray(k)?k:[k],{getNodes:V,setNodes:q,hasDefaultNodes:F,onNodesChange:j}=e.getState();if(F){const Z=[...V(),...M];q(Z)}else if(j){const ee=M.map(Z=>({item:Z,type:"add"}));j(ee)}},[]),m=B.useCallback(k=>{const M=Array.isArray(k)?k:[k],{edges:V=[],setEdges:q,hasDefaultEdges:F,onEdgesChange:j}=e.getState();if(F)q([...V,...M]);else if(j){const ee=M.map(Z=>({item:Z,type:"add"}));j(ee)}},[]),y=B.useCallback(()=>{const{getNodes:k,edges:M=[],transform:V}=e.getState(),[q,F,j]=V;return{nodes:k().map(ee=>({...ee})),edges:M.map(ee=>({...ee})),viewport:{x:q,y:F,zoom:j}}},[]),v=B.useCallback(({nodes:k,edges:M})=>{const{nodeInternals:V,getNodes:q,edges:F,hasDefaultNodes:j,hasDefaultEdges:ee,onNodesDelete:Z,onEdgesDelete:N,onNodesChange:A,onEdgesChange:C}=e.getState(),z=(k||[]).map($=>$.id),U=(M||[]).map($=>$.id),H=q().reduce(($,R)=>{const W=R.parentNode||R.parentId,G=!z.includes(R.id)&&W&&$.find(S=>S.id===W);return(typeof R.deletable=="boolean"?R.deletable:!0)&&(z.includes(R.id)||G)&&$.push(R),$},[]),I=F.filter($=>typeof $.deletable=="boolean"?$.deletable:!0),P=I.filter($=>U.includes($.id));if(H||P){const $=_T(H,I),R=[...P,...$],W=R.reduce((G,Y)=>(G.includes(Y.id)||G.push(Y.id),G),[]);if((ee||j)&&(ee&&e.setState({edges:F.filter(G=>!W.includes(G.id))}),j&&(H.forEach(G=>{V.delete(G.id)}),e.setState({nodeInternals:new Map(V)}))),W.length>0&&(N?.(R),C&&C(W.map(G=>({id:G,type:"remove"})))),H.length>0&&(Z?.(H),A)){const G=H.map(Y=>({id:Y.id,type:"remove"}));A(G)}}},[]),b=B.useCallback(k=>{const M=q4(k),V=M?null:e.getState().nodeInternals.get(k.id);return!M&&!V?[null,null,M]:[M?k:ew(V),V,M]},[]),x=B.useCallback((k,M=!0,V)=>{const[q,F,j]=b(k);return q?(V||e.getState().getNodes()).filter(ee=>{if(!j&&(ee.id===F.id||!ee.positionAbsolute))return!1;const Z=ew(ee),N=e0(Z,q);return M&&N>0||N>=q.width*q.height}):[]},[]),O=B.useCallback((k,M,V=!0)=>{const[q]=b(k);if(!q)return!1;const F=e0(q,M);return V&&F>0||F>=q.width*q.height},[]);return B.useMemo(()=>({...t,getNodes:n,getNode:i,getEdges:a,getEdge:l,setNodes:c,setEdges:d,addNodes:f,addEdges:m,toObject:y,deleteElements:v,getIntersectingNodes:x,isNodeIntersecting:O}),[t,n,i,a,l,c,d,f,m,y,v,x,O])}const SD={actInsideInputWithModifier:!1};var AD=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=ln(),{deleteElements:i}=zf(),a=Au(t,SD),l=Au(e);B.useEffect(()=>{if(a){const{edges:c,getNodes:d}=n.getState(),f=d().filter(y=>y.selected),m=c.filter(y=>y.selected);i({nodes:f,edges:m}),n.setState({nodesSelectionActive:!1})}},[a]),B.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])};function RD(t){const e=ln();B.useEffect(()=>{let n;const i=()=>{if(!t.current)return;const a=F0(t.current);(a.height===0||a.width===0)&&e.getState().onError?.("004",ts.error004()),e.setState({width:a.width||500,height:a.height||500})};return i(),window.addEventListener("resize",i),t.current&&(n=new ResizeObserver(()=>i()),n.observe(t.current)),()=>{window.removeEventListener("resize",i),n&&t.current&&n.unobserve(t.current)}},[])}const ty={position:"absolute",width:"100%",height:"100%",top:0,left:0},ND=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Th=t=>({x:t.x,y:t.y,zoom:t.k}),rl=(t,e)=>t.target.closest(`.${e}`),uw=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),dw=t=>{const e=t.ctrlKey&&of()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},CD=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),ID=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:a=!0,zoomOnPinch:l=!0,panOnScroll:c=!1,panOnScrollSpeed:d=.5,panOnScrollMode:f=Fa.Free,zoomOnDoubleClick:m=!0,elementsSelectable:y,panOnDrag:v=!0,defaultViewport:b,translateExtent:x,minZoom:O,maxZoom:k,zoomActivationKeyCode:M,preventScrolling:V=!0,children:q,noWheelClassName:F,noPanClassName:j})=>{const ee=B.useRef(),Z=ln(),N=B.useRef(!1),A=B.useRef(!1),C=B.useRef(null),z=B.useRef({x:0,y:0,zoom:0}),{d3Zoom:U,d3Selection:H,d3ZoomHandler:I,userSelectionActive:P}=Tt(CD,Sn),$=Au(M),R=B.useRef(0),W=B.useRef(!1),G=B.useRef();return RD(C),B.useEffect(()=>{if(C.current){const Y=C.current.getBoundingClientRect(),S=V4().scaleExtent([O,k]).translateExtent(x),Q=zr(C.current).call(S),ne=qs.translate(b.x,b.y).scale(Cl(b.zoom,O,k)),K=[[0,0],[Y.width,Y.height]],te=S.constrain()(ne,K,x);S.transform(Q,te),S.wheelDelta(dw),Z.setState({d3Zoom:S,d3Selection:Q,d3ZoomHandler:Q.on("wheel.zoom"),transform:[te.x,te.y,te.k],domNode:C.current.closest(".react-flow")})}},[]),B.useEffect(()=>{H&&U&&(c&&!$&&!P?H.on("wheel.zoom",Y=>{if(rl(Y,F))return!1;Y.preventDefault(),Y.stopImmediatePropagation();const S=H.property("__zoom").k||1;if(Y.ctrlKey&&l){const _e=fi(Y),Ae=dw(Y),Ne=S*Math.pow(2,Ae);U.scaleTo(H,Ne,_e,Y);return}const Q=Y.deltaMode===1?20:1;let ne=f===Fa.Vertical?0:Y.deltaX*Q,K=f===Fa.Horizontal?0:Y.deltaY*Q;!of()&&Y.shiftKey&&f!==Fa.Vertical&&(ne=Y.deltaY*Q,K=0),U.translateBy(H,-(ne/S)*d,-(K/S)*d,{internal:!0});const te=Th(H.property("__zoom")),{onViewportChangeStart:le,onViewportChange:de,onViewportChangeEnd:ge}=Z.getState();clearTimeout(G.current),W.current||(W.current=!0,e?.(Y,te),le?.(te)),W.current&&(t?.(Y,te),de?.(te),G.current=setTimeout(()=>{n?.(Y,te),ge?.(te),W.current=!1},150))},{passive:!1}):typeof I<"u"&&H.on("wheel.zoom",function(Y,S){if(!V&&Y.type==="wheel"&&!Y.ctrlKey||rl(Y,F))return null;Y.preventDefault(),I.call(this,Y,S)},{passive:!1}))},[P,c,f,H,U,I,$,l,V,F,e,t,n]),B.useEffect(()=>{U&&U.on("start",Y=>{if(!Y.sourceEvent||Y.sourceEvent.internal)return null;R.current=Y.sourceEvent?.button;const{onViewportChangeStart:S}=Z.getState(),Q=Th(Y.transform);N.current=!0,z.current=Q,Y.sourceEvent?.type==="mousedown"&&Z.setState({paneDragging:!0}),S?.(Q),e?.(Y.sourceEvent,Q)})},[U,e]),B.useEffect(()=>{U&&(P&&!N.current?U.on("zoom",null):P||U.on("zoom",Y=>{const{onViewportChange:S}=Z.getState();if(Z.setState({transform:[Y.transform.x,Y.transform.y,Y.transform.k]}),A.current=!!(i&&uw(v,R.current??0)),(t||S)&&!Y.sourceEvent?.internal){const Q=Th(Y.transform);S?.(Q),t?.(Y.sourceEvent,Q)}}))},[P,U,t,v,i]),B.useEffect(()=>{U&&U.on("end",Y=>{if(!Y.sourceEvent||Y.sourceEvent.internal)return null;const{onViewportChangeEnd:S}=Z.getState();if(N.current=!1,Z.setState({paneDragging:!1}),i&&uw(v,R.current??0)&&!A.current&&i(Y.sourceEvent),A.current=!1,(n||S)&&ND(z.current,Y.transform)){const Q=Th(Y.transform);z.current=Q,clearTimeout(ee.current),ee.current=setTimeout(()=>{S?.(Q),n?.(Y.sourceEvent,Q)},c?150:0)}})},[U,c,v,n,i]),B.useEffect(()=>{U&&U.filter(Y=>{const S=$||a,Q=l&&Y.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&Y.button===1&&Y.type==="mousedown"&&(rl(Y,"react-flow__node")||rl(Y,"react-flow__edge")))return!0;if(!v&&!S&&!c&&!m&&!l||P||!m&&Y.type==="dblclick"||rl(Y,F)&&Y.type==="wheel"||rl(Y,j)&&(Y.type!=="wheel"||c&&Y.type==="wheel"&&!$)||!l&&Y.ctrlKey&&Y.type==="wheel"||!S&&!c&&!Q&&Y.type==="wheel"||!v&&(Y.type==="mousedown"||Y.type==="touchstart")||Array.isArray(v)&&!v.includes(Y.button)&&Y.type==="mousedown")return!1;const ne=Array.isArray(v)&&v.includes(Y.button)||!Y.button||Y.button<=1;return(!Y.ctrlKey||Y.type==="wheel")&&ne})},[P,U,a,l,c,m,v,y,$]),fe.createElement("div",{className:"react-flow__renderer",ref:C,style:ty},q)},kD=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function DD(){const{userSelectionActive:t,userSelectionRect:e}=Tt(kD,Sn);return t&&e?fe.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function hw(t,e){const n=e.parentNode||e.parentId,i=t.find(a=>a.id===n);if(i){const a=e.position.x+e.width-i.width,l=e.position.y+e.height-i.height;if(a>0||l>0||e.position.x<0||e.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,a>0&&(i.style.width+=a),l>0&&(i.style.height+=l),e.position.x<0){const c=Math.abs(e.position.x);i.position.x=i.position.x-c,i.style.width+=c,e.position.x=0}if(e.position.y<0){const c=Math.abs(e.position.y);i.position.y=i.position.y-c,i.style.height+=c,e.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function VT(t,e){if(t.some(i=>i.type==="reset"))return t.filter(i=>i.type==="reset").map(i=>i.item);const n=t.filter(i=>i.type==="add").map(i=>i.item);return e.reduce((i,a)=>{const l=t.filter(d=>d.id===a.id);if(l.length===0)return i.push(a),i;const c={...a};for(const d of l)if(d)switch(d.type){case"select":{c.selected=d.selected;break}case"position":{typeof d.position<"u"&&(c.position=d.position),typeof d.positionAbsolute<"u"&&(c.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(c.dragging=d.dragging),c.expandParent&&hw(i,c);break}case"dimensions":{typeof d.dimensions<"u"&&(c.width=d.dimensions.width,c.height=d.dimensions.height),typeof d.updateStyle<"u"&&(c.style={...c.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(c.resizing=d.resizing),c.expandParent&&hw(i,c);break}case"remove":return i}return i.push(c),i},n)}function LT(t,e){return VT(t,e)}function OD(t,e){return VT(t,e)}const Ps=(t,e)=>({id:t,type:"select",selected:e});function gl(t,e){return t.reduce((n,i)=>{const a=e.includes(i.id);return!i.selected&&a?(i.selected=!0,n.push(Ps(i.id,!0))):i.selected&&!a&&(i.selected=!1,n.push(Ps(i.id,!1))),n},[])}const Tp=(t,e)=>n=>{n.target===e.current&&t?.(n)},MD=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),zT=B.memo(({isSelecting:t,selectionMode:e=Su.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:f,onPaneMouseMove:m,onPaneMouseLeave:y,children:v})=>{const b=B.useRef(null),x=ln(),O=B.useRef(0),k=B.useRef(0),M=B.useRef(),{userSelectionActive:V,elementsSelectable:q,dragging:F}=Tt(MD,Sn),j=()=>{x.setState({userSelectionActive:!1,userSelectionRect:null}),O.current=0,k.current=0},ee=I=>{l?.(I),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},Z=I=>{if(Array.isArray(n)&&n?.includes(2)){I.preventDefault();return}c?.(I)},N=d?I=>d(I):void 0,A=I=>{const{resetSelectedElements:P,domNode:$}=x.getState();if(M.current=$?.getBoundingClientRect(),!q||!t||I.button!==0||I.target!==b.current||!M.current)return;const{x:R,y:W}=Fs(I,M.current);P(),x.setState({userSelectionRect:{width:0,height:0,startX:R,startY:W,x:R,y:W}}),i?.(I)},C=I=>{const{userSelectionRect:P,nodeInternals:$,edges:R,transform:W,onNodesChange:G,onEdgesChange:Y,nodeOrigin:S,getNodes:Q}=x.getState();if(!t||!M.current||!P)return;x.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ne=Fs(I,M.current),K=P.startX??0,te=P.startY??0,le={...P,x:ne.x<K?ne.x:K,y:ne.y<te?ne.y:te,width:Math.abs(ne.x-K),height:Math.abs(ne.y-te)},de=Q(),ge=vT($,le,W,e===Su.Partial,!0,S),_e=_T(ge,R).map(Ne=>Ne.id),Ae=ge.map(Ne=>Ne.id);if(O.current!==Ae.length){O.current=Ae.length;const Ne=gl(de,Ae);Ne.length&&G?.(Ne)}if(k.current!==_e.length){k.current=_e.length;const Ne=gl(R,_e);Ne.length&&Y?.(Ne)}x.setState({userSelectionRect:le})},z=I=>{if(I.button!==0)return;const{userSelectionRect:P}=x.getState();!V&&P&&I.target===b.current&&ee?.(I),x.setState({nodesSelectionActive:O.current>0}),j(),a?.(I)},U=I=>{V&&(x.setState({nodesSelectionActive:O.current>0}),a?.(I)),j()},H=q&&(t||V);return fe.createElement("div",{className:Pn(["react-flow__pane",{dragging:F,selection:t}]),onClick:H?void 0:Tp(ee,b),onContextMenu:Tp(Z,b),onWheel:Tp(N,b),onMouseEnter:H?void 0:f,onMouseDown:H?A:void 0,onMouseMove:H?C:m,onMouseUp:H?z:void 0,onMouseLeave:H?U:y,ref:b,style:ty},v,fe.createElement(DD,null))});zT.displayName="Pane";function UT(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const i=e.get(n);return i?i.selected?!0:UT(i,e):!1}function fw(t,e,n){let i=t;do{if(i?.matches(e))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function PD(t,e,n,i){return Array.from(t.values()).filter(a=>(a.selected||a.id===i)&&(!a.parentNode||a.parentId||!UT(a,t))&&(a.draggable||e&&typeof a.draggable>"u")).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(a.positionAbsolute?.x??0),y:n.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}))}function VD(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function BT(t,e,n,i,a=[0,0],l){const c=VD(t,t.extent||i);let d=c;const f=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(f&&t.width&&t.height){const v=n.get(f),{x:b,y:x}=_l(v,a).positionAbsolute;d=v&&Rr(b)&&Rr(x)&&Rr(v.width)&&Rr(v.height)?[[b+t.width*a[0],x+t.height*a[1]],[b+v.width-t.width+t.width*a[0],x+v.height-t.height+t.height*a[1]]]:d}else l?.("005",ts.error005()),d=c;else if(t.extent&&f&&t.extent!=="parent"){const v=n.get(f),{x:b,y:x}=_l(v,a).positionAbsolute;d=[[t.extent[0][0]+b,t.extent[0][1]+x],[t.extent[1][0]+b,t.extent[1][1]+x]]}let m={x:0,y:0};if(f){const v=n.get(f);m=_l(v,a).positionAbsolute}const y=d&&d!=="parent"?G0(e,d):e;return{position:{x:y.x-m.x,y:y.y-m.y},positionAbsolute:y}}function Sp({nodeId:t,dragItems:e,nodeInternals:n}){const i=e.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[t?i.find(a=>a.id===t):i[0],i]}const gw=(t,e,n,i)=>{const a=e.querySelectorAll(t);if(!a||!a.length)return null;const l=Array.from(a),c=e.getBoundingClientRect(),d={x:c.width*i[0],y:c.height*i[1]};return l.map(f=>{const m=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),position:f.getAttribute("data-handlepos"),x:(m.left-c.left-d.x)/n,y:(m.top-c.top-d.y)/n,...F0(f)}})};function Qc(t,e,n){return n===void 0?n:i=>{const a=e().nodeInternals.get(t);a&&n(i,{...a})}}function a0({id:t,store:e,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeInternals:d,onError:f}=e.getState(),m=d.get(t);if(!m){f?.("012",ts.error012(t));return}e.setState({nodesSelectionActive:!1}),m.selected?(n||m.selected&&c)&&(l({nodes:[m],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):a([t])}function LD(){const t=ln();return B.useCallback(({sourceEvent:n})=>{const{transform:i,snapGrid:a,snapToGrid:l}=t.getState(),c=n.touches?n.touches[0].clientX:n.clientX,d=n.touches?n.touches[0].clientY:n.clientY,f={x:(c-i[0])/i[2],y:(d-i[1])/i[2]};return{xSnapped:l?a[0]*Math.round(f.x/a[0]):f.x,ySnapped:l?a[1]*Math.round(f.y/a[1]):f.y,...f}},[])}function Ap(t){return(e,n,i)=>t?.(e,i)}function jT({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:i,nodeId:a,isSelectable:l,selectNodesOnDrag:c}){const d=ln(),[f,m]=B.useState(!1),y=B.useRef([]),v=B.useRef({x:null,y:null}),b=B.useRef(0),x=B.useRef(null),O=B.useRef({x:0,y:0}),k=B.useRef(null),M=B.useRef(!1),V=B.useRef(!1),q=B.useRef(!1),F=LD();return B.useEffect(()=>{if(t?.current){const j=zr(t.current),ee=({x:A,y:C})=>{const{nodeInternals:z,onNodeDrag:U,onSelectionDrag:H,updateNodePositions:I,nodeExtent:P,snapGrid:$,snapToGrid:R,nodeOrigin:W,onError:G}=d.getState();v.current={x:A,y:C};let Y=!1,S={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&P){const ne=Z0(y.current,W);S=Y0(ne)}if(y.current=y.current.map(ne=>{const K={x:A-ne.distance.x,y:C-ne.distance.y};R&&(K.x=$[0]*Math.round(K.x/$[0]),K.y=$[1]*Math.round(K.y/$[1]));const te=[[P[0][0],P[0][1]],[P[1][0],P[1][1]]];y.current.length>1&&P&&!ne.extent&&(te[0][0]=ne.positionAbsolute.x-S.x+P[0][0],te[1][0]=ne.positionAbsolute.x+(ne.width??0)-S.x2+P[1][0],te[0][1]=ne.positionAbsolute.y-S.y+P[0][1],te[1][1]=ne.positionAbsolute.y+(ne.height??0)-S.y2+P[1][1]);const le=BT(ne,K,z,te,W,G);return Y=Y||ne.position.x!==le.position.x||ne.position.y!==le.position.y,ne.position=le.position,ne.positionAbsolute=le.positionAbsolute,ne}),!Y)return;I(y.current,!0,!0),m(!0);const Q=a?U:Ap(H);if(Q&&k.current){const[ne,K]=Sp({nodeId:a,dragItems:y.current,nodeInternals:z});Q(k.current,ne,K)}},Z=()=>{if(!x.current)return;const[A,C]=cT(O.current,x.current);if(A!==0||C!==0){const{transform:z,panBy:U}=d.getState();v.current.x=(v.current.x??0)-A/z[2],v.current.y=(v.current.y??0)-C/z[2],U({x:A,y:C})&&ee(v.current)}b.current=requestAnimationFrame(Z)},N=A=>{const{nodeInternals:C,multiSelectionActive:z,nodesDraggable:U,unselectNodesAndEdges:H,onNodeDragStart:I,onSelectionDragStart:P}=d.getState();V.current=!0;const $=a?I:Ap(P);(!c||!l)&&!z&&a&&(C.get(a)?.selected||H()),a&&l&&c&&a0({id:a,store:d,nodeRef:t});const R=F(A);if(v.current=R,y.current=PD(C,U,R,a),$&&y.current){const[W,G]=Sp({nodeId:a,dragItems:y.current,nodeInternals:C});$(A.sourceEvent,W,G)}};if(e)j.on(".drag",null);else{const A=GI().on("start",C=>{const{domNode:z,nodeDragThreshold:U}=d.getState();U===0&&N(C),q.current=!1;const H=F(C);v.current=H,x.current=z?.getBoundingClientRect()||null,O.current=Fs(C.sourceEvent,x.current)}).on("drag",C=>{const z=F(C),{autoPanOnNodeDrag:U,nodeDragThreshold:H}=d.getState();if(C.sourceEvent.type==="touchmove"&&C.sourceEvent.touches.length>1&&(q.current=!0),!q.current){if(!M.current&&V.current&&U&&(M.current=!0,Z()),!V.current){const I=z.xSnapped-(v?.current?.x??0),P=z.ySnapped-(v?.current?.y??0);Math.sqrt(I*I+P*P)>H&&N(C)}(v.current.x!==z.xSnapped||v.current.y!==z.ySnapped)&&y.current&&V.current&&(k.current=C.sourceEvent,O.current=Fs(C.sourceEvent,x.current),ee(z))}}).on("end",C=>{if(!(!V.current||q.current)&&(m(!1),M.current=!1,V.current=!1,cancelAnimationFrame(b.current),y.current)){const{updateNodePositions:z,nodeInternals:U,onNodeDragStop:H,onSelectionDragStop:I}=d.getState(),P=a?H:Ap(I);if(z(y.current,!1,!1),P){const[$,R]=Sp({nodeId:a,dragItems:y.current,nodeInternals:U});P(C.sourceEvent,$,R)}}}).filter(C=>{const z=C.target;return!C.button&&(!n||!fw(z,`.${n}`,t))&&(!i||fw(z,i,t))});return j.call(A),()=>{j.on(".drag",null)}}}},[t,e,n,i,l,d,a,c,F]),f}function HT(){const t=ln();return B.useCallback(n=>{const{nodeInternals:i,nodeExtent:a,updateNodePositions:l,getNodes:c,snapToGrid:d,snapGrid:f,onError:m,nodesDraggable:y}=t.getState(),v=c().filter(q=>q.selected&&(q.draggable||y&&typeof q.draggable>"u")),b=d?f[0]:5,x=d?f[1]:5,O=n.isShiftPressed?4:1,k=n.x*b*O,M=n.y*x*O,V=v.map(q=>{if(q.positionAbsolute){const F={x:q.positionAbsolute.x+k,y:q.positionAbsolute.y+M};d&&(F.x=f[0]*Math.round(F.x/f[0]),F.y=f[1]*Math.round(F.y/f[1]));const{positionAbsolute:j,position:ee}=BT(q,F,i,a,void 0,m);q.position=ee,q.positionAbsolute=j}return q});l(V,!0,!1)},[])}const bl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Wc=t=>{const e=({id:n,type:i,data:a,xPos:l,yPos:c,xPosOrigin:d,yPosOrigin:f,selected:m,onClick:y,onMouseEnter:v,onMouseMove:b,onMouseLeave:x,onContextMenu:O,onDoubleClick:k,style:M,className:V,isDraggable:q,isSelectable:F,isConnectable:j,isFocusable:ee,selectNodesOnDrag:Z,sourcePosition:N,targetPosition:A,hidden:C,resizeObserver:z,dragHandle:U,zIndex:H,isParent:I,noDragClassName:P,noPanClassName:$,initialized:R,disableKeyboardA11y:W,ariaLabel:G,rfId:Y,hasHandleBounds:S})=>{const Q=ln(),ne=B.useRef(null),K=B.useRef(null),te=B.useRef(N),le=B.useRef(A),de=B.useRef(i),ge=F||q||y||v||b||x,_e=HT(),Ae=Qc(n,Q.getState,v),Ne=Qc(n,Q.getState,b),nt=Qc(n,Q.getState,x),Ge=Qc(n,Q.getState,O),ke=Qc(n,Q.getState,k),Ve=Ue=>{const{nodeDragThreshold:Ee}=Q.getState();if(F&&(!Z||!q||Ee>0)&&a0({id:n,store:Q,nodeRef:ne}),y){const At=Q.getState().nodeInternals.get(n);At&&y(Ue,{...At})}},it=Ue=>{if(!t0(Ue)&&!W)if(dT.includes(Ue.key)&&F){const Ee=Ue.key==="Escape";a0({id:n,store:Q,unselect:Ee,nodeRef:ne})}else q&&m&&Object.prototype.hasOwnProperty.call(bl,Ue.key)&&(Q.setState({ariaLiveMessage:`Moved selected node ${Ue.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~c}`}),_e({x:bl[Ue.key].x,y:bl[Ue.key].y,isShiftPressed:Ue.shiftKey}))};B.useEffect(()=>()=>{K.current&&(z?.unobserve(K.current),K.current=null)},[]),B.useEffect(()=>{if(ne.current&&!C){const Ue=ne.current;(!R||!S||K.current!==Ue)&&(K.current&&z?.unobserve(K.current),z?.observe(Ue),K.current=Ue)}},[C,R,S]),B.useEffect(()=>{const Ue=de.current!==i,Ee=te.current!==N,At=le.current!==A;ne.current&&(Ue||Ee||At)&&(Ue&&(de.current=i),Ee&&(te.current=N),At&&(le.current=A),Q.getState().updateNodeDimensions([{id:n,nodeElement:ne.current,forceUpdate:!0}]))},[n,i,N,A]);const Lt=jT({nodeRef:ne,disabled:C||!q,noDragClassName:P,handleSelector:U,nodeId:n,isSelectable:F,selectNodesOnDrag:Z});return C?null:fe.createElement("div",{className:Pn(["react-flow__node",`react-flow__node-${i}`,{[$]:q},V,{selected:m,selectable:F,parent:I,dragging:Lt}]),ref:ne,style:{zIndex:H,transform:`translate(${d}px,${f}px)`,pointerEvents:ge?"all":"none",visibility:R?"visible":"hidden",...M},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ae,onMouseMove:Ne,onMouseLeave:nt,onContextMenu:Ge,onClick:Ve,onDoubleClick:ke,onKeyDown:ee?it:void 0,tabIndex:ee?0:void 0,role:ee?"button":void 0,"aria-describedby":W?void 0:`${kT}-${Y}`,"aria-label":G},fe.createElement(W4,{value:n},fe.createElement(t,{id:n,data:a,type:i,xPos:l,yPos:c,selected:m,isConnectable:j,sourcePosition:N,targetPosition:A,dragging:Lt,dragHandle:U,zIndex:H})))};return e.displayName="NodeWrapper",B.memo(e)};const zD=t=>{const e=t.getNodes().filter(n=>n.selected);return{...Z0(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function UD({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const i=ln(),{width:a,height:l,x:c,y:d,transformString:f,userSelectionActive:m}=Tt(zD,Sn),y=HT(),v=B.useRef(null);if(B.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),jT({nodeRef:v}),m||!a||!l)return null;const b=t?O=>{const k=i.getState().getNodes().filter(M=>M.selected);t(O,k)}:void 0,x=O=>{Object.prototype.hasOwnProperty.call(bl,O.key)&&y({x:bl[O.key].x,y:bl[O.key].y,isShiftPressed:O.shiftKey})};return fe.createElement("div",{className:Pn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:f}},fe.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:b,tabIndex:n?void 0:-1,onKeyDown:n?void 0:x,style:{width:a,height:l,top:d,left:c}}))}var BD=B.memo(UD);const jD=t=>t.nodesSelectionActive,$T=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,deleteKeyCode:d,onMove:f,onMoveStart:m,onMoveEnd:y,selectionKeyCode:v,selectionOnDrag:b,selectionMode:x,onSelectionStart:O,onSelectionEnd:k,multiSelectionKeyCode:M,panActivationKeyCode:V,zoomActivationKeyCode:q,elementsSelectable:F,zoomOnScroll:j,zoomOnPinch:ee,panOnScroll:Z,panOnScrollSpeed:N,panOnScrollMode:A,zoomOnDoubleClick:C,panOnDrag:z,defaultViewport:U,translateExtent:H,minZoom:I,maxZoom:P,preventScrolling:$,onSelectionContextMenu:R,noWheelClassName:W,noPanClassName:G,disableKeyboardA11y:Y})=>{const S=Tt(jD),Q=Au(v),ne=Au(V),K=ne||z,te=ne||Z,le=Q||b&&K!==!0;return AD({deleteKeyCode:d,multiSelectionKeyCode:M}),fe.createElement(ID,{onMove:f,onMoveStart:m,onMoveEnd:y,onPaneContextMenu:l,elementsSelectable:F,zoomOnScroll:j,zoomOnPinch:ee,panOnScroll:te,panOnScrollSpeed:N,panOnScrollMode:A,zoomOnDoubleClick:C,panOnDrag:!Q&&K,defaultViewport:U,translateExtent:H,minZoom:I,maxZoom:P,zoomActivationKeyCode:q,preventScrolling:$,noWheelClassName:W,noPanClassName:G},fe.createElement(zT,{onSelectionStart:O,onSelectionEnd:k,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:K,isSelecting:!!le,selectionMode:x},t,S&&fe.createElement(BD,{onSelectionContextMenu:R,noPanClassName:G,disableKeyboardA11y:Y})))};$T.displayName="FlowRenderer";var HD=B.memo($T);function $D(t){return Tt(B.useCallback(n=>t?vT(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function qD(t){const e={input:Wc(t.input||RT),default:Wc(t.default||s0),output:Wc(t.output||CT),group:Wc(t.group||ey)},n={},i=Object.keys(t).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,l)=>(a[l]=Wc(t[l]||s0),a),n);return{...e,...i}}const FD=({x:t,y:e,width:n,height:i,origin:a})=>!n||!i?{x:t,y:e}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:t,y:e}:{x:t-n*a[0],y:e-i*a[1]},GD=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),qT=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,updateNodeDimensions:l,onError:c}=Tt(GD,Sn),d=$D(t.onlyRenderVisibleElements),f=B.useRef(),m=B.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(v=>{const b=v.map(x=>({id:x.target.getAttribute("data-id"),nodeElement:x.target,forceUpdate:!0}));l(b)});return f.current=y,y},[]);return B.useEffect(()=>()=>{f?.current?.disconnect()},[]),fe.createElement("div",{className:"react-flow__nodes",style:ty},d.map(y=>{let v=y.type||"default";t.nodeTypes[v]||(c?.("003",ts.error003(v)),v="default");const b=t.nodeTypes[v]||t.nodeTypes.default,x=!!(y.draggable||e&&typeof y.draggable>"u"),O=!!(y.selectable||a&&typeof y.selectable>"u"),k=!!(y.connectable||n&&typeof y.connectable>"u"),M=!!(y.focusable||i&&typeof y.focusable>"u"),V=t.nodeExtent?G0(y.positionAbsolute,t.nodeExtent):y.positionAbsolute,q=V?.x??0,F=V?.y??0,j=FD({x:q,y:F,width:y.width??0,height:y.height??0,origin:t.nodeOrigin});return fe.createElement(b,{key:y.id,id:y.id,className:y.className,style:y.style,type:v,data:y.data,sourcePosition:y.sourcePosition||Te.Bottom,targetPosition:y.targetPosition||Te.Top,hidden:y.hidden,xPos:q,yPos:F,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!y.selected,isDraggable:x,isSelectable:O,isConnectable:k,isFocusable:M,resizeObserver:m,dragHandle:y.dragHandle,zIndex:y[kt]?.z??0,isParent:!!y[kt]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!y.width&&!!y.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[kt]?.handleBounds})}))};qT.displayName="NodeRenderer";var YD=B.memo(qT);const XD=(t,e,n)=>n===Te.Left?t-e:n===Te.Right?t+e:t,KD=(t,e,n)=>n===Te.Top?t-e:n===Te.Bottom?t+e:t,mw="react-flow__edgeupdater",pw=({position:t,centerX:e,centerY:n,radius:i=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d})=>fe.createElement("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:Pn([mw,`${mw}-${d}`]),cx:XD(e,i,t),cy:KD(n,i,t),r:i,stroke:"transparent",fill:"transparent"}),QD=()=>!0;var il=t=>{const e=({id:n,className:i,type:a,data:l,onClick:c,onEdgeDoubleClick:d,selected:f,animated:m,label:y,labelStyle:v,labelShowBg:b,labelBgStyle:x,labelBgPadding:O,labelBgBorderRadius:k,style:M,source:V,target:q,sourceX:F,sourceY:j,targetX:ee,targetY:Z,sourcePosition:N,targetPosition:A,elementsSelectable:C,hidden:z,sourceHandleId:U,targetHandleId:H,onContextMenu:I,onMouseEnter:P,onMouseMove:$,onMouseLeave:R,reconnectRadius:W,onReconnect:G,onReconnectStart:Y,onReconnectEnd:S,markerEnd:Q,markerStart:ne,rfId:K,ariaLabel:te,isFocusable:le,isReconnectable:de,pathOptions:ge,interactionWidth:_e,disableKeyboardA11y:Ae})=>{const Ne=B.useRef(null),[nt,Ge]=B.useState(!1),[ke,Ve]=B.useState(!1),it=ln(),Lt=B.useMemo(()=>`url('#${r0(ne,K)}')`,[ne,K]),Ue=B.useMemo(()=>`url('#${r0(Q,K)}')`,[Q,K]);if(z)return null;const Ee=Ut=>{const{edges:Jt,addSelectedEdges:Cn,unselectNodesAndEdges:In,multiSelectionActive:en}=it.getState(),cn=Jt.find(kn=>kn.id===n);cn&&(C&&(it.setState({nodesSelectionActive:!1}),cn.selected&&en?(In({nodes:[],edges:[cn]}),Ne.current?.blur()):Cn([n])),c&&c(Ut,cn))},At=Kc(n,it.getState,d),vn=Kc(n,it.getState,I),Gt=Kc(n,it.getState,P),qn=Kc(n,it.getState,$),Rn=Kc(n,it.getState,R),Nn=(Ut,Jt)=>{if(Ut.button!==0)return;const{edges:Cn,isValidConnection:In}=it.getState(),en=Jt?q:V,cn=(Jt?H:U)||null,kn=Jt?"target":"source",Ti=In||QD,Si=Jt,Ir=Cn.find(Gn=>Gn.id===n);Ve(!0),Y?.(Ut,Ir,kn);const Fn=Gn=>{Ve(!1),S?.(Gn,Ir,kn)};xT({event:Ut,handleId:cn,nodeId:en,onConnect:Gn=>G?.(Ir,Gn),isTarget:Si,getState:it.getState,setState:it.setState,isValidConnection:Ti,edgeUpdaterType:kn,onReconnectEnd:Fn})},Cr=Ut=>Nn(Ut,!0),at=Ut=>Nn(Ut,!1),Ye=()=>Ge(!0),zt=()=>Ge(!1),Et=!C&&!c,Gr=Ut=>{if(!Ae&&dT.includes(Ut.key)&&C){const{unselectNodesAndEdges:Jt,addSelectedEdges:Cn,edges:In}=it.getState();Ut.key==="Escape"?(Ne.current?.blur(),Jt({edges:[In.find(cn=>cn.id===n)]})):Cn([n])}};return fe.createElement("g",{className:Pn(["react-flow__edge",`react-flow__edge-${a}`,i,{selected:f,animated:m,inactive:Et,updating:nt}]),onClick:Ee,onDoubleClick:At,onContextMenu:vn,onMouseEnter:Gt,onMouseMove:qn,onMouseLeave:Rn,onKeyDown:le?Gr:void 0,tabIndex:le?0:void 0,role:le?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":te===null?void 0:te||`Edge from ${V} to ${q}`,"aria-describedby":le?`${DT}-${K}`:void 0,ref:Ne},!ke&&fe.createElement(t,{id:n,source:V,target:q,selected:f,animated:m,label:y,labelStyle:v,labelShowBg:b,labelBgStyle:x,labelBgPadding:O,labelBgBorderRadius:k,data:l,style:M,sourceX:F,sourceY:j,targetX:ee,targetY:Z,sourcePosition:N,targetPosition:A,sourceHandleId:U,targetHandleId:H,markerStart:Lt,markerEnd:Ue,pathOptions:ge,interactionWidth:_e}),de&&fe.createElement(fe.Fragment,null,(de==="source"||de===!0)&&fe.createElement(pw,{position:N,centerX:F,centerY:j,radius:W,onMouseDown:Cr,onMouseEnter:Ye,onMouseOut:zt,type:"source"}),(de==="target"||de===!0)&&fe.createElement(pw,{position:A,centerX:ee,centerY:Z,radius:W,onMouseDown:at,onMouseEnter:Ye,onMouseOut:zt,type:"target"})))};return e.displayName="EdgeWrapper",B.memo(e)};function WD(t){const e={default:il(t.default||lf),straight:il(t.bezier||Q0),step:il(t.step||K0),smoothstep:il(t.step||Lf),simplebezier:il(t.simplebezier||X0)},n={},i=Object.keys(t).filter(a=>!["default","bezier"].includes(a)).reduce((a,l)=>(a[l]=il(t[l]||lf),a),n);return{...e,...i}}function yw(t,e,n=null){const i=(n?.x||0)+e.x,a=(n?.y||0)+e.y,l=n?.width||e.width,c=n?.height||e.height;switch(t){case Te.Top:return{x:i+l/2,y:a};case Te.Right:return{x:i+l,y:a+c/2};case Te.Bottom:return{x:i+l/2,y:a+c};case Te.Left:return{x:i,y:a+c/2}}}function vw(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const ZD=(t,e,n,i,a,l)=>{const c=yw(n,t,e),d=yw(l,i,a);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y}};function JD({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:i,targetWidth:a,targetHeight:l,width:c,height:d,transform:f}){const m={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+a),y2:Math.max(t.y+i,e.y+l)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const y=Y0({x:(0-f[0])/f[2],y:(0-f[1])/f[2],width:c/f[2],height:d/f[2]}),v=Math.max(0,Math.min(y.x2,m.x2)-Math.max(y.x,m.x)),b=Math.max(0,Math.min(y.y2,m.y2)-Math.max(y.y,m.y));return Math.ceil(v*b)>0}function _w(t){const e=t?.[kt]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const eO=[{level:0,isMaxLevel:!0,edges:[]}];function tO(t,e,n=!1){let i=-1;const a=t.reduce((c,d)=>{const f=Rr(d.zIndex);let m=f?d.zIndex:0;if(n){const y=e.get(d.target),v=e.get(d.source),b=d.selected||y?.selected||v?.selected,x=Math.max(v?.[kt]?.z||0,y?.[kt]?.z||0,1e3);m=(f?d.zIndex:0)+(b?x:0)}return c[m]?c[m].push(d):c[m]=[d],i=m>i?m:i,c},{}),l=Object.entries(a).map(([c,d])=>{const f=+c;return{edges:d,level:f,isMaxLevel:f===i}});return l.length===0?eO:l}function nO(t,e,n){const i=Tt(B.useCallback(a=>t?a.edges.filter(l=>{const c=e.get(l.source),d=e.get(l.target);return c?.width&&c?.height&&d?.width&&d?.height&&JD({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:d.width,targetHeight:d.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[t,e]));return tO(i,e,n)}const rO=({color:t="none",strokeWidth:e=1})=>fe.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),iO=({color:t="none",strokeWidth:e=1})=>fe.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),bw={[Qa.Arrow]:rO,[Qa.ArrowClosed]:iO};function sO(t){const e=ln();return B.useMemo(()=>Object.prototype.hasOwnProperty.call(bw,t)?bw[t]:(e.getState().onError?.("009",ts.error009(t)),null),[t])}const aO=({id:t,type:e,color:n,width:i=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const f=sO(e);return f?fe.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0"},fe.createElement(f,{color:n,strokeWidth:c})):null},oO=({defaultColor:t,rfId:e})=>n=>{const i=[];return n.edges.reduce((a,l)=>([l.markerStart,l.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const d=r0(c,e);i.includes(d)||(a.push({id:d,color:c.color||t,...c}),i.push(d))}}),a),[]).sort((a,l)=>a.id.localeCompare(l.id))},FT=({defaultColor:t,rfId:e})=>{const n=Tt(B.useCallback(oO({defaultColor:t,rfId:e}),[t,e]),(i,a)=>!(i.length!==a.length||i.some((l,c)=>l.id!==a[c].id)));return fe.createElement("defs",null,n.map(i=>fe.createElement(aO,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};FT.displayName="MarkerDefinitions";var lO=B.memo(FT);const cO=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),GT=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:i,edgeTypes:a,noPanClassName:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:f,onEdgeMouseLeave:m,onEdgeClick:y,onEdgeDoubleClick:v,onReconnect:b,onReconnectStart:x,onReconnectEnd:O,reconnectRadius:k,children:M,disableKeyboardA11y:V})=>{const{edgesFocusable:q,edgesUpdatable:F,elementsSelectable:j,width:ee,height:Z,connectionMode:N,nodeInternals:A,onError:C}=Tt(cO,Sn),z=nO(e,A,n);return ee?fe.createElement(fe.Fragment,null,z.map(({level:U,edges:H,isMaxLevel:I})=>fe.createElement("svg",{key:U,style:{zIndex:U},width:ee,height:Z,className:"react-flow__edges react-flow__container"},I&&fe.createElement(lO,{defaultColor:t,rfId:i}),fe.createElement("g",null,H.map(P=>{const[$,R,W]=_w(A.get(P.source)),[G,Y,S]=_w(A.get(P.target));if(!W||!S)return null;let Q=P.type||"default";a[Q]||(C?.("011",ts.error011(Q)),Q="default");const ne=a[Q]||a.default,K=N===Ws.Strict?Y.target:(Y.target??[]).concat(Y.source??[]),te=vw(R.source,P.sourceHandle),le=vw(K,P.targetHandle),de=te?.position||Te.Bottom,ge=le?.position||Te.Top,_e=!!(P.focusable||q&&typeof P.focusable>"u"),Ae=P.reconnectable||P.updatable,Ne=typeof b<"u"&&(Ae||F&&typeof Ae>"u");if(!te||!le)return C?.("008",ts.error008(te,P)),null;const{sourceX:nt,sourceY:Ge,targetX:ke,targetY:Ve}=ZD($,te,de,G,le,ge);return fe.createElement(ne,{key:P.id,id:P.id,className:Pn([P.className,l]),type:Q,data:P.data,selected:!!P.selected,animated:!!P.animated,hidden:!!P.hidden,label:P.label,labelStyle:P.labelStyle,labelShowBg:P.labelShowBg,labelBgStyle:P.labelBgStyle,labelBgPadding:P.labelBgPadding,labelBgBorderRadius:P.labelBgBorderRadius,style:P.style,source:P.source,target:P.target,sourceHandleId:P.sourceHandle,targetHandleId:P.targetHandle,markerEnd:P.markerEnd,markerStart:P.markerStart,sourceX:nt,sourceY:Ge,targetX:ke,targetY:Ve,sourcePosition:de,targetPosition:ge,elementsSelectable:j,onContextMenu:c,onMouseEnter:d,onMouseMove:f,onMouseLeave:m,onClick:y,onEdgeDoubleClick:v,onReconnect:b,onReconnectStart:x,onReconnectEnd:O,reconnectRadius:k,rfId:i,ariaLabel:P.ariaLabel,isFocusable:_e,isReconnectable:Ne,pathOptions:"pathOptions"in P?P.pathOptions:void 0,interactionWidth:P.interactionWidth,disableKeyboardA11y:V})})))),M):null};GT.displayName="EdgeRenderer";var uO=B.memo(GT);const dO=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function hO({children:t}){const e=Tt(dO);return fe.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function fO(t){const e=zf(),n=B.useRef(!1);B.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const gO={[Te.Left]:Te.Right,[Te.Right]:Te.Left,[Te.Top]:Te.Bottom,[Te.Bottom]:Te.Top},YT=({nodeId:t,handleType:e,style:n,type:i=Vs.Bezier,CustomComponent:a,connectionStatus:l})=>{const{fromNode:c,handleId:d,toX:f,toY:m,connectionMode:y}=Tt(B.useCallback(Z=>({fromNode:Z.nodeInternals.get(t),handleId:Z.connectionHandleId,toX:(Z.connectionPosition.x-Z.transform[0])/Z.transform[2],toY:(Z.connectionPosition.y-Z.transform[1])/Z.transform[2],connectionMode:Z.connectionMode}),[t]),Sn),v=c?.[kt]?.handleBounds;let b=v?.[e];if(y===Ws.Loose&&(b=b||v?.[e==="source"?"target":"source"]),!c||!b)return null;const x=d?b.find(Z=>Z.id===d):b[0],O=x?x.x+x.width/2:(c.width??0)/2,k=x?x.y+x.height/2:c.height??0,M=(c.positionAbsolute?.x??0)+O,V=(c.positionAbsolute?.y??0)+k,q=x?.position,F=q?gO[q]:null;if(!q||!F)return null;if(a)return fe.createElement(a,{connectionLineType:i,connectionLineStyle:n,fromNode:c,fromHandle:x,fromX:M,fromY:V,toX:f,toY:m,fromPosition:q,toPosition:F,connectionStatus:l});let j="";const ee={sourceX:M,sourceY:V,sourcePosition:q,targetX:f,targetY:m,targetPosition:F};return i===Vs.Bezier?[j]=pT(ee):i===Vs.Step?[j]=n0({...ee,borderRadius:0}):i===Vs.SmoothStep?[j]=n0(ee):i===Vs.SimpleBezier?[j]=mT(ee):j=`M${M},${V} ${f},${m}`,fe.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:n})};YT.displayName="ConnectionLine";const mO=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function pO({containerStyle:t,style:e,type:n,component:i}){const{nodeId:a,handleType:l,nodesConnectable:c,width:d,height:f,connectionStatus:m}=Tt(mO,Sn);return!(a&&l&&d&&c)?null:fe.createElement("svg",{style:t,width:d,height:f,className:"react-flow__edges react-flow__connectionline react-flow__container"},fe.createElement("g",{className:Pn(["react-flow__connection",m])},fe.createElement(YT,{nodeId:a,handleType:l,style:e,type:n,CustomComponent:i,connectionStatus:m})))}function Ew(t,e){return B.useRef(null),ln(),B.useMemo(()=>e(t),[t])}const XT=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:i,onMoveEnd:a,onInit:l,onNodeClick:c,onEdgeClick:d,onNodeDoubleClick:f,onEdgeDoubleClick:m,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:b,onNodeContextMenu:x,onSelectionContextMenu:O,onSelectionStart:k,onSelectionEnd:M,connectionLineType:V,connectionLineStyle:q,connectionLineComponent:F,connectionLineContainerStyle:j,selectionKeyCode:ee,selectionOnDrag:Z,selectionMode:N,multiSelectionKeyCode:A,panActivationKeyCode:C,zoomActivationKeyCode:z,deleteKeyCode:U,onlyRenderVisibleElements:H,elementsSelectable:I,selectNodesOnDrag:P,defaultViewport:$,translateExtent:R,minZoom:W,maxZoom:G,preventScrolling:Y,defaultMarkerColor:S,zoomOnScroll:Q,zoomOnPinch:ne,panOnScroll:K,panOnScrollSpeed:te,panOnScrollMode:le,zoomOnDoubleClick:de,panOnDrag:ge,onPaneClick:_e,onPaneMouseEnter:Ae,onPaneMouseMove:Ne,onPaneMouseLeave:nt,onPaneScroll:Ge,onPaneContextMenu:ke,onEdgeContextMenu:Ve,onEdgeMouseEnter:it,onEdgeMouseMove:Lt,onEdgeMouseLeave:Ue,onReconnect:Ee,onReconnectStart:At,onReconnectEnd:vn,reconnectRadius:Gt,noDragClassName:qn,noWheelClassName:Rn,noPanClassName:Nn,elevateEdgesOnSelect:Cr,disableKeyboardA11y:at,nodeOrigin:Ye,nodeExtent:zt,rfId:Et})=>{const Gr=Ew(t,qD),Ut=Ew(e,WD);return fO(l),fe.createElement(HD,{onPaneClick:_e,onPaneMouseEnter:Ae,onPaneMouseMove:Ne,onPaneMouseLeave:nt,onPaneContextMenu:ke,onPaneScroll:Ge,deleteKeyCode:U,selectionKeyCode:ee,selectionOnDrag:Z,selectionMode:N,onSelectionStart:k,onSelectionEnd:M,multiSelectionKeyCode:A,panActivationKeyCode:C,zoomActivationKeyCode:z,elementsSelectable:I,onMove:n,onMoveStart:i,onMoveEnd:a,zoomOnScroll:Q,zoomOnPinch:ne,zoomOnDoubleClick:de,panOnScroll:K,panOnScrollSpeed:te,panOnScrollMode:le,panOnDrag:ge,defaultViewport:$,translateExtent:R,minZoom:W,maxZoom:G,onSelectionContextMenu:O,preventScrolling:Y,noDragClassName:qn,noWheelClassName:Rn,noPanClassName:Nn,disableKeyboardA11y:at},fe.createElement(hO,null,fe.createElement(uO,{edgeTypes:Ut,onEdgeClick:d,onEdgeDoubleClick:m,onlyRenderVisibleElements:H,onEdgeContextMenu:Ve,onEdgeMouseEnter:it,onEdgeMouseMove:Lt,onEdgeMouseLeave:Ue,onReconnect:Ee,onReconnectStart:At,onReconnectEnd:vn,reconnectRadius:Gt,defaultMarkerColor:S,noPanClassName:Nn,elevateEdgesOnSelect:!!Cr,disableKeyboardA11y:at,rfId:Et},fe.createElement(pO,{style:q,type:V,component:F,containerStyle:j})),fe.createElement("div",{className:"react-flow__edgelabel-renderer"}),fe.createElement(YD,{nodeTypes:Gr,onNodeClick:c,onNodeDoubleClick:f,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:b,onNodeContextMenu:x,selectNodesOnDrag:P,onlyRenderVisibleElements:H,noPanClassName:Nn,noDragClassName:qn,disableKeyboardA11y:at,nodeOrigin:Ye,nodeExtent:zt,rfId:Et})))};XT.displayName="GraphView";var yO=B.memo(XT);const o0=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ds={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:o0,nodeExtent:o0,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ws.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:F4,isValidConnection:void 0},vO=()=>iC((t,e)=>({...Ds,setNodes:n=>{const{nodeInternals:i,nodeOrigin:a,elevateNodesOnSelect:l}=e();t({nodeInternals:xp(n,i,a,l)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=e();t({edges:n.map(a=>({...i,...a}))})},setDefaultNodesAndEdges:(n,i)=>{const a=typeof n<"u",l=typeof i<"u",c=a?xp(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:c,edges:l?i:[],hasDefaultNodes:a,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:a,fitViewOnInit:l,fitViewOnInitDone:c,fitViewOnInitOptions:d,domNode:f,nodeOrigin:m}=e(),y=f?.querySelector(".react-flow__viewport");if(!y)return;const v=window.getComputedStyle(y),{m22:b}=new window.DOMMatrixReadOnly(v.transform),x=n.reduce((k,M)=>{const V=a.get(M.id);if(V?.hidden)a.set(V.id,{...V,[kt]:{...V[kt],handleBounds:void 0}});else if(V){const q=F0(M.nodeElement);!!(q.width&&q.height&&(V.width!==q.width||V.height!==q.height||M.forceUpdate))&&(a.set(V.id,{...V,[kt]:{...V[kt],handleBounds:{source:gw(".source",M.nodeElement,b,m),target:gw(".target",M.nodeElement,b,m)}},...q}),k.push({id:V.id,type:"dimensions",dimensions:q}))}return k},[]);MT(a,m);const O=c||l&&!c&&PT(e,{initial:!0,...d});t({nodeInternals:new Map(a),fitViewOnInitDone:O}),x?.length>0&&i?.(x)},updateNodePositions:(n,i=!0,a=!1)=>{const{triggerNodeChanges:l}=e(),c=n.map(d=>{const f={id:d.id,type:"position",dragging:a};return i&&(f.positionAbsolute=d.positionAbsolute,f.position=d.position),f});l(c)},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:a,hasDefaultNodes:l,nodeOrigin:c,getNodes:d,elevateNodesOnSelect:f}=e();if(n?.length){if(l){const m=LT(n,d()),y=xp(m,a,c,f);t({nodeInternals:y})}i?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:a,getNodes:l}=e();let c,d=null;i?c=n.map(f=>Ps(f,!0)):(c=gl(l(),n),d=gl(a,[])),xh({changedNodes:c,changedEdges:d,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:a,getNodes:l}=e();let c,d=null;i?c=n.map(f=>Ps(f,!0)):(c=gl(a,n),d=gl(l(),[])),xh({changedNodes:d,changedEdges:c,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:a,getNodes:l}=e(),c=n||l(),d=i||a,f=c.map(y=>(y.selected=!1,Ps(y.id,!1))),m=d.map(y=>Ps(y.id,!1));xh({changedNodes:f,changedEdges:m,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:a}=e();i?.scaleExtent([n,a]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:a}=e();i?.scaleExtent([a,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=e(),l=i().filter(d=>d.selected).map(d=>Ps(d.id,!1)),c=n.filter(d=>d.selected).map(d=>Ps(d.id,!1));xh({changedNodes:l,changedEdges:c,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:i}=e();i.forEach(a=>{a.positionAbsolute=G0(a.position,n)}),t({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:a,height:l,d3Zoom:c,d3Selection:d,translateExtent:f}=e();if(!c||!d||!n.x&&!n.y)return!1;const m=qs.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),y=[[0,0],[a,l]],v=c?.constrain()(m,y,f);return c.transform(d,v),i[0]!==v.x||i[1]!==v.y||i[2]!==v.k},cancelConnection:()=>t({connectionNodeId:Ds.connectionNodeId,connectionHandleId:Ds.connectionHandleId,connectionHandleType:Ds.connectionHandleType,connectionStatus:Ds.connectionStatus,connectionStartHandle:Ds.connectionStartHandle,connectionEndHandle:Ds.connectionEndHandle}),reset:()=>t({...Ds})}),Object.is),KT=({children:t})=>{const e=B.useRef(null);return e.current||(e.current=vO()),fe.createElement(L4,{value:e.current},t)};KT.displayName="ReactFlowProvider";const QT=({children:t})=>B.useContext(Vf)?fe.createElement(fe.Fragment,null,t):fe.createElement(KT,null,t);QT.displayName="ReactFlowWrapper";const _O={input:RT,default:s0,output:CT,group:ey},bO={default:lf,straight:Q0,step:K0,smoothstep:Lf,simplebezier:X0},EO=[0,0],wO=[15,15],xO={x:0,y:0,zoom:1},TO={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},WT=B.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,className:a,nodeTypes:l=_O,edgeTypes:c=bO,onNodeClick:d,onEdgeClick:f,onInit:m,onMove:y,onMoveStart:v,onMoveEnd:b,onConnect:x,onConnectStart:O,onConnectEnd:k,onClickConnectStart:M,onClickConnectEnd:V,onNodeMouseEnter:q,onNodeMouseMove:F,onNodeMouseLeave:j,onNodeContextMenu:ee,onNodeDoubleClick:Z,onNodeDragStart:N,onNodeDrag:A,onNodeDragStop:C,onNodesDelete:z,onEdgesDelete:U,onSelectionChange:H,onSelectionDragStart:I,onSelectionDrag:P,onSelectionDragStop:$,onSelectionContextMenu:R,onSelectionStart:W,onSelectionEnd:G,connectionMode:Y=Ws.Strict,connectionLineType:S=Vs.Bezier,connectionLineStyle:Q,connectionLineComponent:ne,connectionLineContainerStyle:K,deleteKeyCode:te="Backspace",selectionKeyCode:le="Shift",selectionOnDrag:de=!1,selectionMode:ge=Su.Full,panActivationKeyCode:_e="Space",multiSelectionKeyCode:Ae=of()?"Meta":"Control",zoomActivationKeyCode:Ne=of()?"Meta":"Control",snapToGrid:nt=!1,snapGrid:Ge=wO,onlyRenderVisibleElements:ke=!1,selectNodesOnDrag:Ve=!0,nodesDraggable:it,nodesConnectable:Lt,nodesFocusable:Ue,nodeOrigin:Ee=EO,edgesFocusable:At,edgesUpdatable:vn,elementsSelectable:Gt,defaultViewport:qn=xO,minZoom:Rn=.5,maxZoom:Nn=2,translateExtent:Cr=o0,preventScrolling:at=!0,nodeExtent:Ye,defaultMarkerColor:zt="#b1b1b7",zoomOnScroll:Et=!0,zoomOnPinch:Gr=!0,panOnScroll:Ut=!1,panOnScrollSpeed:Jt=.5,panOnScrollMode:Cn=Fa.Free,zoomOnDoubleClick:In=!0,panOnDrag:en=!0,onPaneClick:cn,onPaneMouseEnter:kn,onPaneMouseMove:Ti,onPaneMouseLeave:Si,onPaneScroll:Ir,onPaneContextMenu:Fn,children:ur,onEdgeContextMenu:Gn,onEdgeDoubleClick:dr,onEdgeMouseEnter:ca,onEdgeMouseMove:Yr,onEdgeMouseLeave:as,onEdgeUpdate:Xr,onEdgeUpdateStart:uo,onEdgeUpdateEnd:pt,onReconnect:Ot,onReconnectStart:Rt,onReconnectEnd:Vn,reconnectRadius:ua=10,edgeUpdaterRadius:Gl=10,onNodesChange:Kr,onEdgesChange:ho,noDragClassName:Ai="nodrag",noWheelClassName:Qr="nowheel",noPanClassName:hr="nopan",fitView:fr=!1,fitViewOptions:gr,connectOnClick:un=!0,attributionPosition:wt,proOptions:da,defaultEdgeOptions:os,elevateNodesOnSelect:Yn=!0,elevateEdgesOnSelect:kr=!1,disableKeyboardA11y:ha=!1,autoPanOnConnect:fo=!0,autoPanOnNodeDrag:Ri=!0,connectionRadius:go=20,isValidConnection:Wr,onError:mr,style:Yt,id:Zr,nodeDragThreshold:mo,...Dr},ls)=>{const Jr=Zr||"1";return fe.createElement("div",{...Dr,style:{...Yt,...TO},ref:ls,className:Pn(["react-flow",a]),"data-testid":"rf__wrapper",id:Zr},fe.createElement(QT,null,fe.createElement(yO,{onInit:m,onMove:y,onMoveStart:v,onMoveEnd:b,onNodeClick:d,onEdgeClick:f,onNodeMouseEnter:q,onNodeMouseMove:F,onNodeMouseLeave:j,onNodeContextMenu:ee,onNodeDoubleClick:Z,nodeTypes:l,edgeTypes:c,connectionLineType:S,connectionLineStyle:Q,connectionLineComponent:ne,connectionLineContainerStyle:K,selectionKeyCode:le,selectionOnDrag:de,selectionMode:ge,deleteKeyCode:te,multiSelectionKeyCode:Ae,panActivationKeyCode:_e,zoomActivationKeyCode:Ne,onlyRenderVisibleElements:ke,selectNodesOnDrag:Ve,defaultViewport:qn,translateExtent:Cr,minZoom:Rn,maxZoom:Nn,preventScrolling:at,zoomOnScroll:Et,zoomOnPinch:Gr,zoomOnDoubleClick:In,panOnScroll:Ut,panOnScrollSpeed:Jt,panOnScrollMode:Cn,panOnDrag:en,onPaneClick:cn,onPaneMouseEnter:kn,onPaneMouseMove:Ti,onPaneMouseLeave:Si,onPaneScroll:Ir,onPaneContextMenu:Fn,onSelectionContextMenu:R,onSelectionStart:W,onSelectionEnd:G,onEdgeContextMenu:Gn,onEdgeDoubleClick:dr,onEdgeMouseEnter:ca,onEdgeMouseMove:Yr,onEdgeMouseLeave:as,onReconnect:Ot??Xr,onReconnectStart:Rt??uo,onReconnectEnd:Vn??pt,reconnectRadius:ua??Gl,defaultMarkerColor:zt,noDragClassName:Ai,noWheelClassName:Qr,noPanClassName:hr,elevateEdgesOnSelect:kr,rfId:Jr,disableKeyboardA11y:ha,nodeOrigin:Ee,nodeExtent:Ye}),fe.createElement(gD,{nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:x,onConnectStart:O,onConnectEnd:k,onClickConnectStart:M,onClickConnectEnd:V,nodesDraggable:it,nodesConnectable:Lt,nodesFocusable:Ue,edgesFocusable:At,edgesUpdatable:vn,elementsSelectable:Gt,elevateNodesOnSelect:Yn,minZoom:Rn,maxZoom:Nn,nodeExtent:Ye,onNodesChange:Kr,onEdgesChange:ho,snapToGrid:nt,snapGrid:Ge,connectionMode:Y,translateExtent:Cr,connectOnClick:un,defaultEdgeOptions:os,fitView:fr,fitViewOptions:gr,onNodesDelete:z,onEdgesDelete:U,onNodeDragStart:N,onNodeDrag:A,onNodeDragStop:C,onSelectionDrag:P,onSelectionDragStart:I,onSelectionDragStop:$,noPanClassName:hr,nodeOrigin:Ee,rfId:Jr,autoPanOnConnect:fo,autoPanOnNodeDrag:Ri,onError:mr,connectionRadius:go,isValidConnection:Wr,nodeDragThreshold:mo}),fe.createElement(hD,{onSelectionChange:H}),ur,fe.createElement(U4,{proOptions:da,position:wt}),fe.createElement(_D,{rfId:Jr,disableKeyboardA11y:ha})))});WT.displayName="ReactFlow";function ZT(t){return e=>{const[n,i]=B.useState(e),a=B.useCallback(l=>i(c=>t(l,c)),[]);return[n,i,a]}}const SO=ZT(LT),AO=ZT(OD);function RO(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},fe.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function NO(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},fe.createElement("path",{d:"M0 0h32v4.2H0z"}))}function CO(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},fe.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function IO(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function kO(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const iu=({children:t,className:e,...n})=>fe.createElement("button",{type:"button",className:Pn(["react-flow__controls-button",e]),...n},t);iu.displayName="ControlButton";const DO=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),JT=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:f,className:m,children:y,position:v="bottom-left"})=>{const b=ln(),[x,O]=B.useState(!1),{isInteractive:k,minZoomReached:M,maxZoomReached:V}=Tt(DO,Sn),{zoomIn:q,zoomOut:F,fitView:j}=zf();if(B.useEffect(()=>{O(!0)},[]),!x)return null;const ee=()=>{q(),l?.()},Z=()=>{F(),c?.()},N=()=>{j(a),d?.()},A=()=>{b.setState({nodesDraggable:!k,nodesConnectable:!k,elementsSelectable:!k}),f?.(!k)};return fe.createElement(lT,{className:Pn(["react-flow__controls",m]),position:v,style:t,"data-testid":"rf__controls"},e&&fe.createElement(fe.Fragment,null,fe.createElement(iu,{onClick:ee,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:V},fe.createElement(RO,null)),fe.createElement(iu,{onClick:Z,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:M},fe.createElement(NO,null))),n&&fe.createElement(iu,{className:"react-flow__controls-fitview",onClick:N,title:"fit view","aria-label":"fit view"},fe.createElement(CO,null)),i&&fe.createElement(iu,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity"},k?fe.createElement(kO,null):fe.createElement(IO,null)),y)};JT.displayName="Controls";var OO=B.memo(JT),Nr;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Nr||(Nr={}));function MO({color:t,dimensions:e,lineWidth:n}){return fe.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function PO({color:t,radius:e}){return fe.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const VO={[Nr.Dots]:"#91919a",[Nr.Lines]:"#eee",[Nr.Cross]:"#e2e2e2"},LO={[Nr.Dots]:1,[Nr.Lines]:1,[Nr.Cross]:6},zO=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function eS({id:t,variant:e=Nr.Dots,gap:n=20,size:i,lineWidth:a=1,offset:l=2,color:c,style:d,className:f}){const m=B.useRef(null),{transform:y,patternId:v}=Tt(zO,Sn),b=c||VO[e],x=i||LO[e],O=e===Nr.Dots,k=e===Nr.Cross,M=Array.isArray(n)?n:[n,n],V=[M[0]*y[2]||1,M[1]*y[2]||1],q=x*y[2],F=k?[q,q]:V,j=O?[q/l,q/l]:[F[0]/l,F[1]/l];return fe.createElement("svg",{className:Pn(["react-flow__background",f]),style:{...d,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:m,"data-testid":"rf__background"},fe.createElement("pattern",{id:v+t,x:y[0]%V[0],y:y[1]%V[1],width:V[0],height:V[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},O?fe.createElement(PO,{color:b,radius:q/l}):fe.createElement(MO,{dimensions:F,color:b,lineWidth:a})),fe.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+t})`}))}eS.displayName="Background";var UO=B.memo(eS),qt=function(){return qt=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},qt.apply(this,arguments)},ww={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},xw={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},Sh={width:"20px",height:"20px",position:"absolute",zIndex:1},BO={top:qt(qt({},ww),{top:"-5px"}),right:qt(qt({},xw),{left:void 0,right:"-5px"}),bottom:qt(qt({},ww),{top:void 0,bottom:"-5px"}),left:qt(qt({},xw),{left:"-5px"}),topRight:qt(qt({},Sh),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:qt(qt({},Sh),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:qt(qt({},Sh),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:qt(qt({},Sh),{left:"-10px",top:"-10px",cursor:"nw-resize"})},jO=B.memo(function(t){var e=t.onResizeStart,n=t.direction,i=t.children,a=t.replaceStyles,l=t.className,c=B.useCallback(function(m){e(m,n)},[e,n]),d=B.useCallback(function(m){e(m,n)},[e,n]),f=B.useMemo(function(){return qt(qt({position:"absolute",userSelect:"none"},BO[n]),a??{})},[a,n]);return T.jsx("div",{className:l||void 0,style:f,onMouseDown:c,onTouchStart:d,children:i})}),HO=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),hi=function(){return hi=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},hi.apply(this,arguments)},$O={width:"auto",height:"auto"},Ah=function(t,e,n){return Math.max(Math.min(t,n),e)},Tw=function(t,e,n){var i=Math.round(t/e);return i*e+n*(i-1)},sl=function(t,e){return new RegExp(t,"i").test(e)},Rh=function(t){return!!(t.touches&&t.touches.length)},qO=function(t){return!!((t.clientX||t.clientX===0)&&(t.clientY||t.clientY===0))},Sw=function(t,e,n){n===void 0&&(n=0);var i=e.reduce(function(l,c,d){return Math.abs(c-t)<Math.abs(e[l]-t)?d:l},0),a=Math.abs(e[i]-t);return n===0||a<n?e[i]:t},Rp=function(t){return t=t.toString(),t==="auto"||t.endsWith("px")||t.endsWith("%")||t.endsWith("vh")||t.endsWith("vw")||t.endsWith("vmax")||t.endsWith("vmin")?t:"".concat(t,"px")},Nh=function(t,e,n,i){if(t&&typeof t=="string"){if(t.endsWith("px"))return Number(t.replace("px",""));if(t.endsWith("%")){var a=Number(t.replace("%",""))/100;return e*a}if(t.endsWith("vw")){var a=Number(t.replace("vw",""))/100;return n*a}if(t.endsWith("vh")){var a=Number(t.replace("vh",""))/100;return i*a}}return t},FO=function(t,e,n,i,a,l,c){return i=Nh(i,t.width,e,n),a=Nh(a,t.height,e,n),l=Nh(l,t.width,e,n),c=Nh(c,t.height,e,n),{maxWidth:typeof i>"u"?void 0:Number(i),maxHeight:typeof a>"u"?void 0:Number(a),minWidth:typeof l>"u"?void 0:Number(l),minHeight:typeof c>"u"?void 0:Number(c)}},GO=function(t){return Array.isArray(t)?t:[t,t]},YO=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Aw="__resizable_base__",XO=function(t){HO(e,t);function e(n){var i,a,l,c,d=t.call(this,n)||this;return d.ratio=1,d.resizable=null,d.parentLeft=0,d.parentTop=0,d.resizableLeft=0,d.resizableRight=0,d.resizableTop=0,d.resizableBottom=0,d.targetLeft=0,d.targetTop=0,d.delta={width:0,height:0},d.appendBase=function(){if(!d.resizable||!d.window)return null;var f=d.parentNode;if(!f)return null;var m=d.window.document.createElement("div");return m.style.width="100%",m.style.height="100%",m.style.position="absolute",m.style.transform="scale(0, 0)",m.style.left="0",m.style.flex="0 0 100%",m.classList?m.classList.add(Aw):m.className+=Aw,f.appendChild(m),m},d.removeBase=function(f){var m=d.parentNode;m&&m.removeChild(f)},d.state={isResizing:!1,width:(a=(i=d.propsSize)===null||i===void 0?void 0:i.width)!==null&&a!==void 0?a:"auto",height:(c=(l=d.propsSize)===null||l===void 0?void 0:l.height)!==null&&c!==void 0?c:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},d.onResizeStart=d.onResizeStart.bind(d),d.onMouseMove=d.onMouseMove.bind(d),d.onMouseUp=d.onMouseUp.bind(d),d}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||$O},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var n=0,i=0;if(this.resizable&&this.window){var a=this.resizable.offsetWidth,l=this.resizable.offsetHeight,c=this.resizable.style.position;c!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:a,i=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:l,this.resizable.style.position=c}return{width:n,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var n=this,i=this.props.size,a=function(d){var f;if(typeof n.state[d]>"u"||n.state[d]==="auto")return"auto";if(n.propsSize&&n.propsSize[d]&&(!((f=n.propsSize[d])===null||f===void 0)&&f.toString().endsWith("%"))){if(n.state[d].toString().endsWith("%"))return n.state[d].toString();var m=n.getParentSize(),y=Number(n.state[d].toString().replace("px","")),v=y/m[d]*100;return"".concat(v,"%")}return Rp(n.state[d])},l=i&&typeof i.width<"u"&&!this.state.isResizing?Rp(i.width):a("width"),c=i&&typeof i.height<"u"&&!this.state.isResizing?Rp(i.height):a("height");return{width:l,height:c}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var i=!1,a=this.parentNode.style.flexWrap;a!=="wrap"&&(i=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var l={width:n.offsetWidth,height:n.offsetHeight};return i&&(this.parentNode.style.flexWrap=a),this.removeBase(n),l},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(n,i){var a=this.propsSize&&this.propsSize[i];return this.state[i]==="auto"&&this.state.original[i]===n&&(typeof a>"u"||a==="auto")?"auto":n},e.prototype.calculateNewMaxFromBoundary=function(n,i){var a=this.props.boundsByDirection,l=this.state.direction,c=a&&sl("left",l),d=a&&sl("top",l),f,m;if(this.props.bounds==="parent"){var y=this.parentNode;y&&(f=c?this.resizableRight-this.parentLeft:y.offsetWidth+(this.parentLeft-this.resizableLeft),m=d?this.resizableBottom-this.parentTop:y.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(f=c?this.resizableRight:this.window.innerWidth-this.resizableLeft,m=d?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(f=c?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),m=d?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return f&&Number.isFinite(f)&&(n=n&&n<f?n:f),m&&Number.isFinite(m)&&(i=i&&i<m?i:m),{maxWidth:n,maxHeight:i}},e.prototype.calculateNewSizeFromDirection=function(n,i){var a=this.props.scale||1,l=GO(this.props.resizeRatio||1),c=l[0],d=l[1],f=this.state,m=f.direction,y=f.original,v=this.props,b=v.lockAspectRatio,x=v.lockAspectRatioExtraHeight,O=v.lockAspectRatioExtraWidth,k=y.width,M=y.height,V=x||0,q=O||0;return sl("right",m)&&(k=y.width+(n-y.x)*c/a,b&&(M=(k-q)/this.ratio+V)),sl("left",m)&&(k=y.width-(n-y.x)*c/a,b&&(M=(k-q)/this.ratio+V)),sl("bottom",m)&&(M=y.height+(i-y.y)*d/a,b&&(k=(M-V)*this.ratio+q)),sl("top",m)&&(M=y.height-(i-y.y)*d/a,b&&(k=(M-V)*this.ratio+q)),{newWidth:k,newHeight:M}},e.prototype.calculateNewSizeFromAspectRatio=function(n,i,a,l){var c=this.props,d=c.lockAspectRatio,f=c.lockAspectRatioExtraHeight,m=c.lockAspectRatioExtraWidth,y=typeof l.width>"u"?10:l.width,v=typeof a.width>"u"||a.width<0?n:a.width,b=typeof l.height>"u"?10:l.height,x=typeof a.height>"u"||a.height<0?i:a.height,O=f||0,k=m||0;if(d){var M=(b-O)*this.ratio+k,V=(x-O)*this.ratio+k,q=(y-k)/this.ratio+O,F=(v-k)/this.ratio+O,j=Math.max(y,M),ee=Math.min(v,V),Z=Math.max(b,q),N=Math.min(x,F);n=Ah(n,j,ee),i=Ah(i,Z,N)}else n=Ah(n,y,v),i=Ah(i,b,x);return{newWidth:n,newHeight:i}},e.prototype.setBoundingClientRect=function(){var n=1/(this.props.scale||1);if(this.props.bounds==="parent"){var i=this.parentNode;if(i){var a=i.getBoundingClientRect();this.parentLeft=a.left*n,this.parentTop=a.top*n}}if(this.props.bounds&&typeof this.props.bounds!="string"){var l=this.props.bounds.getBoundingClientRect();this.targetLeft=l.left*n,this.targetTop=l.top*n}if(this.resizable){var c=this.resizable.getBoundingClientRect(),d=c.left,f=c.top,m=c.right,y=c.bottom;this.resizableLeft=d*n,this.resizableRight=m*n,this.resizableTop=f*n,this.resizableBottom=y*n}},e.prototype.onResizeStart=function(n,i){if(!(!this.resizable||!this.window)){var a=0,l=0;if(n.nativeEvent&&qO(n.nativeEvent)?(a=n.nativeEvent.clientX,l=n.nativeEvent.clientY):n.nativeEvent&&Rh(n.nativeEvent)&&(a=n.nativeEvent.touches[0].clientX,l=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var c=this.props.onResizeStart(n,i,this.resizable);if(c===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var d,f=this.window.getComputedStyle(this.resizable);if(f.flexBasis!=="auto"){var m=this.parentNode;if(m){var y=this.window.getComputedStyle(m).flexDirection;this.flexDir=y.startsWith("row")?"row":"column",d=f.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var v={original:{x:a,y:l,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:hi(hi({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:i,flexBasis:d};this.setState(v)}},e.prototype.onMouseMove=function(n){var i=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&Rh(n))try{n.preventDefault(),n.stopPropagation()}catch{}var a=this.props,l=a.maxWidth,c=a.maxHeight,d=a.minWidth,f=a.minHeight,m=Rh(n)?n.touches[0].clientX:n.clientX,y=Rh(n)?n.touches[0].clientY:n.clientY,v=this.state,b=v.direction,x=v.original,O=v.width,k=v.height,M=this.getParentSize(),V=FO(M,this.window.innerWidth,this.window.innerHeight,l,c,d,f);l=V.maxWidth,c=V.maxHeight,d=V.minWidth,f=V.minHeight;var q=this.calculateNewSizeFromDirection(m,y),F=q.newHeight,j=q.newWidth,ee=this.calculateNewMaxFromBoundary(l,c);this.props.snap&&this.props.snap.x&&(j=Sw(j,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(F=Sw(F,this.props.snap.y,this.props.snapGap));var Z=this.calculateNewSizeFromAspectRatio(j,F,{width:ee.maxWidth,height:ee.maxHeight},{width:d,height:f});if(j=Z.newWidth,F=Z.newHeight,this.props.grid){var N=Tw(j,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),A=Tw(F,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),C=this.props.snapGap||0,z=C===0||Math.abs(N-j)<=C?N:j,U=C===0||Math.abs(A-F)<=C?A:F;j=z,F=U}var H={width:j-x.width,height:F-x.height};if(this.delta=H,O&&typeof O=="string"){if(O.endsWith("%")){var I=j/M.width*100;j="".concat(I,"%")}else if(O.endsWith("vw")){var P=j/this.window.innerWidth*100;j="".concat(P,"vw")}else if(O.endsWith("vh")){var $=j/this.window.innerHeight*100;j="".concat($,"vh")}}if(k&&typeof k=="string"){if(k.endsWith("%")){var I=F/M.height*100;F="".concat(I,"%")}else if(k.endsWith("vw")){var P=F/this.window.innerWidth*100;F="".concat(P,"vw")}else if(k.endsWith("vh")){var $=F/this.window.innerHeight*100;F="".concat($,"vh")}}var R={width:this.createSizeForCssProperty(j,"width"),height:this.createSizeForCssProperty(F,"height")};this.flexDir==="row"?R.flexBasis=R.width:this.flexDir==="column"&&(R.flexBasis=R.height);var W=this.state.width!==R.width,G=this.state.height!==R.height,Y=this.state.flexBasis!==R.flexBasis,S=W||G||Y;S&&aT.flushSync(function(){i.setState(R)}),this.props.onResize&&S&&this.props.onResize(n,b,this.resizable,H)}},e.prototype.onMouseUp=function(n){var i,a,l=this.state,c=l.isResizing,d=l.direction;l.original,!(!c||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(n,d,this.resizable,this.delta),this.props.size&&this.setState({width:(i=this.props.size.width)!==null&&i!==void 0?i:"auto",height:(a=this.props.size.height)!==null&&a!==void 0?a:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:hi(hi({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(n){var i,a;this.setState({width:(i=n.width)!==null&&i!==void 0?i:"auto",height:(a=n.height)!==null&&a!==void 0?a:"auto"})},e.prototype.renderResizer=function(){var n=this,i=this.props,a=i.enable,l=i.handleStyles,c=i.handleClasses,d=i.handleWrapperStyle,f=i.handleWrapperClass,m=i.handleComponent;if(!a)return null;var y=Object.keys(a).map(function(v){return a[v]!==!1?T.jsx(jO,{direction:v,onResizeStart:n.onResizeStart,replaceStyles:l&&l[v],className:c&&c[v],children:m&&m[v]?m[v]:null},v):null});return T.jsx("div",{className:f,style:d,children:y})},e.prototype.render=function(){var n=this,i=Object.keys(this.props).reduce(function(c,d){return YO.indexOf(d)!==-1||(c[d]=n.props[d]),c},{}),a=hi(hi(hi({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(a.flexBasis=this.state.flexBasis);var l=this.props.as||"div";return T.jsxs(l,hi({style:a,className:this.props.className},i,{ref:function(c){c&&(n.resizable=c)},children:[this.state.isResizing&&T.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(B.PureComponent);const Uf=B.createContext(null);Uf.displayName="PanelGroupContext";const It={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},ny=10,Xa=B.useLayoutEffect,Rw=BN.useId,KO=typeof Rw=="function"?Rw:()=>null;let QO=0;function ry(t=null){const e=KO(),n=B.useRef(t||e||null);return n.current===null&&(n.current=""+QO++),t??n.current}function tS({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:a,forwardedRef:l,id:c,maxSize:d,minSize:f,onCollapse:m,onExpand:y,onResize:v,order:b,style:x,tagName:O="div",...k}){const M=B.useContext(Uf);if(M===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:V,expandPanel:q,getPanelSize:F,getPanelStyle:j,groupId:ee,isPanelCollapsed:Z,reevaluatePanelConstraints:N,registerPanel:A,resizePanel:C,unregisterPanel:z}=M,U=ry(c),H=B.useRef({callbacks:{onCollapse:m,onExpand:y,onResize:v},constraints:{collapsedSize:n,collapsible:i,defaultSize:a,maxSize:d,minSize:f},id:U,idIsFromProps:c!==void 0,order:b});B.useRef({didLogMissingDefaultSizeWarning:!1}),Xa(()=>{const{callbacks:P,constraints:$}=H.current,R={...$};H.current.id=U,H.current.idIsFromProps=c!==void 0,H.current.order=b,P.onCollapse=m,P.onExpand=y,P.onResize=v,$.collapsedSize=n,$.collapsible=i,$.defaultSize=a,$.maxSize=d,$.minSize=f,(R.collapsedSize!==$.collapsedSize||R.collapsible!==$.collapsible||R.maxSize!==$.maxSize||R.minSize!==$.minSize)&&N(H.current,R)}),Xa(()=>{const P=H.current;return A(P),()=>{z(P)}},[b,U,A,z]),B.useImperativeHandle(l,()=>({collapse:()=>{V(H.current)},expand:P=>{q(H.current,P)},getId(){return U},getSize(){return F(H.current)},isCollapsed(){return Z(H.current)},isExpanded(){return!Z(H.current)},resize:P=>{C(H.current,P)}}),[V,q,F,Z,U,C]);const I=j(H.current,a);return B.createElement(O,{...k,children:t,className:e,id:U,style:{...I,...x},[It.groupId]:ee,[It.panel]:"",[It.panelCollapsible]:i||void 0,[It.panelId]:U,[It.panelSize]:parseFloat(""+I.flexGrow).toFixed(1)})}const l0=B.forwardRef((t,e)=>B.createElement(tS,{...t,forwardedRef:e}));tS.displayName="Panel";l0.displayName="forwardRef(Panel)";let c0=null,Hh=-1,Ls=null;function WO(t,e){if(e){const n=(e&aS)!==0,i=(e&oS)!==0,a=(e&lS)!==0,l=(e&cS)!==0;if(n)return a?"se-resize":l?"ne-resize":"e-resize";if(i)return a?"sw-resize":l?"nw-resize":"w-resize";if(a)return"s-resize";if(l)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function ZO(){Ls!==null&&(document.head.removeChild(Ls),c0=null,Ls=null,Hh=-1)}function Np(t,e){var n,i;const a=WO(t,e);if(c0!==a){if(c0=a,Ls===null&&(Ls=document.createElement("style"),document.head.appendChild(Ls)),Hh>=0){var l;(l=Ls.sheet)===null||l===void 0||l.removeRule(Hh)}Hh=(n=(i=Ls.sheet)===null||i===void 0?void 0:i.insertRule(`*{cursor: ${a} !important;}`))!==null&&n!==void 0?n:-1}}function nS(t){return t.type==="keydown"}function rS(t){return t.type.startsWith("pointer")}function iS(t){return t.type.startsWith("mouse")}function Bf(t){if(rS(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(iS(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function JO(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function e3(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function t3(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:Iw(t),b:Iw(e)};let i;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),i=t;je(i,"Stacking order can only be calculated for elements with a common ancestor");const a={a:Cw(Nw(n.a)),b:Cw(Nw(n.b))};if(a.a===a.b){const l=i.childNodes,c={a:n.a.at(-1),b:n.b.at(-1)};let d=l.length;for(;d--;){const f=l[d];if(f===c.a)return 1;if(f===c.b)return-1}}return Math.sign(a.a-a.b)}const n3=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function r3(t){var e;const n=getComputedStyle((e=sS(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function i3(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||r3(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||n3.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function Nw(t){let e=t.length;for(;e--;){const n=t[e];if(je(n,"Missing node"),i3(n))return n}return null}function Cw(t){return t&&Number(getComputedStyle(t).zIndex)||0}function Iw(t){const e=[];for(;t;)e.push(t),t=sS(t);return e}function sS(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const aS=1,oS=2,lS=4,cS=8,s3=JO()==="coarse";let jr=[],El=!1,zs=new Map,jf=new Map;const Ru=new Set;function a3(t,e,n,i,a){var l;const{ownerDocument:c}=e,d={direction:n,element:e,hitAreaMargins:i,setResizeHandlerState:a},f=(l=zs.get(c))!==null&&l!==void 0?l:0;return zs.set(c,f+1),Ru.add(d),cf(),function(){var y;jf.delete(t),Ru.delete(d);const v=(y=zs.get(c))!==null&&y!==void 0?y:1;if(zs.set(c,v-1),cf(),v===1&&zs.delete(c),jr.includes(d)){const b=jr.indexOf(d);b>=0&&jr.splice(b,1),sy(),a("up",!0,null)}}}function o3(t){const{target:e}=t,{x:n,y:i}=Bf(t);El=!0,iy({target:e,x:n,y:i}),cf(),jr.length>0&&(uf("down",t),t.preventDefault(),uS(e)||t.stopImmediatePropagation())}function Cp(t){const{x:e,y:n}=Bf(t);if(El&&t.buttons===0&&(El=!1,uf("up",t)),!El){const{target:i}=t;iy({target:i,x:e,y:n})}uf("move",t),sy(),jr.length>0&&t.preventDefault()}function Ip(t){const{target:e}=t,{x:n,y:i}=Bf(t);jf.clear(),El=!1,jr.length>0&&(t.preventDefault(),uS(e)||t.stopImmediatePropagation()),uf("up",t),iy({target:e,x:n,y:i}),sy(),cf()}function uS(t){let e=t;for(;e;){if(e.hasAttribute(It.resizeHandle))return!0;e=e.parentElement}return!1}function iy({target:t,x:e,y:n}){jr.splice(0);let i=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(i=t),Ru.forEach(a=>{const{element:l,hitAreaMargins:c}=a,d=l.getBoundingClientRect(),{bottom:f,left:m,right:y,top:v}=d,b=s3?c.coarse:c.fine;if(e>=m-b&&e<=y+b&&n>=v-b&&n<=f+b){if(i!==null&&document.contains(i)&&l!==i&&!l.contains(i)&&!i.contains(l)&&t3(i,l)>0){let O=i,k=!1;for(;O&&!O.contains(l);){if(e3(O.getBoundingClientRect(),d)){k=!0;break}O=O.parentElement}if(k)return}jr.push(a)}})}function kp(t,e){jf.set(t,e)}function sy(){let t=!1,e=!1;jr.forEach(i=>{const{direction:a}=i;a==="horizontal"?t=!0:e=!0});let n=0;jf.forEach(i=>{n|=i}),t&&e?Np("intersection",n):t?Np("horizontal",n):e?Np("vertical",n):ZO()}let Dp;function cf(){var t;(t=Dp)===null||t===void 0||t.abort(),Dp=new AbortController;const e={capture:!0,signal:Dp.signal};Ru.size&&(El?(jr.length>0&&zs.forEach((n,i)=>{const{body:a}=i;n>0&&(a.addEventListener("contextmenu",Ip,e),a.addEventListener("pointerleave",Cp,e),a.addEventListener("pointermove",Cp,e))}),zs.forEach((n,i)=>{const{body:a}=i;a.addEventListener("pointerup",Ip,e),a.addEventListener("pointercancel",Ip,e)})):zs.forEach((n,i)=>{const{body:a}=i;n>0&&(a.addEventListener("pointerdown",o3,e),a.addEventListener("pointermove",Cp,e))}))}function uf(t,e){Ru.forEach(n=>{const{setResizeHandlerState:i}=n,a=jr.includes(n);i(t,a,e)})}function l3(){const[t,e]=B.useState(0);return B.useCallback(()=>e(n=>n+1),[])}function je(t,e){if(!t)throw console.error(e),Error(e)}function Wa(t,e,n=ny){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function Ki(t,e,n=ny){return Wa(t,e,n)===0}function nr(t,e,n){return Wa(t,e,n)===0}function c3(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){const a=t[i],l=e[i];if(!nr(a,l,n))return!1}return!0}function ml({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];je(i!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:a=0,collapsible:l,maxSize:c=100,minSize:d=0}=i;if(Wa(n,d)<0)if(l){const f=(a+d)/2;Wa(n,f)<0?n=a:n=d}else n=d;return n=Math.min(c,n),n=parseFloat(n.toFixed(ny)),n}function su({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:i,prevLayout:a,trigger:l}){if(nr(t,0))return e;const c=[...e],[d,f]=i;je(d!=null,"Invalid first pivot index"),je(f!=null,"Invalid second pivot index");let m=0;if(l==="keyboard"){{const v=t<0?f:d,b=n[v];je(b,`Panel constraints not found for index ${v}`);const{collapsedSize:x=0,collapsible:O,minSize:k=0}=b;if(O){const M=e[v];if(je(M!=null,`Previous layout not found for panel index ${v}`),nr(M,x)){const V=k-M;Wa(V,Math.abs(t))>0&&(t=t<0?0-V:V)}}}{const v=t<0?d:f,b=n[v];je(b,`No panel constraints found for index ${v}`);const{collapsedSize:x=0,collapsible:O,minSize:k=0}=b;if(O){const M=e[v];if(je(M!=null,`Previous layout not found for panel index ${v}`),nr(M,k)){const V=M-x;Wa(V,Math.abs(t))>0&&(t=t<0?0-V:V)}}}}{const v=t<0?1:-1;let b=t<0?f:d,x=0;for(;;){const k=e[b];je(k!=null,`Previous layout not found for panel index ${b}`);const V=ml({panelConstraints:n,panelIndex:b,size:100})-k;if(x+=V,b+=v,b<0||b>=n.length)break}const O=Math.min(Math.abs(t),Math.abs(x));t=t<0?0-O:O}{let b=t<0?d:f;for(;b>=0&&b<n.length;){const x=Math.abs(t)-Math.abs(m),O=e[b];je(O!=null,`Previous layout not found for panel index ${b}`);const k=O-x,M=ml({panelConstraints:n,panelIndex:b,size:k});if(!nr(O,M)&&(m+=O-M,c[b]=M,m.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?b--:b++}}if(c3(a,c))return a;{const v=t<0?f:d,b=e[v];je(b!=null,`Previous layout not found for panel index ${v}`);const x=b+m,O=ml({panelConstraints:n,panelIndex:v,size:x});if(c[v]=O,!nr(O,x)){let k=x-O,V=t<0?f:d;for(;V>=0&&V<n.length;){const q=c[V];je(q!=null,`Previous layout not found for panel index ${V}`);const F=q+k,j=ml({panelConstraints:n,panelIndex:V,size:F});if(nr(q,j)||(k-=j-q,c[V]=j),nr(k,0))break;t>0?V--:V++}}}const y=c.reduce((v,b)=>b+v,0);return nr(y,100)?c:a}function u3({layout:t,panelsArray:e,pivotIndices:n}){let i=0,a=100,l=0,c=0;const d=n[0];je(d!=null,"No pivot index found"),e.forEach((v,b)=>{const{constraints:x}=v,{maxSize:O=100,minSize:k=0}=x;b===d?(i=k,a=O):(l+=k,c+=O)});const f=Math.min(a,100-l),m=Math.max(i,100-c),y=t[d];return{valueMax:f,valueMin:m,valueNow:y}}function Nu(t,e=document){return Array.from(e.querySelectorAll(`[${It.resizeHandleId}][data-panel-group-id="${t}"]`))}function dS(t,e,n=document){const a=Nu(t,n).findIndex(l=>l.getAttribute(It.resizeHandleId)===e);return a??null}function hS(t,e,n){const i=dS(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function d3(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function fS(t,e=document){if(d3(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function Hf(t,e=document){const n=e.querySelector(`[${It.resizeHandleId}="${t}"]`);return n||null}function h3(t,e,n,i=document){var a,l,c,d;const f=Hf(e,i),m=Nu(t,i),y=f?m.indexOf(f):-1,v=(a=(l=n[y])===null||l===void 0?void 0:l.id)!==null&&a!==void 0?a:null,b=(c=(d=n[y+1])===null||d===void 0?void 0:d.id)!==null&&c!==void 0?c:null;return[v,b]}function f3({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:a,panelGroupElement:l,setLayout:c}){B.useRef({didWarnAboutMissingResizeHandle:!1}),Xa(()=>{if(!l)return;const d=Nu(n,l);for(let f=0;f<a.length-1;f++){const{valueMax:m,valueMin:y,valueNow:v}=u3({layout:i,panelsArray:a,pivotIndices:[f,f+1]}),b=d[f];if(b!=null){const x=a[f];je(x,`No panel data found for index "${f}"`),b.setAttribute("aria-controls",x.id),b.setAttribute("aria-valuemax",""+Math.round(m)),b.setAttribute("aria-valuemin",""+Math.round(y)),b.setAttribute("aria-valuenow",v!=null?""+Math.round(v):"")}}return()=>{d.forEach((f,m)=>{f.removeAttribute("aria-controls"),f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow")})}},[n,i,a,l]),B.useEffect(()=>{if(!l)return;const d=e.current;je(d,"Eager values not found");const{panelDataArray:f}=d,m=fS(n,l);je(m!=null,`No group found for id "${n}"`);const y=Nu(n,l);je(y,`No resize handles found for group id "${n}"`);const v=y.map(b=>{const x=b.getAttribute(It.resizeHandleId);je(x,"Resize handle element has no handle id attribute");const[O,k]=h3(n,x,f,l);if(O==null||k==null)return()=>{};const M=V=>{if(!V.defaultPrevented)switch(V.key){case"Enter":{V.preventDefault();const q=f.findIndex(F=>F.id===O);if(q>=0){const F=f[q];je(F,`No panel data found for index ${q}`);const j=i[q],{collapsedSize:ee=0,collapsible:Z,minSize:N=0}=F.constraints;if(j!=null&&Z){const A=su({delta:nr(j,ee)?N-ee:ee-j,initialLayout:i,panelConstraints:f.map(C=>C.constraints),pivotIndices:hS(n,x,l),prevLayout:i,trigger:"keyboard"});i!==A&&c(A)}}break}}};return b.addEventListener("keydown",M),()=>{b.removeEventListener("keydown",M)}});return()=>{v.forEach(b=>b())}},[l,t,e,n,i,a,c])}function kw(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function gS(t,e){const n=t==="horizontal",{x:i,y:a}=Bf(e);return n?i:a}function g3(t,e,n,i,a){const l=n==="horizontal",c=Hf(e,a);je(c,`No resize handle element found for id "${e}"`);const d=c.getAttribute(It.groupId);je(d,"Resize handle element has no group id attribute");let{initialCursorPosition:f}=i;const m=gS(n,t),y=fS(d,a);je(y,`No group element found for id "${d}"`);const v=y.getBoundingClientRect(),b=l?v.width:v.height;return(m-f)/b*100}function m3(t,e,n,i,a,l){if(nS(t)){const c=n==="horizontal";let d=0;t.shiftKey?d=100:a!=null?d=a:d=10;let f=0;switch(t.key){case"ArrowDown":f=c?0:d;break;case"ArrowLeft":f=c?-d:0;break;case"ArrowRight":f=c?d:0;break;case"ArrowUp":f=c?0:-d;break;case"End":f=100;break;case"Home":f=-100;break}return f}else return i==null?0:g3(t,e,n,i,l)}function p3({panelDataArray:t}){const e=Array(t.length),n=t.map(l=>l.constraints);let i=0,a=100;for(let l=0;l<t.length;l++){const c=n[l];je(c,`Panel constraints not found for index ${l}`);const{defaultSize:d}=c;d!=null&&(i++,e[l]=d,a-=d)}for(let l=0;l<t.length;l++){const c=n[l];je(c,`Panel constraints not found for index ${l}`);const{defaultSize:d}=c;if(d!=null)continue;const f=t.length-i,m=a/f;i++,e[l]=m,a-=m}return e}function al(t,e,n){e.forEach((i,a)=>{const l=t[a];je(l,`Panel data not found for index ${a}`);const{callbacks:c,constraints:d,id:f}=l,{collapsedSize:m=0,collapsible:y}=d,v=n[f];if(v==null||i!==v){n[f]=i;const{onCollapse:b,onExpand:x,onResize:O}=c;O&&O(i,v),y&&(b||x)&&(x&&(v==null||Ki(v,m))&&!Ki(i,m)&&x(),b&&(v==null||!Ki(v,m))&&Ki(i,m)&&b())}})}function Ch(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function y3({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:a,precision:l=3}){const c=n[a];let d;return c==null?d=t!=null?t.toPrecision(l):"1":i.length===1?d="1":d=c.toPrecision(l),{flexBasis:0,flexGrow:d,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function v3(t,e=10){let n=null;return(...a)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...a)},e)}}function Dw(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function mS(t){return`react-resizable-panels:${t}`}function pS(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:a,order:l}=e;return a?i:l?`${l}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function yS(t,e){try{const n=mS(t),i=e.getItem(n);if(i){const a=JSON.parse(i);if(typeof a=="object"&&a!=null)return a}}catch{}return null}function _3(t,e,n){var i,a;const l=(i=yS(t,n))!==null&&i!==void 0?i:{},c=pS(e);return(a=l[c])!==null&&a!==void 0?a:null}function b3(t,e,n,i,a){var l;const c=mS(t),d=pS(e),f=(l=yS(t,a))!==null&&l!==void 0?l:{};f[d]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{a.setItem(c,JSON.stringify(f))}catch(m){console.error(m)}}function Ow({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((l,c)=>l+c,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(l=>`${l}%`).join(", ")}`);if(!nr(i,100)&&n.length>0)for(let l=0;l<e.length;l++){const c=n[l];je(c!=null,`No layout data found for index ${l}`);const d=100/i*c;n[l]=d}let a=0;for(let l=0;l<e.length;l++){const c=n[l];je(c!=null,`No layout data found for index ${l}`);const d=ml({panelConstraints:e,panelIndex:l,size:c});c!=d&&(a+=c-d,n[l]=d)}if(!nr(a,0))for(let l=0;l<e.length;l++){const c=n[l];je(c!=null,`No layout data found for index ${l}`);const d=c+a,f=ml({panelConstraints:e,panelIndex:l,size:d});if(c!==f&&(a-=f-c,n[l]=f,nr(a,0)))break}return n}const E3=100,au={getItem:t=>(Dw(au),au.getItem(t)),setItem:(t,e)=>{Dw(au),au.setItem(t,e)}},Mw={};function vS({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:a,id:l=null,onLayout:c=null,keyboardResizeBy:d=null,storage:f=au,style:m,tagName:y="div",...v}){const b=ry(l),x=B.useRef(null),[O,k]=B.useState(null),[M,V]=B.useState([]),q=l3(),F=B.useRef({}),j=B.useRef(new Map),ee=B.useRef(0),Z=B.useRef({autoSaveId:t,direction:i,dragState:O,id:b,keyboardResizeBy:d,onLayout:c,storage:f}),N=B.useRef({layout:M,panelDataArray:[],panelDataArrayChanged:!1});B.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),B.useImperativeHandle(a,()=>({getId:()=>Z.current.id,getLayout:()=>{const{layout:K}=N.current;return K},setLayout:K=>{const{onLayout:te}=Z.current,{layout:le,panelDataArray:de}=N.current,ge=Ow({layout:K,panelConstraints:de.map(_e=>_e.constraints)});kw(le,ge)||(V(ge),N.current.layout=ge,te&&te(ge),al(de,ge,F.current))}}),[]),Xa(()=>{Z.current.autoSaveId=t,Z.current.direction=i,Z.current.dragState=O,Z.current.id=b,Z.current.onLayout=c,Z.current.storage=f}),f3({committedValuesRef:Z,eagerValuesRef:N,groupId:b,layout:M,panelDataArray:N.current.panelDataArray,setLayout:V,panelGroupElement:x.current}),B.useEffect(()=>{const{panelDataArray:K}=N.current;if(t){if(M.length===0||M.length!==K.length)return;let te=Mw[t];te==null&&(te=v3(b3,E3),Mw[t]=te);const le=[...K],de=new Map(j.current);te(t,le,de,M,f)}},[t,M,f]),B.useEffect(()=>{});const A=B.useCallback(K=>{const{onLayout:te}=Z.current,{layout:le,panelDataArray:de}=N.current;if(K.constraints.collapsible){const ge=de.map(nt=>nt.constraints),{collapsedSize:_e=0,panelSize:Ae,pivotIndices:Ne}=Ua(de,K,le);if(je(Ae!=null,`Panel size not found for panel "${K.id}"`),!Ki(Ae,_e)){j.current.set(K.id,Ae);const Ge=cl(de,K)===de.length-1?Ae-_e:_e-Ae,ke=su({delta:Ge,initialLayout:le,panelConstraints:ge,pivotIndices:Ne,prevLayout:le,trigger:"imperative-api"});Ch(le,ke)||(V(ke),N.current.layout=ke,te&&te(ke),al(de,ke,F.current))}}},[]),C=B.useCallback((K,te)=>{const{onLayout:le}=Z.current,{layout:de,panelDataArray:ge}=N.current;if(K.constraints.collapsible){const _e=ge.map(Ve=>Ve.constraints),{collapsedSize:Ae=0,panelSize:Ne=0,minSize:nt=0,pivotIndices:Ge}=Ua(ge,K,de),ke=te??nt;if(Ki(Ne,Ae)){const Ve=j.current.get(K.id),it=Ve!=null&&Ve>=ke?Ve:ke,Ue=cl(ge,K)===ge.length-1?Ne-it:it-Ne,Ee=su({delta:Ue,initialLayout:de,panelConstraints:_e,pivotIndices:Ge,prevLayout:de,trigger:"imperative-api"});Ch(de,Ee)||(V(Ee),N.current.layout=Ee,le&&le(Ee),al(ge,Ee,F.current))}}},[]),z=B.useCallback(K=>{const{layout:te,panelDataArray:le}=N.current,{panelSize:de}=Ua(le,K,te);return je(de!=null,`Panel size not found for panel "${K.id}"`),de},[]),U=B.useCallback((K,te)=>{const{panelDataArray:le}=N.current,de=cl(le,K);return y3({defaultSize:te,dragState:O,layout:M,panelData:le,panelIndex:de})},[O,M]),H=B.useCallback(K=>{const{layout:te,panelDataArray:le}=N.current,{collapsedSize:de=0,collapsible:ge,panelSize:_e}=Ua(le,K,te);return je(_e!=null,`Panel size not found for panel "${K.id}"`),ge===!0&&Ki(_e,de)},[]),I=B.useCallback(K=>{const{layout:te,panelDataArray:le}=N.current,{collapsedSize:de=0,collapsible:ge,panelSize:_e}=Ua(le,K,te);return je(_e!=null,`Panel size not found for panel "${K.id}"`),!ge||Wa(_e,de)>0},[]),P=B.useCallback(K=>{const{panelDataArray:te}=N.current;te.push(K),te.sort((le,de)=>{const ge=le.order,_e=de.order;return ge==null&&_e==null?0:ge==null?-1:_e==null?1:ge-_e}),N.current.panelDataArrayChanged=!0,q()},[q]);Xa(()=>{if(N.current.panelDataArrayChanged){N.current.panelDataArrayChanged=!1;const{autoSaveId:K,onLayout:te,storage:le}=Z.current,{layout:de,panelDataArray:ge}=N.current;let _e=null;if(K){const Ne=_3(K,ge,le);Ne&&(j.current=new Map(Object.entries(Ne.expandToSizes)),_e=Ne.layout)}_e==null&&(_e=p3({panelDataArray:ge}));const Ae=Ow({layout:_e,panelConstraints:ge.map(Ne=>Ne.constraints)});kw(de,Ae)||(V(Ae),N.current.layout=Ae,te&&te(Ae),al(ge,Ae,F.current))}}),Xa(()=>{const K=N.current;return()=>{K.layout=[]}},[]);const $=B.useCallback(K=>{let te=!1;const le=x.current;return le&&window.getComputedStyle(le,null).getPropertyValue("direction")==="rtl"&&(te=!0),function(ge){ge.preventDefault();const _e=x.current;if(!_e)return()=>null;const{direction:Ae,dragState:Ne,id:nt,keyboardResizeBy:Ge,onLayout:ke}=Z.current,{layout:Ve,panelDataArray:it}=N.current,{initialLayout:Lt}=Ne??{},Ue=hS(nt,K,_e);let Ee=m3(ge,K,Ae,Ne,Ge,_e);const At=Ae==="horizontal";At&&te&&(Ee=-Ee);const vn=it.map(Rn=>Rn.constraints),Gt=su({delta:Ee,initialLayout:Lt??Ve,panelConstraints:vn,pivotIndices:Ue,prevLayout:Ve,trigger:nS(ge)?"keyboard":"mouse-or-touch"}),qn=!Ch(Ve,Gt);(rS(ge)||iS(ge))&&ee.current!=Ee&&(ee.current=Ee,!qn&&Ee!==0?At?kp(K,Ee<0?aS:oS):kp(K,Ee<0?lS:cS):kp(K,0)),qn&&(V(Gt),N.current.layout=Gt,ke&&ke(Gt),al(it,Gt,F.current))}},[]),R=B.useCallback((K,te)=>{const{onLayout:le}=Z.current,{layout:de,panelDataArray:ge}=N.current,_e=ge.map(Ve=>Ve.constraints),{panelSize:Ae,pivotIndices:Ne}=Ua(ge,K,de);je(Ae!=null,`Panel size not found for panel "${K.id}"`);const Ge=cl(ge,K)===ge.length-1?Ae-te:te-Ae,ke=su({delta:Ge,initialLayout:de,panelConstraints:_e,pivotIndices:Ne,prevLayout:de,trigger:"imperative-api"});Ch(de,ke)||(V(ke),N.current.layout=ke,le&&le(ke),al(ge,ke,F.current))},[]),W=B.useCallback((K,te)=>{const{layout:le,panelDataArray:de}=N.current,{collapsedSize:ge=0,collapsible:_e}=te,{collapsedSize:Ae=0,collapsible:Ne,maxSize:nt=100,minSize:Ge=0}=K.constraints,{panelSize:ke}=Ua(de,K,le);ke!=null&&(_e&&Ne&&Ki(ke,ge)?Ki(ge,Ae)||R(K,Ae):ke<Ge?R(K,Ge):ke>nt&&R(K,nt))},[R]),G=B.useCallback((K,te)=>{const{direction:le}=Z.current,{layout:de}=N.current;if(!x.current)return;const ge=Hf(K,x.current);je(ge,`Drag handle element not found for id "${K}"`);const _e=gS(le,te);k({dragHandleId:K,dragHandleRect:ge.getBoundingClientRect(),initialCursorPosition:_e,initialLayout:de})},[]),Y=B.useCallback(()=>{k(null)},[]),S=B.useCallback(K=>{const{panelDataArray:te}=N.current,le=cl(te,K);le>=0&&(te.splice(le,1),delete F.current[K.id],N.current.panelDataArrayChanged=!0,q())},[q]),Q=B.useMemo(()=>({collapsePanel:A,direction:i,dragState:O,expandPanel:C,getPanelSize:z,getPanelStyle:U,groupId:b,isPanelCollapsed:H,isPanelExpanded:I,reevaluatePanelConstraints:W,registerPanel:P,registerResizeHandle:$,resizePanel:R,startDragging:G,stopDragging:Y,unregisterPanel:S,panelGroupElement:x.current}),[A,O,i,C,z,U,b,H,I,W,P,$,R,G,Y,S]),ne={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return B.createElement(Uf.Provider,{value:Q},B.createElement(y,{...v,children:e,className:n,id:l,ref:x,style:{...ne,...m},[It.group]:"",[It.groupDirection]:i,[It.groupId]:b}))}const _S=B.forwardRef((t,e)=>B.createElement(vS,{...t,forwardedRef:e}));vS.displayName="PanelGroup";_S.displayName="forwardRef(PanelGroup)";function cl(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Ua(t,e,n){const i=cl(t,e),l=i===t.length-1?[i-1,i]:[i,i+1],c=n[i];return{...e.constraints,panelSize:c,pivotIndices:l}}function w3({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){B.useEffect(()=>{if(t||n==null||i==null)return;const a=Hf(e,i);if(a==null)return;const l=c=>{if(!c.defaultPrevented)switch(c.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{c.preventDefault(),n(c);break}case"F6":{c.preventDefault();const d=a.getAttribute(It.groupId);je(d,`No group element found for id "${d}"`);const f=Nu(d,i),m=dS(d,e,i);je(m!==null,`No resize element found for id "${e}"`);const y=c.shiftKey?m>0?m-1:f.length-1:m+1<f.length?m+1:0;f[y].focus();break}}};return a.addEventListener("keydown",l),()=>{a.removeEventListener("keydown",l)}},[i,t,e,n])}function bS({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:i,id:a,onBlur:l,onClick:c,onDragging:d,onFocus:f,onPointerDown:m,onPointerUp:y,style:v={},tabIndex:b=0,tagName:x="div",...O}){var k,M;const V=B.useRef(null),q=B.useRef({onClick:c,onDragging:d,onPointerDown:m,onPointerUp:y});B.useEffect(()=>{q.current.onClick=c,q.current.onDragging=d,q.current.onPointerDown=m,q.current.onPointerUp=y});const F=B.useContext(Uf);if(F===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:j,groupId:ee,registerResizeHandle:Z,startDragging:N,stopDragging:A,panelGroupElement:C}=F,z=ry(a),[U,H]=B.useState("inactive"),[I,P]=B.useState(!1),[$,R]=B.useState(null),W=B.useRef({state:U});Xa(()=>{W.current.state=U}),B.useEffect(()=>{if(n)R(null);else{const Q=Z(z);R(()=>Q)}},[n,z,Z]);const G=(k=i?.coarse)!==null&&k!==void 0?k:15,Y=(M=i?.fine)!==null&&M!==void 0?M:5;B.useEffect(()=>{if(n||$==null)return;const Q=V.current;je(Q,"Element ref not attached");let ne=!1;return a3(z,Q,j,{coarse:G,fine:Y},(te,le,de)=>{if(!le){H("inactive");return}switch(te){case"down":{H("drag"),ne=!1,je(de,'Expected event to be defined for "down" action'),N(z,de);const{onDragging:ge,onPointerDown:_e}=q.current;ge?.(!0),_e?.();break}case"move":{const{state:ge}=W.current;ne=!0,ge!=="drag"&&H("hover"),je(de,'Expected event to be defined for "move" action'),$(de);break}case"up":{H("hover"),A();const{onClick:ge,onDragging:_e,onPointerUp:Ae}=q.current;_e?.(!1),Ae?.(),ne||ge?.();break}}})},[G,j,n,Y,Z,z,$,N,A]),w3({disabled:n,handleId:z,resizeHandler:$,panelGroupElement:C});const S={touchAction:"none",userSelect:"none"};return B.createElement(x,{...O,children:t,className:e,id:a,onBlur:()=>{P(!1),l?.()},onFocus:()=>{P(!0),f?.()},ref:V,role:"separator",style:{...S,...v},tabIndex:b,[It.groupDirection]:j,[It.groupId]:ee,[It.resizeHandle]:"",[It.resizeHandleActive]:U==="drag"?"pointer":I?"keyboard":void 0,[It.resizeHandleEnabled]:!n,[It.resizeHandleId]:z,[It.resizeHandleState]:U})}bS.displayName="PanelResizeHandle";const ES=t=>{const e=[],n=t.split("_");for(let i=0;i<n.length;i++)if(i%2===0)n[i].split(/\s+/).filter(l=>l.trim()!=="").forEach(l=>{e.push({word:l.trim()})});else{const a=n[i].trim();a.split(/\s+/).filter(c=>c.trim()!=="").forEach(c=>{e.push({word:c.trim(),myConcept:a})})}return e},Pw=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},hu=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.slice(1):t,i=parseInt(n.slice(0,2),16),a=parseInt(n.slice(2,4),16),l=parseInt(n.slice(4,6),16);const c=f=>Math.max(0,Math.min(255,f)),d=1-e;return i=c(Math.round(i*d)),a=c(Math.round(a*d)),l=c(Math.round(l*d)),`#${[i,a,l].map(f=>f.toString(16).padStart(2,"0")).join("")}`},x3=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),a=parseInt(e.substr(4,2),16),l=30,c=Math.min(255,Math.max(0,n+(Math.random()-.5)*l*2)),d=Math.min(255,Math.max(0,i+(Math.random()-.5)*l*2)),f=Math.min(255,Math.max(0,a+(Math.random()-.5)*l*2));return`#${Math.round(c).toString(16).padStart(2,"0")}${Math.round(d).toString(16).padStart(2,"0")}${Math.round(f).toString(16).padStart(2,"0")}`},T3=t=>{const i=(Math.random()-.5)*150*2;return{x:t.x+i,y:t.y+200}},S3=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,A3=(t,e)=>`edge_${t}_${e}`,R3=(t,e,n,i,a,l,c)=>({id:S3(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:i,full_text:n,suggestions:[],myColor:a,tokenColors:{},previousNode:c}}),N3=(t,e,n,i)=>({id:A3(t,e),source:t,target:e,sourceHandle:i,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:Qa.ArrowClosed,color:n}}),C3=()=>{};var Vw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},I3=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const a=t[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],c=t[n++],d=t[n++],f=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const l=t[n++],c=t[n++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},xS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<t.length;a+=3){const l=t[a],c=a+1<t.length,d=c?t[a+1]:0,f=a+2<t.length,m=f?t[a+2]:0,y=l>>2,v=(l&3)<<4|d>>4;let b=(d&15)<<2|m>>6,x=m&63;f||(x=64,c||(b=64)),i.push(n[y],n[v],n[b],n[x])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):I3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],d=a<t.length?n[t.charAt(a)]:0;++a;const m=a<t.length?n[t.charAt(a)]:64;++a;const v=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||d==null||m==null||v==null)throw new k3;const b=l<<2|d>>4;if(i.push(b),m!==64){const x=d<<4&240|m>>2;if(i.push(x),v!==64){const O=m<<6&192|v;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class k3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const D3=function(t){const e=wS(t);return xS.encodeByteArray(e,!0)},df=function(t){return D3(t).replace(/\./g,"")},TS=function(t){try{return xS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=()=>O3().__FIREBASE_DEFAULTS__,P3=()=>{if(typeof process>"u"||typeof Vw>"u")return;const t=Vw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},V3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&TS(t[1]);return e&&JSON.parse(e)},$f=()=>{try{return C3()||M3()||P3()||V3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},SS=t=>{var e,n;return(n=(e=$f())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},AS=t=>{const e=SS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},RS=()=>{var t;return(t=$f())===null||t===void 0?void 0:t.config},NS=t=>{var e;return(e=$f())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t){return t.endsWith(".cloudworkstations.dev")}async function ay(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[df(JSON.stringify(n)),df(JSON.stringify(c)),""].join(".")}const fu={};function U3(){const t={prod:[],emulator:[]};for(const e of Object.keys(fu))fu[e]?t.emulator.push(e):t.prod.push(e);return t}function B3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Lw=!1;function oy(t,e){if(typeof window>"u"||typeof document>"u"||!so(window.location.host)||fu[t]===e||fu[t]||Lw)return;fu[t]=e;function n(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=U3().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,x){b.setAttribute("width","24"),b.setAttribute("id",x),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function m(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Lw=!0,c()},b}function y(b,x){b.setAttribute("id",x),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=B3(i),x=n("text"),O=document.getElementById(x)||document.createElement("span"),k=n("learnmore"),M=document.getElementById(k)||document.createElement("a"),V=n("preprendIcon"),q=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const F=b.element;d(F),y(M,k);const j=m();f(q,V),F.append(q,O,M,j),document.body.appendChild(F)}l?(O.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function j3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(An())}function H3(){var t;const e=(t=$f())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function q3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function F3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function G3(){const t=An();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Y3(){return!H3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X3(){try{return typeof indexedDB=="object"}catch{return!1}}function K3(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3="FirebaseError";class xi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Q3,Object.setPrototypeOf(this,xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$u.prototype.create)}}class $u{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?W3(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new xi(a,d,i)}}function W3(t,e){return t.replace(Z3,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const Z3=/\{\$([^}]+)}/g;function J3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Za(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const l=t[a],c=e[a];if(zw(l)&&zw(c)){if(!Za(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function zw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ou(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function lu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function eM(t,e){const n=new tM(t,e);return n.subscribe.bind(n)}class tM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let a;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");nM(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:i},a.next===void 0&&(a.next=Op),a.error===void 0&&(a.error=Op),a.complete===void 0&&(a.complete=Op);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Op(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){return t&&t._delegate?t._delegate:t}class Zs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new L3;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e?.identifier),a=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sM(e))try{this.getOrInitializeService({instanceIdentifier:Ha})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ha){return this.instances.has(e)}getOptions(e=Ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,n){var i;const a=this.normalizeInstanceIdentifier(n),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:iM(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ha){return this.component?this.component.multipleInstances?e:Ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iM(t){return t===Ha?void 0:t}function sM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qe||(Qe={}));const oM={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},lM=Qe.INFO,cM={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},uM=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),a=cM[e];if(a)console[a](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ly{constructor(e){this.name=e,this._logLevel=lM,this._logHandler=uM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const dM=(t,e)=>e.some(n=>t instanceof n);let Uw,Bw;function hM(){return Uw||(Uw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fM(){return Bw||(Bw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CS=new WeakMap,u0=new WeakMap,IS=new WeakMap,Mp=new WeakMap,cy=new WeakMap;function gM(t){const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{n(Gs(t.result)),a()},c=()=>{i(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&CS.set(n,t)}).catch(()=>{}),cy.set(e,t),e}function mM(t){if(u0.has(t))return;const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});u0.set(t,e)}let d0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return u0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||IS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pM(t){d0=t(d0)}function yM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Pp(this),e,...n);return IS.set(i,e.sort?e.sort():[e]),Gs(i)}:fM().includes(t)?function(...e){return t.apply(Pp(this),e),Gs(CS.get(this))}:function(...e){return Gs(t.apply(Pp(this),e))}}function vM(t){return typeof t=="function"?yM(t):(t instanceof IDBTransaction&&mM(t),dM(t,hM())?new Proxy(t,d0):t)}function Gs(t){if(t instanceof IDBRequest)return gM(t);if(Mp.has(t))return Mp.get(t);const e=vM(t);return e!==t&&(Mp.set(t,e),cy.set(e,t)),e}const Pp=t=>cy.get(t);function _M(t,e,{blocked:n,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(t,e),d=Gs(c);return i&&c.addEventListener("upgradeneeded",f=>{i(Gs(c.result),f.oldVersion,f.newVersion,Gs(c.transaction),f)}),n&&c.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),d.then(f=>{l&&f.addEventListener("close",()=>l()),a&&f.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const bM=["get","getKey","getAll","getAllKeys","count"],EM=["put","add","delete","clear"],Vp=new Map;function jw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vp.get(e))return Vp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=EM.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||bM.includes(n)))return;const l=async function(c,...d){const f=this.transaction(c,a?"readwrite":"readonly");let m=f.store;return i&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),a&&f.done]))[0]};return Vp.set(e,l),l}pM(t=>({...t,get:(e,n,i)=>jw(e,n)||t.get(e,n,i),has:(e,n)=>!!jw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xM(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function xM(t){const e=t.getComponent();return e?.type==="VERSION"}const h0="@firebase/app",Hw="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new ly("@firebase/app"),TM="@firebase/app-compat",SM="@firebase/analytics-compat",AM="@firebase/analytics",RM="@firebase/app-check-compat",NM="@firebase/app-check",CM="@firebase/auth",IM="@firebase/auth-compat",kM="@firebase/database",DM="@firebase/data-connect",OM="@firebase/database-compat",MM="@firebase/functions",PM="@firebase/functions-compat",VM="@firebase/installations",LM="@firebase/installations-compat",zM="@firebase/messaging",UM="@firebase/messaging-compat",BM="@firebase/performance",jM="@firebase/performance-compat",HM="@firebase/remote-config",$M="@firebase/remote-config-compat",qM="@firebase/storage",FM="@firebase/storage-compat",GM="@firebase/firestore",YM="@firebase/ai",XM="@firebase/firestore-compat",KM="firebase",QM="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="[DEFAULT]",WM={[h0]:"fire-core",[TM]:"fire-core-compat",[AM]:"fire-analytics",[SM]:"fire-analytics-compat",[NM]:"fire-app-check",[RM]:"fire-app-check-compat",[CM]:"fire-auth",[IM]:"fire-auth-compat",[kM]:"fire-rtdb",[DM]:"fire-data-connect",[OM]:"fire-rtdb-compat",[MM]:"fire-fn",[PM]:"fire-fn-compat",[VM]:"fire-iid",[LM]:"fire-iid-compat",[zM]:"fire-fcm",[UM]:"fire-fcm-compat",[BM]:"fire-perf",[jM]:"fire-perf-compat",[HM]:"fire-rc",[$M]:"fire-rc-compat",[qM]:"fire-gcs",[FM]:"fire-gcs-compat",[GM]:"fire-fst",[XM]:"fire-fst-compat",[YM]:"fire-vertex","fire-js":"fire-js",[KM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=new Map,ZM=new Map,g0=new Map;function $w(t,e){try{t.container.addComponent(e)}catch(n){ns.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ja(t){const e=t.name;if(g0.has(e))return ns.debug(`There were multiple attempts to register component ${e}.`),!1;g0.set(e,t);for(const n of hf.values())$w(n,t);for(const n of ZM.values())$w(n,t);return!0}function qf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ir(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ys=new $u("app","Firebase",JM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=QM;function kS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:f0,automaticDataCollectionEnabled:!0},e),a=i.name;if(typeof a!="string"||!a)throw Ys.create("bad-app-name",{appName:String(a)});if(n||(n=RS()),!n)throw Ys.create("no-options");const l=hf.get(a);if(l){if(Za(n,l.options)&&Za(i,l.config))return l;throw Ys.create("duplicate-app",{appName:a})}const c=new aM(a);for(const f of g0.values())c.addComponent(f);const d=new e5(n,i,c);return hf.set(a,d),d}function uy(t=f0){const e=hf.get(t);if(!e&&t===f0&&RS())return kS();if(!e)throw Ys.create("no-app",{appName:t});return e}function pi(t,e,n){var i;let a=(i=WM[t])!==null&&i!==void 0?i:t;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ns.warn(d.join(" "));return}Ja(new Zs(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5="firebase-heartbeat-database",n5=1,Cu="firebase-heartbeat-store";let Lp=null;function DS(){return Lp||(Lp=_M(t5,n5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ys.create("idb-open",{originalErrorMessage:t.message})})),Lp}async function r5(t){try{const n=(await DS()).transaction(Cu),i=await n.objectStore(Cu).get(OS(t));return await n.done,i}catch(e){if(e instanceof xi)ns.warn(e.message);else{const n=Ys.create("idb-get",{originalErrorMessage:e?.message});ns.warn(n.message)}}}async function qw(t,e){try{const i=(await DS()).transaction(Cu,"readwrite");await i.objectStore(Cu).put(e,OS(t)),await i.done}catch(n){if(n instanceof xi)ns.warn(n.message);else{const i=Ys.create("idb-set",{originalErrorMessage:n?.message});ns.warn(i.message)}}}function OS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5=1024,s5=30;class a5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new l5(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Fw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>s5){const c=c5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ns.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fw(),{heartbeatsToSend:i,unsentEntries:a}=o5(this._heartbeatsCache.heartbeats),l=df(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return ns.warn(n),""}}}function Fw(){return new Date().toISOString().substring(0,10)}function o5(t,e=i5){const n=[];let i=t.slice();for(const a of t){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Gw(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Gw(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class l5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return X3()?K3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await r5(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return qw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return qw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Gw(t){return df(JSON.stringify({version:2,heartbeats:t})).length}function c5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(t){Ja(new Zs("platform-logger",e=>new wM(e),"PRIVATE")),Ja(new Zs("heartbeat",e=>new a5(e),"PRIVATE")),pi(h0,Hw,t),pi(h0,Hw,"esm2017"),pi("fire-js","")}u5("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5="type.googleapis.com/google.protobuf.Int64Value",h5="type.googleapis.com/google.protobuf.UInt64Value";function MS(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function ff(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>ff(e));if(typeof t=="function"||typeof t=="object")return MS(t,e=>ff(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Il(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case d5:case h5:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Il(e)):typeof t=="function"||typeof t=="object"?MS(t,e=>Il(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $n extends xi{constructor(e,n,i){super(`${dy}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,$n.prototype)}}function f5(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function gf(t,e){let n=f5(t),i=n,a;try{const l=e&&e.error;if(l){const c=l.status;if(typeof c=="string"){if(!Yw[c])return new $n("internal","internal");n=Yw[c],i=c}const d=l.message;typeof d=="string"&&(i=d),a=l.details,a!==void 0&&(a=Il(a))}}catch{}return n==="ok"?null:new $n(n,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e,n,i,a){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ir(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||a?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="us-central1",m5=/^data: (.*?)(?:\n|$)/;function p5(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new $n("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class y5{constructor(e,n,i,a,l=m0,c=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new g5(e,n,i,a),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(l);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=m0}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function v5(t,e,n){const i=so(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(ay(t.emulatorOrigin),oy("Functions",!0))}function _5(t,e,n){const i=a=>E5(t,e,a,{});return i.stream=(a,l)=>x5(t,e,a,l),i}async function b5(t,e,n,i){n["Content-Type"]="application/json";let a;try{a=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let l=null;try{l=await a.json()}catch{}return{status:a.status,json:l}}async function PS(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function E5(t,e,n,i){const a=t._url(e);return w5(t,a,n,i)}async function w5(t,e,n,i){n=ff(n);const a={data:n},l=await PS(t,i),c=i.timeout||7e4,d=p5(c),f=await Promise.race([b5(e,a,l,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!f)throw new $n("cancelled","Firebase Functions instance was deleted.");const m=gf(f.status,f.json);if(m)throw m;if(!f.json)throw new $n("internal","Response is not valid JSON object.");let y=f.json.data;if(typeof y>"u"&&(y=f.json.result),typeof y>"u")throw new $n("internal","Response is missing data field.");return{data:Il(y)}}function x5(t,e,n,i){const a=t._url(e);return T5(t,a,n,i||{})}async function T5(t,e,n,i){var a;n=ff(n);const l={data:n},c=await PS(t,i);c["Content-Type"]="application/json",c.Accept="text/event-stream";let d;try{d=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:c,signal:i?.signal})}catch(x){if(x instanceof Error&&x.name==="AbortError"){const k=new $n("cancelled","Request was cancelled.");return{data:Promise.reject(k),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(k)}}}}}}const O=gf(0,null);return{data:Promise.reject(O),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(O)}}}}}}let f,m;const y=new Promise((x,O)=>{f=x,m=O});(a=i?.signal)===null||a===void 0||a.addEventListener("abort",()=>{const x=new $n("cancelled","Request was cancelled.");m(x)});const v=d.body.getReader(),b=S5(v,f,m,i?.signal);return{stream:{[Symbol.asyncIterator](){const x=b.getReader();return{async next(){const{value:O,done:k}=await x.read();return{value:O,done:k}},async return(){return await x.cancel(),{done:!0,value:void 0}}}}},data:y}}function S5(t,e,n,i){const a=(c,d)=>{const f=c.match(m5);if(!f)return;const m=f[1];try{const y=JSON.parse(m);if("result"in y){e(Il(y.result));return}if("message"in y){d.enqueue(Il(y.message));return}if("error"in y){const v=gf(0,y);d.error(v),n(v);return}}catch(y){if(y instanceof $n){d.error(y),n(y);return}}},l=new TextDecoder;return new ReadableStream({start(c){let d="";return f();async function f(){if(i?.aborted){const m=new $n("cancelled","Request was cancelled");return c.error(m),n(m),Promise.resolve()}try{const{value:m,done:y}=await t.read();if(y){d.trim()&&a(d.trim(),c),c.close();return}if(i?.aborted){const b=new $n("cancelled","Request was cancelled");c.error(b),n(b),await t.cancel();return}d+=l.decode(m,{stream:!0});const v=d.split(`
`);d=v.pop()||"";for(const b of v)b.trim()&&a(b.trim(),c);return f()}catch(m){const y=m instanceof $n?m:gf(0,null);c.error(y),n(y)}}},cancel(){return t.cancel()}})}const Xw="@firebase/functions",Kw="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5="auth-internal",R5="app-check-internal",N5="messaging-internal";function C5(t){const e=(n,{instanceIdentifier:i})=>{const a=n.getProvider("app").getImmediate(),l=n.getProvider(A5),c=n.getProvider(N5),d=n.getProvider(R5);return new y5(a,l,c,d,i)};Ja(new Zs(dy,e,"PUBLIC").setMultipleInstances(!0)),pi(Xw,Kw,t),pi(Xw,Kw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t=uy(),e=m0){const i=qf(Dt(t),dy).getImmediate({identifier:e}),a=AS("functions");return a&&VS(i,...a),i}function VS(t,e,n){v5(Dt(t),e,n)}function LS(t,e,n){return _5(Dt(t),e)}C5();var k5="firebase",D5="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(k5,D5,"app");var Qw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xs,zS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function C(){}C.prototype=A.prototype,N.D=A.prototype,N.prototype=new C,N.prototype.constructor=N,N.C=function(z,U,H){for(var I=Array(arguments.length-2),P=2;P<arguments.length;P++)I[P-2]=arguments[P];return A.prototype[U].apply(z,I)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,A,C){C||(C=0);var z=Array(16);if(typeof A=="string")for(var U=0;16>U;++U)z[U]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(U=0;16>U;++U)z[U]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=N.g[0],C=N.g[1],U=N.g[2];var H=N.g[3],I=A+(H^C&(U^H))+z[0]+3614090360&4294967295;A=C+(I<<7&4294967295|I>>>25),I=H+(U^A&(C^U))+z[1]+3905402710&4294967295,H=A+(I<<12&4294967295|I>>>20),I=U+(C^H&(A^C))+z[2]+606105819&4294967295,U=H+(I<<17&4294967295|I>>>15),I=C+(A^U&(H^A))+z[3]+3250441966&4294967295,C=U+(I<<22&4294967295|I>>>10),I=A+(H^C&(U^H))+z[4]+4118548399&4294967295,A=C+(I<<7&4294967295|I>>>25),I=H+(U^A&(C^U))+z[5]+1200080426&4294967295,H=A+(I<<12&4294967295|I>>>20),I=U+(C^H&(A^C))+z[6]+2821735955&4294967295,U=H+(I<<17&4294967295|I>>>15),I=C+(A^U&(H^A))+z[7]+4249261313&4294967295,C=U+(I<<22&4294967295|I>>>10),I=A+(H^C&(U^H))+z[8]+1770035416&4294967295,A=C+(I<<7&4294967295|I>>>25),I=H+(U^A&(C^U))+z[9]+2336552879&4294967295,H=A+(I<<12&4294967295|I>>>20),I=U+(C^H&(A^C))+z[10]+4294925233&4294967295,U=H+(I<<17&4294967295|I>>>15),I=C+(A^U&(H^A))+z[11]+2304563134&4294967295,C=U+(I<<22&4294967295|I>>>10),I=A+(H^C&(U^H))+z[12]+1804603682&4294967295,A=C+(I<<7&4294967295|I>>>25),I=H+(U^A&(C^U))+z[13]+4254626195&4294967295,H=A+(I<<12&4294967295|I>>>20),I=U+(C^H&(A^C))+z[14]+2792965006&4294967295,U=H+(I<<17&4294967295|I>>>15),I=C+(A^U&(H^A))+z[15]+1236535329&4294967295,C=U+(I<<22&4294967295|I>>>10),I=A+(U^H&(C^U))+z[1]+4129170786&4294967295,A=C+(I<<5&4294967295|I>>>27),I=H+(C^U&(A^C))+z[6]+3225465664&4294967295,H=A+(I<<9&4294967295|I>>>23),I=U+(A^C&(H^A))+z[11]+643717713&4294967295,U=H+(I<<14&4294967295|I>>>18),I=C+(H^A&(U^H))+z[0]+3921069994&4294967295,C=U+(I<<20&4294967295|I>>>12),I=A+(U^H&(C^U))+z[5]+3593408605&4294967295,A=C+(I<<5&4294967295|I>>>27),I=H+(C^U&(A^C))+z[10]+38016083&4294967295,H=A+(I<<9&4294967295|I>>>23),I=U+(A^C&(H^A))+z[15]+3634488961&4294967295,U=H+(I<<14&4294967295|I>>>18),I=C+(H^A&(U^H))+z[4]+3889429448&4294967295,C=U+(I<<20&4294967295|I>>>12),I=A+(U^H&(C^U))+z[9]+568446438&4294967295,A=C+(I<<5&4294967295|I>>>27),I=H+(C^U&(A^C))+z[14]+3275163606&4294967295,H=A+(I<<9&4294967295|I>>>23),I=U+(A^C&(H^A))+z[3]+4107603335&4294967295,U=H+(I<<14&4294967295|I>>>18),I=C+(H^A&(U^H))+z[8]+1163531501&4294967295,C=U+(I<<20&4294967295|I>>>12),I=A+(U^H&(C^U))+z[13]+2850285829&4294967295,A=C+(I<<5&4294967295|I>>>27),I=H+(C^U&(A^C))+z[2]+4243563512&4294967295,H=A+(I<<9&4294967295|I>>>23),I=U+(A^C&(H^A))+z[7]+1735328473&4294967295,U=H+(I<<14&4294967295|I>>>18),I=C+(H^A&(U^H))+z[12]+2368359562&4294967295,C=U+(I<<20&4294967295|I>>>12),I=A+(C^U^H)+z[5]+4294588738&4294967295,A=C+(I<<4&4294967295|I>>>28),I=H+(A^C^U)+z[8]+2272392833&4294967295,H=A+(I<<11&4294967295|I>>>21),I=U+(H^A^C)+z[11]+1839030562&4294967295,U=H+(I<<16&4294967295|I>>>16),I=C+(U^H^A)+z[14]+4259657740&4294967295,C=U+(I<<23&4294967295|I>>>9),I=A+(C^U^H)+z[1]+2763975236&4294967295,A=C+(I<<4&4294967295|I>>>28),I=H+(A^C^U)+z[4]+1272893353&4294967295,H=A+(I<<11&4294967295|I>>>21),I=U+(H^A^C)+z[7]+4139469664&4294967295,U=H+(I<<16&4294967295|I>>>16),I=C+(U^H^A)+z[10]+3200236656&4294967295,C=U+(I<<23&4294967295|I>>>9),I=A+(C^U^H)+z[13]+681279174&4294967295,A=C+(I<<4&4294967295|I>>>28),I=H+(A^C^U)+z[0]+3936430074&4294967295,H=A+(I<<11&4294967295|I>>>21),I=U+(H^A^C)+z[3]+3572445317&4294967295,U=H+(I<<16&4294967295|I>>>16),I=C+(U^H^A)+z[6]+76029189&4294967295,C=U+(I<<23&4294967295|I>>>9),I=A+(C^U^H)+z[9]+3654602809&4294967295,A=C+(I<<4&4294967295|I>>>28),I=H+(A^C^U)+z[12]+3873151461&4294967295,H=A+(I<<11&4294967295|I>>>21),I=U+(H^A^C)+z[15]+530742520&4294967295,U=H+(I<<16&4294967295|I>>>16),I=C+(U^H^A)+z[2]+3299628645&4294967295,C=U+(I<<23&4294967295|I>>>9),I=A+(U^(C|~H))+z[0]+4096336452&4294967295,A=C+(I<<6&4294967295|I>>>26),I=H+(C^(A|~U))+z[7]+1126891415&4294967295,H=A+(I<<10&4294967295|I>>>22),I=U+(A^(H|~C))+z[14]+2878612391&4294967295,U=H+(I<<15&4294967295|I>>>17),I=C+(H^(U|~A))+z[5]+4237533241&4294967295,C=U+(I<<21&4294967295|I>>>11),I=A+(U^(C|~H))+z[12]+1700485571&4294967295,A=C+(I<<6&4294967295|I>>>26),I=H+(C^(A|~U))+z[3]+2399980690&4294967295,H=A+(I<<10&4294967295|I>>>22),I=U+(A^(H|~C))+z[10]+4293915773&4294967295,U=H+(I<<15&4294967295|I>>>17),I=C+(H^(U|~A))+z[1]+2240044497&4294967295,C=U+(I<<21&4294967295|I>>>11),I=A+(U^(C|~H))+z[8]+1873313359&4294967295,A=C+(I<<6&4294967295|I>>>26),I=H+(C^(A|~U))+z[15]+4264355552&4294967295,H=A+(I<<10&4294967295|I>>>22),I=U+(A^(H|~C))+z[6]+2734768916&4294967295,U=H+(I<<15&4294967295|I>>>17),I=C+(H^(U|~A))+z[13]+1309151649&4294967295,C=U+(I<<21&4294967295|I>>>11),I=A+(U^(C|~H))+z[4]+4149444226&4294967295,A=C+(I<<6&4294967295|I>>>26),I=H+(C^(A|~U))+z[11]+3174756917&4294967295,H=A+(I<<10&4294967295|I>>>22),I=U+(A^(H|~C))+z[2]+718787259&4294967295,U=H+(I<<15&4294967295|I>>>17),I=C+(H^(U|~A))+z[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(U+(I<<21&4294967295|I>>>11))&4294967295,N.g[2]=N.g[2]+U&4294967295,N.g[3]=N.g[3]+H&4294967295}i.prototype.u=function(N,A){A===void 0&&(A=N.length);for(var C=A-this.blockSize,z=this.B,U=this.h,H=0;H<A;){if(U==0)for(;H<=C;)a(this,N,H),H+=this.blockSize;if(typeof N=="string"){for(;H<A;)if(z[U++]=N.charCodeAt(H++),U==this.blockSize){a(this,z),U=0;break}}else for(;H<A;)if(z[U++]=N[H++],U==this.blockSize){a(this,z),U=0;break}}this.h=U,this.o+=A},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;var C=8*this.o;for(A=N.length-8;A<N.length;++A)N[A]=C&255,C/=256;for(this.u(N),N=Array(16),A=C=0;4>A;++A)for(var z=0;32>z;z+=8)N[C++]=this.g[A]>>>z&255;return N};function l(N,A){var C=d;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=A(N)}function c(N,A){this.h=A;for(var C=[],z=!0,U=N.length-1;0<=U;U--){var H=N[U]|0;z&&H==A||(C[U]=H,z=!1)}this.g=C}var d={};function f(N){return-128<=N&&128>N?l(N,function(A){return new c([A|0],0>A?-1:0)}):new c([N|0],0>N?-1:0)}function m(N){if(isNaN(N)||!isFinite(N))return v;if(0>N)return M(m(-N));for(var A=[],C=1,z=0;N>=C;z++)A[z]=N/C|0,C*=4294967296;return new c(A,0)}function y(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return M(y(N.substring(1),A));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=m(Math.pow(A,8)),z=v,U=0;U<N.length;U+=8){var H=Math.min(8,N.length-U),I=parseInt(N.substring(U,U+H),A);8>H?(H=m(Math.pow(A,H)),z=z.j(H).add(m(I))):(z=z.j(C),z=z.add(m(I)))}return z}var v=f(0),b=f(1),x=f(16777216);t=c.prototype,t.m=function(){if(k(this))return-M(this).m();for(var N=0,A=1,C=0;C<this.g.length;C++){var z=this.i(C);N+=(0<=z?z:4294967296+z)*A,A*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(O(this))return"0";if(k(this))return"-"+M(this).toString(N);for(var A=m(Math.pow(N,6)),C=this,z="";;){var U=j(C,A).g;C=V(C,U.j(A));var H=((0<C.g.length?C.g[0]:C.h)>>>0).toString(N);if(C=U,O(C))return H+z;for(;6>H.length;)H="0"+H;z=H+z}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function O(N){if(N.h!=0)return!1;for(var A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function k(N){return N.h==-1}t.l=function(N){return N=V(this,N),k(N)?-1:O(N)?0:1};function M(N){for(var A=N.g.length,C=[],z=0;z<A;z++)C[z]=~N.g[z];return new c(C,~N.h).add(b)}t.abs=function(){return k(this)?M(this):this},t.add=function(N){for(var A=Math.max(this.g.length,N.g.length),C=[],z=0,U=0;U<=A;U++){var H=z+(this.i(U)&65535)+(N.i(U)&65535),I=(H>>>16)+(this.i(U)>>>16)+(N.i(U)>>>16);z=I>>>16,H&=65535,I&=65535,C[U]=I<<16|H}return new c(C,C[C.length-1]&-2147483648?-1:0)};function V(N,A){return N.add(M(A))}t.j=function(N){if(O(this)||O(N))return v;if(k(this))return k(N)?M(this).j(M(N)):M(M(this).j(N));if(k(N))return M(this.j(M(N)));if(0>this.l(x)&&0>N.l(x))return m(this.m()*N.m());for(var A=this.g.length+N.g.length,C=[],z=0;z<2*A;z++)C[z]=0;for(z=0;z<this.g.length;z++)for(var U=0;U<N.g.length;U++){var H=this.i(z)>>>16,I=this.i(z)&65535,P=N.i(U)>>>16,$=N.i(U)&65535;C[2*z+2*U]+=I*$,q(C,2*z+2*U),C[2*z+2*U+1]+=H*$,q(C,2*z+2*U+1),C[2*z+2*U+1]+=I*P,q(C,2*z+2*U+1),C[2*z+2*U+2]+=H*P,q(C,2*z+2*U+2)}for(z=0;z<A;z++)C[z]=C[2*z+1]<<16|C[2*z];for(z=A;z<2*A;z++)C[z]=0;return new c(C,0)};function q(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function F(N,A){this.g=N,this.h=A}function j(N,A){if(O(A))throw Error("division by zero");if(O(N))return new F(v,v);if(k(N))return A=j(M(N),A),new F(M(A.g),M(A.h));if(k(A))return A=j(N,M(A)),new F(M(A.g),A.h);if(30<N.g.length){if(k(N)||k(A))throw Error("slowDivide_ only works with positive integers.");for(var C=b,z=A;0>=z.l(N);)C=ee(C),z=ee(z);var U=Z(C,1),H=Z(z,1);for(z=Z(z,2),C=Z(C,2);!O(z);){var I=H.add(z);0>=I.l(N)&&(U=U.add(C),H=I),z=Z(z,1),C=Z(C,1)}return A=V(N,U.j(A)),new F(U,A)}for(U=v;0<=N.l(A);){for(C=Math.max(1,Math.floor(N.m()/A.m())),z=Math.ceil(Math.log(C)/Math.LN2),z=48>=z?1:Math.pow(2,z-48),H=m(C),I=H.j(A);k(I)||0<I.l(N);)C-=z,H=m(C),I=H.j(A);O(H)&&(H=b),U=U.add(H),N=V(N,I)}return new F(U,N)}t.A=function(N){return j(this,N).h},t.and=function(N){for(var A=Math.max(this.g.length,N.g.length),C=[],z=0;z<A;z++)C[z]=this.i(z)&N.i(z);return new c(C,this.h&N.h)},t.or=function(N){for(var A=Math.max(this.g.length,N.g.length),C=[],z=0;z<A;z++)C[z]=this.i(z)|N.i(z);return new c(C,this.h|N.h)},t.xor=function(N){for(var A=Math.max(this.g.length,N.g.length),C=[],z=0;z<A;z++)C[z]=this.i(z)^N.i(z);return new c(C,this.h^N.h)};function ee(N){for(var A=N.g.length+1,C=[],z=0;z<A;z++)C[z]=N.i(z)<<1|N.i(z-1)>>>31;return new c(C,N.h)}function Z(N,A){var C=A>>5;A%=32;for(var z=N.g.length-C,U=[],H=0;H<z;H++)U[H]=0<A?N.i(H+C)>>>A|N.i(H+C+1)<<32-A:N.i(H+C);return new c(U,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,zS=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=y,Xs=c}).apply(typeof Qw<"u"?Qw:typeof self<"u"?self:typeof window<"u"?window:{});var Ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var US,cu,BS,$h,p0,jS,HS,$S;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ih=="object"&&Ih];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=n(this);function a(h,_){if(_)e:{var E=i;h=h.split(".");for(var L=0;L<h.length-1;L++){var ie=h[L];if(!(ie in E))break e;E=E[ie]}h=h[h.length-1],L=E[h],_=_(L),_!=L&&_!=null&&e(E,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var E=0,L=!1,ie={next:function(){if(!L&&E<h.length){var ue=E++;return{value:_(ue,h[ue]),done:!1}}return L=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function m(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,E){return h.call.apply(h.bind,arguments)}function v(h,_,E){if(!h)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,L),h.apply(_,ie)}}return function(){return h.apply(_,arguments)}}function b(h,_,E){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,b.apply(null,arguments)}function x(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var L=E.slice();return L.push.apply(L,arguments),h.apply(this,L)}}function O(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(L,ie,ue){for(var be=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)be[Ze-2]=arguments[Ze];return _.prototype[ie].apply(L,be)}}function k(h){const _=h.length;if(0<_){const E=Array(_);for(let L=0;L<_;L++)E[L]=h[L];return E}return[]}function M(h,_){for(let E=1;E<arguments.length;E++){const L=arguments[E];if(f(L)){const ie=h.length||0,ue=L.length||0;h.length=ie+ue;for(let be=0;be<ue;be++)h[ie+be]=L[be]}else h.push(L)}}class V{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function q(h){return/^[\s\xa0]*$/.test(h)}function F(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function j(h){return j[" "](h),h}j[" "]=function(){};var ee=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function Z(h,_,E){for(const L in h)_.call(E,h[L],L,h)}function N(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function A(h){const _={};for(const E in h)_[E]=h[E];return _}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(h,_){let E,L;for(let ie=1;ie<arguments.length;ie++){L=arguments[ie];for(E in L)h[E]=L[E];for(let ue=0;ue<C.length;ue++)E=C[ue],Object.prototype.hasOwnProperty.call(L,E)&&(h[E]=L[E])}}function U(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function H(h){d.setTimeout(()=>{throw h},0)}function I(){var h=Y;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class P{constructor(){this.h=this.g=null}add(_,E){const L=$.get();L.set(_,E),this.h?this.h.next=L:this.g=L,this.h=L}}var $=new V(()=>new R,h=>h.reset());class R{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let W,G=!1,Y=new P,S=()=>{const h=d.Promise.resolve(void 0);W=()=>{h.then(Q)}};var Q=()=>{for(var h;h=I();){try{h.h.call(h.g)}catch(E){H(E)}var _=$;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}G=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,_),d.removeEventListener("test",E,_)}catch{}return h}();function le(h,_){if(K.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,L=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(ee){e:{try{j(_.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(_=null)}}else E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement);this.relatedTarget=_,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:de[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&le.aa.h.call(this)}}O(le,K);var de={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ge="closure_listenable_"+(1e6*Math.random()|0),_e=0;function Ae(h,_,E,L,ie){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!L,this.ha=ie,this.key=++_e,this.da=this.fa=!1}function Ne(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function nt(h){this.src=h,this.g={},this.h=0}nt.prototype.add=function(h,_,E,L,ie){var ue=h.toString();h=this.g[ue],h||(h=this.g[ue]=[],this.h++);var be=ke(h,_,L,ie);return-1<be?(_=h[be],E||(_.fa=!1)):(_=new Ae(_,this.src,ue,!!L,ie),_.fa=E,h.push(_)),_};function Ge(h,_){var E=_.type;if(E in h.g){var L=h.g[E],ie=Array.prototype.indexOf.call(L,_,void 0),ue;(ue=0<=ie)&&Array.prototype.splice.call(L,ie,1),ue&&(Ne(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function ke(h,_,E,L){for(var ie=0;ie<h.length;++ie){var ue=h[ie];if(!ue.da&&ue.listener==_&&ue.capture==!!E&&ue.ha==L)return ie}return-1}var Ve="closure_lm_"+(1e6*Math.random()|0),it={};function Lt(h,_,E,L,ie){if(Array.isArray(_)){for(var ue=0;ue<_.length;ue++)Lt(h,_[ue],E,L,ie);return null}return E=Cr(E),h&&h[ge]?h.K(_,E,m(L)?!!L.capture:!1,ie):Ue(h,_,E,!1,L,ie)}function Ue(h,_,E,L,ie,ue){if(!_)throw Error("Invalid event type");var be=m(ie)?!!ie.capture:!!ie,Ze=Rn(h);if(Ze||(h[Ve]=Ze=new nt(h)),E=Ze.add(_,E,L,be,ue),E.proxy)return E;if(L=Ee(),E.proxy=L,L.src=h,L.listener=E,h.addEventListener)te||(ie=be),ie===void 0&&(ie=!1),h.addEventListener(_.toString(),L,ie);else if(h.attachEvent)h.attachEvent(Gt(_.toString()),L);else if(h.addListener&&h.removeListener)h.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ee(){function h(E){return _.call(h.src,h.listener,E)}const _=qn;return h}function At(h,_,E,L,ie){if(Array.isArray(_))for(var ue=0;ue<_.length;ue++)At(h,_[ue],E,L,ie);else L=m(L)?!!L.capture:!!L,E=Cr(E),h&&h[ge]?(h=h.i,_=String(_).toString(),_ in h.g&&(ue=h.g[_],E=ke(ue,E,L,ie),-1<E&&(Ne(ue[E]),Array.prototype.splice.call(ue,E,1),ue.length==0&&(delete h.g[_],h.h--)))):h&&(h=Rn(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ke(_,E,L,ie)),(E=-1<h?_[h]:null)&&vn(E))}function vn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[ge])Ge(_.i,h);else{var E=h.type,L=h.proxy;_.removeEventListener?_.removeEventListener(E,L,h.capture):_.detachEvent?_.detachEvent(Gt(E),L):_.addListener&&_.removeListener&&_.removeListener(L),(E=Rn(_))?(Ge(E,h),E.h==0&&(E.src=null,_[Ve]=null)):Ne(h)}}}function Gt(h){return h in it?it[h]:it[h]="on"+h}function qn(h,_){if(h.da)h=!0;else{_=new le(_,this);var E=h.listener,L=h.ha||h.src;h.fa&&vn(h),h=E.call(L,_)}return h}function Rn(h){return h=h[Ve],h instanceof nt?h:null}var Nn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cr(h){return typeof h=="function"?h:(h[Nn]||(h[Nn]=function(_){return h.handleEvent(_)}),h[Nn])}function at(){ne.call(this),this.i=new nt(this),this.M=this,this.F=null}O(at,ne),at.prototype[ge]=!0,at.prototype.removeEventListener=function(h,_,E,L){At(this,h,_,E,L)};function Ye(h,_){var E,L=h.F;if(L)for(E=[];L;L=L.F)E.push(L);if(h=h.M,L=_.type||_,typeof _=="string")_=new K(_,h);else if(_ instanceof K)_.target=_.target||h;else{var ie=_;_=new K(L,h),z(_,ie)}if(ie=!0,E)for(var ue=E.length-1;0<=ue;ue--){var be=_.g=E[ue];ie=zt(be,L,!0,_)&&ie}if(be=_.g=h,ie=zt(be,L,!0,_)&&ie,ie=zt(be,L,!1,_)&&ie,E)for(ue=0;ue<E.length;ue++)be=_.g=E[ue],ie=zt(be,L,!1,_)&&ie}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var E=h.g[_],L=0;L<E.length;L++)Ne(E[L]);delete h.g[_],h.h--}}this.F=null},at.prototype.K=function(h,_,E,L){return this.i.add(String(h),_,!1,E,L)},at.prototype.L=function(h,_,E,L){return this.i.add(String(h),_,!0,E,L)};function zt(h,_,E,L){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var ie=!0,ue=0;ue<_.length;++ue){var be=_[ue];if(be&&!be.da&&be.capture==E){var Ze=be.listener,Xt=be.ha||be.src;be.fa&&Ge(h.i,be),ie=Ze.call(Xt,L)!==!1&&ie}}return ie&&!L.defaultPrevented}function Et(h,_,E){if(typeof h=="function")E&&(h=b(h,E));else if(h&&typeof h.handleEvent=="function")h=b(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Gr(h){h.g=Et(()=>{h.g=null,h.i&&(h.i=!1,Gr(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Ut extends ne{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Gr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jt(h){ne.call(this),this.h=h,this.g={}}O(Jt,ne);var Cn=[];function In(h){Z(h.g,function(_,E){this.g.hasOwnProperty(E)&&vn(_)},h),h.g={}}Jt.prototype.N=function(){Jt.aa.N.call(this),In(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var en=d.JSON.stringify,cn=d.JSON.parse,kn=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Ti(){}Ti.prototype.h=null;function Si(h){return h.h||(h.h=h.i())}function Ir(){}var Fn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ur(){K.call(this,"d")}O(ur,K);function Gn(){K.call(this,"c")}O(Gn,K);var dr={},ca=null;function Yr(){return ca=ca||new at}dr.La="serverreachability";function as(h){K.call(this,dr.La,h)}O(as,K);function Xr(h){const _=Yr();Ye(_,new as(_))}dr.STAT_EVENT="statevent";function uo(h,_){K.call(this,dr.STAT_EVENT,h),this.stat=_}O(uo,K);function pt(h){const _=Yr();Ye(_,new uo(_,h))}dr.Ma="timingevent";function Ot(h,_){K.call(this,dr.Ma,h),this.size=_}O(Ot,K);function Rt(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function Vn(){this.g=!0}Vn.prototype.xa=function(){this.g=!1};function ua(h,_,E,L,ie,ue){h.info(function(){if(h.g)if(ue)for(var be="",Ze=ue.split("&"),Xt=0;Xt<Ze.length;Xt++){var Je=Ze[Xt].split("=");if(1<Je.length){var nn=Je[0];Je=Je[1];var Kt=nn.split("_");be=2<=Kt.length&&Kt[1]=="type"?be+(nn+"="+Je+"&"):be+(nn+"=redacted&")}}else be=null;else be=ue;return"XMLHTTP REQ ("+L+") [attempt "+ie+"]: "+_+`
`+E+`
`+be})}function Gl(h,_,E,L,ie,ue,be){h.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+ie+"]: "+_+`
`+E+`
`+ue+" "+be})}function Kr(h,_,E,L){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ai(h,E)+(L?" "+L:"")})}function ho(h,_){h.info(function(){return"TIMEOUT: "+_})}Vn.prototype.info=function(){};function Ai(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var L=E[h];if(!(2>L.length)){var ie=L[1];if(Array.isArray(ie)&&!(1>ie.length)){var ue=ie[0];if(ue!="noop"&&ue!="stop"&&ue!="close")for(var be=1;be<ie.length;be++)ie[be]=""}}}}return en(E)}catch{return _}}var Qr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fr;function gr(){}O(gr,Ti),gr.prototype.g=function(){return new XMLHttpRequest},gr.prototype.i=function(){return{}},fr=new gr;function un(h,_,E,L){this.j=h,this.i=_,this.l=E,this.R=L||1,this.U=new Jt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wt}function wt(){this.i=null,this.g="",this.h=!1}var da={},os={};function Yn(h,_,E){h.L=1,h.v=ma(Xn(_)),h.m=E,h.P=!0,kr(h,null)}function kr(h,_){h.F=Date.now(),Ri(h),h.A=Xn(h.v);var E=h.A,L=h.R;Array.isArray(L)||(L=[String(L)]),Zl(E.i,"t",L),h.C=0,E=h.j.J,h.h=new wt,h.g=hd(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Ut(b(h.Y,h,h.g),h.O)),_=h.U,E=h.g,L=h.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(Cn[0]=ie.toString()),ie=Cn);for(var ue=0;ue<ie.length;ue++){var be=Lt(E,ie[ue],L||_.handleEvent,!1,_.h||_);if(!be)break;_.g[be.key]=be}_=h.H?A(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Xr(),ua(h.i,h.u,h.A,h.l,h.R,h.m)}un.prototype.ca=function(h){h=h.target;const _=this.M;_&&_r(h)==3?_.j():this.Y(h)},un.prototype.Y=function(h){try{if(h==this.g)e:{const Kt=_r(this.g);var _=this.g.Ba();const Mi=this.g.Z();if(!(3>Kt)&&(Kt!=3||this.g&&(this.h.h||this.g.oa()||id(this.g)))){this.J||Kt!=4||_==7||(_==8||0>=Mi?Xr(3):Xr(2)),Wr(this);var E=this.g.Z();this.X=E;t:if(ha(this)){var L=id(this.g);h="";var ie=L.length,ue=_r(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yt(this),mr(this);var be="";break t}this.h.i=new d.TextDecoder}for(_=0;_<ie;_++)this.h.h=!0,h+=this.h.i.decode(L[_],{stream:!(ue&&_==ie-1)});L.length=0,this.h.g+=h,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=E==200,Gl(this.i,this.u,this.A,this.l,this.R,Kt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,Xt=this.g;if((Ze=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Ze)){var Je=Ze;break t}}Je=null}if(E=Je)Kr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zr(this,E);else{this.o=!1,this.s=3,pt(12),Yt(this),mr(this);break e}}if(this.P){E=!0;let dn;for(;!this.J&&this.C<be.length;)if(dn=fo(this,be),dn==os){Kt==4&&(this.s=4,pt(14),E=!1),Kr(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==da){this.s=4,pt(15),Kr(this.i,this.l,be,"[Invalid Chunk]"),E=!1;break}else Kr(this.i,this.l,dn,null),Zr(this,dn);if(ha(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||be.length!=0||this.h.h||(this.s=1,pt(16),E=!1),this.o=this.o&&E,!E)Kr(this.i,this.l,be,"[Invalid Chunked Response]"),Yt(this),mr(this);else if(0<be.length&&!this.W){this.W=!0;var nn=this.j;nn.g==this&&nn.ba&&!nn.M&&(nn.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),xa(nn),nn.M=!0,pt(11))}}else Kr(this.i,this.l,be,null),Zr(this,be);Kt==4&&Yt(this),this.o&&!this.J&&(Kt==4?cd(this.j,this):(this.o=!1,Ri(this)))}else pg(this.g),E==400&&0<be.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Yt(this),mr(this)}}}catch{}finally{}};function ha(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function fo(h,_){var E=h.C,L=_.indexOf(`
`,E);return L==-1?os:(E=Number(_.substring(E,L)),isNaN(E)?da:(L+=1,L+E>_.length?os:(_=_.slice(L,L+E),h.C=L+E,_)))}un.prototype.cancel=function(){this.J=!0,Yt(this)};function Ri(h){h.S=Date.now()+h.I,go(h,h.I)}function go(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Rt(b(h.ba,h),_)}function Wr(h){h.B&&(d.clearTimeout(h.B),h.B=null)}un.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(ho(this.i,this.A),this.L!=2&&(Xr(),pt(17)),Yt(this),this.s=2,mr(this)):go(this,this.S-h)};function mr(h){h.j.G==0||h.J||cd(h.j,h)}function Yt(h){Wr(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,In(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Zr(h,_){try{var E=h.j;if(E.G!=0&&(E.g==h||Yl(E.h,h))){if(!h.K&&Yl(E.h,h)&&E.G==3){try{var L=E.Da.g.parse(_)}catch{L=null}if(Array.isArray(L)&&L.length==3){var ie=L;if(ie[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)So(E),xo(E);else break e;rc(E),pt(18)}}else E.za=ie[1],0<E.za-E.T&&37500>ie[2]&&E.F&&E.v==0&&!E.C&&(E.C=Rt(b(E.Za,E),6e3));if(1>=Jr(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Oi(E,11)}else if((h.K||E.g==h)&&So(E),!q(_))for(ie=E.Da.g.parse(_),_=0;_<ie.length;_++){let Je=ie[_];if(E.T=Je[0],Je=Je[1],E.G==2)if(Je[0]=="c"){E.K=Je[1],E.ia=Je[2];const nn=Je[3];nn!=null&&(E.la=nn,E.j.info("VER="+E.la));const Kt=Je[4];Kt!=null&&(E.Aa=Kt,E.j.info("SVER="+E.Aa));const Mi=Je[5];Mi!=null&&typeof Mi=="number"&&0<Mi&&(L=1.5*Mi,E.L=L,E.j.info("backChannelRequestTimeoutMs_="+L)),L=E;const dn=h.g;if(dn){const ai=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ai){var ue=L.h;ue.g||ai.indexOf("spdy")==-1&&ai.indexOf("quic")==-1&&ai.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(po(ue,ue.h),ue.h=null))}if(L.D){const sc=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;sc&&(L.ya=sc,dt(L.I,L.D,sc))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),L=E;var be=h;if(L.qa=dd(L,L.J?L.ia:null,L.W),be.K){Dn(L.h,be);var Ze=be,Xt=L.L;Xt&&(Ze.I=Xt),Ze.B&&(Wr(Ze),Ri(Ze)),L.g=be}else od(L);0<E.i.length&&To(E)}else Je[0]!="stop"&&Je[0]!="close"||Oi(E,7);else E.G==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Oi(E,7):tc(E):Je[0]!="noop"&&E.l&&E.l.ta(Je),E.v=0)}}Xr(4)}catch{}}var mo=class{constructor(h,_){this.g=h,this.map=_}};function Dr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ls(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Jr(h){return h.h?1:h.g?h.g.size:0}function Yl(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function po(h,_){h.g?h.g.add(_):h.h=_}function Dn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Dr.prototype.cancel=function(){if(this.i=Xl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Xl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return k(h.i)}function hg(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(f(h)){for(var _=[],E=h.length,L=0;L<E;L++)_.push(h[L]);return _}_=[],E=0;for(L in h)_[E++]=h[L];return _}function yo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(f(h)||typeof h=="string"){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const L in h)_[E++]=L;return _}}}function Kl(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(f(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var E=yo(h),L=hg(h),ie=L.length,ue=0;ue<ie;ue++)_.call(void 0,L[ue],E&&E[ue],h)}var fa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fg(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var L=h[E].indexOf("="),ie=null;if(0<=L){var ue=h[E].substring(0,L);ie=h[E].substring(L+1)}else ue=h[E];_(ue,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function Bt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Bt){this.h=h.h,ga(this,h.j),this.o=h.o,this.g=h.g,cs(this,h.s),this.l=h.l;var _=h.i,E=new Ci;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Ni(this,E),this.m=h.m}else h&&(_=String(h).match(fa))?(this.h=!1,ga(this,_[1]||"",!0),this.o=pr(_[2]||""),this.g=pr(_[3]||"",!0),cs(this,_[4]),this.l=pr(_[5]||"",!0),Ni(this,_[6]||"",!0),this.m=pr(_[7]||"")):(this.h=!1,this.i=new Ci(null,this.h))}Bt.prototype.toString=function(){var h=[],_=this.j;_&&h.push(pa(_,Ql,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(pa(_,Ql,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(pa(E,E.charAt(0)=="/"?gg:Wl,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",pa(E,vo)),h.join("")};function Xn(h){return new Bt(h)}function ga(h,_,E){h.j=E?pr(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function cs(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function Ni(h,_,E){_ instanceof Ci?(h.i=_,nd(h.i,h.h)):(E||(_=pa(_,mg)),h.i=new Ci(_,h.h))}function dt(h,_,E){h.i.set(_,E)}function ma(h){return dt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function pr(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function pa(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,td),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function td(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ql=/[#\/\?@]/g,Wl=/[#\?:]/g,gg=/[#\?]/g,mg=/[#\?@]/g,vo=/#/g;function Ci(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function yr(h){h.g||(h.g=new Map,h.h=0,h.i&&fg(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}t=Ci.prototype,t.add=function(h,_){yr(this),this.i=null,h=ei(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function Ii(h,_){yr(h),_=ei(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function ki(h,_){return yr(h),_=ei(h,_),h.g.has(_)}t.forEach=function(h,_){yr(this),this.g.forEach(function(E,L){E.forEach(function(ie){h.call(_,ie,L,this)},this)},this)},t.na=function(){yr(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let L=0;L<_.length;L++){const ie=h[L];for(let ue=0;ue<ie.length;ue++)E.push(_[L])}return E},t.V=function(h){yr(this);let _=[];if(typeof h=="string")ki(this,h)&&(_=_.concat(this.g.get(ei(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},t.set=function(h,_){return yr(this),this.i=null,h=ei(this,h),ki(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Zl(h,_,E){Ii(h,_),0<E.length&&(h.i=null,h.g.set(ei(h,_),k(E)),h.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var L=_[E];const ue=encodeURIComponent(String(L)),be=this.V(L);for(L=0;L<be.length;L++){var ie=ue;be[L]!==""&&(ie+="="+encodeURIComponent(String(be[L]))),h.push(ie)}}return this.i=h.join("&")};function ei(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function nd(h,_){_&&!h.j&&(yr(h),h.i=null,h.g.forEach(function(E,L){var ie=L.toLowerCase();L!=ie&&(Ii(this,L),Zl(this,ie,E))},h)),h.j=_}function ya(h,_){const E=new Vn;if(d.Image){const L=new Image;L.onload=x(vr,E,"TestLoadImage: loaded",!0,_,L),L.onerror=x(vr,E,"TestLoadImage: error",!1,_,L),L.onabort=x(vr,E,"TestLoadImage: abort",!1,_,L),L.ontimeout=x(vr,E,"TestLoadImage: timeout",!1,_,L),d.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=h}else _(!1)}function Or(h,_){const E=new Vn,L=new AbortController,ie=setTimeout(()=>{L.abort(),vr(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:L.signal}).then(ue=>{clearTimeout(ie),ue.ok?vr(E,"TestPingServer: ok",!0,_):vr(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(ie),vr(E,"TestPingServer: error",!1,_)})}function vr(h,_,E,L,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),L(E)}catch{}}function va(){this.g=new kn}function ti(h,_,E){const L=E||"";try{Kl(h,function(ie,ue){let be=ie;m(ie)&&(be=en(ie)),_.push(L+ue+"="+encodeURIComponent(be))})}catch(ie){throw _.push(L+"type="+encodeURIComponent("_badmap")),ie}}function us(h){this.l=h.Ub||null,this.j=h.eb||!1}O(us,Ti),us.prototype.g=function(){return new Di(this.l,this.j)},us.prototype.i=function(h){return function(){return h}}({});function Di(h,_){at.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Di,at),t=Di.prototype,t.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,ri(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ni(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?ni(this):ri(this),this.readyState==3&&Jl(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ni(this))},t.Qa=function(h){this.g&&(this.response=h,ni(this))},t.ga=function(){this.g&&ni(this)};function ni(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ri(h)}t.setRequestHeader=function(h,_){this.u.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function ri(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ec(h){let _="";return Z(h,function(E,L){_+=L,_+=":",_+=E,_+=`\r
`}),_}function tn(h,_,E){e:{for(L in E){var L=!1;break e}L=!0}L||(E=ec(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):dt(h,_,E))}function ot(h){at.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(ot,at);var _o=/^https?$/i,_a=["POST","PUT"];t=ot.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,_,E,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fr.g(),this.v=this.o?Si(this.o):Si(fr),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ue){rd(this,ue);return}if(h=E||"",E=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var ie in L)E.set(ie,L[ie]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const ue of L.keys())E.set(ue,L.get(ue));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(E.keys()).find(ue=>ue.toLowerCase()=="content-type"),ie=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(_a,_,void 0))||L||ie||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,be]of E)this.g.setRequestHeader(ue,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ba(this),this.u=!0,this.g.send(h),this.u=!1}catch(ue){rd(this,ue)}};function rd(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,bo(h),ii(h)}function bo(h){h.A||(h.A=!0,Ye(h,"complete"),Ye(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ye(this,"complete"),Ye(this,"abort"),ii(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ii(this,!0)),ot.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Eo(this):this.bb())},t.bb=function(){Eo(this)};function Eo(h){if(h.h&&typeof c<"u"&&(!h.v[1]||_r(h)!=4||h.Z()!=2)){if(h.u&&_r(h)==4)Et(h.Ea,0,h);else if(Ye(h,"readystatechange"),_r(h)==4){h.h=!1;try{const be=h.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var L;if(L=be===0){var ie=String(h.D).match(fa)[1]||null;!ie&&d.self&&d.self.location&&(ie=d.self.location.protocol.slice(0,-1)),L=!_o.test(ie?ie.toLowerCase():"")}E=L}if(E)Ye(h,"complete"),Ye(h,"success");else{h.m=6;try{var ue=2<_r(h)?h.g.statusText:""}catch{ue=""}h.l=ue+" ["+h.Z()+"]",bo(h)}}finally{ii(h)}}}}function ii(h,_){if(h.g){ba(h);const E=h.g,L=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ye(h,"ready");try{E.onreadystatechange=L}catch{}}}function ba(h){h.I&&(d.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function _r(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<_r(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),cn(_)}};function id(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function pg(h){const _={};h=(h.g&&2<=_r(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<h.length;L++){if(q(h[L]))continue;var E=U(h[L]);const ie=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ue=_[ie]||[];_[ie]=ue,ue.push(E)}N(_,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ea(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function wo(h){this.Aa=0,this.i=[],this.j=new Vn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ea("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ea("baseRetryDelayMs",5e3,h),this.cb=Ea("retryDelaySeedMs",1e4,h),this.Wa=Ea("forwardChannelMaxRetries",2,h),this.wa=Ea("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Dr(h&&h.concurrentRequestLimit),this.Da=new va,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wo.prototype,t.la=8,t.G=1,t.connect=function(h,_,E,L){pt(0),this.W=h,this.H=_||{},E&&L!==void 0&&(this.H.OSID=E,this.H.OAID=L),this.F=this.X,this.I=dd(this,null,this.W),To(this)};function tc(h){if(sd(h),h.G==3){var _=h.U++,E=Xn(h.I);if(dt(E,"SID",h.K),dt(E,"RID",_),dt(E,"TYPE","terminate"),wa(h,E),_=new un(h,h.j,_),_.L=2,_.v=ma(Xn(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=_.v,E=!0),E||(_.g=hd(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Ri(_)}ud(h)}function xo(h){h.g&&(xa(h),h.g.cancel(),h.g=null)}function sd(h){xo(h),h.u&&(d.clearTimeout(h.u),h.u=null),So(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function To(h){if(!ls(h.h)&&!h.s){h.s=!0;var _=h.Ga;W||S(),G||(W(),G=!0),Y.add(_,h),h.B=0}}function yg(h,_){return Jr(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Rt(b(h.Ga,h,_),ic(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const ie=new un(this,this.j,h);let ue=this.o;if(this.S&&(ue?(ue=A(ue),z(ue,this.S)):ue=this.S),this.m!==null||this.O||(ie.H=ue,ue=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var L=this.i[E];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(_+=L,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=ad(this,ie,_),E=Xn(this.I),dt(E,"RID",h),dt(E,"CVER",22),this.D&&dt(E,"X-HTTP-Session-Id",this.D),wa(this,E),ue&&(this.O?_="headers="+encodeURIComponent(String(ec(ue)))+"&"+_:this.m&&tn(E,this.m,ue)),po(this.h,ie),this.Ua&&dt(E,"TYPE","init"),this.P?(dt(E,"$req",_),dt(E,"SID","null"),ie.T=!0,Yn(ie,E,null)):Yn(ie,E,_),this.G=2}}else this.G==3&&(h?nc(this,h):this.i.length==0||ls(this.h)||nc(this))};function nc(h,_){var E;_?E=_.l:E=h.U++;const L=Xn(h.I);dt(L,"SID",h.K),dt(L,"RID",E),dt(L,"AID",h.T),wa(h,L),h.m&&h.o&&tn(L,h.m,h.o),E=new un(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=ad(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),po(h.h,E),Yn(E,L,_)}function wa(h,_){h.H&&Z(h.H,function(E,L){dt(_,L,E)}),h.l&&Kl({},function(E,L){dt(_,L,E)})}function ad(h,_,E){E=Math.min(h.i.length,E);var L=h.l?b(h.l.Na,h.l,h):null;e:{var ie=h.i;let ue=-1;for(;;){const be=["count="+E];ue==-1?0<E?(ue=ie[0].g,be.push("ofs="+ue)):ue=0:be.push("ofs="+ue);let Ze=!0;for(let Xt=0;Xt<E;Xt++){let Je=ie[Xt].g;const nn=ie[Xt].map;if(Je-=ue,0>Je)ue=Math.max(0,ie[Xt].g-100),Ze=!1;else try{ti(nn,be,"req"+Je+"_")}catch{L&&L(nn)}}if(Ze){L=be.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,L}function od(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;W||S(),G||(W(),G=!0),Y.add(_,h),h.v=0}}function rc(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Rt(b(h.Fa,h),ic(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,ld(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Rt(b(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),xo(this),ld(this))};function xa(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function ld(h){h.g=new un(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Xn(h.qa);dt(_,"RID","rpc"),dt(_,"SID",h.K),dt(_,"AID",h.T),dt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&dt(_,"TO",h.ja),dt(_,"TYPE","xmlhttp"),wa(h,_),h.m&&h.o&&tn(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=ma(Xn(_)),E.m=null,E.P=!0,kr(E,h)}t.Za=function(){this.C!=null&&(this.C=null,xo(this),rc(this),pt(19))};function So(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function cd(h,_){var E=null;if(h.g==_){So(h),xa(h),h.g=null;var L=2}else if(Yl(h.h,_))E=_.D,Dn(h.h,_),L=1;else return;if(h.G!=0){if(_.o)if(L==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var ie=h.B;L=Yr(),Ye(L,new Ot(L,E)),To(h)}else od(h);else if(ie=_.s,ie==3||ie==0&&0<_.X||!(L==1&&yg(h,_)||L==2&&rc(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),ie){case 1:Oi(h,5);break;case 4:Oi(h,10);break;case 3:Oi(h,6);break;default:Oi(h,2)}}}function ic(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function Oi(h,_){if(h.j.info("Error code "+_),_==2){var E=b(h.fb,h),L=h.Xa;const ie=!L;L=new Bt(L||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ga(L,"https"),ma(L),ie?ya(L.toString(),E):Or(L.toString(),E)}else pt(2);h.G=0,h.l&&h.l.sa(_),ud(h),sd(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function ud(h){if(h.G=0,h.ka=[],h.l){const _=Xl(h.h);(_.length!=0||h.i.length!=0)&&(M(h.ka,_),M(h.ka,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.ra()}}function dd(h,_,E){var L=E instanceof Bt?Xn(E):new Bt(E);if(L.g!="")_&&(L.g=_+"."+L.g),cs(L,L.s);else{var ie=d.location;L=ie.protocol,_=_?_+"."+ie.hostname:ie.hostname,ie=+ie.port;var ue=new Bt(null);L&&ga(ue,L),_&&(ue.g=_),ie&&cs(ue,ie),E&&(ue.l=E),L=ue}return E=h.D,_=h.ya,E&&_&&dt(L,E,_),dt(L,"VER",h.la),wa(h,L),L}function hd(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new ot(new us({eb:E})):new ot(h.pa),_.Ha(h.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fd(){}t=fd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ao(){}Ao.prototype.g=function(h,_){return new On(h,_)};function On(h,_){at.call(this),this.g=new wo(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!q(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!q(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new si(this)}O(On,at),On.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},On.prototype.close=function(){tc(this.g)},On.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=en(h),h=E);_.i.push(new mo(_.Ya++,h)),_.G==3&&To(_)},On.prototype.N=function(){this.g.l=null,delete this.j,tc(this.g),delete this.g,On.aa.N.call(this)};function gd(h){ur.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}O(gd,ur);function md(){Gn.call(this),this.status=1}O(md,Gn);function si(h){this.g=h}O(si,fd),si.prototype.ua=function(){Ye(this.g,"a")},si.prototype.ta=function(h){Ye(this.g,new gd(h))},si.prototype.sa=function(h){Ye(this.g,new md)},si.prototype.ra=function(){Ye(this.g,"b")},Ao.prototype.createWebChannel=Ao.prototype.g,On.prototype.send=On.prototype.o,On.prototype.open=On.prototype.m,On.prototype.close=On.prototype.close,$S=function(){return new Ao},HS=function(){return Yr()},jS=dr,p0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qr.NO_ERROR=0,Qr.TIMEOUT=8,Qr.HTTP_ERROR=6,$h=Qr,hr.COMPLETE="complete",BS=hr,Ir.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",at.prototype.listen=at.prototype.K,cu=Ir,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,US=ot}).apply(typeof Ih<"u"?Ih:typeof self<"u"?self:typeof window<"u"?window:{});const Ww="@firebase/firestore",Zw="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new ly("@firebase/firestore");function ul(){return eo.logLevel}function we(t,...e){if(eo.logLevel<=Qe.DEBUG){const n=e.map(hy);eo.debug(`Firestore (${Ul}): ${t}`,...n)}}function rs(t,...e){if(eo.logLevel<=Qe.ERROR){const n=e.map(hy);eo.error(`Firestore (${Ul}): ${t}`,...n)}}function kl(t,...e){if(eo.logLevel<=Qe.WARN){const n=e.map(hy);eo.warn(`Firestore (${Ul}): ${t}`,...n)}}function hy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,qS(t,i,n)}function qS(t,e,n){let i=`FIRESTORE (${Ul}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw rs(i),new Error(i)}function lt(t,e,n,i){let a="Unexpected state";typeof n=="string"?a=n:i=n,t||qS(e,a,i)}function ze(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends xi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class O5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wn.UNAUTHENTICATED))}shutdown(){}}class M5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class P5{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){lt(this.o===void 0,42304);let i=this.i;const a=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let l=new Ks;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ks,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const f=l;e.enqueueRetryable(async()=>{await f.promise,await a(this.currentUser)})},d=f=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ks)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(lt(typeof i.accessToken=="string",31837,{l:i}),new FS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string",2055,{h:e}),new wn(e)}}class V5{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class L5{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new V5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(wn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ir(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){lt(this.o===void 0,3512);const i=l=>{l.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,we("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Jw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(lt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Jw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=U5(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<n&&(i+=e.charAt(a[l]%62))}return i}}function $e(t,e){return t<e?-1:t>e?1:0}function y0(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),a=e.codePointAt(n);if(i!==a){if(i<128&&a<128)return $e(i,a);{const l=GS(),c=B5(l.encode(e1(t,n)),l.encode(e1(e,n)));return c!==0?c:$e(i,a)}}n+=i>65535?2:1}return $e(t.length,e.length)}function e1(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function B5(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return $e(t[n],e[n]);return $e(t.length,e.length)}function Dl(t,e,n){return t.length===e.length&&t.every((i,a)=>n(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=-62135596800,n1=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*n1);return new _t(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<t1)throw new xe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/n1}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-t1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new _t(0,0))}static max(){return new Le(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="__name__";class gi{constructor(e,n,i){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const l=gi.compareSegments(e.get(a),n.get(a));if(l!==0)return l}return $e(e.length,n.length)}static compareSegments(e,n){const i=gi.isNumericId(e),a=gi.isNumericId(n);return i&&!a?-1:!i&&a?1:i&&a?gi.extractNumericId(e).compare(gi.extractNumericId(n)):y0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xs.fromString(e.substring(4,e.length-2))}}class vt extends gi{construct(e,n,i){return new vt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new xe(ye.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(a=>a.length>0))}return new vt(n)}static emptyPath(){return new vt([])}}const j5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends gi{construct(e,n,i){return new pn(e,n,i)}static isValidIdentifier(e){return j5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===r1}static keyField(){return new pn([r1])}static fromServerFormat(e){const n=[];let i="",a=0;const l=()=>{if(i.length===0)throw new xe(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new xe(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[a+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new xe(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new xe(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(n)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(vt.fromString(e))}static fromName(e){return new Ce(vt.fromString(e).popFirst(5))}static empty(){return new Ce(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new vt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=-1;function H5(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,a=Le.fromTimestamp(i===1e9?new _t(n+1,0):new _t(n,i));return new Js(a,Ce.empty(),e)}function $5(t){return new Js(t.readTime,t.key,Iu)}class Js{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Js(Le.min(),Ce.empty(),Iu)}static max(){return new Js(Le.max(),Ce.empty(),Iu)}}function q5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(t.documentKey,e.documentKey),n!==0?n:$e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class G5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(t){if(t.code!==ye.FAILED_PRECONDITION||t.message!==F5)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ve((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(i,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ve?n:ve.resolve(n)}catch(n){return ve.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ve.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ve.reject(n)}static resolve(e){return new ve((n,i)=>{n(e)})}static reject(e){return new ve((n,i)=>{i(e)})}static waitFor(e){return new ve((n,i)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&n()},f=>i(f))}),c=!0,l===a&&n()})}static or(e){let n=ve.resolve(!1);for(const i of e)n=n.next(a=>a?ve.resolve(a):i());return n}static forEach(e,n){const i=[];return e.forEach((a,l)=>{i.push(n.call(this,a,l))}),this.waitFor(i)}static mapArray(e,n){return new ve((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let f=0;f<l;f++){const m=f;n(e[m]).next(y=>{c[m]=y,++d,d===l&&i(c)},y=>a(y))}})}static doWhile(e,n){return new ve((i,a)=>{const l=()=>{e()===!0?n().next(()=>{l()},a):i()};l()})}}function Y5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>n.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Ff.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy=-1;function Gf(t){return t==null}function mf(t){return t===0&&1/t==-1/0}function X5(t){return typeof t=="number"&&Number.isInteger(t)&&!mf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="";function K5(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=i1(e)),e=Q5(t.get(n),e);return i1(e)}function Q5(t,e){let n=e;const i=t.length;for(let a=0;a<i;a++){const l=t.charAt(a);switch(l){case"\0":n+="";break;case XS:n+="";break;default:n+=l}}return n}function i1(t){return t+XS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function KS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n){this.comparator=e,this.root=n||mn.EMPTY}insert(e,n){return new St(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kh(this.root,e,this.comparator,!1)}getReverseIterator(){return new kh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kh(this.root,e,this.comparator,!0)}}class kh{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?i(e.key,n):1,n&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,n,i,a,l){this.key=e,this.value=n,this.color=i??mn.RED,this.left=a??mn.EMPTY,this.right=l??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,l){return new mn(e??this.key,n??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,n,i),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return mn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,i,a,l){return this}insert(e,n,i){return new mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new a1(this.data.getIterator())}getIteratorFrom(e){return new a1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zt(this.comparator);return n.data=e,n}}class a1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new sr([])}unionWith(e){let n=new Zt(pn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new sr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Dl(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new QS("Invalid base64 string: "+l):l}}(e);return new yn(n)}static fromUint8Array(e){const n=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new yn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const W5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ea(t){if(lt(!!t,39018),typeof t=="string"){let e=0;const n=W5.exec(t);if(lt(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ta(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="server_timestamp",ZS="__type__",JS="__previous_value__",eA="__local_write_time__";function gy(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ZS])===null||n===void 0?void 0:n.stringValue)===WS}function Yf(t){const e=t.mapValue.fields[JS];return gy(e)?Yf(e):e}function ku(t){const e=ea(t.mapValue.fields[eA].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e,n,i,a,l,c,d,f,m,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=y}}const pf="(default)";class Du{constructor(e,n){this.projectId=e,this.database=n||pf}static empty(){return new Du("","")}get isDefaultDatabase(){return this.database===pf}isEqual(e){return e instanceof Du&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="__type__",J5="__max__",Dh={mapValue:{}},nA="__vector__",yf="value";function na(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gy(t)?4:t6(t)?9007199254740991:e6(t)?10:11:Me(28295,{value:t})}function Ei(t,e){if(t===e)return!0;const n=na(t);if(n!==na(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ku(t).isEqual(ku(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ea(a.timestampValue),d=ea(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,l){return ta(a.bytesValue).isEqual(ta(l.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,l){return Vt(a.geoPointValue.latitude)===Vt(l.geoPointValue.latitude)&&Vt(a.geoPointValue.longitude)===Vt(l.geoPointValue.longitude)}(t,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Vt(a.integerValue)===Vt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Vt(a.doubleValue),d=Vt(l.doubleValue);return c===d?mf(c)===mf(d):isNaN(c)&&isNaN(d)}return!1}(t,e);case 9:return Dl(t.arrayValue.values||[],e.arrayValue.values||[],Ei);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(s1(c)!==s1(d))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(d[f]===void 0||!Ei(c[f],d[f])))return!1;return!0}(t,e);default:return Me(52216,{left:t})}}function Ou(t,e){return(t.values||[]).find(n=>Ei(n,e))!==void 0}function Ol(t,e){if(t===e)return 0;const n=na(t),i=na(e);if(n!==i)return $e(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(t.booleanValue,e.booleanValue);case 2:return function(l,c){const d=Vt(l.integerValue||l.doubleValue),f=Vt(c.integerValue||c.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(t,e);case 3:return o1(t.timestampValue,e.timestampValue);case 4:return o1(ku(t),ku(e));case 5:return y0(t.stringValue,e.stringValue);case 6:return function(l,c){const d=ta(l),f=ta(c);return d.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),f=c.split("/");for(let m=0;m<d.length&&m<f.length;m++){const y=$e(d[m],f[m]);if(y!==0)return y}return $e(d.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(l,c){const d=$e(Vt(l.latitude),Vt(c.latitude));return d!==0?d:$e(Vt(l.longitude),Vt(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return l1(t.arrayValue,e.arrayValue);case 10:return function(l,c){var d,f,m,y;const v=l.fields||{},b=c.fields||{},x=(d=v[yf])===null||d===void 0?void 0:d.arrayValue,O=(f=b[yf])===null||f===void 0?void 0:f.arrayValue,k=$e(((m=x?.values)===null||m===void 0?void 0:m.length)||0,((y=O?.values)===null||y===void 0?void 0:y.length)||0);return k!==0?k:l1(x,O)}(t.mapValue,e.mapValue);case 11:return function(l,c){if(l===Dh.mapValue&&c===Dh.mapValue)return 0;if(l===Dh.mapValue)return 1;if(c===Dh.mapValue)return-1;const d=l.fields||{},f=Object.keys(d),m=c.fields||{},y=Object.keys(m);f.sort(),y.sort();for(let v=0;v<f.length&&v<y.length;++v){const b=y0(f[v],y[v]);if(b!==0)return b;const x=Ol(d[f[v]],m[y[v]]);if(x!==0)return x}return $e(f.length,y.length)}(t.mapValue,e.mapValue);default:throw Me(23264,{Pe:n})}}function o1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $e(t,e);const n=ea(t),i=ea(e),a=$e(n.seconds,i.seconds);return a!==0?a:$e(n.nanos,i.nanos)}function l1(t,e){const n=t.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const l=Ol(n[a],i[a]);if(l)return l}return $e(n.length,i.length)}function Ml(t){return v0(t)}function v0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=ea(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ta(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",a=!0;for(const l of n.values||[])a?a=!1:i+=",",i+=v0(l);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${v0(n.fields[c])}`;return a+"}"}(t.mapValue):Me(61005,{value:t})}function qh(t){switch(na(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yf(t);return e?16+qh(e):16;case 5:return 2*t.stringValue.length;case 6:return ta(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+qh(l),0)}(t.arrayValue);case 10:case 11:return function(i){let a=0;return sa(i.fields,(l,c)=>{a+=l.length+qh(c)}),a}(t.mapValue);default:throw Me(13486,{value:t})}}function c1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _0(t){return!!t&&"integerValue"in t}function my(t){return!!t&&"arrayValue"in t}function u1(t){return!!t&&"nullValue"in t}function d1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fh(t){return!!t&&"mapValue"in t}function e6(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[tA])===null||n===void 0?void 0:n.stringValue)===nA}function gu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return sa(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=gu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function t6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===J5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Fh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gu(n)}setAll(e){let n=pn.emptyPath(),i={},a=[];e.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const f=this.getFieldsMap(n);this.applyChanges(f,i,a),i={},a=[],n=d.popLast()}c?i[d.lastSegment()]=gu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,i,a)}delete(e){const n=this.field(e.popLast());Fh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ei(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];Fh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){sa(n,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new jn(gu(this.value))}}function rA(t){const e=[];return sa(t.fields,(n,i)=>{const a=new pn([n]);if(Fh(i)){const l=rA(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n,i,a,l,c,d){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Tn(e,0,Le.min(),Le.min(),Le.min(),jn.empty(),0)}static newFoundDocument(e,n,i,a){return new Tn(e,1,n,Le.min(),i,a,0)}static newNoDocument(e,n){return new Tn(e,2,n,Le.min(),Le.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new Tn(e,3,n,Le.min(),Le.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n){this.position=e,this.inclusive=n}}function h1(t,e,n){let i=0;for(let a=0;a<t.position.length;a++){const l=e[a],c=t.position[a];if(l.field.isKeyField()?i=Ce.comparator(Ce.fromName(c.referenceValue),n.key):i=Ol(c,n.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function f1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ei(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n="asc"){this.field=e,this.dir=n}}function n6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{}class Ft extends iA{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new i6(e,n,i):n==="array-contains"?new o6(e,i):n==="in"?new l6(e,i):n==="not-in"?new c6(e,i):n==="array-contains-any"?new u6(e,i):new Ft(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new s6(e,i):new a6(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ol(n,this.value)):n!==null&&na(this.value)===na(n)&&this.matchesComparison(Ol(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hr extends iA{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Hr(e,n)}matches(e){return sA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function sA(t){return t.op==="and"}function aA(t){return r6(t)&&sA(t)}function r6(t){for(const e of t.filters)if(e instanceof Hr)return!1;return!0}function b0(t){if(t instanceof Ft)return t.field.canonicalString()+t.op.toString()+Ml(t.value);if(aA(t))return t.filters.map(e=>b0(e)).join(",");{const e=t.filters.map(n=>b0(n)).join(",");return`${t.op}(${e})`}}function oA(t,e){return t instanceof Ft?function(i,a){return a instanceof Ft&&i.op===a.op&&i.field.isEqual(a.field)&&Ei(i.value,a.value)}(t,e):t instanceof Hr?function(i,a){return a instanceof Hr&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,c,d)=>l&&oA(c,a.filters[d]),!0):!1}(t,e):void Me(19439)}function lA(t){return t instanceof Ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Ml(n.value)}`}(t):t instanceof Hr?function(n){return n.op.toString()+" {"+n.getFilters().map(lA).join(" ,")+"}"}(t):"Filter"}class i6 extends Ft{constructor(e,n,i){super(e,n,i),this.key=Ce.fromName(i.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class s6 extends Ft{constructor(e,n){super(e,"in",n),this.keys=cA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class a6 extends Ft{constructor(e,n){super(e,"not-in",n),this.keys=cA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function cA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ce.fromName(i.referenceValue))}class o6 extends Ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return my(n)&&Ou(n.arrayValue,this.value)}}class l6 extends Ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ou(this.value.arrayValue,n)}}class c6 extends Ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ou(this.value.arrayValue,n)}}class u6 extends Ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!my(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ou(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e,n=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function g1(t,e=null,n=[],i=[],a=null,l=null,c=null){return new d6(t,e,n,i,a,l,c)}function py(t){const e=ze(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>b0(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Gf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ml(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ml(i)).join(",")),e.Ie=n}return e.Ie}function yy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!n6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!oA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!f1(t.startAt,e.startAt)&&f1(t.endAt,e.endAt)}function E0(t){return Ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n=null,i=[],a=[],l=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function h6(t,e,n,i,a,l,c,d){return new Hl(t,e,n,i,a,l,c,d)}function uA(t){return new Hl(t)}function m1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function dA(t){return t.collectionGroup!==null}function mu(t){const e=ze(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),n.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Zt(pn.comparator);return c.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Mu(l,i))}),n.has(pn.keyField().canonicalString())||e.Ee.push(new Mu(pn.keyField(),i))}return e.Ee}function yi(t){const e=ze(t);return e.de||(e.de=f6(e,mu(t))),e.de}function f6(t,e){if(t.limitType==="F")return g1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Mu(a.field,l)});const n=t.endAt?new vf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new vf(t.startAt.position,t.startAt.inclusive):null;return g1(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function w0(t,e){const n=t.filters.concat([e]);return new Hl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function x0(t,e,n){return new Hl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xf(t,e){return yy(yi(t),yi(e))&&t.limitType===e.limitType}function hA(t){return`${py(yi(t))}|lt:${t.limitType}`}function dl(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(a=>lA(a)).join(", ")}]`),Gf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(a=>Ml(a)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(a=>Ml(a)).join(",")),`Target(${i})`}(yi(t))}; limitType=${t.limitType})`}function Kf(t,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ce.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(t,e)&&function(i,a){for(const l of mu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(t,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(t,e)&&function(i,a){return!(i.startAt&&!function(c,d,f){const m=h1(c,d,f);return c.inclusive?m<=0:m<0}(i.startAt,mu(i),a)||i.endAt&&!function(c,d,f){const m=h1(c,d,f);return c.inclusive?m>=0:m>0}(i.endAt,mu(i),a))}(t,e)}function g6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fA(t){return(e,n)=>{let i=!1;for(const a of mu(t)){const l=m6(a,e,n);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function m6(t,e,n){const i=t.field.isKeyField()?Ce.comparator(e.key,n.key):function(l,c,d){const f=c.data.field(l),m=d.data.field(l);return f!==null&&m!==null?Ol(f,m):Me(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[n]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,(n,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return KS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=new St(Ce.comparator);function is(){return p6}const gA=new St(Ce.comparator);function uu(...t){let e=gA;for(const n of t)e=e.insert(n.key,n);return e}function mA(t){let e=gA;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Ga(){return pu()}function pA(){return pu()}function pu(){return new ao(t=>t.toString(),(t,e)=>t.isEqual(e))}const y6=new St(Ce.comparator),v6=new Zt(Ce.comparator);function We(...t){let e=v6;for(const n of t)e=e.add(n);return e}const _6=new Zt($e);function b6(){return _6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mf(e)?"-0":e}}function yA(t){return{integerValue:""+t}}function E6(t,e){return X5(e)?yA(e):vy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(){this._=void 0}}function w6(t,e,n){return t instanceof _f?function(a,l){const c={fields:{[ZS]:{stringValue:WS},[eA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&gy(l)&&(l=Yf(l)),l&&(c.fields[JS]=l),{mapValue:c}}(n,e):t instanceof Pu?_A(t,e):t instanceof Vu?bA(t,e):function(a,l){const c=vA(a,l),d=p1(c)+p1(a.Re);return _0(c)&&_0(a.Re)?yA(d):vy(a.serializer,d)}(t,e)}function x6(t,e,n){return t instanceof Pu?_A(t,e):t instanceof Vu?bA(t,e):n}function vA(t,e){return t instanceof bf?function(i){return _0(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class _f extends Qf{}class Pu extends Qf{constructor(e){super(),this.elements=e}}function _A(t,e){const n=EA(e);for(const i of t.elements)n.some(a=>Ei(a,i))||n.push(i);return{arrayValue:{values:n}}}class Vu extends Qf{constructor(e){super(),this.elements=e}}function bA(t,e){let n=EA(e);for(const i of t.elements)n=n.filter(a=>!Ei(a,i));return{arrayValue:{values:n}}}class bf extends Qf{constructor(e,n){super(),this.serializer=e,this.Re=n}}function p1(t){return Vt(t.integerValue||t.doubleValue)}function EA(t){return my(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function T6(t,e){return t.field.isEqual(e.field)&&function(i,a){return i instanceof Pu&&a instanceof Pu||i instanceof Vu&&a instanceof Vu?Dl(i.elements,a.elements,Ei):i instanceof bf&&a instanceof bf?Ei(i.Re,a.Re):i instanceof _f&&a instanceof _f}(t.transform,e.transform)}class S6{constructor(e,n){this.version=e,this.transformResults=n}}class ar{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wf{}function wA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zf(t.key,ar.none()):new Fu(t.key,t.data,ar.none());{const n=t.data,i=jn.empty();let a=new Zt(pn.comparator);for(let l of e.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new aa(t.key,i,new sr(a.toArray()),ar.none())}}function A6(t,e,n){t instanceof Fu?function(a,l,c){const d=a.value.clone(),f=v1(a.fieldTransforms,l,c.transformResults);d.setAll(f),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(t,e,n):t instanceof aa?function(a,l,c){if(!Gh(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=v1(a.fieldTransforms,l,c.transformResults),f=l.data;f.setAll(xA(a)),f.setAll(d),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(t,e,n):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function yu(t,e,n,i){return t instanceof Fu?function(l,c,d,f){if(!Gh(l.precondition,c))return d;const m=l.value.clone(),y=_1(l.fieldTransforms,f,c);return m.setAll(y),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(t,e,n,i):t instanceof aa?function(l,c,d,f){if(!Gh(l.precondition,c))return d;const m=_1(l.fieldTransforms,f,c),y=c.data;return y.setAll(xA(l)),y.setAll(m),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(t,e,n,i):function(l,c,d){return Gh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(t,e,n)}function R6(t,e){let n=null;for(const i of t.fieldTransforms){const a=e.data.field(i.field),l=vA(i.transform,a||null);l!=null&&(n===null&&(n=jn.empty()),n.set(i.field,l))}return n||null}function y1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Dl(i,a,(l,c)=>T6(l,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fu extends Wf{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class aa extends Wf{constructor(e,n,i,a,l=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function xA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function v1(t,e,n){const i=new Map;lt(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let a=0;a<n.length;a++){const l=t[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,x6(c,d,n[a]))}return i}function _1(t,e,n){const i=new Map;for(const a of t){const l=a.transform,c=n.data.field(a.field);i.set(a.field,w6(l,c,e))}return i}class Zf extends Wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class N6 extends Wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,n,i,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&A6(l,e,i[a])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=yu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=yu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=pA();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=n.has(a.key)?null:d;const f=wA(c,d);f!==null&&i.set(a.key,f),c.isValidDocument()||c.convertToNoDocument(Le.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),We())}isEqual(e){return this.batchId===e.batchId&&Dl(this.mutations,e.mutations,(n,i)=>y1(n,i))&&Dl(this.baseMutations,e.baseMutations,(n,i)=>y1(n,i))}}class _y{constructor(e,n,i,a){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=a}static from(e,n,i){lt(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let a=function(){return y6}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new _y(e,n,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,tt;function D6(t){switch(t){case ye.OK:return Me(64938);case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0;default:return Me(15467,{code:t})}}function TA(t){if(t===void 0)return rs("GRPC error has no .code"),ye.UNKNOWN;switch(t){case $t.OK:return ye.OK;case $t.CANCELLED:return ye.CANCELLED;case $t.UNKNOWN:return ye.UNKNOWN;case $t.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case $t.INTERNAL:return ye.INTERNAL;case $t.UNAVAILABLE:return ye.UNAVAILABLE;case $t.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case $t.NOT_FOUND:return ye.NOT_FOUND;case $t.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case $t.ABORTED:return ye.ABORTED;case $t.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case $t.DATA_LOSS:return ye.DATA_LOSS;default:return Me(39323,{code:t})}}(tt=$t||($t={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6=new Xs([4294967295,4294967295],0);function b1(t){const e=GS().encode(t),n=new zS;return n.update(e),new Uint8Array(n.digest())}function E1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Xs([n,i],0),new Xs([a,l],0)]}class by{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new du(`Invalid padding: ${n}`);if(i<0)throw new du(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new du(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new du(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Xs.fromNumber(this.pe)}we(e,n,i){let a=e.add(n.multiply(Xs.fromNumber(i)));return a.compare(O6)===1&&(a=new Xs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=b1(e),[i,a]=E1(n);for(let l=0;l<this.hashCount;l++){const c=this.we(i,a,l);if(!this.be(c))return!1}return!0}static create(e,n,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new by(l,a,n);return i.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const n=b1(e),[i,a]=E1(n);for(let l=0;l<this.hashCount;l++){const c=this.we(i,a,l);this.Se(c)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class du extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n,i,a,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const a=new Map;return a.set(e,Gu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Jf(Le.min(),a,new St($e),is(),We())}}class Gu{constructor(e,n,i,a,l){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Gu(i,n,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,i,a){this.De=e,this.removedTargetIds=n,this.key=i,this.ve=a}}class SA{constructor(e,n){this.targetId=e,this.Ce=n}}class AA{constructor(e,n,i=yn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=a}}class w1{constructor(){this.Fe=0,this.Me=x1(),this.xe=yn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=We(),n=We(),i=We();return this.Me.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:i=i.add(a);break;default:Me(38017,{changeType:l})}}),new Gu(this.xe,this.Oe,e,n,i)}Qe(){this.Ne=!1,this.Me=x1()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,lt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class M6{constructor(e){this.ze=e,this.je=new Map,this.He=is(),this.Je=Oh(),this.Ye=Oh(),this.Ze=new St($e)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const i=this.rt(n);switch(e.state){case 0:this.it(n)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(n);break;case 3:this.it(n)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),i.ke(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((i,a)=>{this.it(a)&&n(a)})}ot(e){const n=e.targetId,i=e.Ce.count,a=this._t(n);if(a){const l=a.target;if(E0(l))if(i===0){const c=new Ce(l.path);this.tt(n,c,Tn.newNoDocument(c,Le.min()))}else lt(i===1,20013,{expectedCount:i});else{const c=this.ut(n);if(c!==i){const d=this.ct(e),f=d?this.lt(d,e,c):1;if(f!==0){this.st(n);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,m)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=n;let c,d;try{c=ta(i).toUint8Array()}catch(f){if(f instanceof QS)return kl("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new by(c,a,l)}catch(f){return kl(f instanceof du?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.pe===0?null:d}lt(e,n,i){return n.Ce.count===i-this.Tt(e,n.targetId)?0:2}Tt(e,n){const i=this.ze.getRemoteKeysForTarget(n);let a=0;return i.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.tt(n,l,null),a++)}),a}It(e){const n=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&E0(d.target)){const f=new Ce(d.target.path);this.Et(f).has(c)||this.dt(c,f)||this.tt(c,f,Tn.newNoDocument(f,e))}l.Le&&(n.set(c,l.qe()),l.Qe())}});let i=We();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(f=>{const m=this._t(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.He.forEach((l,c)=>c.setReadTime(e));const a=new Jf(e,n,this.Ze,this.He,i);return this.He=is(),this.Je=Oh(),this.Ye=Oh(),this.Ze=new St($e),a}et(e,n){if(!this.it(e))return;const i=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,i),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,i){if(!this.it(e))return;const a=this.rt(e);this.dt(e,n)?a.$e(n,1):a.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),i&&(this.He=this.He.insert(n,i))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new w1,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Zt($e),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Zt($e),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new w1),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Oh(){return new St(Ce.comparator)}function x1(){return new St(Ce.comparator)}const P6={asc:"ASCENDING",desc:"DESCENDING"},V6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L6={and:"AND",or:"OR"};class z6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function T0(t,e){return t.useProto3Json||Gf(e)?e:{value:e}}function Ef(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function U6(t,e){return Ef(t,e.toTimestamp())}function vi(t){return lt(!!t,49232),Le.fromTimestamp(function(n){const i=ea(n);return new _t(i.seconds,i.nanos)}(t))}function Ey(t,e){return S0(t,e).canonicalString()}function S0(t,e){const n=function(a){return new vt(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?n:n.child(e)}function NA(t){const e=vt.fromString(t);return lt(OA(e),10190,{key:e.toString()}),e}function A0(t,e){return Ey(t.databaseId,e.path)}function zp(t,e){const n=NA(e);if(n.get(1)!==t.databaseId.projectId)throw new xe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ce(IA(n))}function CA(t,e){return Ey(t.databaseId,e)}function B6(t){const e=NA(t);return e.length===4?vt.emptyPath():IA(e)}function R0(t){return new vt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function IA(t){return lt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function T1(t,e,n){return{name:A0(t,e),fields:n.value.mapValue.fields}}function j6(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Me(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(m,y){return m.useProto3Json?(lt(y===void 0||typeof y=="string",58123),yn.fromBase64String(y||"")):(lt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),yn.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(m){const y=m.code===void 0?ye.UNKNOWN:TA(m.code);return new xe(y,m.message||"")}(c);n=new AA(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=zp(t,i.document.name),l=vi(i.document.updateTime),c=i.document.createTime?vi(i.document.createTime):Le.min(),d=new jn({mapValue:{fields:i.document.fields}}),f=Tn.newFoundDocument(a,l,c,d),m=i.targetIds||[],y=i.removedTargetIds||[];n=new Yh(m,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=zp(t,i.document),l=i.readTime?vi(i.readTime):Le.min(),c=Tn.newNoDocument(a,l),d=i.removedTargetIds||[];n=new Yh([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=zp(t,i.document),l=i.removedTargetIds||[];n=new Yh([],l,a,null)}else{if(!("filter"in e))return Me(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new k6(a,l),d=i.targetId;n=new SA(d,c)}}return n}function H6(t,e){let n;if(e instanceof Fu)n={update:T1(t,e.key,e.value)};else if(e instanceof Zf)n={delete:A0(t,e.key)};else if(e instanceof aa)n={update:T1(t,e.key,e.data),updateMask:W6(e.fieldMask)};else{if(!(e instanceof N6))return Me(16599,{ft:e.type});n={verify:A0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const d=c.transform;if(d instanceof _f)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Pu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Vu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof bf)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Me(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:U6(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Me(27497)}(t,e.precondition)),n}function $6(t,e){return t&&t.length>0?(lt(e!==void 0,14353),t.map(n=>function(a,l){let c=a.updateTime?vi(a.updateTime):vi(l);return c.isEqual(Le.min())&&(c=vi(l)),new S6(c,a.transformResults||[])}(n,e))):[]}function q6(t,e){return{documents:[CA(t,e.path)]}}function F6(t,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=CA(t,a);const l=function(m){if(m.length!==0)return DA(Hr.create(m,"and"))}(e.filters);l&&(n.structuredQuery.where=l);const c=function(m){if(m.length!==0)return m.map(y=>function(b){return{field:hl(b.field),direction:X6(b.dir)}}(y))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const d=T0(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{gt:n,parent:a}}function G6(t){let e=B6(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let a=null;if(i>0){lt(i===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];n.where&&(l=function(v){const b=kA(v);return b instanceof Hr&&aA(b)?b.getFilters():[b]}(n.where));let c=[];n.orderBy&&(c=function(v){return v.map(b=>function(O){return new Mu(fl(O.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(b))}(n.orderBy));let d=null;n.limit&&(d=function(v){let b;return b=typeof v=="object"?v.value:v,Gf(b)?null:b}(n.limit));let f=null;n.startAt&&(f=function(v){const b=!!v.before,x=v.values||[];return new vf(x,b)}(n.startAt));let m=null;return n.endAt&&(m=function(v){const b=!v.before,x=v.values||[];return new vf(x,b)}(n.endAt)),h6(e,a,c,l,d,"F",f,m)}function Y6(t,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:a})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=fl(n.unaryFilter.field);return Ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=fl(n.unaryFilter.field);return Ft.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=fl(n.unaryFilter.field);return Ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=fl(n.unaryFilter.field);return Ft.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ft.create(fl(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Hr.create(n.compositeFilter.filters.map(i=>kA(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(n.compositeFilter.op))}(t):Me(30097,{filter:t})}function X6(t){return P6[t]}function K6(t){return V6[t]}function Q6(t){return L6[t]}function hl(t){return{fieldPath:t.canonicalString()}}function fl(t){return pn.fromServerFormat(t.fieldPath)}function DA(t){return t instanceof Ft?function(n){if(n.op==="=="){if(d1(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NAN"}};if(u1(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(d1(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NAN"}};if(u1(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hl(n.field),op:K6(n.op),value:n.value}}}(t):t instanceof Hr?function(n){const i=n.getFilters().map(a=>DA(a));return i.length===1?i[0]:{compositeFilter:{op:Q6(n.op),filters:i}}}(t):Me(54877,{filter:t})}function W6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function OA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n,i,a,l=Le.min(),c=Le.min(),d=yn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new $s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e){this.wt=e}}function J6(t){const e=G6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?x0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.Cn=new tP}addToCollectionParentIndex(e,n){return this.Cn.add(n),ve.resolve()}getCollectionParents(e,n){return ve.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ve.resolve()}deleteFieldIndex(e,n){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,n){return ve.resolve()}getDocumentsMatchingTarget(e,n){return ve.resolve(null)}getIndexType(e,n){return ve.resolve(0)}getFieldIndexes(e,n){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,n){return ve.resolve(Js.min())}getMinOffsetFromCollectionGroup(e,n){return ve.resolve(Js.min())}updateCollectionGroup(e,n,i){return ve.resolve()}updateIndexEntries(e,n){return ve.resolve()}}class tP{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n]||new Zt(vt.comparator),l=!a.has(i);return this.index[n]=a.add(i),l}has(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Zt(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MA=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(MA,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Pl(0)}static lr(){return new Pl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="LruGarbageCollector",nP=1048576;function R1([t,e],[n,i]){const a=$e(t,n);return a===0?$e(e,i):a}class rP{constructor(e){this.Er=e,this.buffer=new Zt(R1),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();R1(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class iP{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){we(A1,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){jl(n)?we(A1,"Ignoring IndexedDB error during garbage collection: ",n):await Bl(n)}await this.mr(3e5)})}}class sP{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return ve.resolve(Ff.le);const i=new rP(n);return this.gr.forEachTarget(e,a=>i.Rr(a.sequenceNumber)).next(()=>this.gr.yr(e,a=>i.Rr(a))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.gr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(S1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),S1):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let i,a,l,c,d,f,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(e,a))).next(v=>(i=v,d=Date.now(),this.removeTargets(e,i,n))).next(v=>(l=v,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(m=Date.now(),ul()<=Qe.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(f-d)+`ms
	Removed ${v} documents in `+(m-f)+`ms
Total Duration: ${m-y}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v})))}}function aP(t,e){return new sP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.changes=new ao(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ve.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n,i,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(i!==null&&yu(i.mutation,a,sr.empty(),_t.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,We()).next(()=>i))}getLocalViewOfDocuments(e,n,i=We()){const a=Ga();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,i).next(l=>{let c=uu();return l.forEach((d,f)=>{c=c.insert(d,f.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const i=Ga();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,We()))}populateOverlays(e,n,i){const a=[];return i.forEach(l=>{n.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{n.set(c,d)})})}computeViews(e,n,i,a){let l=is();const c=pu(),d=function(){return pu()}();return n.forEach((f,m)=>{const y=i.get(m.key);a.has(m.key)&&(y===void 0||y.mutation instanceof aa)?l=l.insert(m.key,m):y!==void 0?(c.set(m.key,y.mutation.getFieldMask()),yu(y.mutation,m,y.mutation.getFieldMask(),_t.now())):c.set(m.key,sr.empty())}),this.recalculateAndSaveOverlays(e,l).next(f=>(f.forEach((m,y)=>c.set(m,y)),n.forEach((m,y)=>{var v;return d.set(m,new lP(y,(v=c.get(m))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(e,n){const i=pu();let a=new St((c,d)=>c-d),l=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const d of c)d.keys().forEach(f=>{const m=n.get(f);if(m===null)return;let y=i.get(f)||sr.empty();y=d.applyToLocalView(m,y),i.set(f,y);const v=(a.get(d.batchId)||We()).add(f);a=a.insert(d.batchId,v)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,y=f.value,v=pA();y.forEach(b=>{if(!l.has(b)){const x=wA(n.get(b),i.get(b));x!==null&&v.set(b,x),l=l.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,v))}return ve.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,a){return function(c){return Ce.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,a):this.getDocumentsMatchingCollectionQuery(e,n,i,a)}getNextDocuments(e,n,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,a-l.size):ve.resolve(Ga());let d=Iu,f=l;return c.next(m=>ve.forEach(m,(y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(y)?ve.resolve():this.remoteDocumentCache.getEntry(e,y).next(b=>{f=f.insert(y,b)}))).next(()=>this.populateOverlays(e,m,l)).next(()=>this.computeViews(e,f,m,We())).next(y=>({batchId:d,changes:mA(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next(i=>{let a=uu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,i,a){const l=n.collectionGroup;let c=uu();return this.indexManager.getCollectionParents(e,l).next(d=>ve.forEach(d,f=>{const m=function(v,b){return new Hl(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,i,a).next(y=>{y.forEach((v,b)=>{c=c.insert(v,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,l,a))).next(c=>{l.forEach((f,m)=>{const y=m.getKey();c.get(y)===null&&(c=c.insert(y,Tn.newInvalidDocument(y)))});let d=uu();return c.forEach((f,m)=>{const y=l.get(f);y!==void 0&&yu(y.mutation,m,sr.empty(),_t.now()),Kf(n,m)&&(d=d.insert(f,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ve.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:vi(a.createTime)}}(n)),ve.resolve()}getNamedQuery(e,n){return ve.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(a){return{name:a.name,query:J6(a.bundledQuery),readTime:vi(a.readTime)}}(n)),ve.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(){this.overlays=new St(Ce.comparator),this.Qr=new Map}getOverlay(e,n){return ve.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Ga();return ve.forEach(n,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((a,l)=>{this.St(e,n,l)}),ve.resolve()}removeOverlaysForBatchId(e,n,i){const a=this.Qr.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(i)),ve.resolve()}getOverlaysForCollection(e,n,i){const a=Ga(),l=n.length+1,c=new Ce(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===l&&f.largestBatchId>i&&a.set(f.getKey(),f)}return ve.resolve(a)}getOverlaysForCollectionGroup(e,n,i,a){let l=new St((m,y)=>m-y);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>i){let y=l.get(m.largestBatchId);y===null&&(y=Ga(),l=l.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=Ga(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,y)=>d.set(m,y)),!(d.size()>=a)););return ve.resolve(d)}St(e,n,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Qr.get(a.largestBatchId).delete(i.key);this.Qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new I6(n,i));let l=this.Qr.get(n);l===void 0&&(l=We(),this.Qr.set(n,l)),this.Qr.set(n,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ve.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(){this.$r=new Zt(on.Ur),this.Kr=new Zt(on.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const i=new on(e,n);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.zr(new on(e,n))}jr(e,n){e.forEach(i=>this.removeReference(i,n))}Hr(e){const n=new Ce(new vt([])),i=new on(n,e),a=new on(n,e+1),l=[];return this.Kr.forEachInRange([i,a],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Ce(new vt([])),i=new on(n,e),a=new on(n,e+1);let l=We();return this.Kr.forEachInRange([i,a],c=>{l=l.add(c.key)}),l}containsKey(e){const n=new on(e,0),i=this.$r.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class on{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Ce.comparator(e.key,n.key)||$e(e.Zr,n.Zr)}static Wr(e,n){return $e(e.Zr,n.Zr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Zt(on.Ur)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new C6(l,n,i,a);this.mutationQueue.push(c);for(const d of a)this.Xr=this.Xr.add(new on(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ve.resolve(c)}lookupMutationBatch(e,n){return ve.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,a=this.ti(i),l=a<0?0:a;return ve.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?fy:this.nr-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new on(n,0),a=new on(n,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([i,a],c=>{const d=this.ei(c.Zr);l.push(d)}),ve.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Zt($e);return n.forEach(a=>{const l=new on(a,0),c=new on(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],d=>{i=i.add(d.Zr)})}),ve.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,a=i.length+1;let l=i;Ce.isDocumentKey(l)||(l=l.child(""));const c=new on(new Ce(l),0);let d=new Zt($e);return this.Xr.forEachWhile(f=>{const m=f.key.path;return!!i.isPrefixOf(m)&&(m.length===a&&(d=d.add(f.Zr)),!0)},c),ve.resolve(this.ni(d))}ni(e){const n=[];return e.forEach(i=>{const a=this.ei(i);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){lt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return ve.forEach(n.mutations,a=>{const l=new on(a.key,n.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,n){const i=new on(n,0),a=this.Xr.firstAfterOrEqual(i);return ve.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.ii=e,this.docs=function(){return new St(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,a=this.docs.get(i),l=a?a.size:0,c=this.ii(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ve.resolve(i?i.document.mutableCopy():Tn.newInvalidDocument(n))}getEntries(e,n){let i=is();return n.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Tn.newInvalidDocument(a))}),ve.resolve(i)}getDocumentsMatchingQuery(e,n,i,a){let l=is();const c=n.path,d=new Ce(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:y}}=f.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||q5($5(y),i)<=0||(a.has(y.key)||Kf(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return ve.resolve(l)}getAllFromCollectionGroup(e,n,i,a){Me(9500)}si(e,n){return ve.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new mP(this)}getSize(e){return ve.resolve(this.size)}}class mP extends oP{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?n.push(this.Br.addEntry(e,a)):this.Br.removeEntry(i)}),ve.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.persistence=e,this.oi=new ao(n=>py(n),yy),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this._i=0,this.ai=new wy,this.targetCount=0,this.ui=Pl.cr()}forEachTarget(e,n){return this.oi.forEach((i,a)=>n(a)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this._i&&(this._i=n),ve.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Pl(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ve.resolve()}updateTargetData(e,n){return this.Tr(n),ve.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,n,i){let a=0;const l=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),ve.waitFor(l).next(()=>a)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,n){const i=this.oi.get(n)||null;return ve.resolve(i)}addMatchingKeys(e,n,i){return this.ai.Gr(n,i),ve.resolve()}removeMatchingKeys(e,n,i){this.ai.jr(n,i);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),ve.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ve.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ai.Yr(n);return ve.resolve(i)}containsKey(e,n){return ve.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n){this.ci={},this.overlays={},this.li=new Ff(0),this.hi=!1,this.hi=!0,this.Pi=new hP,this.referenceDelegate=e(this),this.Ti=new pP(this),this.indexManager=new eP,this.remoteDocumentCache=function(a){return new gP(a)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new Z6(n),this.Ei=new uP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ci[e.toKey()];return i||(i=new fP(n,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,i){we("MemoryPersistence","Starting transaction:",e);const a=new yP(this.li.next());return this.referenceDelegate.di(),i(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(e,n){return ve.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,n)))}}class yP extends G5{constructor(e){super(),this.currentSequenceNumber=e}}class xy{constructor(e){this.persistence=e,this.Vi=new wy,this.mi=null}static fi(e){return new xy(e)}get gi(){if(this.mi)return this.mi;throw Me(60996)}addReference(e,n,i){return this.Vi.addReference(i,n),this.gi.delete(i.toString()),ve.resolve()}removeReference(e,n,i){return this.Vi.removeReference(i,n),this.gi.add(i.toString()),ve.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ve.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(a=>this.gi.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>i.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.gi,i=>{const a=Ce.fromPath(i);return this.pi(e,a).next(l=>{l||n.removeEntry(a,Le.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(i=>{i?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ve.or([()=>ve.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class wf{constructor(e,n){this.persistence=e,this.yi=new ao(i=>K5(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=aP(this,n)}static fi(e,n){return new wf(e,n)}di(){}Ai(e){return ve.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(a=>i+a))}br(e){let n=0;return this.yr(e,i=>{n++}).next(()=>n)}yr(e,n){return ve.forEach(this.yi,(i,a)=>this.Dr(e,i,a).next(l=>l?ve.resolve():n(a)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(e,c=>this.Dr(e,c,n).next(d=>{d||(i++,l.removeEntry(c,Le.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ve.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),ve.resolve()}removeReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ve.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qh(e.data.value)),n}Dr(e,n,i){return ve.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.yi.get(n);return ve.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,n,i,a){this.targetId=e,this.fromCache=n,this.ds=i,this.As=a}static Rs(e,n){let i=We(),a=We();for(const l of n.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Ty(e,n.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Y3()?8:Y5(An())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,i,a){const l={result:null};return this.ws(e,n).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(e,n,a,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new vP;return this.Ss(e,n,c).next(d=>{if(l.result=d,this.fs)return this.Ds(e,n,c,d.size)})}).next(()=>l.result)}Ds(e,n,i,a){return i.documentReadCount<this.gs?(ul()<=Qe.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",dl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ve.resolve()):(ul()<=Qe.DEBUG&&we("QueryEngine","Query:",dl(n),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ps*a?(ul()<=Qe.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",dl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yi(n))):ve.resolve())}ws(e,n){if(m1(n))return ve.resolve(null);let i=yi(n);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=x0(n,null,"F"),i=yi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=We(...l);return this.ys.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(f=>{const m=this.vs(n,d);return this.Cs(n,m,c,f.readTime)?this.ws(e,x0(n,null,"F")):this.Fs(e,m,n,f)}))})))}bs(e,n,i,a){return m1(n)||a.isEqual(Le.min())?ve.resolve(null):this.ys.getDocuments(e,i).next(l=>{const c=this.vs(n,l);return this.Cs(n,c,i,a)?ve.resolve(null):(ul()<=Qe.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),dl(n)),this.Fs(e,c,n,H5(a,Iu)).next(d=>d))})}vs(e,n){let i=new Zt(fA(e));return n.forEach((a,l)=>{Kf(e,l)&&(i=i.add(l))}),i}Cs(e,n,i,a){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,n,i){return ul()<=Qe.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",dl(n)),this.ys.getDocumentsMatchingQuery(e,n,Js.min(),i)}Fs(e,n,i,a){return this.ys.getDocumentsMatchingQuery(e,i,a).next(l=>(n.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="LocalStore",bP=3e8;class EP{constructor(e,n,i,a){this.persistence=e,this.Ms=n,this.serializer=a,this.xs=new St($e),this.Os=new ao(l=>py(l),yy),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cP(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function wP(t,e,n,i){return new EP(t,e,n,i)}async function VA(t,e){const n=ze(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let a;return n.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,n.Ls(e),n.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],d=[];let f=We();for(const m of a){c.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}for(const m of l){d.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}return n.localDocuments.getDocuments(i,f).next(m=>({ks:m,removedBatchIds:c,addedBatchIds:d}))})})}function xP(t,e){const n=ze(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=n.Bs.newChangeBuffer({trackRemovals:!0});return function(d,f,m,y){const v=m.batch,b=v.keys();let x=ve.resolve();return b.forEach(O=>{x=x.next(()=>y.getEntry(f,O)).next(k=>{const M=m.docVersions.get(O);lt(M!==null,48541),k.version.compareTo(M)<0&&(v.applyToRemoteDocument(k,m),k.isValidDocument()&&(k.setReadTime(m.commitVersion),y.addEntry(k)))})}),x.next(()=>d.mutationQueue.removeMutationBatch(f,v))}(n,i,e,l).next(()=>l.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let f=We();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f}(e))).next(()=>n.localDocuments.getDocuments(i,a))})}function LA(t){const e=ze(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function TP(t,e){const n=ze(t),i=e.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const d=[];e.targetChanges.forEach((y,v)=>{const b=a.get(v);if(!b)return;d.push(n.Ti.removeMatchingKeys(l,y.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(l,y.addedDocuments,v)));let x=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?x=x.withResumeToken(yn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):y.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(y.resumeToken,i)),a=a.insert(v,x),function(k,M,V){return k.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=bP?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(b,x,y)&&d.push(n.Ti.updateTargetData(l,x))});let f=is(),m=We();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(SP(l,c,e.documentUpdates).next(y=>{f=y.qs,m=y.Qs})),!i.isEqual(Le.min())){const y=n.Ti.getLastRemoteSnapshotVersion(l).next(v=>n.Ti.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(y)}return ve.waitFor(d).next(()=>c.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,f,m)).next(()=>f)}).then(l=>(n.xs=a,l))}function SP(t,e,n){let i=We(),a=We();return n.forEach(l=>i=i.add(l)),e.getEntries(t,i).next(l=>{let c=is();return n.forEach((d,f)=>{const m=l.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(d)),f.isNoDocument()&&f.version.isEqual(Le.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):we(Sy,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{qs:c,Qs:a}})}function AP(t,e){const n=ze(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=fy),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function RP(t,e){const n=ze(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return n.Ti.getTargetData(i,e).next(l=>l?(a=l,ve.resolve(a)):n.Ti.allocateTargetId(i).next(c=>(a=new $s(e,c,"TargetPurposeListen",i.currentSequenceNumber),n.Ti.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=n.xs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.xs=n.xs.insert(i.targetId,i),n.Os.set(e,i.targetId)),i})}async function N0(t,e,n){const i=ze(t),a=i.xs.get(e),l=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!jl(c))throw c;we(Sy,`Failed to update sequence numbers for target ${e}: ${c}`)}i.xs=i.xs.remove(e),i.Os.delete(a.target)}function N1(t,e,n){const i=ze(t);let a=Le.min(),l=We();return i.persistence.runTransaction("Execute query","readwrite",c=>function(f,m,y){const v=ze(f),b=v.Os.get(y);return b!==void 0?ve.resolve(v.xs.get(b)):v.Ti.getTargetData(m,y)}(i,c,yi(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(c,d.targetId).next(f=>{l=f})}).next(()=>i.Ms.getDocumentsMatchingQuery(c,e,n?a:Le.min(),n?l:We())).next(d=>(NP(i,g6(e),d),{documents:d,$s:l})))}function NP(t,e,n){let i=t.Ns.get(e)||Le.min();n.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),t.Ns.set(e,i)}class C1{constructor(){this.activeTargetIds=b6()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CP{constructor(){this.xo=new C1,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,i){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new C1,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="ConnectivityMonitor";class k1{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){we(I1,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){we(I1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh=null;function C0(){return Mh===null?Mh=function(){return 268435456+Math.round(2147483648*Math.random())}():Mh++,"0x"+Mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="RestConnection",kP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DP{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${i}/databases/${a}`,this.Go=this.databaseId.database===pf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}zo(e,n,i,a,l){const c=C0(),d=this.jo(e,n.toUriEncodedString());we(Up,`Sending RPC '${e}' ${c}:`,d,i);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,a,l);const{host:m}=new URL(d),y=so(m);return this.Jo(e,d,f,i,y).then(v=>(we(Up,`Received RPC '${e}' ${c}: `,v),v),v=>{throw kl(Up,`RPC '${e}' ${c} failed with error: `,v,"url: ",d,"request:",i),v})}Yo(e,n,i,a,l,c){return this.zo(e,n,i,a,l)}Ho(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ul}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}jo(e,n){const i=kP[e];return`${this.Ko}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class MP extends DP{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,a,l){const c=C0();return new Promise((d,f)=>{const m=new US;m.setWithCredentials(!0),m.listenOnce(BS.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case $h.NO_ERROR:const v=m.getResponseJson();we(En,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),d(v);break;case $h.TIMEOUT:we(En,`RPC '${e}' ${c} timed out`),f(new xe(ye.DEADLINE_EXCEEDED,"Request time out"));break;case $h.HTTP_ERROR:const b=m.getStatus();if(we(En,`RPC '${e}' ${c} failed with status:`,b,"response text:",m.getResponseText()),b>0){let x=m.getResponseJson();Array.isArray(x)&&(x=x[0]);const O=x?.error;if(O&&O.status&&O.message){const k=function(V){const q=V.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(q)>=0?q:ye.UNKNOWN}(O.status);f(new xe(k,O.message))}else f(new xe(ye.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new xe(ye.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{h_:e,streamId:c,P_:m.getLastErrorCode(),T_:m.getLastError()})}}finally{we(En,`RPC '${e}' ${c} completed.`)}});const y=JSON.stringify(a);we(En,`RPC '${e}' ${c} sending request:`,a),m.send(n,"POST",y,i,15)})}I_(e,n,i){const a=C0(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=$S(),d=HS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const y=l.join("");we(En,`Creating RPC '${e}' stream ${a}: ${y}`,f);const v=c.createWebChannel(y,f);this.E_(v);let b=!1,x=!1;const O=new OP({Zo:M=>{x?we(En,`Not sending because RPC '${e}' stream ${a} is closed:`,M):(b||(we(En,`Opening RPC '${e}' stream ${a} transport.`),v.open(),b=!0),we(En,`RPC '${e}' stream ${a} sending:`,M),v.send(M))},Xo:()=>v.close()}),k=(M,V,q)=>{M.listen(V,F=>{try{q(F)}catch(j){setTimeout(()=>{throw j},0)}})};return k(v,cu.EventType.OPEN,()=>{x||(we(En,`RPC '${e}' stream ${a} transport opened.`),O.__())}),k(v,cu.EventType.CLOSE,()=>{x||(x=!0,we(En,`RPC '${e}' stream ${a} transport closed`),O.u_(),this.d_(v))}),k(v,cu.EventType.ERROR,M=>{x||(x=!0,kl(En,`RPC '${e}' stream ${a} transport errored. Name:`,M.name,"Message:",M.message),O.u_(new xe(ye.UNAVAILABLE,"The operation could not be completed")))}),k(v,cu.EventType.MESSAGE,M=>{var V;if(!x){const q=M.data[0];lt(!!q,16349);const F=q,j=F?.error||((V=F[0])===null||V===void 0?void 0:V.error);if(j){we(En,`RPC '${e}' stream ${a} received error:`,j);const ee=j.status;let Z=function(C){const z=$t[C];if(z!==void 0)return TA(z)}(ee),N=j.message;Z===void 0&&(Z=ye.INTERNAL,N="Unknown error status: "+ee+" with message "+j.message),x=!0,O.u_(new xe(Z,N)),v.close()}else we(En,`RPC '${e}' stream ${a} received:`,q),O.c_(q)}}),k(d,jS.STAT_EVENT,M=>{M.stat===p0.PROXY?we(En,`RPC '${e}' stream ${a} detected buffering proxy`):M.stat===p0.NOPROXY&&we(En,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{O.a_()},0),O}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Bp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t){return new z6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n,i=1e3,a=1.5,l=6e4){this.xi=e,this.timerId=n,this.A_=i,this.R_=a,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),a=Math.max(0,n-i);a>0&&we("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="PersistentStream";class UA{constructor(e,n,i,a,l,c,d,f){this.xi=e,this.S_=i,this.D_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new zA(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===ye.RESOURCE_EXHAUSTED?(rs(n.toString()),rs("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.v_===n&&this.z_(i,a)},i=>{e(()=>{const a=new xe(ye.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(a)})})}z_(e,n){const i=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{i(()=>this.j_(a))}),this.stream.onMessage(a=>{i(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return we(D1,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(we(D1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PP extends UA{constructor(e,n,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,a,c),this.serializer=l}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=j6(this.serializer,e),i=function(l){if(!("targetChange"in l))return Le.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Le.min():c.readTime?vi(c.readTime):Le.min()}(e);return this.listener.Y_(n,i)}Z_(e){const n={};n.database=R0(this.serializer),n.addTarget=function(l,c){let d;const f=c.target;if(d=E0(f)?{documents:q6(l,f)}:{query:F6(l,f).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=RA(l,c.resumeToken);const m=T0(l,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(Le.min())>0){d.readTime=Ef(l,c.snapshotVersion.toTimestamp());const m=T0(l,c.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const i=Y6(this.serializer,e);i&&(n.labels=i),this.Q_(n)}X_(e){const n={};n.database=R0(this.serializer),n.removeTarget=e,this.Q_(n)}}class VP extends UA{constructor(e,n,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,a,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=$6(e.writeResults,e.commitTime),i=vi(e.commitTime);return this.listener.ra(i,n)}ia(){const e={};e.database=R0(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>H6(this.serializer,i))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{}class zP extends LP{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new xe(ye.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,i,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(e,S0(n,i),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new xe(ye.UNKNOWN,l.toString())})}Yo(e,n,i,a,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(e,S0(n,i),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(ye.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class UP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(rs(n),this.ua=!1):we("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="RemoteStore";class BP{constructor(e,n,i,a,l){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{i.enqueueAndForget(async()=>{oo(this)&&(we(to,"Restarting streams for network reachability change."),await async function(f){const m=ze(f);m.da.add(4),await Yu(m),m.Va.set("Unknown"),m.da.delete(4),await tg(m)}(this))})}),this.Va=new UP(i,a)}}async function tg(t){if(oo(t))for(const e of t.Aa)await e(!0)}async function Yu(t){for(const e of t.Aa)await e(!1)}function BA(t,e){const n=ze(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Cy(n)?Ny(n):$l(n).N_()&&Ry(n,e))}function Ay(t,e){const n=ze(t),i=$l(n);n.Ea.delete(e),i.N_()&&jA(n,e),n.Ea.size===0&&(i.N_()?i.k_():oo(n)&&n.Va.set("Unknown"))}function Ry(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$l(t).Z_(e)}function jA(t,e){t.ma.Ke(e),$l(t).X_(e)}function Ny(t){t.ma=new M6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),$l(t).start(),t.Va.ca()}function Cy(t){return oo(t)&&!$l(t).O_()&&t.Ea.size>0}function oo(t){return ze(t).da.size===0}function HA(t){t.ma=void 0}async function jP(t){t.Va.set("Online")}async function HP(t){t.Ea.forEach((e,n)=>{Ry(t,e)})}async function $P(t,e){HA(t),Cy(t)?(t.Va.Pa(e),Ny(t)):t.Va.set("Unknown")}async function qP(t,e,n){if(t.Va.set("Online"),e instanceof AA&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ea.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ea.delete(d),a.ma.removeTarget(d))}(t,e)}catch(i){we(to,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await xf(t,i)}else if(e instanceof Yh?t.ma.Xe(e):e instanceof SA?t.ma.ot(e):t.ma.nt(e),!n.isEqual(Le.min()))try{const i=await LA(t.localStore);n.compareTo(i)>=0&&await function(l,c){const d=l.ma.It(c);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const y=l.Ea.get(m);y&&l.Ea.set(m,y.withResumeToken(f.resumeToken,c))}}),d.targetMismatches.forEach((f,m)=>{const y=l.Ea.get(f);if(!y)return;l.Ea.set(f,y.withResumeToken(yn.EMPTY_BYTE_STRING,y.snapshotVersion)),jA(l,f);const v=new $s(y.target,f,m,y.sequenceNumber);Ry(l,v)}),l.remoteSyncer.applyRemoteEvent(d)}(t,n)}catch(i){we(to,"Failed to raise snapshot:",i),await xf(t,i)}}async function xf(t,e,n){if(!jl(e))throw e;t.da.add(1),await Yu(t),t.Va.set("Offline"),n||(n=()=>LA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{we(to,"Retrying IndexedDB access"),await n(),t.da.delete(1),await tg(t)})}function $A(t,e){return e().catch(n=>xf(t,n,e))}async function ng(t){const e=ze(t),n=ra(e);let i=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:fy;for(;FP(e);)try{const a=await AP(e.localStore,i);if(a===null){e.Ia.length===0&&n.k_();break}i=a.batchId,GP(e,a)}catch(a){await xf(e,a)}qA(e)&&FA(e)}function FP(t){return oo(t)&&t.Ia.length<10}function GP(t,e){t.Ia.push(e);const n=ra(t);n.N_()&&n.ea&&n.ta(e.mutations)}function qA(t){return oo(t)&&!ra(t).O_()&&t.Ia.length>0}function FA(t){ra(t).start()}async function YP(t){ra(t).ia()}async function XP(t){const e=ra(t);for(const n of t.Ia)e.ta(n.mutations)}async function KP(t,e,n){const i=t.Ia.shift(),a=_y.from(i,e,n);await $A(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await ng(t)}async function QP(t,e){e&&ra(t).ea&&await async function(i,a){if(function(c){return D6(c)&&c!==ye.ABORTED}(a.code)){const l=i.Ia.shift();ra(i).L_(),await $A(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await ng(i)}}(t,e),qA(t)&&FA(t)}async function O1(t,e){const n=ze(t);n.asyncQueue.verifyOperationInProgress(),we(to,"RemoteStore received new credentials");const i=oo(n);n.da.add(3),await Yu(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await tg(n)}async function WP(t,e){const n=ze(t);e?(n.da.delete(2),await tg(n)):e||(n.da.add(2),await Yu(n),n.Va.set("Unknown"))}function $l(t){return t.fa||(t.fa=function(n,i,a){const l=ze(n);return l.oa(),new PP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(t.datastore,t.asyncQueue,{e_:jP.bind(null,t),n_:HP.bind(null,t),i_:$P.bind(null,t),Y_:qP.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),Cy(t)?Ny(t):t.Va.set("Unknown")):(await t.fa.stop(),HA(t))})),t.fa}function ra(t){return t.ga||(t.ga=function(n,i,a){const l=ze(n);return l.oa(),new VP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:YP.bind(null,t),i_:QP.bind(null,t),na:XP.bind(null,t),ra:KP.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await ng(t)):(await t.ga.stop(),t.Ia.length>0&&(we(to,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,n,i,a,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,a,l){const c=Date.now()+i,d=new Iy(e,n,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ky(t,e){if(rs("AsyncQueue",`${e}: ${t}`),jl(t))return new xe(ye.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{static emptySet(e){return new wl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ce.comparator(n.key,i.key):(n,i)=>Ce.comparator(n.key,i.key),this.keyedMap=uu(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new wl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.pa=new St(Ce.comparator)}track(e){const n=e.doc.key,i=this.pa.get(n);i?e.type!==0&&i.type===3?this.pa=this.pa.insert(n,e):e.type===3&&i.type!==1?this.pa=this.pa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.pa=this.pa.remove(n):e.type===1&&i.type===2?this.pa=this.pa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Me(63341,{Vt:e,ya:i}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,i)=>{e.push(i)}),e}}class Vl{constructor(e,n,i,a,l,c,d,f,m){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,n,i,a,l){const c=[];return n.forEach(d=>{c.push({type:0,doc:d})}),new Vl(e,n,wl.emptySet(n),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==i[a].type||!n[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class JP{constructor(){this.queries=P1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const a=ze(n),l=a.queries;a.queries=P1(),l.forEach((c,d)=>{for(const f of d.Sa)f.onError(i)})})(this,new xe(ye.ABORTED,"Firestore shutting down"))}}function P1(){return new ao(t=>hA(t),Xf)}async function e9(t,e){const n=ze(t);let i=3;const a=e.query;let l=n.queries.get(a);l?!l.Da()&&e.va()&&(i=2):(l=new ZP,i=e.va()?0:1);try{switch(i){case 0:l.ba=await n.onListen(a,!0);break;case 1:l.ba=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=ky(c,`Initialization of query '${dl(e.query)}' failed`);return void e.onError(d)}n.queries.set(a,l),l.Sa.push(e),e.Fa(n.onlineState),l.ba&&e.Ma(l.ba)&&Dy(n)}async function t9(t,e){const n=ze(t),i=e.query;let a=3;const l=n.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.va()?0:1:!l.Da()&&e.va()&&(a=2))}switch(a){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function n9(t,e){const n=ze(t);let i=!1;for(const a of e){const l=a.query,c=n.queries.get(l);if(c){for(const d of c.Sa)d.Ma(a)&&(i=!0);c.ba=a}}i&&Dy(n)}function r9(t,e,n){const i=ze(t),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(n);i.queries.delete(e)}function Dy(t){t.Ca.forEach(e=>{e.next()})}var I0,V1;(V1=I0||(I0={})).xa="default",V1.Cache="cache";class i9{constructor(e,n,i){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Vl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const i=n!=="Offline";return(!this.options.Qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==I0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.key=e}}class YA{constructor(e){this.key=e}}class s9{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=We(),this.mutatedKeys=We(),this.Za=fA(e),this.Xa=new wl(this.Za)}get eu(){return this.Ha}tu(e,n){const i=n?n.nu:new M1,a=n?n.Xa:this.Xa;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const f=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,v)=>{const b=a.get(y),x=Kf(this.query,v)?v:null,O=!!b&&this.mutatedKeys.has(b.key),k=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let M=!1;b&&x?b.data.isEqual(x.data)?O!==k&&(i.track({type:3,doc:x}),M=!0):this.ru(b,x)||(i.track({type:2,doc:x}),M=!0,(f&&this.Za(x,f)>0||m&&this.Za(x,m)<0)&&(d=!0)):!b&&x?(i.track({type:0,doc:x}),M=!0):b&&!x&&(i.track({type:1,doc:b}),M=!0,(f||m)&&(d=!0)),M&&(x?(c=c.add(x),l=k?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{Xa:c,nu:i,Cs:d,mutatedKeys:l}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,a){const l=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const c=e.nu.wa();c.sort((y,v)=>function(x,O){const k=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Vt:M})}};return k(x)-k(O)}(y.type,v.type)||this.Za(y.doc,v.doc)),this.iu(i),a=a!=null&&a;const d=n&&!a?this.su():[],f=this.Ya.size===0&&this.current&&!a?1:0,m=f!==this.Ja;return this.Ja=f,c.length!==0||m?{snapshot:new Vl(this.query,e.Xa,l,c,e.mutatedKeys,f===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new M1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=We(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return e.forEach(i=>{this.Ya.has(i)||n.push(new YA(i))}),this.Ya.forEach(i=>{e.has(i)||n.push(new GA(i))}),n}au(e){this.Ha=e.$s,this.Ya=We();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Vl.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Oy="SyncEngine";class a9{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class o9{constructor(e){this.key=e,this.cu=!1}}class l9{constructor(e,n,i,a,l,c){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new ao(d=>hA(d),Xf),this.Pu=new Map,this.Tu=new Set,this.Iu=new St(Ce.comparator),this.Eu=new Map,this.du=new wy,this.Au={},this.Ru=new Map,this.Vu=Pl.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function c9(t,e,n=!0){const i=JA(t);let a;const l=i.hu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.uu()):a=await XA(i,e,n,!0),a}async function u9(t,e){const n=JA(t);await XA(n,e,!0,!1)}async function XA(t,e,n,i){const a=await RP(t.localStore,yi(e)),l=a.targetId,c=t.sharedClientState.addLocalQueryTarget(l,n);let d;return i&&(d=await d9(t,e,l,c==="current",a.resumeToken)),t.isPrimaryClient&&n&&BA(t.remoteStore,a),d}async function d9(t,e,n,i,a){t.fu=(v,b,x)=>async function(k,M,V,q){let F=M.view.tu(V);F.Cs&&(F=await N1(k.localStore,M.query,!1).then(({documents:N})=>M.view.tu(N,F)));const j=q&&q.targetChanges.get(M.targetId),ee=q&&q.targetMismatches.get(M.targetId)!=null,Z=M.view.applyChanges(F,k.isPrimaryClient,j,ee);return z1(k,M.targetId,Z.ou),Z.snapshot}(t,v,b,x);const l=await N1(t.localStore,e,!0),c=new s9(e,l.$s),d=c.tu(l.documents),f=Gu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",a),m=c.applyChanges(d,t.isPrimaryClient,f);z1(t,n,m.ou);const y=new a9(e,n,c);return t.hu.set(e,y),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),m.snapshot}async function h9(t,e,n){const i=ze(t),a=i.hu.get(e),l=i.Pu.get(a.targetId);if(l.length>1)return i.Pu.set(a.targetId,l.filter(c=>!Xf(c,e))),void i.hu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await N0(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),n&&Ay(i.remoteStore,a.targetId),k0(i,a.targetId)}).catch(Bl)):(k0(i,a.targetId),await N0(i.localStore,a.targetId,!0))}async function f9(t,e){const n=ze(t),i=n.hu.get(e),a=n.Pu.get(i.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ay(n.remoteStore,i.targetId))}async function g9(t,e,n){const i=E9(t);try{const a=await function(c,d){const f=ze(c),m=_t.now(),y=d.reduce((x,O)=>x.add(O.key),We());let v,b;return f.persistence.runTransaction("Locally write mutations","readwrite",x=>{let O=is(),k=We();return f.Bs.getEntries(x,y).next(M=>{O=M,O.forEach((V,q)=>{q.isValidDocument()||(k=k.add(V))})}).next(()=>f.localDocuments.getOverlayedDocuments(x,O)).next(M=>{v=M;const V=[];for(const q of d){const F=R6(q,v.get(q.key).overlayedDocument);F!=null&&V.push(new aa(q.key,F,rA(F.value.mapValue),ar.exists(!0)))}return f.mutationQueue.addMutationBatch(x,m,V,d)}).next(M=>{b=M;const V=M.applyToLocalDocumentSet(v,k);return f.documentOverlayCache.saveOverlays(x,M.batchId,V)})}).then(()=>({batchId:b.batchId,changes:mA(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,d,f){let m=c.Au[c.currentUser.toKey()];m||(m=new St($e)),m=m.insert(d,f),c.Au[c.currentUser.toKey()]=m}(i,a.batchId,n),await Xu(i,a.changes),await ng(i.remoteStore)}catch(a){const l=ky(a,"Failed to persist write");n.reject(l)}}async function KA(t,e){const n=ze(t);try{const i=await TP(n.localStore,e);e.targetChanges.forEach((a,l)=>{const c=n.Eu.get(l);c&&(lt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.cu=!0:a.modifiedDocuments.size>0?lt(c.cu,14607):a.removedDocuments.size>0&&(lt(c.cu,42227),c.cu=!1))}),await Xu(n,i,e)}catch(i){await Bl(i)}}function L1(t,e,n){const i=ze(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const a=[];i.hu.forEach((l,c)=>{const d=c.view.Fa(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const f=ze(c);f.onlineState=d;let m=!1;f.queries.forEach((y,v)=>{for(const b of v.Sa)b.Fa(d)&&(m=!0)}),m&&Dy(f)}(i.eventManager,e),a.length&&i.lu.Y_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function m9(t,e,n){const i=ze(t);i.sharedClientState.updateQueryState(e,"rejected",n);const a=i.Eu.get(e),l=a&&a.key;if(l){let c=new St(Ce.comparator);c=c.insert(l,Tn.newNoDocument(l,Le.min()));const d=We().add(l),f=new Jf(Le.min(),new Map,new St($e),c,d);await KA(i,f),i.Iu=i.Iu.remove(l),i.Eu.delete(e),My(i)}else await N0(i.localStore,e,!1).then(()=>k0(i,e,n)).catch(Bl)}async function p9(t,e){const n=ze(t),i=e.batch.batchId;try{const a=await xP(n.localStore,e);WA(n,i,null),QA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Xu(n,a)}catch(a){await Bl(a)}}async function y9(t,e,n){const i=ze(t);try{const a=await function(c,d){const f=ze(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return f.mutationQueue.lookupMutationBatch(m,d).next(v=>(lt(v!==null,37113),y=v.keys(),f.mutationQueue.removeMutationBatch(m,v))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,y,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>f.localDocuments.getDocuments(m,y))})}(i.localStore,e);WA(i,e,n),QA(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Xu(i,a)}catch(a){await Bl(a)}}function QA(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function WA(t,e,n){const i=ze(t);let a=i.Au[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(n?l.reject(n):l.resolve(),a=a.remove(e)),i.Au[i.currentUser.toKey()]=a}}function k0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Pu.get(e))t.hu.delete(i),n&&t.lu.gu(i,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(i=>{t.du.containsKey(i)||ZA(t,i)})}function ZA(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(Ay(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),My(t))}function z1(t,e,n){for(const i of n)i instanceof GA?(t.du.addReference(i.key,e),v9(t,i)):i instanceof YA?(we(Oy,"Document no longer in limbo: "+i.key),t.du.removeReference(i.key,e),t.du.containsKey(i.key)||ZA(t,i.key)):Me(19791,{pu:i})}function v9(t,e){const n=e.key,i=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(i)||(we(Oy,"New document in limbo: "+n),t.Tu.add(i),My(t))}function My(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Ce(vt.fromString(e)),i=t.Vu.next();t.Eu.set(i,new o9(n)),t.Iu=t.Iu.insert(n,i),BA(t.remoteStore,new $s(yi(uA(n.path)),i,"TargetPurposeLimboResolution",Ff.le))}}async function Xu(t,e,n){const i=ze(t),a=[],l=[],c=[];i.hu.isEmpty()||(i.hu.forEach((d,f)=>{c.push(i.fu(f,e,n).then(m=>{var y;if((m||n)&&i.isPrimaryClient){const v=m?!m.fromCache:(y=n?.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(m){a.push(m);const v=Ty.Rs(f.targetId,m);l.push(v)}}))}),await Promise.all(c),i.lu.Y_(a),await async function(f,m){const y=ze(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>ve.forEach(m,b=>ve.forEach(b.ds,x=>y.persistence.referenceDelegate.addReference(v,b.targetId,x)).next(()=>ve.forEach(b.As,x=>y.persistence.referenceDelegate.removeReference(v,b.targetId,x)))))}catch(v){if(!jl(v))throw v;we(Sy,"Failed to update sequence numbers: "+v)}for(const v of m){const b=v.targetId;if(!v.fromCache){const x=y.xs.get(b),O=x.snapshotVersion,k=x.withLastLimboFreeSnapshotVersion(O);y.xs=y.xs.insert(b,k)}}}(i.localStore,l))}async function _9(t,e){const n=ze(t);if(!n.currentUser.isEqual(e)){we(Oy,"User change. New user:",e.toKey());const i=await VA(n.localStore,e);n.currentUser=e,function(l,c){l.Ru.forEach(d=>{d.forEach(f=>{f.reject(new xe(ye.CANCELLED,c))})}),l.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Xu(n,i.ks)}}function b9(t,e){const n=ze(t),i=n.Eu.get(e);if(i&&i.cu)return We().add(i.key);{let a=We();const l=n.Pu.get(e);if(!l)return a;for(const c of l){const d=n.hu.get(c);a=a.unionWith(d.view.eu)}return a}}function JA(t){const e=ze(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=KA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m9.bind(null,e),e.lu.Y_=n9.bind(null,e.eventManager),e.lu.gu=r9.bind(null,e.eventManager),e}function E9(t){const e=ze(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=p9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y9.bind(null,e),e}class Tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=eg(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return wP(this.persistence,new _P,e.initialUser,this.serializer)}Su(e){return new PA(xy.fi,this.serializer)}bu(e){return new CP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tf.provider={build:()=>new Tf};class w9 extends Tf{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){lt(this.persistence.referenceDelegate instanceof wf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new iP(i,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new PA(i=>wf.fi(i,n),this.serializer)}}class D0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>L1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_9.bind(null,this.syncEngine),await WP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JP}()}createDatastore(e){const n=eg(e.databaseInfo.databaseId),i=function(l){return new MP(l)}(e.databaseInfo);return function(l,c,d,f){return new zP(l,c,d,f)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,a,l,c,d){return new BP(i,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,n=>L1(this.syncEngine,n,0),function(){return k1.C()?new k1:new IP}())}createSyncEngine(e,n){return function(a,l,c,d,f,m,y){const v=new l9(a,l,c,d,f,m);return y&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const l=ze(a);we(to,"RemoteStore shutting down."),l.da.add(5),await Yu(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}D0.provider={build:()=>new D0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):rs("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="FirestoreClient";class T9{constructor(e,n,i,a,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=a,this.user=wn.UNAUTHENTICATED,this.clientId=YS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{we(ia,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(we(ia,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ky(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function jp(t,e){t.asyncQueue.verifyOperationInProgress(),we(ia,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async a=>{i.isEqual(a)||(await VA(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function U1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await S9(t);we(ia,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>O1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,a)=>O1(e.remoteStore,a)),t._onlineComponents=e}async function S9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we(ia,"Using user provided OfflineComponentProvider");try{await jp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===ye.FAILED_PRECONDITION||a.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;kl("Error using user provided cache. Falling back to memory cache: "+n),await jp(t,new Tf)}}else we(ia,"Using default OfflineComponentProvider"),await jp(t,new w9(void 0));return t._offlineComponents}async function e2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we(ia,"Using user provided OnlineComponentProvider"),await U1(t,t._uninitializedComponentsProvider._online)):(we(ia,"Using default OnlineComponentProvider"),await U1(t,new D0))),t._onlineComponents}function A9(t){return e2(t).then(e=>e.syncEngine)}async function R9(t){const e=await e2(t),n=e.eventManager;return n.onListen=c9.bind(null,e.syncEngine),n.onUnlisten=h9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=u9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=f9.bind(null,e.syncEngine),n}function N9(t,e,n={}){const i=new Ks;return t.asyncQueue.enqueueAndForget(async()=>function(l,c,d,f,m){const y=new x9({next:b=>{y.xu(),c.enqueueAndForget(()=>t9(l,v)),b.fromCache&&f.source==="server"?m.reject(new xe(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(b)},error:b=>m.reject(b)}),v=new i9(d,y,{includeMetadataChanges:!0,Qa:!0});return e9(l,v)}(await R9(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(t,e,n){if(!n)throw new xe(ye.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function C9(t,e,n,i){if(e===!0&&i===!0)throw new xe(ye.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function j1(t){if(!Ce.isDocumentKey(t))throw new xe(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function H1(t){if(Ce.isDocumentKey(t))throw new xe(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me(12329,{type:typeof t})}function no(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rg(t);throw new xe(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="firestore.googleapis.com",$1=!0;class q1{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=r2,this.ssl=$1}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:$1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=MA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nP)throw new xe(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}C9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=t2((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new xe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new xe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new xe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ig{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new O5;switch(i.type){case"firstParty":return new L5(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new xe(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=B1.get(n);i&&(we("ComponentProvider","Removing Datastore"),B1.delete(n),i.terminate())}(this),Promise.resolve()}}function I9(t,e,n,i={}){var a;t=no(t,ig);const l=so(e),c=t._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;l&&(ay(`https://${f}`),oy("Firestore",!0)),c.host!==r2&&c.host!==f&&kl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:f,ssl:l,emulatorOptions:i});if(!Za(m,d)&&(t._setSettings(m),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=wn.MOCK_USER;else{y=z3(i.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new xe(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new wn(b)}t._authCredentials=new M5(new FS(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new lo(this.firestore,e,this._query)}}class or{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class Qs extends lo{constructor(e,n,i){super(e,n,uA(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new Ce(e))}withConverter(e){return new Qs(this.firestore,e,this._path)}}function Py(t,e,...n){if(t=Dt(t),n2("collection","path",e),t instanceof ig){const i=vt.fromString(e,...n);return H1(i),new Qs(t,null,i)}{if(!(t instanceof or||t instanceof Qs))throw new xe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(vt.fromString(e,...n));return H1(i),new Qs(t.firestore,null,i)}}function ql(t,e,...n){if(t=Dt(t),arguments.length===1&&(e=YS.newId()),n2("doc","path",e),t instanceof ig){const i=vt.fromString(e,...n);return j1(i),new or(t,null,new Ce(i))}{if(!(t instanceof or||t instanceof Qs))throw new xe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(vt.fromString(e,...n));return j1(i),new or(t.firestore,t instanceof Qs?t.converter:null,new Ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="AsyncQueue";class G1{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new zA(this,"async_queue_retry"),this.rc=()=>{const i=Bp();i&&we(F1,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=e;const n=Bp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Bp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Ks;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!jl(e))throw e;we(F1,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(i=>{throw this.Xu=i,this.ec=!1,rs("INTERNAL UNHANDLED ERROR: ",Y1(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=n,n}enqueueAfterDelay(e,n,i){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const a=Iy.createAndSchedule(this,e,n,i,l=>this.uc(l));return this.Zu.push(a),a}oc(){this.Xu&&Me(47125,{cc:Y1(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Y1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ku extends ig{constructor(e,n,i,a){super(e,n,i,a),this.type="firestore",this._queue=new G1,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new G1(e),this._firestoreClient=void 0,await e}}}function k9(t,e){const n=typeof t=="object"?t:uy(),i=typeof t=="string"?t:pf,a=qf(n,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=AS("firestore");l&&I9(a,...l)}return a}function Vy(t){if(t._terminated)throw new xe(ye.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||D9(t),t._firestoreClient}function D9(t){var e,n,i;const a=t._freezeSettings(),l=function(d,f,m,y){return new Z5(d,f,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,t2(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new T9(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&function(d){const f=d?._online.build();return{_offline:d?._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ll(yn.fromBase64String(e))}catch(n){throw new xe(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ll(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=/^__.*__$/;class M9{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new aa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fu(e,this.data,n,this.fieldTransforms)}}class i2{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new aa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function s2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ic:t})}}class By{constructor(e,n,i,a,l,c){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new By(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:i,Rc:!1});return a.Vc(e),a}mc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:i,Rc:!1});return a.Ec(),a}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Sf(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(s2(this.Ic)&&O9.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class P9{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||eg(e)}bc(e,n,i,a=!1){return new By({Ic:e,methodName:n,wc:i,path:pn.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jy(t){const e=t._freezeSettings(),n=eg(t._databaseId);return new P9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function a2(t,e,n,i,a,l={}){const c=t.bc(l.merge||l.mergeFields?2:0,e,n,a);Hy("Data must be an object, but it was:",c,i);const d=o2(i,c);let f,m;if(l.merge)f=new sr(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const b=O0(e,v,n);if(!c.contains(b))throw new xe(ye.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);c2(y,b)||y.push(b)}f=new sr(y),m=c.fieldTransforms.filter(v=>f.covers(v.field))}else f=null,m=c.fieldTransforms;return new M9(new jn(d),f,m)}class ag extends Ly{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ag}}function V9(t,e,n,i){const a=t.bc(1,e,n);Hy("Data must be an object, but it was:",a,i);const l=[],c=jn.empty();sa(i,(f,m)=>{const y=$y(e,f,n);m=Dt(m);const v=a.mc(y);if(m instanceof ag)l.push(y);else{const b=Qu(m,v);b!=null&&(l.push(y),c.set(y,b))}});const d=new sr(l);return new i2(c,d,a.fieldTransforms)}function L9(t,e,n,i,a,l){const c=t.bc(1,e,n),d=[O0(e,i,n)],f=[a];if(l.length%2!=0)throw new xe(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(O0(e,l[b])),f.push(l[b+1]);const m=[],y=jn.empty();for(let b=d.length-1;b>=0;--b)if(!c2(m,d[b])){const x=d[b];let O=f[b];O=Dt(O);const k=c.mc(x);if(O instanceof ag)m.push(x);else{const M=Qu(O,k);M!=null&&(m.push(x),y.set(x,M))}}const v=new sr(m);return new i2(y,v,c.fieldTransforms)}function z9(t,e,n,i=!1){return Qu(n,t.bc(i?4:3,e))}function Qu(t,e){if(l2(t=Dt(t)))return Hy("Unsupported field value:",e,t),o2(t,e);if(t instanceof Ly)return function(i,a){if(!s2(a.Ic))throw a.gc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(i,a){const l=[];let c=0;for(const d of i){let f=Qu(d,a.fc(c));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),c++}return{arrayValue:{values:l}}}(t,e)}return function(i,a){if((i=Dt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return E6(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=_t.fromDate(i);return{timestampValue:Ef(a.serializer,l)}}if(i instanceof _t){const l=new _t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ef(a.serializer,l)}}if(i instanceof zy)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ll)return{bytesValue:RA(a.serializer,i._byteString)};if(i instanceof or){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ey(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Uy)return function(c,d){return{mapValue:{fields:{[tA]:{stringValue:nA},[yf]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw d.gc("VectorValues must only contain numeric values.");return vy(d.serializer,m)})}}}}}}(i,a);throw a.gc(`Unsupported field value: ${rg(i)}`)}(t,e)}function o2(t,e){const n={};return KS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(t,(i,a)=>{const l=Qu(a,e.Ac(i));l!=null&&(n[i]=l)}),{mapValue:{fields:n}}}function l2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof zy||t instanceof Ll||t instanceof or||t instanceof Ly||t instanceof Uy)}function Hy(t,e,n){if(!l2(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const i=rg(n);throw i==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+i)}}function O0(t,e,n){if((e=Dt(e))instanceof sg)return e._internalPath;if(typeof e=="string")return $y(t,e);throw Sf("Field path arguments must be of type string or ",t,!1,void 0,n)}const U9=new RegExp("[~\\*/\\[\\]]");function $y(t,e,n){if(e.search(U9)>=0)throw Sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sg(...e.split("."))._internalPath}catch{throw Sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sf(t,e,n,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(l||c)&&(f+=" (found",l&&(f+=` in field ${i}`),c&&(f+=` in document ${a}`),f+=")"),new xe(ye.INVALID_ARGUMENT,d+t+f)}function c2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n,i,a,l){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new B9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(og("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class B9 extends u2{data(){return super.data()}}function og(t,e){return typeof e=="string"?$y(t,e):e instanceof sg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j9(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qy{}class d2 extends qy{}function H9(t,e,...n){let i=[];e instanceof qy&&i.push(e),i=i.concat(n),function(l){const c=l.filter(f=>f instanceof Fy).length,d=l.filter(f=>f instanceof lg).length;if(c>1||c>0&&d>0)throw new xe(ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)t=a._apply(t);return t}class lg extends d2{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new lg(e,n,i)}_apply(e){const n=this._parse(e);return h2(e._query,n),new lo(e.firestore,e.converter,w0(e._query,n))}_parse(e){const n=jy(e.firestore);return function(l,c,d,f,m,y,v){let b;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new xe(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){K1(v,y);const O=[];for(const k of v)O.push(X1(f,l,k));b={arrayValue:{values:O}}}else b=X1(f,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||K1(v,y),b=z9(d,c,v,y==="in"||y==="not-in");return Ft.create(m,y,b)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function $9(t,e,n){const i=e,a=og("where",t);return lg._create(a,i,n)}class Fy extends qy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fy(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Hr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const f of d)h2(c,f),c=w0(c,f)}(e._query,n),new lo(e.firestore,e.converter,w0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gy extends d2{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gy(e,n)}_apply(e){const n=function(a,l,c){if(a.startAt!==null)throw new xe(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new xe(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mu(l,c)}(e._query,this._field,this._direction);return new lo(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new Hl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,n))}}function q9(t,e="asc"){const n=e,i=og("orderBy",t);return Gy._create(i,n)}function X1(t,e,n){if(typeof(n=Dt(n))=="string"){if(n==="")throw new xe(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dA(e)&&n.indexOf("/")!==-1)throw new xe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(vt.fromString(n));if(!Ce.isDocumentKey(i))throw new xe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return c1(t,new Ce(i))}if(n instanceof or)return c1(t,n._key);throw new xe(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rg(n)}.`)}function K1(t,e){if(!Array.isArray(t)||t.length===0)throw new xe(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function h2(t,e){const n=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new xe(ye.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(ye.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class F9{convertValue(e,n="none"){switch(na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return sa(e,(a,l)=>{i[a]=this.convertValue(l,n)}),i}convertVectorValue(e){var n,i,a;const l=(a=(i=(n=e.fields)===null||n===void 0?void 0:n[yf].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(c=>Vt(c.doubleValue));return new Uy(l)}convertGeoPoint(e){return new zy(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Yf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ku(e));default:return null}}convertTimestamp(e){const n=ea(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=vt.fromString(e);lt(OA(i),9688,{name:e});const a=new Du(i.get(1),i.get(3)),l=new Ce(i.popFirst(5));return a.isEqual(n)||rs(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class G9 extends u2{constructor(e,n,i,a,l,c){super(e,n,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(og("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Xh extends G9{data(e={}){return super.data(e)}}class Y9{constructor(e,n,i,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Ph(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Xh(this._firestore,this._userDataWriter,i.key,i,new Ph(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const f=new Xh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ph(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const f=new Xh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ph(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,y=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:X9(d.type),doc:f,oldIndex:m,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function X9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:t})}}class K9 extends F9{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ll(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,n)}}function Yy(t){t=no(t,lo);const e=no(t.firestore,Ku),n=Vy(e),i=new K9(e);return j9(t._query),N9(n,t._query).then(a=>new Y9(e,i,t,a))}function Xy(t,e,n){t=no(t,or);const i=no(t.firestore,Ku),a=f2(t.converter,e,n);return Ky(i,[a2(jy(i),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,ar.none())])}function Q9(t){return Ky(no(t.firestore,Ku),[new Zf(t._key,ar.none())])}function Ky(t,e){return function(i,a){const l=new Ks;return i.asyncQueue.enqueueAndForget(async()=>g9(await A9(i),a,l)),l.promise}(Vy(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=jy(e)}set(e,n,i){this._verifyNotCommitted();const a=Hp(e,this._firestore),l=f2(a.converter,n,i),c=a2(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,ar.none())),this}update(e,n,i,...a){this._verifyNotCommitted();const l=Hp(e,this._firestore);let c;return c=typeof(n=Dt(n))=="string"||n instanceof sg?L9(this._dataReader,"WriteBatch.update",l._key,n,i,a):V9(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(c.toMutation(l._key,ar.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Hp(e,this._firestore);return this._mutations=this._mutations.concat(new Zf(n._key,ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hp(t,e){if((t=Dt(t)).firestore!==e)throw new xe(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(t){return Vy(t=no(t,Ku)),new W9(t,e=>Ky(t,e))}(function(e,n=!0){(function(a){Ul=a})(zl),Ja(new Zs("firestore",(i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Ku(new P5(i.getProvider("auth-internal")),new z5(c,i.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new xe(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Du(m.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),pi(Ww,Zw,e),pi(Ww,Zw,"esm2017")})();function Qy(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n}function m2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Z9=m2,p2=new $u("auth","Firebase",m2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new ly("@firebase/auth");function J9(t,...e){Af.logLevel<=Qe.WARN&&Af.warn(`Auth (${zl}): ${t}`,...e)}function Kh(t,...e){Af.logLevel<=Qe.ERROR&&Af.error(`Auth (${zl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t,...e){throw Wy(t,...e)}function _i(t,...e){return Wy(t,...e)}function y2(t,e,n){const i=Object.assign(Object.assign({},Z9()),{[e]:n});return new $u("auth","Firebase",i).create(e,{appName:t.name})}function Ji(t){return y2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wy(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return p2.create(t,...e)}function Oe(t,e,...n){if(!t)throw Wy(e,...n)}function Wi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kh(e),new Error(e)}function ss(t,e){t||Wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function eV(){return Q1()==="http:"||Q1()==="https:"}function Q1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eV()||q3()||"connection"in navigator)?navigator.onLine:!0}function nV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ss(n>e,"Short delay should be less than long delay!"),this.isMobile=j3()||F3()}get(){return tV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t,e){ss(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sV=new Wu(3e4,6e4);function oa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function la(t,e,n,i,a={}){return _2(t,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=qu(Object.assign({key:t.config.apiKey},c)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:f},l);return $3()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&so(t.emulatorConfig.host)&&(m.credentials="include"),v2.fetch()(await b2(t,t.config.apiHost,n,d),m)})}async function _2(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},rV),e);try{const a=new oV(t),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Vh(t,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vh(t,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Vh(t,"email-already-in-use",c);if(f==="USER_DISABLED")throw Vh(t,"user-disabled",c);const y=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw y2(t,y,m);$r(t,y)}}catch(a){if(a instanceof xi)throw a;$r(t,"network-request-failed",{message:String(a)})}}async function Zu(t,e,n,i,a={}){const l=await la(t,e,n,i,a);return"mfaPendingCredential"in l&&$r(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function b2(t,e,n,i){const a=`${e}${n}?${i}`,l=t,c=l.config.emulator?Zy(t.config,a):`${t.config.apiScheme}://${a}`;return iV.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function aV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(_i(this.auth,"network-request-failed")),sV.get())})}}function Vh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const a=_i(t,e,i);return a.customData._tokenResponse=n,a}function W1(t){return t!==void 0&&t.enterprise!==void 0}class lV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return aV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cV(t,e){return la(t,"GET","/v2/recaptchaConfig",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uV(t,e){return la(t,"POST","/v1/accounts:delete",e)}async function Rf(t,e){return la(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dV(t,e=!1){const n=Dt(t),i=await n.getIdToken(e),a=Jy(i);Oe(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:vu($p(a.auth_time)),issuedAtTime:vu($p(a.iat)),expirationTime:vu($p(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function $p(t){return Number(t)*1e3}function Jy(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Kh("JWT malformed, contained fewer than 3 sections"),null;try{const a=TS(n);return a?JSON.parse(a):(Kh("Failed to decode base64 JWT payload"),null)}catch(a){return Kh("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Z1(t){const e=Jy(t);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof xi&&hV(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function hV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vu(this.lastLoginAt),this.creationTime=vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nf(t){var e;const n=t.auth,i=await t.getIdToken(),a=await Lu(t,Rf(n,{idToken:i}));Oe(a?.users.length,n,"internal-error");const l=a.users[0];t._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?E2(l.providerUserInfo):[],d=mV(t.providerData,c),f=t.isAnonymous,m=!(t.email&&l.passwordHash)&&!d?.length,y=f?m:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new P0(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(t,v)}async function gV(t){const e=Dt(t);await Nf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mV(t,e){return[...t.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function E2(t){return t.map(e=>{var{providerId:n}=e,i=Qy(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pV(t,e){const n=await _2(t,{},async()=>{const i=qu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=t.config,c=await b2(t,a,"/v1/token",`key=${l}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:i};return t.emulatorConfig&&so(t.emulatorConfig.host)&&(f.credentials="include"),v2.fetch()(c,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yV(t,e){return la(t,"POST","/v2/accounts:revokeToken",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Z1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const n=Z1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:a,expiresIn:l}=await pV(e,n);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:a,expirationTime:l}=n,c=new xl;return i&&(Oe(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Oe(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Oe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xl,this.toJSON())}_performRefresh(){return Wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(t,e){Oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Br{constructor(e){var{uid:n,auth:i,stsTokenManager:a}=e,l=Qy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new P0(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Lu(this,this.stsTokenManager.getToken(this.auth,e));return Oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dV(this,e)}reload(){return gV(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Br(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Nf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(Ji(this.auth));const e=await this.getIdToken();return await Lu(this,uV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,a,l,c,d,f,m,y;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,b=(a=n.email)!==null&&a!==void 0?a:void 0,x=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,O=(c=n.photoURL)!==null&&c!==void 0?c:void 0,k=(d=n.tenantId)!==null&&d!==void 0?d:void 0,M=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,V=(m=n.createdAt)!==null&&m!==void 0?m:void 0,q=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:F,emailVerified:j,isAnonymous:ee,providerData:Z,stsTokenManager:N}=n;Oe(F&&N,e,"internal-error");const A=xl.fromJSON(this.name,N);Oe(typeof F=="string",e,"internal-error"),Os(v,e.name),Os(b,e.name),Oe(typeof j=="boolean",e,"internal-error"),Oe(typeof ee=="boolean",e,"internal-error"),Os(x,e.name),Os(O,e.name),Os(k,e.name),Os(M,e.name),Os(V,e.name),Os(q,e.name);const C=new Br({uid:F,auth:e,email:b,emailVerified:j,displayName:v,isAnonymous:ee,photoURL:O,phoneNumber:x,tenantId:k,stsTokenManager:A,createdAt:V,lastLoginAt:q});return Z&&Array.isArray(Z)&&(C.providerData=Z.map(z=>Object.assign({},z))),M&&(C._redirectEventId=M),C}static async _fromIdTokenResponse(e,n,i=!1){const a=new xl;a.updateFromServerResponse(n);const l=new Br({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Nf(l),l}static async _fromGetAccountInfoResponse(e,n,i){const a=n.users[0];Oe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?E2(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new xl;d.updateFromIdToken(i);const f=new Br({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new P0(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=new Map;function Zi(t){ss(t instanceof Function,"Expected a class definition");let e=J1.get(t);return e?(ss(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,J1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}w2.type="NONE";const ex=w2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t,e,n){return`firebase:${t}:${e}:${n}`}class Tl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Qh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Qh("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Rf(this.auth,{idToken:e}).catch(()=>{});return n?Br._fromGetAccountInfoResponse(this.auth,n,e):null}return Br._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Tl(Zi(ex),e,i);const a=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=a[0]||Zi(ex);const c=Qh(i,e.config.apiKey,e.name);let d=null;for(const m of n)try{const y=await m._get(c);if(y){let v;if(typeof y=="string"){const b=await Rf(e,{idToken:y}).catch(()=>{});if(!b)break;v=await Br._fromGetAccountInfoResponse(e,b,y)}else v=Br._fromJSON(e,y);m!==l&&(d=v),l=m;break}}catch{}const f=a.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new Tl(l,e,i):(l=f[0],d&&await l._set(c,d.toJSON()),await Promise.all(n.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new Tl(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(A2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(x2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(N2(e))return"Blackberry";if(C2(e))return"Webos";if(T2(e))return"Safari";if((e.includes("chrome/")||S2(e))&&!e.includes("edge/"))return"Chrome";if(R2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function x2(t=An()){return/firefox\//i.test(t)}function T2(t=An()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function S2(t=An()){return/crios\//i.test(t)}function A2(t=An()){return/iemobile/i.test(t)}function R2(t=An()){return/android/i.test(t)}function N2(t=An()){return/blackberry/i.test(t)}function C2(t=An()){return/webos/i.test(t)}function ev(t=An()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vV(t=An()){var e;return ev(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _V(){return G3()&&document.documentMode===10}function I2(t=An()){return ev(t)||R2(t)||C2(t)||N2(t)||/windows phone/i.test(t)||A2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(t,e=[]){let n;switch(t){case"Browser":n=tx(An());break;case"Worker":n=`${tx(An())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=l=>new Promise((c,d)=>{try{const f=e(l);c(f)}catch(f){d(f)}});i.onAbort=n,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EV(t,e={}){return la(t,"GET","/v2/passwordPolicy",oa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=6;class xV{constructor(e){var n,i,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:wV,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,a,l,c,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(a=f.containsLowercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsUppercaseLetter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(c=f.containsNumericCharacter)!==null&&c!==void 0?c:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e,n,i,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nx(this),this.idTokenSubscription=new nx(this),this.beforeStateQueue=new bV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zi(n)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await Tl.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Rf(this,{idToken:e}),i=await Br._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ir(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=a?._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===d)&&f?.user&&(a=f.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(Ji(this));const n=e?Dt(e):null;return n&&Oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(Ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(Ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EV(this),n=new xV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $u("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await yV(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zi(e)||this._popupRedirectResolver;Oe(n,this,"argument-error"),this.redirectPersistenceManager=await Tl.create(this,[Zi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,i,a);return()=>{c=!0,f()}}else{const f=e.addObserver(n);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=k2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var e;if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&J9(`Error while retrieving App Check token: ${n.error}`),n?.token}}function co(t){return Dt(t)}class nx{constructor(e){this.auth=e,this.observer=null,this.addObserver=eM(n=>this.observer=n)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SV(t){cg=t}function D2(t){return cg.loadJS(t)}function AV(){return cg.recaptchaEnterpriseScript}function RV(){return cg.gapiScript}function NV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class CV{constructor(){this.enterprise=new IV}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class IV{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const kV="recaptcha-enterprise",O2="NO_RECAPTCHA";class DV{constructor(e){this.type=kV,this.auth=co(e)}async verify(e="verify",n=!1){async function i(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{cV(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new lV(f);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(f=>{d(f)})})}function a(l,c,d){const f=window.grecaptcha;W1(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(m=>{c(m)}).catch(()=>{c(O2)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new CV().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!n&&W1(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=AV();f.length!==0&&(f+=d),D2(f).then(()=>{a(d,l,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function rx(t,e,n,i=!1,a=!1){const l=new DV(t);let c;if(a)c=O2;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const d=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function V0(t,e,n,i,a){var l;if(!((l=t._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await rx(t,e,n,n==="getOobCode");return i(t,c)}else return i(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await rx(t,e,n,n==="getOobCode");return i(t,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(t,e){const n=qf(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(Za(l,e??{}))return a;$r(a,"already-initialized")}return n.initialize({options:e})}function MV(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Zi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function PV(t,e,n){const i=co(t);Oe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=M2(e),{host:c,port:d}=VV(e),f=d===null?"":`:${d}`,m={url:`${l}//${c}${f}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Oe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Oe(Za(m,i.config.emulator)&&Za(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,so(c)?(ay(`${l}//${c}${f}`),oy("Auth",!0)):LV()}function M2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function VV(t){const e=M2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:ix(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:ix(c)}}}function ix(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function LV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wi("not implemented")}_getIdTokenResponse(e){return Wi("not implemented")}_linkToIdToken(e,n){return Wi("not implemented")}_getReauthenticationResolver(e){return Wi("not implemented")}}async function zV(t,e){return la(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UV(t,e){return Zu(t,"POST","/v1/accounts:signInWithPassword",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BV(t,e){return Zu(t,"POST","/v1/accounts:signInWithEmailLink",oa(t,e))}async function jV(t,e){return Zu(t,"POST","/v1/accounts:signInWithEmailLink",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu extends tv{constructor(e,n,i,a=null){super("password",i),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new zu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new zu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return V0(e,n,"signInWithPassword",UV);case"emailLink":return BV(e,{email:this._email,oobCode:this._password});default:$r(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return V0(e,i,"signUpPassword",zV);case"emailLink":return jV(e,{idToken:n,email:this._email,oobCode:this._password});default:$r(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(t,e){return Zu(t,"POST","/v1/accounts:signInWithIdp",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV="http://localhost";class ro extends tv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$r("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=n,l=Qy(n,["providerId","signInMethod"]);if(!i||!a)return null;const c=new ro(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Sl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Sl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Sl(e,n)}buildRequest(){const e={requestUri:HV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qV(t){const e=ou(lu(t)).link,n=e?ou(lu(e)).deep_link_id:null,i=ou(lu(t)).deep_link_id;return(i?ou(lu(i)).link:null)||i||n||e||t}class nv{constructor(e){var n,i,a,l,c,d;const f=ou(lu(e)),m=(n=f.apiKey)!==null&&n!==void 0?n:null,y=(i=f.oobCode)!==null&&i!==void 0?i:null,v=$V((a=f.mode)!==null&&a!==void 0?a:null);Oe(m&&y&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=y,this.continueUrl=(l=f.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=f.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=qV(e);try{return new nv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(){this.providerId=Fl.PROVIDER_ID}static credential(e,n){return zu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=nv.parseLink(n);return Oe(i,"argument-error"),zu._fromEmailAndCode(e,i.code,i.tenantId)}}Fl.PROVIDER_ID="password";Fl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends P2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Ju{constructor(){super("facebook.com")}static credential(e){return ro._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Us.credential(e.oauthAccessToken)}catch{return null}}}Us.FACEBOOK_SIGN_IN_METHOD="facebook.com";Us.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ro._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Bs.credential(n,i)}catch{return null}}}Bs.GOOGLE_SIGN_IN_METHOD="google.com";Bs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Ju{constructor(){super("github.com")}static credential(e){return ro._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.GITHUB_SIGN_IN_METHOD="github.com";js.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends Ju{constructor(){super("twitter.com")}static credential(e,n){return ro._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Hs.credential(n,i)}catch{return null}}}Hs.TWITTER_SIGN_IN_METHOD="twitter.com";Hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FV(t,e){return Zu(t,"POST","/v1/accounts:signUp",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,a=!1){const l=await Br._fromIdTokenResponse(e,i,a),c=sx(i);return new io({user:l,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const a=sx(i);return new io({user:e,providerId:a,_tokenResponse:i,operationType:n})}}function sx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends xi{constructor(e,n,i,a){var l;super(n.code,n.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Cf.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,a){return new Cf(e,n,i,a)}}function V2(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Cf._fromErrorAndOperation(t,l,e,i):l})}async function GV(t,e,n=!1){const i=await Lu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return io._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YV(t,e,n=!1){const{auth:i}=t;if(ir(i.app))return Promise.reject(Ji(i));const a="reauthenticate";try{const l=await Lu(t,V2(i,a,e,t),n);Oe(l.idToken,i,"internal-error");const c=Jy(l.idToken);Oe(c,i,"internal-error");const{sub:d}=c;return Oe(t.uid===d,i,"user-mismatch"),io._forOperation(t,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&$r(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2(t,e,n=!1){if(ir(t.app))return Promise.reject(Ji(t));const i="signIn",a=await V2(t,i,e),l=await io._fromIdTokenResponse(t,i,a);return n||await t._updateCurrentUser(l.user),l}async function XV(t,e){return L2(co(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z2(t){const e=co(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function KV(t,e,n){if(ir(t.app))return Promise.reject(Ji(t));const i=co(t),c=await V0(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FV).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&z2(t),f}),d=await io._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function QV(t,e,n){return ir(t.app)?Promise.reject(Ji(t)):XV(Dt(t),Fl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&z2(t),i})}function WV(t,e,n,i){return Dt(t).onIdTokenChanged(e,n,i)}function ZV(t,e,n){return Dt(t).beforeAuthStateChanged(e,n)}function JV(t,e,n,i){return Dt(t).onAuthStateChanged(e,n,i)}function eL(t){return Dt(t).signOut()}const If="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(If,"1"),this.storage.removeItem(If),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=1e3,nL=10;class B2 extends U2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=I2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),a=this.localCache[n];i!==a&&e(n,a,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}const i=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);_V()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,nL):a()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},tL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}B2.type="LOCAL";const rL=B2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2 extends U2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}j2.type="SESSION";const H2=j2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const i=new ug(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async m=>m(n.origin,l)),f=await iL(d);n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ug.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,f)=>{const m=rv("",20);a.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(v){const b=v;if(b.data.eventId===m)switch(b.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(y),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(){return window}function aL(t){bi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(){return typeof bi().WorkerGlobalScope<"u"&&typeof bi().importScripts=="function"}async function oL(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lL(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function cL(){return $2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2="firebaseLocalStorageDb",uL=1,kf="firebaseLocalStorage",F2="fbase_key";class ed{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dg(t,e){return t.transaction([kf],e?"readwrite":"readonly").objectStore(kf)}function dL(){const t=indexedDB.deleteDatabase(q2);return new ed(t).toPromise()}function L0(){const t=indexedDB.open(q2,uL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(kf,{keyPath:F2})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(kf)?e(i):(i.close(),await dL(),e(await L0()))})})}async function ax(t,e,n){const i=dg(t,!0).put({[F2]:e,value:n});return new ed(i).toPromise()}async function hL(t,e){const n=dg(t,!1).get(e),i=await new ed(n).toPromise();return i===void 0?null:i.value}function ox(t,e){const n=dg(t,!0).delete(e);return new ed(n).toPromise()}const fL=800,gL=3;class G2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await L0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>gL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ug._getInstance(cL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await oL(),!this.activeServiceWorker)return;this.sender=new sL(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await L0();return await ax(e,If,"1"),await ox(e,If),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>ax(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>hL(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ox(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=dg(a,!1).getAll();return new ed(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}G2.type="LOCAL";const mL=G2;new Wu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(t,e){return e?Zi(e):(Oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv extends tv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Sl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Sl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function yL(t){return L2(t.auth,new iv(t),t.bypassAuthState)}function vL(t){const{auth:e,user:n}=t;return Oe(n,e,"internal-error"),YV(n,new iv(t),t.bypassAuthState)}async function _L(t){const{auth:e,user:n}=t;return Oe(n,e,"internal-error"),GV(n,new iv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yL;case"linkViaPopup":case"linkViaRedirect":return _L;case"reauthViaPopup":case"reauthViaRedirect":return vL;default:$r(this.auth,"internal-error")}}resolve(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=new Wu(2e3,1e4);class pl extends Y2{constructor(e,n,i,a,l){super(e,n,a,l),this.provider=i,this.authWindow=null,this.pollId=null,pl.currentPopupAction&&pl.currentPopupAction.cancel(),pl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){ss(this.filter.length===1,"Popup operations only handle one event");const e=rv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bL.get())};e()}}pl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="pendingRedirect",Wh=new Map;class wL extends Y2{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Wh.get(this.auth._key());if(!e){try{const i=await xL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Wh.set(this.auth._key(),e)}return this.bypassAuthState||Wh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xL(t,e){const n=AL(e),i=SL(t);if(!await i._isAvailable())return!1;const a=await i._get(n)==="true";return await i._remove(n),a}function TL(t,e){Wh.set(t._key(),e)}function SL(t){return Zi(t._redirectPersistence)}function AL(t){return Qh(EL,t.config.apiKey,t.name)}async function RL(t,e,n=!1){if(ir(t.app))return Promise.reject(Ji(t));const i=co(t),a=pL(i,e),c=await new wL(i,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=10*60*1e3;class CL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!X2(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(_i(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NL&&this.cachedEventUids.clear(),this.cachedEventUids.has(lx(e))}saveEventToCache(e){this.cachedEventUids.add(lx(e)),this.lastProcessedEventTime=Date.now()}}function lx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function X2({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function IL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return X2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kL(t,e={}){return la(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OL=/^https?/;async function ML(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kL(t);for(const n of e)try{if(PL(n))return}catch{}$r(t,"unauthorized-domain")}function PL(t){const e=M0(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!OL.test(n))return!1;if(DL.test(t))return i===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=new Wu(3e4,6e4);function cx(){const t=bi().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LL(t){return new Promise((e,n)=>{var i,a,l;function c(){cx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cx(),n(_i(t,"network-request-failed"))},timeout:VL.get()})}if(!((a=(i=bi().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=bi().gapi)===null||l===void 0)&&l.load)c();else{const d=NV("iframefcb");return bi()[d]=()=>{gapi.load?c():n(_i(t,"network-request-failed"))},D2(`${RV()}?onload=${d}`).catch(f=>n(f))}}).catch(e=>{throw Zh=null,e})}let Zh=null;function zL(t){return Zh=Zh||LL(t),Zh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=new Wu(5e3,15e3),BL="__/auth/iframe",jL="emulator/auth/iframe",HL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$L=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qL(t){const e=t.config;Oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zy(e,jL):`https://${t.config.authDomain}/${BL}`,i={apiKey:e.apiKey,appName:t.name,v:zl},a=$L.get(t.config.apiHost);a&&(i.eid=a);const l=t._getFrameworks();return l.length&&(i.fw=l.join(",")),`${n}?${qu(i).slice(1)}`}async function FL(t){const e=await zL(t),n=bi().gapi;return Oe(n,t,"internal-error"),e.open({where:document.body,url:qL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HL,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=_i(t,"network-request-failed"),d=bi().setTimeout(()=>{l(c)},UL.get());function f(){bi().clearTimeout(d),a(i)}i.ping(f).then(f,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YL=500,XL=600,KL="_blank",QL="http://localhost";class ux{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WL(t,e,n,i=YL,a=XL){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f=Object.assign(Object.assign({},GL),{width:i.toString(),height:a.toString(),top:l,left:c}),m=An().toLowerCase();n&&(d=S2(m)?KL:n),x2(m)&&(e=e||QL,f.scrollbars="yes");const y=Object.entries(f).reduce((b,[x,O])=>`${b}${x}=${O},`,"");if(vV(m)&&d!=="_self")return ZL(e||"",d),new ux(null);const v=window.open(e||"",d,y);Oe(v,t,"popup-blocked");try{v.focus()}catch{}return new ux(v)}function ZL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL="__/auth/handler",ez="emulator/auth/handler",tz=encodeURIComponent("fac");async function dx(t,e,n,i,a,l){Oe(t.config.authDomain,t,"auth-domain-config-required"),Oe(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:zl,eventId:a};if(e instanceof P2){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",J3(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(e instanceof Ju){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}t.tenantId&&(c.tid=t.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const f=await t._getAppCheckToken(),m=f?`#${tz}=${encodeURIComponent(f)}`:"";return`${nz(t)}?${qu(d).slice(1)}${m}`}function nz({config:t}){return t.emulator?Zy(t,ez):`https://${t.authDomain}/${JL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="webStorageSupport";class rz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=H2,this._completeRedirectFn=RL,this._overrideRedirectResult=TL}async _openPopup(e,n,i,a){var l;ss((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await dx(e,n,i,M0(),a);return WL(e,c,rv())}async _openRedirect(e,n,i,a){await this._originValidation(e);const l=await dx(e,n,i,M0(),a);return aL(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(ss(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await FL(e),i=new CL(e);return n.register("authEvent",a=>(Oe(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qp,{type:qp},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[qp];c!==void 0&&n(!!c),$r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ML(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return I2()||T2()||ev()}}const iz=rz;var hx="@firebase/auth",fx="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function az(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oz(t){Ja(new Zs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Oe(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:k2(t)},m=new TV(i,a,l,f);return MV(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ja(new Zs("auth-internal",e=>{const n=co(e.getProvider("auth").getImmediate());return(i=>new sz(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(hx,fx,az(t)),pi(hx,fx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz=5*60,cz=NS("authIdTokenMaxAge")||lz;let gx=null;const uz=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>cz)return;const a=n?.token;gx!==a&&(gx=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function dz(t=uy()){const e=qf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=OV(t,{popupRedirectResolver:iz,persistence:[mL,rL,H2]}),i=NS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=uz(l.toString());ZV(n,c,()=>c(n.currentUser)),WV(n,d=>c(d))}}const a=SS("auth");return a&&PV(n,`http://${a}`),n}function hz(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}SV({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=a=>{const l=_i("internal-error");l.customData=a,n(l)},i.type="text/javascript",i.charset="UTF-8",hz().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oz("Browser");const fz={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},sv=kS(fz),qr=k9(sv),av=dz(sv),ov=I5(sv,"us-central1");VS(ov,"localhost",5001);const gz="51259393-3a562db01323edade9561b8f0",mz="LIVDSRZULELA",pz=t=>t.replace(/\*\*(.*?)\*\*/g,"<strong class='font-semibold text-gray-900 dark:text-gray-100'>$1</strong>").replace(/\((.*?)\)\[(.*?)\]/g,'<a href="$2" target="_blank" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline transition-colors duration-200">$1</a>'),yz=async t=>{const e=t.map(async i=>{const a=Object.keys(i)[0],l=i[a];switch(a){case"large_header":return`<h1 class="text-4xl lg:text-4xl font-bold my-8 text-gray-900 dark:text-gray-100 leading-tight border-b-4 border-blue-600 dark:border-blue-400 pb-2 transition-colors duration-200">${l}</h1>`;case"small_header":return`<h2 class="text-3xl lg:text-3xl font-semibold mt-6 mb-3 text-gray-800 dark:text-gray-200 leading-snug transition-colors duration-200">${l}</h2>`;case"ul":return`<ul class="my-4 pl-6 space-y-2 list-disc list-inside text-gray-700 dark:text-gray-300 transition-colors duration-200">${l.map(P=>`<li class="text-gray-700 dark:text-gray-300 transition-colors duration-200">${P}</li>`).join("")}</ul>`;case"ol":return`<ol class="my-4 pl-6 space-y-2 list-decimal list-inside text-gray-700 dark:text-gray-300 transition-colors duration-200">${l.map(P=>`<li class="text-gray-700 dark:text-gray-300 transition-colors duration-200">${P}</li>`).join("")}</ol>`;case"quiz":const f=l,m=`quiz-set-${Math.random().toString(36).substr(2,9)}`,y=f.map((P,$)=>{const R=`${m}-q${$}`,W=P.answers.map((Q,ne)=>{const K=Object.keys(Q)[0],te=Q[K],le=ne===P.correctAnswer;return`<button class="quiz-answer w-full bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg p-4 text-left font-medium text-gray-700 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition-all duration-200 transform hover:scale-[1.02] disabled:cursor-not-allowed disabled:opacity-60" onclick="${`
                                        const quiz = document.getElementById('${R}');
                                        const hintDiv = document.getElementById('${R}-hint');
                                        const resultDiv = document.getElementById('${R}-result');
                                        const nextBtn = document.getElementById('${R}-next');
                                        const buttons = quiz.querySelectorAll('.quiz-answer');
                                        const selectedButton = this;
                                        
                                        if (${le}) {
                                            // Correct answer
                                            hintDiv.classList.add('hidden');
                                            resultDiv.classList.remove('hidden');
                                            if (nextBtn) nextBtn.classList.remove('hidden');
                                            buttons.forEach(btn => btn.disabled = true);
                                            selectedButton.classList.add('quiz-correct');
                                            selectedButton.classList.remove('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                        } else {
                                            // Wrong answer - show hint
                                            hintDiv.textContent = '${te.replace(/'/g,"\\'")}';
                                            hintDiv.classList.remove('hidden');
                                            selectedButton.classList.add('quiz-incorrect');
                                            selectedButton.classList.remove('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                            selectedButton.disabled = true;
                                        }
                                    `}">${K}</button>`}).join(""),G=`
                                const quiz = document.getElementById('${R}');
                                const hintDiv = document.getElementById('${R}-hint');
                                const resultDiv = document.getElementById('${R}-result');
                                const nextBtn = document.getElementById('${R}-next');
                                const buttons = quiz.querySelectorAll('.quiz-answer');
                                
                                // Reset all states
                                hintDiv.classList.add('hidden');
                                hintDiv.textContent = '';
                                resultDiv.classList.add('hidden');
                                if (nextBtn) nextBtn.classList.add('hidden');
                                
                                buttons.forEach(btn => {
                                    btn.disabled = false;
                                    btn.classList.remove('quiz-correct', 'quiz-incorrect');
                                    btn.classList.add('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                });
                            `,Y=$<f.length-1?`
                                document.getElementById('${m}-q${$}').classList.add('hidden');
                                document.getElementById('${m}-q${$+1}').classList.remove('hidden');
                            `:`
                                document.getElementById('${m}-completion').classList.remove('hidden');
                                document.getElementById('${R}').classList.add('hidden');
                            `,S=$<f.length-1?`<button id="${R}-next" class="hidden bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${Y}">Next Question →</button>`:`<button id="${R}-next" class="hidden bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${Y}">Finish Quiz ✓</button>`;return`
                                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 transition-colors duration-200 ${$===0?"":"hidden"}" id="${R}">
                                    <div class="text-sm font-medium text-blue-600 dark:text-blue-400 mb-2 text-center">Question ${$+1} of ${f.length}</div>
                                    <div class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6 text-center leading-relaxed">${P.question}</div>
                                    <div class="space-y-3 mb-4">
                                        ${W}
                                    </div>
                                    <div id="${R}-hint" class="hidden bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4 text-yellow-800 dark:text-yellow-200 text-sm italic animate-fade-in"></div>
                                    <div id="${R}-result" class="hidden bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded-lg p-6 text-center">
                                        <p class="text-xl font-bold text-green-800 dark:text-green-200 mb-4">🎉 Excellent! 🎉</p>
                                        <div class="flex flex-col sm:flex-row gap-3 justify-center">
                                            <button class="bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${G}">↻ Try Again</button>
                                            ${S}
                                        </div>
                                    </div>
                                </div>
                            `}).join(""),v=`
                        document.getElementById('${m}-completion').classList.add('hidden');
                        document.getElementById('${m}-q0').classList.remove('hidden');
                        // Reset all questions
                        ${f.map((P,$)=>`
                            const quiz${$} = document.getElementById('${m}-q${$}');
                            if (quiz${$}) {
                                const hintDiv = document.getElementById('${m}-q${$}-hint');
                                const resultDiv = document.getElementById('${m}-q${$}-result');
                                const nextBtn = document.getElementById('${m}-q${$}-next');
                                const buttons = quiz${$}.querySelectorAll('.quiz-answer');
                                
                                hintDiv.classList.add('hidden');
                                hintDiv.textContent = '';
                                resultDiv.classList.add('hidden');
                                if (nextBtn) nextBtn.classList.add('hidden');
                                
                                buttons.forEach(btn => {
                                    btn.disabled = false;
                                    btn.classList.remove('quiz-correct', 'quiz-incorrect');
                                    btn.classList.add('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                });
                                
                                if (${$} > 0) quiz${$}.classList.add('hidden');
                            }
                        `).join("")}
                    `;return`
                        <div class="my-8" id="${m}">
                            ${y}
                            <div id="${m}-completion" class="hidden bg-gradient-to-br from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border-2 border-green-200 dark:border-green-700 rounded-xl p-8 text-center">
                                <div class="text-4xl mb-4">🎊</div>
                                <h3 class="text-2xl font-bold text-green-800 dark:text-green-200 mb-2">Quiz Completed!</h3>
                                <p class="text-green-700 dark:text-green-300 mb-6">Congratulations! You've successfully completed all ${f.length} questions.</p>
                                <button class="bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white px-8 py-3 rounded-lg font-semibold shadow-lg transform hover:scale-105 transition-all duration-200" onclick="${v}">🔄 Start Over</button>
                            </div>
                        </div>
                    `;case"img":const[b,x]=l;return`<figure class="my-6 text-center">
                    <img src="${await bz(b)}" alt="${x}" 
                         class="max-w-full h-auto rounded-lg shadow-lg mx-auto transition-transform duration-200 hover:scale-105"
                         onerror="this.onerror=null; this.src='https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error'; this.alt='Fallback image (original failed to load)';" />
                    <figcaption class="mt-3 text-sm text-gray-600 dark:text-gray-400">${x}</figcaption>
                    <div class="mt-2 text-xs text-gray-500 dark:text-gray-500 opacity-75">
                        <span class="inline-block mr-2">🔍 ${b}</span>
                        <a href="https://pixabay.com/" target="_blank" class="text-blue-500 dark:text-blue-400 hover:underline">Pixabay</a>
                    </div>
                    </figure>`;case"vid":const[k,M]=l;return`<figure class="my-6 text-center">
                        <div class="relative w-full max-w-4xl mx-auto" style="padding-bottom: 56.25%; height: 0;">
                            <iframe 
                                src="https://www.youtube.com/embed/${await Az(k)}" 
                                class="absolute top-0 left-0 w-full h-full rounded-lg shadow-lg"
                                frameborder="0" 
                                allowfullscreen>
                            </iframe>
                        </div>
                        <figcaption class="mt-2 text-sm italic text-gray-600 dark:text-gray-400">${M}</figcaption>
                        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Search: "${k}" • <a href="https://developers.google.com/youtube/v3" target="_blank" class="text-red-600 dark:text-red-400 hover:underline">Powered by YouTube Data API</a></div>
                    </figure>`;case"gif":const[q,F]=l;return`<figure class="my-6 text-center">
                        <img src="${await xz(q)}" alt="${F}" 
                             class="max-w-full h-auto rounded-lg shadow-lg mx-auto transition-transform duration-200 hover:scale-105"
                             onerror="this.onerror=null; this.src='https://via.placeholder.com/300x200/ef4444/ffffff?text=GIF+Error'; this.alt='Fallback GIF (original failed to load)';" />
                        <figcaption class="mt-2 text-sm italic text-gray-600 dark:text-gray-400">${F}</figcaption>
                        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Search: "${q}" • <a href="https://tenor.com/" target="_blank" class="text-purple-600 dark:text-purple-400 hover:underline">Powered by Tenor</a></div>
                    </figure>`;case"textblock":return`<div class="my-4 leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200">${pz(l)}</div>`;case"codeblock":return`<pre class="my-6 bg-gray-900 dark:bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto border-l-4 border-blue-500 shadow-lg"><code class="font-mono text-sm leading-relaxed">${l}</code></pre>`;case"quote":return`<blockquote class="my-6 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 p-4 rounded-r-lg relative">
                        <div class="text-blue-600 dark:text-blue-400 text-4xl absolute -top-2 -left-1 font-serif">"</div>
                        <div class="italic text-gray-700 dark:text-gray-300 pl-6">${l}</div>
                    </blockquote>`;case"link":return`<a href="${l}" class="inline-block my-2 px-4 py-2 text-blue-600 dark:text-blue-400 border-2 border-blue-600 dark:border-blue-400 rounded-lg hover:bg-blue-600 hover:text-white dark:hover:bg-blue-500 transition-all duration-200 font-medium" target="_blank">${l}</a>`;case"table":const ee=l,Z=ee[0],N=ee.slice(1),A=`<thead><tr>${Z.map(P=>`<th class="bg-blue-600 dark:bg-blue-700 text-white px-4 py-3 text-left font-semibold">${P}</th>`).join("")}</tr></thead>`,C=`<tbody>${N.map((P,$)=>`<tr class="${$%2===0?"bg-gray-50 dark:bg-gray-800":"bg-white dark:bg-gray-700"} hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors duration-200">${P.map(R=>`<td class="px-4 py-3 border-b border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300">${R}</td>`).join("")}</tr>`).join("")}</tbody>`;return`<div class="my-6 overflow-x-auto shadow-lg rounded-lg border border-gray-200 dark:border-gray-700">
                        <table class="w-full border-collapse">${A}${C}</table>
                    </div>`;case"purehtml":return`<div class="my-4 p-2 rounded-md bg-gray-50 dark:bg-gray-800 transition-colors duration-200">${l}</div>`;case"sidecontainer":return`<aside class="float-right w-80 max-w-[40%] ml-4 mb-4 p-4 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200 lg:block hidden">
                        ${l}
                    </aside>
                    <div class="lg:hidden my-4 p-4 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200">
                        ${l}
                    </div>`;case"diagram":const z=`diagram${Math.random().toString(36).substr(2,9)}`,U=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");return`
                        <div class="my-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg p-4 text-center transition-colors duration-200" 
                             id="${z}" 
                             data-diagram-code="${U}"
                             data-diagram-id="${z}">
                            <div class="text-gray-600 dark:text-gray-400 italic loading-text">Rendering diagram...</div>
                            <script type="text/javascript">
                                (function() {
                                    function processDiagram() {
                                        const diagramDiv = document.getElementById('${z}');
                                        if (!diagramDiv) {
                                            console.warn('Diagram div not found: ${z}');
                                            return;
                                        }
                                        
                                        const loadingText = diagramDiv.querySelector('.loading-text');
                                        let code = diagramDiv.getAttribute('data-diagram-code');
                                        
                                        if (!code) {
                                            console.error('No diagram code found');
                                            diagramDiv.innerHTML = '<div class="text-red-600 dark:text-red-400 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg"><strong>Error:</strong> No diagram code provided</div>';
                                            return;
                                        }
                                        
                                        // Decode the diagram code
                                        code = code
                                            .replace(/&amp;/g, '&')
                                            .replace(/&lt;/g, '<')
                                            .replace(/&gt;/g, '>')
                                            .replace(/&quot;/g, '"')
                                            .replace(/&#39;/g, "'");
                                        
                                        const id = diagramDiv.getAttribute('data-diagram-id');
                                        
                                        function showError(message) {
                                            console.error('Mermaid diagram error:', message);
                                            diagramDiv.innerHTML = '<div class="text-red-600 dark:text-red-400 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg"><strong>Diagram Error:</strong> ' + message + '</div>';
                                        }
                                        
                                        function initializeMermaid() {
                                            if (window.mermaid) {
                                                try {
                                                    if (!window.mermaidInitialized) {
                                                        window.mermaid.initialize({ 
                                                            startOnLoad: false, 
                                                            theme: 'default', 
                                                            securityLevel: 'loose',
                                                            fontFamily: 'inherit',
                                                            suppressErrorRendering: false
                                                        });
                                                        window.mermaidInitialized = true;
                                                    }
                                                    return true;
                                                } catch (e) {
                                                    showError('Failed to initialize Mermaid: ' + e.message);
                                                    return false;
                                                }
                                            }
                                            return false;
                                        }
                                        
                                        function renderDiagram() {
                                            if (!initializeMermaid()) {
                                                showError('Mermaid library not available');
                                                return;
                                            }
                                            
                                            try {
                                                // Validate the diagram code first
                                                if (!code.trim()) {
                                                    showError('Empty diagram code');
                                                    return;
                                                }
                                                
                                                const svgId = id + '_svg';
                                                
                                                // Use mermaid.render with proper error handling
                                                window.mermaid.render(svgId, code).then(function(result) {
                                                    if (result && result.svg) {
                                                        diagramDiv.innerHTML = result.svg;
                                                    } else {
                                                        showError('Mermaid render returned no SVG');
                                                    }
                                                }).catch(function(error) {
                                                    showError(error.message || 'Unknown render error');
                                                });
                                            } catch (e) {
                                                showError(e.message || 'Unknown execution error');
                                            }
                                        }
                                        
                                        // Load Mermaid if not already loaded
                                        if (!window.mermaid) {
                                            if (loadingText) {
                                                loadingText.textContent = 'Loading Mermaid library...';
                                            }
                                            
                                            const script = document.createElement('script');
                                            script.src = 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js';
                                            script.onload = function() {
                                                if (loadingText) {
                                                    loadingText.textContent = 'Rendering diagram...';
                                                }
                                                // Give the library time to fully load
                                                setTimeout(renderDiagram, 500);
                                            };
                                            script.onerror = function() {
                                                showError('Failed to load Mermaid library from CDN');
                                            };
                                            document.head.appendChild(script);
                                        } else {
                                            renderDiagram();
                                        }
                                    }
                                    
                                    // Wait for DOM to be ready and process the diagram
                                    if (document.readyState === 'loading') {
                                        document.addEventListener('DOMContentLoaded', processDiagram);
                                    } else {
                                        // Use a small delay to ensure the DOM element is fully rendered
                                        setTimeout(processDiagram, 50);
                                    }
                                })();
                            <\/script>
                        </div>
                    `;case"note":return`<div class="my-4 flex items-start p-4 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-blue-600 dark:text-blue-400 text-xl mr-3 flex-shrink-0 mt-0.5">📝</div>
                        <div class="text-blue-800 dark:text-blue-200 leading-relaxed">${l}</div>
                    </div>`;case"warning":return`<div class="my-4 flex items-start p-4 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500 dark:border-yellow-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-yellow-600 dark:text-yellow-400 text-xl mr-3 flex-shrink-0 mt-0.5">⚠️</div>
                        <div class="text-yellow-800 dark:text-yellow-200 leading-relaxed">${l}</div>
                    </div>`;case"tip":return`<div class="my-4 flex items-start p-4 bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 dark:border-green-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-green-600 dark:text-green-400 text-xl mr-3 flex-shrink-0 mt-0.5">💡</div>
                        <div class="text-green-800 dark:text-green-200 leading-relaxed">${l}</div>
                    </div>`;case"htmlCanvas":const H=`canvas_${Math.random().toString(36).substr(2,9)}_${Date.now()}`;return`
                        <div class="my-6 bg-gray-50 dark:bg-gray-800 border-2 border-dashed border-blue-300 dark:border-blue-600 rounded-lg p-6 transition-colors duration-200" data-canvas-code="${l.replace(/"/g,"&quot;").replace(/'/g,"&#39;")}" data-canvas-id="${H}">
                            <canvas id="${H}" width="400" height="300" class="border border-gray-300 dark:border-gray-600 rounded-lg max-w-full mx-auto block bg-white dark:bg-gray-900"></canvas>
                            <div class="flex flex-wrap gap-2 mt-4 justify-center">
                                <button class="bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const code = canvasDiv.getAttribute('data-canvas-code');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        const canvasContext = canvasElement.getContext('2d');
                                        const errorDiv = document.getElementById(canvasId + 'Error');
                                        
                                        errorDiv.classList.add('hidden');
                                        errorDiv.textContent = '';
                                        
                                        try {
                                            canvasContext.clearRect(0, 0, canvasElement.width, canvasElement.height);
                                            const canvasFunction = new Function('canvas', 'ctx', code);
                                            canvasFunction(canvasElement, canvasContext);
                                        } catch (error) {
                                            console.error('Canvas error:', error);
                                            errorDiv.textContent = 'Error: ' + error.message;
                                            errorDiv.classList.remove('hidden');
                                        }
                                    }).call(this);
                                ">▶ Run Code</button>
                                <button class="bg-gray-600 hover:bg-gray-700 dark:bg-gray-500 dark:hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        const canvasContext = canvasElement.getContext('2d');
                                        const errorDiv = document.getElementById(canvasId + 'Error');
                                        
                                        canvasContext.clearRect(0, 0, canvasElement.width, canvasElement.height);
                                        errorDiv.classList.add('hidden');
                                    }).call(this);
                                ">🗑️ Clear</button>
                                <button class="bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        
                                        if (!document.fullscreenElement) {
                                            canvasElement.requestFullscreen().catch(err => {
                                                console.warn('Fullscreen failed:', err);
                                            });
                                        } else {
                                            document.exitFullscreen();
                                        }
                                    }).call(this);
                                ">⛶ Fullscreen</button>
                            </div>
                            <details class="mt-4 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg transition-colors duration-200">
                                <summary class="p-3 font-medium text-gray-700 dark:text-gray-300 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-200">📝 View Code</summary>
                                <pre class="p-4 bg-gray-900 dark:bg-gray-800 text-gray-100 rounded-b-lg overflow-x-auto"><code class="font-mono text-sm">${l}</code></pre>
                            </details>
                            <div id="${H}Error" class="hidden mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200"></div>
                        </div>
                    `;default:return`<div class="my-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200 font-mono text-sm">
                        <div class="font-semibold mb-2">Unknown content type:</div>
                        ${JSON.stringify(i)}
                    </div>`}});return(await Promise.all(e)).join(`
`)},vz=gz,_z="https://pixabay.com/api/",Zc=new Map,bz=async t=>{if(Zc.has(t))return Zc.get(t);try{const e=encodeURIComponent(t),n=`${_z}?key=${vz}&q=${e}&image_type=photo&per_page=3&safesearch=true&order=relevant`,i=await fetch(n);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const a=await i.json();if(a.hits&&a.hits.length>0){const l=a.hits[0].webformatURL;return Zc.set(t,l),l}else{const l=`https://via.placeholder.com/640x360/e5e7eb/6b7280?text=${e}`;return Zc.set(t,l),l}}catch(e){console.error("Error fetching Pixabay image:",e);const n="https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error";return Zc.set(t,n),n}},Ez=mz,wz="https://g.tenor.com/v1/search",Jc=new Map,xz=async t=>{if(Jc.has(t))return Jc.get(t);try{const e=encodeURIComponent("explained "+t),n=`${wz}?key=${Ez}&q=${e}&limit=1&media_filter=basic&contentfilter=medium`,i=await fetch(n);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const a=await i.json();if(a.results&&a.results.length>0){const c=a.results[0],d=c.media[0]?.gif?.url||c.media[0]?.mediumgif?.url||c.media[0]?.tinygif?.url;if(d)return Jc.set(t,d),d}const l=`https://via.placeholder.com/300x200/9333ea/ffffff?text=${e}+GIF`;return Jc.set(t,l),l}catch(e){console.error("Error fetching Tenor GIF:",e);const n="https://via.placeholder.com/300x200/ef4444/ffffff?text=GIF+Error";return Jc.set(t,n),n}},Tz="AIzaSyDxTJKoi1S8YjJZD12QTa4F9hV8fN8pNqo",Sz="https://www.googleapis.com/youtube/v3/search",eu=new Map,Az=async t=>{if(eu.has(t))return eu.get(t);try{const e=encodeURIComponent(t),n=`${Sz}?key=${Tz}&q=${e}&part=snippet&type=video&maxResults=1&videoEmbeddable=true&safeSearch=strict`,i=await fetch(n);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const a=await i.json();if(a.items&&a.items.length>0){const c=a.items[0].id.videoId;if(c)return eu.set(t,c),c}const l="dQw4w9WgXcQ";return eu.set(t,l),l}catch(e){console.error("Error fetching YouTube video:",e);const n="dQw4w9WgXcQ";return eu.set(t,n),n}},Rz=yz;class ol extends Error{constructor(e,n){super(`${e} at position ${n}`),this.position=n}}const K2=32,Nz=10,Q2=9,W2=13,Cz=160,Iz=8192,kz=8202,Dz=8239,Oz=8287,Mz=12288;function Pz(t){return/^[0-9A-Fa-f]$/.test(t)}function Ba(t){return t>="0"&&t<="9"}function Vz(t){return t>=" "}function Lh(t){return`,:[]/{}()
+`.includes(t)}function mx(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="_"||t==="$"}function px(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="_"||t==="$"||t>="0"&&t<="9"}const yx=/^(http|https|ftp|mailto|file|data|irc):\/\/$/,vx=/^[A-Za-z0-9-._~:/?#@!$&'()*+;=]$/;function _x(t){return`,[]/{}
+`.includes(t)}function bx(t){return Jh(t)||Lz.test(t)}const Lz=/^[[{\w-]$/;function zz(t){return t===`
`||t==="\r"||t==="	"||t==="\b"||t==="\f"}function $a(t,e){const n=t.charCodeAt(e);return n===K2||n===Nz||n===Q2||n===W2}function Uz(t,e){const n=t.charCodeAt(e);return n===K2||n===Q2||n===W2}function Bz(t,e){const n=t.charCodeAt(e);return n===Cz||n>=Iz&&n<=kz||n===Dz||n===Oz||n===Mz}function Jh(t){return Z2(t)||z0(t)}function Z2(t){return t==='"'||t==="“"||t==="”"}function Ex(t){return t==='"'}function z0(t){return t==="'"||t==="‘"||t==="’"||t==="`"||t==="´"}function wx(t){return t==="'"}function tu(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=t.lastIndexOf(e);return i!==-1?t.substring(0,i)+(n?"":t.substring(i+1)):t}function Lr(t,e){let n=t.length;if(!$a(t,n-1))return t+e;for(;$a(t,n-1);)n--;return t.substring(0,n)+e+t.substring(n)}function jz(t,e,n){return t.substring(0,e)+t.substring(e+n)}function Hz(t){return/[,\n][ \t\r]*$/.test(t)}const $z={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},qz={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function Fz(t){let e=0,n="";m(["```","[```","{```"]),l()||P(),m(["```","```]","```}"]);const a=v(",");for(a&&c(),bx(t[e])&&Hz(n)?(a||(n=Lr(n,",")),V()):a&&(n=tu(n,","));t[e]==="}"||t[e]==="]";)e++,c();if(e>=t.length)return n;I();function l(){c();const G=k()||M()||q()||j()||ee()||N(!1)||A();return c(),G}function c(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const Y=e;let S=d(G);do S=f(),S&&(S=d(G));while(S);return e>Y}function d(G){const Y=G?$a:Uz;let S="";for(;;)if(Y(t,e))S+=t[e],e++;else if(Bz(t,e))S+=" ",e++;else break;return S.length>0?(n+=S,!0):!1}function f(){if(t[e]==="/"&&t[e+1]==="*"){for(;e<t.length&&!Gz(t,e);)e++;return e+=2,!0}if(t[e]==="/"&&t[e+1]==="/"){for(;e<t.length&&t[e]!==`
`;)e++;return!0}return!1}function m(G){if(y(G)){if(mx(t[e]))for(;e<t.length&&px(t[e]);)e++;return c(),!0}return!1}function y(G){for(const Y of G){const S=e+Y.length;if(t.slice(e,S)===Y)return e=S,!0}return!1}function v(G){return t[e]===G?(n+=t[e],e++,!0):!1}function b(G){return t[e]===G?(e++,!0):!1}function x(){return b("\\")}function O(){return c(),t[e]==="."&&t[e+1]==="."&&t[e+2]==="."?(e+=3,c(),b(","),!0):!1}function k(){if(t[e]==="{"){n+="{",e++,c(),b(",")&&c();let G=!0;for(;e<t.length&&t[e]!=="}";){let Y;if(G?(Y=!0,G=!1):(Y=v(","),Y||(n=Lr(n,",")),c()),O(),!(q()||N(!0))){t[e]==="}"||t[e]==="{"||t[e]==="]"||t[e]==="["||t[e]===void 0?n=tu(n,","):$();break}c();const Q=v(":"),ne=e>=t.length;Q||(bx(t[e])||ne?n=Lr(n,":"):R()),l()||(Q||ne?n+="null":R())}return t[e]==="}"?(n+="}",e++):n=Lr(n,"}"),!0}return!1}function M(){if(t[e]==="["){n+="[",e++,c(),b(",")&&c();let G=!0;for(;e<t.length&&t[e]!=="]";)if(G?G=!1:v(",")||(n=Lr(n,",")),O(),!l()){n=tu(n,",");break}return t[e]==="]"?(n+="]",e++):n=Lr(n,"]"),!0}return!1}function V(){let G=!0,Y=!0;for(;Y;)G?G=!1:v(",")||(n=Lr(n,",")),Y=l();Y||(n=tu(n,",")),n=`[
${n}
]`}function q(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,S=t[e]==="\\";if(S&&(e++,S=!0),Jh(t[e])){const Q=Ex(t[e])?Ex:wx(t[e])?wx:z0(t[e])?z0:Z2,ne=e,K=n.length;let te='"';for(e++;;){if(e>=t.length){const le=C(e-1);return!G&&Lh(t.charAt(le))?(e=ne,n=n.substring(0,K),q(!0)):(te=Lr(te,'"'),n+=te,!0)}if(e===Y)return te=Lr(te,'"'),n+=te,!0;if(Q(t[e])){const le=e,de=te.length;if(te+='"',e++,n+=te,c(!1),G||e>=t.length||Lh(t[e])||Jh(t[e])||Ba(t[e]))return F(),!0;const ge=C(le-1),_e=t.charAt(ge);if(_e===",")return e=ne,n=n.substring(0,K),q(!1,ge);if(Lh(_e))return e=ne,n=n.substring(0,K),q(!0);n=n.substring(0,K),e=le+1,te=`${te.substring(0,de)}\\${te.substring(de)}`}else if(G&&_x(t[e])){if(t[e-1]===":"&&yx.test(t.substring(ne+1,e+2)))for(;e<t.length&&vx.test(t[e]);)te+=t[e],e++;return te=Lr(te,'"'),n+=te,F(),!0}else if(t[e]==="\\"){const le=t.charAt(e+1);if(qz[le]!==void 0)te+=t.slice(e,e+2),e+=2;else if(le==="u"){let ge=2;for(;ge<6&&Pz(t[e+ge]);)ge++;ge===6?(te+=t.slice(e,e+6),e+=6):e+ge>=t.length?e=t.length:W()}else te+=le,e+=2}else{const le=t.charAt(e);le==='"'&&t[e-1]!=="\\"?(te+=`\\${le}`,e++):zz(le)?(te+=$z[le],e++):(Vz(le)||H(le),te+=le,e++)}S&&x()}}return!1}function F(){let G=!1;for(c();t[e]==="+";){G=!0,e++,c(),n=tu(n,'"',!0);const Y=n.length;q()?n=jz(n,Y,1):n=Lr(n,'"')}return G}function j(){const G=e;if(t[e]==="-"){if(e++,z())return U(G),!0;if(!Ba(t[e]))return e=G,!1}for(;Ba(t[e]);)e++;if(t[e]==="."){if(e++,z())return U(G),!0;if(!Ba(t[e]))return e=G,!1;for(;Ba(t[e]);)e++}if(t[e]==="e"||t[e]==="E"){if(e++,(t[e]==="-"||t[e]==="+")&&e++,z())return U(G),!0;if(!Ba(t[e]))return e=G,!1;for(;Ba(t[e]);)e++}if(!z())return e=G,!1;if(e>G){const Y=t.slice(G,e),S=/^0\d/.test(Y);return n+=S?`"${Y}"`:Y,!0}return!1}function ee(){return Z("true","true")||Z("false","false")||Z("null","null")||Z("True","true")||Z("False","false")||Z("None","null")}function Z(G,Y){return t.slice(e,e+G.length)===G?(n+=Y,e+=G.length,!0):!1}function N(G){const Y=e;if(mx(t[e])){for(;e<t.length&&px(t[e]);)e++;let S=e;for(;$a(t,S);)S++;if(t[S]==="(")return e=S+1,l(),t[e]===")"&&(e++,t[e]===";"&&e++),!0}for(;e<t.length&&!_x(t[e])&&!Jh(t[e])&&(!G||t[e]!==":");)e++;if(t[e-1]===":"&&yx.test(t.substring(Y,e+2)))for(;e<t.length&&vx.test(t[e]);)e++;if(e>Y){for(;$a(t,e-1)&&e>0;)e--;const S=t.slice(Y,e);return n+=S==="undefined"?"null":JSON.stringify(S),t[e]==='"'&&e++,!0}}function A(){if(t[e]==="/"){const G=e;for(e++;e<t.length&&(t[e]!=="/"||t[e-1]==="\\");)e++;return e++,n+=`"${t.substring(G,e)}"`,!0}}function C(G){let Y=G;for(;Y>0&&$a(t,Y);)Y--;return Y}function z(){return e>=t.length||Lh(t[e])||$a(t,e)}function U(G){n+=`${t.slice(G,e)}0`}function H(G){throw new ol(`Invalid character ${JSON.stringify(G)}`,e)}function I(){throw new ol(`Unexpected character ${JSON.stringify(t[e])}`,e)}function P(){throw new ol("Unexpected end of json string",t.length)}function $(){throw new ol("Object key expected",e)}function R(){throw new ol("Colon expected",e)}function W(){const G=t.slice(e,e+6);throw new ol(`Invalid unicode character "${G}"`,e)}}function Gz(t,e){return t[e]==="*"&&t[e+1]==="/"}const Yz=(t,e,n,i)=>{const a=`Return ONLY a valid JSON array.
        RULES
        • Each object = exactly one tag from SCHEMA; no new tags.
        • Include:
        • You should educate the user about the concept and then ask the quiz about the material you taught.
        • Use different tags to make the reading experience diverse and engaging
        • If you have a long text, break it into multiple textblocks.
        • Only include tags that genuinely help explain the concept. Don't add tags unnecessarily or just to fill space.
        • Tone: encouraging, professional
        • You need to have textblocks or lists separating each visual tag, e.g. img, vid, gif, codeblock, diagram, htmlCanvas, table.
        • Make sure to put the concept over the context, not focusing on the context but rather on what actually needs to be explained.

        OUTPUT
        VALID JSON array only — no comments, or extra text. All the braces must be properly closed.`;return i==="default"?`${a}
    REQUIREMENTS:
    • Include exactly ONE {quiz} with 3‑5 questions.
    • Include ≥1 of {codeblock | diagram | htmlCanvas | table}.
    • Include ≥2 of {img | vid | gif}.
    • Include ≥5 of {textblock | ul | ol}.
    • Include exactly ONE of {tip | note | warning | quote | link}.
    • Cover: definition → explanation → worked example → real‑world analogy → what to explore next.
    • Break long texts into multiple textblocks.
    • Avoid filler tags.
    • Only include tags that genuinely help explain the concept. Don't add tags unnecessarily or just to fill space. A code snippet should be used only if the concept is relevant to the code it and helps explain it better
  
    OUTPUT VALID JSON ARRAY ONLY.
    SCHEMA = ${JSON.stringify(n)}
    CONTEXT = ${t}
    CONCEPT = ${e}
    REMEMBER: THIS IS REALLY IMPORTANT TO FOCUS ON THE TOPIC AND NOT ON THE CONTEXT. THE CONTEXT MAY BE USED TO CLARIFY THE TOPIC OR TO PROVIDE A CONCRETE EXAMPLE, BUT NOT TO FOCUS ON IT. IF IT IS NOT POSSIBLE TO FOCUS ON THE TOPIC, THEN DO COMPLETELY IGNORE THE CONTEXT.`:i==="explain"?`${a}
    DEEP MODE REQUIREMENTS (layer‑by‑layer dive)
    • Exactly ONE {quiz} with ≥5 challenging questions (conceptual + applied).
    • Include ≥2 of {codeblock | diagram | htmlCanvas | table}.
    • Include ≥3 of {img | vid | gif} for abstract ↔ concrete bridges.
    • Include ≥8 of {textblock | ul | ol}, organised as: Definition → Foundation → Mechanics → Edge‑cases → Misconceptions → Applications.
    • Exactly ONE of {tip | note | warning | quote | link}.
    • Highlight at least two common misconceptions explicitly.
  
    OUTPUT VALID JSON ARRAY ONLY.
    SCHEMA = ${JSON.stringify(n)}
    CONTEXT = ${t}
    CONCEPT = ${e}
    REMEMBER: THIS IS REALLY IMPORTANT TO FOCUS ON THE TOPIC AND NOT ON THE CONTEXT. THE CONTEXT MAY BE USED TO CLARIFY THE TOPIC OR TO PROVIDE A CONCRETE EXAMPLE, BUT NOT TO FOCUS ON IT. IF IT IS NOT POSSIBLE TO FOCUS ON THE TOPIC, THEN DO COMPLETELY IGNORE THE CONTEXT.`:i==="argue"?`${a}
    YOU SHOULD STRICTLY EVALUATE THE CONCEPT FROM MULTIPLE ANGLES
    • Include AT LEAST ONE {codeblock | diagram | htmlCanvas | table} to clarify the opinion.
    • Include AT LEAST ONE of {img | vid | gif} to illustrate the IDEA.
    • Include exactly ONE {quiz} with 3‑5 questions to test understanding.
    • Include AS MANY of {textblock | ul | ol} AS NEEDED TO COVER THE OPINION
    • Keep total objects 8-12.
  
    OUTPUT VALID JSON ARRAY ONLY.
    SCHEMA = ${JSON.stringify(n)}
    CONTEXT = ${t}
    CONCEPT = ${e}
    REMEMBER: THIS IS REALLY IMPORTANT TO FOCUS ON THE TOPIC AND NOT ON THE CONTEXT. THE CONTEXT MAY BE USED TO CLARIFY THE TOPIC OR TO PROVIDE A CONCRETE EXAMPLE, BUT NOT TO FOCUS ON IT. IF IT IS NOT POSSIBLE TO FOCUS ON THE TOPIC, THEN DO COMPLETELY IGNORE THE CONTEXT.`:i==="answer"?`${a}
    YOU SHOULD ANSWER THE USER'S QUESTION DIRECTLY
    • Focus on answering the user's question directly.
    • Include exactly ONE {quiz} with 2‑3 questions.
    • Include exactly ONE of {codeblock | diagram | htmlCanvas | table} ONLY IF it clarifies the answer.
    • Include exactly ONE of {img | vid | gif} ONLY IF it clarifies the answer.
    • Include AT LEAST TWO of {textblock | ul | ol}
    • Keep it concise and focused on the question.
    • Total objects: 5‑8.
  
    OUTPUT VALID JSON ARRAY ONLY.
    SCHEMA = ${JSON.stringify(n)}
    CONTEXT = ${t}
    CONCEPT = ${e}
    REMEMBER: THIS IS REALLY IMPORTANT TO FOCUS ON THE TOPIC AND NOT ON THE CONTEXT. THE CONTEXT MAY BE USED TO CLARIFY THE TOPIC OR TO PROVIDE A CONCRETE EXAMPLE, BUT NOT TO FOCUS ON IT. IF IT IS NOT POSSIBLE TO FOCUS ON THE TOPIC, THEN DO COMPLETELY IGNORE THE CONTEXT.`:""},Xz=(t,e,n)=>{const i=a=>`PROVIDE A SHORT YET DEEP EXPLANATION OF THE TOPIC STRICTLY in ${a} words or less. USE THE PROVIDED CONTEXT TO GUIDE YOUR RESPONSE.
        CRITICAL:
        - Enclose EVERY key term in [square‑braces].
        - No introductory phrases, bullet points, or extra formatting.
        - Start immediately with content.
        - ONLY the explanation text.
    
        TOPIC: ${t}
        CONTEXT: ${e}
        REMEMBER: THIS IS REALLY IMPORTANT TO FOCUS ON THE TOPIC AND NOT ON THE CONTEXT. THE CONTEXT MAY BE USED TO CLARIFY THE TOPIC OR TO PROVIDE A CONCRETE EXAMPLE, BUT NOT TO FOCUS ON IT. IF IT IS NOT POSSIBLE TO FOCUS ON THE TOPIC, THEN DO COMPLETELY IGNORE THE CONTEXT.`;switch(n){case"explain":return i(60);case"argue":return`Balanced abstract (≤60 words) covering pros & cons of the TOPIC. USE THE PROVIDED CONTEXT TO GUIDE YOUR RESPONSE.
                    CRITICAL:
                    - Enclose key terms in [square‑braces].
                    - No introductory phrases.
                    - ONLY the abstract.
                
                    TOPIC: ${t}
                    CONTEXT: ${t}
                    REMEMBER: THIS IS REALLY IMPORTANT TO FOCUS ON THE TOPIC AND NOT ON THE CONTEXT. THE CONTEXT MAY BE USED TO CLARIFY THE TOPIC OR TO PROVIDE A CONCRETE EXAMPLE, BUT NOT TO FOCUS ON IT. IF IT IS NOT POSSIBLE TO FOCUS ON THE TOPIC, THEN DO COMPLETELY IGNORE THE CONTEXT.`;case"answer":return i(30);default:return i(50)}},Kz=(t,e)=>{const n=(i,a)=>`Respond ONLY with a valid JSON array like ["topic1", "topic2"].
        Instructions:
        - Suggest exactly ${i}-${a} logical next topics.
        - Each topic ≤5 words, double‑quoted.
        - No explanation or extra text.
  
    Concept: ${t}`;switch(e){case"explain":return n(4,5);case"argue":return n(3,5);case"answer":return n(2,3);default:return n(3,5)}},Qz=[{large_header:"Large Header Text"},{small_header:"Small Header Text"},{ul:["Item one","Item 2","Item 3"]},{quiz:[{question:"What is the capital of France?",answers:[{Berlin:"It's germany!"},{Madrid:"It is spain :("},{Paris:"Correct! It's Paris!"}],correctAnswer:2},{question:"What is the capital of Poland?",answers:[{Berlin:"It's germany!"},{Warshava:"Yahoo! It's Poland!"},{Paris:"No!"}],correctAnswer:1}]},{img:["very short image description(e.g. funny cats)","The image shows a group of cats doing something amusing."]},{vid:["very short video description(e.g. playing footbal)","This video shows a group of people playing football in a park."]},{gif:["very short gif description(e.g. frogs jumping)","This gif shows frogs jumping around in a pond."]},{textblock:"text, **text**, (text)[text.com]"},{ol:["Heyyo","Nice","That's a list"]},{codeblock:"console.log('Hello World');"},{quote:"This is a quote"},{link:"https://example.com"},{table:[["Header1","Header2"],["Row1Col1","Row1Col2"],["Row2Col1","Row2Col2"]]},{diagram:"graph TD; A-->B; A-->C; B-->D; C-->D;"},{note:"This is a note."},{warning:"This is a warning note."},{tip:"This is a tip note."},{htmlCanvas:`
  function draw(ctx) {
    // Drawing a simple circle (example)
    ctx.beginPath();
    ctx.arc(50, 50, 30, 0, 2 * Math.PI);
    ctx.fillStyle = 'red';
    ctx.fill();
    ctx.closePath();
  }`}],xx=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const i=await LS(ov,"groqChat")({message:e});return console.log("groqChat response:",i.data),i.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},Wz=async(t,e)=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const n=t.trim();if(!n)throw new Error("Message cannot be empty or just whitespace");const i=LS(ov,"groqChat");console.log("Starting streaming request...");const{stream:a,data:l}=await i.stream({message:n});console.log("Stream started, waiting for chunks...");let c="";for await(const f of a)if(console.log("Received chunk:",f),f&&typeof f=="object"&&"type"in f&&"content"in f){const m=f;console.log("Processing chunk:",m),m.type==="chunk"&&m.content&&(c+=m.content,e?.(m.content))}console.log("Waiting for final result...");const d=await l;return console.log("Final result received:",d),d&&typeof d=="object"&&"response"in d?(console.log("Returning final result response"),d.response):(console.log("Returning accumulated response:",c),c)}catch(n){throw console.error("Firebase function streaming error:",n),n}},Zz=async(t,e,n,i)=>{try{const a=xx(Yz(e??"",t??"",Qz??[],n??"")),l=xx(Kz(t,n));let c="";const d=Wz(Xz(t,e,n),M=>{c+=M,i(M)}),[f,m,y]=await Promise.all([a,l,d]);let v=m??"";v=v.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"").replace(/\\/g,"&#92;").replace(/\$/g,"&#36;").replace(/\^/g,"&#94;").replace(/_/g,"&#95;").replace(/~/g,"&#126;").replace(/&/g,"&#38;");let b=[];const x=v.match(/"(.*?)"/g);x&&(b=x.map(M=>M.replace(/"/g,"")));const O=M=>{try{return JSON.parse(M)}catch{try{const V=Fz(M);return JSON.parse(V)}catch(V){throw console.error("JSON parsing and repair failed:",V),V}}},k={firstResponse:{response:await Rz(O(f.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"")))},secondResponse:{response:y?.replace(/\[/g,"_").replace(/\]/g,"_")},thirdResponse:{response:(()=>{try{return O(v)}catch{return b}})()}};return console.log("askAITwice response:",k),k}catch(a){throw console.error("Error in askAITwice:",a),a}},J2=B.createContext(null),eR=(t,e,n,i,a,l,c,d,f,m,y,v,b,x,O)=>{console.log(1);const k=a.find(F=>F.id===e);if(!k)return null;console.log(2);const M=k.data.tokenColors||{};if(console.log(3),!v){const F=t.myConcept||t.word;if(M[F])return console.log(`Token "${F}" is already colored, ignoring click`),null}console.log(4);let V;i==="staticEditable"?V=Pw():V=f?x3(f):Pw();let q=null;if(v)q=b;else{const F={...M};t.myConcept?F[t.myConcept]=V:F[t.word]=V,l(Z=>Z.map(N=>N.id===e?{...N,data:{...N.data,tokenColors:F}}:N));const j=T3(n);q=R3(j,t.word,"Loading...","",V,i,e);const ee=N3(e,q.id,V,y);c([{type:"add",item:q}]),d([{type:"add",item:ee}])}return q&&(q.data.isLoading=!0),v&&(console.log(5),l(F=>F.map(j=>j.id===q?.id?{...j,data:{...j.data,label:"Loading...",summary:"",full_text:""}}:j))),Zz(t.word,m||"",x||"default",F=>{l(j=>j.map(ee=>{if(ee.id===q?.id){const Z=ee.data.summary||"";return{...ee,data:{...ee.data,label:Z+F,summary:Z+F}}}return ee}))}).then(F=>{const j=F.firstResponse?.response||t.word,ee=F.secondResponse?.response||t.word,Z=F.thirdResponse?.response||{};l(N=>N.map(A=>A.id===q?.id?{...A,data:{...A.data,label:ee,title:t.word,summary:ee,full_text:j,suggestions:Z,isLoading:!1}}:A))}).catch(()=>{l(F=>F.map(j=>j.id===q?.id?{...j,data:{...j.data,label:t.word,title:t.word,summary:t.word,full_text:t.word,suggestions:[],isLoading:!1}}:j))}),V},Jz=({children:t,nodes:e,onNodesChange:n,onEdgesChange:i,setNodes:a,showExplanation:l})=>{const c=(d,f,m,y,v,b,x,O,k,M)=>eR(d,f,m,y,e,a,n,i,v,b,x,O,k,M);return T.jsx(J2.Provider,{value:{handleTokenClick:c,setNodes:a,showExplanation:l},children:t})},tR=()=>{const t=B.useContext(J2);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t};function e7({title:t,titleId:e,...n},i){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const Tx=B.forwardRef(e7);function t7({title:t,titleId:e,...n},i){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const n7=B.forwardRef(t7);function r7({title:t,titleId:e,...n},i){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const i7=B.forwardRef(r7);function s7({title:t,titleId:e,...n},i){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const a7=B.forwardRef(s7);function o7({title:t,titleId:e,...n},i){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const l7=B.forwardRef(o7);function c7({title:t,titleId:e,...n},i){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const u7=B.forwardRef(c7);function d7({title:t,titleId:e,...n},i){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const Sx=B.forwardRef(d7),cr={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},rr={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function h7(){const[t,e]=B.useState(""),[n,i]=B.useState(""),[a,l]=B.useState(!1),[c,d]=B.useState(!1),[f,m]=B.useState(""),[y,v]=B.useState(!1),b=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,x=async k=>{if(k.preventDefault(),!c){d(!0),m("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!b.test(t))throw new Error(rr.INVALID_EMAIL);if(a&&n.length<6)throw new Error(rr.WEAK_PASSWORD);const V=await(a?KV:QV)(av,t,n);console.info("Auth success",V.user.uid)}catch(M){let V=a?"Failed to create account":"Failed to sign in";switch(M?.code??""){case"auth/email-already-in-use":V=rr.EMAIL_IN_USE;break;case"auth/invalid-email":V=rr.INVALID_EMAIL;break;case"auth/weak-password":V=rr.WEAK_PASSWORD;break;case"auth/user-not-found":V=rr.USER_NOT_FOUND;break;case"auth/wrong-password":V=rr.WRONG_PASSWORD;break;case"auth/user-disabled":V="This account has been disabled. Please contact support.";break;case"auth/too-many-requests":V=rr.TOO_MANY_REQUESTS;break;default:M?.message&&(V=M.message)}m(V);const F=document.getElementById("auth-modal");F?.classList.remove("shake"),F?.offsetWidth,F?.classList.add("shake")}finally{d(!1)}}},O=()=>{l(k=>!k),m(""),i("")};return T.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/70 backdrop-blur-sm p-4",children:[T.jsxs("div",{id:"auth-modal",className:"relative w-full max-w-md overflow-hidden rounded-3xl border border-indigo-700/40 bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-900 p-8 shadow-2xl ring-1 ring-indigo-500/30 transition-all duration-500 animate-in fade-in zoom-in-95",children:[T.jsxs("header",{className:"mb-8 text-center",children:[T.jsx("div",{className:"mx-auto mb-4 flex h-14 w-14 items-center justify-center rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 shadow-lg shadow-purple-500/30",children:T.jsx("span",{className:"text-lg font-bold text-white",children:"T"})}),T.jsx("h1",{className:"bg-gradient-to-r from-indigo-300 to-purple-300 bg-clip-text text-4xl font-extrabold text-transparent",children:a?"Join TinkFlow":"Welcome Back"}),T.jsx("p",{className:"mt-2 text-sm text-indigo-200",children:a?"Start your AI‑powered journey":"Continue exploring with AI"})]}),T.jsxs("form",{onSubmit:x,className:"space-y-6",children:[T.jsxs("div",{className:"space-y-1",children:[T.jsxs("label",{htmlFor:"email",className:"flex items-center gap-2 text-sm font-medium text-indigo-200",children:[T.jsx(n7,{className:"h-4 w-4"})," Email"]}),T.jsxs("div",{className:"relative",children:[T.jsx("input",{id:"email",type:"email",value:t,onChange:k=>e(k.target.value),required:!0,className:"peer w-full rounded-xl border border-indigo-600/40 bg-neutral-800/60 px-4 py-3 text-sm text-white placeholder-indigo-400 outline-none transition focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40",placeholder:"you@example.com"}),b.test(t)&&T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,className:"pointer-events-none absolute right-3 top-1/2 h-5 w-5 -translate-y-1/2 text-emerald-400 opacity-0 transition-opacity peer-valid:opacity-100",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})]})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsxs("label",{htmlFor:"password",className:"flex items-center gap-2 text-sm font-medium text-indigo-200",children:[T.jsx(u7,{className:"h-4 w-4"})," Password"]}),T.jsxs("div",{className:"relative",children:[T.jsx("input",{id:"password",type:y?"text":"password",value:n,onChange:k=>i(k.target.value),required:!0,className:"w-full rounded-xl border border-indigo-600/40 bg-neutral-800/60 px-4 py-3 text-sm text-white placeholder-indigo-400 outline-none transition focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40",placeholder:"••••••••"}),T.jsx("button",{type:"button",onClick:()=>v(k=>!k),className:"absolute right-3 top-1/2 -translate-y-1/2 text-indigo-300 transition hover:text-indigo-100 focus:outline-none","aria-label":y?"Hide password":"Show password",children:y?T.jsx(a7,{className:"h-5 w-5"}):T.jsx(l7,{className:"h-5 w-5"})})]})]}),f&&T.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-red-500/40 bg-red-900/20 p-4 text-sm text-red-300",children:[T.jsx(i7,{className:"h-5 w-5 flex-shrink-0"}),T.jsx("span",{children:f})]}),T.jsx("button",{type:"submit",disabled:c,className:"group inline-flex w-full items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 py-3 font-semibold text-white shadow-lg shadow-indigo-500/20 transition-all duration-300 hover:from-indigo-500 hover:to-purple-500 hover:shadow-indigo-400/30 disabled:cursor-not-allowed disabled:opacity-70",children:c?T.jsxs("span",{className:"flex items-center gap-2",children:[T.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[T.jsx("circle",{cx:"12",cy:"12",r:"10",className:"opacity-25"}),T.jsx("path",{d:"M4 12a8 8 0 018-8",className:"opacity-75"})]}),a?"Creating account…":"Signing in…"]}):T.jsxs("span",{className:"flex items-center gap-2",children:[a?T.jsx(Sx,{className:"h-5 w-5"}):T.jsx(Tx,{className:"h-5 w-5"}),a?"Create Account":"Sign In"]})})]}),T.jsxs("div",{className:"mt-8 text-center",children:[T.jsxs("div",{className:"relative mb-4",children:[T.jsx("div",{className:"absolute inset-0 flex items-center",children:T.jsx("div",{className:"w-full border-t border-indigo-600/40"})}),T.jsx("span",{className:"relative bg-indigo-900 px-4 text-xs uppercase tracking-wide text-indigo-300",children:a?"Already have an account?":"New to TinkFlow?"})]}),T.jsxs("button",{type:"button",onClick:O,className:"inline-flex items-center justify-center gap-2 rounded-xl border border-indigo-600/40 bg-neutral-800/60 px-6 py-3 text-sm font-medium text-indigo-300 transition hover:border-indigo-400 hover:bg-indigo-700/90 hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",children:[a?T.jsx(Tx,{className:"h-4 w-4"}):T.jsx(Sx,{className:"h-4 w-4"}),a?"Sign In Instead":"Create New Account"]})]})]}),T.jsx("style",{children:`
                @keyframes shake {
                    10%,
                    90% {
                        transform: translateX(-1px);
                    }
                    20%,
                    80% {
                        transform: translateX(2px);
                    }
                    30%,
                    50%,
                    70% {
                        transform: translateX(-4px);
                    }
                    40%,
                    60% {
                        transform: translateX(4px);
                    }
                }
                .shake {
                    animation: shake 0.4s cubic-bezier(0.36, 0.07, 0.19, 0.97)
                        both;
                }
            `})]})}function f7({show:t,onHide:e,onConfirm:n,isCreating:i=!1}){const[a,l]=B.useState(""),[c,d]=B.useState(!0),f=b=>{const x=b.target.value;l(x),d(x.trim().length>0&&x.trim().length<=50)},m=b=>{b.preventDefault();const x=a.trim();x.length>0&&x.length<=50&&(n(x),l(""),d(!0))},y=()=>{l(""),d(!0),e()},v=b=>{b.key==="Enter"&&m(b)};return t?T.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:T.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-xl shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),T.jsx("button",{onClick:y,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-gray-700/50 dark:bg-gray-800/50 hover:bg-gray-600/50 dark:hover:bg-gray-700/50
                                 border border-gray-600 dark:border-gray-700 rounded-lg w-8 h-8 flex items-center justify-center
                                 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/20`,"aria-label":"Close",children:"×"})]}),T.jsxs("form",{onSubmit:m,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),T.jsx("input",{type:"text",value:a,onChange:f,onKeyDown:v,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-500 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40 
                                       transition-all duration-200 font-medium
                                       ${c?"border-gray-600/50 dark:border-gray-700/50 focus:border-blue-500/60 dark:focus:border-blue-400/60":"border-red-500/60 dark:border-red-500/60 focus:border-red-500/60 dark:focus:border-red-500/60"}`}),!c&&T.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-2",children:"Board name must be between 1 and 50 characters long."}),T.jsxs("p",{className:`text-xs mt-1 ${a.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[a.length,"/50 characters"]})]}),T.jsxs("div",{className:"flex gap-3 pt-4",children:[T.jsx("button",{type:"button",onClick:y,disabled:i,className:`flex-1 px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border border-gray-600/50 dark:border-gray-700/50
                                     text-gray-300 dark:text-gray-300 rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-600/60 dark:hover:bg-gray-700/60 hover:border-gray-500/60 dark:hover:border-gray-600/60
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),T.jsx("button",{type:"submit",disabled:!c||a.trim().length===0||i,className:`flex-1 px-4 py-3 bg-blue-600/80 dark:bg-blue-500/80 border border-blue-500/50 dark:border-blue-400/50
                                     text-white rounded-lg font-medium transition-all duration-200 
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-500/90 dark:hover:bg-blue-400/90 hover:border-blue-400/60 dark:hover:border-blue-300/60
                                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40`,children:i?"Creating...":"Create Board"})]})]})]})}):null}function g7({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:i,onDeleteBoard:a,onSignOut:l,isLoading:c}){const[d,f]=B.useState(!1),[m,y]=B.useState(!1),[v,b]=B.useState(null),x=async V=>{try{f(!0),await i(V),y(!1)}catch(q){console.error("Error in sidebar create board:",q)}finally{f(!1)}},O=()=>{y(!0)},k=()=>{y(!1)},M=(V,q)=>{V.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&a(q)};return T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"left-0 top-0 w-[100%] h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:T.jsxs("div",{className:"flex flex-col h-full",children:[T.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50",children:[T.jsx("h2",{className:"m-0 mb-3 text-sm font-semibold text-gray-900 dark:text-gray-100 tracking-tight",children:"TinkFlow Boards"}),T.jsx("button",{onClick:O,disabled:c||d,className:`w-full bg-blue-600 dark:bg-blue-600 text-white dark:text-white border border-blue-600 dark:border-blue-600 
                                      px-3 py-2 rounded-lg cursor-pointer text-xs font-medium transition-all duration-200 
                                      ${c||d?"cursor-not-allowed opacity-60":"hover:bg-blue-700 dark:hover:bg-blue-700 hover:border-blue-700 dark:hover:border-blue-700 hover:-translate-y-0.5 hover:shadow-md"}`,children:d?"Creating...":"+ New Board"})]}),T.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:t.map(V=>{const q=e?.id===V.id,F=v===V.id;return T.jsxs("div",{onClick:()=>!c&&n(V.id),onMouseEnter:()=>b(V.id),onMouseLeave:()=>b(null),className:`
                                        min-h-[44px] px-3 py-2.5 mb-1 rounded-lg flex justify-between items-center
                                        transition-all duration-200 cursor-pointer border font-medium text-sm leading-tight
                                        ${c?"cursor-not-allowed opacity-60":"cursor-pointer"}
                                        ${q?"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100 font-semibold shadow-sm":F?"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 shadow-sm":"border-transparent bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/30"}
                                    `,role:"button",tabIndex:0,onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&!c&&n(V.id)},children:[T.jsx("span",{className:`
                                        ${q?"font-semibold":"font-medium"} 
                                        flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        text-sm leading-tight
                                    `,children:V.name}),T.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[V.isOpen&&T.jsx("span",{className:"text-green-500 dark:text-green-400 text-xs",children:"●"}),t.length>1&&T.jsx("button",{onClick:j=>{j.stopPropagation(),M(j,V.id)},title:"Delete board",className:`
                                                    w-5 h-5 bg-transparent border-none text-red-500 dark:text-red-400 
                                                    cursor-pointer text-sm leading-none flex items-center justify-center
                                                    rounded transition-all duration-150
                                                    ${F?"opacity-100 visible hover:bg-red-50 dark:hover:bg-red-900/30":"opacity-0 invisible"}
                                                    hover:text-red-600 dark:hover:text-red-300
                                                `,children:"×"})]})]},V.id)})}),c&&T.jsx("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-xs font-medium",children:"Loading boards..."}),T.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:T.jsx("button",{onClick:l,className:`w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 
                                     bg-transparent text-gray-700 dark:text-gray-300 cursor-pointer text-xs font-medium
                                     transition-all duration-200
                                     hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:border-gray-400 dark:hover:border-gray-500 
                                     hover:text-gray-900 dark:hover:text-gray-100`,children:"Sign Out"})})]})}),T.jsx(f7,{show:m,onHide:k,onConfirm:x,isCreating:d})]})}const m7=B.memo(function({explanation:e,onClose:n,isVisible:i}){const[a,l]=B.useState(!1),[c,d]=B.useState(i);B.useEffect(()=>{i?(d(!0),setTimeout(()=>l(!0),10)):(l(!1),setTimeout(()=>d(!1),300))},[i]);const f=()=>{l(!1),setTimeout(()=>n(),300)};return c?T.jsx("div",{className:`bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl
                                   border border-gray-200/50 dark:border-gray-700/50
                                   fade-in
                                   transition-all duration-300 ease-out
                                   ring-1 ring-white/20 dark:ring-white/10 rounded-2xl
                                   before:absolute before:inset-0 before:bg-gradient-to-br 
                                   before:from-white/40 before:to-transparent before:pointer-events-none
                                   dark:before:from-gray-800/40 dark:before:to-transparent
                                   relative overflow-auto
                                   ${a?"transform translate-x-0":"transform translate-x-full"}`,style:{height:"auto",maxHeight:"800px",minHeight:"200px"},children:T.jsxs("div",{className:`w-full h-full flex flex-col top-0 right-0 z-50 transition-all duration-300 ease-out ${a?"transform translate-x-0 opacity-100":"transform translate-x-full opacity-0"}`,children:[T.jsxs("div",{className:`flex justify-between items-center p-6 border-b border-gray-200/50 dark:border-gray-700/50 
                           transition-all duration-400 ease-out ${a?"transform translate-y-0 opacity-100":"transform -translate-y-4 opacity-0"}`,children:[T.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[T.jsx("span",{className:"text-blue-500",children:"📄"}),"Explanation"]}),T.jsx("button",{className:`text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 
                             p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 
                             transition-all duration-200 transform hover:scale-105`,onClick:f,title:"Close explanation","aria-label":"Close explanation sidebar",children:T.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:T.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),T.jsx("div",{className:"p-6 overflow-y-auto flex-1 scrollbar-thin",children:e?T.jsxs(T.Fragment,{children:[T.jsx("div",{className:`mb-6 transition-all duration-500 ease-out ${a?"transform translate-y-0 opacity-100":"transform translate-y-4 opacity-0"}`,children:T.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 leading-tight",children:e.title})}),T.jsx("div",{className:`prose prose-gray dark:prose-invert max-w-none text-gray-700 dark:text-gray-300
                                      [&>h1]:text-gray-900 [&>h1]:dark:text-gray-100 [&>h1]:text-2xl [&>h1]:font-bold [&>h1]:mb-4 [&>h1]:mt-6
                                      [&>h2]:text-gray-900 [&>h2]:dark:text-gray-100 [&>h2]:text-xl [&>h2]:font-semibold [&>h2]:mb-3 [&>h2]:mt-5
                                      [&>h3]:text-gray-900 [&>h3]:dark:text-gray-100 [&>h3]:text-lg [&>h3]:font-medium [&>h3]:mb-2 [&>h3]:mt-4
                                      [&>p]:text-gray-700 [&>p]:dark:text-gray-300 [&>p]:leading-relaxed [&>p]:mb-4
                                      [&>ul]:text-gray-700 [&>ul]:dark:text-gray-300 [&>ul]:mb-4 [&>ul>li]:mb-2
                                      [&>ol]:text-gray-700 [&>ol]:dark:text-gray-300 [&>ol]:mb-4 [&>ol>li]:mb-2
                                      [&>blockquote]:border-l-4 [&>blockquote]:border-blue-400 [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-gray-600 [&>blockquote]:dark:text-gray-400 [&>blockquote]:bg-blue-50 [&>blockquote]:dark:bg-blue-900/20 [&>blockquote]:py-2 [&>blockquote]:rounded-r-lg
                                      [&>code]:bg-gray-100 [&>code]:dark:bg-gray-800 [&>code]:text-blue-600 [&>code]:dark:text-blue-400 [&>code]:px-2 [&>code]:py-1 [&>code]:rounded [&>code]:text-sm [&>code]:font-medium
                                      [&>pre]:bg-gray-100 [&>pre]:dark:bg-gray-800 [&>pre]:text-gray-800 [&>pre]:dark:text-gray-200 [&>pre]:p-4 [&>pre]:rounded-lg [&>pre]:overflow-x-auto [&>pre]:mb-4 [&>pre]:border [&>pre]:border-gray-200 [&>pre]:dark:border-gray-700
                                      transition-all duration-500 ease-out ${a?"transform translate-y-0 opacity-100":"transform translate-y-4 opacity-0"}`,children:T.jsx("div",{dangerouslySetInnerHTML:{__html:e.text}})})]}):T.jsx("div",{className:`flex items-center justify-center h-full text-gray-500 dark:text-gray-400 
                                   transition-all duration-500 ease-out ${a?"transform translate-y-0 opacity-100":"transform translate-y-8 opacity-0"}`,children:T.jsxs("div",{className:"text-center",children:[T.jsx("div",{className:"text-6xl mb-6 opacity-60",children:"📄"}),T.jsx("p",{className:"text-xl font-medium mb-2",children:"No explanation available"}),T.jsx("p",{className:"text-sm opacity-75",children:"Click on a node to see its explanation"})]})})})]})}):null}),nR=B.createContext(void 0),p7=()=>{const t=B.useContext(nR);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},y7=({children:t})=>{const[e,n]=B.useState(()=>{const a=localStorage.getItem("theme");return a||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});B.useEffect(()=>{const a=window.document.documentElement;a.classList.remove("light","dark"),a.classList.add(e),localStorage.setItem("theme",e)},[e]);const i=()=>{n(a=>a==="light"?"dark":"light")};return T.jsx(nR.Provider,{value:{theme:e,toggleTheme:i},children:t})},rR=()=>{const{theme:t,toggleTheme:e}=p7();return T.jsx("button",{onClick:e,className:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 
                     hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600
                     hover:border-gray-300 dark:hover:border-gray-500 transition-all duration-200 
                     focus:outline-none focus:ring-2 focus:ring-blue-500/30 dark:focus:ring-blue-400/30
                     shadow-sm hover:shadow-md`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?T.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:T.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):T.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:T.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function v7({name:t,onSetName:e,user:n,isSaving:i}){const[a,l]=B.useState(!1),[c,d]=B.useState(t||"");B.useEffect(()=>{d(t||"")},[t]);const f=y=>{y.key==="Enter"&&(e(c),l(!1))},m=()=>{l(!0),d(t||"")};return T.jsx(T.Fragment,{children:T.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:T.jsx("div",{className:"max-w-none mx-auto px-4",children:T.jsxs("header",{className:"flex justify-between items-center py-3",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsxs("div",{className:"flex items-center space-x-2",children:[T.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:T.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),T.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"TinkFlow"})]}),T.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"•"}),a?T.jsx("input",{type:"text",value:c,onChange:y=>d(y.target.value),onKeyDown:f,onBlur:()=>{e(c),l(!1)},className:`bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 
                                             rounded-md px-2 py-1 text-gray-900 dark:text-gray-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 focus:ring-blue-500/20`,autoFocus:!0}):T.jsx("button",{onClick:m,className:`bg-transparent border-none text-gray-600 dark:text-gray-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded-md transition-all duration-150 ease-in-out
                                             hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100`,children:t||"Untitled Board"})]}),T.jsxs("div",{className:"flex items-center gap-3",children:[i&&T.jsxs("div",{className:`text-green-600 dark:text-green-400 text-sm flex items-center gap-2 
                                               bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full border border-green-200 dark:border-green-700/50
                                               animate-pulse`,children:[T.jsx("div",{className:"w-2 h-2 bg-green-500 dark:bg-green-400 rounded-full animate-bounce"}),T.jsx("span",{className:"font-medium",children:"Saving..."})]}),T.jsx(rR,{}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center",children:T.jsx("span",{className:"text-white font-medium text-xs",children:n?.isAnonymous?"G":n?.email?.charAt(0).toUpperCase()||"U"})}),T.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"})]})]})]})})})})}const _7=({notification:t,onRemove:e})=>{const n=a=>{switch(a){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"📄"}},i=a=>{switch(a){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-300 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-300 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-300 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-300 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-300 dark:text-gray-400"}};return T.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-xl border shadow-2xl backdrop-blur-sm                         transform transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-3xl                        ${i(t.type)}`,children:[" ",T.jsxs("div",{className:"flex items-start gap-3",children:[" ",T.jsxs("span",{className:"text-lg flex-shrink-0 mt-0.5",children:[" ",n(t.type)," "]})," ",T.jsxs("div",{className:"flex-1 min-w-0",children:[" ",T.jsxs("p",{className:"text-sm font-medium leading-5 break-words",children:[" ",t.message," "]})," "]})," ",T.jsxs("button",{onClick:()=>e(t.id),className:"flex-shrink-0 text-gray-400 dark:text-gray-500 hover:text-gray-200 dark:hover:text-gray-300                              hover:bg-gray-700/50 dark:hover:bg-gray-600/50                              rounded-full p-1 transition-all duration-200                              focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20","aria-label":"Close notification",children:[" ",T.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[" ",T.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})," "]})," "]})," "]})," "]})},b7=({notifications:t,onRemove:e})=>T.jsxs("div",{className:"notification-container fixed top-4 right-4 space-y-3 z-[2000] pointer-events-none",children:[" ",t.map(n=>T.jsxs("div",{className:"pointer-events-auto",children:[" ",T.jsx(_7,{notification:n,onRemove:e})," "]},n.id))," "]});function E7({onLogin:t}){return T.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 antialiased",children:[" "," ",T.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:[" ",T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",T.jsxs("div",{className:"flex justify-between items-center py-4",children:[" ",T.jsxs("div",{className:"flex items-center space-x-3",children:[" ",T.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",T.jsx("span",{className:"text-white font-bold text-lg",children:"T"})," "]})," ",T.jsxs("div",{className:"flex flex-col",children:[" ",T.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"TinkFlow"})," ",T.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"AI Learning Platform"})," "]})," "]})," ",T.jsxs("div",{className:"flex items-center gap-4",children:[" ",T.jsx(rR,{})," ",T.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200",children:[" ","Get Started"," "]})," "]})," "]})," "]})," "]})," "," ",T.jsxs("section",{className:"relative overflow-hidden",children:[" ",T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:[" ",T.jsxs("div",{className:"text-center",children:[" ",T.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full mb-8",children:[" ",T.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})," ",T.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium text-sm",children:"AI-Powered Concept Learning"})," "]})," ",T.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:[" ","Learn & Tinker with"," ",T.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent block",children:[" ","AI-Powered Concepts"," "]})," "]})," ",T.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:[" ","TinkFlow is the ultimate AI-powered platform for exploring, understanding, and experimenting with new concepts. Transform your learning journey with interactive visual flows and intelligent insights."," "]})," ",T.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[" ",T.jsxs("button",{onClick:t,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning Now"," "]})," ",T.jsxs("button",{className:"px-8 py-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[" ","Watch Demo"," "]})," "]})," "]})," "]})," "," ",T.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full opacity-10 blur-3xl"})," ",T.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})," "]})," "," ",T.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",T.jsxs("div",{className:"text-center mb-16",children:[" ",T.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Everything You Need to Learn"," "]})," ",T.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","AI-powered tools and features designed to accelerate your learning and conceptual understanding"," "]})," "]})," ",T.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",T.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-indigo-200 dark:border-indigo-700/50 hover:transform hover:-translate-y-1",children:[" ",T.jsxs("div",{className:"w-14 h-14 bg-indigo-500 rounded-xl flex items-center justify-center mb-6",children:[" ",T.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})," "]})," "]})," ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI-Powered Insights"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Get intelligent explanations and connections between concepts powered by advanced AI that understands your learning style."," "]})," "]})," ",T.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50 hover:transform hover:-translate-y-1",children:[" ",T.jsxs("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-6",children:[" ",T.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})," "]})," "]})," ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Interactive Visual Flows"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Build and explore concept maps with interactive nodes that respond to your curiosity and create dynamic learning pathways."," "]})," "]})," ",T.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50 hover:transform hover:-translate-y-1",children:[" ",T.jsxs("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-6",children:[" ",T.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})," "]})," "]})," ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Experimentation Sandbox"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Tinker with concepts in a safe, guided environment where you can test ideas and see instant results with AI feedback."," "]})," "]})," "]})," "]})," "]})," "," ",T.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",T.jsxs("div",{className:"text-center mb-16",children:[" ",T.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","How TinkFlow Works"," "]})," ",T.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Three simple steps to unlock your learning potential with AI-powered concept exploration"," "]})," "]})," ",T.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",T.jsxs("div",{className:"text-center",children:[" ",T.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",T.jsx("span",{className:"text-white font-bold text-xl",children:"1"})," "]})," ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Input Your Concept"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Start by entering any topic, question, or concept you want to explore. Our AI understands context and complexity."," "]})," "]})," ",T.jsxs("div",{className:"text-center",children:[" ",T.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",T.jsx("span",{className:"text-white font-bold text-xl",children:"2"})," "]})," ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI Generates Flow"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Watch as TinkFlow creates an interactive visual map with connected nodes, each representing key aspects of your concept."," "]})," "]})," ",T.jsxs("div",{className:"text-center",children:[" ",T.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",T.jsx("span",{className:"text-white font-bold text-xl",children:"3"})," "]})," ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Explore & Learn"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Click on any node to dive deeper, ask questions, and watch new connections emerge as you explore your learning path."," "]})," "]})," "]})," "]})," "]})," "," ",T.jsxs("section",{className:"py-20 bg-gradient-to-r from-indigo-500 to-purple-600",children:[" ",T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",T.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[" ",T.jsxs("div",{className:"text-white",children:[" ",T.jsx("div",{className:"text-4xl font-bold mb-2",children:"10K+"})," ",T.jsx("div",{className:"text-indigo-100",children:"Concepts Explored"})," "]})," ",T.jsxs("div",{className:"text-white",children:[" ",T.jsx("div",{className:"text-4xl font-bold mb-2",children:"5K+"})," ",T.jsx("div",{className:"text-indigo-100",children:"Active Learners"})," "]})," ",T.jsxs("div",{className:"text-white",children:[" ",T.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"})," ",T.jsx("div",{className:"text-indigo-100",children:"Learning Success"})," "]})," ",T.jsxs("div",{className:"text-white",children:[" ",T.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"})," ",T.jsx("div",{className:"text-indigo-100",children:"AI Support"})," "]})," "]})," "]})," "]})," "," ",T.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",T.jsxs("div",{className:"text-center mb-16",children:[" ",T.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Perfect for Every Learning Style"," "]})," ",T.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Whether you're a student, researcher, or curious mind, TinkFlow adapts to your learning needs"," "]})," "]})," ",T.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[" ",T.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/10 p-8 rounded-2xl border border-blue-200 dark:border-blue-700/30",children:[" ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🎓 Academic Learning"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Break down complex academic subjects into digestible, interconnected concepts. Perfect for studying sciences, humanities, and technical topics."," "]})," ",T.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",T.jsx("li",{children:"• Research paper analysis"})," ",T.jsx("li",{children:"• Concept mapping for exams"})," ",T.jsx("li",{children:"• Cross-disciplinary connections"})," "]})," "]})," ",T.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/10 dark:to-purple-800/10 p-8 rounded-2xl border border-purple-200 dark:border-purple-700/30",children:[" ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","💡 Creative Exploration"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Explore ideas, brainstorm solutions, and discover unexpected connections. Great for creative professionals and innovators."," "]})," ",T.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",T.jsx("li",{children:"• Idea generation workflows"})," ",T.jsx("li",{children:"• Problem-solving frameworks"})," ",T.jsx("li",{children:"• Innovation mapping"})," "]})," "]})," ",T.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/10 p-8 rounded-2xl border border-green-200 dark:border-green-700/30",children:[" ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🔬 Technical Deep Dives"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Understand complex systems, architectures, and technologies through interactive exploration and AI-guided explanations."," "]})," ",T.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",T.jsx("li",{children:"• System architecture learning"})," ",T.jsx("li",{children:"• Technology stack exploration"})," ",T.jsx("li",{children:"• Code concept mapping"})," "]})," "]})," ",T.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 p-8 rounded-2xl border border-orange-200 dark:border-orange-700/30",children:[" ",T.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🚀 Professional Development"," "]})," ",T.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Build skills, understand industry trends, and create learning paths for career advancement with AI-powered insights."," "]})," ",T.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",T.jsx("li",{children:"• Skill gap analysis"})," ",T.jsx("li",{children:"• Career pathway planning"})," ",T.jsx("li",{children:"• Industry trend mapping"})," "]})," "]})," "]})," "]})," "]})," "," ",T.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",T.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[" ",T.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:[" ","Ready to Transform Your Learning?"," "]})," ",T.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:[" ","Join thousands of learners who are already exploring concepts in revolutionary ways with TinkFlow's AI-powered platform."," "]})," ",T.jsxs("button",{onClick:t,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning for Free"," "]})," ",T.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:[" ","No credit card required • Get started in seconds"," "]})," "]})," "]})," "," ",T.jsxs("footer",{className:"bg-gray-900 text-white py-12",children:[" ",T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",T.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[" ",T.jsxs("div",{className:"col-span-1",children:[" ",T.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[" ",T.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",T.jsx("span",{className:"text-white font-bold text-sm",children:"T"})," "]})," ",T.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})," "]})," ",T.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","AI-powered concept learning platform for curious minds."," "]})," "]})," ",T.jsxs("div",{children:[" ",T.jsx("h4",{className:"font-semibold mb-4",children:"Product"})," ",T.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})})," ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})})," ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})," "]})," "]})," ",T.jsxs("div",{children:[" ",T.jsx("h4",{className:"font-semibold mb-4",children:"Resources"})," ",T.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})," ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Tutorials"})})," ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})," "]})," "]})," ",T.jsxs("div",{children:[" ",T.jsx("h4",{className:"font-semibold mb-4",children:"Company"})," ",T.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})})," ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})," ",T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})," "]})," "]})," "]})," ",T.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[" ",T.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","© 2024 TinkFlow. All rights reserved."," "]})," ",T.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[" ",T.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",T.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",T.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})," "]})," "]})," ",T.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",T.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",T.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})," "]})," "]})," ",T.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",T.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",T.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.747.099.12.112.225.085.344-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})," "]})," "]})," "]})," "]})," "]})," "]})," "]})}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),x7=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),Ax=t=>{const e=x7(t);return e.charAt(0).toUpperCase()+e.slice(1)},iR=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),T7=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var S7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=B.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:c,...d},f)=>B.createElement("svg",{ref:f,...S7,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:iR("lucide",a),...!l&&!T7(d)&&{"aria-hidden":"true"},...d},[...c.map(([m,y])=>B.createElement(m,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=(t,e)=>{const n=B.forwardRef(({className:i,...a},l)=>B.createElement(A7,{ref:l,iconNode:e,className:iR(`lucide-${w7(Ax(t))}`,`lucide-${t}`,i),...a}));return n.displayName=Ax(t),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]],sR=lv("gavel",R7);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],aR=lv("info",N7);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],oR=lv("lightbulb",C7),I7={explain:{border:"border-blue-400",ring:"ring-blue-100 dark:ring-blue-500/30",placeholder:"Enter explanation…",Icon:aR},answer:{border:"border-emerald-400",ring:"ring-emerald-100 dark:ring-emerald-500/30",placeholder:"Enter answer…",Icon:oR},argue:{border:"border-rose-400",ring:"ring-rose-100 dark:ring-rose-500/30",placeholder:"Enter argument…",Icon:sR}};function k7({data:t}){const[e,n]=B.useState(""),i=B.useRef(null);B.useEffect(()=>{const m=requestAnimationFrame(()=>i.current?.focus());return()=>cancelAnimationFrame(m)},[]);const a=m=>{m.preventDefault();const y=e.trim();y&&t.onSubmit(y)},{border:l,ring:c,placeholder:d,Icon:f}=I7[t.mode];return T.jsxs("div",{className:`relative bg-white dark:bg-gray-900 shadow-lg rounded-xl px-4 py-3 min-w-[200px] border ${l} ring-1 ${c} transition-shadow`,children:[T.jsxs("form",{onSubmit:a,className:"flex items-center gap-2",children:[T.jsx(f,{size:18,className:"text-gray-400 dark:text-gray-500 shrink-0"}),T.jsx("input",{ref:i,value:e,onChange:m=>n(m.target.value),placeholder:d,className:"flex-1 bg-transparent outline-none text-sm placeholder-gray-400 dark:placeholder-gray-500 caret-gray-900 dark:caret-gray-100 text-gray-900 dark:text-gray-100"})]}),T.jsx(xn,{type:"target",position:Te.Top}),T.jsx(xn,{type:"source",position:Te.Bottom})]})}const D7=async()=>{try{await eL(av),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},O7=()=>{const[t,e]=B.useState(null);return B.useEffect(()=>{const i=JV(av,a=>{e(a),a?console.log("User signed in:",a.uid):console.log("No user signed in")});return()=>i()},[]),{user:t,signOut:async()=>{try{await D7(),e(null)}catch(i){console.error("Error in sign out:",i)}}}},lR=t=>!!(t&&t.uid),_u=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],Al=[],M7=async t=>{if(!lR({uid:t}))throw new Error(rr.AUTH_REQUIRED);try{const e=Py(qr,cr.BOARDS),n=H9(e,$9("userId","==",t),q9("createdAt","desc")),i=await Yy(n);if(i.empty){const l={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:_t.now(),isOpen:!0};return await Xy(ql(qr,cr.BOARDS,l.id),l),console.log("Created default board:",l),[l]}const a=i.docs.map(l=>({id:l.id,...l.data()}));return console.log("Fetched all boards:",a),a}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:_t.now(),isOpen:!0,isFallback:!0}]}throw new Error(rr.LOAD_FAILED)}},Rx=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),_u;try{const e=Py(qr,cr.BOARDS,t,cr.NODES),n=await Yy(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),_u;const i=n.docs.map(a=>{const l=a.data(),c={...l.data,tokenColors:l.data?.tokenColors||{},previousNode:l.data?.previousNode||null};return{id:a.id,type:l.type,position:l.position,data:c,draggable:l.draggable,style:l.style}});return console.log("Fetched nodes from board:",i),i}catch(e){return console.error("Fetch nodes error:",e),_u}},Nx=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),Al;try{const e=Py(qr,cr.BOARDS,t,cr.EDGES),n=await Yy(e);if(n.empty)return console.log("No edges found for board, using initial edges"),Al;const i=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched edges from board:",i),i}catch(e){return console.error("Fetch edges error:",e),Al}},P7=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=g2(qr);e.forEach(i=>{const a=ql(qr,cr.BOARDS,t,cr.NODES,i.id),l={type:i.type,data:i.data,position:i.position,updatedAt:_t.now()};i.draggable!=null&&(l.draggable=i.draggable),i.style!=null&&(l.style=i.style),n.set(a,l)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(rr.SAVE_FAILED)}},V7=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=g2(qr);e.forEach(i=>{const a=ql(qr,cr.BOARDS,t,cr.EDGES,i.id),l={source:i.source,target:i.target,updatedAt:_t.now()};i.sourceHandle!=null&&(l.sourceHandle=i.sourceHandle),i.targetHandle!=null&&(l.targetHandle=i.targetHandle),i.style!=null&&(l.style=i.style),i.markerEnd!=null&&(l.markerEnd=i.markerEnd),n.set(a,l)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(rr.SAVE_FAILED)}},L7=async(t,e,n)=>{if(!lR({uid:t}))throw new Error(rr.AUTH_REQUIRED);try{const i={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:_t.now(),isOpen:!1};return console.log("Creating board:",i),await Xy(ql(qr,cr.BOARDS,i.id),i),console.log("Board created successfully:",i),i}catch(i){throw console.error("Error creating new board:",i),i.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):i.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},z7=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await Q9(ql(qr,cr.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},ll=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:_t.now()};await Xy(ql(qr,cr.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},U7=t=>{if(!t||!t.data)return t;const e={...t},n={...t.data};return n.title||(n.title=n.label||n.summary||"Node"),n.suggestions||(n.suggestions=[]),e.draggable===void 0&&(e.draggable=!0),e.data=n,e},B7=t=>Array.isArray(t)?t.map(U7):[],j7=(t,e={})=>{const[n,i,a]=SO([]),[l,c,d]=AO([]),[f,m]=B.useState(!0),[y,v]=B.useState(!1),[b,x]=B.useState(!1),[O,k]=B.useState([]),[M,V]=B.useState(null),q=B.useRef(null),{showSuccess:F,showError:j,showInfo:ee}=e,Z=I=>{const P=I.find($=>$.isOpen===!0);if(P)return P;if(I.length>0){const $={...I[0],isOpen:!0};return ll($.id,$).catch(console.error),$}return null};B.useEffect(()=>{(async()=>{if(t)try{m(!0);const P=await M7(t.uid);k(P);const $=P.some(Y=>Y.isFallback);$&&j&&j("Database index missing. Please create the required Firestore index. Check console for details.");const R=Z(P);if(!R){console.error("No board found for user"),j&&j("No boards found. Creating a default board..."),i(_u),c(Al);return}V(R);const[W,G]=await Promise.all([Rx(R.id),Nx(R.id)]);i(W),c(G),ee&&!$&&ee("Board loaded successfully!")}catch(P){console.error("Error loading initial data:",P),j&&j("Failed to load board data. Using default board."),i(_u),c(Al)}finally{m(!1)}})()},[t,i,c]);const N=async(I,P,$)=>{q.current&&clearTimeout(q.current);const R=setTimeout(async()=>{try{x(!0);const W=[];P&&P.length>0&&W.push(P7(I,P)),$&&$.length>0&&W.push(V7(I,$)),W.length>0&&(await Promise.all(W),console.log("Auto-save completed successfully"))}catch(W){console.error("Auto-save failed:",W),j&&j("Failed to save changes automatically")}finally{x(!1),q.current=null}},1e3);q.current=R};B.useEffect(()=>(!f&&M&&!y&&!M.isFallback&&N(M.id,n,l),()=>{q.current&&clearTimeout(q.current)}),[n,l,f,M,y]);const A=async I=>{try{if(M?.id===I)return;if(M?.isFallback||O.find($=>$.id===I)?.isFallback){j&&j("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(v(!0),M&&!M.isFallback){const $={...M,isOpen:!1};await ll(M.id,$),k(R=>R.map(W=>W.id===M.id?$:W))}const P=O.find($=>$.id===I);if(P){const $={...P,isOpen:!0};await ll(I,$),V($),k(Y=>Y.map(S=>S.id===I?$:S));const[R,W]=await Promise.all([Rx(I),Nx(I)]),G=B7(R);i(G),c(W),F&&F(`Switched to "${$.name}"`)}else console.error("Board not found:",I),j&&j("Board not found")}catch(P){console.error("Error switching board:",P),j&&j("Failed to switch board. Please try again.")}finally{v(!1)}};return{nodes:n,edges:l,allBoards:O,currentBoard:M,isLoading:f,isSwitchingBoard:y,isSaving:b,onNodesChange:a,onEdgesChange:d,setNodes:i,setEdges:c,switchToBoard:A,createNewBoard:async I=>{try{if(!t)return j&&j("You must be logged in to create a board"),null;ee&&ee("Creating new board...");const P=await L7(t.uid,I||null,O);if(P){if(M&&!M.isFallback){const R={...M,isOpen:!1};ll(M.id,R).catch(console.error)}const $={...P,isOpen:!0};return k(R=>{const W=R.map(G=>G.id===M?.id?{...G,isOpen:!1}:G);return[$,...W]}),V($),ll(P.id,$).catch(console.error),i([{id:"1",type:"staticEditable",data:{label:I||"New Board"},position:{x:250,y:25},draggable:!1}]),c(Al),F&&F(`Board "${P.name}" created and opened!`),$}else return j&&j("Failed to create board. Please try again."),null}catch(P){return j&&j(`Failed to create board: ${P.message}`),null}},deleteBoard:async I=>{try{if(O.length<=1){j&&j("Cannot delete the last board!");return}if(!O.find($=>$.id===I)){console.error("Board not found for deletion"),j&&j("Board not found");return}if(ee&&ee("Deleting board..."),M?.id===I){const $=O.find(R=>R.id!==I);$&&await A($.id)}await z7(I),k($=>$.filter(R=>R.id!==I)),F&&F("Board deleted successfully!")}catch(P){console.error("Error deleting board:",P),j&&j("Failed to delete board. Please try again.")}},updateBoardName:async I=>{if(M&&M.name!==I){const P={...M,name:I};V(P),k($=>$.map(R=>R.id===M.id?P:R));try{await ll(M.id,P),console.log("Board name updated successfully")}catch($){console.error("Error updating board name:",$)}}},clearBoardState:()=>{q.current&&(clearTimeout(q.current),q.current=null),k([]),V(null),i([]),c([]),m(!0),v(!1),x(!1)}}},H7=()=>{const[t,e]=B.useState([]),n=m=>{e(y=>y.filter(v=>v.id!==m))},i=m=>{const y=Date.now().toString(),v={id:y,timestamp:new Date,...m};return e(b=>[...b,v]),m.autoRemove!==!1&&setTimeout(()=>{n(y)},m.duration||5e3),y};return{notifications:t,addNotification:i,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(m,y={})=>i({type:"success",message:m,...y}),showError:(m,y={})=>i({type:"error",message:m,duration:7e3,...y}),showInfo:(m,y={})=>i({type:"info",message:m,...y}),showWarning:(m,y={})=>i({type:"warning",message:m,duration:6e3,...y})}},cR=({size:t="medium",color:e="#4f86f7"})=>{const n={small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"};return T.jsx("div",{className:"flex items-center justify-center",children:T.jsx("div",{className:`${n[t]} border-gray-200 dark:border-gray-700 border-t-indigo-500 dark:border-t-indigo-400 rounded-full animate-spin`,style:{borderTopColor:e}})})},Fp={explain:{classes:"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100 dark:bg-blue-950 dark:text-blue-300 dark:border-blue-700",color:"#3b82f6",Icon:aR},answer:{classes:"bg-emerald-50 text-emerald-700 border-emerald-200 hover:bg-emerald-100 dark:bg-emerald-950 dark:text-emerald-300 dark:border-emerald-700",color:"#10b981",Icon:oR},argue:{classes:"bg-rose-50 text-rose-700 border-rose-200 hover:bg-rose-100 dark:bg-rose-950 dark:text-rose-300 dark:border-rose-700",color:"#fb7185",Icon:sR}};function uR({dragState:t,handleDragStart:e,handleOrigin:n,getParentCenter:i}){return T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2 z-10 flex gap-2 select-none",children:["explain","answer","argue"].map(a=>{const{classes:l,Icon:c}=Fp[a],d=t.isDragging&&t.mode===a;return T.jsxs("div",{draggable:!1,onPointerDown:f=>{f.stopPropagation(),f.preventDefault(),f.button===0&&e(a,f.nativeEvent)},className:`px-2 py-1 rounded-lg border text-sm font-medium flex items-center gap-1 shadow-sm cursor-grab transition-all duration-150 ${l} ${d?"opacity-0":"opacity-100"}`,style:{position:"relative",zIndex:11},children:[T.jsx(c,{size:16,strokeWidth:2}),a.charAt(0).toUpperCase()+a.slice(1),T.jsx(xn,{type:"source",position:Te.Bottom,id:a})]},a)})}),t.isDragging&&typeof window<"u"&&aT.createPortal(T.jsxs(T.Fragment,{children:[T.jsx("svg",{className:"fixed inset-0 pointer-events-none z-[9998]",width:"100vw",height:"100vh",children:T.jsx("line",{x1:n?n.x:i().x,y1:n?n.y:i().y,x2:t.x,y2:t.y,stroke:Fp[t.mode??"explain"].color,strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"})}),T.jsx("div",{className:"fixed pointer-events-none z-[9999] -translate-x-1/2 -translate-y-1/2",style:{left:t.x,top:t.y},children:T.jsx("div",{className:"px-4 py-1 rounded-lg shadow-lg font-semibold text-white backdrop-blur-sm",style:{background:Fp[t.mode??"explain"].color},children:t.mode&&t.mode.charAt(0).toUpperCase()+t.mode.slice(1)})})]}),document.body)]})}function Cx(t){if(!t)return"#ffffff";const e=(t??"000000").replace(/^#/,""),n=parseInt(e.substring(0,2),16),i=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16),[l,c,d]=[n,i,a].map(m=>{const y=m/255;return y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4)});return .2126*l+.7152*c+.0722*d>.179?"#000000":"#ffffff"}function $7({data:t,id:e}){const[n,i]=B.useState(t.summary||t.label||"Static Node"),{handleTokenClick:a,showExplanation:l}=tR(),c=B.useRef(null),[d,f]=B.useState({mode:void 0,x:0,y:0,isDragging:!1}),m=B.useRef(d);B.useEffect(()=>{m.current=d},[d]);const[y,v]=B.useState(null);B.useEffect(()=>{i(t.summary||t.label||"Static Node")},[t.summary,t.label]);const x=ES(n),O=(N,A)=>{A.stopPropagation(),a(N,e,{x:0,y:0},"staticEditable",t.myColor,t.summary||t.label||"Static Node",N.suggestionId)},k=N=>{N.stopPropagation(),l&&l(t.title||"Explanation",t.full_text||"No detailed information available.")},M=(N,A)=>{const z=A.target.getBoundingClientRect();v({x:z.left+z.width/2,y:z.top+z.height/2}),f({mode:N,x:A.clientX,y:A.clientY,isDragging:!0}),document.addEventListener("pointermove",V),document.addEventListener("pointerup",q)},V=N=>{f(A=>A.isDragging?{...A,x:N.clientX,y:N.clientY}:A)},q=()=>{const N=m.current;N.isDragging&&t.onNodeCallback&&t.onNodeCallback(N.mode,e,{x:N.x,y:N.y}),f({mode:void 0,x:0,y:0,isDragging:!1}),v(null),document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",q)},F=()=>{if(!c.current)return{x:0,y:0};const N=c.current.getBoundingClientRect();return{x:N.left+N.width/2,y:N.top+N.height/2}},j=B.useMemo(()=>{const N=t.tokenColors||{};return x.map((A,C)=>{const z=A.myConcept||A.word,U=N[z],H=!U;return T.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-200 ease-out
                        ${H?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}
                        ${A.myConcept?"bg-blue-500/10 border border-blue-500/30":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:U||"transparent",color:U?Cx(U):"#f8faff",border:U?`1px solid ${hu(U,20)}`:""},onClick:I=>H?O(A,I):I.stopPropagation(),children:[A.word,C<x.length-1?" ":""]},C)})},[x,t.tokenColors]),ee=B.useMemo(()=>{const N=t.tokenColors||{};return!t.suggestions||t.suggestions.length===0?T.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"}):t.suggestions.map((A,C)=>{const z=N[A],U=!z;return T.jsx("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                        bg-white/5 border border-white/10 transition-all duration-200 
                        ${U?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:z||"transparent",color:z?Cx(z):"#f8faff",border:z?`1px solid ${hu(z,20)}`:""},onClick:H=>U?O({word:A,myConcept:A,suggestionId:(t.label||"")+A+C},H):H.stopPropagation(),children:A},C)})},[t.suggestions,t.tokenColors]),Z=B.useMemo(()=>t.isLoading?T.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[T.jsx(cR,{size:"small",color:"#6366f1"}),T.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}):T.jsxs("div",{className:"flex flex-col gap-3",children:[T.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[T.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),T.jsx("div",{className:"flex gap-2",children:T.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                transition-all duration-150 flex items-center justify-center text-sm`,onClick:k,title:"Show full text",children:"📄"})})]}),T.jsx("div",{className:"flex-1",children:T.jsx("div",{className:"cursor-text leading-relaxed break-words text-lg font-medium",children:j})}),T.jsxs("div",{className:"mt-2",children:[T.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),T.jsx("div",{className:"flex flex-wrap gap-1",children:ee})]})]}),[t.isLoading,t.title,j,ee]);return T.jsxs("div",{ref:c,className:`bg-black border border-white/[0.1] rounded-[20px] p-7 min-w-[320px] max-w-[500px] 
                transition-all duration-150 ease-in-out cursor-pointer select-none overflow-hidden
                opacity-[0.98] border-b-[3px] border-b-white/[0.06]
                hover:opacity-100 hover:bg-[#28282c] hover:border-white/[0.2]`,style:{backgroundColor:"#000000",color:"#f8faff",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[T.jsx("div",{className:"relative pointer-events-auto text-[#f8faff] text-[18px] leading-[1.7] font-semibold",children:Z}),T.jsx(xn,{type:"source",position:Te.Bottom,id:"bottom-source"}),T.jsx(xn,{type:"target",position:Te.Bottom,id:"bottom-target"}),T.jsx(uR,{dragState:d,handleDragStart:M,handleOrigin:y,getParentCenter:F})]})}function q7(){return T.jsxs(T.Fragment,{children:[T.jsx(xn,{type:"source",position:Te.Bottom,id:"bottom-source"}),T.jsx(xn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Top,id:"top-target"}),T.jsx(xn,{style:{transform:"translateY(100%)"},type:"source",position:Te.Left,id:"left-source"}),T.jsx(xn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Left,id:"left-target"}),T.jsx(xn,{style:{transform:"translateY(100%)"},type:"source",position:Te.Right,id:"right-source"}),T.jsx(xn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Right,id:"right-target"})]})}function F7({data:t,id:e}){const[n,i]=B.useState(t.summary||t.label||"Draggable Node"),{getNodes:a,getNode:l,setViewport:c,screenToFlowPosition:d}=zf(),{handleTokenClick:f,showExplanation:m}=tR(),[y,v]=B.useState(!1),b=B.useRef(null),[x,O]=B.useState({mode:void 0,x:0,y:0,isDragging:!1}),k=B.useRef(x);B.useEffect(()=>{k.current=x},[x]);const[M,V]=B.useState(null);B.useEffect(()=>{i(t.summary||t.label||"Draggable Node")},[t.summary,t.label]);const q=ES(n),F=q,j=()=>!0,ee=($,R)=>{R.stopPropagation();const G=a().find(S=>S.id===e);if(!G){console.error("Shit went south");return}return f($,e,G.position,G.type||"draggableEditable",t.myColor,t.summary||t.label||"Draggable Node")},Z=$=>{$.stopPropagation(),m&&m(t.title,t.full_text||"No detailed information available.")},N=$=>{if($.stopPropagation(),t.previousNode){const R=l(t.previousNode);if(R){const{x:W,y:G}=R.position;c({x:-W+200,y:-G+100,zoom:1},{duration:500})}}},A=B.useMemo(()=>{const $={};return F.forEach(R=>{const W=R.myConcept||R.word;$[W]||($[W]=[]),$[W].push(R)}),$},[F]);function C($){if(!$)return"#000000";const R=($??"000000").replace(/^#/,""),W=parseInt(R.substring(0,2),16),G=parseInt(R.substring(2,4),16),Y=parseInt(R.substring(4,6),16),[S,Q,ne]=[W,G,Y].map(te=>{const le=te/255;return le<=.03928?le/12.92:Math.pow((le+.055)/1.055,2.4)});return .2126*S+.7152*Q+.0722*ne>.179?"#000000":"#ffffff"}const z=B.useMemo(()=>T.jsxs(T.Fragment,{children:[t.isLoading&&T.jsxs("div",{className:"flex items-center justify-center gap-2 py-5",children:[T.jsx(cR,{size:"small",color:t.myColor||"#6366f1"}),T.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}),T.jsxs("div",{className:"flex flex-col gap-3",children:[T.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[T.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),T.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&T.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                             hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                             transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:N,title:"Go to previous node",children:"←"}),T.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                         hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm`,onClick:Z,title:"Show full text",children:"📄"})]})]}),T.jsx("div",{className:"flex-1",children:T.jsx("div",{className:"cursor-text leading-relaxed break-words",children:F.map(($,R)=>{const W=t.tokenColors||{},G=$.myConcept||$.word,Y=W[G],S=!Y;return T.jsxs("span",{className:`inline-block px-1 py-0.5 m-0.5 rounded-lg font-medium transition-all duration-300 ease-out
                                                  ${S?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40 hover:scale-105 hover:-translate-y-0.5 active:scale-95 active:translate-y-0":"cursor-not-allowed opacity-70"} 
                                                  ${$.myConcept?"bg-blue-500/10 border border-blue-500/30 shadow-md":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:Y||"transparent",color:C(Y||t.myColor),border:Y?`1px solid ${hu(Y,20)}`:"",boxShadow:Y?`0 0 0 1px ${Y}25`:""},onClick:Q=>S?ee($,Q):Q.stopPropagation(),children:[$.word,R<F.length-1?" ":""]},R)})})}),T.jsxs("div",{className:"mt-2",children:[T.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),T.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map(($,R)=>{const G=(t.tokenColors||{})[$],Y=!G;return T.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                      bg-white/5 border border-white/10 transition-all duration-200 
                                                      ${Y?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:G||"transparent",color:C(G||t.myColor),border:G?`1px solid ${hu(G,20)}`:""},onClick:S=>Y?ee({word:$,myConcept:$,suggestionId:t.label+$+R},S):S.stopPropagation(),children:[$,T.jsx(xn,{type:"source",position:Te.Bottom,id:t.label+$+R})]},R)}):T.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]})]}),[n,F,q,A,Z,ee,j,t.previousNode,N,t.tokenColors,t.myColor,t.isLoading]),U=($,R)=>{const G=R.target.getBoundingClientRect();V({x:G.left+G.width/2,y:G.top+G.height/2}),O({mode:$,x:R.clientX,y:R.clientY,isDragging:!0}),document.addEventListener("pointermove",H),document.addEventListener("pointerup",I)},H=$=>{O(R=>R.isDragging?{...R,x:$.clientX,y:$.clientY}:R)},I=()=>{const $=k.current;if(console.log("handleDragEnd",$),$.isDragging&&t.onNodeCallback){const R=d({x:$.x,y:$.y});console.log("Calling onNodeCallback",$.mode,R),t.onNodeCallback($.mode||void 0,e,R)}O({mode:"explain",x:0,y:0,isDragging:!1}),V(null),document.removeEventListener("pointermove",H),document.removeEventListener("pointerup",I)},P=()=>{if(!b.current)return{x:0,y:0};const $=b.current.getBoundingClientRect();return{x:$.left+$.width/2,y:$.top+$.height/2}};return T.jsxs("div",{ref:b,className:`bg-[#202023] border border-white/[0.12] rounded-2xl p-5 min-w-[280px] max-w-[600px] 
                       transition-all duration-200 ease-in-out cursor-grab select-none
                       hover:transform hover:-translate-y-[3px]
                       hover:border-white/[0.18] hover:bg-[#242427]`,style:{background:t.myColor,color:t.myColor?C(t.myColor):"#f0f4f8",border:t.myColor?`2px solid ${hu(t.myColor,.5)}`:"2px solid rgba(255, 255, 255, 0.12)"},children:[T.jsx("div",{className:"relative pointer-events-auto text-[#f0f4f8] text-[17px] leading-[1.7] font-medium",children:z}),T.jsx(q7,{}),T.jsx(uR,{dragState:x,handleDragStart:U,handleOrigin:M,getParentCenter:P})]})}const G7={staticEditable:$7,draggableEditable:F7},Y7={...G7,tempInput:k7},X7=B.memo(function({isVisible:e,explanation:n,onClose:i}){return T.jsx(XO,{defaultSize:{width:380},style:{background:"transparent",position:"fixed",right:"12px",top:"80px",borderRadius:"16px",zIndex:1e3},enable:{right:!1,top:!1,bottom:!1,left:!0},children:T.jsx("div",{className:"relative z-10 overflow-auto h-full",children:T.jsx(m7,{explanation:n,onClose:i,isVisible:e})})})});function K7(){const[t,e]=B.useState(!1),[n,i]=B.useState(!1),[a,l]=B.useState(null),c=B.useCallback((S,Q)=>{l({title:S,text:Q}),e(!0)},[]),d=B.useCallback(()=>{e(!1)},[]),{user:f,signOut:m}=O7(),{notifications:y,removeNotification:v,showSuccess:b,showError:x,showInfo:O}=H7(),{nodes:k,edges:M,allBoards:V,currentBoard:q,isSwitchingBoard:F,isSaving:j,onNodesChange:ee,onEdgesChange:Z,setNodes:N,setEdges:A,switchToBoard:C,createNewBoard:z,deleteBoard:U,updateBoardName:H,clearBoardState:I}=j7(f,{showSuccess:b,showError:x,showInfo:O}),P=async()=>{await m(),I()},$=()=>{i(!0)},R=B.useCallback(S=>{const Q={id:`e${S.source}-${S.target}`,source:S.source,target:S.target,sourceHandle:S.sourceHandle,targetHandle:S.targetHandle};Z([{type:"add",item:Q}])},[Z]),W=B.useCallback((S,Q,ne,K,te)=>{if(!ne||!te){console.warn("handleNodeCallback called without mode or position",ne,te);return}const le=`temp-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;N(_e=>[..._e,{id:le,type:"tempInput",position:{x:te.x-80,y:te.y-40},data:{mode:ne,parent:K}}]);const de={default:"#FFFFFF",explain:"#3b82f6",answer:"#10b981",argue:"#fb7185"},ge=de[ne in de?ne:"default"];K&&Z([{type:"add",item:{id:`e${K}-${le}`,source:K,target:le,sourceHandle:ne,style:{stroke:ge,strokeWidth:3},markerEnd:{type:Qa.ArrowClosed,color:ge}}}])},[N]),G=B.useMemo(()=>k.map(S=>{let Q={...S.data};return Q.onNodeCallback=(ne,K,te)=>W(S.id,S.data,ne,K,te),S.type==="tempInput"&&(Q.onSubmit=ne=>{N(ke=>ke.map(Ve=>Ve.id===S.id?{...Ve,type:"draggableEditable",data:{...Ve.data,label:ne}}:Ve));const K=k.find(ke=>ke.id===S.data.parent),te=K?.data?.color,le=K?.data?.summary;console.log(K);const de={word:ne},ge=S.data.parent,_e={x:S.position.x,y:S.position.y},Ge=eR(de,ge,_e,"draggableEditable",k,N,ee,Z,te,le,void 0,!0,S,S.data.mode);if(console.log("Color from handleTokenClick:",Ge),N(ke=>ke.map(Ve=>Ve.id===S.id?{...Ve,data:{...Ve.data,myColor:Ge}}:Ve)),S.data.parent){if(!Ge)return;A(ke=>ke.map(Ve=>Ve.id===`e${S.data.parent}-${S.id}`?{...Ve,style:{...Ve.style||{},stroke:Ge,strokeWidth:3},markerEnd:{type:Qa.ArrowClosed,color:Ge}}:Ve))}}),{...S,data:Q}}),[k,W,N]),Y=B.useMemo(()=>T.jsxs(WT,{nodes:G,edges:M,onNodesChange:ee,onEdgesChange:Z,onConnect:R,nodeTypes:Y7,connectionMode:Ws.Loose,fitView:!0,className:"bg-gray-50 dark:bg-gray-900 w-full h-full",children:[T.jsx(OO,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg"}),T.jsx(UO,{variant:Nr.Cross,gap:30,size:10,lineWidth:.5,color:"#94a3b8",className:"bg-gray-50 dark:bg-gray-900"})]}),[G,M,ee,Z,R]);return f?T.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 relative",style:{height:"100vh",width:"100vw",overflow:"hidden"},children:[T.jsx(b7,{notifications:y,onRemove:v}),T.jsxs("div",{style:{height:"100%",position:"relative"},children:[T.jsxs(_S,{direction:"horizontal",children:[T.jsx(l0,{defaultSize:15,minSize:10,maxSize:30,children:T.jsx("div",{className:"bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:T.jsx(g7,{allBoards:V,currentBoard:q,onSwitchBoard:C,onCreateBoard:async S=>{await z(S)},onDeleteBoard:U,onSignOut:P,isLoading:F})})}),T.jsx(bS,{}),T.jsx(l0,{children:T.jsxs("div",{className:"bg-white dark:bg-gray-800",style:{height:"100%",position:"relative"},children:[T.jsx(v7,{name:q?.name||"Loading...",onSetName:H,user:f,isSaving:j}),T.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",style:{height:"calc(100% - 60px)",width:"100%"},children:T.jsx(Jz,{nodes:k,onNodesChange:ee,onEdgesChange:Z,setNodes:N,showExplanation:c,children:Y})})]})})]}),T.jsx(X7,{isVisible:t,explanation:a,onClose:d})]})]}):n?T.jsx(h7,{}):T.jsx(E7,{onLogin:$})}function Q7(){return T.jsx(y7,{children:T.jsx(K7,{})})}const dR=document.getElementById("root");if(!dR)throw new Error("Failed to find the root element");GN.createRoot(dR).render(T.jsx(B.StrictMode,{children:T.jsx(Q7,{})}));
