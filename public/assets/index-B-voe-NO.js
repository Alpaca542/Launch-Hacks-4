(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function Ac(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jp={exports:{}},Lu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nT;function Wx(){if(nT)return Lu;nT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var h in o)h!=="key"&&(l[h]=o[h])}else l=o;return o=l.ref,{$$typeof:e,type:i,key:c,ref:o!==void 0?o:null,props:l}}return Lu.Fragment=t,Lu.jsx=n,Lu.jsxs=n,Lu}var rT;function Zx(){return rT||(rT=1,jp.exports=Wx()),jp.exports}var Q=Zx(),Fp={exports:{}},zt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT;function Jx(){if(iT)return zt;iT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function E(M){return M===null||typeof M!="object"?null:(M=v&&M[v]||M["@@iterator"],typeof M=="function"?M:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,L={};function k(M,G,nt){this.props=M,this.context=G,this.refs=L,this.updater=nt||b}k.prototype.isReactComponent={},k.prototype.setState=function(M,G){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,G,"setState")},k.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function H(){}H.prototype=k.prototype;function F(M,G,nt){this.props=M,this.context=G,this.refs=L,this.updater=nt||b}var q=F.prototype=new H;q.constructor=F,I(q,k.prototype),q.isPureReactComponent=!0;var z=Array.isArray,X={H:null,A:null,T:null,S:null,V:null},Z=Object.prototype.hasOwnProperty;function P(M,G,nt,st,ct,gt){return nt=gt.ref,{$$typeof:e,type:M,key:G,ref:nt!==void 0?nt:null,props:gt}}function S(M,G){return P(M.type,G,void 0,void 0,void 0,M.props)}function C(M){return typeof M=="object"&&M!==null&&M.$$typeof===e}function O(M){var G={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(nt){return G[nt]})}var U=/\/+/g;function B(M,G){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):G.toString(36)}function R(){}function V(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(R,R):(M.status="pending",M.then(function(G){M.status==="pending"&&(M.status="fulfilled",M.value=G)},function(G){M.status==="pending"&&(M.status="rejected",M.reason=G)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Y(M,G,nt,st,ct){var gt=typeof M;(gt==="undefined"||gt==="boolean")&&(M=null);var _t=!1;if(M===null)_t=!0;else switch(gt){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(M.$$typeof){case e:case t:_t=!0;break;case y:return _t=M._init,Y(_t(M._payload),G,nt,st,ct)}}if(_t)return ct=ct(M),_t=st===""?"."+B(M,0):st,z(ct)?(nt="",_t!=null&&(nt=_t.replace(U,"$&/")+"/"),Y(ct,G,nt,"",function(Ht){return Ht})):ct!=null&&(C(ct)&&(ct=S(ct,nt+(ct.key==null||M&&M.key===ct.key?"":(""+ct.key).replace(U,"$&/")+"/")+_t)),G.push(ct)),1;_t=0;var xt=st===""?".":st+":";if(z(M))for(var bt=0;bt<M.length;bt++)st=M[bt],gt=xt+B(st,bt),_t+=Y(st,G,nt,gt,ct);else if(bt=E(M),typeof bt=="function")for(M=bt.call(M),bt=0;!(st=M.next()).done;)st=st.value,gt=xt+B(st,bt++),_t+=Y(st,G,nt,gt,ct);else if(gt==="object"){if(typeof M.then=="function")return Y(V(M),G,nt,st,ct);throw G=String(M),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return _t}function D(M,G,nt){if(M==null)return M;var st=[],ct=0;return Y(M,st,"","",function(gt){return G.call(nt,gt,ct++)}),st}function $(M){if(M._status===-1){var G=M._result;G=G(),G.then(function(nt){(M._status===0||M._status===-1)&&(M._status=1,M._result=nt)},function(nt){(M._status===0||M._status===-1)&&(M._status=2,M._result=nt)}),M._status===-1&&(M._status=0,M._result=G)}if(M._status===1)return M._result.default;throw M._result}var tt=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function W(){}return zt.Children={map:D,forEach:function(M,G,nt){D(M,function(){G.apply(this,arguments)},nt)},count:function(M){var G=0;return D(M,function(){G++}),G},toArray:function(M){return D(M,function(G){return G})||[]},only:function(M){if(!C(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},zt.Component=k,zt.Fragment=n,zt.Profiler=o,zt.PureComponent=F,zt.StrictMode=i,zt.Suspense=m,zt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,zt.__COMPILER_RUNTIME={__proto__:null,c:function(M){return X.H.useMemoCache(M)}},zt.cache=function(M){return function(){return M.apply(null,arguments)}},zt.cloneElement=function(M,G,nt){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var st=I({},M.props),ct=M.key,gt=void 0;if(G!=null)for(_t in G.ref!==void 0&&(gt=void 0),G.key!==void 0&&(ct=""+G.key),G)!Z.call(G,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&G.ref===void 0||(st[_t]=G[_t]);var _t=arguments.length-2;if(_t===1)st.children=nt;else if(1<_t){for(var xt=Array(_t),bt=0;bt<_t;bt++)xt[bt]=arguments[bt+2];st.children=xt}return P(M.type,ct,void 0,void 0,gt,st)},zt.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},zt.createElement=function(M,G,nt){var st,ct={},gt=null;if(G!=null)for(st in G.key!==void 0&&(gt=""+G.key),G)Z.call(G,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(ct[st]=G[st]);var _t=arguments.length-2;if(_t===1)ct.children=nt;else if(1<_t){for(var xt=Array(_t),bt=0;bt<_t;bt++)xt[bt]=arguments[bt+2];ct.children=xt}if(M&&M.defaultProps)for(st in _t=M.defaultProps,_t)ct[st]===void 0&&(ct[st]=_t[st]);return P(M,gt,void 0,void 0,null,ct)},zt.createRef=function(){return{current:null}},zt.forwardRef=function(M){return{$$typeof:h,render:M}},zt.isValidElement=C,zt.lazy=function(M){return{$$typeof:y,_payload:{_status:-1,_result:M},_init:$}},zt.memo=function(M,G){return{$$typeof:p,type:M,compare:G===void 0?null:G}},zt.startTransition=function(M){var G=X.T,nt={};X.T=nt;try{var st=M(),ct=X.S;ct!==null&&ct(nt,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(W,tt)}catch(gt){tt(gt)}finally{X.T=G}},zt.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},zt.use=function(M){return X.H.use(M)},zt.useActionState=function(M,G,nt){return X.H.useActionState(M,G,nt)},zt.useCallback=function(M,G){return X.H.useCallback(M,G)},zt.useContext=function(M){return X.H.useContext(M)},zt.useDebugValue=function(){},zt.useDeferredValue=function(M,G){return X.H.useDeferredValue(M,G)},zt.useEffect=function(M,G,nt){var st=X.H;if(typeof nt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(M,G)},zt.useId=function(){return X.H.useId()},zt.useImperativeHandle=function(M,G,nt){return X.H.useImperativeHandle(M,G,nt)},zt.useInsertionEffect=function(M,G){return X.H.useInsertionEffect(M,G)},zt.useLayoutEffect=function(M,G){return X.H.useLayoutEffect(M,G)},zt.useMemo=function(M,G){return X.H.useMemo(M,G)},zt.useOptimistic=function(M,G){return X.H.useOptimistic(M,G)},zt.useReducer=function(M,G,nt){return X.H.useReducer(M,G,nt)},zt.useRef=function(M){return X.H.useRef(M)},zt.useState=function(M){return X.H.useState(M)},zt.useSyncExternalStore=function(M,G,nt){return X.H.useSyncExternalStore(M,G,nt)},zt.useTransition=function(){return X.H.useTransition()},zt.version="19.1.0",zt}var sT;function Rc(){return sT||(sT=1,Fp.exports=Jx()),Fp.exports}var x=Rc();const ut=Ac(x);var qp={exports:{}},Uu={},$p={exports:{}},Gp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oT;function tI(){return oT||(oT=1,function(e){function t(D,$){var tt=D.length;D.push($);t:for(;0<tt;){var W=tt-1>>>1,M=D[W];if(0<o(M,$))D[W]=$,D[tt]=M,tt=W;else break t}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var $=D[0],tt=D.pop();if(tt!==$){D[0]=tt;t:for(var W=0,M=D.length,G=M>>>1;W<G;){var nt=2*(W+1)-1,st=D[nt],ct=nt+1,gt=D[ct];if(0>o(st,tt))ct<M&&0>o(gt,st)?(D[W]=gt,D[ct]=tt,W=ct):(D[W]=st,D[nt]=tt,W=nt);else if(ct<M&&0>o(gt,tt))D[W]=gt,D[ct]=tt,W=ct;else break t}}return $}function o(D,$){var tt=D.sortIndex-$.sortIndex;return tt!==0?tt:D.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();e.unstable_now=function(){return c.now()-h}}var m=[],p=[],y=1,v=null,E=3,b=!1,I=!1,L=!1,k=!1,H=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function z(D){for(var $=n(p);$!==null;){if($.callback===null)i(p);else if($.startTime<=D)i(p),$.sortIndex=$.expirationTime,t(m,$);else break;$=n(p)}}function X(D){if(L=!1,z(D),!I)if(n(m)!==null)I=!0,Z||(Z=!0,B());else{var $=n(p);$!==null&&Y(X,$.startTime-D)}}var Z=!1,P=-1,S=5,C=-1;function O(){return k?!0:!(e.unstable_now()-C<S)}function U(){if(k=!1,Z){var D=e.unstable_now();C=D;var $=!0;try{t:{I=!1,L&&(L=!1,F(P),P=-1),b=!0;var tt=E;try{e:{for(z(D),v=n(m);v!==null&&!(v.expirationTime>D&&O());){var W=v.callback;if(typeof W=="function"){v.callback=null,E=v.priorityLevel;var M=W(v.expirationTime<=D);if(D=e.unstable_now(),typeof M=="function"){v.callback=M,z(D),$=!0;break e}v===n(m)&&i(m),z(D)}else i(m);v=n(m)}if(v!==null)$=!0;else{var G=n(p);G!==null&&Y(X,G.startTime-D),$=!1}}break t}finally{v=null,E=tt,b=!1}$=void 0}}finally{$?B():Z=!1}}}var B;if(typeof q=="function")B=function(){q(U)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,V=R.port2;R.port1.onmessage=U,B=function(){V.postMessage(null)}}else B=function(){H(U,0)};function Y(D,$){P=H(function(){D(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_next=function(D){switch(E){case 1:case 2:case 3:var $=3;break;default:$=E}var tt=E;E=$;try{return D()}finally{E=tt}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(D,$){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var tt=E;E=D;try{return $()}finally{E=tt}},e.unstable_scheduleCallback=function(D,$,tt){var W=e.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?W+tt:W):tt=W,D){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=tt+M,D={id:y++,callback:$,priorityLevel:D,startTime:tt,expirationTime:M,sortIndex:-1},tt>W?(D.sortIndex=tt,t(p,D),n(m)===null&&D===n(p)&&(L?(F(P),P=-1):L=!0,Y(X,tt-W))):(D.sortIndex=M,t(m,D),I||b||(I=!0,Z||(Z=!0,B()))),D},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(D){var $=E;return function(){var tt=E;E=$;try{return D.apply(this,arguments)}finally{E=tt}}}}(Gp)),Gp}var aT;function eI(){return aT||(aT=1,$p.exports=tI()),$p.exports}var Yp={exports:{}},vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT;function nI(){if(lT)return vn;lT=1;var e=Rc();function t(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(m,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:m,containerInfo:p,implementation:y}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,vn.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(m,p,null,y)},vn.flushSync=function(m){var p=c.T,y=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=y,i.d.f()}},vn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},vn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},vn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:b}):y==="script"&&i.d.X(m,{crossOrigin:v,integrity:E,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},vn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},vn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},vn.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=h(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},vn.requestFormReset=function(m){i.d.r(m)},vn.unstable_batchedUpdates=function(m,p){return m(p)},vn.useFormState=function(m,p,y){return c.H.useFormState(m,p,y)},vn.useFormStatus=function(){return c.H.useHostTransitionStatus()},vn.version="19.1.0",vn}var uT;function Jb(){if(uT)return Yp.exports;uT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Yp.exports=nI(),Yp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cT;function rI(){if(cT)return Uu;cT=1;var e=eI(),t=Rc(),n=Jb();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function h(r){if(l(r)!==r)throw Error(i(188))}function m(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var a=r,u=s;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(u=d.return,u!==null){a=u;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return h(d),r;if(g===u)return h(d),s;g=g.sibling}throw Error(i(188))}if(a.return!==u.return)a=d,u=g;else{for(var w=!1,A=d.child;A;){if(A===a){w=!0,a=d,u=g;break}if(A===u){w=!0,u=d,a=g;break}A=A.sibling}if(!w){for(A=g.child;A;){if(A===a){w=!0,a=g,u=d;break}if(A===u){w=!0,u=g,a=d;break}A=A.sibling}if(!w)throw Error(i(189))}}if(a.alternate!==u)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?r:s}function p(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=p(r),s!==null)return s;r=r.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),q=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var R=Symbol.for("react.client.reference");function V(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===R?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case I:return"Fragment";case k:return"Profiler";case L:return"StrictMode";case X:return"Suspense";case Z:return"SuspenseList";case C:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case b:return"Portal";case q:return(r.displayName||"Context")+".Provider";case F:return(r._context.displayName||"Context")+".Consumer";case z:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case P:return s=r.displayName||null,s!==null?s:V(r.type)||"Memo";case S:s=r._payload,r=r._init;try{return V(r(s))}catch{}}return null}var Y=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt={pending:!1,data:null,method:null,action:null},W=[],M=-1;function G(r){return{current:r}}function nt(r){0>M||(r.current=W[M],W[M]=null,M--)}function st(r,s){M++,W[M]=r.current,r.current=s}var ct=G(null),gt=G(null),_t=G(null),xt=G(null);function bt(r,s){switch(st(_t,s),st(gt,r),st(ct,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?NE(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=NE(s),r=DE(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}nt(ct),st(ct,r)}function Ht(){nt(ct),nt(gt),nt(_t)}function Bt(r){r.memoizedState!==null&&st(xt,r);var s=ct.current,a=DE(s,r.type);s!==a&&(st(gt,r),st(ct,a))}function de(r){gt.current===r&&(nt(ct),nt(gt)),xt.current===r&&(nt(xt),Ou._currentValue=tt)}var ce=Object.prototype.hasOwnProperty,ye=e.unstable_scheduleCallback,fe=e.unstable_cancelCallback,Nt=e.unstable_shouldYield,Pe=e.unstable_requestPaint,Pt=e.unstable_now,St=e.unstable_getCurrentPriorityLevel,De=e.unstable_ImmediatePriority,yn=e.unstable_UserBlockingPriority,An=e.unstable_NormalPriority,sr=e.unstable_LowPriority,Rn=e.unstable_IdlePriority,We=e.log,jn=e.unstable_setDisableYieldValue,wt=null,Lt=null;function Te(r){if(typeof We=="function"&&jn(r),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(wt,r)}catch{}}var we=Math.clz32?Math.clz32:Ze,zr=Math.log,Le=Math.LN2;function Ze(r){return r>>>=0,r===0?32:31-(zr(r)/Le|0)|0}var Cn=256,xn=4194304;function Je(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ln(r,s,a){var u=r.pendingLanes;if(u===0)return 0;var d=0,g=r.suspendedLanes,w=r.pingedLanes;r=r.warmLanes;var A=u&134217727;return A!==0?(u=A&~g,u!==0?d=Je(u):(w&=A,w!==0?d=Je(w):a||(a=A&~r,a!==0&&(d=Je(a))))):(A=u&~g,A!==0?d=Je(A):w!==0?d=Je(w):a||(a=u&~r,a!==0&&(d=Je(a)))),d===0?0:s!==0&&s!==d&&(s&g)===0&&(g=d&-d,a=s&-s,g>=a||g===32&&(a&4194048)!==0)?s:d}function In(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function pi(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gi(){var r=Cn;return Cn<<=1,(Cn&4194048)===0&&(Cn=256),r}function Rr(){var r=xn;return xn<<=1,(xn&62914560)===0&&(xn=4194304),r}function Fn(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function or(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function qn(r,s,a,u,d,g){var w=r.pendingLanes;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=a,r.entangledLanes&=a,r.errorRecoveryDisabledLanes&=a,r.shellSuspendCounter=0;var A=r.entanglements,j=r.expirationTimes,it=r.hiddenUpdates;for(a=w&~a;0<a;){var ft=31-we(a),dt=1<<ft;A[ft]=0,j[ft]=-1;var ot=it[ft];if(ot!==null)for(it[ft]=null,ft=0;ft<ot.length;ft++){var at=ot[ft];at!==null&&(at.lane&=-536870913)}a&=~dt}u!==0&&ar(r,u,0),g!==0&&d===0&&r.tag!==0&&(r.suspendedLanes|=g&~(w&~s))}function ar(r,s,a){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-we(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|a&4194090}function ro(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var u=31-we(a),d=1<<u;d&s|r[u]&s&&(r[u]|=s),a&=~d}}function Hr(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ts(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function jr(){var r=$.p;return r!==0?r:(r=window.event,r===void 0?32:QE(r.type))}function na(r,s){var a=$.p;try{return $.p=r,s()}finally{$.p=a}}var me=Math.random().toString(36).slice(2),Oe="__reactFiber$"+me,Ce="__reactProps$"+me,Vn="__reactContainer$"+me,io="__reactEvents$"+me,Ul="__reactListeners$"+me,Fr="__reactHandles$"+me,ra="__reactResources$"+me,yi="__reactMarker$"+me;function qr(r){delete r[Oe],delete r[Ce],delete r[io],delete r[Ul],delete r[Fr]}function lr(r){var s=r[Oe];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Vn]||a[Oe]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=VE(r);r!==null;){if(a=r[Oe])return a;r=VE(r)}return s}r=a,a=r.parentNode}return null}function ur(r){if(r=r[Oe]||r[Vn]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function cr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function un(r){var s=r[ra];return s||(s=r[ra]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function be(r){r[yi]=!0}var so=new Set,es={};function $n(r,s){Cr(r,s),Cr(r+"Capture",s)}function Cr(r,s){for(es[r]=s,r=0;r<s.length;r++)so.add(s[r])}var oo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ia={},_i={};function sa(r){return ce.call(_i,r)?!0:ce.call(ia,r)?!1:oo.test(r)?_i[r]=!0:(ia[r]=!0,!1)}function $r(r,s,a){if(sa(s))if(a===null)r.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+a)}}function fr(r,s,a){if(a===null)r.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+a)}}function Fe(r,s,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttributeNS(s,a,""+u)}}var Gr,oa;function xr(r){if(Gr===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Gr=s&&s[1]||"",oa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gr+r+oa}var ns=!1;function Yr(r,s){if(!r||ns)return"";ns=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(at){var ot=at}Reflect.construct(r,[],dt)}else{try{dt.call()}catch(at){ot=at}r.call(dt.prototype)}}else{try{throw Error()}catch(at){ot=at}(dt=r())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(at){if(at&&ot&&typeof at.stack=="string")return[at.stack,ot.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),w=g[0],A=g[1];if(w&&A){var j=w.split(`
`),it=A.split(`
`);for(d=u=0;u<j.length&&!j[u].includes("DetermineComponentFrameRoot");)u++;for(;d<it.length&&!it[d].includes("DetermineComponentFrameRoot");)d++;if(u===j.length||d===it.length)for(u=j.length-1,d=it.length-1;1<=u&&0<=d&&j[u]!==it[d];)d--;for(;1<=u&&0<=d;u--,d--)if(j[u]!==it[d]){if(u!==1||d!==1)do if(u--,d--,0>d||j[u]!==it[d]){var ft=`
`+j[u].replace(" at new "," at ");return r.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",r.displayName)),ft}while(1<=u&&0<=d);break}}}finally{ns=!1,Error.prepareStackTrace=a}return(a=r?r.displayName||r.name:"")?xr(a):""}function Bl(r){switch(r.tag){case 26:case 27:case 5:return xr(r.type);case 16:return xr("Lazy");case 13:return xr("Suspense");case 19:return xr("SuspenseList");case 0:case 15:return Yr(r.type,!1);case 11:return Yr(r.type.render,!1);case 1:return Yr(r.type,!0);case 31:return xr("Activity");default:return""}}function aa(r){try{var s="";do s+=Bl(r),r=r.return;while(r);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Nn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function zl(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Gd(r){var s=zl(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){u=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function la(r){r._valueTracker||(r._valueTracker=Gd(r))}function Hl(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return r&&(u=zl(r)?r.checked?"true":"false":r.value),r=u,r!==a?(s.setValue(r),!0):!1}function ao(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Yd=/[\n"\\]/g;function Ue(r){return r.replace(Yd,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Gn(r,s,a,u,d,g,w,A){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),s!=null?w==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Nn(s)):r.value!==""+Nn(s)&&(r.value=""+Nn(s)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),s!=null?rs(r,w,Nn(s)):a!=null?rs(r,w,Nn(a)):u!=null&&r.removeAttribute("value"),d==null&&g!=null&&(r.defaultChecked=!!g),d!=null&&(r.checked=d&&typeof d!="function"&&typeof d!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+Nn(A):r.removeAttribute("name")}function lo(r,s,a,u,d,g,w,A){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),s!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;a=a!=null?""+Nn(a):"",s=s!=null?""+Nn(s):a,A||s===r.value||(r.value=s),r.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=A?r.checked:!!u,r.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w)}function rs(r,s,a){s==="number"&&ao(r.ownerDocument)===r||r.defaultValue===""+a||(r.defaultValue=""+a)}function vi(r,s,a,u){if(r=r.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<r.length;a++)d=s.hasOwnProperty("$"+r[a].value),r[a].selected!==d&&(r[a].selected=d),d&&u&&(r[a].defaultSelected=!0)}else{for(a=""+Nn(a),s=null,d=0;d<r.length;d++){if(r[d].value===a){r[d].selected=!0,u&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function oe(r,s,a){if(s!=null&&(s=""+Nn(s),s!==r.value&&(r.value=s),a==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=a!=null?""+Nn(a):""}function uo(r,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(i(92));if(Y(u)){if(1<u.length)throw Error(i(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=Nn(s),r.defaultValue=a,u=r.textContent,u===a&&u!==""&&u!==null&&(r.value=u)}function hr(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var co=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qc(r,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,a):typeof a!="number"||a===0||co.has(s)?s==="float"?r.cssFloat=a:r[s]=(""+a).trim():r[s]=a+"px"}function jl(r,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&a[d]!==u&&qc(r,d,u)}else for(var g in s)s.hasOwnProperty(g)&&qc(r,g,s[g])}function Fl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ua(r){return Xd.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Ei=null;function dr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ti=null,wi=null;function ql(r){var s=ur(r);if(s&&(r=s.stateNode)){var a=r[Ce]||null;t:switch(r=s.stateNode,s.type){case"input":if(Gn(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ue(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==r&&u.form===r.form){var d=u[Ce]||null;if(!d)throw Error(i(90));Gn(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===r.form&&Hl(u)}break t;case"textarea":oe(r,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&vi(r,!!a.multiple,s,!1)}}}var Kr=!1;function $c(r,s,a){if(Kr)return r(s,a);Kr=!0;try{var u=r(s);return u}finally{if(Kr=!1,(Ti!==null||wi!==null)&&(Bf(),Ti&&(s=Ti,r=wi,wi=Ti=null,ql(s),r)))for(s=0;s<r.length;s++)ql(r[s])}}function fo(r,s){var a=r.stateNode;if(a===null)return null;var u=a[Ce]||null;if(u===null)return null;a=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break t;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var Ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mr=!1;if(Ir)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){mr=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{mr=!1}var Xr=null,is=null,bi=null;function $l(){if(bi)return bi;var r,s=is,a=s.length,u,d="value"in Xr?Xr.value:Xr.textContent,g=d.length;for(r=0;r<a&&s[r]===d[r];r++);var w=a-r;for(u=1;u<=w&&s[a-u]===d[g-u];u++);return bi=d.slice(r,1<u?1-u:void 0)}function Qr(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Wr(){return!0}function Gl(){return!1}function tn(r){function s(a,u,d,g,w){this._reactName=a,this._targetInst=d,this.type=u,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(a=r[A],this[A]=a?a(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Wr:Gl,this.isPropagationStopped=Gl,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wr)},persist:function(){},isPersistent:Wr}),s}var ne={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=tn(ne),mo=y({},ne,{view:0,detail:0}),Gc=tn(mo),fa,ha,Zr,po=y({},mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_o,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Zr&&(Zr&&r.type==="mousemove"?(fa=r.screenX-Zr.screenX,ha=r.screenY-Zr.screenY):ha=fa=0,Zr=r),fa)},movementY:function(r){return"movementY"in r?r.movementY:ha}}),pr=tn(po),Yc=y({},po,{dataTransfer:0}),Qd=tn(Yc),go=y({},mo,{relatedTarget:0}),da=tn(go),Yl=y({},ne,{animationName:0,elapsedTime:0,pseudoElement:0}),ma=tn(Yl),Kc=y({},ne,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),pa=tn(Kc),Wd=y({},ne,{data:0}),Kl=tn(Wd),yo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Qc[r])?!!s[r]:!1}function _o(){return Xl}var Wc=y({},mo,{key:function(r){if(r.key){var s=yo[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Qr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Xc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_o,charCode:function(r){return r.type==="keypress"?Qr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Qr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ga=tn(Wc),Zc=y({},po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ql=tn(Zc),Si=y({},mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_o}),Jc=tn(Si),tf=y({},ne,{propertyName:0,elapsedTime:0,pseudoElement:0}),ef=tn(tf),nf=y({},po,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ya=tn(nf),Dn=y({},ne,{newState:0,oldState:0}),rf=tn(Dn),sf=[9,13,27,32],Jr=Ir&&"CompositionEvent"in window,f=null;Ir&&"documentMode"in document&&(f=document.documentMode);var _=Ir&&"TextEvent"in window&&!f,T=Ir&&(!Jr||f&&8<f&&11>=f),N=" ",et=!1;function lt(r,s){switch(r){case"keyup":return sf.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yt(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Qt=!1;function qe(r,s){switch(r){case"compositionend":return yt(s);case"keypress":return s.which!==32?null:(et=!0,N);case"textInput":return r=s.data,r===N&&et?null:r;default:return null}}function Wt(r,s){if(Qt)return r==="compositionend"||!Jr&&lt(r,s)?(r=$l(),bi=is=Xr=null,Qt=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return T&&s.locale!=="ko"?null:s.data;default:return null}}var en={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $e(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!en[r.type]:s==="textarea"}function Ai(r,s,a,u){Ti?wi?wi.push(u):wi=[u]:Ti=u,s=$f(s,"onChange"),0<s.length&&(a=new ca("onChange","change",null,a,u),r.push({event:a,listeners:s}))}var cn=null,ti=null;function Wl(r){AE(r,0)}function of(r){var s=cr(r);if(Hl(s))return r}function G_(r,s){if(r==="change")return s}var Y_=!1;if(Ir){var Zd;if(Ir){var Jd="oninput"in document;if(!Jd){var K_=document.createElement("div");K_.setAttribute("oninput","return;"),Jd=typeof K_.oninput=="function"}Zd=Jd}else Zd=!1;Y_=Zd&&(!document.documentMode||9<document.documentMode)}function X_(){cn&&(cn.detachEvent("onpropertychange",Q_),ti=cn=null)}function Q_(r){if(r.propertyName==="value"&&of(ti)){var s=[];Ai(s,ti,r,dr(r)),$c(Wl,s)}}function CC(r,s,a){r==="focusin"?(X_(),cn=s,ti=a,cn.attachEvent("onpropertychange",Q_)):r==="focusout"&&X_()}function xC(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return of(ti)}function IC(r,s){if(r==="click")return of(s)}function NC(r,s){if(r==="input"||r==="change")return of(s)}function DC(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Yn=typeof Object.is=="function"?Object.is:DC;function Zl(r,s){if(Yn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var d=a[u];if(!ce.call(s,d)||!Yn(r[d],s[d]))return!1}return!0}function W_(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Z_(r,s){var a=W_(r);r=0;for(var u;a;){if(a.nodeType===3){if(u=r+a.textContent.length,r<=s&&u>=s)return{node:a,offset:s-r};r=u}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=W_(a)}}function J_(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?J_(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function tv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=ao(r.document);s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=ao(r.document)}return s}function tm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var OC=Ir&&"documentMode"in document&&11>=document.documentMode,_a=null,em=null,Jl=null,nm=!1;function ev(r,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nm||_a==null||_a!==ao(u)||(u=_a,"selectionStart"in u&&tm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Jl&&Zl(Jl,u)||(Jl=u,u=$f(em,"onSelect"),0<u.length&&(s=new ca("onSelect","select",null,s,a),r.push({event:s,listeners:u}),s.target=_a)))}function vo(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var va={animationend:vo("Animation","AnimationEnd"),animationiteration:vo("Animation","AnimationIteration"),animationstart:vo("Animation","AnimationStart"),transitionrun:vo("Transition","TransitionRun"),transitionstart:vo("Transition","TransitionStart"),transitioncancel:vo("Transition","TransitionCancel"),transitionend:vo("Transition","TransitionEnd")},rm={},nv={};Ir&&(nv=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function Eo(r){if(rm[r])return rm[r];if(!va[r])return r;var s=va[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in nv)return rm[r]=s[a];return r}var rv=Eo("animationend"),iv=Eo("animationiteration"),sv=Eo("animationstart"),MC=Eo("transitionrun"),kC=Eo("transitionstart"),VC=Eo("transitioncancel"),ov=Eo("transitionend"),av=new Map,im="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");im.push("scrollEnd");function Nr(r,s){av.set(r,s),$n(s,[r])}var lv=new WeakMap;function gr(r,s){if(typeof r=="object"&&r!==null){var a=lv.get(r);return a!==void 0?a:(s={value:r,source:s,stack:aa(s)},lv.set(r,s),s)}return{value:r,source:s,stack:aa(s)}}var yr=[],Ea=0,sm=0;function af(){for(var r=Ea,s=sm=Ea=0;s<r;){var a=yr[s];yr[s++]=null;var u=yr[s];yr[s++]=null;var d=yr[s];yr[s++]=null;var g=yr[s];if(yr[s++]=null,u!==null&&d!==null){var w=u.pending;w===null?d.next=d:(d.next=w.next,w.next=d),u.pending=d}g!==0&&uv(a,d,g)}}function lf(r,s,a,u){yr[Ea++]=r,yr[Ea++]=s,yr[Ea++]=a,yr[Ea++]=u,sm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function om(r,s,a,u){return lf(r,s,a,u),uf(r)}function Ta(r,s){return lf(r,null,null,s),uf(r)}function uv(r,s,a){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a);for(var d=!1,g=r.return;g!==null;)g.childLanes|=a,u=g.alternate,u!==null&&(u.childLanes|=a),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(d=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,d&&s!==null&&(d=31-we(a),r=g.hiddenUpdates,u=r[d],u===null?r[d]=[s]:u.push(s),s.lane=a|536870912),g):null}function uf(r){if(50<Su)throw Su=0,hp=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var wa={};function PC(r,s,a,u){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(r,s,a,u){return new PC(r,s,a,u)}function am(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ri(r,s){var a=r.alternate;return a===null?(a=Kn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&65011712,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a.refCleanup=r.refCleanup,a}function cv(r,s){r.flags&=65011714;var a=r.alternate;return a===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,s=a.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function cf(r,s,a,u,d,g){var w=0;if(u=r,typeof r=="function")am(r)&&(w=1);else if(typeof r=="string")w=Ux(r,a,ct.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case C:return r=Kn(31,a,s,d),r.elementType=C,r.lanes=g,r;case I:return To(a.children,d,g,s);case L:w=8,d|=24;break;case k:return r=Kn(12,a,s,d|2),r.elementType=k,r.lanes=g,r;case X:return r=Kn(13,a,s,d),r.elementType=X,r.lanes=g,r;case Z:return r=Kn(19,a,s,d),r.elementType=Z,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case H:case q:w=10;break t;case F:w=9;break t;case z:w=11;break t;case P:w=14;break t;case S:w=16,u=null;break t}w=29,a=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=Kn(w,a,s,d),s.elementType=r,s.type=u,s.lanes=g,s}function To(r,s,a,u){return r=Kn(7,r,u,s),r.lanes=a,r}function lm(r,s,a){return r=Kn(6,r,null,s),r.lanes=a,r}function um(r,s,a){return s=Kn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var ba=[],Sa=0,ff=null,hf=0,_r=[],vr=0,wo=null,Ci=1,xi="";function bo(r,s){ba[Sa++]=hf,ba[Sa++]=ff,ff=r,hf=s}function fv(r,s,a){_r[vr++]=Ci,_r[vr++]=xi,_r[vr++]=wo,wo=r;var u=Ci;r=xi;var d=32-we(u)-1;u&=~(1<<d),a+=1;var g=32-we(s)+d;if(30<g){var w=d-d%5;g=(u&(1<<w)-1).toString(32),u>>=w,d-=w,Ci=1<<32-we(s)+d|a<<d|u,xi=g+r}else Ci=1<<g|a<<d|u,xi=r}function cm(r){r.return!==null&&(bo(r,1),fv(r,1,0))}function fm(r){for(;r===ff;)ff=ba[--Sa],ba[Sa]=null,hf=ba[--Sa],ba[Sa]=null;for(;r===wo;)wo=_r[--vr],_r[vr]=null,xi=_r[--vr],_r[vr]=null,Ci=_r[--vr],_r[vr]=null}var On=null,xe=null,ee=!1,So=null,ei=!1,hm=Error(i(519));function Ao(r){var s=Error(i(418,""));throw nu(gr(s,r)),hm}function hv(r){var s=r.stateNode,a=r.type,u=r.memoizedProps;switch(s[Oe]=r,s[Ce]=u,a){case"dialog":Yt("cancel",s),Yt("close",s);break;case"iframe":case"object":case"embed":Yt("load",s);break;case"video":case"audio":for(a=0;a<Ru.length;a++)Yt(Ru[a],s);break;case"source":Yt("error",s);break;case"img":case"image":case"link":Yt("error",s),Yt("load",s);break;case"details":Yt("toggle",s);break;case"input":Yt("invalid",s),lo(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),la(s);break;case"select":Yt("invalid",s);break;case"textarea":Yt("invalid",s),uo(s,u.value,u.defaultValue,u.children),la(s)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||IE(s.textContent,a)?(u.popover!=null&&(Yt("beforetoggle",s),Yt("toggle",s)),u.onScroll!=null&&Yt("scroll",s),u.onScrollEnd!=null&&Yt("scrollend",s),u.onClick!=null&&(s.onclick=Gf),s=!0):s=!1,s||Ao(r)}function dv(r){for(On=r.return;On;)switch(On.tag){case 5:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:On=On.return}}function tu(r){if(r!==On)return!1;if(!ee)return dv(r),ee=!0,!1;var s=r.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=r.type,a=!(a!=="form"&&a!=="button")||xp(r.type,r.memoizedProps)),a=!a),a&&xe&&Ao(r),dv(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));t:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(a=r.data,a==="/$"){if(s===0){xe=Or(r.nextSibling);break t}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;r=r.nextSibling}xe=null}}else s===27?(s=xe,Es(r.type)?(r=Op,Op=null,xe=r):xe=s):xe=On?Or(r.stateNode.nextSibling):null;return!0}function eu(){xe=On=null,ee=!1}function mv(){var r=So;return r!==null&&(Un===null?Un=r:Un.push.apply(Un,r),So=null),r}function nu(r){So===null?So=[r]:So.push(r)}var dm=G(null),Ro=null,Ii=null;function ss(r,s,a){st(dm,s._currentValue),s._currentValue=a}function Ni(r){r._currentValue=dm.current,nt(dm)}function mm(r,s,a){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===a)break;r=r.return}}function pm(r,s,a,u){var d=r.child;for(d!==null&&(d.return=r);d!==null;){var g=d.dependencies;if(g!==null){var w=d.child;g=g.firstContext;t:for(;g!==null;){var A=g;g=d;for(var j=0;j<s.length;j++)if(A.context===s[j]){g.lanes|=a,A=g.alternate,A!==null&&(A.lanes|=a),mm(g.return,a,r),u||(w=null);break t}g=A.next}}else if(d.tag===18){if(w=d.return,w===null)throw Error(i(341));w.lanes|=a,g=w.alternate,g!==null&&(g.lanes|=a),mm(w,a,r),w=null}else w=d.child;if(w!==null)w.return=d;else for(w=d;w!==null;){if(w===r){w=null;break}if(d=w.sibling,d!==null){d.return=w.return,w=d;break}w=w.return}d=w}}function ru(r,s,a,u){r=null;for(var d=s,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var w=d.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var A=d.type;Yn(d.pendingProps.value,w.value)||(r!==null?r.push(A):r=[A])}}else if(d===xt.current){if(w=d.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(r!==null?r.push(Ou):r=[Ou])}d=d.return}r!==null&&pm(s,r,a,u),s.flags|=262144}function df(r){for(r=r.firstContext;r!==null;){if(!Yn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Co(r){Ro=r,Ii=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function _n(r){return pv(Ro,r)}function mf(r,s){return Ro===null&&Co(r),pv(r,s)}function pv(r,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Ii===null){if(r===null)throw Error(i(308));Ii=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Ii=Ii.next=s;return a}var LC=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(a,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(a){return a()})}},UC=e.unstable_scheduleCallback,BC=e.unstable_NormalPriority,Ge={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gm(){return{controller:new LC,data:new Map,refCount:0}}function iu(r){r.refCount--,r.refCount===0&&UC(BC,function(){r.controller.abort()})}var su=null,ym=0,Aa=0,Ra=null;function zC(r,s){if(su===null){var a=su=[];ym=0,Aa=vp(),Ra={status:"pending",value:void 0,then:function(u){a.push(u)}}}return ym++,s.then(gv,gv),s}function gv(){if(--ym===0&&su!==null){Ra!==null&&(Ra.status="fulfilled");var r=su;su=null,Aa=0,Ra=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function HC(r,s){var a=[],u={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),u}var yv=D.S;D.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&zC(r,s),yv!==null&&yv(r,s)};var xo=G(null);function _m(){var r=xo.current;return r!==null?r:pe.pooledCache}function pf(r,s){s===null?st(xo,xo.current):st(xo,s.pool)}function _v(){var r=_m();return r===null?null:{parent:Ge._currentValue,pool:r}}var ou=Error(i(460)),vv=Error(i(474)),gf=Error(i(542)),vm={then:function(){}};function Ev(r){return r=r.status,r==="fulfilled"||r==="rejected"}function yf(){}function Tv(r,s,a){switch(a=r[a],a===void 0?r.push(s):a!==s&&(s.then(yf,yf),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,bv(r),r;default:if(typeof s.status=="string")s.then(yf,yf);else{if(r=pe,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,bv(r),r}throw au=s,ou}}var au=null;function wv(){if(au===null)throw Error(i(459));var r=au;return au=null,r}function bv(r){if(r===ou||r===gf)throw Error(i(483))}var os=!1;function Em(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function as(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ls(r,s,a){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(ie&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=uf(r),uv(r,null,a),s}return lf(r,u,s,a),uf(r)}function lu(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,a|=u,s.lanes=a,ro(r,a)}}function wm(r,s){var a=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?d=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?d=g=s:g=g.next=s}else d=g=s;a={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}var bm=!1;function uu(){if(bm){var r=Ra;if(r!==null)throw r}}function cu(r,s,a,u){bm=!1;var d=r.updateQueue;os=!1;var g=d.firstBaseUpdate,w=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var j=A,it=j.next;j.next=null,w===null?g=it:w.next=it,w=j;var ft=r.alternate;ft!==null&&(ft=ft.updateQueue,A=ft.lastBaseUpdate,A!==w&&(A===null?ft.firstBaseUpdate=it:A.next=it,ft.lastBaseUpdate=j))}if(g!==null){var dt=d.baseState;w=0,ft=it=j=null,A=g;do{var ot=A.lane&-536870913,at=ot!==A.lane;if(at?(Zt&ot)===ot:(u&ot)===ot){ot!==0&&ot===Aa&&(bm=!0),ft!==null&&(ft=ft.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var kt=r,It=A;ot=s;var ue=a;switch(It.tag){case 1:if(kt=It.payload,typeof kt=="function"){dt=kt.call(ue,dt,ot);break t}dt=kt;break t;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=It.payload,ot=typeof kt=="function"?kt.call(ue,dt,ot):kt,ot==null)break t;dt=y({},dt,ot);break t;case 2:os=!0}}ot=A.callback,ot!==null&&(r.flags|=64,at&&(r.flags|=8192),at=d.callbacks,at===null?d.callbacks=[ot]:at.push(ot))}else at={lane:ot,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ft===null?(it=ft=at,j=dt):ft=ft.next=at,w|=ot;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;at=A,A=at.next,at.next=null,d.lastBaseUpdate=at,d.shared.pending=null}}while(!0);ft===null&&(j=dt),d.baseState=j,d.firstBaseUpdate=it,d.lastBaseUpdate=ft,g===null&&(d.shared.lanes=0),gs|=w,r.lanes=w,r.memoizedState=dt}}function Sv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function Av(r,s){var a=r.callbacks;if(a!==null)for(r.callbacks=null,r=0;r<a.length;r++)Sv(a[r],s)}var Ca=G(null),_f=G(0);function Rv(r,s){r=Li,st(_f,r),st(Ca,s),Li=r|s.baseLanes}function Sm(){st(_f,Li),st(Ca,Ca.current)}function Am(){Li=_f.current,nt(Ca),nt(_f)}var us=0,jt=null,ae=null,Be=null,vf=!1,xa=!1,Io=!1,Ef=0,fu=0,Ia=null,jC=0;function Me(){throw Error(i(321))}function Rm(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Yn(r[a],s[a]))return!1;return!0}function Cm(r,s,a,u,d,g){return us=g,jt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,D.H=r===null||r.memoizedState===null?u0:c0,Io=!1,g=a(u,d),Io=!1,xa&&(g=xv(s,a,u,d)),Cv(r),g}function Cv(r){D.H=Rf;var s=ae!==null&&ae.next!==null;if(us=0,Be=ae=jt=null,vf=!1,fu=0,Ia=null,s)throw Error(i(300));r===null||nn||(r=r.dependencies,r!==null&&df(r)&&(nn=!0))}function xv(r,s,a,u){jt=r;var d=0;do{if(xa&&(Ia=null),fu=0,xa=!1,25<=d)throw Error(i(301));if(d+=1,Be=ae=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}D.H=XC,g=s(a,u)}while(xa);return g}function FC(){var r=D.H,s=r.useState()[0];return s=typeof s.then=="function"?hu(s):s,r=r.useState()[0],(ae!==null?ae.memoizedState:null)!==r&&(jt.flags|=1024),s}function xm(){var r=Ef!==0;return Ef=0,r}function Im(r,s,a){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~a}function Nm(r){if(vf){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}vf=!1}us=0,Be=ae=jt=null,xa=!1,fu=Ef=0,Ia=null}function Pn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?jt.memoizedState=Be=r:Be=Be.next=r,Be}function ze(){if(ae===null){var r=jt.alternate;r=r!==null?r.memoizedState:null}else r=ae.next;var s=Be===null?jt.memoizedState:Be.next;if(s!==null)Be=s,ae=r;else{if(r===null)throw jt.alternate===null?Error(i(467)):Error(i(310));ae=r,r={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},Be===null?jt.memoizedState=Be=r:Be=Be.next=r}return Be}function Dm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hu(r){var s=fu;return fu+=1,Ia===null&&(Ia=[]),r=Tv(Ia,r,s),s=jt,(Be===null?s.memoizedState:Be.next)===null&&(s=s.alternate,D.H=s===null||s.memoizedState===null?u0:c0),r}function Tf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return hu(r);if(r.$$typeof===q)return _n(r)}throw Error(i(438,String(r)))}function Om(r){var s=null,a=jt.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=jt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Dm(),jt.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(r),u=0;u<r;u++)a[u]=O;return s.index++,a}function Di(r,s){return typeof s=="function"?s(r):s}function wf(r){var s=ze();return Mm(s,ae,r)}function Mm(r,s,a){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=a;var d=r.baseQueue,g=u.pending;if(g!==null){if(d!==null){var w=d.next;d.next=g.next,g.next=w}s.baseQueue=d=g,u.pending=null}if(g=r.baseState,d===null)r.memoizedState=g;else{s=d.next;var A=w=null,j=null,it=s,ft=!1;do{var dt=it.lane&-536870913;if(dt!==it.lane?(Zt&dt)===dt:(us&dt)===dt){var ot=it.revertLane;if(ot===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),dt===Aa&&(ft=!0);else if((us&ot)===ot){it=it.next,ot===Aa&&(ft=!0);continue}else dt={lane:0,revertLane:it.revertLane,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},j===null?(A=j=dt,w=g):j=j.next=dt,jt.lanes|=ot,gs|=ot;dt=it.action,Io&&a(g,dt),g=it.hasEagerState?it.eagerState:a(g,dt)}else ot={lane:dt,revertLane:it.revertLane,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},j===null?(A=j=ot,w=g):j=j.next=ot,jt.lanes|=dt,gs|=dt;it=it.next}while(it!==null&&it!==s);if(j===null?w=g:j.next=A,!Yn(g,r.memoizedState)&&(nn=!0,ft&&(a=Ra,a!==null)))throw a;r.memoizedState=g,r.baseState=w,r.baseQueue=j,u.lastRenderedState=g}return d===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function km(r){var s=ze(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=r;var u=a.dispatch,d=a.pending,g=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do g=r(g,w.action),w=w.next;while(w!==d);Yn(g,s.memoizedState)||(nn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,u]}function Iv(r,s,a){var u=jt,d=ze(),g=ee;if(g){if(a===void 0)throw Error(i(407));a=a()}else a=s();var w=!Yn((ae||d).memoizedState,a);w&&(d.memoizedState=a,nn=!0),d=d.queue;var A=Ov.bind(null,u,d,r);if(du(2048,8,A,[r]),d.getSnapshot!==s||w||Be!==null&&Be.memoizedState.tag&1){if(u.flags|=2048,Na(9,bf(),Dv.bind(null,u,d,a,s),null),pe===null)throw Error(i(349));g||(us&124)!==0||Nv(u,s,a)}return a}function Nv(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=jt.updateQueue,s===null?(s=Dm(),jt.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Dv(r,s,a,u){s.value=a,s.getSnapshot=u,Mv(s)&&kv(r)}function Ov(r,s,a){return a(function(){Mv(s)&&kv(r)})}function Mv(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Yn(r,a)}catch{return!0}}function kv(r){var s=Ta(r,2);s!==null&&Jn(s,r,2)}function Vm(r){var s=Pn();if(typeof r=="function"){var a=r;if(r=a(),Io){Te(!0);try{a()}finally{Te(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:r},s}function Vv(r,s,a,u){return r.baseState=a,Mm(r,ae,typeof u=="function"?u:Di)}function qC(r,s,a,u,d){if(Af(r))throw Error(i(485));if(r=s.action,r!==null){var g={payload:d,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){g.listeners.push(w)}};D.T!==null?a(!0):g.isTransition=!1,u(g),a=s.pending,a===null?(g.next=s.pending=g,Pv(s,g)):(g.next=a.next,s.pending=a.next=g)}}function Pv(r,s){var a=s.action,u=s.payload,d=r.state;if(s.isTransition){var g=D.T,w={};D.T=w;try{var A=a(d,u),j=D.S;j!==null&&j(w,A),Lv(r,s,A)}catch(it){Pm(r,s,it)}finally{D.T=g}}else try{g=a(d,u),Lv(r,s,g)}catch(it){Pm(r,s,it)}}function Lv(r,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Uv(r,s,u)},function(u){return Pm(r,s,u)}):Uv(r,s,a)}function Uv(r,s,a){s.status="fulfilled",s.value=a,Bv(s),r.state=a,s=r.pending,s!==null&&(a=s.next,a===s?r.pending=null:(a=a.next,s.next=a,Pv(r,a)))}function Pm(r,s,a){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,Bv(s),s=s.next;while(s!==u)}r.action=null}function Bv(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function zv(r,s){return s}function Hv(r,s){if(ee){var a=pe.formState;if(a!==null){t:{var u=jt;if(ee){if(xe){e:{for(var d=xe,g=ei;d.nodeType!==8;){if(!g){d=null;break e}if(d=Or(d.nextSibling),d===null){d=null;break e}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){xe=Or(d.nextSibling),u=d.data==="F!";break t}}Ao(u)}u=!1}u&&(s=a[0])}}return a=Pn(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zv,lastRenderedState:s},a.queue=u,a=o0.bind(null,jt,u),u.dispatch=a,u=Vm(!1),g=Hm.bind(null,jt,!1,u.queue),u=Pn(),d={state:s,dispatch:null,action:r,pending:null},u.queue=d,a=qC.bind(null,jt,d,g,a),d.dispatch=a,u.memoizedState=r,[s,a,!1]}function jv(r){var s=ze();return Fv(s,ae,r)}function Fv(r,s,a){if(s=Mm(r,s,zv)[0],r=wf(Di)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=hu(s)}catch(w){throw w===ou?gf:w}else u=s;s=ze();var d=s.queue,g=d.dispatch;return a!==s.memoizedState&&(jt.flags|=2048,Na(9,bf(),$C.bind(null,d,a),null)),[u,g,r]}function $C(r,s){r.action=s}function qv(r){var s=ze(),a=ae;if(a!==null)return Fv(s,a,r);ze(),s=s.memoizedState,a=ze();var u=a.queue.dispatch;return a.memoizedState=r,[s,u,!1]}function Na(r,s,a,u){return r={tag:r,create:a,deps:u,inst:s,next:null},s=jt.updateQueue,s===null&&(s=Dm(),jt.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=r.next=r:(u=a.next,a.next=r,r.next=u,s.lastEffect=r),r}function bf(){return{destroy:void 0,resource:void 0}}function $v(){return ze().memoizedState}function Sf(r,s,a,u){var d=Pn();u=u===void 0?null:u,jt.flags|=r,d.memoizedState=Na(1|s,bf(),a,u)}function du(r,s,a,u){var d=ze();u=u===void 0?null:u;var g=d.memoizedState.inst;ae!==null&&u!==null&&Rm(u,ae.memoizedState.deps)?d.memoizedState=Na(s,g,a,u):(jt.flags|=r,d.memoizedState=Na(1|s,g,a,u))}function Gv(r,s){Sf(8390656,8,r,s)}function Yv(r,s){du(2048,8,r,s)}function Kv(r,s){return du(4,2,r,s)}function Xv(r,s){return du(4,4,r,s)}function Qv(r,s){if(typeof s=="function"){r=r();var a=s(r);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Wv(r,s,a){a=a!=null?a.concat([r]):null,du(4,4,Qv.bind(null,s,r),a)}function Lm(){}function Zv(r,s){var a=ze();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&Rm(s,u[1])?u[0]:(a.memoizedState=[r,s],r)}function Jv(r,s){var a=ze();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&Rm(s,u[1]))return u[0];if(u=r(),Io){Te(!0);try{r()}finally{Te(!1)}}return a.memoizedState=[u,s],u}function Um(r,s,a){return a===void 0||(us&1073741824)!==0?r.memoizedState=s:(r.memoizedState=a,r=nE(),jt.lanes|=r,gs|=r,a)}function t0(r,s,a,u){return Yn(a,s)?a:Ca.current!==null?(r=Um(r,a,u),Yn(r,s)||(nn=!0),r):(us&42)===0?(nn=!0,r.memoizedState=a):(r=nE(),jt.lanes|=r,gs|=r,s)}function e0(r,s,a,u,d){var g=$.p;$.p=g!==0&&8>g?g:8;var w=D.T,A={};D.T=A,Hm(r,!1,s,a);try{var j=d(),it=D.S;if(it!==null&&it(A,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var ft=HC(j,u);mu(r,s,ft,Zn(r))}else mu(r,s,u,Zn(r))}catch(dt){mu(r,s,{then:function(){},status:"rejected",reason:dt},Zn())}finally{$.p=g,D.T=w}}function GC(){}function Bm(r,s,a,u){if(r.tag!==5)throw Error(i(476));var d=n0(r).queue;e0(r,d,s,tt,a===null?GC:function(){return r0(r),a(u)})}function n0(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:tt,baseState:tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:tt},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:a},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function r0(r){var s=n0(r).next.queue;mu(r,s,{},Zn())}function zm(){return _n(Ou)}function i0(){return ze().memoizedState}function s0(){return ze().memoizedState}function YC(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var a=Zn();r=as(a);var u=ls(s,r,a);u!==null&&(Jn(u,s,a),lu(u,s,a)),s={cache:gm()},r.payload=s;return}s=s.return}}function KC(r,s,a){var u=Zn();a={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Af(r)?a0(s,a):(a=om(r,s,a,u),a!==null&&(Jn(a,r,u),l0(a,s,u)))}function o0(r,s,a){var u=Zn();mu(r,s,a,u)}function mu(r,s,a,u){var d={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Af(r))a0(s,d);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,A=g(w,a);if(d.hasEagerState=!0,d.eagerState=A,Yn(A,w))return lf(r,s,d,0),pe===null&&af(),!1}catch{}finally{}if(a=om(r,s,d,u),a!==null)return Jn(a,r,u),l0(a,s,u),!0}return!1}function Hm(r,s,a,u){if(u={lane:2,revertLane:vp(),action:u,hasEagerState:!1,eagerState:null,next:null},Af(r)){if(s)throw Error(i(479))}else s=om(r,a,u,2),s!==null&&Jn(s,r,2)}function Af(r){var s=r.alternate;return r===jt||s!==null&&s===jt}function a0(r,s){xa=vf=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function l0(r,s,a){if((a&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,a|=u,s.lanes=a,ro(r,a)}}var Rf={readContext:_n,use:Tf,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useLayoutEffect:Me,useInsertionEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useSyncExternalStore:Me,useId:Me,useHostTransitionStatus:Me,useFormState:Me,useActionState:Me,useOptimistic:Me,useMemoCache:Me,useCacheRefresh:Me},u0={readContext:_n,use:Tf,useCallback:function(r,s){return Pn().memoizedState=[r,s===void 0?null:s],r},useContext:_n,useEffect:Gv,useImperativeHandle:function(r,s,a){a=a!=null?a.concat([r]):null,Sf(4194308,4,Qv.bind(null,s,r),a)},useLayoutEffect:function(r,s){return Sf(4194308,4,r,s)},useInsertionEffect:function(r,s){Sf(4,2,r,s)},useMemo:function(r,s){var a=Pn();s=s===void 0?null:s;var u=r();if(Io){Te(!0);try{r()}finally{Te(!1)}}return a.memoizedState=[u,s],u},useReducer:function(r,s,a){var u=Pn();if(a!==void 0){var d=a(s);if(Io){Te(!0);try{a(s)}finally{Te(!1)}}}else d=s;return u.memoizedState=u.baseState=d,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:d},u.queue=r,r=r.dispatch=KC.bind(null,jt,r),[u.memoizedState,r]},useRef:function(r){var s=Pn();return r={current:r},s.memoizedState=r},useState:function(r){r=Vm(r);var s=r.queue,a=o0.bind(null,jt,s);return s.dispatch=a,[r.memoizedState,a]},useDebugValue:Lm,useDeferredValue:function(r,s){var a=Pn();return Um(a,r,s)},useTransition:function(){var r=Vm(!1);return r=e0.bind(null,jt,r.queue,!0,!1),Pn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,a){var u=jt,d=Pn();if(ee){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),pe===null)throw Error(i(349));(Zt&124)!==0||Nv(u,s,a)}d.memoizedState=a;var g={value:a,getSnapshot:s};return d.queue=g,Gv(Ov.bind(null,u,g,r),[r]),u.flags|=2048,Na(9,bf(),Dv.bind(null,u,g,a,s),null),a},useId:function(){var r=Pn(),s=pe.identifierPrefix;if(ee){var a=xi,u=Ci;a=(u&~(1<<32-we(u)-1)).toString(32)+a,s="«"+s+"R"+a,a=Ef++,0<a&&(s+="H"+a.toString(32)),s+="»"}else a=jC++,s="«"+s+"r"+a.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:zm,useFormState:Hv,useActionState:Hv,useOptimistic:function(r){var s=Pn();s.memoizedState=s.baseState=r;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Hm.bind(null,jt,!0,a),a.dispatch=s,[r,s]},useMemoCache:Om,useCacheRefresh:function(){return Pn().memoizedState=YC.bind(null,jt)}},c0={readContext:_n,use:Tf,useCallback:Zv,useContext:_n,useEffect:Yv,useImperativeHandle:Wv,useInsertionEffect:Kv,useLayoutEffect:Xv,useMemo:Jv,useReducer:wf,useRef:$v,useState:function(){return wf(Di)},useDebugValue:Lm,useDeferredValue:function(r,s){var a=ze();return t0(a,ae.memoizedState,r,s)},useTransition:function(){var r=wf(Di)[0],s=ze().memoizedState;return[typeof r=="boolean"?r:hu(r),s]},useSyncExternalStore:Iv,useId:i0,useHostTransitionStatus:zm,useFormState:jv,useActionState:jv,useOptimistic:function(r,s){var a=ze();return Vv(a,ae,r,s)},useMemoCache:Om,useCacheRefresh:s0},XC={readContext:_n,use:Tf,useCallback:Zv,useContext:_n,useEffect:Yv,useImperativeHandle:Wv,useInsertionEffect:Kv,useLayoutEffect:Xv,useMemo:Jv,useReducer:km,useRef:$v,useState:function(){return km(Di)},useDebugValue:Lm,useDeferredValue:function(r,s){var a=ze();return ae===null?Um(a,r,s):t0(a,ae.memoizedState,r,s)},useTransition:function(){var r=km(Di)[0],s=ze().memoizedState;return[typeof r=="boolean"?r:hu(r),s]},useSyncExternalStore:Iv,useId:i0,useHostTransitionStatus:zm,useFormState:qv,useActionState:qv,useOptimistic:function(r,s){var a=ze();return ae!==null?Vv(a,ae,r,s):(a.baseState=r,[r,a.queue.dispatch])},useMemoCache:Om,useCacheRefresh:s0},Da=null,pu=0;function Cf(r){var s=pu;return pu+=1,Da===null&&(Da=[]),Tv(Da,r,s)}function gu(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function xf(r,s){throw s.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function f0(r){var s=r._init;return s(r._payload)}function h0(r){function s(J,K){if(r){var rt=J.deletions;rt===null?(J.deletions=[K],J.flags|=16):rt.push(K)}}function a(J,K){if(!r)return null;for(;K!==null;)s(J,K),K=K.sibling;return null}function u(J){for(var K=new Map;J!==null;)J.key!==null?K.set(J.key,J):K.set(J.index,J),J=J.sibling;return K}function d(J,K){return J=Ri(J,K),J.index=0,J.sibling=null,J}function g(J,K,rt){return J.index=rt,r?(rt=J.alternate,rt!==null?(rt=rt.index,rt<K?(J.flags|=67108866,K):rt):(J.flags|=67108866,K)):(J.flags|=1048576,K)}function w(J){return r&&J.alternate===null&&(J.flags|=67108866),J}function A(J,K,rt,ht){return K===null||K.tag!==6?(K=lm(rt,J.mode,ht),K.return=J,K):(K=d(K,rt),K.return=J,K)}function j(J,K,rt,ht){var Tt=rt.type;return Tt===I?ft(J,K,rt.props.children,ht,rt.key):K!==null&&(K.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===S&&f0(Tt)===K.type)?(K=d(K,rt.props),gu(K,rt),K.return=J,K):(K=cf(rt.type,rt.key,rt.props,null,J.mode,ht),gu(K,rt),K.return=J,K)}function it(J,K,rt,ht){return K===null||K.tag!==4||K.stateNode.containerInfo!==rt.containerInfo||K.stateNode.implementation!==rt.implementation?(K=um(rt,J.mode,ht),K.return=J,K):(K=d(K,rt.children||[]),K.return=J,K)}function ft(J,K,rt,ht,Tt){return K===null||K.tag!==7?(K=To(rt,J.mode,ht,Tt),K.return=J,K):(K=d(K,rt),K.return=J,K)}function dt(J,K,rt){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=lm(""+K,J.mode,rt),K.return=J,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case E:return rt=cf(K.type,K.key,K.props,null,J.mode,rt),gu(rt,K),rt.return=J,rt;case b:return K=um(K,J.mode,rt),K.return=J,K;case S:var ht=K._init;return K=ht(K._payload),dt(J,K,rt)}if(Y(K)||B(K))return K=To(K,J.mode,rt,null),K.return=J,K;if(typeof K.then=="function")return dt(J,Cf(K),rt);if(K.$$typeof===q)return dt(J,mf(J,K),rt);xf(J,K)}return null}function ot(J,K,rt,ht){var Tt=K!==null?K.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return Tt!==null?null:A(J,K,""+rt,ht);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case E:return rt.key===Tt?j(J,K,rt,ht):null;case b:return rt.key===Tt?it(J,K,rt,ht):null;case S:return Tt=rt._init,rt=Tt(rt._payload),ot(J,K,rt,ht)}if(Y(rt)||B(rt))return Tt!==null?null:ft(J,K,rt,ht,null);if(typeof rt.then=="function")return ot(J,K,Cf(rt),ht);if(rt.$$typeof===q)return ot(J,K,mf(J,rt),ht);xf(J,rt)}return null}function at(J,K,rt,ht,Tt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return J=J.get(rt)||null,A(K,J,""+ht,Tt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case E:return J=J.get(ht.key===null?rt:ht.key)||null,j(K,J,ht,Tt);case b:return J=J.get(ht.key===null?rt:ht.key)||null,it(K,J,ht,Tt);case S:var qt=ht._init;return ht=qt(ht._payload),at(J,K,rt,ht,Tt)}if(Y(ht)||B(ht))return J=J.get(rt)||null,ft(K,J,ht,Tt,null);if(typeof ht.then=="function")return at(J,K,rt,Cf(ht),Tt);if(ht.$$typeof===q)return at(J,K,rt,mf(K,ht),Tt);xf(K,ht)}return null}function kt(J,K,rt,ht){for(var Tt=null,qt=null,Rt=K,Dt=K=0,sn=null;Rt!==null&&Dt<rt.length;Dt++){Rt.index>Dt?(sn=Rt,Rt=null):sn=Rt.sibling;var te=ot(J,Rt,rt[Dt],ht);if(te===null){Rt===null&&(Rt=sn);break}r&&Rt&&te.alternate===null&&s(J,Rt),K=g(te,K,Dt),qt===null?Tt=te:qt.sibling=te,qt=te,Rt=sn}if(Dt===rt.length)return a(J,Rt),ee&&bo(J,Dt),Tt;if(Rt===null){for(;Dt<rt.length;Dt++)Rt=dt(J,rt[Dt],ht),Rt!==null&&(K=g(Rt,K,Dt),qt===null?Tt=Rt:qt.sibling=Rt,qt=Rt);return ee&&bo(J,Dt),Tt}for(Rt=u(Rt);Dt<rt.length;Dt++)sn=at(Rt,J,Dt,rt[Dt],ht),sn!==null&&(r&&sn.alternate!==null&&Rt.delete(sn.key===null?Dt:sn.key),K=g(sn,K,Dt),qt===null?Tt=sn:qt.sibling=sn,qt=sn);return r&&Rt.forEach(function(As){return s(J,As)}),ee&&bo(J,Dt),Tt}function It(J,K,rt,ht){if(rt==null)throw Error(i(151));for(var Tt=null,qt=null,Rt=K,Dt=K=0,sn=null,te=rt.next();Rt!==null&&!te.done;Dt++,te=rt.next()){Rt.index>Dt?(sn=Rt,Rt=null):sn=Rt.sibling;var As=ot(J,Rt,te.value,ht);if(As===null){Rt===null&&(Rt=sn);break}r&&Rt&&As.alternate===null&&s(J,Rt),K=g(As,K,Dt),qt===null?Tt=As:qt.sibling=As,qt=As,Rt=sn}if(te.done)return a(J,Rt),ee&&bo(J,Dt),Tt;if(Rt===null){for(;!te.done;Dt++,te=rt.next())te=dt(J,te.value,ht),te!==null&&(K=g(te,K,Dt),qt===null?Tt=te:qt.sibling=te,qt=te);return ee&&bo(J,Dt),Tt}for(Rt=u(Rt);!te.done;Dt++,te=rt.next())te=at(Rt,J,Dt,te.value,ht),te!==null&&(r&&te.alternate!==null&&Rt.delete(te.key===null?Dt:te.key),K=g(te,K,Dt),qt===null?Tt=te:qt.sibling=te,qt=te);return r&&Rt.forEach(function(Qx){return s(J,Qx)}),ee&&bo(J,Dt),Tt}function ue(J,K,rt,ht){if(typeof rt=="object"&&rt!==null&&rt.type===I&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case E:t:{for(var Tt=rt.key;K!==null;){if(K.key===Tt){if(Tt=rt.type,Tt===I){if(K.tag===7){a(J,K.sibling),ht=d(K,rt.props.children),ht.return=J,J=ht;break t}}else if(K.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===S&&f0(Tt)===K.type){a(J,K.sibling),ht=d(K,rt.props),gu(ht,rt),ht.return=J,J=ht;break t}a(J,K);break}else s(J,K);K=K.sibling}rt.type===I?(ht=To(rt.props.children,J.mode,ht,rt.key),ht.return=J,J=ht):(ht=cf(rt.type,rt.key,rt.props,null,J.mode,ht),gu(ht,rt),ht.return=J,J=ht)}return w(J);case b:t:{for(Tt=rt.key;K!==null;){if(K.key===Tt)if(K.tag===4&&K.stateNode.containerInfo===rt.containerInfo&&K.stateNode.implementation===rt.implementation){a(J,K.sibling),ht=d(K,rt.children||[]),ht.return=J,J=ht;break t}else{a(J,K);break}else s(J,K);K=K.sibling}ht=um(rt,J.mode,ht),ht.return=J,J=ht}return w(J);case S:return Tt=rt._init,rt=Tt(rt._payload),ue(J,K,rt,ht)}if(Y(rt))return kt(J,K,rt,ht);if(B(rt)){if(Tt=B(rt),typeof Tt!="function")throw Error(i(150));return rt=Tt.call(rt),It(J,K,rt,ht)}if(typeof rt.then=="function")return ue(J,K,Cf(rt),ht);if(rt.$$typeof===q)return ue(J,K,mf(J,rt),ht);xf(J,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint"?(rt=""+rt,K!==null&&K.tag===6?(a(J,K.sibling),ht=d(K,rt),ht.return=J,J=ht):(a(J,K),ht=lm(rt,J.mode,ht),ht.return=J,J=ht),w(J)):a(J,K)}return function(J,K,rt,ht){try{pu=0;var Tt=ue(J,K,rt,ht);return Da=null,Tt}catch(Rt){if(Rt===ou||Rt===gf)throw Rt;var qt=Kn(29,Rt,null,J.mode);return qt.lanes=ht,qt.return=J,qt}finally{}}}var Oa=h0(!0),d0=h0(!1),Er=G(null),ni=null;function cs(r){var s=r.alternate;st(Ye,Ye.current&1),st(Er,r),ni===null&&(s===null||Ca.current!==null||s.memoizedState!==null)&&(ni=r)}function m0(r){if(r.tag===22){if(st(Ye,Ye.current),st(Er,r),ni===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(ni=r)}}else fs()}function fs(){st(Ye,Ye.current),st(Er,Er.current)}function Oi(r){nt(Er),ni===r&&(ni=null),nt(Ye)}var Ye=G(0);function If(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Dp(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function jm(r,s,a,u){s=r.memoizedState,a=a(u,s),a=a==null?s:y({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Fm={enqueueSetState:function(r,s,a){r=r._reactInternals;var u=Zn(),d=as(u);d.payload=s,a!=null&&(d.callback=a),s=ls(r,d,u),s!==null&&(Jn(s,r,u),lu(s,r,u))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var u=Zn(),d=as(u);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=ls(r,d,u),s!==null&&(Jn(s,r,u),lu(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Zn(),u=as(a);u.tag=2,s!=null&&(u.callback=s),s=ls(r,u,a),s!==null&&(Jn(s,r,a),lu(s,r,a))}};function p0(r,s,a,u,d,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,g,w):s.prototype&&s.prototype.isPureReactComponent?!Zl(a,u)||!Zl(d,g):!0}function g0(r,s,a,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==r&&Fm.enqueueReplaceState(s,s.state,null)}function No(r,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(r=r.defaultProps){a===s&&(a=y({},a));for(var d in r)a[d]===void 0&&(a[d]=r[d])}return a}var Nf=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function y0(r){Nf(r)}function _0(r){console.error(r)}function v0(r){Nf(r)}function Df(r,s){try{var a=r.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function E0(r,s,a){try{var u=r.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function qm(r,s,a){return a=as(a),a.tag=3,a.payload={element:null},a.callback=function(){Df(r,s)},a}function T0(r){return r=as(r),r.tag=3,r}function w0(r,s,a,u){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var g=u.value;r.payload=function(){return d(g)},r.callback=function(){E0(s,a,u)}}var w=a.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){E0(s,a,u),typeof d!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function QC(r,s,a,u,d){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&ru(s,a,d,!0),a=Er.current,a!==null){switch(a.tag){case 13:return ni===null?mp():a.alternate===null&&Ie===0&&(Ie=3),a.flags&=-257,a.flags|=65536,a.lanes=d,u===vm?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),gp(r,u,d)),!1;case 22:return a.flags|=65536,u===vm?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),gp(r,u,d)),!1}throw Error(i(435,a.tag))}return gp(r,u,d),mp(),!1}if(ee)return s=Er.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==hm&&(r=Error(i(422),{cause:u}),nu(gr(r,a)))):(u!==hm&&(s=Error(i(423),{cause:u}),nu(gr(s,a))),r=r.current.alternate,r.flags|=65536,d&=-d,r.lanes|=d,u=gr(u,a),d=qm(r.stateNode,u,d),wm(r,d),Ie!==4&&(Ie=2)),!1;var g=Error(i(520),{cause:u});if(g=gr(g,a),bu===null?bu=[g]:bu.push(g),Ie!==4&&(Ie=2),s===null)return!0;u=gr(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,r=d&-d,a.lanes|=r,r=qm(a.stateNode,u,r),wm(a,r),!1;case 1:if(s=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ys===null||!ys.has(g))))return a.flags|=65536,d&=-d,a.lanes|=d,d=T0(d),w0(d,r,a,u),wm(a,d),!1}a=a.return}while(a!==null);return!1}var b0=Error(i(461)),nn=!1;function fn(r,s,a,u){s.child=r===null?d0(s,null,a,u):Oa(s,r.child,a,u)}function S0(r,s,a,u,d){a=a.render;var g=s.ref;if("ref"in u){var w={};for(var A in u)A!=="ref"&&(w[A]=u[A])}else w=u;return Co(s),u=Cm(r,s,a,w,g,d),A=xm(),r!==null&&!nn?(Im(r,s,d),Mi(r,s,d)):(ee&&A&&cm(s),s.flags|=1,fn(r,s,u,d),s.child)}function A0(r,s,a,u,d){if(r===null){var g=a.type;return typeof g=="function"&&!am(g)&&g.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=g,R0(r,s,g,u,d)):(r=cf(a.type,null,u,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!Zm(r,d)){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:Zl,a(w,u)&&r.ref===s.ref)return Mi(r,s,d)}return s.flags|=1,r=Ri(g,u),r.ref=s.ref,r.return=s,s.child=r}function R0(r,s,a,u,d){if(r!==null){var g=r.memoizedProps;if(Zl(g,u)&&r.ref===s.ref)if(nn=!1,s.pendingProps=u=g,Zm(r,d))(r.flags&131072)!==0&&(nn=!0);else return s.lanes=r.lanes,Mi(r,s,d)}return $m(r,s,a,u,d)}function C0(r,s,a){var u=s.pendingProps,d=u.children,g=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=g!==null?g.baseLanes|a:a,r!==null){for(d=s.child=r.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;s.childLanes=g&~u}else s.childLanes=0,s.child=null;return x0(r,s,u,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&pf(s,g!==null?g.cachePool:null),g!==null?Rv(s,g):Sm(),m0(s);else return s.lanes=s.childLanes=536870912,x0(r,s,g!==null?g.baseLanes|a:a,a)}else g!==null?(pf(s,g.cachePool),Rv(s,g),fs(),s.memoizedState=null):(r!==null&&pf(s,null),Sm(),fs());return fn(r,s,d,a),s.child}function x0(r,s,a,u){var d=_m();return d=d===null?null:{parent:Ge._currentValue,pool:d},s.memoizedState={baseLanes:a,cachePool:d},r!==null&&pf(s,null),Sm(),m0(s),r!==null&&ru(r,s,u,!0),null}function Of(r,s){var a=s.ref;if(a===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(r===null||r.ref!==a)&&(s.flags|=4194816)}}function $m(r,s,a,u,d){return Co(s),a=Cm(r,s,a,u,void 0,d),u=xm(),r!==null&&!nn?(Im(r,s,d),Mi(r,s,d)):(ee&&u&&cm(s),s.flags|=1,fn(r,s,a,d),s.child)}function I0(r,s,a,u,d,g){return Co(s),s.updateQueue=null,a=xv(s,u,a,d),Cv(r),u=xm(),r!==null&&!nn?(Im(r,s,g),Mi(r,s,g)):(ee&&u&&cm(s),s.flags|=1,fn(r,s,a,g),s.child)}function N0(r,s,a,u,d){if(Co(s),s.stateNode===null){var g=wa,w=a.contextType;typeof w=="object"&&w!==null&&(g=_n(w)),g=new a(u,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Fm,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=u,g.state=s.memoizedState,g.refs={},Em(s),w=a.contextType,g.context=typeof w=="object"&&w!==null?_n(w):wa,g.state=s.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(jm(s,a,w,u),g.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(w=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),w!==g.state&&Fm.enqueueReplaceState(g,g.state,null),cu(s,u,g,d),uu(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){g=s.stateNode;var A=s.memoizedProps,j=No(a,A);g.props=j;var it=g.context,ft=a.contextType;w=wa,typeof ft=="object"&&ft!==null&&(w=_n(ft));var dt=a.getDerivedStateFromProps;ft=typeof dt=="function"||typeof g.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,ft||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(A||it!==w)&&g0(s,g,u,w),os=!1;var ot=s.memoizedState;g.state=ot,cu(s,u,g,d),uu(),it=s.memoizedState,A||ot!==it||os?(typeof dt=="function"&&(jm(s,a,dt,u),it=s.memoizedState),(j=os||p0(s,a,j,u,ot,it,w))?(ft||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=it),g.props=u,g.state=it,g.context=w,u=j):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{g=s.stateNode,Tm(r,s),w=s.memoizedProps,ft=No(a,w),g.props=ft,dt=s.pendingProps,ot=g.context,it=a.contextType,j=wa,typeof it=="object"&&it!==null&&(j=_n(it)),A=a.getDerivedStateFromProps,(it=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==dt||ot!==j)&&g0(s,g,u,j),os=!1,ot=s.memoizedState,g.state=ot,cu(s,u,g,d),uu();var at=s.memoizedState;w!==dt||ot!==at||os||r!==null&&r.dependencies!==null&&df(r.dependencies)?(typeof A=="function"&&(jm(s,a,A,u),at=s.memoizedState),(ft=os||p0(s,a,ft,u,ot,at,j)||r!==null&&r.dependencies!==null&&df(r.dependencies))?(it||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,at,j),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,at,j)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===r.memoizedProps&&ot===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&ot===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=at),g.props=u,g.state=at,g.context=j,u=ft):(typeof g.componentDidUpdate!="function"||w===r.memoizedProps&&ot===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&ot===r.memoizedState||(s.flags|=1024),u=!1)}return g=u,Of(r,s),u=(s.flags&128)!==0,g||u?(g=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,r!==null&&u?(s.child=Oa(s,r.child,null,d),s.child=Oa(s,null,a,d)):fn(r,s,a,d),s.memoizedState=g.state,r=s.child):r=Mi(r,s,d),r}function D0(r,s,a,u){return eu(),s.flags|=256,fn(r,s,a,u),s.child}var Gm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ym(r){return{baseLanes:r,cachePool:_v()}}function Km(r,s,a){return r=r!==null?r.childLanes&~a:0,s&&(r|=Tr),r}function O0(r,s,a){var u=s.pendingProps,d=!1,g=(s.flags&128)!==0,w;if((w=g)||(w=r!==null&&r.memoizedState===null?!1:(Ye.current&2)!==0),w&&(d=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,r===null){if(ee){if(d?cs(s):fs(),ee){var A=xe,j;if(j=A){t:{for(j=A,A=ei;j.nodeType!==8;){if(!A){A=null;break t}if(j=Or(j.nextSibling),j===null){A=null;break t}}A=j}A!==null?(s.memoizedState={dehydrated:A,treeContext:wo!==null?{id:Ci,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},j=Kn(18,null,null,0),j.stateNode=A,j.return=s,s.child=j,On=s,xe=null,j=!0):j=!1}j||Ao(s)}if(A=s.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return Dp(A)?s.lanes=32:s.lanes=536870912,null;Oi(s)}return A=u.children,u=u.fallback,d?(fs(),d=s.mode,A=Mf({mode:"hidden",children:A},d),u=To(u,d,a,null),A.return=s,u.return=s,A.sibling=u,s.child=A,d=s.child,d.memoizedState=Ym(a),d.childLanes=Km(r,w,a),s.memoizedState=Gm,u):(cs(s),Xm(s,A))}if(j=r.memoizedState,j!==null&&(A=j.dehydrated,A!==null)){if(g)s.flags&256?(cs(s),s.flags&=-257,s=Qm(r,s,a)):s.memoizedState!==null?(fs(),s.child=r.child,s.flags|=128,s=null):(fs(),d=u.fallback,A=s.mode,u=Mf({mode:"visible",children:u.children},A),d=To(d,A,a,null),d.flags|=2,u.return=s,d.return=s,u.sibling=d,s.child=u,Oa(s,r.child,null,a),u=s.child,u.memoizedState=Ym(a),u.childLanes=Km(r,w,a),s.memoizedState=Gm,s=d);else if(cs(s),Dp(A)){if(w=A.nextSibling&&A.nextSibling.dataset,w)var it=w.dgst;w=it,u=Error(i(419)),u.stack="",u.digest=w,nu({value:u,source:null,stack:null}),s=Qm(r,s,a)}else if(nn||ru(r,s,a,!1),w=(a&r.childLanes)!==0,nn||w){if(w=pe,w!==null&&(u=a&-a,u=(u&42)!==0?1:Hr(u),u=(u&(w.suspendedLanes|a))!==0?0:u,u!==0&&u!==j.retryLane))throw j.retryLane=u,Ta(r,u),Jn(w,r,u),b0;A.data==="$?"||mp(),s=Qm(r,s,a)}else A.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=j.treeContext,xe=Or(A.nextSibling),On=s,ee=!0,So=null,ei=!1,r!==null&&(_r[vr++]=Ci,_r[vr++]=xi,_r[vr++]=wo,Ci=r.id,xi=r.overflow,wo=s),s=Xm(s,u.children),s.flags|=4096);return s}return d?(fs(),d=u.fallback,A=s.mode,j=r.child,it=j.sibling,u=Ri(j,{mode:"hidden",children:u.children}),u.subtreeFlags=j.subtreeFlags&65011712,it!==null?d=Ri(it,d):(d=To(d,A,a,null),d.flags|=2),d.return=s,u.return=s,u.sibling=d,s.child=u,u=d,d=s.child,A=r.child.memoizedState,A===null?A=Ym(a):(j=A.cachePool,j!==null?(it=Ge._currentValue,j=j.parent!==it?{parent:it,pool:it}:j):j=_v(),A={baseLanes:A.baseLanes|a,cachePool:j}),d.memoizedState=A,d.childLanes=Km(r,w,a),s.memoizedState=Gm,u):(cs(s),a=r.child,r=a.sibling,a=Ri(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,r!==null&&(w=s.deletions,w===null?(s.deletions=[r],s.flags|=16):w.push(r)),s.child=a,s.memoizedState=null,a)}function Xm(r,s){return s=Mf({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Mf(r,s){return r=Kn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Qm(r,s,a){return Oa(s,r.child,null,a),r=Xm(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function M0(r,s,a){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),mm(r.return,s,a)}function Wm(r,s,a,u,d){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:d}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=a,g.tailMode=d)}function k0(r,s,a){var u=s.pendingProps,d=u.revealOrder,g=u.tail;if(fn(r,s,u.children,a),u=Ye.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&M0(r,a,s);else if(r.tag===19)M0(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(st(Ye,u),d){case"forwards":for(a=s.child,d=null;a!==null;)r=a.alternate,r!==null&&If(r)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Wm(s,!1,d,a,g);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&If(r)===null){s.child=d;break}r=d.sibling,d.sibling=a,a=d,d=r}Wm(s,!0,a,null,g);break;case"together":Wm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Mi(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),gs|=s.lanes,(a&s.childLanes)===0)if(r!==null){if(ru(r,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,a=Ri(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=Ri(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function Zm(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&df(r)))}function WC(r,s,a){switch(s.tag){case 3:bt(s,s.stateNode.containerInfo),ss(s,Ge,r.memoizedState.cache),eu();break;case 27:case 5:Bt(s);break;case 4:bt(s,s.stateNode.containerInfo);break;case 10:ss(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(cs(s),s.flags|=128,null):(a&s.child.childLanes)!==0?O0(r,s,a):(cs(s),r=Mi(r,s,a),r!==null?r.sibling:null);cs(s);break;case 19:var d=(r.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(ru(r,s,a,!1),u=(a&s.childLanes)!==0),d){if(u)return k0(r,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),st(Ye,Ye.current),u)break;return null;case 22:case 23:return s.lanes=0,C0(r,s,a);case 24:ss(s,Ge,r.memoizedState.cache)}return Mi(r,s,a)}function V0(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps)nn=!0;else{if(!Zm(r,a)&&(s.flags&128)===0)return nn=!1,WC(r,s,a);nn=(r.flags&131072)!==0}else nn=!1,ee&&(s.flags&1048576)!==0&&fv(s,hf,s.index);switch(s.lanes=0,s.tag){case 16:t:{r=s.pendingProps;var u=s.elementType,d=u._init;if(u=d(u._payload),s.type=u,typeof u=="function")am(u)?(r=No(u,r),s.tag=1,s=N0(null,s,u,r,a)):(s.tag=0,s=$m(null,s,u,r,a));else{if(u!=null){if(d=u.$$typeof,d===z){s.tag=11,s=S0(null,s,u,r,a);break t}else if(d===P){s.tag=14,s=A0(null,s,u,r,a);break t}}throw s=V(u)||u,Error(i(306,s,""))}}return s;case 0:return $m(r,s,s.type,s.pendingProps,a);case 1:return u=s.type,d=No(u,s.pendingProps),N0(r,s,u,d,a);case 3:t:{if(bt(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var g=s.memoizedState;d=g.element,Tm(r,s),cu(s,u,null,a);var w=s.memoizedState;if(u=w.cache,ss(s,Ge,u),u!==g.cache&&pm(s,[Ge],a,!0),uu(),u=w.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=D0(r,s,u,a);break t}else if(u!==d){d=gr(Error(i(424)),s),nu(d),s=D0(r,s,u,a);break t}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(xe=Or(r.firstChild),On=s,ee=!0,So=null,ei=!0,a=d0(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(eu(),u===d){s=Mi(r,s,a);break t}fn(r,s,u,a)}s=s.child}return s;case 26:return Of(r,s),r===null?(a=BE(s.type,null,s.pendingProps,null))?s.memoizedState=a:ee||(a=s.type,r=s.pendingProps,u=Yf(_t.current).createElement(a),u[Oe]=s,u[Ce]=r,dn(u,a,r),be(u),s.stateNode=u):s.memoizedState=BE(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Bt(s),r===null&&ee&&(u=s.stateNode=PE(s.type,s.pendingProps,_t.current),On=s,ei=!0,d=xe,Es(s.type)?(Op=d,xe=Or(u.firstChild)):xe=d),fn(r,s,s.pendingProps.children,a),Of(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&ee&&((d=u=xe)&&(u=Ax(u,s.type,s.pendingProps,ei),u!==null?(s.stateNode=u,On=s,xe=Or(u.firstChild),ei=!1,d=!0):d=!1),d||Ao(s)),Bt(s),d=s.type,g=s.pendingProps,w=r!==null?r.memoizedProps:null,u=g.children,xp(d,g)?u=null:w!==null&&xp(d,w)&&(s.flags|=32),s.memoizedState!==null&&(d=Cm(r,s,FC,null,null,a),Ou._currentValue=d),Of(r,s),fn(r,s,u,a),s.child;case 6:return r===null&&ee&&((r=a=xe)&&(a=Rx(a,s.pendingProps,ei),a!==null?(s.stateNode=a,On=s,xe=null,r=!0):r=!1),r||Ao(s)),null;case 13:return O0(r,s,a);case 4:return bt(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=Oa(s,null,u,a):fn(r,s,u,a),s.child;case 11:return S0(r,s,s.type,s.pendingProps,a);case 7:return fn(r,s,s.pendingProps,a),s.child;case 8:return fn(r,s,s.pendingProps.children,a),s.child;case 12:return fn(r,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,ss(s,s.type,u.value),fn(r,s,u.children,a),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,Co(s),d=_n(d),u=u(d),s.flags|=1,fn(r,s,u,a),s.child;case 14:return A0(r,s,s.type,s.pendingProps,a);case 15:return R0(r,s,s.type,s.pendingProps,a);case 19:return k0(r,s,a);case 31:return u=s.pendingProps,a=s.mode,u={mode:u.mode,children:u.children},r===null?(a=Mf(u,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=Ri(r.child,u),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return C0(r,s,a);case 24:return Co(s),u=_n(Ge),r===null?(d=_m(),d===null&&(d=pe,g=gm(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=a),d=g),s.memoizedState={parent:u,cache:d},Em(s),ss(s,Ge,d)):((r.lanes&a)!==0&&(Tm(r,s),cu(s,null,null,a),uu()),d=r.memoizedState,g=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),ss(s,Ge,u)):(u=g.cache,ss(s,Ge,u),u!==d.cache&&pm(s,[Ge],a,!0))),fn(r,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ki(r){r.flags|=4}function P0(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!qE(s)){if(s=Er.current,s!==null&&((Zt&4194048)===Zt?ni!==null:(Zt&62914560)!==Zt&&(Zt&536870912)===0||s!==ni))throw au=vm,vv;r.flags|=8192}}function kf(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Rr():536870912,r.lanes|=s,Pa|=s)}function yu(r,s){if(!ee)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Se(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,u=0;if(s)for(var d=r.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=u,r.childLanes=a,s}function ZC(r,s,a){var u=s.pendingProps;switch(fm(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Se(s),null;case 1:return Se(s),null;case 3:return a=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ni(Ge),Ht(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(r===null||r.child===null)&&(tu(s)?ki(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,mv())),Se(s),null;case 26:return a=s.memoizedState,r===null?(ki(s),a!==null?(Se(s),P0(s,a)):(Se(s),s.flags&=-16777217)):a?a!==r.memoizedState?(ki(s),Se(s),P0(s,a)):(Se(s),s.flags&=-16777217):(r.memoizedProps!==u&&ki(s),Se(s),s.flags&=-16777217),null;case 27:de(s),a=_t.current;var d=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&ki(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Se(s),null}r=ct.current,tu(s)?hv(s):(r=PE(d,u,a),s.stateNode=r,ki(s))}return Se(s),null;case 5:if(de(s),a=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&ki(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Se(s),null}if(r=ct.current,tu(s))hv(s);else{switch(d=Yf(_t.current),r){case 1:r=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:r=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":r=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":r=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":r=d.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?d.createElement("select",{is:u.is}):d.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?d.createElement(a,{is:u.is}):d.createElement(a)}}r[Oe]=s,r[Ce]=u;t:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)r.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break t;for(;d.sibling===null;){if(d.return===null||d.return===s)break t;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=r;t:switch(dn(r,a,u),a){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&ki(s)}}return Se(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&ki(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=_t.current,tu(s)){if(r=s.stateNode,a=s.memoizedProps,u=null,d=On,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}r[Oe]=s,r=!!(r.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||IE(r.nodeValue,a)),r||Ao(s)}else r=Yf(r).createTextNode(u),r[Oe]=s,s.stateNode=r}return Se(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(d=tu(s),u!==null&&u.dehydrated!==null){if(r===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Oe]=s}else eu(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Se(s),d=!1}else d=mv(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Oi(s),s):(Oi(s),null)}if(Oi(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=u!==null,r=r!==null&&r.memoizedState!==null,a){u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==d&&(u.flags|=2048)}return a!==r&&a&&(s.child.flags|=8192),kf(s,s.updateQueue),Se(s),null;case 4:return Ht(),r===null&&bp(s.stateNode.containerInfo),Se(s),null;case 10:return Ni(s.type),Se(s),null;case 19:if(nt(Ye),d=s.memoizedState,d===null)return Se(s),null;if(u=(s.flags&128)!==0,g=d.rendering,g===null)if(u)yu(d,!1);else{if(Ie!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(g=If(r),g!==null){for(s.flags|=128,yu(d,!1),r=g.updateQueue,s.updateQueue=r,kf(s,r),s.subtreeFlags=0,r=a,a=s.child;a!==null;)cv(a,r),a=a.sibling;return st(Ye,Ye.current&1|2),s.child}r=r.sibling}d.tail!==null&&Pt()>Lf&&(s.flags|=128,u=!0,yu(d,!1),s.lanes=4194304)}else{if(!u)if(r=If(g),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,kf(s,r),yu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!ee)return Se(s),null}else 2*Pt()-d.renderingStartTime>Lf&&a!==536870912&&(s.flags|=128,u=!0,yu(d,!1),s.lanes=4194304);d.isBackwards?(g.sibling=s.child,s.child=g):(r=d.last,r!==null?r.sibling=g:s.child=g,d.last=g)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=Pt(),s.sibling=null,r=Ye.current,st(Ye,u?r&1|2:r&1),s):(Se(s),null);case 22:case 23:return Oi(s),Am(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(Se(s),s.subtreeFlags&6&&(s.flags|=8192)):Se(s),a=s.updateQueue,a!==null&&kf(s,a.retryQueue),a=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),r!==null&&nt(xo),null;case 24:return a=null,r!==null&&(a=r.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Ni(Ge),Se(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function JC(r,s){switch(fm(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ni(Ge),Ht(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return de(s),null;case 13:if(Oi(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));eu()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return nt(Ye),null;case 4:return Ht(),null;case 10:return Ni(s.type),null;case 22:case 23:return Oi(s),Am(),r!==null&&nt(xo),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Ni(Ge),null;case 25:return null;default:return null}}function L0(r,s){switch(fm(s),s.tag){case 3:Ni(Ge),Ht();break;case 26:case 27:case 5:de(s);break;case 4:Ht();break;case 13:Oi(s);break;case 19:nt(Ye);break;case 10:Ni(s.type);break;case 22:case 23:Oi(s),Am(),r!==null&&nt(xo);break;case 24:Ni(Ge)}}function _u(r,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var d=u.next;a=d;do{if((a.tag&r)===r){u=void 0;var g=a.create,w=a.inst;u=g(),w.destroy=u}a=a.next}while(a!==d)}}catch(A){he(s,s.return,A)}}function hs(r,s,a){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var g=d.next;u=g;do{if((u.tag&r)===r){var w=u.inst,A=w.destroy;if(A!==void 0){w.destroy=void 0,d=s;var j=a,it=A;try{it()}catch(ft){he(d,j,ft)}}}u=u.next}while(u!==g)}}catch(ft){he(s,s.return,ft)}}function U0(r){var s=r.updateQueue;if(s!==null){var a=r.stateNode;try{Av(s,a)}catch(u){he(r,r.return,u)}}}function B0(r,s,a){a.props=No(r.type,r.memoizedProps),a.state=r.memoizedState;try{a.componentWillUnmount()}catch(u){he(r,s,u)}}function vu(r,s){try{var a=r.ref;if(a!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof a=="function"?r.refCleanup=a(u):a.current=u}}catch(d){he(r,s,d)}}function ri(r,s){var a=r.ref,u=r.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(d){he(r,s,d)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){he(r,s,d)}else a.current=null}function z0(r){var s=r.type,a=r.memoizedProps,u=r.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break t;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(d){he(r,r.return,d)}}function Jm(r,s,a){try{var u=r.stateNode;Ex(u,r.type,a,s),u[Ce]=s}catch(d){he(r,r.return,d)}}function H0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Es(r.type)||r.tag===4}function tp(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||H0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Es(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ep(r,s,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(r,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(r),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Gf));else if(u!==4&&(u===27&&Es(r.type)&&(a=r.stateNode,s=null),r=r.child,r!==null))for(ep(r,s,a),r=r.sibling;r!==null;)ep(r,s,a),r=r.sibling}function Vf(r,s,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(u!==4&&(u===27&&Es(r.type)&&(a=r.stateNode),r=r.child,r!==null))for(Vf(r,s,a),r=r.sibling;r!==null;)Vf(r,s,a),r=r.sibling}function j0(r){var s=r.stateNode,a=r.memoizedProps;try{for(var u=r.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);dn(s,u,a),s[Oe]=r,s[Ce]=a}catch(g){he(r,r.return,g)}}var Vi=!1,ke=!1,np=!1,F0=typeof WeakSet=="function"?WeakSet:Set,rn=null;function tx(r,s){if(r=r.containerInfo,Rp=Jf,r=tv(r),tm(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else t:{a=(a=r.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var d=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break t}var w=0,A=-1,j=-1,it=0,ft=0,dt=r,ot=null;e:for(;;){for(var at;dt!==a||d!==0&&dt.nodeType!==3||(A=w+d),dt!==g||u!==0&&dt.nodeType!==3||(j=w+u),dt.nodeType===3&&(w+=dt.nodeValue.length),(at=dt.firstChild)!==null;)ot=dt,dt=at;for(;;){if(dt===r)break e;if(ot===a&&++it===d&&(A=w),ot===g&&++ft===u&&(j=w),(at=dt.nextSibling)!==null)break;dt=ot,ot=dt.parentNode}dt=at}a=A===-1||j===-1?null:{start:A,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(Cp={focusedElem:r,selectionRange:a},Jf=!1,rn=s;rn!==null;)if(s=rn,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,rn=r;else for(;rn!==null;){switch(s=rn,g=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,a=s,d=g.memoizedProps,g=g.memoizedState,u=a.stateNode;try{var kt=No(a.type,d,a.elementType===a.type);r=u.getSnapshotBeforeUpdate(kt,g),u.__reactInternalSnapshotBeforeUpdate=r}catch(It){he(a,a.return,It)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,a=r.nodeType,a===9)Np(r);else if(a===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Np(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,rn=r;break}rn=s.return}}function q0(r,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:ds(r,a),u&4&&_u(5,a);break;case 1:if(ds(r,a),u&4)if(r=a.stateNode,s===null)try{r.componentDidMount()}catch(w){he(a,a.return,w)}else{var d=No(a.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(d,s,r.__reactInternalSnapshotBeforeUpdate)}catch(w){he(a,a.return,w)}}u&64&&U0(a),u&512&&vu(a,a.return);break;case 3:if(ds(r,a),u&64&&(r=a.updateQueue,r!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Av(r,s)}catch(w){he(a,a.return,w)}}break;case 27:s===null&&u&4&&j0(a);case 26:case 5:ds(r,a),s===null&&u&4&&z0(a),u&512&&vu(a,a.return);break;case 12:ds(r,a);break;case 13:ds(r,a),u&4&&Y0(r,a),u&64&&(r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(a=ux.bind(null,a),Cx(r,a))));break;case 22:if(u=a.memoizedState!==null||Vi,!u){s=s!==null&&s.memoizedState!==null||ke,d=Vi;var g=ke;Vi=u,(ke=s)&&!g?ms(r,a,(a.subtreeFlags&8772)!==0):ds(r,a),Vi=d,ke=g}break;case 30:break;default:ds(r,a)}}function $0(r){var s=r.alternate;s!==null&&(r.alternate=null,$0(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&qr(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Ee=null,Ln=!1;function Pi(r,s,a){for(a=a.child;a!==null;)G0(r,s,a),a=a.sibling}function G0(r,s,a){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(wt,a)}catch{}switch(a.tag){case 26:ke||ri(a,s),Pi(r,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ke||ri(a,s);var u=Ee,d=Ln;Es(a.type)&&(Ee=a.stateNode,Ln=!1),Pi(r,s,a),xu(a.stateNode),Ee=u,Ln=d;break;case 5:ke||ri(a,s);case 6:if(u=Ee,d=Ln,Ee=null,Pi(r,s,a),Ee=u,Ln=d,Ee!==null)if(Ln)try{(Ee.nodeType===9?Ee.body:Ee.nodeName==="HTML"?Ee.ownerDocument.body:Ee).removeChild(a.stateNode)}catch(g){he(a,s,g)}else try{Ee.removeChild(a.stateNode)}catch(g){he(a,s,g)}break;case 18:Ee!==null&&(Ln?(r=Ee,kE(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.stateNode),Pu(r)):kE(Ee,a.stateNode));break;case 4:u=Ee,d=Ln,Ee=a.stateNode.containerInfo,Ln=!0,Pi(r,s,a),Ee=u,Ln=d;break;case 0:case 11:case 14:case 15:ke||hs(2,a,s),ke||hs(4,a,s),Pi(r,s,a);break;case 1:ke||(ri(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&B0(a,s,u)),Pi(r,s,a);break;case 21:Pi(r,s,a);break;case 22:ke=(u=ke)||a.memoizedState!==null,Pi(r,s,a),ke=u;break;default:Pi(r,s,a)}}function Y0(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Pu(r)}catch(a){he(s,s.return,a)}}function ex(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new F0),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new F0),s;default:throw Error(i(435,r.tag))}}function rp(r,s){var a=ex(r);s.forEach(function(u){var d=cx.bind(null,r,u);a.has(u)||(a.add(u),u.then(d,d))})}function Xn(r,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var d=a[u],g=r,w=s,A=w;t:for(;A!==null;){switch(A.tag){case 27:if(Es(A.type)){Ee=A.stateNode,Ln=!1;break t}break;case 5:Ee=A.stateNode,Ln=!1;break t;case 3:case 4:Ee=A.stateNode.containerInfo,Ln=!0;break t}A=A.return}if(Ee===null)throw Error(i(160));G0(g,w,d),Ee=null,Ln=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)K0(s,r),s=s.sibling}var Dr=null;function K0(r,s){var a=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Xn(s,r),Qn(r),u&4&&(hs(3,r,r.return),_u(3,r),hs(5,r,r.return));break;case 1:Xn(s,r),Qn(r),u&512&&(ke||a===null||ri(a,a.return)),u&64&&Vi&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(a=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var d=Dr;if(Xn(s,r),Qn(r),u&512&&(ke||a===null||ri(a,a.return)),u&4){var g=a!==null?a.memoizedState:null;if(u=r.memoizedState,a===null)if(u===null)if(r.stateNode===null){t:{u=r.type,a=r.memoizedProps,d=d.ownerDocument||d;e:switch(u){case"title":g=d.getElementsByTagName("title")[0],(!g||g[yi]||g[Oe]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(u),d.head.insertBefore(g,d.querySelector("head > title"))),dn(g,u,a),g[Oe]=r,be(g),u=g;break t;case"link":var w=jE("link","href",d).get(u+(a.href||""));if(w){for(var A=0;A<w.length;A++)if(g=w[A],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){w.splice(A,1);break e}}g=d.createElement(u),dn(g,u,a),d.head.appendChild(g);break;case"meta":if(w=jE("meta","content",d).get(u+(a.content||""))){for(A=0;A<w.length;A++)if(g=w[A],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){w.splice(A,1);break e}}g=d.createElement(u),dn(g,u,a),d.head.appendChild(g);break;default:throw Error(i(468,u))}g[Oe]=r,be(g),u=g}r.stateNode=u}else FE(d,r.type,r.stateNode);else r.stateNode=HE(d,u,r.memoizedProps);else g!==u?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,u===null?FE(d,r.type,r.stateNode):HE(d,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Jm(r,r.memoizedProps,a.memoizedProps)}break;case 27:Xn(s,r),Qn(r),u&512&&(ke||a===null||ri(a,a.return)),a!==null&&u&4&&Jm(r,r.memoizedProps,a.memoizedProps);break;case 5:if(Xn(s,r),Qn(r),u&512&&(ke||a===null||ri(a,a.return)),r.flags&32){d=r.stateNode;try{hr(d,"")}catch(at){he(r,r.return,at)}}u&4&&r.stateNode!=null&&(d=r.memoizedProps,Jm(r,d,a!==null?a.memoizedProps:d)),u&1024&&(np=!0);break;case 6:if(Xn(s,r),Qn(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,a=r.stateNode;try{a.nodeValue=u}catch(at){he(r,r.return,at)}}break;case 3:if(Qf=null,d=Dr,Dr=Kf(s.containerInfo),Xn(s,r),Dr=d,Qn(r),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Pu(s.containerInfo)}catch(at){he(r,r.return,at)}np&&(np=!1,X0(r));break;case 4:u=Dr,Dr=Kf(r.stateNode.containerInfo),Xn(s,r),Qn(r),Dr=u;break;case 12:Xn(s,r),Qn(r);break;case 13:Xn(s,r),Qn(r),r.child.flags&8192&&r.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(up=Pt()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,rp(r,u)));break;case 22:d=r.memoizedState!==null;var j=a!==null&&a.memoizedState!==null,it=Vi,ft=ke;if(Vi=it||d,ke=ft||j,Xn(s,r),ke=ft,Vi=it,Qn(r),u&8192)t:for(s=r.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||j||Vi||ke||Do(r)),a=null,s=r;;){if(s.tag===5||s.tag===26){if(a===null){j=a=s;try{if(g=j.stateNode,d)w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{A=j.stateNode;var dt=j.memoizedProps.style,ot=dt!=null&&dt.hasOwnProperty("display")?dt.display:null;A.style.display=ot==null||typeof ot=="boolean"?"":(""+ot).trim()}}catch(at){he(j,j.return,at)}}}else if(s.tag===6){if(a===null){j=s;try{j.stateNode.nodeValue=d?"":j.memoizedProps}catch(at){he(j,j.return,at)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,rp(r,a))));break;case 19:Xn(s,r),Qn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,rp(r,u)));break;case 30:break;case 21:break;default:Xn(s,r),Qn(r)}}function Qn(r){var s=r.flags;if(s&2){try{for(var a,u=r.return;u!==null;){if(H0(u)){a=u;break}u=u.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,g=tp(r);Vf(r,g,d);break;case 5:var w=a.stateNode;a.flags&32&&(hr(w,""),a.flags&=-33);var A=tp(r);Vf(r,A,w);break;case 3:case 4:var j=a.stateNode.containerInfo,it=tp(r);ep(r,it,j);break;default:throw Error(i(161))}}catch(ft){he(r,r.return,ft)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function X0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;X0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function ds(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)q0(r,s.alternate,s),s=s.sibling}function Do(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:hs(4,s,s.return),Do(s);break;case 1:ri(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&B0(s,s.return,a),Do(s);break;case 27:xu(s.stateNode);case 26:case 5:ri(s,s.return),Do(s);break;case 22:s.memoizedState===null&&Do(s);break;case 30:Do(s);break;default:Do(s)}r=r.sibling}}function ms(r,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=r,g=s,w=g.flags;switch(g.tag){case 0:case 11:case 15:ms(d,g,a),_u(4,g);break;case 1:if(ms(d,g,a),u=g,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(it){he(u,u.return,it)}if(u=g,d=u.updateQueue,d!==null){var A=u.stateNode;try{var j=d.shared.hiddenCallbacks;if(j!==null)for(d.shared.hiddenCallbacks=null,d=0;d<j.length;d++)Sv(j[d],A)}catch(it){he(u,u.return,it)}}a&&w&64&&U0(g),vu(g,g.return);break;case 27:j0(g);case 26:case 5:ms(d,g,a),a&&u===null&&w&4&&z0(g),vu(g,g.return);break;case 12:ms(d,g,a);break;case 13:ms(d,g,a),a&&w&4&&Y0(d,g);break;case 22:g.memoizedState===null&&ms(d,g,a),vu(g,g.return);break;case 30:break;default:ms(d,g,a)}s=s.sibling}}function ip(r,s){var a=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==a&&(r!=null&&r.refCount++,a!=null&&iu(a))}function sp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&iu(r))}function ii(r,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Q0(r,s,a,u),s=s.sibling}function Q0(r,s,a,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:ii(r,s,a,u),d&2048&&_u(9,s);break;case 1:ii(r,s,a,u);break;case 3:ii(r,s,a,u),d&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&iu(r)));break;case 12:if(d&2048){ii(r,s,a,u),r=s.stateNode;try{var g=s.memoizedProps,w=g.id,A=g.onPostCommit;typeof A=="function"&&A(w,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(j){he(s,s.return,j)}}else ii(r,s,a,u);break;case 13:ii(r,s,a,u);break;case 23:break;case 22:g=s.stateNode,w=s.alternate,s.memoizedState!==null?g._visibility&2?ii(r,s,a,u):Eu(r,s):g._visibility&2?ii(r,s,a,u):(g._visibility|=2,Ma(r,s,a,u,(s.subtreeFlags&10256)!==0)),d&2048&&ip(w,s);break;case 24:ii(r,s,a,u),d&2048&&sp(s.alternate,s);break;default:ii(r,s,a,u)}}function Ma(r,s,a,u,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=r,w=s,A=a,j=u,it=w.flags;switch(w.tag){case 0:case 11:case 15:Ma(g,w,A,j,d),_u(8,w);break;case 23:break;case 22:var ft=w.stateNode;w.memoizedState!==null?ft._visibility&2?Ma(g,w,A,j,d):Eu(g,w):(ft._visibility|=2,Ma(g,w,A,j,d)),d&&it&2048&&ip(w.alternate,w);break;case 24:Ma(g,w,A,j,d),d&&it&2048&&sp(w.alternate,w);break;default:Ma(g,w,A,j,d)}s=s.sibling}}function Eu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=r,u=s,d=u.flags;switch(u.tag){case 22:Eu(a,u),d&2048&&ip(u.alternate,u);break;case 24:Eu(a,u),d&2048&&sp(u.alternate,u);break;default:Eu(a,u)}s=s.sibling}}var Tu=8192;function ka(r){if(r.subtreeFlags&Tu)for(r=r.child;r!==null;)W0(r),r=r.sibling}function W0(r){switch(r.tag){case 26:ka(r),r.flags&Tu&&r.memoizedState!==null&&zx(Dr,r.memoizedState,r.memoizedProps);break;case 5:ka(r);break;case 3:case 4:var s=Dr;Dr=Kf(r.stateNode.containerInfo),ka(r),Dr=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Tu,Tu=16777216,ka(r),Tu=s):ka(r));break;default:ka(r)}}function Z0(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function wu(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];rn=u,tE(u,r)}Z0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)J0(r),r=r.sibling}function J0(r){switch(r.tag){case 0:case 11:case 15:wu(r),r.flags&2048&&hs(9,r,r.return);break;case 3:wu(r);break;case 12:wu(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Pf(r)):wu(r);break;default:wu(r)}}function Pf(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];rn=u,tE(u,r)}Z0(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:hs(8,s,s.return),Pf(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Pf(s));break;default:Pf(s)}r=r.sibling}}function tE(r,s){for(;rn!==null;){var a=rn;switch(a.tag){case 0:case 11:case 15:hs(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:iu(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,rn=u;else t:for(a=r;rn!==null;){u=rn;var d=u.sibling,g=u.return;if($0(u),u===a){rn=null;break t}if(d!==null){d.return=g,rn=d;break t}rn=g}}}var nx={getCacheForType:function(r){var s=_n(Ge),a=s.data.get(r);return a===void 0&&(a=r(),s.data.set(r,a)),a}},rx=typeof WeakMap=="function"?WeakMap:Map,ie=0,pe=null,Gt=null,Zt=0,se=0,Wn=null,ps=!1,Va=!1,op=!1,Li=0,Ie=0,gs=0,Oo=0,ap=0,Tr=0,Pa=0,bu=null,Un=null,lp=!1,up=0,Lf=1/0,Uf=null,ys=null,hn=0,_s=null,La=null,Ua=0,cp=0,fp=null,eE=null,Su=0,hp=null;function Zn(){if((ie&2)!==0&&Zt!==0)return Zt&-Zt;if(D.T!==null){var r=Aa;return r!==0?r:vp()}return jr()}function nE(){Tr===0&&(Tr=(Zt&536870912)===0||ee?gi():536870912);var r=Er.current;return r!==null&&(r.flags|=32),Tr}function Jn(r,s,a){(r===pe&&(se===2||se===9)||r.cancelPendingCommit!==null)&&(Ba(r,0),vs(r,Zt,Tr,!1)),or(r,a),((ie&2)===0||r!==pe)&&(r===pe&&((ie&2)===0&&(Oo|=a),Ie===4&&vs(r,Zt,Tr,!1)),si(r))}function rE(r,s,a){if((ie&6)!==0)throw Error(i(327));var u=!a&&(s&124)===0&&(s&r.expiredLanes)===0||In(r,s),d=u?ox(r,s):pp(r,s,!0),g=u;do{if(d===0){Va&&!u&&vs(r,s,0,!1);break}else{if(a=r.current.alternate,g&&!ix(a)){d=pp(r,s,!1),g=!1;continue}if(d===2){if(g=s,r.errorRecoveryDisabledLanes&g)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;t:{var A=r;d=bu;var j=A.current.memoizedState.isDehydrated;if(j&&(Ba(A,w).flags|=256),w=pp(A,w,!1),w!==2){if(op&&!j){A.errorRecoveryDisabledLanes|=g,Oo|=g,d=4;break t}g=Un,Un=d,g!==null&&(Un===null?Un=g:Un.push.apply(Un,g))}d=w}if(g=!1,d!==2)continue}}if(d===1){Ba(r,0),vs(r,s,0,!0);break}t:{switch(u=r,g=d,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:vs(u,s,Tr,!ps);break t;case 2:Un=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=up+300-Pt(),10<d)){if(vs(u,s,Tr,!ps),ln(u,0,!0)!==0)break t;u.timeoutHandle=OE(iE.bind(null,u,a,Un,Uf,lp,s,Tr,Oo,Pa,ps,g,2,-0,0),d);break t}iE(u,a,Un,Uf,lp,s,Tr,Oo,Pa,ps,g,0,-0,0)}}break}while(!0);si(r)}function iE(r,s,a,u,d,g,w,A,j,it,ft,dt,ot,at){if(r.timeoutHandle=-1,dt=s.subtreeFlags,(dt&8192||(dt&16785408)===16785408)&&(Du={stylesheets:null,count:0,unsuspend:Bx},W0(s),dt=Hx(),dt!==null)){r.cancelPendingCommit=dt(fE.bind(null,r,s,g,a,u,d,w,A,j,ft,1,ot,at)),vs(r,g,w,!it);return}fE(r,s,g,a,u,d,w,A,j)}function ix(r){for(var s=r;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var d=a[u],g=d.getSnapshot;d=d.value;try{if(!Yn(g(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function vs(r,s,a,u){s&=~ap,s&=~Oo,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var d=s;0<d;){var g=31-we(d),w=1<<g;u[g]=-1,d&=~w}a!==0&&ar(r,a,s)}function Bf(){return(ie&6)===0?(Au(0),!1):!0}function dp(){if(Gt!==null){if(se===0)var r=Gt.return;else r=Gt,Ii=Ro=null,Nm(r),Da=null,pu=0,r=Gt;for(;r!==null;)L0(r.alternate,r),r=r.return;Gt=null}}function Ba(r,s){var a=r.timeoutHandle;a!==-1&&(r.timeoutHandle=-1,wx(a)),a=r.cancelPendingCommit,a!==null&&(r.cancelPendingCommit=null,a()),dp(),pe=r,Gt=a=Ri(r.current,null),Zt=s,se=0,Wn=null,ps=!1,Va=In(r,s),op=!1,Pa=Tr=ap=Oo=gs=Ie=0,Un=bu=null,lp=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var d=31-we(u),g=1<<d;s|=r[d],u&=~g}return Li=s,af(),a}function sE(r,s){jt=null,D.H=Rf,s===ou||s===gf?(s=wv(),se=3):s===vv?(s=wv(),se=4):se=s===b0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Wn=s,Gt===null&&(Ie=1,Df(r,gr(s,r.current)))}function oE(){var r=D.H;return D.H=Rf,r===null?Rf:r}function aE(){var r=D.A;return D.A=nx,r}function mp(){Ie=4,ps||(Zt&4194048)!==Zt&&Er.current!==null||(Va=!0),(gs&134217727)===0&&(Oo&134217727)===0||pe===null||vs(pe,Zt,Tr,!1)}function pp(r,s,a){var u=ie;ie|=2;var d=oE(),g=aE();(pe!==r||Zt!==s)&&(Uf=null,Ba(r,s)),s=!1;var w=Ie;t:do try{if(se!==0&&Gt!==null){var A=Gt,j=Wn;switch(se){case 8:dp(),w=6;break t;case 3:case 2:case 9:case 6:Er.current===null&&(s=!0);var it=se;if(se=0,Wn=null,za(r,A,j,it),a&&Va){w=0;break t}break;default:it=se,se=0,Wn=null,za(r,A,j,it)}}sx(),w=Ie;break}catch(ft){sE(r,ft)}while(!0);return s&&r.shellSuspendCounter++,Ii=Ro=null,ie=u,D.H=d,D.A=g,Gt===null&&(pe=null,Zt=0,af()),w}function sx(){for(;Gt!==null;)lE(Gt)}function ox(r,s){var a=ie;ie|=2;var u=oE(),d=aE();pe!==r||Zt!==s?(Uf=null,Lf=Pt()+500,Ba(r,s)):Va=In(r,s);t:do try{if(se!==0&&Gt!==null){s=Gt;var g=Wn;e:switch(se){case 1:se=0,Wn=null,za(r,s,g,1);break;case 2:case 9:if(Ev(g)){se=0,Wn=null,uE(s);break}s=function(){se!==2&&se!==9||pe!==r||(se=7),si(r)},g.then(s,s);break t;case 3:se=7;break t;case 4:se=5;break t;case 7:Ev(g)?(se=0,Wn=null,uE(s)):(se=0,Wn=null,za(r,s,g,7));break;case 5:var w=null;switch(Gt.tag){case 26:w=Gt.memoizedState;case 5:case 27:var A=Gt;if(!w||qE(w)){se=0,Wn=null;var j=A.sibling;if(j!==null)Gt=j;else{var it=A.return;it!==null?(Gt=it,zf(it)):Gt=null}break e}}se=0,Wn=null,za(r,s,g,5);break;case 6:se=0,Wn=null,za(r,s,g,6);break;case 8:dp(),Ie=6;break t;default:throw Error(i(462))}}ax();break}catch(ft){sE(r,ft)}while(!0);return Ii=Ro=null,D.H=u,D.A=d,ie=a,Gt!==null?0:(pe=null,Zt=0,af(),Ie)}function ax(){for(;Gt!==null&&!Nt();)lE(Gt)}function lE(r){var s=V0(r.alternate,r,Li);r.memoizedProps=r.pendingProps,s===null?zf(r):Gt=s}function uE(r){var s=r,a=s.alternate;switch(s.tag){case 15:case 0:s=I0(a,s,s.pendingProps,s.type,void 0,Zt);break;case 11:s=I0(a,s,s.pendingProps,s.type.render,s.ref,Zt);break;case 5:Nm(s);default:L0(a,s),s=Gt=cv(s,Li),s=V0(a,s,Li)}r.memoizedProps=r.pendingProps,s===null?zf(r):Gt=s}function za(r,s,a,u){Ii=Ro=null,Nm(s),Da=null,pu=0;var d=s.return;try{if(QC(r,d,s,a,Zt)){Ie=1,Df(r,gr(a,r.current)),Gt=null;return}}catch(g){if(d!==null)throw Gt=d,g;Ie=1,Df(r,gr(a,r.current)),Gt=null;return}s.flags&32768?(ee||u===1?r=!0:Va||(Zt&536870912)!==0?r=!1:(ps=r=!0,(u===2||u===9||u===3||u===6)&&(u=Er.current,u!==null&&u.tag===13&&(u.flags|=16384))),cE(s,r)):zf(s)}function zf(r){var s=r;do{if((s.flags&32768)!==0){cE(s,ps);return}r=s.return;var a=ZC(s.alternate,s,Li);if(a!==null){Gt=a;return}if(s=s.sibling,s!==null){Gt=s;return}Gt=s=r}while(s!==null);Ie===0&&(Ie=5)}function cE(r,s){do{var a=JC(r.alternate,r);if(a!==null){a.flags&=32767,Gt=a;return}if(a=r.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(r=r.sibling,r!==null)){Gt=r;return}Gt=r=a}while(r!==null);Ie=6,Gt=null}function fE(r,s,a,u,d,g,w,A,j){r.cancelPendingCommit=null;do Hf();while(hn!==0);if((ie&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=sm,qn(r,a,g,w,A,j),r===pe&&(Gt=pe=null,Zt=0),La=s,_s=r,Ua=a,cp=g,fp=d,eE=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,fx(An,function(){return gE(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=D.T,D.T=null,d=$.p,$.p=2,w=ie,ie|=4;try{tx(r,s,a)}finally{ie=w,$.p=d,D.T=u}}hn=1,hE(),dE(),mE()}}function hE(){if(hn===1){hn=0;var r=_s,s=La,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=D.T,D.T=null;var u=$.p;$.p=2;var d=ie;ie|=4;try{K0(s,r);var g=Cp,w=tv(r.containerInfo),A=g.focusedElem,j=g.selectionRange;if(w!==A&&A&&A.ownerDocument&&J_(A.ownerDocument.documentElement,A)){if(j!==null&&tm(A)){var it=j.start,ft=j.end;if(ft===void 0&&(ft=it),"selectionStart"in A)A.selectionStart=it,A.selectionEnd=Math.min(ft,A.value.length);else{var dt=A.ownerDocument||document,ot=dt&&dt.defaultView||window;if(ot.getSelection){var at=ot.getSelection(),kt=A.textContent.length,It=Math.min(j.start,kt),ue=j.end===void 0?It:Math.min(j.end,kt);!at.extend&&It>ue&&(w=ue,ue=It,It=w);var J=Z_(A,It),K=Z_(A,ue);if(J&&K&&(at.rangeCount!==1||at.anchorNode!==J.node||at.anchorOffset!==J.offset||at.focusNode!==K.node||at.focusOffset!==K.offset)){var rt=dt.createRange();rt.setStart(J.node,J.offset),at.removeAllRanges(),It>ue?(at.addRange(rt),at.extend(K.node,K.offset)):(rt.setEnd(K.node,K.offset),at.addRange(rt))}}}}for(dt=[],at=A;at=at.parentNode;)at.nodeType===1&&dt.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<dt.length;A++){var ht=dt[A];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}Jf=!!Rp,Cp=Rp=null}finally{ie=d,$.p=u,D.T=a}}r.current=s,hn=2}}function dE(){if(hn===2){hn=0;var r=_s,s=La,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=D.T,D.T=null;var u=$.p;$.p=2;var d=ie;ie|=4;try{q0(r,s.alternate,s)}finally{ie=d,$.p=u,D.T=a}}hn=3}}function mE(){if(hn===4||hn===3){hn=0,Pe();var r=_s,s=La,a=Ua,u=eE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?hn=5:(hn=0,La=_s=null,pE(r,r.pendingLanes));var d=r.pendingLanes;if(d===0&&(ys=null),ts(a),s=s.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(wt,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=D.T,d=$.p,$.p=2,D.T=null;try{for(var g=r.onRecoverableError,w=0;w<u.length;w++){var A=u[w];g(A.value,{componentStack:A.stack})}}finally{D.T=s,$.p=d}}(Ua&3)!==0&&Hf(),si(r),d=r.pendingLanes,(a&4194090)!==0&&(d&42)!==0?r===hp?Su++:(Su=0,hp=r):Su=0,Au(0)}}function pE(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,iu(s)))}function Hf(r){return hE(),dE(),mE(),gE()}function gE(){if(hn!==5)return!1;var r=_s,s=cp;cp=0;var a=ts(Ua),u=D.T,d=$.p;try{$.p=32>a?32:a,D.T=null,a=fp,fp=null;var g=_s,w=Ua;if(hn=0,La=_s=null,Ua=0,(ie&6)!==0)throw Error(i(331));var A=ie;if(ie|=4,J0(g.current),Q0(g,g.current,w,a),ie=A,Au(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(wt,g)}catch{}return!0}finally{$.p=d,D.T=u,pE(r,s)}}function yE(r,s,a){s=gr(a,s),s=qm(r.stateNode,s,2),r=ls(r,s,2),r!==null&&(or(r,2),si(r))}function he(r,s,a){if(r.tag===3)yE(r,r,a);else for(;s!==null;){if(s.tag===3){yE(s,r,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ys===null||!ys.has(u))){r=gr(a,r),a=T0(2),u=ls(s,a,2),u!==null&&(w0(a,u,s,r),or(u,2),si(u));break}}s=s.return}}function gp(r,s,a){var u=r.pingCache;if(u===null){u=r.pingCache=new rx;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(a)||(op=!0,d.add(a),r=lx.bind(null,r,s,a),s.then(r,r))}function lx(r,s,a){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&a,r.warmLanes&=~a,pe===r&&(Zt&a)===a&&(Ie===4||Ie===3&&(Zt&62914560)===Zt&&300>Pt()-up?(ie&2)===0&&Ba(r,0):ap|=a,Pa===Zt&&(Pa=0)),si(r)}function _E(r,s){s===0&&(s=Rr()),r=Ta(r,s),r!==null&&(or(r,s),si(r))}function ux(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),_E(r,a)}function cx(r,s){var a=0;switch(r.tag){case 13:var u=r.stateNode,d=r.memoizedState;d!==null&&(a=d.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),_E(r,a)}function fx(r,s){return ye(r,s)}var jf=null,Ha=null,yp=!1,Ff=!1,_p=!1,Mo=0;function si(r){r!==Ha&&r.next===null&&(Ha===null?jf=Ha=r:Ha=Ha.next=r),Ff=!0,yp||(yp=!0,dx())}function Au(r,s){if(!_p&&Ff){_p=!0;do for(var a=!1,u=jf;u!==null;){if(r!==0){var d=u.pendingLanes;if(d===0)var g=0;else{var w=u.suspendedLanes,A=u.pingedLanes;g=(1<<31-we(42|r)+1)-1,g&=d&~(w&~A),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,wE(u,g))}else g=Zt,g=ln(u,u===pe?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||In(u,g)||(a=!0,wE(u,g));u=u.next}while(a);_p=!1}}function hx(){vE()}function vE(){Ff=yp=!1;var r=0;Mo!==0&&(Tx()&&(r=Mo),Mo=0);for(var s=Pt(),a=null,u=jf;u!==null;){var d=u.next,g=EE(u,s);g===0?(u.next=null,a===null?jf=d:a.next=d,d===null&&(Ha=a)):(a=u,(r!==0||(g&3)!==0)&&(Ff=!0)),u=d}Au(r)}function EE(r,s){for(var a=r.suspendedLanes,u=r.pingedLanes,d=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var w=31-we(g),A=1<<w,j=d[w];j===-1?((A&a)===0||(A&u)!==0)&&(d[w]=pi(A,s)):j<=s&&(r.expiredLanes|=A),g&=~A}if(s=pe,a=Zt,a=ln(r,r===s?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,a===0||r===s&&(se===2||se===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&fe(u),r.callbackNode=null,r.callbackPriority=0;if((a&3)===0||In(r,a)){if(s=a&-a,s===r.callbackPriority)return s;switch(u!==null&&fe(u),ts(a)){case 2:case 8:a=yn;break;case 32:a=An;break;case 268435456:a=Rn;break;default:a=An}return u=TE.bind(null,r),a=ye(a,u),r.callbackPriority=s,r.callbackNode=a,s}return u!==null&&u!==null&&fe(u),r.callbackPriority=2,r.callbackNode=null,2}function TE(r,s){if(hn!==0&&hn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var a=r.callbackNode;if(Hf()&&r.callbackNode!==a)return null;var u=Zt;return u=ln(r,r===pe?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(rE(r,u,s),EE(r,Pt()),r.callbackNode!=null&&r.callbackNode===a?TE.bind(null,r):null)}function wE(r,s){if(Hf())return null;rE(r,s,!0)}function dx(){bx(function(){(ie&6)!==0?ye(De,hx):vE()})}function vp(){return Mo===0&&(Mo=gi()),Mo}function bE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ua(""+r)}function SE(r,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,r.id&&a.setAttribute("form",r.id),s.parentNode.insertBefore(a,s),r=new FormData(r),a.parentNode.removeChild(a),r}function mx(r,s,a,u,d){if(s==="submit"&&a&&a.stateNode===d){var g=bE((d[Ce]||null).action),w=u.submitter;w&&(s=(s=w[Ce]||null)?bE(s.formAction):w.getAttribute("formAction"),s!==null&&(g=s,w=null));var A=new ca("action","action",null,u,d);r.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Mo!==0){var j=w?SE(d,w):new FormData(d);Bm(a,{pending:!0,data:j,method:d.method,action:g},null,j)}}else typeof g=="function"&&(A.preventDefault(),j=w?SE(d,w):new FormData(d),Bm(a,{pending:!0,data:j,method:d.method,action:g},g,j))},currentTarget:d}]})}}for(var Ep=0;Ep<im.length;Ep++){var Tp=im[Ep],px=Tp.toLowerCase(),gx=Tp[0].toUpperCase()+Tp.slice(1);Nr(px,"on"+gx)}Nr(rv,"onAnimationEnd"),Nr(iv,"onAnimationIteration"),Nr(sv,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(MC,"onTransitionRun"),Nr(kC,"onTransitionStart"),Nr(VC,"onTransitionCancel"),Nr(ov,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),$n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$n("onBeforeInput",["compositionend","keypress","textInput","paste"]),$n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ru));function AE(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var u=r[a],d=u.event;u=u.listeners;t:{var g=void 0;if(s)for(var w=u.length-1;0<=w;w--){var A=u[w],j=A.instance,it=A.currentTarget;if(A=A.listener,j!==g&&d.isPropagationStopped())break t;g=A,d.currentTarget=it;try{g(d)}catch(ft){Nf(ft)}d.currentTarget=null,g=j}else for(w=0;w<u.length;w++){if(A=u[w],j=A.instance,it=A.currentTarget,A=A.listener,j!==g&&d.isPropagationStopped())break t;g=A,d.currentTarget=it;try{g(d)}catch(ft){Nf(ft)}d.currentTarget=null,g=j}}}}function Yt(r,s){var a=s[io];a===void 0&&(a=s[io]=new Set);var u=r+"__bubble";a.has(u)||(RE(s,r,2,!1),a.add(u))}function wp(r,s,a){var u=0;s&&(u|=4),RE(a,r,u,s)}var qf="_reactListening"+Math.random().toString(36).slice(2);function bp(r){if(!r[qf]){r[qf]=!0,so.forEach(function(a){a!=="selectionchange"&&(yx.has(a)||wp(a,!1,r),wp(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[qf]||(s[qf]=!0,wp("selectionchange",!1,s))}}function RE(r,s,a,u){switch(QE(s)){case 2:var d=qx;break;case 8:d=$x;break;default:d=Lp}a=d.bind(null,s,a,r),d=void 0,!mr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?r.addEventListener(s,a,{capture:!0,passive:d}):r.addEventListener(s,a,!0):d!==void 0?r.addEventListener(s,a,{passive:d}):r.addEventListener(s,a,!1)}function Sp(r,s,a,u,d){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var A=u.stateNode.containerInfo;if(A===d)break;if(w===4)for(w=u.return;w!==null;){var j=w.tag;if((j===3||j===4)&&w.stateNode.containerInfo===d)return;w=w.return}for(;A!==null;){if(w=lr(A),w===null)return;if(j=w.tag,j===5||j===6||j===26||j===27){u=g=w;continue t}A=A.parentNode}}u=u.return}$c(function(){var it=g,ft=dr(a),dt=[];t:{var ot=av.get(r);if(ot!==void 0){var at=ca,kt=r;switch(r){case"keypress":if(Qr(a)===0)break t;case"keydown":case"keyup":at=ga;break;case"focusin":kt="focus",at=da;break;case"focusout":kt="blur",at=da;break;case"beforeblur":case"afterblur":at=da;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=Qd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=Jc;break;case rv:case iv:case sv:at=ma;break;case ov:at=ef;break;case"scroll":case"scrollend":at=Gc;break;case"wheel":at=ya;break;case"copy":case"cut":case"paste":at=pa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=Ql;break;case"toggle":case"beforetoggle":at=rf}var It=(s&4)!==0,ue=!It&&(r==="scroll"||r==="scrollend"),J=It?ot!==null?ot+"Capture":null:ot;It=[];for(var K=it,rt;K!==null;){var ht=K;if(rt=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||rt===null||J===null||(ht=fo(K,J),ht!=null&&It.push(Cu(K,ht,rt))),ue)break;K=K.return}0<It.length&&(ot=new at(ot,kt,null,a,ft),dt.push({event:ot,listeners:It}))}}if((s&7)===0){t:{if(ot=r==="mouseover"||r==="pointerover",at=r==="mouseout"||r==="pointerout",ot&&a!==Ei&&(kt=a.relatedTarget||a.fromElement)&&(lr(kt)||kt[Vn]))break t;if((at||ot)&&(ot=ft.window===ft?ft:(ot=ft.ownerDocument)?ot.defaultView||ot.parentWindow:window,at?(kt=a.relatedTarget||a.toElement,at=it,kt=kt?lr(kt):null,kt!==null&&(ue=l(kt),It=kt.tag,kt!==ue||It!==5&&It!==27&&It!==6)&&(kt=null)):(at=null,kt=it),at!==kt)){if(It=pr,ht="onMouseLeave",J="onMouseEnter",K="mouse",(r==="pointerout"||r==="pointerover")&&(It=Ql,ht="onPointerLeave",J="onPointerEnter",K="pointer"),ue=at==null?ot:cr(at),rt=kt==null?ot:cr(kt),ot=new It(ht,K+"leave",at,a,ft),ot.target=ue,ot.relatedTarget=rt,ht=null,lr(ft)===it&&(It=new It(J,K+"enter",kt,a,ft),It.target=rt,It.relatedTarget=ue,ht=It),ue=ht,at&&kt)e:{for(It=at,J=kt,K=0,rt=It;rt;rt=ja(rt))K++;for(rt=0,ht=J;ht;ht=ja(ht))rt++;for(;0<K-rt;)It=ja(It),K--;for(;0<rt-K;)J=ja(J),rt--;for(;K--;){if(It===J||J!==null&&It===J.alternate)break e;It=ja(It),J=ja(J)}It=null}else It=null;at!==null&&CE(dt,ot,at,It,!1),kt!==null&&ue!==null&&CE(dt,ue,kt,It,!0)}}t:{if(ot=it?cr(it):window,at=ot.nodeName&&ot.nodeName.toLowerCase(),at==="select"||at==="input"&&ot.type==="file")var Tt=G_;else if($e(ot))if(Y_)Tt=NC;else{Tt=xC;var qt=CC}else at=ot.nodeName,!at||at.toLowerCase()!=="input"||ot.type!=="checkbox"&&ot.type!=="radio"?it&&Fl(it.elementType)&&(Tt=G_):Tt=IC;if(Tt&&(Tt=Tt(r,it))){Ai(dt,Tt,a,ft);break t}qt&&qt(r,ot,it),r==="focusout"&&it&&ot.type==="number"&&it.memoizedProps.value!=null&&rs(ot,"number",ot.value)}switch(qt=it?cr(it):window,r){case"focusin":($e(qt)||qt.contentEditable==="true")&&(_a=qt,em=it,Jl=null);break;case"focusout":Jl=em=_a=null;break;case"mousedown":nm=!0;break;case"contextmenu":case"mouseup":case"dragend":nm=!1,ev(dt,a,ft);break;case"selectionchange":if(OC)break;case"keydown":case"keyup":ev(dt,a,ft)}var Rt;if(Jr)t:{switch(r){case"compositionstart":var Dt="onCompositionStart";break t;case"compositionend":Dt="onCompositionEnd";break t;case"compositionupdate":Dt="onCompositionUpdate";break t}Dt=void 0}else Qt?lt(r,a)&&(Dt="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Dt="onCompositionStart");Dt&&(T&&a.locale!=="ko"&&(Qt||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&Qt&&(Rt=$l()):(Xr=ft,is="value"in Xr?Xr.value:Xr.textContent,Qt=!0)),qt=$f(it,Dt),0<qt.length&&(Dt=new Kl(Dt,r,null,a,ft),dt.push({event:Dt,listeners:qt}),Rt?Dt.data=Rt:(Rt=yt(a),Rt!==null&&(Dt.data=Rt)))),(Rt=_?qe(r,a):Wt(r,a))&&(Dt=$f(it,"onBeforeInput"),0<Dt.length&&(qt=new Kl("onBeforeInput","beforeinput",null,a,ft),dt.push({event:qt,listeners:Dt}),qt.data=Rt)),mx(dt,r,it,a,ft)}AE(dt,s)})}function Cu(r,s,a){return{instance:r,listener:s,currentTarget:a}}function $f(r,s){for(var a=s+"Capture",u=[];r!==null;){var d=r,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=fo(r,a),d!=null&&u.unshift(Cu(r,d,g)),d=fo(r,s),d!=null&&u.push(Cu(r,d,g))),r.tag===3)return u;r=r.return}return[]}function ja(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function CE(r,s,a,u,d){for(var g=s._reactName,w=[];a!==null&&a!==u;){var A=a,j=A.alternate,it=A.stateNode;if(A=A.tag,j!==null&&j===u)break;A!==5&&A!==26&&A!==27||it===null||(j=it,d?(it=fo(a,g),it!=null&&w.unshift(Cu(a,it,j))):d||(it=fo(a,g),it!=null&&w.push(Cu(a,it,j)))),a=a.return}w.length!==0&&r.push({event:s,listeners:w})}var _x=/\r\n?/g,vx=/\u0000|\uFFFD/g;function xE(r){return(typeof r=="string"?r:""+r).replace(_x,`
`).replace(vx,"")}function IE(r,s){return s=xE(s),xE(r)===s}function Gf(){}function le(r,s,a,u,d,g){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||hr(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&hr(r,""+u);break;case"className":fr(r,"class",u);break;case"tabIndex":fr(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":fr(r,a,u);break;case"style":jl(r,u,g);break;case"data":if(s!=="object"){fr(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){r.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=ua(""+u),r.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(s!=="input"&&le(r,s,"name",d.name,d,null),le(r,s,"formEncType",d.formEncType,d,null),le(r,s,"formMethod",d.formMethod,d,null),le(r,s,"formTarget",d.formTarget,d,null)):(le(r,s,"encType",d.encType,d,null),le(r,s,"method",d.method,d,null),le(r,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=ua(""+u),r.setAttribute(a,u);break;case"onClick":u!=null&&(r.onclick=Gf);break;case"onScroll":u!=null&&Yt("scroll",r);break;case"onScrollEnd":u!=null&&Yt("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(a=u.__html,a!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=a}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}a=ua(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""+u):r.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""):r.removeAttribute(a);break;case"capture":case"download":u===!0?r.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,u):r.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(a,u):r.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(a):r.setAttribute(a,u);break;case"popover":Yt("beforetoggle",r),Yt("toggle",r),$r(r,"popover",u);break;case"xlinkActuate":Fe(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Fe(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Fe(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Fe(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Fe(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Fe(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Fe(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Fe(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Fe(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":$r(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Kd.get(a)||a,$r(r,a,u))}}function Ap(r,s,a,u,d,g){switch(a){case"style":jl(r,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(a=u.__html,a!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=a}}break;case"children":typeof u=="string"?hr(r,u):(typeof u=="number"||typeof u=="bigint")&&hr(r,""+u);break;case"onScroll":u!=null&&Yt("scroll",r);break;case"onScrollEnd":u!=null&&Yt("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Gf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!es.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),g=r[Ce]||null,g=g!=null?g[a]:null,typeof g=="function"&&r.removeEventListener(s,g,d),typeof u=="function")){typeof g!="function"&&g!==null&&(a in r?r[a]=null:r.hasAttribute(a)&&r.removeAttribute(a)),r.addEventListener(s,u,d);break t}a in r?r[a]=u:u===!0?r.setAttribute(a,""):$r(r,a,u)}}}function dn(r,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",r),Yt("load",r);var u=!1,d=!1,g;for(g in a)if(a.hasOwnProperty(g)){var w=a[g];if(w!=null)switch(g){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:le(r,s,g,w,a,null)}}d&&le(r,s,"srcSet",a.srcSet,a,null),u&&le(r,s,"src",a.src,a,null);return;case"input":Yt("invalid",r);var A=g=w=d=null,j=null,it=null;for(u in a)if(a.hasOwnProperty(u)){var ft=a[u];if(ft!=null)switch(u){case"name":d=ft;break;case"type":w=ft;break;case"checked":j=ft;break;case"defaultChecked":it=ft;break;case"value":g=ft;break;case"defaultValue":A=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(i(137,s));break;default:le(r,s,u,ft,a,null)}}lo(r,g,A,j,it,w,d,!1),la(r);return;case"select":Yt("invalid",r),u=w=g=null;for(d in a)if(a.hasOwnProperty(d)&&(A=a[d],A!=null))switch(d){case"value":g=A;break;case"defaultValue":w=A;break;case"multiple":u=A;default:le(r,s,d,A,a,null)}s=g,a=w,r.multiple=!!u,s!=null?vi(r,!!u,s,!1):a!=null&&vi(r,!!u,a,!0);return;case"textarea":Yt("invalid",r),g=d=u=null;for(w in a)if(a.hasOwnProperty(w)&&(A=a[w],A!=null))switch(w){case"value":u=A;break;case"defaultValue":d=A;break;case"children":g=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:le(r,s,w,A,a,null)}uo(r,u,d,g),la(r);return;case"option":for(j in a)if(a.hasOwnProperty(j)&&(u=a[j],u!=null))switch(j){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:le(r,s,j,u,a,null)}return;case"dialog":Yt("beforetoggle",r),Yt("toggle",r),Yt("cancel",r),Yt("close",r);break;case"iframe":case"object":Yt("load",r);break;case"video":case"audio":for(u=0;u<Ru.length;u++)Yt(Ru[u],r);break;case"image":Yt("error",r),Yt("load",r);break;case"details":Yt("toggle",r);break;case"embed":case"source":case"link":Yt("error",r),Yt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(it in a)if(a.hasOwnProperty(it)&&(u=a[it],u!=null))switch(it){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:le(r,s,it,u,a,null)}return;default:if(Fl(s)){for(ft in a)a.hasOwnProperty(ft)&&(u=a[ft],u!==void 0&&Ap(r,s,ft,u,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(u=a[A],u!=null&&le(r,s,A,u,a,null))}function Ex(r,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,w=null,A=null,j=null,it=null,ft=null;for(at in a){var dt=a[at];if(a.hasOwnProperty(at)&&dt!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":j=dt;default:u.hasOwnProperty(at)||le(r,s,at,null,u,dt)}}for(var ot in u){var at=u[ot];if(dt=a[ot],u.hasOwnProperty(ot)&&(at!=null||dt!=null))switch(ot){case"type":g=at;break;case"name":d=at;break;case"checked":it=at;break;case"defaultChecked":ft=at;break;case"value":w=at;break;case"defaultValue":A=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(i(137,s));break;default:at!==dt&&le(r,s,ot,at,u,dt)}}Gn(r,w,A,j,it,ft,g,d);return;case"select":at=w=A=ot=null;for(g in a)if(j=a[g],a.hasOwnProperty(g)&&j!=null)switch(g){case"value":break;case"multiple":at=j;default:u.hasOwnProperty(g)||le(r,s,g,null,u,j)}for(d in u)if(g=u[d],j=a[d],u.hasOwnProperty(d)&&(g!=null||j!=null))switch(d){case"value":ot=g;break;case"defaultValue":A=g;break;case"multiple":w=g;default:g!==j&&le(r,s,d,g,u,j)}s=A,a=w,u=at,ot!=null?vi(r,!!a,ot,!1):!!u!=!!a&&(s!=null?vi(r,!!a,s,!0):vi(r,!!a,a?[]:"",!1));return;case"textarea":at=ot=null;for(A in a)if(d=a[A],a.hasOwnProperty(A)&&d!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:le(r,s,A,null,u,d)}for(w in u)if(d=u[w],g=a[w],u.hasOwnProperty(w)&&(d!=null||g!=null))switch(w){case"value":ot=d;break;case"defaultValue":at=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==g&&le(r,s,w,d,u,g)}oe(r,ot,at);return;case"option":for(var kt in a)if(ot=a[kt],a.hasOwnProperty(kt)&&ot!=null&&!u.hasOwnProperty(kt))switch(kt){case"selected":r.selected=!1;break;default:le(r,s,kt,null,u,ot)}for(j in u)if(ot=u[j],at=a[j],u.hasOwnProperty(j)&&ot!==at&&(ot!=null||at!=null))switch(j){case"selected":r.selected=ot&&typeof ot!="function"&&typeof ot!="symbol";break;default:le(r,s,j,ot,u,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var It in a)ot=a[It],a.hasOwnProperty(It)&&ot!=null&&!u.hasOwnProperty(It)&&le(r,s,It,null,u,ot);for(it in u)if(ot=u[it],at=a[it],u.hasOwnProperty(it)&&ot!==at&&(ot!=null||at!=null))switch(it){case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(i(137,s));break;default:le(r,s,it,ot,u,at)}return;default:if(Fl(s)){for(var ue in a)ot=a[ue],a.hasOwnProperty(ue)&&ot!==void 0&&!u.hasOwnProperty(ue)&&Ap(r,s,ue,void 0,u,ot);for(ft in u)ot=u[ft],at=a[ft],!u.hasOwnProperty(ft)||ot===at||ot===void 0&&at===void 0||Ap(r,s,ft,ot,u,at);return}}for(var J in a)ot=a[J],a.hasOwnProperty(J)&&ot!=null&&!u.hasOwnProperty(J)&&le(r,s,J,null,u,ot);for(dt in u)ot=u[dt],at=a[dt],!u.hasOwnProperty(dt)||ot===at||ot==null&&at==null||le(r,s,dt,ot,u,at)}var Rp=null,Cp=null;function Yf(r){return r.nodeType===9?r:r.ownerDocument}function NE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function DE(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function xp(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ip=null;function Tx(){var r=window.event;return r&&r.type==="popstate"?r===Ip?!1:(Ip=r,!0):(Ip=null,!1)}var OE=typeof setTimeout=="function"?setTimeout:void 0,wx=typeof clearTimeout=="function"?clearTimeout:void 0,ME=typeof Promise=="function"?Promise:void 0,bx=typeof queueMicrotask=="function"?queueMicrotask:typeof ME<"u"?function(r){return ME.resolve(null).then(r).catch(Sx)}:OE;function Sx(r){setTimeout(function(){throw r})}function Es(r){return r==="head"}function kE(r,s){var a=s,u=0,d=0;do{var g=a.nextSibling;if(r.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(0<u&&8>u){a=u;var w=r.ownerDocument;if(a&1&&xu(w.documentElement),a&2&&xu(w.body),a&4)for(a=w.head,xu(a),w=a.firstChild;w;){var A=w.nextSibling,j=w.nodeName;w[yi]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&w.rel.toLowerCase()==="stylesheet"||a.removeChild(w),w=A}}if(d===0){r.removeChild(g),Pu(s);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:u=a.charCodeAt(0)-48;else u=0;a=g}while(a);Pu(s)}function Np(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Np(a),qr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}r.removeChild(a)}}function Ax(r,s,a,u){for(;r.nodeType===1;){var d=a;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[yi])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==d.rel||r.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||r.getAttribute("title")!==(d.title==null?null:d.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(d.src==null?null:d.src)||r.getAttribute("type")!==(d.type==null?null:d.type)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=Or(r.nextSibling),r===null)break}return null}function Rx(r,s,a){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=Or(r.nextSibling),r===null))return null;return r}function Dp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function Cx(r,s){var a=r.ownerDocument;if(r.data!=="$?"||a.readyState==="complete")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Or(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Op=null;function VE(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}function PE(r,s,a){switch(s=Yf(a),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function xu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);qr(r)}var wr=new Map,LE=new Set;function Kf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Ui=$.d;$.d={f:xx,r:Ix,D:Nx,C:Dx,L:Ox,m:Mx,X:Vx,S:kx,M:Px};function xx(){var r=Ui.f(),s=Bf();return r||s}function Ix(r){var s=ur(r);s!==null&&s.tag===5&&s.type==="form"?r0(s):Ui.r(r)}var Fa=typeof document>"u"?null:document;function UE(r,s,a){var u=Fa;if(u&&typeof s=="string"&&s){var d=Ue(s);d='link[rel="'+r+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),LE.has(d)||(LE.add(d),r={rel:r,crossOrigin:a,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),dn(s,"link",r),be(s),u.head.appendChild(s)))}}function Nx(r){Ui.D(r),UE("dns-prefetch",r,null)}function Dx(r,s){Ui.C(r,s),UE("preconnect",r,s)}function Ox(r,s,a){Ui.L(r,s,a);var u=Fa;if(u&&r&&s){var d='link[rel="preload"][as="'+Ue(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Ue(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Ue(a.imageSizes)+'"]')):d+='[href="'+Ue(r)+'"]';var g=d;switch(s){case"style":g=qa(r);break;case"script":g=$a(r)}wr.has(g)||(r=y({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:r,as:s},a),wr.set(g,r),u.querySelector(d)!==null||s==="style"&&u.querySelector(Iu(g))||s==="script"&&u.querySelector(Nu(g))||(s=u.createElement("link"),dn(s,"link",r),be(s),u.head.appendChild(s)))}}function Mx(r,s){Ui.m(r,s);var a=Fa;if(a&&r){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+Ue(u)+'"][href="'+Ue(r)+'"]',g=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=$a(r)}if(!wr.has(g)&&(r=y({rel:"modulepreload",href:r},s),wr.set(g,r),a.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Nu(g)))return}u=a.createElement("link"),dn(u,"link",r),be(u),a.head.appendChild(u)}}}function kx(r,s,a){Ui.S(r,s,a);var u=Fa;if(u&&r){var d=un(u).hoistableStyles,g=qa(r);s=s||"default";var w=d.get(g);if(!w){var A={loading:0,preload:null};if(w=u.querySelector(Iu(g)))A.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":s},a),(a=wr.get(g))&&Mp(r,a);var j=w=u.createElement("link");be(j),dn(j,"link",r),j._p=new Promise(function(it,ft){j.onload=it,j.onerror=ft}),j.addEventListener("load",function(){A.loading|=1}),j.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Xf(w,s,u)}w={type:"stylesheet",instance:w,count:1,state:A},d.set(g,w)}}}function Vx(r,s){Ui.X(r,s);var a=Fa;if(a&&r){var u=un(a).hoistableScripts,d=$a(r),g=u.get(d);g||(g=a.querySelector(Nu(d)),g||(r=y({src:r,async:!0},s),(s=wr.get(d))&&kp(r,s),g=a.createElement("script"),be(g),dn(g,"link",r),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(d,g))}}function Px(r,s){Ui.M(r,s);var a=Fa;if(a&&r){var u=un(a).hoistableScripts,d=$a(r),g=u.get(d);g||(g=a.querySelector(Nu(d)),g||(r=y({src:r,async:!0,type:"module"},s),(s=wr.get(d))&&kp(r,s),g=a.createElement("script"),be(g),dn(g,"link",r),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(d,g))}}function BE(r,s,a,u){var d=(d=_t.current)?Kf(d):null;if(!d)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=qa(a.href),a=un(d).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){r=qa(a.href);var g=un(d).hoistableStyles,w=g.get(r);if(w||(d=d.ownerDocument||d,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,w),(g=d.querySelector(Iu(r)))&&!g._p&&(w.instance=g,w.state.loading=5),wr.has(r)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},wr.set(r,a),g||Lx(d,r,a,w.state))),s&&u===null)throw Error(i(528,""));return w}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=$a(a),a=un(d).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function qa(r){return'href="'+Ue(r)+'"'}function Iu(r){return'link[rel="stylesheet"]['+r+"]"}function zE(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function Lx(r,s,a,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),dn(s,"link",a),be(s),r.head.appendChild(s))}function $a(r){return'[src="'+Ue(r)+'"]'}function Nu(r){return"script[async]"+r}function HE(r,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Ue(a.href)+'"]');if(u)return s.instance=u,be(u),u;var d=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),be(u),dn(u,"style",d),Xf(u,a.precedence,r),s.instance=u;case"stylesheet":d=qa(a.href);var g=r.querySelector(Iu(d));if(g)return s.state.loading|=4,s.instance=g,be(g),g;u=zE(a),(d=wr.get(d))&&Mp(u,d),g=(r.ownerDocument||r).createElement("link"),be(g);var w=g;return w._p=new Promise(function(A,j){w.onload=A,w.onerror=j}),dn(g,"link",u),s.state.loading|=4,Xf(g,a.precedence,r),s.instance=g;case"script":return g=$a(a.src),(d=r.querySelector(Nu(g)))?(s.instance=d,be(d),d):(u=a,(d=wr.get(g))&&(u=y({},a),kp(u,d)),r=r.ownerDocument||r,d=r.createElement("script"),be(d),dn(d,"link",u),r.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Xf(u,a.precedence,r));return s.instance}function Xf(r,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,g=d,w=0;w<u.length;w++){var A=u[w];if(A.dataset.precedence===s)g=A;else if(g!==d)break}g?g.parentNode.insertBefore(r,g.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(r,s.firstChild))}function Mp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function kp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Qf=null;function jE(r,s,a){if(Qf===null){var u=new Map,d=Qf=new Map;d.set(a,u)}else d=Qf,u=d.get(a),u||(u=new Map,d.set(a,u));if(u.has(r))return u;for(u.set(r,null),a=a.getElementsByTagName(r),d=0;d<a.length;d++){var g=a[d];if(!(g[yi]||g[Oe]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var w=g.getAttribute(s)||"";w=r+w;var A=u.get(w);A?A.push(g):u.set(w,[g])}}return u}function FE(r,s,a){r=r.ownerDocument||r,r.head.insertBefore(a,s==="title"?r.querySelector("head > title"):null)}function Ux(r,s,a){if(a===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function qE(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Du=null;function Bx(){}function zx(r,s,a){if(Du===null)throw Error(i(475));var u=Du;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=qa(a.href),g=r.querySelector(Iu(d));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=Wf.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=g,be(g);return}g=r.ownerDocument||r,a=zE(a),(d=wr.get(d))&&Mp(a,d),g=g.createElement("link"),be(g);var w=g;w._p=new Promise(function(A,j){w.onload=A,w.onerror=j}),dn(g,"link",a),s.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=Wf.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function Hx(){if(Du===null)throw Error(i(475));var r=Du;return r.stylesheets&&r.count===0&&Vp(r,r.stylesheets),0<r.count?function(s){var a=setTimeout(function(){if(r.stylesheets&&Vp(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(a)}}:null}function Wf(){if(this.count--,this.count===0){if(this.stylesheets)Vp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Zf=null;function Vp(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Zf=new Map,s.forEach(jx,r),Zf=null,Wf.call(r))}function jx(r,s){if(!(s.state.loading&4)){var a=Zf.get(r);if(a)var u=a.get(null);else{a=new Map,Zf.set(r,a);for(var d=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var w=d[g];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(a.set(w.dataset.precedence,w),u=w)}u&&a.set(null,u)}d=s.instance,w=d.getAttribute("data-precedence"),g=a.get(w)||u,g===u&&a.set(null,d),a.set(w,d),this.count++,u=Wf.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),g?g.parentNode.insertBefore(d,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(d,r.firstChild)),s.state.loading|=4}}var Ou={$$typeof:q,Provider:null,Consumer:null,_currentValue:tt,_currentValue2:tt,_threadCount:0};function Fx(r,s,a,u,d,g,w,A){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fn(0),this.hiddenUpdates=Fn(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function $E(r,s,a,u,d,g,w,A,j,it,ft,dt){return r=new Fx(r,s,a,w,A,j,it,dt),s=1,g===!0&&(s|=24),g=Kn(3,null,null,s),r.current=g,g.stateNode=r,s=gm(),s.refCount++,r.pooledCache=s,s.refCount++,g.memoizedState={element:u,isDehydrated:a,cache:s},Em(g),r}function GE(r){return r?(r=wa,r):wa}function YE(r,s,a,u,d,g){d=GE(d),u.context===null?u.context=d:u.pendingContext=d,u=as(s),u.payload={element:a},g=g===void 0?null:g,g!==null&&(u.callback=g),a=ls(r,u,s),a!==null&&(Jn(a,r,s),lu(a,r,s))}function KE(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Pp(r,s){KE(r,s),(r=r.alternate)&&KE(r,s)}function XE(r){if(r.tag===13){var s=Ta(r,67108864);s!==null&&Jn(s,r,67108864),Pp(r,67108864)}}var Jf=!0;function qx(r,s,a,u){var d=D.T;D.T=null;var g=$.p;try{$.p=2,Lp(r,s,a,u)}finally{$.p=g,D.T=d}}function $x(r,s,a,u){var d=D.T;D.T=null;var g=$.p;try{$.p=8,Lp(r,s,a,u)}finally{$.p=g,D.T=d}}function Lp(r,s,a,u){if(Jf){var d=Up(u);if(d===null)Sp(r,s,u,th,a),WE(r,u);else if(Yx(d,r,s,a,u))u.stopPropagation();else if(WE(r,u),s&4&&-1<Gx.indexOf(r)){for(;d!==null;){var g=ur(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var w=Je(g.pendingLanes);if(w!==0){var A=g;for(A.pendingLanes|=2,A.entangledLanes|=2;w;){var j=1<<31-we(w);A.entanglements[1]|=j,w&=~j}si(g),(ie&6)===0&&(Lf=Pt()+500,Au(0))}}break;case 13:A=Ta(g,2),A!==null&&Jn(A,g,2),Bf(),Pp(g,2)}if(g=Up(u),g===null&&Sp(r,s,u,th,a),g===d)break;d=g}d!==null&&u.stopPropagation()}else Sp(r,s,u,null,a)}}function Up(r){return r=dr(r),Bp(r)}var th=null;function Bp(r){if(th=null,r=lr(r),r!==null){var s=l(r);if(s===null)r=null;else{var a=s.tag;if(a===13){if(r=c(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return th=r,null}function QE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(St()){case De:return 2;case yn:return 8;case An:case sr:return 32;case Rn:return 268435456;default:return 32}default:return 32}}var zp=!1,Ts=null,ws=null,bs=null,Mu=new Map,ku=new Map,Ss=[],Gx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function WE(r,s){switch(r){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":Mu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ku.delete(s.pointerId)}}function Vu(r,s,a,u,d,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:g,targetContainers:[d]},s!==null&&(s=ur(s),s!==null&&XE(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function Yx(r,s,a,u,d){switch(s){case"focusin":return Ts=Vu(Ts,r,s,a,u,d),!0;case"dragenter":return ws=Vu(ws,r,s,a,u,d),!0;case"mouseover":return bs=Vu(bs,r,s,a,u,d),!0;case"pointerover":var g=d.pointerId;return Mu.set(g,Vu(Mu.get(g)||null,r,s,a,u,d)),!0;case"gotpointercapture":return g=d.pointerId,ku.set(g,Vu(ku.get(g)||null,r,s,a,u,d)),!0}return!1}function ZE(r){var s=lr(r.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){r.blockedOn=s,na(r.priority,function(){if(a.tag===13){var u=Zn();u=Hr(u);var d=Ta(a,u);d!==null&&Jn(d,a,u),Pp(a,u)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function eh(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=Up(r.nativeEvent);if(a===null){a=r.nativeEvent;var u=new a.constructor(a.type,a);Ei=u,a.target.dispatchEvent(u),Ei=null}else return s=ur(a),s!==null&&XE(s),r.blockedOn=a,!1;s.shift()}return!0}function JE(r,s,a){eh(r)&&a.delete(s)}function Kx(){zp=!1,Ts!==null&&eh(Ts)&&(Ts=null),ws!==null&&eh(ws)&&(ws=null),bs!==null&&eh(bs)&&(bs=null),Mu.forEach(JE),ku.forEach(JE)}function nh(r,s){r.blockedOn===s&&(r.blockedOn=null,zp||(zp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Kx)))}var rh=null;function tT(r){rh!==r&&(rh=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){rh===r&&(rh=null);for(var s=0;s<r.length;s+=3){var a=r[s],u=r[s+1],d=r[s+2];if(typeof u!="function"){if(Bp(u||a)===null)continue;break}var g=ur(a);g!==null&&(r.splice(s,3),s-=3,Bm(g,{pending:!0,data:d,method:a.method,action:u},u,d))}}))}function Pu(r){function s(j){return nh(j,r)}Ts!==null&&nh(Ts,r),ws!==null&&nh(ws,r),bs!==null&&nh(bs,r),Mu.forEach(s),ku.forEach(s);for(var a=0;a<Ss.length;a++){var u=Ss[a];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Ss.length&&(a=Ss[0],a.blockedOn===null);)ZE(a),a.blockedOn===null&&Ss.shift();if(a=(r.ownerDocument||r).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var d=a[u],g=a[u+1],w=d[Ce]||null;if(typeof g=="function")w||tT(a);else if(w){var A=null;if(g&&g.hasAttribute("formAction")){if(d=g,w=g[Ce]||null)A=w.formAction;else if(Bp(d)!==null)continue}else A=w.action;typeof A=="function"?a[u+1]=A:(a.splice(u,3),u-=3),tT(a)}}}function Hp(r){this._internalRoot=r}ih.prototype.render=Hp.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,u=Zn();YE(a,u,r,s,null,null)},ih.prototype.unmount=Hp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;YE(r.current,2,null,r,null,null),Bf(),s[Vn]=null}};function ih(r){this._internalRoot=r}ih.prototype.unstable_scheduleHydration=function(r){if(r){var s=jr();r={blockedOn:null,target:r,priority:s};for(var a=0;a<Ss.length&&s!==0&&s<Ss[a].priority;a++);Ss.splice(a,0,r),a===0&&ZE(r)}};var eT=t.version;if(eT!=="19.1.0")throw Error(i(527,eT,"19.1.0"));$.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=m(s),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var Xx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{wt=sh.inject(Xx),Lt=sh}catch{}}return Uu.createRoot=function(r,s){if(!o(r))throw Error(i(299));var a=!1,u="",d=y0,g=_0,w=v0,A=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(A=s.unstable_transitionCallbacks)),s=$E(r,1,!1,null,null,a,u,d,g,w,A,null),r[Vn]=s.current,bp(r),new Hp(s)},Uu.hydrateRoot=function(r,s,a){if(!o(r))throw Error(i(299));var u=!1,d="",g=y0,w=_0,A=v0,j=null,it=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(w=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(j=a.unstable_transitionCallbacks),a.formState!==void 0&&(it=a.formState)),s=$E(r,1,!0,s,a??null,u,d,g,w,A,j,it),s.context=GE(null),a=s.current,u=Zn(),u=Hr(u),d=as(u),d.callback=null,ls(a,d,u),a=u,s.current.lanes=a,or(s,a),si(s),r[Vn]=s.current,bp(r),new ih(s)},Uu.version="19.1.0",Uu}var fT;function iI(){if(fT)return qp.exports;fT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),qp.exports=rI(),qp.exports}var sI=iI();function kn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=kn(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Kp={exports:{}},Xp={},Qp={exports:{}},Wp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hT;function oI(){if(hT)return Wp;hT=1;var e=Rc();function t(v,E){return v===E&&(v!==0||1/v===1/E)||v!==v&&E!==E}var n=typeof Object.is=="function"?Object.is:t,i=e.useState,o=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function h(v,E){var b=E(),I=i({inst:{value:b,getSnapshot:E}}),L=I[0].inst,k=I[1];return l(function(){L.value=b,L.getSnapshot=E,m(L)&&k({inst:L})},[v,b,E]),o(function(){return m(L)&&k({inst:L}),v(function(){m(L)&&k({inst:L})})},[v]),c(b),b}function m(v){var E=v.getSnapshot;v=v.value;try{var b=E();return!n(v,b)}catch{return!0}}function p(v,E){return E()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:h;return Wp.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:y,Wp}var dT;function aI(){return dT||(dT=1,Qp.exports=oI()),Qp.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mT;function lI(){if(mT)return Xp;mT=1;var e=Rc(),t=aI();function n(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var i=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,l=e.useRef,c=e.useEffect,h=e.useMemo,m=e.useDebugValue;return Xp.useSyncExternalStoreWithSelector=function(p,y,v,E,b){var I=l(null);if(I.current===null){var L={hasValue:!1,value:null};I.current=L}else L=I.current;I=h(function(){function H(Z){if(!F){if(F=!0,q=Z,Z=E(Z),b!==void 0&&L.hasValue){var P=L.value;if(b(P,Z))return z=P}return z=Z}if(P=z,i(q,Z))return P;var S=E(Z);return b!==void 0&&b(P,S)?(q=Z,P):(q=Z,z=S)}var F=!1,q,z,X=v===void 0?null:v;return[function(){return H(y())},X===null?void 0:function(){return H(X())}]},[y,v,E,b]);var k=o(p,I[0],I[1]);return c(function(){L.hasValue=!0,L.value=k},[k]),m(k),k},Xp}var pT;function uI(){return pT||(pT=1,Kp.exports=lI()),Kp.exports}var cI=uI();const fI=Ac(cI),hI={},gT=e=>{let t;const n=new Set,i=(y,v)=>{const E=typeof y=="function"?y(t):y;if(!Object.is(E,t)){const b=t;t=v??(typeof E!="object"||E===null)?E:Object.assign({},t,E),n.forEach(I=>I(t,b))}},o=()=>t,m={setState:i,getState:o,getInitialState:()=>p,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(hI?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(i,o,m);return m},dI=e=>e?gT(e):gT,{useDebugValue:mI}=ut,{useSyncExternalStoreWithSelector:pI}=fI,gI=e=>e;function tS(e,t=gI,n){const i=pI(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return mI(i),i}const yT=(e,t)=>{const n=dI(e),i=(o,l=t)=>tS(n,o,l);return Object.assign(i,n),i},yI=(e,t)=>e?yT(e,t):yT;function bn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,o]of e)if(!Object.is(o,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}var _I={value:()=>{}};function pd(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Sh(n)}function Sh(e){this._=e}function vI(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Sh.prototype=pd.prototype={constructor:Sh,on:function(e,t){var n=this._,i=vI(e+"",n),o,l=-1,c=i.length;if(arguments.length<2){for(;++l<c;)if((o=(e=i[l]).type)&&(o=EI(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(o=(e=i[l]).type)n[o]=_T(n[o],e.name,t);else if(t==null)for(o in n)n[o]=_T(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Sh(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,l;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],i=0,o=l.length;i<o;++i)l[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,l=i.length;o<l;++o)i[o].value.apply(t,n)}};function EI(e,t){for(var n=0,i=e.length,o;n<i;++n)if((o=e[n]).name===t)return o.value}function _T(e,t,n){for(var i=0,o=e.length;i<o;++i)if(e[i].name===t){e[i]=_I,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var xg="http://www.w3.org/1999/xhtml";const vT={svg:"http://www.w3.org/2000/svg",xhtml:xg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gd(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),vT.hasOwnProperty(t)?{space:vT[t],local:e}:e}function TI(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===xg&&t.documentElement.namespaceURI===xg?t.createElement(e):t.createElementNS(n,e)}}function wI(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function eS(e){var t=gd(e);return(t.local?wI:TI)(t)}function bI(){}function Sy(e){return e==null?bI:function(){return this.querySelector(e)}}function SI(e){typeof e!="function"&&(e=Sy(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var l=t[o],c=l.length,h=i[o]=new Array(c),m,p,y=0;y<c;++y)(m=l[y])&&(p=e.call(m,m.__data__,y,l))&&("__data__"in m&&(p.__data__=m.__data__),h[y]=p);return new rr(i,this._parents)}function AI(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function RI(){return[]}function nS(e){return e==null?RI:function(){return this.querySelectorAll(e)}}function CI(e){return function(){return AI(e.apply(this,arguments))}}function xI(e){typeof e=="function"?e=CI(e):e=nS(e);for(var t=this._groups,n=t.length,i=[],o=[],l=0;l<n;++l)for(var c=t[l],h=c.length,m,p=0;p<h;++p)(m=c[p])&&(i.push(e.call(m,m.__data__,p,c)),o.push(m));return new rr(i,o)}function rS(e){return function(){return this.matches(e)}}function iS(e){return function(t){return t.matches(e)}}var II=Array.prototype.find;function NI(e){return function(){return II.call(this.children,e)}}function DI(){return this.firstElementChild}function OI(e){return this.select(e==null?DI:NI(typeof e=="function"?e:iS(e)))}var MI=Array.prototype.filter;function kI(){return Array.from(this.children)}function VI(e){return function(){return MI.call(this.children,e)}}function PI(e){return this.selectAll(e==null?kI:VI(typeof e=="function"?e:iS(e)))}function LI(e){typeof e!="function"&&(e=rS(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var l=t[o],c=l.length,h=i[o]=[],m,p=0;p<c;++p)(m=l[p])&&e.call(m,m.__data__,p,l)&&h.push(m);return new rr(i,this._parents)}function sS(e){return new Array(e.length)}function UI(){return new rr(this._enter||this._groups.map(sS),this._parents)}function Uh(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Uh.prototype={constructor:Uh,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function BI(e){return function(){return e}}function zI(e,t,n,i,o,l){for(var c=0,h,m=t.length,p=l.length;c<p;++c)(h=t[c])?(h.__data__=l[c],i[c]=h):n[c]=new Uh(e,l[c]);for(;c<m;++c)(h=t[c])&&(o[c]=h)}function HI(e,t,n,i,o,l,c){var h,m,p=new Map,y=t.length,v=l.length,E=new Array(y),b;for(h=0;h<y;++h)(m=t[h])&&(E[h]=b=c.call(m,m.__data__,h,t)+"",p.has(b)?o[h]=m:p.set(b,m));for(h=0;h<v;++h)b=c.call(e,l[h],h,l)+"",(m=p.get(b))?(i[h]=m,m.__data__=l[h],p.delete(b)):n[h]=new Uh(e,l[h]);for(h=0;h<y;++h)(m=t[h])&&p.get(E[h])===m&&(o[h]=m)}function jI(e){return e.__data__}function FI(e,t){if(!arguments.length)return Array.from(this,jI);var n=t?HI:zI,i=this._parents,o=this._groups;typeof e!="function"&&(e=BI(e));for(var l=o.length,c=new Array(l),h=new Array(l),m=new Array(l),p=0;p<l;++p){var y=i[p],v=o[p],E=v.length,b=qI(e.call(y,y&&y.__data__,p,i)),I=b.length,L=h[p]=new Array(I),k=c[p]=new Array(I),H=m[p]=new Array(E);n(y,v,L,k,H,b,t);for(var F=0,q=0,z,X;F<I;++F)if(z=L[F]){for(F>=q&&(q=F+1);!(X=k[q])&&++q<I;);z._next=X||null}}return c=new rr(c,i),c._enter=h,c._exit=m,c}function qI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $I(){return new rr(this._exit||this._groups.map(sS),this._parents)}function GI(e,t,n){var i=this.enter(),o=this,l=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?l.remove():n(l),i&&o?i.merge(o).order():o}function YI(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,o=n.length,l=i.length,c=Math.min(o,l),h=new Array(o),m=0;m<c;++m)for(var p=n[m],y=i[m],v=p.length,E=h[m]=new Array(v),b,I=0;I<v;++I)(b=p[I]||y[I])&&(E[I]=b);for(;m<o;++m)h[m]=n[m];return new rr(h,this._parents)}function KI(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],o=i.length-1,l=i[o],c;--o>=0;)(c=i[o])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function XI(e){e||(e=QI);function t(v,E){return v&&E?e(v.__data__,E.__data__):!v-!E}for(var n=this._groups,i=n.length,o=new Array(i),l=0;l<i;++l){for(var c=n[l],h=c.length,m=o[l]=new Array(h),p,y=0;y<h;++y)(p=c[y])&&(m[y]=p);m.sort(t)}return new rr(o,this._parents).order()}function QI(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function WI(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ZI(){return Array.from(this)}function JI(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,l=i.length;o<l;++o){var c=i[o];if(c)return c}return null}function tN(){let e=0;for(const t of this)++e;return e}function eN(){return!this.node()}function nN(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var o=t[n],l=0,c=o.length,h;l<c;++l)(h=o[l])&&e.call(h,h.__data__,l,o);return this}function rN(e){return function(){this.removeAttribute(e)}}function iN(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sN(e,t){return function(){this.setAttribute(e,t)}}function oN(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function aN(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function lN(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function uN(e,t){var n=gd(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?iN:rN:typeof t=="function"?n.local?lN:aN:n.local?oN:sN)(n,t))}function oS(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function cN(e){return function(){this.style.removeProperty(e)}}function fN(e,t,n){return function(){this.style.setProperty(e,t,n)}}function hN(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function dN(e,t,n){return arguments.length>1?this.each((t==null?cN:typeof t=="function"?hN:fN)(e,t,n??"")):yl(this.node(),e)}function yl(e,t){return e.style.getPropertyValue(t)||oS(e).getComputedStyle(e,null).getPropertyValue(t)}function mN(e){return function(){delete this[e]}}function pN(e,t){return function(){this[e]=t}}function gN(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function yN(e,t){return arguments.length>1?this.each((t==null?mN:typeof t=="function"?gN:pN)(e,t)):this.node()[e]}function aS(e){return e.trim().split(/^|\s+/)}function Ay(e){return e.classList||new lS(e)}function lS(e){this._node=e,this._names=aS(e.getAttribute("class")||"")}lS.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function uS(e,t){for(var n=Ay(e),i=-1,o=t.length;++i<o;)n.add(t[i])}function cS(e,t){for(var n=Ay(e),i=-1,o=t.length;++i<o;)n.remove(t[i])}function _N(e){return function(){uS(this,e)}}function vN(e){return function(){cS(this,e)}}function EN(e,t){return function(){(t.apply(this,arguments)?uS:cS)(this,e)}}function TN(e,t){var n=aS(e+"");if(arguments.length<2){for(var i=Ay(this.node()),o=-1,l=n.length;++o<l;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?EN:t?_N:vN)(n,t))}function wN(){this.textContent=""}function bN(e){return function(){this.textContent=e}}function SN(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function AN(e){return arguments.length?this.each(e==null?wN:(typeof e=="function"?SN:bN)(e)):this.node().textContent}function RN(){this.innerHTML=""}function CN(e){return function(){this.innerHTML=e}}function xN(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function IN(e){return arguments.length?this.each(e==null?RN:(typeof e=="function"?xN:CN)(e)):this.node().innerHTML}function NN(){this.nextSibling&&this.parentNode.appendChild(this)}function DN(){return this.each(NN)}function ON(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function MN(){return this.each(ON)}function kN(e){var t=typeof e=="function"?e:eS(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function VN(){return null}function PN(e,t){var n=typeof e=="function"?e:eS(e),i=t==null?VN:typeof t=="function"?t:Sy(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function LN(){var e=this.parentNode;e&&e.removeChild(this)}function UN(){return this.each(LN)}function BN(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function zN(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function HN(e){return this.select(e?zN:BN)}function jN(e){return arguments.length?this.property("__data__",e):this.node().__data__}function FN(e){return function(t){e.call(this,t,this.__data__)}}function qN(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function $N(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,o=t.length,l;n<o;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++i]=l;++i?t.length=i:delete this.__on}}}function GN(e,t,n){return function(){var i=this.__on,o,l=FN(t);if(i){for(var c=0,h=i.length;c<h;++c)if((o=i[c]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=l,o.options=n),o.value=t;return}}this.addEventListener(e.type,l,n),o={type:e.type,name:e.name,value:t,listener:l,options:n},i?i.push(o):this.__on=[o]}}function YN(e,t,n){var i=qN(e+""),o,l=i.length,c;if(arguments.length<2){var h=this.node().__on;if(h){for(var m=0,p=h.length,y;m<p;++m)for(o=0,y=h[m];o<l;++o)if((c=i[o]).type===y.type&&c.name===y.name)return y.value}return}for(h=t?GN:$N,o=0;o<l;++o)this.each(h(i[o],t,n));return this}function fS(e,t,n){var i=oS(e),o=i.CustomEvent;typeof o=="function"?o=new o(t,n):(o=i.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function KN(e,t){return function(){return fS(this,e,t)}}function XN(e,t){return function(){return fS(this,e,t.apply(this,arguments))}}function QN(e,t){return this.each((typeof t=="function"?XN:KN)(e,t))}function*WN(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,l=i.length,c;o<l;++o)(c=i[o])&&(yield c)}var hS=[null];function rr(e,t){this._groups=e,this._parents=t}function Cc(){return new rr([[document.documentElement]],hS)}function ZN(){return this}rr.prototype=Cc.prototype={constructor:rr,select:SI,selectAll:xI,selectChild:OI,selectChildren:PI,filter:LI,data:FI,enter:UI,exit:$I,join:GI,merge:YI,selection:ZN,order:KI,sort:XI,call:WI,nodes:ZI,node:JI,size:tN,empty:eN,each:nN,attr:uN,style:dN,property:yN,classed:TN,text:AN,html:IN,raise:DN,lower:MN,append:kN,insert:PN,remove:UN,clone:HN,datum:jN,on:YN,dispatch:QN,[Symbol.iterator]:WN};function Mr(e){return typeof e=="string"?new rr([[document.querySelector(e)]],[document.documentElement]):new rr([[e]],hS)}function JN(e){let t;for(;t=e.sourceEvent;)e=t;return e}function oi(e,t){if(e=JN(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const t2={passive:!1},ac={capture:!0,passive:!1};function Zp(e){e.stopImmediatePropagation()}function ll(e){e.preventDefault(),e.stopImmediatePropagation()}function dS(e){var t=e.document.documentElement,n=Mr(e).on("dragstart.drag",ll,ac);"onselectstart"in t?n.on("selectstart.drag",ll,ac):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function mS(e,t){var n=e.document.documentElement,i=Mr(e).on("dragstart.drag",null);t&&(i.on("click.drag",ll,ac),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const oh=e=>()=>e;function Ig(e,{sourceEvent:t,subject:n,target:i,identifier:o,active:l,x:c,y:h,dx:m,dy:p,dispatch:y}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:h,enumerable:!0,configurable:!0},dx:{value:m,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:y}})}Ig.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function e2(e){return!e.ctrlKey&&!e.button}function n2(){return this.parentNode}function r2(e,t){return t??{x:e.x,y:e.y}}function i2(){return navigator.maxTouchPoints||"ontouchstart"in this}function s2(){var e=e2,t=n2,n=r2,i=i2,o={},l=pd("start","drag","end"),c=0,h,m,p,y,v=0;function E(z){z.on("mousedown.drag",b).filter(i).on("touchstart.drag",k).on("touchmove.drag",H,t2).on("touchend.drag touchcancel.drag",F).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(z,X){if(!(y||!e.call(this,z,X))){var Z=q(this,t.call(this,z,X),z,X,"mouse");Z&&(Mr(z.view).on("mousemove.drag",I,ac).on("mouseup.drag",L,ac),dS(z.view),Zp(z),p=!1,h=z.clientX,m=z.clientY,Z("start",z))}}function I(z){if(ll(z),!p){var X=z.clientX-h,Z=z.clientY-m;p=X*X+Z*Z>v}o.mouse("drag",z)}function L(z){Mr(z.view).on("mousemove.drag mouseup.drag",null),mS(z.view,p),ll(z),o.mouse("end",z)}function k(z,X){if(e.call(this,z,X)){var Z=z.changedTouches,P=t.call(this,z,X),S=Z.length,C,O;for(C=0;C<S;++C)(O=q(this,P,z,X,Z[C].identifier,Z[C]))&&(Zp(z),O("start",z,Z[C]))}}function H(z){var X=z.changedTouches,Z=X.length,P,S;for(P=0;P<Z;++P)(S=o[X[P].identifier])&&(ll(z),S("drag",z,X[P]))}function F(z){var X=z.changedTouches,Z=X.length,P,S;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),P=0;P<Z;++P)(S=o[X[P].identifier])&&(Zp(z),S("end",z,X[P]))}function q(z,X,Z,P,S,C){var O=l.copy(),U=oi(C||Z,X),B,R,V;if((V=n.call(z,new Ig("beforestart",{sourceEvent:Z,target:E,identifier:S,active:c,x:U[0],y:U[1],dx:0,dy:0,dispatch:O}),P))!=null)return B=V.x-U[0]||0,R=V.y-U[1]||0,function Y(D,$,tt){var W=U,M;switch(D){case"start":o[S]=Y,M=c++;break;case"end":delete o[S],--c;case"drag":U=oi(tt||$,X),M=c;break}O.call(D,z,new Ig(D,{sourceEvent:$,subject:V,target:E,identifier:S,active:M,x:U[0]+B,y:U[1]+R,dx:U[0]-W[0],dy:U[1]-W[1],dispatch:O}),P)}}return E.filter=function(z){return arguments.length?(e=typeof z=="function"?z:oh(!!z),E):e},E.container=function(z){return arguments.length?(t=typeof z=="function"?z:oh(z),E):t},E.subject=function(z){return arguments.length?(n=typeof z=="function"?z:oh(z),E):n},E.touchable=function(z){return arguments.length?(i=typeof z=="function"?z:oh(!!z),E):i},E.on=function(){var z=l.on.apply(l,arguments);return z===l?E:z},E.clickDistance=function(z){return arguments.length?(v=(z=+z)*z,E):Math.sqrt(v)},E}function Ry(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pS(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function xc(){}var lc=.7,Bh=1/lc,ul="\\s*([+-]?\\d+)\\s*",uc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",li="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o2=/^#([0-9a-f]{3,8})$/,a2=new RegExp(`^rgb\\(${ul},${ul},${ul}\\)$`),l2=new RegExp(`^rgb\\(${li},${li},${li}\\)$`),u2=new RegExp(`^rgba\\(${ul},${ul},${ul},${uc}\\)$`),c2=new RegExp(`^rgba\\(${li},${li},${li},${uc}\\)$`),f2=new RegExp(`^hsl\\(${uc},${li},${li}\\)$`),h2=new RegExp(`^hsla\\(${uc},${li},${li},${uc}\\)$`),ET={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ry(xc,cc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:TT,formatHex:TT,formatHex8:d2,formatHsl:m2,formatRgb:wT,toString:wT});function TT(){return this.rgb().formatHex()}function d2(){return this.rgb().formatHex8()}function m2(){return gS(this).formatHsl()}function wT(){return this.rgb().formatRgb()}function cc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=o2.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?bT(t):n===3?new Hn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ah(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ah(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=a2.exec(e))?new Hn(t[1],t[2],t[3],1):(t=l2.exec(e))?new Hn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=u2.exec(e))?ah(t[1],t[2],t[3],t[4]):(t=c2.exec(e))?ah(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=f2.exec(e))?RT(t[1],t[2]/100,t[3]/100,1):(t=h2.exec(e))?RT(t[1],t[2]/100,t[3]/100,t[4]):ET.hasOwnProperty(e)?bT(ET[e]):e==="transparent"?new Hn(NaN,NaN,NaN,0):null}function bT(e){return new Hn(e>>16&255,e>>8&255,e&255,1)}function ah(e,t,n,i){return i<=0&&(e=t=n=NaN),new Hn(e,t,n,i)}function p2(e){return e instanceof xc||(e=cc(e)),e?(e=e.rgb(),new Hn(e.r,e.g,e.b,e.opacity)):new Hn}function Ng(e,t,n,i){return arguments.length===1?p2(e):new Hn(e,t,n,i??1)}function Hn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Ry(Hn,Ng,pS(xc,{brighter(e){return e=e==null?Bh:Math.pow(Bh,e),new Hn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?lc:Math.pow(lc,e),new Hn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Hn(jo(this.r),jo(this.g),jo(this.b),zh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ST,formatHex:ST,formatHex8:g2,formatRgb:AT,toString:AT}));function ST(){return`#${Bo(this.r)}${Bo(this.g)}${Bo(this.b)}`}function g2(){return`#${Bo(this.r)}${Bo(this.g)}${Bo(this.b)}${Bo((isNaN(this.opacity)?1:this.opacity)*255)}`}function AT(){const e=zh(this.opacity);return`${e===1?"rgb(":"rgba("}${jo(this.r)}, ${jo(this.g)}, ${jo(this.b)}${e===1?")":`, ${e})`}`}function zh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function jo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Bo(e){return e=jo(e),(e<16?"0":"")+e.toString(16)}function RT(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new kr(e,t,n,i)}function gS(e){if(e instanceof kr)return new kr(e.h,e.s,e.l,e.opacity);if(e instanceof xc||(e=cc(e)),!e)return new kr;if(e instanceof kr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),l=Math.max(t,n,i),c=NaN,h=l-o,m=(l+o)/2;return h?(t===l?c=(n-i)/h+(n<i)*6:n===l?c=(i-t)/h+2:c=(t-n)/h+4,h/=m<.5?l+o:2-l-o,c*=60):h=m>0&&m<1?0:c,new kr(c,h,m,e.opacity)}function y2(e,t,n,i){return arguments.length===1?gS(e):new kr(e,t,n,i??1)}function kr(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Ry(kr,y2,pS(xc,{brighter(e){return e=e==null?Bh:Math.pow(Bh,e),new kr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?lc:Math.pow(lc,e),new kr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,o=2*n-i;return new Hn(Jp(e>=240?e-240:e+120,o,i),Jp(e,o,i),Jp(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new kr(CT(this.h),lh(this.s),lh(this.l),zh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=zh(this.opacity);return`${e===1?"hsl(":"hsla("}${CT(this.h)}, ${lh(this.s)*100}%, ${lh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function CT(e){return e=(e||0)%360,e<0?e+360:e}function lh(e){return Math.max(0,Math.min(1,e||0))}function Jp(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const yS=e=>()=>e;function _2(e,t){return function(n){return e+n*t}}function v2(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function E2(e){return(e=+e)==1?_S:function(t,n){return n-t?v2(t,n,e):yS(isNaN(t)?n:t)}}function _S(e,t){var n=t-e;return n?_2(e,n):yS(isNaN(e)?t:e)}const xT=function e(t){var n=E2(t);function i(o,l){var c=n((o=Ng(o)).r,(l=Ng(l)).r),h=n(o.g,l.g),m=n(o.b,l.b),p=_S(o.opacity,l.opacity);return function(y){return o.r=c(y),o.g=h(y),o.b=m(y),o.opacity=p(y),o+""}}return i.gamma=e,i}(1);function xs(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Dg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tg=new RegExp(Dg.source,"g");function T2(e){return function(){return e}}function w2(e){return function(t){return e(t)+""}}function b2(e,t){var n=Dg.lastIndex=tg.lastIndex=0,i,o,l,c=-1,h=[],m=[];for(e=e+"",t=t+"";(i=Dg.exec(e))&&(o=tg.exec(t));)(l=o.index)>n&&(l=t.slice(n,l),h[c]?h[c]+=l:h[++c]=l),(i=i[0])===(o=o[0])?h[c]?h[c]+=o:h[++c]=o:(h[++c]=null,m.push({i:c,x:xs(i,o)})),n=tg.lastIndex;return n<t.length&&(l=t.slice(n),h[c]?h[c]+=l:h[++c]=l),h.length<2?m[0]?w2(m[0].x):T2(t):(t=m.length,function(p){for(var y=0,v;y<t;++y)h[(v=m[y]).i]=v.x(p);return h.join("")})}var IT=180/Math.PI,Og={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vS(e,t,n,i,o,l){var c,h,m;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(m=e*n+t*i)&&(n-=e*m,i-=t*m),(h=Math.sqrt(n*n+i*i))&&(n/=h,i/=h,m/=h),e*i<t*n&&(e=-e,t=-t,m=-m,c=-c),{translateX:o,translateY:l,rotate:Math.atan2(t,e)*IT,skewX:Math.atan(m)*IT,scaleX:c,scaleY:h}}var uh;function S2(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Og:vS(t.a,t.b,t.c,t.d,t.e,t.f)}function A2(e){return e==null||(uh||(uh=document.createElementNS("http://www.w3.org/2000/svg","g")),uh.setAttribute("transform",e),!(e=uh.transform.baseVal.consolidate()))?Og:(e=e.matrix,vS(e.a,e.b,e.c,e.d,e.e,e.f))}function ES(e,t,n,i){function o(p){return p.length?p.pop()+" ":""}function l(p,y,v,E,b,I){if(p!==v||y!==E){var L=b.push("translate(",null,t,null,n);I.push({i:L-4,x:xs(p,v)},{i:L-2,x:xs(y,E)})}else(v||E)&&b.push("translate("+v+t+E+n)}function c(p,y,v,E){p!==y?(p-y>180?y+=360:y-p>180&&(p+=360),E.push({i:v.push(o(v)+"rotate(",null,i)-2,x:xs(p,y)})):y&&v.push(o(v)+"rotate("+y+i)}function h(p,y,v,E){p!==y?E.push({i:v.push(o(v)+"skewX(",null,i)-2,x:xs(p,y)}):y&&v.push(o(v)+"skewX("+y+i)}function m(p,y,v,E,b,I){if(p!==v||y!==E){var L=b.push(o(b)+"scale(",null,",",null,")");I.push({i:L-4,x:xs(p,v)},{i:L-2,x:xs(y,E)})}else(v!==1||E!==1)&&b.push(o(b)+"scale("+v+","+E+")")}return function(p,y){var v=[],E=[];return p=e(p),y=e(y),l(p.translateX,p.translateY,y.translateX,y.translateY,v,E),c(p.rotate,y.rotate,v,E),h(p.skewX,y.skewX,v,E),m(p.scaleX,p.scaleY,y.scaleX,y.scaleY,v,E),p=y=null,function(b){for(var I=-1,L=E.length,k;++I<L;)v[(k=E[I]).i]=k.x(b);return v.join("")}}}var R2=ES(S2,"px, ","px)","deg)"),C2=ES(A2,", ",")",")"),x2=1e-12;function NT(e){return((e=Math.exp(e))+1/e)/2}function I2(e){return((e=Math.exp(e))-1/e)/2}function N2(e){return((e=Math.exp(2*e))-1)/(e+1)}const D2=function e(t,n,i){function o(l,c){var h=l[0],m=l[1],p=l[2],y=c[0],v=c[1],E=c[2],b=y-h,I=v-m,L=b*b+I*I,k,H;if(L<x2)H=Math.log(E/p)/t,k=function(P){return[h+P*b,m+P*I,p*Math.exp(t*P*H)]};else{var F=Math.sqrt(L),q=(E*E-p*p+i*L)/(2*p*n*F),z=(E*E-p*p-i*L)/(2*E*n*F),X=Math.log(Math.sqrt(q*q+1)-q),Z=Math.log(Math.sqrt(z*z+1)-z);H=(Z-X)/t,k=function(P){var S=P*H,C=NT(X),O=p/(n*F)*(C*N2(t*S+X)-I2(X));return[h+O*b,m+O*I,p*C/NT(t*S+X)]}}return k.duration=H*1e3*t/Math.SQRT2,k}return o.rho=function(l){var c=Math.max(.001,+l),h=c*c,m=h*h;return e(c,h,m)},o}(Math.SQRT2,2,4);var _l=0,$u=0,Bu=0,TS=1e3,Hh,Gu,jh=0,qo=0,yd=0,fc=typeof performance=="object"&&performance.now?performance:Date,wS=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Cy(){return qo||(wS(O2),qo=fc.now()+yd)}function O2(){qo=0}function Fh(){this._call=this._time=this._next=null}Fh.prototype=bS.prototype={constructor:Fh,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Cy():+n)+(t==null?0:+t),!this._next&&Gu!==this&&(Gu?Gu._next=this:Hh=this,Gu=this),this._call=e,this._time=n,Mg()},stop:function(){this._call&&(this._call=null,this._time=1/0,Mg())}};function bS(e,t,n){var i=new Fh;return i.restart(e,t,n),i}function M2(){Cy(),++_l;for(var e=Hh,t;e;)(t=qo-e._time)>=0&&e._call.call(void 0,t),e=e._next;--_l}function DT(){qo=(jh=fc.now())+yd,_l=$u=0;try{M2()}finally{_l=0,V2(),qo=0}}function k2(){var e=fc.now(),t=e-jh;t>TS&&(yd-=t,jh=e)}function V2(){for(var e,t=Hh,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Hh=n);Gu=e,Mg(i)}function Mg(e){if(!_l){$u&&($u=clearTimeout($u));var t=e-qo;t>24?(e<1/0&&($u=setTimeout(DT,e-fc.now()-yd)),Bu&&(Bu=clearInterval(Bu))):(Bu||(jh=fc.now(),Bu=setInterval(k2,TS)),_l=1,wS(DT))}}function OT(e,t,n){var i=new Fh;return t=t==null?0:+t,i.restart(o=>{i.stop(),e(o+t)},t,n),i}var P2=pd("start","end","cancel","interrupt"),L2=[],SS=0,MT=1,kg=2,Ah=3,kT=4,Vg=5,Rh=6;function _d(e,t,n,i,o,l){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;U2(e,n,{name:t,index:i,group:o,on:P2,tween:L2,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:SS})}function xy(e,t){var n=Br(e,t);if(n.state>SS)throw new Error("too late; already scheduled");return n}function mi(e,t){var n=Br(e,t);if(n.state>Ah)throw new Error("too late; already running");return n}function Br(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function U2(e,t,n){var i=e.__transition,o;i[t]=n,n.timer=bS(l,0,n.time);function l(p){n.state=MT,n.timer.restart(c,n.delay,n.time),n.delay<=p&&c(p-n.delay)}function c(p){var y,v,E,b;if(n.state!==MT)return m();for(y in i)if(b=i[y],b.name===n.name){if(b.state===Ah)return OT(c);b.state===kT?(b.state=Rh,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete i[y]):+y<t&&(b.state=Rh,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete i[y])}if(OT(function(){n.state===Ah&&(n.state=kT,n.timer.restart(h,n.delay,n.time),h(p))}),n.state=kg,n.on.call("start",e,e.__data__,n.index,n.group),n.state===kg){for(n.state=Ah,o=new Array(E=n.tween.length),y=0,v=-1;y<E;++y)(b=n.tween[y].value.call(e,e.__data__,n.index,n.group))&&(o[++v]=b);o.length=v+1}}function h(p){for(var y=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(m),n.state=Vg,1),v=-1,E=o.length;++v<E;)o[v].call(e,y);n.state===Vg&&(n.on.call("end",e,e.__data__,n.index,n.group),m())}function m(){n.state=Rh,n.timer.stop(),delete i[t];for(var p in i)return;delete e.__transition}}function Ch(e,t){var n=e.__transition,i,o,l=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((i=n[c]).name!==t){l=!1;continue}o=i.state>kg&&i.state<Vg,i.state=Rh,i.timer.stop(),i.on.call(o?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[c]}l&&delete e.__transition}}function B2(e){return this.each(function(){Ch(this,e)})}function z2(e,t){var n,i;return function(){var o=mi(this,e),l=o.tween;if(l!==n){i=n=l;for(var c=0,h=i.length;c<h;++c)if(i[c].name===t){i=i.slice(),i.splice(c,1);break}}o.tween=i}}function H2(e,t,n){var i,o;if(typeof n!="function")throw new Error;return function(){var l=mi(this,e),c=l.tween;if(c!==i){o=(i=c).slice();for(var h={name:t,value:n},m=0,p=o.length;m<p;++m)if(o[m].name===t){o[m]=h;break}m===p&&o.push(h)}l.tween=o}}function j2(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Br(this.node(),n).tween,o=0,l=i.length,c;o<l;++o)if((c=i[o]).name===e)return c.value;return null}return this.each((t==null?z2:H2)(n,e,t))}function Iy(e,t,n){var i=e._id;return e.each(function(){var o=mi(this,i);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Br(o,i).value[t]}}function AS(e,t){var n;return(typeof t=="number"?xs:t instanceof cc?xT:(n=cc(t))?(t=n,xT):b2)(e,t)}function F2(e){return function(){this.removeAttribute(e)}}function q2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $2(e,t,n){var i,o=n+"",l;return function(){var c=this.getAttribute(e);return c===o?null:c===i?l:l=t(i=c,n)}}function G2(e,t,n){var i,o=n+"",l;return function(){var c=this.getAttributeNS(e.space,e.local);return c===o?null:c===i?l:l=t(i=c,n)}}function Y2(e,t,n){var i,o,l;return function(){var c,h=n(this),m;return h==null?void this.removeAttribute(e):(c=this.getAttribute(e),m=h+"",c===m?null:c===i&&m===o?l:(o=m,l=t(i=c,h)))}}function K2(e,t,n){var i,o,l;return function(){var c,h=n(this),m;return h==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),m=h+"",c===m?null:c===i&&m===o?l:(o=m,l=t(i=c,h)))}}function X2(e,t){var n=gd(e),i=n==="transform"?C2:AS;return this.attrTween(e,typeof t=="function"?(n.local?K2:Y2)(n,i,Iy(this,"attr."+e,t)):t==null?(n.local?q2:F2)(n):(n.local?G2:$2)(n,i,t))}function Q2(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function W2(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Z2(e,t){var n,i;function o(){var l=t.apply(this,arguments);return l!==i&&(n=(i=l)&&W2(e,l)),n}return o._value=t,o}function J2(e,t){var n,i;function o(){var l=t.apply(this,arguments);return l!==i&&(n=(i=l)&&Q2(e,l)),n}return o._value=t,o}function tD(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=gd(e);return this.tween(n,(i.local?Z2:J2)(i,t))}function eD(e,t){return function(){xy(this,e).delay=+t.apply(this,arguments)}}function nD(e,t){return t=+t,function(){xy(this,e).delay=t}}function rD(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?eD:nD)(t,e)):Br(this.node(),t).delay}function iD(e,t){return function(){mi(this,e).duration=+t.apply(this,arguments)}}function sD(e,t){return t=+t,function(){mi(this,e).duration=t}}function oD(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?iD:sD)(t,e)):Br(this.node(),t).duration}function aD(e,t){if(typeof t!="function")throw new Error;return function(){mi(this,e).ease=t}}function lD(e){var t=this._id;return arguments.length?this.each(aD(t,e)):Br(this.node(),t).ease}function uD(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;mi(this,e).ease=n}}function cD(e){if(typeof e!="function")throw new Error;return this.each(uD(this._id,e))}function fD(e){typeof e!="function"&&(e=rS(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var l=t[o],c=l.length,h=i[o]=[],m,p=0;p<c;++p)(m=l[p])&&e.call(m,m.__data__,p,l)&&h.push(m);return new $i(i,this._parents,this._name,this._id)}function hD(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,o=n.length,l=Math.min(i,o),c=new Array(i),h=0;h<l;++h)for(var m=t[h],p=n[h],y=m.length,v=c[h]=new Array(y),E,b=0;b<y;++b)(E=m[b]||p[b])&&(v[b]=E);for(;h<i;++h)c[h]=t[h];return new $i(c,this._parents,this._name,this._id)}function dD(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function mD(e,t,n){var i,o,l=dD(t)?xy:mi;return function(){var c=l(this,e),h=c.on;h!==i&&(o=(i=h).copy()).on(t,n),c.on=o}}function pD(e,t){var n=this._id;return arguments.length<2?Br(this.node(),n).on.on(e):this.each(mD(n,e,t))}function gD(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function yD(){return this.on("end.remove",gD(this._id))}function _D(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Sy(e));for(var i=this._groups,o=i.length,l=new Array(o),c=0;c<o;++c)for(var h=i[c],m=h.length,p=l[c]=new Array(m),y,v,E=0;E<m;++E)(y=h[E])&&(v=e.call(y,y.__data__,E,h))&&("__data__"in y&&(v.__data__=y.__data__),p[E]=v,_d(p[E],t,n,E,p,Br(y,n)));return new $i(l,this._parents,t,n)}function vD(e){var t=this._name,n=this._id;typeof e!="function"&&(e=nS(e));for(var i=this._groups,o=i.length,l=[],c=[],h=0;h<o;++h)for(var m=i[h],p=m.length,y,v=0;v<p;++v)if(y=m[v]){for(var E=e.call(y,y.__data__,v,m),b,I=Br(y,n),L=0,k=E.length;L<k;++L)(b=E[L])&&_d(b,t,n,L,E,I);l.push(E),c.push(y)}return new $i(l,c,t,n)}var ED=Cc.prototype.constructor;function TD(){return new ED(this._groups,this._parents)}function wD(e,t){var n,i,o;return function(){var l=yl(this,e),c=(this.style.removeProperty(e),yl(this,e));return l===c?null:l===n&&c===i?o:o=t(n=l,i=c)}}function RS(e){return function(){this.style.removeProperty(e)}}function bD(e,t,n){var i,o=n+"",l;return function(){var c=yl(this,e);return c===o?null:c===i?l:l=t(i=c,n)}}function SD(e,t,n){var i,o,l;return function(){var c=yl(this,e),h=n(this),m=h+"";return h==null&&(m=h=(this.style.removeProperty(e),yl(this,e))),c===m?null:c===i&&m===o?l:(o=m,l=t(i=c,h))}}function AD(e,t){var n,i,o,l="style."+t,c="end."+l,h;return function(){var m=mi(this,e),p=m.on,y=m.value[l]==null?h||(h=RS(t)):void 0;(p!==n||o!==y)&&(i=(n=p).copy()).on(c,o=y),m.on=i}}function RD(e,t,n){var i=(e+="")=="transform"?R2:AS;return t==null?this.styleTween(e,wD(e,i)).on("end.style."+e,RS(e)):typeof t=="function"?this.styleTween(e,SD(e,i,Iy(this,"style."+e,t))).each(AD(this._id,e)):this.styleTween(e,bD(e,i,t),n).on("end.style."+e,null)}function CD(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function xD(e,t,n){var i,o;function l(){var c=t.apply(this,arguments);return c!==o&&(i=(o=c)&&CD(e,c,n)),i}return l._value=t,l}function ID(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,xD(e,t,n??""))}function ND(e){return function(){this.textContent=e}}function DD(e){return function(){var t=e(this);this.textContent=t??""}}function OD(e){return this.tween("text",typeof e=="function"?DD(Iy(this,"text",e)):ND(e==null?"":e+""))}function MD(e){return function(t){this.textContent=e.call(this,t)}}function kD(e){var t,n;function i(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&MD(o)),t}return i._value=e,i}function VD(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,kD(e))}function PD(){for(var e=this._name,t=this._id,n=CS(),i=this._groups,o=i.length,l=0;l<o;++l)for(var c=i[l],h=c.length,m,p=0;p<h;++p)if(m=c[p]){var y=Br(m,t);_d(m,e,n,p,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new $i(i,this._parents,e,n)}function LD(){var e,t,n=this,i=n._id,o=n.size();return new Promise(function(l,c){var h={value:c},m={value:function(){--o===0&&l()}};n.each(function(){var p=mi(this,i),y=p.on;y!==e&&(t=(e=y).copy(),t._.cancel.push(h),t._.interrupt.push(h),t._.end.push(m)),p.on=t}),o===0&&l()})}var UD=0;function $i(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function CS(){return++UD}var Bi=Cc.prototype;$i.prototype={constructor:$i,select:_D,selectAll:vD,selectChild:Bi.selectChild,selectChildren:Bi.selectChildren,filter:fD,merge:hD,selection:TD,transition:PD,call:Bi.call,nodes:Bi.nodes,node:Bi.node,size:Bi.size,empty:Bi.empty,each:Bi.each,on:pD,attr:X2,attrTween:tD,style:RD,styleTween:ID,text:OD,textTween:VD,remove:yD,tween:j2,delay:rD,duration:oD,ease:lD,easeVarying:cD,end:LD,[Symbol.iterator]:Bi[Symbol.iterator]};function BD(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var zD={time:null,delay:0,duration:250,ease:BD};function HD(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function jD(e){var t,n;e instanceof $i?(t=e._id,e=e._name):(t=CS(),(n=zD).time=Cy(),e=e==null?null:e+"");for(var i=this._groups,o=i.length,l=0;l<o;++l)for(var c=i[l],h=c.length,m,p=0;p<h;++p)(m=c[p])&&_d(m,e,t,p,c,n||HD(m,t));return new $i(i,this._parents,e,t)}Cc.prototype.interrupt=B2;Cc.prototype.transition=jD;const ch=e=>()=>e;function FD(e,{sourceEvent:t,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function zi(e,t,n){this.k=e,this.x=t,this.y=n}zi.prototype={constructor:zi,scale:function(e){return e===1?this:new zi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new zi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ls=new zi(1,0,0);zi.prototype;function eg(e){e.stopImmediatePropagation()}function zu(e){e.preventDefault(),e.stopImmediatePropagation()}function qD(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function $D(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function VT(){return this.__zoom||Ls}function GD(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function YD(){return navigator.maxTouchPoints||"ontouchstart"in this}function KD(e,t,n){var i=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],l=e.invertY(t[0][1])-n[0][1],c=e.invertY(t[1][1])-n[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function XD(){var e=qD,t=$D,n=KD,i=GD,o=YD,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],h=250,m=D2,p=pd("start","zoom","end"),y,v,E,b=500,I=150,L=0,k=10;function H(V){V.property("__zoom",VT).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",O).filter(o).on("touchstart.zoom",U).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}H.transform=function(V,Y,D,$){var tt=V.selection?V.selection():V;tt.property("__zoom",VT),V!==tt?X(V,Y,D,$):tt.interrupt().each(function(){Z(this,arguments).event($).start().zoom(null,typeof Y=="function"?Y.apply(this,arguments):Y).end()})},H.scaleBy=function(V,Y,D,$){H.scaleTo(V,function(){var tt=this.__zoom.k,W=typeof Y=="function"?Y.apply(this,arguments):Y;return tt*W},D,$)},H.scaleTo=function(V,Y,D,$){H.transform(V,function(){var tt=t.apply(this,arguments),W=this.__zoom,M=D==null?z(tt):typeof D=="function"?D.apply(this,arguments):D,G=W.invert(M),nt=typeof Y=="function"?Y.apply(this,arguments):Y;return n(q(F(W,nt),M,G),tt,c)},D,$)},H.translateBy=function(V,Y,D,$){H.transform(V,function(){return n(this.__zoom.translate(typeof Y=="function"?Y.apply(this,arguments):Y,typeof D=="function"?D.apply(this,arguments):D),t.apply(this,arguments),c)},null,$)},H.translateTo=function(V,Y,D,$,tt){H.transform(V,function(){var W=t.apply(this,arguments),M=this.__zoom,G=$==null?z(W):typeof $=="function"?$.apply(this,arguments):$;return n(Ls.translate(G[0],G[1]).scale(M.k).translate(typeof Y=="function"?-Y.apply(this,arguments):-Y,typeof D=="function"?-D.apply(this,arguments):-D),W,c)},$,tt)};function F(V,Y){return Y=Math.max(l[0],Math.min(l[1],Y)),Y===V.k?V:new zi(Y,V.x,V.y)}function q(V,Y,D){var $=Y[0]-D[0]*V.k,tt=Y[1]-D[1]*V.k;return $===V.x&&tt===V.y?V:new zi(V.k,$,tt)}function z(V){return[(+V[0][0]+ +V[1][0])/2,(+V[0][1]+ +V[1][1])/2]}function X(V,Y,D,$){V.on("start.zoom",function(){Z(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){Z(this,arguments).event($).end()}).tween("zoom",function(){var tt=this,W=arguments,M=Z(tt,W).event($),G=t.apply(tt,W),nt=D==null?z(G):typeof D=="function"?D.apply(tt,W):D,st=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),ct=tt.__zoom,gt=typeof Y=="function"?Y.apply(tt,W):Y,_t=m(ct.invert(nt).concat(st/ct.k),gt.invert(nt).concat(st/gt.k));return function(xt){if(xt===1)xt=gt;else{var bt=_t(xt),Ht=st/bt[2];xt=new zi(Ht,nt[0]-bt[0]*Ht,nt[1]-bt[1]*Ht)}M.zoom(null,xt)}})}function Z(V,Y,D){return!D&&V.__zooming||new P(V,Y)}function P(V,Y){this.that=V,this.args=Y,this.active=0,this.sourceEvent=null,this.extent=t.apply(V,Y),this.taps=0}P.prototype={event:function(V){return V&&(this.sourceEvent=V),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(V,Y){return this.mouse&&V!=="mouse"&&(this.mouse[1]=Y.invert(this.mouse[0])),this.touch0&&V!=="touch"&&(this.touch0[1]=Y.invert(this.touch0[0])),this.touch1&&V!=="touch"&&(this.touch1[1]=Y.invert(this.touch1[0])),this.that.__zoom=Y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(V){var Y=Mr(this.that).datum();p.call(V,this.that,new FD(V,{sourceEvent:this.sourceEvent,target:H,transform:this.that.__zoom,dispatch:p}),Y)}};function S(V,...Y){if(!e.apply(this,arguments))return;var D=Z(this,Y).event(V),$=this.__zoom,tt=Math.max(l[0],Math.min(l[1],$.k*Math.pow(2,i.apply(this,arguments)))),W=oi(V);if(D.wheel)(D.mouse[0][0]!==W[0]||D.mouse[0][1]!==W[1])&&(D.mouse[1]=$.invert(D.mouse[0]=W)),clearTimeout(D.wheel);else{if($.k===tt)return;D.mouse=[W,$.invert(W)],Ch(this),D.start()}zu(V),D.wheel=setTimeout(M,I),D.zoom("mouse",n(q(F($,tt),D.mouse[0],D.mouse[1]),D.extent,c));function M(){D.wheel=null,D.end()}}function C(V,...Y){if(E||!e.apply(this,arguments))return;var D=V.currentTarget,$=Z(this,Y,!0).event(V),tt=Mr(V.view).on("mousemove.zoom",nt,!0).on("mouseup.zoom",st,!0),W=oi(V,D),M=V.clientX,G=V.clientY;dS(V.view),eg(V),$.mouse=[W,this.__zoom.invert(W)],Ch(this),$.start();function nt(ct){if(zu(ct),!$.moved){var gt=ct.clientX-M,_t=ct.clientY-G;$.moved=gt*gt+_t*_t>L}$.event(ct).zoom("mouse",n(q($.that.__zoom,$.mouse[0]=oi(ct,D),$.mouse[1]),$.extent,c))}function st(ct){tt.on("mousemove.zoom mouseup.zoom",null),mS(ct.view,$.moved),zu(ct),$.event(ct).end()}}function O(V,...Y){if(e.apply(this,arguments)){var D=this.__zoom,$=oi(V.changedTouches?V.changedTouches[0]:V,this),tt=D.invert($),W=D.k*(V.shiftKey?.5:2),M=n(q(F(D,W),$,tt),t.apply(this,Y),c);zu(V),h>0?Mr(this).transition().duration(h).call(X,M,$,V):Mr(this).call(H.transform,M,$,V)}}function U(V,...Y){if(e.apply(this,arguments)){var D=V.touches,$=D.length,tt=Z(this,Y,V.changedTouches.length===$).event(V),W,M,G,nt;for(eg(V),M=0;M<$;++M)G=D[M],nt=oi(G,this),nt=[nt,this.__zoom.invert(nt),G.identifier],tt.touch0?!tt.touch1&&tt.touch0[2]!==nt[2]&&(tt.touch1=nt,tt.taps=0):(tt.touch0=nt,W=!0,tt.taps=1+!!y);y&&(y=clearTimeout(y)),W&&(tt.taps<2&&(v=nt[0],y=setTimeout(function(){y=null},b)),Ch(this),tt.start())}}function B(V,...Y){if(this.__zooming){var D=Z(this,Y).event(V),$=V.changedTouches,tt=$.length,W,M,G,nt;for(zu(V),W=0;W<tt;++W)M=$[W],G=oi(M,this),D.touch0&&D.touch0[2]===M.identifier?D.touch0[0]=G:D.touch1&&D.touch1[2]===M.identifier&&(D.touch1[0]=G);if(M=D.that.__zoom,D.touch1){var st=D.touch0[0],ct=D.touch0[1],gt=D.touch1[0],_t=D.touch1[1],xt=(xt=gt[0]-st[0])*xt+(xt=gt[1]-st[1])*xt,bt=(bt=_t[0]-ct[0])*bt+(bt=_t[1]-ct[1])*bt;M=F(M,Math.sqrt(xt/bt)),G=[(st[0]+gt[0])/2,(st[1]+gt[1])/2],nt=[(ct[0]+_t[0])/2,(ct[1]+_t[1])/2]}else if(D.touch0)G=D.touch0[0],nt=D.touch0[1];else return;D.zoom("touch",n(q(M,G,nt),D.extent,c))}}function R(V,...Y){if(this.__zooming){var D=Z(this,Y).event(V),$=V.changedTouches,tt=$.length,W,M;for(eg(V),E&&clearTimeout(E),E=setTimeout(function(){E=null},b),W=0;W<tt;++W)M=$[W],D.touch0&&D.touch0[2]===M.identifier?delete D.touch0:D.touch1&&D.touch1[2]===M.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),D.taps===2&&(M=oi(M,this),Math.hypot(v[0]-M[0],v[1]-M[1])<k)){var G=Mr(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return H.wheelDelta=function(V){return arguments.length?(i=typeof V=="function"?V:ch(+V),H):i},H.filter=function(V){return arguments.length?(e=typeof V=="function"?V:ch(!!V),H):e},H.touchable=function(V){return arguments.length?(o=typeof V=="function"?V:ch(!!V),H):o},H.extent=function(V){return arguments.length?(t=typeof V=="function"?V:ch([[+V[0][0],+V[0][1]],[+V[1][0],+V[1][1]]]),H):t},H.scaleExtent=function(V){return arguments.length?(l[0]=+V[0],l[1]=+V[1],H):[l[0],l[1]]},H.translateExtent=function(V){return arguments.length?(c[0][0]=+V[0][0],c[1][0]=+V[1][0],c[0][1]=+V[0][1],c[1][1]=+V[1][1],H):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},H.constrain=function(V){return arguments.length?(n=V,H):n},H.duration=function(V){return arguments.length?(h=+V,H):h},H.interpolate=function(V){return arguments.length?(m=V,H):m},H.on=function(){var V=p.on.apply(p,arguments);return V===p?H:V},H.clickDistance=function(V){return arguments.length?(L=(V=+V)*V,H):Math.sqrt(L)},H.tapDistance=function(V){return arguments.length?(k=+V,H):k},H}var QD=Jb();const sl=Ac(QD),vd=x.createContext(null),WD=vd.Provider,Gi={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},xS=Gi.error001();function Ae(e,t){const n=x.useContext(vd);if(n===null)throw new Error(xS);return tS(n,e,t)}const an=()=>{const e=x.useContext(vd);if(e===null)throw new Error(xS);return x.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},ZD=e=>e.userSelectionActive?"none":"all";function IS({position:e,children:t,className:n,style:i,...o}){const l=Ae(ZD),c=`${e}`.split("-");return ut.createElement("div",{className:kn(["react-flow__panel",n,...c]),style:{...i,pointerEvents:l},...o},t)}function JD({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:ut.createElement(IS,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ut.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const tO=({x:e,y:t,label:n,labelStyle:i={},labelShowBg:o=!0,labelBgStyle:l={},labelBgPadding:c=[2,4],labelBgBorderRadius:h=2,children:m,className:p,...y})=>{const v=x.useRef(null),[E,b]=x.useState({x:0,y:0,width:0,height:0}),I=kn(["react-flow__edge-textwrapper",p]);return x.useEffect(()=>{if(v.current){const L=v.current.getBBox();b({x:L.x,y:L.y,width:L.width,height:L.height})}},[n]),typeof n>"u"||!n?null:ut.createElement("g",{transform:`translate(${e-E.width/2} ${t-E.height/2})`,className:I,visibility:E.width?"visible":"hidden",...y},o&&ut.createElement("rect",{width:E.width+2*c[0],x:-c[0],y:-c[1],height:E.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:h,ry:h}),ut.createElement("text",{className:"react-flow__edge-text",y:E.height/2,dy:"0.3em",ref:v,style:i},n),m)};var eO=x.memo(tO);const Ny=e=>({width:e.offsetWidth,height:e.offsetHeight}),vl=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Dy=(e={x:0,y:0},t)=>({x:vl(e.x,t[0][0],t[1][0]),y:vl(e.y,t[0][1],t[1][1])}),PT=(e,t,n)=>e<t?vl(Math.abs(e-t),1,50)/50:e>n?-vl(Math.abs(e-n),1,50)/50:0,NS=(e,t)=>{const n=PT(e.x,35,t.width-35)*20,i=PT(e.y,35,t.height-35)*20;return[n,i]},DS=e=>e.getRootNode?.()||window?.document,nO=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Oy=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),rO=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),LT=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Pg=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},iO=e=>Sr(e.width)&&Sr(e.height)&&Sr(e.x)&&Sr(e.y),Sr=e=>!isNaN(e)&&isFinite(e),Ne=Symbol.for("internals"),OS=["Enter"," ","Escape"],sO=(e,t)=>{},oO=e=>"nativeEvent"in e;function Lg(e){const n=(oO(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const MS=e=>"clientX"in e,Us=(e,t)=>{const n=MS(e),i=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:i-(t?.left??0),y:o-(t?.top??0)}},qh=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Ic=({id:e,path:t,labelX:n,labelY:i,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:p,style:y,markerEnd:v,markerStart:E,interactionWidth:b=20})=>ut.createElement(ut.Fragment,null,ut.createElement("path",{id:e,style:y,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:E}),b&&ut.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:b,className:"react-flow__edge-interaction"}),o&&Sr(n)&&Sr(i)?ut.createElement(eO,{x:n,y:i,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:p}):null);Ic.displayName="BaseEdge";function Hu(e,t,n){return n===void 0?n:i=>{const o=t().edges.find(l=>l.id===e);o&&n(i,{...o})}}function kS({sourceX:e,sourceY:t,targetX:n,targetY:i}){const o=Math.abs(n-e)/2,l=n<e?n+o:n-o,c=Math.abs(i-t)/2,h=i<t?i+c:i-c;return[l,h,o,c]}function VS({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:h}){const m=e*.125+o*.375+c*.375+n*.125,p=t*.125+l*.375+h*.375+i*.125,y=Math.abs(m-e),v=Math.abs(p-t);return[m,p,y,v]}var $s;(function(e){e.Strict="strict",e.Loose="loose"})($s||($s={}));var zo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(zo||(zo={}));var hc;(function(e){e.Partial="partial",e.Full="full"})(hc||(hc={}));var Ds;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ds||(Ds={}));var dc;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(dc||(dc={}));var At;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(At||(At={}));function UT({pos:e,x1:t,y1:n,x2:i,y2:o}){return e===At.Left||e===At.Right?[.5*(t+i),n]:[t,.5*(n+o)]}function PS({sourceX:e,sourceY:t,sourcePosition:n=At.Bottom,targetX:i,targetY:o,targetPosition:l=At.Top}){const[c,h]=UT({pos:n,x1:e,y1:t,x2:i,y2:o}),[m,p]=UT({pos:l,x1:i,y1:o,x2:e,y2:t}),[y,v,E,b]=VS({sourceX:e,sourceY:t,targetX:i,targetY:o,sourceControlX:c,sourceControlY:h,targetControlX:m,targetControlY:p});return[`M${e},${t} C${c},${h} ${m},${p} ${i},${o}`,y,v,E,b]}const My=x.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,sourcePosition:o=At.Bottom,targetPosition:l=At.Top,label:c,labelStyle:h,labelShowBg:m,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:b,markerStart:I,interactionWidth:L})=>{const[k,H,F]=PS({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:i,targetPosition:l});return ut.createElement(Ic,{path:k,labelX:H,labelY:F,label:c,labelStyle:h,labelShowBg:m,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:b,markerStart:I,interactionWidth:L})});My.displayName="SimpleBezierEdge";const BT={[At.Left]:{x:-1,y:0},[At.Right]:{x:1,y:0},[At.Top]:{x:0,y:-1},[At.Bottom]:{x:0,y:1}},aO=({source:e,sourcePosition:t=At.Bottom,target:n})=>t===At.Left||t===At.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},zT=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function lO({source:e,sourcePosition:t=At.Bottom,target:n,targetPosition:i=At.Top,center:o,offset:l}){const c=BT[t],h=BT[i],m={x:e.x+c.x*l,y:e.y+c.y*l},p={x:n.x+h.x*l,y:n.y+h.y*l},y=aO({source:m,sourcePosition:t,target:p}),v=y.x!==0?"x":"y",E=y[v];let b=[],I,L;const k={x:0,y:0},H={x:0,y:0},[F,q,z,X]=kS({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[v]*h[v]===-1){I=o.x??F,L=o.y??q;const P=[{x:I,y:m.y},{x:I,y:p.y}],S=[{x:m.x,y:L},{x:p.x,y:L}];c[v]===E?b=v==="x"?P:S:b=v==="x"?S:P}else{const P=[{x:m.x,y:p.y}],S=[{x:p.x,y:m.y}];if(v==="x"?b=c.x===E?S:P:b=c.y===E?P:S,t===i){const R=Math.abs(e[v]-n[v]);if(R<=l){const V=Math.min(l-1,l-R);c[v]===E?k[v]=(m[v]>e[v]?-1:1)*V:H[v]=(p[v]>n[v]?-1:1)*V}}if(t!==i){const R=v==="x"?"y":"x",V=c[v]===h[R],Y=m[R]>p[R],D=m[R]<p[R];(c[v]===1&&(!V&&Y||V&&D)||c[v]!==1&&(!V&&D||V&&Y))&&(b=v==="x"?P:S)}const C={x:m.x+k.x,y:m.y+k.y},O={x:p.x+H.x,y:p.y+H.y},U=Math.max(Math.abs(C.x-b[0].x),Math.abs(O.x-b[0].x)),B=Math.max(Math.abs(C.y-b[0].y),Math.abs(O.y-b[0].y));U>=B?(I=(C.x+O.x)/2,L=b[0].y):(I=b[0].x,L=(C.y+O.y)/2)}return[[e,{x:m.x+k.x,y:m.y+k.y},...b,{x:p.x+H.x,y:p.y+H.y},n],I,L,z,X]}function uO(e,t,n,i){const o=Math.min(zT(e,t)/2,zT(t,n)/2,i),{x:l,y:c}=t;if(e.x===l&&l===n.x||e.y===c&&c===n.y)return`L${l} ${c}`;if(e.y===c){const p=e.x<n.x?-1:1,y=e.y<n.y?1:-1;return`L ${l+o*p},${c}Q ${l},${c} ${l},${c+o*y}`}const h=e.x<n.x?1:-1,m=e.y<n.y?-1:1;return`L ${l},${c+o*m}Q ${l},${c} ${l+o*h},${c}`}function Ug({sourceX:e,sourceY:t,sourcePosition:n=At.Bottom,targetX:i,targetY:o,targetPosition:l=At.Top,borderRadius:c=5,centerX:h,centerY:m,offset:p=20}){const[y,v,E,b,I]=lO({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:o},targetPosition:l,center:{x:h,y:m},offset:p});return[y.reduce((k,H,F)=>{let q="";return F>0&&F<y.length-1?q=uO(y[F-1],H,y[F+1],c):q=`${F===0?"M":"L"}${H.x} ${H.y}`,k+=q,k},""),v,E,b,I]}const Ed=x.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:p,style:y,sourcePosition:v=At.Bottom,targetPosition:E=At.Top,markerEnd:b,markerStart:I,pathOptions:L,interactionWidth:k})=>{const[H,F,q]=Ug({sourceX:e,sourceY:t,sourcePosition:v,targetX:n,targetY:i,targetPosition:E,borderRadius:L?.borderRadius,offset:L?.offset});return ut.createElement(Ic,{path:H,labelX:F,labelY:q,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:p,style:y,markerEnd:b,markerStart:I,interactionWidth:k})});Ed.displayName="SmoothStepEdge";const ky=x.memo(e=>ut.createElement(Ed,{...e,pathOptions:x.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));ky.displayName="StepEdge";function cO({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[o,l,c,h]=kS({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,o,l,c,h]}const Vy=x.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:p,style:y,markerEnd:v,markerStart:E,interactionWidth:b})=>{const[I,L,k]=cO({sourceX:e,sourceY:t,targetX:n,targetY:i});return ut.createElement(Ic,{path:I,labelX:L,labelY:k,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:p,style:y,markerEnd:v,markerStart:E,interactionWidth:b})});Vy.displayName="StraightEdge";function fh(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function HT({pos:e,x1:t,y1:n,x2:i,y2:o,c:l}){switch(e){case At.Left:return[t-fh(t-i,l),n];case At.Right:return[t+fh(i-t,l),n];case At.Top:return[t,n-fh(n-o,l)];case At.Bottom:return[t,n+fh(o-n,l)]}}function LS({sourceX:e,sourceY:t,sourcePosition:n=At.Bottom,targetX:i,targetY:o,targetPosition:l=At.Top,curvature:c=.25}){const[h,m]=HT({pos:n,x1:e,y1:t,x2:i,y2:o,c}),[p,y]=HT({pos:l,x1:i,y1:o,x2:e,y2:t,c}),[v,E,b,I]=VS({sourceX:e,sourceY:t,targetX:i,targetY:o,sourceControlX:h,sourceControlY:m,targetControlX:p,targetControlY:y});return[`M${e},${t} C${h},${m} ${p},${y} ${i},${o}`,v,E,b,I]}const $h=x.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,sourcePosition:o=At.Bottom,targetPosition:l=At.Top,label:c,labelStyle:h,labelShowBg:m,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:b,markerStart:I,pathOptions:L,interactionWidth:k})=>{const[H,F,q]=LS({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:i,targetPosition:l,curvature:L?.curvature});return ut.createElement(Ic,{path:H,labelX:F,labelY:q,label:c,labelStyle:h,labelShowBg:m,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:b,markerStart:I,interactionWidth:k})});$h.displayName="BezierEdge";const Py=x.createContext(null),fO=Py.Provider;Py.Consumer;const hO=()=>x.useContext(Py),dO=e=>"id"in e&&"source"in e&&"target"in e,mO=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`reactflow__edge-${e}${t||""}-${n}${i||""}`,Bg=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`,pO=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),gO=(e,t)=>{if(!e.source||!e.target)return t;let n;return dO(e)?n={...e}:n={...e,id:mO(e)},pO(n,t)?t:t.concat(n)},zg=({x:e,y:t},[n,i,o],l,[c,h])=>{const m={x:(e-n)/o,y:(t-i)/o};return l?{x:c*Math.round(m.x/c),y:h*Math.round(m.y/h)}:m},US=({x:e,y:t},[n,i,o])=>({x:e*o+n,y:t*o+i}),cl=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],i=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-i};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-i}:o}},Ly=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,o)=>{const{x:l,y:c}=cl(o,t).positionAbsolute;return nO(i,Oy({x:l,y:c,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return rO(n)},BS=(e,t,[n,i,o]=[0,0,1],l=!1,c=!1,h=[0,0])=>{const m={x:(t.x-n)/o,y:(t.y-i)/o,width:t.width/o,height:t.height/o},p=[];return e.forEach(y=>{const{width:v,height:E,selectable:b=!0,hidden:I=!1}=y;if(c&&!b||I)return!1;const{positionAbsolute:L}=cl(y,h),k={x:L.x,y:L.y,width:v||0,height:E||0},H=Pg(m,k),F=typeof v>"u"||typeof E>"u"||v===null||E===null,q=l&&H>0,z=(v||0)*(E||0);(F||q||H>=z||y.dragging)&&p.push(y)}),p},zS=(e,t)=>{const n=e.map(i=>i.id);return t.filter(i=>n.includes(i.source)||n.includes(i.target))},HS=(e,t,n,i,o,l=.1)=>{const c=t/(e.width*(1+l)),h=n/(e.height*(1+l)),m=Math.min(c,h),p=vl(m,i,o),y=e.x+e.width/2,v=e.y+e.height/2,E=t/2-y*p,b=n/2-v*p;return{x:E,y:b,zoom:p}},ko=(e,t=0)=>e.transition().duration(t);function jT(e,t,n,i){return(t[n]||[]).reduce((o,l)=>(`${e.id}-${l.id}-${n}`!==i&&o.push({id:l.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+l.x+l.width/2,y:(e.positionAbsolute?.y??0)+l.y+l.height/2}),o),[])}function yO(e,t,n,i,o,l){const{x:c,y:h}=Us(e),p=t.elementsFromPoint(c,h).find(I=>I.classList.contains("react-flow__handle"));if(p){const I=p.getAttribute("data-nodeid");if(I){const L=Uy(void 0,p),k=p.getAttribute("data-handleid"),H=l({nodeId:I,id:k,type:L});if(H){const F=o.find(q=>q.nodeId===I&&q.type===L&&q.id===k);return{handle:{id:k,type:L,nodeId:I,x:F?.x||n.x,y:F?.y||n.y},validHandleResult:H}}}}let y=[],v=1/0;if(o.forEach(I=>{const L=Math.sqrt((I.x-n.x)**2+(I.y-n.y)**2);if(L<=i){const k=l(I);L<=v&&(L<v?y=[{handle:I,validHandleResult:k}]:L===v&&y.push({handle:I,validHandleResult:k}),v=L)}}),!y.length)return{handle:null,validHandleResult:jS()};if(y.length===1)return y[0];const E=y.some(({validHandleResult:I})=>I.isValid),b=y.some(({handle:I})=>I.type==="target");return y.find(({handle:I,validHandleResult:L})=>b?I.type==="target":E?L.isValid:!0)||y[0]}const _O={source:null,target:null,sourceHandle:null,targetHandle:null},jS=()=>({handleDomNode:null,isValid:!1,connection:_O,endHandle:null});function FS(e,t,n,i,o,l,c){const h=o==="target",m=c.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),p={...jS(),handleDomNode:m};if(m){const y=Uy(void 0,m),v=m.getAttribute("data-nodeid"),E=m.getAttribute("data-handleid"),b=m.classList.contains("connectable"),I=m.classList.contains("connectableend"),L={source:h?v:n,sourceHandle:h?E:i,target:h?n:v,targetHandle:h?i:E};p.connection=L,b&&I&&(t===$s.Strict?h&&y==="source"||!h&&y==="target":v!==n||E!==i)&&(p.endHandle={nodeId:v,handleId:E,type:y},p.isValid=l(L))}return p}function vO({nodes:e,nodeId:t,handleId:n,handleType:i}){return e.reduce((o,l)=>{if(l[Ne]){const{handleBounds:c}=l[Ne];let h=[],m=[];c&&(h=jT(l,c,"source",`${t}-${n}-${i}`),m=jT(l,c,"target",`${t}-${n}-${i}`)),o.push(...h,...m)}return o},[])}function Uy(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function ng(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function EO(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function qS({event:e,handleId:t,nodeId:n,onConnect:i,isTarget:o,getState:l,setState:c,isValidConnection:h,edgeUpdaterType:m,onReconnectEnd:p}){const y=DS(e.target),{connectionMode:v,domNode:E,autoPanOnConnect:b,connectionRadius:I,onConnectStart:L,panBy:k,getNodes:H,cancelConnection:F}=l();let q=0,z;const{x:X,y:Z}=Us(e),P=y?.elementFromPoint(X,Z),S=Uy(m,P),C=E?.getBoundingClientRect();if(!C||!S)return;let O,U=Us(e,C),B=!1,R=null,V=!1,Y=null;const D=vO({nodes:H(),nodeId:n,handleId:t,handleType:S}),$=()=>{if(!b)return;const[M,G]=NS(U,C);k({x:M,y:G}),q=requestAnimationFrame($)};c({connectionPosition:U,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:S,connectionStartHandle:{nodeId:n,handleId:t,type:S},connectionEndHandle:null}),L?.(e,{nodeId:n,handleId:t,handleType:S});function tt(M){const{transform:G}=l();U=Us(M,C);const{handle:nt,validHandleResult:st}=yO(M,y,zg(U,G,!1,[1,1]),I,D,ct=>FS(ct,v,n,t,o?"target":"source",h,y));if(z=nt,B||($(),B=!0),Y=st.handleDomNode,R=st.connection,V=st.isValid,c({connectionPosition:z&&V?US({x:z.x,y:z.y},G):U,connectionStatus:EO(!!z,V),connectionEndHandle:st.endHandle}),!z&&!V&&!Y)return ng(O);R.source!==R.target&&Y&&(ng(O),O=Y,Y.classList.add("connecting","react-flow__handle-connecting"),Y.classList.toggle("valid",V),Y.classList.toggle("react-flow__handle-valid",V))}function W(M){(z||Y)&&R&&V&&i?.(R),l().onConnectEnd?.(M),m&&p?.(M),ng(O),F(),cancelAnimationFrame(q),B=!1,V=!1,R=null,Y=null,y.removeEventListener("mousemove",tt),y.removeEventListener("mouseup",W),y.removeEventListener("touchmove",tt),y.removeEventListener("touchend",W)}y.addEventListener("mousemove",tt),y.addEventListener("mouseup",W),y.addEventListener("touchmove",tt),y.addEventListener("touchend",W)}const FT=()=>!0,TO=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),wO=(e,t,n)=>i=>{const{connectionStartHandle:o,connectionEndHandle:l,connectionClickStartHandle:c}=i;return{connecting:o?.nodeId===e&&o?.handleId===t&&o?.type===n||l?.nodeId===e&&l?.handleId===t&&l?.type===n,clickConnecting:c?.nodeId===e&&c?.handleId===t&&c?.type===n}},$S=x.forwardRef(({type:e="source",position:t=At.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:o=!0,isConnectableEnd:l=!0,id:c,onConnect:h,children:m,className:p,onMouseDown:y,onTouchStart:v,...E},b)=>{const I=c||null,L=e==="target",k=an(),H=hO(),{connectOnClick:F,noPanClassName:q}=Ae(TO,bn),{connecting:z,clickConnecting:X}=Ae(wO(H,I,e),bn);H||k.getState().onError?.("010",Gi.error010());const Z=C=>{const{defaultEdgeOptions:O,onConnect:U,hasDefaultEdges:B}=k.getState(),R={...O,...C};if(B){const{edges:V,setEdges:Y}=k.getState();Y(gO(R,V))}U?.(R),h?.(R)},P=C=>{if(!H)return;const O=MS(C);o&&(O&&C.button===0||!O)&&qS({event:C,handleId:I,nodeId:H,onConnect:Z,isTarget:L,getState:k.getState,setState:k.setState,isValidConnection:n||k.getState().isValidConnection||FT}),O?y?.(C):v?.(C)},S=C=>{const{onClickConnectStart:O,onClickConnectEnd:U,connectionClickStartHandle:B,connectionMode:R,isValidConnection:V}=k.getState();if(!H||!B&&!o)return;if(!B){O?.(C,{nodeId:H,handleId:I,handleType:e}),k.setState({connectionClickStartHandle:{nodeId:H,type:e,handleId:I}});return}const Y=DS(C.target),D=n||V||FT,{connection:$,isValid:tt}=FS({nodeId:H,id:I,type:e},R,B.nodeId,B.handleId||null,B.type,D,Y);tt&&Z($),U?.(C),k.setState({connectionClickStartHandle:null})};return ut.createElement("div",{"data-handleid":I,"data-nodeid":H,"data-handlepos":t,"data-id":`${H}-${I}-${e}`,className:kn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",q,p,{source:!L,target:L,connectable:i,connectablestart:o,connectableend:l,connecting:X,connectionindicator:i&&(o&&!z||l&&z)}]),onMouseDown:P,onTouchStart:P,onClick:F?S:void 0,ref:b,...E},m)});$S.displayName="Handle";var Gs=x.memo($S);const GS=({data:e,isConnectable:t,targetPosition:n=At.Top,sourcePosition:i=At.Bottom})=>ut.createElement(ut.Fragment,null,ut.createElement(Gs,{type:"target",position:n,isConnectable:t}),e?.label,ut.createElement(Gs,{type:"source",position:i,isConnectable:t}));GS.displayName="DefaultNode";var Hg=x.memo(GS);const YS=({data:e,isConnectable:t,sourcePosition:n=At.Bottom})=>ut.createElement(ut.Fragment,null,e?.label,ut.createElement(Gs,{type:"source",position:n,isConnectable:t}));YS.displayName="InputNode";var KS=x.memo(YS);const XS=({data:e,isConnectable:t,targetPosition:n=At.Top})=>ut.createElement(ut.Fragment,null,ut.createElement(Gs,{type:"target",position:n,isConnectable:t}),e?.label);XS.displayName="OutputNode";var QS=x.memo(XS);const By=()=>null;By.displayName="GroupNode";const bO=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),hh=e=>e.id;function SO(e,t){return bn(e.selectedNodes.map(hh),t.selectedNodes.map(hh))&&bn(e.selectedEdges.map(hh),t.selectedEdges.map(hh))}const WS=x.memo(({onSelectionChange:e})=>{const t=an(),{selectedNodes:n,selectedEdges:i}=Ae(bO,SO);return x.useEffect(()=>{const o={nodes:n,edges:i};e?.(o),t.getState().onSelectionChange.forEach(l=>l(o))},[n,i,e]),null});WS.displayName="SelectionListener";const AO=e=>!!e.onSelectionChange;function RO({onSelectionChange:e}){const t=Ae(AO);return e||t?ut.createElement(WS,{onSelectionChange:e}):null}const CO=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ga(e,t){x.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function $t(e,t,n){x.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const xO=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:o,onConnectStart:l,onConnectEnd:c,onClickConnectStart:h,onClickConnectEnd:m,nodesDraggable:p,nodesConnectable:y,nodesFocusable:v,edgesFocusable:E,edgesUpdatable:b,elevateNodesOnSelect:I,minZoom:L,maxZoom:k,nodeExtent:H,onNodesChange:F,onEdgesChange:q,elementsSelectable:z,connectionMode:X,snapGrid:Z,snapToGrid:P,translateExtent:S,connectOnClick:C,defaultEdgeOptions:O,fitView:U,fitViewOptions:B,onNodesDelete:R,onEdgesDelete:V,onNodeDrag:Y,onNodeDragStart:D,onNodeDragStop:$,onSelectionDrag:tt,onSelectionDragStart:W,onSelectionDragStop:M,noPanClassName:G,nodeOrigin:nt,rfId:st,autoPanOnConnect:ct,autoPanOnNodeDrag:gt,onError:_t,connectionRadius:xt,isValidConnection:bt,nodeDragThreshold:Ht})=>{const{setNodes:Bt,setEdges:de,setDefaultNodesAndEdges:ce,setMinZoom:ye,setMaxZoom:fe,setTranslateExtent:Nt,setNodeExtent:Pe,reset:Pt}=Ae(CO,bn),St=an();return x.useEffect(()=>{const De=i?.map(yn=>({...yn,...O}));return ce(n,De),()=>{Pt()}},[]),$t("defaultEdgeOptions",O,St.setState),$t("connectionMode",X,St.setState),$t("onConnect",o,St.setState),$t("onConnectStart",l,St.setState),$t("onConnectEnd",c,St.setState),$t("onClickConnectStart",h,St.setState),$t("onClickConnectEnd",m,St.setState),$t("nodesDraggable",p,St.setState),$t("nodesConnectable",y,St.setState),$t("nodesFocusable",v,St.setState),$t("edgesFocusable",E,St.setState),$t("edgesUpdatable",b,St.setState),$t("elementsSelectable",z,St.setState),$t("elevateNodesOnSelect",I,St.setState),$t("snapToGrid",P,St.setState),$t("snapGrid",Z,St.setState),$t("onNodesChange",F,St.setState),$t("onEdgesChange",q,St.setState),$t("connectOnClick",C,St.setState),$t("fitViewOnInit",U,St.setState),$t("fitViewOnInitOptions",B,St.setState),$t("onNodesDelete",R,St.setState),$t("onEdgesDelete",V,St.setState),$t("onNodeDrag",Y,St.setState),$t("onNodeDragStart",D,St.setState),$t("onNodeDragStop",$,St.setState),$t("onSelectionDrag",tt,St.setState),$t("onSelectionDragStart",W,St.setState),$t("onSelectionDragStop",M,St.setState),$t("noPanClassName",G,St.setState),$t("nodeOrigin",nt,St.setState),$t("rfId",st,St.setState),$t("autoPanOnConnect",ct,St.setState),$t("autoPanOnNodeDrag",gt,St.setState),$t("onError",_t,St.setState),$t("connectionRadius",xt,St.setState),$t("isValidConnection",bt,St.setState),$t("nodeDragThreshold",Ht,St.setState),Ga(e,Bt),Ga(t,de),Ga(L,ye),Ga(k,fe),Ga(S,Nt),Ga(H,Pe),null},qT={display:"none"},IO={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ZS="react-flow__node-desc",JS="react-flow__edge-desc",NO="react-flow__aria-live",DO=e=>e.ariaLiveMessage;function OO({rfId:e}){const t=Ae(DO);return ut.createElement("div",{id:`${NO}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:IO},t)}function MO({rfId:e,disableKeyboardA11y:t}){return ut.createElement(ut.Fragment,null,ut.createElement("div",{id:`${ZS}-${e}`,style:qT},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ut.createElement("div",{id:`${JS}-${e}`,style:qT},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&ut.createElement(OO,{rfId:e}))}var mc=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,i]=x.useState(!1),o=x.useRef(!1),l=x.useRef(new Set([])),[c,h]=x.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(v=>typeof v=="string").map(v=>v.split("+")),y=p.reduce((v,E)=>v.concat(...E),[]);return[p,y]}return[[],[]]},[e]);return x.useEffect(()=>{const m=typeof document<"u"?document:null,p=t?.target||m;if(e!==null){const y=b=>{if(o.current=b.ctrlKey||b.metaKey||b.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&Lg(b))return!1;const L=GT(b.code,h);l.current.add(b[L]),$T(c,l.current,!1)&&(b.preventDefault(),i(!0))},v=b=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&Lg(b))return!1;const L=GT(b.code,h);$T(c,l.current,!0)?(i(!1),l.current.clear()):l.current.delete(b[L]),b.key==="Meta"&&l.current.clear(),o.current=!1},E=()=>{l.current.clear(),i(!1)};return p?.addEventListener("keydown",y),p?.addEventListener("keyup",v),window.addEventListener("blur",E),()=>{p?.removeEventListener("keydown",y),p?.removeEventListener("keyup",v),window.removeEventListener("blur",E)}}},[e,i]),n};function $T(e,t,n){return e.filter(i=>n||i.length===t.size).some(i=>i.every(o=>t.has(o)))}function GT(e,t){return t.includes(e)?"code":"key"}function t1(e,t,n,i){const o=e.parentNode||e.parentId;if(!o)return n;const l=t.get(o),c=cl(l,i);return t1(l,t,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(l[Ne]?.z??0)>(n.z??0)?l[Ne]?.z??0:n.z??0},i)}function e1(e,t,n){e.forEach(i=>{const o=i.parentNode||i.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n?.[i.id]){const{x:l,y:c,z:h}=t1(i,e,{...i.position,z:i[Ne]?.z??0},t);i.positionAbsolute={x:l,y:c},i[Ne].z=h,n?.[i.id]&&(i[Ne].isParent=!0)}})}function rg(e,t,n,i){const o=new Map,l={},c=i?1e3:0;return e.forEach(h=>{const m=(Sr(h.zIndex)?h.zIndex:0)+(h.selected?c:0),p=t.get(h.id),y={...h,positionAbsolute:{x:h.position.x,y:h.position.y}},v=h.parentNode||h.parentId;v&&(l[v]=!0);const E=p?.type&&p?.type!==h.type;Object.defineProperty(y,Ne,{enumerable:!1,value:{handleBounds:E?void 0:p?.[Ne]?.handleBounds,z:m}}),o.set(h.id,y)}),e1(o,n,l),o}function n1(e,t={}){const{getNodes:n,width:i,height:o,minZoom:l,maxZoom:c,d3Zoom:h,d3Selection:m,fitViewOnInitDone:p,fitViewOnInit:y,nodeOrigin:v}=e(),E=t.initial&&!p&&y;if(h&&m&&(E||!t.initial)){const I=n().filter(k=>{const H=t.includeHiddenNodes?k.width&&k.height:!k.hidden;return t.nodes?.length?H&&t.nodes.some(F=>F.id===k.id):H}),L=I.every(k=>k.width&&k.height);if(I.length>0&&L){const k=Ly(I,v),{x:H,y:F,zoom:q}=HS(k,i,o,t.minZoom??l,t.maxZoom??c,t.padding??.1),z=Ls.translate(H,F).scale(q);return typeof t.duration=="number"&&t.duration>0?h.transform(ko(m,t.duration),z):h.transform(m,z),!0}}return!1}function kO(e,t){return e.forEach(n=>{const i=t.get(n.id);i&&t.set(i.id,{...i,[Ne]:i[Ne],selected:n.selected})}),new Map(t)}function VO(e,t){return t.map(n=>{const i=e.find(o=>o.id===n.id);return i&&(n.selected=i.selected),n})}function dh({changedNodes:e,changedEdges:t,get:n,set:i}){const{nodeInternals:o,edges:l,onNodesChange:c,onEdgesChange:h,hasDefaultNodes:m,hasDefaultEdges:p}=n();e?.length&&(m&&i({nodeInternals:kO(e,o)}),c?.(e)),t?.length&&(p&&i({edges:VO(t,l)}),h?.(t))}const Ya=()=>{},PO={zoomIn:Ya,zoomOut:Ya,zoomTo:Ya,getZoom:()=>1,setViewport:Ya,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ya,fitBounds:Ya,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},LO=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),UO=()=>{const e=an(),{d3Zoom:t,d3Selection:n}=Ae(LO,bn);return x.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(ko(n,o?.duration),1.2),zoomOut:o=>t.scaleBy(ko(n,o?.duration),1/1.2),zoomTo:(o,l)=>t.scaleTo(ko(n,l?.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,l)=>{const[c,h,m]=e.getState().transform,p=Ls.translate(o.x??c,o.y??h).scale(o.zoom??m);t.transform(ko(n,l?.duration),p)},getViewport:()=>{const[o,l,c]=e.getState().transform;return{x:o,y:l,zoom:c}},fitView:o=>n1(e.getState,o),setCenter:(o,l,c)=>{const{width:h,height:m,maxZoom:p}=e.getState(),y=typeof c?.zoom<"u"?c.zoom:p,v=h/2-o*y,E=m/2-l*y,b=Ls.translate(v,E).scale(y);t.transform(ko(n,c?.duration),b)},fitBounds:(o,l)=>{const{width:c,height:h,minZoom:m,maxZoom:p}=e.getState(),{x:y,y:v,zoom:E}=HS(o,c,h,m,p,l?.padding??.1),b=Ls.translate(y,v).scale(E);t.transform(ko(n,l?.duration),b)},project:o=>{const{transform:l,snapToGrid:c,snapGrid:h}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),zg(o,l,c,h)},screenToFlowPosition:o=>{const{transform:l,snapToGrid:c,snapGrid:h,domNode:m}=e.getState();if(!m)return o;const{x:p,y}=m.getBoundingClientRect(),v={x:o.x-p,y:o.y-y};return zg(v,l,c,h)},flowToScreenPosition:o=>{const{transform:l,domNode:c}=e.getState();if(!c)return o;const{x:h,y:m}=c.getBoundingClientRect(),p=US(o,l);return{x:p.x+h,y:p.y+m}},viewportInitialized:!0}:PO,[t,n])};function Nc(){const e=UO(),t=an(),n=x.useCallback(()=>t.getState().getNodes().map(L=>({...L})),[]),i=x.useCallback(L=>t.getState().nodeInternals.get(L),[]),o=x.useCallback(()=>{const{edges:L=[]}=t.getState();return L.map(k=>({...k}))},[]),l=x.useCallback(L=>{const{edges:k=[]}=t.getState();return k.find(H=>H.id===L)},[]),c=x.useCallback(L=>{const{getNodes:k,setNodes:H,hasDefaultNodes:F,onNodesChange:q}=t.getState(),z=k(),X=typeof L=="function"?L(z):L;if(F)H(X);else if(q){const Z=X.length===0?z.map(P=>({type:"remove",id:P.id})):X.map(P=>({item:P,type:"reset"}));q(Z)}},[]),h=x.useCallback(L=>{const{edges:k=[],setEdges:H,hasDefaultEdges:F,onEdgesChange:q}=t.getState(),z=typeof L=="function"?L(k):L;if(F)H(z);else if(q){const X=z.length===0?k.map(Z=>({type:"remove",id:Z.id})):z.map(Z=>({item:Z,type:"reset"}));q(X)}},[]),m=x.useCallback(L=>{const k=Array.isArray(L)?L:[L],{getNodes:H,setNodes:F,hasDefaultNodes:q,onNodesChange:z}=t.getState();if(q){const Z=[...H(),...k];F(Z)}else if(z){const X=k.map(Z=>({item:Z,type:"add"}));z(X)}},[]),p=x.useCallback(L=>{const k=Array.isArray(L)?L:[L],{edges:H=[],setEdges:F,hasDefaultEdges:q,onEdgesChange:z}=t.getState();if(q)F([...H,...k]);else if(z){const X=k.map(Z=>({item:Z,type:"add"}));z(X)}},[]),y=x.useCallback(()=>{const{getNodes:L,edges:k=[],transform:H}=t.getState(),[F,q,z]=H;return{nodes:L().map(X=>({...X})),edges:k.map(X=>({...X})),viewport:{x:F,y:q,zoom:z}}},[]),v=x.useCallback(({nodes:L,edges:k})=>{const{nodeInternals:H,getNodes:F,edges:q,hasDefaultNodes:z,hasDefaultEdges:X,onNodesDelete:Z,onEdgesDelete:P,onNodesChange:S,onEdgesChange:C}=t.getState(),O=(L||[]).map(Y=>Y.id),U=(k||[]).map(Y=>Y.id),B=F().reduce((Y,D)=>{const $=D.parentNode||D.parentId,tt=!O.includes(D.id)&&$&&Y.find(M=>M.id===$);return(typeof D.deletable=="boolean"?D.deletable:!0)&&(O.includes(D.id)||tt)&&Y.push(D),Y},[]),R=q.filter(Y=>typeof Y.deletable=="boolean"?Y.deletable:!0),V=R.filter(Y=>U.includes(Y.id));if(B||V){const Y=zS(B,R),D=[...V,...Y],$=D.reduce((tt,W)=>(tt.includes(W.id)||tt.push(W.id),tt),[]);if((X||z)&&(X&&t.setState({edges:q.filter(tt=>!$.includes(tt.id))}),z&&(B.forEach(tt=>{H.delete(tt.id)}),t.setState({nodeInternals:new Map(H)}))),$.length>0&&(P?.(D),C&&C($.map(tt=>({id:tt,type:"remove"})))),B.length>0&&(Z?.(B),S)){const tt=B.map(W=>({id:W.id,type:"remove"}));S(tt)}}},[]),E=x.useCallback(L=>{const k=iO(L),H=k?null:t.getState().nodeInternals.get(L.id);return!k&&!H?[null,null,k]:[k?L:LT(H),H,k]},[]),b=x.useCallback((L,k=!0,H)=>{const[F,q,z]=E(L);return F?(H||t.getState().getNodes()).filter(X=>{if(!z&&(X.id===q.id||!X.positionAbsolute))return!1;const Z=LT(X),P=Pg(Z,F);return k&&P>0||P>=F.width*F.height}):[]},[]),I=x.useCallback((L,k,H=!0)=>{const[F]=E(L);if(!F)return!1;const q=Pg(F,k);return H&&q>0||q>=F.width*F.height},[]);return x.useMemo(()=>({...e,getNodes:n,getNode:i,getEdges:o,getEdge:l,setNodes:c,setEdges:h,addNodes:m,addEdges:p,toObject:y,deleteElements:v,getIntersectingNodes:b,isNodeIntersecting:I}),[e,n,i,o,l,c,h,m,p,y,v,b,I])}const BO={actInsideInputWithModifier:!1};var zO=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=an(),{deleteElements:i}=Nc(),o=mc(e,BO),l=mc(t);x.useEffect(()=>{if(o){const{edges:c,getNodes:h}=n.getState(),m=h().filter(y=>y.selected),p=c.filter(y=>y.selected);i({nodes:m,edges:p}),n.setState({nodesSelectionActive:!1})}},[o]),x.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])};function HO(e){const t=an();x.useEffect(()=>{let n;const i=()=>{if(!e.current)return;const o=Ny(e.current);(o.height===0||o.width===0)&&t.getState().onError?.("004",Gi.error004()),t.setState({width:o.width||500,height:o.height||500})};return i(),window.addEventListener("resize",i),e.current&&(n=new ResizeObserver(()=>i()),n.observe(e.current)),()=>{window.removeEventListener("resize",i),n&&e.current&&n.unobserve(e.current)}},[])}const zy={position:"absolute",width:"100%",height:"100%",top:0,left:0},jO=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,mh=e=>({x:e.x,y:e.y,zoom:e.k}),Ka=(e,t)=>e.target.closest(`.${t}`),YT=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),KT=e=>{const t=e.ctrlKey&&qh()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},FO=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),qO=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:o=!0,zoomOnPinch:l=!0,panOnScroll:c=!1,panOnScrollSpeed:h=.5,panOnScrollMode:m=zo.Free,zoomOnDoubleClick:p=!0,elementsSelectable:y,panOnDrag:v=!0,defaultViewport:E,translateExtent:b,minZoom:I,maxZoom:L,zoomActivationKeyCode:k,preventScrolling:H=!0,children:F,noWheelClassName:q,noPanClassName:z})=>{const X=x.useRef(),Z=an(),P=x.useRef(!1),S=x.useRef(!1),C=x.useRef(null),O=x.useRef({x:0,y:0,zoom:0}),{d3Zoom:U,d3Selection:B,d3ZoomHandler:R,userSelectionActive:V}=Ae(FO,bn),Y=mc(k),D=x.useRef(0),$=x.useRef(!1),tt=x.useRef();return HO(C),x.useEffect(()=>{if(C.current){const W=C.current.getBoundingClientRect(),M=XD().scaleExtent([I,L]).translateExtent(b),G=Mr(C.current).call(M),nt=Ls.translate(E.x,E.y).scale(vl(E.zoom,I,L)),st=[[0,0],[W.width,W.height]],ct=M.constrain()(nt,st,b);M.transform(G,ct),M.wheelDelta(KT),Z.setState({d3Zoom:M,d3Selection:G,d3ZoomHandler:G.on("wheel.zoom"),transform:[ct.x,ct.y,ct.k],domNode:C.current.closest(".react-flow")})}},[]),x.useEffect(()=>{B&&U&&(c&&!Y&&!V?B.on("wheel.zoom",W=>{if(Ka(W,q))return!1;W.preventDefault(),W.stopImmediatePropagation();const M=B.property("__zoom").k||1;if(W.ctrlKey&&l){const bt=oi(W),Ht=KT(W),Bt=M*Math.pow(2,Ht);U.scaleTo(B,Bt,bt,W);return}const G=W.deltaMode===1?20:1;let nt=m===zo.Vertical?0:W.deltaX*G,st=m===zo.Horizontal?0:W.deltaY*G;!qh()&&W.shiftKey&&m!==zo.Vertical&&(nt=W.deltaY*G,st=0),U.translateBy(B,-(nt/M)*h,-(st/M)*h,{internal:!0});const ct=mh(B.property("__zoom")),{onViewportChangeStart:gt,onViewportChange:_t,onViewportChangeEnd:xt}=Z.getState();clearTimeout(tt.current),$.current||($.current=!0,t?.(W,ct),gt?.(ct)),$.current&&(e?.(W,ct),_t?.(ct),tt.current=setTimeout(()=>{n?.(W,ct),xt?.(ct),$.current=!1},150))},{passive:!1}):typeof R<"u"&&B.on("wheel.zoom",function(W,M){if(!H&&W.type==="wheel"&&!W.ctrlKey||Ka(W,q))return null;W.preventDefault(),R.call(this,W,M)},{passive:!1}))},[V,c,m,B,U,R,Y,l,H,q,t,e,n]),x.useEffect(()=>{U&&U.on("start",W=>{if(!W.sourceEvent||W.sourceEvent.internal)return null;D.current=W.sourceEvent?.button;const{onViewportChangeStart:M}=Z.getState(),G=mh(W.transform);P.current=!0,O.current=G,W.sourceEvent?.type==="mousedown"&&Z.setState({paneDragging:!0}),M?.(G),t?.(W.sourceEvent,G)})},[U,t]),x.useEffect(()=>{U&&(V&&!P.current?U.on("zoom",null):V||U.on("zoom",W=>{const{onViewportChange:M}=Z.getState();if(Z.setState({transform:[W.transform.x,W.transform.y,W.transform.k]}),S.current=!!(i&&YT(v,D.current??0)),(e||M)&&!W.sourceEvent?.internal){const G=mh(W.transform);M?.(G),e?.(W.sourceEvent,G)}}))},[V,U,e,v,i]),x.useEffect(()=>{U&&U.on("end",W=>{if(!W.sourceEvent||W.sourceEvent.internal)return null;const{onViewportChangeEnd:M}=Z.getState();if(P.current=!1,Z.setState({paneDragging:!1}),i&&YT(v,D.current??0)&&!S.current&&i(W.sourceEvent),S.current=!1,(n||M)&&jO(O.current,W.transform)){const G=mh(W.transform);O.current=G,clearTimeout(X.current),X.current=setTimeout(()=>{M?.(G),n?.(W.sourceEvent,G)},c?150:0)}})},[U,c,v,n,i]),x.useEffect(()=>{U&&U.filter(W=>{const M=Y||o,G=l&&W.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&W.button===1&&W.type==="mousedown"&&(Ka(W,"react-flow__node")||Ka(W,"react-flow__edge")))return!0;if(!v&&!M&&!c&&!p&&!l||V||!p&&W.type==="dblclick"||Ka(W,q)&&W.type==="wheel"||Ka(W,z)&&(W.type!=="wheel"||c&&W.type==="wheel"&&!Y)||!l&&W.ctrlKey&&W.type==="wheel"||!M&&!c&&!G&&W.type==="wheel"||!v&&(W.type==="mousedown"||W.type==="touchstart")||Array.isArray(v)&&!v.includes(W.button)&&W.type==="mousedown")return!1;const nt=Array.isArray(v)&&v.includes(W.button)||!W.button||W.button<=1;return(!W.ctrlKey||W.type==="wheel")&&nt})},[V,U,o,l,c,p,v,y,Y]),ut.createElement("div",{className:"react-flow__renderer",ref:C,style:zy},F)},$O=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function GO(){const{userSelectionActive:e,userSelectionRect:t}=Ae($O,bn);return e&&t?ut.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function XT(e,t){const n=t.parentNode||t.parentId,i=e.find(o=>o.id===n);if(i){const o=t.position.x+t.width-i.width,l=t.position.y+t.height-i.height;if(o>0||l>0||t.position.x<0||t.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,o>0&&(i.style.width+=o),l>0&&(i.style.height+=l),t.position.x<0){const c=Math.abs(t.position.x);i.position.x=i.position.x-c,i.style.width+=c,t.position.x=0}if(t.position.y<0){const c=Math.abs(t.position.y);i.position.y=i.position.y-c,i.style.height+=c,t.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function r1(e,t){if(e.some(i=>i.type==="reset"))return e.filter(i=>i.type==="reset").map(i=>i.item);const n=e.filter(i=>i.type==="add").map(i=>i.item);return t.reduce((i,o)=>{const l=e.filter(h=>h.id===o.id);if(l.length===0)return i.push(o),i;const c={...o};for(const h of l)if(h)switch(h.type){case"select":{c.selected=h.selected;break}case"position":{typeof h.position<"u"&&(c.position=h.position),typeof h.positionAbsolute<"u"&&(c.positionAbsolute=h.positionAbsolute),typeof h.dragging<"u"&&(c.dragging=h.dragging),c.expandParent&&XT(i,c);break}case"dimensions":{typeof h.dimensions<"u"&&(c.width=h.dimensions.width,c.height=h.dimensions.height),typeof h.updateStyle<"u"&&(c.style={...c.style||{},...h.dimensions}),typeof h.resizing=="boolean"&&(c.resizing=h.resizing),c.expandParent&&XT(i,c);break}case"remove":return i}return i.push(c),i},n)}function i1(e,t){return r1(e,t)}function YO(e,t){return r1(e,t)}const Is=(e,t)=>({id:e,type:"select",selected:t});function ol(e,t){return e.reduce((n,i)=>{const o=t.includes(i.id);return!i.selected&&o?(i.selected=!0,n.push(Is(i.id,!0))):i.selected&&!o&&(i.selected=!1,n.push(Is(i.id,!1))),n},[])}const ig=(e,t)=>n=>{n.target===t.current&&e?.(n)},KO=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),s1=x.memo(({isSelecting:e,selectionMode:t=hc.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:h,onPaneMouseEnter:m,onPaneMouseMove:p,onPaneMouseLeave:y,children:v})=>{const E=x.useRef(null),b=an(),I=x.useRef(0),L=x.useRef(0),k=x.useRef(),{userSelectionActive:H,elementsSelectable:F,dragging:q}=Ae(KO,bn),z=()=>{b.setState({userSelectionActive:!1,userSelectionRect:null}),I.current=0,L.current=0},X=R=>{l?.(R),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},Z=R=>{if(Array.isArray(n)&&n?.includes(2)){R.preventDefault();return}c?.(R)},P=h?R=>h(R):void 0,S=R=>{const{resetSelectedElements:V,domNode:Y}=b.getState();if(k.current=Y?.getBoundingClientRect(),!F||!e||R.button!==0||R.target!==E.current||!k.current)return;const{x:D,y:$}=Us(R,k.current);V(),b.setState({userSelectionRect:{width:0,height:0,startX:D,startY:$,x:D,y:$}}),i?.(R)},C=R=>{const{userSelectionRect:V,nodeInternals:Y,edges:D,transform:$,onNodesChange:tt,onEdgesChange:W,nodeOrigin:M,getNodes:G}=b.getState();if(!e||!k.current||!V)return;b.setState({userSelectionActive:!0,nodesSelectionActive:!1});const nt=Us(R,k.current),st=V.startX??0,ct=V.startY??0,gt={...V,x:nt.x<st?nt.x:st,y:nt.y<ct?nt.y:ct,width:Math.abs(nt.x-st),height:Math.abs(nt.y-ct)},_t=G(),xt=BS(Y,gt,$,t===hc.Partial,!0,M),bt=zS(xt,D).map(Bt=>Bt.id),Ht=xt.map(Bt=>Bt.id);if(I.current!==Ht.length){I.current=Ht.length;const Bt=ol(_t,Ht);Bt.length&&tt?.(Bt)}if(L.current!==bt.length){L.current=bt.length;const Bt=ol(D,bt);Bt.length&&W?.(Bt)}b.setState({userSelectionRect:gt})},O=R=>{if(R.button!==0)return;const{userSelectionRect:V}=b.getState();!H&&V&&R.target===E.current&&X?.(R),b.setState({nodesSelectionActive:I.current>0}),z(),o?.(R)},U=R=>{H&&(b.setState({nodesSelectionActive:I.current>0}),o?.(R)),z()},B=F&&(e||H);return ut.createElement("div",{className:kn(["react-flow__pane",{dragging:q,selection:e}]),onClick:B?void 0:ig(X,E),onContextMenu:ig(Z,E),onWheel:ig(P,E),onMouseEnter:B?void 0:m,onMouseDown:B?S:void 0,onMouseMove:B?C:p,onMouseUp:B?O:void 0,onMouseLeave:B?U:y,ref:E,style:zy},v,ut.createElement(GO,null))});s1.displayName="Pane";function o1(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const i=t.get(n);return i?i.selected?!0:o1(i,t):!1}function QT(e,t,n){let i=e;do{if(i?.matches(t))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function XO(e,t,n,i){return Array.from(e.values()).filter(o=>(o.selected||o.id===i)&&(!o.parentNode||o.parentId||!o1(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>({id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(o.positionAbsolute?.x??0),y:n.y-(o.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}))}function QO(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function a1(e,t,n,i,o=[0,0],l){const c=QO(e,e.extent||i);let h=c;const m=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(m&&e.width&&e.height){const v=n.get(m),{x:E,y:b}=cl(v,o).positionAbsolute;h=v&&Sr(E)&&Sr(b)&&Sr(v.width)&&Sr(v.height)?[[E+e.width*o[0],b+e.height*o[1]],[E+v.width-e.width+e.width*o[0],b+v.height-e.height+e.height*o[1]]]:h}else l?.("005",Gi.error005()),h=c;else if(e.extent&&m&&e.extent!=="parent"){const v=n.get(m),{x:E,y:b}=cl(v,o).positionAbsolute;h=[[e.extent[0][0]+E,e.extent[0][1]+b],[e.extent[1][0]+E,e.extent[1][1]+b]]}let p={x:0,y:0};if(m){const v=n.get(m);p=cl(v,o).positionAbsolute}const y=h&&h!=="parent"?Dy(t,h):t;return{position:{x:y.x-p.x,y:y.y-p.y},positionAbsolute:y}}function sg({nodeId:e,dragItems:t,nodeInternals:n}){const i=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?i.find(o=>o.id===e):i[0],i]}const WT=(e,t,n,i)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const l=Array.from(o),c=t.getBoundingClientRect(),h={x:c.width*i[0],y:c.height*i[1]};return l.map(m=>{const p=m.getBoundingClientRect();return{id:m.getAttribute("data-handleid"),position:m.getAttribute("data-handlepos"),x:(p.left-c.left-h.x)/n,y:(p.top-c.top-h.y)/n,...Ny(m)}})};function ju(e,t,n){return n===void 0?n:i=>{const o=t().nodeInternals.get(e);o&&n(i,{...o})}}function jg({id:e,store:t,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:o,unselectNodesAndEdges:l,multiSelectionActive:c,nodeInternals:h,onError:m}=t.getState(),p=h.get(e);if(!p){m?.("012",Gi.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&c)&&(l({nodes:[p],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):o([e])}function WO(){const e=an();return x.useCallback(({sourceEvent:n})=>{const{transform:i,snapGrid:o,snapToGrid:l}=e.getState(),c=n.touches?n.touches[0].clientX:n.clientX,h=n.touches?n.touches[0].clientY:n.clientY,m={x:(c-i[0])/i[2],y:(h-i[1])/i[2]};return{xSnapped:l?o[0]*Math.round(m.x/o[0]):m.x,ySnapped:l?o[1]*Math.round(m.y/o[1]):m.y,...m}},[])}function og(e){return(t,n,i)=>e?.(t,i)}function l1({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:i,nodeId:o,isSelectable:l,selectNodesOnDrag:c}){const h=an(),[m,p]=x.useState(!1),y=x.useRef([]),v=x.useRef({x:null,y:null}),E=x.useRef(0),b=x.useRef(null),I=x.useRef({x:0,y:0}),L=x.useRef(null),k=x.useRef(!1),H=x.useRef(!1),F=x.useRef(!1),q=WO();return x.useEffect(()=>{if(e?.current){const z=Mr(e.current),X=({x:S,y:C})=>{const{nodeInternals:O,onNodeDrag:U,onSelectionDrag:B,updateNodePositions:R,nodeExtent:V,snapGrid:Y,snapToGrid:D,nodeOrigin:$,onError:tt}=h.getState();v.current={x:S,y:C};let W=!1,M={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&V){const nt=Ly(y.current,$);M=Oy(nt)}if(y.current=y.current.map(nt=>{const st={x:S-nt.distance.x,y:C-nt.distance.y};D&&(st.x=Y[0]*Math.round(st.x/Y[0]),st.y=Y[1]*Math.round(st.y/Y[1]));const ct=[[V[0][0],V[0][1]],[V[1][0],V[1][1]]];y.current.length>1&&V&&!nt.extent&&(ct[0][0]=nt.positionAbsolute.x-M.x+V[0][0],ct[1][0]=nt.positionAbsolute.x+(nt.width??0)-M.x2+V[1][0],ct[0][1]=nt.positionAbsolute.y-M.y+V[0][1],ct[1][1]=nt.positionAbsolute.y+(nt.height??0)-M.y2+V[1][1]);const gt=a1(nt,st,O,ct,$,tt);return W=W||nt.position.x!==gt.position.x||nt.position.y!==gt.position.y,nt.position=gt.position,nt.positionAbsolute=gt.positionAbsolute,nt}),!W)return;R(y.current,!0,!0),p(!0);const G=o?U:og(B);if(G&&L.current){const[nt,st]=sg({nodeId:o,dragItems:y.current,nodeInternals:O});G(L.current,nt,st)}},Z=()=>{if(!b.current)return;const[S,C]=NS(I.current,b.current);if(S!==0||C!==0){const{transform:O,panBy:U}=h.getState();v.current.x=(v.current.x??0)-S/O[2],v.current.y=(v.current.y??0)-C/O[2],U({x:S,y:C})&&X(v.current)}E.current=requestAnimationFrame(Z)},P=S=>{const{nodeInternals:C,multiSelectionActive:O,nodesDraggable:U,unselectNodesAndEdges:B,onNodeDragStart:R,onSelectionDragStart:V}=h.getState();H.current=!0;const Y=o?R:og(V);(!c||!l)&&!O&&o&&(C.get(o)?.selected||B()),o&&l&&c&&jg({id:o,store:h,nodeRef:e});const D=q(S);if(v.current=D,y.current=XO(C,U,D,o),Y&&y.current){const[$,tt]=sg({nodeId:o,dragItems:y.current,nodeInternals:C});Y(S.sourceEvent,$,tt)}};if(t)z.on(".drag",null);else{const S=s2().on("start",C=>{const{domNode:O,nodeDragThreshold:U}=h.getState();U===0&&P(C),F.current=!1;const B=q(C);v.current=B,b.current=O?.getBoundingClientRect()||null,I.current=Us(C.sourceEvent,b.current)}).on("drag",C=>{const O=q(C),{autoPanOnNodeDrag:U,nodeDragThreshold:B}=h.getState();if(C.sourceEvent.type==="touchmove"&&C.sourceEvent.touches.length>1&&(F.current=!0),!F.current){if(!k.current&&H.current&&U&&(k.current=!0,Z()),!H.current){const R=O.xSnapped-(v?.current?.x??0),V=O.ySnapped-(v?.current?.y??0);Math.sqrt(R*R+V*V)>B&&P(C)}(v.current.x!==O.xSnapped||v.current.y!==O.ySnapped)&&y.current&&H.current&&(L.current=C.sourceEvent,I.current=Us(C.sourceEvent,b.current),X(O))}}).on("end",C=>{if(!(!H.current||F.current)&&(p(!1),k.current=!1,H.current=!1,cancelAnimationFrame(E.current),y.current)){const{updateNodePositions:O,nodeInternals:U,onNodeDragStop:B,onSelectionDragStop:R}=h.getState(),V=o?B:og(R);if(O(y.current,!1,!1),V){const[Y,D]=sg({nodeId:o,dragItems:y.current,nodeInternals:U});V(C.sourceEvent,Y,D)}}}).filter(C=>{const O=C.target;return!C.button&&(!n||!QT(O,`.${n}`,e))&&(!i||QT(O,i,e))});return z.call(S),()=>{z.on(".drag",null)}}}},[e,t,n,i,l,h,o,c,q]),m}function u1(){const e=an();return x.useCallback(n=>{const{nodeInternals:i,nodeExtent:o,updateNodePositions:l,getNodes:c,snapToGrid:h,snapGrid:m,onError:p,nodesDraggable:y}=e.getState(),v=c().filter(F=>F.selected&&(F.draggable||y&&typeof F.draggable>"u")),E=h?m[0]:5,b=h?m[1]:5,I=n.isShiftPressed?4:1,L=n.x*E*I,k=n.y*b*I,H=v.map(F=>{if(F.positionAbsolute){const q={x:F.positionAbsolute.x+L,y:F.positionAbsolute.y+k};h&&(q.x=m[0]*Math.round(q.x/m[0]),q.y=m[1]*Math.round(q.y/m[1]));const{positionAbsolute:z,position:X}=a1(F,q,i,o,void 0,p);F.position=X,F.positionAbsolute=z}return F});l(H,!0,!1)},[])}const fl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Fu=e=>{const t=({id:n,type:i,data:o,xPos:l,yPos:c,xPosOrigin:h,yPosOrigin:m,selected:p,onClick:y,onMouseEnter:v,onMouseMove:E,onMouseLeave:b,onContextMenu:I,onDoubleClick:L,style:k,className:H,isDraggable:F,isSelectable:q,isConnectable:z,isFocusable:X,selectNodesOnDrag:Z,sourcePosition:P,targetPosition:S,hidden:C,resizeObserver:O,dragHandle:U,zIndex:B,isParent:R,noDragClassName:V,noPanClassName:Y,initialized:D,disableKeyboardA11y:$,ariaLabel:tt,rfId:W,hasHandleBounds:M})=>{const G=an(),nt=x.useRef(null),st=x.useRef(null),ct=x.useRef(P),gt=x.useRef(S),_t=x.useRef(i),xt=q||F||y||v||E||b,bt=u1(),Ht=ju(n,G.getState,v),Bt=ju(n,G.getState,E),de=ju(n,G.getState,b),ce=ju(n,G.getState,I),ye=ju(n,G.getState,L),fe=Pt=>{const{nodeDragThreshold:St}=G.getState();if(q&&(!Z||!F||St>0)&&jg({id:n,store:G,nodeRef:nt}),y){const De=G.getState().nodeInternals.get(n);De&&y(Pt,{...De})}},Nt=Pt=>{if(!Lg(Pt)&&!$)if(OS.includes(Pt.key)&&q){const St=Pt.key==="Escape";jg({id:n,store:G,unselect:St,nodeRef:nt})}else F&&p&&Object.prototype.hasOwnProperty.call(fl,Pt.key)&&(G.setState({ariaLiveMessage:`Moved selected node ${Pt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~c}`}),bt({x:fl[Pt.key].x,y:fl[Pt.key].y,isShiftPressed:Pt.shiftKey}))};x.useEffect(()=>()=>{st.current&&(O?.unobserve(st.current),st.current=null)},[]),x.useEffect(()=>{if(nt.current&&!C){const Pt=nt.current;(!D||!M||st.current!==Pt)&&(st.current&&O?.unobserve(st.current),O?.observe(Pt),st.current=Pt)}},[C,D,M]),x.useEffect(()=>{const Pt=_t.current!==i,St=ct.current!==P,De=gt.current!==S;nt.current&&(Pt||St||De)&&(Pt&&(_t.current=i),St&&(ct.current=P),De&&(gt.current=S),G.getState().updateNodeDimensions([{id:n,nodeElement:nt.current,forceUpdate:!0}]))},[n,i,P,S]);const Pe=l1({nodeRef:nt,disabled:C||!F,noDragClassName:V,handleSelector:U,nodeId:n,isSelectable:q,selectNodesOnDrag:Z});return C?null:ut.createElement("div",{className:kn(["react-flow__node",`react-flow__node-${i}`,{[Y]:F},H,{selected:p,selectable:q,parent:R,dragging:Pe}]),ref:nt,style:{zIndex:B,transform:`translate(${h}px,${m}px)`,pointerEvents:xt?"all":"none",visibility:D?"visible":"hidden",...k},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ht,onMouseMove:Bt,onMouseLeave:de,onContextMenu:ce,onClick:fe,onDoubleClick:ye,onKeyDown:X?Nt:void 0,tabIndex:X?0:void 0,role:X?"button":void 0,"aria-describedby":$?void 0:`${ZS}-${W}`,"aria-label":tt},ut.createElement(fO,{value:n},ut.createElement(e,{id:n,data:o,type:i,xPos:l,yPos:c,selected:p,isConnectable:z,sourcePosition:P,targetPosition:S,dragging:Pe,dragHandle:U,zIndex:B})))};return t.displayName="NodeWrapper",x.memo(t)};const ZO=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Ly(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function JO({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=an(),{width:o,height:l,x:c,y:h,transformString:m,userSelectionActive:p}=Ae(ZO,bn),y=u1(),v=x.useRef(null);if(x.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),l1({nodeRef:v}),p||!o||!l)return null;const E=e?I=>{const L=i.getState().getNodes().filter(k=>k.selected);e(I,L)}:void 0,b=I=>{Object.prototype.hasOwnProperty.call(fl,I.key)&&y({x:fl[I.key].x,y:fl[I.key].y,isShiftPressed:I.shiftKey})};return ut.createElement("div",{className:kn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:m}},ut.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:E,tabIndex:n?void 0:-1,onKeyDown:n?void 0:b,style:{width:o,height:l,top:h,left:c}}))}var tM=x.memo(JO);const eM=e=>e.nodesSelectionActive,c1=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:l,onPaneScroll:c,deleteKeyCode:h,onMove:m,onMoveStart:p,onMoveEnd:y,selectionKeyCode:v,selectionOnDrag:E,selectionMode:b,onSelectionStart:I,onSelectionEnd:L,multiSelectionKeyCode:k,panActivationKeyCode:H,zoomActivationKeyCode:F,elementsSelectable:q,zoomOnScroll:z,zoomOnPinch:X,panOnScroll:Z,panOnScrollSpeed:P,panOnScrollMode:S,zoomOnDoubleClick:C,panOnDrag:O,defaultViewport:U,translateExtent:B,minZoom:R,maxZoom:V,preventScrolling:Y,onSelectionContextMenu:D,noWheelClassName:$,noPanClassName:tt,disableKeyboardA11y:W})=>{const M=Ae(eM),G=mc(v),nt=mc(H),st=nt||O,ct=nt||Z,gt=G||E&&st!==!0;return zO({deleteKeyCode:h,multiSelectionKeyCode:k}),ut.createElement(qO,{onMove:m,onMoveStart:p,onMoveEnd:y,onPaneContextMenu:l,elementsSelectable:q,zoomOnScroll:z,zoomOnPinch:X,panOnScroll:ct,panOnScrollSpeed:P,panOnScrollMode:S,zoomOnDoubleClick:C,panOnDrag:!G&&st,defaultViewport:U,translateExtent:B,minZoom:R,maxZoom:V,zoomActivationKeyCode:F,preventScrolling:Y,noWheelClassName:$,noPanClassName:tt},ut.createElement(s1,{onSelectionStart:I,onSelectionEnd:L,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:st,isSelecting:!!gt,selectionMode:b},e,M&&ut.createElement(tM,{onSelectionContextMenu:D,noPanClassName:tt,disableKeyboardA11y:W})))};c1.displayName="FlowRenderer";var nM=x.memo(c1);function rM(e){return Ae(x.useCallback(n=>e?BS(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function iM(e){const t={input:Fu(e.input||KS),default:Fu(e.default||Hg),output:Fu(e.output||QS),group:Fu(e.group||By)},n={},i=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,l)=>(o[l]=Fu(e[l]||Hg),o),n);return{...t,...i}}const sM=({x:e,y:t,width:n,height:i,origin:o})=>!n||!i?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-i*o[1]},oM=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),f1=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:o,updateNodeDimensions:l,onError:c}=Ae(oM,bn),h=rM(e.onlyRenderVisibleElements),m=x.useRef(),p=x.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(v=>{const E=v.map(b=>({id:b.target.getAttribute("data-id"),nodeElement:b.target,forceUpdate:!0}));l(E)});return m.current=y,y},[]);return x.useEffect(()=>()=>{m?.current?.disconnect()},[]),ut.createElement("div",{className:"react-flow__nodes",style:zy},h.map(y=>{let v=y.type||"default";e.nodeTypes[v]||(c?.("003",Gi.error003(v)),v="default");const E=e.nodeTypes[v]||e.nodeTypes.default,b=!!(y.draggable||t&&typeof y.draggable>"u"),I=!!(y.selectable||o&&typeof y.selectable>"u"),L=!!(y.connectable||n&&typeof y.connectable>"u"),k=!!(y.focusable||i&&typeof y.focusable>"u"),H=e.nodeExtent?Dy(y.positionAbsolute,e.nodeExtent):y.positionAbsolute,F=H?.x??0,q=H?.y??0,z=sM({x:F,y:q,width:y.width??0,height:y.height??0,origin:e.nodeOrigin});return ut.createElement(E,{key:y.id,id:y.id,className:y.className,style:y.style,type:v,data:y.data,sourcePosition:y.sourcePosition||At.Bottom,targetPosition:y.targetPosition||At.Top,hidden:y.hidden,xPos:F,yPos:q,xPosOrigin:z.x,yPosOrigin:z.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!y.selected,isDraggable:b,isSelectable:I,isConnectable:L,isFocusable:k,resizeObserver:p,dragHandle:y.dragHandle,zIndex:y[Ne]?.z??0,isParent:!!y[Ne]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!y.width&&!!y.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[Ne]?.handleBounds})}))};f1.displayName="NodeRenderer";var aM=x.memo(f1);const lM=(e,t,n)=>n===At.Left?e-t:n===At.Right?e+t:e,uM=(e,t,n)=>n===At.Top?e-t:n===At.Bottom?e+t:e,ZT="react-flow__edgeupdater",JT=({position:e,centerX:t,centerY:n,radius:i=10,onMouseDown:o,onMouseEnter:l,onMouseOut:c,type:h})=>ut.createElement("circle",{onMouseDown:o,onMouseEnter:l,onMouseOut:c,className:kn([ZT,`${ZT}-${h}`]),cx:lM(t,i,e),cy:uM(n,i,e),r:i,stroke:"transparent",fill:"transparent"}),cM=()=>!0;var Xa=e=>{const t=({id:n,className:i,type:o,data:l,onClick:c,onEdgeDoubleClick:h,selected:m,animated:p,label:y,labelStyle:v,labelShowBg:E,labelBgStyle:b,labelBgPadding:I,labelBgBorderRadius:L,style:k,source:H,target:F,sourceX:q,sourceY:z,targetX:X,targetY:Z,sourcePosition:P,targetPosition:S,elementsSelectable:C,hidden:O,sourceHandleId:U,targetHandleId:B,onContextMenu:R,onMouseEnter:V,onMouseMove:Y,onMouseLeave:D,reconnectRadius:$,onReconnect:tt,onReconnectStart:W,onReconnectEnd:M,markerEnd:G,markerStart:nt,rfId:st,ariaLabel:ct,isFocusable:gt,isReconnectable:_t,pathOptions:xt,interactionWidth:bt,disableKeyboardA11y:Ht})=>{const Bt=x.useRef(null),[de,ce]=x.useState(!1),[ye,fe]=x.useState(!1),Nt=an(),Pe=x.useMemo(()=>`url('#${Bg(nt,st)}')`,[nt,st]),Pt=x.useMemo(()=>`url('#${Bg(G,st)}')`,[G,st]);if(O)return null;const St=Le=>{const{edges:Ze,addSelectedEdges:Cn,unselectNodesAndEdges:xn,multiSelectionActive:Je}=Nt.getState(),ln=Ze.find(In=>In.id===n);ln&&(C&&(Nt.setState({nodesSelectionActive:!1}),ln.selected&&Je?(xn({nodes:[],edges:[ln]}),Bt.current?.blur()):Cn([n])),c&&c(Le,ln))},De=Hu(n,Nt.getState,h),yn=Hu(n,Nt.getState,R),An=Hu(n,Nt.getState,V),sr=Hu(n,Nt.getState,Y),Rn=Hu(n,Nt.getState,D),We=(Le,Ze)=>{if(Le.button!==0)return;const{edges:Cn,isValidConnection:xn}=Nt.getState(),Je=Ze?F:H,ln=(Ze?B:U)||null,In=Ze?"target":"source",pi=xn||cM,gi=Ze,Rr=Cn.find(qn=>qn.id===n);fe(!0),W?.(Le,Rr,In);const Fn=qn=>{fe(!1),M?.(qn,Rr,In)};qS({event:Le,handleId:ln,nodeId:Je,onConnect:qn=>tt?.(Rr,qn),isTarget:gi,getState:Nt.getState,setState:Nt.setState,isValidConnection:pi,edgeUpdaterType:In,onReconnectEnd:Fn})},jn=Le=>We(Le,!0),wt=Le=>We(Le,!1),Lt=()=>ce(!0),Te=()=>ce(!1),we=!C&&!c,zr=Le=>{if(!Ht&&OS.includes(Le.key)&&C){const{unselectNodesAndEdges:Ze,addSelectedEdges:Cn,edges:xn}=Nt.getState();Le.key==="Escape"?(Bt.current?.blur(),Ze({edges:[xn.find(ln=>ln.id===n)]})):Cn([n])}};return ut.createElement("g",{className:kn(["react-flow__edge",`react-flow__edge-${o}`,i,{selected:m,animated:p,inactive:we,updating:de}]),onClick:St,onDoubleClick:De,onContextMenu:yn,onMouseEnter:An,onMouseMove:sr,onMouseLeave:Rn,onKeyDown:gt?zr:void 0,tabIndex:gt?0:void 0,role:gt?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ct===null?void 0:ct||`Edge from ${H} to ${F}`,"aria-describedby":gt?`${JS}-${st}`:void 0,ref:Bt},!ye&&ut.createElement(e,{id:n,source:H,target:F,selected:m,animated:p,label:y,labelStyle:v,labelShowBg:E,labelBgStyle:b,labelBgPadding:I,labelBgBorderRadius:L,data:l,style:k,sourceX:q,sourceY:z,targetX:X,targetY:Z,sourcePosition:P,targetPosition:S,sourceHandleId:U,targetHandleId:B,markerStart:Pe,markerEnd:Pt,pathOptions:xt,interactionWidth:bt}),_t&&ut.createElement(ut.Fragment,null,(_t==="source"||_t===!0)&&ut.createElement(JT,{position:P,centerX:q,centerY:z,radius:$,onMouseDown:jn,onMouseEnter:Lt,onMouseOut:Te,type:"source"}),(_t==="target"||_t===!0)&&ut.createElement(JT,{position:S,centerX:X,centerY:Z,radius:$,onMouseDown:wt,onMouseEnter:Lt,onMouseOut:Te,type:"target"})))};return t.displayName="EdgeWrapper",x.memo(t)};function fM(e){const t={default:Xa(e.default||$h),straight:Xa(e.bezier||Vy),step:Xa(e.step||ky),smoothstep:Xa(e.step||Ed),simplebezier:Xa(e.simplebezier||My)},n={},i=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,l)=>(o[l]=Xa(e[l]||$h),o),n);return{...t,...i}}function tw(e,t,n=null){const i=(n?.x||0)+t.x,o=(n?.y||0)+t.y,l=n?.width||t.width,c=n?.height||t.height;switch(e){case At.Top:return{x:i+l/2,y:o};case At.Right:return{x:i+l,y:o+c/2};case At.Bottom:return{x:i+l/2,y:o+c};case At.Left:return{x:i,y:o+c/2}}}function ew(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const hM=(e,t,n,i,o,l)=>{const c=tw(n,e,t),h=tw(l,i,o);return{sourceX:c.x,sourceY:c.y,targetX:h.x,targetY:h.y}};function dM({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:i,targetWidth:o,targetHeight:l,width:c,height:h,transform:m}){const p={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+i,t.y+l)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const y=Oy({x:(0-m[0])/m[2],y:(0-m[1])/m[2],width:c/m[2],height:h/m[2]}),v=Math.max(0,Math.min(y.x2,p.x2)-Math.max(y.x,p.x)),E=Math.max(0,Math.min(y.y2,p.y2)-Math.max(y.y,p.y));return Math.ceil(v*E)>0}function nw(e){const t=e?.[Ne]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const mM=[{level:0,isMaxLevel:!0,edges:[]}];function pM(e,t,n=!1){let i=-1;const o=e.reduce((c,h)=>{const m=Sr(h.zIndex);let p=m?h.zIndex:0;if(n){const y=t.get(h.target),v=t.get(h.source),E=h.selected||y?.selected||v?.selected,b=Math.max(v?.[Ne]?.z||0,y?.[Ne]?.z||0,1e3);p=(m?h.zIndex:0)+(E?b:0)}return c[p]?c[p].push(h):c[p]=[h],i=p>i?p:i,c},{}),l=Object.entries(o).map(([c,h])=>{const m=+c;return{edges:h,level:m,isMaxLevel:m===i}});return l.length===0?mM:l}function gM(e,t,n){const i=Ae(x.useCallback(o=>e?o.edges.filter(l=>{const c=t.get(l.source),h=t.get(l.target);return c?.width&&c?.height&&h?.width&&h?.height&&dM({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:h.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:h.width,targetHeight:h.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return pM(i,t,n)}const yM=({color:e="none",strokeWidth:t=1})=>ut.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),_M=({color:e="none",strokeWidth:t=1})=>ut.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),rw={[dc.Arrow]:yM,[dc.ArrowClosed]:_M};function vM(e){const t=an();return x.useMemo(()=>Object.prototype.hasOwnProperty.call(rw,e)?rw[e]:(t.getState().onError?.("009",Gi.error009(e)),null),[e])}const EM=({id:e,type:t,color:n,width:i=12.5,height:o=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:h="auto-start-reverse"})=>{const m=vM(t);return m?ut.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:h,refX:"0",refY:"0"},ut.createElement(m,{color:n,strokeWidth:c})):null},TM=({defaultColor:e,rfId:t})=>n=>{const i=[];return n.edges.reduce((o,l)=>([l.markerStart,l.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const h=Bg(c,t);i.includes(h)||(o.push({id:h,color:c.color||e,...c}),i.push(h))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))},h1=({defaultColor:e,rfId:t})=>{const n=Ae(x.useCallback(TM({defaultColor:e,rfId:t}),[e,t]),(i,o)=>!(i.length!==o.length||i.some((l,c)=>l.id!==o[c].id)));return ut.createElement("defs",null,n.map(i=>ut.createElement(EM,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};h1.displayName="MarkerDefinitions";var wM=x.memo(h1);const bM=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),d1=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:i,edgeTypes:o,noPanClassName:l,onEdgeContextMenu:c,onEdgeMouseEnter:h,onEdgeMouseMove:m,onEdgeMouseLeave:p,onEdgeClick:y,onEdgeDoubleClick:v,onReconnect:E,onReconnectStart:b,onReconnectEnd:I,reconnectRadius:L,children:k,disableKeyboardA11y:H})=>{const{edgesFocusable:F,edgesUpdatable:q,elementsSelectable:z,width:X,height:Z,connectionMode:P,nodeInternals:S,onError:C}=Ae(bM,bn),O=gM(t,S,n);return X?ut.createElement(ut.Fragment,null,O.map(({level:U,edges:B,isMaxLevel:R})=>ut.createElement("svg",{key:U,style:{zIndex:U},width:X,height:Z,className:"react-flow__edges react-flow__container"},R&&ut.createElement(wM,{defaultColor:e,rfId:i}),ut.createElement("g",null,B.map(V=>{const[Y,D,$]=nw(S.get(V.source)),[tt,W,M]=nw(S.get(V.target));if(!$||!M)return null;let G=V.type||"default";o[G]||(C?.("011",Gi.error011(G)),G="default");const nt=o[G]||o.default,st=P===$s.Strict?W.target:(W.target??[]).concat(W.source??[]),ct=ew(D.source,V.sourceHandle),gt=ew(st,V.targetHandle),_t=ct?.position||At.Bottom,xt=gt?.position||At.Top,bt=!!(V.focusable||F&&typeof V.focusable>"u"),Ht=V.reconnectable||V.updatable,Bt=typeof E<"u"&&(Ht||q&&typeof Ht>"u");if(!ct||!gt)return C?.("008",Gi.error008(ct,V)),null;const{sourceX:de,sourceY:ce,targetX:ye,targetY:fe}=hM(Y,ct,_t,tt,gt,xt);return ut.createElement(nt,{key:V.id,id:V.id,className:kn([V.className,l]),type:G,data:V.data,selected:!!V.selected,animated:!!V.animated,hidden:!!V.hidden,label:V.label,labelStyle:V.labelStyle,labelShowBg:V.labelShowBg,labelBgStyle:V.labelBgStyle,labelBgPadding:V.labelBgPadding,labelBgBorderRadius:V.labelBgBorderRadius,style:V.style,source:V.source,target:V.target,sourceHandleId:V.sourceHandle,targetHandleId:V.targetHandle,markerEnd:V.markerEnd,markerStart:V.markerStart,sourceX:de,sourceY:ce,targetX:ye,targetY:fe,sourcePosition:_t,targetPosition:xt,elementsSelectable:z,onContextMenu:c,onMouseEnter:h,onMouseMove:m,onMouseLeave:p,onClick:y,onEdgeDoubleClick:v,onReconnect:E,onReconnectStart:b,onReconnectEnd:I,reconnectRadius:L,rfId:i,ariaLabel:V.ariaLabel,isFocusable:bt,isReconnectable:Bt,pathOptions:"pathOptions"in V?V.pathOptions:void 0,interactionWidth:V.interactionWidth,disableKeyboardA11y:H})})))),k):null};d1.displayName="EdgeRenderer";var SM=x.memo(d1);const AM=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function RM({children:e}){const t=Ae(AM);return ut.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function CM(e){const t=Nc(),n=x.useRef(!1);x.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const xM={[At.Left]:At.Right,[At.Right]:At.Left,[At.Top]:At.Bottom,[At.Bottom]:At.Top},m1=({nodeId:e,handleType:t,style:n,type:i=Ds.Bezier,CustomComponent:o,connectionStatus:l})=>{const{fromNode:c,handleId:h,toX:m,toY:p,connectionMode:y}=Ae(x.useCallback(Z=>({fromNode:Z.nodeInternals.get(e),handleId:Z.connectionHandleId,toX:(Z.connectionPosition.x-Z.transform[0])/Z.transform[2],toY:(Z.connectionPosition.y-Z.transform[1])/Z.transform[2],connectionMode:Z.connectionMode}),[e]),bn),v=c?.[Ne]?.handleBounds;let E=v?.[t];if(y===$s.Loose&&(E=E||v?.[t==="source"?"target":"source"]),!c||!E)return null;const b=h?E.find(Z=>Z.id===h):E[0],I=b?b.x+b.width/2:(c.width??0)/2,L=b?b.y+b.height/2:c.height??0,k=(c.positionAbsolute?.x??0)+I,H=(c.positionAbsolute?.y??0)+L,F=b?.position,q=F?xM[F]:null;if(!F||!q)return null;if(o)return ut.createElement(o,{connectionLineType:i,connectionLineStyle:n,fromNode:c,fromHandle:b,fromX:k,fromY:H,toX:m,toY:p,fromPosition:F,toPosition:q,connectionStatus:l});let z="";const X={sourceX:k,sourceY:H,sourcePosition:F,targetX:m,targetY:p,targetPosition:q};return i===Ds.Bezier?[z]=LS(X):i===Ds.Step?[z]=Ug({...X,borderRadius:0}):i===Ds.SmoothStep?[z]=Ug(X):i===Ds.SimpleBezier?[z]=PS(X):z=`M${k},${H} ${m},${p}`,ut.createElement("path",{d:z,fill:"none",className:"react-flow__connection-path",style:n})};m1.displayName="ConnectionLine";const IM=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function NM({containerStyle:e,style:t,type:n,component:i}){const{nodeId:o,handleType:l,nodesConnectable:c,width:h,height:m,connectionStatus:p}=Ae(IM,bn);return!(o&&l&&h&&c)?null:ut.createElement("svg",{style:e,width:h,height:m,className:"react-flow__edges react-flow__connectionline react-flow__container"},ut.createElement("g",{className:kn(["react-flow__connection",p])},ut.createElement(m1,{nodeId:o,handleType:l,style:t,type:n,CustomComponent:i,connectionStatus:p})))}function iw(e,t){return x.useRef(null),an(),x.useMemo(()=>t(e),[e])}const p1=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:i,onMoveEnd:o,onInit:l,onNodeClick:c,onEdgeClick:h,onNodeDoubleClick:m,onEdgeDoubleClick:p,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:E,onNodeContextMenu:b,onSelectionContextMenu:I,onSelectionStart:L,onSelectionEnd:k,connectionLineType:H,connectionLineStyle:F,connectionLineComponent:q,connectionLineContainerStyle:z,selectionKeyCode:X,selectionOnDrag:Z,selectionMode:P,multiSelectionKeyCode:S,panActivationKeyCode:C,zoomActivationKeyCode:O,deleteKeyCode:U,onlyRenderVisibleElements:B,elementsSelectable:R,selectNodesOnDrag:V,defaultViewport:Y,translateExtent:D,minZoom:$,maxZoom:tt,preventScrolling:W,defaultMarkerColor:M,zoomOnScroll:G,zoomOnPinch:nt,panOnScroll:st,panOnScrollSpeed:ct,panOnScrollMode:gt,zoomOnDoubleClick:_t,panOnDrag:xt,onPaneClick:bt,onPaneMouseEnter:Ht,onPaneMouseMove:Bt,onPaneMouseLeave:de,onPaneScroll:ce,onPaneContextMenu:ye,onEdgeContextMenu:fe,onEdgeMouseEnter:Nt,onEdgeMouseMove:Pe,onEdgeMouseLeave:Pt,onReconnect:St,onReconnectStart:De,onReconnectEnd:yn,reconnectRadius:An,noDragClassName:sr,noWheelClassName:Rn,noPanClassName:We,elevateEdgesOnSelect:jn,disableKeyboardA11y:wt,nodeOrigin:Lt,nodeExtent:Te,rfId:we})=>{const zr=iw(e,iM),Le=iw(t,fM);return CM(l),ut.createElement(nM,{onPaneClick:bt,onPaneMouseEnter:Ht,onPaneMouseMove:Bt,onPaneMouseLeave:de,onPaneContextMenu:ye,onPaneScroll:ce,deleteKeyCode:U,selectionKeyCode:X,selectionOnDrag:Z,selectionMode:P,onSelectionStart:L,onSelectionEnd:k,multiSelectionKeyCode:S,panActivationKeyCode:C,zoomActivationKeyCode:O,elementsSelectable:R,onMove:n,onMoveStart:i,onMoveEnd:o,zoomOnScroll:G,zoomOnPinch:nt,zoomOnDoubleClick:_t,panOnScroll:st,panOnScrollSpeed:ct,panOnScrollMode:gt,panOnDrag:xt,defaultViewport:Y,translateExtent:D,minZoom:$,maxZoom:tt,onSelectionContextMenu:I,preventScrolling:W,noDragClassName:sr,noWheelClassName:Rn,noPanClassName:We,disableKeyboardA11y:wt},ut.createElement(RM,null,ut.createElement(SM,{edgeTypes:Le,onEdgeClick:h,onEdgeDoubleClick:p,onlyRenderVisibleElements:B,onEdgeContextMenu:fe,onEdgeMouseEnter:Nt,onEdgeMouseMove:Pe,onEdgeMouseLeave:Pt,onReconnect:St,onReconnectStart:De,onReconnectEnd:yn,reconnectRadius:An,defaultMarkerColor:M,noPanClassName:We,elevateEdgesOnSelect:!!jn,disableKeyboardA11y:wt,rfId:we},ut.createElement(NM,{style:F,type:H,component:q,containerStyle:z})),ut.createElement("div",{className:"react-flow__edgelabel-renderer"}),ut.createElement(aM,{nodeTypes:zr,onNodeClick:c,onNodeDoubleClick:m,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:E,onNodeContextMenu:b,selectNodesOnDrag:V,onlyRenderVisibleElements:B,noPanClassName:We,noDragClassName:sr,disableKeyboardA11y:wt,nodeOrigin:Lt,nodeExtent:Te,rfId:we})))};p1.displayName="GraphView";var DM=x.memo(p1);const Fg=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Rs={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Fg,nodeExtent:Fg,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:$s.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:sO,isValidConnection:void 0},OM=()=>yI((e,t)=>({...Rs,setNodes:n=>{const{nodeInternals:i,nodeOrigin:o,elevateNodesOnSelect:l}=t();e({nodeInternals:rg(n,i,o,l)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=t();e({edges:n.map(o=>({...i,...o}))})},setDefaultNodesAndEdges:(n,i)=>{const o=typeof n<"u",l=typeof i<"u",c=o?rg(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:c,edges:l?i:[],hasDefaultNodes:o,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:o,fitViewOnInit:l,fitViewOnInitDone:c,fitViewOnInitOptions:h,domNode:m,nodeOrigin:p}=t(),y=m?.querySelector(".react-flow__viewport");if(!y)return;const v=window.getComputedStyle(y),{m22:E}=new window.DOMMatrixReadOnly(v.transform),b=n.reduce((L,k)=>{const H=o.get(k.id);if(H?.hidden)o.set(H.id,{...H,[Ne]:{...H[Ne],handleBounds:void 0}});else if(H){const F=Ny(k.nodeElement);!!(F.width&&F.height&&(H.width!==F.width||H.height!==F.height||k.forceUpdate))&&(o.set(H.id,{...H,[Ne]:{...H[Ne],handleBounds:{source:WT(".source",k.nodeElement,E,p),target:WT(".target",k.nodeElement,E,p)}},...F}),L.push({id:H.id,type:"dimensions",dimensions:F}))}return L},[]);e1(o,p);const I=c||l&&!c&&n1(t,{initial:!0,...h});e({nodeInternals:new Map(o),fitViewOnInitDone:I}),b?.length>0&&i?.(b)},updateNodePositions:(n,i=!0,o=!1)=>{const{triggerNodeChanges:l}=t(),c=n.map(h=>{const m={id:h.id,type:"position",dragging:o};return i&&(m.positionAbsolute=h.positionAbsolute,m.position=h.position),m});l(c)},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:o,hasDefaultNodes:l,nodeOrigin:c,getNodes:h,elevateNodesOnSelect:m}=t();if(n?.length){if(l){const p=i1(n,h()),y=rg(p,o,c,m);e({nodeInternals:y})}i?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:o,getNodes:l}=t();let c,h=null;i?c=n.map(m=>Is(m,!0)):(c=ol(l(),n),h=ol(o,[])),dh({changedNodes:c,changedEdges:h,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:o,getNodes:l}=t();let c,h=null;i?c=n.map(m=>Is(m,!0)):(c=ol(o,n),h=ol(l(),[])),dh({changedNodes:h,changedEdges:c,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:o,getNodes:l}=t(),c=n||l(),h=i||o,m=c.map(y=>(y.selected=!1,Is(y.id,!1))),p=h.map(y=>Is(y.id,!1));dh({changedNodes:m,changedEdges:p,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:o}=t();i?.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:o}=t();i?.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=t(),l=i().filter(h=>h.selected).map(h=>Is(h.id,!1)),c=n.filter(h=>h.selected).map(h=>Is(h.id,!1));dh({changedNodes:l,changedEdges:c,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:i}=t();i.forEach(o=>{o.positionAbsolute=Dy(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:o,height:l,d3Zoom:c,d3Selection:h,translateExtent:m}=t();if(!c||!h||!n.x&&!n.y)return!1;const p=Ls.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),y=[[0,0],[o,l]],v=c?.constrain()(p,y,m);return c.transform(h,v),i[0]!==v.x||i[1]!==v.y||i[2]!==v.k},cancelConnection:()=>e({connectionNodeId:Rs.connectionNodeId,connectionHandleId:Rs.connectionHandleId,connectionHandleType:Rs.connectionHandleType,connectionStatus:Rs.connectionStatus,connectionStartHandle:Rs.connectionStartHandle,connectionEndHandle:Rs.connectionEndHandle}),reset:()=>e({...Rs})}),Object.is),g1=({children:e})=>{const t=x.useRef(null);return t.current||(t.current=OM()),ut.createElement(WD,{value:t.current},e)};g1.displayName="ReactFlowProvider";const y1=({children:e})=>x.useContext(vd)?ut.createElement(ut.Fragment,null,e):ut.createElement(g1,null,e);y1.displayName="ReactFlowWrapper";const MM={input:KS,default:Hg,output:QS,group:By},kM={default:$h,straight:Vy,step:ky,smoothstep:Ed,simplebezier:My},VM=[0,0],PM=[15,15],LM={x:0,y:0,zoom:1},UM={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},_1=x.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:o,nodeTypes:l=MM,edgeTypes:c=kM,onNodeClick:h,onEdgeClick:m,onInit:p,onMove:y,onMoveStart:v,onMoveEnd:E,onConnect:b,onConnectStart:I,onConnectEnd:L,onClickConnectStart:k,onClickConnectEnd:H,onNodeMouseEnter:F,onNodeMouseMove:q,onNodeMouseLeave:z,onNodeContextMenu:X,onNodeDoubleClick:Z,onNodeDragStart:P,onNodeDrag:S,onNodeDragStop:C,onNodesDelete:O,onEdgesDelete:U,onSelectionChange:B,onSelectionDragStart:R,onSelectionDrag:V,onSelectionDragStop:Y,onSelectionContextMenu:D,onSelectionStart:$,onSelectionEnd:tt,connectionMode:W=$s.Strict,connectionLineType:M=Ds.Bezier,connectionLineStyle:G,connectionLineComponent:nt,connectionLineContainerStyle:st,deleteKeyCode:ct="Backspace",selectionKeyCode:gt="Shift",selectionOnDrag:_t=!1,selectionMode:xt=hc.Full,panActivationKeyCode:bt="Space",multiSelectionKeyCode:Ht=qh()?"Meta":"Control",zoomActivationKeyCode:Bt=qh()?"Meta":"Control",snapToGrid:de=!1,snapGrid:ce=PM,onlyRenderVisibleElements:ye=!1,selectNodesOnDrag:fe=!0,nodesDraggable:Nt,nodesConnectable:Pe,nodesFocusable:Pt,nodeOrigin:St=VM,edgesFocusable:De,edgesUpdatable:yn,elementsSelectable:An,defaultViewport:sr=LM,minZoom:Rn=.5,maxZoom:We=2,translateExtent:jn=Fg,preventScrolling:wt=!0,nodeExtent:Lt,defaultMarkerColor:Te="#b1b1b7",zoomOnScroll:we=!0,zoomOnPinch:zr=!0,panOnScroll:Le=!1,panOnScrollSpeed:Ze=.5,panOnScrollMode:Cn=zo.Free,zoomOnDoubleClick:xn=!0,panOnDrag:Je=!0,onPaneClick:ln,onPaneMouseEnter:In,onPaneMouseMove:pi,onPaneMouseLeave:gi,onPaneScroll:Rr,onPaneContextMenu:Fn,children:or,onEdgeContextMenu:qn,onEdgeDoubleClick:ar,onEdgeMouseEnter:ro,onEdgeMouseMove:Hr,onEdgeMouseLeave:ts,onEdgeUpdate:jr,onEdgeUpdateStart:na,onEdgeUpdateEnd:me,onReconnect:Oe,onReconnectStart:Ce,onReconnectEnd:Vn,reconnectRadius:io=10,edgeUpdaterRadius:Ul=10,onNodesChange:Fr,onEdgesChange:ra,noDragClassName:yi="nodrag",noWheelClassName:qr="nowheel",noPanClassName:lr="nopan",fitView:ur=!1,fitViewOptions:cr,connectOnClick:un=!0,attributionPosition:be,proOptions:so,defaultEdgeOptions:es,elevateNodesOnSelect:$n=!0,elevateEdgesOnSelect:Cr=!1,disableKeyboardA11y:oo=!1,autoPanOnConnect:ia=!0,autoPanOnNodeDrag:_i=!0,connectionRadius:sa=20,isValidConnection:$r,onError:fr,style:Fe,id:Gr,nodeDragThreshold:oa,...xr},ns)=>{const Yr=Gr||"1";return ut.createElement("div",{...xr,style:{...Fe,...UM},ref:ns,className:kn(["react-flow",o]),"data-testid":"rf__wrapper",id:Gr},ut.createElement(y1,null,ut.createElement(DM,{onInit:p,onMove:y,onMoveStart:v,onMoveEnd:E,onNodeClick:h,onEdgeClick:m,onNodeMouseEnter:F,onNodeMouseMove:q,onNodeMouseLeave:z,onNodeContextMenu:X,onNodeDoubleClick:Z,nodeTypes:l,edgeTypes:c,connectionLineType:M,connectionLineStyle:G,connectionLineComponent:nt,connectionLineContainerStyle:st,selectionKeyCode:gt,selectionOnDrag:_t,selectionMode:xt,deleteKeyCode:ct,multiSelectionKeyCode:Ht,panActivationKeyCode:bt,zoomActivationKeyCode:Bt,onlyRenderVisibleElements:ye,selectNodesOnDrag:fe,defaultViewport:sr,translateExtent:jn,minZoom:Rn,maxZoom:We,preventScrolling:wt,zoomOnScroll:we,zoomOnPinch:zr,zoomOnDoubleClick:xn,panOnScroll:Le,panOnScrollSpeed:Ze,panOnScrollMode:Cn,panOnDrag:Je,onPaneClick:ln,onPaneMouseEnter:In,onPaneMouseMove:pi,onPaneMouseLeave:gi,onPaneScroll:Rr,onPaneContextMenu:Fn,onSelectionContextMenu:D,onSelectionStart:$,onSelectionEnd:tt,onEdgeContextMenu:qn,onEdgeDoubleClick:ar,onEdgeMouseEnter:ro,onEdgeMouseMove:Hr,onEdgeMouseLeave:ts,onReconnect:Oe??jr,onReconnectStart:Ce??na,onReconnectEnd:Vn??me,reconnectRadius:io??Ul,defaultMarkerColor:Te,noDragClassName:yi,noWheelClassName:qr,noPanClassName:lr,elevateEdgesOnSelect:Cr,rfId:Yr,disableKeyboardA11y:oo,nodeOrigin:St,nodeExtent:Lt}),ut.createElement(xO,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:b,onConnectStart:I,onConnectEnd:L,onClickConnectStart:k,onClickConnectEnd:H,nodesDraggable:Nt,nodesConnectable:Pe,nodesFocusable:Pt,edgesFocusable:De,edgesUpdatable:yn,elementsSelectable:An,elevateNodesOnSelect:$n,minZoom:Rn,maxZoom:We,nodeExtent:Lt,onNodesChange:Fr,onEdgesChange:ra,snapToGrid:de,snapGrid:ce,connectionMode:W,translateExtent:jn,connectOnClick:un,defaultEdgeOptions:es,fitView:ur,fitViewOptions:cr,onNodesDelete:O,onEdgesDelete:U,onNodeDragStart:P,onNodeDrag:S,onNodeDragStop:C,onSelectionDrag:V,onSelectionDragStart:R,onSelectionDragStop:Y,noPanClassName:lr,nodeOrigin:St,rfId:Yr,autoPanOnConnect:ia,autoPanOnNodeDrag:_i,onError:fr,connectionRadius:sa,isValidConnection:$r,nodeDragThreshold:oa}),ut.createElement(RO,{onSelectionChange:B}),or,ut.createElement(JD,{proOptions:so,position:be}),ut.createElement(MO,{rfId:Yr,disableKeyboardA11y:oo})))});_1.displayName="ReactFlow";function v1(e){return t=>{const[n,i]=x.useState(t),o=x.useCallback(l=>i(c=>e(l,c)),[]);return[n,i,o]}}const BM=v1(i1),zM=v1(YO);function HM(){return ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ut.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function jM(){return ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ut.createElement("path",{d:"M0 0h32v4.2H0z"}))}function FM(){return ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ut.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function qM(){return ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ut.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function $M(){return ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ut.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Yu=({children:e,className:t,...n})=>ut.createElement("button",{type:"button",className:kn(["react-flow__controls-button",t]),...n},e);Yu.displayName="ControlButton";const GM=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),E1=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:o,onZoomIn:l,onZoomOut:c,onFitView:h,onInteractiveChange:m,className:p,children:y,position:v="bottom-left"})=>{const E=an(),[b,I]=x.useState(!1),{isInteractive:L,minZoomReached:k,maxZoomReached:H}=Ae(GM,bn),{zoomIn:F,zoomOut:q,fitView:z}=Nc();if(x.useEffect(()=>{I(!0)},[]),!b)return null;const X=()=>{F(),l?.()},Z=()=>{q(),c?.()},P=()=>{z(o),h?.()},S=()=>{E.setState({nodesDraggable:!L,nodesConnectable:!L,elementsSelectable:!L}),m?.(!L)};return ut.createElement(IS,{className:kn(["react-flow__controls",p]),position:v,style:e,"data-testid":"rf__controls"},t&&ut.createElement(ut.Fragment,null,ut.createElement(Yu,{onClick:X,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:H},ut.createElement(HM,null)),ut.createElement(Yu,{onClick:Z,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:k},ut.createElement(jM,null))),n&&ut.createElement(Yu,{className:"react-flow__controls-fitview",onClick:P,title:"fit view","aria-label":"fit view"},ut.createElement(FM,null)),i&&ut.createElement(Yu,{className:"react-flow__controls-interactive",onClick:S,title:"toggle interactivity","aria-label":"toggle interactivity"},L?ut.createElement($M,null):ut.createElement(qM,null)),y)};E1.displayName="Controls";var YM=x.memo(E1),Ar;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ar||(Ar={}));function KM({color:e,dimensions:t,lineWidth:n}){return ut.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function XM({color:e,radius:t}){return ut.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const QM={[Ar.Dots]:"#91919a",[Ar.Lines]:"#eee",[Ar.Cross]:"#e2e2e2"},WM={[Ar.Dots]:1,[Ar.Lines]:1,[Ar.Cross]:6},ZM=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function T1({id:e,variant:t=Ar.Dots,gap:n=20,size:i,lineWidth:o=1,offset:l=2,color:c,style:h,className:m}){const p=x.useRef(null),{transform:y,patternId:v}=Ae(ZM,bn),E=c||QM[t],b=i||WM[t],I=t===Ar.Dots,L=t===Ar.Cross,k=Array.isArray(n)?n:[n,n],H=[k[0]*y[2]||1,k[1]*y[2]||1],F=b*y[2],q=L?[F,F]:H,z=I?[F/l,F/l]:[q[0]/l,q[1]/l];return ut.createElement("svg",{className:kn(["react-flow__background",m]),style:{...h,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:p,"data-testid":"rf__background"},ut.createElement("pattern",{id:v+e,x:y[0]%H[0],y:y[1]%H[1],width:H[0],height:H[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${z[0]},-${z[1]})`},I?ut.createElement(XM,{color:E,radius:F/l}):ut.createElement(KM,{dimensions:q,color:E,lineWidth:o})),ut.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+e})`}))}T1.displayName="Background";var JM=x.memo(T1);const tk=()=>{};var sw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let o=e.charCodeAt(i);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},ek=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const o=e[n++];if(o<128)t[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=e[n++];t[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=e[n++],c=e[n++],h=e[n++],m=((o&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(m>>10)),t[i++]=String.fromCharCode(56320+(m&1023))}else{const l=e[n++],c=e[n++];t[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return t.join("")},b1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<e.length;o+=3){const l=e[o],c=o+1<e.length,h=c?e[o+1]:0,m=o+2<e.length,p=m?e[o+2]:0,y=l>>2,v=(l&3)<<4|h>>4;let E=(h&15)<<2|p>>6,b=p&63;m||(b=64,c||(E=64)),i.push(n[y],n[v],n[E],n[b])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(w1(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):ek(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<e.length;){const l=n[e.charAt(o++)],h=o<e.length?n[e.charAt(o)]:0;++o;const p=o<e.length?n[e.charAt(o)]:64;++o;const v=o<e.length?n[e.charAt(o)]:64;if(++o,l==null||h==null||p==null||v==null)throw new nk;const E=l<<2|h>>4;if(i.push(E),p!==64){const b=h<<4&240|p>>2;if(i.push(b),v!==64){const I=p<<6&192|v;i.push(I)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class nk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rk=function(e){const t=w1(e);return b1.encodeByteArray(t,!0)},Gh=function(e){return rk(e).replace(/\./g,"")},S1=function(e){try{return b1.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=()=>ik().__FIREBASE_DEFAULTS__,ok=()=>{if(typeof process>"u"||typeof sw>"u")return;const e=sw.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},ak=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&S1(e[1]);return t&&JSON.parse(t)},Td=()=>{try{return tk()||sk()||ok()||ak()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},A1=e=>{var t,n;return(n=(t=Td())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},lk=e=>{const t=A1(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},R1=()=>{var e;return(e=Td())===null||e===void 0?void 0:e.config},C1=e=>{var t;return(t=Td())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(e){return e.endsWith(".cloudworkstations.dev")}async function x1(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",o=e.iat||0,l=e.sub||e.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Gh(JSON.stringify(n)),Gh(JSON.stringify(c)),""].join(".")}const tc={};function fk(){const e={prod:[],emulator:[]};for(const t of Object.keys(tc))tc[t]?e.emulator.push(t):e.prod.push(t);return e}function hk(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let ow=!1;function I1(e,t){if(typeof window>"u"||typeof document>"u"||!xl(window.location.host)||tc[e]===t||tc[e]||ow)return;tc[e]=t;function n(E){return`__firebase__banner__${E}`}const i="__firebase__banner",l=fk().prod.length>0;function c(){const E=document.getElementById(i);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function m(E,b){E.setAttribute("width","24"),E.setAttribute("id",b),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{ow=!0,c()},E}function y(E,b){E.setAttribute("id",b),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=hk(i),b=n("text"),I=document.getElementById(b)||document.createElement("span"),L=n("learnmore"),k=document.getElementById(L)||document.createElement("a"),H=n("preprendIcon"),F=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const q=E.element;h(q),y(k,L);const z=p();m(F,H),q.append(F,I,k,z),document.body.appendChild(q)}l?(I.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function mk(){var e;const t=(e=Td())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gk(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function yk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _k(){const e=Sn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function vk(){return!mk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ek(){try{return typeof indexedDB=="object"}catch{return!1}}function Tk(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;t(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="FirebaseError";class Zi extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=wk,Object.setPrototypeOf(this,Zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dc.prototype.create)}}class Dc{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},o=`${this.service}/${t}`,l=this.errors[t],c=l?bk(l,i):"Error",h=`${this.serviceName}: ${c} (${o}).`;return new Zi(o,h,i)}}function bk(e,t){return e.replace(Sk,(n,i)=>{const o=t[i];return o!=null?String(o):`<${i}?>`})}const Sk=/\{\$([^}]+)}/g;function Ak(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function $o(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const o of n){if(!i.includes(o))return!1;const l=e[o],c=t[o];if(aw(l)&&aw(c)){if(!$o(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function aw(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(o=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Ku(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");t[decodeURIComponent(o)]=decodeURIComponent(l)}}),t}function Xu(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Rk(e,t){const n=new Ck(e,t);return n.subscribe.bind(n)}class Ck{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let o;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");xk(t,["next","error","complete"])?o=t:o={next:t,error:n,complete:i},o.next===void 0&&(o.next=ag),o.error===void 0&&(o.error=ag),o.complete===void 0&&(o.complete=ag);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xk(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function ag(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(e){return e&&e._delegate?e._delegate:e}class Go{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ik=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new uk;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t?.identifier),o=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Dk(t))try{this.getOrInitializeService({instanceIdentifier:Vo})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(t=Vo){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Vo){return this.instances.has(t)}getOptions(t=Vo){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&c.resolve(o)}return o}onInit(t,n){var i;const o=this.normalizeInstanceIdentifier(n),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(t),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&t(c,o),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Nk(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Vo){return this.component?this.component.multipleInstances?t:Vo:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Nk(e){return e===Vo?void 0:e}function Dk(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Ik(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Kt||(Kt={}));const Mk={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},kk=Kt.INFO,Vk={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},Pk=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),o=Vk[t];if(o)console[o](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Hy{constructor(t){this.name=t,this._logLevel=kk,this._logHandler=Pk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Kt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Mk[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...t),this._logHandler(this,Kt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...t),this._logHandler(this,Kt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...t),this._logHandler(this,Kt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...t),this._logHandler(this,Kt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...t),this._logHandler(this,Kt.ERROR,...t)}}const Lk=(e,t)=>t.some(n=>e instanceof n);let lw,uw;function Uk(){return lw||(lw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Bk(){return uw||(uw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const N1=new WeakMap,qg=new WeakMap,D1=new WeakMap,lg=new WeakMap,jy=new WeakMap;function zk(e){const t=new Promise((n,i)=>{const o=()=>{e.removeEventListener("success",l),e.removeEventListener("error",c)},l=()=>{n(Bs(e.result)),o()},c=()=>{i(e.error),o()};e.addEventListener("success",l),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&N1.set(n,e)}).catch(()=>{}),jy.set(t,e),t}function Hk(e){if(qg.has(e))return;const t=new Promise((n,i)=>{const o=()=>{e.removeEventListener("complete",l),e.removeEventListener("error",c),e.removeEventListener("abort",c)},l=()=>{n(),o()},c=()=>{i(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",l),e.addEventListener("error",c),e.addEventListener("abort",c)});qg.set(e,t)}let $g={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return qg.get(e);if(t==="objectStoreNames")return e.objectStoreNames||D1.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bs(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function jk(e){$g=e($g)}function Fk(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(ug(this),t,...n);return D1.set(i,t.sort?t.sort():[t]),Bs(i)}:Bk().includes(e)?function(...t){return e.apply(ug(this),t),Bs(N1.get(this))}:function(...t){return Bs(e.apply(ug(this),t))}}function qk(e){return typeof e=="function"?Fk(e):(e instanceof IDBTransaction&&Hk(e),Lk(e,Uk())?new Proxy(e,$g):e)}function Bs(e){if(e instanceof IDBRequest)return zk(e);if(lg.has(e))return lg.get(e);const t=qk(e);return t!==e&&(lg.set(e,t),jy.set(t,e)),t}const ug=e=>jy.get(e);function $k(e,t,{blocked:n,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(e,t),h=Bs(c);return i&&c.addEventListener("upgradeneeded",m=>{i(Bs(c.result),m.oldVersion,m.newVersion,Bs(c.transaction),m)}),n&&c.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),h.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const Gk=["get","getKey","getAll","getAllKeys","count"],Yk=["put","add","delete","clear"],cg=new Map;function cw(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(cg.get(t))return cg.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,o=Yk.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Gk.includes(n)))return;const l=async function(c,...h){const m=this.transaction(c,o?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),o&&m.done]))[0]};return cg.set(t,l),l}jk(e=>({...e,get:(t,n,i)=>cw(t,n)||e.get(t,n,i),has:(t,n)=>!!cw(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Xk(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Xk(e){const t=e.getComponent();return t?.type==="VERSION"}const Gg="@firebase/app",fw="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new Hy("@firebase/app"),Qk="@firebase/app-compat",Wk="@firebase/analytics-compat",Zk="@firebase/analytics",Jk="@firebase/app-check-compat",tV="@firebase/app-check",eV="@firebase/auth",nV="@firebase/auth-compat",rV="@firebase/database",iV="@firebase/data-connect",sV="@firebase/database-compat",oV="@firebase/functions",aV="@firebase/functions-compat",lV="@firebase/installations",uV="@firebase/installations-compat",cV="@firebase/messaging",fV="@firebase/messaging-compat",hV="@firebase/performance",dV="@firebase/performance-compat",mV="@firebase/remote-config",pV="@firebase/remote-config-compat",gV="@firebase/storage",yV="@firebase/storage-compat",_V="@firebase/firestore",vV="@firebase/ai",EV="@firebase/firestore-compat",TV="firebase",wV="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="[DEFAULT]",bV={[Gg]:"fire-core",[Qk]:"fire-core-compat",[Zk]:"fire-analytics",[Wk]:"fire-analytics-compat",[tV]:"fire-app-check",[Jk]:"fire-app-check-compat",[eV]:"fire-auth",[nV]:"fire-auth-compat",[rV]:"fire-rtdb",[iV]:"fire-data-connect",[sV]:"fire-rtdb-compat",[oV]:"fire-fn",[aV]:"fire-fn-compat",[lV]:"fire-iid",[uV]:"fire-iid-compat",[cV]:"fire-fcm",[fV]:"fire-fcm-compat",[hV]:"fire-perf",[dV]:"fire-perf-compat",[mV]:"fire-rc",[pV]:"fire-rc-compat",[gV]:"fire-gcs",[yV]:"fire-gcs-compat",[_V]:"fire-fst",[EV]:"fire-fst-compat",[vV]:"fire-vertex","fire-js":"fire-js",[TV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=new Map,SV=new Map,Kg=new Map;function hw(e,t){try{e.container.addComponent(t)}catch(n){Yi.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function El(e){const t=e.name;if(Kg.has(t))return Yi.debug(`There were multiple attempts to register component ${t}.`),!1;Kg.set(t,e);for(const n of Yh.values())hw(n,e);for(const n of SV.values())hw(n,e);return!0}function Fy(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function br(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zs=new Dc("app","Firebase",AV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Go("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=wV;function O1(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:Yg,automaticDataCollectionEnabled:!0},t),o=i.name;if(typeof o!="string"||!o)throw zs.create("bad-app-name",{appName:String(o)});if(n||(n=R1()),!n)throw zs.create("no-options");const l=Yh.get(o);if(l){if($o(n,l.options)&&$o(i,l.config))return l;throw zs.create("duplicate-app",{appName:o})}const c=new Ok(o);for(const m of Kg.values())c.addComponent(m);const h=new RV(n,i,c);return Yh.set(o,h),h}function M1(e=Yg){const t=Yh.get(e);if(!t&&e===Yg&&R1())return O1();if(!t)throw zs.create("no-app",{appName:e});return t}function Hs(e,t,n){var i;let o=(i=bV[e])!==null&&i!==void 0?i:e;n&&(o+=`-${n}`);const l=o.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const h=[`Unable to register library "${o}" with version "${t}":`];l&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&h.push("and"),c&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Yi.warn(h.join(" "));return}El(new Go(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV="firebase-heartbeat-database",xV=1,pc="firebase-heartbeat-store";let fg=null;function k1(){return fg||(fg=$k(CV,xV,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(pc)}catch(n){console.warn(n)}}}}).catch(e=>{throw zs.create("idb-open",{originalErrorMessage:e.message})})),fg}async function IV(e){try{const n=(await k1()).transaction(pc),i=await n.objectStore(pc).get(V1(e));return await n.done,i}catch(t){if(t instanceof Zi)Yi.warn(t.message);else{const n=zs.create("idb-get",{originalErrorMessage:t?.message});Yi.warn(n.message)}}}async function dw(e,t){try{const i=(await k1()).transaction(pc,"readwrite");await i.objectStore(pc).put(t,V1(e)),await i.done}catch(n){if(n instanceof Zi)Yi.warn(n.message);else{const i=zs.create("idb-set",{originalErrorMessage:n?.message});Yi.warn(i.message)}}}function V1(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=1024,DV=30;class OV{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kV(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=mw();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>DV){const c=VV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Yi.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mw(),{heartbeatsToSend:i,unsentEntries:o}=MV(this._heartbeatsCache.heartbeats),l=Gh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Yi.warn(n),""}}}function mw(){return new Date().toISOString().substring(0,10)}function MV(e,t=NV){const n=[];let i=e.slice();for(const o of e){const l=n.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),pw(n)>t){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),pw(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class kV{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ek()?Tk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return dw(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return dw(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function pw(e){return Gh(JSON.stringify({version:2,heartbeats:e})).length}function VV(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(e){El(new Go("platform-logger",t=>new Kk(t),"PRIVATE")),El(new Go("heartbeat",t=>new OV(t),"PRIVATE")),Hs(Gg,fw,e),Hs(Gg,fw,"esm2017"),Hs("fire-js","")}PV("");var LV="firebase",UV="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(LV,UV,"app");var gw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var js,P1;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(P,S){function C(){}C.prototype=S.prototype,P.D=S.prototype,P.prototype=new C,P.prototype.constructor=P,P.C=function(O,U,B){for(var R=Array(arguments.length-2),V=2;V<arguments.length;V++)R[V-2]=arguments[V];return S.prototype[U].apply(O,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,S,C){C||(C=0);var O=Array(16);if(typeof S=="string")for(var U=0;16>U;++U)O[U]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(U=0;16>U;++U)O[U]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=P.g[0],C=P.g[1],U=P.g[2];var B=P.g[3],R=S+(B^C&(U^B))+O[0]+3614090360&4294967295;S=C+(R<<7&4294967295|R>>>25),R=B+(U^S&(C^U))+O[1]+3905402710&4294967295,B=S+(R<<12&4294967295|R>>>20),R=U+(C^B&(S^C))+O[2]+606105819&4294967295,U=B+(R<<17&4294967295|R>>>15),R=C+(S^U&(B^S))+O[3]+3250441966&4294967295,C=U+(R<<22&4294967295|R>>>10),R=S+(B^C&(U^B))+O[4]+4118548399&4294967295,S=C+(R<<7&4294967295|R>>>25),R=B+(U^S&(C^U))+O[5]+1200080426&4294967295,B=S+(R<<12&4294967295|R>>>20),R=U+(C^B&(S^C))+O[6]+2821735955&4294967295,U=B+(R<<17&4294967295|R>>>15),R=C+(S^U&(B^S))+O[7]+4249261313&4294967295,C=U+(R<<22&4294967295|R>>>10),R=S+(B^C&(U^B))+O[8]+1770035416&4294967295,S=C+(R<<7&4294967295|R>>>25),R=B+(U^S&(C^U))+O[9]+2336552879&4294967295,B=S+(R<<12&4294967295|R>>>20),R=U+(C^B&(S^C))+O[10]+4294925233&4294967295,U=B+(R<<17&4294967295|R>>>15),R=C+(S^U&(B^S))+O[11]+2304563134&4294967295,C=U+(R<<22&4294967295|R>>>10),R=S+(B^C&(U^B))+O[12]+1804603682&4294967295,S=C+(R<<7&4294967295|R>>>25),R=B+(U^S&(C^U))+O[13]+4254626195&4294967295,B=S+(R<<12&4294967295|R>>>20),R=U+(C^B&(S^C))+O[14]+2792965006&4294967295,U=B+(R<<17&4294967295|R>>>15),R=C+(S^U&(B^S))+O[15]+1236535329&4294967295,C=U+(R<<22&4294967295|R>>>10),R=S+(U^B&(C^U))+O[1]+4129170786&4294967295,S=C+(R<<5&4294967295|R>>>27),R=B+(C^U&(S^C))+O[6]+3225465664&4294967295,B=S+(R<<9&4294967295|R>>>23),R=U+(S^C&(B^S))+O[11]+643717713&4294967295,U=B+(R<<14&4294967295|R>>>18),R=C+(B^S&(U^B))+O[0]+3921069994&4294967295,C=U+(R<<20&4294967295|R>>>12),R=S+(U^B&(C^U))+O[5]+3593408605&4294967295,S=C+(R<<5&4294967295|R>>>27),R=B+(C^U&(S^C))+O[10]+38016083&4294967295,B=S+(R<<9&4294967295|R>>>23),R=U+(S^C&(B^S))+O[15]+3634488961&4294967295,U=B+(R<<14&4294967295|R>>>18),R=C+(B^S&(U^B))+O[4]+3889429448&4294967295,C=U+(R<<20&4294967295|R>>>12),R=S+(U^B&(C^U))+O[9]+568446438&4294967295,S=C+(R<<5&4294967295|R>>>27),R=B+(C^U&(S^C))+O[14]+3275163606&4294967295,B=S+(R<<9&4294967295|R>>>23),R=U+(S^C&(B^S))+O[3]+4107603335&4294967295,U=B+(R<<14&4294967295|R>>>18),R=C+(B^S&(U^B))+O[8]+1163531501&4294967295,C=U+(R<<20&4294967295|R>>>12),R=S+(U^B&(C^U))+O[13]+2850285829&4294967295,S=C+(R<<5&4294967295|R>>>27),R=B+(C^U&(S^C))+O[2]+4243563512&4294967295,B=S+(R<<9&4294967295|R>>>23),R=U+(S^C&(B^S))+O[7]+1735328473&4294967295,U=B+(R<<14&4294967295|R>>>18),R=C+(B^S&(U^B))+O[12]+2368359562&4294967295,C=U+(R<<20&4294967295|R>>>12),R=S+(C^U^B)+O[5]+4294588738&4294967295,S=C+(R<<4&4294967295|R>>>28),R=B+(S^C^U)+O[8]+2272392833&4294967295,B=S+(R<<11&4294967295|R>>>21),R=U+(B^S^C)+O[11]+1839030562&4294967295,U=B+(R<<16&4294967295|R>>>16),R=C+(U^B^S)+O[14]+4259657740&4294967295,C=U+(R<<23&4294967295|R>>>9),R=S+(C^U^B)+O[1]+2763975236&4294967295,S=C+(R<<4&4294967295|R>>>28),R=B+(S^C^U)+O[4]+1272893353&4294967295,B=S+(R<<11&4294967295|R>>>21),R=U+(B^S^C)+O[7]+4139469664&4294967295,U=B+(R<<16&4294967295|R>>>16),R=C+(U^B^S)+O[10]+3200236656&4294967295,C=U+(R<<23&4294967295|R>>>9),R=S+(C^U^B)+O[13]+681279174&4294967295,S=C+(R<<4&4294967295|R>>>28),R=B+(S^C^U)+O[0]+3936430074&4294967295,B=S+(R<<11&4294967295|R>>>21),R=U+(B^S^C)+O[3]+3572445317&4294967295,U=B+(R<<16&4294967295|R>>>16),R=C+(U^B^S)+O[6]+76029189&4294967295,C=U+(R<<23&4294967295|R>>>9),R=S+(C^U^B)+O[9]+3654602809&4294967295,S=C+(R<<4&4294967295|R>>>28),R=B+(S^C^U)+O[12]+3873151461&4294967295,B=S+(R<<11&4294967295|R>>>21),R=U+(B^S^C)+O[15]+530742520&4294967295,U=B+(R<<16&4294967295|R>>>16),R=C+(U^B^S)+O[2]+3299628645&4294967295,C=U+(R<<23&4294967295|R>>>9),R=S+(U^(C|~B))+O[0]+4096336452&4294967295,S=C+(R<<6&4294967295|R>>>26),R=B+(C^(S|~U))+O[7]+1126891415&4294967295,B=S+(R<<10&4294967295|R>>>22),R=U+(S^(B|~C))+O[14]+2878612391&4294967295,U=B+(R<<15&4294967295|R>>>17),R=C+(B^(U|~S))+O[5]+4237533241&4294967295,C=U+(R<<21&4294967295|R>>>11),R=S+(U^(C|~B))+O[12]+1700485571&4294967295,S=C+(R<<6&4294967295|R>>>26),R=B+(C^(S|~U))+O[3]+2399980690&4294967295,B=S+(R<<10&4294967295|R>>>22),R=U+(S^(B|~C))+O[10]+4293915773&4294967295,U=B+(R<<15&4294967295|R>>>17),R=C+(B^(U|~S))+O[1]+2240044497&4294967295,C=U+(R<<21&4294967295|R>>>11),R=S+(U^(C|~B))+O[8]+1873313359&4294967295,S=C+(R<<6&4294967295|R>>>26),R=B+(C^(S|~U))+O[15]+4264355552&4294967295,B=S+(R<<10&4294967295|R>>>22),R=U+(S^(B|~C))+O[6]+2734768916&4294967295,U=B+(R<<15&4294967295|R>>>17),R=C+(B^(U|~S))+O[13]+1309151649&4294967295,C=U+(R<<21&4294967295|R>>>11),R=S+(U^(C|~B))+O[4]+4149444226&4294967295,S=C+(R<<6&4294967295|R>>>26),R=B+(C^(S|~U))+O[11]+3174756917&4294967295,B=S+(R<<10&4294967295|R>>>22),R=U+(S^(B|~C))+O[2]+718787259&4294967295,U=B+(R<<15&4294967295|R>>>17),R=C+(B^(U|~S))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(U+(R<<21&4294967295|R>>>11))&4294967295,P.g[2]=P.g[2]+U&4294967295,P.g[3]=P.g[3]+B&4294967295}i.prototype.u=function(P,S){S===void 0&&(S=P.length);for(var C=S-this.blockSize,O=this.B,U=this.h,B=0;B<S;){if(U==0)for(;B<=C;)o(this,P,B),B+=this.blockSize;if(typeof P=="string"){for(;B<S;)if(O[U++]=P.charCodeAt(B++),U==this.blockSize){o(this,O),U=0;break}}else for(;B<S;)if(O[U++]=P[B++],U==this.blockSize){o(this,O),U=0;break}}this.h=U,this.o+=S},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;var C=8*this.o;for(S=P.length-8;S<P.length;++S)P[S]=C&255,C/=256;for(this.u(P),P=Array(16),S=C=0;4>S;++S)for(var O=0;32>O;O+=8)P[C++]=this.g[S]>>>O&255;return P};function l(P,S){var C=h;return Object.prototype.hasOwnProperty.call(C,P)?C[P]:C[P]=S(P)}function c(P,S){this.h=S;for(var C=[],O=!0,U=P.length-1;0<=U;U--){var B=P[U]|0;O&&B==S||(C[U]=B,O=!1)}this.g=C}var h={};function m(P){return-128<=P&&128>P?l(P,function(S){return new c([S|0],0>S?-1:0)}):new c([P|0],0>P?-1:0)}function p(P){if(isNaN(P)||!isFinite(P))return v;if(0>P)return k(p(-P));for(var S=[],C=1,O=0;P>=C;O++)S[O]=P/C|0,C*=4294967296;return new c(S,0)}function y(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return k(y(P.substring(1),S));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=p(Math.pow(S,8)),O=v,U=0;U<P.length;U+=8){var B=Math.min(8,P.length-U),R=parseInt(P.substring(U,U+B),S);8>B?(B=p(Math.pow(S,B)),O=O.j(B).add(p(R))):(O=O.j(C),O=O.add(p(R)))}return O}var v=m(0),E=m(1),b=m(16777216);e=c.prototype,e.m=function(){if(L(this))return-k(this).m();for(var P=0,S=1,C=0;C<this.g.length;C++){var O=this.i(C);P+=(0<=O?O:4294967296+O)*S,S*=4294967296}return P},e.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(I(this))return"0";if(L(this))return"-"+k(this).toString(P);for(var S=p(Math.pow(P,6)),C=this,O="";;){var U=z(C,S).g;C=H(C,U.j(S));var B=((0<C.g.length?C.g[0]:C.h)>>>0).toString(P);if(C=U,I(C))return B+O;for(;6>B.length;)B="0"+B;O=B+O}},e.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function I(P){if(P.h!=0)return!1;for(var S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function L(P){return P.h==-1}e.l=function(P){return P=H(this,P),L(P)?-1:I(P)?0:1};function k(P){for(var S=P.g.length,C=[],O=0;O<S;O++)C[O]=~P.g[O];return new c(C,~P.h).add(E)}e.abs=function(){return L(this)?k(this):this},e.add=function(P){for(var S=Math.max(this.g.length,P.g.length),C=[],O=0,U=0;U<=S;U++){var B=O+(this.i(U)&65535)+(P.i(U)&65535),R=(B>>>16)+(this.i(U)>>>16)+(P.i(U)>>>16);O=R>>>16,B&=65535,R&=65535,C[U]=R<<16|B}return new c(C,C[C.length-1]&-2147483648?-1:0)};function H(P,S){return P.add(k(S))}e.j=function(P){if(I(this)||I(P))return v;if(L(this))return L(P)?k(this).j(k(P)):k(k(this).j(P));if(L(P))return k(this.j(k(P)));if(0>this.l(b)&&0>P.l(b))return p(this.m()*P.m());for(var S=this.g.length+P.g.length,C=[],O=0;O<2*S;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(var U=0;U<P.g.length;U++){var B=this.i(O)>>>16,R=this.i(O)&65535,V=P.i(U)>>>16,Y=P.i(U)&65535;C[2*O+2*U]+=R*Y,F(C,2*O+2*U),C[2*O+2*U+1]+=B*Y,F(C,2*O+2*U+1),C[2*O+2*U+1]+=R*V,F(C,2*O+2*U+1),C[2*O+2*U+2]+=B*V,F(C,2*O+2*U+2)}for(O=0;O<S;O++)C[O]=C[2*O+1]<<16|C[2*O];for(O=S;O<2*S;O++)C[O]=0;return new c(C,0)};function F(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function q(P,S){this.g=P,this.h=S}function z(P,S){if(I(S))throw Error("division by zero");if(I(P))return new q(v,v);if(L(P))return S=z(k(P),S),new q(k(S.g),k(S.h));if(L(S))return S=z(P,k(S)),new q(k(S.g),S.h);if(30<P.g.length){if(L(P)||L(S))throw Error("slowDivide_ only works with positive integers.");for(var C=E,O=S;0>=O.l(P);)C=X(C),O=X(O);var U=Z(C,1),B=Z(O,1);for(O=Z(O,2),C=Z(C,2);!I(O);){var R=B.add(O);0>=R.l(P)&&(U=U.add(C),B=R),O=Z(O,1),C=Z(C,1)}return S=H(P,U.j(S)),new q(U,S)}for(U=v;0<=P.l(S);){for(C=Math.max(1,Math.floor(P.m()/S.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),B=p(C),R=B.j(S);L(R)||0<R.l(P);)C-=O,B=p(C),R=B.j(S);I(B)&&(B=E),U=U.add(B),P=H(P,R)}return new q(U,P)}e.A=function(P){return z(this,P).h},e.and=function(P){for(var S=Math.max(this.g.length,P.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)&P.i(O);return new c(C,this.h&P.h)},e.or=function(P){for(var S=Math.max(this.g.length,P.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)|P.i(O);return new c(C,this.h|P.h)},e.xor=function(P){for(var S=Math.max(this.g.length,P.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)^P.i(O);return new c(C,this.h^P.h)};function X(P){for(var S=P.g.length+1,C=[],O=0;O<S;O++)C[O]=P.i(O)<<1|P.i(O-1)>>>31;return new c(C,P.h)}function Z(P,S){var C=S>>5;S%=32;for(var O=P.g.length-C,U=[],B=0;B<O;B++)U[B]=0<S?P.i(B+C)>>>S|P.i(B+C+1)<<32-S:P.i(B+C);return new c(U,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,P1=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,js=c}).apply(typeof gw<"u"?gw:typeof self<"u"?self:typeof window<"u"?window:{});var ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var L1,Qu,U1,xh,Xg,B1,z1,H1;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,T){return f==Array.prototype||f==Object.prototype||(f[_]=T.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof ph=="object"&&ph];for(var _=0;_<f.length;++_){var T=f[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=n(this);function o(f,_){if(_)t:{var T=i;f=f.split(".");for(var N=0;N<f.length-1;N++){var et=f[N];if(!(et in T))break t;T=T[et]}f=f[f.length-1],N=T[f],_=_(N),_!=N&&_!=null&&t(T,f,{configurable:!0,writable:!0,value:_})}}function l(f,_){f instanceof String&&(f+="");var T=0,N=!1,et={next:function(){if(!N&&T<f.length){var lt=T++;return{value:_(lt,f[lt]),done:!1}}return N=!0,{done:!0,value:void 0}}};return et[Symbol.iterator]=function(){return et},et}o("Array.prototype.values",function(f){return f||function(){return l(this,function(_,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function m(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function p(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function y(f,_,T){return f.call.apply(f.bind,arguments)}function v(f,_,T){if(!f)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var et=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(et,N),f.apply(_,et)}}return function(){return f.apply(_,arguments)}}function E(f,_,T){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,E.apply(null,arguments)}function b(f,_){var T=Array.prototype.slice.call(arguments,1);return function(){var N=T.slice();return N.push.apply(N,arguments),f.apply(this,N)}}function I(f,_){function T(){}T.prototype=_.prototype,f.aa=_.prototype,f.prototype=new T,f.prototype.constructor=f,f.Qb=function(N,et,lt){for(var yt=Array(arguments.length-2),Qt=2;Qt<arguments.length;Qt++)yt[Qt-2]=arguments[Qt];return _.prototype[et].apply(N,yt)}}function L(f){const _=f.length;if(0<_){const T=Array(_);for(let N=0;N<_;N++)T[N]=f[N];return T}return[]}function k(f,_){for(let T=1;T<arguments.length;T++){const N=arguments[T];if(m(N)){const et=f.length||0,lt=N.length||0;f.length=et+lt;for(let yt=0;yt<lt;yt++)f[et+yt]=N[yt]}else f.push(N)}}class H{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function F(f){return/^[\s\xa0]*$/.test(f)}function q(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function z(f){return z[" "](f),f}z[" "]=function(){};var X=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function Z(f,_,T){for(const N in f)_.call(T,f[N],N,f)}function P(f,_){for(const T in f)_.call(void 0,f[T],T,f)}function S(f){const _={};for(const T in f)_[T]=f[T];return _}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(f,_){let T,N;for(let et=1;et<arguments.length;et++){N=arguments[et];for(T in N)f[T]=N[T];for(let lt=0;lt<C.length;lt++)T=C[lt],Object.prototype.hasOwnProperty.call(N,T)&&(f[T]=N[T])}}function U(f){var _=1;f=f.split(":");const T=[];for(;0<_&&f.length;)T.push(f.shift()),_--;return f.length&&T.push(f.join(":")),T}function B(f){h.setTimeout(()=>{throw f},0)}function R(){var f=W;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class V{constructor(){this.h=this.g=null}add(_,T){const N=Y.get();N.set(_,T),this.h?this.h.next=N:this.g=N,this.h=N}}var Y=new H(()=>new D,f=>f.reset());class D{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let $,tt=!1,W=new V,M=()=>{const f=h.Promise.resolve(void 0);$=()=>{f.then(G)}};var G=()=>{for(var f;f=R();){try{f.h.call(f.g)}catch(T){B(T)}var _=Y;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}tt=!1};function nt(){this.s=this.s,this.C=this.C}nt.prototype.s=!1,nt.prototype.ma=function(){this.s||(this.s=!0,this.N())},nt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var ct=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};h.addEventListener("test",T,_),h.removeEventListener("test",T,_)}catch{}return f}();function gt(f,_){if(st.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var T=this.type=f.type,N=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(X){t:{try{z(_.nodeName);var et=!0;break t}catch{}et=!1}et||(_=null)}}else T=="mouseover"?_=f.fromElement:T=="mouseout"&&(_=f.toElement);this.relatedTarget=_,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:_t[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&gt.aa.h.call(this)}}I(gt,st);var _t={2:"touch",3:"pen",4:"mouse"};gt.prototype.h=function(){gt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var xt="closure_listenable_"+(1e6*Math.random()|0),bt=0;function Ht(f,_,T,N,et){this.listener=f,this.proxy=null,this.src=_,this.type=T,this.capture=!!N,this.ha=et,this.key=++bt,this.da=this.fa=!1}function Bt(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function de(f){this.src=f,this.g={},this.h=0}de.prototype.add=function(f,_,T,N,et){var lt=f.toString();f=this.g[lt],f||(f=this.g[lt]=[],this.h++);var yt=ye(f,_,N,et);return-1<yt?(_=f[yt],T||(_.fa=!1)):(_=new Ht(_,this.src,lt,!!N,et),_.fa=T,f.push(_)),_};function ce(f,_){var T=_.type;if(T in f.g){var N=f.g[T],et=Array.prototype.indexOf.call(N,_,void 0),lt;(lt=0<=et)&&Array.prototype.splice.call(N,et,1),lt&&(Bt(_),f.g[T].length==0&&(delete f.g[T],f.h--))}}function ye(f,_,T,N){for(var et=0;et<f.length;++et){var lt=f[et];if(!lt.da&&lt.listener==_&&lt.capture==!!T&&lt.ha==N)return et}return-1}var fe="closure_lm_"+(1e6*Math.random()|0),Nt={};function Pe(f,_,T,N,et){if(Array.isArray(_)){for(var lt=0;lt<_.length;lt++)Pe(f,_[lt],T,N,et);return null}return T=jn(T),f&&f[xt]?f.K(_,T,p(N)?!!N.capture:!1,et):Pt(f,_,T,!1,N,et)}function Pt(f,_,T,N,et,lt){if(!_)throw Error("Invalid event type");var yt=p(et)?!!et.capture:!!et,Qt=Rn(f);if(Qt||(f[fe]=Qt=new de(f)),T=Qt.add(_,T,N,yt,lt),T.proxy)return T;if(N=St(),T.proxy=N,N.src=f,N.listener=T,f.addEventListener)ct||(et=yt),et===void 0&&(et=!1),f.addEventListener(_.toString(),N,et);else if(f.attachEvent)f.attachEvent(An(_.toString()),N);else if(f.addListener&&f.removeListener)f.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return T}function St(){function f(T){return _.call(f.src,f.listener,T)}const _=sr;return f}function De(f,_,T,N,et){if(Array.isArray(_))for(var lt=0;lt<_.length;lt++)De(f,_[lt],T,N,et);else N=p(N)?!!N.capture:!!N,T=jn(T),f&&f[xt]?(f=f.i,_=String(_).toString(),_ in f.g&&(lt=f.g[_],T=ye(lt,T,N,et),-1<T&&(Bt(lt[T]),Array.prototype.splice.call(lt,T,1),lt.length==0&&(delete f.g[_],f.h--)))):f&&(f=Rn(f))&&(_=f.g[_.toString()],f=-1,_&&(f=ye(_,T,N,et)),(T=-1<f?_[f]:null)&&yn(T))}function yn(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[xt])ce(_.i,f);else{var T=f.type,N=f.proxy;_.removeEventListener?_.removeEventListener(T,N,f.capture):_.detachEvent?_.detachEvent(An(T),N):_.addListener&&_.removeListener&&_.removeListener(N),(T=Rn(_))?(ce(T,f),T.h==0&&(T.src=null,_[fe]=null)):Bt(f)}}}function An(f){return f in Nt?Nt[f]:Nt[f]="on"+f}function sr(f,_){if(f.da)f=!0;else{_=new gt(_,this);var T=f.listener,N=f.ha||f.src;f.fa&&yn(f),f=T.call(N,_)}return f}function Rn(f){return f=f[fe],f instanceof de?f:null}var We="__closure_events_fn_"+(1e9*Math.random()>>>0);function jn(f){return typeof f=="function"?f:(f[We]||(f[We]=function(_){return f.handleEvent(_)}),f[We])}function wt(){nt.call(this),this.i=new de(this),this.M=this,this.F=null}I(wt,nt),wt.prototype[xt]=!0,wt.prototype.removeEventListener=function(f,_,T,N){De(this,f,_,T,N)};function Lt(f,_){var T,N=f.F;if(N)for(T=[];N;N=N.F)T.push(N);if(f=f.M,N=_.type||_,typeof _=="string")_=new st(_,f);else if(_ instanceof st)_.target=_.target||f;else{var et=_;_=new st(N,f),O(_,et)}if(et=!0,T)for(var lt=T.length-1;0<=lt;lt--){var yt=_.g=T[lt];et=Te(yt,N,!0,_)&&et}if(yt=_.g=f,et=Te(yt,N,!0,_)&&et,et=Te(yt,N,!1,_)&&et,T)for(lt=0;lt<T.length;lt++)yt=_.g=T[lt],et=Te(yt,N,!1,_)&&et}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var T=f.g[_],N=0;N<T.length;N++)Bt(T[N]);delete f.g[_],f.h--}}this.F=null},wt.prototype.K=function(f,_,T,N){return this.i.add(String(f),_,!1,T,N)},wt.prototype.L=function(f,_,T,N){return this.i.add(String(f),_,!0,T,N)};function Te(f,_,T,N){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var et=!0,lt=0;lt<_.length;++lt){var yt=_[lt];if(yt&&!yt.da&&yt.capture==T){var Qt=yt.listener,qe=yt.ha||yt.src;yt.fa&&ce(f.i,yt),et=Qt.call(qe,N)!==!1&&et}}return et&&!N.defaultPrevented}function we(f,_,T){if(typeof f=="function")T&&(f=E(f,T));else if(f&&typeof f.handleEvent=="function")f=E(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:h.setTimeout(f,_||0)}function zr(f){f.g=we(()=>{f.g=null,f.i&&(f.i=!1,zr(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class Le extends nt{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:zr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ze(f){nt.call(this),this.h=f,this.g={}}I(Ze,nt);var Cn=[];function xn(f){Z(f.g,function(_,T){this.g.hasOwnProperty(T)&&yn(_)},f),f.g={}}Ze.prototype.N=function(){Ze.aa.N.call(this),xn(this)},Ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Je=h.JSON.stringify,ln=h.JSON.parse,In=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function pi(){}pi.prototype.h=null;function gi(f){return f.h||(f.h=f.i())}function Rr(){}var Fn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function or(){st.call(this,"d")}I(or,st);function qn(){st.call(this,"c")}I(qn,st);var ar={},ro=null;function Hr(){return ro=ro||new wt}ar.La="serverreachability";function ts(f){st.call(this,ar.La,f)}I(ts,st);function jr(f){const _=Hr();Lt(_,new ts(_))}ar.STAT_EVENT="statevent";function na(f,_){st.call(this,ar.STAT_EVENT,f),this.stat=_}I(na,st);function me(f){const _=Hr();Lt(_,new na(_,f))}ar.Ma="timingevent";function Oe(f,_){st.call(this,ar.Ma,f),this.size=_}I(Oe,st);function Ce(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},_)}function Vn(){this.g=!0}Vn.prototype.xa=function(){this.g=!1};function io(f,_,T,N,et,lt){f.info(function(){if(f.g)if(lt)for(var yt="",Qt=lt.split("&"),qe=0;qe<Qt.length;qe++){var Wt=Qt[qe].split("=");if(1<Wt.length){var en=Wt[0];Wt=Wt[1];var $e=en.split("_");yt=2<=$e.length&&$e[1]=="type"?yt+(en+"="+Wt+"&"):yt+(en+"=redacted&")}}else yt=null;else yt=lt;return"XMLHTTP REQ ("+N+") [attempt "+et+"]: "+_+`
`+T+`
`+yt})}function Ul(f,_,T,N,et,lt,yt){f.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+et+"]: "+_+`
`+T+`
`+lt+" "+yt})}function Fr(f,_,T,N){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+yi(f,T)+(N?" "+N:"")})}function ra(f,_){f.info(function(){return"TIMEOUT: "+_})}Vn.prototype.info=function(){};function yi(f,_){if(!f.g)return _;if(!_)return null;try{var T=JSON.parse(_);if(T){for(f=0;f<T.length;f++)if(Array.isArray(T[f])){var N=T[f];if(!(2>N.length)){var et=N[1];if(Array.isArray(et)&&!(1>et.length)){var lt=et[0];if(lt!="noop"&&lt!="stop"&&lt!="close")for(var yt=1;yt<et.length;yt++)et[yt]=""}}}}return Je(T)}catch{return _}}var qr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ur;function cr(){}I(cr,pi),cr.prototype.g=function(){return new XMLHttpRequest},cr.prototype.i=function(){return{}},ur=new cr;function un(f,_,T,N){this.j=f,this.i=_,this.l=T,this.R=N||1,this.U=new Ze(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new be}function be(){this.i=null,this.g="",this.h=!1}var so={},es={};function $n(f,_,T){f.L=1,f.v=uo(Gn(_)),f.m=T,f.P=!0,Cr(f,null)}function Cr(f,_){f.F=Date.now(),_i(f),f.A=Gn(f.v);var T=f.A,N=f.R;Array.isArray(N)||(N=[String(N)]),ql(T.i,"t",N),f.C=0,T=f.j.J,f.h=new be,f.g=ef(f.j,T?_:null,!f.m),0<f.O&&(f.M=new Le(E(f.Y,f,f.g),f.O)),_=f.U,T=f.g,N=f.ca;var et="readystatechange";Array.isArray(et)||(et&&(Cn[0]=et.toString()),et=Cn);for(var lt=0;lt<et.length;lt++){var yt=Pe(T,et[lt],N||_.handleEvent,!1,_.h||_);if(!yt)break;_.g[yt.key]=yt}_=f.H?S(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),jr(),io(f.i,f.u,f.A,f.l,f.R,f.m)}un.prototype.ca=function(f){f=f.target;const _=this.M;_&&pr(f)==3?_.j():this.Y(f)},un.prototype.Y=function(f){try{if(f==this.g)t:{const $e=pr(this.g);var _=this.g.Ba();const Ai=this.g.Z();if(!(3>$e)&&($e!=3||this.g&&(this.h.h||this.g.oa()||Yc(this.g)))){this.J||$e!=4||_==7||(_==8||0>=Ai?jr(3):jr(2)),$r(this);var T=this.g.Z();this.X=T;e:if(oo(this)){var N=Yc(this.g);f="";var et=N.length,lt=pr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fe(this),fr(this);var yt="";break e}this.h.i=new h.TextDecoder}for(_=0;_<et;_++)this.h.h=!0,f+=this.h.i.decode(N[_],{stream:!(lt&&_==et-1)});N.length=0,this.h.g+=f,this.C=0,yt=this.h.g}else yt=this.g.oa();if(this.o=T==200,Ul(this.i,this.u,this.A,this.l,this.R,$e,T),this.o){if(this.T&&!this.K){e:{if(this.g){var Qt,qe=this.g;if((Qt=qe.g?qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Qt)){var Wt=Qt;break e}}Wt=null}if(T=Wt)Fr(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gr(this,T);else{this.o=!1,this.s=3,me(12),Fe(this),fr(this);break t}}if(this.P){T=!0;let cn;for(;!this.J&&this.C<yt.length;)if(cn=ia(this,yt),cn==es){$e==4&&(this.s=4,me(14),T=!1),Fr(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==so){this.s=4,me(15),Fr(this.i,this.l,yt,"[Invalid Chunk]"),T=!1;break}else Fr(this.i,this.l,cn,null),Gr(this,cn);if(oo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||yt.length!=0||this.h.h||(this.s=1,me(16),T=!1),this.o=this.o&&T,!T)Fr(this.i,this.l,yt,"[Invalid Chunked Response]"),Fe(this),fr(this);else if(0<yt.length&&!this.W){this.W=!0;var en=this.j;en.g==this&&en.ba&&!en.M&&(en.j.info("Great, no buffering proxy detected. Bytes received: "+yt.length),_o(en),en.M=!0,me(11))}}else Fr(this.i,this.l,yt,null),Gr(this,yt);$e==4&&Fe(this),this.o&&!this.J&&($e==4?Zc(this.j,this):(this.o=!1,_i(this)))}else Qd(this.g),T==400&&0<yt.indexOf("Unknown SID")?(this.s=3,me(12)):(this.s=0,me(13)),Fe(this),fr(this)}}}catch{}finally{}};function oo(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function ia(f,_){var T=f.C,N=_.indexOf(`
`,T);return N==-1?es:(T=Number(_.substring(T,N)),isNaN(T)?so:(N+=1,N+T>_.length?es:(_=_.slice(N,N+T),f.C=N+T,_)))}un.prototype.cancel=function(){this.J=!0,Fe(this)};function _i(f){f.S=Date.now()+f.I,sa(f,f.I)}function sa(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ce(E(f.ba,f),_)}function $r(f){f.B&&(h.clearTimeout(f.B),f.B=null)}un.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ra(this.i,this.A),this.L!=2&&(jr(),me(17)),Fe(this),this.s=2,fr(this)):sa(this,this.S-f)};function fr(f){f.j.G==0||f.J||Zc(f.j,f)}function Fe(f){$r(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,xn(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function Gr(f,_){try{var T=f.j;if(T.G!=0&&(T.g==f||Bl(T.h,f))){if(!f.K&&Bl(T.h,f)&&T.G==3){try{var N=T.Da.g.parse(_)}catch{N=null}if(Array.isArray(N)&&N.length==3){var et=N;if(et[0]==0){t:if(!T.u){if(T.g)if(T.g.F+3e3<f.F)ga(T),ma(T);else break t;Xl(T),me(18)}}else T.za=et[1],0<T.za-T.T&&37500>et[2]&&T.F&&T.v==0&&!T.C&&(T.C=Ce(E(T.Za,T),6e3));if(1>=Yr(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Si(T,11)}else if((f.K||T.g==f)&&ga(T),!F(_))for(et=T.Da.g.parse(_),_=0;_<et.length;_++){let Wt=et[_];if(T.T=Wt[0],Wt=Wt[1],T.G==2)if(Wt[0]=="c"){T.K=Wt[1],T.ia=Wt[2];const en=Wt[3];en!=null&&(T.la=en,T.j.info("VER="+T.la));const $e=Wt[4];$e!=null&&(T.Aa=$e,T.j.info("SVER="+T.Aa));const Ai=Wt[5];Ai!=null&&typeof Ai=="number"&&0<Ai&&(N=1.5*Ai,T.L=N,T.j.info("backChannelRequestTimeoutMs_="+N)),N=T;const cn=f.g;if(cn){const ti=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ti){var lt=N.h;lt.g||ti.indexOf("spdy")==-1&&ti.indexOf("quic")==-1&&ti.indexOf("h2")==-1||(lt.j=lt.l,lt.g=new Set,lt.h&&(aa(lt,lt.h),lt.h=null))}if(N.D){const Wl=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Wl&&(N.ya=Wl,oe(N.I,N.D,Wl))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-f.F,T.j.info("Handshake RTT: "+T.R+"ms")),N=T;var yt=f;if(N.qa=tf(N,N.J?N.ia:null,N.W),yt.K){Nn(N.h,yt);var Qt=yt,qe=N.L;qe&&(Qt.I=qe),Qt.B&&($r(Qt),_i(Qt)),N.g=yt}else Qc(N);0<T.i.length&&pa(T)}else Wt[0]!="stop"&&Wt[0]!="close"||Si(T,7);else T.G==3&&(Wt[0]=="stop"||Wt[0]=="close"?Wt[0]=="stop"?Si(T,7):Yl(T):Wt[0]!="noop"&&T.l&&T.l.ta(Wt),T.v=0)}}jr(4)}catch{}}var oa=class{constructor(f,_){this.g=f,this.map=_}};function xr(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ns(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Yr(f){return f.h?1:f.g?f.g.size:0}function Bl(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function aa(f,_){f.g?f.g.add(_):f.h=_}function Nn(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}xr.prototype.cancel=function(){if(this.i=zl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function zl(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const T of f.g.values())_=_.concat(T.D);return _}return L(f.i)}function Gd(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(m(f)){for(var _=[],T=f.length,N=0;N<T;N++)_.push(f[N]);return _}_=[],T=0;for(N in f)_[T++]=f[N];return _}function la(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(m(f)||typeof f=="string"){var _=[];f=f.length;for(var T=0;T<f;T++)_.push(T);return _}_=[],T=0;for(const N in f)_[T++]=N;return _}}}function Hl(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(m(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var T=la(f),N=Gd(f),et=N.length,lt=0;lt<et;lt++)_.call(void 0,N[lt],T&&T[lt],f)}var ao=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yd(f,_){if(f){f=f.split("&");for(var T=0;T<f.length;T++){var N=f[T].indexOf("="),et=null;if(0<=N){var lt=f[T].substring(0,N);et=f[T].substring(N+1)}else lt=f[T];_(lt,et?decodeURIComponent(et.replace(/\+/g," ")):"")}}}function Ue(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ue){this.h=f.h,lo(this,f.j),this.o=f.o,this.g=f.g,rs(this,f.s),this.l=f.l;var _=f.i,T=new Ei;T.i=_.i,_.g&&(T.g=new Map(_.g),T.h=_.h),vi(this,T),this.m=f.m}else f&&(_=String(f).match(ao))?(this.h=!1,lo(this,_[1]||"",!0),this.o=hr(_[2]||""),this.g=hr(_[3]||"",!0),rs(this,_[4]),this.l=hr(_[5]||"",!0),vi(this,_[6]||"",!0),this.m=hr(_[7]||"")):(this.h=!1,this.i=new Ei(null,this.h))}Ue.prototype.toString=function(){var f=[],_=this.j;_&&f.push(co(_,jl,!0),":");var T=this.g;return(T||_=="file")&&(f.push("//"),(_=this.o)&&f.push(co(_,jl,!0),"@"),f.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&f.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(co(T,T.charAt(0)=="/"?Kd:Fl,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",co(T,ua)),f.join("")};function Gn(f){return new Ue(f)}function lo(f,_,T){f.j=T?hr(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function rs(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function vi(f,_,T){_ instanceof Ei?(f.i=_,$c(f.i,f.h)):(T||(_=co(_,Xd)),f.i=new Ei(_,f.h))}function oe(f,_,T){f.i.set(_,T)}function uo(f){return oe(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function hr(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function co(f,_,T){return typeof f=="string"?(f=encodeURI(f).replace(_,qc),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function qc(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var jl=/[#\/\?@]/g,Fl=/[#\?:]/g,Kd=/[#\?]/g,Xd=/[#\?@]/g,ua=/#/g;function Ei(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function dr(f){f.g||(f.g=new Map,f.h=0,f.i&&Yd(f.i,function(_,T){f.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}e=Ei.prototype,e.add=function(f,_){dr(this),this.i=null,f=Kr(this,f);var T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(_),this.h+=1,this};function Ti(f,_){dr(f),_=Kr(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function wi(f,_){return dr(f),_=Kr(f,_),f.g.has(_)}e.forEach=function(f,_){dr(this),this.g.forEach(function(T,N){T.forEach(function(et){f.call(_,et,N,this)},this)},this)},e.na=function(){dr(this);const f=Array.from(this.g.values()),_=Array.from(this.g.keys()),T=[];for(let N=0;N<_.length;N++){const et=f[N];for(let lt=0;lt<et.length;lt++)T.push(_[N])}return T},e.V=function(f){dr(this);let _=[];if(typeof f=="string")wi(this,f)&&(_=_.concat(this.g.get(Kr(this,f))));else{f=Array.from(this.g.values());for(let T=0;T<f.length;T++)_=_.concat(f[T])}return _},e.set=function(f,_){return dr(this),this.i=null,f=Kr(this,f),wi(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},e.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function ql(f,_,T){Ti(f,_),0<T.length&&(f.i=null,f.g.set(Kr(f,_),L(T)),f.h+=T.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(var T=0;T<_.length;T++){var N=_[T];const lt=encodeURIComponent(String(N)),yt=this.V(N);for(N=0;N<yt.length;N++){var et=lt;yt[N]!==""&&(et+="="+encodeURIComponent(String(yt[N]))),f.push(et)}}return this.i=f.join("&")};function Kr(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function $c(f,_){_&&!f.j&&(dr(f),f.i=null,f.g.forEach(function(T,N){var et=N.toLowerCase();N!=et&&(Ti(this,N),ql(this,et,T))},f)),f.j=_}function fo(f,_){const T=new Vn;if(h.Image){const N=new Image;N.onload=b(mr,T,"TestLoadImage: loaded",!0,_,N),N.onerror=b(mr,T,"TestLoadImage: error",!1,_,N),N.onabort=b(mr,T,"TestLoadImage: abort",!1,_,N),N.ontimeout=b(mr,T,"TestLoadImage: timeout",!1,_,N),h.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=f}else _(!1)}function Ir(f,_){const T=new Vn,N=new AbortController,et=setTimeout(()=>{N.abort(),mr(T,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:N.signal}).then(lt=>{clearTimeout(et),lt.ok?mr(T,"TestPingServer: ok",!0,_):mr(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(et),mr(T,"TestPingServer: error",!1,_)})}function mr(f,_,T,N,et){try{et&&(et.onload=null,et.onerror=null,et.onabort=null,et.ontimeout=null),N(T)}catch{}}function ho(){this.g=new In}function Xr(f,_,T){const N=T||"";try{Hl(f,function(et,lt){let yt=et;p(et)&&(yt=Je(et)),_.push(N+lt+"="+encodeURIComponent(yt))})}catch(et){throw _.push(N+"type="+encodeURIComponent("_badmap")),et}}function is(f){this.l=f.Ub||null,this.j=f.eb||!1}I(is,pi),is.prototype.g=function(){return new bi(this.l,this.j)},is.prototype.i=function(f){return function(){return f}}({});function bi(f,_){wt.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(bi,wt),e=bi.prototype,e.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,Wr(this)},e.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||h).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qr(this)),this.readyState=0},e.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Wr(this)),this.g&&(this.readyState=3,Wr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$l(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function $l(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}e.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?Qr(this):Wr(this),this.readyState==3&&$l(this)}},e.Ra=function(f){this.g&&(this.response=this.responseText=f,Qr(this))},e.Qa=function(f){this.g&&(this.response=f,Qr(this))},e.ga=function(){this.g&&Qr(this)};function Qr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Wr(f)}e.setRequestHeader=function(f,_){this.u.append(f,_)},e.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=_.next();return f.join(`\r
`)};function Wr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Gl(f){let _="";return Z(f,function(T,N){_+=N,_+=":",_+=T,_+=`\r
`}),_}function tn(f,_,T){t:{for(N in T){var N=!1;break t}N=!0}N||(T=Gl(T),typeof f=="string"?T!=null&&encodeURIComponent(String(T)):oe(f,_,T))}function ne(f){wt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(ne,wt);var ca=/^https?$/i,mo=["POST","PUT"];e=ne.prototype,e.Ha=function(f){this.J=f},e.ea=function(f,_,T,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ur.g(),this.v=this.o?gi(this.o):gi(ur),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(lt){Gc(this,lt);return}if(f=T||"",T=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var et in N)T.set(et,N[et]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const lt of N.keys())T.set(lt,N.get(lt));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(T.keys()).find(lt=>lt.toLowerCase()=="content-type"),et=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(mo,_,void 0))||N||et||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[lt,yt]of T)this.g.setRequestHeader(lt,yt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{po(this),this.u=!0,this.g.send(f),this.u=!1}catch(lt){Gc(this,lt)}};function Gc(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,fa(f),Zr(f)}function fa(f){f.A||(f.A=!0,Lt(f,"complete"),Lt(f,"error"))}e.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Lt(this,"complete"),Lt(this,"abort"),Zr(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zr(this,!0)),ne.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?ha(this):this.bb())},e.bb=function(){ha(this)};function ha(f){if(f.h&&typeof c<"u"&&(!f.v[1]||pr(f)!=4||f.Z()!=2)){if(f.u&&pr(f)==4)we(f.Ea,0,f);else if(Lt(f,"readystatechange"),pr(f)==4){f.h=!1;try{const yt=f.Z();t:switch(yt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var T;if(!(T=_)){var N;if(N=yt===0){var et=String(f.D).match(ao)[1]||null;!et&&h.self&&h.self.location&&(et=h.self.location.protocol.slice(0,-1)),N=!ca.test(et?et.toLowerCase():"")}T=N}if(T)Lt(f,"complete"),Lt(f,"success");else{f.m=6;try{var lt=2<pr(f)?f.g.statusText:""}catch{lt=""}f.l=lt+" ["+f.Z()+"]",fa(f)}}finally{Zr(f)}}}}function Zr(f,_){if(f.g){po(f);const T=f.g,N=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||Lt(f,"ready");try{T.onreadystatechange=N}catch{}}}function po(f){f.I&&(h.clearTimeout(f.I),f.I=null)}e.isActive=function(){return!!this.g};function pr(f){return f.g?f.g.readyState:0}e.Z=function(){try{return 2<pr(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),ln(_)}};function Yc(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Qd(f){const _={};f=(f.g&&2<=pr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<f.length;N++){if(F(f[N]))continue;var T=U(f[N]);const et=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const lt=_[et]||[];_[et]=lt,lt.push(T)}P(_,function(N){return N.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function go(f,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||_}function da(f){this.Aa=0,this.i=[],this.j=new Vn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=go("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=go("baseRetryDelayMs",5e3,f),this.cb=go("retryDelaySeedMs",1e4,f),this.Wa=go("forwardChannelMaxRetries",2,f),this.wa=go("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new xr(f&&f.concurrentRequestLimit),this.Da=new ho,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=da.prototype,e.la=8,e.G=1,e.connect=function(f,_,T,N){me(0),this.W=f,this.H=_||{},T&&N!==void 0&&(this.H.OSID=T,this.H.OAID=N),this.F=this.X,this.I=tf(this,null,this.W),pa(this)};function Yl(f){if(Kc(f),f.G==3){var _=f.U++,T=Gn(f.I);if(oe(T,"SID",f.K),oe(T,"RID",_),oe(T,"TYPE","terminate"),yo(f,T),_=new un(f,f.j,_),_.L=2,_.v=uo(Gn(T)),T=!1,h.navigator&&h.navigator.sendBeacon)try{T=h.navigator.sendBeacon(_.v.toString(),"")}catch{}!T&&h.Image&&(new Image().src=_.v,T=!0),T||(_.g=ef(_.j,null),_.g.ea(_.v)),_.F=Date.now(),_i(_)}Jc(f)}function ma(f){f.g&&(_o(f),f.g.cancel(),f.g=null)}function Kc(f){ma(f),f.u&&(h.clearTimeout(f.u),f.u=null),ga(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function pa(f){if(!ns(f.h)&&!f.s){f.s=!0;var _=f.Ga;$||M(),tt||($(),tt=!0),W.add(_,f),f.B=0}}function Wd(f,_){return Yr(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ce(E(f.Ga,f,_),Ql(f,f.B)),f.B++,!0)}e.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const et=new un(this,this.j,f);let lt=this.o;if(this.S&&(lt?(lt=S(lt),O(lt,this.S)):lt=this.S),this.m!==null||this.O||(et.H=lt,lt=null),this.P)t:{for(var _=0,T=0;T<this.i.length;T++){e:{var N=this.i[T];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break e}N=void 0}if(N===void 0)break;if(_+=N,4096<_){_=T;break t}if(_===4096||T===this.i.length-1){_=T+1;break t}}_=1e3}else _=1e3;_=Xc(this,et,_),T=Gn(this.I),oe(T,"RID",f),oe(T,"CVER",22),this.D&&oe(T,"X-HTTP-Session-Id",this.D),yo(this,T),lt&&(this.O?_="headers="+encodeURIComponent(String(Gl(lt)))+"&"+_:this.m&&tn(T,this.m,lt)),aa(this.h,et),this.Ua&&oe(T,"TYPE","init"),this.P?(oe(T,"$req",_),oe(T,"SID","null"),et.T=!0,$n(et,T,null)):$n(et,T,_),this.G=2}}else this.G==3&&(f?Kl(this,f):this.i.length==0||ns(this.h)||Kl(this))};function Kl(f,_){var T;_?T=_.l:T=f.U++;const N=Gn(f.I);oe(N,"SID",f.K),oe(N,"RID",T),oe(N,"AID",f.T),yo(f,N),f.m&&f.o&&tn(N,f.m,f.o),T=new un(f,f.j,T,f.B+1),f.m===null&&(T.H=f.o),_&&(f.i=_.D.concat(f.i)),_=Xc(f,T,1e3),T.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),aa(f.h,T),$n(T,N,_)}function yo(f,_){f.H&&Z(f.H,function(T,N){oe(_,N,T)}),f.l&&Hl({},function(T,N){oe(_,N,T)})}function Xc(f,_,T){T=Math.min(f.i.length,T);var N=f.l?E(f.l.Na,f.l,f):null;t:{var et=f.i;let lt=-1;for(;;){const yt=["count="+T];lt==-1?0<T?(lt=et[0].g,yt.push("ofs="+lt)):lt=0:yt.push("ofs="+lt);let Qt=!0;for(let qe=0;qe<T;qe++){let Wt=et[qe].g;const en=et[qe].map;if(Wt-=lt,0>Wt)lt=Math.max(0,et[qe].g-100),Qt=!1;else try{Xr(en,yt,"req"+Wt+"_")}catch{N&&N(en)}}if(Qt){N=yt.join("&");break t}}}return f=f.i.splice(0,T),_.D=f,N}function Qc(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;$||M(),tt||($(),tt=!0),W.add(_,f),f.v=0}}function Xl(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ce(E(f.Fa,f),Ql(f,f.v)),f.v++,!0)}e.Fa=function(){if(this.u=null,Wc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ce(E(this.ab,this),f)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,me(10),ma(this),Wc(this))};function _o(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function Wc(f){f.g=new un(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=Gn(f.qa);oe(_,"RID","rpc"),oe(_,"SID",f.K),oe(_,"AID",f.T),oe(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&oe(_,"TO",f.ja),oe(_,"TYPE","xmlhttp"),yo(f,_),f.m&&f.o&&tn(_,f.m,f.o),f.L&&(f.g.I=f.L);var T=f.g;f=f.ia,T.L=1,T.v=uo(Gn(_)),T.m=null,T.P=!0,Cr(T,f)}e.Za=function(){this.C!=null&&(this.C=null,ma(this),Xl(this),me(19))};function ga(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function Zc(f,_){var T=null;if(f.g==_){ga(f),_o(f),f.g=null;var N=2}else if(Bl(f.h,_))T=_.D,Nn(f.h,_),N=1;else return;if(f.G!=0){if(_.o)if(N==1){T=_.m?_.m.length:0,_=Date.now()-_.F;var et=f.B;N=Hr(),Lt(N,new Oe(N,T)),pa(f)}else Qc(f);else if(et=_.s,et==3||et==0&&0<_.X||!(N==1&&Wd(f,_)||N==2&&Xl(f)))switch(T&&0<T.length&&(_=f.h,_.i=_.i.concat(T)),et){case 1:Si(f,5);break;case 4:Si(f,10);break;case 3:Si(f,6);break;default:Si(f,2)}}}function Ql(f,_){let T=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(T*=2),T*_}function Si(f,_){if(f.j.info("Error code "+_),_==2){var T=E(f.fb,f),N=f.Xa;const et=!N;N=new Ue(N||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||lo(N,"https"),uo(N),et?fo(N.toString(),T):Ir(N.toString(),T)}else me(2);f.G=0,f.l&&f.l.sa(_),Jc(f),Kc(f)}e.fb=function(f){f?(this.j.info("Successfully pinged google.com"),me(2)):(this.j.info("Failed to ping google.com"),me(1))};function Jc(f){if(f.G=0,f.ka=[],f.l){const _=zl(f.h);(_.length!=0||f.i.length!=0)&&(k(f.ka,_),k(f.ka,f.i),f.h.i.length=0,L(f.i),f.i.length=0),f.l.ra()}}function tf(f,_,T){var N=T instanceof Ue?Gn(T):new Ue(T);if(N.g!="")_&&(N.g=_+"."+N.g),rs(N,N.s);else{var et=h.location;N=et.protocol,_=_?_+"."+et.hostname:et.hostname,et=+et.port;var lt=new Ue(null);N&&lo(lt,N),_&&(lt.g=_),et&&rs(lt,et),T&&(lt.l=T),N=lt}return T=f.D,_=f.ya,T&&_&&oe(N,T,_),oe(N,"VER",f.la),yo(f,N),N}function ef(f,_,T){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new ne(new is({eb:T})):new ne(f.pa),_.Ha(f.J),_}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function nf(){}e=nf.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ya(){}ya.prototype.g=function(f,_){return new Dn(f,_)};function Dn(f,_){wt.call(this),this.g=new da(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!F(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!F(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new Jr(this)}I(Dn,wt),Dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Yl(this.g)},Dn.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.u&&(T={},T.__data__=Je(f),f=T);_.i.push(new oa(_.Ya++,f)),_.G==3&&pa(_)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Yl(this.g),delete this.g,Dn.aa.N.call(this)};function rf(f){or.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){t:{for(const T in _){f=T;break t}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}I(rf,or);function sf(){qn.call(this),this.status=1}I(sf,qn);function Jr(f){this.g=f}I(Jr,nf),Jr.prototype.ua=function(){Lt(this.g,"a")},Jr.prototype.ta=function(f){Lt(this.g,new rf(f))},Jr.prototype.sa=function(f){Lt(this.g,new sf)},Jr.prototype.ra=function(){Lt(this.g,"b")},ya.prototype.createWebChannel=ya.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,H1=function(){return new ya},z1=function(){return Hr()},B1=ar,Xg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qr.NO_ERROR=0,qr.TIMEOUT=8,qr.HTTP_ERROR=6,xh=qr,lr.COMPLETE="complete",U1=lr,Rr.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",wt.prototype.listen=wt.prototype.K,Qu=Rr,ne.prototype.listenOnce=ne.prototype.L,ne.prototype.getLastError=ne.prototype.Ka,ne.prototype.getLastErrorCode=ne.prototype.Ba,ne.prototype.getStatus=ne.prototype.Z,ne.prototype.getResponseJson=ne.prototype.Oa,ne.prototype.getResponseText=ne.prototype.oa,ne.prototype.send=ne.prototype.ea,ne.prototype.setWithCredentials=ne.prototype.Ha,L1=ne}).apply(typeof ph<"u"?ph:typeof self<"u"?self:typeof window<"u"?window:{});const yw="@firebase/firestore",_w="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nl="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=new Hy("@firebase/firestore");function el(){return Yo.logLevel}function vt(e,...t){if(Yo.logLevel<=Kt.DEBUG){const n=t.map(qy);Yo.debug(`Firestore (${Nl}): ${e}`,...n)}}function Ki(e,...t){if(Yo.logLevel<=Kt.ERROR){const n=t.map(qy);Yo.error(`Firestore (${Nl}): ${e}`,...n)}}function Tl(e,...t){if(Yo.logLevel<=Kt.WARN){const n=t.map(qy);Yo.warn(`Firestore (${Nl}): ${e}`,...n)}}function qy(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,j1(e,i,n)}function j1(e,t,n){let i=`FIRESTORE (${Nl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ki(i),new Error(i)}function re(e,t,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,e||j1(t,o,i)}function Ut(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends Zi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class BV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Tn.UNAUTHENTICATED))}shutdown(){}}class zV{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class HV{constructor(t){this.t=t,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){re(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,n(m)):Promise.resolve();let l=new Fs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Fs,t.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const m=l;t.enqueueRetryable(async()=>{await m.promise,await o(this.currentUser)})},h=m=>{vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>h(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Fs)}},0),c()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(re(typeof i.accessToken=="string",31837,{l:i}),new F1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return re(t===null||typeof t=="string",2055,{h:t}),new Tn(t)}}class jV{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class FV{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new jV(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vw{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qV{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,br(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){re(this.o===void 0,3512);const i=l=>{l.error!=null&&vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,vt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>i(l))};const o=l=>{vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new vw(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(re(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new vw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=$V(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<n&&(i+=t.charAt(o[l]%62))}return i}}function Ft(e,t){return e<t?-1:e>t?1:0}function Qg(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=e.codePointAt(n),o=t.codePointAt(n);if(i!==o){if(i<128&&o<128)return Ft(i,o);{const l=q1(),c=GV(l.encode(Ew(e,n)),l.encode(Ew(t,n)));return c!==0?c:Ft(i,o)}}n+=i>65535?2:1}return Ft(e.length,t.length)}function Ew(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function GV(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Ft(e[n],t[n]);return Ft(e.length,t.length)}function wl(e,t,n){return e.length===t.length&&e.every((i,o)=>n(i,t[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw=-62135596800,ww=1e6;class ve{static now(){return ve.fromMillis(Date.now())}static fromDate(t){return ve.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*ww);return new ve(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Et(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Et(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Tw)throw new Et(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Et(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ww}_compareTo(t){return this.seconds===t.seconds?Ft(this.nanoseconds,t.nanoseconds):Ft(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Tw;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{static fromTimestamp(t){return new Vt(t)}static min(){return new Vt(new ve(0,0))}static max(){return new Vt(new ve(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="__name__";class ai{constructor(t,n,i){n===void 0?n=0:n>t.length&&Mt(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Mt(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return ai.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ai?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let o=0;o<i;o++){const l=ai.compareSegments(t.get(o),n.get(o));if(l!==0)return l}return Ft(t.length,n.length)}static compareSegments(t,n){const i=ai.isNumericId(t),o=ai.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?ai.extractNumericId(t).compare(ai.extractNumericId(n)):Qg(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return js.fromString(t.substring(4,t.length-2))}}class _e extends ai{construct(t,n,i){return new _e(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new Et(mt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(o=>o.length>0))}return new _e(n)}static emptyPath(){return new _e([])}}const YV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends ai{construct(t,n,i){return new pn(t,n,i)}static isValidIdentifier(t){return YV.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bw}static keyField(){return new pn([bw])}static fromServerFormat(t){const n=[];let i="",o=0;const l=()=>{if(i.length===0)throw new Et(mt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;o<t.length;){const h=t[o];if(h==="\\"){if(o+1===t.length)throw new Et(mt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Et(mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=m,o+=2}else h==="`"?(c=!c,o++):h!=="."||c?(i+=h,o++):(l(),o++)}if(l(),c)throw new Et(mt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new pn(n)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(t){this.path=t}static fromPath(t){return new Ct(_e.fromString(t))}static fromName(t){return new Ct(_e.fromString(t).popFirst(5))}static empty(){return new Ct(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_e.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return _e.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ct(new _e(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=-1;function KV(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,o=Vt.fromTimestamp(i===1e9?new ve(n+1,0):new ve(n,i));return new Ys(o,Ct.empty(),t)}function XV(e){return new Ys(e.readTime,e.key,gc)}class Ys{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Ys(Vt.min(),Ct.empty(),gc)}static max(){return new Ys(Vt.max(),Ct.empty(),gc)}}function QV(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Ct.comparator(e.documentKey,t.documentKey),n!==0?n:Ft(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(e){if(e.code!==mt.FAILED_PRECONDITION||e.message!==WV)throw e;vt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Mt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new pt((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(n,l).next(i,o)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof pt?n:pt.resolve(n)}catch(n){return pt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):pt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):pt.reject(n)}static resolve(t){return new pt((n,i)=>{n(t)})}static reject(t){return new pt((n,i)=>{i(t)})}static waitFor(t){return new pt((n,i)=>{let o=0,l=0,c=!1;t.forEach(h=>{++o,h.next(()=>{++l,c&&l===o&&n()},m=>i(m))}),c=!0,l===o&&n()})}static or(t){let n=pt.resolve(!1);for(const i of t)n=n.next(o=>o?pt.resolve(o):i());return n}static forEach(t,n){const i=[];return t.forEach((o,l)=>{i.push(n.call(this,o,l))}),this.waitFor(i)}static mapArray(t,n){return new pt((i,o)=>{const l=t.length,c=new Array(l);let h=0;for(let m=0;m<l;m++){const p=m;n(t[p]).next(y=>{c[p]=y,++h,h===l&&i(c)},y=>o(y))}})}static doWhile(t,n){return new pt((i,o)=>{const l=()=>{t()===!0?n().next(()=>{l()},o):i()};l()})}}function JV(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ol(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>n.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}wd.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y=-1;function bd(e){return e==null}function Kh(e){return e===0&&1/e==-1/0}function t4(e){return typeof e=="number"&&Number.isInteger(e)&&!Kh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="";function e4(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Sw(t)),t=n4(e.get(n),t);return Sw(t)}function n4(e,t){let n=t;const i=e.length;for(let o=0;o<i;o++){const l=e.charAt(o);switch(l){case"\0":n+="";break;case G1:n+="";break;default:n+=l}}return n}function Sw(e){return e+G1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Js(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Y1(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t,n){this.comparator=t,this.root=n||mn.EMPTY}insert(t,n){return new Re(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(t){return new Re(this.comparator,this.root.remove(t,this.comparator).copy(null,null,mn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(t,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new gh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new gh(this.root,t,this.comparator,!1)}getReverseIterator(){return new gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new gh(this.root,t,this.comparator,!0)}}class gh{constructor(t,n,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=n?i(t.key,n):1,n&&o&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class mn{constructor(t,n,i,o,l){this.key=t,this.value=n,this.color=i??mn.RED,this.left=o??mn.EMPTY,this.right=l??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,o,l){return new mn(t??this.key,n??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let o=this;const l=i(t,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(t,n,i),null):l===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return mn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Mt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Mt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Mt(27949);return t+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Mt(57766)}get value(){throw Mt(16141)}get color(){throw Mt(16727)}get left(){throw Mt(29726)}get right(){throw Mt(36894)}copy(t,n,i,o,l){return this}insert(t,n,i){return new mn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this.comparator=t,this.data=new Re(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rw(this.data.getIterator())}getIteratorFrom(t){return new Rw(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Ke)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ke(this.comparator);return n.data=t,n}}class Rw{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(t){this.fields=t,t.sort(pn.comparator)}static empty(){return new tr([])}unionWith(t){let n=new Ke(pn.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new tr(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return wl(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new K1("Invalid base64 string: "+l):l}}(t);return new gn(n)}static fromUint8Array(t){const n=function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l}(t);return new gn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ft(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const r4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ks(e){if(re(!!e,39018),typeof e=="string"){let t=0;const n=r4.exec(e);if(re(!!n,46558,{timestamp:e}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ve(e.seconds),nanos:Ve(e.nanos)}}function Ve(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Xs(e){return typeof e=="string"?gn.fromBase64String(e):gn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="server_timestamp",Q1="__type__",W1="__previous_value__",Z1="__local_write_time__";function Gy(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[Q1])===null||n===void 0?void 0:n.stringValue)===X1}function Sd(e){const t=e.mapValue.fields[W1];return Gy(t)?Sd(t):t}function yc(e){const t=Ks(e.mapValue.fields[Z1].timestampValue);return new ve(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(t,n,i,o,l,c,h,m,p,y){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=y}}const Xh="(default)";class _c{constructor(t,n){this.projectId=t,this.database=n||Xh}static empty(){return new _c("","")}get isDefaultDatabase(){return this.database===Xh}isEqual(t){return t instanceof _c&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="__type__",s4="__max__",yh={mapValue:{}},tA="__vector__",Qh="value";function Qs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Gy(e)?4:a4(e)?9007199254740991:o4(e)?10:11:Mt(28295,{value:e})}function di(e,t){if(e===t)return!0;const n=Qs(e);if(n!==Qs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return yc(e).isEqual(yc(t));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Ks(o.timestampValue),h=Ks(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(o,l){return Xs(o.bytesValue).isEqual(Xs(l.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(o,l){return Ve(o.geoPointValue.latitude)===Ve(l.geoPointValue.latitude)&&Ve(o.geoPointValue.longitude)===Ve(l.geoPointValue.longitude)}(e,t);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return Ve(o.integerValue)===Ve(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Ve(o.doubleValue),h=Ve(l.doubleValue);return c===h?Kh(c)===Kh(h):isNaN(c)&&isNaN(h)}return!1}(e,t);case 9:return wl(e.arrayValue.values||[],t.arrayValue.values||[],di);case 10:case 11:return function(o,l){const c=o.mapValue.fields||{},h=l.mapValue.fields||{};if(Aw(c)!==Aw(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(h[m]===void 0||!di(c[m],h[m])))return!1;return!0}(e,t);default:return Mt(52216,{left:e})}}function vc(e,t){return(e.values||[]).find(n=>di(n,t))!==void 0}function bl(e,t){if(e===t)return 0;const n=Qs(e),i=Qs(t);if(n!==i)return Ft(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ft(e.booleanValue,t.booleanValue);case 2:return function(l,c){const h=Ve(l.integerValue||l.doubleValue),m=Ve(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(e,t);case 3:return Cw(e.timestampValue,t.timestampValue);case 4:return Cw(yc(e),yc(t));case 5:return Qg(e.stringValue,t.stringValue);case 6:return function(l,c){const h=Xs(l),m=Xs(c);return h.compareTo(m)}(e.bytesValue,t.bytesValue);case 7:return function(l,c){const h=l.split("/"),m=c.split("/");for(let p=0;p<h.length&&p<m.length;p++){const y=Ft(h[p],m[p]);if(y!==0)return y}return Ft(h.length,m.length)}(e.referenceValue,t.referenceValue);case 8:return function(l,c){const h=Ft(Ve(l.latitude),Ve(c.latitude));return h!==0?h:Ft(Ve(l.longitude),Ve(c.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return xw(e.arrayValue,t.arrayValue);case 10:return function(l,c){var h,m,p,y;const v=l.fields||{},E=c.fields||{},b=(h=v[Qh])===null||h===void 0?void 0:h.arrayValue,I=(m=E[Qh])===null||m===void 0?void 0:m.arrayValue,L=Ft(((p=b?.values)===null||p===void 0?void 0:p.length)||0,((y=I?.values)===null||y===void 0?void 0:y.length)||0);return L!==0?L:xw(b,I)}(e.mapValue,t.mapValue);case 11:return function(l,c){if(l===yh.mapValue&&c===yh.mapValue)return 0;if(l===yh.mapValue)return 1;if(c===yh.mapValue)return-1;const h=l.fields||{},m=Object.keys(h),p=c.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let v=0;v<m.length&&v<y.length;++v){const E=Qg(m[v],y[v]);if(E!==0)return E;const b=bl(h[m[v]],p[y[v]]);if(b!==0)return b}return Ft(m.length,y.length)}(e.mapValue,t.mapValue);default:throw Mt(23264,{Pe:n})}}function Cw(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ft(e,t);const n=Ks(e),i=Ks(t),o=Ft(n.seconds,i.seconds);return o!==0?o:Ft(n.nanos,i.nanos)}function xw(e,t){const n=e.values||[],i=t.values||[];for(let o=0;o<n.length&&o<i.length;++o){const l=bl(n[o],i[o]);if(l)return l}return Ft(n.length,i.length)}function Sl(e){return Wg(e)}function Wg(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Ks(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Xs(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Ct.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",o=!0;for(const l of n.values||[])o?o=!1:i+=",",i+=Wg(l);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${Wg(n.fields[c])}`;return o+"}"}(e.mapValue):Mt(61005,{value:e})}function Ih(e){switch(Qs(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Sd(e);return t?16+Ih(t):16;case 5:return 2*e.stringValue.length;case 6:return Xs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+Ih(l),0)}(e.arrayValue);case 10:case 11:return function(i){let o=0;return Js(i.fields,(l,c)=>{o+=l.length+Ih(c)}),o}(e.mapValue);default:throw Mt(13486,{value:e})}}function Iw(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Zg(e){return!!e&&"integerValue"in e}function Yy(e){return!!e&&"arrayValue"in e}function Nw(e){return!!e&&"nullValue"in e}function Dw(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Nh(e){return!!e&&"mapValue"in e}function o4(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[J1])===null||n===void 0?void 0:n.stringValue)===tA}function ec(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Js(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=ec(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ec(e.arrayValue.values[n]);return t}return Object.assign({},e)}function a4(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===s4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(t){this.value=t}static empty(){return new zn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Nh(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ec(n)}setAll(t){let n=pn.emptyPath(),i={},o=[];t.forEach((c,h)=>{if(!n.isImmediateParentOf(h)){const m=this.getFieldsMap(n);this.applyChanges(m,i,o),i={},o=[],n=h.popLast()}c?i[h.lastSegment()]=ec(c):o.push(h.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,i,o)}delete(t){const n=this.field(t.popLast());Nh(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return di(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let o=n.mapValue.fields[t.get(i)];Nh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,i){Js(n,(o,l)=>t[o]=l);for(const o of i)delete t[o]}clone(){return new zn(ec(this.value))}}function eA(e){const t=[];return Js(e.fields,(n,i)=>{const o=new pn([n]);if(Nh(i)){const l=eA(i.mapValue).fields;if(l.length===0)t.push(o);else for(const c of l)t.push(o.child(c))}else t.push(o)}),new tr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(t,n,i,o,l,c,h){this.key=t,this.documentType=n,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(t){return new wn(t,0,Vt.min(),Vt.min(),Vt.min(),zn.empty(),0)}static newFoundDocument(t,n,i,o){return new wn(t,1,n,Vt.min(),i,o,0)}static newNoDocument(t,n){return new wn(t,2,n,Vt.min(),Vt.min(),zn.empty(),0)}static newUnknownDocument(t,n){return new wn(t,3,n,Vt.min(),Vt.min(),zn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof wn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(t,n){this.position=t,this.inclusive=n}}function Ow(e,t,n){let i=0;for(let o=0;o<e.position.length;o++){const l=t[o],c=e.position[o];if(l.field.isKeyField()?i=Ct.comparator(Ct.fromName(c.referenceValue),n.key):i=bl(c,n.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Mw(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!di(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(t,n="asc"){this.field=t,this.dir=n}}function l4(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{}class je extends nA{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new c4(t,n,i):n==="array-contains"?new d4(t,i):n==="in"?new m4(t,i):n==="not-in"?new p4(t,i):n==="array-contains-any"?new g4(t,i):new je(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new f4(t,i):new h4(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bl(n,this.value)):n!==null&&Qs(this.value)===Qs(n)&&this.matchesComparison(bl(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Mt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pr extends nA{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new Pr(t,n)}matches(t){return rA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function rA(e){return e.op==="and"}function iA(e){return u4(e)&&rA(e)}function u4(e){for(const t of e.filters)if(t instanceof Pr)return!1;return!0}function Jg(e){if(e instanceof je)return e.field.canonicalString()+e.op.toString()+Sl(e.value);if(iA(e))return e.filters.map(t=>Jg(t)).join(",");{const t=e.filters.map(n=>Jg(n)).join(",");return`${e.op}(${t})`}}function sA(e,t){return e instanceof je?function(i,o){return o instanceof je&&i.op===o.op&&i.field.isEqual(o.field)&&di(i.value,o.value)}(e,t):e instanceof Pr?function(i,o){return o instanceof Pr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,c,h)=>l&&sA(c,o.filters[h]),!0):!1}(e,t):void Mt(19439)}function oA(e){return e instanceof je?function(n){return`${n.field.canonicalString()} ${n.op} ${Sl(n.value)}`}(e):e instanceof Pr?function(n){return n.op.toString()+" {"+n.getFilters().map(oA).join(" ,")+"}"}(e):"Filter"}class c4 extends je{constructor(t,n,i){super(t,n,i),this.key=Ct.fromName(i.referenceValue)}matches(t){const n=Ct.comparator(t.key,this.key);return this.matchesComparison(n)}}class f4 extends je{constructor(t,n){super(t,"in",n),this.keys=aA("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class h4 extends je{constructor(t,n){super(t,"not-in",n),this.keys=aA("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function aA(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ct.fromName(i.referenceValue))}class d4 extends je{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Yy(n)&&vc(n.arrayValue,this.value)}}class m4 extends je{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&vc(this.value.arrayValue,n)}}class p4 extends je{constructor(t,n){super(t,"not-in",n)}matches(t){if(vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!vc(this.value.arrayValue,n)}}class g4 extends je{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Yy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>vc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(t,n=null,i=[],o=[],l=null,c=null,h=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=h,this.Ie=null}}function kw(e,t=null,n=[],i=[],o=null,l=null,c=null){return new y4(e,t,n,i,o,l,c)}function Ky(e){const t=Ut(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>Jg(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),bd(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Sl(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Sl(i)).join(",")),t.Ie=n}return t.Ie}function Xy(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!l4(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!sA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Mw(e.startAt,t.startAt)&&Mw(e.endAt,t.endAt)}function ty(e){return Ct.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(t,n=null,i=[],o=[],l=null,c="F",h=null,m=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=m,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function _4(e,t,n,i,o,l,c,h){return new Ml(e,t,n,i,o,l,c,h)}function lA(e){return new Ml(e)}function Vw(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function uA(e){return e.collectionGroup!==null}function nc(e){const t=Ut(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const l of t.explicitOrderBy)t.Ee.push(l),n.add(l.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Ke(pn.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(t).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||t.Ee.push(new Ec(l,i))}),n.has(pn.keyField().canonicalString())||t.Ee.push(new Ec(pn.keyField(),i))}return t.Ee}function ui(e){const t=Ut(e);return t.de||(t.de=v4(t,nc(e))),t.de}function v4(e,t){if(e.limitType==="F")return kw(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Ec(o.field,l)});const n=e.endAt?new Wh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Wh(e.startAt.position,e.startAt.inclusive):null;return kw(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function ey(e,t){const n=e.filters.concat([t]);return new Ml(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ny(e,t,n){return new Ml(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ad(e,t){return Xy(ui(e),ui(t))&&e.limitType===t.limitType}function cA(e){return`${Ky(ui(e))}|lt:${e.limitType}`}function nl(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(o=>oA(o)).join(", ")}]`),bd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(o=>Sl(o)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(o=>Sl(o)).join(",")),`Target(${i})`}(ui(e))}; limitType=${e.limitType})`}function Rd(e,t){return t.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ct.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(e,t)&&function(i,o){for(const l of nc(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(e,t)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(e,t)&&function(i,o){return!(i.startAt&&!function(c,h,m){const p=Ow(c,h,m);return c.inclusive?p<=0:p<0}(i.startAt,nc(i),o)||i.endAt&&!function(c,h,m){const p=Ow(c,h,m);return c.inclusive?p>=0:p>0}(i.endAt,nc(i),o))}(e,t)}function E4(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function fA(e){return(t,n)=>{let i=!1;for(const o of nc(e)){const l=T4(o,t,n);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function T4(e,t,n){const i=e.field.isKeyField()?Ct.comparator(t.key,n.key):function(l,c,h){const m=c.data.field(l),p=h.data.field(l);return m!==null&&p!==null?bl(m,p):Mt(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Mt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,t))return l}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),o=this.inner[i];if(o===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],t))return void(o[l]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Js(this.inner,(n,i)=>{for(const[o,l]of i)t(o,l)})}isEmpty(){return Y1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=new Re(Ct.comparator);function Xi(){return w4}const hA=new Re(Ct.comparator);function Wu(...e){let t=hA;for(const n of e)t=t.insert(n.key,n);return t}function dA(e){let t=hA;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Ho(){return rc()}function mA(){return rc()}function rc(){return new Zo(e=>e.toString(),(e,t)=>e.isEqual(t))}const b4=new Re(Ct.comparator),S4=new Ke(Ct.comparator);function Xt(...e){let t=S4;for(const n of e)t=t.add(n);return t}const A4=new Ke(Ft);function R4(){return A4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kh(t)?"-0":t}}function pA(e){return{integerValue:""+e}}function C4(e,t){return t4(t)?pA(t):Qy(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(){this._=void 0}}function x4(e,t,n){return e instanceof Zh?function(o,l){const c={fields:{[Q1]:{stringValue:X1},[Z1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Gy(l)&&(l=Sd(l)),l&&(c.fields[W1]=l),{mapValue:c}}(n,t):e instanceof Tc?yA(e,t):e instanceof wc?_A(e,t):function(o,l){const c=gA(o,l),h=Pw(c)+Pw(o.Re);return Zg(c)&&Zg(o.Re)?pA(h):Qy(o.serializer,h)}(e,t)}function I4(e,t,n){return e instanceof Tc?yA(e,t):e instanceof wc?_A(e,t):n}function gA(e,t){return e instanceof Jh?function(i){return Zg(i)||function(l){return!!l&&"doubleValue"in l}(i)}(t)?t:{integerValue:0}:null}class Zh extends Cd{}class Tc extends Cd{constructor(t){super(),this.elements=t}}function yA(e,t){const n=vA(t);for(const i of e.elements)n.some(o=>di(o,i))||n.push(i);return{arrayValue:{values:n}}}class wc extends Cd{constructor(t){super(),this.elements=t}}function _A(e,t){let n=vA(t);for(const i of e.elements)n=n.filter(o=>!di(o,i));return{arrayValue:{values:n}}}class Jh extends Cd{constructor(t,n){super(),this.serializer=t,this.Re=n}}function Pw(e){return Ve(e.integerValue||e.doubleValue)}function vA(e){return Yy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function N4(e,t){return e.field.isEqual(t.field)&&function(i,o){return i instanceof Tc&&o instanceof Tc||i instanceof wc&&o instanceof wc?wl(i.elements,o.elements,di):i instanceof Jh&&o instanceof Jh?di(i.Re,o.Re):i instanceof Zh&&o instanceof Zh}(e.transform,t.transform)}class D4{constructor(t,n){this.version=t,this.transformResults=n}}class er{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new er}static exists(t){return new er(void 0,t)}static updateTime(t){return new er(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Dh(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class xd{}function EA(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Id(e.key,er.none()):new Mc(e.key,e.data,er.none());{const n=e.data,i=zn.empty();let o=new Ke(pn.comparator);for(let l of t.fields)if(!o.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new to(e.key,i,new tr(o.toArray()),er.none())}}function O4(e,t,n){e instanceof Mc?function(o,l,c){const h=o.value.clone(),m=Uw(o.fieldTransforms,l,c.transformResults);h.setAll(m),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(e,t,n):e instanceof to?function(o,l,c){if(!Dh(o.precondition,l))return void l.convertToUnknownDocument(c.version);const h=Uw(o.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(TA(o)),m.setAll(h),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(e,t,n):function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,n)}function ic(e,t,n,i){return e instanceof Mc?function(l,c,h,m){if(!Dh(l.precondition,c))return h;const p=l.value.clone(),y=Bw(l.fieldTransforms,m,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(e,t,n,i):e instanceof to?function(l,c,h,m){if(!Dh(l.precondition,c))return h;const p=Bw(l.fieldTransforms,m,c),y=c.data;return y.setAll(TA(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(e,t,n,i):function(l,c,h){return Dh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(e,t,n)}function M4(e,t){let n=null;for(const i of e.fieldTransforms){const o=t.data.field(i.field),l=gA(i.transform,o||null);l!=null&&(n===null&&(n=zn.empty()),n.set(i.field,l))}return n||null}function Lw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&wl(i,o,(l,c)=>N4(l,c))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Mc extends xd{constructor(t,n,i,o=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class to extends xd{constructor(t,n,i,o,l=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function TA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function Uw(e,t,n){const i=new Map;re(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let o=0;o<n.length;o++){const l=e[o],c=l.transform,h=t.data.field(l.field);i.set(l.field,I4(c,h,n[o]))}return i}function Bw(e,t,n){const i=new Map;for(const o of e){const l=o.transform,c=n.data.field(o.field);i.set(o.field,x4(l,c,t))}return i}class Id extends xd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class k4 extends xd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(t,n,i,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(t.key)&&O4(l,t,i[o])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=ic(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=ic(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=mA();return this.mutations.forEach(o=>{const l=t.get(o.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=n.has(o.key)?null:h;const m=EA(c,h);m!==null&&i.set(o.key,m),c.isValidDocument()||c.convertToNoDocument(Vt.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Xt())}isEqual(t){return this.batchId===t.batchId&&wl(this.mutations,t.mutations,(n,i)=>Lw(n,i))&&wl(this.baseMutations,t.baseMutations,(n,i)=>Lw(n,i))}}class Wy{constructor(t,n,i,o){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(t,n,i){re(t.mutations.length===i.length,58842,{fe:t.mutations.length,ge:i.length});let o=function(){return b4}();const l=t.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new Wy(t,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He,Jt;function U4(e){switch(e){case mt.OK:return Mt(64938);case mt.CANCELLED:case mt.UNKNOWN:case mt.DEADLINE_EXCEEDED:case mt.RESOURCE_EXHAUSTED:case mt.INTERNAL:case mt.UNAVAILABLE:case mt.UNAUTHENTICATED:return!1;case mt.INVALID_ARGUMENT:case mt.NOT_FOUND:case mt.ALREADY_EXISTS:case mt.PERMISSION_DENIED:case mt.FAILED_PRECONDITION:case mt.ABORTED:case mt.OUT_OF_RANGE:case mt.UNIMPLEMENTED:case mt.DATA_LOSS:return!0;default:return Mt(15467,{code:e})}}function wA(e){if(e===void 0)return Ki("GRPC error has no .code"),mt.UNKNOWN;switch(e){case He.OK:return mt.OK;case He.CANCELLED:return mt.CANCELLED;case He.UNKNOWN:return mt.UNKNOWN;case He.DEADLINE_EXCEEDED:return mt.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return mt.RESOURCE_EXHAUSTED;case He.INTERNAL:return mt.INTERNAL;case He.UNAVAILABLE:return mt.UNAVAILABLE;case He.UNAUTHENTICATED:return mt.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return mt.INVALID_ARGUMENT;case He.NOT_FOUND:return mt.NOT_FOUND;case He.ALREADY_EXISTS:return mt.ALREADY_EXISTS;case He.PERMISSION_DENIED:return mt.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return mt.FAILED_PRECONDITION;case He.ABORTED:return mt.ABORTED;case He.OUT_OF_RANGE:return mt.OUT_OF_RANGE;case He.UNIMPLEMENTED:return mt.UNIMPLEMENTED;case He.DATA_LOSS:return mt.DATA_LOSS;default:return Mt(39323,{code:e})}}(Jt=He||(He={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=new js([4294967295,4294967295],0);function zw(e){const t=q1().encode(e),n=new P1;return n.update(t),new Uint8Array(n.digest())}function Hw(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),o=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new js([n,i],0),new js([o,l],0)]}class Zy{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Zu(`Invalid padding: ${n}`);if(i<0)throw new Zu(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Zu(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Zu(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=js.fromNumber(this.pe)}we(t,n,i){let o=t.add(n.multiply(js.fromNumber(i)));return o.compare(B4)===1&&(o=new js([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=zw(t),[i,o]=Hw(n);for(let l=0;l<this.hashCount;l++){const c=this.we(i,o,l);if(!this.be(c))return!1}return!0}static create(t,n,i){const o=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new Zy(l,o,n);return i.forEach(h=>c.insert(h)),c}insert(t){if(this.pe===0)return;const n=zw(t),[i,o]=Hw(n);for(let l=0;l<this.hashCount;l++){const c=this.we(i,o,l);this.Se(c)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Zu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(t,n,i,o,l){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const o=new Map;return o.set(t,kc.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Nd(Vt.min(),o,new Re(Ft),Xi(),Xt())}}class kc{constructor(t,n,i,o,l){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new kc(i,n,Xt(),Xt(),Xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(t,n,i,o){this.De=t,this.removedTargetIds=n,this.key=i,this.ve=o}}class bA{constructor(t,n){this.targetId=t,this.Ce=n}}class SA{constructor(t,n,i=gn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=o}}class jw{constructor(){this.Fe=0,this.Me=Fw(),this.xe=gn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Xt(),n=Xt(),i=Xt();return this.Me.forEach((o,l)=>{switch(l){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Mt(38017,{changeType:l})}}),new kc(this.xe,this.Oe,t,n,i)}Qe(){this.Ne=!1,this.Me=Fw()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,re(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class z4{constructor(t){this.ze=t,this.je=new Map,this.He=Xi(),this.Je=_h(),this.Ye=_h(),this.Ze=new Re(Ft)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const i=this.rt(n);switch(t.state){case 0:this.it(n)&&i.ke(t.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(t.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(n);break;case 3:this.it(n)&&(i.Ge(),i.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),i.ke(t.resumeToken));break;default:Mt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((i,o)=>{this.it(o)&&n(o)})}ot(t){const n=t.targetId,i=t.Ce.count,o=this._t(n);if(o){const l=o.target;if(ty(l))if(i===0){const c=new Ct(l.path);this.tt(n,c,wn.newNoDocument(c,Vt.min()))}else re(i===1,20013,{expectedCount:i});else{const c=this.ut(n);if(c!==i){const h=this.ct(t),m=h?this.lt(h,t,c):1;if(m!==0){this.st(n);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,p)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=n;let c,h;try{c=Xs(i).toUint8Array()}catch(m){if(m instanceof K1)return Tl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new Zy(c,o,l)}catch(m){return Tl(m instanceof Zu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.pe===0?null:h}lt(t,n,i){return n.Ce.count===i-this.Tt(t,n.targetId)?0:2}Tt(t,n){const i=this.ze.getRemoteKeysForTarget(n);let o=0;return i.forEach(l=>{const c=this.ze.Pt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(h)||(this.tt(n,l,null),o++)}),o}It(t){const n=new Map;this.je.forEach((l,c)=>{const h=this._t(c);if(h){if(l.current&&ty(h.target)){const m=new Ct(h.target.path);this.Et(m).has(c)||this.dt(c,m)||this.tt(c,m,wn.newNoDocument(m,t))}l.Le&&(n.set(c,l.qe()),l.Qe())}});let i=Xt();this.Ye.forEach((l,c)=>{let h=!0;c.forEachWhile(m=>{const p=this._t(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(l))}),this.He.forEach((l,c)=>c.setReadTime(t));const o=new Nd(t,n,this.Ze,this.He,i);return this.He=Xi(),this.Je=_h(),this.Ye=_h(),this.Ze=new Re(Ft),o}et(t,n){if(!this.it(t))return;const i=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,i),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,i){if(!this.it(t))return;const o=this.rt(t);this.dt(t,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),i&&(this.He=this.He.insert(n,i))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new jw,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new Ke(Ft),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new Ke(Ft),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||vt("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new jw),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function _h(){return new Re(Ct.comparator)}function Fw(){return new Re(Ct.comparator)}const H4={asc:"ASCENDING",desc:"DESCENDING"},j4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F4={and:"AND",or:"OR"};class q4{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ry(e,t){return e.useProto3Json||bd(t)?t:{value:t}}function td(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function AA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function $4(e,t){return td(e,t.toTimestamp())}function ci(e){return re(!!e,49232),Vt.fromTimestamp(function(n){const i=Ks(n);return new ve(i.seconds,i.nanos)}(e))}function Jy(e,t){return iy(e,t).canonicalString()}function iy(e,t){const n=function(o){return new _e(["projects",o.projectId,"databases",o.database])}(e).child("documents");return t===void 0?n:n.child(t)}function RA(e){const t=_e.fromString(e);return re(DA(t),10190,{key:t.toString()}),t}function sy(e,t){return Jy(e.databaseId,t.path)}function hg(e,t){const n=RA(t);if(n.get(1)!==e.databaseId.projectId)throw new Et(mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Et(mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ct(xA(n))}function CA(e,t){return Jy(e.databaseId,t)}function G4(e){const t=RA(e);return t.length===4?_e.emptyPath():xA(t)}function oy(e){return new _e(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function xA(e){return re(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function qw(e,t,n){return{name:sy(e,t),fields:n.value.mapValue.fields}}function Y4(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Mt(39313,{state:p})}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],l=function(p,y){return p.useProto3Json?(re(y===void 0||typeof y=="string",58123),gn.fromBase64String(y||"")):(re(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),gn.fromUint8Array(y||new Uint8Array))}(e,t.targetChange.resumeToken),c=t.targetChange.cause,h=c&&function(p){const y=p.code===void 0?mt.UNKNOWN:wA(p.code);return new Et(y,p.message||"")}(c);n=new SA(i,o,l,h||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const o=hg(e,i.document.name),l=ci(i.document.updateTime),c=i.document.createTime?ci(i.document.createTime):Vt.min(),h=new zn({mapValue:{fields:i.document.fields}}),m=wn.newFoundDocument(o,l,c,h),p=i.targetIds||[],y=i.removedTargetIds||[];n=new Oh(p,y,m.key,m)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const o=hg(e,i.document),l=i.readTime?ci(i.readTime):Vt.min(),c=wn.newNoDocument(o,l),h=i.removedTargetIds||[];n=new Oh([],h,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const o=hg(e,i.document),l=i.removedTargetIds||[];n=new Oh([],l,o,null)}else{if(!("filter"in t))return Mt(11601,{Vt:t});{t.filter;const i=t.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new L4(o,l),h=i.targetId;n=new bA(h,c)}}return n}function K4(e,t){let n;if(t instanceof Mc)n={update:qw(e,t.key,t.value)};else if(t instanceof Id)n={delete:sy(e,t.key)};else if(t instanceof to)n={update:qw(e,t.key,t.data),updateMask:r3(t.fieldMask)};else{if(!(t instanceof k4))return Mt(16599,{ft:t.type});n={verify:sy(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(l,c){const h=c.transform;if(h instanceof Zh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Tc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof wc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Jh)return{fieldPath:c.field.canonicalString(),increment:h.Re};throw Mt(20930,{transform:c.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:$4(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Mt(27497)}(e,t.precondition)),n}function X4(e,t){return e&&e.length>0?(re(t!==void 0,14353),e.map(n=>function(o,l){let c=o.updateTime?ci(o.updateTime):ci(l);return c.isEqual(Vt.min())&&(c=ci(l)),new D4(c,o.transformResults||[])}(n,t))):[]}function Q4(e,t){return{documents:[CA(e,t.path)]}}function W4(e,t){const n={structuredQuery:{}},i=t.path;let o;t.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=CA(e,o);const l=function(p){if(p.length!==0)return NA(Pr.create(p,"and"))}(t.filters);l&&(n.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(y=>function(E){return{field:rl(E.field),direction:t3(E.dir)}}(y))}(t.orderBy);c&&(n.structuredQuery.orderBy=c);const h=ry(e,t.limit);return h!==null&&(n.structuredQuery.limit=h),t.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(t.endAt)),{gt:n,parent:o}}function Z4(e){let t=G4(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){re(i===1,65062);const y=n.from[0];y.allDescendants?o=y.collectionId:t=t.child(y.collectionId)}let l=[];n.where&&(l=function(v){const E=IA(v);return E instanceof Pr&&iA(E)?E.getFilters():[E]}(n.where));let c=[];n.orderBy&&(c=function(v){return v.map(E=>function(I){return new Ec(il(I.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(E))}(n.orderBy));let h=null;n.limit&&(h=function(v){let E;return E=typeof v=="object"?v.value:v,bd(E)?null:E}(n.limit));let m=null;n.startAt&&(m=function(v){const E=!!v.before,b=v.values||[];return new Wh(b,E)}(n.startAt));let p=null;return n.endAt&&(p=function(v){const E=!v.before,b=v.values||[];return new Wh(b,E)}(n.endAt)),_4(t,o,c,l,h,"F",m,p)}function J4(e,t){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Mt(28987,{purpose:o})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function IA(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=il(n.unaryFilter.field);return je.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=il(n.unaryFilter.field);return je.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=il(n.unaryFilter.field);return je.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=il(n.unaryFilter.field);return je.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Mt(61313);default:return Mt(60726)}}(e):e.fieldFilter!==void 0?function(n){return je.create(il(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Mt(58110);default:return Mt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Pr.create(n.compositeFilter.filters.map(i=>IA(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Mt(1026)}}(n.compositeFilter.op))}(e):Mt(30097,{filter:e})}function t3(e){return H4[e]}function e3(e){return j4[e]}function n3(e){return F4[e]}function rl(e){return{fieldPath:e.canonicalString()}}function il(e){return pn.fromServerFormat(e.fieldPath)}function NA(e){return e instanceof je?function(n){if(n.op==="=="){if(Dw(n.value))return{unaryFilter:{field:rl(n.field),op:"IS_NAN"}};if(Nw(n.value))return{unaryFilter:{field:rl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Dw(n.value))return{unaryFilter:{field:rl(n.field),op:"IS_NOT_NAN"}};if(Nw(n.value))return{unaryFilter:{field:rl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rl(n.field),op:e3(n.op),value:n.value}}}(e):e instanceof Pr?function(n){const i=n.getFilters().map(o=>NA(o));return i.length===1?i[0]:{compositeFilter:{op:n3(n.op),filters:i}}}(e):Mt(54877,{filter:e})}function r3(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function DA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(t,n,i,o,l=Vt.min(),c=Vt.min(),h=gn.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(t){return new Ps(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(t){this.wt=t}}function s3(e){const t=Z4({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?ny(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(){this.Cn=new a3}addToCollectionParentIndex(t,n){return this.Cn.add(n),pt.resolve()}getCollectionParents(t,n){return pt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return pt.resolve()}deleteFieldIndex(t,n){return pt.resolve()}deleteAllFieldIndexes(t){return pt.resolve()}createTargetIndexes(t,n){return pt.resolve()}getDocumentsMatchingTarget(t,n){return pt.resolve(null)}getIndexType(t,n){return pt.resolve(0)}getFieldIndexes(t,n){return pt.resolve([])}getNextCollectionGroupToUpdate(t){return pt.resolve(null)}getMinOffset(t,n){return pt.resolve(Ys.min())}getMinOffsetFromCollectionGroup(t,n){return pt.resolve(Ys.min())}updateCollectionGroup(t,n,i){return pt.resolve()}updateIndexEntries(t,n){return pt.resolve()}}class a3{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),o=this.index[n]||new Ke(_e.comparator),l=!o.has(i);return this.index[n]=o.add(i),l}has(t){const n=t.lastSegment(),i=t.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(t){return(this.index[t]||new Ke(_e.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OA=41943040;class Bn{static withCacheSize(t){return new Bn(t,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(OA,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new Al(0)}static lr(){return new Al(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="LruGarbageCollector",l3=1048576;function Yw([e,t],[n,i]){const o=Ft(e,n);return o===0?Ft(t,i):o}class u3{constructor(t){this.Er=t,this.buffer=new Ke(Yw),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Yw(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class c3{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){vt(Gw,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ol(n)?vt(Gw,"Ignoring IndexedDB error during garbage collection: ",n):await Dl(n)}await this.mr(3e5)})}}class f3{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return pt.resolve(wd.le);const i=new u3(n);return this.gr.forEachTarget(t,o=>i.Rr(o.sequenceNumber)).next(()=>this.gr.yr(t,o=>i.Rr(o))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.gr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(vt("LruGarbageCollector","Garbage collection skipped; disabled"),pt.resolve($w)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(vt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$w):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let i,o,l,c,h,m,p;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(vt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),o=this.params.maximumSequenceNumbersToCollect):o=v,c=Date.now(),this.nthSequenceNumber(t,o))).next(v=>(i=v,h=Date.now(),this.removeTargets(t,i,n))).next(v=>(l=v,m=Date.now(),this.removeOrphanedDocuments(t,i))).next(v=>(p=Date.now(),el()<=Kt.DEBUG&&vt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${o} in `+(h-c)+`ms
	Removed ${l} targets in `+(m-h)+`ms
	Removed ${v} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),pt.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:v})))}}function h3(e,t){return new f3(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(){this.changes=new Zo(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,wn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?pt.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(t,n,i,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(o=>(i=o,this.remoteDocumentCache.getEntry(t,n))).next(o=>(i!==null&&ic(i.mutation,o,tr.empty(),ve.now()),o))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,Xt()).next(()=>i))}getLocalViewOfDocuments(t,n,i=Xt()){const o=Ho();return this.populateOverlays(t,o,n).next(()=>this.computeViews(t,n,o,i).next(l=>{let c=Wu();return l.forEach((h,m)=>{c=c.insert(h,m.overlayedDocument)}),c}))}getOverlayedDocuments(t,n){const i=Ho();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,Xt()))}populateOverlays(t,n,i){const o=[];return i.forEach(l=>{n.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(t,o).next(l=>{l.forEach((c,h)=>{n.set(c,h)})})}computeViews(t,n,i,o){let l=Xi();const c=rc(),h=function(){return rc()}();return n.forEach((m,p)=>{const y=i.get(p.key);o.has(p.key)&&(y===void 0||y.mutation instanceof to)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),ic(y.mutation,p,y.mutation.getFieldMask(),ve.now())):c.set(p.key,tr.empty())}),this.recalculateAndSaveOverlays(t,l).next(m=>(m.forEach((p,y)=>c.set(p,y)),n.forEach((p,y)=>{var v;return h.set(p,new m3(y,(v=c.get(p))!==null&&v!==void 0?v:null))}),h))}recalculateAndSaveOverlays(t,n){const i=rc();let o=new Re((c,h)=>c-h),l=Xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(c=>{for(const h of c)h.keys().forEach(m=>{const p=n.get(m);if(p===null)return;let y=i.get(m)||tr.empty();y=h.applyToLocalView(p,y),i.set(m,y);const v=(o.get(h.batchId)||Xt()).add(m);o=o.insert(h.batchId,v)})}).next(()=>{const c=[],h=o.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),p=m.key,y=m.value,v=mA();y.forEach(E=>{if(!l.has(E)){const b=EA(n.get(E),i.get(E));b!==null&&v.set(E,b),l=l.add(E)}}),c.push(this.documentOverlayCache.saveOverlays(t,p,v))}return pt.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,o){return function(c){return Ct.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):uA(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,o):this.getDocumentsMatchingCollectionQuery(t,n,i,o)}getNextDocuments(t,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,o).next(l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,o-l.size):pt.resolve(Ho());let h=gc,m=l;return c.next(p=>pt.forEach(p,(y,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),l.get(y)?pt.resolve():this.remoteDocumentCache.getEntry(t,y).next(E=>{m=m.insert(y,E)}))).next(()=>this.populateOverlays(t,p,l)).next(()=>this.computeViews(t,m,p,Xt())).next(y=>({batchId:h,changes:dA(y)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ct(n)).next(i=>{let o=Wu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(t,n,i,o){const l=n.collectionGroup;let c=Wu();return this.indexManager.getCollectionParents(t,l).next(h=>pt.forEach(h,m=>{const p=function(v,E){return new Ml(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,m.child(l));return this.getDocumentsMatchingCollectionQuery(t,p,i,o).next(y=>{y.forEach((v,E)=>{c=c.insert(v,E)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,n,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,l,o))).next(c=>{l.forEach((m,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,wn.newInvalidDocument(y)))});let h=Wu();return c.forEach((m,p)=>{const y=l.get(m);y!==void 0&&ic(y.mutation,p,tr.empty(),ve.now()),Rd(n,p)&&(h=h.insert(m,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return pt.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:ci(o.createTime)}}(n)),pt.resolve()}getNamedQuery(t,n){return pt.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(o){return{name:o.name,query:s3(o.bundledQuery),readTime:ci(o.readTime)}}(n)),pt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(){this.overlays=new Re(Ct.comparator),this.Qr=new Map}getOverlay(t,n){return pt.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Ho();return pt.forEach(n,o=>this.getOverlay(t,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((o,l)=>{this.St(t,n,l)}),pt.resolve()}removeOverlaysForBatchId(t,n,i){const o=this.Qr.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(i)),pt.resolve()}getOverlaysForCollection(t,n,i){const o=Ho(),l=n.length+1,c=new Ct(n.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,p=m.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return pt.resolve(o)}getOverlaysForCollectionGroup(t,n,i,o){let l=new Re((p,y)=>p-y);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let y=l.get(p.largestBatchId);y===null&&(y=Ho(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=Ho(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,y)=>h.set(p,y)),!(h.size()>=o)););return pt.resolve(h)}St(t,n,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.Qr.get(o.largestBatchId).delete(i.key);this.Qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new P4(n,i));let l=this.Qr.get(n);l===void 0&&(l=Xt(),this.Qr.set(n,l)),this.Qr.set(n,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(t){return pt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,pt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(){this.$r=new Ke(on.Ur),this.Kr=new Ke(on.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const i=new on(t,n);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.zr(new on(t,n))}jr(t,n){t.forEach(i=>this.removeReference(i,n))}Hr(t){const n=new Ct(new _e([])),i=new on(n,t),o=new on(n,t+1),l=[];return this.Kr.forEachInRange([i,o],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new Ct(new _e([])),i=new on(n,t),o=new on(n,t+1);let l=Xt();return this.Kr.forEachInRange([i,o],c=>{l=l.add(c.key)}),l}containsKey(t){const n=new on(t,0),i=this.$r.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class on{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return Ct.comparator(t.key,n.key)||Ft(t.Zr,n.Zr)}static Wr(t,n){return Ft(t.Zr,n.Zr)||Ct.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ke(on.Ur)}checkEmpty(t){return pt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,o){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new V4(l,n,i,o);this.mutationQueue.push(c);for(const h of o)this.Xr=this.Xr.add(new on(h.key,l)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return pt.resolve(c)}lookupMutationBatch(t,n){return pt.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,o=this.ti(i),l=o<0?0:o;return pt.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return pt.resolve(this.mutationQueue.length===0?$y:this.nr-1)}getAllMutationBatches(t){return pt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new on(n,0),o=new on(n,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([i,o],c=>{const h=this.ei(c.Zr);l.push(h)}),pt.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Ke(Ft);return n.forEach(o=>{const l=new on(o,0),c=new on(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],h=>{i=i.add(h.Zr)})}),pt.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,o=i.length+1;let l=i;Ct.isDocumentKey(l)||(l=l.child(""));const c=new on(new Ct(l),0);let h=new Ke(Ft);return this.Xr.forEachWhile(m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===o&&(h=h.add(m.Zr)),!0)},c),pt.resolve(this.ni(h))}ni(t){const n=[];return t.forEach(i=>{const o=this.ei(i);o!==null&&n.push(o)}),n}removeMutationBatch(t,n){re(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return pt.forEach(n.mutations,o=>{const l=new on(o.key,n.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Xr=i})}sr(t){}containsKey(t,n){const i=new on(n,0),o=this.Xr.firstAfterOrEqual(i);return pt.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,pt.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(t){this.ii=t,this.docs=function(){return new Re(Ct.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,o=this.docs.get(i),l=o?o.size:0,c=this.ii(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return pt.resolve(i?i.document.mutableCopy():wn.newInvalidDocument(n))}getEntries(t,n){let i=Xi();return n.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():wn.newInvalidDocument(o))}),pt.resolve(i)}getDocumentsMatchingQuery(t,n,i,o){let l=Xi();const c=n.path,h=new Ct(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||QV(XV(y),i)<=0||(o.has(y.key)||Rd(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return pt.resolve(l)}getAllFromCollectionGroup(t,n,i,o){Mt(9500)}si(t,n){return pt.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new T3(this)}getSize(t){return pt.resolve(this.size)}}class T3 extends d3{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(t,o)):this.Br.removeEntry(i)}),pt.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(t){this.persistence=t,this.oi=new Zo(n=>Ky(n),Xy),this.lastRemoteSnapshotVersion=Vt.min(),this.highestTargetId=0,this._i=0,this.ai=new t_,this.targetCount=0,this.ui=Al.cr()}forEachTarget(t,n){return this.oi.forEach((i,o)=>n(o)),pt.resolve()}getLastRemoteSnapshotVersion(t){return pt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return pt.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),pt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this._i&&(this._i=n),pt.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new Al(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,pt.resolve()}updateTargetData(t,n){return this.Tr(n),pt.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,pt.resolve()}removeTargets(t,n,i){let o=0;const l=[];return this.oi.forEach((c,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(t,h.targetId)),o++)}),pt.waitFor(l).next(()=>o)}getTargetCount(t){return pt.resolve(this.targetCount)}getTargetData(t,n){const i=this.oi.get(n)||null;return pt.resolve(i)}addMatchingKeys(t,n,i){return this.ai.Gr(n,i),pt.resolve()}removeMatchingKeys(t,n,i){this.ai.jr(n,i);const o=this.persistence.referenceDelegate,l=[];return o&&n.forEach(c=>{l.push(o.markPotentiallyOrphaned(t,c))}),pt.waitFor(l)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),pt.resolve()}getMatchingKeysForTargetId(t,n){const i=this.ai.Yr(n);return pt.resolve(i)}containsKey(t,n){return pt.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(t,n){this.ci={},this.overlays={},this.li=new wd(0),this.hi=!1,this.hi=!0,this.Pi=new _3,this.referenceDelegate=t(this),this.Ti=new w3(this),this.indexManager=new o3,this.remoteDocumentCache=function(o){return new E3(o)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new i3(n),this.Ei=new g3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new y3,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ci[t.toKey()];return i||(i=new v3(n,this.referenceDelegate),this.ci[t.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,i){vt("MemoryPersistence","Starting transaction:",t);const o=new b3(this.li.next());return this.referenceDelegate.di(),i(o).next(l=>this.referenceDelegate.Ai(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ri(t,n){return pt.or(Object.values(this.ci).map(i=>()=>i.containsKey(t,n)))}}class b3 extends ZV{constructor(t){super(),this.currentSequenceNumber=t}}class e_{constructor(t){this.persistence=t,this.Vi=new t_,this.mi=null}static fi(t){return new e_(t)}get gi(){if(this.mi)return this.mi;throw Mt(60996)}addReference(t,n,i){return this.Vi.addReference(i,n),this.gi.delete(i.toString()),pt.resolve()}removeReference(t,n,i){return this.Vi.removeReference(i,n),this.gi.add(i.toString()),pt.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),pt.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(o=>{o.forEach(l=>this.gi.add(l.toString()))}).next(()=>i.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pt.forEach(this.gi,i=>{const o=Ct.fromPath(i);return this.pi(t,o).next(l=>{l||n.removeEntry(o,Vt.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(i=>{i?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return pt.or([()=>pt.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class ed{constructor(t,n){this.persistence=t,this.yi=new Zo(i=>e4(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=h3(this,n)}static fi(t,n){return new ed(t,n)}di(){}Ai(t){return pt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(o=>i+o))}br(t){let n=0;return this.yr(t,i=>{n++}).next(()=>n)}yr(t,n){return pt.forEach(this.yi,(i,o)=>this.Dr(t,i,o).next(l=>l?pt.resolve():n(o)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.si(t,c=>this.Dr(t,c,n).next(h=>{h||(i++,l.removeEntry(c,Vt.min()))})).next(()=>l.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),pt.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.yi.set(i,t.currentSequenceNumber),pt.resolve()}removeReference(t,n,i){return this.yi.set(i,t.currentSequenceNumber),pt.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),pt.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Ih(t.data.value)),n}Dr(t,n,i){return pt.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.yi.get(n);return pt.resolve(o!==void 0&&o>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(t,n,i,o){this.targetId=t,this.fromCache=n,this.ds=i,this.As=o}static Rs(t,n){let i=Xt(),o=Xt();for(const l of n.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new n_(t,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return vk()?8:JV(Sn())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,i,o){const l={result:null};return this.ws(t,n).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(t,n,o,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new S3;return this.Ss(t,n,c).next(h=>{if(l.result=h,this.fs)return this.Ds(t,n,c,h.size)})}).next(()=>l.result)}Ds(t,n,i,o){return i.documentReadCount<this.gs?(el()<=Kt.DEBUG&&vt("QueryEngine","SDK will not create cache indexes for query:",nl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),pt.resolve()):(el()<=Kt.DEBUG&&vt("QueryEngine","Query:",nl(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ps*o?(el()<=Kt.DEBUG&&vt("QueryEngine","The SDK decides to create cache indexes for query:",nl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ui(n))):pt.resolve())}ws(t,n){if(Vw(n))return pt.resolve(null);let i=ui(n);return this.indexManager.getIndexType(t,i).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=ny(n,null,"F"),i=ui(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(l=>{const c=Xt(...l);return this.ys.getDocuments(t,c).next(h=>this.indexManager.getMinOffset(t,i).next(m=>{const p=this.vs(n,h);return this.Cs(n,p,c,m.readTime)?this.ws(t,ny(n,null,"F")):this.Fs(t,p,n,m)}))})))}bs(t,n,i,o){return Vw(n)||o.isEqual(Vt.min())?pt.resolve(null):this.ys.getDocuments(t,i).next(l=>{const c=this.vs(n,l);return this.Cs(n,c,i,o)?pt.resolve(null):(el()<=Kt.DEBUG&&vt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),nl(n)),this.Fs(t,c,n,KV(o,gc)).next(h=>h))})}vs(t,n){let i=new Ke(fA(t));return n.forEach((o,l)=>{Rd(t,l)&&(i=i.add(l))}),i}Cs(t,n,i,o){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const l=t.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(t,n,i){return el()<=Kt.DEBUG&&vt("QueryEngine","Using full collection scan to execute query:",nl(n)),this.ys.getDocumentsMatchingQuery(t,n,Ys.min(),i)}Fs(t,n,i,o){return this.ys.getDocumentsMatchingQuery(t,i,o).next(l=>(n.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="LocalStore",R3=3e8;class C3{constructor(t,n,i,o){this.persistence=t,this.Ms=n,this.serializer=o,this.xs=new Re(Ft),this.Os=new Zo(l=>Ky(l),Xy),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(i)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new p3(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function x3(e,t,n,i){return new C3(e,t,n,i)}async function kA(e,t){const n=Ut(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,n.Ls(t),n.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],h=[];let m=Xt();for(const p of o){c.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of l){h.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return n.localDocuments.getDocuments(i,m).next(p=>({ks:p,removedBatchIds:c,addedBatchIds:h}))})})}function I3(e,t){const n=Ut(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=t.batch.keys(),l=n.Bs.newChangeBuffer({trackRemovals:!0});return function(h,m,p,y){const v=p.batch,E=v.keys();let b=pt.resolve();return E.forEach(I=>{b=b.next(()=>y.getEntry(m,I)).next(L=>{const k=p.docVersions.get(I);re(k!==null,48541),L.version.compareTo(k)<0&&(v.applyToRemoteDocument(L,p),L.isValidDocument()&&(L.setReadTime(p.commitVersion),y.addEntry(L)))})}),b.next(()=>h.mutationQueue.removeMutationBatch(m,v))}(n,i,t,l).next(()=>l.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let m=Xt();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(m=m.add(h.batch.mutations[p].key));return m}(t))).next(()=>n.localDocuments.getDocuments(i,o))})}function VA(e){const t=Ut(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function N3(e,t){const n=Ut(e),i=t.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const h=[];t.targetChanges.forEach((y,v)=>{const E=o.get(v);if(!E)return;h.push(n.Ti.removeMatchingKeys(l,y.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(l,y.addedDocuments,v)));let b=E.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(v)!==null?b=b.withResumeToken(gn.EMPTY_BYTE_STRING,Vt.min()).withLastLimboFreeSnapshotVersion(Vt.min()):y.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(y.resumeToken,i)),o=o.insert(v,b),function(L,k,H){return L.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=R3?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(E,b,y)&&h.push(n.Ti.updateTargetData(l,b))});let m=Xi(),p=Xt();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))}),h.push(D3(l,c,t.documentUpdates).next(y=>{m=y.qs,p=y.Qs})),!i.isEqual(Vt.min())){const y=n.Ti.getLastRemoteSnapshotVersion(l).next(v=>n.Ti.setTargetsMetadata(l,l.currentSequenceNumber,i));h.push(y)}return pt.waitFor(h).next(()=>c.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(n.xs=o,l))}function D3(e,t,n){let i=Xt(),o=Xt();return n.forEach(l=>i=i.add(l)),t.getEntries(e,i).next(l=>{let c=Xi();return n.forEach((h,m)=>{const p=l.get(h);m.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(h)),m.isNoDocument()&&m.version.isEqual(Vt.min())?(t.removeEntry(h,m.readTime),c=c.insert(h,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(m),c=c.insert(h,m)):vt(r_,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",m.version)}),{qs:c,Qs:o}})}function O3(e,t){const n=Ut(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=$y),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function M3(e,t){const n=Ut(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return n.Ti.getTargetData(i,t).next(l=>l?(o=l,pt.resolve(o)):n.Ti.allocateTargetId(i).next(c=>(o=new Ps(t,c,"TargetPurposeListen",i.currentSequenceNumber),n.Ti.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=n.xs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(i.targetId,i),n.Os.set(t,i.targetId)),i})}async function ay(e,t,n){const i=Ut(e),o=i.xs.get(t),l=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!Ol(c))throw c;vt(r_,`Failed to update sequence numbers for target ${t}: ${c}`)}i.xs=i.xs.remove(t),i.Os.delete(o.target)}function Kw(e,t,n){const i=Ut(e);let o=Vt.min(),l=Xt();return i.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,y){const v=Ut(m),E=v.Os.get(y);return E!==void 0?pt.resolve(v.xs.get(E)):v.Ti.getTargetData(p,y)}(i,c,ui(t)).next(h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(c,h.targetId).next(m=>{l=m})}).next(()=>i.Ms.getDocumentsMatchingQuery(c,t,n?o:Vt.min(),n?l:Xt())).next(h=>(k3(i,E4(t),h),{documents:h,$s:l})))}function k3(e,t,n){let i=e.Ns.get(t)||Vt.min();n.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),e.Ns.set(t,i)}class Xw{constructor(){this.activeTargetIds=R4()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class V3{constructor(){this.xo=new Xw,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,i){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new Xw,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="ConnectivityMonitor";class Ww{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){vt(Qw,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){vt(Qw,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vh=null;function ly(){return vh===null?vh=function(){return 268435456+Math.round(2147483648*Math.random())}():vh++,"0x"+vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="RestConnection",L3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class U3{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${i}/databases/${o}`,this.Go=this.databaseId.database===Xh?`project_id=${i}`:`project_id=${i}&database_id=${o}`}zo(t,n,i,o,l){const c=ly(),h=this.jo(t,n.toUriEncodedString());vt(dg,`Sending RPC '${t}' ${c}:`,h,i);const m={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(m,o,l);const{host:p}=new URL(h),y=xl(p);return this.Jo(t,h,m,i,y).then(v=>(vt(dg,`Received RPC '${t}' ${c}: `,v),v),v=>{throw Tl(dg,`RPC '${t}' ${c} failed with error: `,v,"url: ",h,"request:",i),v})}Yo(t,n,i,o,l,c){return this.zo(t,n,i,o,l)}Ho(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Nl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,l)=>t[l]=o),i&&i.headers.forEach((o,l)=>t[l]=o)}jo(t,n){const i=L3[t];return`${this.Ko}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class z3 extends U3{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,o,l){const c=ly();return new Promise((h,m)=>{const p=new L1;p.setWithCredentials(!0),p.listenOnce(U1.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case xh.NO_ERROR:const v=p.getResponseJson();vt(En,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(v)),h(v);break;case xh.TIMEOUT:vt(En,`RPC '${t}' ${c} timed out`),m(new Et(mt.DEADLINE_EXCEEDED,"Request time out"));break;case xh.HTTP_ERROR:const E=p.getStatus();if(vt(En,`RPC '${t}' ${c} failed with status:`,E,"response text:",p.getResponseText()),E>0){let b=p.getResponseJson();Array.isArray(b)&&(b=b[0]);const I=b?.error;if(I&&I.status&&I.message){const L=function(H){const F=H.toLowerCase().replace(/_/g,"-");return Object.values(mt).indexOf(F)>=0?F:mt.UNKNOWN}(I.status);m(new Et(L,I.message))}else m(new Et(mt.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new Et(mt.UNAVAILABLE,"Connection failed."));break;default:Mt(9055,{h_:t,streamId:c,P_:p.getLastErrorCode(),T_:p.getLastError()})}}finally{vt(En,`RPC '${t}' ${c} completed.`)}});const y=JSON.stringify(o);vt(En,`RPC '${t}' ${c} sending request:`,o),p.send(n,"POST",y,i,15)})}I_(t,n,i){const o=ly(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=H1(),h=z1(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Ho(m.initMessageHeaders,n,i),m.encodeInitMessageHeaders=!0;const y=l.join("");vt(En,`Creating RPC '${t}' stream ${o}: ${y}`,m);const v=c.createWebChannel(y,m);this.E_(v);let E=!1,b=!1;const I=new B3({Zo:k=>{b?vt(En,`Not sending because RPC '${t}' stream ${o} is closed:`,k):(E||(vt(En,`Opening RPC '${t}' stream ${o} transport.`),v.open(),E=!0),vt(En,`RPC '${t}' stream ${o} sending:`,k),v.send(k))},Xo:()=>v.close()}),L=(k,H,F)=>{k.listen(H,q=>{try{F(q)}catch(z){setTimeout(()=>{throw z},0)}})};return L(v,Qu.EventType.OPEN,()=>{b||(vt(En,`RPC '${t}' stream ${o} transport opened.`),I.__())}),L(v,Qu.EventType.CLOSE,()=>{b||(b=!0,vt(En,`RPC '${t}' stream ${o} transport closed`),I.u_(),this.d_(v))}),L(v,Qu.EventType.ERROR,k=>{b||(b=!0,Tl(En,`RPC '${t}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),I.u_(new Et(mt.UNAVAILABLE,"The operation could not be completed")))}),L(v,Qu.EventType.MESSAGE,k=>{var H;if(!b){const F=k.data[0];re(!!F,16349);const q=F,z=q?.error||((H=q[0])===null||H===void 0?void 0:H.error);if(z){vt(En,`RPC '${t}' stream ${o} received error:`,z);const X=z.status;let Z=function(C){const O=He[C];if(O!==void 0)return wA(O)}(X),P=z.message;Z===void 0&&(Z=mt.INTERNAL,P="Unknown error status: "+X+" with message "+z.message),b=!0,I.u_(new Et(Z,P)),v.close()}else vt(En,`RPC '${t}' stream ${o} received:`,F),I.c_(F)}}),L(h,B1.STAT_EVENT,k=>{k.stat===Xg.PROXY?vt(En,`RPC '${t}' stream ${o} detected buffering proxy`):k.stat===Xg.NOPROXY&&vt(En,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{I.a_()},0),I}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function mg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(e){return new q4(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(t,n,i=1e3,o=1.5,l=6e4){this.xi=t,this.timerId=n,this.A_=i,this.R_=o,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),o=Math.max(0,n-i);o>0&&vt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="PersistentStream";class LA{constructor(t,n,i,o,l,c,h,m){this.xi=t,this.S_=i,this.D_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new PA(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===mt.RESOURCE_EXHAUSTED?(Ki(n.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===mt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.v_===n&&this.z_(i,o)},i=>{t(()=>{const o=new Et(mt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(o)})})}z_(t,n){const i=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{i(()=>this.j_(o))}),this.stream.onMessage(o=>{i(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return vt(Zw,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(vt(Zw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class H3 extends LA{constructor(t,n,i,o,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,c),this.serializer=l}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=Y4(this.serializer,t),i=function(l){if(!("targetChange"in l))return Vt.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Vt.min():c.readTime?ci(c.readTime):Vt.min()}(t);return this.listener.Y_(n,i)}Z_(t){const n={};n.database=oy(this.serializer),n.addTarget=function(l,c){let h;const m=c.target;if(h=ty(m)?{documents:Q4(l,m)}:{query:W4(l,m).gt},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=AA(l,c.resumeToken);const p=ry(l,c.expectedCount);p!==null&&(h.expectedCount=p)}else if(c.snapshotVersion.compareTo(Vt.min())>0){h.readTime=td(l,c.snapshotVersion.toTimestamp());const p=ry(l,c.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,t);const i=J4(this.serializer,t);i&&(n.labels=i),this.Q_(n)}X_(t){const n={};n.database=oy(this.serializer),n.removeTarget=t,this.Q_(n)}}class j3 extends LA{constructor(t,n,i,o,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,n){return this.connection.I_("Write",t,n)}J_(t){return re(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,re(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){re(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const n=X4(t.writeResults,t.commitTime),i=ci(t.commitTime);return this.listener.ra(i,n)}ia(){const t={};t.database=oy(this.serializer),this.Q_(t)}ta(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>K4(this.serializer,i))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{}class q3 extends F3{constructor(t,n,i,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new Et(mt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(t,iy(n,i),o,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Et(mt.UNKNOWN,l.toString())})}Yo(t,n,i,o,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Yo(t,iy(n,i),o,c,h,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Et(mt.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class $3{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ki(n),this.ua=!1):vt("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="RemoteStore";class G3{constructor(t,n,i,o,l){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{i.enqueueAndForget(async()=>{Jo(this)&&(vt(Ko,"Restarting streams for network reachability change."),await async function(m){const p=Ut(m);p.da.add(4),await Vc(p),p.Va.set("Unknown"),p.da.delete(4),await Od(p)}(this))})}),this.Va=new $3(i,o)}}async function Od(e){if(Jo(e))for(const t of e.Aa)await t(!0)}async function Vc(e){for(const t of e.Aa)await t(!1)}function UA(e,t){const n=Ut(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),a_(n)?o_(n):kl(n).N_()&&s_(n,t))}function i_(e,t){const n=Ut(e),i=kl(n);n.Ea.delete(t),i.N_()&&BA(n,t),n.Ea.size===0&&(i.N_()?i.k_():Jo(n)&&n.Va.set("Unknown"))}function s_(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Vt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}kl(e).Z_(t)}function BA(e,t){e.ma.Ke(t),kl(e).X_(t)}function o_(e){e.ma=new z4({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),kl(e).start(),e.Va.ca()}function a_(e){return Jo(e)&&!kl(e).O_()&&e.Ea.size>0}function Jo(e){return Ut(e).da.size===0}function zA(e){e.ma=void 0}async function Y3(e){e.Va.set("Online")}async function K3(e){e.Ea.forEach((t,n)=>{s_(e,t)})}async function X3(e,t){zA(e),a_(e)?(e.Va.Pa(t),o_(e)):e.Va.set("Unknown")}async function Q3(e,t,n){if(e.Va.set("Online"),t instanceof SA&&t.state===2&&t.cause)try{await async function(o,l){const c=l.cause;for(const h of l.targetIds)o.Ea.has(h)&&(await o.remoteSyncer.rejectListen(h,c),o.Ea.delete(h),o.ma.removeTarget(h))}(e,t)}catch(i){vt(Ko,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await nd(e,i)}else if(t instanceof Oh?e.ma.Xe(t):t instanceof bA?e.ma.ot(t):e.ma.nt(t),!n.isEqual(Vt.min()))try{const i=await VA(e.localStore);n.compareTo(i)>=0&&await function(l,c){const h=l.ma.It(c);return h.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ea.get(p);y&&l.Ea.set(p,y.withResumeToken(m.resumeToken,c))}}),h.targetMismatches.forEach((m,p)=>{const y=l.Ea.get(m);if(!y)return;l.Ea.set(m,y.withResumeToken(gn.EMPTY_BYTE_STRING,y.snapshotVersion)),BA(l,m);const v=new Ps(y.target,m,p,y.sequenceNumber);s_(l,v)}),l.remoteSyncer.applyRemoteEvent(h)}(e,n)}catch(i){vt(Ko,"Failed to raise snapshot:",i),await nd(e,i)}}async function nd(e,t,n){if(!Ol(t))throw t;e.da.add(1),await Vc(e),e.Va.set("Offline"),n||(n=()=>VA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{vt(Ko,"Retrying IndexedDB access"),await n(),e.da.delete(1),await Od(e)})}function HA(e,t){return t().catch(n=>nd(e,n,t))}async function Md(e){const t=Ut(e),n=Ws(t);let i=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:$y;for(;W3(t);)try{const o=await O3(t.localStore,i);if(o===null){t.Ia.length===0&&n.k_();break}i=o.batchId,Z3(t,o)}catch(o){await nd(t,o)}jA(t)&&FA(t)}function W3(e){return Jo(e)&&e.Ia.length<10}function Z3(e,t){e.Ia.push(t);const n=Ws(e);n.N_()&&n.ea&&n.ta(t.mutations)}function jA(e){return Jo(e)&&!Ws(e).O_()&&e.Ia.length>0}function FA(e){Ws(e).start()}async function J3(e){Ws(e).ia()}async function tP(e){const t=Ws(e);for(const n of e.Ia)t.ta(n.mutations)}async function eP(e,t,n){const i=e.Ia.shift(),o=Wy.from(i,t,n);await HA(e,()=>e.remoteSyncer.applySuccessfulWrite(o)),await Md(e)}async function nP(e,t){t&&Ws(e).ea&&await async function(i,o){if(function(c){return U4(c)&&c!==mt.ABORTED}(o.code)){const l=i.Ia.shift();Ws(i).L_(),await HA(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Md(i)}}(e,t),jA(e)&&FA(e)}async function Jw(e,t){const n=Ut(e);n.asyncQueue.verifyOperationInProgress(),vt(Ko,"RemoteStore received new credentials");const i=Jo(n);n.da.add(3),await Vc(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await Od(n)}async function rP(e,t){const n=Ut(e);t?(n.da.delete(2),await Od(n)):t||(n.da.add(2),await Vc(n),n.Va.set("Unknown"))}function kl(e){return e.fa||(e.fa=function(n,i,o){const l=Ut(n);return l.oa(),new H3(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(e.datastore,e.asyncQueue,{e_:Y3.bind(null,e),n_:K3.bind(null,e),i_:X3.bind(null,e),Y_:Q3.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),a_(e)?o_(e):e.Va.set("Unknown")):(await e.fa.stop(),zA(e))})),e.fa}function Ws(e){return e.ga||(e.ga=function(n,i,o){const l=Ut(n);return l.oa(),new j3(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:J3.bind(null,e),i_:nP.bind(null,e),na:tP.bind(null,e),ra:eP.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await Md(e)):(await e.ga.stop(),e.Ia.length>0&&(vt(Ko,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(t,n,i,o,l){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,o,l){const c=Date.now()+i,h=new l_(t,n,c,o,l);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Et(mt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function u_(e,t){if(Ki("AsyncQueue",`${t}: ${e}`),Ol(e))return new Et(mt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{static emptySet(t){return new hl(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Ct.comparator(n.key,i.key):(n,i)=>Ct.comparator(n.key,i.key),this.keyedMap=Wu(),this.sortedSet=new Re(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof hl)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new hl;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(){this.pa=new Re(Ct.comparator)}track(t){const n=t.doc.key,i=this.pa.get(n);i?t.type!==0&&i.type===3?this.pa=this.pa.insert(n,t):t.type===3&&i.type!==1?this.pa=this.pa.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.pa=this.pa.remove(n):t.type===1&&i.type===2?this.pa=this.pa.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):Mt(63341,{Vt:t,ya:i}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,i)=>{t.push(i)}),t}}class Rl{constructor(t,n,i,o,l,c,h,m,p){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(t,n,i,o,l){const c=[];return n.forEach(h=>{c.push({type:0,doc:h})}),new Rl(t,n,hl.emptySet(n),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ad(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class sP{constructor(){this.queries=eb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=Ut(n),l=o.queries;o.queries=eb(),l.forEach((c,h)=>{for(const m of h.Sa)m.onError(i)})})(this,new Et(mt.ABORTED,"Firestore shutting down"))}}function eb(){return new Zo(e=>cA(e),Ad)}async function oP(e,t){const n=Ut(e);let i=3;const o=t.query;let l=n.queries.get(o);l?!l.Da()&&t.va()&&(i=2):(l=new iP,i=t.va()?0:1);try{switch(i){case 0:l.ba=await n.onListen(o,!0);break;case 1:l.ba=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(c){const h=u_(c,`Initialization of query '${nl(t.query)}' failed`);return void t.onError(h)}n.queries.set(o,l),l.Sa.push(t),t.Fa(n.onlineState),l.ba&&t.Ma(l.ba)&&c_(n)}async function aP(e,t){const n=Ut(e),i=t.query;let o=3;const l=n.queries.get(i);if(l){const c=l.Sa.indexOf(t);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=t.va()?0:1:!l.Da()&&t.va()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function lP(e,t){const n=Ut(e);let i=!1;for(const o of t){const l=o.query,c=n.queries.get(l);if(c){for(const h of c.Sa)h.Ma(o)&&(i=!0);c.ba=o}}i&&c_(n)}function uP(e,t,n){const i=Ut(e),o=i.queries.get(t);if(o)for(const l of o.Sa)l.onError(n);i.queries.delete(t)}function c_(e){e.Ca.forEach(t=>{t.next()})}var uy,nb;(nb=uy||(uy={})).xa="default",nb.Cache="cache";class cP{constructor(t,n,i){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(t){if(!this.options.includeMetadataChanges){const i=[];for(const o of t.docChanges)o.type!==3&&i.push(o);t=new Rl(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const i=n!=="Offline";return(!this.options.Qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=Rl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==uy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(t){this.key=t}}class $A{constructor(t){this.key=t}}class fP{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xt(),this.mutatedKeys=Xt(),this.Za=fA(t),this.Xa=new hl(this.Za)}get eu(){return this.Ha}tu(t,n){const i=n?n.nu:new tb,o=n?n.Xa:this.Xa;let l=n?n.mutatedKeys:this.mutatedKeys,c=o,h=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((y,v)=>{const E=o.get(y),b=Rd(this.query,v)?v:null,I=!!E&&this.mutatedKeys.has(E.key),L=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let k=!1;E&&b?E.data.isEqual(b.data)?I!==L&&(i.track({type:3,doc:b}),k=!0):this.ru(E,b)||(i.track({type:2,doc:b}),k=!0,(m&&this.Za(b,m)>0||p&&this.Za(b,p)<0)&&(h=!0)):!E&&b?(i.track({type:0,doc:b}),k=!0):E&&!b&&(i.track({type:1,doc:E}),k=!0,(m||p)&&(h=!0)),k&&(b?(c=c.add(b),l=L?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{Xa:c,nu:i,Cs:h,mutatedKeys:l}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,o){const l=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const c=t.nu.wa();c.sort((y,v)=>function(b,I){const L=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mt(20277,{Vt:k})}};return L(b)-L(I)}(y.type,v.type)||this.Za(y.doc,v.doc)),this.iu(i),o=o!=null&&o;const h=n&&!o?this.su():[],m=this.Ya.size===0&&this.current&&!o?1:0,p=m!==this.Ja;return this.Ja=m,c.length!==0||p?{snapshot:new Rl(this.query,t.Xa,l,c,t.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:h}:{ou:h}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new tb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Xt(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return t.forEach(i=>{this.Ya.has(i)||n.push(new $A(i))}),this.Ya.forEach(i=>{t.has(i)||n.push(new qA(i))}),n}au(t){this.Ha=t.$s,this.Ya=Xt();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return Rl.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const f_="SyncEngine";class hP{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class dP{constructor(t){this.key=t,this.cu=!1}}class mP{constructor(t,n,i,o,l,c){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new Zo(h=>cA(h),Ad),this.Pu=new Map,this.Tu=new Set,this.Iu=new Re(Ct.comparator),this.Eu=new Map,this.du=new t_,this.Au={},this.Ru=new Map,this.Vu=Al.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function pP(e,t,n=!0){const i=WA(e);let o;const l=i.hu.get(t);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.uu()):o=await GA(i,t,n,!0),o}async function gP(e,t){const n=WA(e);await GA(n,t,!0,!1)}async function GA(e,t,n,i){const o=await M3(e.localStore,ui(t)),l=o.targetId,c=e.sharedClientState.addLocalQueryTarget(l,n);let h;return i&&(h=await yP(e,t,l,c==="current",o.resumeToken)),e.isPrimaryClient&&n&&UA(e.remoteStore,o),h}async function yP(e,t,n,i,o){e.fu=(v,E,b)=>async function(L,k,H,F){let q=k.view.tu(H);q.Cs&&(q=await Kw(L.localStore,k.query,!1).then(({documents:P})=>k.view.tu(P,q)));const z=F&&F.targetChanges.get(k.targetId),X=F&&F.targetMismatches.get(k.targetId)!=null,Z=k.view.applyChanges(q,L.isPrimaryClient,z,X);return ib(L,k.targetId,Z.ou),Z.snapshot}(e,v,E,b);const l=await Kw(e.localStore,t,!0),c=new fP(t,l.$s),h=c.tu(l.documents),m=kc.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",o),p=c.applyChanges(h,e.isPrimaryClient,m);ib(e,n,p.ou);const y=new hP(t,n,c);return e.hu.set(t,y),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),p.snapshot}async function _P(e,t,n){const i=Ut(e),o=i.hu.get(t),l=i.Pu.get(o.targetId);if(l.length>1)return i.Pu.set(o.targetId,l.filter(c=>!Ad(c,t))),void i.hu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await ay(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),n&&i_(i.remoteStore,o.targetId),cy(i,o.targetId)}).catch(Dl)):(cy(i,o.targetId),await ay(i.localStore,o.targetId,!0))}async function vP(e,t){const n=Ut(e),i=n.hu.get(t),o=n.Pu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),i_(n.remoteStore,i.targetId))}async function EP(e,t,n){const i=CP(e);try{const o=await function(c,h){const m=Ut(c),p=ve.now(),y=h.reduce((b,I)=>b.add(I.key),Xt());let v,E;return m.persistence.runTransaction("Locally write mutations","readwrite",b=>{let I=Xi(),L=Xt();return m.Bs.getEntries(b,y).next(k=>{I=k,I.forEach((H,F)=>{F.isValidDocument()||(L=L.add(H))})}).next(()=>m.localDocuments.getOverlayedDocuments(b,I)).next(k=>{v=k;const H=[];for(const F of h){const q=M4(F,v.get(F.key).overlayedDocument);q!=null&&H.push(new to(F.key,q,eA(q.value.mapValue),er.exists(!0)))}return m.mutationQueue.addMutationBatch(b,p,H,h)}).next(k=>{E=k;const H=k.applyToLocalDocumentSet(v,L);return m.documentOverlayCache.saveOverlays(b,k.batchId,H)})}).then(()=>({batchId:E.batchId,changes:dA(v)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(o.batchId),function(c,h,m){let p=c.Au[c.currentUser.toKey()];p||(p=new Re(Ft)),p=p.insert(h,m),c.Au[c.currentUser.toKey()]=p}(i,o.batchId,n),await Pc(i,o.changes),await Md(i.remoteStore)}catch(o){const l=u_(o,"Failed to persist write");n.reject(l)}}async function YA(e,t){const n=Ut(e);try{const i=await N3(n.localStore,t);t.targetChanges.forEach((o,l)=>{const c=n.Eu.get(l);c&&(re(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.cu=!0:o.modifiedDocuments.size>0?re(c.cu,14607):o.removedDocuments.size>0&&(re(c.cu,42227),c.cu=!1))}),await Pc(n,i,t)}catch(i){await Dl(i)}}function rb(e,t,n){const i=Ut(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.hu.forEach((l,c)=>{const h=c.view.Fa(t);h.snapshot&&o.push(h.snapshot)}),function(c,h){const m=Ut(c);m.onlineState=h;let p=!1;m.queries.forEach((y,v)=>{for(const E of v.Sa)E.Fa(h)&&(p=!0)}),p&&c_(m)}(i.eventManager,t),o.length&&i.lu.Y_(o),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function TP(e,t,n){const i=Ut(e);i.sharedClientState.updateQueryState(t,"rejected",n);const o=i.Eu.get(t),l=o&&o.key;if(l){let c=new Re(Ct.comparator);c=c.insert(l,wn.newNoDocument(l,Vt.min()));const h=Xt().add(l),m=new Nd(Vt.min(),new Map,new Re(Ft),c,h);await YA(i,m),i.Iu=i.Iu.remove(l),i.Eu.delete(t),h_(i)}else await ay(i.localStore,t,!1).then(()=>cy(i,t,n)).catch(Dl)}async function wP(e,t){const n=Ut(e),i=t.batch.batchId;try{const o=await I3(n.localStore,t);XA(n,i,null),KA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Pc(n,o)}catch(o){await Dl(o)}}async function bP(e,t,n){const i=Ut(e);try{const o=await function(c,h){const m=Ut(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return m.mutationQueue.lookupMutationBatch(p,h).next(v=>(re(v!==null,37113),y=v.keys(),m.mutationQueue.removeMutationBatch(p,v))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,h)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>m.localDocuments.getDocuments(p,y))})}(i.localStore,t);XA(i,t,n),KA(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Pc(i,o)}catch(o){await Dl(o)}}function KA(e,t){(e.Ru.get(t)||[]).forEach(n=>{n.resolve()}),e.Ru.delete(t)}function XA(e,t,n){const i=Ut(e);let o=i.Au[i.currentUser.toKey()];if(o){const l=o.get(t);l&&(n?l.reject(n):l.resolve(),o=o.remove(t)),i.Au[i.currentUser.toKey()]=o}}function cy(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Pu.get(t))e.hu.delete(i),n&&e.lu.gu(i,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(i=>{e.du.containsKey(i)||QA(e,i)})}function QA(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);n!==null&&(i_(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),h_(e))}function ib(e,t,n){for(const i of n)i instanceof qA?(e.du.addReference(i.key,t),SP(e,i)):i instanceof $A?(vt(f_,"Document no longer in limbo: "+i.key),e.du.removeReference(i.key,t),e.du.containsKey(i.key)||QA(e,i.key)):Mt(19791,{pu:i})}function SP(e,t){const n=t.key,i=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(i)||(vt(f_,"New document in limbo: "+n),e.Tu.add(i),h_(e))}function h_(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new Ct(_e.fromString(t)),i=e.Vu.next();e.Eu.set(i,new dP(n)),e.Iu=e.Iu.insert(n,i),UA(e.remoteStore,new Ps(ui(lA(n.path)),i,"TargetPurposeLimboResolution",wd.le))}}async function Pc(e,t,n){const i=Ut(e),o=[],l=[],c=[];i.hu.isEmpty()||(i.hu.forEach((h,m)=>{c.push(i.fu(m,t,n).then(p=>{var y;if((p||n)&&i.isPrimaryClient){const v=p?!p.fromCache:(y=n?.targetChanges.get(m.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(p){o.push(p);const v=n_.Rs(m.targetId,p);l.push(v)}}))}),await Promise.all(c),i.lu.Y_(o),await async function(m,p){const y=Ut(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>pt.forEach(p,E=>pt.forEach(E.ds,b=>y.persistence.referenceDelegate.addReference(v,E.targetId,b)).next(()=>pt.forEach(E.As,b=>y.persistence.referenceDelegate.removeReference(v,E.targetId,b)))))}catch(v){if(!Ol(v))throw v;vt(r_,"Failed to update sequence numbers: "+v)}for(const v of p){const E=v.targetId;if(!v.fromCache){const b=y.xs.get(E),I=b.snapshotVersion,L=b.withLastLimboFreeSnapshotVersion(I);y.xs=y.xs.insert(E,L)}}}(i.localStore,l))}async function AP(e,t){const n=Ut(e);if(!n.currentUser.isEqual(t)){vt(f_,"User change. New user:",t.toKey());const i=await kA(n.localStore,t);n.currentUser=t,function(l,c){l.Ru.forEach(h=>{h.forEach(m=>{m.reject(new Et(mt.CANCELLED,c))})}),l.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Pc(n,i.ks)}}function RP(e,t){const n=Ut(e),i=n.Eu.get(t);if(i&&i.cu)return Xt().add(i.key);{let o=Xt();const l=n.Pu.get(t);if(!l)return o;for(const c of l){const h=n.hu.get(c);o=o.unionWith(h.view.eu)}return o}}function WA(e){const t=Ut(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=YA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=RP.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=TP.bind(null,t),t.lu.Y_=lP.bind(null,t.eventManager),t.lu.gu=uP.bind(null,t.eventManager),t}function CP(e){const t=Ut(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wP.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bP.bind(null,t),t}class rd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Dd(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return x3(this.persistence,new A3,t.initialUser,this.serializer)}Su(t){return new MA(e_.fi,this.serializer)}bu(t){return new V3}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rd.provider={build:()=>new rd};class xP extends rd{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){re(this.persistence.referenceDelegate instanceof ed,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new c3(i,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new MA(i=>ed.fi(i,n),this.serializer)}}class fy{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=AP.bind(null,this.syncEngine),await rP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new sP}()}createDatastore(t){const n=Dd(t.databaseInfo.databaseId),i=function(l){return new z3(l)}(t.databaseInfo);return function(l,c,h,m){return new q3(l,c,h,m)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,o,l,c,h){return new G3(i,o,l,c,h)}(this.localStore,this.datastore,t.asyncQueue,n=>rb(this.syncEngine,n,0),function(){return Ww.C()?new Ww:new P3}())}createSyncEngine(t,n){return function(o,l,c,h,m,p,y){const v=new mP(o,l,c,h,m,p);return y&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(o){const l=Ut(o);vt(Ko,"RemoteStore shutting down."),l.da.add(5),await Vc(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}fy.provider={build:()=>new fy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):Ki("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="FirestoreClient";class NP{constructor(t,n,i,o,l){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=Tn.UNAUTHENTICATED,this.clientId=$1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{vt(Zs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(vt(Zs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=u_(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function pg(e,t){e.asyncQueue.verifyOperationInProgress(),vt(Zs,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async o=>{i.isEqual(o)||(await kA(t.localStore,o),i=o)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function sb(e,t){e.asyncQueue.verifyOperationInProgress();const n=await DP(e);vt(Zs,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>Jw(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,o)=>Jw(t.remoteStore,o)),e._onlineComponents=t}async function DP(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){vt(Zs,"Using user provided OfflineComponentProvider");try{await pg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(o){return o.name==="FirebaseError"?o.code===mt.FAILED_PRECONDITION||o.code===mt.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Tl("Error using user provided cache. Falling back to memory cache: "+n),await pg(e,new rd)}}else vt(Zs,"Using default OfflineComponentProvider"),await pg(e,new xP(void 0));return e._offlineComponents}async function ZA(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(vt(Zs,"Using user provided OnlineComponentProvider"),await sb(e,e._uninitializedComponentsProvider._online)):(vt(Zs,"Using default OnlineComponentProvider"),await sb(e,new fy))),e._onlineComponents}function OP(e){return ZA(e).then(t=>t.syncEngine)}async function MP(e){const t=await ZA(e),n=t.eventManager;return n.onListen=pP.bind(null,t.syncEngine),n.onUnlisten=_P.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=gP.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=vP.bind(null,t.syncEngine),n}function kP(e,t,n={}){const i=new Fs;return e.asyncQueue.enqueueAndForget(async()=>function(l,c,h,m,p){const y=new IP({next:E=>{y.xu(),c.enqueueAndForget(()=>aP(l,v)),E.fromCache&&m.source==="server"?p.reject(new Et(mt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new cP(h,y,{includeMetadataChanges:!0,Qa:!0});return oP(l,v)}(await MP(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(e,t,n){if(!n)throw new Et(mt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function VP(e,t,n,i){if(t===!0&&i===!0)throw new Et(mt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function ab(e){if(!Ct.isDocumentKey(e))throw new Et(mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function lb(e){if(Ct.isDocumentKey(e))throw new Et(mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function kd(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Mt(12329,{type:typeof e})}function Xo(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Et(mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kd(e);throw new Et(mt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="firestore.googleapis.com",ub=!0;class cb{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Et(mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eR,this.ssl=ub}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:ub;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=OA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<l3)throw new Et(mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}VP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JA((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Et(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Et(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Et(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Vd{constructor(t,n,i,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Et(mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Et(mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cb(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new BV;switch(i.type){case"firstParty":return new FV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Et(mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=ob.get(n);i&&(vt("ComponentProvider","Removing Datastore"),ob.delete(n),i.terminate())}(this),Promise.resolve()}}function PP(e,t,n,i={}){var o;e=Xo(e,Vd);const l=xl(t),c=e._getSettings(),h=Object.assign(Object.assign({},c),{emulatorOptions:e._getEmulatorOptions()}),m=`${t}:${n}`;l&&(x1(`https://${m}`),I1("Firestore",!0)),c.host!==eR&&c.host!==m&&Tl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:m,ssl:l,emulatorOptions:i});if(!$o(p,h)&&(e._setSettings(p),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=Tn.MOCK_USER;else{y=ck(i.mockUserToken,(o=e._app)===null||o===void 0?void 0:o.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new Et(mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Tn(E)}e._authCredentials=new zV(new F1(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new ta(this.firestore,t,this._query)}}class nr{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new nr(this.firestore,t,this._key)}}class qs extends ta{constructor(t,n,i){super(t,n,lA(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new nr(this.firestore,null,new Ct(t))}withConverter(t){return new qs(this.firestore,t,this._path)}}function d_(e,t,...n){if(e=Xe(e),tR("collection","path",t),e instanceof Vd){const i=_e.fromString(t,...n);return lb(i),new qs(e,null,i)}{if(!(e instanceof nr||e instanceof qs))throw new Et(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(_e.fromString(t,...n));return lb(i),new qs(e.firestore,null,i)}}function Vl(e,t,...n){if(e=Xe(e),arguments.length===1&&(t=$1.newId()),tR("doc","path",t),e instanceof Vd){const i=_e.fromString(t,...n);return ab(i),new nr(e,null,new Ct(i))}{if(!(e instanceof nr||e instanceof qs))throw new Et(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(_e.fromString(t,...n));return ab(i),new nr(e.firestore,e instanceof qs?e.converter:null,new Ct(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="AsyncQueue";class hb{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new PA(this,"async_queue_retry"),this.rc=()=>{const i=mg();i&&vt(fb,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=t;const n=mg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=mg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Fs;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!Ol(t))throw t;vt(fb,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(i=>{throw this.Xu=i,this.ec=!1,Ki("INTERNAL UNHANDLED ERROR: ",db(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=n,n}enqueueAfterDelay(t,n,i){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const o=l_.createAndSchedule(this,t,n,i,l=>this.uc(l));return this.Zu.push(o),o}oc(){this.Xu&&Mt(47125,{cc:db(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function db(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Lc extends Vd{constructor(t,n,i,o){super(t,n,i,o),this.type="firestore",this._queue=new hb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new hb(t),this._firestoreClient=void 0,await t}}}function LP(e,t){const n=typeof e=="object"?e:M1(),i=typeof e=="string"?e:Xh,o=Fy(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=lk("firestore");l&&PP(o,...l)}return o}function m_(e){if(e._terminated)throw new Et(mt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||UP(e),e._firestoreClient}function UP(e){var t,n,i;const o=e._freezeSettings(),l=function(h,m,p,y){return new i4(h,m,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,JA(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,o);e._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),e._firestoreClient=new NP(e._authCredentials,e._appCheckCredentials,e._queue,l,e._componentsProvider&&function(h){const m=h?._online.build();return{_offline:h?._offline.build(m),_online:m}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Cl(gn.fromBase64String(t))}catch(n){throw new Et(mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Cl(gn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Et(mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Et(mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Et(mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ft(this._lat,t._lat)||Ft(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=/^__.*__$/;class zP{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new to(t,this.data,this.fieldMask,n,this.fieldTransforms):new Mc(t,this.data,n,this.fieldTransforms)}}class nR{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new to(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function rR(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mt(40011,{Ic:e})}}class __{constructor(t,n,i,o,l,c){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new __(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.dc({path:i,Rc:!1});return o.Vc(t),o}mc(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.dc({path:i,Rc:!1});return o.Ec(),o}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return id(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(rR(this.Ic)&&BP.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class HP{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Dd(t)}bc(t,n,i,o=!1){return new __({Ic:t,methodName:n,wc:i,path:pn.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function v_(e){const t=e._freezeSettings(),n=Dd(e._databaseId);return new HP(e._databaseId,!!t.ignoreUndefinedProperties,n)}function iR(e,t,n,i,o,l={}){const c=e.bc(l.merge||l.mergeFields?2:0,t,n,o);E_("Data must be an object, but it was:",c,i);const h=sR(i,c);let m,p;if(l.merge)m=new tr(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const E=hy(t,v,n);if(!c.contains(E))throw new Et(mt.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);aR(y,E)||y.push(E)}m=new tr(y),p=c.fieldTransforms.filter(v=>m.covers(v.field))}else m=null,p=c.fieldTransforms;return new zP(new zn(h),m,p)}class Ld extends p_{_toFieldTransform(t){if(t.Ic!==2)throw t.Ic===1?t.gc(`${this._methodName}() can only appear at the top level of your update data`):t.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ld}}function jP(e,t,n,i){const o=e.bc(1,t,n);E_("Data must be an object, but it was:",o,i);const l=[],c=zn.empty();Js(i,(m,p)=>{const y=T_(t,m,n);p=Xe(p);const v=o.mc(y);if(p instanceof Ld)l.push(y);else{const E=Uc(p,v);E!=null&&(l.push(y),c.set(y,E))}});const h=new tr(l);return new nR(c,h,o.fieldTransforms)}function FP(e,t,n,i,o,l){const c=e.bc(1,t,n),h=[hy(t,i,n)],m=[o];if(l.length%2!=0)throw new Et(mt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)h.push(hy(t,l[E])),m.push(l[E+1]);const p=[],y=zn.empty();for(let E=h.length-1;E>=0;--E)if(!aR(p,h[E])){const b=h[E];let I=m[E];I=Xe(I);const L=c.mc(b);if(I instanceof Ld)p.push(b);else{const k=Uc(I,L);k!=null&&(p.push(b),y.set(b,k))}}const v=new tr(p);return new nR(y,v,c.fieldTransforms)}function qP(e,t,n,i=!1){return Uc(n,e.bc(i?4:3,t))}function Uc(e,t){if(oR(e=Xe(e)))return E_("Unsupported field value:",t,e),sR(e,t);if(e instanceof p_)return function(i,o){if(!rR(o.Ic))throw o.gc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(i,o){const l=[];let c=0;for(const h of i){let m=Uc(h,o.fc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(e,t)}return function(i,o){if((i=Xe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return C4(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=ve.fromDate(i);return{timestampValue:td(o.serializer,l)}}if(i instanceof ve){const l=new ve(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:td(o.serializer,l)}}if(i instanceof g_)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Cl)return{bytesValue:AA(o.serializer,i._byteString)};if(i instanceof nr){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Jy(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof y_)return function(c,h){return{mapValue:{fields:{[J1]:{stringValue:tA},[Qh]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw h.gc("VectorValues must only contain numeric values.");return Qy(h.serializer,p)})}}}}}}(i,o);throw o.gc(`Unsupported field value: ${kd(i)}`)}(e,t)}function sR(e,t){const n={};return Y1(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Js(e,(i,o)=>{const l=Uc(o,t.Ac(i));l!=null&&(n[i]=l)}),{mapValue:{fields:n}}}function oR(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ve||e instanceof g_||e instanceof Cl||e instanceof nr||e instanceof p_||e instanceof y_)}function E_(e,t,n){if(!oR(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const i=kd(n);throw i==="an object"?t.gc(e+" a custom object"):t.gc(e+" "+i)}}function hy(e,t,n){if((t=Xe(t))instanceof Pd)return t._internalPath;if(typeof t=="string")return T_(e,t);throw id("Field path arguments must be of type string or ",e,!1,void 0,n)}const $P=new RegExp("[~\\*/\\[\\]]");function T_(e,t,n){if(t.search($P)>=0)throw id(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Pd(...t.split("."))._internalPath}catch{throw id(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function id(e,t,n,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let h=`Function ${t}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${o}`),m+=")"),new Et(mt.INVALID_ARGUMENT,h+e+m)}function aR(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(t,n,i,o,l){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new GP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Ud("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class GP extends lR{data(){return super.data()}}function Ud(e,t){return typeof t=="string"?T_(e,t):t instanceof Pd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Et(mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class w_{}class uR extends w_{}function KP(e,t,...n){let i=[];t instanceof w_&&i.push(t),i=i.concat(n),function(l){const c=l.filter(m=>m instanceof b_).length,h=l.filter(m=>m instanceof Bd).length;if(c>1||c>0&&h>0)throw new Et(mt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)e=o._apply(e);return e}class Bd extends uR{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Bd(t,n,i)}_apply(t){const n=this._parse(t);return cR(t._query,n),new ta(t.firestore,t.converter,ey(t._query,n))}_parse(t){const n=v_(t.firestore);return function(l,c,h,m,p,y,v){let E;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Et(mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){pb(v,y);const I=[];for(const L of v)I.push(mb(m,l,L));E={arrayValue:{values:I}}}else E=mb(m,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||pb(v,y),E=qP(h,c,v,y==="in"||y==="not-in");return je.create(p,y,E)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function XP(e,t,n){const i=t,o=Ud("where",e);return Bd._create(o,i,n)}class b_ extends w_{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new b_(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Pr.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(o,l){let c=o;const h=l.getFlattenedFilters();for(const m of h)cR(c,m),c=ey(c,m)}(t._query,n),new ta(t.firestore,t.converter,ey(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class S_ extends uR{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new S_(t,n)}_apply(t){const n=function(o,l,c){if(o.startAt!==null)throw new Et(mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Et(mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ec(l,c)}(t._query,this._field,this._direction);return new ta(t.firestore,t.converter,function(o,l){const c=o.explicitOrderBy.concat([l]);return new Ml(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(t._query,n))}}function QP(e,t="asc"){const n=t,i=Ud("orderBy",e);return S_._create(i,n)}function mb(e,t,n){if(typeof(n=Xe(n))=="string"){if(n==="")throw new Et(mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uA(t)&&n.indexOf("/")!==-1)throw new Et(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(_e.fromString(n));if(!Ct.isDocumentKey(i))throw new Et(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Iw(e,new Ct(i))}if(n instanceof nr)return Iw(e,n._key);throw new Et(mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kd(n)}.`)}function pb(e,t){if(!Array.isArray(e)||e.length===0)throw new Et(mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function cR(e,t){const n=function(o,l){for(const c of o)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null}(e.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Et(mt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Et(mt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class WP{convertValue(t,n="none"){switch(Qs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ve(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Xs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Mt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Js(t,(o,l)=>{i[o]=this.convertValue(l,n)}),i}convertVectorValue(t){var n,i,o;const l=(o=(i=(n=t.fields)===null||n===void 0?void 0:n[Qh].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(c=>Ve(c.doubleValue));return new y_(l)}convertGeoPoint(t){return new g_(Ve(t.latitude),Ve(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Sd(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(yc(t));default:return null}}convertTimestamp(t){const n=Ks(t);return new ve(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=_e.fromString(t);re(DA(i),9688,{name:t});const o=new _c(i.get(1),i.get(3)),l=new Ct(i.popFirst(5));return o.isEqual(n)||Ki(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ZP extends lR{constructor(t,n,i,o,l,c){super(t,n,i,o,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(Ud("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Mh extends ZP{data(t={}){return super.data(t)}}class JP{constructor(t,n,i,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new Eh(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Mh(this._firestore,this._userDataWriter,i.key,i,new Eh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Et(mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(h=>{const m=new Mh(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Eh(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(h=>l||h.type!==3).map(h=>{const m=new Mh(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Eh(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,y=-1;return h.type!==0&&(p=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),y=c.indexOf(h.doc.key)),{type:t6(h.type),doc:m,oldIndex:p,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function t6(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mt(61501,{type:e})}}class e6 extends WP{constructor(t){super(),this.firestore=t}convertBytes(t){return new Cl(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new nr(this.firestore,null,n)}}function A_(e){e=Xo(e,ta);const t=Xo(e.firestore,Lc),n=m_(t),i=new e6(t);return YP(e._query),kP(n,e._query).then(o=>new JP(t,i,e,o))}function R_(e,t,n){e=Xo(e,nr);const i=Xo(e.firestore,Lc),o=fR(e.converter,t,n);return C_(i,[iR(v_(i),"setDoc",e._key,o,e.converter!==null,n).toMutation(e._key,er.none())])}function n6(e){return C_(Xo(e.firestore,Lc),[new Id(e._key,er.none())])}function C_(e,t){return function(i,o){const l=new Fs;return i.asyncQueue.enqueueAndForget(async()=>EP(await OP(i),o,l)),l.promise}(m_(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=v_(t)}set(t,n,i){this._verifyNotCommitted();const o=gg(t,this._firestore),l=fR(o.converter,n,i),c=iR(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,i);return this._mutations.push(c.toMutation(o._key,er.none())),this}update(t,n,i,...o){this._verifyNotCommitted();const l=gg(t,this._firestore);let c;return c=typeof(n=Xe(n))=="string"||n instanceof Pd?FP(this._dataReader,"WriteBatch.update",l._key,n,i,o):jP(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(c.toMutation(l._key,er.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=gg(t,this._firestore);return this._mutations=this._mutations.concat(new Id(n._key,er.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Et(mt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gg(e,t){if((e=Xe(e)).firestore!==t)throw new Et(mt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(e){return m_(e=Xo(e,Lc)),new r6(e,t=>C_(e,t))}(function(t,n=!0){(function(o){Nl=o})(Il),El(new Go("firestore",(i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),h=new Lc(new HV(i.getProvider("auth-internal")),new qV(c,i.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Et(mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _c(p.options.projectId,y)}(c,o),c);return l=Object.assign({useFetchStreams:n},l),h._setSettings(l),h},"PUBLIC").setMultipleInstances(!0)),Hs(yw,_w,t),Hs(yw,_w,"esm2017")})();function x_(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n}function dR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const i6=dR,mR=new Dc("auth","Firebase",dR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=new Hy("@firebase/auth");function s6(e,...t){sd.logLevel<=Kt.WARN&&sd.warn(`Auth (${Il}): ${e}`,...t)}function kh(e,...t){sd.logLevel<=Kt.ERROR&&sd.error(`Auth (${Il}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(e,...t){throw I_(e,...t)}function fi(e,...t){return I_(e,...t)}function pR(e,t,n){const i=Object.assign(Object.assign({},i6()),{[t]:n});return new Dc("auth","Firebase",i).create(t,{appName:e.name})}function Fi(e){return pR(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function I_(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return mR.create(e,...t)}function Ot(e,t,...n){if(!e)throw I_(t,...n)}function Hi(e){const t="INTERNAL ASSERTION FAILED: "+e;throw kh(t),new Error(t)}function Qi(e,t){e||Hi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function o6(){return gb()==="http:"||gb()==="https:"}function gb(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(o6()||gk()||"connection"in navigator)?navigator.onLine:!0}function l6(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(t,n){this.shortDelay=t,this.longDelay=n,Qi(n>t,"Short delay should be less than long delay!"),this.isMobile=dk()||yk()}get(){return a6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(e,t){Qi(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],f6=new Bc(3e4,6e4);function eo(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function no(e,t,n,i,o={}){return yR(e,o,async()=>{let l={},c={};i&&(t==="GET"?c=i:l={body:JSON.stringify(i)});const h=Oc(Object.assign({key:e.config.apiKey},c)).slice(1),m=await e._getAdditionalHeaders();m["Content-Type"]="application/json",e.languageCode&&(m["X-Firebase-Locale"]=e.languageCode);const p=Object.assign({method:t,headers:m},l);return pk()||(p.referrerPolicy="no-referrer"),e.emulatorConfig&&xl(e.emulatorConfig.host)&&(p.credentials="include"),gR.fetch()(await _R(e,e.config.apiHost,n,h),p)})}async function yR(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},u6),t);try{const o=new d6(e),l=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Th(e,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[m,p]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Th(e,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Th(e,"email-already-in-use",c);if(m==="USER_DISABLED")throw Th(e,"user-disabled",c);const y=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw pR(e,y,p);Lr(e,y)}}catch(o){if(o instanceof Zi)throw o;Lr(e,"network-request-failed",{message:String(o)})}}async function zc(e,t,n,i,o={}){const l=await no(e,t,n,i,o);return"mfaPendingCredential"in l&&Lr(e,"multi-factor-auth-required",{_serverResponse:l}),l}async function _R(e,t,n,i){const o=`${t}${n}?${i}`,l=e,c=l.config.emulator?N_(e.config,o):`${e.config.apiScheme}://${o}`;return c6.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function h6(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class d6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(fi(this.auth,"network-request-failed")),f6.get())})}}function Th(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=fi(e,t,i);return o.customData._tokenResponse=n,o}function yb(e){return e!==void 0&&e.enterprise!==void 0}class m6{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return h6(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function p6(e,t){return no(e,"GET","/v2/recaptchaConfig",eo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g6(e,t){return no(e,"POST","/v1/accounts:delete",t)}async function od(e,t){return no(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function y6(e,t=!1){const n=Xe(e),i=await n.getIdToken(t),o=D_(i);Ot(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l?.sign_in_provider;return{claims:o,token:i,authTime:sc(yg(o.auth_time)),issuedAtTime:sc(yg(o.iat)),expirationTime:sc(yg(o.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function yg(e){return Number(e)*1e3}function D_(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return kh("JWT malformed, contained fewer than 3 sections"),null;try{const o=S1(n);return o?JSON.parse(o):(kh("Failed to decode base64 JWT payload"),null)}catch(o){return kh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function _b(e){const t=D_(e);return Ot(t,"internal-error"),Ot(typeof t.exp<"u","internal-error"),Ot(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bc(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof Zi&&_6(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function _6({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sc(this.lastLoginAt),this.creationTime=sc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(e){var t;const n=e.auth,i=await e.getIdToken(),o=await bc(e,od(n,{idToken:i}));Ot(o?.users.length,n,"internal-error");const l=o.users[0];e._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?vR(l.providerUserInfo):[],h=T6(e.providerData,c),m=e.isAnonymous,p=!(e.email&&l.passwordHash)&&!h?.length,y=m?p:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new my(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(e,v)}async function E6(e){const t=Xe(e);await ad(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function T6(e,t){return[...e.filter(i=>!t.some(o=>o.providerId===i.providerId)),...t]}function vR(e){return e.map(t=>{var{providerId:n}=t,i=x_(t,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w6(e,t){const n=await yR(e,{},async()=>{const i=Oc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:l}=e.config,c=await _R(e,o,"/v1/token",`key=${l}`),h=await e._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:i};return e.emulatorConfig&&xl(e.emulatorConfig.host)&&(m.credentials="include"),gR.fetch()(c,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function b6(e,t){return no(e,"POST","/v2/accounts:revokeToken",eo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ot(t.idToken,"internal-error"),Ot(typeof t.idToken<"u","internal-error"),Ot(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):_b(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Ot(t.length!==0,"internal-error");const n=_b(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ot(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:o,expiresIn:l}=await w6(t,n);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:o,expirationTime:l}=n,c=new dl;return i&&(Ot(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),o&&(Ot(typeof o=="string","internal-error",{appName:t}),c.accessToken=o),l&&(Ot(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new dl,this.toJSON())}_performRefresh(){return Hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(e,t){Ot(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Vr{constructor(t){var{uid:n,auth:i,stsTokenManager:o}=t,l=x_(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new v6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new my(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await bc(this,this.stsTokenManager.getToken(this.auth,t));return Ot(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return y6(this,t)}reload(){return E6(this)}_assign(t){this!==t&&(Ot(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Vr(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await ad(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(br(this.auth.app))return Promise.reject(Fi(this.auth));const t=await this.getIdToken();return await bc(this,g6(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var i,o,l,c,h,m,p,y;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,E=(o=n.email)!==null&&o!==void 0?o:void 0,b=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,I=(c=n.photoURL)!==null&&c!==void 0?c:void 0,L=(h=n.tenantId)!==null&&h!==void 0?h:void 0,k=(m=n._redirectEventId)!==null&&m!==void 0?m:void 0,H=(p=n.createdAt)!==null&&p!==void 0?p:void 0,F=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:q,emailVerified:z,isAnonymous:X,providerData:Z,stsTokenManager:P}=n;Ot(q&&P,t,"internal-error");const S=dl.fromJSON(this.name,P);Ot(typeof q=="string",t,"internal-error"),Cs(v,t.name),Cs(E,t.name),Ot(typeof z=="boolean",t,"internal-error"),Ot(typeof X=="boolean",t,"internal-error"),Cs(b,t.name),Cs(I,t.name),Cs(L,t.name),Cs(k,t.name),Cs(H,t.name),Cs(F,t.name);const C=new Vr({uid:q,auth:t,email:E,emailVerified:z,displayName:v,isAnonymous:X,photoURL:I,phoneNumber:b,tenantId:L,stsTokenManager:S,createdAt:H,lastLoginAt:F});return Z&&Array.isArray(Z)&&(C.providerData=Z.map(O=>Object.assign({},O))),k&&(C._redirectEventId=k),C}static async _fromIdTokenResponse(t,n,i=!1){const o=new dl;o.updateFromServerResponse(n);const l=new Vr({uid:n.localId,auth:t,stsTokenManager:o,isAnonymous:i});return await ad(l),l}static async _fromGetAccountInfoResponse(t,n,i){const o=n.users[0];Ot(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?vR(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!l?.length,h=new dl;h.updateFromIdToken(i);const m=new Vr({uid:o.localId,auth:t,stsTokenManager:h,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new my(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=new Map;function ji(e){Qi(e instanceof Function,"Expected a class definition");let t=vb.get(e);return t?(Qi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,vb.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}ER.type="NONE";const Eb=ER;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(e,t,n){return`firebase:${e}:${t}:${n}`}class ml{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Vh(this.userKey,o.apiKey,l),this.fullPersistenceKey=Vh("persistence",o.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await od(this.auth,{idToken:t}).catch(()=>{});return n?Vr._fromGetAccountInfoResponse(this.auth,n,t):null}return Vr._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new ml(ji(Eb),t,i);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=o[0]||ji(Eb);const c=Vh(i,t.config.apiKey,t.name);let h=null;for(const p of n)try{const y=await p._get(c);if(y){let v;if(typeof y=="string"){const E=await od(t,{idToken:y}).catch(()=>{});if(!E)break;v=await Vr._fromGetAccountInfoResponse(t,E,y)}else v=Vr._fromJSON(t,y);p!==l&&(h=v),l=p;break}}catch{}const m=o.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new ml(l,t,i):(l=m[0],h&&await l._set(c,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new ml(l,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(SR(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(TR(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(RR(t))return"Blackberry";if(CR(t))return"Webos";if(wR(t))return"Safari";if((t.includes("chrome/")||bR(t))&&!t.includes("edge/"))return"Chrome";if(AR(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if(i?.length===2)return i[1]}return"Other"}function TR(e=Sn()){return/firefox\//i.test(e)}function wR(e=Sn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function bR(e=Sn()){return/crios\//i.test(e)}function SR(e=Sn()){return/iemobile/i.test(e)}function AR(e=Sn()){return/android/i.test(e)}function RR(e=Sn()){return/blackberry/i.test(e)}function CR(e=Sn()){return/webos/i.test(e)}function O_(e=Sn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function S6(e=Sn()){var t;return O_(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function A6(){return _k()&&document.documentMode===10}function xR(e=Sn()){return O_(e)||AR(e)||CR(e)||RR(e)||/windows phone/i.test(e)||SR(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(e,t=[]){let n;switch(e){case"Browser":n=Tb(Sn());break;case"Worker":n=`${Tb(Sn())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Il}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=l=>new Promise((c,h)=>{try{const m=t(l);c(m)}catch(m){h(m)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C6(e,t={}){return no(e,"GET","/v2/passwordPolicy",eo(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6=6;class I6{constructor(t){var n,i,o,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:x6,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,i,o,l,c,h;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,m),this.validatePasswordCharacterOptions(t,m),m.isValid&&(m.isValid=(n=m.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(h=m.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),m}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),o&&(n.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<t.length;o++)i=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(t,n,i,o){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wb(this),this.idTokenSubscription=new wb(this),this.beforeStateQueue=new R6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ji(n)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await ml.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await od(this,{idToken:t}),i=await Vr._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(br(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=o?._redirectEventId,m=await this.tryRedirectSignIn(t);(!c||c===h)&&m?.user&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await ad(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=l6()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(br(this.app))return Promise.reject(Fi(this));const n=t?Xe(t):null;return n&&Ot(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Ot(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return br(this.app)?Promise.reject(Fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return br(this.app)?Promise.reject(Fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ji(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await C6(this),n=new I6(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Dc("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await b6(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ji(t)||this._popupRedirectResolver;Ot(n,this,"argument-error"),this.redirectPersistenceManager=await ml.create(this,[ji(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,o){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ot(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const m=t.addObserver(n,i,o);return()=>{c=!0,m()}}else{const m=t.addObserver(n);return()=>{c=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=IR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var t;if(br(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n?.error&&s6(`Error while retrieving App Check token: ${n.error}`),n?.token}}function ea(e){return Xe(e)}class wb{constructor(t){this.auth=t,this.observer=null,this.addObserver=Rk(n=>this.observer=n)}get next(){return Ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function D6(e){zd=e}function NR(e){return zd.loadJS(e)}function O6(){return zd.recaptchaEnterpriseScript}function M6(){return zd.gapiScript}function k6(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class V6{constructor(){this.enterprise=new P6}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class P6{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const L6="recaptcha-enterprise",DR="NO_RECAPTCHA";class U6{constructor(t){this.type=L6,this.auth=ea(t)}async verify(t="verify",n=!1){async function i(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{p6(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new m6(m);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(m=>{h(m)})})}function o(l,c,h){const m=window.grecaptcha;yb(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:t}).then(p=>{c(p)}).catch(()=>{c(DR)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new V6().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(h=>{if(!n&&yb(window.grecaptcha))o(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=O6();m.length!==0&&(m+=h),NR(m).then(()=>{o(h,l,c)}).catch(p=>{c(p)})}}).catch(h=>{c(h)})})}}async function bb(e,t,n,i=!1,o=!1){const l=new U6(e);let c;if(o)c=DR;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const h=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function py(e,t,n,i,o){var l;if(!((l=e._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await bb(e,t,n,n==="getOobCode");return i(e,c)}else return i(e,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await bb(e,t,n,n==="getOobCode");return i(e,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B6(e,t){const n=Fy(e,"auth");if(n.isInitialized()){const o=n.getImmediate(),l=n.getOptions();if($o(l,t??{}))return o;Lr(o,"already-initialized")}return n.initialize({options:t})}function z6(e,t){const n=t?.persistence||[],i=(Array.isArray(n)?n:[n]).map(ji);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t?.popupRedirectResolver)}function H6(e,t,n){const i=ea(e);Ot(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const o=!1,l=OR(t),{host:c,port:h}=j6(t),m=h===null?"":`:${h}`,p={url:`${l}//${c}${m}/`},y=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ot(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ot($o(p,i.config.emulator)&&$o(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,xl(c)?(x1(`${l}//${c}${m}`),I1("Auth",!0)):F6()}function OR(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function j6(e){const t=OR(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Sb(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:Sb(c)}}}function Sb(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function F6(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Hi("not implemented")}_getIdTokenResponse(t){return Hi("not implemented")}_linkToIdToken(t,n){return Hi("not implemented")}_getReauthenticationResolver(t){return Hi("not implemented")}}async function q6(e,t){return no(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $6(e,t){return zc(e,"POST","/v1/accounts:signInWithPassword",eo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6(e,t){return zc(e,"POST","/v1/accounts:signInWithEmailLink",eo(e,t))}async function Y6(e,t){return zc(e,"POST","/v1/accounts:signInWithEmailLink",eo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends M_{constructor(t,n,i,o=null){super("password",i),this._email=t,this._password=n,this._tenantId=o}static _fromEmailAndPassword(t,n){return new Sc(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new Sc(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return py(t,n,"signInWithPassword",$6);case"emailLink":return G6(t,{email:this._email,oobCode:this._password});default:Lr(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return py(t,i,"signUpPassword",q6);case"emailLink":return Y6(t,{idToken:n,email:this._email,oobCode:this._password});default:Lr(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(e,t){return zc(e,"POST","/v1/accounts:signInWithIdp",eo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6="http://localhost";class Qo extends M_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Qo(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Lr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:o}=n,l=x_(n,["providerId","signInMethod"]);if(!i||!o)return null;const c=new Qo(i,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const n=this.buildRequest();return pl(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,pl(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,pl(t,n)}buildRequest(){const t={requestUri:K6,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Oc(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Q6(e){const t=Ku(Xu(e)).link,n=t?Ku(Xu(t)).deep_link_id:null,i=Ku(Xu(e)).deep_link_id;return(i?Ku(Xu(i)).link:null)||i||n||t||e}class k_{constructor(t){var n,i,o,l,c,h;const m=Ku(Xu(t)),p=(n=m.apiKey)!==null&&n!==void 0?n:null,y=(i=m.oobCode)!==null&&i!==void 0?i:null,v=X6((o=m.mode)!==null&&o!==void 0?o:null);Ot(p&&y&&v,"argument-error"),this.apiKey=p,this.operation=v,this.code=y,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=m.lang)!==null&&c!==void 0?c:null,this.tenantId=(h=m.tenantId)!==null&&h!==void 0?h:null}static parseLink(t){const n=Q6(t);try{return new k_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(){this.providerId=Pl.PROVIDER_ID}static credential(t,n){return Sc._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=k_.parseLink(n);return Ot(i,"argument-error"),Sc._fromEmailAndCode(t,i.code,i.tenantId)}}Pl.PROVIDER_ID="password";Pl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Pl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc extends MR{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Hc{constructor(){super("facebook.com")}static credential(t){return Qo._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Os.credentialFromTaggedObject(t)}static credentialFromError(t){return Os.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Os.credential(t.oauthAccessToken)}catch{return null}}}Os.FACEBOOK_SIGN_IN_METHOD="facebook.com";Os.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Hc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Qo._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Ms.credentialFromTaggedObject(t)}static credentialFromError(t){return Ms.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Ms.credential(n,i)}catch{return null}}}Ms.GOOGLE_SIGN_IN_METHOD="google.com";Ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends Hc{constructor(){super("github.com")}static credential(t){return Qo._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ks.credentialFromTaggedObject(t)}static credentialFromError(t){return ks.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ks.credential(t.oauthAccessToken)}catch{return null}}}ks.GITHUB_SIGN_IN_METHOD="github.com";ks.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Hc{constructor(){super("twitter.com")}static credential(t,n){return Qo._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Vs.credentialFromTaggedObject(t)}static credentialFromError(t){return Vs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Vs.credential(n,i)}catch{return null}}}Vs.TWITTER_SIGN_IN_METHOD="twitter.com";Vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W6(e,t){return zc(e,"POST","/v1/accounts:signUp",eo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,o=!1){const l=await Vr._fromIdTokenResponse(t,i,o),c=Ab(i);return new Wo({user:l,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const o=Ab(i);return new Wo({user:t,providerId:o,_tokenResponse:i,operationType:n})}}function Ab(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld extends Zi{constructor(t,n,i,o){var l;super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,ld.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,o){return new ld(t,n,i,o)}}function kR(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ld._fromErrorAndOperation(e,l,t,i):l})}async function Z6(e,t,n=!1){const i=await bc(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Wo._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J6(e,t,n=!1){const{auth:i}=e;if(br(i.app))return Promise.reject(Fi(i));const o="reauthenticate";try{const l=await bc(e,kR(i,o,t,e),n);Ot(l.idToken,i,"internal-error");const c=D_(l.idToken);Ot(c,i,"internal-error");const{sub:h}=c;return Ot(e.uid===h,i,"user-mismatch"),Wo._forOperation(e,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Lr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(e,t,n=!1){if(br(e.app))return Promise.reject(Fi(e));const i="signIn",o=await kR(e,i,t),l=await Wo._fromIdTokenResponse(e,i,o);return n||await e._updateCurrentUser(l.user),l}async function tL(e,t){return VR(ea(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR(e){const t=ea(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function eL(e,t,n){if(br(e.app))return Promise.reject(Fi(e));const i=ea(e),c=await py(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",W6).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&PR(e),m}),h=await Wo._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(h.user),h}function nL(e,t,n){return br(e.app)?Promise.reject(Fi(e)):tL(Xe(e),Pl.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&PR(e),i})}function rL(e,t,n,i){return Xe(e).onIdTokenChanged(t,n,i)}function iL(e,t,n){return Xe(e).beforeAuthStateChanged(t,n)}function sL(e,t,n,i){return Xe(e).onAuthStateChanged(t,n,i)}function oL(e){return Xe(e).signOut()}const ud="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ud,"1"),this.storage.removeItem(ud),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=1e3,lL=10;class UR extends LR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&t(n,o,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((c,h,m)=>{this.notifyListeners(c,m)});return}const i=t.key;n?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);A6()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,lL):o()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},aL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}UR.type="LOCAL";const uL=UR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR extends LR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}BR.type="SESSION";const zR=BR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(o=>o.isListeningto(t));if(n)return n;const i=new Hd(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:o,data:l}=n.data,c=this.handlersMap[o];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const h=Array.from(c).map(async p=>p(n.origin,l)),m=await cL(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((h,m)=>{const p=V_("",20);o.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(v){const E=v;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(E.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:p,data:n},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return window}function hL(e){hi().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(){return typeof hi().WorkerGlobalScope<"u"&&typeof hi().importScripts=="function"}async function dL(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mL(){var e;return((e=navigator?.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function pL(){return HR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR="firebaseLocalStorageDb",gL=1,cd="firebaseLocalStorage",FR="fbase_key";class jc{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function jd(e,t){return e.transaction([cd],t?"readwrite":"readonly").objectStore(cd)}function yL(){const e=indexedDB.deleteDatabase(jR);return new jc(e).toPromise()}function gy(){const e=indexedDB.open(jR,gL);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(cd,{keyPath:FR})}catch(o){n(o)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(cd)?t(i):(i.close(),await yL(),t(await gy()))})})}async function Rb(e,t,n){const i=jd(e,!0).put({[FR]:t,value:n});return new jc(i).toPromise()}async function _L(e,t){const n=jd(e,!1).get(t),i=await new jc(n).toPromise();return i===void 0?null:i.value}function Cb(e,t){const n=jd(e,!0).delete(t);return new jc(n).toPromise()}const vL=800,EL=3;class qR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gy(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>EL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hd._getInstance(pL()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await dL(),!this.activeServiceWorker)return;this.sender=new fL(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||mL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await gy();return await Rb(t,ud,"1"),await Cb(t,ud),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Rb(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>_L(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Cb(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const l=jd(o,!1).getAll();return new jc(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:o,value:l}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qR.type="LOCAL";const TL=qR;new Bc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(e,t){return t?ji(t):(Ot(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_ extends M_{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return pl(t,this._buildIdpRequest())}_linkToIdToken(t,n){return pl(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return pl(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function bL(e){return VR(e.auth,new P_(e),e.bypassAuthState)}function SL(e){const{auth:t,user:n}=e;return Ot(n,t,"internal-error"),J6(n,new P_(e),e.bypassAuthState)}async function AL(e){const{auth:t,user:n}=e;return Ot(n,t,"internal-error"),Z6(n,new P_(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(t,n,i,o,l=!1){this.auth=t,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:o,tenantId:l,error:c,type:h}=t;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:n,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return bL;case"linkViaPopup":case"linkViaRedirect":return AL;case"reauthViaPopup":case"reauthViaRedirect":return SL;default:Lr(this.auth,"internal-error")}}resolve(t){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=new Bc(2e3,1e4);class al extends $R{constructor(t,n,i,o,l){super(t,n,o,l),this.provider=i,this.authWindow=null,this.pollId=null,al.currentPopupAction&&al.currentPopupAction.cancel(),al.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ot(t,this.auth,"internal-error"),t}async onExecution(){Qi(this.filter.length===1,"Popup operations only handle one event");const t=V_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,al.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,RL.get())};t()}}al.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="pendingRedirect",Ph=new Map;class xL extends $R{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Ph.get(this.auth._key());if(!t){try{const i=await IL(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Ph.set(this.auth._key(),t)}return this.bypassAuthState||Ph.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IL(e,t){const n=OL(t),i=DL(e);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function NL(e,t){Ph.set(e._key(),t)}function DL(e){return ji(e._redirectPersistence)}function OL(e){return Vh(CL,e.config.apiKey,e.name)}async function ML(e,t,n=!1){if(br(e.app))return Promise.reject(Fi(e));const i=ea(e),o=wL(i,t),c=await new xL(i,o,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=10*60*1e3;class VL{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!PL(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!GR(t)){const o=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(fi(this.auth,o))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=kL&&this.cachedEventUids.clear(),this.cachedEventUids.has(xb(t))}saveEventToCache(t){this.cachedEventUids.add(xb(t)),this.lastProcessedEventTime=Date.now()}}function xb(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function GR({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function PL(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GR(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL(e,t={}){return no(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BL=/^https?/;async function zL(e){if(e.config.emulator)return;const{authorizedDomains:t}=await LL(e);for(const n of t)try{if(HL(n))return}catch{}Lr(e,"unauthorized-domain")}function HL(e){const t=dy(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const c=new URL(e);return c.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!BL.test(n))return!1;if(UL.test(e))return i===e;const o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=new Bc(3e4,6e4);function Ib(){const e=hi().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function FL(e){return new Promise((t,n)=>{var i,o,l;function c(){Ib(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ib(),n(fi(e,"network-request-failed"))},timeout:jL.get()})}if(!((o=(i=hi().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)t(gapi.iframes.getContext());else if(!((l=hi().gapi)===null||l===void 0)&&l.load)c();else{const h=k6("iframefcb");return hi()[h]=()=>{gapi.load?c():n(fi(e,"network-request-failed"))},NR(`${M6()}?onload=${h}`).catch(m=>n(m))}}).catch(t=>{throw Lh=null,t})}let Lh=null;function qL(e){return Lh=Lh||FL(e),Lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=new Bc(5e3,15e3),GL="__/auth/iframe",YL="emulator/auth/iframe",KL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QL(e){const t=e.config;Ot(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?N_(t,YL):`https://${e.config.authDomain}/${GL}`,i={apiKey:t.apiKey,appName:e.name,v:Il},o=XL.get(e.config.apiHost);o&&(i.eid=o);const l=e._getFrameworks();return l.length&&(i.fw=l.join(",")),`${n}?${Oc(i).slice(1)}`}async function WL(e){const t=await qL(e),n=hi().gapi;return Ot(n,e,"internal-error"),t.open({where:document.body,url:QL(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KL,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const c=fi(e,"network-request-failed"),h=hi().setTimeout(()=>{l(c)},$L.get());function m(){hi().clearTimeout(h),o(i)}i.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JL=500,t9=600,e9="_blank",n9="http://localhost";class Nb{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function r9(e,t,n,i=JL,o=t9){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const m=Object.assign(Object.assign({},ZL),{width:i.toString(),height:o.toString(),top:l,left:c}),p=Sn().toLowerCase();n&&(h=bR(p)?e9:n),TR(p)&&(t=t||n9,m.scrollbars="yes");const y=Object.entries(m).reduce((E,[b,I])=>`${E}${b}=${I},`,"");if(S6(p)&&h!=="_self")return i9(t||"",h),new Nb(null);const v=window.open(t||"",h,y);Ot(v,e,"popup-blocked");try{v.focus()}catch{}return new Nb(v)}function i9(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9="__/auth/handler",o9="emulator/auth/handler",a9=encodeURIComponent("fac");async function Db(e,t,n,i,o,l){Ot(e.config.authDomain,e,"auth-domain-config-required"),Ot(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Il,eventId:o};if(t instanceof MR){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",Ak(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(t instanceof Hc){const y=t.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}e.tenantId&&(c.tid=e.tenantId);const h=c;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const m=await e._getAppCheckToken(),p=m?`#${a9}=${encodeURIComponent(m)}`:"";return`${l9(e)}?${Oc(h).slice(1)}${p}`}function l9({config:e}){return e.emulator?N_(e,o9):`https://${e.authDomain}/${s9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="webStorageSupport";class u9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zR,this._completeRedirectFn=ML,this._overrideRedirectResult=NL}async _openPopup(t,n,i,o){var l;Qi((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await Db(t,n,i,dy(),o);return r9(t,c,V_())}async _openRedirect(t,n,i,o){await this._originValidation(t);const l=await Db(t,n,i,dy(),o);return hL(l),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:o,promise:l}=this.eventManagers[n];return o?Promise.resolve(o):(Qi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await WL(t),i=new VL(t);return n.register("authEvent",o=>(Ot(o?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(_g,{type:_g},o=>{var l;const c=(l=o?.[0])===null||l===void 0?void 0:l[_g];c!==void 0&&n(!!c),Lr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zL(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return xR()||wR()||O_()}}const c9=u9;var Ob="@firebase/auth",Mb="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function d9(e){El(new Go("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;Ot(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:h,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IR(e)},p=new N6(i,o,l,m);return z6(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),El(new Go("auth-internal",t=>{const n=ea(t.getProvider("auth").getImmediate());return(i=>new f9(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hs(Ob,Mb,h9(e)),Hs(Ob,Mb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=5*60,p9=C1("authIdTokenMaxAge")||m9;let kb=null;const g9=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>p9)return;const o=n?.token;kb!==o&&(kb=o,await fetch(e,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function y9(e=M1()){const t=Fy(e,"auth");if(t.isInitialized())return t.getImmediate();const n=B6(e,{popupRedirectResolver:c9,persistence:[TL,uL,zR]}),i=C1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=g9(l.toString());iL(n,c,()=>c(n.currentUser)),rL(n,h=>c(h))}}const o=A1("auth");return o&&H6(n,`http://${o}`),n}function _9(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}D6({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=o=>{const l=fi("internal-error");l.customData=o,n(l)},i.type="text/javascript",i.charset="UTF-8",_9().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});d9("Browser");const v9={apiKey:"AIzaSyByTZ08eCsc2wv0VIWUHNtHSdmAA_JI5hM",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},YR=O1(v9),Ur=LP(YR),fd=y9(YR),ir={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},Mn={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function E9(){const[e,t]=x.useState(""),[n,i]=x.useState(""),[o,l]=x.useState(!1),[c,h]=x.useState(!1),[m,p]=x.useState(""),y=async E=>{E.preventDefault(),h(!0),p("");try{if(!e||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))throw new Error(Mn.INVALID_EMAIL);if(n.length<6)throw new Error(Mn.WEAK_PASSWORD);const I=await eL(fd,e,n);console.log("User created successfully:",I.user.uid)}catch(b){console.error("Sign up error:",b);let I="Failed to create account";b.code==="auth/email-already-in-use"?I=Mn.EMAIL_IN_USE:b.code==="auth/invalid-email"?I=Mn.INVALID_EMAIL:b.code==="auth/weak-password"?I=Mn.WEAK_PASSWORD:b.code==="auth/operation-not-allowed"?I="Email/password accounts are not enabled. Please contact support.":b.message&&(I=b.message),p(I)}finally{h(!1)}},v=async E=>{E.preventDefault(),h(!0),p("");try{if(!e||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))throw new Error(Mn.INVALID_EMAIL);const I=await nL(fd,e,n);console.log("User signed in successfully:",I.user.uid)}catch(b){console.error("Sign in error:",b);let I="Failed to sign in";b.code==="auth/user-not-found"?I=Mn.USER_NOT_FOUND:b.code==="auth/wrong-password"?I=Mn.WRONG_PASSWORD:b.code==="auth/invalid-email"?I=Mn.INVALID_EMAIL:b.code==="auth/user-disabled"?I="This account has been disabled. Please contact support.":b.code==="auth/too-many-requests"?I=Mn.TOO_MANY_REQUESTS:b.message&&(I=b.message),p(I)}finally{h(!1)}};return Q.jsx("div",{className:"auth-window-container",children:Q.jsxs("div",{className:"auth-window",children:[Q.jsxs("div",{className:"auth-window-header",children:[Q.jsx("h2",{className:"auth-window-title",children:o?"Create Account":"Welcome Back"}),Q.jsx("p",{className:"auth-window-subtitle",children:o?"Join the platform to start building your boards":"Sign in to access your boards and continue your work"})]}),Q.jsxs("form",{onSubmit:o?y:v,className:"auth-form",children:[Q.jsx("div",{className:"auth-input-group",children:Q.jsx("input",{type:"email",placeholder:"Email address",value:e,onChange:E=>t(E.target.value),required:!0,className:"auth-input"})}),Q.jsx("div",{className:"auth-input-group",children:Q.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:E=>i(E.target.value),required:!0,className:"auth-input"})}),Q.jsx("button",{type:"submit",disabled:c,className:`auth-submit-btn ${c?"loading":""}`,children:c?Q.jsx("div",{className:"loading-spinner"}):o?"Create Account":"Sign In"}),m&&Q.jsx("div",{className:"auth-error",children:m})]}),Q.jsxs("div",{className:"auth-switch",children:[Q.jsx("span",{className:"auth-switch-text",children:o?"Already have an account?":"Don't have an account?"}),Q.jsx("button",{type:"button",onClick:()=>l(!o),className:"auth-switch-btn",children:o?"Sign In":"Sign Up"})]})]})})}var vg={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Vb;function T9(){return Vb||(Vb=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var l="",c=0;c<arguments.length;c++){var h=arguments[c];h&&(l=o(l,i(h)))}return l}function i(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return n.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var c="";for(var h in l)t.call(l,h)&&l[h]&&(c=o(c,h));return c}function o(l,c){return c?l?l+" "+c:l+c:l}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(vg)),vg.exports}var w9=T9();const ge=Ac(w9),Ll=!!(typeof window<"u"&&window.document&&window.document.createElement);var yy=!1,_y=!1;try{var Eg={get passive(){return yy=!0},get once(){return _y=yy=!0}};Ll&&(window.addEventListener("test",Eg,Eg),window.removeEventListener("test",Eg,!0))}catch{}function KR(e,t,n,i){if(i&&typeof i!="boolean"&&!_y){var o=i.once,l=i.capture,c=n;!_y&&o&&(c=n.__once||function h(m){this.removeEventListener(t,h,l),n.call(this,m)},n.__once=c),e.addEventListener(t,c,yy?i:l)}e.addEventListener(t,n,i)}function Fd(e){return e&&e.ownerDocument||document}function vy(e,t,n,i){var o=i&&typeof i!="boolean"?i.capture:i;e.removeEventListener(t,n,o),n.__once&&e.removeEventListener(t,n.__once,o)}var wh;function Pb(e){if((!wh&&wh!==0||e)&&Ll){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),wh=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return wh}function b9(){return x.useState(null)}function S9(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e},[e]),t}function Ey(e){const t=S9(e);return x.useCallback(function(...n){return t.current&&t.current(...n)},[t])}const Lb=e=>!e||typeof e=="function"?e:t=>{e.current=t};function A9(e,t){const n=Lb(e),i=Lb(t);return o=>{n&&n(o),i&&i(o)}}function XR(e,t){return x.useMemo(()=>A9(e,t),[e,t])}function R9(e){const t=x.useRef(e);return t.current=e,t}function C9(e){const t=R9(e);x.useEffect(()=>()=>t.current(),[])}function x9(e){var t=Fd(e);return t&&t.defaultView||window}function I9(e,t){return x9(e).getComputedStyle(e,t)}var N9=/([A-Z])/g;function D9(e){return e.replace(N9,"-$1").toLowerCase()}var O9=/^ms-/;function bh(e){return D9(e).replace(O9,"-ms-")}var M9=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function k9(e){return!!(e&&M9.test(e))}function Fo(e,t){var n="",i="";if(typeof t=="string")return e.style.getPropertyValue(bh(t))||I9(e).getPropertyValue(bh(t));Object.keys(t).forEach(function(o){var l=t[o];!l&&l!==0?e.style.removeProperty(bh(o)):k9(o)?i+=o+"("+l+") ":n+=bh(o)+": "+l+";"}),i&&(n+="transform: "+i+";"),e.style.cssText+=";"+n}function hd(e,t,n,i){return KR(e,t,n,i),function(){vy(e,t,n,i)}}function V9(e,t,n,i){if(i===void 0&&(i=!0),e){var o=document.createEvent("HTMLEvents");o.initEvent(t,n,i),e.dispatchEvent(o)}}function P9(e){var t=Fo(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function L9(e,t,n){n===void 0&&(n=5);var i=!1,o=setTimeout(function(){i||V9(e,"transitionend",!0)},t+n),l=hd(e,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(o),l()}}function QR(e,t,n,i){n==null&&(n=P9(e)||0);var o=L9(e,n,i),l=hd(e,"transitionend",t);return function(){o(),l()}}function Tg(e){e===void 0&&(e=Fd());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function Ub(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function U9(){const e=x.useRef(!0),t=x.useRef(()=>e.current);return x.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function B9(e){const t=x.useRef(e);return t.current=e,t}function z9(e){const t=B9(e);x.useEffect(()=>()=>t.current(),[])}function H9(e){const t=x.useRef(null);return x.useEffect(()=>{t.current=e}),t.current}function j9(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e},[e]),t}function Lo(e){const t=j9(e);return x.useCallback(function(...n){return t.current&&t.current(...n)},[t])}const F9="data-rr-ui-";function q9(e){return`${F9}${e}`}function $9(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const Bb=q9("modal-open");class L_{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:i=!1}={}){this.handleContainerOverflow=n,this.isRTL=i,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return $9(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",o=this.getElement();t.style={overflow:o.style.overflow,[i]:o.style[i]},t.scrollBarWidth&&(n[i]=`${parseInt(Fo(o,i)||"0",10)+t.scrollBarWidth}px`),o.setAttribute(Bb,""),Fo(o,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(Bb),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const WR=x.createContext(Ll?window:void 0);WR.Provider;function U_(){return x.useContext(WR)}const wg=(e,t)=>Ll?e==null?(t||Fd()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function G9(e,t){const n=U_(),[i,o]=x.useState(()=>wg(e,n?.document));if(!i){const l=wg(e);l&&o(l)}return x.useEffect(()=>{},[t,i]),x.useEffect(()=>{const l=wg(e);l!==i&&o(l)},[e,i]),i}const zb=e=>!e||typeof e=="function"?e:t=>{e.current=t};function Y9(e,t){const n=zb(e),i=zb(t);return o=>{n&&n(o),i&&i(o)}}function B_(e,t){return x.useMemo(()=>Y9(e,t),[e,t])}const K9=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",X9=typeof document<"u",Hb=X9||K9?x.useLayoutEffect:x.useEffect;function Q9(e){return e.code==="Escape"||e.keyCode===27}function W9(){const e=x.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}function qd(e){if(!e||typeof e=="function")return null;const{major:t}=W9();return t>=19?e.props.ref:e.ref}function Z9({children:e,in:t,onExited:n,mountOnEnter:i,unmountOnExit:o}){const l=x.useRef(null),c=x.useRef(t),h=Lo(n);x.useEffect(()=>{t?c.current=!0:h(l.current)},[t,h]);const m=B_(l,qd(e)),p=x.cloneElement(e,{ref:m});return t?p:o||!c.current&&i?null:p}const J9=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function tU(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function eU(e){let{onEnter:t,onEntering:n,onEntered:i,onExit:o,onExiting:l,onExited:c,addEndListener:h,children:m}=e,p=tU(e,J9);const y=x.useRef(null),v=B_(y,qd(m)),E=z=>X=>{z&&y.current&&z(y.current,X)},b=x.useCallback(E(t),[t]),I=x.useCallback(E(n),[n]),L=x.useCallback(E(i),[i]),k=x.useCallback(E(o),[o]),H=x.useCallback(E(l),[l]),F=x.useCallback(E(c),[c]),q=x.useCallback(E(h),[h]);return Object.assign({},p,{nodeRef:y},t&&{onEnter:b},n&&{onEntering:I},i&&{onEntered:L},o&&{onExit:k},l&&{onExiting:H},c&&{onExited:F},h&&{addEndListener:q},{children:typeof m=="function"?(z,X)=>m(z,Object.assign({},X,{ref:v})):x.cloneElement(m,{ref:v})})}const nU=["component"];function rU(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}const iU=x.forwardRef((e,t)=>{let{component:n}=e,i=rU(e,nU);const o=eU(i);return Q.jsx(n,Object.assign({ref:t},o))});function sU({in:e,onTransition:t}){const n=x.useRef(null),i=x.useRef(!0),o=Lo(t);return Hb(()=>{if(!n.current)return;let l=!1;return o({in:e,element:n.current,initial:i.current,isStale:()=>l}),()=>{l=!0}},[e,o]),Hb(()=>(i.current=!1,()=>{i.current=!0}),[]),n}function oU({children:e,in:t,onExited:n,onEntered:i,transition:o}){const[l,c]=x.useState(!t);t&&l&&c(!1);const h=sU({in:!!t,onTransition:p=>{const y=()=>{p.isStale()||(p.in?i?.(p.element,p.initial):(c(!0),n?.(p.element)))};Promise.resolve(o(p)).then(y,v=>{throw p.in||c(!0),v})}}),m=B_(h,qd(e));return l&&!t?null:x.cloneElement(e,{ref:m})}function jb(e,t,n){return e?Q.jsx(iU,Object.assign({},n,{component:e})):t?Q.jsx(oU,Object.assign({},n,{transition:t})):Q.jsx(Z9,Object.assign({},n))}const aU=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function lU(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}let bg;function uU(e){return bg||(bg=new L_({ownerDocument:e?.document})),bg}function cU(e){const t=U_(),n=e||uU(t),i=x.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:x.useCallback(o=>{i.current.dialog=o},[]),setBackdropRef:x.useCallback(o=>{i.current.backdrop=o},[])})}const ZR=x.forwardRef((e,t)=>{let{show:n=!1,role:i="dialog",className:o,style:l,children:c,backdrop:h=!0,keyboard:m=!0,onBackdropClick:p,onEscapeKeyDown:y,transition:v,runTransition:E,backdropTransition:b,runBackdropTransition:I,autoFocus:L=!0,enforceFocus:k=!0,restoreFocus:H=!0,restoreFocusOptions:F,renderDialog:q,renderBackdrop:z=Nt=>Q.jsx("div",Object.assign({},Nt)),manager:X,container:Z,onShow:P,onHide:S=()=>{},onExit:C,onExited:O,onExiting:U,onEnter:B,onEntering:R,onEntered:V}=e,Y=lU(e,aU);const D=U_(),$=G9(Z),tt=cU(X),W=U9(),M=H9(n),[G,nt]=x.useState(!n),st=x.useRef(null);x.useImperativeHandle(t,()=>tt,[tt]),Ll&&!M&&n&&(st.current=Tg(D?.document)),n&&G&&nt(!1);const ct=Lo(()=>{if(tt.add(),Bt.current=hd(document,"keydown",bt),Ht.current=hd(document,"focus",()=>setTimeout(_t),!0),P&&P(),L){var Nt,Pe;const Pt=Tg((Nt=(Pe=tt.dialog)==null?void 0:Pe.ownerDocument)!=null?Nt:D?.document);tt.dialog&&Pt&&!Ub(tt.dialog,Pt)&&(st.current=Pt,tt.dialog.focus())}}),gt=Lo(()=>{if(tt.remove(),Bt.current==null||Bt.current(),Ht.current==null||Ht.current(),H){var Nt;(Nt=st.current)==null||Nt.focus==null||Nt.focus(F),st.current=null}});x.useEffect(()=>{!n||!$||ct()},[n,$,ct]),x.useEffect(()=>{G&&gt()},[G,gt]),z9(()=>{gt()});const _t=Lo(()=>{if(!k||!W()||!tt.isTopModal())return;const Nt=Tg(D?.document);tt.dialog&&Nt&&!Ub(tt.dialog,Nt)&&tt.dialog.focus()}),xt=Lo(Nt=>{Nt.target===Nt.currentTarget&&(p?.(Nt),h===!0&&S())}),bt=Lo(Nt=>{m&&Q9(Nt)&&tt.isTopModal()&&(y?.(Nt),Nt.defaultPrevented||S())}),Ht=x.useRef(),Bt=x.useRef(),de=(...Nt)=>{nt(!0),O?.(...Nt)};if(!$)return null;const ce=Object.assign({role:i,ref:tt.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},Y,{style:l,className:o,tabIndex:-1});let ye=q?q(ce):Q.jsx("div",Object.assign({},ce,{children:x.cloneElement(c,{role:"document"})}));ye=jb(v,E,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:C,onExiting:U,onExited:de,onEnter:B,onEntering:R,onEntered:V,children:ye});let fe=null;return h&&(fe=z({ref:tt.setBackdropRef,onClick:xt}),fe=jb(b,I,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:fe})),Q.jsx(Q.Fragment,{children:sl.createPortal(Q.jsxs(Q.Fragment,{children:[fe,ye]}),$)})});ZR.displayName="Modal";const fU=Object.assign(ZR,{Manager:L_});function hU(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function dU(e,t){e.classList?e.classList.add(t):hU(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}var mU=Function.prototype.bind.call(Function.prototype.call,[].slice);function Qa(e,t){return mU(e.querySelectorAll(t))}function Fb(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function pU(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Fb(e.className,t):e.setAttribute("class",Fb(e.className&&e.className.baseVal||"",t))}const Wa={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class gU extends L_{adjustAndStore(t,n,i){const o=n.style[t];n.dataset[t]=o,Fo(n,{[t]:`${parseFloat(Fo(n,t))+i}px`})}restore(t,n){const i=n.dataset[t];i!==void 0&&(delete n.dataset[t],Fo(n,{[t]:i}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(dU(n,"modal-open"),!t.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";Qa(n,Wa.FIXED_CONTENT).forEach(l=>this.adjustAndStore(i,l,t.scrollBarWidth)),Qa(n,Wa.STICKY_CONTENT).forEach(l=>this.adjustAndStore(o,l,-t.scrollBarWidth)),Qa(n,Wa.NAVBAR_TOGGLER).forEach(l=>this.adjustAndStore(o,l,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();pU(n,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";Qa(n,Wa.FIXED_CONTENT).forEach(l=>this.restore(i,l)),Qa(n,Wa.STICKY_CONTENT).forEach(l=>this.restore(o,l)),Qa(n,Wa.NAVBAR_TOGGLER).forEach(l=>this.restore(o,l))}}let Sg;function yU(e){return Sg||(Sg=new gU(e)),Sg}function _U(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function Ty(e,t){return Ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ty(e,t)}function vU(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ty(e,t)}var Ag={exports:{}},Rg,qb;function EU(){if(qb)return Rg;qb=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Rg=e,Rg}var Cg,$b;function TU(){if($b)return Cg;$b=1;var e=EU();function t(){}function n(){}return n.resetWarningCache=t,Cg=function(){function i(c,h,m,p,y,v){if(v!==e){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}i.isRequired=i;function o(){return i}var l={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return l.PropTypes=l,l},Cg}var Gb;function wU(){return Gb||(Gb=1,Ag.exports=TU()()),Ag.exports}var bU=wU();const qi=Ac(bU),Yb={disabled:!1},JR=ut.createContext(null);var SU=function(t){return t.scrollTop},Ju="unmounted",Po="exited",Ns="entering",Uo="entered",wy="exiting",Ji=function(e){vU(t,e);function t(i,o){var l;l=e.call(this,i,o)||this;var c=o,h=c&&!c.isMounting?i.enter:i.appear,m;return l.appearStatus=null,i.in?h?(m=Po,l.appearStatus=Ns):m=Uo:i.unmountOnExit||i.mountOnEnter?m=Ju:m=Po,l.state={status:m},l.nextCallback=null,l}t.getDerivedStateFromProps=function(o,l){var c=o.in;return c&&l.status===Ju?{status:Po}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(o){var l=null;if(o!==this.props){var c=this.state.status;this.props.in?c!==Ns&&c!==Uo&&(l=Ns):(c===Ns||c===Uo)&&(l=wy)}this.updateStatus(!1,l)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var o=this.props.timeout,l,c,h;return l=c=h=o,o!=null&&typeof o!="number"&&(l=o.exit,c=o.enter,h=o.appear!==void 0?o.appear:c),{exit:l,enter:c,appear:h}},n.updateStatus=function(o,l){if(o===void 0&&(o=!1),l!==null)if(this.cancelNextCallback(),l===Ns){if(this.props.unmountOnExit||this.props.mountOnEnter){var c=this.props.nodeRef?this.props.nodeRef.current:sl.findDOMNode(this);c&&SU(c)}this.performEnter(o)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Po&&this.setState({status:Ju})},n.performEnter=function(o){var l=this,c=this.props.enter,h=this.context?this.context.isMounting:o,m=this.props.nodeRef?[h]:[sl.findDOMNode(this),h],p=m[0],y=m[1],v=this.getTimeouts(),E=h?v.appear:v.enter;if(!o&&!c||Yb.disabled){this.safeSetState({status:Uo},function(){l.props.onEntered(p)});return}this.props.onEnter(p,y),this.safeSetState({status:Ns},function(){l.props.onEntering(p,y),l.onTransitionEnd(E,function(){l.safeSetState({status:Uo},function(){l.props.onEntered(p,y)})})})},n.performExit=function(){var o=this,l=this.props.exit,c=this.getTimeouts(),h=this.props.nodeRef?void 0:sl.findDOMNode(this);if(!l||Yb.disabled){this.safeSetState({status:Po},function(){o.props.onExited(h)});return}this.props.onExit(h),this.safeSetState({status:wy},function(){o.props.onExiting(h),o.onTransitionEnd(c.exit,function(){o.safeSetState({status:Po},function(){o.props.onExited(h)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(o,l){l=this.setNextCallback(l),this.setState(o,l)},n.setNextCallback=function(o){var l=this,c=!0;return this.nextCallback=function(h){c&&(c=!1,l.nextCallback=null,o(h))},this.nextCallback.cancel=function(){c=!1},this.nextCallback},n.onTransitionEnd=function(o,l){this.setNextCallback(l);var c=this.props.nodeRef?this.props.nodeRef.current:sl.findDOMNode(this),h=o==null&&!this.props.addEndListener;if(!c||h){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var m=this.props.nodeRef?[this.nextCallback]:[c,this.nextCallback],p=m[0],y=m[1];this.props.addEndListener(p,y)}o!=null&&setTimeout(this.nextCallback,o)},n.render=function(){var o=this.state.status;if(o===Ju)return null;var l=this.props,c=l.children;l.in,l.mountOnEnter,l.unmountOnExit,l.appear,l.enter,l.exit,l.timeout,l.addEndListener,l.onEnter,l.onEntering,l.onEntered,l.onExit,l.onExiting,l.onExited,l.nodeRef;var h=_U(l,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ut.createElement(JR.Provider,{value:null},typeof c=="function"?c(o,h):ut.cloneElement(ut.Children.only(c),h))},t}(ut.Component);Ji.contextType=JR;Ji.propTypes={};function Za(){}Ji.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Za,onEntering:Za,onEntered:Za,onExit:Za,onExiting:Za,onExited:Za};Ji.UNMOUNTED=Ju;Ji.EXITED=Po;Ji.ENTERING=Ns;Ji.ENTERED=Uo;Ji.EXITING=wy;function Kb(e,t){const n=Fo(e,t)||"",i=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*i}function AU(e,t){const n=Kb(e,"transitionDuration"),i=Kb(e,"transitionDelay"),o=QR(e,l=>{l.target===e&&(o(),t(l))},n+i)}function RU(e){e.offsetHeight}function CU(e){return e&&"setState"in e?sl.findDOMNode(e):e??null}const tC=ut.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:i,onExiting:o,onExited:l,addEndListener:c,children:h,childRef:m,...p},y)=>{const v=x.useRef(null),E=XR(v,m),b=Z=>{E(CU(Z))},I=Z=>P=>{Z&&v.current&&Z(v.current,P)},L=x.useCallback(I(e),[e]),k=x.useCallback(I(t),[t]),H=x.useCallback(I(n),[n]),F=x.useCallback(I(i),[i]),q=x.useCallback(I(o),[o]),z=x.useCallback(I(l),[l]),X=x.useCallback(I(c),[c]);return Q.jsx(Ji,{ref:y,...p,onEnter:L,onEntered:H,onEntering:k,onExit:F,onExited:z,onExiting:q,addEndListener:X,nodeRef:v,children:typeof h=="function"?(Z,P)=>h(Z,{...P,ref:b}):ut.cloneElement(h,{ref:b})})});tC.displayName="TransitionWrapper";const xU={[Ns]:"show",[Uo]:"show"},z_=x.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:i,...o},l)=>{const c={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...o},h=x.useCallback((m,p)=>{RU(m),i?.(m,p)},[i]);return Q.jsx(tC,{ref:l,addEndListener:AU,...c,onEnter:h,childRef:qd(t),children:(m,p)=>x.cloneElement(t,{...p,className:ge("fade",e,t.props.className,xU[m],n[m])})})});z_.displayName="Fade";const IU=["xxl","xl","lg","md","sm","xs"],NU="xs",Fc=x.createContext({prefixes:{},breakpoints:IU,minBreakpoint:NU}),{Consumer:A5,Provider:R5}=Fc;function Qe(e,t){const{prefixes:n}=x.useContext(Fc);return e||n[t]||t}function DU(){const{breakpoints:e}=x.useContext(Fc);return e}function OU(){const{minBreakpoint:e}=x.useContext(Fc);return e}function MU(){const{dir:e}=x.useContext(Fc);return e==="rtl"}const eC=x.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},o)=>(t=Qe(t,"modal-body"),Q.jsx(n,{ref:o,className:ge(e,t),...i})));eC.displayName="ModalBody";const nC=x.createContext({onHide(){}}),H_=x.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:i,size:o,fullscreen:l,children:c,scrollable:h,...m},p)=>{e=Qe(e,"modal");const y=`${e}-dialog`,v=typeof l=="string"?`${e}-fullscreen-${l}`:`${e}-fullscreen`;return Q.jsx("div",{...m,ref:p,className:ge(y,t,o&&`${e}-${o}`,i&&`${y}-centered`,h&&`${y}-scrollable`,l&&v),children:Q.jsx("div",{className:ge(`${e}-content`,n),children:c})})});H_.displayName="ModalDialog";const rC=x.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},o)=>(t=Qe(t,"modal-footer"),Q.jsx(n,{ref:o,className:ge(e,t),...i})));rC.displayName="ModalFooter";const kU={"aria-label":qi.string,onClick:qi.func,variant:qi.oneOf(["white"])},j_=x.forwardRef(({className:e,variant:t,"aria-label":n="Close",...i},o)=>Q.jsx("button",{ref:o,type:"button",className:ge("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...i}));j_.displayName="CloseButton";j_.propTypes=kU;const iC=x.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:i,children:o,...l},c)=>{const h=x.useContext(nC),m=Ey(()=>{h?.onHide(),i?.()});return Q.jsxs("div",{ref:c,...l,children:[o,n&&Q.jsx(j_,{"aria-label":e,variant:t,onClick:m})]})});iC.displayName="AbstractModalHeader";const sC=x.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:i=!1,...o},l)=>(e=Qe(e,"modal-header"),Q.jsx(iC,{ref:l,...o,className:ge(t,e),closeLabel:n,closeButton:i})));sC.displayName="ModalHeader";const VU=e=>x.forwardRef((t,n)=>Q.jsx("div",{...t,ref:n,className:ge(t.className,e)})),PU=VU("h4"),oC=x.forwardRef(({className:e,bsPrefix:t,as:n=PU,...i},o)=>(t=Qe(t,"modal-title"),Q.jsx(n,{ref:o,className:ge(e,t),...i})));oC.displayName="ModalTitle";function LU(e){return Q.jsx(z_,{...e,timeout:null})}function UU(e){return Q.jsx(z_,{...e,timeout:null})}const aC=x.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:i,contentClassName:o,children:l,dialogAs:c=H_,"data-bs-theme":h,"aria-labelledby":m,"aria-describedby":p,"aria-label":y,show:v=!1,animation:E=!0,backdrop:b=!0,keyboard:I=!0,onEscapeKeyDown:L,onShow:k,onHide:H,container:F,autoFocus:q=!0,enforceFocus:z=!0,restoreFocus:X=!0,restoreFocusOptions:Z,onEntered:P,onExit:S,onExiting:C,onEnter:O,onEntering:U,onExited:B,backdropClassName:R,manager:V,...Y},D)=>{const[$,tt]=x.useState({}),[W,M]=x.useState(!1),G=x.useRef(!1),nt=x.useRef(!1),st=x.useRef(null),[ct,gt]=b9(),_t=XR(D,gt),xt=Ey(H),bt=MU();e=Qe(e,"modal");const Ht=x.useMemo(()=>({onHide:xt}),[xt]);function Bt(){return V||yU({isRTL:bt})}function de(wt){if(!Ll)return;const Lt=Bt().getScrollbarWidth()>0,Te=wt.scrollHeight>Fd(wt).documentElement.clientHeight;tt({paddingRight:Lt&&!Te?Pb():void 0,paddingLeft:!Lt&&Te?Pb():void 0})}const ce=Ey(()=>{ct&&de(ct.dialog)});C9(()=>{vy(window,"resize",ce),st.current==null||st.current()});const ye=()=>{G.current=!0},fe=wt=>{G.current&&ct&&wt.target===ct.dialog&&(nt.current=!0),G.current=!1},Nt=()=>{M(!0),st.current=QR(ct.dialog,()=>{M(!1)})},Pe=wt=>{wt.target===wt.currentTarget&&Nt()},Pt=wt=>{if(b==="static"){Pe(wt);return}if(nt.current||wt.target!==wt.currentTarget){nt.current=!1;return}H?.()},St=wt=>{I?L?.(wt):(wt.preventDefault(),b==="static"&&Nt())},De=(wt,Lt)=>{wt&&de(wt),O?.(wt,Lt)},yn=wt=>{st.current==null||st.current(),S?.(wt)},An=(wt,Lt)=>{U?.(wt,Lt),KR(window,"resize",ce)},sr=wt=>{wt&&(wt.style.display=""),B?.(wt),vy(window,"resize",ce)},Rn=x.useCallback(wt=>Q.jsx("div",{...wt,className:ge(`${e}-backdrop`,R,!E&&"show")}),[E,R,e]),We={...n,...$};We.display="block";const jn=wt=>Q.jsx("div",{role:"dialog",...wt,style:We,className:ge(t,e,W&&`${e}-static`,!E&&"show"),onClick:b?Pt:void 0,onMouseUp:fe,"data-bs-theme":h,"aria-label":y,"aria-labelledby":m,"aria-describedby":p,children:Q.jsx(c,{...Y,onMouseDown:ye,className:i,contentClassName:o,children:l})});return Q.jsx(nC.Provider,{value:Ht,children:Q.jsx(fU,{show:v,ref:_t,backdrop:b,container:F,keyboard:!0,autoFocus:q,enforceFocus:z,restoreFocus:X,restoreFocusOptions:Z,onEscapeKeyDown:St,onShow:k,onHide:H,onEnter:De,onEntering:An,onEntered:P,onExit:yn,onExiting:C,onExited:sr,manager:Bt(),transition:E?LU:void 0,backdropTransition:E?UU:void 0,renderBackdrop:Rn,renderDialog:jn})})});aC.displayName="Modal";const qu=Object.assign(aC,{Body:eC,Header:sC,Title:oC,Footer:rC,Dialog:H_,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),BU=["as","disabled"];function zU(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function HU(e){return!e||e.trim()==="#"}function lC({tagName:e,disabled:t,href:n,target:i,rel:o,role:l,onClick:c,tabIndex:h=0,type:m}){e||(n!=null||i!=null||o!=null?e="a":e="button");const p={tagName:e};if(e==="button")return[{type:m||"button",disabled:t},p];const y=E=>{if((t||e==="a"&&HU(n))&&E.preventDefault(),t){E.stopPropagation();return}c?.(E)},v=E=>{E.key===" "&&(E.preventDefault(),y(E))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:l??"button",disabled:void 0,tabIndex:t?void 0:h,href:n,target:e==="a"?i:void 0,"aria-disabled":t||void 0,rel:e==="a"?o:void 0,onClick:y,onKeyDown:v},p]}const jU=x.forwardRef((e,t)=>{let{as:n,disabled:i}=e,o=zU(e,BU);const[l,{tagName:c}]=lC(Object.assign({tagName:n,disabled:i},o));return Q.jsx(c,Object.assign({},o,l,{ref:t}))});jU.displayName="Button";const by=x.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:i,active:o=!1,disabled:l=!1,className:c,...h},m)=>{const p=Qe(t,"btn"),[y,{tagName:v}]=lC({tagName:e,disabled:l,...h}),E=v;return Q.jsx(E,{...y,...h,ref:m,disabled:l,className:ge(c,p,o&&"active",n&&`${p}-${n}`,i&&`${p}-${i}`,h.href&&l&&"disabled")})});by.displayName="Button";const FU={type:qi.string,tooltip:qi.bool,as:qi.elementType},$d=x.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:i=!1,...o},l)=>Q.jsx(e,{...o,ref:l,className:ge(t,`${n}-${i?"tooltip":"feedback"}`)}));$d.displayName="Feedback";$d.propTypes=FU;const Wi=x.createContext({}),F_=x.forwardRef(({id:e,bsPrefix:t,className:n,type:i="checkbox",isValid:o=!1,isInvalid:l=!1,as:c="input",...h},m)=>{const{controlId:p}=x.useContext(Wi);return t=Qe(t,"form-check-input"),Q.jsx(c,{...h,ref:m,type:i,id:e||p,className:ge(n,t,o&&"is-valid",l&&"is-invalid")})});F_.displayName="FormCheckInput";const dd=x.forwardRef(({bsPrefix:e,className:t,htmlFor:n,...i},o)=>{const{controlId:l}=x.useContext(Wi);return e=Qe(e,"form-check-label"),Q.jsx("label",{...i,ref:o,htmlFor:n||l,className:ge(t,e)})});dd.displayName="FormCheckLabel";function qU(e,t){return x.Children.toArray(e).some(n=>x.isValidElement(n)&&n.type===t)}const uC=x.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:i=!1,reverse:o=!1,disabled:l=!1,isValid:c=!1,isInvalid:h=!1,feedbackTooltip:m=!1,feedback:p,feedbackType:y,className:v,style:E,title:b="",type:I="checkbox",label:L,children:k,as:H="input",...F},q)=>{t=Qe(t,"form-check"),n=Qe(n,"form-switch");const{controlId:z}=x.useContext(Wi),X=x.useMemo(()=>({controlId:e||z}),[z,e]),Z=!k&&L!=null&&L!==!1||qU(k,dd),P=Q.jsx(F_,{...F,type:I==="switch"?"checkbox":I,ref:q,isValid:c,isInvalid:h,disabled:l,as:H});return Q.jsx(Wi.Provider,{value:X,children:Q.jsx("div",{style:E,className:ge(v,Z&&t,i&&`${t}-inline`,o&&`${t}-reverse`,I==="switch"&&n),children:k||Q.jsxs(Q.Fragment,{children:[P,Z&&Q.jsx(dd,{title:b,children:L}),p&&Q.jsx($d,{type:y,tooltip:m,children:p})]})})})});uC.displayName="FormCheck";const md=Object.assign(uC,{Input:F_,Label:dd}),cC=x.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:i,id:o,className:l,isValid:c=!1,isInvalid:h=!1,plaintext:m,readOnly:p,as:y="input",...v},E)=>{const{controlId:b}=x.useContext(Wi);return e=Qe(e,"form-control"),Q.jsx(y,{...v,type:t,size:i,ref:E,readOnly:p,id:o||b,className:ge(l,m?`${e}-plaintext`:e,n&&`${e}-${n}`,t==="color"&&`${e}-color`,c&&"is-valid",h&&"is-invalid")})});cC.displayName="FormControl";const $U=Object.assign(cC,{Feedback:$d}),fC=x.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},o)=>(t=Qe(t,"form-floating"),Q.jsx(n,{ref:o,className:ge(e,t),...i})));fC.displayName="FormFloating";const q_=x.forwardRef(({controlId:e,as:t="div",...n},i)=>{const o=x.useMemo(()=>({controlId:e}),[e]);return Q.jsx(Wi.Provider,{value:o,children:Q.jsx(t,{...n,ref:i})})});q_.displayName="FormGroup";function GU({as:e,bsPrefix:t,className:n,...i}){t=Qe(t,"col");const o=DU(),l=OU(),c=[],h=[];return o.forEach(m=>{const p=i[m];delete i[m];let y,v,E;typeof p=="object"&&p!=null?{span:y,offset:v,order:E}=p:y=p;const b=m!==l?`-${m}`:"";y&&c.push(y===!0?`${t}${b}`:`${t}${b}-${y}`),E!=null&&h.push(`order${b}-${E}`),v!=null&&h.push(`offset${b}-${v}`)}),[{...i,className:ge(n,...c,...h)},{as:e,bsPrefix:t,spans:c}]}const hC=x.forwardRef((e,t)=>{const[{className:n,...i},{as:o="div",bsPrefix:l,spans:c}]=GU(e);return Q.jsx(o,{...i,ref:t,className:ge(n,!c.length&&l)})});hC.displayName="Col";const dC=x.forwardRef(({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:i=!1,className:o,htmlFor:l,...c},h)=>{const{controlId:m}=x.useContext(Wi);t=Qe(t,"form-label");let p="col-form-label";typeof n=="string"&&(p=`${p} ${p}-${n}`);const y=ge(o,t,i&&"visually-hidden",n&&p);return l=l||m,n?Q.jsx(hC,{ref:h,as:"label",className:y,htmlFor:l,...c}):Q.jsx(e,{ref:h,className:y,htmlFor:l,...c})});dC.displayName="FormLabel";const mC=x.forwardRef(({bsPrefix:e,className:t,id:n,...i},o)=>{const{controlId:l}=x.useContext(Wi);return e=Qe(e,"form-range"),Q.jsx("input",{...i,type:"range",ref:o,className:ge(t,e),id:n||l})});mC.displayName="FormRange";const pC=x.forwardRef(({bsPrefix:e,size:t,htmlSize:n,className:i,isValid:o=!1,isInvalid:l=!1,id:c,...h},m)=>{const{controlId:p}=x.useContext(Wi);return e=Qe(e,"form-select"),Q.jsx("select",{...h,size:n,ref:m,className:ge(i,e,t&&`${e}-${t}`,o&&"is-valid",l&&"is-invalid"),id:c||p})});pC.displayName="FormSelect";const gC=x.forwardRef(({bsPrefix:e,className:t,as:n="small",muted:i,...o},l)=>(e=Qe(e,"form-text"),Q.jsx(n,{...o,ref:l,className:ge(t,e,i&&"text-muted")})));gC.displayName="FormText";const yC=x.forwardRef((e,t)=>Q.jsx(md,{...e,ref:t,type:"switch"}));yC.displayName="Switch";const YU=Object.assign(yC,{Input:md.Input,Label:md.Label}),_C=x.forwardRef(({bsPrefix:e,className:t,children:n,controlId:i,label:o,...l},c)=>(e=Qe(e,"form-floating"),Q.jsxs(q_,{ref:c,className:ge(t,e),controlId:i,...l,children:[n,Q.jsx("label",{htmlFor:i,children:o})]})));_C.displayName="FloatingLabel";const KU={_ref:qi.any,validated:qi.bool,as:qi.elementType},$_=x.forwardRef(({className:e,validated:t,as:n="form",...i},o)=>Q.jsx(n,{...i,ref:o,className:ge(e,t&&"was-validated")}));$_.displayName="Form";$_.propTypes=KU;const Ja=Object.assign($_,{Group:q_,Control:$U,Floating:fC,Check:md,Switch:YU,Label:dC,Text:gC,Range:mC,Select:pC,FloatingLabel:_C});function XU({show:e,onHide:t,onConfirm:n,isCreating:i=!1}){const[o,l]=x.useState(""),[c,h]=x.useState(!0),m=x.useCallback(E=>{const b=E.target.value;l(b),h(b.trim().length>0&&b.trim().length<=50)},[]),p=x.useCallback(E=>{E.preventDefault();const b=o.trim();b.length>0&&b.length<=50&&(n(b),l(""),h(!0))},[o,n]),y=x.useCallback(()=>{l(""),h(!0),t()},[t]),v=x.useCallback(E=>{E.key==="Enter"&&p(E)},[p]);return Q.jsxs(qu,{show:e,onHide:y,centered:!0,backdrop:"static",keyboard:!1,className:"board-name-modal",style:{zIndex:2001},children:[Q.jsx(qu.Header,{closeButton:!0,children:Q.jsx(qu.Title,{children:"Create New Board"})}),Q.jsxs(Ja,{onSubmit:p,children:[Q.jsx(qu.Body,{children:Q.jsxs(Ja.Group,{children:[Q.jsx(Ja.Label,{children:"Board Name"}),Q.jsx(Ja.Control,{type:"text",value:o,onChange:m,onKeyPress:v,placeholder:"Enter board name...",isInvalid:!c,maxLength:50,autoFocus:!0}),Q.jsx(Ja.Control.Feedback,{type:"invalid",children:"Board name must be between 1 and 50 characters long."}),Q.jsxs(Ja.Text,{className:"text-muted",children:[o.length,"/50 characters"]})]})}),Q.jsxs(qu.Footer,{children:[Q.jsx(by,{variant:"secondary",onClick:y,disabled:i,children:"Cancel"}),Q.jsx(by,{variant:"primary",type:"submit",disabled:!c||o.trim().length===0||i,children:i?"Creating...":"Create Board"})]})]})]})}function QU({allBoards:e,currentBoard:t,onSwitchBoard:n,onCreateBoard:i,onDeleteBoard:o,onSignOut:l,isLoading:c,isCollapsed:h=!1,onToggleSidebar:m,mode:p="boards",onModeChange:y,explanation:v}){const[E,b]=x.useState(!1),[I,L]=x.useState(!1),k=async z=>{try{b(!0),await i(z),L(!1)}catch(X){console.error("Error in sidebar create board:",X)}finally{b(!1)}},H=()=>{L(!0)},F=()=>{L(!1)},q=(z,X)=>{z.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&o(X)};return Q.jsxs(Q.Fragment,{children:[Q.jsx("button",{className:`sidebar-toggle ${h?"sidebar-collapsed":""}`,onClick:m,title:h?"Show Sidebar":"Hide Sidebar",children:h?"►":"◄"}),Q.jsxs("div",{className:`sidebar ${h?"collapsed":""}`,children:[Q.jsx("div",{className:"sidebar-header",children:Q.jsxs("div",{className:"sidebar-mode-switch",children:[Q.jsx("button",{className:`mode-switch-btn ${p==="boards"?"active":""}`,onClick:()=>y&&y("boards"),children:"📋 Boards"}),Q.jsx("button",{className:`mode-switch-btn ${p==="explanation"?"active":""}`,onClick:()=>y&&y("explanation"),children:"📄 Explanation"})]})}),Q.jsx("div",{className:"sidebar-content",children:p==="boards"?Q.jsxs(Q.Fragment,{children:[Q.jsx("div",{className:"boards-section-header",children:Q.jsx("button",{onClick:H,disabled:c||E,className:"new-board-btn",children:E?"Creating...":"+ New Board"})}),Q.jsx("ul",{children:e?.map(z=>Q.jsxs("li",{onClick:()=>!c&&n(z.id),className:t?.id===z.id?"active":"",children:[Q.jsx("span",{className:"board-name",children:z.name}),Q.jsxs("div",{className:"board-actions",children:[z.isOpen&&Q.jsx("span",{className:"open-indicator",children:"●"}),e.length>1&&Q.jsx("button",{className:"delete-btn",onClick:X=>q(X,z.id),title:"Delete board",children:"×"})]})]},z.id))}),c&&Q.jsx("div",{className:"loading-indicator",children:"Loading boards..."}),Q.jsx("div",{className:"sidebar-footer",children:Q.jsx("button",{onClick:l,children:"Sign Out"})})]}):Q.jsx("div",{className:"explanation-content",children:v?Q.jsxs(Q.Fragment,{children:[Q.jsx("div",{className:"explanation-header",children:Q.jsx("h3",{children:v.title})}),Q.jsx("div",{className:"explanation-text",children:v.text.split(`
`).map((z,X)=>Q.jsx("p",{children:z},X))})]}):Q.jsx("div",{className:"explanation-placeholder",children:Q.jsx("p",{children:"Click on a node's explanation button (📄) to view its detailed information here."})})})})]}),Q.jsx(XU,{show:I,onHide:F,onConfirm:k,isCreating:E})]})}function WU({name:e,onSetName:t,user:n,isSaving:i,sidebarCollapsed:o=!1}){const[l,c]=x.useState(!1),[h,m]=x.useState(e||"");x.useEffect(()=>{m(e||"")},[e]);const p=v=>{v.key==="Enter"&&(t(h),c(!1))},y=()=>{c(!0),m(e||"")};return Q.jsx(Q.Fragment,{children:Q.jsx("div",{className:`name ${o?"sidebar-collapsed":""}`,children:Q.jsx("div",{className:"app-container",children:Q.jsxs("header",{className:"app-header",children:[Q.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[Q.jsx("h1",{children:"Launch Flow"}),Q.jsx("span",{style:{color:"#64748b",fontSize:"13px"},children:"•"}),l?Q.jsx("input",{type:"text",value:h,onChange:v=>m(v.target.value),onKeyDown:p,onBlur:()=>{t(h),c(!1)},style:{background:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",padding:"4px 8px",color:"#f1f5f9",fontSize:"14px",minWidth:"120px"},autoFocus:!0}):Q.jsx("button",{onClick:y,style:{background:"none",border:"none",color:"#94a3b8",fontSize:"14px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.15s ease"},onMouseEnter:v=>{v.currentTarget.style.background="rgba(255, 255, 255, 0.05)",v.currentTarget.style.color="#f1f5f9"},onMouseLeave:v=>{v.currentTarget.style.background="none",v.currentTarget.style.color="#94a3b8"},children:e||"Untitled Board"})]}),Q.jsxs("div",{className:"user-info",children:[Q.jsx("p",{children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"}),i&&Q.jsx("span",{className:"save-indicator",children:"💾 Saving"})]})]})})})})}const ZU=({notification:e,onRemove:t})=>{const n=i=>{switch(i){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"📄"}};return Q.jsxs("div",{className:`notification notification-${e.type}`,children:[Q.jsxs("div",{className:"notification-content",children:[Q.jsx("span",{className:"notification-icon",children:n(e.type)}),Q.jsx("span",{className:"notification-message",children:e.message})]}),Q.jsx("button",{className:"notification-close",onClick:()=>t(e.id),children:"×"})]})},JU=({notifications:e,onRemove:t})=>e.length===0?null:Q.jsx("div",{className:"notifications-container",children:e.map(n=>Q.jsx(ZU,{notification:n,onRemove:t},n.id))}),t5=async()=>{try{await oL(fd),console.log("User signed out successfully")}catch(e){throw console.error("Error signing out:",e),e}},Xb=async e=>{try{const t=await fetch(`https://groqchat-zm2y2mo6eq-uc.a.run.app?message=${encodeURIComponent(e)}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json();return console.log(n),n}catch(t){throw console.error("Fetch error:",t),t}},e5=async(e,t)=>{try{const n=`You are an expert educator. Explain the following concept clearly and comprehensively. 

        Context: ${t}

        Instructions:
        - Provide a detailed explanation suitable for learning
        - Mark ALL key concepts with curly-braces tags like {concept} (e.g., {algorithm}, {variable})
        - Use examples where appropriate
        - Structure your response logically
        - CRITICAL: Every important concept MUST be put in currly braces like {concept} (e.g., {algorithm}, {variable})
        - Do not include any meta-commentary, introductions, or conclusions
        - Only provide the educational content requested
        - Start directly with the explanation

        Concept to explain: `,i=`Create a concise summary of the following explanation in exactly 40 words or less.

        CRITICAL REQUIREMENTS:
        - Preserve ALL concepts marked with curly-braces exactly as {concept}
        - EVERY key concept MUST be put in currly braces like {concept} (e.g., {algorithm}, {variable})
        - Do not add any introductory text like "Here is a summary" or "The summary is"
        - Do not add any concluding remarks
        - Start directly with the summary content
        - Use simple language
        - Maintain technical accuracy
        - Do not use bullet points, lists, or any formatting except curly-braces tags
        - Respond ONLY with the summary text

        Text to summarize: `,o=await Xb(n+e),l=await Xb(i+o.response);return{firstResponse:{...o,response:o.response?.replace(/\{/g,"_").replace(/\}/g,"_")},secondResponse:{...l,response:l.response?.replace(/\{/g,"_").replace(/\}/g,"_")}}}catch(n){throw console.error("Error in askAITwice:",n),n}},n5=()=>{const[e,t]=x.useState(null);return x.useEffect(()=>{const i=sL(fd,o=>{t(o),o?console.log("User signed in:",o.uid):console.log("No user signed in")});return()=>i()},[]),{user:e,signOut:async()=>{try{await t5(),t(null)}catch(i){console.error("Error in sign out:",i)}}}},vC=e=>!!(e&&e.uid),oc=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],gl=[],r5=async e=>{if(!vC({uid:e}))throw new Error(Mn.AUTH_REQUIRED);try{const t=d_(Ur,ir.BOARDS),n=KP(t,XP("userId","==",e),QP("createdAt","desc")),i=await A_(n);if(i.empty){const l={id:`board_${Date.now()}`,userId:e,name:"Default Board",createdAt:ve.now(),isOpen:!0};return await R_(Vl(Ur,ir.BOARDS,l.id),l),console.log("Created default board:",l),[l]}const o=i.docs.map(l=>({id:l.id,...l.data()}));return console.log("Fetched all boards:",o),o}catch(t){if(console.error("Fetch all boards error:",t),t.code==="failed-precondition"||t.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:e,name:"Fallback Board (Create Index)",createdAt:ve.now(),isOpen:!0,isFallback:!0}]}throw new Error(Mn.LOAD_FAILED)}},Qb=async e=>{if(!e)return console.warn("No board ID provided for fetching nodes"),oc;try{const t=d_(Ur,ir.BOARDS,e,ir.NODES),n=await A_(t);if(n.empty)return console.log("No nodes found for board, using initial nodes"),oc;const i=n.docs.map(o=>{const l=o.data(),c={...l.data,tokenColors:l.data?.tokenColors||{},previousNode:l.data?.previousNode||null};return{id:o.id,type:l.type,position:l.position,data:c,draggable:l.draggable,style:l.style}});return console.log("Fetched nodes from board:",i),i}catch(t){return console.error("Fetch nodes error:",t),oc}},Wb=async e=>{if(!e)return console.warn("No board ID provided for fetching edges"),gl;try{const t=d_(Ur,ir.BOARDS,e,ir.EDGES),n=await A_(t);if(n.empty)return console.log("No edges found for board, using initial edges"),gl;const i=n.docs.map(o=>({id:o.id,...o.data()}));return console.log("Fetched edges from board:",i),i}catch(t){return console.error("Fetch edges error:",t),gl}},i5=async(e,t)=>{if(!e||!t?.length){console.warn("Invalid parameters for saving nodes:",{boardId:e,nodesCount:t?.length});return}try{const n=hR(Ur);t.forEach(i=>{const o=Vl(Ur,ir.BOARDS,e,ir.NODES,i.id),l={type:i.type,data:i.data,position:i.position,updatedAt:ve.now()};i.draggable!=null&&(l.draggable=i.draggable),i.style!=null&&(l.style=i.style),n.set(o,l)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(Mn.SAVE_FAILED)}},s5=async(e,t)=>{if(!e||!t?.length){console.warn("Invalid parameters for saving edges:",{boardId:e,edgesCount:t?.length});return}try{const n=hR(Ur);t.forEach(i=>{const o=Vl(Ur,ir.BOARDS,e,ir.EDGES,i.id),l={source:i.source,target:i.target,updatedAt:ve.now()};i.sourceHandle!=null&&(l.sourceHandle=i.sourceHandle),i.targetHandle!=null&&(l.targetHandle=i.targetHandle),i.style!=null&&(l.style=i.style),i.markerEnd!=null&&(l.markerEnd=i.markerEnd),n.set(o,l)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(Mn.SAVE_FAILED)}},o5=async(e,t,n)=>{if(!vC({uid:e}))throw new Error(Mn.AUTH_REQUIRED);try{const i={id:`board_${Date.now()}`,userId:e,name:t||`Board ${n.length+1}`,createdAt:ve.now(),isOpen:!1};return console.log("Creating board:",i),await R_(Vl(Ur,ir.BOARDS,i.id),i),console.log("Board created successfully:",i),i}catch(i){throw console.error("Error creating new board:",i),i.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):i.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},a5=async e=>{if(!e)throw new Error("Board ID is required for deletion");try{await n6(Vl(Ur,ir.BOARDS,e)),console.log("Board deleted successfully")}catch(t){throw console.error("Error deleting board:",t),t.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):t}},tl=async(e,t)=>{if(!e||!t)throw new Error("Board ID and updates are required");try{const n={...t,updatedAt:ve.now()};await R_(Vl(Ur,ir.BOARDS,e),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},l5=(e,t={})=>{const[n,i,o]=BM([]),[l,c,h]=zM([]),[m,p]=x.useState(!0),[y,v]=x.useState(!1),[E,b]=x.useState(!1),[I,L]=x.useState([]),[k,H]=x.useState(null),F=x.useRef(null),{showSuccess:q,showError:z,showInfo:X}=t,Z=R=>{const V=R.find(Y=>Y.isOpen===!0);if(V)return V;if(R.length>0){const Y={...R[0],isOpen:!0};return tl(Y.id,Y).catch(console.error),Y}return null};x.useEffect(()=>{(async()=>{if(e)try{p(!0);const V=await r5(e.uid);L(V);const Y=V.some(W=>W.isFallback);Y&&z&&z("Database index missing. Please create the required Firestore index. Check console for details.");const D=Z(V);if(!D){console.error("No board found for user"),z&&z("No boards found. Creating a default board..."),i(oc),c(gl);return}H(D);const[$,tt]=await Promise.all([Qb(D.id),Wb(D.id)]);i($),c(tt),X&&!Y&&X("Board loaded successfully!")}catch(V){console.error("Error loading initial data:",V),z&&z("Failed to load board data. Using default board."),i(oc),c(gl)}finally{p(!1)}})()},[e,i,c]);const P=x.useCallback(async(R,V,Y)=>{F.current&&clearTimeout(F.current);const D=setTimeout(async()=>{try{b(!0);const $=[];V&&V.length>0&&$.push(i5(R,V)),Y&&Y.length>0&&$.push(s5(R,Y)),$.length>0&&(await Promise.all($),console.log("Auto-save completed successfully"))}catch($){console.error("Auto-save failed:",$),z&&z("Failed to save changes automatically")}finally{b(!1),F.current=null}},1e3);F.current=D},[z]);x.useEffect(()=>(!m&&k&&!y&&!k.isFallback&&P(k.id,n,l),()=>{F.current&&clearTimeout(F.current)}),[n,l,m,k,y]);const S=x.useCallback(async R=>{try{if(k?.id===R)return;if(k?.isFallback||I.find(Y=>Y.id===R)?.isFallback){z&&z("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(v(!0),k&&!k.isFallback){const Y={...k,isOpen:!1};await tl(k.id,Y),L(D=>D.map($=>$.id===k.id?Y:$))}const V=I.find(Y=>Y.id===R);if(V){const Y={...V,isOpen:!0};await tl(R,Y),H(Y),L(tt=>tt.map(W=>W.id===R?Y:W));const[D,$]=await Promise.all([Qb(R),Wb(R)]);i(D),c($),q&&q(`Switched to "${Y.name}"`)}else console.error("Board not found:",R),z&&z("Board not found")}catch(V){console.error("Error switching board:",V),z&&z("Failed to switch board. Please try again.")}finally{v(!1)}},[k,I,i,c,q,z]),C=x.useCallback(async R=>{try{if(!e)return z&&z("You must be logged in to create a board"),null;X&&X("Creating new board...");const V=await o5(e.uid,R||null,I);if(V){if(k&&!k.isFallback){const D={...k,isOpen:!1};tl(k.id,D).catch(console.error)}const Y={...V,isOpen:!0};return L(D=>{const $=D.map(tt=>tt.id===k?.id?{...tt,isOpen:!1}:tt);return[Y,...$]}),H(Y),tl(V.id,Y).catch(console.error),i([{id:"1",type:"staticEditable",data:{label:R||"New Board"},position:{x:250,y:25},draggable:!1}]),c(gl),q&&q(`Board "${V.name}" created and opened!`),Y}else return z&&z("Failed to create board. Please try again."),null}catch(V){return z&&z(`Failed to create board: ${V.message}`),null}},[e,I,k,q,z,X,i,c]),O=x.useCallback(async R=>{try{if(I.length<=1){z&&z("Cannot delete the last board!");return}if(!I.find(Y=>Y.id===R)){console.error("Board not found for deletion"),z&&z("Board not found");return}if(X&&X("Deleting board..."),k?.id===R){const Y=I.find(D=>D.id!==R);Y&&await S(Y.id)}await a5(R),L(Y=>Y.filter(D=>D.id!==R)),q&&q("Board deleted successfully!")}catch(V){console.error("Error deleting board:",V),z&&z("Failed to delete board. Please try again.")}},[I,k,S,q,z,X]),U=x.useCallback(async R=>{if(k&&k.name!==R){const V={...k,name:R};H(V),L(Y=>Y.map(D=>D.id===k.id?V:D));try{await tl(k.id,V),console.log("Board name updated successfully")}catch(Y){console.error("Error updating board name:",Y)}}},[k]),B=x.useCallback(()=>{F.current&&(clearTimeout(F.current),F.current=null),L([]),H(null),i([]),c([]),p(!0),v(!1),b(!1)},[i,c,F]);return{nodes:n,edges:l,allBoards:I,currentBoard:k,isLoading:m,isSwitchingBoard:y,isSaving:E,onNodesChange:o,onEdgesChange:h,setNodes:i,switchToBoard:S,createNewBoard:C,deleteBoard:O,updateBoardName:U,clearBoardState:B}},u5=({allBoards:e,currentBoard:t,createNewBoard:n,switchToBoard:i})=>{x.useEffect(()=>{const o=l=>{if((l.ctrlKey||l.metaKey)&&l.key==="n"&&(l.preventDefault(),n()),(l.ctrlKey||l.metaKey)&&l.key>="1"&&l.key<="9"){l.preventDefault();const c=parseInt(l.key)-1;e[c]&&e[c].id!==t?.id&&i(e[c].id)}};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[e,t,n,i])},c5=()=>{const[e,t]=x.useState([]),n=x.useCallback(p=>{const y=Date.now().toString(),v={id:y,timestamp:new Date,...p};return t(E=>[...E,v]),p.autoRemove!==!1&&setTimeout(()=>{i(y)},p.duration||5e3),y},[]),i=x.useCallback(p=>{t(y=>y.filter(v=>v.id!==p))},[]),o=x.useCallback(()=>{t([])},[]),l=x.useCallback((p,y={})=>n({type:"success",message:p,...y}),[n]),c=x.useCallback((p,y={})=>n({type:"error",message:p,duration:7e3,...y}),[n]),h=x.useCallback((p,y={})=>n({type:"info",message:p,...y}),[n]),m=x.useCallback((p,y={})=>n({type:"warning",message:p,duration:6e3,...y}),[n]);return{notifications:e,addNotification:n,removeNotification:i,clearAllNotifications:o,showSuccess:l,showError:c,showInfo:h,showWarning:m}},EC=e=>{const t=[],n=e.split("_");for(let i=0;i<n.length;i++)if(i%2===0)n[i].split(/\s+/).filter(l=>l.trim()!=="").forEach(l=>{t.push({word:l.trim()})});else{const o=n[i].trim();o.split(/\s+/).filter(c=>c.trim()!=="").forEach(c=>{t.push({word:c.trim(),myConcept:o})})}return t},Zb=()=>{const e=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return e[Math.floor(Math.random()*e.length)]},f5=e=>{const t=e.replace("#",""),n=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2,2),16),o=parseInt(t.substr(4,2),16),l=30,c=Math.min(255,Math.max(0,n+(Math.random()-.5)*l*2)),h=Math.min(255,Math.max(0,i+(Math.random()-.5)*l*2)),m=Math.min(255,Math.max(0,o+(Math.random()-.5)*l*2));return`#${Math.round(c).toString(16).padStart(2,"0")}${Math.round(h).toString(16).padStart(2,"0")}${Math.round(m).toString(16).padStart(2,"0")}`},h5=(e,t)=>{const o=[0,45,90,135,180,225,270,315];for(const c of o){const h=c*Math.PI/180,m=e.x+Math.cos(h)*200,p=e.y+Math.sin(h)*200;if(!t.some(v=>Math.sqrt(Math.pow(v.position.x-m,2)+Math.pow(v.position.y-p,2))<150))return{x:m,y:p}}const l=Math.random()*2*Math.PI;return{x:e.x+Math.cos(l)*(200+Math.random()*100),y:e.y+Math.sin(l)*(200+Math.random()*100)}},d5=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,m5=(e,t)=>`edge_${e}_${t}`,p5=(e,t,n,i,o,l,c)=>({id:d5(),type:"draggableEditable",position:e,draggable:!0,data:{label:t,summary:i,full_text:n,myColor:o,tokenColors:{},previousNode:c}}),g5=(e,t,n)=>({id:m5(e,t),source:e,target:t,sourceHandle:null,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:dc.ArrowClosed,color:n}}),TC=e=>{const t=e.replace("#",""),n=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2,2),16),o=parseInt(t.substr(4,2),16);return(.299*n+.587*i+.114*o)/255>.5?"#000000":"#FFFFFF"},wC=(e,t)=>{const n=e.replace("#",""),i=parseInt(n.substr(0,2),16),o=parseInt(n.substr(2,2),16),l=parseInt(n.substr(4,2),16),c=Math.max(0,Math.floor(i*(1-t/100))),h=Math.max(0,Math.floor(o*(1-t/100))),m=Math.max(0,Math.floor(l*(1-t/100)));return`#${c.toString(16).padStart(2,"0")}${h.toString(16).padStart(2,"0")}${m.toString(16).padStart(2,"0")}`},bC=x.createContext(null),y5=({children:e,nodes:t,onNodesChange:n,onEdgesChange:i,setNodes:o,showExplanation:l})=>{const c=x.useCallback((h,m,p,y,v,E)=>{const b=t.find(X=>X.id===m);if(!b)return null;const I=b.data.tokenColors||{},L=h.myConcept||h.word;if(I[L])return console.log(`Token "${L}" is already colored, ignoring click`),null;let k;y==="staticEditable"?k=Zb():k=v?f5(v):Zb();const H={...I};h.myConcept?H[h.myConcept]=k:H[h.word]=k,o(X=>X.map(Z=>Z.id===m?{...Z,data:{...Z.data,tokenColors:H}}:Z));const F=h5(p,t),q=p5(F,"Loading...","Loading...","Loading...",k,y,m);q.data.isLoading=!0;const z=g5(m,q.id,k);return n([{type:"add",item:q}]),i([{type:"add",item:z}]),e5(h.word,E||"").then(X=>{const Z=X.firstResponse?.response||h.word,P=X.secondResponse?.response||h.word;o(S=>S.map(C=>C.id===q.id?{...C,data:{...C.data,label:P,summary:P,full_text:Z,isLoading:!1}}:C))}).catch(()=>{o(X=>X.map(Z=>Z.id===q.id?{...Z,data:{...Z.data,label:h.word,summary:h.word,full_text:h.word,isLoading:!1}}:Z))}),k},[t,n,i,o]);return Q.jsx(bC.Provider,{value:{handleTokenClick:c,setNodes:o,showExplanation:l},children:e})},SC=()=>{const e=x.useContext(bC);if(!e)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return e},AC=({size:e="medium",color:t="#4f86f7"})=>Q.jsx("div",{className:`loading-spinner ${e}`,children:Q.jsx("div",{className:"spinner-ring",style:{borderTopColor:t}})});function _5({data:e,id:t}){const[n,i]=x.useState(!1),[o,l]=x.useState(e.summary||e.label||"Static Node"),[c,h]=x.useState(!1),{handleTokenClick:m,showExplanation:p}=SC(),{getNode:y,setViewport:v}=Nc();x.useEffect(()=>{n||l(e.summary||e.label||"Static Node")},[e.summary,e.label,n]);const E=x.useMemo(()=>EC(o),[o]),b=x.useCallback((S,C)=>{C.stopPropagation(),console.log("Static Token clicked:",S),m(S,t,{x:0,y:0},"staticEditable",e.myColor,e.summary||e.label||"Draggable Node")},[t,m,e.myColor]),I=x.useCallback(S=>{S.stopPropagation(),i(!0)},[]),L=x.useCallback(()=>{i(!1)},[]),k=x.useCallback(S=>{S.stopPropagation()},[]),H=x.useCallback(S=>{S.stopPropagation(),S.key==="Enter"&&L(),S.key==="Escape"&&(l(e.summary||e.label||"Static Node"),i(!1))},[L,e.summary,e.label]),F=x.useCallback(S=>{S.stopPropagation(),h(!c)},[c]),q=x.useCallback(S=>{S.stopPropagation(),p&&p(o,e.full_text||"No detailed information available.")},[p,o,e.full_text]),z=x.useCallback(S=>{if(S.stopPropagation(),e.previousNode){const C=y(e.previousNode);if(C){const{x:O,y:U}=C.position;v({x:-O+200,y:-U+100,zoom:1},{duration:500})}}},[e.previousNode,y,v]),X=x.useMemo(()=>{const S=e.tokenColors||{};return E.map((C,O)=>{const U=C.myConcept||C.word,B=S[U],R=!B;return Q.jsxs("span",{className:`word-token ${R?"":"disabled"} ${C.myConcept?"concept-highlight":""}`,style:{backgroundColor:B||"transparent",color:B?e.myColor||"#ffffff":"inherit",border:B?`1px solid ${B}`:""},onClick:V=>R?b(C,V):V.stopPropagation(),children:[C.word,O<E.length-1?" ":""]},O)})},[E,b,e.tokenColors,e.myColor]),Z=x.useMemo(()=>Q.jsxs("div",{className:"node-buttons",children:[e.previousNode&&Q.jsx("button",{className:"node-expand-btn previous-node-btn",onClick:z,title:"Go to previous node",children:"←"}),E.length>5&&Q.jsx("button",{className:"node-expand-btn",onClick:F,title:c?"Show less":"Show more",children:c?"−":"+"}),Q.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:q,title:"Show full text",children:"📄"})]}),[E.length,F,c,q,e.previousNode,z]),P=x.useMemo(()=>e.isLoading?Q.jsxs("div",{className:"node-loading-content",children:[Q.jsx(AC,{size:"small",color:e.myColor||"#4f86f7"}),Q.jsx("span",{className:"loading-text",children:"Loading concept..."})]}):n?Q.jsx("input",{type:"text",value:o,onChange:S=>l(S.target.value),onBlur:L,onKeyDown:H,onClick:k,className:"node-input nodrag",autoFocus:!0}):Q.jsxs("div",{className:"node-content-word",children:[Q.jsxs("div",{onClick:I,children:[X,E.length>5&&!c&&Q.jsx("span",{className:"token-truncation",children:"..."})]}),Z]}),[n,o,c,E.length,I,L,H,k,X,Z]);return Q.jsxs("div",{className:"static-editable-node nodrag",style:{backgroundColor:e.myColor,color:e.myColor?TC(e.myColor):"",border:e.myColor?`2px solid ${wC(e.myColor,20)}`:""},children:[Q.jsx("div",{className:"node-content",children:P}),Q.jsx(Gs,{type:"source",position:At.Bottom,id:"bottom-source"}),Q.jsx(Gs,{type:"target",position:At.Bottom,id:"bottom-target"})]})}function v5({data:e,id:t}){const[n,i]=x.useState(!1),[o,l]=x.useState(e.summary||e.label||"Draggable Node"),[c,h]=x.useState(e.expanded||!1),{getNodes:m,getNode:p,setViewport:y}=Nc(),{handleTokenClick:v,showExplanation:E}=SC();x.useEffect(()=>{n||l(e.summary||e.label||"Draggable Node")},[e.summary,e.label,n]);const b=x.useMemo(()=>EC(o),[o]),I=x.useMemo(()=>c||b.length<=5?b:b.slice(0,5),[b,c]),L=x.useCallback(()=>!0,[]),k=x.useCallback((O,U)=>{U.stopPropagation();const R=m().find(Y=>Y.id===t);return R?v(O,t,R.position,R.type||"draggableEditable",e.myColor,e.summary||e.label||"Draggable Node"):void 0},[t,m,v,e.myColor]),H=x.useCallback(O=>{O.stopPropagation(),i(!0)},[]),F=x.useCallback(()=>{i(!1)},[]),q=x.useCallback(O=>{O.stopPropagation()},[]),z=x.useCallback(O=>{O.stopPropagation(),O.key==="Enter"&&F(),O.key==="Escape"&&(l(e.summary||e.label||"Draggable Node"),i(!1))},[F,e.summary,e.label]),X=x.useCallback(O=>{O.stopPropagation(),h(!c),!c&&e.onExpand&&e.onExpand()},[c,e.onExpand]),Z=x.useCallback(O=>{O.stopPropagation(),E&&E(o,e.full_text||"No detailed information available.")},[E,o,e.full_text]),P=x.useCallback(O=>{if(O.stopPropagation(),e.previousNode){const U=p(e.previousNode);if(U){const{x:B,y:R}=U.position;y({x:-B+200,y:-R+100,zoom:1},{duration:500})}}},[e.previousNode,p,y]),S=x.useMemo(()=>{const O={};return I.forEach(U=>{const B=U.myConcept||U.word;O[B]||(O[B]=[]),O[B].push(U)}),O},[I]),C=x.useMemo(()=>e.isLoading?Q.jsxs("div",{className:"node-loading-content",children:[Q.jsx(AC,{size:"small",color:e.myColor||"#4f86f7"}),Q.jsx("span",{className:"loading-text",children:"Loading concept..."})]}):n?Q.jsx("input",{type:"text",value:o,onChange:O=>l(O.target.value),onBlur:F,onKeyDown:z,onClick:q,className:"node-input nodrag",autoFocus:!0}):Q.jsxs("div",{className:"node-content-word",children:[Q.jsxs("div",{onClick:H,children:[I.map((O,U)=>{const B=e.tokenColors||{},R=O.myConcept||O.word,V=B[R],Y=L()&&!V;return Q.jsxs("span",{className:`word-token ${Y?"":"disabled"} ${O.myConcept?"concept-highlight":""}`,style:{backgroundColor:V||"transparent",color:V?e.myColor||"#ffffff":"inherit",border:V?`1px solid ${V}`:""},onClick:D=>Y?k(O,D):D.stopPropagation(),children:[O.word,U<I.length-1?" ":""]},U)}),b.length>5&&!c&&Q.jsx("span",{className:"token-truncation",children:"..."})]}),Q.jsxs("div",{className:"node-buttons",children:[e.previousNode&&Q.jsx("button",{className:"node-expand-btn previous-node-btn",onClick:P,title:"Go to previous node",children:"←"}),b.length>5&&Q.jsx("button",{className:"node-expand-btn",onClick:X,title:c?"Show less":"Show more",children:c?"−":"+"}),Q.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:Z,title:"Show full text",children:"📄"})]})]}),[n,o,I,b,c,S,H,F,z,q,X,Z,k,L,e.previousNode,P,e.tokenColors,e.myColor,e.isLoading]);return Q.jsxs("div",{className:"draggable-editable-node",style:{background:e.myColor,color:e.myColor?TC(e.myColor):"",border:e.myColor?`2px solid ${wC(e.myColor,20)}`:""},children:[Q.jsx("div",{className:"node-content",children:C}),Q.jsx(Gs,{type:"source",position:At.Bottom,id:"bottom-source"}),Q.jsx(Gs,{type:"target",position:At.Bottom,id:"bottom-target"})]})}const E5={staticEditable:_5,draggableEditable:v5};function T5(){const[e,t]=x.useState(!1),[n,i]=x.useState("boards"),[o,l]=x.useState(null),{user:c,signOut:h}=n5(),{notifications:m,removeNotification:p,showSuccess:y,showError:v,showInfo:E}=c5(),{nodes:b,edges:I,allBoards:L,currentBoard:k,isSwitchingBoard:H,isSaving:F,onNodesChange:q,onEdgesChange:z,setNodes:X,switchToBoard:Z,createNewBoard:P,deleteBoard:S,updateBoardName:C,clearBoardState:O}=l5(c,{showSuccess:y,showError:v,showInfo:E});u5({allBoards:L,currentBoard:k,createNewBoard:P,switchToBoard:Z});const U=async()=>{await h(),O()},B=()=>{t(!e)},R=x.useCallback((D,$)=>{l({title:D,text:$}),i("explanation"),e&&t(!1)},[e]),V=x.useCallback(D=>{i(D)},[]),Y=x.useCallback(D=>{const $={id:`e${D.source}-${D.target}`,source:D.source,target:D.target,sourceHandle:D.sourceHandle,targetHandle:D.targetHandle};z([{type:"add",item:$}])},[z]);return c?Q.jsxs(Q.Fragment,{children:[Q.jsx(QU,{allBoards:L,currentBoard:k,onSwitchBoard:Z,onCreateBoard:async D=>{await P(D)},onDeleteBoard:S,onSignOut:U,isLoading:H,isCollapsed:e,onToggleSidebar:B,mode:n,onModeChange:V,explanation:o}),Q.jsx(WU,{name:k?.name||"Loading...",onSetName:C,user:c,isSaving:F,sidebarCollapsed:e}),Q.jsx(JU,{notifications:m,onRemove:p}),Q.jsx("div",{className:`reactflow-board-container ${e?"sidebar-collapsed":"with-sidebar"}`,children:Q.jsx(y5,{nodes:b,onNodesChange:q,onEdgesChange:z,setNodes:X,showExplanation:R,children:Q.jsxs(_1,{nodes:b,edges:I,onNodesChange:q,onEdgesChange:z,onConnect:Y,nodeTypes:E5,connectionMode:$s.Loose,fitView:!0,children:[Q.jsx(YM,{}),Q.jsx(JM,{variant:Ar.Cross,gap:30,size:10,lineWidth:.5,color:"#616161"})]})})})]}):Q.jsx(E9,{})}function w5(){return Q.jsx(T5,{})}const RC=document.getElementById("root");if(!RC)throw new Error("Failed to find the root element");sI.createRoot(RC).render(Q.jsx(x.StrictMode,{children:Q.jsx(w5,{})}));
